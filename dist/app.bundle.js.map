{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/utils.js","webpack:///./src/ui/screens/common/audio-media-template.html","webpack:///./src/ui/screens/lists/lesson-template.html","webpack:///./src/ui/screens/landscape/specimen-tiles-template.html","webpack:///(webpack)/hot sync nonrecursive ^\\.\\/log$","webpack:///./src/ui/screens/common/image-slider-template.html","webpack:///./src/ui/screens/common/rights-attribution-template.html","webpack:///./src/ui/screens/common/look-alikes-link-template.html","webpack:///./src/ui/screens/common/linked-taxa-lookalike-template.html","webpack:///./src/ui/screens/common/linked-taxa-relationship-template.html","webpack:///./src/ui/screens/common/id-box-template.html","webpack:///./src/ui/screens/common/info-detail-slider-template.html","webpack:///./src/ui/screens/common/info-slider-template.html","webpack:///./src/ui/screens/common/inat-box-template.html","webpack:///./src/ui/screens/common/calendar-template.html","webpack:///./src/ui/screens/common/taxa-box-template.html","webpack:///./src/ui/screens/common/badge-template.html","webpack:///./src/ui/screens/cards/card-template.html","webpack:///./src/ui/screens/cards/taxon-card-template.html","webpack:///./src/ui/screens/cards/non-taxon-card-template.html","webpack:///./src/ui/screens/lists/species-table-template.html","webpack:///./src/ui/screens/home/home-lesson-intro-video-template.html","webpack:///./src/ui/screens/lists/species-list-definition-insert.html","webpack:///./src/ui/screens/progress/score-summary-template.html","webpack:///./src/ui/screens/progress/score-summary-row-template.html","webpack:///./src/ui/screens/progress/score-summary-no-row-template.html","webpack:///./src/ui/screens/cards/test-card-template.html","webpack:///./src/ui/screens/common/language-selection-template.html","webpack:///./src/ui/create-guide-modal/species-search-options-template.html","webpack:///./src/ui/create-guide-modal/location-template.html","webpack:///./src/ui/create-guide-modal/inat-user-template.html","webpack:///./src/ui/create-guide-modal/categories-template.html","webpack:///./src/ui/create-guide-modal/species-in-guide-editor-template.html","webpack:///./src/ui/create-guide-modal/species-editor-template.html","webpack:///./src/ui/create-guide-modal/species-picker-template.html","webpack:///./src/ui/create-guide-modal/species-search-template.html","webpack:///./src/ui/create-guide-modal/species-summary-template.html","webpack:///./src/ui/create-guide-modal/common/actions-template.html","webpack:///./src/ui/fixtures/glossary-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-filters-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-questions-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-summary-template.html","webpack:///./src/ui/screens/lists/lesson-list-header-template.html","webpack:///./src/ui/screens/home/home-lesson-intro-text-template.html","webpack:///./src/ui/screens/lists/lesson-edit-template.html","webpack:///./src/ui/screens/lists/lesson-list-template.html","webpack:///./src/ui/fixtures/settings-template.html","webpack:///./src/ui/fixtures/login-template.html","webpack:///./src/ui/fixtures/logout-template.html","webpack:///./src/ui/fixtures/language-template.html","webpack:///./src/ui/fixtures/navigation-portrait-template.html","webpack:///./src/ui/fixtures/navigation-left-template.html","webpack:///./src/ui/fixtures/navigation-right-template.html","webpack:///./src/ui/screens/text-entry/text-entry-templates.html","webpack:///./src/ui/screens/text-entry/text-entry-portrait-templates.html","webpack:///./src/ui/screens/multichoice/multi-strips-template.html","webpack:///./src/ui/screens/multichoice/multi-strips-with-images.html","webpack:///./src/ui/screens/text-entry/text-complete-template.html","webpack:///./src/ui/screens/cards/cultivar-card-template.html","webpack:///./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html","webpack:///./src/ui/screens/multichoice/horizontal-strips.html","webpack:///./src/modals.html","webpack:///./src/ui/css/snapdragon-colours.css?5b4a","webpack:///./src/ui/css/snapdragon-colours.css","webpack:///./src/ui/css/snapdragon.css?662e","webpack:///./src/ui/css/snapdragon.css","webpack:///./src/ui/css/common.css?6547","webpack:///./src/ui/css/common.css","webpack:///./src/ui/css/species-list.css?1eb5","webpack:///./src/ui/css/species-list.css","webpack:///./src/ui/css/snapdragon-media.css?6f1e","webpack:///./src/ui/css/snapdragon-media.css","webpack:///./src/ui/css/groups/create-guide.css?c551","webpack:///./src/ui/css/groups/create-guide.css","webpack:///./src/redux/actions/action-types.js","webpack:///./src/ui/helpers/enum-helper.js","webpack:///./src/snapdragon-config/lesson-config.js","webpack:///./src/redux/reducers/config-reducer.js","webpack:///./src/redux/reducers/species-reducers.js","webpack:///./src/redux/reducers/initial-state/initial-progress-state.js","webpack:///./src/redux/reducers/lesson-reducers.js","webpack:///./src/redux/reducers/quick-fire-reducers.js","webpack:///./src/redux/store.js","webpack:///./src/redux/reducers/progress-reducers.js","webpack:///./src/redux/reducers/layout-reducers.js","webpack:///./src/redux/middleware/logger.js","webpack:///./src/ui/dom.js","webpack:///./src/snapdragon-engine/round-plan-handler.js","webpack:///./src/api/botanical-latin.js","webpack:///./src/ui/helpers/data-checking.js","webpack:///./src/ui/helpers/traits-handler.js","webpack:///./src/api/traits/traits-for-tests.js","webpack:///./src/snapdragon-engine/bonus/tests/trait-test.js","webpack:///./src/snapdragon-engine/bonus/tests/birdsong-test.js","webpack:///./src/admin/api/enums.js","webpack:///./src/api/firebase/firestore.js","webpack:///./src/api/firebase/credentials.js","webpack:///./src/snapdragon-engine/bonus/tests/lookalike-test.js","webpack:///./src/api/snapdragon/iconic-taxa.js","webpack:///./src/snapdragon-engine/bonus/tests/definition-test.js","webpack:///./src/snapdragon-engine/bonus/bonus-test-handler.js","webpack:///./src/snapdragon-engine/provider/provider-test-handler.js","webpack:///./src/redux/actions/action-creators.js","webpack:///./src/ui/helpers/class-behaviour.js","webpack:///./src/ui/helpers/test-handler.js","webpack:///./src/ui/screens/lists/lesson-state-helper.js","webpack:///./src/ui/helpers/templating.js","webpack:///./src/ui/screens/common/rights-attribution.js","webpack:///./src/ui/screens/common/image-slider.js","webpack:///./src/ui/helpers/image-handler.js","webpack:///./src/ui/helpers/icon-handler.js","webpack:///./src/xeno-canto/birdsong.js","webpack:///./src/ui/screens/common/look-alikes.js","webpack:///./src/ui/screens/common/linked-taxa.js","webpack:///./src/ui/screens/common/info-detail-slider.js","webpack:///./src/ui/screens/common/info-slider.js","webpack:///./src/geo/geo.js","webpack:///./src/api/inat/inat.js","webpack:///./src/wikipedia/wiki-modal.js","webpack:///./src/ui/screens/common/inat-box.js","webpack:///./src/ui/screens/common/calendar.js","webpack:///./src/api/snapdragon/infraspecifics.js","webpack:///./src/ui/screens/common/taxa-box.js","webpack:///./src/ui/screens/common/badge.js","webpack:///./src/ui/screens/cards/card.js","webpack:///./src/ui/screens/cards/taxon-card.js","webpack:///./src/api/traits/trait-types.js","webpack:///./src/api/glossary/lichen.js","webpack:///./src/api/snapdragon/non-taxa.js","webpack:///./src/ui/screens/cards/non-taxon-card.js","webpack:///./src/ui/screens/lists/species-table.js","webpack:///./src/ui/screens/lists/video-handler.js","webpack:///./src/ui/screens/home/home-lesson-intro-video.js","webpack:///./src/ui/screens/lists/species-list-definition-insert.js","webpack:///./src/ui/screens/lists/species-list.js","webpack:///./src/ui/helpers/collection-handler.js","webpack:///./src/ui/screens/lists/lesson-state-handler.js","webpack:///./src/ui/screens/progress/score-summary-handler.js","webpack:///./src/ui/screens/progress/score-summary.js","webpack:///./src/ui/screens/cards/test-card.js","webpack:///./src/ui/screens/common/language-selection.js","webpack:///./src/ui/helpers/inat-autocomplete.js","webpack:///./src/ui/create-guide-modal/common/snapdragon-switch.js","webpack:///./src/ui/create-guide-modal/location.js","webpack:///./src/ui/create-guide-modal/inat-user.js","webpack:///./src/snapdragon-config/snapdragon-iconic-taxa.js","webpack:///./src/ui/create-guide-modal/species-in-guide-editor.js","webpack:///./src/ui/create-guide-modal/species-editor.js","webpack:///./src/ui/create-guide-modal/species-search.js","webpack:///./src/ui/create-guide-modal/create-guide.js","webpack:///./src/ui/create-guide-modal/species-search-options.js","webpack:///./src/ui/create-guide-modal/species-picker.js","webpack:///./src/ui/create-guide-modal/categories.js","webpack:///./src/ui/create-guide-modal/common/save-guide.js","webpack:///./src/ui/quick-fire-modal/quick-fire-api.js","webpack:///./src/ui/quick-fire-modal/quick-fire-ui.js","webpack:///./src/ui/quick-fire-modal/quick-fire-logic.js","webpack:///./src/ui/quick-fire-modal/quick-fire.js","webpack:///./src/ui/screens/lists/lesson.js","webpack:///./src/ui/screens/home/home-lesson-intro-text.js","webpack:///./src/ui/screens/home/home-lesson-intro.js","webpack:///./src/ui/screens/lists/lesson-edit.js","webpack:///./src/ui/screens/lists/lesson-list-scroll-handler.js","webpack:///./src/ui/screens/lists/lesson-list-event-handler.js","webpack:///./src/ui/screens/lists/lesson-custom.js","webpack:///./src/ui/screens/lists/lesson-list.js","webpack:///./src/ui/helpers/cookie-handler.js","webpack:///./src/ui/screens/lists/lesson-list-header.js","webpack:///./src/ui/fixtures/settings.js","webpack:///./src/ui/fixtures/login.js","webpack:///./src/ui/fixtures/language.js","webpack:///./src/ui/fixtures/navigation.js","webpack:///./src/ui/screens/text-entry/text-entry.js","webpack:///./src/snapdragon-engine/pool-handler.js","webpack:///./src/ui/screens/multichoice/multi-strips.js","webpack:///./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question.js","webpack:///./src/ui/screens/bonus/bonus-test.js","webpack:///./src/ui/screens/landscape/specimen-tiles.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question.js","webpack:///./src/ui/screens/multichoice/horizontal-strips.js","webpack:///./src/ui/helpers/function-lookups.js","webpack:///./src/ui/screens/cards/non-taxon-card-specimen-tiles.js","webpack:///./src/ui/screens/text-entry/species-text-entry.js","webpack:///./src/ui/screens/progress/summary.js","webpack:///./src/ui/screens/progress/history.js","webpack:///./src/ui/screens/text-entry/text-complete.js","webpack:///./src/ui/screens/cards/cultivar-card.js","webpack:///./src/ui/screens/bonus/bonus-specimen-tiles.js","webpack:///./src/ui/screens/media/landscape/media-players.js","webpack:///./src/redux/subscriptions.js","webpack:///./src/redux/observe-store.js","webpack:///./src/ui/helpers/score-handler.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler.js","webpack:///./src/snapdragon-config/screen-layouts.js","webpack:///./src/snapdragon-config/screen-panels.js","webpack:///./src/snapdragon-engine/round-planner.js","webpack:///./src/snapdragon-engine/lesson-plan-handler.js","webpack:///./src/snapdragon-engine/lesson-planner.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-custom.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-fungi.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-static.js","webpack:///./src/snapdragon-config/plans/portrait/portrait-static.js","webpack:///./src/snapdragon-config/lesson-plans.js","webpack:///./src/ui/setup/setup-handler.js","webpack:///./src/ui/setup/next-lesson.js","webpack:///./src/ui/setup/next-layout.js","webpack:///./src/ui/setup/next-item.js","webpack:///./src/ui/fixtures/headers.js","webpack:///./src/ui/fixtures/score.js","webpack:///./src/ui/screens/home/home.js","webpack:///./src/ui/helpers/location-helper.js","webpack:///./src/ui/screens/cards/test-card-modal-handler.js","webpack:///./src/media-helper.js","webpack:///./src/ui/helpers/logging-handler.js","webpack:///./src/index.js","webpack:///./src/wikipedia/wiki.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Array","concatAll","results","this","forEach","subArray","element","timer","sink","delay","id","Bacon","fromBinder","setInterval","onValue","shuffleArray","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","getCellValue","tr","idx","headerSortIndex","wide","children","filter","child","classList","join","indexOf","dataset","snapIndex","querySelector","vernacularName","innerText","textContent","utils","encodeQuery","q","undefined","Number","isInteger","encodeURIComponent","trim","randomiseSelection","source","required","zeroBased","selection","arr","concat","map","item","index","onlyUnique","self","sortBy","prop","dir","sort","a","b","parseFloat","sortAlphabeticallyBy","calcItemIndex","offSet","moduleSize","capitaliseFirst","str","substr","toUpperCase","toLowerCase","capitaliseAll","split","charAt","substring","makeSortable","document","callback","from","querySelectorAll","sp","addEventListener","names","th","parentElement","table","closest","tbody","footer","snapLog","comparer","asc","v1","v2","isNaN","toString","localeCompare","parentNode","appendChild","cells","flatten","reduce","accumulator","currentValue","getObservableMonths","date","daysAway","when","days","dateFromDays","direction","setDate","getDate","startMonth","getMonth","thisMonth","endMonth","getMonthName","month","Date","toLocaleString","months","getRandomInt","max","createSessionToken","replace","getRandomObjectProperty","obj","keys","constructor","toCamelCase","sentenceCase","out","el","add","fromCamelCase","parseToLowerCase","webpackContext","req","webpackContextResolve","e","Error","code","webpackContextKeys","resolve","content","options","transform","locals","___CSS_LOADER_API_IMPORT___","types","lessonState","Enum","initEnum","navigation","taxon","guideType","guideMode","nextStep","quickFireType","quickFireStep","userEvent","enums","config","language","callbackTime","callbackDelay","excludeRevision","isPortraitMode","isLandscapeMode","collection","languages","lang","guide","iconicTaxa","locationLongLat","locationPlace","locationType","place","speciesRange","inatId","type","param","season","perPage","noOfRecords","STATIC","resetScore","total","correct","binomial","answer","success","incorrect","question","fails","passes","answers","statement","totalPassPoints","totalPoints","progressState","score","initialState","currentRound","rounds","isNextRound","cleanAndReturnIncomingState","state","quickFire","onClickFiltersLinkListeners","onClickGlossaryLinkListeners","reducer","combineReducers","counter","action","payload","isLessonRehydrated","isLessonPaused","isLessonSelected","layoutCount","lesson","isCustomLessonPausedOverride","lessonPlans","lessonPlan","layout","screens","prevItemIndex","itemIndex","initialConfig","coordinates","lessons","savedLessonNames","R","layoutName","layoutCounter","isLevelComplete","isLessonComplete","level","levels","getNextRound","nextItem","items","updateCollection","allItems","isDeselected","bonus","totalFailPoints","points","itemId","questionText","questionTotal","passesTotals","failsTotals","bonusScores","guid","collections","cols","col","selected","isActive","isCollectionUpdate","history","scores","historyCorrect","historyTotal","videoPlayer","bonusLayout","user","glossary","userAction","persistConfig","storage","persistedReducer","persistReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","logger","next","thunk","persistor","persistStore","DOM","leftGrid","getElementsByClassName","leftHeader","leftBody","leftFooter","leftHeaderTxt","specimenRptr","rightGrid","rightHeader","rightHeaderTxt","rightHeaderScoreTxt","rightBody","rightRptrSummary","rightBodyBottom","rightFooter","roundHandler","getRoundItems","start","end","epithets","species","genus","getTrait","formatter","traits","trait","entries","acc","curr","statsReducer","elem","itemProperties","getVernacularName","useShortForm","namePart","shortForm","englishShortForm","find","languageSortForm","englishNames","english","capitalisedNames","console","error","message","getSpeciesName","getNestedTaxonProp","prop1","prop2","prop1Value","prop2Value","trimLatinName","getActiveTrait","option","traitName","getVernacularNames","getFamilyStats","taxonomy","family","getRootTraitValue","traitValue","drop","pattern","parts","match","dropStarters","starter","rootTraitValue","part","getTraitValues","enumKey","getTraitByKey","traitKey","hasTraitPropeties","handleUnit","unit","doArraysHaveSameValues","isEmpty","symmetricDifference","traitsHandler","getRandomTrait","traitsToIgnore","allowedTraits","contains","getTraitsPoolForUnits","traitsPool","help","getTraitsPoolForRoles","role","getTraitsPool","traitValues","getSetOfTraitAnswers","pool","traitSet","take","sets","set","getTraitValueByKey","getLinkedTaxaTraits","taxaTraits","getTraitsToExclude","convertTraitsToNameValuePairsArray","traitsToExclude","includedTraits","lookalike","description","symbiont","getNMultiplesFromArray","arra","arra_size","result_set","x","pow","getTraitTests","itemsInThisRound","getTraitsForTests","alreadyTestedTraits","excludedTraits","et","overrides","typedItemTraits","getState","getBirdsongTests","getBirdsongTest","birdsong","birds","bird","birdNames","DESCRIPTION","CIRCUMFERENCE","EXPOSURE","CAP_SHAPE","CAP_COLOUR","CAP_DIAMETER","CAP_WIDTH","CAP_HEIGHT","SHELF_WIDTH","SHELF_THICKNESS","ECO_TYPE","HOW_EDIBLE","HYMENIUM_TYPE","SPORE_PRINT_COLOUR","STIPE_CHARACTER","STIPE_LENGTH","STIPE_WIDTH","STIPE_COLOUR","GILL_ATTACHMENT","FLESH","STEM_CHARACTER","GILL_COLOUR","TRUNK_COLOUR","SUBSTRATE","THALLUS_TYPE","RHIZINE_TYPE","DISC_WIDTH","LOBE_WIDTH","LOBE_LENGTH","LOBE_DIAMETER","ROLE","NATIVE","NATIVE_TO","SYMBIOSIS","ASSOCIATE","SYMBIONTS","LOOKALIKES","ECOLOGY","HABITAT","TROPHIC_LEVEL","ORGANISATION","SMELL","FRUIT_TYPE","FRUIT_WIDTH","FRUIT_HEIGHT","FRUIT_DIAMETER","FRUIT_LENGTH","FRUIT_COLOUR","FRUIT_TEXTURE","BRANCH_TEXTURE","FRUIT_SURFACE","SEED_DISPERSAL","VITAMINS","STAMEN_COUNT","STYLE_COUNT","LEAFLET_COUNT","LOBE_COUNT","LEAFLET_LENGTH","LEAFLET_WIDTH","GROUPING","MEDICINAL_PROPERTIES","COLOUR","USAGE","FORM","LIFE_SPAN","GERMINATION","ACTIVE","SUBSTRATE_ADHERANCE","RANK","SIZE","LENGTH","VOICE","HEIGHT","WEIGHT","REPRODUCTION","ASEXUAL_REPRODUCTION","DISPLAY","BEHAVIOUR","CHARACTERISTIC","COMMUNICATION","SHELTER","DISEASE","THREAT","FOOD","SEXUAL_DIMORPHISM","WING_SPAN","TREE_SHAPE","CROWN_SHAPE","LEAF_DIVISION","LEAFLET_DIVISION","LEAF_BLADE","LEAF_VARIATION","LEAF_SHAPE","JUVENILE_LEAF_SHAPE","LEAF_MARGIN","LEAF_ARRANGEMENT","LEAF_ATTACHMENT","LEAF_LENGTH","AWN_LENGTH","JUVENILE_LEAF_LENGTH","LEAF_WIDTH","LEAF_COLOUR","LEAF_SURFACE","LEAF_ABOVE_SURFACE","LEAF_BELOW_SURFACE","LEAF_TEXTURE","JUVENILE_TEXTURE","howEdible","CHOICE","EDIBLE","INEDIBLE","POISONOUS","DEADLY","TOXIC","habitat","WOOD","WOODLAND","WOODLAND_LITTER","GRASSLAND","SOIL","VEGETATION","DUNG","DUNES","WIDESPREAD","DEAD_WOOD","WASTELAND","MEADOW","FIELDS","MOSS","PASTURE","BARK","SHOOTS","COMMONS","HEATH","ORCHARDS","HEDGEROWS","LAWNS","RINGS","DAMP","TREE_BASE","FOREST_EDGE","PARKS","TRUNKS","STUMPS","ROCKS","FENCES","TREES","SHRUBS","SHRUBLAND","MARSHLAND","EXPOSED_WOOD","BRANCHES","HILLS","URBAN","VALLEYS","MAQUIS","SAVANNA","FOREST_STEPPE","MEADOW_STEPPE","BOREAL","SCRUB","WALLS","MOORLAND","COAST","BRUSH","WATER","SNOW","NO_SNOW","CONIFERS","BROAD_LEAF","PINE","BEECH","OAK","DITCH","WET_MEADOW","LAKESIDE","RIPERIAN","WETLANDS","ecologicalType","SAPROTROPHIC","PARASITIC","MYCORRHIZAL","PLANT_PATHOGEN","capShape","CAMPANULATE","CONICAL","CONVEX","DEPRESSED","FLAT","INFUNDIBULIFORM","OFFSET","OVATE","UMBILLICATE","UMBONATE","POTATO_SHAPED","NA","SPHERICAL","PEAR_SHAPED","BRAIN_LIKE","HONEYCOMB","HEMI_SPHERICAL","treeEcology","BIRCH","DECIDUOUS","SOFTWOOD","HARDWOOD","MIXED_WOODLAND","CONIFEROUS","ELM","ASH","SYCAMORE","ASPEN","ELDER","CHESTNUT","HARDWOODS","PRUNUS","PYRUS","SALIX","ROBINIA","CERATONIA","EUCALYPTUS","SWEET_CHESTNUT","POPLAR","CORK","FIR","SPRUCE","PLANE","WILLOW","MAPLE","LARCH","CEDAR","YEW","TURKEY_OAK","HAWTHORN","BUSH","SHRUB","hymeniumType","GILLS","PORES","GLEBA","SMOOTH","TEETH","RIDGES","FALSE_GILLS","associate","ALGA","CYNOBACTERIUM","FUNGUS","thallusType","FOLIOSE","FRUTICOSE","CRUSTOSE","SQUAMULOSE","LEPROSE","EPIPHYTE","rhizineType","SPARSE","HAPTER","substrate","HIGH","MEDIUM","LOW","VARIABLE","medicinalProperties","ANTIVIRAL","ANTISEPTIC","ANTI_INFLAMMATORY","ANTIBIOTIC","ANLAGESIC","ANTIBACTERIAL","ANTICOAGULANT","ANTIFUNGAL","ph","ACIDIC","ALKALINE","NEUTRAL","colour","LILAC","BUFF","WHITE","YELLOW","DARK_GREEN","GREEN","WHITE_GREEN","BRIGHT_GREEN","OLIVE_GREEN","BRIGHT_YELLOW_GREEN","YELLOW_GREEN","YELLOW_BROWN","PURPLE_BROWN","GREY_BROWN","DARK_YELLOW","DARK_RED","DARK_PINK","ORANGE","SCARLET","BLOOD_RANGE","RED","RED_BROWN","ORANGE_RED","GREY","PALE_GREY","PALE_BROWN","GREY_GREEN","GREY_WHITE","BROWN","CHESTNUT_BROWN","PAPER_BROWN","BLACK","BLUE","PALE_BLUE","BLUE_BLACK","JET_BLACK","BLUE_GREEN","VIOLET","BURGUNDY","PALE_VIOLET","VIOLET_PURPLE","PALE_GREEN","PALE_YELLOW","PALE_YELLOW_GREEN","PALE_GREY_GREEN","GLAUCOUS","GREY_YELLOW","ORANGE_YELLOW","CREAM","CHALKY","PINK","PALE_PINK","PURPLE","PALE_PURPLE","DARK_PURPLE","TAN","DARK_BROWN","HONEY","RED_PURPLE","usage","PERFUMERY","TANNING","DYING","BREWING","WINE","COFFEE","TEA","BIRDS_NEST","POISON","FODDER","FORAGE","GREEN_MANURE","MEDICINE","FUR","TIMBER","PEST_CONTROL","HERB","SPICE","ESSENTIAL_OIL","MORDANT","ASTRINGENT","nonTaxaType","NITROGEN","SULPUR_DIOXIDE","leafBlade","SIMPLE","COMPOUND","leafDivision","PALMATE","COMPOUND_PALMATE","PALMATELY_LOBED","PINNATE","COMPOUND_PINNATE","ODD_PINNATE","EVEN_PINNATE","BIPINNATE","COMPOUND_BIPINNATE","TRIFOLIATE","PINNATIFID","TRIPINNATE","IMPARIPINNATE","PARIPINNATE","leafletDivision","leafVariation","HOMOBLASTIC","HETEROBLASTIC","shape","LINEAR","OBLANCEOLATE","OBOVATE","ACICULAR","ACUMINATE","ACUTE","APICULATE","ATTENUATE","AURICULATE","ASYMMETRICAL","CAUDATE","CORDATE","CUNEATE","CUSPIDATE","DELTOID","DIGITATE","ELLIPTIC","ENSIFORM","EMARGINATE","FALCATE","FENESTRATE","FILIFORM","FLABELLATE","HASTATE","LACINIATE","LANCEOLATE","LAMINAR","reproduction","SELF_POLLINATION","CROSS_POLLINATION","asexualReproduction","BUDDING","FRAGMENTATION","FISSION","SPORE_FORMATION","VEGETATIVE_PROPAGATION","leafArrangement","ALTERNATE","BASAL","CAULINE","OPPOSITE","WHORLED","ROWS","SPIRAL","OVERLAPPING","INCURVED","DECUSSATE","leafAttachment","SESSILE","SUBSESSILE","PEDICELLATE","leafMargin","ENTIRE","CILIATE","CRENATE","DENTATE","DENTICULATE","DOUBLY_SERRATE","SERRATE","SERRULATE","SINUATE","LOBATE","UNDULATE","SPINY","food","GRASS","ROTTEN_FRUIT","NECTAR","HONEYDEW","SEEDS","NUTS","GRAINS","BERRIES","HERBAGE","SWARD","LEAVES","ROOTS","TUBERS","RHIZOMES","BULBS","hibernatingStage","ADULT","CATERPILLAR","PUPA","symbiosis","MUTUALISM","COMMENSALISM","PREDATION","PARASITISM","HERBIVORY","COMPETITION","ECTOMYCORRHIZAL","COMPANION","POLLINATION","SEED_PREDATION","trophicLevel","PRIMARY_PRODUCER","PRIMARY_CONSUMER","SECONDARY_CONSUMER","OMNIVORE","TERTIARY_CONSUMER","APEX_PREDATOR","shelter","DREY","BURROW","DEN","WARREN","SETT","ROOKERY","LODGE","DAM","NEST","active","CREPUSCULAR","DIURNAL","NOCTURNAL","MATUTINAL","VESPERTINE","juvenile","KIT","SQUEAKER","CUB","KITTEN","CHICK","PUP","CALF","DUCKLING","EYAS","MAGGOT","KID","GOSLING","LEVERET","NYMPH","LARVA","SALAMANQUESA","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER","female","VIXEN","DOE","JILL","BITCH","SOW","HEN","DUCK","GOOSE","PEN","male","BUCK","DOG","BOAR","TOM","JACK","COCK","DRAKE","REYNARD","TOD","TERCEL","GANDER","COB","diet","HERBIVORE","CARNIVORE","XYLOPHAGOUS","POLYPHAGOUS","fungusMarginType","APPENDICULATE","STRIATE","PLICATE","RIMMOSE","ERODED","INROLLED","soilType","SILICEOUS","CALCAREOUS","NITROGENOUS","NUTRIENT_POOR","WELL_DRAINED","WELL_WATERED","LOAM","CHALK","SAND","RICH","MOIST","organisation","EUSOCIAL","SOCIAL","SOLITARY","MATRIARCHY","INDICATOR","KEYSTONE","FOUNDATION","SPECIALIST","GENERALIST","PIONEER","INVASIVE","DOMINANT","POLLINATOR","PREDATOR","GRANIVORE","MUCIVORE","PREY","COMPETITOR","HOST","CARRIER","RUDERAL","SUPERTRAMP","SYMBIONT","OCCUPANT","PARASITE","COLONISER","EARLY_SUCCESSION","FERTILISATION","PROPAGATION","BIOINDICATOR","STRANGLER","FOOD_SOURCE","EPIPHYTIC","EPIPHYTIC_STRANGLER","NUTRIENT_CYCLING","CARBON_DIOXIDE_PRODUCTION","MYCOREMEDIATION","fruitType","DRUPE","POME","BERRY","AGGREGATE_FRUIT","LEGUME","CAPSULE","NUT","GRAIN","MULTIPLE_FRUIT","SAMARA","ACHENE","POD","ARIL","SYCONIUM","FOLLICLE","SILIQUE","inflorescence","CATKIN","UMBEL","RACEME","CORYMB","SPIKE","SPADEX","SINGLE","PANICLE","CYMOSE","BRANCHED_SPIKE","AXILLARY_CLUSTERS","umbelType","TERMINAL","display","DIEMATIC","SEXUAL_COLOUR_DIMORPHISM","NO_SEXUAL_COLOUR_DIMORPHISM","NO_SEXUAL_DIMORPHISM","MELANISTIC","behaviour","SEXUAL_CANNIBALISM","MONANDROUS","VOCALISATION","CRYPSIS","HOARDING","HIBERNATION","GAME_PLAYING","PLAYFUL","TERRITORIAL","NON_TERRITORIAL","BIPARENTAL_CARE","COOPERATIVE_BREEDING","TOOL_MAKING","PROBLEM_SOLVING","DIVISION_OF_LABOUR","SUPERORGANISM","ANAUTOGENY","MASS_PROVISIONING","PRECOCIAL","ALTRICIAL","AUTOTOMIC","ECTOTHERMIC","ADHESION","POLYPHYODONT","VIVIPAROUS","REGURGITATION","MULTIVOLTINE","BIVOLTINE","UNIVOLTINE","SEMIVOLTINE","METAMORPHOSIS","RUTTING","WHELPING","FARROWING","SWIMMING","DECUMBENT","ETHYLENE_RIPENING","MIGRATORY","sense","SIGHT","MOVEMENT","SPATIAL","MEMORY","ECHOLOCATION","crypsis","CAMOUFLAGE","NOCTURNALITY","SUBTERRANEAN","MIMICRY","VISUAL","OLFACTORY","AUDITORY","allochory","ANEMOCHORY","HYDROCHORY","ZOOCHORY","ANTHROPOCHORY","reproductiveContainer","CONE","communication","POSTURING","matingSystem","POLYGYNOUS","MONOGAMOUS","physiology","NEGATIVE_ALLELOPATHY","POSITIVE_ALLELOPATHY","C3_CARBON_FIXATION","NITROGEN_FIXING","DORMANCY","EVERGREEN","ADVENTITIOUS","NYCTINASTY","XEROMORPHIC","SUCCULENT","DROUGHT_TOLERANT","FIRE_TOLERANT","FIRE_RESISTANT","POLLUTION_TOLERANT","PH_TOLERANT","SALT_TOLERANT","FROST_TOLERANT","HEAT_TOLERANT","NITROGEN_TOLERANT","HEAVY_METAL_TOLERANT","ACID_RAIN_TOLERANT","COMPACT_SOIL_TOLERANT","FLORAL_SCENT","AROMATIC","MONOCARPIC","POLYCARPIC","PYROPHYTIC","SEROTINOUS","STYPTIC","BIOLUMINESCENCE","collective","SOUNDER","SLOTH","MURMURATION","PACK","ecology","DIGGING","SCRAPING","ROOTING","SCAVENGING","characteristic","PERENNIAL","ANNUAL","BIENNIAL","HERBACEOUS","DIOECIOUS","MONOECIOUS","SYNOECIOUS","PERFECT","COMPLETE","DICOTYLEDON","MONOCOTYLEDON","CAULIFLORY","RAMIFLORY","PUBESCENT","CHAMAEPHYTE","FIBROUS_ROOT_SYSTEM","TAPROOT_SYSTEM","KIN_SELECTION","BROADLEAF","AERIAL_ROOTS","EPICORMIC_ROOTS","BASAL_ROOTS","RUNNER","CLIMBER","BUTTRESS_ROOT","MONOPODIAL","APICAL_DOMINANCE","POLYMORPHIC","CRYPTIC_SPECIES_COMPLEX","RHIZOMORPHS","GEOPHYTE","RICTAL_BRISTLES","DEHISCENCE","EXPLOSIVE_DEHISCENCE","RESIN_CANAL","APOSEMATIC","climate","HOT","DRY","TEMPERATE","COOL","TROPICAL","CONTINENTAL","pollination","ALLOGAMY","ANEMOPHILY","HYDROPHILY","ENTOMOPHILY","AMBOPHILY","MELITTOPHILY","PSYCHOPHILY","PHALAENOPHILY","SONICATION","GENERALISED_SYNDROME","CLEISTOGAMY","stipeCharacter","RING","RING_AND_VOLVA","BARE","SHORT","STUMPY","CLUB_LIKE","WARTS","HOLLOW","PRUINOSE","PARTIAL_VEIL","stemCharacter","TERETE","HAIRY","FARINOSE","SCURFY","VISCOUS","PUNCTATE","PAPILLATE","TUBERCULATE","RUGOSE","GLABROUS","gillAttachment","ADNATE","ADNEXED","DECURRENT","FREE","Seceding","SUBDECURRENT","grouping","LARGE_GROUPS","CLUSTERS","LARGE_CLUSTERS","SCATTERED_CLUSTERS","FAIRY_RINGS","GREGARIOUS","NUMEROUS","propagation","SUCKERS","STOLONS","CORMS","PLANTLETS","KEIKIS","APOMIXIS","seedDispersal","AUTOCHORY","exposure","FULL_SUN","PARTIAL_SUN","PARTIAL_SHADE","SHADE","nutType","ACORN","HAZELNUT","surface","TOMENTOSE","texture","LEATHERY","FLESHY","GLOSSY","WOOLY","SCALY","ROUGH","VELVETY","treeShape","COLUMNAR","OPEN_HEAD_IRREGULAR","WEEPING","PYRAMIDAL","GLOBE","FASTIGIATE","VASE","HORIZONTAL_SPREADING","NARROW_DOMED","crownShape","OVOID_CONIC","CONIC","DOMED","SPIRE_LIKE","SLENDER","barkType","LENTICELS","PEELING_STRIPS","VERTICAL_CRACK","VERTICAL_STRIPS","SCALES","PLATES","INTERSECTING_RIDGES","UNINTERRUPTED_RIDGES","RIDGES_BROKEN_HORIZONTALLY","PAPER_LIKE","SQUARE_CRACKED","RESINOUS","THICK","coneShape","BARREL_SHAPED","GLOBULAR","leafVenation","ARCUATE","DICHOTOMOUS","LONGITUDINAL","PARALLEL","RETICULATE","ROTATE","TRANSVERSE","flowerShape","TRUMPET_SHAPED","BILABIATE","REGULAR","ACTINOMORPHIC","ZYGOMORPHIC","branchArrangement","HORIZONTAL","WHORLS","leafFeatures","BLUNT_TIPS","STOMATAL_LINES","DROOPING","leafFolding","CARINATE","CONDUPLICATE","CUCULLATE","INVOLUTE","REDUPLICATE","REVOLUTE","SUPERVOLUTE","mushroomGroup","MYCOTROPHS","POLYPORES","BOLETES","PUFFBALLS","GILLED_MUSHROOMS","CHANTERELLES_AND_TRUMPETS","TOOTHED_MUSHROOMS","STINKHORNS","CUP_FUNGI","BIRDS_NEST_FUNGI","TRUE_MORELS_AND_VERPAS","FALSE_MORELS","SADDLES","JELLY_FUNGI","CLUBS_AND_CORALS","CRUST_FUNGI","units","lifeSpan","gestation","weaning","germination","height","diameter","circumference","trunkDiameter","capDiameter","umbelDiameter","capWidth","infructescenceWidth","width","breadth","capHeight","shelfWidth","shelfThickness","leafLength","awnLength","infructescenceLength","juvenileLeafLength","leafWidth","petalLength","petalWidth","petioleLength","bractLength","fruitWidth","fruitLength","fruitDiameter","fruitHeight","flowerDiameter","flowerLength","coneDiameter","coneLength","maleConeLength","femaleConeLength","bulbWidth","coneWidth","maleConeWidth","femaleConeWidth","stalkHeight","stemHeight","scapeHeight","stemDiameter","stipeLength","tailLength","leafletLength","leafletWidth","queenLength","queenWingspan","workerLength","workerWingspan","maleLength","maleWingspan","stipeWidth","wingSpan","tongueLength","phValue","weight","queenWeight","workerWeight","maleWeight","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","firestore","getSpeciesWhere","props","operator","limit","speciesRef","where","querySnapshot","docs","doc","getSpecies","getSpeciesNames","speciesPropertiesRef","getTaxaNames","taxaPropertiesRef","getSpeciesByIconicTaxon","number","iconicTaxon","isLichen","lichen","eolId","randomId","getRandomId","FieldPath","documentId","getSpeciesByName","itemName","getTaxaWhere","taxaRef","getFamiliesByIconicTaxon","iconicTaxonRank","iconicTaxonValue","getTaxonByName","getAsyncTraitsByNameAndCollection","languageTraits","getTraitsBySpeciesName","Promise","getTraitsByTaxonName","getBirdsong","xcID","storageRef","ref","getDownloadURL","url","addSpecies","images","image","license","photographer","rightsHolder","title","docRef","updateSpecies","updatedSpecies","starred","provider","speciesDocRef","update","updateSpeciesNames","deleteSpeciesByName","then","addTraits","empty","speciesTraitsRef","addSpeciesRelationship","batch","readyBatch","all","FieldValue","arrayUnion","commit","addPhotos","photos","deleteSpeciesTraitField","field","removeField","getRandomSpecies","addTaxon","getSpeciesInParallel","time","questionIds","quickId","getSpeciesByNameInParallel","itemNames","addCollection","log","details","getCollectionsWhere","collectionRef","addQuestion","getQuestionsWhere","addDefinition","definition","term","getDefinitionsWhere","getDefinitionById","getBatchDefinitionsById","ids","terms","getDefinition","definitions","alt","getCollections","async","updateDefinition","getTraitDefinitions","entry","getDefinitionsByTaxa","taxa","chars","autoId","getLookalikeTests","init","getLookalikeTest","tests","getItemLookalikes","lookaliketraits","lookalikes","getLookalikes","FUNGI","PLANTAE","AVES","AMPHIBIA","REPTILIA","MAMMALIA","INSECTA","ARACHNIDA","LEPIDOPTERA","matchTaxon","matchTaxonKey","iconicTaxaKeys","rank","order","kingdom","findRankByIconicTaxon","matchIcon","matchRank","icon","getDefinitionTests","getDefinitionTest","alternatives","bonusHandler","getTests","itemIndices","bonusLayouts","lessonName","levelName","addLayoutToTest","traitTests","traitTest","getTraitTypeTests","getTraitTypeBirdsongTests","getTraitTypeLookalikeTests","getDefinitionTypeTests","getResolvedPromises","promises","testGroups","group","g","getItemLayouts","itemQuestions","providerHandler","getLayouts","roundItemNames","speciesQuestions","questions","sq","itemsQuestions","makeActionCreator","meta","nextLesson","updateScore","nextLayout","nexItem","updateHistory","newCollection","updateCollections","nextRound","nextLevel","updateConfig","stopStartLesson","updateEnums","updateUser","saveLesson","updateVideoPlayer","createQuickFire","updateQuickFire","createGlossary","clickEvent","boundAsyncNextLesson","func","dispatch","response","actions","boundNextLesson","boundUpdateScore","boundNextItem","boundNextLayout","boundUpdateHistory","boundSetActiveCollection","boundUpdateCollection","boundUpdateCollections","boundNextRound","boundNextLevel","boundUpdateConfig","boundStopStartLesson","boundUpdateEnums","boundSaveLesson","boundUpdateVideoPlayer","boundUpdateUser","boundCreateQuickFire","boundUpdateQuickFire","boundCreateGlossary","boundClickEvent","hasClass","className","classArray","cleanText","text","isAnswerCorrect","isCorrect","answeredIndex","parseInt","answerIndex","isAnswerEqualToQuestion","eqValues","alternativeIsCorrect","alternativeAccepted","markTest","test","clone","isTraitAnswerCorrect","getIsReviewingLesson","isNotReviewingLesson","START_LESSON","TOGGLE_SPECIES_LIST","lessonStateHelper","overrideLesson","purgeLesson","purge","location","reload","clearGuide","getCollectionToLoad","currentCollection","selectedLessonCollectionId","resume","getLatestCounter","getUserLessonState","collectionToLoad","savedLesson","newLessonCounter","restoredLesson","Stamp","Context","importNode","re","filterState","address","mystate","len","hasAttribute","JSON","stringify","getAttribute","expandString","count","matches","exec","cloneAllNodes","clones","nodeName","cloneNode","appendChildren","ele","nodes","expand","isArray","processChildren","attributes","attr","iterName","tpl","firstChild","removeChild","childState","instanceState","k","cl","removeAttribute","setAttribute","childEle","nextSibling","replacement","childNodes","insertBefore","expandInto","target","replaceChildren","innerHTML","renderTemplate","context","parent","contentClone","expanded","handleRightsAttribution","template","createElement","rightsAttributionTemplate","licence","medium","author","rightsholder","identifier","large","scaleImage","rightsAttribution","rightsLink","indicators","showAttribution","event","remove","removeEventListener","showLink","carouselControlHandler","parentScreen","setTimeout","slider","imageSlider","sliderArgs","imageSliderTemplate","img","prev","selectActiveImage","elemSrc","imageMatch","activeNode","slideTo","click","imageSideBySlider","slides","sideBySlider","slide","itemCommon","prepImagesForCarousel","imageUseCases","CAROUSEL","originalImageLink","stripImageUrlOfScaleAndPrefix","prefix","SPECIES_LIST","SPECIES_CARD","TAXON_CARD","SPECIES_SPECIMENS","NON_TAXON_CARD","VISUAL_MATCH","MIXED_SPECIMENS","TEXT_ENTRY","ACTUAL_SIZE","SPECIES_GRID","denormaliseImages","photographersName","full_name","src1","src2","prepImageForCarousel","useCase","src","small","modalImagesHandler","displayNameType","modalImageHandler","handleImageSelectionFromList","selectedItem","selectedItemImage","selectedImage","displayName","mushroomIcon","renderIcon","rootNode","iconicIcon","returnTaxonIcon","getBirdSong","node","portrait","fetchAsync","endpoint","fetch","json","loadPlayer","playerId","song","recording","recordings","style","renderInfoDetails","activeTraitKey","activeTraitValue","idBoxTemplate","linkedTaxa","isInCarousel","addLinksToSpeciesCards","link","renderCard","taxonName","isSpecies","addVernacularName","relationshipTraits","relationships","convertTraitsForDisplay","speciesA","speciesARole","speciesB","speciesBRole","lookalikeTraits","convertLookalikesForDisplay","speciesDescription","lookalikeDescription","addDisplayRules","relationship","modal","linkedTaxaRelationshipTemplate","linkedTaxaLookalikeTemplate","getLinkedTaxa","detail","detailsTemplate","imgClassName","renderInfoSlider","infoSliderTemplate","activeTrait","control","changeTraitHandler","taxonInfoSlider","convertedTraits","service","getLocation","lat","getHTML5Location","reject","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","logError","listeners","parseMapBoxPlace","locality","features","f","place_type","region","country","area","shortLocation","longLocation","summary","placePromise","updatedPlace","getMapBoxPlace","long","listener","getPlace","force","LocationLookup","ip","city","state_prov","country_name","IPLookup","getIPLocation","ipLocation","requireNewSession","current_term","inatListeners","unsubscribe","listenToInatRequests","getBasePath","observableMonths","getInatSpecies","speciesNames","snapdragonSpeciesNames","getIconicTaxa","getUserOrProjectKeyValuePair","parameter","getAllInatObservations","snapdragonSpecies","records","keepGoing","page","getInatObservations","recordsFromThisRequest","record","noMoreRecords","recordsCountReached","loadSpeciesInParallel","observations","observation","observationCount","observations_count","iconic_taxon_name","lng","placeId","radius","inat","params","guideTpe","numberOfRequests","ceil","total_results","RECORDS_per_page","getInatPlaceId","getInatTaxonStats","getHistogram","getAutocompleteBy","by","renderWikiModal","wikiLink","wiki","focus","inatBoxTemplate","eolPage","wikiNode","renderWiki","stats","taxonId","stat","taxonCount","taxonLink","place_name_en","places","display_name","itemStats","placeTaxonCount","establishment","preferred_establishment_means","renderCalendar","calendarTemplate","getENShortMonth","ordinal","histogram","monthlyStats","month_of_year","currentMonthIndex","infraspecifics","subspecies","variety","eol","form","renderTaxaBox","taxaBoxArgs","familyName","familyVernacularName","specific","subSpeciesCount","taxaBoxTemplate","subspeciesBadge","members","list","html","member","transition","getItemWithProps","getItem","itemWithProps","FAMILY","ORDER","cardTemplate","renderCommonParts","renderPortrait","renderLandscape","renderInatDataBox","lookalikeSpecies","renderLookalikes","readyLookalikesForRendering","lookalikeItem","scientificNames","lookalikeParent","matchTemplate","speciesComparisonLink","mp3","audioMediaTemplate","visualComparisonTemplate","player","iframe","border","elm","infoSlider","renderBadge","badge","Set","common","languageNames","occurrences","badgeTemplate","lines","getElementsByTagName","hr","attribution","indicator","modalCarousel","renderTaxonCard","taxonTemplate","familyStats","identification","descriptions","genera","families","toxic","notableMembers","membersCount","traitValuesHandler","branch","technical","nonTaxaGroup","LICHEN_FORM","getNonTaxa","SD","examples","subscriptions","renderNonTaxonCard","keyTrait","nonTaxa","nt","onChange","sub","prepImages","itemImagesArray","itemImages","nonTaxon","portraitImagesNode","lookup","getElementById","buildTable","args","overrideParent","matchMedia","getTraitName","keyTratLinkClass","phylum","getIconicTaxonIcon","iconicTaxonIcon","hideFungiIcon","genusLinkClass","shortName","getOrderLinkClass","hasVideo","speciesTemplate","vn","span","append","caption","thead","headerRow","imageHeader","speciesHeader","familyHeader","traitNameHeader","iconicTaxonHeader","accordionHeader","sortableCalback","isReady","onSpeciesTimeMatchListeners","onNoteTimeMatchListeners","onSpeciesPlayRequestListeners","onPlayerStateChangeListeners","isPlayerReady","states","videoHandler","readyPlayer","YT","Player","playerVars","events","onPlayerReady","onPlayerStateChange","onSpeciesTimeMatch","pop","onNoteTimeMatch","onSpeciesPlayRequest","onPlayerReadyListeners","subscribeToPlayerStateChange","playVideoFrom","getPlayerState","seekTo","playVideo","setVideoState","activeLesson","collectionId","pausedAt","speciesName","destroyPlayer","stopVideo","destroy","saveVideoState","isVideoPlayerReady","videoId","doIdsMatch","getVideoData","video_id","getPlayerTime","getCurrentTime","videoSetup","startTime","videoTemplate","video","webLabel","links","label","webUrl","startAt","playAt","checkInt","checkCurrentTime","matchSpeciesTime","notes","noteMatch","note","onPlayerStateChangeCallback","clearInterval","videoWidth","offsetWidth","currentlyActiveRow","onSpeciesChangeHandler","openNoteHandler","definitionTemplate","insert","colCount","noteText","renderSpeciesList","callingParentContainer","traitEnums","openAccordionHandler","accordion","openSpeciesDescriptionHandler","closeAccordionHandler","userClickHandlers","itemImage","accordionHandler","currentTarget","stopPropagation","activeIcon","cardModal","card","nthChild","taxonIcons","noWrongAnswersForThisSpecies","totals","firstTime","lessonStateHandler","changeRequest","requestType","BEGIN_OR_RESUME_LESSON","requestArgs","enableScroll","activateYoutubeIcon","closeOpenAccordions","accordions","activeAccordion","activeYouTubeIcon","td","scrollIntoView","rowHeight","noOfRows","scroll","top","getComputedStyle","documentElement","getPropertyValue","scrollTop","previousElementSibling","offsetHeight","prevTaxon","nextTaxon","playerRecords","inactiveAccordion","getItems","DYNAMIC","LOCATION","INAT","query","getSpeciesDetailsInParallel","loadCollection","collectionIsUnchanged","insecta","lepidoptera","noninsecta","loadCollectionItemProperties","loadedCollection","orders","familyTaxa","orderTaxa","genusTaxa","getGenusTaxa","genusTaxon","getFamilyTaxa","familyTaxon","getOrderTaxa","orderTaxon","getFamilyNames","findRank","taxonRank","GENUS","vernacularNames","loadTraitsInParallel","itemTraits","collectionHandler","PAUSE_LESSON","UPDATE_COLLECTION","SAVE_LESSON_PROGRESS","GET_LESSON_STATE","ADD_SPECIES_TO_COLLECTION","RENDER_SPECIES_LIST","NEXT_ROUND","changeLessonState","saveCurrentLesson","updatedCounter","getLessonState","addExtraSpeciesSelection","renderLessonSpeciesList","beginOrResumeLesson","requestedlessonState","RESUME_LESSON","BEGIN_LESSON","container","stateCounter","setActiveCollection","extraSpecies","collectionExtension","recordUserAction","scoreSummaryHandler","getLessonScores","stateScore","savedScore","historyIsUpToDate","getSummaryRows","rows","getAnswer","isObj","hasImage","isTrue","isWrongAnswer","renderScoreSummary","lessonId","summaryContainer","summaryTemplate","actionLinks","reverse","renderScoreSummaryRow","handleContinueLesson","preventDefault","handleNewLesson","actionLink","once","summaryRowTemplate","summaryNoRowTemplate","noQuestionsText","renderTestCardTemplate","testCardTemplate","headerClassName","providerQuestion","progressLink","renderSummaryCard","toggleScreens","screenOne","screenTwo","hideCurrentCard","testCardContainer","toggleStatementAndQuestion","testCard","testCardIcon","showNextCard","selector","speciesContainer","taxonContainer","renderSpeciesCard","speciesCard","taxonCard","interval","languagePicker","languageSelectionTemplate","taxonLanguageBtn","taxonLanguageTxt","inatAutocomplete","input","rb","users","login_autocomplete","photo","getPlaceSuggestions","GoogleAutocomplete","getPredictions","SESSION_TOKEN","google","maps","AutocompleteService","getPlacePredictions","AutocompleteSessionToken","predictions","prediction","place_id","projects","autocomplete","getUserSuggestions","getProjectSuggestions","onSelect","minLength","debounceWaitMs","switchHandler","idSwitch","startingPosition","switchControl","leftText","rightText","switcher","saveLocation","locationPlaceInput","createGuide","selectedText","selectedId","GooglePlaceDetails","request","Geocoder","geocode","geocoderResult","geometry","setConfig","saveStep","saveInatId","autocompleteRef","isLandsapeMode","speciesInGuideEditor","selectedSpeciesDisplay","selectedSpecies","savedSpeciesNames","spinner","editorTemplate","speciesCount","getTaxa","ss","addSpeciesToList","updatedConfig","updatedCollection","startsWith","highlightedText","checkBox","removedSpecies","listenersToAddedSpecies","speciesEditor","addedSpecies","CreateGuide","step","steps","disabled","nextSteps","PICKER","prevStep","currentStep","modalTitle","navigationContainer","progressSteps","previousStepActionArrow","previousStepActionTxt","optionsTxt","nextStepActionArrow","nextStepActionTxt","ps","getConfig","getCurrentStep","setCurrentStep","actionsTemplate","renderSpeciesSearchOptions","handleNextStepAction","nextStepName","startLesson","goToNextStep","handler","warning","renderLocation","locationTemplate","defaultNoOfRecords","setLocationLongLatBtn","handleSetLocationLongLat","placeholder","handleLocationPlaceInput","keyCode","range","rangeTxt","updateSlider","switchCallback","currentType","renderInatUser","inatTemplate","byType","inatIdentityInput","handlerInatIdentityInput","renderSpeciesPicker","speciesPickerTemplate","renderCategories","categoriesTemplate","icons","filterId","fungiIcon","hasChanged","category","commonName","speciesSearch","spinnerTemplate","feedback","viewGuideIcon","viewTaxaIcon","renderLessonSummary","clearTimeout","speciesSummaryTemplate","callOnCreateCustomListeners","Modal","getInstance","hide","editSpecies","editableCollectionName","initLesson","isPrivate","OrdinalSuffixOf","addingExtraSpecies","every","val","includes","initPicker","addStepActions","previousStepProperties","stepDescription","saveGuide","chosen","handleSaveEvent","onCloseModalListeners","quickFireAPI","includeTechnicalTerms","getBranches","branches","getQuickFire","isComplete","termScore","isIncorrect","poolSize","renderResponse","updateBranchCounts","branchOptions","branchBadge","updateTaxonCounters","taxonCounters","taxonBadge","quickFireUI","updateTotalCounts","counters","branchCounters","updateHeaders","screen","quickFireActions","filters","loadGlossary","quickFireGlossary","linkFromLesson","loadFilters","quickFireFilters","handleGlossaryLink","handleFiltersLink","FILTERS","QUESTIONS","GLOSSARY","scoreMultipleChoice","quickFireMessage","scoreTextEntry","quickFireInput","continueQuickFireBtn","brackets","acceptableAnswers","acceptable","readyTemplate","headerTemplate","quickFireLogic","selectAnswers","quickFireItems","spareItems","itemCount","headers","templateCreateQuickFire","resetQuickFire","DEFINITION","updateArray","getFilterTaxa","chkBox","selectedTaxon","updatedTaxa","getIncludeTechnicalTerms","createQuickFireBtn","quickFireOptions","checkedBranches","checked","templateQuestionQuickFire","answered","quickFireInputContainer","subscription","quickFireQuestions","check","review","getTermsGlossary","def","glossaryTemplate","templateSummaryQuickFire","pass","showWikiClass","fail","tab","summaryText","scoreSummary","continueReview","quickFireRevision","quickFireHandlers","renderReview","progressBar","roundProgressIndex","roundScoreCount","handleSpeciesUpdate","speciesSummary","getSpeciesCount","getSpeciesSummary","renderLessonIntro","textSetup","textIntroTemplate","lessonIntro","intro","renderEditLesson","lessonEditTemplate","lessonListScrollHandler","scrollToTitle","siblingsBefore","siblings","sibling","before","onLoadLessonViewState","showVideoIconClass","videoState","reviewState","hasTermsClass","isCollectionEditableClass","onClickViewState","isYoutubeIcon","isChevronIcon","row","speciesList","reviewLink","DEFAULT","hideOtherContentAndRevertChevrons","isSpeciesListAvailable","isSpeciesListHidden","lessonVideoState","iconIsChevron","lessonIsYoutubeIcon","requiresSpeciesList","revealSpeciesList","hideSpeciesList","selectedLessonId","chevron","chevronLessonId","loadAndDisplaySpeciesList","lessonListEventHandler","onLoadLessonsViewState","onLessonIconClickHandler","isItemActive","siblingChevron","onReviewClickHandler","START_LESSON_REVIEW","onLessonTitleClickHandler","renderCustomLesson","savedLessons","onCreateCustomLesson","lessonTemplate","hideVideoClass","hideTextIntroClass","youtubeLessonIcon","scrollTo","left","behavior","cookie","renderLessons","lessonListTemplate","tsa","seconds","renderLesson","saved","isPaused","renderLessonListHeader","header","lessonListHeaderTemplate","createGuideHandler","handlePreviousStepAction","youtubeLessonIcons","youtube","highlightActiveLesson","chevrons","reviews","SECURE","cookieHandler","setFirstTimeVisitorCookie","isFirstVisit","isFirstTimeVisitor","readCookie","removeFirstTimeVisitorCookie","setLastVisitedCookie","setLastVisited","hasUserBeenAwayTooLong","lastVisited","timeDiff","abs","beenGoneTooLong","nameEQ","ca","cookieToAdd","settingsHandler","settingsTemplate","clearCacheBtn","setDelayBtn","setDelayInput","delayTxt","renderLogin","logoutTemplate","email","auth","logOut","signOut","loginTemplate","password","logIn","signInWithEmailAndPassword","credentials","notLoggedIn","renderLoggedIn","loggedIn","loggedOut","renderLanguagePicker","languageTemplate","onLoseFocusListeners","renderNavigation","navigationPortraitTemplate","navigationLeftTemplate","navigationRightTemplate","navIcons","clickedIcon","toggleIconOnOff","enumValueOf","LANDSCAPE_HOME","SETTINGS","PORTRAIT_HOME","EMAIL","LOGIN","LANGUAGE","activeInfoIcon","getByRole","onLoadState","returningUser","isLoggedIn","renderLoginChanges","letterBlocks","letter","letters","deleteLetter","activeBlocks","activeLetters","activeBlock","block","lastLetter","indexInInput","lastIndexOf","newValue","correctBlocks","letterIndex","blocks","keyboardBtn","selectedBlock","blockArray","getPoolItems","otherItems","getItemsFromCollection","taxonicMatches","speciesPool","ci","isException","renderMultiStrips","defaultLanguage","render","helpDefault","clue","stripWithImageTemplate","stripTemplate","strips","italicise","strip","questionCount","findIndex","scoreHandler","buildQuestion","renderBinomialQuestions","renderVernacularQuestions","renderIdQuestions","alternativeFamilies","epithet","latin","en","indices","otherFamilies","otherFamiliesLatinNames","otherFamiliesCommonNames","of","renderBirdsong","requiredTraits","renderMixedSpecimenImagesAndQuestion","getPortraitImages","srcs","islandscapeMode","mixedSpecimenTemplate","continueLessonBtn","boundScore","selectedName","scoreUpdateTimer","wrongItem","bindScore","renderMixedSpecimenQuestion","renderBonusTest","renderItemSpecimenTiles","collectionItems","getImagesFromItemFamily","renderSpecimenImageTiles","acceptableScreens","specimensTemplate","pooledImage","uniqueImages","familyImages","imageToPrep","getUniqueImage","uniqueImage","functions","renderNonTaxonCardSpecimenTiles","subscribeToNonTaxaSelection","renderTextEntry","vernacular","renderInput","questionTxt","textEntryTemplate","textEntryPortraitTemplate","inputTxt","helpTxt","answerBtn","scoreEventHandler","layouts","renderSummary","getByName","renderHistory","renderCompleteText","givenTaxon","completeTemplate","numerOfItems","itemTaxons","itemTaxon","iconColour","answerIcon","continueLessonHandler","renderCultivarCard","cultivars","locale","eolAlt","wikiAlt","cultivarTemplate","renderBonusSpecimenTiles","lookalikesCount","renderSpecimenTiles","renderMediaPlayers","renderMixedTraitQuestion","questionTemplate","renderHorizontalStrips","domain","observeStore","select","currentState","hasStateSignificantlyChanged","handleChange","nextState","is","areEqual","calledBy","subscribe","removeByName","getAll","removeSubs","addSubs","funcByName","isSubscriptionRequired","checkRequired","isReviewingLesson","genericScoreHandler","blockScoreHander","stripScoreHandler","imageScoreHandler","simpleScoreHandler","showResponseToAnswerHandler","renderScoreHTMLResponse","btn","cursor","_score","handleClickEvent","answerNode","stripAnswer","stripAnswerIndex","stripAnswerName","_callback","tile","opacity","onTraitsReadyListeners","onTraitClickedListeners","pendingScore","mixedTraitHandler","getMatchingTrait","layoutTraits","requiredTraitValues","v","fetchTraits","multiples","multiple","onTraitsReady","onTraitClicked","onClickTileHandler","tiles","specimenImages","vernaculars","scientifics","leaf","leafName","familyStrips","textComplete","cultivar","cultivarCard","specimenCommonMatch","specimenLatinMatch","definitionCard","traitProperty","symbioticProperty","lookalikeProperty","traitImages","nonTaxonSpecimenTiles","mixedSpecimenQuestions","mixedSpecimensLeft","mixedSpecimensRight","mixedTraitLeft","mixedTraitRight","providerHorizontalStripQuestions","speciesIdentification","mixedSpeciesMatch","kind","given","requirement","speciesRevision","taxonRevision","nonTaxonRevision","definitionRevision","latinToCommonMatch","commonToLatinMatch","speciesIdentificationMatch","textCompleteGenus","multiSpecimenCommonMatch","multiSpecimenLatinMatch","traitPropertyMatch","lookalikePropertyMatch","symbioticPropertyMatch","familyMatch","cultivarMatch","familyStripsMatch","genusEntry","speciesEntry","speciesGenusEntry","leafEntry","textCompleteSpecies","commonEntry","latinEpithets","glossaryTerms","mixedSpecimenImages","mediaMatch","mixedTraitImages","providerHorizontalStrip","propertyTrait","createNextRound","nextRoundLayoutTemplates","progressScreens","itemsCountToDate","itemsLeft","layoutsToAdd","providerQuestions","providerLayouts","L","lessonLayouts","bonusTests","layoutIndex","layoutNames","updatedLessonPlan","updatedLesson","getNextRoundLayouts","activeLevelCount","levelId","goToNextLevelThatHasLayouts","iterateOverLevelsCheckingForAvailableLayouts","intialValue","increment","currentLevel","reviewLayouts","getCurrentLevelFromLessonPlan","lessonPlanner","createLessonPlan","landscapeCustom","default","landscapeCustom2","landscapeFungi","landscapeLichens","landscapeStatic","landscapeStaticTaxonGroup","portraitStatic","portraitStaticTaxonGroup","landscapeBirds","portraitBirds","portraitFungi","portraitLichens","setupHandler","isRequired","NEXT_ITEM","NEXT_LAYOUT","NEXT_LESSON","actionUpdate","asyncFunc","planId","lessonPlanPortrait","lessonPlanLandscape","plan","renderHeaders","renderScore","renderHome","forceIntroDisplay","initialiseConfig","originalConfig","lessonModalHandler","onCloseModal","library","faBookOpen","faLanguage","faEnvelope","faUserSlash","faUserCheck","faCog","faChevronDown","faGlasses","faDove","faFrog","faPaw","faBug","faLeaf","faRegistered","faBarcode","faSun","faChevronUp","faChalkboard","faTimes","faTimesCircle","faCheck","faExternalLinkAlt","faExclamation","faClone","faCopyright","faSlidersH","faUndo","faArrowAltCircleLeft","faArrowAltCircleRight","faRegisteredFar","faYoutube","dom","watch","handleWindowResize","setWindowHeight","iOS","userAgent","MSStream","verticalHeight","innerWidth","innerHeight","setProperty","largeImage","horizontalWidth","origin","protocol","href","loadModalHTML","modalsTemplate","msg","css","logAPIError","onLoadHandler","Sentry","dsn","currentCounter","statePlans","cloudCollections","initialisedConfig","root","formatUrl","encode","ranks","fetchWiki","missingMessage","method","errorPromise","cleanEntry","cleaned","formatWiki","wikiSearchTerm","searchTerm","searchTerms","exceptions"],"mappings":"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D,QAFI,+c,kBCEXC,EAAOD,QAFI,2qB,kBCEXC,EAAOD,QAFI,iD,kBCEXC,EAAOD,QAFI,+N,kBCEXC,EAAOD,QAFI,0wB,kBCEXC,EAAOD,QAFI,qe,kBCEXC,EAAOD,QAFI,4N,kBCEXC,EAAOD,QAFI,wd,kBCEXC,EAAOD,QAFI,0P,kBCEXC,EAAOD,QAFI,wgD,kBCEXC,EAAOD,QAFI,8yD,kBCEXC,EAAOD,QAFI,ozC,kBCEXC,EAAOD,QAFI,kvF,kBCEXC,EAAOD,QAFI,2rC,kBCEXC,EAAOD,QAFI,4E,kBCEXC,EAAOD,QAFI,2jC,kBCEXC,EAAOD,QAFI,0pC,kBCEXC,EAAOD,QAFI,6H,kBCEXC,EAAOD,QAFI,mzD,kBCEXC,EAAOD,QAFI,ynB,kBCEXC,EAAOD,QAFI,siB,kBCEXC,EAAOD,QAFI,umD,kBCEXC,EAAOD,QAFI,qtB,kBCEXC,EAAOD,QAFI,k0D,kBCEXC,EAAOD,QAFI,mjB,kBCEXC,EAAOD,QAFI,oO,kBCEXC,EAAOD,QAFI,mH,kBCEXC,EAAOD,QAFI,2a,kBCEXC,EAAOD,QAFI,ktB,kBCEXC,EAAOD,QAFI,iQ,kBCEXC,EAAOD,QAFI,mL,kBCEXC,EAAOD,QAFI,++E,kBCEXC,EAAOD,QAFI,0kD,kBCEXC,EAAOD,QAFI,myG,kBCEXC,EAAOD,QAFI,iZ,kBCEXC,EAAOD,QAFI,4e,kBCEXC,EAAOD,QAFI,se,kBCEXC,EAAOD,QAFI,yH,kBCEXC,EAAOD,QAFI,qiC,kBCEXC,EAAOD,QAFI,wxB,kBCEXC,EAAOD,QAFI,8a,kBCEXC,EAAOD,QAFI,yU,kBCEXC,EAAOD,QAFI,2kC,kBCEXC,EAAOD,QAFI,4hB,kBCEXC,EAAOD,QAFI,o2B,kBCEXC,EAAOD,QAFI,+oB,kBCEXC,EAAOD,QAFI,0N,kBCEXC,EAAOD,QAFI,mS,kBCEXC,EAAOD,QAFI,6T,kBCEXC,EAAOD,QAFI,ulB,kBCEXC,EAAOD,QAFI,24B,kBCEXC,EAAOD,QAFI,kF,kBCEXC,EAAOD,QAFI,gZ,kBCEXC,EAAOD,QAFI,6X,kBCEXC,EAAOD,QAFI,+R,kBCEXC,EAAOD,QAFI,0O,kBCEXC,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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([262,0,3]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","Array.prototype.concatAll = function() {\n    const results = [];\n  \n    this.forEach(function(subArray) {\n      subArray.forEach(function(element) {\n        results.push(element);\n      });\n    });\n  \n    return results;\n  };\n  \n  const encodeQuery = q => { \n    if(q === undefined) return q;\n    if(Number.isInteger(q)) return q;\n    return encodeURIComponent(q.trim()) \n  };\n  \n  const timer = function (sink, delay) {\n    let id = null;\n    Bacon.fromBinder(function() {\n      id = setInterval(function() {\n          sink();\n        }, delay);    \n      })\n    .onValue(function(element) { \n      //\n     });\n    return id;\n  };\n  \n  function intervalTimer (sink, delay) {\n    var timerId;\n  \n    this.pause = function() {\n        window.clearInterval(timerId);\n    };\n  \n    this.resume = function() {\n        window.clearInterval(timerId);\n        timerId = timer(sink, delay);\n    };\n  \n    this.getId = function (){\n      return timerId;\n    }\n  \n    this.resume();\n  \n    return this;\n  };\n  \n  const shuffleArray = array => {\n\n    // Check against https://bost.ocks.org/mike/shuffle/ Fisher–Yates Shuffle\n\n    if(!array || array.length === 0) return;\n\n    var currentIndex = array.length, temporaryValue, randomIndex;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return [ ...array ];\n\n    // return (arr\n    //   .map(a => [Math.random(), a])\n    //   .sort((a, b) => a[0] - b[0])\n    //   .map(a => a[1]))\n  };\n  \n  const randomiseSelection = (source, required, zeroBased = false) => {\n    const r = selection => {\n      const arr = shuffleArray(source);\n      selection = selection.concat(arr.map((item, index) => {\n        if(index + selection.length < required) {\n          return zeroBased ? --item : item;\n        }      \n      })).filter(item => item !== undefined);\n      return selection.length < required ? r(selection) : selection;\n    }\n    return r([]);\n  };\n\n const onlyUnique = (value, index, self) => { \n    return self.indexOf(value) === index;\n};\n\nconst sortBy = (arr, prop, dir = 'asc') => {\n  return dir === 'asc' \n    ? arr.sort((a, b) => parseFloat(a[prop]) - parseFloat(b[prop]))\n    : arr.sort((a, b) => parseFloat(b[prop]) - parseFloat(a[prop]));  \n};\n\nconst sortAlphabeticallyBy = (arr, prop) => {\n  arr.sort(function(a, b){\n    if(a[prop] < b[prop]) return -1;\n    if(a[prop] > b[prop]) return 1;\n    return 0;\n  });\n  return arr;\n};\n\nconst calcItemIndex = (offSet, moduleSize, index) => {\n  const itemIndex = \n        (offSet + index) % moduleSize === 0 \n          ? offSet\n          : offSet + (offSet + index) % moduleSize;\n  return itemIndex;\n};\n\nconst capitaliseFirst = str => {\n  const text = str.substr(0, 1).toUpperCase() + str.substr(1).toLowerCase();\n  return text;\n};\n\nconst capitaliseAll = str => {\n  const text = str.toLowerCase()\n    .split(' ')\n    .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n    .join(' ');\n  return text;\n};\n\nconst getCellValue = function(tr, idx, headerSortIndex, wide){\n  let children = tr.children;\n  if(!wide) {\n    children = [...tr.children].filter(child => [...child.classList].join('').indexOf('wide-screen') === -1);\n  }\n  const valueToSortOn = \n    children[idx].dataset.snapIndex ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.vernacularName) ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.name) ||\n    children[idx].children[headerSortIndex].innerText ||\n    children[idx].innerText || \n    children[idx].classList[0] || \n    children[idx].textContent;\n  return valueToSortOn;\n}\n\nconst comparer = function(idx, asc, headerSortIndex, wide) { return function(a, b) { return function(v1, v2) {\n      const isNumericallyComparible = v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2);\n      return isNumericallyComparible ? v1 - v2 : v1.toString().localeCompare(v2.toString());\n    }(getCellValue(asc ? a : b, idx, headerSortIndex, wide), getCellValue(asc ? b : a, idx, headerSortIndex, wide));\n}};\n\n// https://stackoverflow.com/questions/14267781/sorting-html-table-with-javascript/14268260\n\nconst makeSortable = (document, callback, wide) => {\n\n  Array.from(document.querySelectorAll('th > span')).forEach(function(sp) { sp.addEventListener('click', function() {\n\n          const headerSortIndex = this.innerText.toUpperCase() === 'ORDER' ? 1 : 0;\n\n          const names = [];\n          var th = this.parentElement;\n          if(th.classList[0] === 'not-sortable') return;\n          var table = th.closest('table');\n          var tbody = table.querySelector('tbody');\n          var footer = table.querySelector('tfoot');          \n\n          snapLog('Array.from(tbody.querySelectorAll(\"tr\")): ', Array.from(tbody.querySelectorAll('tr')));\n\n          Array.from(tbody.querySelectorAll('tr'))\n              .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc, headerSortIndex, wide))\n              .forEach(function(tr) { \n                if(tr !== footer) {\n                  tbody.appendChild(tr);\n                  names.push(tr.cells[0].id);\n                }\n              });        \n\n            callback(names);\n      })\n  });\n};\n\nconst flatten = array => {\n  const flattenedArray = array.reduce(\n    function(accumulator, currentValue) {\n      return accumulator.concat(currentValue);\n    },\n    []\n  );\n  return flattenedArray;\n}\n\nconst getObservableMonths = (date, span = 3) => {\n\n  const daysAway = (when, days) => {\n      let dateFromDays = date;\n      const direction = when === 'future' ? 1 : -1;\n      dateFromDays.setDate(dateFromDays.getDate() + direction * days);\n      return dateFromDays;\n  };\n\n  const startMonth = daysAway('past', 30).getMonth();\n  const thisMonth = date.getMonth() + 1;\n  const endMonth = daysAway('future', 30).getMonth() + 1;\n\n  const getMonthName = month => {    \n    const exampleDate = new Date(2000, month, 1);\n    const name = exampleDate.toLocaleString('en-uk', { month: 'long' });\n    return name;\n  }\n\n  const months = [ \n      { index: startMonth, name: getMonthName(startMonth)}, \n      { index: thisMonth, name: getMonthName(thisMonth)}, \n      { index: endMonth, name: getMonthName(endMonth)}\n    ];\n\n  return months;\n};\n\nconst getRandomInt = max => {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nconst createSessionToken = () => {\n\n  // uuidv4\n\n  // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript#answer-2117523\n\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nconst getRandomObjectProperty = obj => {\n  if(Object.keys(obj).length === 0 && obj.constructor === Object) return {};\n  const keys = Object.keys(obj);\n  const index = Math.floor(Math.random() * keys.length);\n  const key = keys[index];\n\treturn { key, value: obj[key] };\n};\n\nconst toCamelCase = sentenceCase => {\n  if(sentenceCase === undefined) return '';\n  var out = \"\";\n  sentenceCase.split(\" \").forEach(function (el, idx) {\n      var add = el.toLowerCase();\n      out += (idx === 0 ? add : add[0].toUpperCase() + add.slice(1));\n  });\n  return out;\n};\n\nconst fromCamelCase = str => {\n  if(str === undefined) return '';\n  return str.replace(/([a-z])([A-Z])/g, '$1 $2').toLowerCase();\n};\n\nconst parseToLowerCase = value => {\n  if(value === undefined || value === null) return '';\n  else if(typeof value === 'object') return value;\n  else return !!value ? value.toLowerCase() : '';\n};\n\nexport const utils = {\n  encodeQuery,\n  timer, \n  shuffleArray,\n  randomiseSelection,\n  onlyUnique,\n  sortBy,\n  sortAlphabeticallyBy,\n  calcItemIndex,\n  capitaliseFirst,\n  capitaliseAll,\n  makeSortable,\n  flatten,\n  getObservableMonths,\n  getRandomInt,\n  createSessionToken,\n  getRandomObjectProperty,\n  toCamelCase,\n  fromCamelCase,\n  parseToLowerCase\n};","// Module\nvar code = \"<figure> <figcaption class=hide>{{ title }}</figcaption> <audio controls src=\\\"{{ mp3 }}\\\"> Your browser does not support the <code>audio</code> element. </audio> </figure>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"relative lesson-list-carousel-item js-lesson-list-carousel-item\\\"> <div class=\\\"landscape double-centred-block\\\"> <img class=lesson-icon src=\\\"{{ lesson.icon }}\\\" alt=\\\"{{ lesson.name }}\\\"> </div> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-list-item js-lesson-list-item\\\" data-has-video=\\\"{{ lesson.hasVideo }}\\\"> <div> <div class=\\\"lesson-name js-lesson-title\\\" data-lesson-id=\\\"{{ lesson.id }}\\\"> <span id=\\\"lesson_{{ lesson.id }}\\\" class=\\\"lesson-title margin-right {{ lesson.isCollectionEditableClass }}\\\">{{ lesson.name }}</span> </div> <div class=lesson-taxa data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.taxa }}</div> <div class=\\\"latin hide-empty js-lesson-video-state\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.videoState }}</div> </div> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-review js-lesson-review\\\"> <div class=flex> <div class=\\\"centred-block fit-width margin-top\\\"> <button data-toggle=modal data-target=#glossaryModal data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"vocab test for {{ lesson.name }} lesson\\\" class=\\\"lesson-terms-review {{ lesson.hasTermsClass }} margin-right fit-width js-terms-review-link btn snap-btn smaller-text\\\" data-toggle=modal data-target=#glossaryModal>Vocab test</button> </div> <div class=\\\"vertical-centred-block relative margin-top\\\"> <button data-toggle=modal data-target=#lessonModal data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"landscape btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button> <button data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"portrait btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button> <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide-important inline-progress-container js-review\\\"> <span class=absolute>&nbsp;</span> </span> <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide margin-right js-loading-review-message\\\"> <span><i class=\\\"fas fa-sync slow-spin\\\"></i></span> </span> </div> </div> </div> </div> <div class=\\\"lesson-list-action-icons js-lesson-list-action-icons\\\"> <div class=\\\"\\\"> <button data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-is-youtube-icon=true class=\\\"snap-icon-btn fit-width js-lesson-list-youtube\\\" aria-label=\\\"play video for the lesson {{ lesson.name }}\\\"> <i class=\\\"fab fa-youtube youtube-icon {{ lesson.hideVideoClass }}\\\"></i> <i class=\\\"fas fa-glasses youtube-icon {{ lesson.hideTextIntroClass }}\\\"></i> </button> <button data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"landscape snap-icon-btn fit-width js-lesson-list-chevron\\\" aria-label=\\\"species list for the lesson {{ lesson.name }}\\\"> <i class=\\\"fas fa-chevron-down\\\"></i> </button> </div> </div> </div> <div data-container-id=\\\"{{ lesson.id }}\\\" class=\\\"species-container js-species-container\\\"></div> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"standard-block border-bottom double-centred-block\\\"></div> <div class=tiles-container> <div class=\\\"squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\"> <div> <img class=square src=\\\"{{ image.medium }}\\\" data-toggle=modal data-target=#imageModal data-item-name=\\\"{{ image.itemName }}\\\" data-url=\\\"{{ image.url }}\\\"/> </div> </div> </div> <div class=lesson-companion> </div>\";\n// Exports\nmodule.exports = code;","var map = {\n\t\"./log\": 120\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 119;","// Module\nvar code = \"<div id=\\\"imageSlider_{{ identifier }}\\\" class=\\\"imageSlider carousel slide\\\" data-ride=carousel data-interval=false> <div class=\\\"carousel-inner js-carousel-inner\\\"> <div data-repeat-image=\\\"{{ images }}\\\"> <div class=\\\"carousel-item image-slider-190\\\"> <img role=button src=\\\"{{ image.medium }}\\\" data-title=\\\"{{ image.itemName }}\\\" data-source=\\\"{{ image.source }}\\\" data-license=\\\"{{ image.license }}\\\" data-rights-holder=\\\"{{ image.rightsHolder }}\\\" data-photographers-name=\\\"{{ image.photographersName }}\\\" data-url=\\\"{{ image.url }}\\\" data-provider=\\\"{{ image.provider }}\\\" data-item-name=\\\"{{ image.itemName }}\\\" data-index=\\\"{{ image.index }}\\\" alt=\\\"Give {{ image.itemName }} as your answer\\\"> </div> </div> <div> <div class=\\\"attribution-layer js-attribution-layer {{ identifier }}\\\"></div> <ol class=\\\"carousel-indicators js-carousel-indicators\\\" data-repeat-image=\\\"{{ images }}\\\"> <li data-target=#carouselExampleIndicators data-slide-to=\\\"{{ image.index }}\\\"></li> </ol> </div> </div> <a class=carousel-control-prev href=\\\"#imageSlider_{{ identifier }}\\\" role=button data-slide=prev data-slider=\\\"#imageSlider_{{ identifier }}\\\"> <button class=\\\"btn snap-icon-btn carousel-control-prev-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button> <button class=sr-only>Previous</button> </a> <div class=carousel-control-next href=\\\"#imageSlider_{{ identifier }}\\\" role=button data-slide=next data-slider=\\\"#imageSlider_{{ identifier }}\\\"> <button class=\\\"btn snap-icon-btn carousel-control-next-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button> <button class=sr-only>Next</button> </div> <div class=\\\"description_{{ identifier }} image-description\\\"></div> <div class=double-centred-block></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=attribution-layer> <div class=\\\"rights-link js-rights-link\\\"> <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\"> <i class=\\\"fas fa-copyright\\\"></i> </div> <div></div> <div class=\\\"rights-link-copyright double-centred-block\\\"> <a href=\\\"{{ large }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <i class=\\\"fas fa-external-link-alt\\\"></i> </a> </div> </div> <div class=\\\"rights-attribution hide-important js-rights-attribution\\\"> <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\"> <i class=\\\"fas fa-copyright\\\"></i> </div> <div class=double-centred-block> <a href=\\\"{{ source }}\\\" target=_blank> <span class=centred-block> <span class=sr-only>Opens in new window</span> <span class=\\\"underline-link half-margin-right\\\">{{ author }}</span> <i class=\\\"super active-icon fas fa-external-link-alt\\\"></i> </span> </a> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span class=\\\"feature-label js-compare-species-label\\\"></span> <span title=\\\"Lookalike species\\\" class=\\\"landscape compare-species-link js-compare-species-link\\\" data-toggle=modal data-target=#imageComparisonModal data-slides=\\\"{{ slides }}\\\"> <i class=\\\"fas fa-clone\\\"></i> </span> <span title=\\\"Lookalike species\\\" class=\\\"portrait compare-species-link js-compare-species-link\\\"> <i class=\\\"fas fa-clone\\\"></i> </span>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=js-relationship-card-list data-repeat-lookalike=\\\"{{ lookalikes }}\\\"> <div class=lookalike-card> <div>{{ lookalike.species }}</div> <div>{{ lookalike.speciesDescription }}</div> <div class=js-test-card-container-link> <span data-toggle=\\\"{{ lookalike.modal }}\\\" data-target=#cardModal class=\\\"{{ lookalike.className }}\\\" id=\\\"{{ lookalike.lookalike }}\\\">{{ lookalike.lookalike }}</span> </div> <div>{{ lookalike.lookalikeDescription }}</div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div class=js-relationship-card-list data-repeat-relationship=\\\"{{ relationships }}\\\"> <div class=relationship-card> <div class=cols> <div>Relationship</div><div>{{ relationship.type }}</div> </div> <div class=cols> <div class=js-test-card-container-link> <span data-toggle=\\\"{{ relationship.modal }}\\\" data-target=#cardModal class=\\\"{{ relationship.className }}\\\" id=\\\"{{ relationship.speciesA }}\\\">{{ relationship.speciesA }}</span> </div> <div class=capitalise>{{ relationship.speciesARole }}</div> </div> <div class=cols> <div>{{ relationship.speciesB }}</div><div class=capitalise>{{ relationship.speciesBRole }}</div> </div> <div>{{ relationship.description }}</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=id-box> <div>{{ id }}</div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div data-repeat-detail=\\\"{{ details }}\\\"> <dl class=info_detail> <dt>{{ detail.term }}</dt> <dd><img class=\\\"{{ detail.imgClassName }}\\\" src=\\\"{{ detail.img.url }}\\\" alt=\\\"\\\"></dd> <dd>{{ detail.definition }}</dd> </dl> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"traitSlider{{ id }}\\\" class=\\\"info carousel slide\\\" data-ride=false data-interval=false> <div class=carousel-inner data-repeat-trait=\\\"{{ traits }}\\\"> <dl class=carousel-item> <div> <dt>{{ trait.name }}</dt> <dd>{{ trait.value }} {{ trait.unit }}</dd> </div> <div class=hide-important>{{ trait.description }}</div> </dl> </div> <a class=\\\"carousel-control carousel-control-prev\\\" href=\\\"#traitSlider{{ id }}\\\" role=button data-slide=prev> <button class=carousel-control-prev-icon aria-hidden=true></button> <button class=sr-only>Previous</button> </a> <a class=\\\"carousel-control carousel-control-next\\\" href=\\\"#traitSlider{{ id }}\\\" role=button data-slide=next> <button class=carousel-control-next-icon aria-hidden=true></button> <button class=sr-only>Next </button></a> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=data-box> <div> <span class=js-world>Worldwide</span><span class=js-taxon-count>---</span> </div> <div> <span class=js-place>Location</span><span class=js-place-taxon-count>---</span> </div> <div> <span><a target=_blank href=\\\"\\\" class=\\\"underline-link js-taxon-link underline-link-left-margin\\\">iNat</a></span> <span class=js-test-card-container-wiki></span> <span><a class=\\\"species-card-eol-link js-test-card-container-eol-link underline-link\\\">EOL</a></span> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=calendar-box> <div data-repeat-row=\\\"{{ data }}\\\" class=\\\"\\\"> <div class=col data-repeat-value=\\\"{{ row }}\\\"> <div title=\\\"{{ value.count }}\\\" class=\\\"{{ value.class }}\\\">{{ value.month }}</div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span> <span class=\\\"uppercase small-text js-native-container\\\"></span> <span class=rank>{{ trait }}</span> <span class=\\\"lookalikes js-lookalikes\\\"></span> <span class=\\\"badge badge-light js-subspecies-badge\\\" data-toggle=modal data-target=#badgeListModal>{{ subSpeciesCount }}</span> <span class=sr-only>species of this family in the collection</span> </span> <span class=hide-empty>{{ familyVernacularName }}</span> <span class=\\\"latin hide-empty\\\">{{ familyName }}</span> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul data-repeat-language=\\\"{{ languageNames }}\\\" class=\\\"scrollable badge-list\\\"> <li class=capitalise> <div class=\\\"margin-top uppercase\\\">{{ language.name }}</div> <ul data-repeat-common=\\\"{{ language.names }}\\\"> <li>{{ common }}</li> </ul> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=\\\"card-card js-species-card\\\"> <div id=card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container vernacular-name-badge js-names-container\\\"> <div> <span class=vernacular-name>{{ vernacularName }}</span> </div> <div> <span class=binomial>{{ name }}</span> <span class=js-names-badge></span> <span class=\\\"portrait bird-song-icon-disabled js-bird-song-player\\\" data-src=player data-toggle=modal data-target=#basicModal> <i class=\\\"fas fa-music\\\"></i> </span> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"data-box-container landscape\\\"> <div class=\\\"calendar-container landscape\\\"> <div class=js-calendar-box></div> </div> <div class=\\\"inat-box js-inat-box\\\"></div> <div class=\\\"taxa-container landscape js-taxa-box\\\"></div> </div> <div class=\\\"portrait-grid species-card-images carousel js-test-card-container-images\\\"></div> <div class=\\\"mixed-content-container scrollable\\\"> <div class=\\\"landscape bird-song\\\"> <div class=hide-empty> <iframe class=js-bird-song src=\\\"\\\" scrolling=no frameborder=0 width=80vw height=115> </iframe> </div> </div> <div class=\\\"card-txt-block lookalikes js-lookalikes\\\"></div> <div class=\\\"js-info-box-details info-details\\\"></div> </div> <div class=\\\"info-box js-info-box\\\"></div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container\\\"> <div class=\\\"taxon card-card js-taxon-card\\\"> <div id=taxon-card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container vernacular-name-badge js-names-container\\\"> <div> <span>{{ vernacularName }}</span> </div> <div> <span class=binomial>{{ name }}</span> <span class=\\\"names-badge js-names-badge\\\" data-toggle=modal data-target=#badgeListModal>{{ occurrences }}</span> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"data-box-container sub-header\\\"> <div class=data-box> <div class=\\\"taxon-data js-taxon-rank\\\"><span>Rank</span> <span>{{ rank }}</span></div> <div class=taxon-data><span>Species</span> <span>{{ species }}</span></div> <div class=\\\"taxon-data js-taxon-genus\\\"><span>Genera</span> <span>{{ genera }}</span></div> <div class=\\\"taxon-data js-taxon-family\\\"><span>Families</span> <span>{{ families }}</span></div> </div> <div class=\\\"landscape external-links js-external-links\\\"> <div><a href=\\\"{{ eol }}\\\" target=_blank class=underline-link>EOL</a><span> taxon home page</span> <span class=names-badge> <i class=\\\"super fas fa-external-link-alt\\\"></i></span></div> <div><a href=\\\"{{ wiki }}\\\" class=underline-link data-toggle=modal data-target=#wikiModal>Wikipedia page</a></div> </div> </div> <div class=mixed-content-container> <div class=centred-block> <div class=id-box-container> <div class=id-box> <div> </div> <div> <div class=taxon-identification>{{ identification }}</div> </div> </div> </div> <div class=taxon-summary> <div>{{ summary }}</div> </div> </div> </div> <div class=\\\"info-box js-taxon-info-box\\\"></div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=\\\"portrait-grid non-taxon-card-images carousel js-non-taxon-card-images\\\"></div> <div class=\\\"card-card card non-taxon js-non-taxon-card\\\"> <div id=taxon-card-header class=question-container> <div class=\\\"species-header js-species-header\\\"> <img src=\\\"{{ image.small }}\\\" alt=\\\"\\\"> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container js-names-container\\\"> <div> Foliose </div> <div> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"non-taxa js-non-taxa\\\"> <div role=group class=btn-group data-toggle=buttons data-repeat-taxon=\\\"{{ group }}\\\"> <label class=\\\"btn btn-secondary\\\" id=\\\"{{ taxon.id }}\\\"> <input type=radio name=options id=\\\"{{ taxon.id }}\\\" autocomplete=off checked=checked> {{ taxon.id }} </label> </div> </div> <div class=definitions> <div class=\\\"non-taxa-definition js-non-taxa-definition\\\"> <div></div> </div> <div class=non-taxa-definition> <div class=id-box> <div> <div class=landscape></div> <div class=portrait></div> </div> <div> <div></div> </div> </div> </div> <div class=\\\"landscape species-card-wiki\\\"> <span class=\\\"non-taxon-card-wiki js-non-taxon-card-wiki\\\"></span> </div> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<table id=\\\"species_list_id_{{ id }}\\\" class=\\\"species-table js-species-list\\\" style=width:100%> <tbody data-repeat-item=\\\"{{ itemImages }}\\\"> <tr class=\\\"table-row master js-list-item\\\" id=\\\"id_{{ item.id }}\\\"> <td id=\\\"{{ item.name }}\\\" data-snap-index=\\\"{{ item.snapIndex }}\\\"> <button class=\\\"btn snap-icon-btn double-centred-block\\\"> <img id=\\\"{{ item.name }}\\\" src=\\\"{{ item.small }}\\\" alt=\\\"Open gallery to more photos of {{ item.name }}\\\" data-toggle=modal data-item-name=\\\"{{ item.name }}\\\" data-target=#imageModal data-id=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rights-holder=\\\"{{ item.rightsHolder }}\\\" data-title=\\\"{{ item.name }}\\\" data-license=\\\"{{ item.license }}\\\" data-source=\\\"{{ item.source }}\\\" data-provider=\\\"{{ item.provider }}\\\"> </button> </td> <td> <button data-toggle=modal data-name=\\\"{{ item.name }}\\\" data-vernacular-name=\\\"{{ item.vernacularName }}\\\" data-id=\\\"{{ item.id }}\\\" data-type=speciesCardLink data-target=#cardModal class=\\\"snap-link-btn underline-link js-test-card-container-link\\\">{{ item.vernacularName }}</button> <span class=\\\"no-underline-link latin-name\\\"> <button data-toggle=modal data-name=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=genus data-genus=\\\"{{ item.genus }}\\\" data-target=#cardModal class=\\\"{{ item.genusLinkClass }}\\\">{{ item.genus }}</button> <span>{{ item.species }}</span> </span> </td> <td class=wide-screen> <button data-toggle=modal data-name=\\\"{{ item.taxonomy.family }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=family data-family=\\\"{{ item.taxonomy.family }}\\\" data-target=#cardModal class=\\\"no-underline-link {{ item.familyLinkClass }}\\\">{{ item.taxonomy.family }}</button> <button data-toggle=modal data-name=\\\"{{ item.taxonomy.order }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=order data-order=\\\"{{ item.taxonomy.order }}\\\" data-target=#cardModal class=\\\"no-underline-link {{ item.orderLinkClass }} js-order-link\\\">{{ item.taxonomy.order }}</button> </td> <td class=\\\"{{ item.iconicTaxon }} {{ item.hasTaxonClassName }}\\\"> <span id=\\\"{{ item.id }}\\\" name=\\\"{{ item.name }}\\\"><i class=\\\"{{ item.iconicTaxonIcon }}\\\"></i></span> <span class=\\\"mushroom-icon {{ item.hideFungiIcon }}\\\"></span> </td> <td class=\\\"{{ item.hasVideoClassName }}\\\"> <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width js-youtube\\\" aria-label=\\\"start video from the species {{ item.name }}\\\"> <i class=\\\"fab fa-youtube youtube-icon\\\" data-name=\\\"{{ item.name }}\\\"></i> </button> </td> <td class=\\\"{{ item.hasVideoClassName }}\\\"> <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width accordion-icon js-accordion\\\" aria-label=\\\"video commentary for the species {{ item.name }}\\\"> <i data-name=\\\"{{ item.name }}\\\" class=\\\"fas fa-chevron-down\\\"></i> </button> </td> </tr> </tbody> </table> <button class=\\\"btn snap-action-btn portrait btn-current-lesson-begin js-btn-current-lesson-begin\\\">Quiz</button>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<script>var tag=document.createElement(\\\"script\\\");tag.src=\\\"https://www.youtube.com/iframe_api\\\";var firstScriptTag=document.getElementsByTagName(\\\"script\\\")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),window.onYouTubeIframeAPIReady=function(){window.YT=YT}</script> <div class=\\\"home-scrolling-container js-home-scrolling-container\\\"> <div class=\\\"title standard-block double-centred-block\\\">{{ video.title }}</div> <div class=video> <div style=min-height:1px></div> <iframe type=text/html id=embedded-video width=100% src=\\\"https://www.youtube.com/embed/{{ video.id }}?enablejsapi=1&playsinline=1&start={{ video.playAt }}\\\" frameborder=0 allowfullscreen> </iframe> </div> <div class=scrollable> <div class=\\\"one-and-half-standard-block centred-block justify-space-between padding-left\\\"> <div class=centred-block> <div class=margin-right> <img width=48px height=48px src=\\\"{{ video.src }}\\\" alt=\\\"\\\"> </div> <div class=vertical-centred-block> <div><span class=\\\"hide margin-right\\\">Created by:</span><span class=emphasis>{{ video.presenter }}</span></div> <div><span class=\\\"hide margin-right\\\">Location:</span><span class=font-size-small>{{ video.location }}</span></div> </div> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div>{{ note.tag }}</div> <div>{{ note.description }}</div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container score-summary-container js-test-card-container\\\"> <div class=js-summary-card> <div class=\\\"test-card-question standard-block centred-block js-test-card-question\\\"> <div class=\\\"question question-txt\\\"> <div> <span class=\\\"hide-empty question-question js-question-question\\\">Quiz progress</span> <span class=\\\"hide-empty question-statement\\\"></span> </div> </div> </div> <div id=accordion class=\\\"score-summary scrollable review-summary\\\"> <div class=score-summary-row-title> <div> <div class=double-centred-block> <span class=uppercase>{{ collection.name }}</span> </div> <div class=double-centred-block> <span>Round {{ lesson.currentRound }} of {{ lesson.rounds }}</span> </div> </div> </div> <div class=\\\"score-summary-footer running-block centred-block\\\"> <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button> </div> <div class=js-score-summary-rows></div> <div class=\\\"score-summary-footer running-block centred-block\\\"> <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button> </div> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"score-summary-row species\\\"> <div></div> <div> <div></div> <div> <span>{{ vernacularName }}</span> <span class=latin>{{ binomial }}</span> </div> </div> <div>{{ score }}</div> </div> <div data-repeat-row=\\\"{{ rows }}\\\"> <button class=\\\"btn snap-icon-btn score-summary-row header\\\" type=button data-toggle=collapse data-target=\\\"#{{ row.id }}\\\" aria-expanded=false aria-controls=\\\"{{ row.id }}\\\"> <div data-is-true=\\\"{{ row.success }}\\\"> <i class=\\\"fas fa-check\\\"></i> <i class=\\\"fas fa-times\\\"></i> </div> <div> <div class=binomial>{{ row.statement }}</div> <div>{{ row.questionText }}</div> </div> <div> <i class=\\\"fas fa-chevron-down\\\"></i> </div> </button> <div id=\\\"{{ row.id }}\\\" class=\\\"collapse score-summary-row in-columns\\\" data-repeat-answer=\\\"{{ row.answers }}\\\"> <div data-question=\\\"{{ ^.row.question }}\\\"> <div> </div> <div data-is-true=\\\"{{ answer.isTrue }}\\\" data-is-wrong-answer=\\\"{{ answer.isWrongAnswer }}\\\"> <div> <img data-has-image=\\\"{{ answer.hasImage }}\\\" src=\\\"{{ answer.url }}\\\" alt=\\\"{{ answer.value }}\\\"> </div> <div> <span>{{ answer.value }}</span><span class=\\\"hide-empty margin-left\\\">{{ answer.name }}</span> </div> <div></div> </div> <div></div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"horizontal-evenly-spaced-block js-no-questions\\\"> <span>You haven't answered any questions yet.</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=js-test-card> <div id=test-card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container {{ headerClassName }}\\\"> <div> <h2 class=vernacular-name>{{ vernacularName }}</h2> <span class=\\\"hide-empty names-badge\\\"></span> </div> <div> <h2 class=binomial>{{ binomial }}</h2> <span class=\\\"names-badge traits-count-badge js-traits-count-badge\\\"></span> <h2 class=\\\"term-header hide-empty js-term-header\\\">{{ term }}</h2> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <form action=\\\"\\\"> <fieldset> <div class=\\\"test-card-question standard-block centred-block js-test-card-question border-bottom\\\"> <div class=\\\"question question-txt {{ className }}\\\"> <div> <legend class=\\\"hide-empty question-question js-question-question\\\">{{ question }}</legend> <legend class=\\\"hide-empty question-help js-question-help\\\">{{ help }}</legend> <legend class=\\\"hide-empty question-statement js-statement-para\\\">{{ statement }}</legend> <legend class=\\\"hide-empty margin-top question-provider-question js-question-para\\\">{{ providerQuestion }}</legend> </div> </div> </div> <div class=\\\"test-card-content js-test-card-content scrollable\\\"> </div> </fieldset> </form> <div class=\\\"text-question js-txt-question\\\"></div> <div class=action-update-container> <div class=action-update> <button disabled=disabled class=\\\"btn snap-action-btn js-continue-lesson-btn\\\">Continue lesson</button> </div> </div> </div> </div> <div class=\\\"swap-out-card js-species-container\\\"></div> <div class=\\\"swap-out-card js-taxon-container\\\"></div> <div class=\\\"swap-out-card js-summary-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=filter-language-option-block> <div class=filter-options> <div class=language-options> <div class=dropdown> <button class=\\\"btn smaller-text snap-btn dropdown-toggle\\\" type=button id=taxonLanguageBtn data-toggle=dropdown aria-haspopup=true aria-expanded=false> Taxon language </button> <div class=dropdown-menu aria-labelledby=dropdownMenuButton data-repeat-language=\\\"{{ languages }}\\\"> <a id=\\\"{{ language.lang }}\\\" class=dropdown-item href=#>{{ language.name }}</a> </div> </div> </div> </div> <h2 class=\\\"half-standard-block centred-block\\\">Common names will be shown in<span id=taxonLanguageTxt>English</span>.</h2> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<menu> <ul class=custom-lesson-menu-options data-repeat-option=\\\"{{ options }}\\\"> <li data-option=\\\"{{ option.id }}\\\"> <button class=\\\"icon snap-icon-btn arrow-wrapper\\\"><span class=small-text>{{ option.text }}</span><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></button> </li> </ul> </menu> <div class=js-language-selection-container></div> <h3 class=\\\"standard-block centred-block js-persistence-warning\\\"> <span><i class=\\\"fas fa-exclamation\\\"></i> You are not currently logged in. Your collection will not be availble outside this browser.</span> </h3>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=border-bottom> <div class=\\\"running-block vertical-centred-block location-option html5-location\\\"> <div class=html5-location-place><button class=\\\"btn snap-action-btn js-set-location-btn\\\"></button><span class=landscape></span></div> </div> <div class=\\\"standard-block location-option place bottom-aligned\\\"> <form id=locationForm action=#> <div class=standard-block> <label for=#inat-place class=extra-small-text>Location</label> <input id=inat-place type=text placeholder=\\\"Or start typing the name of a place.\\\"> <input class=hide type=submit value=\\\"\\\"> </div> </form> </div> <div class=\\\"location-option margin-top range\\\"> <div class=range-slider> <div class=js-range></div> <div> <span class=range-limits>0km</span> <span class=margin-right style=width:100%><input class=\\\"set-range-input js-set-range-input\\\" type=range min=0 max=250 value=10></span> <span class=range-limits> 250km</span> <span class=\\\"saved js-range-saved\\\"></span> </div> </div> </div> </div> <div class=location-filter-options> <div> <div class=black-text>Species by season</div> <div class=\\\"season snap-switch margin-top margin-bottom\\\"> <div class=embedded-switch> <div class=txt-left><span>{{ observableMonths }}</span></div> <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\"> <div></div> </div> <div class=txt-right><span>All Year</span></div> </div> </div> </div> <div> <div class=black-text>Species by observation count</div> <div class=\\\"margin-top margin-bottom\\\"> <span> Top <input min=1 max=500 required class=\\\"medium half-margin-right js-location-no-of-records\\\" type=number value=\\\"{{ noOfRecords }}\\\"> most observed. </span> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div class=\\\"inat snap-switch running-block\\\"> <div class=embedded-switch> <div class=txt-left><span>iNaturalist User</span></div> <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\"> <div></div> </div> <div class=txt-right><span>Project</span></div> </div> </div> <div class=\\\"location-option inat-entry\\\"> <div class=\\\"input-container standard-block bottom-aligned\\\"> <form id=inatForm action=#> <input id=inat-identity type=text placeholder=\\\"Start typing a user or project Id.\\\"> </form> </div> </div> <div class=\\\"location-option chosen-guide-filter js-chosen-inat standard-block\\\"> <div>Learn more about <a href=https://www.inaturalist.org/ target=_blank class=underline-link>iNaturalist</a>.</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"iconic-taxa-categories js-iconic-taxa-categories\\\"> <div class=double-centred-block id=aves><div> <button class=snap-icon-btn aria-label=birds><i class=\\\"fas fa-dove\\\" aria-hidden=true></i></button> <div>Birds</div></div> </div> <div class=double-centred-block id=amphibia><div> <button class=snap-icon-btn aria-label=amphibians><i class=\\\"fas fa-frog\\\" aria-hidden=true></i></button> <div>Amphibians</div></div> </div> <div class=double-centred-block id=mammalia><div> <button class=snap-icon-btn aria-label=mammals><i class=\\\"fas fa-paw\\\" aria-hidden=true></i></button> <div>Mammals</div></div> </div> <div class=double-centred-block id=insecta><div> <button class=snap-icon-btn aria-label=insects><i class=\\\"fas fa-bug\\\" aria-hidden=true></i></button> <div>Insects</div></div> </div> <div class=double-centred-block id=fungi><div> <button class=snap-icon-btn aria-label=\\\"fungi and lichens\\\"><svg-icon class=si-glyph-mushrooms><src href=./static/icons/si-glyph-mushrooms.svg /></svg-icon></button> <div class=small-text>Fungi & Lichens</div></div> </div> <div class=double-centred-block id=plantae><div> <button class=snap-icon-btn aria-label=plants><i class=\\\"fas fa-leaf\\\" aria-hidden=true></i></button> <div>Plants</div></div> </div> <div class=double-centred-block id=reptilia><div> <button class=snap-icon-btn aria-label=reptiles><i class=\\\"far fa-registered\\\" aria-hidden=true></i></button> <div>Reptiles</div></div> </div> <div class=double-centred-block id=lepidoptera><div> <button class=snap-icon-btn aria-label=\\\"butterflies and moths\\\"><i class=\\\"fas fa-barcode\\\" aria-hidden=true></i></button> <div class=small-text>Butterflies & Moths</div></div> </div> </div> <div class=\\\"hide-important guide-bottom-actions\\\"> <span>Know what you want?</span> <span class=\\\"underline-link species-picker-link js-species-picker-link\\\">Species picker</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"guide-text-container hide-empty\\\"> <input id=input-species type=text placeholder=\\\"Start typing a latin species name\\\" autofocus> </div> <div class=\\\"autocomplete-options-container hide-important\\\" id=snapdragon-species-autocomplete style=width:unset></div> <ul class=\\\"selected-species js-selected-species\\\" data-repeat-species=\\\"{{ selectedSpecies }}\\\"> <li class=\\\"custom-control custom-checkbox\\\"> <input type=checkbox class=margin-half-right id=\\\"{{ species.name }}\\\" checked=checked> <label for=\\\"{{ species.name }}\\\">{{ species.name }}</label> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <input id=input-species type=text placeholder=\\\"Start typing a latin species name\\\" autofocus> </div> <div class=\\\"autocomplete-options-container hide-important\\\" id=snapdragon-species-autocomplete style=width:unset></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=selected-species-container> <div class=\\\"scrollable open js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div class=\\\"species-search js-species-search\\\"> <div><div class=icon><i class=\\\"fas fa-sun slow-spin\\\"></i></div></div> <h2 class=standard-block>This search is based on observations recorded by the public on <a class=underline-link target=_blank href=https://www.inaturalist.org/ >iNaturalist</a>.</h2> </div> <div> <div class=\\\"hide-empty request-feedback js-request-feedback\\\">Contacting iNaturalist…</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\"> <div class=\\\"lesson-name hide-important\\\" id=js-input-collection-name> <label for=#new-collection-name class=extra-small-text>lesson name</label> <input id=new-collection-name type=text value=\\\"{{ collection.name }}\\\"> </div> <div class=lesson-taxa><span class=js-lesson-taxa-count>{{ collection.items.length }}</span> <span class=js-lesson-taxa>{{ collection.taxa }}</span></div> </div> <div class=\\\"edit-species centred-block half-standard-block js-edit-species\\\"> <button class=\\\"snap-btn fit-width\\\">Edit lesson</button> </div> <div class=selected-species-container> <div class=\\\"scrollable js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"{{ className }}\\\"> <div class=\\\"actions js-actions\\\"></div> <div class=\\\"save-your-changes js-save-your-changes\\\"></div> </div> <div class=\\\"chosen js-chosen\\\"> <div class=prop-value-block><span></span><span class=selected-text></span></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=snapdragon-container> <dl data-repeat-item=\\\"{{ glossary }}\\\" class=\\\"definition card scrollable\\\"> <dt>{{ item.term }}</dt><dd>{{ item.definition }}</dd> </dl> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"margin-left centred-block standard-block padding-top\\\"> Answer <input min=1 max=\\\"{{ quickFire.count }}\\\" required class=\\\"big half-margin-left half-margin-right js-input-quick-fire\\\" type=number value=\\\"{{ quickFire.count }}\\\"> <span class=landscape>questions selected at random from <span class=js-quick-fire-count>{{ quickFire.count }}</span> terms.</span> <span class=portrait>from <span class=js-quick-fire-count>{{ quickFire.count }}</span> terms.</span> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait padding\\\"></div> <ul class=\\\"margin-left quick-fire-taxa list-group js-quick-fire-taxa\\\" data-repeat-taxon=\\\"{{ quickFire.filter.taxa }}\\\"> <li class=\\\"list-group-item fit-width margin-right\\\"> <input id=\\\"{{ taxon.name }}\\\" class=\\\"form-check-input mr-1\\\" type=checkbox value=\\\"\\\" aria-label=...> {{ taxon.name }}<span data-taxon=\\\"{{ taxon.name }}\\\" class=\\\"\\\">{{ taxon.count }}</span> </li> </ul> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait padding\\\"></div> <ul class=\\\"margin-left list-group quick-fire-branches js-quick-fire-branches\\\" data-toggle=buttons data-repeat-branch=\\\"{{ branches }}\\\"> <li class=\\\"list-group-item fit-width margin-right\\\" data-key=\\\"{{ branch.name }}\\\" data-value=\\\"{{ branch.name }}\\\"> <input class=\\\"form-check-input mr-1\\\" type=checkbox value=\\\"\\\" aria-label=\\\"{{ branch.name }}\\\" checked=checked> {{ branch.name }}<span data-name=\\\"{{ branch.name }}\\\">{{ branch.count }}</span> </li> </ul> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait half-padding\\\"></div> <div role=group class=\\\"btn-group margin-left quick-fire-options margin-bottom js-quick-fire-filter-options\\\" data-toggle=buttons data-repeat-option=\\\"{{ options }}\\\" arai-lable=\\\"Vocab question type: multiple choice or text entry\\\"> <button id=\\\"{{ option.key }}\\\" type=button data-key=\\\"{{ option.key }}\\\" class=\\\"btn btn-secondary margin-right\\\" data-value=\\\"{{ option.value }}\\\"> {{ option.value }} </button> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"low-relief-block standard-block centred-block horizontal-evenly-spaced-block\\\"> <div class=\\\"centred-block fit-width\\\"> <input type=checkbox class=\\\"js-quick-fire-technical half-margin-right\\\" id=technical> <label for=technical>Include technical</label> </div> <div> <div class=\\\"btn snap-action-btn js-quick-fire-reset\\\">Reset filters</div> </div> </div> <div class=\\\"centred-block absolute-bottom\\\"> <button class=\\\"btn snap-action-btn js-create-quick-fire\\\">Start quick-fire review</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"margin-left centred-block standard-block justify-space-between\\\"> <h2> <span>Question {{ total }} of {{ count }}</span> </h2> <div class=margin-right> <button class=\\\"btn snap-btn small-text js-quick-review-progress\\\">Progress</button> </div> </div> <div class=\\\"centred-block double-standard-block modal-background-relief border-light js-quick-fire-definition\\\"> <span class=padding>{{ question.definition }}</span> </div> <ul id=0 class=\\\"strips description margin-top js-quick-layouts js-quick-fire-options\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <li class=strip id=\\\"{{ answer.term }}\\\" role=group aria-label=\\\"answers to the question\\\"> <button class=snap-icon-btn data-answer-index=\\\"{{ answer.index }}\\\"> <span>{{ answer.term }}</span> </button> </li> </ul> <div id=1 class=\\\"hide vertical-block centred-block margin-top js-quick-layouts quick-fire-text-entry js-quick-fire-text-entry\\\"> <div class=\\\"centred-block standard-block\\\"> <input type=text placeholder=\\\"Enter the term that fits this description\\\"> </div> <div class=half-standard-block> <div class=\\\"hide centered-block js-quick-fire-hint\\\"> <span class=\\\"margin-left latin\\\">Hint: </span><span>The answer has two words.</span> </div> </div> </div> <div class=\\\"vertical-centred-block centred-block absolute-bottom\\\"> <div class=\\\"margin-left centred-block standard-block js-quick-fire-message\\\"></div> <div class=half-standard-block> Score {{ correct }} of {{ answered }} </div> <div class=action-update> <button disabled=disabled class=\\\"btn snap-action-btn js-continue-quick-fire-btn\\\">Continue lesson</button> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"justify-space-between centred-block margin-left standard-block js-quick-fire-summary\\\"> <div> <span>You have answered all of the questions.</span> </div> <div class=\\\"margin-right padding-left nowrap\\\"> <button class=\\\"btn snap-btn small-text js-quick-review-continue-review\\\">Vocab</button> </div> </div> <div class=\\\"border-light standard-block padding-left centred-block modal-background-relief js-score-text-summary\\\"> You have scored {{ score.correct }} out of {{ score.total }} so far. </div> <ul class=\\\"margin-top nav nav-pills nav-fill quick-review-tabs js-quick-review-tabs mb-3\\\" role=tablist> <li class=nav-item> <a class=nav-link href=# id=js-quick-review-correct data-toggle=pill role=tab> <span class=landscape>Correct answers</span> <span class=portrait>Correct</span> </a> </li> <li class=nav-item> <a class=\\\"nav-link active\\\" href=# id=js-quick-review-incorrect data-toggle=pill role=tab> <span class=landscape>Incorrect answers</span> <span class=portrait>Incorrect</span> </a> </li> </ul> <div class=\\\"scrollable accordions-container\\\"> <div id=accordion-correct data-type=js-quick-review-correct class=\\\"hide-important quick-review-answers js-quick-review-answers\\\" data-repeat-pass=\\\"{{ passes }}\\\"> <div class=\\\"card quick-fire-summary-row margin-bottom\\\"> <div class=\\\"card-header capitalise\\\" id=\\\"pass_header_{{ pass.index }}\\\"> <button type=button class=\\\"btn snap-icon-btn\\\" data-toggle=collapse data-target=\\\"#pass_target_{{ pass.index }}\\\" aria-expanded=false aria-controls=\\\"pass_target_{{ pass.index }}\\\"> <div>{{ pass.term }}</div> </button> </div> </div> <div id=\\\"pass_target_{{ pass.index }}\\\" class=collapse aria-labelledby=\\\"pass_header_{{ pass.index }}\\\" data-parent=#accordion-correct> <div class=card-body> <div>{{ pass.definition }}</div> <div class=\\\"centred-block half-standard-block\\\"> <span class=sr-only>Opens in new window</span> <a class=\\\"small-text underline-link {{ pass.showWikiClass }}\\\" href=\\\"{{ pass.wiki }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <span>View Wikipedia page for {{ pass.term }} in a new window</span> <i aria-hidden=true class=\\\"super fas fa-external-link-alt\\\"></i> </a> </div> </div> </div> </div> <div id=accordion-incorrect data-type=js-quick-review-incorrect class=\\\"quick-review-answers js-quick-review-answers\\\" data-repeat-fail=\\\"{{ fails }}\\\"> <div class=\\\"card quick-fire-summary-row margin-bottom\\\"> <div class=\\\"card-header capitalise\\\" id=\\\"fail_header_{{ fail.index }}\\\"> <button type=button class=\\\"btn snap-icon-btn\\\" data-toggle=collapse data-target=\\\"#fail_target_{{ fail.index }}\\\" aria-expanded=false aria-controls=\\\"fail_target_{{ fail.index }}\\\"> <div>{{ fail.term }}</div> </button> </div> </div> <div id=\\\"fail_target_{{ fail.index }}\\\" class=collapse aria-labelledby=\\\"fail_header_{{ fail.index }}\\\" data-parent=#accordion-incorrect> <div class=card-body> <div>{{ fail.definition }}</div> <div class=\\\"centred-block half-standard-block\\\"> <a class=\\\"small-text underline-link {{ fail.showWikiClass }}\\\" href=\\\"{{ fail.wiki }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <span>View Wikipedia page for {{ fail.term }} in a new window</span> <i aria-hidden=true class=\\\"super fas fa-external-link-alt\\\"></i> </a> </div> <div class=\\\"small-text margin-top\\\"><span>You answered: </span><span>{{ fail.answer }}</span></div> </div> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-header centred-block btn standard-block\\\"> <div class=\\\"standard-block js-toggle-element\\\"> <div> <div class=main-header> <h2>Lessons</h2> </div> </div> </div> <div class=\\\"margin-right standard-block js-toggle-control\\\"> <button data-toggle=modal data-target=#createGuide class=\\\"btn snap-btn margin-right small-text js-create-custom-lesson\\\">Create lesson</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container js-home-scrolling-container\\\"> <div class=\\\"title standard-block double-centred-block border-bottom\\\">{{ title }}</div> <div class=\\\"snapdragon-intro padding\\\"> <div class=half-standard-block> <span class=js-species-summary>{{ speciesSummary }}</span> </div> <div class=half-standard-block> <span>{{ season }}</span> </div> <div class=\\\"centred-block standard-block landscape js-intro-text\\\">{{ lessonIntro }}</div> </div> <div class=scrollable></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\"> <div class=lesson-name id=js-input-collection-name> <input type=text value=\\\"{{ collection.name }}\\\"> </div> <div class=\\\"margin-left lesson-taxa\\\"><span class=js-lesson-taxa-count>{{ collection.items.length }}</span> <span class=js-lesson-taxa>{{ collection.taxa }}</span></div> </div> <div class=selected-species-container> <div class=\\\"open scrollable js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list js-lesson-list\\\"> <ul class=\\\"scrollable js-lesson-container\\\" data-toggle=buttons> </ul> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"double-standard-block vertical-centred-block\\\"> <p class=portrait>Clear all data (and delete your score).</p> <p class=\\\"landscape centred-block standard-block\\\">Clear all data (and delete your score).</p> <button class=\\\"btn snap-action-btn js-clear-cache-btn\\\">Clear all data</button> </div> <hr> <div class=\\\"half-standard-block centred-block\\\">Time for answer to remain visible:</div> <div class=delay-slider> <div class=\\\"standard-block double-centred-block\\\"> <span>0 secs</span> <input class=js-set-delay-input type=range min=0 max=5 value=\\\"{{ delay }}\\\"><span> 5 secs</span> </div> <button class=\\\"btn snap-action-btn js-set-delay-btn\\\">Set delay</button> <div class=\\\"half-standard-block centred-block js-delay-text\\\"></div> </div> <hr class=portrait> <div class=\\\"portrait js-language-selection-container\\\"></div> <hr class=portrait> <div class=\\\"portrait email centred-block\\\"> <a target=_blank href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\"> <i class=\\\"fas fa-envelope\\\"></i> </a> <span class=margin-left>Contact Snapdragon</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=modal-content> <div class=snapdragon-container> <div class=\\\"large-text centred-block standard-block\\\">User access</div> <form id=login-form> <div class=\\\"standard-block centred-block\\\"> <input id=login-email type=text placeholder=Email> </div> <div class=\\\"standard-block centred-block\\\"> <input id=login-password type=text placeholder=Password> </div> <button id=js-login-btn class=\\\"btn snap-action-btn\\\">Log in</button> </form> <div class=\\\"standard-block centred-block hide-important js-logged-in\\\">You are now logged in.</div> <div class=\\\"standard-block vertical-centred-block hide-important js-not-logged-in\\\"> <span class=\\\"standard-block centred-block\\\">Please check your email and password.</span> <span class=\\\"standard-block centred-block js-message\\\"></span> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=modal-content> <div class=snapdragon-container> <form id=logout-form> <div class=\\\"vertical-centred-block double-standard-block\\\"> <span>You are logged in with the account:</span> <span>{{ email }}</span> </div> <div> <button id=js-logout-btn class=\\\"btn snap-action-btn\\\">Log out</button> </div> </form> <div class=\\\"standard-block centred-block hide-important js-logged-out\\\">You are now logged out.</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"large-text centred-block standard-block\\\">Language preference</div> <div class=standard-block> <div>Your selection will affect the vernacular names of species only.</div> <br> <div>It will not apply to lessons in progress.</div> <br> </div> <div class=\\\"double-standard-block js-language-selection-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=PORTRAIT_HOME class=\\\"snap-icon-btn portrait icon list js-list\\\" aria-label=home> <i aria-hidden=true focusable=false class=\\\"fas fa-chalkboard\\\"></i> <span class=visually-hidden>Lesson home</span> </button> </li> <li> <button id=SETTINGS class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=modal data-target=#basicModal aria-label=settings> <i aria-hidden=true focusable=false class=\\\"fas fa-cog\\\"></i> <span class=visually-hidden>Settings</span> </button> </li> <li> <button id=LOGIN class=\\\"snap-icon-btn icon login js-login\\\" data-toggle=modal data-target=#basicModal data-is-logged-in=false aria-label=login> <i aria-hidden=true focusable=false class=\\\"fas fa-user-slash\\\"></i> <i aria-hidden=true focusable=false class=\\\"fas fa-user-check\\\"></i> <span class=visually-hidden>Login or logout</span> </button> </li> <li> <button id=GLOSSARY class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=modal data-target=#glossaryModal aria-label=glossary> <i aria-hidden=true focusable=false class=\\\"fas fa-book-open\\\"></i> <span class=visually-hidden>Glossary</span> </button> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=GLOSSARY class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=modal data-target=#glossaryModal aria-label=glossary> <i aria-hidden=true focusable=false class=\\\"fas fa-book-open\\\"></i> <span class=visually-hidden>Glossary</span> </button> </li> <li> <button id=LANGUAGE class=\\\"snap-icon-btn icon language js-language\\\" data-toggle=modal data-target=#basicModal aria-label=\\\"language settings\\\"> <i aria-hidden=true focusable=false class=\\\"fas fa-language\\\"></i> <span class=visually-hidden>Language</span> </button> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=SETTINGS class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=modal data-target=#basicModal aria-label=settings> <i aria-hidden=true focusable=false class=\\\"fas fa-cog\\\"></i> <span class=visually-hidden>Settings</span> </button> </li> <li> <button id=LOGIN class=\\\"snap-icon-btn icon login js-login\\\" data-toggle=modal data-target=#basicModal data-is-logged-in=false aria-label=login> <i aria-hidden=true focusable=false class=\\\"fas fa-user-slash\\\"></i> <i aria-hidden=true focusable=false class=\\\"fas fa-user-check\\\"></i> <span class=visually-hidden>Login or logout</span> </button> </li> <li> <a id=EMAIL class=\\\"landscape icon email js-email\\\" target=_blank href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\"> <i aria-hidden=true focusable=false class=\\\"fas fa-envelope\\\"></i> <span class=visually-hidden>Open email link</span> </a> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\"> <input disabled=disabled class=js-txt-input type=text placeholder=Genus autocomplete=off autocorrect=off autocapitalize=off spellcheck=false> </div> <div> <div class=\\\"help-txt binomial margin-left js-help-txt\\\"></div> </div> <div class=text-entry-container> <div class=\\\"js-pool-letters pool margin-left margin-top margin-bottom\\\"></div> <div class=horizontal-buttons> <button class=\\\"btn btn-tertiary js-toggle-keyboard\\\">Enable keyboard</button> <button class=\\\"btn btn-tertiary js-delete-letter\\\">Delete last letter</button> <button class=\\\"btn snap-action-btn js-check-answer\\\">Check answer</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"js-test-card-container-images species-card-images\\\"></div> <div class=text-entry> <input class=js-txt-input type=text placeholder=Genus> </div> <div class=\\\"landscape help-txt binomial js-help-txt\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <li class=strip> <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\" data-name=\\\"{{ answer.name }}\\\" data-names=\\\"{{ answer.names }}\\\"> <span>{{ answer.term }}</span> </button> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <div class=strip> <button class=\\\"double-centred-block btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\"> <img width=25px height=25px src=\\\"{{ answer.img.url }}\\\" alt=\\\"\\\"> <span>{{ answer.term }}</span> </button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\"> <button class=\\\"btn snap-icon-btn block\\\"> <span class=\\\"given genus\\\">{{ genus }}</span> </button> <button class=\\\"btn snap-icon-btn block\\\"> <span class=species>{{ species }}</span> </button> </div> <div class=text-complete-container> <div class=\\\"margin-bottom landscape\\\">Click to select the correct name:</div> <div class=\\\"margin-bottom portrait\\\">Tap to select the correct name:</div> <div class=\\\"pool js-pool\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <button type=submit class=\\\"btn snap-icon-btn block\\\"> <span>{{ answer.value }}</span> </button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=snapdragon-container> <div class=\\\"cultivar revision card\\\"> <div class=taxon-highlight><span>{{ item.name }}</span><hr></div> <div class=title>The following cultivars are all derived from the single species {{ item.name }}:</div> <div> <div class=list-group-headers> <span>Name</span><span>Variety</span><span class=landscape>Form</span><span class=landscape>More</span> </div> <div class=scrollable> <ul class=\\\"list-group list-group-flush\\\" data-repeat-cultivar=\\\"{{ cultivars }}\\\"> <li class=list-group-item> <span>{{ cultivar.vernacular }}</span> <span>{{ cultivar.variety }}</span> <span class=landscape>{{ cultivar.form }}</span> <span class=landscape><a class=underline-link href=\\\"{{ cultivar.wiki }}\\\" title=\\\"{{ cultivar.wikiAlt }}\\\">WIKI</a> <a class=underline-link href=\\\"{{ cultivar.eol }}\\\" target=_blank title=\\\"{{ cultivar.eolAlt }}\\\">EOL</a></span> </li> </ul> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"species-card-images carousel js-test-card-container-images\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=hide-important>mixed-specimen-images-template.html</div> <div class=\\\"standard-block border-bottom double-centred-block\\\"></div> <div> <div class=\\\"tiles-container squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\"> <div> <img class=square src=\\\"{{ image.medium }}\\\" data-item-name=\\\"{{ image.itemName }}\\\" data-url=\\\"{{ image.url }}\\\"/> </div> </div> </div> <div class=lesson-companion> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=mixed-specimen-container> <div class=margin-bottom> <span>You are choosing from</span> <br> <br> <span> Species shown (in no particular order): </span> </div> <ul class=\\\"images-names-txt js-images-names-txt\\\"></ul> <div class=vertical-evenly-spaced-block> <button class=\\\"btn snap-action-btn btn-auxiliary js-help-txt\\\">Click to refresh selection</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=mixed-specimen-container> <div class=margin-bottom><span>{{ help }}</span></div> <ul class=\\\"traits-names-txt js-traits-names-txt\\\" data-repeat-trait=\\\"{{ traits }}\\\"> <li> <img src=\\\"{{ trait.img.url }}\\\" alt=\\\"{{ trait.term }}\\\"> <span>{{ trait.term }}</span> </li> </ul> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <div class=strip> <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\"> <span>{{ answer.term }}</span> </button> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div class=\\\"modal fade\\\" id=imageModal role=dialog aria-labelledby=imageModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-image-title\\\"> <span></span><span></span> </div> <button type=button class=close data-dismiss=modal aria-label=Close> <span aria-hidden=true>&times;</span> </button> </div> </header> <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div> <div class=\\\"modal-body centred-block\\\"> <div class=\\\"modal-image js-modal-image\\\" style=flex:auto></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade\\\" id=imageComparisonModal tabindex=-1 role=dialog aria-labelledby=imageModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-image-title\\\"> <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div> <span></span><span></span><span class=hide-empty></span><span class=hide-empty></span> </div> </div></header> </div> <div class=modal-body> <div class=\\\"modal-image js-modal-image\\\"></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div>  <div class=\\\"modal fade\\\" id=wikiModal tabindex=-1 role=dialog aria-labelledby=exampleModalLongTitle aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-external-page-title\\\"></div> </div> </header> <div class=\\\"modal-body js-external-page-body\\\"> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=basicModal tabindex=-1 role=dialog aria-labelledby=basicModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <div class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div> <div></div> </div> </div> </div> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=glossaryModal tabindex=-1 role=dialog aria-labelledby=glossaryModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><h1>Glossary</h1></div> <button class=\\\"btn fit-width snap-btn double-margin-right small-text js-quick-fire-filters\\\">Glossary</button> <button class=\\\"btn hide-important fit-width snap-btn double-margin-right small-text js-quick-fire-questions\\\">Quick-fire questions</button> </div> </div> </header> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div> <div class=\\\"modal fade\\\" id=cardModal tabindex=-1 role=dialog aria-labelledby=speciesCardLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-text-title\\\"></div> </div> </header> <div class=\\\"carousel slide\\\"> <div class=carousel-inner> <div class=\\\"prev landscape js-prev\\\" role=button> <span class=carousel-control-prev-icon data-direction=prev aria-hidden=true></span> <span class=sr-only>Previous</span> </div> <div class=\\\"modal-body js-modal-body\\\"> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <div class=\\\"next landscape js-next\\\" role=button> <span class=carousel-control-next-icon data-direction=next aria-hidden=true></span> <span class=sr-only>Next</span> </div> </div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div>  <div class=\\\"modal fade\\\" id=badgeListModal tabindex=-1 role=dialog aria-labelledby=badgeListModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-text-title\\\"></div> </div> </header> <div class=\\\"modal-body js-modal-body\\\"> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade modal-guide-wrapper\\\" id=createGuide tabindex=-1 role=dialog aria-labelledby=createGuideModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-title\\\"> <header class=header></header> </div> </div> </header> <div class=\\\"modal-body modal-guide-body\\\"> <div class=\\\"modal-guide-progress standard-block js-modal-guide-progress\\\"> <div class=\\\"modal-subheader js-options\\\"> <h1>Select species</h1> </div> <div class=\\\"hide-important steps js-steps\\\"> <div class=completed>Step 1</div> <div>Step 2</div> <div>Step 3</div> </div> </div> <div class=\\\"step-action-content js-step-action-content\\\">Step action</div> <nav aria-label=\\\"navigation for creating new lesson\\\" class=\\\"modal-guide-navigation js-modal-guide-navigation\\\"> <button class=\\\"snap-icon-btn js-left\\\"> <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-left\\\"></i></span> <span class=title></span> </button> <div class=\\\"centred-block js-centre\\\"><span class=title>Provenance</span></div> <button class=\\\"snap-icon-btn right-justify js-right\\\"> <span class=title></span> <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span> </button> </nav> </div> <div class=\\\"modal-footer double-centred-block js-create-guide-close-btn\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=lessonModal data-backdrop=static data-keyboard=false tabindex=-1 role=dialog aria-labelledby=lessonModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block margin-right\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div> <button class=\\\"btn small-text fit-width snap-btn margin-right js-review-progress\\\">Progress</button> </div> </div> </header> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"> <div class=\\\"lesson-spinner double-centred-block\\\"> <div class=icon><i class=\\\"fas fa-sun slow-spin\\\"></i></div> </div> </div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":root {\\n\\n    --snap-lesson-row-blue: rgb(218, 230, 237);\\n    --snap-lesson-row-green: rgb(216, 223, 210);\\n\\n    --snap-dd-non-taxa-bg-intial: rgb(197, 193, 175);\\n    --snap-dd-non-taxa-bg-hover: rgb(229, 227, 220);\\n    --snap-dd-non-taxa-bg-active: rgb(229, 227, 220);\\n\\n    --snap-text-black: rgb(30,30,30);\\n    --snap-text-dark: rgb(60, 60, 60);\\n    --snap-text-dark-medium-dark: rgb(50, 50, 50);\\n    --snap-text-medium-dark: rgb(65, 65, 65);\\n    --snap-text-medium-dark-hover: rgb(108, 114, 120);\\n    --snap-text-medium-light:rgb(73, 80, 87);\\n    --snap-text-light:rgb(245, 245, 245);\\n    --snap-text-green: rgb(16, 66, 28);\\n    \\n    --snap-portrait: rgb(179, 197, 174);\\n    --snap-landscape: rgb(185, 200, 204);\\n    \\n    --snap-collection: rgb(87, 97, 99);\\n    --snap-collection-active: rgb(95, 125, 89);    \\n    --snap-collection-light: rgb(117, 126, 126);\\n    --snap-collection-faint: rgb(240, 242, 235);\\n    --snap-non-taxa: rgb(165, 159, 131);\\n\\n    --snap-active: rgb(246, 157, 53);\\n    --snap-alert: rgb(197, 59, 67);\\n    --snap-alert-medium: rgb(225, 155, 155);\\n    --snap-alert-light: rgb(241, 229, 225);\\n    --snap-inactive: rgba(7, 2, 2, 0.4);\\n    --snap-success: rgb(84, 137, 84);\\n    --snap-success-medium: rgb(169, 196, 163);\\n    --snap-success-light: rgb(216, 225, 208);\\n    \\n    --snap-link-hover: rgb(54, 69, 82);\\n    --snap-link: rgb(20, 125, 156);\\n\\n    --snap-progress-bg: rgb(168, 168, 168);\\n    --snap-progress-bar: rgb(255, 255, 255);\\n  \\n    --snap-block-light: rgb(245, 245, 245);\\n\\n    --snap-main-background: rgb(244, 244, 244);\\n    --snap-content-background: rgb(255, 255, 243);\\n    --snap-content-background-relief: rgb(251, 251, 247);\\n    --snap-header-background: rgb(213, 213, 210);\\n    --snap-list-header-background: rgb(252, 251, 246);\\n    --snap-row-background: rgb(240, 239, 233);\\n    \\n    --snap-taxon-card-background: rgba(52, 105, 23,.1);\\n    --snap-species-highlight-background: rgb(249, 248, 238);\\n    --snap-species-header-background: rgb(226, 222, 180);\\n    --snap-species-header-dark-background: rgb(146, 139, 56);\\n    \\n    --snap-btn-auxillary: rgb(96, 117, 90);\\n    --snap-btn-hover: rgb(240, 240, 240);\\n    \\n    --snap-btn-dropdown: rgb(252, 193, 186);\\n    --snap-btn-dropdown-options: rgb(254, 240, 229);\\n\\n    --snap-btn-blue: rgb(54, 69, 82);\\n    --snap-snap-action-btn: rgb(245, 245, 245);\\n\\n    --snap-tertiary-background: rgb(95, 125, 89);\\n\\n    --snap-btn-filter-on: rgb(214, 208, 213);\\n    --snap-btn-filter-off: rgb(235, 231, 228);\\n\\n    --snap-border-light: rgb(175,175,175);\\n    --snap-border-medium: rgb(211, 211, 211);\\n    --snap-border-lightest: rgb(225,225,225);\\n\\n    --snap-iconic-icon-header: rgb(193, 186, 112);\\n\\n    --snap-inat: rgb(127, 151, 122);\\n\\n    --snap-youtube-green: rgb(52, 105, 23);\\n\\n    --snap-button-light: #576163; \\n    --snap-button-main: #3c4345; \\n    --snap-button-dark: #788082; \\n  }\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"* {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nhtml {\\n  height: var(--vhGrid, 100vh);\\n}\\n\\nbody {\\n  height: var(--vhGrid, 100vh);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-family: 'Open Sans', sans-serif;\\n  color: var(--snap-text-dark);\\n  margin: auto;\\n  background-color: var(--snap-main-background);\\n}\\n\\nbutton {\\n  width: 100%;\\n  letter-spacing: .03rem;\\n}\\n\\nbutton[disabled] {\\n  opacity: .38; /* why  38%? google material design */\\n  pointer-events: none;\\n}\\n\\ninput[type=\\\"text\\\"] {\\n  padding: .5rem;\\n  width: 100%;\\n  border-color: var(--snap-border-lightest);\\n  border-style: solid;\\n}\\n\\nfigure {\\n  margin: .5rem 0 0;\\n}\\n\\na:hover {\\n  text-decoration: none;\\n}\\n\\nul {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nli {\\n  list-style-type: none;\\n  margin: 0 0 .5rem 0;\\n}\\n\\nprogress {\\n  margin: 0 !important;\\n  width: 100%;\\n  border: 0;\\n  background: var(--snap-progress-bg);\\n  max-height: 5px;\\n}\\n\\nprogress::-webkit-progress-bar {\\n  background-color: var(--snap-progress-bg);\\n}\\nprogress::-webkit-progress-value {\\n  background-color: var(--snap-text-black);\\n}\\nprogress::-moz-progress-bar {\\n  background-color: var(--snap-progress-bar);\\n}\\n\\n.progress-icon {\\n  color: var(--snap-progress-bar) !important;\\n  cursor: pointer;\\n}\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg);\\n}\\n\\n.inline-progress-container progress {\\n  width: 95px;\\n  height: 3px;\\n  left: 0;\\n  top: 2.5rem;\\n}\\n\\nhr {\\n  margin: 0;\\n}\\n\\n.font-size-small {\\n  font-size: .7rem;\\n}\\n\\n.desaturate {\\n  opacity: .6;\\n  filter: grayscale(80%);\\n}\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg);\\n}\\n\\n\\n\\n.btn-collection {\\n  background-color: var(--snap-portrait);\\n  color: var(--snap-text-dark);\\n}\\n\\n.btn-language {\\n  background-color: var(--snap-landscape);\\n  color: var(--snap-text-medium-dark);\\n}\\n\\n.btn.btn-non-taxa {\\n  width: 15rem;\\n  background-color: var(--snap-non-taxa);\\n  float: left;\\n}\\n\\n.non-taxa-definition {\\n  padding: 0 0.5rem;\\n}\\n\\n.icon::after\\n{\\n  display: inline-block;\\n  font-style: normal;\\n  font-variant: normal;\\n  text-rendering: auto;\\n  -webkit-font-smoothing: antialiased;\\n  font-family: \\\"Font Awesome 5 Free\\\";\\n}\\n\\n.icon.active::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f00c\\\";\\n  padding: 0 0.5rem 0 0;\\n  margin: 0 0 0 -1.5rem;\\n  color: rgb(99, 127, 91);\\n}\\n\\n.icon.choice::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: rgb(99, 127, 91);\\n}\\n\\n.icon.edible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive);\\n}\\n\\n.icon.inedible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f056\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive);\\n}\\n\\n.icon.toxic::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f071\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-alert);\\n}\\n\\n.dropdown-menu {\\n  margin: 0.15rem 0 0 0;\\n  padding: 0;\\n  color: var(--snap-text-dark);\\n  border: .05rem solid var(--snap-border-light);\\n}\\n\\n.non-taxa .dropdown-menu {\\n  width: 15rem !important;\\n  background-color: var(--snap-dd-non-taxa-bg-intial);\\n}\\n\\n.non-taxa a.dropdown-item.active {\\n  background-color: var(--snap-dd-non-taxa-bg-active);\\n}\\n\\na.dropdown-item {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.5rem 0 0.5rem 1rem;\\n  cursor: pointer;\\n}\\n\\n.non-taxa a.dropdown-item:hover {\\n  background-color: var(--snap-dd-non-taxa-bg-hover);\\n}\\n\\n.lesson-title {\\n  line-height: 1.6;\\n}\\n\\n.toUpperCase {\\n  text-transform: uppercase;\\n}\\n\\n.home, .settings, .nav-info, .list, .glossary, .email, .login, .email > a, .language {\\n  cursor: pointer;\\n  color: var(--snap-text-dark);\\n  font-size: 1.4rem;\\n}\\n\\na.icon:hover {\\n  color: var(--snap-text-light);\\n}\\n\\n.email span {\\n  font-size: .8rem;\\n}\\n\\n.glossary svg {\\n  vertical-align: middle;\\n}\\n\\n.grid-header {\\n  background-color: rgb(153, 172, 149);\\n  background-color: var(--snap-portrait);\\n  display: flex;\\n  align-items: center;\\n  color: var(--snap-text-dark);\\n  width: 100%;\\n  border-radius: 0.25rem 0.25rem 0 0;\\n  letter-spacing: 0.07rem;\\n  text-transform: uppercase;\\n}\\n\\n.grid-header > div {\\n  padding: 0 0.5rem;\\n}\\n\\n.hover-box {\\n  border: .05rem solid rgba(48, 94, 37,.8);\\n  padding: .25rem;\\n  margin: 0 0 0 -.25rem;\\n  border-radius: 0.25rem;\\n}\\n\\n.nav-icons .active-icon, .active-icon {\\n  color: white;\\n}\\n\\n.nav-icons .inactive-icon {\\n  color: var(--snap-inactive);\\n  cursor: not-allowed;\\n}\\n\\n.info-box .inactive-icon {\\n  display: none;\\n}\\n\\n.disabled-icon {\\n  cursor: initial;\\n  opacity: .38; /* why  38%? google material design */\\n  pointer-events: none;\\n}\\n\\n.scrollable.card {\\n  text-align: left;\\n}\\n\\n.score-summary-container {\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));\\n}\\n\\n.snapdragon-container {\\n  justify-content: flex-start;\\n  position: relative;\\n}\\n\\n.test-card-question.standard-block, .lesson-list-header.centred-block {\\n  border-bottom: .03rem solid var(--snap-border-medium);\\n}\\n\\n.home-container {\\n  position: relative;\\n  display: grid;\\n  grid-template-rows: var(--vhStandardBlock) auto;\\n}\\n\\n.feature-types {\\n  background-color: var(--snap-content-background);\\n}\\n\\n.species.card {\\n  margin: 0;\\n}\\n\\n.non-taxa {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-top: 1rem;\\n}\\n\\n.non-taxa .btn-group {\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  flex-direction: column;\\n  margin: 0 .5rem;\\n  justify-content: space-evenly;\\n  background-color: var(--snap-landscape);\\n}\\n\\n.non-taxa .btn.btn-secondary {\\n  height: initial;\\n}\\n\\n.non-taxa .species-header {\\n  padding: 0 1.25rem 0 0;\\n}\\n\\n.non-taxon.card img {\\n  height: 4rem;\\n  width: 4rem;\\n}\\n\\n.non-taxon .btn.btn-secondary {\\n  width: 100%;\\n  background-color: var(--snap-landscape);\\n  border-radius: unset;\\n}\\n\\n.non-taxa-definition {\\n  display: flex;\\n  align-items: center;\\n  padding: 0 2rem;\\n}\\n\\n.non-taxon .definitions {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n  height: 100%;\\n  text-align: left;\\n}\\n\\n.species.card-small {\\n  padding: 0.5rem;\\n}\\n\\n.card.radio-buttons-container {\\n  margin: 0 0 0.5rem 0;\\n}\\n\\n.binomial {\\n  font-style: italic;\\n  text-transform: initial;\\n}\\n\\n.lesson-plans .table-row.species-background:nth-child(n) {\\n  background-color: var(--snap-species-highlight-background);\\n}\\n\\n.lesson-plans .table-row.taxon-background:nth-child(n) {\\n  background-color: var(--snap-taxon-card-background);\\n}\\n\\n.snapdragon-options {\\n  padding: 0 .5rem;\\n}\\n\\n.grid {\\n  display: grid;\\n  grid-auto-flow: column;\\n  width: 100%;\\n  height: var(--vhGrid, 100vh);\\n  font-size: .8rem;\\n}\\n\\n.left-grid, .right-grid {\\n  display: grid;\\n  grid-template-columns: 100%;\\n  grid-auto-flow: column;\\n  grid-template-rows: var(--vhRunningBlock, 7.5vh) 5px auto var(--vhRunningBlock, 7.5vh);\\n}\\n\\n.left-body, .right-body {\\n  display: grid;\\n  grid-auto-flow: row;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));  \\n  background-color: var(--snap-content-background);\\n}\\n\\n.header, .footer {\\n  display: flex;\\n  align-items: center;\\n  padding: 0 0.5rem;\\n  letter-spacing: 0.1rem;\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-dark);\\n}\\n\\n.header > div:nth-child(2) {\\n  max-width: 50%;\\n  font-size: .9rem;  \\n}\\n\\n.footer {\\n  bottom: 0;\\n}\\n\\n.left-grid .footer .nav-icons, .right-grid .footer .nav-icons {\\n  flex: auto;\\n  justify-content: space-evenly;\\n}\\n\\n.left-grid .footer .nav-icons li, .right-grid .footer .nav-icons li {\\n  margin: 0 !important;\\n}\\n\\n.footer-round, .footer-score span {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.75rem;\\n}\\n\\n.left-grid .header, .left-grid .footer {\\n  justify-content: flex-end;\\n  background-color: var(--snap-portrait);\\n}\\n\\n.right-grid .header, .right-grid .footer {\\n  justify-content: center;\\n  background-color: var(--snap-landscape);\\n}\\n\\n.header-text {\\n  color: var(--snap-text-dark-medium-dark);\\n}\\n\\n.scrollable {\\n  overflow-y: auto;\\n  -webkit-overflow-scrolling: touch;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;  \\n}\\n\\n.answer {\\n  padding: 1rem;\\n  text-transform: capitalize;\\n  cursor: pointer;\\n}\\n\\n.answer button {\\n  width: 10rem;\\n}\\n\\n.squares {\\n  display: grid;\\n  grid-auto-flow: row;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr 1fr 1fr;\\n}\\n\\n.tiles {\\n  display: grid;\\n  height: 50%;\\n  grid-auto-flow: column;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr 1fr;\\n}\\n\\n.squares > div {\\n  display: grid;\\n  justify-self: center;\\n  height: 140px;\\n  width: 224px;\\n}\\n\\n.squares img, .tiles img {\\n  cursor: pointer;\\n  height: inherit;\\n  width: inherit;\\n  object-fit: cover;\\n}\\n\\n.traits.squares img {\\n  object-fit: scale-down;\\n}\\n\\n.traits.squares > div.multiple {\\n  grid-template-columns: 1fr 1fr;\\n  cursor: pointer;\\n  width: 80%;\\n}\\n\\n.square, .tile {\\n  border-radius: 0.2rem;\\n  cursor: pointer;\\n}\\n\\n.strips {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  cursor: pointer;\\n  height: calc( (var(--vh, 1vh) * 100) \\n    - var(--vhFixtures, 15vh) \\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhButtonBlock, 9vh)\\n    );\\n}\\n\\n.strip {\\n  background: #fff;\\n  border: 1px solid transparent;\\n  border-radius: 2px;\\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\\n  margin: .5rem .25rem;\\n  padding: .75rem;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.strip > div::first-letter {\\n  text-transform: capitalize;\\n}\\n\\n  .strip > * {\\n    pointer-events: none;\\n  }\\n\\n  .pointer-events-none {\\n    pointer-events: none !important;\\n  }\\n  \\n  .pointer-events-initial {\\n    pointer-events: initial !important;\\n  }\\n\\n.strips .strip.snap-success {\\n  background-color: var(--snap-success-medium);\\n  box-shadow: 0 2px 8px rgba(0,0,0,.8);\\n}\\n\\n.strips .strip.snap-alert {\\n  background-color: var(--snap-alert-medium);\\n  box-shadow: 0 2px 8px rgba(0,0,0,.8);\\n  border: none;\\n}\\n\\n.strip.snap-success > div.disabled {\\n  color: var(--gray-dark) !important;\\n}\\n\\n.strip div {\\n  text-align: center;\\n}\\n\\n.names-container .vernacular-name {\\n  max-width: 12rem;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  display: inline-block;\\n}\\n\\n.names-container.definition .vernacular-name {\\n  margin-top: 1.25rem;\\n}\\n\\n.align-left {\\n  text-align: left;\\n}\\n\\n.snapdragon.card {\\n  border: 0;\\n}\\n\\n.snapdragon.card.align-left {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.5rem;\\n}\\n\\n.snapdragon.card.align-left .feature-label {\\n  letter-spacing: 0.03rem;\\n  width: fit-content;\\n  display: inline-table;\\n}\\n\\n.taxon-highlight {\\n  background-color: var(--snap-taxon-card-background);\\n  padding: 0.5rem;\\n  margin: -0.5rem -0.5rem 0 -0.5rem;\\n  display: flex;\\n  justify-content: right;\\n}\\n\\n.taxon-highlight > div:nth-child(1) {\\n  flex: 1;\\n  align-self: center;\\n}\\n\\n.taxon-highlight > div:nth-child(2) {\\n  align-self: center;\\n}\\n\\n.taxon-highlight img {\\n  height: 5.5rem;\\n  width: 5.5rem;\\n  margin: 0 0 0 1rem;\\n  object-fit: cover;\\n}\\n\\n.latin-name {\\n  font-style: italic;\\n  font-family: serif;\\n  text-transform: initial;\\n}\\n\\n.common-name {\\n  font-style: normal;\\n  text-transform: capitalize;\\n}\\n\\n.taxon-header {\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  text-align: left;\\n}\\n\\n.species-header img {\\n  filter: grayscale(80%);\\n  object-fit: scale-down;\\n  max-height: var(--vhStandardBlock, 10vh);\\n}\\n\\n.species-header > div:nth-child(1) {\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0.25rem 1rem 0 0;\\n}\\n\\n.card-link-container {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.card-link-container svg {\\n  font-size: 2rem;\\n  cursor: pointer;\\n  color: var(--snap-iconic-icon-header);\\n}\\n\\n.card-link-container svg:hover {\\n  color: var(--snap-text-medium-light);\\n}\\n\\n.block-container {\\n  position: relative;\\n  justify-content: flex-start;\\n}\\n\\n.species-common-name {  \\n  text-transform: capitalize;\\n}\\n\\n.data-box-container {\\n  height: var(--vhCalendar, 11vh);\\n  display: grid;\\n  grid-template-columns: 2fr 2fr 3fr;\\n  grid-gap: .5rem;\\n  border-bottom: .03rem solid var(--snap-dd-non-taxa-bg-hover);\\n  font-size: .8rem;\\n}\\n\\n.mixed-content-container {\\n  top: calc(\\n      var(--vhStandardBlock, 10vh)\\n    + var(--vhSmallImageCarousel,23vh));\\n  height: calc(\\n        var(--vh, 1vh) * 100\\n      - var(--vhFixtures,15vh)\\n      - var(--vhSmallImageCarousel,23vh)\\n      - var(--vhDoubleStandardBlock,20vh)      \\n      - .5rem);\\n}\\n\\n.taxon.card-card .mixed-content-container {\\n  height: calc(\\n        var(--vh, 1vh) * 100\\n      - var(--vhFixtures,15vh)\\n      - var(--vhDoubleStandardBlock,20vh) \\n      - var(--vhCalendar)\\n      - 5px);\\n      padding: .5rem;\\n}\\n\\n.taxon.card-card .mixed-content-container .centred-block {\\n  flex-direction: column;\\n  height: 100%;\\n  align-items: flex-start;\\n  justify-content: space-evenly;\\n}\\n\\n.taxon.card-card .data-box-container {\\n  grid-template-columns: 1fr 2fr;\\n  padding: 0 .5rem;\\n}\\n\\n.inat-box .data-box {\\n  color: var(--snap-text-medium-light);\\n  height: 100%;\\n  border-left: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  border-right: 1px solid var(--snap-border-lightest);\\n  font-size: .8rem\\n}\\n\\n.inat-box .data-box > div:nth-child(1), .inat-box .data-box > div:nth-child(2) {\\n  display: grid;\\n  grid-template-columns: 2fr 1fr;\\n  grid-gap: .25rem;\\n}\\n\\n.inat-box .data-box > div:nth-child(2) > div:nth-child(1) {\\n  padding: 0 0.5rem 0 0;\\n}\\n\\n.inat-box .data-box > div > div:nth-child(2) > div {\\n  text-align: center;\\n}\\n\\n.taxon-data > span:nth-child(1) {\\n  min-width: 50%;\\n}\\n\\n.data-box .taxon-data:nth-child(1) > span {\\n  text-transform: uppercase;\\n} \\n\\n.taxon-data {\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.latin {\\n  font-style: italic;\\n  font-family: serif;\\n}\\n\\n.taxon-members {\\n  font-style: italic;\\n}\\n\\n.family-img {\\n  filter: grayscale(80%);\\n}\\n\\n.family-name {\\n  text-transform: uppercase;\\n}\\n\\n.history div {\\n  margin: 0 0 1rem 0;\\n}\\n\\n.clickable {\\n  cursor: pointer;\\n}\\n\\n.btn {\\n  font-size: inherit;\\n  padding: .5rem;\\n  border: none;\\n}\\n\\n.btn:hover {\\n  opacity: .8;  \\n}\\n\\n.btn.focus, .btn:focus {\\n  box-shadow: none;\\n}\\n\\n.btn:disabled {\\n  pointer-events: none;\\n}\\n\\n.btn-placeholder.btn {\\n  color: var(--snap-text-dark);\\n}\\n\\n.btn-tertiary {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-tertiary-background) !important;\\n  border: 1px solid var(--snap-border-light);\\n  cursor: pointer !important;\\n}\\n\\n.btn-tertiary:focus {\\n  outline: 1px solid var(--snap-border-medium);\\n  color: var(--snap-text-black);\\n}\\n\\n.dropdown-toggle::after {\\n  vertical-align: 0.2rem;\\n  margin-left: 0.2rem;\\n}\\n\\n.course-description {\\n  margin: 1rem 0;\\n}\\n\\n.course-description span {\\n  margin: 0 0 0.5rem 0;\\n}\\n\\n.course-description span:nth-child(1) {\\n  background-color: lightblue;\\n  padding: 0.25rem;\\n}\\n\\n.course-description .snap-alert {\\n  width: 50%;\\n}\\n\\n.species-count {\\n  vertical-align: super;\\n}\\n\\n.clear-lesson button {\\n  float: left;\\n}\\n\\n.collection span {\\n  padding: 0 0.5rem;\\n  cursor: pointer;\\n}\\n\\n.dropdown div {\\n  white-space: nowrap;\\n}\\n\\n.single-tile {\\n  display: flex;\\n  flex-direction: column;\\n  margin: 2rem 1rem;\\n}\\n\\n.image-border {\\n  text-align: center;\\n  margin: 0 0 2rem 0;\\n  border: .05rem solid;\\n  border-radius: .2rem;\\n  padding: 1rem;\\n}\\n\\n.blocks {\\n  flex: auto;\\n  flex-direction: column;\\n  padding: 2rem;\\n}\\n\\n.block {\\n  font-size: 1rem;\\n  display: inline-block;\\n  cursor: pointer;\\n  width: fit-content;\\n  background-color: var(--snap-block-light);\\n  color: var(--snap-text-dark);\\n  margin: 0 .5rem 0 0;\\n  padding: .25rem .5rem;\\n  letter-spacing: .1rem;\\n  border-radius: .2rem;\\n  border: .05rem solid var(--snap-text-dark);  \\n}\\n\\n.block.snap-icon-btn {\\n  border: .05rem solid var(--snap-text-dark);\\n  padding: .25rem .5rem;\\n}\\n\\n.pool .block {\\n  margin: 0 .5rem .5rem 0;\\n}\\n\\n.block + hr {\\n  margin: .5rem 0 0 0;\\n}\\n\\n.pool {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.pool .block.active {\\n  color: var(--snap-text-light);\\n  background-color: rgb(128, 128, 128);\\n}\\n\\n.pool .block.correct {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-success);\\n}\\n\\nspan.correct {\\n  color: rgb(2, 107, 26);\\n}\\n\\n.block.snap-success, .block.snap-alert {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-success) !important;\\n  border: none;\\n}\\n\\n.block.snap-alert {\\n  background-color: var(--snap-alert) !important;\\n}\\n\\n.snap-alert-fg {\\n  color: var(--snap-alert);\\n}\\n\\n.btn.snap-alert {\\n  padding: 0.175rem 0.75rem;\\n}\\n\\n.block.white {\\n  color: var(--snap-text-dark);\\n}\\n\\n.blocks button {\\n  margin: 2rem 0 0 0;\\n}\\n\\n.delay-slider {\\n  margin: 1rem 0;\\n}\\n\\n.delay-slider > div input {\\n  flex: auto;\\n  margin: 0 .5rem;\\n}\\n\\n.response-update {\\n  flex: initial;\\n  display: flex;\\n  flex-direction: row;\\n  position: absolute;\\n  bottom: 0.5rem;\\n  right: .5rem;\\n  left: .5rem;\\n}\\n\\n.action-update {\\n  width: 100%;\\n}\\n\\n.action-update button {\\n  width: 100%;\\n}\\n\\n.answer-container .icon-container {\\n  position: relative;\\n  display: inline-block;\\n}\\n\\n.answer-container .icon {\\n  font-size: 1.5rem;\\n  position: absolute;\\n  top: -0.9rem;\\n}\\n\\n.taxa svg {\\n  margin: 0 .25rem 0 0;\\n}\\n\\n.taxa .si-glyph-mushrooms svg {\\n  margin: 0;\\n}\\n\\n.species-answer {\\n  display: none;\\n}\\n\\n.species-question,\\n.species-answer,\\n.btn-placeholder {\\n  text-align: center;\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.species-question.btn,\\n.btn-placeholder.btn {\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-block-light);\\n}\\n\\nbutton:disabled {\\n  cursor: initial !important;\\n}\\n\\n.species-answer {\\n  text-align: center;\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-block-light);\\n  border-left: 1px solid var(--snap-border-light);\\n  border-right: 1px solid var(--snap-border-light);\\n  border-bottom: 1px solid var(--snap-border-light);\\n}\\n\\n.answer-box-success .icon {\\n  color: var(--snap-success);\\n}\\n\\n.answer-box-alert .icon {\\n  color: var(--snap-alert);\\n}\\n\\n.species-card-images,\\n.non-taxon-card-images {\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  cursor: pointer;\\n}\\n\\n.non-taxon-card-images {\\n  margin: 0;\\n}\\n\\n.trait.card li span:nth-child(1) {\\n  width: 25%;\\n  text-align: left;\\n}\\n\\n.trait.card li span:nth-child(2) {\\n  width: 75%;\\n  text-align: left;\\n}\\n\\n.toggle-content,\\n.toggle-content * {\\n  display: none;\\n}\\n\\n.toggle-content.is-visible,\\n.toggle-content.is-visible * {\\n  display: initial;\\n}\\n\\n.btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-text-light);\\n  color: var(--snap-text-dark);\\n}\\n\\n.non-taxon .btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-species-header-background);\\n}\\n\\n.rb.btn-group {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.rb.btn-group .btn.btn-secondary.active {\\n  color: var(--snap-success);\\n  background-color: inherit;\\n  border: none;\\n}\\n\\n.btn-secondary:not(:disabled):not(.disabled):active {\\n  color: var(--snap-text-medium-dark);\\n  background-color: initial;\\n  border: none;\\n}\\n\\n.rb.btn-group .btn:hover {\\n  color: rgb(100, 100, 100);\\n}\\n\\n.btn.btn-secondary.disabled.active {\\n  opacity: 1;\\n}\\n\\n.rb.btn-group label {\\n  margin: 0 0 .5rem 0;\\n}\\n\\n.rb.btn-group input[type=radio] {\\n  box-sizing: border-box;\\n  padding: 0;\\n  position: absolute;\\n  clip: rect(0,0,0,0);\\n  pointer-events: none;\\n}\\n\\n.btn.btn-secondary {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--white);\\n  border: 0;\\n  width: fit-content;\\n  border: none;\\n}\\n\\n.btn.btn-secondary:hover {\\n  transition: none;\\n}\\n\\n.btn.btn-secondary.disabled .collectionName, .btn.btn-secondary.active .guideName {\\n  border: none;  \\n}\\n\\n.left-grid,\\n.species-card-wiki-entry,\\n.collection-preview,\\n.collection button,\\n.collections-skills {\\n  display: none;\\n}\\n\\n.species-table td .portrait input {\\n  height: 1.15rem;\\n  width: 1.15rem;\\n}\\n\\n.badge {\\n  vertical-align: text-top;\\n  cursor: pointer;\\n}\\n\\n.badge-light {\\n  color: inherit;\\n  background-color: transparent;\\n  margin: -0.25rem 0 0 0.25rem;\\n  padding: 0.4rem 0.4rem 0.3rem 0.4rem;\\n}\\n\\n.badge-list {\\n  height: 100%;\\n  padding: 1rem;\\n  background-color: var(--snap-snap-action-btn);\\n}\\n\\n.question-images {\\n  display: grid;\\n  height: 8rem;\\n  grid-template-columns: 1fr 1fr 1fr 1fr;\\n  grid-gap: 0.5rem;\\n}\\n\\n.layer-container {\\n  cursor: pointer;\\n  background-size: cover;\\n  background-position: center;\\n}\\n\\n.layer {\\n  height: 100%;\\n  width: 100%;\\n  color: rgb(101, 132, 37, 0);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.layer > div {\\n  text-align: center;\\n}\\n\\n.feature-label {\\n  color: var(--snap-text-green);\\n}\\n\\n.lesson-option-headers {\\n    height: 2.5rem;\\n    display: flex;\\n    align-items: center;\\n    color: var(--snap-text-dark);\\n    letter-spacing: 0.03rem;\\n    padding: 0;\\n    width: fit-content;\\n}\\n\\n.faded {\\n  color: var(--snap-border-lightest);\\n}\\n\\n.compare-species-link {\\n  cursor: pointer;\\n}\\n\\n.imageSlider .carousel-inner {\\n  display: flex;\\n  flex-direction: column;\\n  background-color: rgba(211, 214, 173, 0.4);\\n}\\n\\n.imageSlider .carousel-inner > div {\\n  width: inherit;\\n}\\n\\n.imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n  top: 40%;\\n  height: 20%;\\n  width: 10%;\\n  background-color: rgba(211, 214, 173, 0.2);\\n  opacity: 0.5;\\n}\\n\\n.carousel-control-next button, .carousel-control-prev button {\\n  background-color: transparent !important;\\n  border: none !important;\\n}\\n\\n.carousel-control-next[disabled=\\\"disabled\\\"],\\n.carousel-control-prev[disabled=\\\"disabled\\\"] {\\n  pointer-events: none;\\n}\\n\\n.imageSlider .carousel.slide {\\n  background-color: var(--snap-text-dark-medium-dark);\\n}\\n\\n.imageSlider .carousel-inner > div:nth-child(1), .imageSlider .carousel-item {\\n  height: var(--vhExtraSmallImageCarousel);\\n  min-height: var(--vhExtraSmallImageCarousel);\\n}\\n\\n.species-card-images .carousel-item-next, .species-card-images .carousel-item-prev, .species-card-images .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.imageSlider .carousel-item-next, .imageSlider .carousel-item-prev, .imageSlider .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  pointer-events: all;\\n}\\n\\n.info-box .carousel-item-next, .info-box .carousel-item-prev, .info-box .carousel-item.active {\\n  display: grid;\\n}\\n\\n.carousel-item.active button {\\n  width: initial;\\n}\\n\\n.imageSlider .carousel-item > div {\\n  height: 90%;\\n  background-size: inherit;\\n  background-repeat: no-repeat;\\n  background-position: center;  \\n}\\n\\n#imageSlider_card-card .carousel-item > div, #imageSlider_card-card .carousel-item > div {\\n  pointer-events: none;\\n}\\n\\n.imageSlider .carousel-item > div.contain-image {\\n  background-size: contain;\\n}\\n\\n.imageSlider .carousel-control-next-icon,\\n.imageSlider .carousel-control-prev-icon {\\n  width: 1.5rem;\\n  height: 1.5rem;\\n  background-color: transparent;\\n  border: none;\\n}\\n\\n#imageSlider1 {\\n  flex: 1;\\n}\\n\\n#imageSlider2 {\\n  flex: 1;\\n}\\n\\n#imageSlider3 {\\n  flex: 1;\\n}\\n\\n.info-box .carousel.slide {\\n  float: right;\\n  width: 100%;\\n  background-color: var(--snap-species-header-background);\\n}\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  padding: .25rem 0;\\n  text-align: center;\\n  margin: 0 15%;\\n  height: var(--vhHalfStandardBlock, 5vh);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.3);\\n}\\n\\n.info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.1);\\n  text-transform: lowercase;\\n}\\n\\n.info.carousel-control .carousel-control-next-icon {\\n  color: black;\\n}\\n\\n.carousel-control-prev-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\\\");\\n}\\n\\n.carousel-control-next-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\\\");\\n}\\n\\n.bird-song div:nth-child(2) {\\n  background-color: rgb(142, 160, 119);\\n}\\n\\n.bird-song-bg {\\n  background-color: var(--snap-collection-active);\\n}\\n\\n.bird-song-icon {\\n  color: rgba(0, 0, 0, 1);\\n  margin-left: -.5rem;\\n}\\n\\n.bird-song-icon-disabled {\\n  color: rgba(0, 0, 0, 0.2);\\n  pointer-events: none;\\n  margin-left: -.5rem;\\n}\\n\\niframe#birdsong {\\n  width: 1px;\\n  min-width: 260px;\\n}\\n\\n.rank {\\n  border-radius: 0.24rem;\\n  display: inline-block;\\n  vertical-align: text-top;\\n}\\n\\n.radio-buttons.disabled label {\\n  color: rgb(100,100,100);\\n}\\n\\n.visual-match .description div:empty,\\n.visual-match .description span:empty {\\n  display: none;\\n}\\n\\ndiv.hide-empty:empty,\\nspan.hide-empty:empty {\\n  display: none !important;\\n}\\n\\n.visual-match .description {\\n  background-color: rgb(200, 197, 172);\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0.5rem;\\n}\\n\\n.visual-match .description span {\\n  flex: 1;\\n  padding: 0.5rem;\\n}\\n\\n.comparison-description {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  padding: 0 0.5rem;\\n}\\n\\n.species-search .icon {\\n  font-size: 2.5rem;\\n  height: calc(var(--vhStandardBlock, 30vh) * 1.5);\\n  color: rgb(90, 147, 252);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.species-search .icon svg:not(.slow-spin) {\\n  color: var(--snap-active);\\n}\\n\\n.question-container .icon {\\n  color: rgb(90, 147, 252);\\n  font-size: 1.8rem;\\n}\\n\\n.slow-spin {\\n  -webkit-animation: fa-spin 6s infinite linear;\\n  animation: fa-spin 6s infinite linear;\\n}\\n\\na.collection-disabled {\\n  color: grey;\\n  pointer-events: none;\\n}\\n\\n.attribution-layer {\\n  color: var(--snap-text-light);\\n}\\n\\n.rights-attribution {\\n  display: grid;\\n  grid-template-columns: 2rem auto;\\n  height: var(--vhRunningBlock);\\n  background-color: rgb(166, 177, 155);\\n  font-size: .7rem;\\n}\\n\\n.rights-attribution .underline-link {\\n  color: white !important;\\n}\\n\\n.rights-link-copyright {\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  z-index: 25;\\n}\\n\\n.rights-link-copyright .underline-link {\\n  line-height: 1.5;\\n}\\n\\n.rights-link-copyright svg {\\n  color: white;\\n  font-size: 1.1rem;\\n}\\n\\n.rights-link-copyright i.fas.fa-copyright {\\n  font-size: 1.3rem;\\n}\\n\\n.rights-link {\\n  height: var(--vhRunningBlock);\\n  grid-template-columns: 2rem auto 2rem;\\n  background-color: rgb(166, 177, 155);\\n  display: grid;\\n}\\n\\n.rights-link > div:nth-child(1), .rights-link > div:nth-child(3) {\\n  cursor: pointer;\\n}\\n\\n.rights-attribution > div > div:nth-child(1) {\\n  margin: 0 0.5rem 0 0;\\n}\\n\\n.rights-attribution > div > div:nth-child(2) {\\n  flex: 1;\\n}\\n\\n.rights-attribution span {\\n  vertical-align: baseline;\\n  margin: 0 0 0 0.25rem;\\n}\\n\\n.greek {\\n  vertical-align: super;\\n}\\n\\n.dropdown.collections {\\n  display: flex;\\n}\\n\\n.range-slider-control {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.carousel-indicators {\\n  height: var(--vhRunningBlock);\\n  bottom: 0;\\n  margin: 0 !important;\\n  margin-left: 2.5rem !important;\\n  margin-right: 2.5rem !important;\\n  align-items: center;\\n}\\n\\n.carousel-indicators li {\\n  background-color: var(--snap-text-medium-dark);\\n  width: 1rem;\\n  height: 0.25rem;\\n  margin-bottom: 0;\\n}\\n\\n.carousel-indicators .active {\\n  background-color: white;\\n}\\n\\n.question-header {\\n  display: flex;\\n  background-color: var(--snap-species-header-background);\\n  color: var(--snap-dark);\\n  justify-content: center;\\n}\\n\\n.card-link {\\n  cursor: pointer;\\n  color: rgb(128, 121, 49);\\n}\\n\\n.calendar-container {\\n  display: flex;\\n  align-items: center;\\n  border-right: 1px solid var(--snap-border-lightest);\\n  justify-content: center;\\n}\\n\\n.calendar-box .row {\\n  display: grid;\\n  grid-auto-flow: row;\\n}\\n\\n.calendar-box .col {\\n  display: grid;\\n  grid-auto-flow: column;\\n}\\n\\n.calendar-box .col div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: 1.4rem;\\n  height: 1.4rem;\\n}\\n\\n.most-observations {\\n  color: var(--orange);\\n}\\n\\n.current-month {\\n  border: 0.05rem solid rgba(108, 117, 125,.8);\\n}\\n\\n.floating-card > span:nth-child(1) {\\n  background: #fff;\\n  border: none;\\n  border-radius: 2px;\\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\\n  display: inline-block;\\n  font-weight: 300;\\n  margin: .5rem;\\n  padding: .8rem 1.1rem;\\n}\\n\\n.home-container .snapdragon-header {\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-light);\\n  font-size: 1.6rem;\\n  letter-spacing: .25rem;\\n  border-bottom: 1px solid var(--snap-border-lightest);\\n}\\n\\n.home-container .snapdragon-header a, .home-container .snapdragon-header a:visited {\\n  color: var(--snap-text-medium-light);\\n}\\n\\n.home-container .snapdragon-tag, .home-container .summary-scores, .trait-card-summary-container .summary-scores {\\n  justify-content: center;\\n  font-style: italic;\\n  display: flex;\\n  color: var(--snap-link);\\n  letter-spacing: .03rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n}\\n\\n.trait-card-summary-container .summary-scores {\\n  padding: 0 1rem;\\n}\\n\\n.home-guide .taxa {\\n  color: var(--snap-collection-active);\\n}\\n\\n.home-guide .taxa > span {\\n  margin-right: .25rem;\\n}\\n\\n.summary-scores .summary-progress {\\n  margin: 1rem 0 0 0;\\n  position: relative;\\n}\\n\\n.summary-scores .summary-progress span {\\n  margin: 0 0 0 .5rem;\\n}\\n\\n.summary-scores .summary-progress span.above {\\n  position: relative;\\n  bottom: .5rem;\\n}\\n\\n.summary-scores .summary-progress span.below {\\n  position: relative;\\n  top: .5rem;\\n}\\n\\n.summary-scores span {\\n  margin: 0 .25rem 0 0;\\n}\\n\\n.summary-scores span:nth-child(2) {\\n  vertical-align: super;\\n}\\n\\n.trait-line {\\n  margin-top: 2rem;\\n}\\n\\n.trait-line .small-icon {\\n  font-size: 1rem !important;\\n  margin: 0 !important;\\n}\\n\\n.trait-icon, .trait-icon > span {\\n  margin: 0 !important;\\n}\\n\\n.trait-icon svg g g {\\n  fill: var(--snap-link);\\n}\\n\\n.home-container .snapdragon-tag .inat-widget span:nth-child(1) {\\n  font-style: initial;\\n}\\n\\n.home-container .vernacular-language {\\n  font-size: 1rem;\\n}\\n\\n.delete-guide-link > span.active {\\n  color: var(--snap-alert) !important; \\n  pointer-events: initial;\\n}\\n\\n.delete-guide-link > span.disabled {\\n  color: var(--secondary) !important;\\n  pointer-events: none;\\n}\\n\\n.delete-guide-link input {\\n  cursor: pointer;\\n  width: 1rem;\\n  height: 1rem;\\n  vertical-align: text-bottom;\\n}\\n\\n.home-container .snapdragon-tag > div .underline-link {\\n  text-transform: initial;\\n}\\n\\n.home-container .snapdragon-tag > div .super-text {\\n  display: inline-block;\\n  margin: .5rem 0 0 .25rem;\\n  vertical-align: top;\\n  color: var(--secondary);\\n  font-style: italic;\\n}\\n\\n.snapdragon-create-guide {  \\n  position: absolute;\\n  bottom: 1rem;\\n  right: 1rem;\\n  color: var(--snap-link);\\n}\\n\\n.snapdragon-create-guide > div:nth-child(1) {\\n  letter-spacing: .05rem;\\n  text-transform: uppercase;\\n}\\n\\n.snapdragon-create-guide .for-text {\\n  vertical-align: middle;\\n}\\n\\n.snapdragon-create-guide .toggle-links {\\n  display: flex;\\n  justify-content: flex-end;\\n  margin: .5rem .25rem 0 0;\\n}\\n\\n.edit-guide-link, .save-guide-link, .margin-right {\\n  margin: 0 .5rem 0 0;\\n}\\n\\n.swap-in-card {\\n  display: initial;\\n}\\n\\n.swap-out-card {\\n  display: none !important;\\n}\\n\\n.no-pointer-events {\\n  pointer-events: none;\\n}\\n\\n.snapdragon-intro {\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock));\\n  top: calc(var(--vhStandardBlock));  \\n}\\n\\n.snapdragon-intro > h3, .snapdragon-intro > h4, .snapdragon-intro > h5 {\\n  line-height: 2;\\n  font-size: 1rem;\\n  margin: 1.2rem 2.4rem 0 2.4rem !important;\\n}\\n\\n.snapdragon-intro .youtube-icon {\\n  font-size: 1rem;\\n}\\n\\n.lesson-list {\\n  position: relative;\\n  background-color: var(--snap-block-light);\\n}\\n\\n.lesson-list-header {\\n  padding: 0 !important;\\n  background-color: var(--snap-list-header-background);\\n  justify-content: space-between;\\n}\\n\\n.lesson-list-header > div:nth-child(1) {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.lesson-list-header > div:nth-child(1) > div {\\n  color: var(--snap-text-medium-light);\\n  display: flex;\\n  align-items: center;\\n  width: 100%;\\n  justify-content: space-between;\\n  padding-right: 1rem;\\n}\\n\\n.lesson-list-header > div:nth-child(2) {  \\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer;\\n}\\n\\n.lesson-list-header > div:nth-child(2) > div {  \\n  height: calc( var(--vh) * 5);\\n  width: calc( var(--vh) * 5);\\n}\\n\\n.lesson-list-header > div:nth-child(1) {\\n  padding-left: .5rem !important;\\n}\\n\\n.lesson-list-header > div[data-toggle-state=\\\"off\\\"]:nth-child(1) > div:nth-child(1) {\\n  display: none;\\n}\\n\\n.lesson-list-header > div[data-toggle-state=\\\"on\\\"]:nth-child(1) > div:nth-child(2) {\\n  display: none;\\n}\\n\\n.lesson-list-header svg {\\n  font-size: 1rem;\\n  vertical-align: super;\\n  color: var(--snap-text-medium-light);\\n  cursor: pointer;\\n}\\n\\n.lesson-list-carousel-item {\\n  display: flex;\\n  margin: .25rem 0;\\n}\\n\\n.lesson-list-carousel-item > div:nth-child(3) {\\n  font-size: 1.3rem;\\n  cursor: pointer;\\n  align-items: center;\\n  display: flex;\\n  position: absolute;\\n  right: .5rem;\\n}\\n\\n.lesson-list-item {\\n  padding: 1rem .5rem;\\n  pointer-events: none;\\n}\\n\\n.lesson-review, .lesson-terms-review {\\n  pointer-events: initial;\\n}\\n\\n.lesson-review svg {\\n  font-size: .9rem;\\n  color: var(--snap-collection);\\n}\\n\\n.lesson-review i.fa-sync, .lesson-list-item i.fa-sync {\\n  font-size: 1rem;\\n  color: var(--snap-active);\\n}\\n\\n.lesson-list > div > div:nth-child(1) {\\n  justify-content: space-between;\\n}\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n) {\\n  background-color: var(--snap-lesson-row-green);\\n}\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n+1) {\\n  background-color: var(--snap-lesson-row-green);\\n}\\n\\n.lesson-list .scrollable {\\n  width: 100%;  \\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock, 10vh));\\n  flex-direction: column;\\n  top: var(--vhStandardBlock, 10vh);\\n  border-top: 1px solid var(--snap-border-lightest);\\n}\\n\\n.lesson-list .scrollable .btn input[type=radio] {\\n  position: absolute;\\n  clip: rect(0,0,0,0);\\n}\\n\\n.youtube-green-fg {\\n  color: var(--snap-youtube-green);\\n}\\n\\n.button-block {\\n  height: var(--vhButtonBlock, 9vh);\\n  margin: 0 !important;\\n}\\n\\n.running-block {\\n  height: var(--vhRunningBlock, 9vh);\\n}\\n\\n.calendar-block {\\n  height: var(--vhCalendar, 11vh);\\n}\\n\\n.modal-footer.double-centred-block {\\n  background-color: var(--snap-portrait);\\n  text-transform: uppercase;\\n  cursor: pointer;\\n}\\n\\n.video {\\n  position: sticky;\\n  position: -webkit-sticky; \\n  top: 0; \\n  margin: 0;\\n  padding: 0;\\n  padding-top: .4rem;\\n  border-top: 1px solid var(--snap-border-light);\\n  position: relative;\\n  height: 0;\\n  padding-top: 56.25%;\\n  width:100%;\\n}\\n\\n.video iframe {\\n  position: absolute;\\n  top: 0; left: 0;\\n  border: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.home-scrolling-container {\\n  position: relative;\\n}\\n\\n.home-scrolling-container .scrollable {\\n  top: calc( var(--vhScrollingTop));\\n}\\n\\n.form-check {\\n  pointer-events: initial !important;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.form-check-input {\\n  margin-top: 0;\\n}\\n\\n.form-check-input:checked {\\n  background-color: var(--snap-tertiary-background);\\n  border-color: var(--snap-tertiary-background);\\n}\\n\\n.lesson-list .btn-group label.form-check-label {\\n  background-color: initial;\\n  cursor: pointer;\\n}\\n\\n.main-header {\\n  font-size: 1.4rem;\\n  text-transform: uppercase;\\n  letter-spacing: .25rem;\\n}\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5;\\n}\\n\\n#insertParent {\\n  font-size: .8rem;\\n  padding: 1rem;\\n}\\n\\n.col-count-2 {\\n  column-count: 2;\\n}\\n\\n.col-count-3 {\\n  column-count: 3;\\n}\\n\\n#insertParent > div > div:nth-child(1) {\\n  font-style: italic;\\n  font-size: .9rem;\\n}\\n\\n.border-bottom {\\n  border-bottom: .03rem solid var(--snap-border-medium);\\n}\\n\\n.lesson-companion {\\n  display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    font-style: italic;\\n    font-size: 1.1em;\\n    height: var(--vhStandardBlock, 10vh);\\n}\\n\\n.score-summary {\\n  top: calc(var(--vhStandardBlock));\\n  padding: .5rem 1.5rem;\\n}\\n\\n.score-summary.scrollable.review-summary {\\n  bottom: 1rem;\\n}\\n\\n.continue-link {\\n  margin-top: .5rem;  \\n}\\n\\n.highlighted-for-review-row {\\n  background-color: var(--snap-content-background) !important;\\n  border-top: 1px solid var(--snap-btn-auxillary);\\n  border-right: 1px solid var(--snap-btn-auxillary);\\n  border-bottom: 1px solid var(--snap-btn-auxillary);\\n  border-left: 1px solid var(--snap-btn-auxillary);\\n}\\n\\n.score-summary-row {\\n  border-bottom: .3rem solid var(--snap-content-background);\\n  padding: 1rem 0;\\n}\\n\\nbutton.score-summary-row {\\n  padding: 1rem 0;\\n}\\n\\n.score-summary-row-title {\\n  padding: .5rem 0 0 0;\\n}\\n\\n.score-summary-row.species {\\n  background-color: var(--snap-header-background);\\n  border: none;\\n  display: flex;\\n  width: 100%;\\n}\\n\\n.score-summary-row.header {\\n  cursor: pointer;\\n  background-color: initial;\\n  font-size: initial;\\n  letter-spacing: initial;\\n  background-color: var(--snap-row-background);\\n}\\n\\n.score-summary-row > div:nth-child(1), .score-summary-row > div:nth-child(3) {\\n  width: 5rem;\\n  min-width: 5rem;\\n}\\n\\n.score-summary-row > div:nth-child(1) i, .score-summary-row > div:nth-child(3) svg {\\n  font-size: 1.2rem;\\n}\\n\\n.score-summary-row > div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n\\n.score-summary-row > div:nth-child(2) {\\n  flex: auto;\\n  align-items: flex-start;\\n  max-width: 100%;\\n}\\n\\n.score-summary-row.in-columns {\\n  flex-direction: column;\\n  padding: 0;\\n}\\n\\n.score-summary-row.in-columns > div {  \\n  display: flex;\\n  flex-direction: row;\\n  width: 100%;\\n}\\n\\n.score-summary-row.in-columns > div > div {\\n  padding: 1rem 0;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(1), .score-summary-row.in-columns > div > div:nth-child(3) {\\n  width: 6rem;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) {\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  width: 100%;\\n  border-bottom: .03rem solid var(--snap-dd-non-taxa-bg-hover);\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) > div {\\n  font-size: .8rem;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) > div:nth-child(1) {\\n  padding: .5rem;\\n}\\n\\n.score-summary-row.in-columns div[data-is-true=\\\"true\\\"] > div:nth-child(2) {\\n  color: var(--snap-success);\\n}\\n\\n/* .score-summary-row.in-columns div[data-is-true=\\\"true\\\"] > div:nth-child(2) {\\n  border: solid 1px var(--snap-progress-bar);\\n  padding: .3rem;\\n  display: inline-block;\\n} */\\n\\n.score-summary-row.in-columns div[data-is-wrong-answer=\\\"true\\\"] {\\n  color: var(--snap-alert); \\n}\\n\\nimg[data-has-image=\\\"false\\\"] {\\n  display: none;\\n}\\n\\n.score-summary-row > div:nth-child(1) svg {\\n  display: none;\\n}\\n\\n.score-summary-row > div[data-is-true=\\\"true\\\"]:nth-child(1) svg:nth-child(1) {\\n  display: initial;\\n  color: rgb(52, 105, 23,.5);\\n  font-size: .8rem;\\n  font-size: 1.5rem;\\n}\\n\\n.score-summary-row > div:nth-child(1)[data-is-true=\\\"false\\\"] svg:nth-child(2) {\\n  display: initial;\\n  color: var(--snap-alert);\\n  color: rgba(183, 12, 21,.5);\\n  font-size: 1.5rem;\\n}\\n\\n.score-summary-row img {\\n  width: 98px;\\n  height: 68px;\\n}\\n\\n.score-summary-row.title > span {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n\\n.score-summary-footer {\\n  justify-content: flex-end;\\n  align-items: flex-start;\\n}\\n\\n.concealed {\\n  opacity: 0;\\n}\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5 !important;\\n}\\n\\n.autocomplete {\\n  height: 5rem !important;\\n  position: absolute !important;\\n}\\n\\n.login.icon > svg:nth-child(2) {\\n  color: var(--snap-text-light);\\n}\\n\\n.login.icon[data-is-logged-in=\\\"true\\\"] .fa-user-slash {\\n  display: none;\\n}\\n\\n.login.icon[data-is-logged-in=\\\"false\\\"] .fa-user-check {\\n  display: none;\\n}\\n\\n.quick-fire {\\n  position: relative;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.quick-fire .strips {\\n  height: initial;\\n}\\n\\ninput[type=\\\"number\\\"].big {\\n  width: 4rem;\\n  padding: .5rem;\\n}\\n\\ninput[type=\\\"number\\\"].medium {\\n  width: 3rem;\\n  padding: .25rem;\\n  font-size: .8rem;\\n}\\n\\n.quick-fire-taxa {\\n  column-count: 2;\\n}\\n\\n.quick-fire label, .quick-fire-taxa label {\\n  cursor: pointer;\\n}\\n\\n.quick-fire-branches.list-group, .quick-fire-taxa.list-group  {\\n  flex-direction: row;\\n  flex-wrap: wrap;\\n  column-count: initial;\\n}\\n\\n.quick-fire-taxa span, .quick-fire-branches span {\\n  font-size: .6rem;\\n  vertical-align: super;\\n  display: inline-block;\\n  padding: 0 .125rem;\\n  min-width: 1.5rem;\\n  text-align: left;\\n}\\n\\n.quick-fire-branches span {\\n  font-size: .6rem;\\n}\\n\\n.quick-fire .btn-group {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.quick-fire .btn-group >.btn {\\n  background-color: var(--snap-snap-action-btn);\\n  margin: 0 0 .5rem 0;\\n  border-radius: .25rem !important;\\n  letter-spacing: .03rem;\\n  width: fit-content;\\n  width: max-content;\\n  cursor: pointer !important;  \\n}\\n\\n.quick-fire .btn-group >.btn.active {\\n  background-color: var(--snap-text-medium-dark-hover);\\n  color: var(--snap-text-light);\\n}\\n\\n.quick-fire .quick-fire-options .btn-secondary {\\n  border: 1px solid var(--snap-collection-active);\\n}\\n\\n.quick-fire .quick-fire-options .btn-secondary:not(:disabled):not(.disabled).active {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-tertiary-background);\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.quick-fire .btn {  \\n  cursor: pointer !important;\\n}\\n\\n.quick-fire-text-entry > div{\\n  width: 100%;\\n}\\n\\n.quick-fire-summary-row.card {\\n  background-color: var(--snap-row-background);\\n  text-align: left;\\n  cursor: pointer;\\n}\\n\\n.quick-fire-summary-row .card-header {\\n  border-bottom: 0;\\n}\\n\\n.quick-review-tabs span {\\n  pointer-events: none;\\n}\\n\\n.nav-link {\\n  color: var(--snap-text-medium-dark);\\n  letter-spacing: .03rem;\\n}\\n\\n.nav-pills .nav-link.active, .nav-pills .show>.nav-link {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--snap-collection-light);\\n}\\n\\n.nav-pills .nav-item:nth-child(1) .nav-link.active, .nav-pills .nav-item:nth-child(1) .show>.nav-link {\\n  background-color: var(--snap-success-medium);\\n}\\n\\n.nav-pills .nav-item:nth-child(2) .nav-link.active, .nav-pills .nav-item:nth-child(2) .show>.nav-link {\\n  background-color: var(--snap-alert-medium);\\n}\\n\\n.nav-pills .nav-link {\\n  border-radius: 0;\\n  position: relative;\\n}\\n\\n.quick-fire .nav-link.active.show {\\n  display: block;\\n}\\n\\n.quick-fire .nav-item a:hover {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--snap-btn-hover);\\n}\\n\\n.quick-fire .nav-item:nth-child(1) a:hover {\\n  background-color: var(--snap-success-light);\\n}\\n\\n.quick-fire .nav-item:nth-child(2) a:hover {\\n  background-color: var(--snap-alert-light);\\n}\\n\\n.quick-fire .accordions-container {\\n  height: calc(\\n     (var(--vh, 1vh) * 100) \\n    - var(--vhFixtures, 15vh)\\n    - var(--vhDoubleStandardBlock,20vh)\\n    - var(--vhStandardBlock,10vh) \\n    - 1rem\\n    );\\n    top: calc(\\n        var(--vhDoubleStandardBlock,20vh)\\n      + var(--vhStandardBlock,10vh) \\n    );\\n}\\n\\n.correct-answer-color {\\n  color: var(--snap-success); \\n}\\n\\n.incorrect-answer-color {\\n  color: var(--snap-alert);\\n}\\n\\n.low-relief-block {\\n  border: 1px solid var(--snap-success-light) !important;\\n  background-color: var(--snap-species-highlight-background);\\n}\\n\\n.horizontal-buttons {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr;\\n  grid-gap: .5rem;\\n}\\n\\n.lesson-spinner {\\n  font-size: 5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh)); \\n}\\n\\n.image-slider-190 img {\\n  height: 190px;\\n  min-height: 190px;\\n}\\n\\n.lesson-icon{\\n  width: 98px;\\n  height: 68px;\\n  object-fit: none;\\n}\\n\\n.location-filter-options {\\n  padding: .5rem;\\n  grid-template-rows: 1fr 1fr;\\n  display: grid;\\n}\\n\\n.skip-link {\\n  position: absolute;\\n  top: -40px;\\n  left: 0;\\n  background: #000000;\\n  color: white;\\n  padding: 8px;\\n  z-index: 100;\\n}\\n\\n.skip-link:focus {\\n  top: 0;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  a {\\n    color: var(--snap-youtube-green);\\n    text-decoration: none !important;\\n  }\\n\\n  h1 {\\n    font-size: .9rem;\\n  }\\n\\n  h2 {\\n    font-size: .8rem;\\n  }\\n\\n  h3 {\\n    font-size: .7rem;\\n  }\\n\\n  img {\\n    max-width: 100%;\\n    display: block;\\n  }\\n\\n  h1, h2, h3 {\\n    font-weight: unset;\\n    margin: 0 !important;\\n  }\\n\\n  fieldset {\\n    border: none;\\n  }\\n\\n  label {\\n    margin: 0;\\n  }\\n\\n  legend {\\n    margin-bottom: 0 !important;\\n    width: initial !important;\\n  }\\n\\n  caption {\\n    padding: 0;\\n    height: 0;\\n  }\\n\\n  dt {\\n    font-weight: 500;\\n  }\\n\\n  svg {\\n    pointer-events: none;\\n  }\\n\\n  .flex {\\n    display: flex;\\n  }\\n\\n  .flexnowrap {\\n    flex-wrap: nowrap;\\n  }\\n\\n  .relative {\\n    position: relative;\\n  }\\n\\n  .absolute {\\n    position: absolute;\\n  }\\n\\n  .standard-block {\\n    height: var(--vhStandardBlock, 10vh);\\n  }\\n  \\n  .double-standard-block {\\n    height: var(--vhDoubleStandardBlock, 20vh);\\n  }\\n  \\n  .half-standard-block {\\n    height: var(--vhHalfStandardBlock, 5vh);\\n  }\\n  \\n  .one-and-half-standard-block {\\n    height: var(--vhOneAndHalfStandardBlock, 15vh);\\n  }\\n\\n .centred-block {\\n    display: flex;\\n    align-items: center;\\n    width: -moz-available;\\n    width: -webkit-fill-available;\\n  }\\n  \\n  .bottom-aligned {\\n    display: flex;\\n    align-items: flex-end;\\n  }\\n  \\n  .double-centred-block {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  \\n  .vertical-centred-block {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n  }\\n  \\n  .vertical-evenly-spaced-block {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-evenly;\\n  }\\n  \\n  .horizontal-evenly-spaced-block {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: space-evenly;\\n  }\\n\\n  .margin-all {\\n    margin: .5rem !important;\\n  }\\n  \\n  .margin-top {\\n    margin-top: .5rem !important;\\n  }\\n  \\n  .margin-right {\\n    margin-right: .5rem !important;\\n  }\\n  \\n  .half-margin-right {\\n    margin-right: .25rem !important;\\n  }\\n  \\n  .double-margin-right {\\n    margin-right: 1rem !important;\\n  }\\n  \\n  .margin-bottom {\\n    margin-bottom: .5rem !important;\\n  }\\n  \\n  .margin-left {\\n    margin-left: .5rem !important;\\n  }\\n  \\n  .half-margin-left {\\n    margin-left: .25rem !important;\\n  }\\n  \\n  .padding {\\n    padding: .5rem;\\n  }\\n  \\n  \\n  .half-padding {\\n    padding: .25rem;\\n  }\\n  \\n  .padding-top {\\n    padding-top: .5rem;\\n  }\\n  \\n  .padding-right {\\n    padding-right: .5rem;\\n  }\\n  \\n  .padding-bottom {\\n    padding-bottom: .5rem;\\n  }\\n  \\n  .padding-left {\\n    padding-left: .5rem;\\n  }\\n\\n  .custom-checkbox input {\\n    margin: 0 0.5rem 0 0;\\n  }\\n\\n  .show {\\n    display: inline;\\n  }\\n  \\n  .hide {\\n    display: none;\\n  }\\n  \\n  .hide-important {\\n    display: none !important;\\n  }\\n\\n\\n  .visually-hidden:not(:focus):not(:active) {\\n    position: absolute !important;\\n    height: 1px; \\n    width: 1px;\\n    overflow: hidden;\\n    clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\\n    clip: rect(1px, 1px, 1px, 1px);\\n    white-space: nowrap; /* added line */\\n}\\n  \\n  .underline-link {\\n    color: var(--snap-link);\\n    cursor: pointer;\\n    display: inline-block;\\n    line-height: 1.8;\\n    border-bottom: 1px solid var(--snap-link);\\n  }\\n\\n  .underline-link:hover, .underline-link:focus {\\n    color: var(--snap-link-hover);\\n  }\\n\\n  .underline-link:focus {\\n    outline: 1px solid var(--snap-border-medium)\\n  }\\n\\n  .full-width {\\n    width: 100%;\\n  }\\n\\n  .cursor-pointer {\\n    cursor: pointer;\\n  }\\n\\n  .border-top {\\n    border-bottom: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-right {\\n    border-right: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-bottom {\\n    border-bottom: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-left {\\n    border-left: 1px solid var(--snap-border-light);\\n  }\\n\\n  .justify-space-between {\\n    justify-content: space-between;\\n  }\\n\\n  .justify-end {\\n    justify-content: flex-end;\\n  }\\n\\n  .small-text {\\n    font-size: .8rem !important;\\n  }\\n\\n  .smaller-text {\\n    font-size: .7rem !important;\\n  }\\n\\n  .extra-small-text {\\n    font-size: .6rem !important;\\n  }\\n\\n  .large-text {\\n    font-size: 1.2rem !important;\\n  }\\n\\n  .extra-large-text {\\n    font-size: 1.5rem !important;\\n  }\\n\\n  .capitalise {\\n    text-transform: capitalize;\\n  }\\n  \\n  .uppercase {\\n    text-transform: uppercase;\\n  }\\n  \\n  .line-through {\\n    text-decoration: line-through;\\n  }\\n\\n  .modal-background-relief {\\n    background-color: var(--snap-species-highlight-background);\\n  }\\n\\n  .modal-background-relief-emphasis {\\n    border: 1px solid var(--snap-success) !important;\\n  }\\n\\n  .border-light {\\n    border: 1px solid var(--snap-success-light) !important;\\n  }\\n\\n  .border-medium {\\n    border: 1px solid var(--snap-border-medium);\\n  }\\n\\n  .vertical-block {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\\n  .emphasis {\\n    font-weight: bold;\\n    letter-spacing: .03rem;\\n  }\\n  \\n  .absolute-bottom {\\n    position: absolute;\\n    bottom: .5rem;\\n  }\\n\\n  .answer-response {\\n    margin: 0 0 0 .25rem;\\n  }\\n\\n  .col-count-2 {\\n    column-count: 2;\\n  }\\n\\n  .col-count-3 {\\n    column-count: 3;\\n  }\\n\\n  .col-count-4 {\\n    column-count: 4;\\n  }\\n\\n  .col-count-5 {\\n    column-count: 5;\\n  }\\n\\n  .col-count-6 {\\n    column-count: 6;\\n  }\\n\\n  .nowrap {\\n    white-space: nowrap;\\n  }\\n  \\n  .snap-inactive {\\n    color: var(--snap-inactive) !important;\\n    pointer-events: none !important;\\n  }\\n\\n  .black-text {\\n    color: var(--snap-text-black);\\n  }\\n\\n  /* If set to display inline, would width automatically be determined by the text they contain? each span vs div */\\n  .fit-width {\\n    width: intrinsic;           /* Safari/WebKit uses a non-standard name */\\n    width: -moz-max-content;    /* Firefox/Gecko */\\n    width: -webkit-max-content; /* Chrome */\\n  }\\n\\n  .sr-only {\\n    position: absolute;\\n    width: 1px;\\n    height: 1px;\\n    padding: 0;\\n    margin: -1px;\\n    overflow: hidden;\\n    clip: rect(0, 0, 0, 0);\\n    border: 0;\\n  }  \\n\\n  .super {\\n    vertical-align: super;\\n    font-size: .8em;\\n  }  \\n  \\n  .list-group-item {\\n    font-size: .8rem;\\n    padding: .25rem .5rem;\\n  }\\n\\n  .snap-btn {\\n    background-color: var(--snap-list-header-background);\\n    color: var(--snap-text-black);\\n    letter-spacing: .05rem;\\n    border: 1px solid var(--snap-border-light);\\n    padding: .25rem .75rem;\\n  }\\n  \\n  .snap-btn:hover, .snap-btn:focus {\\n    opacity: 1;\\n    border: 1px solid var(--snap-youtube-green);\\n    outline: none;\\n  }\\n  \\n  .snap-btn:focus:not(:focus-visible), .snap-icon-btn:focus:not(:focus-visible) {\\n    border: 1px solid var(--snap-active);\\n    outline: none;\\n  }\\n  \\n  .dropdown .snap-btn:hover, .dropdown .snap-btn:focus {\\n    border: 1px solid var(--snap-border-light);\\n  }\\n  \\n  .snap-icon-btn {\\n    color: var(--snap-text-dark);\\n    background-color: transparent;\\n    border: 1px solid transparent;\\n    padding: 0 .5rem;\\n  }\\n  \\n  .snap-icon-btn:focus, .snap-icon-btn:hover {\\n    color: var(--snap-youtube-green);\\n    outline: 1px solid var(--snap-border-medium);\\n    opacity: 1;\\n  }\\n  \\n  .snap-link-btn, .snap-no-link-btn {\\n    color: var(--snap-text-dark);\\n    background-color: transparent;\\n    border: none;\\n    font-size: .7rem;\\n    width: intrinsic;           /* Safari/WebKit uses a non-standard name */\\n    width: -moz-max-content;    /* Firefox/Gecko */\\n    width: -webkit-max-content; /* Chrome */\\n  }\\n  \\n  .snap-no-link-btn {\\n    pointer-events: none;\\n  }\\n  \\n  .snap-action-btn {\\n    background-color: var(--snap-tertiary-background);\\n    color: var(--snap-text-light);\\n    letter-spacing: .05rem;\\n    border: 1px solid var(--snap-non-taxa) !important;\\n    padding: .5rem .75rem;\\n  }\\n  \\n  .snap-action-btn:focus {\\n    outline: 1px solid var(--snap-border-medium);\\n    color: var(--snap-text-black);\\n  }\\n  \\n  .snap-action-btn.snap-success {\\n    color: var(--snap-text-light) !important;\\n    background-color: var(--snap-success) !important;\\n    border: 0.05rem solid var(--snap-success);\\n  }\\n  \\n  .snap-action-btn.snap-alert {\\n    color: var(--snap-text-light) !important;\\n    background-color: var(--snap-alert) !important;\\n    border: 0.05rem solid var(--snap-alert);\\n  }  \", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".species-table {\\n  border-right: 1px solid var(--snap-btn-auxillary);\\n  border-left: 1px solid var(--snap-btn-auxillary);\\n  border-bottom: 1px solid var(--snap-btn-auxillary);\\n}\\n\\n.table-header {\\n  cursor: pointer;\\n  display: flex;\\n  flex-direction: row;\\n  border: 0;\\n  height: var(--vhRunningBlock,7.5vh);\\n  z-index: 10;\\n  align-items: center;\\n  top: 0;\\n  background-color: var(--snap-btn-auxillary);\\n  color: var(--snap-text-light);\\n  font-size: 1.1em;\\n  letter-spacing: .01rem;\\n}\\n\\n.table-header th {\\n  cursor: pointer;\\n  font-weight: initial;\\n}\\n\\n.table-row {\\n    display: flex;\\n    flex-direction: row;\\n    height: var(--vhRow, 12.5vh);\\n    font-size: .9em;\\n  }\\n  \\n  .table-row-chevron {\\n    display: flex;\\n    justify-content: center;\\n    width: 100%;\\n  }\\n\\n  tr.master:nth-child(2n + 1) {\\n    background-color: var(--snap-content-background);\\n  }\\n \\n  .table-row img, table input {\\n    cursor: pointer;\\n  }\\n\\n  .table-row td button svg {\\n    min-width: 2.5rem;\\n  }\\n  \\n  .table-row img {\\n    width: 64px;\\n    height: 64px;\\n    object-fit: none;\\n    padding: .5rem;\\n  }\\n\\n  .table-row img:hover {\\n    opacity: .8;\\n  }\\n  \\n  .table-row img:focus {\\n    border: 1px solid black;\\n  }\\n  \\n  .table-row .lp-level {\\n    padding: 0 0 0 0.5rem;\\n  }\\n\\n  .inserted-td {\\n    font-size: .9rem;\\n    white-space: normal;\\n    text-align: left;\\n    padding: .5rem;\\n  }\\n\\n  th {\\n    text-align: initial;\\n  }\\n\\n\\n  .table-header th:nth-child(1) {\\n    min-width: 80px;\\n  }\\n\\n  .species-list .table-header th:nth-child(2):after,\\n  .species-list .table-header th:nth-child(3):after {\\n    display: inline-block;\\n    width: 0;\\n    height: 0;\\n    margin-left: 0.255rem;\\n    vertical-align: middle;\\n    content: \\\"\\\";\\n    border-top: 0.3rem solid;\\n    border-right: 0.3rem solid transparent;\\n    border-bottom: 0;\\n    border-left: 0.3rem solid transparent;\\n    cursor: default;\\n  }\\n  \\n  .table-header th:nth-child(1) > span,\\n  .table-footer td:nth-child(1) > span {\\n    height: 1px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  \\n  .table-header th:nth-child(2) {\\n    flex: 3;\\n    align-items: flex-start;\\n  }\\n  \\n  .master.table-row td:nth-child(1) {\\n    width: 80px;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .species-description > td:nth-child(1) {\\n    width: 100%;\\n  }\\n\\n  .table-row td:nth-child(2) {\\n    flex: 3;\\n    display: flex;\\n    align-items: flex-start;\\n    flex-direction: column;\\n    justify-content: center;\\n  }\\n\\n  .table-header th:nth-child(3), .table-row td:nth-child(3), .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n    flex: 1;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .table-header th:nth-child(5), .table-row td:nth-child(5) {\\n    flex: 1;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) {\\n      flex: 1;\\n      display: flex;\\n      align-items: center;\\n  }\\n\\n  .table-header th:nth-child(5), .table-row td:nth-child(5) button {\\n    position: absolute;\\n    right: 2.5rem;\\n  }\\n\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) button {\\n    position: absolute;\\n    right: .5rem;\\n  }\\n\\n  .hide-column {\\n    flex: 0 !important;\\n    display: none !important;\\n  }\\n\\n .species-table .mushroom-icon svg {\\n  width: 1rem;\\n  height: 1rem;\\n  margin-top: .3rem;\\n }\\n\\ndiv.species-description {\\n  background-color: var(--snap-species-highlight-background);\\n  border-top: .5px solid var(--snap-youtube-green);\\n  border-bottom: .5px solid var(--snap-youtube-green);\\n  padding: 1rem;\\n  color: rgba(0, 0, 0, .85);\\n  height: initial;\\n}\\n\\n.species-description > td {\\n  width: 100%;\\n}\\n\\n.youtube-icon, .accordion-icon {\\n  font-size: 1.8rem;\\n  cursor: pointer;\\n}\\n\\ntable .youtube-icon, .accordion-icon {\\n  font-size: 1.2rem;\\n}\\n\\n.species-container {\\n  position: relative;\\n  width: 100%;\\n}\\n\\n.lesson-list-action-icons {\\n  right: .5rem;\\n  bottom: 1.5rem;\\n}\\n \\n.species-table .underline-link {\\n    text-transform: initial;\\n    display: initial;\\n}  \\n\\n.btn-current-lesson-begin {\\n  width: calc(var(--vwGrid) - 1rem);\\n  margin: .5rem;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* iPhone 5, ?? */\\n\\n@media (max-width: 320px) and (max-height: 568px) {\\n    .imageSlider .active.carousel-item {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n    }\\n}\\n\\n@media (min-width: 320px) {\\n}\\n@media (min-width: 414px) {\\n    .test-card-question .question-question {\\n        font-size: 1.2rem;\\n    }\\n    .rights-link, .rights-attribution {\\n        grid-template-columns: 4rem auto 4rem;\\n    }\\n}\\n\\n/* iPHONE 6,7,8 */\\n\\n@media (max-width:375px) and (min-height:667px) {\\n    .autocomplete {\\n        height: 8rem !important;\\n    }\\n}\\n\\n/* Galaxy S5 */\\n\\n@media (min-width:360px) {\\n    .names-container .vernacular-name {\\n        max-width: 13.5rem;\\n    }\\n}\\n\\n/* @media (min-width:414px) {\\n    .youtube-icon, .accordion-icon {\\n        font-size: 1.4rem;\\n    }\\n    .species-table .youtube-icon, .accordion-icon {\\n        font-size: 1.2rem;\\n    }\\n} */\\n\\n/* iPHONE 6,7,8 PLUS, iPHONE X, GALAXY S9/S9+ */\\n\\n/* @media  (max-width:414px) and (min-height:736px),\\n        (max-width:375px) and (min-height:812px),\\n        (max-width:360px) and (min-height:740px) {\\n            body {\\n                font-size: 1em;\\n            }\\n} */\\n\\n@media (max-height:568px) {\\n    .test-card .help-txt {\\n        display: none;\\n    }\\n}\\n\\n/* @media (min-height: 667px) {\\n    .quick-fire .quick-fire-branches .btn-secondary, .quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n        font-size: .9rem;\\n        padding: .5rem;\\n    }\\n} */\\n\\n@media (min-width: 576px) {\\n}\\n\\n@media (min-width: 600px) {\\n    .test-card-question .question-question {\\n        font-size: 1.4rem;\\n    }\\n    .modal-subheader {\\n        font-size: 1.2em;\\n    }\\n    .table-header th:nth-child(1) {\\n        min-width: 105px;\\n    }\\n    \\n    .master.table-row td:nth-child(1) {\\n        width: 105px;\\n    }\\n    \\n    .table-row img {\\n        width: 98px;\\n        height: 69px;\\n    }\\n\\n    .list-group-item {\\n      font-size: 1rem;\\n      padding: .5rem 1rem;\\n    }\\n}\\n\\n/* NEXUS 6 */\\n\\n@media (width: 412px) and (max-height: 732px) {\\n    .youtube-icon {\\n        font-size: 1.5rem !important;\\n    }\\n}\\n\\n/* NEXUS 7 */\\n\\n@media (width: 600px) and (max-height: 960px) {\\n    \\n    .block {\\n        font-size: 1.3rem;\\n    }    \\n    .test-card-question .question-statement, .test-card-question .question-provider-question {\\n        font-size: 1rem;\\n    }\\n    body {\\n        font-size: 1.2em;\\n    }\\n    .snapdragon-intro > div {\\n        font-size: 1.2rem;\\n    }\\n    .youtube-icon {\\n        font-size: 1.8rem !important;\\n    }\\n    .lesson-name, .lesson-name .underline-link {\\n        font-size: 1rem;\\n    }\\n}\\n\\n@media (min-height:812px) {\\n}\\n\\n@media (max-width: 768px) {\\n    .landscape {\\n        display: none !important;\\n    }\\n    .portrait-grid {\\n        display: grid;        \\n    }\\n}\\n\\n@media (min-height: 640px) {   \\n    .modal-title {\\n        line-height: 1.5;\\n    } \\n}\\n\\n@media (min-width: 768px) {\\n\\n  h1 {\\n    font-size: 1.6rem;\\n  }\\n\\n  h2 {\\n    font-size: 1.3rem;\\n  }\\n\\n  h3 {\\n    font-size: 1rem;\\n  }\\n\\n  .modal h1 {\\n    font-size: 1.2rem;\\n  }\\n\\n  h2 {\\n    font-size: 1rem;\\n  }\\n\\n  h3 {\\n    font-size: .8rem;\\n  }\\n\\n    .quick-fire-branches span {\\n        font-size: .6rem;\\n    }\\n    \\n    .autocomplete-options-container{\\n        top: calc(\\n            var(--vhRunningBlock, 7.5vh) + \\n            5px +\\n            var(--vhStandardBlock, 10vh) +\\n            var(--vhStandardBlock, 10vh)\\n            + .25rem\\n        ) !important;\\n    }\\n\\n    .species-search .icon {\\n        font-size: 5.5rem;\\n        height: calc(var(--vhStandardBlock, 30vh) * 2);\\n    }\\n\\n    .autocomplete-options-container.autocomplete {\\n        height: 15rem !important;\\n    }\\n\\n    .squares {\\n        height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh));\\n    }\\n\\n    .imageSlider .carousel-item {\\n        height: var(--vhSmallImageCarousel);\\n        min-height: var(--vhSmallImageCarousel);\\n    }\\n\\n    .score-summary-row {\\n        display: flex;\\n    }\\n\\n    #imageModal .imageSlider .carousel-item, #imageComparisonModal .imageSlider .carousel-item {        \\n        height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - 300px ); /* see below (hack) */\\n    }\\n\\n    .image-description {\\n        padding: 1rem 4rem;\\n        margin-top: -300px; /* see above (hack) */\\n        color: black; /* to compensate for layer above (hack) */\\n    }\\n\\n    .imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n        top: 15%;\\n        top: calc(\\n            (var(--vh, 1vh) * 75 * .5) -\\n            (var(--vh, 1vh) * 7.5) -\\n            .5rem\\n            - 100px /* see above (hack) */\\n        );\\n    }\\n\\n    .modal-image .carousel-inner > div:nth-child(1) {\\n        height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhRunningBlock));\\n    }\\n\\n    .carousel-indicators {\\n        position: absolute;\\n        left: .5rem;\\n        right: .5rem;\\n        padding: .5rem;\\n        text-align: left;\\n        margin-left: 4rem !important;\\n        margin-right: 4rem !important;\\n    }\\n\\n    .carousel-indicators li {\\n        margin-bottom: 0;\\n    }\\n\\n    .test-card-question .question-statement, .test-card-question .question-provider-question {\\n        font-size: .9rem;\\n    }\\n\\n    .species-picker-actions ul {\\n        column-count: 2;\\n    }  \\n\\n    .guide-header-container > div:nth-child(2) {\\n        flex-direction: row;\\n    }\\n\\n    .iconic-taxa-categories svg {\\n        height: 2rem;\\n        font-size: 2rem;\\n    }\\n\\n    .iconic-taxa-categories-selected svg {\\n        height: 1rem;\\n        font-size: 1rem;\\n    }\\n\\n    .inat.snap-switch .inat-entry {\\n        display: flex;\\n        align-items: center;\\n        margin: 0 0 0 1rem;\\n    }\\n\\n    .inat.snap-switch input[type=\\\"text\\\"] {\\n        margin: 0 .5rem 0 0;\\n        color: var(--snap-text-medium-dark);\\n        padding: 0 .1rem;\\n    }\\n\\n    .modal-guide-wrapper .location.snap-switch {\\n        width: 100%;\\n        margin-top: 2rem;\\n    }\\n\\n    .location-option.place > button {\\n        margin-left: .25rem;\\n    }\\n\\n    #inat-place::placeholder {\\n        color: var(--gray);\\n        font-size: 1rem;\\n    }\\n\\n    .inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n        width: 12rem;\\n        width: fit-content;\\n        padding: 0 .25rem;\\n    }  \\n\\n    .range-slider {\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n    }\\n\\n    .range-slider > span:nth-child(2) {\\n        width: fit-content;\\n        border: .05rem solid var(--snap-border-lightest);\\n        padding: .5rem;\\n    }\\n\\n    .range-limits {\\n        display: initial;\\n    }\\n\\n    .inat-location-elsewhere {\\n        display: grid;\\n        grid-template-columns: 1fr .25rem 1fr;\\n    }\\n\\n    .location-filter-options {\\n      padding: 2rem;\\n      grid-template-columns: 1fr 1fr;\\n    }\\n    \\n    .traits-names-txt {\\n        display: grid;\\n        grid-template-columns: 1fr 1fr;\\n        padding: 1rem;\\n        border-bottom: 1px solid var(--snap-border-lightest);\\n    }\\n\\n    .iconic-icon {\\n        font-size: 2rem;\\n    }\\n\\n    .question-container .mushroom-icon-header svg {\\n        width: 1.8rem;\\n        height: 1.8rem;\\n        fill: var(--snap-iconic-icon-header);\\n    }\\n\\n    .species-header {\\n        text-align: right;\\n    }\\n\\n    .test-card-question .help-txt {\\n        margin: 1rem .5rem;\\n        font-family: serif;\\n        font-weight: bold;\\n        letter-spacing: .05rem;\\n    }\\n\\n    div.text-entry {\\n        margin: 1rem 0;\\n        padding: 0.5rem;\\n    }\\n\\n    .text-entry input {\\n        width: 75%;\\n        padding: 0.5rem;\\n        border: 0.05rem solid var(--snap-border-light);\\n    }\\n\\n    .video {\\n        top: -2px;\\n    }\\n\\n    .table-row {\\n        font-size: .8rem;\\n    }\\n\\n    .table-row td:nth-child(3) {\\n        display: flex;\\n        flex-direction: column;\\n        align-items: flex-start;\\n        justify-content: center;\\n    }\\n\\n    .species-list .scrollable {\\n        bottom: 0;\\n        top: 0;      \\n    }\\n        \\n    .right-grid .header, .right-grid .footer {\\n        justify-content: flex-start;\\n        padding-right: 1rem;\\n    }\\n\\n    .right-grid .footer > ul, .left-grid .footer > ul {\\n        max-width: 50%;\\n        text-transform: none;\\n        justify-content: space-between;\\n    }\\n\\n    .snapdragon-intro > div:nth-child(1) {\\n        margin: 0rem 2.4rem 0 2.4rem !important;\\n    }\\n\\n    .snapdragon-intro {\\n        height: initial;  \\n        padding: 2rem;\\n    }\\n\\n    .lesson-icon {\\n        width: 80px;\\n        height: 80px;\\n        object-fit: none;\\n    }\\n\\n    .lesson-list-carousel-item {\\n        align-items: center;\\n        display: grid;\\n        grid-template-columns: 1fr 3fr 1fr;\\n    }\\n\\n    .lesson-list-carousel-item > div:nth-child(3) {\\n        justify-content: center;\\n        margin: 0;\\n    }\\n\\n    .lesson-list-carousel-item > div:nth-child(3) > div {\\n        display: flex;\\n    }\\n\\n    body {\\n        max-width: 1200px;\\n    }\\n\\n    .left-grid {\\n        width: 458px;\\n        grid-area: left;\\n    }\\n\\n    .right-grid {\\n        width: 742px;\\n        grid-area: right;\\n    }\\n\\n    .grid {\\n        grid-template-columns: 1fr 1fr;\\n        grid-template-areas: \\\"right left\\\";\\n    }\\n\\n    .left-grid {\\n        display: grid;\\n    }  \\n\\n    .pool {\\n        max-width: 70%;\\n    }\\n\\n    .bird-song, .taxon-identification, .taxon-summary {\\n        margin: 1rem 4rem 0 4rem;\\n    }\\n\\n    .strips {\\n        cursor: pointer;\\n        width: initial;\\n        overflow-y: auto;\\n        padding: .5rem;\\n    }\\n\\n    .strip {\\n        min-width: initial;\\n        margin: .75rem .5rem .75rem 0;\\n        padding: .75rem;\\n    }\\n\\n    body {\\n        font-size: .9em;\\n    }\\n\\n    .home-scrolling-container .scrollable {\\n        position: relative; \\n        top: 0;\\n    }\\n\\n    .mixed-content-container {\\n        top: calc(\\n              var(--vhStandardBlock, 10vh)\\n            + var(--vhCalendar,11vh));\\n        height: calc(\\n              var(--vh, 1vh) * 100\\n            - var(--vhRunningBlocks,15vh)\\n            - var(--vhDoubleStandardBlock,20vh) \\n            - var(--vhCalendar,11vh) \\n            - 1.5rem);\\n      }\\n\\n      .modal-header {\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n      }\\n    \\n      iframe {\\n          width: 100%;\\n          border: 0;\\n      }\\n\\n      #badgeListModal .modal-dialog {\\n        width: 30vw;\\n        margin: calc( var(--vhRunningBlock) + var(--vhStandardBlock) + 5px + .5rem ) auto auto auto;\\n      }\\n\\n      #badgeListModal .modal-body {\\n        height: calc(var(--vhDoubleStandardBlock, 20vh) * 2);\\n      }\\n\\n      #wikiModal .modal-dialog {\\n        max-width: 900px;\\n        margin: auto;\\n      }\\n\\n      #wikiModal iframe {\\n          height: 100%;\\n      }\\n    \\n      #imageModal .modal-dialog {\\n        max-width: 600px;\\n        margin: auto;\\n      }\\n        \\n      #imageModal .modal-title span {\\n          display: flex;\\n          flex-direction: row;\\n      }\\n    \\n      #imageModal .modal-title span > span:nth-child(1) {\\n          margin: 0 .5rem 0 0;\\n      }\\n    \\n      #iNatWidgetModal .modal-dialog {\\n          max-width: 45vw;\\n      }\\n      \\n      #iNatWidgetModal .modal-header {\\n          display: inline;\\n      }\\n    \\n      #cardModal .feature-types {\\n          width: 100%;\\n          margin: 0;\\n      }\\n\\n      .info-details {\\n        padding: 1rem 4rem;\\n      }\\n\\n      .info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n          padding: .5rem;\\n      }\\n\\n    .non-taxon.card img {\\n        height: 5.5rem;\\n        width: 5.5rem;\\n      }\\n\\n    .response-update {\\n        left: 0;\\n        right: 0;\\n        justify-content: flex-end;\\n    }\\n\\n    .strip:hover, .strip:focus, .strip:focus-within {\\n        box-shadow: 0 2px 8px transparent;\\n        border: 1px solid var(--snap-border-light);\\n    }\\n\\n    .strip:hover button, .strip:focus button, .strip:focus-within button {\\n      color: var(--snap-text-medium-dark);\\n    }\\n\\n    .strip {\\n        display: flex;\\n        flex-direction: column;\\n    }\\n\\n    .strip > div:nth-child(2) {\\n        margin-top: .5rem;\\n    }\\n\\n    .strip-single-line {\\n        padding: 1.5rem;\\n    }\\n\\n    .portrait, .portrait-grid {\\n        display: none !important;\\n    }  \\n\\n    .header > div:nth-child(2) {\\n        max-width: initial;\\n        text-transform: initial;\\n    }\\n\\n    .non-taxa {\\n        display: flex;\\n        flex-direction: column;\\n        align-items: flex-end;\\n    }\\n\\n    .non-taxa .btn-group {\\n        width: 12rem;\\n        flex-direction: column;\\n        margin: 0 .5rem;\\n    }\\n\\n    .non-taxa .btn.btn-secondary {\\n        height: 3rem;\\n        cursor: pointer !important;\\n    }\\n\\n    .non-taxon-card-wiki {\\n        margin: 0 .5rem 0 0;\\n    }\\n\\n    .modal-header-container {\\n        padding-bottom: 4px;\\n        border-bottom: 1px solid var(--snap-border-light);\\n    }\\n\\n    .test-card-container .question-header > div {\\n      font-size: 1rem;\\n    }\\n}\\n\\n@media (min-width: 1024px) {\\n\\n    .left-grid {\\n        width: 391px;\\n    }\\n\\n    .right-grid {\\n        width: 633px;\\n    }\\n\\n    .squares {\\n        padding-top: 2rem;\\n    }\\n\\n    .squares > div {\\n        width: 190px;\\n        height: 150px;\\n    }\\n\\n    .table-header th:nth-child(2), .table-row td:nth-child(2) {\\n        flex: 5;\\n    }\\n    \\n    .table-header th:nth-child(3), .table-row td:nth-child(3) {\\n        flex: 5;\\n        font-size: .8rem;\\n        line-height: 2;\\n    }\\n    \\n    .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n        flex: 2 !important;\\n    }\\n\\n    .table-header th:nth-child(3) span:nth-child(2):after {\\n        margin-left: .355rem;\\n    }\\n\\n    .table-header th:nth-child(3):after {\\n        display: none;\\n    }\\n\\n    .species-list .table-header th:nth-child(3) span:after {\\n        display: inline-block;\\n        width: 0;\\n        height: 0;\\n        margin-left: .255rem;\\n        vertical-align: middle;\\n        content: \\\"\\\";\\n        border-top: .3rem solid;\\n        border-right: .3rem solid transparent;\\n        border-bottom: 0;\\n        border-left: .3rem solid transparent;\\n        cursor: default;\\n    }\\n\\n    .species-list .table-header th:nth-child(4):after, .species-list .table-header th:nth-child(5):after {\\n        display: inline-block;\\n        width: 0;\\n        height: 0;\\n        margin-left: .255rem;\\n        vertical-align: middle;\\n        content: \\\"\\\";\\n        border-top: .3rem solid;\\n        border-right: .3rem solid transparent;\\n        border-bottom: 0;\\n        border-left: .3rem solid transparent;\\n        cursor: default;\\n    }\\n\\n    .table-header th:nth-child(3) {\\n        flex-direction: column;\\n        display: flex;\\n        align-items: start;\\n    }\\n\\n    .table-header th:nth-child(3) span {\\n        flex: 1;\\n        line-height: initial;\\n    }\\n\\n    .table-header th:nth-child(5), .table-row td:nth-child(5),\\n    .table-header th:nth-child(6), .table-row td:nth-child(6) {\\n        flex: 1;\\n    }\\n\\n    .narrow-screen {\\n        display: none !important;\\n    }\\n\\n    .names-container .vernacular-name {\\n        max-width: none;\\n      }\\n}\\n\\n@media (max-width: 1024px) {    \\n    .wide-screen {\\n      display: none !important;\\n    }\\n}\\n\\n@media (min-width: 1112px) {\\n\\n    .left-grid, .tiles-container {\\n        width: 450px;\\n    }\\n\\n    .squares > div {\\n        height: calc( ((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh)) / 3);\\n        width: 225px; \\n    }\\n\\n    .squares {\\n        padding-top: 1rem;\\n    }\\n    \\n    .squares > div img {\\n        padding: .5rem;\\n    }\\n\\n    .right-grid {\\n        width: 662px;\\n    }\\n}\\n\\n@media (min-width: 1200px) {\\n    \\n    .left-grid, .tiles-container {\\n        width: 458px;\\n    }\\n\\n    .right-grid {\\n        width: 742px;\\n    }\\n\\n    .squares > div {\\n        width: 229px;\\n    }\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!./create-guide.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!./create-guide.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!./create-guide.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#createGuide .modal-dialog {\\n  max-width: 600px;\\n  margin: auto;\\n}\\n\\n.step-action-content {\\n  padding: 0 .5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock) - .5rem);  \\n}\\n  \\n  .species-picker-link {\\n    font-size: .8rem !important;\\n    font-style: initial;\\n  }\\n\\n  .modal-guide-progress > div {\\n    display: flex;\\n    align-items: center;\\n    padding: .5rem;    \\n    height: inherit;    \\n  }\\n\\n  .modal-subheader {\\n    font-size: 1.1em;\\n  }\\n\\n  .modal-guide-progress .steps {\\n    text-transform: uppercase;\\n  }\\n\\n  .modal-body .modal-guide-progress > div div {\\n    flex: 1;\\n    text-align: center;\\n    padding: .5rem 0;\\n  }\\n  \\n  .modal-body .modal-guide-progress > div > div {\\n    border-right: .005rem solid var(--snap-border-lightest);\\n  }\\n  \\n  .modal-body .modal-guide-progress > div > div:last-child {\\n    border-right: none;\\n  }\\n\\n  .modal-body .modal-guide-progress .active {\\n    color: var(--snap-text-dark);\\n    background-color: var(--snap-active);\\n  }\\n  \\n  .modal-guide-navigation {\\n    display: grid;\\n    grid-template-columns: 4fr auto 4fr;\\n    margin: 0 .5rem;\\n    height: var(--vhRunningBlock, 10vh);\\n    border: 1px solid var(--snap-border-light);\\n  }\\n\\n  .modal-guide-navigation > button {\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .modal-guide-navigation > button > span, .modal-guide-navigation > button svg {\\n    pointer-events: none;\\n  }\\n\\n  .custom-lesson-menu-options .snap-icon-btn:hover, .modal-guide-navigation .snap-icon-btn:hover {\\n    color: var(--snap-collection-active);\\n  }\\n\\n  .right-justify {\\n    justify-content: flex-end;\\n  }\\n\\n  .arrow-wrapper {\\n    padding: 0 .5rem;\\n    font-size: 1.6rem;\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-end;    \\n  }\\n  \\n  .arrow-wrapper-hidden > span {\\n    display: none;\\n  }\\n\\n  .arrow-wrapper svg {\\n    pointer-events: initial;\\n    cursor: pointer;\\n  }\\n  \\n  .modal-guide-wrapper .modal-body .location .current {\\n    display: flex;\\n    align-items: center;\\n    margin: 1rem 0;\\n  }\\n\\n  #set-inat-location-btn {\\n    width: 100%;\\n  }\\n\\n  .species-picker-container {\\n    position: relative;\\n  }\\n\\n  .species-picker-container > div {\\n    position: absolute;\\n    top: -5rem;\\n    width: 100%;\\n    display: flex;\\n  }\\n\\n  .chosen-guide-filter {\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .chosen {\\n    position: absolute;\\n    left: .5rem;\\n    right: .5rem;\\n    bottom: calc(var(--vhStandardBlock));  \\n    height: var(--vhHalfStandardBlock, 5vh);\\n  }\\n  \\n  .chosen > div span:nth-child(2) > span {\\n    margin: 0 .25rem;\\n  }\\n  \\n  .save-your-changes {\\n    display: flex;\\n    align-items: center;\\n    position: absolute;\\n    bottom: 1.5rem;\\n    width: 100%;\\n  }\\n  \\n  .modal-body .save-your-changes button {\\n    margin: 0 1rem 0 0;\\n  }\\n  \\n  .modal-body .inat-location-location button {\\n    width: 100%;  \\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .html5-location-place {\\n    width: 100%;\\n  }\\n\\n  #set-inat-identity-btn {\\n    color: var(--snap-text-light);        \\n    background-color: rgb(127, 151, 122);\\n    width: 100%;\\n  }\\n\\n  .modal-guide-wrapper .modal-body .inat button.js-set-inat-identity-btn {\\n    color: var(--snap-text-light);        \\n    background-color: rgb(127, 151, 122);\\n  }\\n\\n  #inat-place, #input-species, #inat-identity {\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    width: 100%;\\n  }\\n\\n  #inat-place::placeholder {\\n    display: inline;\\n  }\\n  \\n  .inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n    width: 100%;\\n    margin: 0;\\n    padding: 0;\\n  }\\n\\n  /* SLIDER */\\n\\n.modal-guide-body .range-slider {\\n    font-size: .9em;\\n    height: var(--vhStandardBlock);\\n    display: flex;\\n    flex-direction: column;\\n    align-items: normal;\\n    justify-content: space-evenly;\\n  }\\n  \\n  .modal-guide-body .range-slider > div:nth-child(2) {\\n    display: flex;\\n  }\\n\\n  .range-limits {\\n    display: none;\\n  }\\n  \\n  .modal-guide-body .set-range-input {\\n    cursor: pointer;\\n    width: 100%;\\n    margin: 0 .25rem;\\n  }\\n\\n  .set-range-input:focus {\\n    outline: 1px solid var(--snap-border-medium);\\n  }\\n  \\n  .modal-guide-body .range-slider.disabled .set-range-input {\\n    pointer-events: none;\\n  }\\n  \\n  /* SNAPDRAGON SWITCH */\\n\\n  .snap-switch {\\n    display: flex;\\n    align-items: center;\\n  }\\n  \\n  .snap-switch-slider {\\n    cursor: pointer;\\n    background-color: rgb(197, 203, 204);\\n  }\\n  \\n  .snap-switch-slider div {\\n    height: 1.6rem;\\n    width: 1.6rem;\\n    border-radius: .2rem;\\n    background-color: var(--snap-collection);\\n    transition-property: all;\\n    transition-duration: .4s;\\n    transition-timing-function: cubic-bezier(0.4, 0, 1, 1);\\n    transition-delay: 0s;\\n    position: absolute;\\n  }\\n\\n  .inat .snap-switch-slider div {\\n    background-color: var(--snap-inat);\\n  }\\n  \\n.embedded-switch {\\n  display: grid;\\n  grid-template-columns: auto 3.2rem 1fr;\\n  height: 1.6rem;\\n}\\n\\n  .snap-switch-slider.left div {\\n    transform: translateX(0);\\n  }\\n  \\n  .snap-switch .txt-left {\\n    align-self: center;\\n    padding: 0 .5rem 0 0;\\n    font-size: .9em;\\n  }\\n\\n  .snap-switch .txt-right {\\n    align-self: center;\\n    padding: 0 0 0 .5rem;\\n  }\\n\\n  .snap-switch-slider.right div {\\n    transform: translateX(1.6rem);\\n  }\\n\\n  .guides .inat .snap-switch {\\n    flex-direction: column;\\n  }\\n   \\n  /* AUTOCOMPLETE */\\n  \\n  #inat-place.active, #input-species.active {\\n    border: .1rem solid var(--snap-text-medium-dark);\\n  }\\n  \\n  .autocomplete-options-container, .inat-autocomplete-options-container {\\n    z-index: 9999;\\n    color: var(--snap-text-dark-medium-dark);\\n    background-color: rgb(250, 250, 250);\\n    border: .05rem solid var(--snap-border-lightest);\\n    text-align: left;\\n    overflow-y: auto;\\n    -webkit-overflow-scrolling: touch;\\n    top: calc(\\n      var(--vhRunningBlock, 7.5vh) + \\n      5px +\\n      var(--vhStandardBlock, 10vh) +\\n      var(--vhRunningBlock, 7.5vh)       \\n      + .25rem\\n      ) !important;\\n      left: .5rem;\\n      right: .5rem;\\n  }\\n\\n  .autocomplete-options-container.autocomplete {\\n    height: 10rem !important;\\n  }\\n\\n  .inat-autocomplete-options-container {\\n    top: calc(\\n      var(--vhRunningBlock, 7.5vh) + \\n      5px\\n      + var(--vhStandardBlock, 10vh)\\n      + var(--vhRunningBlock, 7.5vh)\\n      + var(--vhStandardBlock, 10vh)\\n      + .5rem\\n      ) !important;\\n  }\\n\\n  .autocomplete-options-container > div, .inat-autocomplete-options-container > div {\\n    padding: .25rem;\\n  }\\n  \\n  .autocomplete-options-container .selected, .inat-autocomplete-options-container .selected {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .inat-autocomplete-options-container .selected {\\n    background-color: var(--snap-inat);\\n  }\\n\\n  .autocomplete-options-container .selected {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .autocomplete-options-container > div:hover:not(.group) {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark-hover);\\n    cursor: pointer;    \\n  }\\n\\n.autocomplete-options-container > div.selected {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark);\\n    cursor: pointer;\\n  }\\n  \\n  #place span {\\n    margin: 0 .25rem 0 0;\\n  }\\n\\n  /* CATEGORIES */\\n\\n  .iconic-taxa-categories {\\n    display: grid;\\n    grid-template-columns: 1fr 1fr;\\n    height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh) - var(--vhHalfStandardBlock) );\\n    padding: 0 1rem 1rem 1rem;\\n  }\\n\\n  .iconic-taxa-categories > div > div {\\n    cursor: pointer;\\n  }\\n  \\n  /* Icon categories list, icon container and size */\\n\\n  .iconic-taxa-categories > div > div > div:nth-child(1), .iconic-taxa-categories button {    \\n    display: flex;\\n    align-items: center;\\n    justify-content: center;  \\n    cursor: pointer;\\n  }\\n\\n  .iconic-taxa-categories > div > div > div:nth-child(1) svg {\\n    color: var(--snap-collection);\\n  }\\n\\n  .iconic-taxa-categories g {\\n    fill: var(--snap-collection);\\n  }\\n\\n  .iconic-taxa-categories svg {\\n    font-size: 1rem;\\n    color: var(--snap-collection);\\n  }\\n\\n  .iconic-taxa-selected svg {\\n    color: var(--snap-collection-active) !important;\\n  }\\n\\n  .iconic-taxa-selected svg g {\\n    fill: var(--snap-collection-active) !important;\\n  }\\n\\n  .prop-value-block {\\n    display: flex;\\n    justify-content: flex-end;\\n    align-items: center;\\n  }\\n\\n  .prop-value-block > span:nth-child(2) {\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    display: inline-block;\\n    width: inherit;\\n    /* font-size: 1.1rem; */\\n  }\\n\\n  /* Mushroom icon sizes */\\n\\n  .iconic-taxa-categories svg, .iconic-taxa-categories-selected svg {\\n    width: 1rem;\\n    height: 1rem;\\n    font-size: 1rem;\\n  }\\n\\n  .selected-text svg, .selected-text i, .iconic-taxa-selected svg {\\n    color: var(--snap-collection-active);\\n  }\\n\\n  .lesson-taxa .iconic-taxa-categories-selected svg g {\\n    fill: var(--snap-text-medium-dark);\\n  }\\n  \\n  .iconic-taxa-categories-selected svg {\\n    vertical-align: -.125em;\\n  }\\n  \\n  .lesson-taxa .iconic-taxa-categories-selected svg {\\n    width: 1rem;\\n    height: 1rem;\\n  }\\n  \\n  .home-guide .iconic-taxa-categories-selected svg {\\n    width: 2rem;\\n    height: 2rem;\\n  }\\n\\n  .iconic-taxa-categories-selected svg g {\\n    fill: var(--snap-collection-active);\\n  }\\n\\n  .svg-icon {\\n    margin: 0.25rem 0 0;\\n  }\\n  \\n  .svg-icon-selected {\\n    fill: var(--snap-success);\\n    color: var(--snap-success);\\n  }  \\n\\n  /* EXAMPLE LESSONS INC. RB LIST */\\n\\n  .btn.btn-secondary {\\n    flex-direction: row;\\n    align-items: center;\\n  }\\n\\n  .lesson-taxa {\\n    overflow-wrap: break-word;\\n    white-space: initial;\\n    font-size: .8em;\\n  }\\n\\n  .locations .btn.btn-secondary > * {\\n    pointer-events: all;\\n  }\\n\\n  .non-taxon .btn.btn-secondary input {\\n    pointer-events: none;\\n  }\\n\\n  .lesson-name {\\n    line-height: initial !important;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    height: 1.5rem;\\n    display: flex;\\n    align-items: center;\\n    font-size: .8rem;\\n    color: var(--snap-text-black);\\n}\\n\\n  .lesson-name .underline-link {\\n    text-transform: initial;\\n    font-size: .8rem;\\n  }\\n\\n  .lesson-name input {\\n    pointer-events: initial;\\n  }\\n\\n  .lesson-taxa span:nth-child(1) {\\n    margin: 0 .15rem 0 0;\\n  }\\n\\n  .btn.btn-secondary.active .lesson-taxa .iconic-taxa-categories-selected svg g {\\n    fill: white;\\n  }\\n\\n  #confirm-lesson-btn {\\n    margin: 1.5rem 0;\\n    width: 9rem;\\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .lesson-radio-button {\\n    margin-right: .5rem;\\n  }\\n\\n  /* PORTRAIT & LANDSCAPE EXAMPLE GUIDE */\\n\\n  .btn.btn-secondary {\\n    width: 100%;\\n  }\\n\\n  .start-lesson-wrapper.disabled {\\n    pointer-events: none;\\n  }    \\n\\n  .modal-guide-progress {\\n    cursor: pointer;\\n  }\\n\\n  .modal-guide-progress span {\\n    pointer-events: none;\\n  }\\n\\n  .location-checkbox {\\n    line-height: 3rem;\\n  }\\n\\n  .guide-bottom-actions {\\n    display: flex;\\n    position: absolute;\\n  }\\n\\n  .guide-bottom-actions span:nth-child(1) {\\n    font-size: .8rem;\\n  }\\n\\n  .guide-bottom-actions span:nth-child(2) {\\n    margin-left: .25rem;\\n  }\\n\\n  .location-option > div {\\n    width: 100%;\\n  }\\n\\n  .location-option.inat-entry {\\n    position: relative;\\n  }\\n\\n  .location-option.or-options {\\n    text-align: center;\\n    font-style: italic;\\n  }\\n\\n  .location-option.range {\\n    border: none;\\n  }\\n\\n  .location-option button {\\n    width: 100%;\\n  }\\n  \\n  .location-option:nth-child(3) > div:nth-child(2) {\\n    flex: auto;\\n    position: relative;\\n  }\\n\\n  #googleLogo {\\n    width:  auto;\\n    height: 1rem\\n  }\\n\\n  .location-actions {\\n    height: 100%;\\n  }\\n\\n  .location-actions .actions {\\n    display: grid;\\n    grid-template-rows: 1fr 2rem 1fr;\\n    height: 100%;\\n  }\\n\\n  .species-picker-actions {\\n    height: initial;\\n  }\\n\\n  .filter-option {\\n    color: black;\\n  }\\n\\n  .taxa-actions .actions {\\n    grid-template-rows: 1fr;\\n  }\\n\\n  .filter-actions .actions {\\n    grid-template-rows: auto;\\n  }\\n\\n  .filter-actions .actions {\\n    justify-content: space-between; \\n  }\\n\\n  .filter-actions + div {\\n    display: none !important;\\n  }\\n\\n  .filter-language-option-block {\\n    width: 100%;\\n  }\\n  \\n  .filter-language-option-block span {\\n    text-transform: uppercase;\\n    margin-left: .15rem;\\n  }\\n\\n  .custom-lesson-menu-options {\\n    display: flex;\\n    flex-direction: column;\\n    pointer-events: initial;\\n    cursor: pointer;\\n  }\\n\\n  .custom-lesson-menu-options li {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n    border: 1px solid var(--snap-border-light);\\n  }\\n\\n  .custom-lesson-menu-options li span {\\n    padding: .5rem;\\n  }\\n\\n  .species-actions + div {\\n    display: none !important;\\n  }\\n\\n  .request-feedback .edit-species {\\n    margin: .5rem;\\n    height: var(--vhHalfStandardBlock, 10vh);\\n  }\\n\\n  .request-feedback .lesson-list-item {\\n    padding: .5rem;\\n    background-color: var(--snap-lesson-row-green);\\n    pointer-events: all;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-evenly;\\n  }\\n\\n  .request-feedback .lesson-list-item {\\n    line-height: initial !important ;\\n  }\\n\\n  .request-feedback .lesson-name {\\n    line-height: initial;\\n  }\\n\\n  .selected-species-container {\\n    position: relative;    \\n  }\\n\\n  .selected-species-container > div.scrollable {\\n    height: 0;\\n    margin: .5rem;\\n  }\\n\\n  .selected-species-container > div.scrollable.open {\\n    height: calc( (var(--vh, 1vh) * 100) \\n                 - var(--vhFixtures, 15vh) \\n                 - var(--vhStandardBlock,10vh)\\n                 - var(--vhOneHalfStandardBlock,20vh)\\n                 - var(--vhHalfStandardBlock,5vh)\\n                 - var(--vhRunningBlock)\\n                 - .5px\\n      );\\n    top: .5rem;\\n  }\\n\\n  .selected-species {\\n    margin: 1rem;\\n  }\\n\\n  .selected-species-container ul {\\n    columns: 2 200px;\\n    column-gap: 2rem;\\n  }\\n  \\n  #locationForm, #inatForm {\\n    width: 100%;\\n  }\\n\\n@media (min-height: 640px) {  \\n  .modal-guide-wrapper .modal-body .modal-guide-navigation > div:nth-child(1) > div svg {\\n      font-size: 2rem;\\n  }\\n}\\n\\n@media (min-height: 667px) {\\n\\n  .iconic-taxa-categories svg, .iconic-taxa-categories svg {\\n    font-size: 1.6rem;\\n    height: 1.6rem;\\n  }\\n\\n  .taxa-actions svg-icon.si-glyph-mushrooms svg {\\n    height: 2rem;\\n  }\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","const UPDATE_CONFIG = '[UPDATE_CONFIG] change to config';\nconst STOP_START_LESSON = '[STOP_START_LESSON] Pause or play current lesson';\nconst CHANGE_LESSON_PLANS = '[CHANGE_LESSON_PLANS] Edit the set of lesson plans';\nconst CHANGE_LESSON_PLAN = '[CHANGE_LESSON_PLAN] Edit the original lesson plan';\nconst SELECT_COLLECTION = '[SELECT_COLLECTION] Update the current selected collection';\nconst NEXT_ROUND = '[NEXT_ROUND] Go to next round';\nconst NEXT_LESSON = '[NEXT_LESSON] Get (new) lesson plan';\nconst NEXT_LAYOUT = '[NEXT_LAYOUT] Render next layout';\nconst NEXT_ITEM = '[NEXT_ITEM] Get next item';\n\nconst SET_ACTIVE_COLLECTION = '[SET_ACTIVE_COLLECTION] New collection';\nconst UPDATE_COLLECTION = '[UPDATE_COLLECTION] Change collection';\nconst UPDATE_COLLECTIONS = '[UPDATE_COLLECTIONS] Update collections list';\nconst RESET_COLLECTION = '[RESET_COLLECTION] Reset collection to initial state';\n\nconst UPDATE_SCORE = '[UPDATE_SCORE] Check user answer and update running score';\nconst UPDATE_TRAIT_SCORE = '[UPDATE_TRAIT_SCORE] Check user answer and update running score';\nconst END_REVISION = '[END_REVISION] Revision complete';\nconst UPDATE_HISTORY = '[UPDATE_HISTORY] Copy round score to history';\nconst UPDATE_COLLECTION_ITEMS = '[UPDATE_COLLECTION_ITEMS] Change collection items';\nconst NEXT_LEVEL = '[NEXT_LEVEL] Go to next level';\nconst UPDATE_LANGUAGE = '[UPDATE_LANGUAGE] Update the current language';\n\nconst UPDATE_ENUMS = '[UPDATE_ENUMS] Update enums by config language';\nconst UPDATE_USER = '[UPDATE_USER] Update user';\nconst UPDATE_LESSON = '[UPDATE_LESSON] Create new lesson';\n\nconst SAVE_LESSON = '[SAVE_LESSON] Add lesson to saved lessons';\nconst REMOVE_LESSON = '[REMOVE_LESSON] Remove lesson from saved lessons on restarting lesson';\n\nconst UPDATE_VIDEO_PLAYER = '[UPDATE_VIDEO_PLAYER] Update video player state';\n\nconst UPDATE_QUICKFIRE = '[UPDATE_QUICKFIRE] Update quick-fire';\nconst CREATE_QUICKFIRE = '[CREATE_QUICKFIRE] Add quick-fire';\nconst CREATE_GLOSSARY = '[CREATE_GLOSSARY] Add glossary';\n\nconst CLICK_EVENT = '[CLICK_EVENT] User triggered event';\n\nexport const types = {\n    CHANGE_LESSON_PLANS,\n    CHANGE_LESSON_PLAN,\n    NEXT_LESSON,\n    NEXT_LAYOUT,\n    NEXT_ITEM,\n    UPDATE_SCORE,\n    UPDATE_TRAIT_SCORE,\n    END_REVISION,\n    UPDATE_HISTORY,\n    SET_ACTIVE_COLLECTION,\n    UPDATE_COLLECTION,\n    UPDATE_COLLECTION_ITEMS,\n    UPDATE_COLLECTIONS,\n    RESET_COLLECTION,\n    NEXT_ROUND,\n    NEXT_LEVEL,\n    UPDATE_CONFIG,\n    STOP_START_LESSON,\n    SELECT_COLLECTION,\n    UPDATE_LANGUAGE,\n    UPDATE_ENUMS,\n    UPDATE_LESSON,\n    SAVE_LESSON,\n    REMOVE_LESSON,\n    UPDATE_VIDEO_PLAYER,\n    UPDATE_USER,\n    CREATE_QUICKFIRE,\n    UPDATE_QUICKFIRE,\n    CREATE_GLOSSARY,\n    CLICK_EVENT\n};","import { Enum } from 'enumify';\n\nclass lessonState extends Enum {};\nlessonState.initEnum([\n    'CREATE_LESSON',\n    'BEGIN_LESSON',\n    'BEGIN_OR_RESUME_LESSON',\n    'PAUSE_LESSON', \n    'RESUME_LESSON',\n    'NEXT_ROUND',\n    'BEGIN_INTRO',\n    'REVIEW_SUMMARY',\n    'UPDATE_COLLECTION', // required? use set active collection\n    'GET_LESSON_STATE',\n    'ADD_SPECIES_TO_COLLECTION',\n    'SAVE_LESSON_PROGRESS',\n    'RENDER_SPECIES_LIST',    \n]);\n\nclass navigation extends Enum {};\nnavigation.initEnum([\n    'LANDSCAPE_HOME', \n    'SETTINGS', \n    'PORTRAIT_HOME',\n    'GLOSSARY', \n    'EMAIL',\n    'INFO',\n    'LOGIN',\n    'LANGUAGE'\n]);\n\nclass taxon extends Enum {};\ntaxon.initEnum([\n    'KINGDOM',\n    'PHYLUM',\n    'ORDER',\n    'FAMILY',\n    'GENUS',\n    'SPECIES',\n]);\n\nclass guideType extends Enum {};\nguideType.initEnum([\n    'LOCATION',\n    'INAT',\n    'PICKER'\n]);\n\nclass guideMode extends Enum {};\nguideMode.initEnum([\n    'STATIC',\n    'DYNAMIC'\n]);\n\nclass nextStep extends Enum {};\nnextStep.initEnum([\n    'NEXT_ITEM',\n    'NEXT_LAYOUT',\n    'NEXT_LESSON',\n    'NEXT_ROUND',\n]);\n\nclass quickFireType extends Enum {};\nquickFireType.initEnum([\n    'DEFINITION',\n    'REVERSE_DEFINITION',\n    'TEXT_ENTRY'\n]);\n\nclass quickFireStep extends Enum {};\nquickFireStep.initEnum([\n    'GLOSSARY',\n    'FILTERS',\n    'QUESTIONS'\n]);\n\nclass userEvent extends Enum {};\nuserEvent.initEnum([\n    'DEFAULT',\n    'START_LESSON',\n    'START_LESSON_REVIEW',\n    'START_TERM_REVIEW',\n    'NAVIGATE_HOME',\n    'EDIT_LESSON',\n    'TOGGLE_SPECIES_LIST'\n]);\n\nexport const enums = {\n    lessonState,\n    navigation,\n    taxon,\n    guideType,\n    guideMode,\n    nextStep,\n    quickFireType,\n    quickFireStep,\n    userEvent\n};","import { enums } from 'ui/helpers/enum-helper';\n\nexport const config = {\n    language: 'en',\n    moduleSize: 4,\n    callbackTime: 1500,\n    callbackDelay: 1500,\n    excludeRevision: false,\n    isPortraitMode: false,\n    isLandscapeMode: true,\n    collection: {\n        id: 0\n    },\n    mode: 'learn',\n    languages : [\n        { name: 'Deutsche', lang: 'de' },\n        { name: 'English', lang: 'en' },\n        { name: 'Español', lang: 'es' },\n        { name: 'Français', lang: 'fr' },\n        { name: 'Italiano', lang: 'it' },\n        { name: 'Português', lang: 'pt' }\n    ],\n    guide: {\n        iconicTaxa: null,\n        locationLongLat: '',\n        locationPlace: '',\n        locationType: null,\n        place: {\n            id: 1,\n            name: ''\n        },\n        speciesRange: 10,\n        inatId: { key: '', type: '', param: 'user_id' },\n        season: {},\n        perPage: 200,\n        noOfRecords: 50,\n        guideMode: enums.guideMode.STATIC.name\n    },    \n};","import { types } from 'redux/actions/action-types';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nexport const config = (state = initialConfig, action) => {\n    switch(action.type) {\n        case types.UPDATE_COLLECTION:        \n            return { ...action.data.config, ...{ coordinates: state.coordinates }, ...{ place: state.place } };    \n        case types.UPDATE_CONFIG:\n            return { ...state, ...action.data };\n        case types.UPDATE_LANGUAGE:\n            return { ...state, ...{ language: action.data.lang } };\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.config };\n        default: \n            return state;\n    }\n};\n\nexport const enums = (state = {}, action) => {\n    switch(action.type) {\n        case types.UPDATE_ENUMS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const user = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_USER:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const userAction = (state = null, action) => {\n    switch(action.type) {\n        case types.CLICK_EVENT:\n            return action.data;\n        default:\n            return state;\n    }\n};","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nexport const collections = (state = [], action) => {\n    switch(action.type) {\n        case types.SELECT_COLLECTION:\n            const cols = [ ...state ];\n            cols.forEach(col => {\n                if(col.id === action.data.id) {\n                    col.selected = true;\n                } else {\n                    col.selected = false;\n                }\n            });\n            return cols;\n        case types.UPDATE_COLLECTIONS: {            \n            return state ? [ ...state, ...action.data ] : action.data;\n        }\n        case types.UPDATE_COLLECTION: {\n\n            const collections = [ ...state ];\n\n            collections.forEach(collection => {\n                if(collection.id === action.data.collection.id) {\n                    collection = action.data.collection;\n                }\n            });\n\n            return collections;\n        }\n        case types.SET_ACTIVE_COLLECTION: {\n\n            action.data.lesson.collection.isActive = true;\n\n            const isCollectionUpdate = R.contains(action.data.lesson.collection.id, state.map(collection => collection.id));\n            if(isCollectionUpdate) {\n                return [ ...state.filter(collection => collection.id !== action.data.lesson.collection.id), action.data.lesson.collection ];\n            } else {\n                return [ ...state, action.data.lesson.collection ];\n            }\n        }\n        default:\n            return state;\n    }\n};\n\nexport const collection = (state = { id: 0 }, action) => {\n\n    const getNextRound = (action, state) => {        \n\n        let lesson = action.data.lesson;\n        let itemIndex = (lesson.moduleSize * (lesson.currentRound - 1));\n        let nextItem = state.items[itemIndex];\n        \n        if(lesson.isLevelComplete) {\n            itemIndex = 0;\n            nextItem = state.items[itemIndex];\n        }        \n        return { itemIndex, nextItem };\n    };\n\n    const updateCollection = (state, action) => {\n        \n        let collection = { ...state, ...action.data.collection };\n        if(state.id && state.id === action.data.collection.id ) {\n            collection.itemIndex = state.itemIndex;\n        }\n        let nextItem = collection.items[collection.itemIndex];\n        \n        if(action.data.config.mode === 'review') {\n            collection.allItems = action.data.collection.allItems;\n        }\n\n        if(action.data.config.mode === 'learn-again') {\n            collection.itemIndex = 0;\n            collection.nextItem = collection.items[collection.itemIndex];            \n        }\n\n        return { collection, nextItem };\n    };\n    \n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.SELECT_COLLECTION: {\n            return action.data;\n        }\n        case types.UPDATE_COLLECTION_ITEMS: {\n            const collection = R.clone(state);\n            collection.items = action.data.filter(item => !item.isDeselected);\n            return collection;\n        }\n\n        case types.SET_ACTIVE_COLLECTION: {\n            return { \n                ...action.data.lesson.collection, \n                nextItem: action.data.lesson.collection.items[action.data.lesson.collection.itemIndex] };\n        }\n\n        case types.RESET_COLLECTION: {\n            return action.data.collection;\n        }\n\n        case types.UPDATE_COLLECTION: {            \n            const { collection, nextItem } = updateCollection(state, action);\n            return { ...state, ...collection, nextItem };\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n            return layout.bonus ? state : state;\n        }            \n\n        case types.NEXT_ITEM: {\n            let itemIndex = action.data;\n            let nextItem = state.items[itemIndex];\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_ROUND: {\n            const { itemIndex, nextItem } = getNextRound(action, state);\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_LESSON: {\n            const collection = { ...state, ...action.data.collection };\n            return { ...state, ...collection };\n        }\n\n        case types.NEXT_LEVEL: {\n            return state;\n        }\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const bonusLayout = (state = null, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n\n            if(layout.bonus) {\n                state = layout;\n            }\n            return state;\n        }\n\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.bonusLayout };\n\n        default: {\n            return state; \n        }\n    }\n};","const resetScore = ({\n    total = 0,\n    correct = 0,\n    taxon = '',\n    binomial = '',\n    answer = '',\n    success = false,\n    incorrect = 0,\n    question = '',\n    fails = [],\n    passes = [],\n    answers = [],\n    statement = '',\n    mode = '',\n    totalPassPoints = 0,\n    totalPoints = 0\n  } = {}) => ({\n    total, correct, taxon, binomial, answer, success, incorrect, question, fails, passes, answers, statement, mode, totalPassPoints, totalPoints\n  });\n\nexport const progressState = {\n    score: resetScore(),\n    resetScore\n}","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nconst initialState = { currentRound: 1, rounds: 0, isNextRound: true };\n\nexport const lesson = (state = initialState, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE':\n            return state;\n        \n        case types.UPDATE_LESSON: {\n            return { ...state, ...action.data };\n        }\n\n        case types.NEXT_LAYOUT: {\n            return { ...state, layoutName: action.data.name };\n        }\n\n        case types.NEXT_ITEM: {\n\n            let layoutCounter, isNextRound, isLevelComplete, isLessonComplete = false;;\n\n            layoutCounter = state.layoutCounter ? state.layoutCounter + 1 : 1; \n            \n            layoutCounter = layoutCounter > state.layoutCount ? state.layoutCount : layoutCounter;\n            isNextRound = layoutCounter === state.layoutCount;\n            \n            if(state.layoutName && state.layoutName === 'summary') {\n                isNextRound = true;\n            }\n            isLevelComplete = state.rounds === 0 ? false : state.currentRound === state.rounds;\n    \n            if(state.level && state.level.id && state.levels) {\n                isLessonComplete = isLevelComplete && (state.levels[state.levels.length -1].id === state.level.id);\n            }\n\n            return { ...state, layoutCounter, isNextRound, isLevelComplete, isLessonComplete };\n        }\n\n        case types.NEXT_ROUND: {\n\n            let currentRound = action.data.lesson.currentRound;\n\n            let isLessonComplete = state.rounds === 0 ? false : currentRound === state.rounds;\n\n            let layoutCounter = state.layoutCounter;\n\n            let level = state.level;\n\n            return { ...state, currentRound, layoutCounter, level, isLessonComplete };\n        }\n\n        case types.NEXT_LESSON: {\n\n            let isNextRound = !!state.layoutCount ? state.layoutCounter === state.layoutCount : false;\n            let layoutCounter = 0;\n            let layoutCount = action.data.lesson.layoutCount;\n            \n            return { ...state, ...action.data.lesson, isNextRound, layoutCounter, layoutCount };\n        }\n\n        case types.NEXT_LEVEL: {\n         \n            return { ...state, currentRound: 1 };\n        }\n\n        case types.UPDATE_COLLECTION: {\n\n            if(action.data.config.mode === 'learn-again') {\n                const isNextRound = true;\n                const isLevelComplete = true;\n                return { ...state, currentRound: 1, isNextRound, isLevelComplete };\n\n            } else {\n                return state;\n            }\n        }\n\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.lesson, isNextRound: true };\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const lessons = (state = [], action) => {\n\n    switch(action.type) {\n        case types.SAVE_LESSON:\n            const savedLessonNames = state.map(lesson => lesson.name);\n            if(R.contains(action.data.collection.name, savedLessonNames)) {\n                const lessons = state.filter(lesson => lesson.name !== action.data.collection.name);\n                      lessons.push(action.data);\n                return lessons;\n            } else {\n                return [ ...state, action.data ];\n            }\n            case types.REMOVE_LESSON: {\n                return state.filter(lesson => lesson.name !== action.data.name); \n            }\n        default:\n            return state;\n    }\n};","import { types } from 'redux/actions/action-types';\n\n\nconst cleanAndReturnIncomingState = state => {\n    const quickFire = state;\n    if(quickFire.onClickFiltersLinkListeners) delete quickFire.onClickFiltersLinkListeners;\n    if(quickFire.onClickGlossaryLinkListeners) delete quickFire.onClickGlossaryLinkListeners;\n    return quickFire;\n};\n\nexport const quickFire = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        case types.UPDATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        default:\n            return state;\n    }\n}\n\nexport const glossary = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_GLOSSARY:\n            return action.data;\n        default:\n            return state;\n    }\n}","import { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport thunk from 'redux-thunk';\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web and AsyncStorage for react-native\n\nimport { logger } from 'redux/middleware/logger';\nimport { timeoutScheduler } from 'redux/middleware/timeoutScheduler';\n\nimport { config, enums, user, userAction } from 'redux/reducers/config-reducer';\nimport { collections, collection, bonusLayout } from 'redux/reducers/species-reducers';\nimport { counter, score, history, videoPlayer } from 'redux/reducers/progress-reducers';\nimport { lessonPlans, lessonPlan, layout } from 'redux/reducers/layout-reducers';\nimport { lesson, lessons } from 'redux/reducers/lesson-reducers';\nimport { quickFire, glossary } from 'redux/reducers/quick-fire-reducers';\n\nimport hardSet from 'redux-persist/lib/stateReconciler/hardSet'\n\nconst reducer = combineReducers({\n    counter,\n    lessonPlans,\n    lessonPlan,\n    layout,\n    config,\n    lessons,\n    lesson,\n    collection,\n    score,\n    collections,\n    history, \n    videoPlayer,\n    enums,\n    bonusLayout,\n    user,\n    quickFire,\n    glossary,\n    userAction\n});\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n//   stateReconciler: hardSet\n//   blacklist: ['config']\n}\n\nconst persistedReducer = persistReducer(persistConfig, reducer)\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const store = createStore(\n    persistedReducer, \n    composeEnhancers(applyMiddleware(\n        logger,\n        thunk\n    ))\n);\n\nexport const persistor = persistStore(store);\n\nexport const rootReducer = (state, action) => {\n\n    // For this use case we can use purge instead:\n\n    // https://stackoverflow.com/questions/35622588/how-to-reset-the-state-of-a-redux-store/35641992#35641992\n\n    if(action.type === 'INITIALISE_STATE') {\n        state = undefined;\n    }\n\n    return reducer(state, action);\n  }","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\n\nexport const counter = (state = null, action) => {\n    switch(action.type) {\n        case 'persist/REHYDRATE':\n            return action.payload ? { ...action.payload.counter, isLessonRehydrated: true, isLessonPaused: true } : state;\n        case types.RESET_COLLECTION:\n            return { ...state, isLessonSelected: false, isLessonPaused: false };\n        case types.UPDATE_COLLECTION:    \n            return { ...state, isLessonRehydrated: false };\n        case types.NEXT_ROUND:\n            return { index: 0 };\n        case types.NEXT_LESSON:\n            return { index: 0 };\n        case types.NEXT_LEVEL:\n            return { ...state, index: action.data.index };\n        case types.STOP_START_LESSON:\n            const index = (state && state.index) || 0;\n            return { ...action.data, index };\n        case types.UPDATE_SCORE:\n        case types.END_REVISION:\n            let i = (state.index + 1) <= action.data.layoutCount ? (state.index + 1) : state.index;\n            return { index: i };\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.counter, isLessonPaused: !!action.data.lesson.counter.isCustomLessonPausedOverride };\n        default:\n            return state;\n    }\n};\n\nexport const score = (state = progressState.score, action) => {\n    switch(action.type) {\n        case types.UPDATE_SCORE: {\n        \n            const score = { ...state, ...action.data, statement: action.data.statement || '' };\n\n            score.totalPoints = score.totalPoints || 0;\n            score.totalPassPoints = score.totalPassPoints || 0;\n            score.totalFailPoints = score.totalFailPoints || 0;\n\n            score.totalPoints += score.points ? score.points : 0;\n\n            score.total++;\n            if(score.success) {\n                score.totalPassPoints += score.points ? score.points : 0;\n                score.correct++;\n                score.passes.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question, \n                    statement: score.statement || '',\n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            else {\n                score.incorrect++;\n                score.totalFailPoints += score.points ? score.points : 0;\n                score.fails.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question,\n                    statement: score.statement || '', \n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            score.questionTotal = score.passes.length + score.fails.length;\n            \n            score.passesTotals = R.clone(state.passesTotals) || {};\n            score.failsTotals = R.clone(state.failsTotals) || {};\n\n            if(score.success) {\n                score.passesTotals[score.itemId] = score.passesTotals[score.itemId] ? score.passesTotals[score.itemId] + 1 : 1;\n                if(!score.failsTotals[score.itemId]) {\n                    score.failsTotals[score.itemId] = 0;\n                }\n            } else {\n                score.failsTotals[score.itemId] = score.failsTotals[score.itemId] ? score.failsTotals[score.itemId] + 1 : 1;\n                if(!score.passesTotals[score.itemId]) {\n                    score.passesTotals[score.itemId] = 0;\n                }\n            }\n            \n            return { ...state, ...score};\n        }\n        case types.SELECT_COLLECTION:\n            return R.clone(progressState.score);\n        case types.NEXT_ROUND:\n        case types.NEXT_LEVEL:\n        case types.UPDATE_COLLECTION:\n            return { ...progressState.score, ...{ fails: [], passes: []} };\n        case types.UPDATE_TRAIT_SCORE: {\n            const bonusScores = state.bonusScores || [];\n            bonusScores.push(\n                {\n                    id: action.data.itemId,\n                    name: action.data.binomial,\n                    success: action.data.success,\n                    guid: action.data.guid\n                }\n            );\n            return { ...state, bonusScores: bonusScores };\n        }\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.score;\n        case types.NEXT_LESSON: {\n            return { ...state, mode: 'learn'};\n            }\n        default:\n            return state;\n    }       \n};\n\nexport const history = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_HISTORY: {\n          \n            const history = { scores: [] };\n\n            history.scores = state === null \n                ? [action.data] \n                : state.scores[state.scores.length-1].question === action.data.question\n                    ? [...state.scores]\n                    : [...state.scores, action.data];\n\n            let historyCorrect = 0;\n            let historyTotal = 0;\n        \n            history.scores.forEach(score => {\n                historyCorrect += score.correct;\n                historyTotal += score.total;\n            });\n\n            history.correct = historyCorrect;\n            history.total = historyTotal;\n            history.incorrect = history.total - history.correct;\n\n            return history;\n        }\n        case types.SELECT_COLLECTION:\n            return null;   \n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.history;\n        default:\n            return state;\n    }\n};\n\nexport const videoPlayer = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_VIDEO_PLAYER:\n            return action.data;\n        default:\n            return state;\n    }\n};","import { types } from 'redux/actions/action-types';\n\nexport const lessonPlans = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLANS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const lessonPlan = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLAN:\n            return action.data || state;\n        case types.NEXT_LESSON:\n            return action.data.lessonPlan || state;\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.lessonPlan || state;\n        default:\n            return state;\n    }\n};\n\nexport const layout = (state = null, action) => { \n    switch(action.type) {\n        case types.NEXT_LAYOUT:\n            if(state) {\n                if(action.data.screens.length > 1) { // sometimes BUG here\n                    const prevItemIndex = state.screens[0].name === action.data.screens[0].name ? state.itemIndex : null;                \n                    return { ...action.data, prevItemIndex }\n                } else {\n                    return action.data;\n                }\n            } else {\n                return action.data;\n            }\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.layout || state;\n        default: \n            return state;\n    }\n};\n","export const logger = store => next => action => {\n    \n    // console.log('NEXT: ', next);\n    // console.group(action.type)\n    // console.info('dispatching', action)\n    let result = next(action)\n    // console.log('next state', store.getState())\n    // console.groupEnd(action.type)\n\n    // console.clear();\n    // console.log(`^^^ ${action.type}`);\n  \n    return result;\n};","export const DOM = {\n  \n    leftGrid : document.getElementsByClassName('js-left-grid')[0],\n    leftHeader : document.getElementsByClassName('js-left-header')[0],\n    leftBody : document.getElementsByClassName('js-left-body')[0],\n    leftFooter : document.getElementsByClassName('js-left-footer')[0],\n\n    leftHeaderTxt : document.getElementsByClassName('js-left-txt-header')[0],\n    specimenRptr : document.getElementsByClassName('js-rptr-specimen')[0],\n    \n    rightGrid : document.getElementsByClassName('js-right-grid')[0],\n    rightHeader : document.getElementsByClassName('js-right-header')[0],\n    rightHeaderTxt : document.getElementsByClassName('js-right-txt-header')[0],\n    rightHeaderScoreTxt : document.getElementsByClassName('js-right-txt-score')[0],\n    rightBody : document.getElementsByClassName('js-right-body')[0],\n    rightRptrSummary : document.getElementsByClassName('js-summary')[0],\n    rightBodyBottom : document.getElementsByClassName('js-right-body-bottom')[0],\n    rightFooter : document.getElementsByClassName('js-right-footer')[0]    \n};\n","const getRoundItems = (currentRound, moduleSize, items) => {\n\n    const start = (currentRound - 1) * moduleSize;\n    const end = start + moduleSize;\n    return items.slice(start, end);\n}\n\nexport const roundHandler = {\n    getRoundItems\n};","export const epithets = [\n    {\n        \"latin\": ['armeniaca'],\n        \"en\": ['from Armenia']\n    },\n    {\n        \"latin\": ['agastache'],\n        \"en\": ['many spikes']\n    },\n    {\n        \"latin\": [\"aster\"],\n        \"en\" : [\"star\"]\n    },\n    {\n        \"latin\" : [\"alba\"],\n        \"en\" : [\"white\"]\n    },\n    {\n        \"latin\" : [\"avium\"],\n        \"en\" : [\"bird\"]\n    },\n    {\n        \"latin\" : [\"nigrum\"],\n        \"en\" : [\"black\"]\n    },\n    {\n        \"latin\" : [\"ater\"],\n        \"en\" : [\"black\"]\n    },\n    {\n        \"latin\": [\"botanikos\"],\n        \"en\" : [\"plant\"]\n    },\n    {\n        \"latin\": [\"capitata\"],\n        \"en\" : [\"having a head\"]\n    },\n    {\n        \"latin\" : [\"chrysus\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\" : [\"erythro\"],\n        \"en\" : [\"red\"]\n    },\n    {\n        \"latin\" : [\"lactuca\"],\n        \"en\" : [\"milky\"]\n    },\n    {\n        \"latin\" : [\"sylvestris\"],\n        \"en\" : [\"woodland\"]\n    },\n    {\n        \"latin\" : [\"contorta\"],\n        \"en\" : [\"twisted\"]\n    },\n    {\n        \"latin\" : [\"globosa\"],\n        \"en\" : [\"rounded\"]\n    },\n    {\n        \"latin\" : [\"maculata\"],\n        \"en\" : [\"spotted\"]\n    },\n    {\n        \"latin\" : [\"pendula\"],\n        \"en\" : [\"weeping\"]\n    },\n    {\n        \"latin\": [\"pratense\"],\n        \"en\" : [\"of meadows\"]\n    },\n    {\n        \"latin\" : [\"prostrata\"],\n        \"en\" : [\"creeping\"]\n    },\n    {\n        \"latin\" : [\"phyllos\"],\n        \"en\" : [\"leaf\", \"foliage\"]\n    },\n    {\n        \"latin\" : [\"platy\"],\n        \"en\" : [\"broad\", \"flat\"]\n    },\n    {\n        \"latin\" : [\"angustus\"],\n        \"en\" : [\"narrow\"]\n    },\n    {\n        \"latin\" : [\"arena\"],\n        \"en\" : [\"sand\"]\n    },\n    {\n        \"latin\" : [\"argentum\"],\n        \"en\" : [\"silver\"]\n    },\n    {\n        \"latin\" : [\"arvensis\"],\n        \"en\" : [\"in the field\"]\n    },\n    {\n        \"latin\" : [\"brachy-\"],\n        \"en\" : [\"short\"]\n    },\n    {\n        \"latin\" : [\"brachyphyllus\"],\n        \"en\" : [\"short leaved\"]\n    },\n    {\n        \"latin\" : [\"caprae\"],\n        \"en\" : [\"goat\"]\n    },\n    {\n        \"latin\" : [\"chroma\"],\n        \"en\" : [\"colour\"]\n    },\n    {\n        \"latin\" : [\"cilium\"],\n        \"en\" : [\"eyelash\"]\n    },\n    {\n        \"latin\" : [\"coccineus\"],\n        \"en\" : [\"scarlet\"]\n    },\n    {\n        \"latin\" : [\"cordifolius\"],\n        \"en\" : [\"heart-shaped\"]\n    },\n    {\n        \"latin\" : [\"coronatus\"],\n        \"en\" : [\"crowned\"]\n    },\n    {\n        \"latin\" : [\"crassus\"],\n        \"en\" : [\"thick\", \"fat\"]\n    },\n    {\n        \"latin\" : [\"crocos\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\": [\"cruciferae\"],\n        \"en\" : [\"cross-bearing\"]\n    },\n    {\n        \"latin\" : [\"derma\"],\n        \"en\" : [\"skin\"]\n    },\n    {\n        \"latin\" : [\"digitalis\"],\n        \"en\" : [\"having fingers\"]\n    },\n    {\n        \"latin\" : [\"domus\"],\n        \"en\" : [\"home\"]\n    },\n    {\n        \"latin\" : [\"domestica\"],\n        \"en\" : [\"which lives in the house\"]\n    },\n    {\n        \"latin\" : [\"echinatus\"],\n        \"en\" : [\"prickly\", \"spiny\"]\n    },\n    {\n        \"latin\" : [\"edulis\"],\n        \"en\" : [\"edible\"]\n    },\n    {\n        \"latin\" : [\"elatior\"],\n        \"en\" : [\"taller\"]\n    },\n    {\n        \"latin\" : [\"electro-\"],\n        \"en\" : [\"amber\"]\n    },\n    {\n        \"latin\" : [\"emarginatus\"],\n        \"en\" : [\"having no edges\"]\n    },\n    {\n        \"latin\" : [\"enanti-\"],\n        \"en\" : [\"opposite\", \"against\"]\n    },\n    {\n        \"latin\": [\"endemos\"],\n        \"en\" : [\"native\"]\n    },\n    {\n        \"latin\" : [\"ensatus\"],\n        \"en\" : [\"sword-like\"]\n    },\n    {\n        \"latin\" : [\"erectus\"],\n        \"en\" : [\"upright\"]\n    },\n    {\n        \"latin\" : [\"erica\"],\n        \"en\" : [\"heath\", \"broom\"]\n    },\n    {\n        \"latin\" : [\"erio-\"],\n        \"en\" : [\"wool\", \"woolly\"]\n    },\n    {\n        \"latin\" : [\"erosus\"],\n        \"en\" : [\"indented\", \"jagged\", \"serrated\"]\n    },\n    {\n        \"latin\" : [\"fallax\"],\n        \"en\" : [\"false\"]\n    },\n    {\n        \"latin\" : [\"foeniculum\"],\n        \"en\" : [\"hay\"]\n    },\n    {\n        \"latin\" : [\"filium\"],\n        \"en\" : [\"thread\"]\n    },\n    {\n        \"latin\" : [\"flavus\"],\n        \"en\" : [\"golden yellow\", \"light yellow\"],\n    },\n    {\n        \"latin\" : [\"floridus\"],\n        \"en\" : [\"flowery\"]\n    },\n    {\n        \"latin\" : [\"furcatus\"],\n        \"en\" : [\"forked\"]\n    },\n    {\n        \"latin\" : [\"fuscus\"],\n        \"en\" : [\"dark\", \"dark brown\"]\n    },\n    {\n        \"latin\" : [\"gala\"],\n        \"en\" : [\"milk\"]\n    },\n    {\n        \"latin\" : [\"galum\"],\n        \"en\" : [\"milk\"]\n    },\n    {\n        \"latin\" : [\"glaber\"],\n        \"en\" : [\"smooth; hairless\"]\n    },\n    {\n        \"latin\" : [\"glaucus\"],\n        \"en\" : [\"blue-green\", \"blue-gray\"]\n    },\n    {\n        \"latin\" : [\"glycy-\"],\n        \"en\" : [\"sweet\"]\n    },\n    {\n        \"latin\" : [\"perennis\"],\n        \"en\" : [\"perennial, lasting, yearlong\"]\n    },\n    {\n        \"latin\" : [\"gracile\"],\n        \"en\" : [\"slender\", \"graceful\"]\n    },\n    {\n        \"latin\" : [\"gravis\"],\n        \"en\" : [\"heavy\"]\n    },\n    {\n        \"latin\" : [\"hali-\"],\n        \"en\" : [\"of the sea\", \"salt\"]\n    },\n    {\n        \"latin\" : [\"hetero-\"],\n        \"en\" : [\"diversely or different\"]\n    },\n    {\n        \"latin\" : [\"hirsutus\"],\n        \"en\" : [\"hairy\"]\n    },\n    {\n        \"latin\" : [\"hirsuta\"],\n        \"en\" : [\"hairy\"]\n    },\n    {\n        \"latin\" : [\"hortensis\"],\n        \"en\" : [\"from the garden\"]\n    },\n    {\n        \"latin\" : [\"hydro-\"],\n        \"en\" : [\"water\"]\n    },\n    {\n        \"latin\": [\"hymen\"],\n        \"en\": [\"membrane\"]\n    },\n    {\n        \"latin\" : [\"hypo-\", \"hyp-\"],\n        \"en\" : [\"under\", \"beneath\"]\n    },\n    {\n        \"latin\" : [\"hyper-\"],\n        \"en\" : [\"over\", \"above\"]\n    },\n    {\n        \"latin\" : [\"laevis\"],\n        \"en\" : [\"smooth\"]\n    },\n    {\n        \"latin\" : [\"lateralis\"],\n        \"en\" : [\"side\"]\n    },\n    {\n        \"latin\" : [\"lepis\", \"lepido-\"],\n        \"en\" : [\"scale\", \"rind\", \"husk\", \"flake\"]\n    },\n    {\n        \"latin\" : [\"lepto-\", \"lepti-\"],\n        \"en\" : [\"light\"]\n    },\n    {\n        \"latin\" : [\"mel\"],\n        \"en\" : [\"honey\"]\n    },\n    {\n        \"latin\" : [\"muralis\"],\n        \"en\" : [\"growing on the wall\"]\n    },\n    {\n        \"latin\" : [\"nobilis\"],\n        \"en\" : [\"noble\"]\n    },\n    {\n        \"latin\" : [\"nix\"],\n        \"en\" : [\"snow\"]\n    },\n    {\n        \"latin\" : [\"nucifer\"],\n        \"en\" : [\"bearing nuts\"]\n    },\n    {\n        \"latin\" : [\"officinale\"],\n        \"en\" : [\"of or belonging to the officina (storeroom for medicines)\"],\n        \"wiki\": \"https://en.wikipedia.org/wiki/Officinalis\"\n    },\n    {\n        \"latin\" : [\"officinalis\"],\n        \"en\" : [\"of or belonging to the officina (storeroom for medicines)\"],\n        \"wiki\": \"https://en.wikipedia.org/wiki/Officinalis\"\n    },\n    {\n        \"latin\": [\"oleo\"],\n        \"en\" : [\"oily\"]\n    },\n    {\n        \"latin\" : [\"palustris\"],\n        \"en\" : [\"of the marsh\"]\n    },\n    {\n        \"latin\" : [\"parviflorus\"],\n        \"en\" : [\"small-flowered\"]\n    },\n    {\n        \"latin\" : [\"parvifolius\"],\n        \"en\" : [\"small-leaved\"]\n    },\n    {\n        \"latin\" : [\"pelagicus\"],\n        \"en\" : [\"of the open sea\"]\n    },\n    {\n        \"latin\": [\"persica\"],\n        \"en\" : [\"from Persia\"],\n        \"examples\": [\"Prunus persica\"]\n    },\n    {\n        \"latin\" : [\"petro-\"],\n        \"en\" : [\"rock\", \"stone\"]\n    },\n    {\n        \"latin\" : [\"phyto-\"],\n        \"en\" : [\"plant\"]\n    },\n    {\n        \"latin\" : [\"pomum\"],\n        \"en\" : [\"fruit\"]\n    },\n    {\n        \"latin\" : [\"pratum\"],\n        \"en\" : [\"meadow\"]\n    },\n    {\n        \"latin\" : [\"proto-\"],\n        \"en\" : [\"first\"]\n    },\n    {\n        \"latin\": [\"pteron\"],\n        \"en\" : [\"feather\", \"wing\"]\n    },\n    {\n        \"latin\" : [\"radix\"],\n        \"en\" : [\"root or radish\"]\n    },\n    {\n        \"latin\" : [\"ramus\"],\n        \"en\" : [\"branch\"]\n    },\n    {\n        \"latin\": [\"rapum\"],\n        \"en\" : [\"turnip\"]\n    },\n    {\n        \"latin\" : [\"repandus\"],\n        \"en\" : [\"curved upwards\", \"turned up\"]\n    },\n    {\n        \"latin\" : [\"rhiza\"],\n        \"en\" : [\"root\"]\n    },\n    {\n        \"latin\" : [\"sativus\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"sativum\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"sativa\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"setosus\"],\n        \"en\" : [\"bristly or shaggy\"]\n    },\n    {\n        \"latin\" : [\"silvestris\"],\n        \"en\" : [\"from woodland or forest; wild\"]\n    },\n    {\n        \"latin\" : [\"sylvestris\"],\n        \"en\" : [\"from woodland or forest; wild\"]\n    },\n    {\n        \"latin\" : [\"speciosus\"],\n        \"en\" : [\"showy\"]\n    },\n    {\n        \"latin\" : [\"sperma\"],\n        \"en\" : [\"seed\"]\n    },\n    {\n        \"latin\" : [\"striatus\"],\n        \"en\" : [\"striped\"]\n    },\n    {\n        \"latin\" : [\"strictus\"] ,\n        \"en\" : [\"straight\", \"narrow\", \"erect\"]\n    },\n    {\n        \"latin\" : [\"suber\"],\n        \"en\" : [\"cork\"]\n    },\n    {\n        \"latin\" : [\"sucus\"],\n        \"en\" : [\"juice\"]\n    },\n    {\n        \"latin\" : [\"sulcatus\"],\n        \"en\" : [\"furrowed\"]\n    },\n    {\n        \"latin\" : [\"tenuis\"],\n        \"en\" : [\"thin\", \"slender\", \"fine\"]\n    },\n    {\n        \"latin\" : [\"tinctorius\"],\n        \"en\" : [\"or dyeing\"]\n    },\n    {\n        \"latin\" : [\"tomentosus\"],\n        \"en\" : [\"furry\", \"hairy\"]\n    },\n    {\n        \"latin\" : [\"ulmus\"],\n        \"en\" : [\"elm\"]\n    },\n    {\n        \"latin\" : [\"vernus\"],\n        \"en\" : [\"spring\"]\n    },\n    {\n        \"latin\" : [\"vernalis\"],\n        \"en\" : [\"spring\"]\n    },\n    {\n        \"latin\" : [\"verus\"],\n        \"en\" : [\"true\", \"genuine\"]\n    },\n    {\n        \"latin\" : [\"villosus\"],\n        \"en\" : [\"hairy\", \"shaggy\"]\n    },\n    {\n        \"latin\" : [\"viridis\"],\n        \"en\" : [\"green\"]\n    },\n    {\n        \"latin\" : [\"vulgaris\"],\n        \"en\" : [\"common\"]\n    },\n    {\n        \"latin\" : [\"vulgare\"],\n        \"en\" : [\"common\"]\n    },\n    {\n        \"latin\" : [\"xanthos\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\" : [\"zygos\"],\n        \"en\" : [\"joined\"]\n    },\n    {\n        \"latin\" : [\"stipula\"],\n        \"en\" : [\"straw, stalk\"]\n    },\n    {\n        \"latin\" : [\"convolvulus\"],\n        \"en\" : [\"wound\"]\n    },\n    {\n        \"latin\" : [\"ranunculus\"],\n        \"en\" : [\"little frog\"]\n    },\n    {\n        \"latin\" : [\"esculenta\"],\n        \"en\" : [\"edible\"]\n    },\n    {\n        \"latin\" : [\"ascus\"],\n        \"en\" : [\"sack, wineskin\"]\n    },\n    {\n        \"latin\" : [\"sclero\"],\n        \"en\" : [\"hard\"]\n    },\n    {\n        \"latin\" : [\"derma\"],\n        \"en\" : [\"skin\"]\n    },\n    {\n        \"latin\" : [\"odora\"],\n        \"en\" : [\"perfumed\"]\n    },\n    {\n        \"latin\" : [\"kantharos\"],\n        \"en\" : [\"tankard\", \"cup\"]\n    },\n    {\n        \"latin\" : [\"pyriforme\"],\n        \"en\" : [\"pear-shaped\"]\n    },\n    {\n        \"latin\" : [\"Lycoperdon\"],\n        \"en\" : [\"wolf's fart\"]\n    },\n    {\n        \"latin\" : [\"Lycopersicon\"],\n        \"en\" : [\"wolf's peach\"]\n    },\n    {\n        \"latin\" : [\"Grifola\"],\n        \"en\" : [\"Something intricate or braided\"]\n    },\n    {\n        \"latin\" : [\"Frondosa\"],\n        \"en\" : [\"Full of leaves\"]\n    },\n    {\n        \"latin\" : [\"calvus\"],\n        \"en\" : [\"bald, without hair\"]\n    },\n    {\n        \"latin\" : [\"thallus\"],\n        \"en\" : [\"a green shoot or twig\"]\n    },\n    {\n        \"latin\" : [\"vasculum\"],\n        \"en\" : [\"duct\"]\n    },\n    {\n        \"latin\" : [\"xylem\"],\n        \"en\" : [\"wood\"]\n    },\n    {\n        \"latin\" : [\"phloios\"],\n        \"en\" : [\"bark\"]\n    },\n    {\n        \"latin\" : [\"parietina\"],\n        \"en\" : [\"on walls\"]\n    },\n    {\n        \"latin\" : [\"eutrophos\"],\n        \"en\" : [\"well nourished\"]\n    },\n    {\n        \"latin\" : [\"askos\"],\n        \"en\" : [\"sac, wineskin\"]\n    },\n    {\n        \"latin\" : [\"Suillus\"],\n        \"en\" : [\"of pigs\"]\n    },\n    {\n        \"latin\" : [\"sus\"],\n        \"en\" : [\"pig\"]\n    },\n    {\n        \"latin\" : [\"collinitus\"],\n        \"en\" : [\"smeared\", \"greased\"]\n    },\n    {\n        \"latin\" : [\"pyrrho\"],\n        \"en\" : [\"fire\"]\n    },\n    {\n        \"latin\" : [\"coris\"],\n        \"en\" : [\"bug\"]\n    },\n    {\n        \"latin\" : [\"boreal\"],\n        \"en\" : [\"(far) northern\"]\n    },\n    {\n        \"latin\" : [\"physcia\"],\n        \"en\" : [\"inflated, sausage-like\"]\n    },\n    {\n        \"latin\" : [\"apis\"],\n        \"en\" : [\"bee\"],\n        species: [ 'Apis mellifera' ]\n    },\n    {\n        \"latin\" : [\"mellifera\"],\n        \"en\" : [\"honey-bearing\"],\n        species: [ 'Apis mellifera' ]\n    },\n    {\n        \"latin\" : [\"instar\"],\n        \"en\" : [\"likeness, form\"]\n    },\n    {\n        \"latin\" : [\"skia\"],\n        \"en\" : [\"shadow\"]\n    },\n    {\n        \"latin\" : [\"oura\"],\n        \"en\" : [\"tail\"]\n    },\n    {\n        \"latin\" : [\"geo\"],\n        \"en\" : [\"earth\"]\n    },\n    {\n        \"latin\" : [\"metron\"],\n        \"en\" : [\"measure\"]\n    },\n    {\n        \"latin\" : [\"pente\"],\n        \"en\" : [\"five\"]\n    },\n    {\n        \"latin\" : [\"tomos\"],\n        \"en\" : [\"section\"]\n    },\n    {\n        \"latin\" : [\"praecox\"],\n        \"en\" : [\"before its time\"]\n    },\n    {\n        \"latin\" : [\"rudus\"],\n        \"en\" : [\"rubble\"]\n    },\n    {\n        \"latin\" : [\"phoinix\"],\n        \"en\" : [\"red\"]\n    },\n    {\n        \"latin\" : [\"ouros\"],\n        \"en\" : [\"tailed\"]\n    },\n    {\n        \"latin\" : [\"coluber\"],\n        \"en\" : [\"snake\"]\n    },\n    {\n        \"latin\" : [\"noctua\"],\n        \"en\" : [\"little owl\"]\n    },\n    {\n        \"latin\" : [\"epidermis\"],\n        \"en\" : [\"over-skin\"]\n    },\n    {\n        \"latin\" : [\"septem\"],\n        \"en\" : [\"seven\"],\n        species: [ 'Coccinella septempunctata' ]      \n    },\n    {\n        \"latin\" : [\"punctus\"],\n        \"en\" : [\"spot\"],\n        species: [ 'Coccinella septempunctata' ]      \n    },\n    {\n        \"latin\" : [\"tussis\"],\n        \"en\" : [\"cough\"],\n        species: [ 'Tussilago farfara' ]      \n    },\n    {\n        \"latin\" : [\"stoechas\"],\n        \"en\" : [\"in rows\"],\n        species: [ 'Lavandula stoechas' ]      \n    },\n    {\n        \"latin\" : [\"ros marinus\"],\n        \"en\" : [\"dew of the sea\"],\n        species: [ 'Rosmarinus officinalis' ]      \n    },\n    {\n        \"latin\" : [\"auriculata\"],\n        \"en\" : [\"with ears\"],\n        species: [ 'Plumbago auriculata' ]      \n    },\n    {\n        \"latin\" : [\"baccata\"],\n        \"en\" : [\"bearing red berries\"],\n        species: [ 'Taxus baccata' ]      \n    },\n    {\n        \"latin\" : [\"pleurotus\"],\n        \"en\" : [\"sideways\"],\n        species: [ 'Pleurotus ostreatus' ]      \n    },\n    {\n        \"latin\" : [\"sema\"],\n        \"en\" : [\"sign\"],\n        genus: [ 'Bombus' ]      \n    },\n];","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { epithets } from 'api/botanical-latin';\n\nconst getVernacularName = (item, config, useShortForm = false, namePart = 'vernacularName') => {\n    try {\n        let shortForm;\n        if(useShortForm) {\n            let englishShortForm = item.names.find(name => name.language === 'en' && name.shortForm);\n            englishShortForm = englishShortForm ? englishShortForm.shortForm : undefined;\n            let languageSortForm = item.names.find(name => name.language === config.language && name.shortForm);\n            languageSortForm = languageSortForm ? languageSortForm.shortForm : undefined;\n            shortForm = languageSortForm || englishShortForm;\n        }\n        if(shortForm) return shortForm;    \n        const englishNames = item.names.filter(name => name.language === 'en');\n        const english = englishNames.length > 0 ? englishNames[0][namePart] : 'Unknown';\n        const names = item.names.filter(name => name.language === config.language);\n        const name = names.length > 0 ? names[0][namePart] : english;\n        const capitalisedNames = name.split(' ');\n        let capitalisedName;\n        if(config.language === 'fr') {        \n            capitalisedName = utils.capitaliseFirst(capitalisedNames.join(' '));\n        } else {\n            capitalisedName = capitalisedNames.map(name => utils.capitaliseFirst(name)).join(' ');\n        }\n        return capitalisedName;\n    } catch(e) {\n        console.error('Failing getting vernacular name for: ', item, 'error: ', e.message);\n        return '';\n    }\n};\n\nconst getGenusName = binomial => {\n    return binomial.split(' ')[0];\n};\n\nconst getSpeciesName = binomial => {\n    return binomial.split(' ')[1];\n};\n\nconst latin = species => {\n    let epithet = epithets.find(e => {        \n        const match = e.latin.find(part => part.toUpperCase() === species.toUpperCase());\n        return match || '';\n    });\n    return epithet ? { ...epithet } : '';\n};\n\nconst getTaxonProp = (taxon, language, prop) => {\n\n    if(!taxon[prop]) return '';\n\n    const propValue = taxon[prop].find(p => p.language === language) ? taxon[prop].find(p => p.language === language) : taxon[prop].find(p => p.language === 'en');\n\n    return propValue || '';\n};\n\nconst getNestedTaxonProp = (taxon, language, prop1, prop2, index) => {\n\n    if(!taxon || !taxon[prop1]) return '';\n\n    const prop1Value = taxon[prop1].find(name => name.language === language) ? taxon[prop1].find(name => name.language === language) : taxon[prop1].find(name => name.language === 'en');\n\n    if(!prop1Value) return '';\n\n    const prop2Value = prop1Value[prop2];\n\n    if(!prop2Value) return '';\n\n    const output = index ? prop2Value[index] : prop2Value;\n\n    return output;\n}\n\nconst trimLatinName = name => {\n\n    let binomial = name;\n\n    if(name.indexOf('.') < 0) {\n        binomial = name.split(' ').map((n,i) => {\n            return i === 0 ? n.slice(0,1).trim() + '.' : n.trim()\n          }).join(' ')\n    }\n    \n    return binomial;\n};\n\nconst familyVernacularNames = (name, language, taxa) => {\n    if(name === '') return;\n    const taxon = taxa.find(taxon => taxon.name.toUpperCase() === name.toUpperCase());\n    if(!taxon) return;\n    return taxon.names.find(name => name.language === language).names;\n};\n\nconst getTrait = (item, name, formatter) => {\n    \n    if(!item.traits) return '';\n\n    let trait;\n\n    for (let [key, obj] of Object.entries(item.traits)) {\n        if(key === name) {\n            trait = obj.value;\n        }\n    }\n\n    if(!trait) return '';\n    if(!formatter) return trait;\n    return formatter(trait);\n}\n\nconst reducer = (acc, curr) => {\n    return acc + curr;\n}\n\nconst getActiveTrait = (item, options) => {\n    const traitValues = options.map(option => { \n        const traitName = option.name;\n        const formatter = option.formatter;\n        return getTrait(item, traitName, formatter);\n    });\n    return traitValues.reduce(reducer, '');\n}\n\nconst vernacularNamesForItems = (items, config) => {\n    let itemNames = items.map(item => item.names);\n    let vernaculars = itemNames.map(itemNames => itemNames.filter(name => \n        { return name.language === config.language || name.language === 'en' }));\n    if(vernaculars.length === 0) return [];\n    vernaculars = vernaculars.map(vernacular => {\n        let name = vernacular.find(v => v.language === config.language);\n        if(!name) name = vernacular.find(v => v.language === 'en');\n        if(!name) return '';\n        return utils.capitaliseFirst(name.vernacularName);\n    }).filter(v => v !== '');\n    return vernaculars;\n};\n\nconst getVernacularNames = (item, config) => {\n    try {\n        const names = item.names.filter(name => name.language === config.language).map(name => utils.capitaliseFirst(name.vernacularName));\n        return names;\n    } catch(e) {\n        console.error('Failing getting vernacular names for: ', item);\n        return '';\n    }\n};\n\nconst answersFromList = (list, toInclude, number) => {\n    const answers = take(number - 1, list.filter(item => item !== toInclude));\n    answers.push(toInclude);\n    return utils.shuffleArray(answers);\n};\n\nconst statsReducer = function(obj,elem){\n    obj[elem]=obj[elem] || 0;\n    obj[elem]++;\n    return obj;\n};\n\nconst getFamilyStats = items => {\n    return items.map(item => item.taxonomy.family).reduce(statsReducer,{});\n};\n\nconst getFileNameFromImageUrl = url => {\n\n    const pattern = /[\\w:]+\\.(jpe?g|png|gif|svg)/i;\n\n    var filename = pattern.exec(url)[0];\n\n    return filename;    \n};\n\nconst getRootTraitValue = (traitValue, drop = 'end') => {\n\n    const pattern = /[A-Z]+[^A-Z]*|[^A-Z]+/g;\n\n    const parts = traitValue.match(pattern);\n\n    const dropStarters = ['colour', 'shape'];\n\n    dropStarters.forEach(starter => {\n        if(traitValue.toLowerCase().indexOf(starter) > -1) {\n            drop = 'start';\n        }\n    });\n\n    let rootTraitValue = '';\n\n    if(drop === 'start') {\n        parts.forEach((part,index) => {\n            if(index === parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n        rootTraitValue = rootTraitValue.charAt(0).toLowerCase() + rootTraitValue.slice(1);\n    } else {\n        parts.forEach((part,index) => {\n            if(index < parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n    }\n    \n    return rootTraitValue;\n};\n\nconst getImageRightsUrl = url => {\n\n    const filename = getFileNameFromImageUrl(url);\n\n    const template = `https://en.wikipedia.org/w/api.php?action=query&prop=imageinfo&iiprop=extmetadata&titles=File:${filename}&format=json`;\n\n    return template;\n}\n\nexport const itemProperties = {\n    getVernacularName,\n    getGenusName,\n    getSpeciesName,\n    latin,\n    getTaxonProp,\n    getNestedTaxonProp,\n    trimLatinName,\n    familyVernacularNames,\n    getTrait,\n    getActiveTrait,\n    vernacularNamesForItems,\n    getVernacularNames,\n    answersFromList,\n    getFamilyStats,\n    getFileNameFromImageUrl,\n    getImageRightsUrl,\n    getRootTraitValue\n};","import{ isEmpty, compose, symmetricDifference, contains, take } from 'ramda';\n\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { utils } from 'utils/utils';\n\nconst getRandomTrait = (traits, traitsToIgnore) => {    \n\n    const allowedTraits = {};\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key.toLowerCase(), traitsToIgnore)) {\n            allowedTraits[key] = obj.unit ? [`${obj.value}${obj.unit}`] : obj.value;\n        }\n    }\n\n    let trait = utils.getRandomObjectProperty(allowedTraits);\n    return trait;\n};\n\nconst getTraitsPoolForUnits = trait => {\n    // create set of numeric answers based on the value\n\n    const traitsPool = [1,2,3,4,5,6,7,8,9];\n\n    if(trait.unit === 'MM'){\n        // months\n        // find distance between first and second and add answers with similar gap\n        // e.g. jan-feb produces aug-sep, nov-dec, etc.\n    }\n\n    return { traitsPool, help: 'Pick the best range'};\n};\n\nconst getTraitsPoolForRoles = trait => {    \n    enumKey = trait.role; // e.g. name of role, but role of predator; (and possibly need to apply logic as below)\n    const traitsPool = ['role1', 'role2', 'role3', 'role4', 'role5', 'role6', 'role7', 'role8', 'role9', 'role10'];\n    return { traitsPool, help: 'symbiosis'};\n};\n\nconst getTraitValues = (trait, traits) => {\n\n    let traitKeyParts = trait.key.split(' ');\n    let enumKey; // e.g map 'leaf variation' to leafVariation\n    \n    traitKeyParts.forEach((part, index) => {\n        if(index === 0) {\n            enumKey = part.toLowerCase();\n        } else {\n            enumKey += utils.capitaliseFirst(part);\n        }\n    });\n\n    const traitValues = traits[enumKey];\n\n    return traitValues;\n};\n\nconst getTraitsPool = (trait, traits) => {\n\n    let traitsPool = [];\n\n    let traitValues = getTraitValues(trait, traits);\n\n    if(!traitValues) {\n        traitValues = traits[itemProperties.getRootTraitValue(utils.toCamelCase(trait.key))];\n        if(traitValues) traitValues.help = trait.key;\n    }\n\n    if(traitValues) {        \n        for (let [key, obj] of Object.entries(traitValues)) {\n            if(!contains(key, [ 'type', 'name', 'help'])) {\n                if(key !== trait.key) {\n                    traitsPool.push(obj);\n                }\n            }\n        }\n    }\n\n    let help = traitValues \n            ? traitValues.help || traitValues.name\n            : trait.key;\n\n    return { traitsPool, help };\n};\n\nconst getSetOfTraitAnswers = (pool, trait) => {\n\n    let traitSet = trait.value;\n        traitSet = traitSet.map(t => t.trim());\n        traitSet = utils.shuffleArray(traitSet);\n\n    // take maximum of 2 values from the trait values array\n\n    let traitValues = take(2, traitSet);\n\n    let sets = [];\n  \n    if(traitValues.length === 1) {\n        \n        sets = [ ...take(5, pool.filter(value => value !== trait.value[0])), trait.value[0] ];\n\n    } else {\n\n        // create a 'set' of all possible unique 2-value combinations\n        \n        pool.forEach(a => {\n            pool.forEach( b => {\n                if(a !== b) {\n                    const exists = sets.filter(s => s === [a,b] || s === [b,a]).length > 0;\n                    if(!exists) { \n                        sets.push([a,b]);\n                    }\n                }\n            })\n        });\n\n        sets = take(6, utils.shuffleArray(sets));\n\n        // remove any combination that matches the trait value set (in either order) \n\n        sets = sets.map(set => {\n            if(set[0] !== traitSet[0] && set[1] !== traitSet[1] || set[0] !== traitSet[1] && set[1] !== traitSet[0]) {\n                return set;\n            }\n        }).filter(s => s);\n\n        sets = take(5, sets);\n        sets = [ ...sets, traitSet ];\n\n        if(sets.length === 0) {\n            sets = ['a', 'b', trait.value];\n        }\n        \n        sets = sets.map(set => set.join(', '));\n    }\n  \n    return utils.shuffleArray(sets);\n};\n\nconst getTraitByKey = (traits, traitKey) => {\n    return traits[Object.keys(traits).find(key => key === traitKey)];\n}\n\nconst getTraitValueByKey = (traits, traitKey) => {\n    const trait = getTraitByKey(traits, traitKey);\n    if(trait) return trait.value;\n}\n\nconst hasTraitPropeties = traits => {\n    for(var prop in traits) {\n        if (traits.hasOwnProperty(prop)) {\n            return true;\n        }\n    }\n};\n\nconst getLinkedTaxaTraits = traits => {\n    \n    const taxaTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(obj.type) {\n            taxaTraits.push({ name: key, value: obj.value, type: obj.type });\n        } else if(key === 'lookalikes') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'lookalike' });\n        } else if(key === 'symbionts') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'symbionts' });\n        }\n    }\n\n    return taxaTraits;\n};\n\nconst getTraitsToExclude = () => {\n    return [ \n        'symbionts', 'voice', 'pollination', 'name', \n        'units', 'song', 'uk rank',\n        'colour', 'bark colour', 'height',\n        'physiology', 'description',\n        'usage', 'habitat',\n        'symbiont'\n        //'characteristic'\n    ];\n};\n\nconst handleUnit = unit => {\n\n    unit = unit || '';\n\n    switch(unit) {\n        case 'DD':\n            return ' days';\n        case 'MM':\n            return '';\n        case 'YY':\n            return ' years';\n     default:\n        return unit;   \n    }    \n};\n\nconst convertTraitsToNameValuePairsArray = (traits, traitsToExclude, item) => {\n\n    if(!hasTraitPropeties(traits)) return {};\n    \n    const includedTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key, traitsToExclude)) {\n            if(key === 'lookalikes') {\n                obj.forEach(species => {\n                    includedTraits.push({\n                        name: key, \n                        value: [species.lookalike.name],\n                        description: species.description, lookalike: { name: species.lookalike.name, description: species.lookalike.description } \n                    }); \n                });\n            } else if(key === 'relationships') {\n                obj.forEach(species => {\n                    includedTraits.push({ \n                        name: key, value: [species.symbiont.name],\n                    }); \n                });\n            } else {\n                includedTraits.push({ name: key, value: obj.value, unit: handleUnit(obj.unit), type: obj.type || '' });\n            }\n        }\n    }\n    \n    return includedTraits;\n};\n\nconst getNMultiplesFromArray = (arra, arra_size) => {\n\n    if(arra.length === 0) return [];\n\n    var result_set = [], \n        result;\n    \n   \n    for(var x = 0; x < Math.pow(2, arra.length); x++) {\n        result = [];\n        var i = arra.length - 1; \n        do {\n            if((x & (1 << i)) !== 0) {\n                result.push(arra[i]);\n            }\n        } \n        \n        while(i--);\n\n        if(result.length >= arra_size) {\n            result_set.push(result);\n        }\n    }\n\n    return result_set.filter(set => set.length === arra_size);\n};\n\nconst doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n\nexport const traitsHandler = {\n    getRandomTrait,\n    getTraitsPoolForUnits,  \n    getTraitsPoolForRoles,\n    getTraitValues,\n    getTraitsPool,\n    getSetOfTraitAnswers,\n    getTraitByKey,\n    getTraitValueByKey,\n    getLinkedTaxaTraits,\n    getTraitsToExclude,\n    convertTraitsToNameValuePairsArray,\n    getNMultiplesFromArray,\n\n    doArraysHaveSameValues,\n    hasTraitPropeties,\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nexport const getTraitsForTests = (enums, item, alreadyTestedTraits = []) => {\n\n    if(item.traits === undefined || (Object.keys(item.traits).length === 0 && item.traits.constructor === Object)) return {};\n\n    const excludedTraits = [ ...traitsHandler.getTraitsToExclude(), ...alreadyTestedTraits, 'lookalikes', 'relationships' ].filter(et => et);\n\n    const trait = traitsHandler.getRandomTrait(item.traits, excludedTraits);\n\n    if((Object.keys(trait).length === 0 && trait.constructor === Object)) return {};\n \n    let { traitsPool, help } = \n        trait.unit \n            ? traitsHandler.getTraitsPoolForUnits(trait)\n            : trait.role\n                ? traitsHandler.getTraitsPoolForRoles(trait)\n                : traitsHandler.getTraitsPool(trait, enums);\n\n    const question = trait.unit\n                        ? trait.value.join('-')\n                        : trait.value.join(',');\n                           \n    trait.value = trait.value.map(t => utils.capitaliseFirst(t));\n\n    const answers = traitsHandler.getSetOfTraitAnswers(traitsPool, trait);        \n\n    help = help || trait.key;\n\n    const overrides = { question: 'Match the trait', help, trait };\n\n    return { question, answers, overrides, typedItemTraits: item.traits };\n};  ","import { store } from 'redux/store';\nimport { getTraitsForTests } from 'api/traits/traits-for-tests';\n\nexport const getTraitTests = itemsInThisRound => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        const { enums } = store.getState();\n\n        const { question, answers, overrides } = getTraitsForTests(enums, item);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getBirdsongTests = (itemsInThisRound, collection) => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n        \n        if(item.taxonomy.class && item.taxonomy.class.toLowerCase() !== 'aves') return [];\n        \n        const { question, answers, overrides } = getBirdsongTest(item, itemsInThisRound, collection);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n}\n\nconst getBirdsongTest = (item, itemsInThisRound, collection) => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return;\n\n    const name = 'song';\n    const birdsong = { name, ...item.traits[name] };\n    \n    // require other birds, which may not be in this collection…\n\n    let birds = take(3, collection.items.filter(bird => bird.name.toLowerCase() !== item.name.toLowerCase()));\n        birds.push(item);\n\n    const birdNames = utils.shuffleArray(birds.map(bird => bird.name));\n\n    const question = item.name;\n    const answers = birdNames;\n    const overrides = { question: 'Match the birdsong', vernacularName: 'Common name', binomial: 'Latin name', trait: birdsong };\n\n    return { question, answers, overrides };\n};","export const enums = {\n  name: {\n  DESCRIPTION: 'description',\n  CIRCUMFERENCE: 'circumference',\n  EXPOSURE: 'exposure',\n  CAP_SHAPE: 'cap shape',\n  CAP_COLOUR: 'cap colour',\n  CAP_DIAMETER: 'cap diameter',\n  CAP_WIDTH: 'cap width',\n  CAP_HEIGHT: 'cap height',\n  SHELF_WIDTH: 'shelf width',\n  SHELF_THICKNESS: 'shelf thickness',\n  ECO_TYPE: 'ecological type',\n  HOW_EDIBLE: 'how edible',\n  HYMENIUM_TYPE: 'hymenium type',\n  SPORE_PRINT_COLOUR: 'spore print colour',\n  STIPE_CHARACTER: 'stipe character',\n  STIPE_LENGTH: 'stipe length',\n  STIPE_WIDTH: 'stipe width',\n  STIPE_COLOUR: 'stipe colour',\n  GILL_ATTACHMENT: 'gill attachment',\n  FLESH: 'flesh',\n  STEM_CHARACTER: 'stem character',\n  GILL_COLOUR: 'gill colour',\n  TRUNK_COLOUR: 'trunk colour',\n  SUBSTRATE: 'substrate',\n  THALLUS_TYPE: 'thallus type',\n  RHIZINE_TYPE: 'rhizine type',\n  DISC_WIDTH: 'Width',\n  LOBE_WIDTH: 'Lobe width',\n  LOBE_LENGTH: 'Lobe length',\n  LOBE_DIAMETER: 'Lobe diameter',\n  ROLE: 'Role',\n  NATIVE: 'Native',\n  NATIVE_TO: 'Native to',\n  SYMBIOSIS: 'Symbiosis',\n  ASSOCIATE: 'associate',\n  SYMBIONTS: 'symbionts',\n  LOOKALIKES: 'look alikes',\n  ECOLOGY: 'ecology',\n  HABITAT: 'habitat',\n  TROPHIC_LEVEL: 'Trophic level',\n  ORGANISATION: 'Organisation',\n  SMELL: 'smell',\n  FRUIT_TYPE: 'Fruit type',\n  FRUIT_WIDTH: 'Fruit width',\n  FRUIT_HEIGHT: 'Fruit height',\n  FRUIT_DIAMETER: 'Fruit diameter',\n  FRUIT_LENGTH: 'Fruit length',\n  FRUIT_COLOUR: 'Fruit colour',\n  FRUIT_TEXTURE: 'Fruit texture',\n  BRANCH_TEXTURE: 'Branch texture',\n  FRUIT_SURFACE: 'Fruit surface',\n  SEED_DISPERSAL: 'Seed dispersal',\n  VITAMINS: 'vitamins',\n  STAMEN_COUNT: 'Stamen count',\n  STYLE_COUNT: 'Style count',\n  LEAFLET_COUNT: 'Leaflet count',\n  LOBE_COUNT: 'Lobe count',\n  LEAFLET_LENGTH: 'Leaflet length',\n  LEAFLET_WIDTH: 'Leaflet width',\n  GROUPING: 'grouping',\n  MEDICINAL_PROPERTIES: 'Medicinal properties',\n  COLOUR: 'Colour',\n  USAGE: 'Usage',\n  FORM: 'Form',\n  LIFE_SPAN: 'Life span',\n  GERMINATION: 'Germination',\n  ACTIVE: 'Active',\n  SUBSTRATE_ADHERANCE: 'Substrate adherance',\n  RANK: 'UK Rank',\n  SIZE: 'Size',\n  LENGTH: 'Length',\n  VOICE: 'Voice',\n  HEIGHT: 'Height',\n  WEIGHT: 'Weight',\n  REPRODUCTION: 'Reproduction',\n  ASEXUAL_REPRODUCTION: 'Asexual reproduction',\n  DISPLAY: 'Display',\n  BEHAVIOUR: 'behaviour',\n  CHARACTERISTIC: 'Characteristic',\n  COMMUNICATION: 'Communication',\n  SHELTER: 'Shelter',\n  DISEASE: 'Disease',\n  THREAT: 'Threat',\n  FOOD: 'Food',\n  SEXUAL_DIMORPHISM: 'Sexual dimorphism',\n  WING_SPAN: 'Wing span',\n  TREE_SHAPE: 'Tree shape',\n  CROWN_SHAPE: 'Crown shape',\n  LEAF_DIVISION: 'Leaf division',\n  LEAFLET_DIVISION: 'Leaflet division',\n  LEAF_BLADE: 'Leaf blade',\n  LEAF_VARIATION: 'Leaf variation',\n  LEAF_SHAPE: 'Leaf shape',\n  JUVENILE_LEAF_SHAPE: 'Juvenile leaf shape',\n  LEAF_MARGIN: 'Leaf margin',\n  LEAF_ARRANGEMENT: 'Leaf arrangement',\n  LEAF_ATTACHMENT: 'Leaf attachment',\n  LEAF_LENGTH: 'Leaf length',\n  AWN_LENGTH: 'Awn length',\n  JUVENILE_LEAF_LENGTH: 'Juvenile leaf length',\n  LEAF_WIDTH: 'Leaf width',\n  LEAF_COLOUR: 'Leaf colour',\n  LEAF_SURFACE: 'Leaf surface',\n  LEAF_ABOVE_SURFACE: 'Leaf above surface',\n  LEAF_BELOW_SURFACE: 'Leaf below surface',\n  LEAF_TEXTURE: 'Leaf texture',\n  JUVENILE_TEXTURE: 'Juvenile leaf texture',\n  LEAF_SHAPE: 'Leaf shape',\n  LEAFLET_SHAPE: 'Leaflet shape',\n  LEAF_BELOW_COLOUR: 'Leaf below colour',\n  LEAF_ABOVE_COLOUR: 'Leaf above colour',\n  LEAF_VENATION: 'Leaf venation',\n  LEAF_BUNDLE_COUNT: 'Leaf bundle count',\n  LEAF_FEATURES: 'Leaf features',\n  LEAF_FOLDING: 'Leaf folding',\n  BRANCH_ARRANGEMENT: 'Branch arrangement',\n  STALK_HEIGHT: 'Stalk height',\n  STEM_HEIGHT: 'Stem height',\n  SCAPE_HEIGHT: 'Scape height',\n  STEM_DIAMETER: 'Stem diameter',\n  TRUNK_DIAMETER: 'Trunk diameter',\n  BRACT_COLOUR: 'Bract colour',\n  BRACT_LENGTH: 'Bract length',\n  PETIOLE_LENGTH: 'Petiole length',\n  FLOWER_DIAMETER: 'Flower diameter',\n  FLOWER_LENGTH: 'Flower length',\n  FLOWER_COLOUR: 'Flower colour',\n  FLOWER_SHAPE: 'Flower shape',\n  PETAL_COUNT: 'Petal count',\n  LEAFLET_COUNT: 'Leaflet count',\n  PETAL_LENGTH: 'Petal length',\n  PETAL_WIDTH: 'Petal width',\n  PETAL_COLOUR: 'Petal colour',\n  SEPAL_COUNT: 'Sepal count',\n  INFLORESCENCE: 'Inflorescence',\n  FEMALE_CONE_LENGTH: 'Female cone length',\n  MALE_CONE_LENGTH: 'Male cone length',\n  CONE_LENGTH: 'Cone length',\n  FEMALE_CONE_WIDTH: 'Female cone width',\n  MALE_CONE_WIDTH: 'Male cone width',\n  BULB_WIDTH: 'Bulb width',\n  CONE_WIDTH: 'Cone width',\n  CONE_DIAMETER: 'Cone diameter',\n  CONE_COLOUR: 'Cone colour',\n  CONE_SHAPE: 'Cone shape',\n  MALE_CONE_COLOUR: 'Male cone colour',\n  FEMALE_CONE_COLOUR: 'Female cone colour',\n  CONE_SCALE_COUNT: 'Cone scale count',\n  BARK_TYPE: 'Bark type',\n  BARK_TEXTURE: 'Bark texture',\n  CAP_TEXTURE: 'Cap texture',\n  BARK_COLOUR: 'Bark colour',\n  ALLOCHORY: 'Allochory',\n  REPRODUCTIVE_CONTAINER: 'Reproductive container',\n  CATERPILLAR_FOOD: 'Caterpillar food',\n  CATERPILLAR_LENGTH: 'Caterpillar length',\n  CATERPILLAR_COLOUR: 'Caterpillar colour',\n  HIBERNATING_STAGE: 'Hibernating stage',\n  PHYSIOLOGY: 'Physiology',\n  MATING: 'Mating season',\n  MATING_SYSTEM: 'mating system',\n  PREGNANCY: 'Pregnancy',\n  LITTER_SIZE: 'Litter size',\n  JUVENILE: 'Juvenile',\n  GESTATION: 'Gestation',\n  WEANING: 'Weaning',\n  LACTATION: 'Lactation',\n  SENSORY_ACUITY: 'Sensory acuity',\n  CRYPSIS: 'Crypsis',\n  CACHE_SIZE: 'Number of caches',\n  COLLECTIVE: 'Collective',\n  FEMALE: 'Female',\n  MALE: 'Male',\n  TAIL_LENGTH: 'Tail length',\n  MAX_SPEED: 'Maximum speed',\n  DIET: 'Diet',\n  ALTRICIAL: 'Altricial',\n  MOULTING: 'Moulting',\n  MATURITY: 'Maturity',\n  FUNGUS_MARGIN_TYPE: 'Fungus margin type',\n  SOIL_TYPE: 'Soil type',\n  PH: 'pH',\n  PH_VALUE: 'pH value',\n  LICEN_CUP_COLOUR: 'Licen cup colour',\n  RIM: 'Rim',\n  CENTRE: 'Centre',\n  POLLINATION: 'Pollination',\n  PROPAGATION: 'Propagation',\n  CLIMATE: 'Climate',\n  SONG: 'Song',\n  DIAMETER: 'diameter',\n  NUT_TYPE: 'nut type',\n  TREE_ECOLOGY: 'Tree ecology',\n  KEY_FEATURE: 'Key feature', \n  GILL_ATTACHMENT : 'gill attachment',\n  MUSHROOM_GROUP : 'Mushroom group',\n  QUEEN_LENGTH: 'Queen length',\n  QUEEN_WINGSPAN: 'Queen wingspan',\n  QUEEN_WEIGHT: 'Queen weight',\n  WORKER_LENGTH: 'Worker length',\n  WORKER_WINGSPAN: 'Worker wingspan',\n  WORKER_WEIGHT: 'Worker weight',\n  MALE_LENGTH: 'Male length',\n  MALE_WINGSPAN: 'Male wingspan',\n  MALE_WEIGHT: 'Male weight',\n  COLONY_SIZE: 'colony size',\n  TONGUE_LENGTH: 'Tongue length',\n  INFRUCTESCENCE_LENGTH: 'Infructescence length',\n  INFRUCTESCENCE_WIDTH: 'Infructescence width',\n  UMBEL_DIAMETER: 'Umbel diameter',\n  WIDTH: 'Width',\n  BREADTH: 'Breadth',\n  UMBEL_TYPE: 'Umbel type',\n  },\n  howEdible: {\n  help: 'How edible is this species?',\n  CHOICE: 'Choice',\n  EDIBLE: 'Edible',\n  INEDIBLE: 'Inedible',\n  POISONOUS: 'Poisonous',\n  DEADLY: 'Deadly',\n  TOXIC: 'Toxic',\n  type: 'howEdible',\n  name: 'how edible'\n  },\n  habitat: {\n  help: 'What is the habitat of this species?',\n  WOOD: 'Wood',\n  WOODLAND: 'Woodland',\n  WOODLAND_LITTER: 'Woodland litter',\n  GRASSLAND: 'Grassland',\n  SOIL: 'Soil',\n  VEGETATION: 'Vegetation',\n  DUNG: 'Dung',\n  DUNES: 'Dunes',\n  WIDESPREAD: 'Widespread',\n  DEAD_WOOD: 'Dead wood',\n  WASTELAND: 'Wasteland',\n  MEADOW: 'Meadow',\n  FIELDS: 'Fields',\n  MOSS: 'Moss',\n  PASTURE: 'Pasture',\n  BARK: 'Bark',\n  SHOOTS: 'Shoots',\n  COMMONS: 'Common',\n  HEATH: 'Heath',\n  ORCHARDS: 'Orchards',\n  HEDGEROWS: 'Hedgerows',\n  LAWNS: 'Lawns',\n  RINGS: 'Rings',\n  DAMP: 'Damp',\n  TREE_BASE: 'Tree base',\n  FOREST_EDGE: 'Forest edge',\n  PARKS: 'Parks',\n  TRUNKS: 'Trunks',\n  STUMPS: 'Stumps',\n  ROCKS: 'Rocks',\n  FENCES: 'Fences',\n  TREES: 'Trees',\n  SHRUBS: 'Shrubs',\n  SHRUBLAND: 'Shrubland',\n  MARSHLAND: 'Marshland',\n  EXPOSED_WOOD: 'Exposed wood',\n  BRANCHES: 'Branches',\n  HILLS: 'Hills',\n  URBAN: 'Urban',\n  VALLEYS: 'Valleys',\n  MAQUIS: 'Maquis',\n  SAVANNA: 'Savanna',\n  FOREST_STEPPE: 'Forest steppe',\n  MEADOW_STEPPE: 'meadow steppe',\n  BOREAL: 'Boreal',\n  SCRUB: 'Scrub',\n  WALLS: 'Walls',\n  MOORLAND: 'Moorland',\n  COAST: 'Coast',\n  BRUSH: 'Brush',\n  WATER: 'Water',\n  SNOW: 'Snow',\n  NO_SNOW: 'No snow',\n  CONIFERS: 'conifers',\n  BROAD_LEAF: 'broad-leaf',\n  PINE: 'pine',\n  BEECH: 'beech',\n  OAK: 'oak',\n  DITCH: 'Ditch',\n  WET_MEADOW: 'Wet meadow',\n  LAKESIDE: 'Lakeside',\n  RIPERIAN: 'Riperian',\n  WETLANDS: 'Wetlands'\n  },\n  ecologicalType: {\n  help: 'What is the ecological type of this mushroom?',\n  SAPROTROPHIC: 'Saprotrophic',\n  PARASITIC: 'Parasitic',\n  MYCORRHIZAL: 'Mycorrhizal',\n  PLANT_PATHOGEN: 'Plant pathogen',  \n  },\n  capShape: {\n  help: 'How would you describe the pileus?',\n  \n  CAMPANULATE: 'Campanulate',\n  CONICAL: 'Conical',\n  CONVEX: 'Convex',\n  DEPRESSED: 'Depressed',\n  FLAT: 'Flat',\n  INFUNDIBULIFORM: 'Infundibuliform',\n  OFFSET: 'Offset',\n  OVATE: 'Ovate',\n  UMBILLICATE: 'Umbillicate',\n  UMBONATE: 'Umbonate',\n  \n  POTATO_SHAPED: 'Potato shaped',\n  NA: 'N/A',\n  SPHERICAL: 'Spherical',\n  PEAR_SHAPED: 'Pear shaped',\n  BRAIN_LIKE: 'Brain-like',\n  HONEYCOMB: 'Honeycomb',\n  HEMI_SPHERICAL: 'Hemispherical',\n  type: 'capShape',\n  name: 'cap shape'\n  },\n  treeEcology: {\n  OAK: 'Oak',\n  BEECH: 'Beech',\n  BIRCH: 'Birch',\n  DECIDUOUS: 'Deciduous',\n  SOFTWOOD: 'Softwood',\n  HARDWOOD: 'Hardwood',\n  MIXED_WOODLAND: 'Mixed woodland',\n  CONIFEROUS: 'Coniferous',\n  PINE: 'Pine',\n  ELM: 'Elm',\n  ASH: 'Ash',\n  SYCAMORE: 'Sycamore',\n  ASPEN: 'Aspen',\n  ELDER: 'Elder',\n  CHESTNUT: 'Chestnut',\n  HARDWOODS: 'Hardwoods',\n  PRUNUS: 'Prunus',\n  PYRUS: 'Pyrus',\n  SALIX: 'Salix',\n  ROBINIA: 'Robinia',\n  CERATONIA: 'Ceratonia',\n  EUCALYPTUS: 'Eucalyptus',\n  BROAD_LEAF: 'Broad-leaf',\n  SWEET_CHESTNUT: 'Sweet chestnut',\n  POPLAR: 'Poplar',\n  CORK: 'Cork',\n  FIR: 'Fir',\n  SPRUCE: 'Spruce',\n  PLANE: 'Plane',\n  WILLOW: 'Willow',\n  MAPLE: 'Maple',\n  LARCH: 'Larch',\n  CEDAR: 'Cedar',\n  YEW: 'Yew',\n  TURKEY_OAK: 'Turkey oak',\n  HAWTHORN: 'Hawthorn',\n  BUSH: 'Bush',\n  SHRUB: 'Shrub',\n  },\n  hymeniumType: {\n  help: 'What is the hymenium type?',\n  GILLS: 'Gills',\n  PORES: 'Pores',\n  GLEBA: 'Gleba',\n  SMOOTH: 'Smooth',\n  TEETH: 'Teeth',\n  RIDGES: 'Ridges',\n  FALSE_GILLS: 'False gills',\n  },\n  associate: {\n  ALGA: 'Alga',\n  CYNOBACTERIUM: 'Cyanobacterium',\n  FUNGUS: 'Fungus',\n  type: 'associate',\n  name: 'associate'\n  },\n  thallusType: {\n  help: 'What is this lichen\\'s thallus type?',\n  FOLIOSE: 'Foliose',\n  FRUTICOSE: 'Fruticose',\n  CRUSTOSE: 'Crustose',\n  SQUAMULOSE: 'Squamulose',\n  LEPROSE: 'Leprose',\n  EPIPHYTE: 'Epiphyte',\n  type: 'thallusType',\n  name: 'thallus type'\n  },\n  rhizineType: {\n  SPARSE: 'Sparse',\n  HAPTER: 'Hapter',\n  type: 'rhizineType',\n  name: 'rhizine type'\n  },\n  substrate: {\n  WOOD: 'Wood',\n  BARK: 'Bark',\n  ROCKS: 'Rocks',\n  SOIL: 'Soil',\n  type: 'substrate',\n  name: 'substrate'\n  },\n  level: {\n  HIGH: 'High',\n  MEDIUM: 'Medium',\n  LOW: 'Low',\n  VARIABLE: 'Variable',\n  type: 'level',\n  name: 'level'\n  },\n  medicinalProperties: {\n  ANTIVIRAL: 'Antiviral',\n  ANTISEPTIC: 'Antiseptic',\n  ANTI_INFLAMMATORY: 'Anti-inflammatory',\n  ANTIBIOTIC: 'Antibiotic',\n  ANLAGESIC: 'Analgesic',\n  ANTIBACTERIAL: 'Antibacterial',\n  ANTICOAGULANT: 'Anticoagulant',\n  ANTIFUNGAL: 'Antifungal',\n  type: 'medicinalProperties',\n  name: 'medicinal properties'\n  },\n  ph: {\n  ACIDIC: 'Acidic',\n  ALKALINE: 'Alkaline',\n  NEUTRAL: 'Neutral',\n  type: 'pHLevel',\n  name: 'ph level'\n  },\n  colour: {\n  LILAC: 'Lilac',\n  BUFF: 'Buff',\n  WHITE: 'White',\n  YELLOW: 'Yellow',\n  DARK_GREEN: 'Dark green',\n  GREEN: 'Green',\n  WHITE_GREEN: 'White-green',\n  BRIGHT_GREEN: 'Bright green',\n  OLIVE_GREEN: 'Olive-green',\n  BRIGHT_YELLOW_GREEN: 'Bright yellow-green',\n  YELLOW_GREEN: 'Yellow-green',\n  YELLOW_BROWN: 'Yellow-brown',\n  PURPLE_BROWN: 'Purple-brown',\n  GREY_BROWN: 'Grey-brown',\n  DARK_YELLOW: 'Dark yellow',\n  DARK_RED: 'Dark red',\n  DARK_PINK: 'Dark pink',\n  ORANGE: 'Orange',\n  SCARLET: 'scarlet',\n  BLOOD_RANGE: 'Blood orange',\n  RED: 'Red',\n  RED_BROWN: 'Red-brown',\n  ORANGE_RED: 'Orange-red',\n  GREY: 'Grey',\n  PALE_GREY: 'Pale grey',\n  PALE_BROWN: 'Pale brown',\n  GREY_GREEN: 'Grey-green',\n  GREY_WHITE: 'Grey-white',\n  BROWN: 'Brown',\n  CHESTNUT_BROWN: 'Chestnut brown',\n  PAPER_BROWN: 'Paper brown',\n  BLACK: 'Black',\n  BLUE: 'Blue',\n  PALE_BLUE: 'Pale blue',\n  BLUE_BLACK: 'Blue-black',\n  JET_BLACK: 'Jet-black',\n  BLUE_GREEN: 'Blue-green',\n  VIOLET: 'Violet',\n  BURGUNDY: 'Burgundy',\n  PALE_VIOLET: 'Pale violet',\n  VIOLET_PURPLE: 'Violet purple',\n  PALE_GREEN: 'Pale green',\n  PALE_YELLOW: 'Pale yellow',\n  PALE_YELLOW_GREEN: 'Pale yellow-green',\n  PALE_GREY_GREEN: 'Pale yellow-green',\n  GLAUCOUS: 'Glaucous',\n  GREY_YELLOW: 'Grey-yellow',\n  ORANGE_YELLOW: 'Orange-yellow',\n  CREAM: 'Cream',\n  CHALKY: 'Chalky',\n  PINK: 'Pink',\n  PALE_PINK: 'Pale pink',\n  PURPLE: 'Purple',\n  PALE_PURPLE: 'Pale purple',\n  DARK_PURPLE: 'Dark purple',\n  TAN: 'Tan',\n  DARK_BROWN: 'Dark brown',\n  HONEY: 'Honey',\n  RED_PURPLE: 'Red-purple',\n  type: 'colour',\n  name: 'colour'\n  },\n  usage: {\n  help: 'To what use do humans put this species?',\n  PERFUMERY: 'Perfumery',\n  TANNING: 'Tanning',\n  DYING: 'Dying',\n  BREWING: 'Brewing',\n  FOOD: 'Food',\n  WINE: 'Wine',\n  COFFEE: 'Coffee',\n  TEA: 'Tea',\n  BIRDS_NEST: 'Bird\\'s nest',\n  POISON: 'Poison',\n  FODDER: 'Fodder',\n  FORAGE: 'Forage',\n  GREEN_MANURE: 'Green manure',\n  MEDICINE: 'Medicine',\n  FUR: 'Fur',\n  TIMBER: 'Timber',\n  PEST_CONTROL: 'Pest control',\n  HERB: 'Herb',\n  SPICE: 'Spice',\n  ESSENTIAL_OIL: 'Essential oil',\n  MORDANT: 'Mordant',\n  ASTRINGENT: 'Astringent'\n  },\n  nonTaxaType: {\n  FORM: 'Form',\n  type: 'nonTaxaType',\n  name: 'non taxa type'\n  },\n  element: {\n  NITROGEN: 'Nitrogen',\n  SULPUR_DIOXIDE: 'Sulpur dioxide',\n  type: 'element',\n  name: 'element'\n  },\n  leafBlade: {\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  type: 'leaf blade',\n  name: 'leaf blade'\n  },\n  leafDivision: {\n  PALMATE: 'Palmate',\n  COMPOUND_PALMATE: 'Compound Palmate',\n  PALMATELY_LOBED: 'Palmately lobed',\n  PINNATE: 'Pinnate',\n  COMPOUND_PINNATE: 'Compound Pinnate',\n  ODD_PINNATE: 'Odd pinnate',\n  EVEN_PINNATE: 'Even pinnate',\n  BIPINNATE: 'Bipinnate',\n  COMPOUND_BIPINNATE: 'Compound Bipinnate',\n  TRIFOLIATE: 'Trifoliate',\n  PINNATIFID: 'Pinnatifid',\n  TRIPINNATE: 'Tripinnate',\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  IMPARIPINNATE: 'Imparipinnate',\n  PARIPINNATE: 'Paripinnate',\n  },\n  leafletDivision: {\n  PALMATE: 'Palmate',\n  COMPOUND_PALMATE: 'Compound Palmate',\n  PALMATELY_LOBED: 'Palmately lobed',\n  PINNATE: 'Pinnate',\n  COMPOUND_PINNATE: 'Compound Pinnate',\n  ODD_PINNATE: 'Odd pinnate',\n  EVEN_PINNATE: 'Even pinnate',\n  BIPINNATE: 'Bipinnate',\n  COMPOUND_BIPINNATE: 'Compound Bipinnate',\n  TRIFOLIATE: 'Trifoliate',\n  PINNATIFID: 'Pinnatifid',\n  TRIPINNATE: 'Tripinnate',\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  },\n  leafVariation: {\n  HOMOBLASTIC: 'Homoblastic',\n  HETEROBLASTIC: 'Heteroblastic',\n  type: 'leafVariation',\n  name: 'leaf variation'\n  },\n  shape: {\n  LINEAR: 'Linear',\n  OVATE: 'Ovate',\n  OBLANCEOLATE: 'Oblanceolate',\n  OBOVATE: 'Obovate',\n\n  ACICULAR: 'Acicular',\n  ACUMINATE: 'acuminate',\n  ACUTE: 'acute',\n  APICULATE: 'apiculate',\n  ATTENUATE: 'attenuate',\n  AURICULATE: 'auriculate',\n  ASYMMETRICAL: 'asymmetrical',\n  CAUDATE: 'caudate',\n  CORDATE: 'cordate',\n  CUNEATE: 'cuneate',\n  CUSPIDATE: 'cuspidate',\n  DELTOID: 'deltoid',\n  DIGITATE: 'digitate',\n  ELLIPTIC: 'elliptic',\n  ENSIFORM: 'ensiform',\n  EMARGINATE: 'emarginate',\n  FALCATE: 'falcate',\n  FENESTRATE: 'fenestrate',\n  FILIFORM: 'filiform',\n  FLABELLATE: 'flabellate',\n  HASTATE: 'hastate',\n  LACINIATE: 'laciniate',\n  LANCEOLATE: 'lanceolate',\n  LAMINAR: 'laminar',\n  LINEAR: 'linear',\n  LOBED: 'lobed',\n  LORATE: 'lorate',\n  LYRATE: 'lyrate',\n  MUCRONATE: 'mucronate',\n  MULTIFID: 'multifid',\n  OBCORDATE: 'obcordate',\n  OBLANCEOLATE: 'oblanceolate',\n  OBLIQUE: 'oblique',\n  OBLONG: 'oblong',\n  OBOVATE: 'obovate',\n  OBTRULLATE: 'obtrullate',\n  OBTUSE: 'obtuse',\n  ORBICULAR: 'orbicular',\n  OVATE: 'ovate',\n  PALMATE: 'palmate',\n  PALMATELY_LOBED: 'palmately lobed',\n  PALMATIFID: 'palmatifid',\n  PALMATIPARTITE: 'palmatipartite',\n  PALMATISECT: 'palmatisect',\n  PANDURATE: 'pandurate',\n  PEDATE: 'pedate',\n  PELTATE: 'peltate',\n  PERFOLIATE: 'perfoliate',\n  PERFORATE: 'perforate',\n  PINNATELY_LOBED: 'pinnately lobed',\n  PINNATIFID: 'pinnatifid',\n  PINNATIPARTITE: 'pinnatipartite',\n  PINNATISECT: 'pinnatisect',\n  PLICATE: 'plicate',\n  RENIFORM: 'reniform',\n  RETUSE: 'retuse',\n  RHOMBOID: 'rhomboid',\n  ROUNDED: 'rounded',\n  TRIANGULAR: 'Triangular',\n  QUADRANGULAR: 'Quadrangular',\n  SEMITERETE: 'semiterete',\n  SINUATE: 'sinuate',\n  SAGITTATE: 'sagittate',\n  SPATULATE: 'spatulate',\n  SPEAR_SHAPED: 'spear-shaped',\n  SUBOBTUSE: 'subobtuse',\n  SUBULATE: 'subulate',\n  TERETE: 'terete',\n  TRULLATE: 'trullate',\n  TRUNCATE: 'truncate',\n  UNDULATE: 'undulate',\n  UNIFOLIATE: 'unifoliate',\n  FLAT: 'Flat',\n  NEEDLE: 'Needle',\n  },\n  reproduction: {\n  SELF_POLLINATION: 'Self-pollination',\n  CROSS_POLLINATION: 'Cross-pollination',\n  type: 'reproduction',\n  name: 'reproduction'\n  },\n  asexualReproduction: {\n  BUDDING: 'budding',\n  FRAGMENTATION: 'fragmentation',\n  FISSION: 'fission',\n  SPORE_FORMATION: 'spore formation',\n  VEGETATIVE_PROPAGATION: 'vegetative propagation',\n  type: 'asexualReproduction',\n  name: 'asexual reproduction'\n  },\n  leafArrangement: {\n  ALTERNATE: 'Alternate',\n  BASAL: 'Basal',\n  CAULINE: 'Rosulate',\n  OPPOSITE: 'Opposite',\n  WHORLED: 'Whorled',\n  ROWS: 'Rows',\n  SPIRAL: 'Spiral',\n  OVERLAPPING: 'Overlapping',\n  INCURVED: 'Incurved',\n  DECUSSATE: 'Decussate',\n  type: 'leafArrangement',\n  name: 'leaf arrangement'\n  },\n  leafAttachment: {\n    SESSILE: 'Sessile',\n    SUBSESSILE: 'Subsessile',\n    PEDICELLATE: 'Pedicellate',\n  },\n  leafMargin: {\n  ENTIRE: 'Entire',\n  CILIATE: 'Ciliate',\n  CRENATE: 'Crenate',\n  DENTATE: 'Dentate',\n  DENTICULATE: 'Denticulate',\n  DOUBLY_SERRATE: 'Doubly serrate',\n  SERRATE: 'Serrate',  \n  SERRULATE: 'Serrulate',  \n  SINUATE: 'Sinuate',  \n  LOBATE: 'Lobate',  \n  UNDULATE: 'Undulate',  \n  SPINY: 'Spiny',  \n  SMOOTH: 'Smooth',\n  type: 'leafMargin',\n  name: 'leaf margin'\n  },\n  food: {\n  GRASS: 'Grass',\n  ROTTEN_FRUIT: 'Rotten fruit',\n  NECTAR: 'Nectar',\n  HONEYDEW: 'Honeydew',\n  SEEDS: 'Seeds',\n  NUTS: 'Nuts',\n  GRAINS: 'Grains',\n  BERRIES: 'Berries',\n  HERBAGE: 'Herbage',\n  SWARD: 'Sward',\n  LEAVES: 'Leaves',\n  WOOD: 'Wood',\n  ROOTS: 'Roots',\n  TUBERS: 'Tubers',\n  RHIZOMES: 'Rhizomes',\n  BULBS: 'Bulbs',\n  BARK: 'Bark',\n  SHOOTS: 'Shoots',\n  type: 'food',\n  name: 'food'\n  },\n  hibernatingStage: {\n  ADULT: 'Adult',\n  CATERPILLAR: 'Caterpillar',\n  PUPA: 'Pupa',\n  type: 'hibernatingStage',\n  name: 'hibernating stage'\n  },\n  symbiosis: {\n  MUTUALISM: 'Mutualism',\n  COMMENSALISM: 'Commensalism',\n  PREDATION: 'Predation',\n  PARASITISM: 'Parasitism',\n  HERBIVORY: 'Herbivory',\n  COMPETITION: 'Competition',\n  MYCORRHIZAL: 'Mycorrhizal',\n  ECTOMYCORRHIZAL: 'Ectomycorrhizal',\n  COMPANION: 'Companion planting',\n  POLLINATION: 'Pollination',\n  SEED_PREDATION: 'Seed predation',\n  type: 'symbiosis',\n  name: 'symbiosis'\n  },\n  trophicLevel: {\n  help: 'What is the trophic level or this species?',\n  PRIMARY_PRODUCER: 'Primary producer',\n  PRIMARY_CONSUMER: 'Primary consumer',\n  SECONDARY_CONSUMER: 'Secondary consumer',\n  OMNIVORE: 'Omnivore',\n  TERTIARY_CONSUMER: 'Tertiary consumer',\n  APEX_PREDATOR: 'Apex predator',\n  type: 'trophicLevel',\n  name: 'trophic level'\n  },\n  shelter: {\n  help: 'What is the name of this species`s shelter?',\n  DREY: 'Drey',\n  BURROW: 'Burrow',\n  DEN: 'Den',\n  WARREN: 'Warren',\n  SETT: 'Sett',\n  ROOKERY: 'Rookery',\n  LODGE: 'Lodge',\n  DAM: 'Dam',\n  NEST: 'Nest',\n  SHELTER: 'Shelter',\n  VEGETATION: 'vegetation',\n  type: 'shelter',\n  name: 'shelter'\n  },\n  active: {\n  help: 'When is this species most active?',\n  CREPUSCULAR: 'Crepuscular',\n  DIURNAL: 'Diurnal',\n  NOCTURNAL: 'Nocturnal',\n  MATUTINAL: 'Matutinal',\n  VESPERTINE: 'Vespertine',\n  type: 'active',\n  name: 'active'\n  },\n  juvenile: {\n  help: 'What is the name for the juvenile of this species?',\n  KIT: 'Kit',\n  SQUEAKER: 'Squeaker',\n  CUB: 'Cub',\n  KITTEN: 'Kitten',\n  CHICK: 'Chick',\n  PUP: 'Pup',\n  CALF: 'Calf',\n  DUCKLING: 'Duckling',\n  EYAS: 'Eyas',\n  MAGGOT: 'Maggot',\n  KID: 'Kid',\n  GOSLING: 'Gosling',\n  LEVERET: 'Leveret',\n  NYMPH: 'Nymph',\n  CATERPILLAR: 'Caterpillar',\n  LARVA: 'Larva',\n  SALAMANQUESA: 'Salamanquesa',\n  type: 'juvenile',\n  name: 'juvenile'\n  },\n  month: {\n  JANUARY: 'January',\n  FEBRUARY: 'February',\n  MARCH: 'March',\n  APRIL: 'April',\n  MAY: 'May',\n  JUNE: 'June',\n  JULY: 'July',\n  AUGUST: 'August',\n  SEPTEMBER: 'September',\n  OCTOBER: 'October',\n  NOVEMBER: 'November',\n  DECEMBER: 'December',\n  type: 'month',\n  name: 'month'\n  },\n  female: {\n  help: 'What is the name for a female of this species?',\n  VIXEN: 'Vixen',\n  DOE: 'Doe',\n  JILL: 'Jill',\n  BITCH: 'Bitch',\n  SOW: 'Sow',\n  HEN: 'Hen',\n  DUCK: 'Duck',\n  GOOSE: 'Goose',\n  PEN: 'Pen',\n  type: 'female',\n  name: 'female'\n  },\n  male: {\n  help: 'What is the name for a male of this species?',\n  BUCK: 'Buck',\n  DOG: 'Dog',\n  BOAR: 'Boar',\n  TOM: 'Tom',\n  JACK: 'Jack',\n  COCK: 'Cock',\n  DRAKE: 'Drake',\n  REYNARD: 'Reynard',\n  TOD: 'Tod',\n  TERCEL: 'Tercel',\n  GANDER: 'Gander',\n  COB: 'Cob',\n  type: 'male',\n  name: 'male'\n  },\n  diet: {\n  help: 'How is the diet of this species best described?',\n  HERBIVORE: 'Herbivore',\n  OMNIVORE: 'Omnivore',\n  CARNIVORE: 'Carnivore',\n  XYLOPHAGOUS: 'Xylophagous',\n  POLYPHAGOUS: 'Polyphagous',\n  type: 'diet',\n  name: 'diet'\n  },\n  fungusMarginType: {\n  ENTIRE: 'Smooth entire',\n  APPENDICULATE: 'Appendiculate',\n  UNDULATE: 'Undulate',\n  STRIATE: 'Striate',\n  PLICATE: 'Plicate',\n  RIMMOSE: 'Rimmose',\n  ERODED: 'Eroded',\n  INROLLED: 'Inrolled',\n  type: 'marginType',  \n  name: 'fungus margin type'\n  },\n  soilType: {\n  SILICEOUS: 'Siliceous',\n  CALCAREOUS: 'Calcareous',\n  NITROGENOUS: 'Nitrogenous',\n  NUTRIENT_POOR: 'Nutrient poor',\n  WELL_DRAINED: 'Well-drained',\n  WELL_WATERED: 'Well-watered',\n  LOAM: 'Loam',\n  CHALK: 'Chalk',\n  SAND: 'Sand',\n  RICH: 'Rich',\n  MOIST: 'Moist'\n  },\n  organisation: {\n  help: 'How is this species organised?',\n  EUSOCIAL: 'Eusocial',\n  SOCIAL: 'Social',\n  SOLITARY: 'Solitary',\n  MATRIARCHY: 'Matriarchy',\n  type: 'organisation',\n  name: 'organisation'\n  },\n  role: {\n  INDICATOR: 'Indicator',\n  KEYSTONE: 'Keystone',\n  FOUNDATION: 'Foundation',\n  SPECIALIST: 'Specialist',\n  GENERALIST: 'Generalist',\n  PIONEER: 'Pioneer',\n  INVASIVE: 'Invasive',\n  DOMINANT: 'Dominant',\n  POLLINATOR: 'Pollinator',\n  PREDATOR: 'Predator',\n  HERBIVORE: 'Herbivore',\n  OMNIVORE: 'Omnivore',\n  CARNIVORE: 'Carnivore',\n  GRANIVORE: 'Granivore',\n  MUCIVORE: 'Mucivore',\n  PREY: 'Prey',\n  COMPETITOR: 'Competitor',\n  HOST: 'Host',\n  CARRIER: 'Carrier',\n  RUDERAL: 'Ruderal',\n  SUPERTRAMP: 'Supertramp',\n  SYMBIONT: 'Symbiont',\n  OCCUPANT: 'Lives in',\n  PARASITE: 'Parasite',\n  COLONISER: 'Coloniser',\n  EARLY_SUCCESSION: 'early-succession',\n  SEED_DISPERSAL: 'Seed dispersal',\n  FERTILISATION: 'Fertilisation',\n  PROPAGATION: 'propagation',\n  REPRODUCTION: 'reproduction',\n  BIOINDICATOR: 'Bioindicator',\n  STRANGLER: 'Strangler',\n  FOOD_SOURCE: 'Food source',\n  EPIPHYTIC: 'Epiphytic',\n  EPIPHYTIC_STRANGLER: 'Epiphytic strangler',\n  NUTRIENT_CYCLING: 'Nutrient cycling',\n  CARBON_DIOXIDE_PRODUCTION:'Carbon dioxide production',\n  MYCOREMEDIATION: 'Mycoremediation',\n  type: 'role',\n  name: 'role'\n  },\n  fruitType: {\n  help: 'What fruit type does this plant have?',\n  DRUPE: 'Drupe',\n  POME: 'Pome',\n  BERRY: 'Berry',\n  AGGREGATE_FRUIT: 'Aggregate fruit',\n  LEGUME: 'Legume',\n  CAPSULE: 'Capsule',\n  NUT: 'Nut',\n  GRAIN: 'Grain',\n  MULTIPLE_FRUIT: 'Multiple fruit',\n  SAMARA: 'Samara',\n  ACHENE: 'Achene',\n  POD: 'Pod',\n  ARIL: 'Aril',\n  SYCONIUM: 'syconium',\n  FOLLICLE: 'Follicle',\n  SILIQUE: 'Silique',\n  type: 'fruitType',\n  name: 'fruit type'\n  },\n  inflorescence: {\n  help: 'What type of inflorescence does this plant have?',\n  CATKIN: 'catkin',\n  UMBEL: 'umbel',\n  RACEME: 'raceme',\n  CORYMB: 'corymb',\n  SPIKE: 'Spike',\n  SPADEX: 'Spadex',\n  SINGLE: 'Single',\n  PANICLE: 'Panicle',\n  CYMOSE: 'Cymose',\n  BRANCHED_SPIKE: 'Branched spike',\n  AXILLARY_CLUSTERS: 'Axillary clusters'\n  },\n  umbelType: {\n    FLAT: 'Flat',\n    SPHERICAL: 'Spherical',\n    SIMPLE: 'Simple',\n    COMPOUND: 'Compound',\n    TERMINAL: 'Terminal',\n  },\n  display: {\n  help: 'Which form of display does this species exhibit?',\n  DIEMATIC: 'Diematic',\n  SEXUAL_COLOUR_DIMORPHISM: 'Sexual colour dimorphism',\n  NO_SEXUAL_COLOUR_DIMORPHISM: 'No sexual colour dimorphism',\n  SEXUAL_DIMORPHISM: 'Sexual dimorphism',\n  NO_SEXUAL_DIMORPHISM: 'No sexual dimorphism',\n  MELANISTIC: 'Melanistic',\n  type: 'display',\n  name: 'display'\n  },\n  behaviour: {\n  help: 'This species exhibits which form of behaviour?',\n  SEXUAL_CANNIBALISM: 'Sexual cannibalism',\n  MONANDROUS: 'Monandrous',\n  VOCALISATION: 'Vocalisation',\n  CRYPSIS: 'Crypsis',\n  HOARDING: 'Hoarding',\n  HIBERNATION: 'Hibernation',\n  GAME_PLAYING: 'Game playing',\n  PLAYFUL: 'Playful',\n  TERRITORIAL: 'Territorial',\n  NON_TERRITORIAL: 'Non territorial',\n  BIPARENTAL_CARE: 'Biparental care',\n  COOPERATIVE_BREEDING: 'Cooperative breeding',\n  TOOL_MAKING: 'Tool making',\n  PROBLEM_SOLVING: 'Problem solving',\n  DIVISION_OF_LABOUR: 'Division of labour',\n  SUPERORGANISM: 'Superorganism',\n  ANAUTOGENY: 'Anautogeny',\n  MASS_PROVISIONING: 'Mass provisioning',\n  PRECOCIAL: 'Precocial',\n  ALTRICIAL: 'Altricial',\n  AUTOTOMIC: 'Autotomic',\n  ECTOTHERMIC: 'Ectothermic',\n  ADHESION: 'Adhesion',\n  POLYPHYODONT: 'Polyphyodont',\n  VIVIPAROUS: 'Viviparous',\n  REGURGITATION: 'Feeding through regurgitation',\n  MULTIVOLTINE: 'Multivoltine',\n  BIVOLTINE: 'Bivoltine',\n  UNIVOLTINE: 'Univoltine',\n  SEMIVOLTINE: 'Semivoltine',\n  METAMORPHOSIS: 'Metamorphosis',\n  RUTTING: 'Rutting',\n  WHELPING: 'Whelping',\n  FARROWING: 'Farrowing',\n  SWIMMING: 'Swimming',\n  DECUMBENT: 'Decumbent',\n  ETHYLENE_RIPENING: 'Ethylene ripening',\n  MIGRATORY: 'Migratory',\n  type: 'behaviour',\n  name: 'behaviour'\n  },\n  sense: {\n  help: 'Which sense does this species favour?',\n  SIGHT: 'Sight',\n  MOVEMENT: 'Movement',\n  SMELL: 'Smell',\n  SPATIAL: 'Spatial',\n  MEMORY: 'Memory',\n  ECHOLOCATION: 'Echolocation',\n  type: 'sense',\n  name: 'sense'\n  },\n  crypsis: {\n  CAMOUFLAGE: 'Camouflage',\n  NOCTURNALITY: 'Nocturnality',\n  SUBTERRANEAN: 'Subterranean',\n  MIMICRY: 'Mimicry',\n  VISUAL: 'Visual',\n  OLFACTORY: 'Olfactory',\n  AUDITORY: 'Auditory',\n  },\n  allochory: {\n  ANEMOCHORY: 'Anemochory',\n  HYDROCHORY: 'Hydrochory',\n  ZOOCHORY: 'Zoochory',\n  ANTHROPOCHORY: 'Anthropochory',\n  type: 'allochory',\n  name: 'allochory'\n  },\n  reproductiveContainer: {\n  CONE: 'Cone',\n  type: 'reproductiveContainer',\n  name: 'reproductive container'\n  },\n  communication: {\n  VOCALISATION: 'Vocalisation',\n  POSTURING: 'Posturing',\n  type: 'communication',\n  name: 'communication'\n  },\n  matingSystem: {\n  POLYGYNOUS: 'Polygynous',\n  MONOGAMOUS: 'Monogamous',\n  type: 'matingSystem',\n  name: 'mating system'\n  },\n  physiology: {\n  NEGATIVE_ALLELOPATHY: 'Negative allelopathy',\n  POSITIVE_ALLELOPATHY: 'Positive allelopathy',\n  C3_CARBON_FIXATION: 'C3 carbon fixation',\n  NITROGEN_FIXING: 'Nitrogen fixing',\n  MYCORRHIZAL: 'Mycorrhizal',\n  ECTOMYCORRHIZAL: 'Ectomycorrhizal',\n  DORMANCY: 'Dormancy',\n  EVERGREEN: 'Evergreen',\n  DECIDUOUS: 'Deciduous',\n  CONIFEROUS: 'Coniferous',\n  ADVENTITIOUS:'Adventitious',\n  NYCTINASTY:'Nyctinasty',\n  XEROMORPHIC: 'Xeromorphic',\n  SUCCULENT: 'Succulent',\n  DROUGHT_TOLERANT: 'Drought tolerant',\n  FIRE_TOLERANT: 'Fire tolerant',\n  FIRE_RESISTANT: 'Fire resistant',\n  POLLUTION_TOLERANT: 'Pollution tolerant',\n  PH_TOLERANT: 'pH tolerant',\n  SALT_TOLERANT: 'Salt tolerant',\n  FROST_TOLERANT: 'Frost tolerant',\n  HEAT_TOLERANT: 'Heat tolerant',\n  NITROGEN_TOLERANT: 'Nitrogen tolerant',\n  HEAVY_METAL_TOLERANT: 'heavy metal tolerant',\n  ACID_RAIN_TOLERANT: 'Acid rain tolerant',\n  COMPACT_SOIL_TOLERANT: 'Compact soil tolerant',\n  FLORAL_SCENT: 'Floral scent',\n  AROMATIC: 'Aromatic',\n  MONOCARPIC: 'Monocarpic',\n  POLYCARPIC: 'Polycarpic',\n  PYROPHYTIC: 'Pyrophytic',\n  SEROTINOUS: 'Serotinous',\n  STYPTIC: 'Styptic',\n  BIOLUMINESCENCE: 'Bioluminescence',\n  type: 'physiology',\n  name: 'physiology'\n  },\n  collective: {\n  help: 'What is the term for a collective of this species?',\n  SOUNDER: 'Sounder',\n  SLOTH: 'Sloth',\n  MURMURATION: 'Murmuration',\n  PACK: 'Pack',\n  type: 'collective',\n  name: 'collective'\n  },\n  ecology: {\n  DIGGING: 'Digging',\n  SCRAPING: 'Scraping',\n  ROOTING: 'Rooting',\n  SCAVENGING: 'Scavenging',\n  type: 'ecology',\n  name: 'ecology'\n  },\n  characteristic: {\n  help: 'Which characteristic/s does this species display?',\n  PERENNIAL: 'Perennial',\n  ANNUAL: 'Annual',\n  BIENNIAL: 'Biennial',\n  HERBACEOUS: 'Herbaceous',\n  DIOECIOUS: 'Dioecious',\n  MONOECIOUS: 'Monoecious',\n  SYNOECIOUS: 'Synoecious',\n  PERFECT: 'Perfect',\n  COMPLETE: 'Complete',\n  DICOTYLEDON: 'Dicot',\n  MONOCOTYLEDON: 'Monocot',\n  CAULIFLORY: 'Cauliflory',\n  RAMIFLORY: 'Ramiflory',\n  PUBESCENT: 'Pubescent',\n  CHAMAEPHYTE: 'Chamaephyte',\n  FIBROUS_ROOT_SYSTEM: 'Fibrous root system',\n  TAPROOT_SYSTEM: 'Taproot system',\n  KIN_SELECTION: 'Kin selection',  \n  BROADLEAF: 'Broadleaf',\n  AERIAL_ROOTS: 'Aerial roots',\n  EPICORMIC_ROOTS: 'Epicormic shoots',\n  BASAL_ROOTS: 'Basal shoots',\n  RUNNER: 'Runner',\n  CLIMBER: 'Climber',\n  BUTTRESS_ROOT: 'Buttress root',\n  MONOPODIAL: 'Monopodial',\n  APICAL_DOMINANCE: 'Apical dominance',\n  POLYMORPHIC: 'Polymorphic',\n  CRYPTIC_SPECIES_COMPLEX: 'Cryptic species complex',  \n  RHIZOMORPHS: 'Rhizomorphs',\n  GEOPHYTE: 'Geophyte',\n  RICTAL_BRISTLES: 'Rictal bristles',\n  DEHISCENCE: 'Dehiscence',\n  EXPLOSIVE_DEHISCENCE: 'Explosive dehiscence',\n  RESIN_CANAL: 'Resin canal',\n  APOSEMATIC: 'Aposematic'\n  },\n  climate: {\n  HOT: 'Hot',\n  DRY: 'Dry',\n  TEMPERATE: 'Temperate',\n  COOL: 'Cool',\n  TROPICAL: 'Tropical',\n  CONTINENTAL: 'Continental',\n  DROUGHT_TOLERANT: 'Drought-tolerant',\n  type: 'climate',\n  name: 'climate'\n  },\n  pollination: {\n  ALLOGAMY: 'Allogamy',\n  ANEMOPHILY: 'Anemophily',\n  HYDROPHILY: 'Hydrophily',\n  ENTOMOPHILY: 'Entomophily',\n  AMBOPHILY: 'Ambophily',\n  MELITTOPHILY: 'Melittophily',\n  PSYCHOPHILY: 'Psychophily',\n  PHALAENOPHILY: 'Phalaenophily',\n  SONICATION: 'Sonication',\n  GENERALISED_SYNDROME: 'Generalised syndrome',\n  CLEISTOGAMY: 'Cleistogamy'\n  },\n  stipeCharacter: {\n  RING: 'Ring',\n  RING_AND_VOLVA: 'ring and volva',\n  BARE: 'Bare',\n  NA: 'N/A',\n  SHORT: 'short',\n  STUMPY: 'stumpy',\n  CLUB_LIKE: 'Club-like',\n  WARTS: 'warts',\n  HOLLOW: 'hollow',\n  PRUINOSE: 'pruinose',\n  PARTIAL_VEIL: 'Partial veil',\n  type: 'stipeCharacter',\n  name: 'stipe character'\n  },\n  stemCharacter: {\n    HOLLOW: 'hollow',\n    TERETE: 'terete',\n    HAIRY: 'Hairy',\n    GLAUCOUS: 'Glaucous',\n    FARINOSE: 'Farinose',\n    SCURFY: 'Scurfy',\n    VISCOUS: 'Viscous',\n    PUNCTATE: 'Punctate',\n    PAPILLATE: 'Papillate',\n    TUBERCULATE: 'Tuberculate',\n    RUGOSE: 'Rugose',\n    GLABROUS: 'Glabrous',\n    PUBESCENT: 'Pubescent',\n  },\n  gillAttachment: {\n    ADNATE: 'Adnate',\n    ADNEXED: 'Adnexed',\n    DECURRENT: 'Decurrent',\n    EMARGINATE: 'Emarginate',\n    FREE: 'Free',\n    Seceding: 'Seceding',\n    SINUATE: 'Sinuate',\n    SUBDECURRENT: 'Subdecurrent',\n    NA: 'N/A',\n    type: 'gillAttachment',\n    name: 'gill attachment'\n  },\n  grouping: {\n    LARGE_GROUPS: 'large groups',\n    CLUSTERS: 'clusters',\n    LARGE_CLUSTERS: 'large clusters',\n    SCATTERED_CLUSTERS: 'scattered clusters',\n    FAIRY_RINGS: 'fairy rings',\n    GREGARIOUS: 'gregarious',\n    NUMEROUS: 'numerous',\n    type: 'grouping',\n    name: 'grouping'\n  },\n  propagation: {\n    RHIZOMES: 'Rhizomes',\n    SEEDS: 'Seeds',\n    SUCKERS: 'Suckers',\n    STOLONS: 'Stolons',\n    BULBS: 'Bulbs',\n    TUBERS: 'Tubers',\n    CORMS: 'Corms',\n    PLANTLETS: 'Plantlets',\n    KEIKIS: 'Keikis',\n    APOMIXIS: 'Apomixis',\n    type: 'propagation',\n    name: 'propagation'\n  },\n  seedDispersal: {\n    AUTOCHORY: 'autochory',\n    ANEMOCHORY: 'anemochory',\n    HYDROCHORY: 'Hydrochory',\n    ZOOCHORY: 'Zoochory',\n    ANTHROPOCHORY: 'Anthropochory',\n  },\n  exposure: {\n    FULL_SUN: 'Full sun',\n    PARTIAL_SUN: 'Partial Sun',\n    PARTIAL_SHADE: 'Partial Shade',\n    SHADE: 'shade'\n  },\n  nutType: {\n    ACORN: 'acorn',\n    HAZELNUT: 'hazelnut',\n    CHESTNUT: 'chestnut',\n  },\n  surface: {\n    GLAUCOUS: 'Glaucous',\n    FARINOSE: 'Farinose',\n    SCURFY: 'Scurfy',\n    VISCOUS: 'Viscous',\n    PUNCTATE: 'Punctate',\n    PAPILLATE: 'Papillate',\n    TUBERCULATE: 'Tuberculate',\n    RUGOSE: 'Rugose',\n    GLABROUS: 'Glabrous',\n    PUBESCENT: 'Pubescent',\n    TOMENTOSE: 'tomentose',\n  },\n  texture: {\n    LEATHERY: 'Leathery',\n    FLESHY: 'Fleshy',\n    GLOSSY: 'Glossy',\n    WOOLY: 'Wooly',\n    TOMENTOSE: 'tomentose',\n    SCALY: 'Scaly',\n    ROUGH: 'Rough',\n    SMOOTH: 'Smooth',\n    VELVETY: 'Velvety',\n    HAIRY: 'Hairy',\n    PUBESCENT: 'Pubescent',\n  },\n  treeShape: {\n    help: \"Which descrption is the best match for this tree?\",\n    COLUMNAR: 'Columnar',\n    OPEN_HEAD_IRREGULAR: 'Open head irregular',\n    WEEPING: 'Weeping',\n    PYRAMIDAL: 'Pyramidal',\n    GLOBE: 'Globe',\n    FASTIGIATE: 'Fastigiate',\n    VASE: 'Vase',\n    HORIZONTAL_SPREADING: 'Horizontal spreading',\n    NARROW_DOMED: 'Narrow domed'\n  },\n  crownShape: {\n    OVOID_CONIC: 'Ovoid-conic',\n    CONIC: 'Conic',\n    DOMED: 'Domed',\n    SPIRE_LIKE: 'Spire-like',\n    SLENDER: 'Slender'\n  },\n  barkType: {\n    SMOOTH: 'Smooth',\n    LENTICELS: 'Lenticels',\n    PEELING_STRIPS: 'Peeling strips',\n    VERTICAL_CRACK: 'Vertical cracks',\n    VERTICAL_STRIPS: 'Vertical strips',\n    SCALES: 'Scales',\n    PLATES: 'Plates',\n    INTERSECTING_RIDGES: 'Intersecting ridges',\n    UNINTERRUPTED_RIDGES: 'Uninterrupted ridges',\n    RIDGES_BROKEN_HORIZONTALLY: 'Ridges broken horizontally',\n    PAPER_LIKE: 'Paper-like',\n    SQUARE_CRACKED: 'Square-cracked',\n    RESINOUS: 'Resinous',\n    THICK: 'Thick'\n  },\n  coneShape: {\n    BARREL_SHAPED: 'Barrel-shaped',\n    GLOBULAR: 'Globular'\n  },\n  leafVenation: {\n    ARCUATE: 'Arcuate',\n    DICHOTOMOUS: 'Dichotomous',\n    LONGITUDINAL: 'Longitudinal',\n    PARALLEL: 'Parallel',\n    PINNATE: 'Pinnate',\n    RETICULATE: 'Reticulate',\n    ROTATE: 'Rotate',\n    TRANSVERSE: 'Transverse',\n  },\n  flowerShape: {\n    TRUMPET_SHAPED: 'Trumpet-shaped',\n    BILABIATE: 'Bilabiate',\n    REGULAR: 'Regular',\n    ACTINOMORPHIC: 'Actinomorphic',\n    ZYGOMORPHIC: 'Zygomorphic'\n  },\n  branchArrangement: {\n    HORIZONTAL: 'Horizontal',\n    WHORLS: 'Whorls'\n  },\n  leafFeatures: {\n    BLUNT_TIPS: 'Blunt tips',\n    STOMATAL_LINES: 'Stomatal lines',\n    DROOPING: 'Drooping'\n  },\n  leafFolding: {\n    CARINATE: 'Carinate',\n    CONDUPLICATE: 'Conduplicate',\n    CUCULLATE: 'Cucullate',\n    INVOLUTE: 'Involute',\n    PLICATE: 'Plicate',\n    REDUPLICATE: 'Reduplicate',\n    REVOLUTE: 'Revolute',\n    SUPERVOLUTE: 'Supervolute',\n  },\n  mushroomGroup: {    \n    MYCOTROPHS: 'Mycotrophs',\n    POLYPORES: 'Polypores',\n    BOLETES: 'Boletes',\n    PUFFBALLS: 'Puffballs',\n    GILLED_MUSHROOMS: 'Gilled Mushrooms',\n    CHANTERELLES_AND_TRUMPETS: 'Chanterelles and Trumpets',\n    TOOTHED_MUSHROOMS: 'Toothed Mushrooms',\n    STINKHORNS: 'Stinkhorns',\n    CUP_FUNGI: 'Cup Fungi',\n    BIRDS_NEST_FUNGI:'Bird\\'s Nest Fungi',\n    TRUE_MORELS_AND_VERPAS: 'True Morels and Verpas',\n    FALSE_MORELS: 'False Morels',\n    SADDLES: 'Saddles',\n    JELLY_FUNGI: 'Jelly Fungi',\n    CLUBS_AND_CORALS: 'Clubs and Corals',\n    CRUST_FUNGI: 'Crust Fungi'\n  },\n  units: [\n    { lifeSpan: [ 'DD', 'MM', 'YY'] },\n    { gestation: [ 'DD', 'MM', 'YY'] },\n    { weaning: [ 'DD', 'MM', 'YY'] },\n    { germination: [ 'DD', 'WW', 'MM', 'YY'] },\n    { height: [ 'm', 'cm', 'mm'] },\n    { diameter: [ 'm', 'cm', 'mm'] },\n    { circumference: [ 'm', 'cm', 'mm'] },\n    { trunkDiameter: [ 'm', 'cm', 'mm'] },\n    { capDiameter: [ 'm', 'cm', 'mm'] },\n    { umbelDiameter: [ 'cm', 'mm'] },\n    { capWidth: [ 'm', 'cm', 'mm'] },\n    { infructescenceWidth: [ 'm', 'cm', 'mm'] },\n    { width: [ 'm', 'cm', 'mm'] },\n    { breadth: [ 'm', 'cm', 'mm'] },\n    { capHeight: [ 'm', 'cm', 'mm'] },\n    { shelfWidth: [ 'm', 'cm', 'mm'] },\n    { shelfThickness: [ 'm', 'cm', 'mm'] },\n    { length: [ 'm', 'cm', 'mm'] },\n    { leafLength: [ 'm', 'cm', 'mm'] },\n    { awnLength: [ 'cm', 'mm'] },\n    { infructescenceLength: [ 'm', 'cm', 'mm'] },\n    { juvenileLeafLength: [ 'm', 'cm', 'mm'] },\n    { leafWidth: [ 'm', 'cm', 'mm'] },\n    { petalLength: [ 'cm', 'mm'] },\n    { petalWidth: [ 'cm', 'mm'] },\n    { petioleLength: [ 'cm', 'mm'] },\n    { bractLength: [ 'cm', 'mm'] },\n    { fruitWidth: [ 'cm', 'mm'] },\n    { fruitLength: [ 'cm', 'mm'] },\n    { fruitDiameter: [ 'cm', 'mm'] },\n    { fruitHeight: [ 'cm', 'mm'] },\n    { flowerDiameter: [ 'cm', 'mm'] },\n    { flowerLength: [ 'cm', 'mm'] },\n    { coneDiameter: [ 'cm', 'mm'] },\n    { coneLength: [ 'cm', 'mm'] },\n    { maleConeLength: [ 'cm', 'mm'] },\n    { femaleConeLength: [ 'cm', 'mm'] },\n    { bulbWidth: [ 'cm', 'mm'] },\n    { coneWidth: [ 'cm', 'mm'] },\n    { maleConeWidth: [ 'cm', 'mm'] },\n    { femaleConeWidth: [ 'cm', 'mm'] },\n    { stalkHeight: [ 'm', 'cm', 'mm'] },\n    { stemHeight: [ 'm', 'cm', 'mm'] },\n    { scapeHeight: [ 'm', 'cm', 'mm'] },\n    { stemDiameter: [ 'm', 'cm', 'mm'] },\n    { stipeLength: [ 'm', 'cm', 'mm'] },\n    { tailLength: [ 'm', 'cm', 'mm'] },\n    { leafletLength: [ 'cm', 'mm'] },\n    { leafletWidth: [ 'cm', 'mm'] },\n    { queenLength: [ 'cm', 'mm'] },\n    { queenWingspan: [ 'cm', 'mm'] },\n    { workerLength: [ 'cm', 'mm'] },\n    { workerWingspan: [ 'cm', 'mm'] },\n    { maleLength: [ 'cm', 'mm'] },\n    { maleWingspan: [ 'cm', 'mm'] },\n    { stipeWidth: [ 'm', 'cm', 'mm'] },\n    { wingSpan: [ 'm', 'cm', 'mm'] },\n    { tongueLength: [ 'cm', 'mm'] },\n    { phValue: ['pH']},\n    { weight: [ 'g', 'kg']},\n    { queenWeight: [ 'g']},\n    { workerWeight: [ 'g']},\n    { maleWeight: [ 'g']},\n  ],\n};","import { utils } from 'utils/utils';\nimport { enums } from 'admin/api/enums';\nimport { firebaseConfig } from 'api/firebase/credentials';\nimport { questions } from 'api/firebase/questions';\n\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/storage';\nimport 'firebase/firestore';\n\nfirebase.initializeApp(firebaseConfig);\n\nconst storage = firebase.storage();\n\nconst db = firebase.firestore();\n\nconst getSpeciesWhere = async props => {\n\n    try {\n        const { key, operator, value, limit } = props;\n\n        let speciesRef = limit\n                        ? db.collection(`species`).where(key, operator, value).limit(limit)\n                        : db.collection(`species`).where(key, operator, value);\n\n        const querySnapshot = await speciesRef.get();\n\n        const docs = [];\n\n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n\n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesWhere');\n    }\n};\n  \nconst getSpecies = async props => {\n    const item = await getSpeciesWhere(props);\n    return item;\n};\n\nconst getSpeciesNames = async () => {\n\n    try {\n        const speciesPropertiesRef = db.collection(`species`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await speciesPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesNames');\n    }\n};\n\nconst getTaxaNames = async () => {\n\n    try {\n        const taxaPropertiesRef = db.collection(`taxa`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await taxaPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n    } catch(e) {\n      // logAPIError(e, 'getTaxaNames');\n    }\n};\n\nconst getSpeciesByIconicTaxon = async (item, number = 6) => {\n\n    const { iconicTaxon, lichen: isLichen, eolId } = item;\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    const randomId = getRandomId();\n    \n    if(isLichen) {\n        querySnapshot = await species.where('lichen', '==', true).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    } else {\n        querySnapshot = await species.where('iconicTaxon', '==', iconicTaxon.toLowerCase()).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    }\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getSpeciesByName = async (itemName, force = false) => {\n\n    if(!itemName) return '';\n\n    const items = await getSpecies({ key:'name', operator:'==', value:itemName });\n    \n    return items[0];\n};\n\nconst getTaxaWhere = async props => {\n\n    const { language, key, operator, value, limit } = props;\n  \n    const taxaRef = limit\n                        ? db.collection(`taxa_en`).where(key, operator, value).limit(limit)\n                        : db.collection(`taxa_en`).where(key, operator, value);\n  \n    const querySnapshot = await taxaRef.get();\n  \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return await docs;\n};\n  \nconst getFamiliesByIconicTaxon = async (iconicTaxonRank, iconicTaxonValue, isLichen, config) => {\n    return await getTaxaWhere({ language: config.language, key: 'iconicTaxon', operator: '==', value: iconicTaxonValue, limit: 7 });\n};\n\nconst getTaxonByName = async (config, name) => {\n\n    try {\n                \n        let taxon = {};\n\n        const taxaRef = db.collection(`taxa_en`).where('name', '==', name);\n\n        const querySnapshot = await taxaRef.get();\n        \n        if(querySnapshot.docs.length > 0) {\n            querySnapshot.forEach(doc => {\n                taxon = doc.data();                                \n          });          \n        }\n\n        return taxon;\n\n    } catch (e) {\n      // logAPIError(e, 'getTaxonByName');\n      return e;\n    }\n};\n\nconst getAsyncTraitsByNameAndCollection = async (name, collection = 'traits_en', language) => {\n\n    try {\n    \n    const languageTraits = db.collection(collection).where(\"name\", \"==\", name);\n  \n    const traits = await languageTraits.get();\n  \n    return await traits;\n    \n    } catch(e) {\n      // logAPIError(e, 'getAsyncTraitsByNameAndCollection');\n    }\n};\n\nconst getTraitsBySpeciesName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'traits_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getTraitsByTaxonName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'taxa_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getBirdsong = async xcID => {\n\n    const storageRef = storage.ref();\n    const url = await storageRef.child(`birdsong/${xcID}.mp3`).getDownloadURL();\n    return url;\n};\n\n// const getImage = async image => {\n\n//   const storageRef = storage.ref();\n//   const url = await storageRef.child(`images/${image}`).getDownloadURL();\n//   return url;\n// };\n\nconst addSpecies = async species => {\n\n    let docRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            return {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || ''\n            }\n        });\n    }\n\n    try {\n        docRef = await db.collection('species').add(species);\n    } catch(e) {\n      // logAPIError(e, 'addSpecies');\n    }\n\n    return docRef;\n};\n\nconst updateSpecies = async species => {\n\n    let speciesDocRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            const updatedSpecies = {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || '',\n            };\n            if(image.starred) {\n                updatedSpecies.starred = image.starred;\n            }\n            if(image.provider) {\n                updatedSpecies.provider = image.provider;\n            }\n            return updatedSpecies;\n        });\n    }\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update(species); \n\n};\n\nconst updateSpeciesNames = async (species, names) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update({names}); \n\n};\n\nconst getTraitValues = async () => {\n\n    const traits = enums;\n\n    return new Promise(resolve => resolve(enums));\n};\n\nconst deleteSpeciesByName = async name => {\n\n    const speciesRef = db.collection(`species`).where('name', '==', name);\n\n    speciesRef.get().then(function(querySnapshot) {\n        querySnapshot.forEach(function(doc) {\n        doc.ref.delete();\n        });\n    });\n};\n\nconst addTraits = async (name, trait, collection = 'traits_en') => {\n\n    let speciesTraitsRef;\n\n    try {\n\n        const querySnapshot = await db.collection(collection).where(\"name\", \"==\", name).get();\n        \n        if(querySnapshot.empty) {\n            trait.name = name;\n            return await db.collection(collection).add(trait);\n        } else {\n            querySnapshot.forEach(function(doc) {\n                speciesTraitsRef = doc.ref;\n            });\n\n            await speciesTraitsRef.update(trait); \n\n            return 'Update successful';\n        }\n    } catch(e) {\n      // logAPIError(e, 'addTraits');\n      return `Update failed. Error ${e.message}.`;\n    }\n};\n\nconst addSpeciesRelationship = async (type, traits) => {\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(traits.map(async trait => {\n\n                let speciesTraitsRef;\n        \n                const querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", trait.name).get();\n\n                if(querySnapshot.empty) {\n                    trait.name = name;\n                    speciesTraitsRef = await db.collection(`traits_en`).add(trait);\n                } else {\n                    querySnapshot.forEach(function(doc) {\n                        speciesTraitsRef = doc.ref;\n                    });\n                }\n\n                speciesTraitsRef.update({\n                    [type]: firebase.firestore.FieldValue.arrayUnion(trait.update)\n                });\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return 'Relationship added.';\n\n    } catch (e) {\n      // logAPIError(e, 'addSpeciesRelationship');\n      return e.message;\n    }\n\n};\n\nconst addPhotos = async (name, photos) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    try {\n        return speciesDocRef.update({\n            images: firebase.firestore.FieldValue.arrayUnion(...photos)\n        });\n    } catch (e) {\n      // logAPIError(e, 'addPhotos');\n      return e.message;\n    }\n\n};\n\nconst deleteSpeciesTraitField = async (name, field) => {\n\n    let querySnapshot, speciesTraitsRef;\n  \n    try {\n        try {\n          querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", name).get();\n      \n          querySnapshot.forEach(function(doc) {\n              speciesTraitsRef = doc.ref;\n          });\n        } catch(e) {\n          // logAPIError(e, 'deleteSpeciesTraitField unable to obtain reference to species trait');\n        }\n      \n        var removeField = speciesTraitsRef.update({\n            [field] : firebase.firestore.FieldValue.delete()\n        });\n  \n        return removeField;\n\n      } catch(e) {\n        // logAPIError(e, 'deleteSpeciesTraitField');\n    }    \n  };\n\nconst getRandomSpecies = async number => {\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    querySnapshot = await species.where(firebase.firestore.FieldPath.documentId(), operator, getRandomId()).limit(number).get();\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getDefinition = (term, glossary, required) => {\n\n    const terms = term.split(',');\n\n    let definitions = [];\n\n    for(let term of terms) {        \n        const definition = glossary.find(definition => definition.term.toLowerCase() === term.trim().toLowerCase() || definition.alt && definition.alt.toLowerCase() === term.trim().toLowerCase());\n        definitions.push(definition);\n    };\n    \n    return definitions.filter(definition => definition);\n};\n\nconst getTraitDefinitions = (glossary, required, trait) => {\n    \n    const traits = glossary.filter(entry => entry.trait).filter(entry => entry.trait.toLowerCase() === trait.toLowerCase());\n\n    return new Promise(resolve => resolve(traits));\n};\n\nconst addTaxon = async props => {\n\n    const { language, taxon } = props;\n  \n    let docRef;\n  \n    try {\n        docRef = await db.collection(`taxa_en`).add(taxon);\n        return 'Taxon saved.';\n    } catch(e) {\n      // logAPIError(e, 'addTaxon');\n    }\n  \n    return docRef;\n};\n\nconst getSpeciesInParallel = async species => {\n\n    try {\n        return Promise.all(species.map(sp => {                    \n            return firestore.getSpeciesByName(sp.name).then(async item => {\n                return await {                         \n                    ...item, description: sp.description || '', time: sp.time || 0, questionIds: sp.questionIds, quickId: sp.quickId || ''\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      // logAPIError(e, 'getSpeciesInParallel');\n    }\n};\n\nconst getSpeciesByNameInParallel = async itemNames => {\n    try {\n        return Promise.all(itemNames.map(name => {                    \n            return firestore.getSpeciesByName(name).then(async item => {\n                return await {                         \n                    ...item\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      // logAPIError(e, 'getSpeciesByNameInParallel');\n    }\n};\n\n// const getQuestionById = (id, name) => {\n\n//     return new Promise(resolve => resolve(questions.map(q => {\n//         if(parseInt(q.id) === parseInt(id)) {\n//             return {\n//                 ...q,\n//                 name: name\n//             }\n//         }\n//     })));\n// };\n\n\nconst addCollection = async (collection, user) => {\n\n    if(!user) return;\n\n    const collectionRef = await updateCollection(collection);\n\n    if(collectionRef) return;\n\n    collection.user = user;\n\n    let docRef = null;\n  \n    try {\n        docRef = await db.collection('collections').add(collection);\n    } catch(e) {\n      // logAPIError(e, 'addCollection');\n      console.log('addCollection:', e);\n    }\n  \n    return docRef;\n  };\n\n  const updateCollection = async collection => {\n\n    try {\n        collection.items = []; // we don't want to update items as we have the info we need in species; the rest we get at runtime\n\n        let docRef = null;\n\n        const querySnapshot = await db.collection(\"collections\").where(\"name\", \"==\", collection.name).get();\n        \n        querySnapshot.forEach(function(doc) {\n            docRef = doc.ref;\n        });\n\n        if(docRef) {\n            await docRef.update(collection);            \n        }\n\n        return docRef;\n\n    } catch(e) {\n      // logAPIError(e, 'updateCollection');\n      return { message: 'Failure', details: e.message, success : false };\n    }\n\n};\n  \n  const getCollectionsWhere = async props => {\n  \n    const { key, operator, value, limit } = props;\n  \n    const collectionRef = limit\n      ? db.collection('collections').where(key, operator, value).limit(limit)\n        : key\n            ? db.collection('collections').where(key, operator, value)\n            : db.collection('collections');\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const getCollections = async => {\n    return getCollectionsWhere({});\n  };\n\n  const addQuestion = async question => {\n\n    let docRef;\n  \n    try {\n        docRef = await db.collection('questions').add(question);\n    } catch(e) {\n      // logAPIError(e, 'getCollectionsWhere');\n    }\n  \n    return docRef;\n  };\n  \n  const getQuestionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`questions`).where(key, operator, value)\n            : db.collection(`questions`);\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const addDefinition = async definition => {\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n\n    let docRef;\n\n    if(querySnapshot.empty) {\n\n        try {\n            docRef = await db.collection('glossary').add(definition);\n        } catch(e) {\n          // logAPIError(e, 'getQuestionsWhere');\n        }\n      \n        return docRef;        \n\n    } else {\n        throw 'That definition already exists!';\n    }\n\n  };\n  \n  const getDefinitionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`glossary`).where(key, operator, value)\n            : db.collection(`glossary`);\n\n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push({ ...doc.data(), id: doc.id });\n    });\n  \n    return docs;\n  };\n\n  const getDefinitionById = async id => {\n    return db.collection('glossary').doc(id).get().then(data => {\n        return { ...data.data(), id: data.id };\n    });\n  };\n\n  const getBatchDefinitionsById = async ids => {\n\n    const terms = [];\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(ids.map(async id => {\n\n                const term = await getDefinitionById(id);\n\n                terms.push(term);\n\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return terms;\n\n    } catch (e) {\n      // logAPIError(e, 'getBatchDefinitionsById');\n    }\n  }\n\n  const getDefinitionsByTaxa = taxa => {\n      return getDefinitionsWhere({\n        key: 'taxon',\n        operator: 'in', \n        value: taxa\n    });\n  };\n\n  const updateDefinition = async definition => {\n\n    let docRef;\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n    \n    querySnapshot.forEach(function(doc) {\n        docRef = doc.ref;\n    });\n\n    return await docRef.update(definition);\n  };\n\nexport const firestore = {\n\n    getSpecies,\n    getSpeciesNames,\n    getTaxaNames,\n    getSpeciesByName,\n    getSpeciesByIconicTaxon,\n    getFamiliesByIconicTaxon,\n    getTaxonByName,\n    getTraitsBySpeciesName,\n    getTraitsByTaxonName,\n    getBirdsong,\n    // getImage,\n    getTraitValues,\n    getRandomSpecies,\n    getDefinition,\n    getSpeciesInParallel,\n    getSpeciesByNameInParallel,\n    getCollections,\n    getCollectionsWhere,\n    getQuestionsWhere,\n    \n    addSpecies,\n    addTraits,\n    addSpeciesRelationship,\n    addPhotos,\n    addTaxon,\n    addCollection,\n    addQuestion,\n    addDefinition,\n    \n    updateSpecies,\n    updateSpeciesNames,\n    updateCollection,\n    updateDefinition,\n  \n    deleteSpeciesByName,\n    deleteSpeciesTraitField,\n\n    getTraitDefinitions,\n    // getQuestionById,\n    getDefinitionsWhere,\n    getDefinitionsByTaxa,\n    getDefinitionById,\n    getBatchDefinitionsById\n};\n\nconst getRandomId = () => {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let autoId = '';\n    for (let i = 0; i < 20; i++) {\n        autoId += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return autoId;\n};","export const firebaseConfig = {\n    apiKey: \"AIzaSyCA5oDmWevmZy2Ginb9eKcIe72Titk7szM\",\n    authDomain: \"snapdragon-222014.firebaseapp.com\",\n    databaseURL: \"https://snapdragon-222014.firebaseio.com\",\n    projectId: \"snapdragon-222014\",\n    storageBucket: \"snapdragon-222014.appspot.com\",\n    messagingSenderId: \"947213844747\",\n    appId: \"1:947213844747:web:97c1a5e664a670de\"\n};\n","import { firestore } from 'api/firebase/firestore';\n\nexport const getLookalikeTests = async itemsInThisRound => {\n\n    const init = async () => {\n\n        if(itemsInThisRound === undefined) return new Promise(resolve => resolve([]));\n\n        return Promise.all(itemsInThisRound.map(async item => {\n            \n            const { question, answers, overrides } = await getLookalikeTest(item);\n\n            if(!question) return new Promise(resolve => resolve({}));\n\n            return {\n                item,\n                question,\n                answers,\n                overrides\n            }\n        }));\n    }\n\n    const tests = await init();\n\n    return tests;\n}\n\nexport const getItemLookalikes = async item => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return {};\n\n    const lookaliketraits = item.traits['lookalikes'];\n\n    if(!lookaliketraits) return new Promise(resolve => resolve([]));\n\n    let lookalikes = lookaliketraits.map(trait => trait.lookalike.name);\n\n    if(lookalikes.length === 0) return {};\n\n    // check current collection first?\n\n    const getLookalikes = async () => {\n        return Promise.all(lookalikes.map(async name => {\n            return await firestore.getSpeciesByName(name);\n        })\n    )};\n    \n    lookalikes = await getLookalikes();\n    lookalikes = lookalikes.filter(lookalike => lookalike);\n\n    return lookalikes;\n};\n\nconst getLookalikeTest = item => {\n\n    const init = async () => {\n\n        const lookalikes = await getItemLookalikes(item);\n\n        const question = lookalikes.length > 0 ? item.name : null;\n        const answers = [ question, ...lookalikes.map(item => item.name) ];\n\n\n        return { question, answers, overrides : { question: 'Avoid look-alikes', help: '(Pick one correct image)', binomial: 'Latin name', vernacularName: 'Common name', trait: { name: 'lookalikes', lookalikes } } };\n    };\n\n    return init();\n};\n","import { contains } from 'ramda';\n\nexport const iconicTaxa = {\n\n    // kingdom\n    FUNGI: 'Fungi',\n    PLANTAE: 'Plants',\n\n    // phlyum\n    // MOLLUSCA: 'Mollusks',\n\n    // class\n    AVES: 'Birds',\n    AMPHIBIA: 'Amphibians',\n    REPTILIA: 'Reptilians',\n    MAMMALIA: 'Mammals',\n    INSECTA: 'Insects',\n    // ACTINOPTERYGII: 'Ray-finned fishes',\n    ARACHNIDA: 'Arachnids',\n\n    //order\n    LEPIDOPTERA: 'Lepidoptera'\n};\n\nexport const matchTaxonKey = (taxonomy, iconicTaxaKeys) => {\n    let taxon = { rank: '', value: '' };\n    if(!taxonomy) return taxon;\n    if(taxonomy.order && contains(taxonomy.order.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'order', value: taxonomy.order.toLowerCase() };\n    if(taxon.value === '' && taxonomy.class && contains(taxonomy.class.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'class', value: taxonomy.class.toLowerCase() };\n    if(taxon.value === '' && taxonomy.kingdom && contains(taxonomy.kingdom.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'kingdom', value: taxonomy.kingdom.toLowerCase() };\n\n    return taxon;\n}\n\nexport const matchTaxon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return false;\n    let iconicTaxaKeys = Object.keys(iconicTaxa).map(key => key.toLowerCase());\n    const taxon = matchTaxonKey(taxonomy, iconicTaxaKeys);\n    return taxon;\n};\n\nexport const findRankByIconicTaxon = (taxonomy, iconicTaxon) => {\n    return Object.keys(taxonomy).find(key => taxonomy[key].toLowerCase() === iconicTaxon.toLowerCase());\n};\n\nexport const matchIcon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return '';\n    const rank = matchTaxon(taxonomy, iconicTaxa).value;\n    if(!rank) return ''\n    return matchRank(rank);\n}\n\nexport const matchRank = rank => {\n    let icon;\n    switch(rank.toLowerCase()) {\n        case 'aves':\n            icon = 'fas fa-dove';\n            break;\n        case 'lepidoptera':\n            icon = 'fas fa-barcode';\n            break;\n        case 'amphibia':\n            icon = 'fas fa-frog';\n            break;\n        case 'mammalia':        \n        case 'actinopterygii':\n            icon = 'fas fa-paw';\n            break;\n        case 'reptilia':\n            icon = 'fas fa-registered';\n            break;\n        case 'insecta':\n        case 'arachnida':\n            icon = 'fas fa-bug';\n            break;\n        case 'fungi':\n            icon = './static/icons/mushroom.svg';\n            break;\n        case 'plantae':\n            icon = 'fas fa-leaf';\n            break;\n    }\n    return icon;\n}","import { contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nexport const getDefinitionTests = itemsInThisRound => {\n    \n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        return getDefinitionTest(item);\n\n    });\n\n    return tests;\n};\n\nconst getDefinitionTest = async item => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const number = config.isPortraitMode ? 4 : 4;\n\n    const taxon = matchTaxon(item.taxonomy, iconicTaxa).value;\n\n    let definitions = glossary.filter(definition => contains(definition.taxon, [ taxon, 'common' ]));\n\n    definitions = utils.shuffleArray(definitions);\n\n    const term = item.terms \n                    ? utils.shuffleArray(item.terms)[0] \n                    : item.genus\n                        ? item.genus.terms\n                            ? item.genus.terms[collection.itemIndex] \n                                ? item.genus.terms[collection.itemIndex] \n                                    : item.family\n                                    ? item.family.terms\n                                        ? utils.shuffleArray(item.family.terms)[0]\n                                        : null\n                                    : null\n                            : null\n                        : null;\n                    \n\n    const definition = !!term \n        ? definitions.find(definition => definition.term.toLowerCase() === term.toLowerCase())\n        : definitions[0];\n\n    const alternatives = take(number-1, take(number, utils.shuffleArray(definitions)).filter(d => d.term.toLowerCase() !== definition.term.toLowerCase())).map(d => utils.capitaliseFirst(d.definition));\n    \n    const question = definition.definition;\n    const answers = utils.shuffleArray([question, ...alternatives]);\n    const help = config.isLandscapeMode ? 'Select the correct answer' : 'Select correct answer';\n\n    return { question, answers, overrides : { question: definition.term, help, binomial: item.name, vernacularName: item.vernacularName } };\n};","import { contains, flatten } from 'ramda';\n\nimport { getTraitTests } from 'snapdragon-engine/bonus/tests/trait-test';\nimport { getBirdsongTests } from 'snapdragon-engine/bonus/tests/birdsong-test';\nimport { getLookalikeTests } from 'snapdragon-engine/bonus/tests/lookalike-test';\nimport { getDefinitionTests } from 'snapdragon-engine/bonus/tests/definition-test';\n\nconst getTests = async (collection, itemIndices, bonusLayouts, lessonName, levelName) => {\n\n    const itemsInThisRound = collection.items.map((item, index) => {\n        if(contains(index, itemIndices)) {\n            return { ...item, itemIndex: index }\n        } else return null;        \n    }).filter(item => item);\n\n    const addLayoutToTest = traitTests => {\n        const lessonReadyTests = traitTests.map(traitTest => {             \n            traitTest.itemIndex = traitTest.item ? traitTest.item.itemIndex : 0; \n            traitTest = { ...traitTest, ...layout, lessonName, levelName };            \n            return traitTest;\n        });\n        return lessonReadyTests;\n    };\n\n    const getTraitTypeTests = itemsInThisRound => {\n        return new Promise(resolve => resolve(getTraitTests(itemsInThisRound)));\n    };\n\n    const getTraitTypeBirdsongTests = (itemsInThisRound, collection) => {\n        return new Promise(resolve => resolve(getBirdsongTests(itemsInThisRound, collection)));\n    };\n\n    const getTraitTypeLookalikeTests = itemsInThisRound => {\n        return getLookalikeTests(itemsInThisRound);     \n    };\n\n    const getDefinitionTypeTests = itemsInThisRound => {\n        return getDefinitionTests(itemsInThisRound);\n    };\n\n    let traitTests = [], birdsongTests = [], lookalikeTests = [], definitionTests = [];\n\n    let layout = bonusLayouts.find(layout => layout.name === \"trait-property-match\");\n\n    if(layout) {\n\n        if(layout.types) {\n\n            const getResolvedPromises = async () => {\n            const promises = await layout.types.map(async type => {\n                switch(type) {\n                    case 'traits':\n                        return getTraitTypeTests(itemsInThisRound);\n                    case 'song':\n                        return getTraitTypeBirdsongTests(itemsInThisRound, collection);\n                    case 'lookalikes':\n                        return getTraitTypeLookalikeTests(itemsInThisRound);\n                    case 'definition':                        \n                        return getDefinitionTypeTests(itemsInThisRound);\n                }\n            });\n\n            const testGroups = await Promise.all(promises);\n\n            const tests = testGroups.map(group => {\n                group = group.filter(g => g.question);\n                return addLayoutToTest(group);\n            });\n\n            return tests;\n        };\n\n        traitTests = await getResolvedPromises();\n\n        } else {\n            traitTests = getTraitTypeTests(itemsInThisRound);\n            birdsongTests = getTraitTypeBirdsongTests(itemsInThisRound, collection);            \n            lookalikeTests = getTraitTypeLookalikeTests(itemsInThisRound);\n            definitionTests = getDefinitionTypeTests(itemsInThisRound);\n        }\n    }\n\n    return flatten(traitTests);\n};\n\nexport const bonusHandler = {\n    getTests\n};","import{ contains } from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\n\nconst getItemLayouts = async itemQuestions => {\n    if(!itemQuestions.questionIds) return new Promise(resolve => resolve(null));\n    // return Promise.all(itemQuestions.questionIds.map(async id => await firestore.getQuestionById(id, itemQuestions.name)));\n};\n\nconst getLayouts = async (collection, roundItemNames) => {\n\n    if(collection.species) {\n    \n        const species = collection.species.filter(sp => contains(sp.name, roundItemNames));\n        const speciesQuestions = species.filter(sp => sp.questions);\n\n        if(speciesQuestions.length > 0) {\n            return Promise.all(speciesQuestions.map(sq => sq.questions));\n        }\n\n        const itemsQuestions = collection.items.filter(i => contains(i.name, roundItemNames)).map(i => { return { name: i.name, questionIds: i.questionIds }});\n        \n        if(itemsQuestions) {\n            const promises = itemsQuestions.map(async (itemQuestions) => {\n                if(itemQuestions.questionIds) return await getItemLayouts(itemQuestions);\n            });\n            return await Promise.all(promises);\n        } else {\n            return new Promise(resolve => resolve(null));\n        }\n    } else {\n        return [];\n    }\n}\n\nexport const providerHandler = {\n    getLayouts\n};","import { store } from 'redux/store';\nimport { types } from 'redux/actions/action-types';\n\nconst makeActionCreator = action => {\n    return function (value, meta) {\n      return { \n        type: action,\n        data: value,\n        meta: meta\n      }\n    }\n  }\n\nconst changeLessonPlans = makeActionCreator(types.CHANGE_LESSON_PLANS);\nconst changeLessonPlan = makeActionCreator(types.CHANGE_LESSON_PLAN);\nconst nextLesson = makeActionCreator(types.NEXT_LESSON);\nconst updateScore = makeActionCreator(types.UPDATE_SCORE);\nconst updateTraitScore = makeActionCreator(types.UPDATE_TRAIT_SCORE);\nconst nextLayout = makeActionCreator(types.NEXT_LAYOUT);\nconst nexItem = makeActionCreator(types.NEXT_ITEM);\nconst endRevision = makeActionCreator(types.END_REVISION);\nconst updateHistory = makeActionCreator(types.UPDATE_HISTORY)\nconst newCollection = makeActionCreator(types.SET_ACTIVE_COLLECTION);\nconst updateCollection = makeActionCreator(types.UPDATE_COLLECTION);\nconst resetCollection = makeActionCreator(types.RESET_COLLECTION);\nconst updateCollections = makeActionCreator(types.UPDATE_COLLECTIONS);\nconst changeCollectionItems = makeActionCreator(types.UPDATE_COLLECTION_ITEMS);\nconst nextRound = makeActionCreator(types.NEXT_ROUND);\nconst nextLevel = makeActionCreator(types.NEXT_LEVEL);\nconst updateConfig = makeActionCreator(types.UPDATE_CONFIG);\nconst stopStartLesson = makeActionCreator(types.STOP_START_LESSON);\nconst selectCollection = makeActionCreator(types.SELECT_COLLECTION);\nconst traitValuesHandler = makeActionCreator(types.UPDATE_LANGUAGE);\nconst updateEnums = makeActionCreator(types.UPDATE_ENUMS);\nconst updateUser = makeActionCreator(types.UPDATE_USER);\nconst updateLesson = makeActionCreator(types.UPDATE_LESSON);\nconst saveLesson = makeActionCreator(types.SAVE_LESSON);\nconst removeSavedLesson = makeActionCreator(types.REMOVE_LESSON);\nconst updateVideoPlayer = makeActionCreator(types.UPDATE_VIDEO_PLAYER);\nconst createQuickFire = makeActionCreator(types.CREATE_QUICKFIRE);\nconst updateQuickFire = makeActionCreator(types.UPDATE_QUICKFIRE);\nconst createGlossary = makeActionCreator(types.CREATE_GLOSSARY);\nconst clickEvent = makeActionCreator(types.CLICK_EVENT);\n\nconst boundchangeLessonPlan = data => store.dispatch(changeLessonPlan(data));\nconst boundchangeLessonPlans = data => store.dispatch(changeLessonPlans(data));\nconst boundNextLesson = data => store.dispatch(boundAsyncNextLesson(data));\n\nconst boundAsyncNextLesson = func => {\n  return function(dispatch) {\n    return func.then(response => {\n      return dispatch(nextLesson(response));\n    })\n  }  \n};\n\nconst boundUpdateScore = data => store.dispatch(updateScore(data));\nconst boundUpdateTraitScore = data => store.dispatch(updateTraitScore(data));\nconst boundNextLayout = data => store.dispatch(nextLayout(data));\nconst boundNextItem = data => store.dispatch(nexItem(data,{delay:500}));\nconst boundEndRevision = data => store.dispatch(endRevision(data));\nconst boundUpdateHistory = data => store.dispatch(updateHistory(data));\nconst boundSetActiveCollection = data => store.dispatch(newCollection(data));\nconst boundUpdateCollection = data => store.dispatch(updateCollection(data));\nconst boundResetCollection = data => store.dispatch(resetCollection(data));\nconst boundUpdateCollections = data => store.dispatch(updateCollections(data));\nconst boundUpdateCollectionItems = data => store.dispatch(changeCollectionItems(data));\nconst boundNextRound = data => store.dispatch(nextRound(data));\nconst boundNextLevel = data => store.dispatch(nextLevel(data));\nconst boundUpdateConfig = data => store.dispatch(updateConfig(data));\nconst boundStopStartLesson = data => store.dispatch(stopStartLesson(data));\nconst boundSelectCollection = data => store.dispatch(selectCollection(data));\nconst boundUpdateLanguage = data => store.dispatch(traitValuesHandler(data));\nconst boundUpdateEnums = data => store.dispatch(updateEnums(data));\nconst boundUpdateUser = data => store.dispatch(updateUser(data));\nconst boundUpdateLesson = data => store.dispatch(updateLesson(data));\nconst boundSaveLesson = data => store.dispatch(saveLesson(data));\nconst boundRemoveSavedLesson = data => store.dispatch(removeSavedLesson(data));\nconst boundUpdateVideoPlayer = data => store.dispatch(updateVideoPlayer(data));\nconst boundCreateQuickFire = data => store.dispatch(createQuickFire(data));\nconst boundUpdateQuickFire = data => store.dispatch(updateQuickFire(data));\nconst boundCreateGlossary = data => store.dispatch(createGlossary(data));\nconst boundClickEvent = data => store.dispatch(clickEvent(data));\n\nexport const actions = {\n    boundchangeLessonPlans,\n    boundchangeLessonPlan,\n    boundNextLesson,\n    boundUpdateScore,\n    boundUpdateTraitScore,\n    boundNextItem,\n    boundNextLayout,\n    boundEndRevision,\n    boundUpdateHistory,\n    boundSetActiveCollection,\n    boundUpdateCollection,\n    boundResetCollection,\n    boundUpdateCollections,\n    boundUpdateCollectionItems,\n    boundNextRound,\n    boundNextLevel,\n    boundUpdateConfig,\n    boundStopStartLesson,\n    boundSelectCollection,\n    boundUpdateLanguage,\n    boundUpdateEnums,\n    boundUpdateLesson,\n    boundSaveLesson,\n    boundRemoveSavedLesson,\n    boundUpdateVideoPlayer,\n    boundUpdateUser,\n    boundCreateQuickFire,\n    boundUpdateQuickFire,\n    boundCreateGlossary,\n    boundClickEvent\n};","import{ contains } from 'ramda';\n\nconst show = (elem) => {\n    if(!elem) return;\n\telem.classList.add('is-visible');\n};\n\nconst hide = (elem) => {\n    if(!elem) return;\n\telem.classList.remove('is-visible');\n};\n\nconst toggle = (elem) => {\n    if(!elem) return;\n\telem.classList.toggle('is-visible');\n};\n\nconst hasClass = (elem, className) => {\n    if(!elem) return false;\n    const classArray = [ ...elem.classList ];\n    return contains(className, classArray);\n};\n\nconst removeClass = (elem, className) => {\n    if(hasClass(elem, className)) {\n        elem.classList.forEach(c => {\n            if(c === className) {\n                elem.classList.remove(c);\n            }\n        });\n    }\n};\n\nexport const elem = {\n    show, hide, toggle, hasClass, removeClass\n};","import{ isEmpty, compose, symmetricDifference, contains, clone } from 'ramda';\n\nexport const cleanText = text => {\n    return text.term ? text.term.toLowerCase() : text.toLowerCase().replace(/ /g,'');\n};\n\nexport const isAnswerEqualToQuestion = (question, answer) => {\n\n\n    const eqValues = compose(isEmpty, symmetricDifference);\n\n    return eqValues(cleanText(question), cleanText(answer));\n};\n\nconst isAnswerCorrect = score => {\n\n    let isCorrect;\n\n    if(score.answeredIndex) {\n        return parseInt(score.answeredIndex) === score.answerIndex;\n    }\n\n    score.answer = score.answer.trim();\n\n    isCorrect = isAnswerEqualToQuestion(score.question, score.answer);\n\n    // score.clue = score.clue ? score.clue.toLowerCase().replace(/ /g,'') : null;\n\n    // isCorrect = score.clue ? score.answer.indexOf(score.clue) > -1 : isCorrect;\n\n    switch(score.taxon) {\n        case 'vernacular':\n            score.names = score.names.map(name => name.toLowerCase());\n            if(score.names && score.names.length > 0) {\n                const alternativeIsCorrect = contains(score.answer, score.names);                \n                if(!isCorrect && alternativeIsCorrect) score.alternativeAccepted = true;\n                isCorrect = isCorrect || alternativeIsCorrect;\n            }\n        break;\n    }\n    return isCorrect;\n};\n\nconst isTraitAnswerCorrect = score => {\n    const doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n    return doArraysHaveSameValues(score.answer, score.question);\n};\n\nexport const markTest = test => {\n\n    const score = clone(test);\n\n    score.success = score.trait ? isTraitAnswerCorrect(score) : isAnswerCorrect(score);\n    score.colour  = score.success ? 'snap-success' : 'snap-alert';\n    \n    return score;\n};","import{ clone } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nconst getIsReviewingLesson = (userAction, config) => {\n\n    let isNotReviewingLesson = true;\n  \n    if (userAction) {\n        if (config.isLandscapeMode) {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name || userAction.name === enums.userEvent.TOGGLE_SPECIES_LIST.name);\n        }\n        else {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name);\n        }\n    }\n  \n    return !isNotReviewingLesson;\n};\n\nconst overrideLesson = (userAction, config) => {\n    return !getIsReviewingLesson(userAction, config);\n};\n\nconst purgeLesson = () => {\n    persistor.purge();\n    window.location.reload(true);\n};\n\nconst clearGuide = () => {\n    const config = store.getState().config;\n    config.guide = initialConfig.guide;\n    actions.boundUpdateConfig(config);\n};\n\nconst getCollectionToLoad = (currentCollection, collections, selectedLessonCollectionId)  => {\n\n    const id = parseInt(selectedLessonCollectionId);\n  \n    let resume = true;\n        resume = resume && currentCollection.id > 0;\n        resume = resume && currentCollection.id === id;\n  \n    const collection = resume ? currentCollection : collections.find(c => c.id === id);\n  \n    return collection;\n};\n\nconst getLatestCounter = collection => { \n    const { counter, lessons } = store.getState();\n    const log = counter.log;\n    const index = log ? log.index : \n                lessons.find(l => l.collection.id === collection.id)\n                    ? lessons.find(l => l.collection.id === collection.id).counter.index\n                    : counter.index;\n  \n    return { index };\n};\n\nconst getUserLessonState = (lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter) => {\n\n    let restoredLesson = lessons.find(l => l.name === collectionToLoad.name);\n\n    let lesson;\n  \n    if(restoredLesson) {\n      lesson = restoredLesson;\n      lesson.collection = collectionToLoad;\n      if(lesson.lesson.isNextRound) {\n        lesson.score = clone(progressState.score);\n      }\n    } else {\n      lesson = { \n        collection: collectionToLoad, \n        counter: { ...counter, index: 0 },\n        lesson: savedLesson || { currentRound: 1, rounds: 0, isNextRound: true },\n        layout: null,\n        history: null,\n        score: clone(progressState.score)\n      };\n    }\n    \n    return lesson;\n};\n  \nexport const lessonStateHelper = {\n    getIsReviewingLesson,\n    overrideLesson,\n    purgeLesson,\n    clearGuide,\n    getCollectionToLoad,\n    getLatestCounter,\n    getUserLessonState\n};","// https://github.com/jcgregorio/stamp/wiki\n\nvar Stamp = Stamp || {};\n\n(function(ns) {\n\n  ns.Context = function() {\n  };\n\n  ns.Context.prototype.import = function(id) {\n    return document.importNode(this.doc.querySelector('#'+id).content, true);\n  };\n\n  var re = /{{\\s([\\w\\.\\^]+)\\s}}/g;\n\n  function filterState(address, state) {\n    var mystate = state;\n    for (var i = 0, len = address.length; i < len; i++) {\n      var a = address[i];\n      if (a in mystate) {\n        mystate = mystate[a];\n      } else if (mystate.hasAttribute && mystate.hasAttribute(a)) {\n        mystate = mystate.getAttribute(a);\n      } else {\n        throw a + \" is not a valid property of \" + JSON.stringify(mystate);\n      }\n    }\n    return mystate;\n  }\n\n  function ssplice(str, index, count, add) {\n    return str.slice(0, index) + add + str.slice(index + count);\n  }\n\n  let match;\n  function addressOf(s) {\n    if ((match = re.exec(s)) != null) {\n      return match[1].split(\".\");\n    } else {\n      return null;\n    }\n  }\n\n  function expandString(s, state) {\n    var match;\n    var matches = [];\n    re.exec(\"\");\n    while ((match = re.exec(s)) != null) {\n      matches.push(match);\n    }\n\n    for (var i = matches.length - 1; i >= 0; i--) {\n      match = matches[i];\n      var address = match[1].split(\".\");\n      var m = filterState(address, state);\n      s = ssplice(s, match.index, match[0].length, m);\n    }\n    if (matches.length) {\n      return s;\n    }\n    return null;\n  }\n\n  function cloneAllNodes(a) {\n    var clones = [];\n    for (var i = 0, len = a.length; i < len; i++) {\n      if (a[i].nodeName == \"TEMPLATE\") {\n        clones.push(a[i].content.cloneNode(true));\n      } else {\n        clones.push(a[i].cloneNode(true));\n      }\n    }\n    return clones;\n  }\n\n  function appendChildren(ele, nodes) {\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      ele.appendChild(nodes[i]);\n    }\n  }\n\n  function removeChildren(ele) {\n    ele.innerHTML = \"\";\n  }\n\n  function replaceChildren(ele, nodes) {\n    ele.innerHTML = \"\";\n    appendChildren(ele, nodes);\n  }\n\n  function expand(ele, state) {\n    if (ele.nodeName === \"#text\") {\n      m = expandString(ele.textContent, state);\n      if (m != null) {\n        ele.textContent = m;\n      }\n      return ele;\n    }\n    if (!Array.isArray(ele)) {\n      ele = [ele];\n    }\n    for (var j = 0, len = ele.length; j < len; j++) {\n      var e = ele[j];\n      var processChildren = true;\n      if (e.nodeName === \"#text\") {\n        m = expandString(e.textContent, state);\n        if (m != null) {\n          e.textContent = m;\n        }\n      } else {\n        if (e.attributes != undefined) {\n          for (var i = e.attributes.length-1; i >= 0; i--) {\n            var attr = e.attributes[i];\n            if (attr.name.indexOf('data-repeat') === 0) {\n              processChildren = false;\n              var parts = attr.name.split('-');\n              if (parts.length !== 3 && parts.length !== 4) {\n                throw \"Repeat format is data-repeat-<name>[-<iterName>]. Got \" + attr.name;\n              }\n              var name = parts[2];\n              var iterName = parts[3];\n              var tpl = [];\n              while (e.firstChild) {\n                tpl.push(e.removeChild(e.firstChild));\n              }\n              var address = [attr.value];\n              if (attr.value.indexOf(\"}}\") !== -1) {\n                address = addressOf(attr.value);\n              }\n              if (address === null) {\n                throw attr.value + \" doesn't contain an address.\";\n              }\n              var childState = filterState(address, state);\n              var instanceState = {\n                \"^\": state,\n              };\n              if (Object.prototype.toString.call( childState) === '[object Array]') {\n                iterName = iterName || \"i\";\n                for (var k = 0; k < childState.length; k++) {\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] =  childState[k];\n                  instanceState[iterName] = k;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              } else {\n                iterName = iterName || \"key\";\n                var keys = Object.keys(childState).sort();\n                for (var m = 0; m < keys.length; m++) {\n                  var key = keys[m];\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] = childState[key];\n                  instanceState[iterName] = key;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              }\n              e.removeAttribute(attr.name);\n            } else {\n              m = expandString(attr.value, state);\n              if (m != null) {\n                var name = attr.name;\n                if (name.charAt(name.length-1) == \"-\") {\n                  e.removeAttribute(attr.name);\n                  e.setAttribute(attr.name.slice(0, -1), m);\n                } else {\n                  attr.value = m;\n                }\n              }\n            }\n          }\n        }\n      }\n      if (processChildren) {\n        var childEle = e.firstChild;\n        while (childEle != null) {\n          var nextSibling = childEle.nextSibling;\n          if (childEle.nodeName == \"TEMPLATE\") {\n            var replacement = expand(childEle.content.cloneNode(true), state);\n            while (replacement[0].childNodes.length > 0) {\n              e.insertBefore(replacement[0].firstChild, childEle);\n            }\n            e.removeChild(childEle);\n          } else {\n            expand(childEle, state);\n          }\n          childEle = nextSibling;\n        }\n      }\n    }\n    return ele;\n  };\n\n  function expandInto(target, ele, state) {\n    replaceChildren(target, expand(ele, state));\n  }\n\n  ns.appendChildren = appendChildren;\n  ns.expand = expand;\n  ns.expandInto = expandInto;\n})(Stamp);\n\nexport const renderTemplate = (context, content, parent, clone) => {\n    const contentClone = clone || document.importNode(content, true);    \n    var ctx = new Stamp.Context();\n    var expanded = Stamp.expand(contentClone, context);\n    Stamp.appendChildren(parent, expanded);\n};","import { scaleImage } from 'ui/helpers/image-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport rightsAttributionTemplate from 'ui/screens/common/rights-attribution-template.html';\n\nexport const handleRightsAttribution = image => {\n\n    const template = document.createElement('template');\n          template.innerHTML = rightsAttributionTemplate;\n\n    let text;\n\n    switch(image.license) {\n        case 'http://creativecommons.org/licenses/publicdomain/':\n            text = 'CC PD';\n            break;\n        case 'http://creativecommons.org/licenses/by/2.0/':        \n            text = 'CC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/2.0/':\n            text = 'CC BY SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/2.0/':\n            text = 'CC BY NC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/2.0/':\n            text = 'CC BY NC-SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by/3.0/':        \n            text = 'CC 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/3.0/':\n            text = 'CC BY SA 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/3.0/':\n            text = 'CC BY NC-SA 3.0';\n            break;        \n        case 'http://creativecommons.org/licenses/by/4.0/':        \n            text = 'CC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/4.0/':\n            text = 'CC BY NC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/4.0/':\n            text = 'CC BY NC-SA 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/4.0/':\n            text = 'CC BY SA 4.0';\n            break;\n        default: \n            text = image.license || '';\n            break;\n    };\n\n    const licence = { text, url: image.medium };\n    const title = image.title;\n    const author = image.rightsholder || image.rightsHolder || 'Public domain';\n    const source = image.source || '';\n    const identifier = `${image.itemName.replace(' ', '_')}`;\n    const large = image.large || scaleImage(image).large;\n    \n    let parent = document.querySelector(`.js-attribution-layer.${identifier}`);\n        parent = parent || document.querySelector(`.js-attribution-layer`);\n        parent.innerHTML = '';\n\n    renderTemplate({title,author,source,licence,large}, template.content, parent);\n\n    const rightsAttribution = parent.querySelector('.js-rights-attribution .js-copyright');\n    const rightsLink = parent.querySelector('.js-rights-link .js-copyright');\n    const indicators = document.querySelector(`.carousel-indicators`);\n\n    const showAttribution = event => {\n        rightsAttribution.parentElement.classList.add('hide-important');\n        rightsLink.parentElement.classList.remove('hide-important');\n        indicators.classList.remove('hide-important');\n        rightsLink.removeEventListener('click', showLink), true;\n        rightsLink.addEventListener('click', showLink, true);\n    };\n\n    rightsAttribution.removeEventListener('click', showAttribution, true);\n    rightsAttribution.addEventListener('click', showAttribution, true);\n\n    const showLink = event => {\n        rightsAttribution.parentElement.classList.remove('hide-important');\n        rightsLink.parentElement.classList.add('hide-important');\n        indicators.classList.add('hide-important');\n        rightsAttribution.removeEventListener('click', showAttribution, true);\n        rightsAttribution.addEventListener('click', showAttribution, true);\n    };\n\n    rightsLink.removeEventListener('click', showLink), true;\n    rightsLink.addEventListener('click', showLink, true);\n\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { scaleImage, imageMatch, imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { handleRightsAttribution } from 'ui/screens/common/rights-attribution';\n\nimport imageSliderTemplate from 'ui/screens/common/image-slider-template.html';\n\nconst selectActiveImage = (image, parent, config) => {\n    parent.querySelectorAll('.carousel-item').forEach(i => {\n        const elemSrc = i.querySelector('img').dataset;\n        if(imageMatch(elemSrc, image.dataset || image)) {\n            i.classList.add('active');\n            return;\n        }\n    });    \n    \n    const activeNode = parent.querySelector('.imageSlider.carousel .carousel-item.active img'); \n    \n    const indicators = document.querySelectorAll('.carousel-indicators li');\n          indicators.forEach(i => {\n              if(i.dataset && activeNode.dataset && i.dataset.slideTo === activeNode.dataset.index) {\n                  i.classList.add('active');\n              }\n          });\n\n    let img = image.dataset || image;\n    img.title = img.title || img.itemName;\n    img = scaleImage(img);\n    handleRightsAttribution(img);\n\n    return img;\n};\n\nconst carouselControlHandler = (event, parentScreen = document) => {\n\n    setTimeout(() => {\n\n        const activeNode = parentScreen.querySelector(`${event.target.dataset.slider} .carousel-item.active img`);\n        const image = activeNode.dataset;   \n        \n        handleRightsAttribution(image);    \n\n    }, 750);\n};\n\nexport const imageSlider = sliderArgs => {\n\n    const { config, images, parent, image, parentScreen = document, identifier = '' } = sliderArgs;\n\n    const slider = document.createElement('template');\n          slider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n\n    images.forEach((img, i) => {\n        img.index = i;\n        img.rightsHolder = img.rightsHolder || 'Public domain';\n        img.provider = img.provider || 'eol';\n        img = scaleImage(img);\n    });\n\n    snapLog('imageSlider, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images, identifier }, slider.content, parent);\n\n    let next = document.querySelector(`#imageSlider_${identifier} .carousel-control-next-icon`);\n    let prev = document.querySelector(`#imageSlider_${identifier} .carousel-control-prev-icon`);\n\n    if(config.isPortraitMode) {        \n        next.classList.add('concealed');\n        prev.classList.add('concealed');\n    }\n\n    setTimeout(() => {\n        selectActiveImage(image || images[0], parent, config);        \n    },250);\n\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-prev`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-next`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n\n    document.addEventListener('swiped-left', function(e) {\n        next.click();\n    });\n\n    document.addEventListener('swiped-right', function(e) {\n        prev.click();\n    });\n};\n\nexport const imageSideBySlider = (slides, parent, config) => {\n\n    const sideBySlider = document.createElement('template');\n          sideBySlider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n    parent.classList.add('slideBySliderContainer');\n\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(3)`).innerHTML = '';\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(4)`).innerHTML = '';\n\n    slides.forEach((slide, index) => {\n\n        const identifier = slide.id.replace(' ', '_') || index + 1;\n\n        const header = document.querySelectorAll(`#imageComparisonModal .js-modal-image-title > span`)[index];\n              header.innerHTML = `<span class=\"common-name\">${slide.images[0].itemCommon}</span><span class=\"latin-name\">${slide.images[0].itemName}</span>`;\n        const item = { name: slide.images[0].itemName, itemCommon: slide.images[0].itemCommon, images: slide.images };\n        const images = prepImagesForCarousel(item, config, imageUseCases.CAROUSEL);\n        \n        snapLog('imageSideBySlider, image medium values:', images.map(i => i.medium));\n\n        renderTemplate({ images, identifier }, sideBySlider.content, parent);\n        \n        const activeNode = document.querySelector(`#imageSlider_${identifier} .carousel-item`);\n              activeNode.classList.add('active');\n        handleRightsAttribution(images[0]);\n\n        const originalImageLink = document.querySelector(`#imageSlider_${identifier} .js-expand`);\n        if(originalImageLink) originalImageLink.classList.add('hide-important');\n    });\n};","import{ clone } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\n\nconst stripImageUrlOfScaleAndPrefix = img => {  \n    const prefix = img.provider === 'inat' ? 'https://static.inaturalist.org/photos/' : 'https://content.eol.org/data/media/';\n    if(!img.url || typeof img.url === 'object') return '';\n    let part = img.url.replace('.260x190.jpg', '');\n        part = part.replace('.98x68.jpg', '');\n        part = part.replace('.jpg', '');\n        part = part.replace(prefix, '');\n\n    if(img.provider === 'inat') {\n      part = part.split('?')[0];\n    }\n\n    return part;\n};\n\nexport const imageUseCases = {\n    SPECIES_LIST: 'Species list',\n    SPECIES_CARD: 'Species card',\n    TAXON_CARD: 'Taxon card',\n    SPECIES_SPECIMENS: 'Species specimens',\n    NON_TAXON_CARD: 'Non-taxon card',\n    VISUAL_MATCH: 'Visual match',\n    MIXED_SPECIMENS: 'Mixed specimens',\n    CAROUSEL: 'Carousel',\n    TEXT_ENTRY: 'Text entry',\n    ACTUAL_SIZE: 'Actual size',\n    SPECIES_GRID: 'Species grid'\n}\n\nexport const denormaliseImages = images => {\n    const denormalisedImages = images.map(image => {\n        image.photographersName = image.photographer ? image.photographer.full_name || '' : '';\n        return image;\n    });\n    return denormalisedImages;\n};\n\nexport const imageMatch = (src1, src2) => {\n    if(!src2) return false;\n    src1 = stripImageUrlOfScaleAndPrefix(src1);\n    src2 = stripImageUrlOfScaleAndPrefix(src2);\n    const isActiveImage = src1 === src2;\n    return isActiveImage;\n};\n\nexport const prepImageForCarousel = (image, index, item, config, useCase) => {\n    let img = { \n        index: index + 1, \n        ...image,\n        url: scaleImage(image, useCase, config).medium,\n        // large: scaleImage({ url:image.src }).large,\n        itemName: item.name,\n        itemCommon: item.itemCommon,\n        rightsHolder: image.rightsHolder || '',\n        photographersName : image.photographer ? image.photographer.full_name || '' : '',\n        provider: image.provider || ''       \n    };\n    if(image.src) {\n        img = { ...img, ...image.src, medium: image.medium };\n    }\n    return img;\n};\n\nexport const prepImagesForCarousel = (item, config, useCase) => {\n    const images = item.images.map((image, index) => { \n        return prepImageForCarousel(image, index, item, config, useCase);\n    });\n    return images;\n};\n\nexport const scaleImage = image => {\n\n    if(!image.url) {\n        return image;\n    }\n\n    image.part = stripImageUrlOfScaleAndPrefix(image);\n\n    if(image.provider === 'inat') {\n        image.small = `https://static.inaturalist.org/photos/${image.part}`;\n        image.medium = image.part.replace('small', 'medium');\n        image.medium = `https://static.inaturalist.org/photos/${image.medium}`;\n        image.large = image.part.replace('small', 'large');\n        image.large = `https://static.inaturalist.org/photos/${image.large}`;\n        return image;\n    } else {\n        image.small = `https://content.eol.org/data/media/${image.part}.98x68.jpg`;\n        image.medium = `https://content.eol.org/data/media/${image.part}.260x190.jpg`;\n        image.large = `https://content.eol.org/data/media/${image.part}.jpg`;\n        return image;\n    }\n    \n};\n\nexport const modalImagesHandler = (images, item, collection, config, displayNameType) => {\n    images.forEach(image => {\n        modalImageHandler(image, item, collection, config, displayNameType);\n    });\n};\n\nconst handleImageSelectionFromList = (image, item, collection, config, displayNameType = 'binomial') => {\n\n    const parent = document.querySelector('#imageModal .js-modal-image');\n    const selectedItem = item || collection.items.find(item => item.name === image.dataset.itemName);\n    let images = clone(selectedItem.images.map((image, index) => {\n        selectedItem.vernacularName = itemProperties.getVernacularName(selectedItem, config);\n        image = scaleImage(image, imageUseCases.CAROUSEL, config);\n        return { ...image, itemName: selectedItem.name, itemCommon: selectedItem.vernacularName };\n    }));\n    images = denormaliseImages(images);\n    const selectedItemImage = selectedItem.images.find(i => imageMatch(i,image.dataset));\n    const selectedImage = { dataset: { ...image.dataset, ...selectedItemImage } };\n    imageSlider({ config, images, parent, image: selectedImage, identifier: selectedImage.dataset.itemName.replace(' ', '_') });\n    let displayName = '';\n    switch(displayNameType) {\n        case 'biomial':\n            displayName = selectedItem.name;\n            break;\n        case 'vernacular':\n            displayName = selectedItem.vernacularName;\n            break;\n        case 'withheld':\n            displayName = 'Species name withheld';\n            break;\n        default:\n            displayName = `<span>${selectedItem.vernacularName}</span> <span class=\"latin-name\">${selectedItem.name}</span>`;\n    }\n\n    document.querySelector('#imageModal .js-modal-image-title span:nth-child(1)').innerHTML = displayName;\n};\n\nexport const modalImageHandler = (image, item, collection, config, displayNameType = 'binomial') => {\n    image.addEventListener('click', e => {\n        if(!item) return;\n        handleImageSelectionFromList(image, item, collection, config, displayNameType);        \n    }, true);\n};\n","import { iconicTaxa, matchIcon, matchRank } from 'api/snapdragon/iconic-taxa';\n\nconst mushroomIcon = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg-icon>';\n\nexport const renderIcon = (taxonomy, rootNode) => {\n\n    if(taxonomy.kingdom.toLowerCase() === 'fungi') {\n\n        const iconicIconContainer = rootNode.querySelector('.js-iconic-icon');\n\n        iconicIconContainer.innerHTML = `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n\n    } else {\n\n        const iconicIcon = rootNode.querySelector('.js-iconic-icon i');\n\n        const classes = matchIcon(taxonomy, iconicTaxa).split(' ');\n\n        classes.forEach(c => iconicIcon.classList.add(c));   \n    }\n\n    return rootNode.querySelector('.js-iconic-icon');\n};\n\nexport const returnIcon = item => {\n\n    if(!item.taxonomy) return '';\n\n    if(item.taxonomy.kingdom.toLowerCase() === 'fungi') {\n        return `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n    } else {\n        return `<i class=\"small-icon ${matchIcon(item.taxonomy, iconicTaxa)}\"></i>`;\n    }\n};\n\nexport const returnTaxonIcon = taxon => {\n\n  if(!taxon) return;\n\n  if(taxon.toLowerCase() === 'fungi') {\n      return `<span class=\"iconic-taxa-categories-selected\">${mushroomIcon}</span>`;\n\n  } else {\n      return `<span><i class=\"small-icon ${matchRank(taxon)}\"></i></span>`;\n  }\n};","export const getBirdSong = (item, node, portrait) => {\n\n    if(item.taxonomy.class.toUpperCase() === 'AVES') {\n\n        const endpoint = `https://cors-anywhere.herokuapp.com/http://www.xeno-canto.org/api/2/recordings?query=${item.name} q:A`;\n\n        async function fetchAsync (endpoint) {\n\n            let response = await fetch(endpoint);\n            \n            let data = await response.json();\n            \n            return data;\n        }\n\n        const loadPlayer = id => {\n            const url = `https://www.xeno-canto.org/${id}/embed?simple=1`;\n            portrait ? node.dataset.src = url : node.src = url;\n            if(portrait) {\n                node.classList.remove('bird-song-icon-disabled');\n                node.classList.add('bird-song-icon');\n            } else {\n                node.parentElement.classList.add('bird-song-spacing');\n            }\n        };\n\n        const playerId = item.traits.song.value[0];\n            \n        if(playerId) {\n            loadPlayer(playerId);\n        } else {\n            fetchAsync(endpoint).then(data => {        \n                const recording = data.recordings[0];\n                loadPlayer(recording.id);\n            });\n        }\n    } else {\n        node.style.display = 'none';\n        document.querySelector('.bird-song').style.display = 'none';\n    }\n}","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageSideBySlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { firestore } from 'api/firebase/firestore';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\nimport visualComparisonTemplate from 'ui/screens/common/look-alikes-link-template.html';\n\nexport const lookalikeSpecies = (item, config, rootNode = document) => {\n    \n    const lookalikes = item.traits.lookalikes || item.traits['look-alikes'];\n\n    if(lookalikes) {\n        \n        const matchTemplate = document.createElement('template');\n              matchTemplate.innerHTML = visualComparisonTemplate;\n        const lookalikeParent = rootNode.querySelector('.js-lookalikes');\n\n        const slides = [];\n        const names = [];\n        const scientificNames = [];\n\n        let species;\n\n        async function renderLookalikes() {\n\n            const readyLookalikesForRendering = async () => {\n\n                species = [ ...lookalikes.map(lookalike => lookalike.lookalike), { name: item.name, description: lookalikes[0].description } ];\n\n                for (let lookalike of species) {\n\n                    const lookalikeItem = await firestore.getSpeciesByName(lookalike.name);\n\n                    if(!lookalikeItem) return;\n                    \n                    lookalikeItem.vernacularName = itemProperties.getVernacularName(lookalikeItem, config);\n                    names.push(lookalikeItem.vernacularName);\n                    scientificNames.push(lookalikeItem.name);\n    \n                    const images = lookalikeItem.images.map((img, index) => { \n\n                        const url = scaleImage({ url: img.url }, imageUseCases.CAROUSEL, config);\n\n                        return { \n                                index: index + 1, \n                                src: { ...img, url: url.medium },\n                                url: url.medium,\n                                itemName: lookalikeItem.name, \n                                itemCommon: lookalikeItem.vernacularName };\n                    });\n    \n                    slides.push({ id: lookalikeItem.name, images });\n                };\n            };\n\n            await readyLookalikesForRendering();\n\n            if(slides.length === 0) return;\n\n            lookalikeParent.innerHTML = '';\n\n            renderTemplate({slides, names: names.join(', ')}, matchTemplate.content, lookalikeParent);\n\n            const speciesComparisonLink = rootNode.querySelector('.js-compare-species-link');\n\n            speciesComparisonLink.classList.remove('hide');\n\n            const getTrait = async (itemName, parent) => {\n    \n                const item = await firestore.getSpeciesByName(itemName);\n                item.traits = await firestore.getTraitsBySpeciesName(item.name);\n                    \n                if(item.taxonomy.class.toLowerCase() === 'aves') {\n    \n                    if(item.traits && Object.keys(item.traits).length === 0) return;\n    \n                    const xcID = item.traits['song'].value;\n    \n                    if(!xcID) return;\n        \n                    const mp3 = await firestore.getBirdsong(xcID);\n    \n                    const template = document.createElement('template');\n                          template.innerHTML = audioMediaTemplate;\n                    \n                    renderTemplate({ mp3, title: item.name }, template.content, parent);\n                }\n            }\n    \n            speciesComparisonLink.addEventListener('click', () => {\n    \n                const parent = document.querySelector('#imageComparisonModal .js-modal-image');\n                            \n                imageSideBySlider(slides, parent, true, config);\n                    \n                species.forEach(lookalike => {\n                    const identifier = `.description_${lookalike.name.replace(' ', '_')}`;\n                    const description = document.querySelector(identifier);\n                          description.innerHTML = lookalike.description;                    \n                    getTrait(lookalike.name, document.querySelector(`${identifier} + div`));\n                });\n                \n            });\n        }\n\n        renderLookalikes();   \n    }\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { firestore } from 'api/firebase/firestore';\n\nimport linkedTaxaLookalikeTemplate from 'ui/screens/common/linked-taxa-lookalike-template.html';\nimport linkedTaxaRelationshipTemplate from 'ui/screens/common/linked-taxa-relationship-template.html';\n\nexport const linkedTaxa = (item, config, parent, mode, isInCarousel, collection, activeTraitValue) => {\n\n    parent.innerHTML = '';\n    const template = document.createElement('template');\n\n    const addLinksToSpeciesCards = async mode => {        \n        \n        if(!isInCarousel) {            \n            const speciesCardLinks = mode === 'MODAL'\n                    ? document.querySelectorAll('#cardModal .js-test-card-container-link')\n                    : document.querySelectorAll('.js-test-card-container-link');\n            \n            speciesCardLinks.forEach(async link => {\n                link.addEventListener('click', async event => {\n                    const name = event.target.id || event.target.dataset.name;\n                    const selectedItem = await firestore.getSpeciesByName(name);\n                    selectedItem.species = itemProperties.getSpeciesName(item.name);\n                    renderCard({ name: 'Local species', items: [ selectedItem ] }, 'MODAL', selectedItem, document.querySelector('#cardModal .js-modal-body'), false);\n                });\n            });\n        }\n    };\n\n    const getLinkedTaxa = async () => {\n\n        const addVernacularName = async taxonName => {\n            const item = await firestore.getSpeciesByName(taxonName);\n            if(!item) return { name: taxonName, display: taxonName, isSpecies: false };\n            const vernacularName = itemProperties.getVernacularName(item, config);\n            return vernacularName ? { name: taxonName, display: taxonName, isSpecies: true } : { name: taxonName, display: taxonName, isSpecies: true };\n        };\n    \n        let relationshipTraits = item.traits ? item.traits.relationships : null;\n\n        let relationships = [];\n\n        if(relationshipTraits) {\n\n            const convertTraitsForDisplay = async () => {\n                return Promise.all(relationshipTraits.map(trait => {\n                    return  {\n                        type: trait.value[0],\n                        speciesA: trait.symbiont.name,\n                        speciesARole: trait.symbiont.role,\n                        speciesB: item.name,\n                        speciesBRole: trait.type,\n                        description: trait.description\n                    };\n                }));\n            };\n\n            relationships = await convertTraitsForDisplay();\n        }\n\n        let lookalikeTraits = item.traits ? item.traits.lookalikes : null;\n\n        let lookalikes = [];\n\n        if(lookalikeTraits) {\n\n            lookalikeTraits = lookalikeTraits.filter(species => species.lookalike.name === activeTraitValue);\n\n            const convertLookalikesForDisplay = async () => {\n                return Promise.all(lookalikeTraits.map(trait => {\n                    return  {\n                        species: item.name,\n                        speciesDescription: trait.description,\n                        lookalike: trait.lookalike.name,\n                        lookalikeDescription: trait.lookalike.description\n                    };\n                }));\n            };\n\n            lookalikes = await convertLookalikesForDisplay();\n        }\n\n        const addDisplayRules = relationships => {\n            for(const relationship of relationships) {\n                if(mode !== 'MODAL') {\n                    relationship.className = 'underline-link';\n                    relationship.modal = 'modal';\n                } else {\n                    relationship.className = '';\n                    relationship.modal = '';\n                }\n            };\n\n            return relationships;\n        };\n\n        if(relationships) {\n            relationships = addDisplayRules(relationships);\n            template.innerHTML = linkedTaxaRelationshipTemplate;\n            renderTemplate({ relationships }, template.content, parent);\n        }\n\n        if(lookalikes) {\n            lookalikes = addDisplayRules(lookalikes);        \n            template.innerHTML = linkedTaxaLookalikeTemplate;\n            renderTemplate({ lookalikes }, template.content, parent);\n        }\n        addLinksToSpeciesCards(mode);\n    }; \n\n    getLinkedTaxa();\n};","import { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { linkedTaxa } from 'ui/screens/common/linked-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport idBoxTemplate from 'ui/screens/common/id-box-template.html';\nimport detailsTemplate from 'ui/screens/common/info-detail-slider-template.html';\n\nexport const renderInfoDetails = (item, activeTraitKey, activeTraitValue, description) => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const template = document.createElement('template');\n    const parent = document.querySelector('.js-info-box-details');\n\n\n    if(!parent) return; // hack! currently the case with (non-species) taxon cards (see same below)\n\n    parent.innerHTML = '';\n\n    if(activeTraitKey.toLowerCase().indexOf('description') > -1) {        \n        template.innerHTML = idBoxTemplate;\n        renderTemplate({ id: description }, template.content, parent);\n        const text = document.querySelector('.id-box > div');\n              text.innerHTML = text.innerHTML.replace(/\\r?\\n/g, '<br />');        \n    }\n    else if(activeTraitKey.toLowerCase() === 'relationships' || activeTraitKey.toLowerCase() === 'lookalikes') {\n        const mode = 'MODAL';\n        const isInCarousel = true;\n        linkedTaxa(item, config, parent, mode, isInCarousel, collection, activeTraitValue);\n    } else {\n\n        const details = firestore.getDefinition(activeTraitValue, glossary, collection.glossary); // make dependent on a promise\n\n        if(!parent) return; // hack! taxon info sliders\n\n        if(details && details.length > 0) {            \n            details.forEach(detail => {\n                template.innerHTML = detailsTemplate;\n                detail.imgClassName = detail.img ? detail.img.url === '' ? 'hide-important' : '' : 'hide-important';\n                detail.img = detail.img || { url: '' }; \n            });\n            renderTemplate({ details }, template.content, parent);\n        }\n    }\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderInfoDetails } from 'ui/screens/common/info-detail-slider';\n\nimport infoSliderTemplate from 'ui/screens/common/info-slider-template.html';\n\nconst renderInfoSlider = (item, traits, parent, id) => {\n\n    const slider = document.createElement('template');\n          slider.innerHTML = infoSliderTemplate;\n\n    parent.innerHTML = '';\n\n    traits = traits.filter(t => t.value);\n\n    traits.forEach(trait => {        \n        trait.name = trait.name ? trait.name === 'ph' ? 'pH' : utils.capitaliseFirst(trait.name) : '';\n        if(trait.name.toLowerCase() === 'role') trait.name = trait.type || 'role';\n        trait.name = trait.name === 'Ph value' ? 'pH value' : trait.name; \n        trait.unit = trait.unit ? trait.unit.toLowerCase() === 'colour' ? '' : trait.unit : '';\n        trait.description = trait.value;\n        trait.value = trait.name.toLowerCase() === 'description' ? '< traits >' : trait.value.join(', ');\n    });\n    \n    let description = traits.find(trait => trait.name.toLowerCase() === 'description');\n        description = description ? description.description[0] : '';\n\n    renderTemplate({ id, traits }, slider.content, parent);\n\n    let activeTrait, activeTraitKey, activeTraitValue;\n    \n    activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item:nth-child(1)`);\n    activeTrait.classList.add('active');\n\n    const traitCount = traits.length;\n\n    if(traitCount === 1) {\n        parent.querySelectorAll('.carousel.slide a').forEach(control => {\n            control.setAttribute('disabled', 'disabled');\n            control.classList.add('inactive-icon');\n        });\n    }\n\n    const changeTraitHandler = event => {\n        setTimeout(() => {\n            activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item.active`);\n            activeTraitKey = activeTrait.querySelector('dt').innerHTML;\n            activeTraitValue = activeTrait.querySelector('dd').innerHTML;\n            renderInfoDetails(item, activeTraitKey, activeTraitValue, description);\n        }, 1000);\n    };\n\n    changeTraitHandler();\n\n    parent.querySelector(`#traitSlider${id} .carousel-control-prev`).addEventListener('click', changeTraitHandler);\n    parent.querySelector(`#traitSlider${id} .carousel-control-next`).addEventListener('click', changeTraitHandler);\n}\n\nexport const taxonInfoSlider = (item, traits, parent, mode) => {\n\n    const id = mode === 'MODAL' ? 'taxon_1' : 'taxon_0';\n\n    const convertedTraits = traitsHandler.convertTraitsToNameValuePairsArray(traits, traitsHandler.getTraitsToExclude());\n\n    if(convertedTraits.length > 0) {\n        renderInfoSlider(item, convertedTraits, parent, id);\n    }    \n};\n\nexport const infoSlider = (item, parent, mode) => {\n    \n    if(!traitsHandler.hasTraitPropeties(item.traits)) return;\n\n    let traits = traitsHandler.convertTraitsToNameValuePairsArray(item.traits, traitsHandler.getTraitsToExclude(), item);\n\n    if(item.traits.description) {\n        const description = {\n            name: 'description',\n            value: item.traits.description.value\n        }\n        traits = [ description, ...traits ];\n    }\n    \n    if(traits.length === 0) return;\n    \n    const id = mode === 'MODAL' ? 1 : 0;\n\n    renderInfoSlider(item, traits, parent, id);\n};","import { utils } from 'utils/utils';\n\nconst getHTML5Location = () => {\n\n  return new Promise(function (resolve, reject) {\n    function success(position) {\n      resolve([position.coords.latitude, position.coords.longitude]);\n    }\n\n    function error(e) {\n      logError('getHTML5Location', e);\n      resolve({\n        '0': 0,\n        '1': 0,\n      });\n    }\n\n    navigator.geolocation.getCurrentPosition(success, error);\n  });\n};\n\nexport const getLocation = (config) => {\n  if(!!config.coordinates && config.coordinates.lat && config.coordinates.long) {\n   snapLog('geolocation config',config);\n    return new Promise(resolve => {\n        resolve(config.coordinates);\n    });\n  } else {\n   snapLog('geolocation config', config);\n    return getHTML5Location();\n  }  \n};\n\nconst listeners = [];\n\nconst parseMapBoxPlace = async (json, config) => {\n  const place = await json;\n  const locality = place.features.find(f => f.place_type[0] === 'locality');\n  const region = place.features.find(f => f.place_type[0] === 'region');\n  const country = place.features.find(f => f.place_type[0] === 'country');\n\n  place.locality = locality ? locality.text : '';\n  place.region = region ? region.text : '';\n  place.country = country ? country.text : '';\n  place.area = place.region || place.country;\n  \n  place.shortLocation = `${place.locality}, ${place.country}`;\n  place.longLocation = `${place.locality}, ${place.region}, ${place.country}`;\n \n  place.summary = config.isLandscapeMode ? `Species from ${place.longLocation}` : `Species from ${place.shortLocation}`;\n  const placePromise = new Promise(resolve => {\n    resolve(place);\n  });\n  const updatedPlace = await placePromise;\n  return await updatedPlace;\n}\n\nconst getMapBoxPlace = async (long, lat, config) => {\n  const token = 'pk.eyJ1IjoiZGFuaGFydGxleSIsImEiOiJjam84Zjd3aGowMDdoM2ttaDAzeDk4bHJ6In0.oEcO6w3DhHUv_mXrFW1clg';  \n  const longitude = long;// || '-9.163009899999999';\n  const latitude = lat;// || '38.7155762';  \n  const language = config.language || 'en';\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${longitude},${latitude}.json?language=${language}&access_token=${token}`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const place = await parseMapBoxPlace(json, config);\n  listeners.forEach(listener => listener(place));\n  return await place;\n}\n\nexport const getPlace = async (config, force = false) => {\n  if(!!config.place && !force) {\n    const response = new Promise(resolve => {\n      resolve(config.place);\n    });\n    const json = await response;    \n    return await json;\n  } else {       \n    const coordinates = await getLocation(config);        \n    const latitude = coordinates['0'] || coordinates.lat;\n    const longitude = coordinates['1'] || coordinates.long;\n    config.coordinates = { lat: latitude, long: longitude };\n\n    return getMapBoxPlace(longitude, latitude, config);\n  }\n};\n\nexport const listenToPlaceChange = listener => { \n  listeners.push(listener);\n};\n\nconst IPCountryLookup = async () => {\n  const ACCESS_KEY = '69402a39530c7ae8218dfaf69ef78337';  \n  const url = `http://api.ipstack.com/check?access_key=${ACCESS_KEY}`;\n  try {\n    const response = await fetch(url);\n    const json = await response.json();\n    const { country_code, country_name } = await json;\n    return { country_code, country_name };\n  } catch (error) {\n    console.warn(`ERROR(${err.code}): ${err.message}`);\n  }  \n}\n\nconst LocationLookup = async ip => {\n  const ACCESS_KEY = 'a8563e7b75654ae8b016dc52719dee3b';\n  const url = `https://api.ipgeolocation.io/ipgeo?apiKey=${ACCESS_KEY}&ip=${ip}&fields=city,state_prov,country_name,latitude,longitude&output=json`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const { city, state_prov, country_name, latitude, longitude } = await json; \n  return { city, state_prov, country_name, latitude, longitude };\n}\n\nconst IPLookup = async () => {  \n  const url = 'https://api.ipgeolocation.io/getip';\n  const response = await fetch(url);\n  const json = await response.json();\n  const { ip } = await json; \n  return ip;\n}\n\nexport const getIPLocation = async (config, force = false) => {\n\n     if(!!config.ipLocation && !force) {\n      const response = new Promise(resolve => {\n        resolve(config.ipLocation);\n      });\n      const json = await response;    \n      return await json;\n     } else {\n      const ip = await IPLookup();\n      const { city, state_prov, country_name, latitude, longitude } = await LocationLookup(ip);\n      return { city, state_prov, country_name, latitude, longitude };\n     }\n};\n\nexport async function GoogleFindPlace(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n\n  const url = `https://maps.googleapis.com/maps/api/place/findplacefromtext/json?input=${place}&inputtype=textquery&key=${ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { candidates } = await json; \n  return candidates;\n}\n\nlet service;\nlet requireNewSession = true;\nlet isScriptReady = false;\nlet SESSION_TOKEN;\nlet current_term = '';\n\nexport async function GoogleAutocompleteServerSide(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n\n  const url = `https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${place}&inputtype=textquery&key=${ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { predictions } = await json; \n  return predictions;\n}\n\nconst createScriptRequest = (src, callback) => {\n  requireNewSession = false;\n  const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = src;\n    document.body.appendChild(script);\n    script.addEventListener(\"load\", () => {\n      isScriptReady = true;\n      callback();\n    });\n}\n\nexport const GoogleAutocomplete_Original = (place, callback) => {\n\n  const getPredictions = () => {\n    \n    if(!isScriptReady) return;\n\n    const displaySuggestions = function(predictions, status) {\n      if (status != google.maps.places.PlacesServiceStatus.OK) {\n        alert(status);\n        return;\n      }\n  \n      callback(predictions);\n    };\n    if(!service) {\n      service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions({ input: place }, displaySuggestions);\n  };\n\n  if(requireNewSession) {\n    const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n    const SESSION_TOKEN = utils.createSessionToken();\n\n    const src = `https://maps.googleapis.com/maps/api/js?key=${ACCESS_KEY}&sessiontoken=${SESSION_TOKEN}&libraries=places`;\n\n    createScriptRequest(src, () => {\n      getPredictions();\n    });\n  } else {\n    getPredictions();\n  }\n}\n\nexport const GoogleAutocomplete = (place, callback) => {\n\n  const getPredictions = SESSION_TOKEN => {\n\n    if(!service) {\n        service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions(\n      { \n        input: place,\n        // sessionToken: SESSION_TOKEN\n      }, \n      callback);\n  };\n\n  if(requireNewSession) {\n    SESSION_TOKEN = new google.maps.places.AutocompleteSessionToken();\n    getPredictions(SESSION_TOKEN);\n    current_term = place;\n    requireNewSession = false; //or on expires/error, get a new one\n  } else {\n    if(place !== current_term) {\n      getPredictions(SESSION_TOKEN);\n    }\n    current_term = place;\n  }\n}\n\nexport const GooglePlaceDetails = (placeId, callback) => {\n  \n  var request = {\n    placeId: placeId,\n    // sessionToken: SESSION_TOKEN\n  };\n\n  var service = new google.maps.Geocoder();\n      service.geocode(request, callback);  \n\n  requireNewSession = true;\n}","import { contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nlet inatListeners = [];\nlet RECORDS_PER_PAGE = 200;\n\nconst unsubscribe = listener => {\n    inatListeners = inatListeners.filter(l => l !== listener);\n};\n\nexport const listenToInatRequests = listener => {\n    inatListeners.push(listener);\n    return unsubscribe;\n};\n\nconst getBasePath = config => {\n    \n    const month = config.guide.season.type === 'all_year' \n            ? ''\n            : config.guide.season.observableMonths.map(month => month.index).join(',');\n\n    const perPage = config.guide.perPage || RECORDS_PER_PAGE;\n\n    const basePath = `https://api.inaturalist.org/v1/observations/species_counts?captive=false&rank=species&per_page=${perPage}&month=${month}`;\n\n    return basePath;\n};\n\nexport const getInatSpecies = async config => {\n\n    const speciesNames = await firestore.getSpeciesNames();\n\n    const snapdragonSpeciesNames = speciesNames[0].value;\n\n   snapLog('snapdragon species', snapdragonSpeciesNames);\n\n    const iconicTaxaKeys = Object.keys(iconicTaxa).join(',');\n\n    const getIconicTaxa = config => {\n      \n      try {\n\n          const iconicTaxa = config.guide.iconicTaxa.map(taxon => taxon.id) || iconicTaxaKeys;\n\n          // Create new taxonic group for reptilia, etc?\n\n          if(iconicTaxa.find(taxon => taxon === 'mammalia')) {\n              iconicTaxa.push('reptilia');\n          }\n\n          const taxa = iconicTaxa.map(taxon => {\n              if(taxon === 'lepidoptera') taxon = 'insecta';            \n              return taxon;\n          });\n\n          return taxa;\n\n      } catch (e) {\n        logError('Error for getIconicTaxa: ', e);\n    }\n    };\n\n    const getUserOrProjectKeyValuePair = config => {\n        if(!config.guide.inatId) return '';\n        const param = config.guide.inatId.param;    \n        const id = config.guide.inatId.id;\n        const parameter = `&${param}=${id}`;\n        return id ? parameter : '';\n    };\n\n    const getAllInatObservations = async (config, snapdragonSpeciesNames) => {\n        let snapdragonSpecies = [];\n        let records = [];\n        let keepGoing = true;\n        let page = 1;\n        while (keepGoing) {\n          try {\n            let recordsFromThisRequest = await getInatObservations(config, page);\n            await records.push.apply(records, recordsFromThisRequest);\n            let matches = recordsFromThisRequest.filter(record => contains(record.taxon.name, snapdragonSpeciesNames));\n            await snapdragonSpecies.push.apply(snapdragonSpecies, matches);\n            page = page + 1;\n            let noMoreRecords = recordsFromThisRequest.length < RECORDS_PER_PAGE;\n            let recordsCountReached = snapdragonSpecies.length >= config.guide.noOfRecords;\n           snapLog('snapdragonSpecies', snapdragonSpecies);\n           snapLog('records', records);\n            if (noMoreRecords || recordsCountReached) {\n                keepGoing = false;\n                return snapdragonSpecies;\n            }\n          } catch(e) {\n            logError('getInatObservations', e);\n            return snapdragonSpecies;\n          }\n        }\n    }\n\n    const loadSpeciesInParallel = async observations => {\n        try {\n            return Promise.all(observations.map(observation => {\n                return firestore.getSpeciesByName(observation.taxon.name).then(async item => {\n                    return await {                         \n                        ...item, \n                        observationCount: observation.taxon.observations_count, \n                        iconicTaxon: observation.taxon.iconic_taxon_name\n                    };\n                })                    \n            }));\n\n        } catch (e) {\n          logError('loadSpeciesInParallel: ', e);\n        }\n    };\n\n    const getInatObservations = async (config, page) => {\n\n      try {\n\n        let lat = '', lng = '', placeId = '';\n\n        let radius = config.guide.speciesRange ? parseInt(config.guide.speciesRange) : 10;\n        let inat = '';\n        \n        switch(config.guide.locationType) {\n            case 'place':\n                placeId = config.guide.place.id;\n                break;\n            case 'longLat':\n                lat = config.guide.coordinates.lat;\n                lng = config.guide.coordinates.long;\n                break;\n            case 'inat':\n                lat = '';\n                lng = '';\n                placeId = '';\n                radius = '';\n                inat = `&${config.guide.inatId.param}=${config.guide.inatId.key}`;\n                break;\n        }\n\n        const iconicTaxa = getIconicTaxa(config);\n        const params = config.guide.guideTpe === 'INAT' ? getUserOrProjectKeyValuePair(config) : '';\n        const url = getBasePath(config) + `&page=${page}&iconic_taxa=${iconicTaxa}&place_id=${placeId}&lat=${lat}&lng=${lng}&radius=${radius}${inat}${params}`;\n\n       snapLog('inat species request url', url);\n\n        const recordsFromThisRequest = await fetch(url);\n\n       snapLog('inat recordsFromThisRequest', recordsFromThisRequest);\n\n        const json = await recordsFromThisRequest.json();\n        inatListeners.forEach(listener => listener(\n            { page: json.page, numberOfRequests: Math.ceil(json.total_results/json.RECORDS_per_page) }\n        ));\n        return json ? await json.results : [];\n      } catch(e) {\n        logError('getInatObservations', e);\n        return [];\n      }\n    }\n    \n    let observations;\n\n    try {\n      observations = await getAllInatObservations(config, snapdragonSpeciesNames);\n      observations = observations.filter(observation => contains(observation.taxon.name, snapdragonSpeciesNames));\n      observations = take(config.guide.noOfRecords, utils.sortBy(observations.filter(item => item), 'observationCount', 'desc'));\n    } catch(e) {\n      logError('getAllInatObservations', e);\n    }\n\n   snapLog('observations', observations);\n\n    if(!observations) return [];\n\n    return await loadSpeciesInParallel(observations);\n}\n\nexport async function getInatPlaceId(place) {\n    \n    const url = `https://api.inaturalist.org/v1/places/autocomplete?q=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json  = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getInatTaxonStats(item, config, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/species_counts?&verifiable=true&taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getHistogram(item, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/histogram?taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getAutocompleteBy(q, by) {\n\n    // currently set up for USERS and PROJECTS but PLACES? Not sure\n    // https://api.inaturalist.org/v1/places/autocomplete?q=O%20Parque%20Natural%20da%20Arr%C3%A1bida\n\n    const url = `https://api.inaturalist.org/v1/${by}/autocomplete?q=${q}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\n// https://www.inaturalist.org/observations/danielhartley.json?m1=1&m2=11&iconic_taxa[]=Fungi","export const renderWikiModal = (item, wikiLink, config) => {\n    if(wikiLink) {\n        wikiLink.addEventListener('click', event => {\n            document.querySelector('.js-external-page-title').innerHTML = `${item.name}`;\n            const entry = document.querySelector('.species-card-wiki-entry').innerText;\n            const style = `\n                <style type='text/css'>\n                body {\n                    font-family: PT Sans', 'Roboto', arial,sans-serif;\n                }\n                a {\n                    text-decoration: none;\n                    border: solid 1px;\n                    border-top: none;\n                    border-left: none;\n                    border-right: none;\n                    color: black;\n                    cursor: pointer;\n                }\n            </style>`;\n            const wiki = `<header>${style}</header><p>${entry}</p><p><a href='https://en.wikipedia.org/wiki/Salvia_officinalis' target='_blank'>Wikipedia page</a></p>`;\n\n            document.querySelector('.js-external-page-body').innerHTML = config.isPortraitMode\n                ? `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"data:text/html,${wiki}\"></iframe>`          \n                : `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"${wikiLink.querySelector('span').dataset.src}\"></iframe>`;\n                \n            document.querySelector('#wikiModal').focus();\n        });\n    }\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace } from 'geo/geo';\nimport { getInatTaxonStats, getInatPlaceId } from 'api/inat/inat';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\n\nimport inatBoxTemplate from 'ui/screens/common/inat-box-template.html';\n\nexport async function renderInatDataBox(parent, item, config, mode) {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatBoxTemplate;\n\n    parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n    const eolPage = document.querySelector('.js-test-card-container-eol-link');\n    \n    eolPage.setAttribute('href', `http://eol.org/pages/${item.id}/overview`);\n    eolPage.setAttribute('target', '_blank');\n    eolPage.setAttribute('style', 'text-decoration: none');\n\n    setTimeout(()=>{\n        const wikiLink = document.querySelector('.js-test-card-container-wiki');            \n        renderWikiModal(item, wikiLink, config);\n    });    \n\n    const wikiNode = document.querySelector('.js-test-card-container-wiki');\n          wikiNode.innerHTML = '';\n\n    renderWiki(wikiNode, item, config.language);\n    \n    getInatTaxonStats(item, config).then(stats => {\n\n        if(!stats.results) return;\n\n        const taxonId = stats.results.find(stat => stat.taxon.name === item.name).taxon.id;\n        const taxonCount = stats.results.find(stat => stat.taxon.name === item.name).count;\n\n        const taxonLink = `https://www.inaturalist.org/taxa/${taxonId}`;\n\n        parent.querySelector('.js-taxon-count').innerHTML = taxonCount.toLocaleString();\n        parent.querySelector('.js-taxon-link').setAttribute('href', taxonLink);\n    });\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n    \n    getInatTaxonStats(item, config, placeId).then(stats => {\n\n        if(stats.results.length === 0) return;\n\n        const itemStats = stats.results.find(stat => stat.taxon.name === item.name);\n\n        if(!itemStats) return;\n\n        const placeTaxonCount = itemStats.count;\n        const establishment = itemStats.taxon.preferred_establishment_means;\n\n        document.querySelector('.js-native-container').innerHTML = establishment || '';\n\n        parent.querySelector('.js-world').innerHTML = mode === 'MODAL' ? 'Worldwide' : 'Worldwide sightings';\n        parent.querySelector('.js-place').innerHTML = mode === 'MODAL' ? country : `${country} sightings`;\n        parent.querySelector('.js-place-taxon-count').innerHTML = placeTaxonCount.toLocaleString();\n    });\n}","import { utils } from 'utils/utils';\nimport { getLocation, getPlace } from 'geo/geo';\nimport { getHistogram, getInatPlaceId } from 'api/inat/inat';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport calendarTemplate from 'ui/screens/common/calendar-template.html';\n\nexport const renderCalendar = async (parent, item, config) => {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = calendarTemplate;\n\n    parent.innerHTML = '';\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n\n    let months = [];\n\n    const getENShortMonth = (ordinal) => {\n        let month;\n        switch(ordinal) {\n            case 1:\n                month = 'J';\n                break;\n            case 2:\n                month = 'F';\n                break;\n            case 3:\n                month = 'M';\n                break;\n            case 4:\n                month = 'A';\n                break;\n            case 5:\n                month = 'M';\n                break;\n            case 6:\n                month = 'J';\n                break;\n            case 7:\n                month = 'J';\n                break;\n            case 8:\n                month = 'A';\n                break;\n            case 9:\n                month = 'S';\n                break;\n            case 10:\n                month = 'O';\n                break;\n            case 11:\n                month = 'N';\n                break;\n            case 12:\n                month = 'D';\n                break;\n        }\n        return month;\n    }\n\n    const getMonth = (ordinal, config) => {\n        let month;\n        switch(config.language) {\n            case 'en':\n                month = getENShortMonth(ordinal);\n                break;\n            default:\n                month = getENShortMonth(ordinal);\n        }\n        return month;\n    }\n\n    getHistogram(item, placeId).then(histogram => {\n        const monthlyStats = histogram.results.month_of_year;\n        for (var month in monthlyStats) {\n            months.push({\n                month: getMonth(parseInt(month), config),\n                index: parseInt(month),\n                count: monthlyStats[month]\n            });\n        }\n\n        utils.sortBy(months, 'count', 'desc').forEach( (month, index) => {\n            if(index < 4 && month.count !== 0) {\n                month.class = 'most-observations';\n            } else {\n                month.class = '';\n            }\n        });\n\n        utils.sortBy(months, 'index', 'asc');\n\n        const data = [];\n        let season = [];\n\n        months.map((month,index) => {\n            if(index < 4) {\n                season.push(month);                \n            }\n            if(index === 3) {\n                data.push(season);\n                season = [];\n            }\n            if(3 < index && index < 8) {\n                season.push(month);                \n            }\n            if(index === 7) {\n                data.push(season);\n                season = [];\n            }\n            if(7 < index && index < 12) {\n                season.push(month);                \n            }\n            if(index === 11) {\n                data.push(season);\n                season = [];\n            }\n        });\n\n        renderTemplate({ data }, template.content, parent);\n\n        const currentMonthIndex = new Date().getMonth();\n\n        const monthNodes = document.querySelectorAll('.calendar-box .col > div');\n    \n        monthNodes.forEach((node, index) => {\n            if(index === currentMonthIndex) {\n                node.classList.add('current-month');\n            }\n        });\n    });\n    \n};","export const infraspecifics = [\n    {\n        name: 'Brassica rapa',\n        subspecies: [\n            {\n                variety: 'chinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Bok choy\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Pak choi\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'rapa',\n                names: [\n                    {\n                        \"vernacularName\": \"Turnip\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'oleifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Field mustard\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'pekinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Chinese cabbage\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Wombok\",\n                        \"language\": \"en\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        name: 'Brassica oleracea',\n        variety: 'oleracea',\n        subspecies: [\n            {\n                variety: 'oleracea',\n                names: [\n                    {\n                        \"vernacularName\": \"Wild cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Brassica_oleracea',\n                        eol: 'http://eol.org/pages/1283630/overview'              \n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'alba',\n                names: [\n                    {\n                        \"vernacularName\": \"Cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Cabbage',\n                        eol: 'http://eol.org/pages/38390/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'sabauda',\n                names: [\n                    {\n                        \"vernacularName\": \"Savoy cabbage\",\n                        \"language\": \"en\",\n                        \"wiki\": 'https://en.wikipedia.org/wiki/Savoy_cabbage',\n                        eol: 'http://eol.org/pages/5148887/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'rubra',\n                names: [\n                    {\n                        \"vernacularName\": \"Red cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Red_cabbage'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'acuta',\n                names: [\n                    {\n                        \"vernacularName\": \"Cone cabbage\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Collards\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'Acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Kale\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gemmifera',\n                group: 'Gemmifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Brussels sprouts\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gongylodes',\n                group: 'Gongylodes',\n                names: [\n                    {\n                        \"vernacularName\": \"Kohlrabi\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'italica',\n                group: 'Italica',\n                names: [\n                    {\n                        \"vernacularName\": \"Broccoli\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'botrytis',\n                group: 'Botrytis',\n                names: [\n                    {\n                        \"vernacularName\": \"Cauliflower\",\n                        \"language\": \"en\"\n                    },\n                ]\n            }\n        ]\n    }\n];","import { itemProperties } from 'ui/helpers/data-checking';\nimport { infraspecifics } from 'api/snapdragon/infraspecifics';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport taxaBoxTemplate from 'ui/screens/common/taxa-box-template.html';\n\nexport const renderTaxaBox = async (parent, taxaBoxArgs) => {\n\n    const enums = store.getState().enums;\n\n    parent.innerHTML = '';\n\n    let { item, familyName, familyVernacularName } = taxaBoxArgs;\n\n    const options = [\n        { name: enums.name.RANK, formatter: trait => `UK # ${trait[0]}` },\n        { name: enums.name.HOW_EDIBLE, formatter: trait => trait[0] }\n    ];\n\n    let trait = itemProperties.getActiveTrait(item, options);\n    \n    const specific = infraspecifics.find(specific => specific.name === item.name);\n    const subSpeciesCount = specific ? specific.subspecies.length : 0;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = taxaBoxTemplate;\n\n    renderTemplate({ subSpeciesCount, familyName, familyVernacularName, trait }, template.content, parent);\n\n    const subspeciesBadge = parent.querySelector('.js-subspecies-badge');\n\n    if(subSpeciesCount === 0) {\n\n        subspeciesBadge.classList.add('hide');\n        \n    } else {\n\n        const members = specific.subspecies;\n\n        subspeciesBadge.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Cultivars of ${item.name}`;            \n            const list = rootNode.querySelector('#badgeListModal .js-modal-text');\n            let html = '<div class=\"modal-list scrollable\">';\n            members.forEach(member => {\n                html += `<div><span>subspecies: ${member.name}</span>`;\n                html += `<ul>`;\n                member.names.forEach(name => {\n                    if(name.language === config.language)\n                        html += `<li>name: ${name.vernacularName}</li>`;\n                });\n                html += `</ul></div>`;\n            });\n            html += '</div>';\n            list.innerHTML = html;\n        });\n    }\n}","import { renderTemplate } from 'ui/helpers/templating';\n\nimport badgeTemplate from 'ui/screens/common/badge-template.html';\n\nexport const renderBadge = (badge, item, config) => {\n\n    let names = [ ...new Set(item.names.map(name => {\n        return {\n            common: name.vernacularName.toLowerCase(),\n            language: name.language\n        }\n    })) ];\n\n    const languageNames = names.reduce(function (r, a) {\n        r[a.language] = r[a.language] || {};\n        r[a.language].name = config.languages.find(language => language.lang === a.language).name;\n        r[a.language].names = r[a.language].names || [];\n        r[a.language].names.push(a.common);\n        return r;\n    }, Object.create(null));\n\n    const occurrences = names.length;\n\n    const template = document.createElement('template');\n\n    if(occurrences === 0) {\n\n        badge.classList.add('hide');\n        \n    } else {\n\n        badge.innerHTML = '';\n\n        template.innerHTML = `<span class=\"names-badge js-names-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">${occurrences}</span>`;\n\n        renderTemplate({}, template.content, badge);\n\n        badge.addEventListener('click', event => {\n            \n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = 'Common species names';\n\n            const parent = document.querySelector('#badgeListModal .js-modal-text');\n\n            parent.innerHTML = '';\n\n            template.innerHTML = badgeTemplate;\n\n            renderTemplate({ languageNames }, template.content, parent);\n        });\n    }\n}","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { getBirdSong } from 'xeno-canto/birdsong';\nimport { lookalikeSpecies } from 'ui/screens/common/look-alikes';\nimport { infoSlider } from 'ui/screens/common/info-slider';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { renderInatDataBox } from 'ui/screens/common/inat-box';\nimport { renderCalendar } from 'ui/screens/common/calendar';\nimport { renderTaxaBox } from 'ui/screens/common/taxa-box';\nimport { renderBadge } from 'ui/screens/common/badge';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { firestore } from 'api/firebase/firestore';\n\nimport cardTemplate from 'ui/screens/cards/card-template.html';\n\nexport const renderCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, isInCarousel = true) => {\n\n    if(!selectedItem) return;\n\n    const { layout, config } = store.getState();\n\n    let item;\n\n    const init = async () => {\n\n            const getItemWithProps = async item => {\n\n            if(item.eolId) return new Promise(resolve => resolve(item));\n            \n            const getItem = async item => {\n                return item.family\n                            ? new Promise(resolve => resolve(item))\n                            : await firestore.getSpeciesByName(item.name);\n            };\n\n            const itemWithProps = await getItem(item);\n            \n            itemWithProps.family = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.FAMILY.name.toLowerCase()]) || { names: [ itemWithProps.taxonomy.family ]};\n            itemWithProps.order = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.ORDER.name.toLowerCase()]);\n            itemWithProps.traits = await firestore.getTraitsBySpeciesName(item.name);\n            itemWithProps.vernacularName = itemWithProps.vernacularName || itemProperties.getVernacularName(item, config);\n\n            const names = item.name.split(' ');\n\n            itemWithProps.taxonomy.genus = names[0];                \n            itemWithProps.taxonomy.species = names[1];\n\n            return itemWithProps;\n        };\n    \n        item = selectedItem || collection.nextItem;\n\n        item = await getItemWithProps(item);\n\n        let rootNode;\n    \n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = config.isLandscapeMode ? modal.querySelector('.js-modal-text') : document.querySelector('.right-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = config.isLandscapeMode ? parent : document.querySelector('.js-species-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n    \n        if(mode === 'STAND-ALONE') {        \n            const screen = layout.screens.filter(el => el.name === 'species-card')[0];\n            if(!screen) return;\n        }\n    \n        const prev = document.querySelector('#cardModal .js-prev');\n        const next = document.querySelector('#cardModal .js-next');\n    \n        if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n        if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n        \n        const template = document.createElement('template');\n    \n        template.innerHTML = cardTemplate;\n    \n        renderCommonParts(template, config, item, collection, mode, parent, rootNode, isInCarousel);\n    \n        config.isPortraitMode\n            ? renderPortrait(item, config, mode, rootNode)\n            : renderLandscape(item, config, mode, rootNode);\n    };\n\n    init();\n};\n\nconst renderLandscape = (item, config, mode, rootNode) => {\n\n    const src = rootNode.querySelector('.js-bird-song');\n    \n    getBirdSong(item, src, config.isPortraitMode);\n\n    const inatNode = rootNode.querySelector('.js-inat-box');\n\n    renderInatDataBox(inatNode, item, config, mode);\n    \n    renderCalendar(rootNode.querySelector('.js-calendar-box'), item, config);\n\n    lookalikeSpecies(item, config, rootNode);\n};\n\nconst renderPortrait = (item, config, mode, rootNode) => {\n\n    const images = prepImagesForCarousel(item, config, imageUseCases.SPECIES_CARD);\n\n    const parent = rootNode.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent, parentScreen: rootNode.querySelector('.card-card'), identifier: item.name.replace(' ', '_') });\n\n    const player = rootNode.querySelector('.js-bird-song-player');\n\n    if(mode =='MODAL') {\n        player.style.display = 'none';\n        return;\n    };\n\n    getBirdSong(item, player, config.isPortraitMode);\n\n    player.addEventListener('click', () => {\n        const iframe = document.createElement('iframe');\n        iframe.id = 'birdsong';\n        iframe.style.border = 0;\n        iframe.src = player.dataset.src;\n        document.querySelector('#basicModal .modal-body').classList.add('bird-song-bg');\n        document.querySelector('#basicModal .js-modal-text-title').innerHTML = `${item.name}`;\n        const elm = document.querySelector('#basicModal .js-modal-text');\n        while (elm.firstChild) {\n            elm.removeChild(elm.firstChild);\n         }\n        elm.appendChild(iframe);\n    });\n};\n\nconst renderCommonParts = (template, config, item, collection, mode, parent, rootNode, isInCarousel) => {\n\n    const image = scaleImage({ url: item.starred || item.images[0].url }, imageUseCases.SPECIES_CARD, config);\n    \n    const clone = document.importNode(template.content, true);\n    \n    parent.innerHTML = '';\n    \n    renderTemplate({ name: item.name, vernacularName: item.vernacularName, image, iconicTaxon: item.iconicTaxon }, template.content, parent, clone);\n    \n    renderTaxaBox(rootNode.querySelector('.js-taxa-box'), { item, familyName: item.taxonomy.family, familyVernacularName: item.family.vernacularName || '' });\n\n    infoSlider(item, rootNode.querySelector('.js-info-box'), mode);\n\n    renderBadge(rootNode.querySelector('.js-names-badge'), item, config);    \n\n    renderIcon(item.taxonomy, rootNode);\n\n    if(mode === 'MODAL') {      \n          \n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n        const prev = rootNode.querySelector('#cardModal .js-prev > span');\n        prev.dataset.id = item.id;\n        prev.dataset.transition = 'prev';\n        prev.dataset.modal = 'cardModal';\n\n        const next = rootNode.querySelector('#cardModal .js-next > span');\n        next.dataset.id = item.id;\n        next.dataset.transition = 'next';\n        next.dataset.modal = 'cardModal';\n        \n        const lines = document.getElementsByTagName('hr');\n\n        Array.from(lines).forEach(hr => hr.style.display = 'none');\n    }\n\n    setTimeout(() => {\n        \n        if(config.isPortraitMode) {\n            // hide attribution for now - space issue various across devices\n            const attributions = document.querySelectorAll('.js-attribution-layer');\n                    attributions.forEach(attribution => attribution.classList.add('hide-important'));\n            const indicators = document.querySelectorAll('.js-carousel-indicators');\n                    indicators.forEach(indicator => indicator.classList.add('hide-important'));\n        }\n    });\n};","import{ take } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { taxonInfoSlider } from 'ui/screens/common/info-slider';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\n\nimport taxonTemplate from 'ui/screens/cards/taxon-card-template.html';\n\nlet transition;\n\nconst modalCarousel = document.querySelector('#cardModal .carousel');\n\nif(modalCarousel) {\n    modalCarousel.addEventListener('click', event => {    \n        transition = event.target.dataset.transition;\n    });\n}\n\nexport const renderTaxonCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, speciesTaxon, rank, isInCarousel = true) => {\n  \n    try {\n\n        const item = selectedItem || collection.nextItem;\n\n        if(!item) {\n            document.querySelector('#cardModal .close').click();\n        }\n\n        const { config } = store.getState();\n\n        let rootNode;\n\n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = document.querySelector('.right-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = document.querySelector('.js-taxon-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n\n        const template = document.createElement('template');\n              template.innerHTML = taxonTemplate;\n        \n        const clone = document.importNode(template.content, true);\n\n        parent.innerHTML = '';\n\n        rank = rank ? rank.toUpperCase() : 'FAMILY';\n\n        let taxon;\n\n        switch(rank) {\n            case 'ORDER':\n                taxon = item.order;\n                break;\n            case 'FAMILY':\n                taxon = item.family;\n                break;\n            case 'GENUS':\n                taxon  = item.genus;\n                break;\n            default:\n                taxon = item.family;\n                break;\n        };\n\n        const familyStats = itemProperties.getFamilyStats(collection.items);\n        const occurrences = familyStats ? familyStats[taxon.name] : 0;\n        const url = item.images ? item.starred ? item.images[0].url : '' : '';\n        const image = scaleImage({ url }, imageUseCases.TAXON_CARD, config);\n        const vernacularName = taxon.vernacularName || itemProperties.getNestedTaxonProp(taxon, config.language, 'names', 'names', '0').split(',')[0];\n        const identification = taxon.identification ? taxon.identification : taxon.descriptions ? taxon.descriptions[0].identification : '';\n        const summary = taxon.summary ? taxon.summary : taxon.descriptions ? taxon.descriptions[0].summary : '';\n                \n        const context = {\n            rank: rank,\n            name: taxon.name,\n            image,\n            alt: taxon ? taxon.alt : '',\n            vernacularName,\n            species: taxon.species || '--',\n            genera: taxon.genera || '--',\n            families: taxon.families || '--',\n            identification,\n            summary,\n            eol: taxon.eol ? taxon.eol.replace('en', config.language) : '',\n            wiki: taxon.wiki ? taxon.wiki.replace('en', config.language) : '',\n            occurrences: occurrences,\n            toxic: taxon.toxic ? `Toxic species: ${taxon.toxic.members.join(', ')}` : '',\n            notableMembers: taxon.members ? take(2, taxon.members).join(', ') : ''\n        }\n\n        renderTemplate(context, template.content, parent, clone);\n\n        taxonInfoSlider(item, taxon.traits, rootNode.querySelector('.js-taxon-info-box'), mode);\n\n        switch(rank) {\n            case 'GENUS': \n                rootNode.querySelector('.js-taxon-genus').classList.add('hide-important');\n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'FAMILY': \n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'ORDER':\n                rootNode.querySelector('.js-taxon-rank').classList.add('hide-important');\n                break;\n        }\n\n        renderIcon(item.taxonomy, rootNode);\n\n        if(mode === 'MODAL') {\n\n            rootNode.querySelector('.js-external-links').classList.add('hide');\n\n            rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n            const prev = rootNode.querySelector('#cardModal .js-prev > span');\n            prev.dataset.id = item.id;\n            prev.dataset.transition = 'prev';\n            prev.dataset.modal = 'cardModal';\n\n            const next = rootNode.querySelector('#cardModal .js-next > span');\n            next.dataset.id = item.id;\n            next.dataset.transition = 'next';\n            next.dataset.modal = 'cardModal';\n\n            if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n            if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n\n        }\n        \n        // if(taxon.toxic) {\n        //     document.querySelector('.js-taxon-toxic-warning').innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>';\n        // }\n\n        document.querySelector('.js-external-page-title').innerHTML = `${taxon.name}`;\n        document.querySelector('.js-external-page-body').innerHTML = `<iframe class=\"modal-iframe\" title=\"Wikipedia page for ${taxon.name}\" src=\"${context.wiki}\"></iframe>`;\n\n        const membersCount = document.querySelector('#taxon-card-header .js-names-badge');\n\n        if(!context.occurrences || context.occurrences === 0) membersCount.classList.add('hide-important');\n\n        membersCount.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Members of the ${taxon.name} family`;\n            const members = collection.items.filter(i => i.taxonomy.family.toLowerCase() === taxon.name.toLowerCase());\n            const list = document.querySelector('#badgeListModal .js-modal-text');\n            list.innerHTML = '';\n            members.forEach(member => {\n                list.innerHTML += `<div>${member.name}</div>`;\n            });\n        });\n\n    } catch(e) {\n\n        console.error(e);\n\n        setTimeout(() => {        \n\n            switch(transition) {\n                case 'next':\n                    document.querySelector('#cardModal .carousel-control-next-icon').click();                   \n                    break;\n                case 'prev':\n                    document.querySelector('#cardModal .carousel-control-prev-icon').click();                    \n                    break;\n            }\n        });\n    }\n};","import { isEmpty } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { firestore } from 'api/firebase/firestore';\n\nlet language;\n\nexport const traitValuesHandler = async config => {\n\n    if(language === config.language) return;\n\n    language = config.language;\n\n    if(!isEmpty(store.getState().enums)) return;\n\n    const enums = await firestore.getTraitValues();\n\n    actions.boundUpdateEnums(enums);\n};\n","export const lichen = [\n    {\n        term: \"Lichen\",\n        definition: \"Composite organism of algae or cyanobacteria (or rarely, both), fungi and yeast living in a mutualistic relationship.\",\n        wiki: \"https://en.wikipedia.org/wiki/Lichen\",\n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Fruticose\",\n        definition: \"Growing like tuft or multiple-branched leafless mini-shrub (beardy), upright or hanging down, flat or round 3D branches.\",\n        wiki: \"https://en.wikipedia.org/wiki/Fruticose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Foliose\",\n        definition: \"Having flat, 2D leaf-like structures.\",\n        wiki: \"https://en.wikipedia.org/wiki/Foliose_lichen\",\n        level: 2,\n        image: {\n            url: 'https://content.eol.org/data/media/58/87/e8/509.25630291.260x190.jpg'\n        },\n        branch: 'classification'\n    },\n    {\n        term: \"Crustose\",\n        definition: \"Forming a crust that strongly adheres to a substrate (crusty).\",\n        wiki: \"https://en.wikipedia.org/wiki/Crustose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Leprose\",\n        definition: \"Having a powdery or granular surface.\",\n        wiki: \"https://en.wikipedia.org/wiki/Leprose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Squamulose\",\n        definition: \"Composed of small, often overlapping squamules( scales).\",\n        wiki: \"https://en.wikipedia.org/wiki/Squamulose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Soredium\",\n        definition: \"Common reproductive structures of lichens.\",\n        wiki: \"https://en.wikipedia.org/wiki/Soredium\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Epiphyte\",\n        definition: \"An organism that grows on the surface of a plant and derives its moisture and nutrients from the air, rain, water or surrounding debris.\",\n        wiki: \"https://en.wikipedia.org/wiki/Epiphyte\",\n        branch: 'classification'\n    },\n    {\n        term: \"Gametophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. It is the sexual phase (see Sporophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Gametophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Sporophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. In seed plants it is the roots, stem, leaves, cones and flowers (see Gametophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Sporophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Thallus\",\n        definition: \"Nonreproductive, undifferentiated tissue, or vegetative body part of a lichen. Usually visually prominent.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Thallus type\",\n        definition: \"Means of distinuguishing lichen e.g. foliose, crustose.\", \n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Squamule\",\n        definition: \"One of the scalelike lobes of the thallus of a lichen.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Podetium\",\n        definition: \"The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Apothecium\",\n        definition: \"Wide, open, saucer-shaped or cup-shaped fruit body. Sessile and fleshy.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Rhizine',\n        definition: 'Multiceullar, root-like structures which anchor licen to substrate.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Erhizinate',\n        definition: 'Without rhizines.',\n        technical: 'true',\n        branch: 'general'\n    },\n    {\n        term: 'Hapter',\n        definition: 'Short, peg-like attachments of the lower surface of lichen to the substrate on which they grow.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Common reproductive structures of lichen.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Cortex (lichen)',\n        definition: 'Composed of closely packed fungal hyphae that protects thallus from water loss (evaporation).',\n        branch: 'morphology'\n    },\n    {\n        term: 'Holdfast',\n        definition: 'Means by which a (bushy) lichen is attached to the substrate.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Disc',\n        definition: 'Spore-bearing part of the fruiting body of a lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lobe',\n        definition: 'Leaf-like part of a leafy (foliose) lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Medulla',\n        definition: 'Fungal part of the thallus situated below the skin like upper cortex.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Mycobiont',\n        definition: 'Fungal component of a lichen.',\n        branch: 'general'\n    },\n    {\n        term: 'Photobiont',\n        definition: 'Photosynthetic partner in a lichen (alga or cyanobacterium).',\n        branch: 'general'\n    },\n    {\n        term: 'Cyanobacteria',\n        definition: 'Phylum of bacteria that obtain their energy through photosynthesis. They produce oxygen.',\n        branch: 'classification'\n    },\n    {\n        term: '(Green) Algae',\n        definition: 'Heterogeneous grouping of eukaryotes photosynthesis',\n        branch: 'classification'\n    },\n    {\n        term: 'Placodioid',\n        definition: 'Crustose lichen which radiates out from its centre.',\n        wiki: 'https://en.wikipedia.org/wiki/Placodioid_lichen',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Pruinescence',\n        definition: 'A \"frosted\" or dusty looking coating on top of a surface.',\n        wiki: 'https://en.wikipedia.org/wiki/Pruinescence',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lecanorine',\n        definition: 'Shaped like a plate with a surrounding ring similar tissue to main non-fruiting body (after genus Lecanora).',\n        wiki: 'https://en.wikipedia.org/wiki/Lecanorine_lichen',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Apothecium',\n        definition: 'Wide, open, saucer-shaped or cup-shaped fruit body.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascocarp#Apothecium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascus',\n        definition: 'Spore-bearing cell produced in ascomycete fungi.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascus',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascomycota',\n        definition: '(Ascomycetes or Sac fungi) One of two main fungi divisions (phylum), characterised by spore-containing ascus. Majority of fungal symbionts in lichens are ascomycetes',\n        wiki: 'https://en.wikipedia.org/wiki/Ascomycota',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Basidiomycota',\n        definition: '(Basidiomycetes (Mushrooms)) Reproduce sexually via formation of specialised end cells (basidia) bearing external meiospores.',\n        wiki: 'https://en.wikipedia.org/wiki/Basidiomycota',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Powdery (asexual) reproductive structure (propagule) composed of fungal hyphae wrapped around the photobiont.',\n        wiki: 'https://en.wikipedia.org/wiki/Soredium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Isidium',\n        definition: 'Vegetative (asexual) reproductive structure. Outgrowths from the thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Isidium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Podetium',\n        definition: 'The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Podetium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n];","import * as traitEnums from 'api/traits/trait-types';\nimport { lichen } from 'api/glossary/lichen';\n\nexport const nonTaxaGroup = [\n    { LICHEN_FORM: 'Lichen Form' }     \n];\n\nexport const getNonTaxa = (enums) => {\n    // const SD = Object.keys(enums).length ? enums : traitEnums.enums;\n    const SD = enums;\n    return [\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FRUTICOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Fruticose').definition,\n            quickId: 'Free-standing branching tubes',            \n            names: [ { language: \"en\", name: 'Fruticose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.SOIL}, ${SD.substrate.ROCKS}` },  \n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Letharia vulpina', 'Evernia prunastri', 'Ramalina polymorpha', 'Roccella phycopsis', 'Ramalina farinacea' ],\n            wiki: 'https://en.wikipedia.org/wiki/Fruticose_lichen',\n            url: '81/9d/a2/542.9769039745.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FOLIOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Foliose').definition,\n            quickId: 'Leaflike, with flat sheets of tissue not tightly bound',\n            names: [ { language: \"en\", name: 'Foliose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW },\n                { name: SD.name.USAGE, value: SD.usage.FOOD, examples: [ { language: 'en', value: 'Deer, goats, and caribou' } ] },\n                { name: SD.name.USAGE, value: SD.usage.BIRDS_NEST },\n                { name: SD.name.LIFE_SPAN, value: '30-60a' },\n                { name: SD.name.MEDICINAL_PROPERTIES, value: `${SD.medicinalProperties.ANTIBIOTIC}`},\n                { name: SD.name.CHARACTERISTIC, value: SD.characteristic.BIOINDICATOR},\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Lobaria pulmonaria', 'Xanthoria parietina'  ],\n            genera: [ 'Usnea', 'Cladonia' ],\n            wiki: 'https://en.wikipedia.org/wiki/Foliose_lichen',\n            url: '81/66/25/542.8580717370.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.CRUSTOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Crustose').definition,\n            quickId: 'Crustlike, growing tight against the substrate',\n            names: [ { language: \"en\", name: 'Crustose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.HIGH }\n            ],\n            examples: [ 'Graphis scripta', 'Diploschistes scruposus', 'Caloplaca ochracea', 'Ophioparma ventosa' ],\n            wiki: 'https://en.wikipedia.org/wiki/Crustose',\n            url: '7f/69/15/542.3258067212.260x190.jpg'\n        },\n        // {\n        //     group: nonTaxaGroup[0].LICHEN_FORM,\n        //     id: SD.thallusType.SQUAMULOSE,\n        //     type: SD.nonTaxaType.FORM,\n        //     definition: lichen.find(l => l.term === 'Squamulose').definition,\n        //     quickId: 'Tightly clustered and slightly flattened pebble-like units',\n        //     names: [ { language: \"en\", name: 'Squamulose lichen'}],\n        //     traits: [\n        //         { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n        //         { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.MEDIUM }\n        //     ],\n        //     examples: [ 'Squamarina cartilaginea', 'Vahliella leucophaea', 'Cladonia subcervicornis' ],\n        //     wiki: 'https://en.wikipedia.org/wiki/Squamulose'\n        // },\n    ]\n}","import{ take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport * as group from 'api/snapdragon/non-taxa';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport cardTemplate from 'ui/screens/cards/non-taxon-card-template.html';\n\nconst subscriptions = [];\n\nexport const subscribeToNonTaxaSelection = callback => {\n    subscriptions.push(callback);\n};\n\nexport const renderNonTaxonCard = (mode = 'STAND_ALONE', keyTrait, parent = DOM.rightBody, url, isInCarousel = false) => {\n\n    const prev = document.querySelector('#cardModal .js-prev');\n    const next = document.querySelector('#cardModal .js-next');\n\n    if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n    if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n    \n\n    const { enums, config } = store.getState();\n\n    const nonTaxa = group.getNonTaxa(enums).filter(nt => nt.group === group.nonTaxaGroup[0].LICHEN_FORM);\n\n    nonTaxa.forEach(nt => {\n        nt.name = itemProperties.getVernacularName(nt, config, false, 'name');\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cardTemplate;\n    \n    const onChange = items => {\n        subscriptions.forEach(sub => sub(items));\n    };\n\n    const prepImages = (items) => {\n        const itemImagesArray = items.map(item => {\n            return prepImagesForCarousel(item, config, imageUseCases.NON_TAXON_CARD);\n        });\n        const itemImages = utils.shuffleArray([].concat(...itemImagesArray));\n        return take(9, itemImages);\n    };\n\n    const callback = async id => {\n\n        const nonTaxon = nonTaxa.find(nt => nt.id === id)\n\n        let items = await firestore.getSpeciesByNameInParallel(nonTaxon.examples);\n            items = items.filter(item => item.images);\n\n        const portraitImagesNode = document.querySelector('.js-non-taxon-card-images');\n\n        const images = prepImages(items);\n\n        if(nonTaxon.type) {\n            document.querySelector('.js-species-header img').src = `https://content.eol.org/data/media/${nonTaxon.url}`;\n        } else {\n            config.isPortraitMode ? imageSlider({ config, images, portraitImagesNode }) : onChange(images);\n        }\n\n        const wikiNode = document.querySelector('.js-non-taxon-card-wiki');\n        const lookup = { name: nonTaxon.name };\n\n        const idNode = document.querySelector('.id-box > div:nth-child(2) > div');\n              idNode.innerHTML = nonTaxon.quickId;\n\n        const definitionNode = document.querySelector('.js-non-taxa-definition div');\n              definitionNode.innerHTML = nonTaxon.definition;\n\n        const nameNode = document.querySelector('.js-non-taxon-card .js-names-container > div:nth-child(1)');\n              nameNode.innerHTML = nonTaxon.id;\n\n        if(mode === 'MODAL') {\n        } else {\n            renderWikiModal(lookup, wikiNode, config);    \n            renderWiki(wikiNode, lookup, config.language);\n        }\n    };\n\n    let rootNode;\n\n    switch(mode) {\n        case 'STAND_ALONE':\n            rootNode = document.querySelector('.right-body');\n            break;\n        case 'SWAP_OUT':\n            rootNode = document.querySelector('.js-taxon-container');\n            break;\n        case 'MODAL':\n            rootNode = document.querySelector('#cardModal');\n            break;\n    }\n\n    parent.innerHTML = '';\n\n    renderTemplate({group: nonTaxa, image: scaleImage({ url })}, template.content, parent);\n\n    if(mode === 'MODAL') {\n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = `Lichen Forms`;\n    }\n\n    rootNode.querySelectorAll('.js-non-taxa .btn.btn-secondary').forEach(form => {\n        form.addEventListener('click', event => {\n            const id = event.target.id;\n            callback(id);\n        });\n    });\n\n    const id = keyTrait || nonTaxa[0].id;\n    document.getElementById(id).click();\n};","import { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { iconicTaxa, matchIcon } from 'api/snapdragon/iconic-taxa';\n\nimport speciesTemplate from 'ui/screens/lists/species-table-template.html';\n\nexport const buildTable = (collection, args) => {\n\n  try {\n\n    const { config, enums, overrideParent } = args;\n\n    const template = document.createElement('template');\n\n    const wide = window.matchMedia(\"(min-width: 1024px)\").matches;\n\n    const getTraitName = (item, enums) => {\n        let traitName = '';        \n        let keyTratLinkClass = 'capitalise underline-link js-key-trait-link';\n        item.taxonomy.phylum = item.taxonomy.phylum || '';\n        if(item.taxonomy) {\n            switch(item.taxonomy.phylum.toLowerCase()) {\n                case 'ascomycota':\n                    traitName = item.taxonomy.order.toLowerCase() === 'pezizales'\n                        ? enums.name.HOW_EDIBLE\n                        : enums.name.THALLUS_TYPE;\n                    if(item.taxonomy.order.toLowerCase() === 'pezizales') keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                case 'basidiomycota':\n                    traitName = enums.name.HOW_EDIBLE;\n                    keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                default:\n                    traitName = '-';\n            }        \n        } else {\n            keyTratLinkClass = 'js-key-trait-link';\n        }\n        return { traitName, keyTratLinkClass };\n    }\n\n    const getOrderLinkClass = item => {\n        let orderLinkClass;\n        if(item.taxonomy && item.taxonomy.order) {\n            orderLinkClass = item.order\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link';\n        } else { orderLinkClass = 'snap-no-link-btn no-underline-link js-taxon-card-link'; }\n        return orderLinkClass;\n    };\n\n    const getIconicTaxonIcon = item => {\n        let iconicTaxonIcon, hideFungiIcon;\n        if(item.iconicTaxon.toLowerCase() === 'fungi') {\n            iconicTaxonIcon = 'hide';\n            hideFungiIcon = '';\n        } else {\n            iconicTaxonIcon = matchIcon(item.taxonomy, iconicTaxa);\n            hideFungiIcon = 'hide';\n        }\n        return { iconicTaxonIcon, hideFungiIcon };\n    };\n\n    const itemImages = collection.items.map(item => { \n\n        let image = item.images.find(i => i.starred) || utils.shuffleArray(item.images)[0];\n            image = scaleImage(image, imageUseCases.SPECIES_LIST, config);\n\n        const { traitName, keyTratLinkClass } = getTraitName(item, enums);\n        const { iconicTaxonIcon, hideFungiIcon } = getIconicTaxonIcon(item);\n\n        const itemImage = {\n            id: item.id,\n            name: item.name,\n            itemName: item.name,\n            genus: item.taxonomy.genus,\n            species: item.taxonomy.species,\n            genusLinkClass: item.genus\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            shortName: itemProperties.trimLatinName(item.name),\n            taxonomy: item.taxonomy,\n            iconicTaxon: item.iconicTaxon,\n            vernacularName: item.vernacularName,\n            snapIndex: item.snapIndex,\n            license: image.license,\n            url: image.url,\n            small: image.small,\n            rightsHolder: image.rightsHolder || 'Public domain',\n            source: image.source,\n            shortName: itemProperties.trimLatinName(item.name),\n            keyTrait: utils.capitaliseFirst(itemProperties.getActiveTrait(item, [{ name: traitName, formatter: trait => trait[0] }])) || '',\n            keyTratLinkClass: keyTratLinkClass,\n            familyLinkClass: item.family\n                                ? 'snap-link-btn underline-link js-taxon-card-link' \n                                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            orderLinkClass: getOrderLinkClass(item),\n            taxonomy: item.taxonomy || { family: '', order: ''},\n            iconicTaxonIcon,\n            hideFungiIcon, \n            hasVideoClassName: !collection.hasVideo ? 'hide-column' : '',\n            hasTaxonClassName: collection.hasVideo ? 'hide-column' : '',\n            provider: image.provider || ''\n        };\n\n        return itemImage;\n    });\n\n    template.innerHTML = speciesTemplate;\n\n    let parent = config.isPortraitMode\n            ? overrideParent\n            : document.querySelector(`.js-species-container[data-container-id=\"${collection.id}\"]`);\n        parent.innerHTML = '';\n\n    renderTemplate({ id: collection.id, itemImages }, template.content, parent);\n\n    const table = parent.querySelector(`table#species_list_id_${collection.id}`);\n\n    const keyTraits = table.querySelectorAll('.js-key-trait-link');\n\n    keyTraits.forEach(vn => {\n        const keyTrait = vn.dataset.keyTrait;\n        const span = document.createElement('span');\n        switch(keyTrait) {                \n            case enums.howEdible.CHOICE:\n                span.innerHTML = '<span class=\"icon choice\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.EDIBLE:\n                span.innerHTML = '<span class=\"icon edible\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.INEDIBLE:\n                span.innerHTML = '<span class=\"icon inedible\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.POISONOUS:\n            case enums.howEdible.DEADLY:\n                span.innerHTML = '<span class=\"icon toxic\"></span>';\n                vn.append(span);\n                break;\n        }\n    });\n\n    const tbody = table.querySelector('.species-table tbody');\n\n    if(!tbody) return;\n    \n    const caption = document.createElement('caption');\n          caption.innerHTML = `Species in ${collection.name}`;\n          caption.classList.add('visually-hidden');\n\n    const thead = document.createElement('thead');\n\n    table.insertBefore(thead, tbody);\n    table.insertBefore(caption, thead);\n\n    const headerRow = document.createElement('tr');\n          headerRow.classList.add('table-header');\n    const imageHeader = document.createElement('th');\n    const speciesHeader = document.createElement('th');\n    const familyHeader = document.createElement('th');\n    const traitNameHeader = document.createElement('th');\n    const iconicTaxonHeader = document.createElement('th');\n\n    const accordionHeader = document.createElement('th');\n          accordionHeader.classList.add('not-sortable');\n\n    speciesHeader.innerHTML = '<span>Species</span';\n    familyHeader.innerHTML = '<span>Family</span><span>Order</span>';\n    traitNameHeader.innerHTML = '<span></span>';\n    iconicTaxonHeader.innerHTML = '<span><i class=\"fas fa-sliders-h\"></i></span>';\n    imageHeader.innerHTML = overrideParent ? '' : '<span><i class=\"fas fa-undo\"></i></span>';\n    if(wide) {        \n        headerRow.appendChild(imageHeader);\n        headerRow.appendChild(speciesHeader);    \n        headerRow.appendChild(familyHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    } else {\n        headerRow.appendChild(imageHeader);    \n        headerRow.appendChild(speciesHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    }\n    if(collection.behaviour === 'static') {\n        headerRow.appendChild(accordionHeader);\n    }\n\n    if(!tbody.querySelector('.table-header')) {\n        thead.appendChild(headerRow);\n    }\n\n    const sortableCalback = () => {};\n\n    utils.makeSortable(document, sortableCalback, wide);\n\n    return new Promise(resolve => resolve({isReady: true}));\n\n  } catch(e) {\n    logError('buildTable', e);\n    return new Promise(resolve => resolve({isReady: false}));\n  }\n}\n","import { actions } from 'redux/actions/action-creators';\n\nconst onSpeciesTimeMatchListeners = [];\nconst onNoteTimeMatchListeners = [];\n\nconst onSpeciesTimeMatch = listener => {    \n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n    onSpeciesTimeMatchListeners.push(listener);\n};\n\nconst onNoteTimeMatch = listener => {    \n    while(onNoteTimeMatchListeners.length > 0) {\n        onNoteTimeMatchListeners.pop();\n    }\n    onNoteTimeMatchListeners.push(listener);\n};\n\nconst onSpeciesPlayRequestListeners = [];\n\nconst onSpeciesPlayRequest = listener => {\n    onSpeciesPlayRequestListeners.push(listener);\n};\n\nconst onPlayerReadyListeners = [];\nconst onPlayerStateChangeListeners = [];\n\nconst subscribeToPlayerStateChange = listener => {\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n    onPlayerStateChangeListeners.push(listener);\n};\n\nlet player, isPlayerReady = false;\n\nconst readyPlayer = () => {\n\n    const onPlayerReady = event => {\n        player = event.target;\n        isPlayerReady = true;\n    };\n    \n    const onPlayerStateChange = event => {\n        player = event.target;\n        if(player) {\n            onPlayerStateChangeListeners.forEach(listener => listener(player));\n        }\n     };\n    \n    new YT.Player('embedded-video', {\n        playerVars: { 'autoplay': 1 },\n        events: {\n        'onReady': onPlayerReady,\n        'onStateChange': onPlayerStateChange\n        }\n    });\n};\n\nconst playVideoFrom = time => {\n\n    if(! typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n    if(! typeof player.seekTo === 'function' || player.seekTo === undefined) return;\n\n    player.seekTo(time + 1);\n    const state = player.getPlayerState();\n    if(state === states[0].key || state === states[2].key) {\n        player.playVideo();\n    }\n};\n\n// -1 – unstarted\n//  0 – ended\n//  1 – playing\n//  2 – paused\n//  3 – buffering\n//  5 – video cued\n\nconst states = [ { key: -1, value: 'unstarted' }, { key: 1, value: 'playing' }, { key: 2, value: 'paused' }, { key: 3, value: 'buffering' } ];\n\nconst setVideoState = (videoPlayer, lesson) => {\n\n    let state = '';\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === lesson.id);\n    \n    if(activeLesson) {\n        if(lesson.id === activeLesson.collectionId) {\n        state = activeLesson.pausedAt ? `Video paused at ${activeLesson.speciesName}` : ''; \n        }\n    } else {\n        state = '';\n    }\n\n    return state;\n\n};\n\nconst isVideoPlayerReady = videoId => {\n    if(isPlayerReady) {\n        const doIdsMatch = videoId === player.getVideoData().video_id;\n        return isPlayerReady && doIdsMatch;\n    } else {\n        return false;\n    }\n};\n\nconst destroyPlayer = () => {\n\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n\n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n\n    if (!player) {\n\n      } else {\n        player.stopVideo();\n        player.destroy();\n        player = null;  // Clear out the reference to the destroyed player\n      }\n};\n\nconst saveVideoState = player => {\n    actions.boundUpdateVideoPlayer(player);\n};\n\nconst getPlayerTime = () => {\n    return Math.floor(player.getCurrentTime());\n};\n\nexport const videoHandler = {\n    readyPlayer,\n    onSpeciesTimeMatchListeners,\n    onNoteTimeMatchListeners,\n    onSpeciesTimeMatch,\n    onNoteTimeMatch,\n    onSpeciesPlayRequestListeners,\n    onSpeciesPlayRequest,\n    onPlayerReadyListeners,\n    subscribeToPlayerStateChange,\n    playVideoFrom,\n    states,\n    setVideoState,\n    destroyPlayer,\n    saveVideoState,\n    isVideoPlayerReady,\n    getPlayerTime\n};","import{ contains } from 'ramda';\n\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\n\nimport videoTemplate from 'ui/screens/home/home-lesson-intro-video-template.html';\n\nexport const videoSetup = (collection, videoPlayer, parent, startTime) => {\n\n    parent.innerHTML = '';\n   \n    const template = document.createElement('template');\n          template.innerHTML = videoTemplate;\n\n    collection.video.webLabel = collection.video.links[1].label;\n    collection.video.webUrl = collection.video.links[1].url;\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === collection.id) || { collectionId: collection.id, startAt: collection.video.startAt || 0 };\n          activeLesson.playAt = activeLesson.pausedAt || activeLesson.startAt;\n\n    renderTemplate({ video: { ...collection.video, playAt: activeLesson.playAt, location: collection.video.location || '' } }, template.content, parent);\n\n    const timeBeforeVideoPlayerReady = 1000;\n\n    setTimeout(() => {\n\n        videoHandler.readyPlayer();\n\n        let checkInt;\n\n        const checkCurrentTime = player => {\n\n            checkInt = setInterval(function() {\n               const time = Math.floor(player.getCurrentTime());               \n               const match = matchSpeciesTime(time, collection);\n               if(!!match) {\n                   videoHandler.onSpeciesTimeMatchListeners.map(listener => listener(collection, match));\n               }\n               if(!collection.notes) return;\n               const noteMatch = collection.notes.find(note => contains(time, note.time));\n               if(noteMatch) {\n                   videoHandler.onNoteTimeMatchListeners.map(listener => listener(collection, noteMatch));\n               }\n            }, 1000);\n        };\n\n        const onPlayerStateChangeCallback = player => {\n\n            if(!typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n\n            const playerState = player.getPlayerState();\n\n            switch(playerState) {\n                case videoHandler.states.find(state => state.value === 'playing').key: // 1\n                    checkCurrentTime(player);\n                    break;\n                case videoHandler.states.find(state => state.value === 'paused').key: // 2\n                    clearInterval(checkInt);\n                    checkInt = null;\n                    break;\n                default:\n                    checkCurrentTime(player);\n            }\n        };\n\n        videoHandler.subscribeToPlayerStateChange(onPlayerStateChangeCallback);\n\n        if(startTime) {\n            setTimeout(() => {\n                videoHandler.playVideoFrom(startTime);\n            }, 1000);\n        }        \n\n    }, timeBeforeVideoPlayerReady);\n        \n    const video = document.getElementsByTagName('iframe')[0];\n    const videoWidth = video.offsetWidth;\n          video.height = videoWidth * 9/16;\n  \n};\n\nexport const matchSpeciesTime = (time, collection) => {\n  const species = collection.items ? collection.items.filter(sp => sp.time) : collection.species.filter(sp => sp.time);\n  const match = species.find(sp => contains(time, sp.time));\n  return match;\n}\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport definitionTemplate from 'ui/screens/lists/species-list-definition-insert.html';\n\nlet currentlyActiveRow = null;\nlet currentlyActiveSpecies;\n\nexport const onSpeciesChangeHandler = species => {\n\n    try {\n\n        const id = species.id || species.eolId;\n        const tr = document.querySelector(`#id_${id}`);\n\n        currentlyActiveRow = tr;\n        currentlyActiveSpecies = species;\n        \n    } catch(e) {\n      logError(onSpeciesChangeHandler, e);\n    }\n};\n\nexport const openNoteHandler = (note, time) => {\n\n    if(Math.floor(note.time) !== time) return;\n\n    let parent = document.getElementById('insertParent');\n\n    if(parent) parent.remove();\n\n    const template = document.createElement('template');\n          template.innerHTML = definitionTemplate;\n\n    const insert = document.createElement('div');\n          insert.setAttribute('id', 'insertParent');\n\n    if(note.colCount) {\n        insert.classList.add(`col-count-${note.colCount}`);\n        insert.innerHTML = note.description.replace(/\\r?\\n/g, '<br />');\n    }\n\n    if(!currentlyActiveRow) {\n        // first row, before any species have been matched\n        currentlyActiveRow = document.querySelector('.js-list-item'); // first by default\n    }\n\n    currentlyActiveRow.parentElement.insertBefore(insert, currentlyActiveRow);\n\n    if(!note.colCount) {        \n        parent = document.getElementById('insertParent');\n        parent.innerHTML = '';\n        renderTemplate({ note }, template.content, parent);\n        const noteText = document.querySelector('#insertParent > div:nth-child(1) > div:nth-child(2)');\n              noteText.innerHTML =noteText.innerHTML.replace(/\\r?\\n/g, '<br />');\n    }    \n};\n","import { contains } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { utils } from 'utils/utils';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { modalImageHandler } from 'ui/helpers/image-handler';\nimport { buildTable } from 'ui/screens/lists/species-table';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { onSpeciesChangeHandler, openNoteHandler } from 'ui/screens/lists/species-list-definition-insert';\n\nexport const renderSpeciesList = (lesson, args) => {\n\n  const init = async () => {\n\n    const { callingParentContainer, isInCarousel = false } = args;\n\n    const { config, history, enums: traitEnums, collections  } = store.getState();    \n\n    // to ensure we have latest item list if species has been added\n    const collection = collections.find(c => c.id === lesson.id);\n\n    const openAccordionHandler = (species, accordion) => {\n        \n        accordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n        \n        openSpeciesDescriptionHandler(collection, species, true, false);\n\n        const closeAccordionHandler = event => {\n            // remove current close accordion handler\n            accordion.removeEventListener('click', closeAccordionHandler);\n            // change direction of chevron       \n            accordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${species.name}\"></i>`;\n            // attach new open accordion listener\n            accordion.addEventListener('click', event => {\n                openAccordionHandler(species, accordion);\n            });\n            // remove the species description - handled in group action\n            const description = document.querySelector('.species-description');\n            if(description) {\n                description.parentNode.removeChild(description);\n            }\n        };\n\n        // attach close accordion handler\n        accordion.addEventListener('click', closeAccordionHandler);\n    };\n\n    const userClickHandlers = () => {\n\n        const listItemImages = document.querySelectorAll('.table-row img');\n\n              listItemImages.forEach(itemImage => {                 \n                  const item = collection.items.find(item => item.name === itemImage.dataset.itemName)\n                  modalImageHandler(itemImage, item, collection, config); \n              });\n\n        const accordions = document.querySelectorAll('.js-accordion');\n\n              accordions.forEach(accordion => {\n                  const accordionHandler = event => {\n                      const species = collection.items.find(item => item.name === event.currentTarget.dataset.name);\n                      if(species) {\n                        openAccordionHandler(species, accordion);\n                      }\n                  };\n                  accordion.addEventListener('click', accordionHandler);\n              });\n\n        const youtubeIcons = document.querySelectorAll('.js-youtube');\n              youtubeIcons.forEach(icon => {                  \n                  icon.addEventListener('click', event => {       \n\n                    event.stopPropagation();\n\n                    const activeIcon = event.currentTarget;\n                          activeIcon.classList.add('youtube-green-fg');\n                    const speciesName = activeIcon.dataset.name;\n\n                    const species = { ...collection.items.find(item => item.name == speciesName), ...collection.species.find(item => item.name == speciesName) };\n\n\n                    openSpeciesDescriptionHandler(collection, species, true);\n\n                    if(species && species.time) {\n\n                        videoHandler.isVideoPlayerReady(collection.video.id)\n                            ? videoHandler.playVideoFrom(species.time[0])\n                            : videoSetup(collection, store.getState().videoPlayer || [], DOM.rightBody, species.time[0]);\n                    }\n\n                    updateVideoPlayer(collection, species);\n                  });\n              });\n\n        const cardModal = document.querySelector('#cardModal .js-modal-body');\n\n        setTimeout(() => {\n            \n            const speciesCardLinks = document.querySelectorAll('.js-test-card-container-link');\n                  speciesCardLinks.forEach((link, index) => {                \n                      link.addEventListener('click', event => {                    \n                        const name = event.target.dataset.name;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'species-card';\n                        renderCard(collection, 'MODAL', collection.items.find(i => i.name === name), cardModal, isInCarousel);\n                      });\n                  });\n\n            const traitCardLinks = document.querySelectorAll('.js-key-trait-link');\n                  traitCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const keyTrait = event.target.dataset.keyTrait;\n                        const url = event.target.dataset.url;\n                        renderNonTaxonCard('MODAL', keyTrait, cardModal, url);\n                    });\n                  });\n\n            const taxonCardLinks = document.querySelectorAll('.js-taxon-card-link');\n                  taxonCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const taxon = event.target.dataset.family || event.target.dataset.order;\n                        const name = event.target.dataset.name;\n                        const rank = event.target.dataset.rank;\n                        document.querySelector('#cardModal .prev > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'taxon-card';\n                        document.querySelector('#cardModal .next > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .next > span').dataset.card = 'taxon-card';\n                        renderTaxonCard(collection, 'MODAL', collection.items.find(i => i.taxonomy[rank] === name), cardModal, taxon, rank, isInCarousel);\n                    });\n                  });\n\n            document.querySelectorAll('.mushroom-icon').forEach(icon => {\n                icon.innerHTML = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg>';\n            });\n\n            const nthChild = config.isLandscapeMode ? 5 : 3;\n            const taxonIcons = document.querySelectorAll(`.table-row.js-list-item td:nth-child(${nthChild}) > span`);\n\n            if(!history) return;\n\n            const noWrongAnswersForThisSpecies = [];\n            history.scores.map(score => score.failsTotals).forEach(totals => {\n                for (let [key, anyWrongAnwers] of Object.entries(totals)) {\n                    if(anyWrongAnwers == false) {\n                        noWrongAnswersForThisSpecies.push(parseInt(key));\n                    }\n                }\n            });\n\n            taxonIcons.forEach(icon => {\n                if(contains(parseInt(icon.id), noWrongAnswersForThisSpecies)) {\n                    icon.classList.add('correct');\n                }\n            });\n        });\n    };\n\n    if(!!collection.notes && !!collection.notes.time) {\n        collection.notes.forEach(n => sp.firstTime = n.time[0]);\n        collection.notes = utils.sortBy(collection.notes, 'firstTime', 'asc');\n    }\n\n    const table = await buildTable(collection, { config, enums: traitEnums, overrideParent: callingParentContainer });\n\n    if(!table.isReady) return;\n\n    userClickHandlers();\n\n    const btnBeginLesson = callingParentContainer.querySelector('.js-btn-current-lesson-begin');\n          btnBeginLesson.addEventListener('click', () => {\n            lessonStateHandler.changeRequest({\n                requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n                requestArgs: {\n                  id: collection.id\n                }\n              });\n          });\n\n    const openSpeciesDescriptionHandler = (collection, species, enableScroll = true, activateYoutubeIcon = true) => {\n\n        try {\n\n            const parent = document.getElementById('insertParent');\n            if(parent) parent.remove();\n\n            const { accordions } = closeOpenAccordions(species.name);\n\n            const activeAccordion = accordions.find(accordion => accordion.dataset.name === species.name);\n            \n            if(activeAccordion) {\n                activeAccordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n\n                if(activateYoutubeIcon) {\n                  const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                        activeYouTubeIcon.classList.add('youtube-green-fg');\n              }\n            }\n\n            // if(activateYoutubeIcon) {\n            //     const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n            //           activeYouTubeIcon.classList.add('youtube-green-fg');\n            // }\n\n            let description = species.description;\n                description = !!description ? description : (species.traits.description && species.traits.description.value) ? species.traits.description.value[0] : '';\n\n            if(description) {\n\n                const id = species.id || species.eolId;\n                const tr = document.querySelector(`#id_${id}`);\n                \n                const td = document.createElement('td');\n\n                const text = document.createElement('div');\n                      text.classList.add('inserted-td');\n                      text.innerHTML = description.replace(/\\r?\\n/g, '<br />');\n\n                td.appendChild(text);\n\n                const insert = document.createElement('div');\n                      insert.classList.add('table-row');\n                      insert.classList.add('species-description');\n                      insert.appendChild(td);\n\n                tr.parentElement.insertBefore(insert, tr.nextSibling);\n\n                const scrollIntoView = (rowHeight, noOfRows) => {\n\n                    const scroll = document.querySelector('.scrollable');\n                    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhStandardBlock').replace('px', ''));\n                    const unit = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vh').replace('px', ''));\n                    const top = (standardBlock * 2) + (rowHeight * (noOfRows - 1)) - ( 2 * unit);\n\n                    scroll.scrollTop = top;\n                };\n\n                if(enableScroll) {\n                    config.isLandscapeMode \n                        ? tr.previousElementSibling.scrollIntoView()\n                        : scrollIntoView(tr.offsetHeight, species.snapIndex);\n                }\n            }\n        } catch(e) {\n          logError(openSpeciesDescriptionHandler, e);\n        }\n    };\n\n    videoHandler.onSpeciesTimeMatch((collection, species) => {\n\n        openSpeciesDescriptionHandler(collection, species);\n        updateVideoPlayer(collection, species);\n        onSpeciesChangeHandler(species);\n    });\n\n    videoHandler.onNoteTimeMatch((collection, note) => {        \n        openNoteHandler(note, videoHandler.getPlayerTime());\n    });\n  };\n\n  init();\n};\n\nlet currentIndex = 0;\n\nconst carouselControlHandler = event => {\n\n    const { collection } = store.getState();\n    \n    let transition = event.target.dataset.transition;\n    let modal = event.target.dataset.modal;\n    let card = event.target.dataset.card;\n    let rank =  event.target.dataset.rank;\n\n    switch(transition) {\n        case 'prev':\n            currentIndex--;\n            currentIndex = currentIndex === -1 ? collection.items.length -1 : currentIndex;\n            break;\n        case 'next':\n            currentIndex++;\n            currentIndex = currentIndex === collection.items.length -1 ? 0 : currentIndex;\n            break;\n    }\n\n    let nextItem = collection.items.find((item,index) => index === currentIndex);\n\n    const parent = document.querySelector(`#${modal} .js-modal-body`);\n    \n    switch(card) {\n        case 'species-card':\n            renderCard(collection, 'MODAL', nextItem, parent, isInCarousel);\n            break;\n        case 'taxon-card':\n            renderTaxonCard(collection, 'MODAL', nextItem, parent, null, rank, isInCarousel);\n            break;    \n    }    \n};\n\nconst prev = document.querySelector('#cardModal .js-prev');\nconst next = document.querySelector('#cardModal .js-next');\n\nif(prev) prev.addEventListener('click', carouselControlHandler);\nif(next) next.addEventListener('click', carouselControlHandler);\n\nconst prevTaxon = document.querySelector('#cardModal .js-prev');\nconst nextTaxon = document.querySelector('#cardModal .js-next');\n\nif(prevTaxon) prevTaxon.addEventListener('click', carouselControlHandler);\nif(nextTaxon) nextTaxon.addEventListener('click', carouselControlHandler);\n\nconst updateVideoPlayer = (collection, species) => {\n        \n    const playerRecords = store.getState().videoPlayer || [];\n    \n    let activeLesson = playerRecords.find(p => p.collectionId === collection.id); \n    \n    if(!activeLesson) {\n        activeLesson = { collectionId: collection.id };\n        playerRecords.push(activeLesson);\n    };\n\n    activeLesson.speciesName = species.name;\n    activeLesson.pausedAt = species.time ? species.time[0] : 0;\n\n    videoHandler.saveVideoState(playerRecords);    \n};\n\nconst closeOpenAccordions = speciesName => {\n\n    const accordions = Array.from(document.querySelectorAll('.js-accordion'));\n    const openAccordions = accordions.filter(accordion => accordion.dataset.name !== speciesName);\n        \n    openAccordions.forEach(inactiveAccordion => {\n        \n        if (inactiveAccordion.innerHTML.indexOf('fa-chevron-up') > -1) {\n            \n            inactiveAccordion.click();\n            inactiveAccordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${speciesName}\"></i>`;\n            \n            const inActiveYouTubeIcon = inactiveAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                  inActiveYouTubeIcon.classList.remove('youtube-green-fg');\n        }\n    });\n\n    const parent = document.querySelector('.species-table tbody');\n    const currentDescriptions = document.querySelectorAll('.species-description');\n            currentDescriptions.forEach(tr => parent.removeChild(tr));\n\n    return { accordions };\n};","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getInatSpecies } from 'api/inat/inat';\nimport { getPlace } from 'geo/geo';\nimport { firestore } from 'api/firebase/firestore';\nimport { enums } from 'ui/helpers/enum-helper';\n\nconst getItems = async (collection, config) => {\n\n  let items = [];\n\n  switch(config.guide.guideMode) {\n    case enums.guideMode.DYNAMIC.name:\n      switch(config.guide.guideType) {\n        case enums.guideType.LOCATION.name:\n          const place = await getPlace(config, true);\n          config.guide.coordinates = {\n              long: place.query[0],\n              lat: place.query[1]\n          };\n          items = await getInatSpecies(config);\n        case enums.guideType.INAT.name:\n          items = await getInatSpecies(config);\n      }      \n      break;\n    case enums.guideMode.STATIC.name:\n      items = await getSpeciesDetailsInParallel(collection.species);\n      break;\n  }\n\n  snapLog('getItems request type: ', { guideType: config.guide.guideType, guideMode: config.guide.guideMode, items: items });\n\n  return items;\n};\n\nconst loadCollection = async (collection, config) => {\n\n    config.collection = { id: collection.id };\n    \n    const collectionIsUnchanged = \n      collection.items && collection.items.length > 0 && config.collection.id === collection.id && \n      (!collection.speciesRange || collection.speciesRange === config.guide.speciesRange);\n  \n    snapLog('collectionIsUnchanged: ', collectionIsUnchanged);\n\n    if(!!collectionIsUnchanged) {\n      return collection;\n    }\n\n    collection.items = await getItems(collection, config);\n\n    if(collection.nextItem) return; // after refreshing or returning to the page (using rehydrated collection)\n\n    if(contains('lepidoptera', collection.iconicTaxa.map(taxon => taxon.id)) && !contains('insecta', collection.iconicTaxa.map(taxon => taxon.id))) {\n        const insecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() === 'insecta');\n        const lepidoptera = insecta.filter(i => i.taxonomy.order.toLowerCase() === 'lepidoptera');\n        const noninsecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() !== 'insecta');\n        collection.items = [ ...lepidoptera, ...noninsecta ];\n    }\n\n    switch(config.guide.guideMode) {\n      case enums.guideMode.DYNAMIC.name:\n        collection.speciesRange = config.guide.speciesRange;\n        break;\n    }\n\n    const loadedCollection = await loadCollectionItemProperties(collection, config);\n\n    return loadedCollection;\n};\n\nconst loadCollectionItemProperties = async (collection, config) => {\n\n  switch(config.guide.guideMode) {\n    case enums.guideMode.DYNAMIC.name:\n      collection.items = utils.sortBy(collection.items.filter(item => item), 'observationCount', 'desc');\n      break;\n    case enums.guideMode.STATIC.name:\n      collection.items.forEach(sp => {\n          if(sp.time) {\n              sp.firstTime = sp.time[0];\n          }\n      });\n      collection.items = utils.sortBy(collection.items, 'firstTime', 'asc');\n      break;\n  }\n    const families = [...new Set(collection.items.map(i => i.taxonomy.family))];\n    const orders = [...new Set(collection.items.map(i => i.taxonomy.order))];\n    const genera = [...new Set(collection.items.map(i => i.taxonomy.genus).filter(g => g))];\n    let familyTaxa = [], orderTaxa = [], genusTaxa = [];\n    let taxa = await firestore.getTaxaNames();\n    taxa = taxa[0].value;\n    const getGenusTaxa = async (genera) => {\n        return Promise.all(genera.map(async (genus) => {\n            const genusTaxon = await firestore.getTaxonByName(config, genus);\n            if(Object.entries(genusTaxon).length > 0 && genusTaxon.constructor === Object)\n                genusTaxa.push(genusTaxon);\n            return genusTaxa;\n        }));\n    };\n    await getGenusTaxa(genera);\n    const getFamilyTaxa = async (families) => {\n        return Promise.all(families.map(async (family) => {\n            const familyTaxon = await firestore.getTaxonByName(config, family);\n            if(Object.entries(familyTaxon).length > 0 && familyTaxon.constructor === Object)\n                familyTaxa.push(familyTaxon);\n            return familyTaxa;\n        }));\n    };\n    await getFamilyTaxa(families);\n    const getOrderTaxa = async (orders) => {\n        return Promise.all(orders.map(async (order) => {\n            const orderTaxon = await firestore.getTaxonByName(config, order);\n            if(Object.entries(orderTaxon).length > 0 && orderTaxon.constructor === Object)\n                orderTaxa.push(orderTaxon);\n            return orderTaxa;\n        }));\n    };\n    await getOrderTaxa(orders);\n    const getFamilyNames = item => {\n        if (item.family && item.family.names) {\n            return item.family.names[0].names ? item.family.names[0].names : item.family.names;\n        }\n        else {\n            return '';\n        }\n    };\n\n    const findRank = (taxa, item, rank) => {\n        const taxonRank = item.taxonomy[rank.name.toLowerCase()];\n        const taxon = taxa.length > 0 ? taxa.find(taxon => taxon.name === taxonRank) : null;\n        return taxon || '';\n    };\n\n    collection.items.forEach(async (item, index) => {\n        const names = item.name.split(' ');\n        item.taxonomy.genus = names[0];\n        item.taxonomy.species = names[1];\n        item.genus = findRank(genusTaxa, item, enums.taxon.GENUS);\n        item.family = findRank(familyTaxa, item, enums.taxon.FAMILY);\n        if (item.family) {\n            item.family.names = getFamilyNames(item);\n            item.family.vernacularName = item.family.names[0];\n        }\n        item.order = findRank(orderTaxa, item, enums.taxon.ORDER);\n        item.snapIndex = index + 1;\n        item.id = item.eolId;\n        item.vernacularNames = itemProperties.getVernacularNames(item, config);\n        item.vernacularName = itemProperties.getVernacularName(item, config);\n        item.name = names.slice(0, 2).join(' ');\n        item.questionIds = item.questionIds || [];\n    });\n    const loadTraitsInParallel = items => {\n        return Promise.all(items.map(async (item) => {\n            const itemTraits = await firestore.getTraitsBySpeciesName(item.name);\n            item.traits = itemTraits || {};\n            return item;\n        }));\n    };\n    await loadTraitsInParallel(collection.items);\n    collection.itemIndex = 0;\n    collection.glossary = [...Array.from(new Set(collection.items.map(item => item.iconicTaxon))), 'common'];\n    return await collection;\n};\n\nconst getSpeciesDetailsInParallel = async species => {\n    const items = await firestore.getSpeciesInParallel(species);\n    return items;\n}\n\nexport const collectionHandler = {\n    loadCollection,\n    loadCollectionItemProperties,\n    getSpeciesDetailsInParallel\n};\n\n","import { contains, clone } from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderSpeciesList } from 'ui/screens/lists/species-list';\nimport { collectionHandler  } from 'ui/helpers/collection-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nconst changeRequest = async args => {\n\n  const { requestType, requestArgs } = args;\n\n  const { collection } = store.getState();\n\n  switch(requestType) {\n\n    case enums.lessonState.PAUSE_LESSON:      \n      snapLog('config', store.getState().config);\n      if(store.getState().config.isLandscapeMode) return;      \n      changeLessonState(requestType, collection, store.getState().config);\n    break;\n    \n    case enums.lessonState.UPDATE_COLLECTION:\n      updateCollection(requestArgs);\n    break;\n    \n    case enums.lessonState.SAVE_LESSON_PROGRESS:\n      saveCurrentLesson(collection);\n    break;\n    \n    case enums.lessonState.GET_LESSON_STATE:\n      const { collectionToLoad, updatedCounter, config } = requestArgs;\n      return await getLessonState(collectionToLoad, config, updatedCounter);      \n    \n    case enums.lessonState.ADD_SPECIES_TO_COLLECTION:\n      return await addExtraSpeciesSelection(requestArgs);\n    \n    case enums.lessonState.RENDER_SPECIES_LIST:\n      renderLessonSpeciesList(requestArgs);\n    break;\n    \n    case enums.lessonState.BEGIN_OR_RESUME_LESSON:\n      const { id } = requestArgs;\n      beginOrResumeLesson(id);\n    break;\n\n    case enums.lessonState.NEXT_ROUND:\n      const { lesson } = requestArgs; \n      changeLessonState(enums.lessonState.NEXT_ROUND, collection, lesson);\n    break;\n  }\n};\n\nconst beginOrResumeLesson = async (selectedLessonCollectionId, requestedlessonState)  => {\n\n  const { collections, collection: currentCollection, config } = store.getState();\n\n  const collectionToLoad = lessonStateHelper.getCollectionToLoad(currentCollection, collections, selectedLessonCollectionId);\n\n  const { collection, score, lesson } = await getLessonState(collectionToLoad, config);\n\n  const lessonState = !!requestedlessonState ? requestedlessonState : (score && score.collectionId === collection.id) \n          ? enums.lessonState.RESUME_LESSON\n          : enums.lessonState.BEGIN_LESSON;\n\n  changeLessonState(lessonState, collection, lesson); \n};\n\nconst renderLessonSpeciesList = async requestArgs => {\n\n  const { lesson: collectionToLoad, container } = requestArgs;\n\n  const { config } = store.getState();\n\n  const { collection } = await getLessonState(collectionToLoad, config);\n\n  setTimeout(() => {\n    renderSpeciesList(collection, { callingParentContainer: container });\n  });\n};\n\nconst getLessonState = async (collectionToLoad, config, newLessonCounter) => {\n\n  const { counter: stateCounter, lessons, lesson: savedLesson } = store.getState();\n\n  const counter = newLessonCounter || stateCounter;\n\n  const lessonState = lessonStateHelper.getUserLessonState(lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter);\n\n  lessonState.collection = await collectionHandler.loadCollection(lessonState.collection, config);\n\n  setActiveCollection(lessonState);\n\n  return lessonState;\n};\n\nconst changeLessonState = async (lessonState, collection, lesson) => {    \n\n  switch(lessonState) {\n      case enums.lessonState.BEGIN_LESSON: {\n            actions.boundStopStartLesson({ index: 0, isLessonPaused: false });\n          break;\n      }\n      case enums.lessonState.PAUSE_LESSON: {\n\n        if(collection.items) {\n          const { index } = lessonStateHelper.getLatestCounter(collection);\n          actions.boundStopStartLesson({ index, isLessonPaused: true, log: { index: index, collection: collection.id  } });\n        }\n\n        break;\n      }\n      case enums.lessonState.RESUME_LESSON: {\n          actions.boundStopStartLesson({ ...lessonStateHelper.getLatestCounter(collection), isLessonPaused: false });\n          break;\n      }\n      case enums.lessonState.NEXT_ROUND: {\n          if(lesson.isLevelComplete) {\n            actions.boundNextLevel({ index: 0, lesson });\n          } else if(lesson.isNextRound) {\n              actions.boundNextRound({ index: 0, lesson: { ...lesson, currentRound: lesson.currentRound + 1 } });\n          };\n          break;      \n      }\n  }\n  return lesson;\n};\n\nconst addExtraSpeciesSelection = async requestArgs => {\n\n  const { config, collection } = requestArgs;\n\n  if(!collection) return;\n\n  if(!collection.items) return;\n\n  const extraSpecies = config.guide.species.filter(s => !contains(s.name, collection.items.map(i => i.name)));\n\n  const items = await collectionHandler.getSpeciesDetailsInParallel(extraSpecies);\n\n  const collectionExtension = await collectionHandler.loadCollectionItemProperties({ items }, config);\n  collection.items = [ ...collection.items, ...collectionExtension.items];\n  const lesson = {\n      collection,\n      counter: { ...store.getState().counter, index: 0 },\n      lesson: { currentRound: 1, rounds: 0, isNextRound: true },\n      layout: null,\n      history: null,\n      score: clone(progressState.score)\n  };\n\n  setActiveCollection(lesson);\n};\n\nconst updateCollection = requestArgs => {\n  const { config, collection } = requestArgs;\n  actions.boundUpdateCollection({ config, collection }); // or use setActive-Collection?\n};\n\nconst setActiveCollection = lesson => {\n  lesson.counter = lesson.counter || { };\n  actions.boundSetActiveCollection({ lesson });\n  const { user } = store.getState();\n  firestore.addCollection(clone(lesson.collection), user);\n};\n\nconst recordUserAction = action => {\n  actions.boundClickEvent(action);\n};\n\nconst saveCurrentLesson = async collection => {\n\n  const { counter, lessonPlan, lessonPlans, layout, lesson, score, history, bonusLayout, enums, config } = store.getState();\n  \n  config.collection.id = collection.id;\n\n  const savedLesson = { \n      name: collection.name,\n      config, collection, counter, lessonPlan, lessonPlans, layout, lesson, score: clone(score), history, bonusLayout, enums\n  };\n\n  actions.boundSaveLesson(savedLesson);\n\n  return savedLesson;\n};\n\nexport const lessonStateHandler = {\n  changeRequest,\n  recordUserAction\n};","import{ contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getLessonScores = (history, lesson, stateScore, savedScore) => {\n\n      if(!history) return [ stateScore ];\n\n      const historyIsUpToDate = contains(stateScore.binomial, history.scores.map(s => s.binomial));\n\n      let scores = [];\n\n      if(lesson.isNextRound) {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : stateScore.total === 0\n                        ? history.scores\n                        : [...history.scores, stateScore];\n      } else {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : [...history.scores, stateScore];\n      }\n      \n      return scores;\n};\n\nconst getSummaryRows = (rows) => {\n      rows = rows.map((r, i) => {\n            const _r = {\n                  ...r, id: `${utils.toCamelCase(r.binomial)}_${i}`, question: r.question.term ? r.question.term : r.question, \n                        answers: r.answers.map(a => { return getAnswer(a, r); })\n            };\n            return _r;\n      });\n      return rows;\n};\n\nexport const scoreSummaryHandler = {\n    getLessonScores,\n    getSummaryRows\n}\n\nfunction getAnswer(a, r) {\n      \n      const isObj = typeof a === 'object';\n\n      const value = isObj ? a.value || a.term : a;\n      const hasImage = isObj && !!a.url;\n      const url = isObj ? a.url : '';\n      const question = r.question.term || r.question;\n      const isTrue = \n                  value !== \"\" && \n                          (utils.parseToLowerCase(value) === utils.parseToLowerCase(question))\n                        // || contains(value, r.answer))\n\n      const isWrongAnswer = !isTrue && utils.parseToLowerCase(value) === utils.parseToLowerCase(r.answer);\n      const name = isObj ? a.name || '' : '';\n      \n      const answer = {\n            value,\n            url,\n            hasImage,\n            isTrue,\n            isWrongAnswer,\n            name\n      };\n      return answer;\n}\n","import { enums } from 'ui/helpers/enum-helper';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { scoreSummaryHandler } from 'ui/screens/progress/score-summary-handler';\n\nimport summaryTemplate from 'ui/screens/progress/score-summary-template.html';\nimport summaryRowTemplate from 'ui/screens/progress/score-summary-row-template.html';\nimport summaryNoRowTemplate from 'ui/screens/progress/score-summary-no-row-template.html';\n\nexport const renderScoreSummary = (lessonId, summaryContainer) => {\n\n      const init = () => {\n\n            const { lessons, score: stateScore, userAction } = store.getState();\n\n            const { collection, history, config, score: savedScore } = lessons.length > 0\n                        ? !!lessons.find(l => l.collection.id === parseInt(lessonId))\n                              ? lessons.find(l => l.collection.id === parseInt(lessonId))\n                              : store.getState()\n                        : store.getState();\n      \n            const { lesson } = store.getState();\n      \n            if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n      \n            const template = document.createElement('template');\n                  template.innerHTML = summaryTemplate;\n      \n            const parent = config.isLandscapeMode\n                        ? summaryContainer || document.querySelector('#lessonModal .js-modal-text')\n                        : DOM.rightBody ;\n                  parent.innerHTML = '';\n            \n            renderTemplate({ collection, lesson }, template.content, parent);\n\n            const actionLinks = document.querySelectorAll('.js-continue-link');\n\n            setTimeout(() => {\n              actionLinks[0].focus();\n            }, 250);\n\n            if(summaryContainer) {\n                  actionLinks.forEach(link => link.classList.add('snap-inactive'));\n            }\n\n            if(lesson.layoutName === 'summary') {\n                  const progressLink = document.querySelector('.js-review-progress');\n                        progressLink.innerHTML = '';\n            }\n            \n            let scores = scoreSummaryHandler.getLessonScores(history, lesson, stateScore, savedScore).reverse();\n                scores.forEach(s => renderScoreSummaryRow(scores, s, config));\n      \n            const handleContinueLesson = async e => {\n                e.preventDefault();\n                lessonStateHandler.changeRequest({\n                      requestType: enums.lessonState.NEXT_ROUND,\n                      requestArgs: {\n                        id: lessonId,\n                        lesson: { ...lesson, isNextRound: true }\n                      }\n                    });\n            };\n      \n            const handleNewLesson = async event => {                   \n                  await lessonStateHelper.purgeLesson();\n            };\n      \n            if(lesson.isLessonComplete) {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.innerHTML = 'START NEW LESSON';\n                        actionLink.addEventListener('click', handleNewLesson, { once: true });\n                  });\n            } else {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.addEventListener('click', handleContinueLesson, { once: true });\n                  });\n            }\n\n            window.addEventListener('keydown', e => {\n              if(e.key === 'Enter') {\n                handleContinueLesson(e);\n              }                  \n            }, { once: true });\n      };\n\n      init();\n}\n\nconst renderScoreSummaryRow = (scores, s, config) => {\n    \n      const template = document.createElement('template');\n            template.innerHTML = summaryRowTemplate;\n\n      const parent = document.querySelector('.js-score-summary-rows');\n            \n      if(s.total === 0) {\n            parent.innerHTML = '';\n            template.innerHTML = summaryNoRowTemplate;            \n            renderTemplate({ }, template.content, parent);\n            return;\n      }\n      let rows = [ ...s.passes, ...s.fails ];\n          rows = scoreSummaryHandler.getSummaryRows(rows);          \n\n      const vernacularName = s.vernacularName || itemProperties.getVernacularName(s.binomial, config);\n\n      renderTemplate({ vernacularName, binomial: s.binomial, rows, score: `${s.correct}/${s.total}` }, template.content, parent);\n\n      if(scores.length > 0) {\n            const noQuestionsText = parent.querySelector('.js-no-questions');                  \n            if(noQuestionsText) {\n                  noQuestionsText.innerHTML = '';\n            }\n      }\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nimport testCardTemplate from 'ui/screens/cards/test-card-template.html';\n\nexport const renderTestCardTemplate = (collection, context) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = testCardTemplate;\n\n    const { config } = store.getState();\n\n    const modal = config.isLandscapeMode ? document.querySelector('#lessonModal') : document;\n\n    const parent = config.isLandscapeMode \n                        ? modal.querySelector('.js-modal-text')\n                        : DOM.rightBody ;\n          parent.innerHTML = '';\n\n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = collection.name;\n\n    context.className = context.className || '';\n    context.headerClassName = context.headerClassName || '';\n\n    context.statement = context.statement || '';\n    context.providerQuestion = context.providerQuestion || '';\n\n    renderTemplate(context, template.content, parent);\n\n    const progressLink = modal.querySelector('.js-review-progress');\n\n    if(progressLink) {\n\n        progressLink.innerHTML = 'Progress';\n        progressLink.addEventListener('click', e => {\n\n          const summaryContainer = modal.querySelector('.js-summary-container');\n\n          const renderSummaryCard = () => {\n\n              renderScoreSummary(collection.id, summaryContainer);\n\n              let count = 1;\n\n              const toggleScreens = (screenOne, screenTwo) => {\n                  hideCurrentCard(screenOne);\n                  progressLink.innerHTML = count % 2 === 0 ? 'Progress' : 'Quiz';\n                  count++;\n                  screenTwo.classList.remove('swap-out-card');\n                  progressLink.addEventListener('click', e => {                    \n                      toggleScreens(screenTwo, screenOne);\n                  }, { once: true });\n              };\n\n              toggleScreens(testCardContainer, summaryContainer);\n          };\n\n          renderSummaryCard();\n\n        }, { once: true });\n\n        progressLink.focus();\n    }\n\n    toggleStatementAndQuestion(config);\n\n    const testCardContainer = modal.querySelector('.js-test-card-container');\n    const testCard = modal.querySelector('.js-test-card-container');\n    const testCardIcon = testCard.querySelector('.js-card-link');\n\n    const item = collection.nextItem || collection.items[context.bonus.itemIndex];\n\n    const hideCurrentCard = (container, card) => {\n\n        container.classList.add('swap-out-card');\n        container.classList.remove('swap-in-card');\n\n        if(card) {\n            card.classList.add('swap-out-card');\n            card.classList.remove('swap-in-card');\n        }\n    };\n\n    const showNextCard = (container, selector) => {\n                \n        container.classList.remove('swap-out-card');\n\n        const card = modal.querySelector(selector);\n        const icon = card.querySelector('.js-card-link');\n              icon.classList.remove('disabled-icon');\n\n        return { card, icon };\n    }\n\n    testCardIcon.addEventListener('click', async event => {\n        \n        const speciesContainer = modal.querySelector('.js-species-container');\n        const taxonContainer = modal.querySelector('.js-taxon-container');\n\n        const renderSpeciesCard = async () => {\n\n            renderCard(collection, 'SWAP_OUT', item, speciesContainer, false);\n                    \n            setTimeout(() => {            \n\n                hideCurrentCard(testCardContainer, testCard);\n\n                const { card: speciesCard, icon: speciesIcon } = showNextCard(speciesContainer, '.js-species-card');\n\n                speciesIcon.addEventListener('click', async event => {\n\n                    item.lichen \n                        ? renderNonTaxonCard('SWAP_OUT', item.keyTrait, taxonContainer, item.images.find(i => i.starred) ? item.images.find(i => i.starred).url : item.images[0].url)\n                        : renderTaxonCard(collection, 'SWAP_OUT', item, taxonContainer, false);\n                    \n                    hideCurrentCard(speciesContainer, speciesCard);\n\n                    const { card: taxonCard, icon: taxonIcon } = item.lichen\n                        ? showNextCard(taxonContainer, '.js-non-taxon-card')\n                        : showNextCard(taxonContainer, '.js-taxon-card');\n\n                    taxonIcon.addEventListener('click', event => {\n                        hideCurrentCard(taxonContainer, taxonCard);\n                        showNextCard(testCardContainer, '.js-test-card');\n                    });\n                });\n\n            }, 500);\n        };\n\n        await renderSpeciesCard();\n    });\n\n    renderIcon(item.taxonomy, modal);\n\n    let testContentParent = modal.querySelector('.js-test-card-content');\n\n    return testContentParent;\n};\n\nconst toggleStatementAndQuestion = config => {\n\n    if(config.isLandscapeMode) return;\n    \n    const statement = document.querySelector('.js-statement-para');\n    const question = document.querySelector('.js-question-para');\n\n    question.classList.add('hide');\n\n    var iterations = 20;\n    var i = 0;\n\n    var interval = setInterval(function() { \n            if(i % 2) {\n                question.classList.add('hide');\n                statement.classList.remove('hide');\n            } else {\n                question.classList.remove('hide');\n                statement.classList.add('hide');\n            }\n            i++; \n            if(i >= iterations) clearInterval(interval);\n    }, 5000);\n\n};\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport languageSelectionTemplate from 'ui/screens/common/language-selection-template.html';\n\nexport const languagePicker = (config, parent, listener) => {\n\n    const languages = config.languages;\n\n    const template = document.createElement('template');\n          template.innerHTML = languageSelectionTemplate;\n    \n    parent.innerHTML = '';\n\n    renderTemplate({ languages }, template.content, parent);\n\n    const taxonLanguageBtn = document.querySelector('#taxonLanguageBtn');\n          taxonLanguageBtn.innerHTML = `Taxon language [ ${languages.find(l => l.lang === config.language).name} ] `;\n\n    const taxonLanguageTxt = document.querySelector('#taxonLanguageTxt');\n          taxonLanguageTxt.innerHTML = languages.find(l => l.lang === config.language).name;\n\n    document.querySelectorAll('.dropdown-item').forEach(language => {\n        language.addEventListener('click', event => {\n            config.language = languages.find(l => l.lang === event.target.id).lang;\n            const name = languages.find(l => l.lang === event.target.id).name;\n            taxonLanguageBtn.innerHTML = `Taxon language [ ${name} ]`;\n            taxonLanguageTxt.innerHTML = name;\n            listener(config);\n        });    \n    });\n\n};","import autocomplete from 'autocompleter';\nimport { getAutocompleteBy } from 'api/inat/inat';\nimport { GoogleAutocomplete } from 'geo/geo';\n\n// https://github.com/kraaden/autocomplete\n\nexport const inatAutocomplete = (input, type, className, rb) => {\n\n    const MIN_LENGTH = 3;\n\n    async function getUserSuggestions(text) {\n        const users = await getAutocompleteBy(text, 'users');\n        return users.results.map(user => {\n            return { label: user.login_autocomplete, value: user.id, photo: user.icon, name: user.name };\n        });\n    }\n\n    async function getInatPlaceSuggestions(text) {        \n        const users = await getAutocompleteBy(text, 'places');\n        return users.results.map(place => {\n            return { label: place.display_name, value: place.id };\n        });\n    }    \n\n    function getPlaceSuggestions(text, update) {\n        let callback = null;\n        callback = predictions => {\n            update(predictions.map(prediction => {\n                return { label: prediction.description, value: prediction.place_id };\n            }));\n        } \n        GoogleAutocomplete(text, callback);\n    }\n\n    async function getProjectSuggestions(text) {\n        const projects = await getAutocompleteBy(text, 'projects');\n        return projects.results.map(place => {\n            return { label: place.title, value: place.id };\n        });\n    }\n    \n    const autocompleteRef = autocomplete({\n        input: input,\n        fetch: function(text, update) {\n            switch(type) {\n                case 'users':\n                    getUserSuggestions(text).then(users => {\n                        update(users);\n                    });\n                    break;\n                case 'places':\n                    getPlaceSuggestions(text, update);\n                    break;\n                case 'projects':\n                    getProjectSuggestions(text).then(projects => {\n                            update(projects);\n                        });\n                    break;\n            }           \n\n        },\n        onSelect: function(item) {\n            input.value = item.label;\n            input.name = item.value;\n        },\n        className: className,\n        rb: rb,\n        minLength: MIN_LENGTH,\n        debounceWaitMs: 200\n    });\n\n    return autocompleteRef;\n};","export const switchHandler = (idSwitch, startingPosition, callback) => {\n    \n    if(!idSwitch) return;\n    \n    const state = { position: startingPosition === 'left' ? 'right' : 'left' };\n\n    let switchControl = idSwitch.querySelector('div');\n    let leftText = idSwitch.parentElement.querySelector('.txt-left');\n    let rightText = idSwitch.parentElement.querySelector('.txt-right');\n\n    const switcher = () => {\n        \n        switch(state.position) { \n            case 'left':\n                switchControl.parentElement.classList.add('right');\n                switchControl.parentElement.classList.remove('left');\n                leftText.classList.remove('selected');\n                rightText.classList.add('selected');\n                state.position = 'right';\n                break;\n            case 'right':\n                switchControl.parentElement.classList.add('left');\n                switchControl.parentElement.classList.remove('right');\n                leftText.classList.add('selected');\n                rightText.classList.remove('selected');\n                state.position = 'left';\n                break;\n        }\n        callback(state.position);\n    }\n\n    switcher();\n\n    idSwitch.addEventListener('click', event => {\n        switcher();        \n    });\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace, GooglePlaceDetails } from 'geo/geo';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport locationTemplate from 'ui/create-guide-modal/location-template.html';\nimport googleLogoImg from 'img/powered_by_google_on_white_hdpi.png';\n\nexport const renderLocation = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    createGuide.saveStep('LOCATION');\n\n    let locationPlace = config.guide.locationPlace;\n    let autocompleteRef;\n\n    const template = document.createElement('template');\n          template.innerHTML = locationTemplate;\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    config.guide.season.observableMonths = config.guide.season.observableMonths || config.season.observableMonths;\n    config.guide.guideMode = enums.guideMode.DYNAMIC.name;\n\n    if(config.guide.season.observableMonths) {\n\n        const months = config.guide.season.observableMonths.map(month => month.name);\n        const observableMonths = `${months[0]}-${months[months.length - 1]}`;\n        const defaultNoOfRecords = config.guide.noOfRecords;\n\n        renderTemplate({ observableMonths, noOfRecords: defaultNoOfRecords }, template.content, parent);\n    }\n\n    const defaultLocationTxt = 'Use your current location';\n\n    const setLocationLongLatBtn = modal.querySelector('.js-set-location-btn');\n          setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n\n    async function handleSetLocationLongLat(event) {\n\n        event.stopPropagation();\n        setLocationLongLatBtn.innerHTML = 'Updating location…'\n        const place = await getPlace(config, true);\n        config.guide.locationType = 'longLat';        \n        config.place = place;\n        config.guide.locationLongLat = place.longLocation;\n        setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n        \n        createGuide.setConfig(config);\n        createGuide.saveStep('LOCATION');\n    }\n\n    setLocationLongLatBtn.addEventListener('click', handleSetLocationLongLat);\n\n    const locationPlaceInput = modal.querySelector('#inat-place');\n          locationPlaceInput.placeholder = config.isLandscapeMode\n                                            ? 'Or start typing the name of a place you are interested in.'\n                                            : 'Or start typing the name of a place.';\n          locationPlaceInput.focus();\n\n    // let counter = 0;\n\n    const handleLocationPlaceInput =  e => {\n        locationPlaceInput.removeEventListener('keypress', handleLocationPlaceInput);\n        // counter++;        \n        autocompleteRef = inatAutocomplete(locationPlaceInput, 'places', 'autocomplete-options-container', 'place');\n        // saveLocationBtn.disabled = false;        \n        // setTimeout(() => {\n        //     const googleImageContainer = modal.querySelector('#inat-place-autocomplete #googleLogoContainer');\n        //     if(!googleImageContainer && counter >= 3) {\n        //         const options = modal.querySelector('#inat-place-autocomplete');\n        //         if(options) options.innerHTML += `<div id=\"googleLogoContainer\"><img id=\"googleLogo\" src=\"${googleLogoImg}\" alt=\"\"></div>`;\n        //     }            \n        // },750);  \n    }\n\n    locationPlaceInput.addEventListener('keypress', handleLocationPlaceInput);\n\n    locationPlaceInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    locationPlaceInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('locationForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(locationPlaceInput.value !== '') {\n            saveLocation(config, locationPlaceInput, locationPlace, createGuide);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        locationPlaceInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveLocation(config, locationPlaceInput, locationPlace, createGuide);                   \n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    let range = config.guide.speciesRange;\n    const rangeTxt = modal.querySelector('.js-range');\n          rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n    modal.querySelector('.js-set-range-input').value = range;\n\n    const slider = modal.querySelector('.js-set-range-input');\n    \n    const updateSlider  = event => {\n        range = event.target.value;\n        config.guide.speciesRange = range;\n        rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n        createGuide.setConfig(config);\n    };\n    \n    slider.addEventListener('change', updateSlider);\n\n    createGuide.nextStepActionArrow.addEventListener('click', event => {\n        if(autocompleteRef)\n            autocompleteRef.destroy();\n    });\n\n    const idSwitch = parent.querySelector('.js-snap-switch-slider');\n\n    const switchCallback = position => {\n\n        const config = createGuide.getConfig();\n\n        const currentType = config.guide.season.type;\n\n        if(position === 'right') {\n            config.guide.season.type = 'all_year';\n        } else {\n            config.guide.season.type = 'months';\n        }\n\n        createGuide.setConfig(config);\n        \n        if(config.guide.season.type !== currentType) {\n            createGuide.saveStep('SEASON');\n        }        \n    };\n\n    const position = config.guide.season.type === 'months' ? 'left' : 'right';\n\n    switchHandler(idSwitch, position, switchCallback);\n\n    const noOfRecords = document.querySelector('.js-location-no-of-records');\n          noOfRecords.addEventListener('change', e => {\n            const config = createGuide.getConfig();\n                  config.guide.noOfRecords = parseInt(noOfRecords.value);\n            createGuide.setConfig(config);\n          });\n}\n\nconst saveLocation = (config, locationPlaceInput, locationPlace, createGuide) => {\n\n    let selectedText = locationPlaceInput.value;\n    let selectedId = locationPlaceInput.name;\n\n    config.guide.locationType = 'longLat';\n    config.guide.place.name = selectedText;\n    config.guide.locationLongLat = selectedText;\n\n    config.guide.locationType = 'longLat';\n    config.guide.locationLongLat = selectedText;    \n\n    const callback = geocoderResult => {\n        if(geocoderResult && geocoderResult.length > 0) {\n            const lat = geocoderResult[0].geometry.location.lat();\n            const long = geocoderResult[0].geometry.location.lng();\n            config.guide.coordinates = { lat, long };\n            \n            locationPlaceInput.value = '';\n            \n            createGuide.setConfig(config);\n            createGuide.saveStep('LOCATION');\n        }\n    };\n    GooglePlaceDetails(selectedId, callback);\n\n    return locationPlace;\n}\n","import { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport inatTemplate from 'ui/create-guide-modal/inat-user-template.html';\n\nexport const renderInatUser = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatTemplate;\n\n    config.guide.guideMode = enums.guideMode.DYNAMIC.name;\n    if(config.guide.inatId.key !== '-----') {\n        if(config.guide.locationType !== 'inat') {\n            config.guide.locationType = 'inat';\n            createGuide.setConfig(config);\n        }\n        createGuide.saveStep('INAT');\n    }\n\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('.js-chosen > div > span:nth-child(2)').innerHTML += '<div class=\"delete-guide-link js-toggle-filter\"><input class=\"hide\" type=\"checkbox\"></div>';\n\n    let autocompleteRef;\n\n    const position = config.guide.inatId.param === 'user_id' ? 'left' : 'right';\n\n    let byType = 'users';\n\n    const inatIdentityInput = parent.querySelector('#inat-identity');\n          inatIdentityInput.focus();\n\n    const handlerInatIdentityInput = e => {\n        inatIdentityInput.removeEventListener('keypress', handlerInatIdentityInput);\n        autocompleteRef = inatAutocomplete(inatIdentityInput, byType, 'inat-autocomplete-options-container', '');\n    }\n\n    inatIdentityInput.addEventListener('keypress', handlerInatIdentityInput);\n\n    inatIdentityInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    inatIdentityInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('inatForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(inatIdentityInput.value !== '') {\n            saveInatId(parent, config, createGuide, autocompleteRef);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        inatIdentityInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.inat-autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveInatId(parent, config, createGuide, autocompleteRef);\n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    const idSwitch = parent.querySelector('.snap-switch-slider');\n\n    const switchCallback = position => {\n        \n        byType = position === 'left' ? 'users' : 'projects';\n\n        const type = position === 'left' ? 'iNat user ID' : 'iNat project ID';\n        const param = position === 'left' ? 'user_id' : 'project_id';\n\n        config.guide.inatId.type = type;\n        config.guide.inatId.param = param;\n\n        createGuide.setConfig(config);\n    };\n\n    switchHandler(idSwitch, position, switchCallback);\n};\n\nconst saveInatId = (parent, config, createGuide, autocompleteRef) => {\n\n    const input = parent.querySelector('#inat-identity');\n    if (config.isLandsapeMode) {\n        input.value = '';\n        input.focus();\n    }\n    const key = input.value;\n    const id = input.name;\n    config.guide.inatId.key = key;\n    config.guide.inatId.id = id;\n\n    if (key !== '') {\n        config.guide.locationType = 'inat';\n        createGuide.setConfig(config);\n        createGuide.saveStep('INAT');\n        parent.querySelector('#inat-identity').value = '';\n        if (autocompleteRef) {\n            // autocompleteRef.destroy();\n        }\n    }\n}\n","const all = [\n    {\n      id: 'fungi',\n      common: 'Fungi & Lichens'\n    },\n    {\n      id: 'amphibia',\n      common: 'Amphibians'\n    },\n    {\n      id: 'mammalia',\n      common: 'Mammals'\n    },\n    {\n      id: 'plantae',\n      common: 'Plants'\n    },\n    {\n      id: 'lepidoptera',\n      common: 'Butterflies & Moths'\n    },\n    {\n      id: 'insecta',\n      common: 'Insects'\n    },\n    {\n      id: 'aves',\n      common: 'Birds'\n    },\n    {\n      id: 'reptilia',\n      common: 'Reptiles'\n    }\n];\n\nexport const iconicTaxa = {\n    all\n}","import{ contains } from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nimport editorTemplate from 'ui/create-guide-modal/species-in-guide-editor-template.html';\n\nexport const speciesInGuideEditor = (config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, savedSpeciesNames) => {\n\n    const spinner = modal.querySelector('.js-species-search');\n    if(spinner) spinner.classList.add('hide-important');\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = ''\n\n    renderTemplate({selectedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const getTaxa = (taxa, config, selectedSpecies) => {\n        if(taxa) {           \n            if(config.guide.iconicTaxa) {\n                taxa.innerHTML = config.guide.iconicTaxa.map(i => i.common).join(', ');\n            } else {\n                taxa.innerHTML = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon))].join(', ');\n            }\n        }\n    }\n        \n    const speciesCount = modal.querySelector('.js-lesson-taxa-count');\n\n    if(speciesCount) {\n        speciesCount.innerHTML = speciesCount === 1 \n            ? `There is ${selectedSpecies.length} species in this lesson.`\n            : `There are ${selectedSpecies.length} species in this lesson.`;;\n    }\n\n    const taxa = modal.querySelector('.js-lesson-taxa');\n    getTaxa(taxa, config, selectedSpecies);\n\n    const input = modal.querySelector(\"#input-species\");\n    if(config.isLandscapeMode) {\n        setTimeout(() => {\n            input.focus();\n        }, 500);\n    }\n\n    const addSpeciesToList = async species => {\n        \n        if(contains(species.name, selectedSpecies.map(ss => ss.name))) return;\n\n        selectedSpecies.push(species);\n\n        config.guide.species = selectedSpecies;\n        config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n        createGuide.setConfig(config);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        const { collection } = store.getState();\n\n        lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n            requestArgs: {\n                updatedConfig: config, updatedCollection: collection\n            }\n        });\n\n        setTimeout(() => {            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        }, 250);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !contains(n.value, selectedSpecies.map(ss => ss.name)));\n                update(suggestions);\n            },\n            onSelect: async function(item) {\n                input.value = item.label;\n                const species = await firestore.getSpeciesByName(item.label);\n                addSpeciesToList(species);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(async() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    const species = await firestore.getSpeciesByName(input.value);\n                    addSpeciesToList(species);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    modal.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species.name !== removedSpecies);\n            \n            config.guide.species = selectedSpecies;\n            config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n            createGuide.setConfig(config);\n            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        });\n    })\n};","import{ contains } from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport editorTemplate from 'ui/create-guide-modal/species-editor-template.html';\n\nconst listenersToAddedSpecies = [];\n\nexport const addListenerToAddedSpecies = listener => {\n    listenersToAddedSpecies.pop();  \n    listenersToAddedSpecies.push(listener);\n};\n\nexport const speciesEditor = (container, selectedSpeciesDisplay, selectedSpecies, savedSpeciesNames, addedSpecies) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = '';\n\n    renderTemplate({addedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const input = container.querySelector(\"#input-species\");\n          \n    setTimeout(() => {\n        input.focus();\n    }, 500);\n\n    const addSpeciesToList = species => {\n        \n        if(contains(species, selectedSpecies)) return;\n\n        selectedSpecies.push(species);\n        addedSpecies.push(species);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        listenersToAddedSpecies.forEach(listener => listener(species));\n\n        setTimeout(() => {            \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames, addedSpecies);\n        }, 200);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !contains(n.value, selectedSpecies));\n                update(suggestions);\n            },\n            onSelect: function(item) {\n                input.value = item.label;\n                addSpeciesToList(input.value);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    addSpeciesToList(input.value);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    container.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species !== removedSpecies);\n                        \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames);\n        });\n    })\n};","import { Modal } from 'bootstrap';\n\nimport{ contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { listenToInatRequests } from 'api/inat/inat';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport spinnerTemplate from 'ui/create-guide-modal/species-search-template.html';\nimport speciesSummaryTemplate from 'ui/create-guide-modal/species-summary-template.html';\n\nexport const speciesSearch = createGuide => {\n\n    const { config, modal, option } = createGuide;\n    const { collections } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = spinnerTemplate;\n\n    const parent = modal.querySelector('.js-step-action-content');\n\n    renderTemplate({ }, template.content, parent);\n\n    const feedback = document.querySelector('.js-request-feedback');\n\n    let count = 0;\n\n    const interval = setInterval(() => {\n      count = count === config.guide.iconicTaxa.length ? 0 : count;\n      feedback.innerHTML = `Fetching ${config.guide.iconicTaxa[count].common} from iNaturalist …`;\n      count++;\n    }, 2000);\n\n    const nextStepActionArrow = modal.querySelector('.js-right');\n    const viewGuideIcon = nextStepActionArrow.querySelector('svg');\n          viewGuideIcon.classList.add('snap-inactive');\n\n    const back = modal.querySelector('.js-left .js-arrow-wrapper');\n    const viewTaxaIcon = back.querySelector('svg');\n          viewTaxaIcon.classList.add('snap-inactive');\n\n    const renderLessonSummary = collection => {\n\n      try {\n\n        if(collection && collection.items && collection.items.length === 0) {\n            feedback.innerHTML = 'No species were found. Try widening your parameters.';\n            return;\n        }\n\n        clearTimeout(interval);\n\n        template.innerHTML = speciesSummaryTemplate;\n\n        feedback.innerHTML = '';\n\n        collection.taxa = collection.guide.iconicTaxa.map(taxon => taxon.common).join(', ');\n        \n        renderTemplate({ collection }, template.content, feedback);\n\n        const icon = modal.querySelector('.icon svg');\n              icon.classList.remove('slow-spin');\n\n        setTimeout(() => {\n          nextStepActionArrow.addEventListener('click', e => {\n\n                setTimeout( async () => {\n\n                  snapLog('config.guide.species', config.guide.species)\n\n                  if(config.guide.species) {\n\n                      collection.items = collection.items.filter(item => {\n                          return contains(item.name, config.guide.species.map(sp => sp.name));\n                      });\n  \n                      await lessonStateHandler.changeRequest({\n                          requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                          requestArgs: {\n                              updatedConfig: config, updatedCollection: collection\n                          }\n                      });\n                  }\n\n                  if(parseInt(nextStepActionArrow.dataset.number) === 4) {\n                      createGuide.callOnCreateCustomListeners(collection);\n                      lessonStateHelper.clearGuide();\n                      var createGuideModal = Modal.getInstance(document.getElementById('createGuide'));\n                      createGuideModal.hide();\n                      document.querySelector('.modal-backdrop.show.fade').style.display = 'none';\n                  }\n                });\n            });   \n        });\n\n        title.innerHTML = 'New collection species';\n\n        const editSpecies = modal.querySelector('.js-edit-species');\n              editSpecies.addEventListener('click', e => {\n                const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n                      selectedSpeciesDisplay.classList.add('open');\n                      selectedSpeciesDisplay.classList.remove('hide-important');\n                      selectedSpeciesDisplay.innerHTML = '';\n                      editSpecies.classList.add('hide-important');\n                      \n                speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n\n                const editableCollectionName = modal.querySelector('#js-input-collection-name');\n                      editableCollectionName.classList.remove('hide-important');\n                      editableCollectionName.addEventListener('focusout', e => {      \n                          const name = e.target.value;\n                          config.guide.name = name;\n                          collection.name =  name;\n                          lessonStateHandler.changeRequest( { requestType: enums.lessonState.UPDATE_COLLECTION, requestArgs: { collection, config } });\n                          \n                      });\n              });\n\n        viewGuideIcon.classList.remove('snap-inactive');\n        viewTaxaIcon.classList.remove('snap-inactive');\n\n        } catch(e) {\n          logError(renderLessonSummary, e);\n        }\n    };\n\n    const initLesson = async collectionToLoad => {\n        \n        const counter = { \n            index: 0,\n            isLessonPaused: true\n        }\n        \n        const lesson = await lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.GET_LESSON_STATE,\n            requestArgs: {\n                collectionToLoad,\n                updatedCounter: counter,\n                config: createGuide.getConfig()\n            }\n        });\n\n        snapLog('initLesson', lesson);\n        \n        const collection = lesson.collection;\n              collection.guide = config.guide;\n              collection.isPrivate = true;\n        \n        renderLessonSummary(collection);\n\n        const OrdinalSuffixOf = i => {\n        var j = i % 10,\n            k = i % 100;\n        if (j == 1 && k != 11) {\n            return i + \"st\";\n        }\n        if (j == 2 && k != 12) {\n            return i + \"nd\";\n        }\n        if (j == 3 && k != 13) {\n            return i + \"rd\";\n        }\n        return i + \"th\";\n        }\n\n        let unsubscribe;\n\n        const callback = request => {\n            if(feedback) {\n                feedback.innerHTML = `Making ${OrdinalSuffixOf(request.page)} request of ${request.numberOfRequests}`;\n            } else {\n                unsubscribe(callback);\n            }\n        };\n\n        unsubscribe = listenToInatRequests(callback);\n    };\n    \n    config.guide.guideType = option;\n\n    switch(option) {\n\n        case enums.guideType.LOCATION.name:\n            initLesson({ \n                ...collections.find(c => c.guideType === option),                \n                name: config.guide.place.name,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                guide: config.guide,\n                language: config.language,\n                id: collections.length + 100010, // hack to avoid clashes with existing lessons\n            });\n            break;\n\n        case enums.guideType.INAT.name:\n            initLesson({\n                ...collections.find(c => c.guideType === option),  \n                name: `${config.guide.inatId.key}'s observations`,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                iconicTaxa: config.guide.iconicTaxa,\n                id: collections.length + 10000,\n            });        \n            break;\n\n        case enums.guideType.PICKER.name:\n\n            const initPicker = async () => {\n\n                const { collection } = store.getState();\n\n                let addingExtraSpecies = false;\n                \n                if(collection.items) {\n                    addingExtraSpecies = collection.items.map(i => i.name).every(val => config.guide.species.map(s => s.name).includes(val));\n                }\n    \n                let collectionToLoad;\n    \n                if(addingExtraSpecies) {\n                    collectionToLoad = collection;\n                    await lessonStateHandler.changeRequest({\n                        requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                        requestArgs: {\n                            updatedConfig: config, updatedCollection: collectionToLoad\n                        }\n                    });\n                } else {\n                    collectionToLoad = {\n                        ...collections.find(c => c.guideType === option),\n                        species: config.guide.species,\n                        id: collections.length + 10010,\n                        name: 'Your new lesson',\n                        hasVideo: false,\n                        video: {},\n                        terms: []\n                    };\n                }\n\n                initLesson(collectionToLoad);\n            };\n\n            initPicker();\n\n            break;\n    }\n\n   const title = modal.querySelector('.js-options > h1');\n         title.innerHTML = 'Requesting species images and traits';\n};","import 'ui/css/groups/create-guide.css';\n\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderSpeciesSearchOptions } from 'ui/create-guide-modal/species-search-options';\nimport { renderLocation } from 'ui/create-guide-modal/location';\nimport { renderInatUser } from 'ui/create-guide-modal/inat-user';\nimport { renderCategories } from 'ui/create-guide-modal/categories';\nimport { renderSpeciesPicker } from 'ui/create-guide-modal/species-picker';\nimport { saveGuide } from 'ui/create-guide-modal/common/save-guide';\nimport { speciesSearch } from 'ui/create-guide-modal/species-search';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport actionsTemplate from 'ui/create-guide-modal/common/actions-template.html';\n\nclass CreateGuide {\n\n    constructor(step) {\n        \n        this.listeners = [];\n\n        this.steps = [\n            { number: 0, title: 'Create your own lesson' },\n            { number: 1, title: 'Species Picker', description: 'Provenance', nextStep: '', disabled: true, className:'species-actions',\n                nextSteps: [\n                    { id: enums.guideType.LOCATION.name, step: 'Location' },\n                    { id: enums.guideType.INAT.name, step: 'Location'},\n                    { id: enums.guideType.PICKER.name, step: 'Picker'},\n                ] },\n            { number: 2, title: 'Species Picker', description: 'Location', nextStep: 'Taxa', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n            { number: 2, title: 'Species Picker', description: 'Picker', nextStep: 'Species', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n            { number: 3, title: 'Species Picker', description: 'Taxa', nextStep: 'Species', disabled: true, className:'taxa-actions' },\n            { number: 4, title: 'Species Picker', description: 'Species', nextStep: 'View Guide', disabled: true, className:'filter-actions' }\n        ];\n\n        this.currentStep = this.steps.find(s => s.number == step);\n        \n        this.modal = document.getElementById('createGuide');\n\n        if(!this.modal) return;\n\n        this.modalTitle = this.modal.querySelector('.js-modal-title header');\n        this.navigationContainer = this.modal.querySelector('.js-modal-guide-navigation');\n        this.progressSteps = this.modal.querySelectorAll('.js-modal-guide-progress > div > div');\n        \n        this.previousStepActionArrow = this.modal.querySelector('.js-left');\n        this.previousStepActionTxt = this.modal.querySelector('.js-left .title');\n        \n        this.optionsTxt = this.modal.querySelector('.js-centre .title');\n        \n        this.nextStepActionArrow = this.modal.querySelector('.js-right');\n        this.nextStepActionTxt = this.modal.querySelector('.js-right .title');\n\n        this.progressSteps.forEach((ps,index) => {\n            ps.innerHTML = this.steps[index].description;\n        });\n\n        this.config = this.config || store.getState().config;\n\n        this.getConfig = () => {\n            return this.config;\n        }\n    \n        this.setConfig = (config) => {\n            this.config = config;\n            actions.boundUpdateConfig(config);\n        }\n\n        this.getCurrentStep = () => {\n            return this.currentStep;\n        }\n\n        this.setCurrentStep = step => {\n            this.currentStep = this.steps.find(s => s.number === step);\n        }\n\n        this.user = store.getState().user;\n    }\n\n    addStepActions(nextStep) {\n        \n        if(!nextStep) return;\n        \n        const parent = this.modal.querySelector('.js-step-action-content');\n              parent.innerHTML = '';\n        const template = document.createElement('template');\n              template.innerHTML = actionsTemplate;\n        const description = this.steps.find(step => step.number === this.currentStep.number).description;\n\n        renderTemplate({ className: nextStep.className }, template.content, parent);\n\n        const options = this.modal.querySelector('.js-options > h1');\n\n        switch(description) {\n            case 'Provenance':\n                options.innerHTML = 'How do you want to select your species?';\n                renderSpeciesSearchOptions(this);\n                break;\n            case 'Location':                                \n                options.innerHTML = 'Filter species by location and season.'\n                switch(this.option) {\n                    case enums.guideType.LOCATION.name:\n                        renderLocation(this.modal, this);\n                        break;\n                    case enums.guideType.INAT.name:\n                        renderInatUser(this.modal, this);\n                        break;\n                    case enums.guideType.PICKER.name:\n                        const chosenOnes = this.modal.querySelector('.js-chosen');\n                              chosenOnes.classList.add('hide-important');\n                        document.querySelector('.js-step-action-content .location-actions').classList.add('species-picker-actions');\n                        renderSpeciesPicker({\n                            container: this.modal,\n                            config: this.config,\n                            setConfig: this.setConfig\n                        }, this.modal.querySelector('.js-actions'));\n                        const title = this.modal.querySelector('.js-options > h1');\n                              title.innerHTML = 'Add species by name.';            \n                        break;\n                }\n                break;\n            case 'Taxa':\n                options.innerHTML = 'Filter species by taxa.'\n                renderCategories(this.modal, this);\n                break;\n            case 'Species':\n                setTimeout(() => {\n                    speciesSearch(this);\n                });\n                break;\n        }\n    }\n\n    goToNextStep(nextStep, direction, option = null, next = null) {\n\n        this.currentStep = next || this.steps.find(s => s.number === nextStep);\n\n        if(option === enums.guideType.PICKER.name) {\n            this.currentStep = this.steps[3];\n        }\n\n        this.direction = direction;\n        this.option = option || this.option;\n\n        if(this.startLesson ) {\n            this.currentStep = { number: 0 };\n        };\n\n        if(!this.modalTitle) return;\n        \n        this.modalTitle.innerText = this.currentStep.title;\n        this.nextStepActionTxt.innerHTML = this.currentStep.nextStep;\n\n        this.progressSteps.forEach((ps,index) => {\n\n            ps.classList.remove('active');\n\n            if(index + 1 === this.currentStep.number) {\n                ps.classList.add('active');\n                for(let i = 0; i < index; i++) {\n                    this.progressSteps[i].classList.add('completed');\n                }\n            }\n        });\n        \n        this.addStepActions(this.steps.find(step => step.number === this.currentStep.number));\n\n        if(this.currentStep.number === 1) {\n            this.navigationContainer.classList.remove('progress-container');\n            this.optionsTxt.classList.remove('hide-important');\n            this.previousStepActionTxt.classList.add('hide-important');\n            this.previousStepActionArrow.classList.add('arrow-wrapper-hidden');\n            this.nextStepActionArrow.classList.add('arrow-wrapper-hidden');            \n        } else {\n            this.navigationContainer.classList.add('progress-container');\n            this.optionsTxt.classList.add('hide-important');\n            this.previousStepActionArrow.classList.remove('arrow-wrapper-hidden');\n            this.nextStepActionArrow.classList.remove('arrow-wrapper-hidden');\n            this.nextStepActionArrow.dataset.number = this.currentStep.number;\n            this.previousStepActionTxt.classList.remove('hide-important');\n            const previousStepProperties = this.currentStep.prevStep\n                                                ? this.steps.find(s => s.description === this.currentStep.prevStep)\n                                                : this.steps.find(s => s.number === (this.currentStep.number - 1));\n            \n\n            if(this.getCurrentStep().number === 4) {\n                this.previousStepActionTxt.innerHTML = this.option === enums.guideType.PICKER.name \n                    ? this.steps[3].description\n                    : this.steps[4].description;\n            } else {\n                this.previousStepActionTxt.innerHTML = previousStepProperties.description;\n            }\n        }\n    }\n\n    saveStep(stepDescription, config) {\n        saveGuide(config || this.getConfig(), stepDescription)();\n    }\n};\n\nexport const createGuideHandler = step => {\n\n    const guide = new CreateGuide(step);\n    \n    guide.goToNextStep(step, 'NEXT');\n\n    const handleNextStepAction = e => {\n\n        guide.startLesson = parseInt(guide.nextStepActionArrow.dataset.number) === 4;\n        if(guide.startLesson) { \n            guide.nextStepActionArrow.setAttribute('data-dismiss','modal');\n        } else {\n            guide.nextStepActionArrow.removeAttribute('data-dismiss');\n        }\n        const step = guide.steps.find(step => step.description === guide.getCurrentStep().nextStep);\n        if(step) guide.goToNextStep(step.number, 'NEXT');\n        guide.listeners.push( { element: guide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    guide.nextStepActionArrow.addEventListener('click', handleNextStepAction, true);\n\n    const handlePreviousStepAction = e => {\n\n        let prevStep;\n        \n        if(guide.getCurrentStep() && guide.getCurrentStep().number === 4) {\n            prevStep = guide.option === enums.guideType.PICKER.name ? 2 : 3;\n        } else {\n            prevStep = guide.getCurrentStep().number - 1;\n        }\n        \n        guide.goToNextStep(prevStep, 'PREVIOUS', guide.option);\n        guide.listeners.push( { element: guide.previousStepActionArrow, handler: handlePreviousStepAction });\n    };\n\n    guide.previousStepActionArrow.addEventListener('click', handlePreviousStepAction, true);\n\n    guide.callOnCreateCustomListeners = collection => {\n        onCloseModalListeners.forEach(listener => listener(collection));\n        onCloseModalListeners.pop();\n    };\n};\n\nconst onCloseModalListeners = [];\n\nexport const onCreateCustomLesson = listener => { \n    onCloseModalListeners.pop();\n    onCloseModalListeners.push(listener);\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport speciesTemplate from 'ui/create-guide-modal/species-search-options-template.html';\n\nexport const renderSpeciesSearchOptions = createGuide => {\n\n    const header = createGuide.modal.querySelector('.js-modal-title > header');\n          header.innerHTML = 'Create your own lesson';\n\n    const options = [\n        {\n            text: 'By location and season',\n            id: enums.guideType.LOCATION.name\n        },\n        {\n            text: 'From iNaturalist observations',\n            id: enums.guideType.INAT.name\n        },\n        {\n            text: 'Using a name-based search',\n            id: enums.guideType.PICKER.name\n        }\n    ];\n\n    const template = document.createElement('template');\n          template.innerHTML = speciesTemplate;\n    const parent = createGuide.modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    const config = createGuide.getConfig();\n\n    renderTemplate({ options }, template.content, parent);\n\n    const handleNextStepAction = event => {\n\n        const option = event.currentTarget.dataset.option;\n        const step = createGuide.steps.find(s => s.number === createGuide.getCurrentStep().number);\n        const nextStepName = step.nextSteps.find(step => step.id === option).step;\n        const nextStep = createGuide.steps.find(s => s.description === nextStepName);\n\n        createGuide.startLesson = false;        \n        createGuide.goToNextStep(createGuide.getCurrentStep().number + 1, 'NEXT', option, nextStep);\n        createGuide.listeners = [];\n        createGuide.listeners.push( { element: createGuide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    const lessonOptions = document.querySelectorAll('.custom-lesson-menu-options li');\n    \n    lessonOptions.forEach((option, index) => {\n        option.addEventListener('click', handleNextStepAction, true);\n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        createGuide.setConfig(config);\n    });\n\n    const warning = createGuide.modal.querySelector('.js-persistence-warning');\n            \n    if(createGuide.user) {\n        warning.classList.add('hide-important');\n    }\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\nimport { speciesEditor } from 'ui/create-guide-modal/species-editor';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport speciesPickerTemplate from 'ui/create-guide-modal/species-picker-template.html';\n\nexport const renderSpeciesPicker = (props, parent) => {\n\n      const { config, container, selectedSpecies } = props;\n\n      const template = document.createElement('template');\n            template.innerHTML = speciesPickerTemplate;\n\n      parent.innerHTML = '';\n\n      renderTemplate({}, template.content, parent);\n\n      const selectedSpeciesDisplay = parent.querySelector('.js-selected-species-container');\n            selectedSpeciesDisplay.innerHTML = '';\n\n      config.guide.guideMode = enums.guideMode.STATIC.name;\n\n      if(config) {\n            speciesInGuideEditor(config, container, selectedSpeciesDisplay, props, config.guide.species || []);\n      } else {\n            speciesEditor(parent, selectedSpeciesDisplay, selectedSpecies, [], []);\n      }\n};\n","import{ contains } from 'ramda';\n\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { iconicTaxa } from 'snapdragon-config/snapdragon-iconic-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport categoriesTemplate from 'ui/create-guide-modal/categories-template.html';\n\nexport const renderCategories = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n          config.guide.iconicTaxa = config.guide.iconicTaxa || iconicTaxa.all;\n\n    const filterSelectedClass = 'iconic-taxa-selected';\n\n    const template = document.createElement('template');\n          template.innerHTML = categoriesTemplate;\n    \n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({}, template.content, parent);\n\n    const icons = parent.querySelectorAll('.js-iconic-taxa-categories > div > div:nth-child(1)');\n    \n    if(config.guide.iconicTaxa) {\n        icons.forEach(icon => {\n            const filterId = icon.parentElement.id;\n            if(contains(filterId, config.guide.iconicTaxa.map(taxon => taxon.id))) {\n                icon.classList.add(filterSelectedClass);\n            }\n        });\n    }\n\n    setTimeout(() => {\n        const fungiIcon = modal.querySelector('#fungi > div');\n        if(!fungiIcon) return;\n        if(elem.hasClass(fungiIcon, 'iconic-taxa-selected')) {\n            fungiIcon.querySelector('g g').classList.add('svg-icon-selected');\n        }   \n    },250);\n    \n    config.guide.hasChanged = false;\n\n    icons.forEach(category => {\n        category.addEventListener('click', event => {\n\n            config.guide.hasChanged = true;\n            \n            const filter = event.currentTarget;\n            const filterId = filter.parentElement.id;        \n            const commonName = filter.parentElement.innerText;              \n\n            if(config.guide.iconicTaxa.find(taxon => taxon.id === filterId)) {\n                \n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.remove('svg-icon-selected');                    \n                }\n                if(config.guide.iconicTaxa.length > 1) {\n                    filter.classList.remove(filterSelectedClass);\n                    config.guide.iconicTaxa = config.guide.iconicTaxa.filter(taxon => taxon.id !== filterId);\n                }\n\n            } else {\n\n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.add('svg-icon-selected');\n                }\n                filter.classList.add(filterSelectedClass);\n\n                config.guide.iconicTaxa.push(\n                    {\n                        id: filterId,\n                        common: commonName    \n                    }\n                )\n            }\n\n            createGuide.setConfig(config);\n            createGuide.saveStep('TAXA', config);            \n        });\n    });\n\n    createGuide.saveStep('TAXA');\n\n    document.querySelector('.js-right .js-arrow-wrapper').innerHTML = '<i class=\"far fa-arrow-alt-circle-right\"></i>';\n};","import { returnTaxonIcon } from 'ui/helpers/icon-handler';\n\nexport const saveGuide = (config, step, update = true) => {\n\n    const chosen = document.querySelector('.js-chosen span:nth-child(2)');\n\n    const handleSaveEvent = () => {\n\n        switch(step) {\n\n            case 'SPECIES':\n\n            break;\n\n            case 'LOCATION':\n\n                const splitLocation = locationStr => {\n                    return locationStr;\n                };\n\n                if(config.guide.locationType) {\n                    chosen.innerHTML = config.guide.locationType === 'place'\n                        ? config.guide.locationPlace\n                        : config.isLandscapeMode\n                            ? config.guide.locationLongLat\n                            : splitLocation(config.guide.locationLongLat);\n                }\n                break;\n\n            case 'TAXA':\n\n                chosen.innerHTML = '';\n                let icons = '';\n                if(config.guide.iconicTaxa.length > 0) {\n                    config.guide.iconicTaxa.forEach(taxon => {\n                        const icon = returnTaxonIcon(taxon.id);\n                        icons += icon;\n                    })\n                    chosen.innerHTML = icons;\n                } else {\n                    chosen.innerHTML = 'All species';\n                }\n                break;\n\n            case 'INAT':\n                \n                if(config.guide.inatId.key) {\n                    chosen.innerHTML = config.guide.inatId.key || '';\n                } else {\n                    chosen.innerHTML = '';\n                }\n                break;\n        }\n    }\n\n    return handleSaveEvent;\n}","import{ contains } from 'ramda';\n\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\n\nconst getItems = (taxa, includeTechnicalTerms = false) => {\n    \n    const glossary = store.getState().glossary;\n\n    const items = glossary.filter(definition => contains(definition.taxon, taxa));\n\n    let selectedItems = [];\n\n    includeTechnicalTerms\n        ? selectedItems = items\n        : selectedItems = items.filter(item => item.technical !== 'true');\n\n    return selectedItems.filter(item => contains(item.taxon, taxa));\n};\n\nconst getBranches = items => {\n    \n    let branches = [ ...new Set(items.map(item => item.branch)) ];\n        branches = branches.map(branch => {\n            return {\n                name: branch,\n                count: items.filter(item => item.branch == branch).length\n            }\n          });\n    return branches;\n};\n\nconst getQuickFire = (glossary, type, collection) => {\n\n    const items = collection.terms\n            ? glossary.filter(definition => contains(definition.id, collection.terms))\n            : glossary;\n\n    const taxa = [ ...new Set(items.map(definition => definition.taxon))];\n\n    const filter = {\n          iconicTaxa: taxa,\n          option: {\n                key: \"0\",\n                value: \"multiple choice\" // depends on type???\n          }\n    };\n    \n    const quickFire = {\n        index: 0,\n        isComplete: false,\n        items,\n        count: items.length,\n        filter,\n        type,\n        termScore: {\n            total: 0,\n            correct: 0,\n            incorrect: 0,\n            isCorrect: null,\n            isIncorrect: null,\n            rounds: [],\n            passes: [],\n            fails: []\n        },\n        poolSize: items.length,\n        terms: collection.terms,\n        onClickFiltersLinkListeners: [],\n        onClickGlossaryLinkListeners: [],\n        lessonId : collection.id\n    };\n\n    quickFire.filter.taxa = filter.iconicTaxa.map(taxon => {\n        const iconicTaxon = {\n            name: taxon,\n            count: items.filter(item => item.taxon === taxon).length\n        }\n        return iconicTaxon;\n    });\n\n    quickFire.filter.taxa = quickFire.filter.taxa.filter(taxon => taxon.count > 0);\n\n    actions.boundCreateQuickFire(quickFire);\n\n    return quickFire;\n};\n\nexport const quickFireAPI = {\n    getItems,\n    getBranches,\n    getQuickFire\n};","import{ contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\n\nconst renderResponse = (isCorrect, term) => {\n    return isCorrect\n    ? `<span class=\"centred-block icon\"><i class=\"fas fa-check extra-large-text correct-answer-color margin-right\"></i>That is correct.</span>`\n    : `<span class=\"centred-block icon\"><i class=\"fas fa-times extra-large-text incorrect-answer-color margin-right\"></i>The correct answer is <span class=\"answer-response half-margin-left\">'${term}'.</span></span>`;\n\n};\n\nconst updateBranchCounts = (quickFire, branchOptions) => {\n\n    const items = quickFire.terms ? quickFire.items.filter(item => contains(item.id, quickFire.terms)) : quickFire.items;\n\n    branchOptions.forEach(branchBadge => {\n    branchBadge.innerHTML = items.filter(item => item.branch === branchBadge.dataset.name).length;\n    });\n};\n\nconst updateTaxonCounters = (quickFire, taxonCounters, includeTechnicalTerms) => {\n\n    const items = quickFire.terms ? quickFire.items.filter(item => contains(item.id, quickFire.terms)) : quickFire.items;\n\n    taxonCounters.forEach(taxonBadge => {\n        taxonBadge.innerHTML = includeTechnicalTerms\n            ? items.filter(item => item.taxon === taxonBadge.dataset.taxon).length\n            : items.filter(item => item.taxon === taxonBadge.dataset.taxon && !item.technical).length;\n    });\n\n    return includeTechnicalTerms\n        ? items\n        : items.filter(item => !item.technical);\n};\n\nconst updateTotalCounts = (quickFire, input, counters, branchCounters, taxonCounters, includeTechnicalTerms = false) => {\n\n    updateBranchCounts(quickFire, branchCounters);\n    const terms = updateTaxonCounters(quickFire, taxonCounters, includeTechnicalTerms);\n\n    quickFire.count = terms.length;\n\n    counters.forEach(counter => {\n        counter.innerHTML = quickFire.count;\n    });\n    \n    input.value = quickFire.count;\n    quickFire.poolSize = parseInt(input.value);\n};\n\nconst scoreMultipleChoice = (quickFire, answer, quickFireMessage) => {\n\n    const isCorrect = answer === quickFire.question.term;\n\n    quickFire.question.answer = answer;\n        \n    quickFire.termScore.total++;\n\n    if(isCorrect) {\n        quickFire.termScore.correct++;\n        quickFire.termScore.isCorrect = true;\n        quickFire.termScore.isIncorrect = false;\n        quickFire.termScore.passes.push(quickFire.question);\n    } else {\n        quickFire.termScore.incorrect++;\n        quickFire.termScore.isCorrect = false;\n        quickFire.termScore.isIncorrect = true;\n        quickFire.termScore.fails.push(quickFire.question);\n    }\n\n    quickFireMessage.innerHTML = renderResponse(isCorrect, quickFire.question.term.toLowerCase());\n};\n\nconst scoreTextEntry = (quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn) => {\n\n    if (quickFire.filter.option.key === '1') {\n\n        const brackets = /\\(.+?\\)/;\n\n        const term = quickFire.question.term;\n\n        const acceptableAnswers = term.split(',').map(answer => {\n            \n            let acceptable = answer;\n                acceptable = acceptable.replace(brackets, '');\n                acceptable = acceptable.trim();\n                acceptable = acceptable.toLowerCase();\n\n            return acceptable;\n        });\n        \n        const isCorrect = contains(quickFireInput.value.trim().toLowerCase(), acceptableAnswers);\n        \n        quickFire.termScore.total++;\n        \n        if (isCorrect) {\n            quickFire.termScore.correct++;\n            quickFire.termScore.passes.push(quickFire.question);\n        }\n        else {\n            quickFire.termScore.incorrect++;\n            quickFire.termScore.fails.push(quickFire.question);\n        }\n        \n        quickFireMessage.innerHTML = renderResponse(isCorrect, quickFire.question.term.toLowerCase());\n\n        timer = setTimeout(() => {\n            continueQuickFireBtn.click();\n        }, store.getState().config.callbackTime + 500);\n    }\n\n    return timer;\n};\n\nconst readyTemplate = headerTemplate => {\n\n    const template = document.createElement('template');\n          template.innerHTML = headerTemplate;\n\n    const modal = document.querySelector('#glossaryModal');\n\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';   \n\n    return { template, modal, parent };\n};\n\nconst updateHeaders = (screen, links, getQuickFire, quickFireActions) => {\n\n    const { glossary, filters, questions } = links;\n\n    const hide = 'hide-important';\n\n    const quickFire = getQuickFire();\n\n    const loadGlossary = e => {\n        quickFireActions.quickFireGlossary(quickFire.items);\n        if(quickFire.linkFromLesson) {\n            questions.classList.remove(hide);\n            filters.classList.add(hide);\n        } else {\n            filters.classList.remove(hide);\n        }\n    };\n\n    const loadFilters = e => {\n        quickFireActions.quickFireFilters(quickFire.linkFromLesson);\n    };\n\n    const handleGlossaryLink = () => {\n\n        quickFire.onClickGlossaryLinkListeners = quickFire.onClickGlossaryLinkListeners || [];\n\n        if(quickFire.onClickGlossaryLinkListeners.length < 1) {\n            glossary.addEventListener('click', loadGlossary, { once: true });\n            quickFire.onClickGlossaryLinkListeners.push('filters');\n        }\n    };\n\n    const handleFiltersLink = () => {\n\n        quickFire.onClickFiltersLinkListeners = quickFire.onClickFiltersLinkListeners || [];\n\n        if(quickFire.onClickFiltersLinkListeners.length < 1) {\n            filters.addEventListener('click', loadFilters, { once: true }, true);\n            quickFire.onClickFiltersLinkListeners.push('filters');\n        }\n    };\n    \n    switch(screen) {        \n        case enums.quickFireStep.FILTERS:\n            filters.classList.add(hide);\n            glossary.classList.remove(hide);\n            handleGlossaryLink();\n        break;\n            \n        case enums.quickFireStep.QUESTIONS:\n            filters.classList.remove(hide);\n            filters.innerHTML = 'Vocab filter';\n            handleGlossaryLink();\n            handleFiltersLink();\n        break;\n\n        case enums.quickFireStep.GLOSSARY:\n            filters.classList.remove(hide);\n            filters.innerHTML = 'Vocab filter';\n            questions.classList.add(hide);\n            handleFiltersLink();\n        break;\n    }\n};\n\nexport const quickFireUI = {\n    updateTotalCounts,\n    updateHeaders,\n    scoreMultipleChoice,\n    scoreTextEntry,\n    readyTemplate\n};","import{ contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nconst selectAnswers = (quickFire, quickFireItems) => {\n\n    quickFire.spareItems = quickFire.spareItems || take(5, quickFireItems);\n\n    quickFire.question = quickFireItems.splice(0,1)[0];\n\n    let items = quickFireItems.filter(item => item.branch === quickFire.question.branch);\n\n    const itemCount = items ? items.length : 0;\n    const requiredItems = 3;\n\n    if (itemCount <= requiredItems) {\n        const itemsToAdd = take((requiredItems - itemCount), quickFire.spareItems.filter(sp => !contains(sp.term, items.map(i => i.term)) && sp.term !== quickFire.question.term ));\n              itemsToAdd.forEach(item => items.push(item));\n    }\n\n    let answers = take(3, items);\n        answers.push(quickFire.question);\n        answers = utils.shuffleArray(answers);\n        answers = answers.map((item, index) => {\n            return {\n                term: item.term,\n                index\n            };\n        });\n\n    return answers;\n};\n\nexport const quickFireLogic = {\n    selectAnswers\n};","import{ contains, clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { actions } from 'redux/actions/action-creators';\nimport { subscription } from 'redux/subscriptions';\nimport { iconicTaxa  } from 'api/snapdragon/iconic-taxa';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { quickFireAPI } from 'ui/quick-fire-modal/quick-fire-api';\nimport { quickFireUI } from 'ui/quick-fire-modal/quick-fire-ui';\nimport { quickFireLogic } from 'ui/quick-fire-modal/quick-fire-logic';\n\nimport glossaryTemplate from 'ui/fixtures/glossary-template.html';\nimport templateCreateQuickFire from 'ui/quick-fire-modal/quick-fire-filters-template.html';\nimport templateQuestionQuickFire from 'ui/quick-fire-modal/quick-fire-questions-template.html';\nimport templateSummaryQuickFire from 'ui/quick-fire-modal/quick-fire-summary-template.html';\n\nconst headers = (step, quickFire) => {\n\n    const getQuickFire = () => quickFire;\n\n    const modal = document.querySelector('#glossaryModal');\n\n    const links = { \n        glossary: modal.querySelector('.js-modal-text-title'),\n        filters: modal.querySelector('.js-quick-fire-filters'),\n        questions: modal.querySelector('.js-quick-fire-questions')\n    };\n\n    quickFireUI.updateHeaders(step, links, getQuickFire, quickFireActions);\n};\n\nconst filters = async linkFromLesson => {\n\n    const args = await init();\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateCreateQuickFire);\n\n    headers(enums.quickFireStep.FILTERS, { items: args.items, onClickFiltersLinkListeners: [], onClickGlossaryLinkListeners: [] });\n\n    let { items, type, filter } = args;\n\n    const resetQuickFire = () => {\n        actions.boundUpdateQuickFire(quickFireAPI.getQuickFire(store.getState().glossary, enums.quickFireType.DEFINITION, {}));\n        quickFireFilters(quickFire.linkFromLesson);\n    };\n\n    let state = store.getState().quickFire || quickFireAPI.getQuickFire(items, filter, type);\n    let quickFire = clone(state);\n        quickFire = quickFire.isComplete ? resetQuickFire() : quickFire;\n        quickFire.linkFromLesson = linkFromLesson || false;\n        quickFire.onClickFiltersLinkListeners = [];\n        quickFire.onClickGlossaryLinkListeners = [];\n\n    actions.boundUpdateQuickFire(quickFire);\n\n    const options = [\n        { key: 0, value: 'multiple choice' },\n        { key: 1, value: 'text entry' },\n        // { key: 2, value: 'multiple choice followed by text entry' },\n        // { key: 3, value: 'mixed multiple choice and text entry' },\n    ];\n\n    const branches = quickFireAPI.getBranches(items);\n\n    renderTemplate({ quickFire, options, branches }, template.content, parent);\n\n    const counters = document.querySelectorAll('.js-quick-fire-count');\n    const branchCounters = document.querySelectorAll('.js-quick-fire-branches li input');\n    const taxonCounters = document.querySelectorAll('.js-quick-fire-taxa li > span');\n\n    const input = document.querySelector('.js-input-quick-fire');\n          input.addEventListener('input', e => {\n            quickFire.poolSize = parseInt(e.target.value);          \n          });\n          setTimeout(() => {\n            input.focus();\n          }, 250);\n\n    quickFire.poolSize = parseInt(input.value);\n\n    const updateArray = (arr, elem) => {\n        if(arr.find(e => e === elem)) {\n            return arr.filter(iconicTaxon => iconicTaxon !== elem); \n        } else {\n            arr.push(elem);\n            return arr;\n        }\n    };\n\n    const getFilterTaxa = () => quickFire.filter.iconicTaxa;\n\n    const taxa = document.querySelectorAll('.js-quick-fire-taxa li');\n          taxa.forEach(taxon => {\n\n              const chkBox = taxon.querySelector('input');\n\n              if(!contains(taxon.dataset.name, quickFire.filter.iconicTaxa)) {\n                  chkBox.click();\n              }\n\n              taxon.addEventListener('change', async e => {\n                const selectedTaxon = e.target.id;\n                const updatedTaxa = updateArray(getFilterTaxa(getIncludeTechnicalTerms), selectedTaxon);\n                quickFire.filter.iconicTaxa = updatedTaxa;\n                quickFire.items = quickFireAPI.getItems(updatedTaxa);\n                quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n              });\n          });\n\n    let includeTechnicalTerms = quickFire.lessonId ? true : false;\n\n    const getIncludeTechnicalTerms = () => includeTechnicalTerms;\n      \n    quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n\n    const createQuickFireBtn = document.querySelector('.js-create-quick-fire');\n          createQuickFireBtn.innerHTML = quickFire.termScore.total === 0 ? 'Start vocab review' : 'Continue your vocab review';\n          createQuickFireBtn.addEventListener('click', e => {\n            questions(quickFire);\n          }, { once: true });\n\n    const quickFireOptions = document.querySelectorAll('.js-quick-fire-filter-options button');\n    \n    quickFire.filter.option.key === \"0\"\n      ? quickFireOptions[0].click()\n      : quickFireOptions[1].click();\n    \n    quickFireOptions[parseInt(quickFire.filter.option.key)].classList.add('active');\n\n    quickFireOptions[0].addEventListener('click', e => {\n      e.preventDefault();\n      if(!elem.hasClass(e.target, 'active')) {\n        e.target.classList.add('active');\n        quickFire.filter.option = {\n            key: e.target.dataset.key,\n            value: e.target.dataset.value\n        };\n        quickFireOptions[1].classList.remove('active');\n      }\n    });        \n\n    quickFireOptions[1].addEventListener('click', e => {\n      e.preventDefault();\n      if(!elem.hasClass(e.target, 'active')) {\n        e.target.classList.add('active');\n        quickFire.filter.option = {\n            key: e.target.dataset.key,\n            value: e.target.dataset.value\n        };\n        quickFireOptions[0].classList.remove('active');\n      }\n    });        \n\n    const branchOptions = document.querySelectorAll('.js-quick-fire-branches li');\n\n    if(quickFire.filter.branches) {\n\n        branchOptions.forEach(branch => {\n            if(!contains(branch.dataset.key, quickFire.filter.branches)) {\n                branch.click();\n            }\n        });    \n    }\n\n    branchOptions.forEach(branch => {\n        branch.addEventListener('click', e => {\n        setTimeout(async() => {\n                let checkedBranches = Array.from(branchOptions).filter(b => elem.hasClass(b, 'active'));\n                    checkedBranches = checkedBranches.map(b => b.dataset.key);\n                quickFire.filter.branches = checkedBranches;\n                quickFire.items = await quickFireAPI.getItems(quickFire.filter.iconicTaxa);\n                quickFire.items = quickFire.items.filter(item => contains(item.branch, checkedBranches));\n                quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n            });\n        });\n    });\n\n    const technical = document.querySelector('.js-quick-fire-technical');\n          technical.addEventListener('change', async e => {\n            includeTechnicalTerms = e.target.checked;\n            quickFire.filter.includeTechnicalTerms = includeTechnicalTerms;\n            quickFire.items = quickFire.items || await quickFireAPI.getItems(quickFire.filter.iconicTaxa, includeTechnicalTerms);\n            quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n          });\n\n    if(includeTechnicalTerms) technical.click();\n\n    const reset = document.querySelector('.js-quick-fire-reset');\n          reset.addEventListener('click', e => {\n            resetQuickFire();\n          });\n};\n\nconst questions = state => {\n\n    let quickFire;\n\n    if(!state) return;\n    else quickFire = clone(state);\n\n    quickFire.onClickGlossaryLinkListeners = [];\n\n    headers(enums.quickFireStep.QUESTIONS, quickFire);\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateQuestionQuickFire);\n\n    let timer;    \n\n    if(quickFire.poolSize > quickFire.termScore.total) {\n\n        let answers = quickFireLogic.selectAnswers(quickFire, utils.shuffleArray(quickFire.items));\n\n        renderTemplate({ question: quickFire.question, \n                answers, total: quickFire.termScore.total + 1, \n                count: quickFire.poolSize,\n                correct: quickFire.termScore.correct, \n                answered: quickFire.termScore.total \n        }, template.content, parent);\n\n        const layouts = document.querySelectorAll('.js-quick-layouts');\n              layouts.forEach(layout => {\n                  layout.classList.add('hide-important');\n                  if(layout.id === quickFire.filter.option.key) layout.classList.remove('hide-important');  \n              });\n\n        const quickFireMessage = document.querySelector('.js-quick-fire-message');\n\n        const options = Array.from(document.querySelectorAll('.js-quick-fire-options > li'));\n              options.forEach(option => {\n                option.addEventListener('click', e => {\n                    const button = e.target;\n                    const term = button.querySelector('span').innerHTML;\n                    const answer = term;\n                    quickFireUI.scoreMultipleChoice(quickFire, answer, quickFireMessage);\n                    continueQuickFireBtn.disabled = false;\n                    if(quickFire.termScore.isIncorrect) {\n                        option.classList.add('snap-alert');\n                    }\n                    options.forEach(option => {\n                        if(option.id === quickFire.question.term) {\n                            option.classList.add('snap-success');\n                        }\n                    });\n                    timer = setTimeout(() => {\n                        continueQuickFireBtn.click();\n                    }, store.getState().config.callbackTime);\n                }, { once: true });\n              });\n              setTimeout(() => {\n                options[0].querySelector('button').focus();\n              }, 500);\n\n        const quickFireInputContainer = modal.querySelector('.js-quick-fire-text-entry');\n        const quickFireInput = modal.querySelector('.js-quick-fire-text-entry input');\n        \n        if(quickFire.filter.option.key === '1') {\n            quickFireInputContainer.classList.remove('hide-important');\n            quickFireInput.focus();\n        }\n        \n        const continueQuickFireBtn = document.querySelector('.js-continue-quick-fire-btn');\n              continueQuickFireBtn.addEventListener('click', e => {\n                continueQuickFireBtn.setAttribute(\"disabled\", true);\n                quickFire.items = quickFire.items.filter(item => item.term !== quickFire.question.term);\n                subscription.add(quickFireQuestions, 'quickFire', 'modal');\n                actions.boundUpdateQuickFire(quickFire);\n                clearTimeout(timer);        \n              }, { once: true });\n\n        let check = true;\n\n        quickFireInput.addEventListener('keydown', event => {\n            if (event.keyCode == 9 && check) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }\n        });\n\n        quickFireInput.addEventListener('keypress', event => {\n            if (event.keyCode == 13 && check) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }            \n        });\n\n        quickFireInput.addEventListener('blur', e => {\n            if(check && e.target.value.length > 2) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }\n        });\n\n        if((quickFire.question.term.split(' ').length > 1 || quickFire.question.term.indexOf('(') === 0) && quickFire.filter.option.key === '1') {\n            const hint = modal.querySelector('.js-quick-fire-hint');\n                  hint.classList.remove('hide');\n        }\n\n    } else {\n        summary(quickFire);        \n    }\n    \n    const review = modal.querySelector('.js-quick-review-progress');\n    if(review) {\n          review.addEventListener('click', e => {\n            summary(quickFire);\n          }, { once: true });\n    }\n};\n\nconst getTermsGlossary = (glossary, terms) => {\n\n    if(!terms || terms.length === 0) return glossary;\n\n    const definitions = [];\n\n    terms.forEach(term => {\n        const definition = glossary.find(def => def.id === term);\n        definitions.push(definition);\n    });\n\n    return definitions.filter(term => term);\n}\n\nconst definitions = async terms => {\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(glossaryTemplate);\n\n    const quickFire = store.getState().quickFire || quickFireAPI.getQuickFire(terms, enums.quickFireType.DEFINITION, { collection: {} });\n\n    headers(enums.quickFireStep.GLOSSARY, quickFire);\n\n    parent.innerHTML = '';\n\n    const glossary = getTermsGlossary(terms, quickFire.terms);\n\n    renderTemplate({ glossary }, template.content, parent);\n};\n\nconst init = async () => {\n\n    let taxa = [];\n    let iconicTaxaKeys = Object.keys(iconicTaxa).map(key => key.toLowerCase());\n        iconicTaxaKeys.push('common');\n        iconicTaxaKeys.forEach(taxon => {\n            taxa.push(taxon);\n        });\n\n    const { quickFire } = store.getState();\n\n    const items = quickFire.items || await quickFireAPI.getItems(taxa);\n        \n    const args = {\n        items,\n        type: enums.quickFireType.DEFINITION,\n        filter: {\n            iconicTaxa: taxa\n        }\n    };\n    return args;\n};\n\nconst summary = quickFire => {\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateSummaryQuickFire);\n\n    const passes = quickFire.termScore.passes;\n          passes.forEach((pass, i) => {\n            pass.index = i;\n            pass.wiki = pass.wiki || '';\n            pass.showWikiClass = pass.wiki.length > 0 ? '' : 'hide-important'\n          });\n    const fails = quickFire.termScore.fails;\n          fails.forEach((fail, i) => {\n            fail.index = i;\n            fail.wiki = fail.wiki || '';\n            fail.showWikiClass = fail.wiki.length > 0 ? '' : 'hide-important';\n          });\n\n    renderTemplate({ score: quickFire.termScore, passes, fails }, template.content, parent);\n\n    const answers = modal.querySelectorAll('.js-quick-review-answers');\n    const tabs = modal.querySelectorAll('.js-quick-review-tabs a');\n    \n    tabs.forEach(tab => {\n        tab.addEventListener('click', e => {\n            const type = e.target.id;\n            answers.forEach(t => {\n                t.dataset.type === type\n                    ? t.classList.remove('hide-important')\n                    : t.classList.add('hide-important');\n            });\n        });\n    });\n\n    const summaryText = modal.querySelector('.js-quick-fire-summary div:nth-child(1) > span');\n    const scoreSummary = modal.querySelector('.js-score-text-summary');\n    const continueReview = modal.querySelector('.js-quick-review-continue-review');\n\n    quickFire.isComplete = quickFire.poolSize === quickFire.termScore.total;\n\n    if(quickFire.isComplete) {\n        summaryText.innerHTML = '<span class=\"emphasis\">You have answered all of the questions correctly.</span>';\n        scoreSummary.classList.add('modal-background-relief-emphasis');\n        scoreSummary.innerHTML = `You scored ${quickFire.termScore.correct} out of ${quickFire.termScore.total}.`;        \n        if(quickFire.termScore.incorrect > 0) {\n            summaryText.innerHTML = `<span class=\"emphasis\">You've answered the questions, but not all correctly.</span>`;\n            continueReview.innerHTML = `<span>Continue</span>`;            \n            continueReview.addEventListener('click', e => {\n                const quickFireRevision = quickFireAPI.getQuickFire(quickFire.termScore.fails, enums.quickFireType.DEFINITION, {});\n                quickFireQuestions(quickFireRevision);\n            }, { once: true });            \n        } else {\n            continueReview.classList.add('hide-important');\n            continueReview.addEventListener('click', e => {\n                questions(quickFire);\n            }, { once: true });\n        }\n    } else {\n        summaryText.innerHTML = `<span>You have answered ${quickFire.termScore.total} of ${quickFire.poolSize} questions.</span>`;\n        continueReview.addEventListener('click', e => {\n            questions(quickFire);\n        }, { once: true });\n    }\n};\n\nexport const quickFireHandlers = {\n    filters,\n    questions,\n    headers,\n    init: quickFireAPI.getQuickFire,\n    definitions\n};\n\nconst quickFireFilters = linkFromLesson => {\n    quickFireHandlers.filters(linkFromLesson);\n};\n\nconst quickFireQuestions = quickFire => {\n    quickFireHandlers.questions(quickFire);\n};\n\nconst quickFireGlossary = glossary => {\n    quickFireHandlers.definitions(glossary);\n};\n\nconst quickFireActions = {\n    quickFireFilters,\n    quickFireQuestions,\n    quickFireGlossary\n};","import { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderLesson = (lesson) => {\n\n      const { config, lessons, layout } = store.getState();\n\n      const template = document.createElement('template');\n            template.innerHTML = lessonTemplate;\n\n      lesson.hideVideoClass = lesson.hasVideo ? '' : 'hide-important';\n      lesson.hideTextIntroClass = lesson.hasVideo ? 'hide-important' : '';\n\n      const savedLesson = lessons.find(saved => saved.collection.id === lesson.id);\n\n      lesson.isPaused = !!savedLesson || config.collection.id === lesson.id;\n      lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n      renderTemplate({ lesson }, template.content, document.querySelector('.js-lesson-container'));\n\n      if(savedLesson) {\n            renderReview(savedLesson.layout, savedLesson.collection, null, config);\n      } \n      \n      if(config.collection.id === lesson.id) {\n\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.id}\"]`)\n                  if(row) row.classList.add('highlighted-for-review-row');\n\n            if(config.isLandscapeMode) {\n                  setTimeout(() => {\n                        const reviewLink = row.querySelector('.js-review-summary');                  \n                        if(reviewLink) reviewLink.click();\n                  });\n            }\n\n            // current lesson whose current state is not yet saved\n            if(layout && layout.roundScoreCount) {\n                  renderReview(layout, lesson, 'progress-icon', config);\n            }\n      }\n}; \n\nconst renderReview = (layout, lesson, className, config) => {\n      const progressBar = document.querySelector('.js-right-grid progress');\n      const value = !!layout.roundProgressIndex ? layout.roundProgressIndex : progressBar ? progressBar.value : 0;\n      const review = `<progress aria-label=\"lesson quiz progress\" title=\"lesson quiz progress\" class=\"absolute\" value=\"${ value }\" max=\"${layout.roundScoreCount}\"></progress>`;\n      const parent = document.querySelector(`.js-review[data-lesson-id=\"${lesson.id}\"]`);\n            parent.innerHTML = review;\n\n      const reviewLinkBtn = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n            reviewLinkBtn.innerText = 'Resume Quiz';\n};\n","import { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport textIntroTemplate from 'ui/screens/home/home-lesson-intro-text-template.html';\n\nexport const textSetup = (collection, config) => {\n\n    let speciesCount = getSpeciesCount(collection);\n\n    const iconicTaxa = collection.guide\n                            ? collection.guide.iconicTaxa\n                            : collection.iconicTaxa || [ ...new Set(collection.items.map(i => i.iconicTaxon)) ];\n\n    const language = config.languages.find(l => l.lang === config.language).name; // place in guide, and copy to collection\n\n    const template = document.createElement('template');\n          template.innerHTML = textIntroTemplate;\n\n    const months = collection.guide ? collection.guide.season.observableMonths.map(month => month.name) : [];\n    const observableMonths = months.length > 0 ? `${months[0]}-${months[months.length - 1]}` : '';\n    const season = months.length === 0\n                    ? 'Species observations are drawn from the whole year.'\n                    : collection.guide.season === 'all_year'\n                        ? 'Species observations are drawn from the whole year.'\n                        : `Species observations are from ${observableMonths}.`;\n\n    let speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n\n    let lessonIntro = collection.intro || '';\n\n    const summary = {\n        speciesCount,\n        iconicTaxa,\n        title: collection.name,\n        language,\n        observableMonths,\n        season,\n        speciesSummary,\n        lessonIntro\n    };\n\n    DOM.rightBody.innerHTML = '';\n\n    renderTemplate(summary, template.content, DOM.rightBody);\n\n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 500);\n    \n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 1500);\n};\n\nconst handleSpeciesUpdate = (speciesCount, collection, speciesSummary, iconicTaxa) => {\n    if (speciesCount === '--') {\n        speciesCount = getSpeciesCount(collection);\n        document.querySelector('.js-species-summary').innerHTML = speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n    }\n    return { speciesCount, speciesSummary };\n};\n\nconst getSpeciesSummary = (iconicTaxa, speciesCount) => {\n    return iconicTaxa.length === 1\n        ? `${speciesCount} species in ${iconicTaxa.length} taxon.`\n        : `${speciesCount} species in ${iconicTaxa.length} taxa.`;\n};\n\nconst getSpeciesCount = collection => {\n    let count = (collection.itemNames && collection.itemNames.length > 0)\n        ? collection.itemNames.length\n        : collection.items ? collection.items.length : 0;\n    return count === 0 ? '--' : count;\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { textSetup } from 'ui/screens/home/home-lesson-intro-text';\n\nexport const renderLessonIntro = collection => {\n\n    const { config, videoPlayer, collection: lesson } = store.getState();\n\n    collection = { ...collection, items: lesson.items };\n\n    collection.hasVideo ? videoSetup(collection, videoPlayer || [], DOM.rightBody) : textSetup(collection, config);\n    \n}","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport lessonEditTemplate from 'ui/screens/lists/lesson-edit-template.html';\n\nexport const renderEditLesson = collection => {\n\nconst init = async () => {\n\n    const { config } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonEditTemplate;\n\n    const modal = document.querySelector('#basicModal');\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';\n\n    renderTemplate({ collection }, template.content, parent);\n    \n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = 'Edit lesson';\n\n    const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n          selectedSpeciesDisplay.innerHTML = '';\n    \n    const createGuide = {\n        setConfig: config => {\n        actions.boundUpdateConfig(config);\n        }\n    };\n\n    speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n};\n\ninit();\n\n};","const siblingsBefore = lessonId => {\n        \n    let siblings = document.querySelectorAll('.js-lesson-list-item:not(.hide-important)');\n    let sibling = siblings[0];\n    let index = 0;\n\n    const before = [];\n    \n    while(sibling) {\n      index++;\n      if(parseInt(sibling.dataset.lessonId) !== lessonId) {\n        before.push(sibling);\n        sibling = siblings[index];\n      } else {\n        sibling = null;\n      }\n    }\n\n    return before.length;\n  };\n\nconst scrollToTitle = lessonId => {\n  setTimeout(() => {\n    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhRow').replace('px', ''));\n    const rows = siblingsBefore(lessonId);\n    const top = standardBlock * (rows);\n\n    const scroll = document.querySelector('.lesson-list .scrollable');\n    if(scroll) scroll.scrollTop = top;\n  });\n};\n\nexport const lessonListScrollHandler = {\n  scrollToTitle\n}","import{ clone, contains, take, isEmpty } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessonIntro } from 'ui/screens/home/home-lesson-intro';\nimport { renderEditLesson } from 'ui/screens/lists/lesson-edit';\nimport { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nconst onLoadLessonViewState = (collection, videoPlayer, score, config) => {\n\n  const taxa = collection.iconicTaxa ? collection.iconicTaxa.map(taxon => taxon.common).join(', ') : '';\n\n  collection.taxa = taxa;\n  collection.hasVideo = collection.video && !isEmpty(collection.video) ? true : false;\n  collection.showVideoIconClass = collection.hasVideo ? '' : 'hide-important';\n  collection.videoState = videoHandler.setVideoState(videoPlayer || [], collection);\n  collection.reviewState = 'Lesson Quiz';\n\n  collection.hasTermsClass = collection.terms && Array.isArray(collection.terms) && collection.terms.length > 0 ? '' : 'hide-important';\n  collection.isCollectionEditableClass = '';\n\n  return collection;  \n};\n\nconst onLoadLessonsViewState = (collections, videoPlayer, score, config) => {\n  return collections.map(collection => {\n    return onLoadLessonViewState(collection, videoPlayer, score, config);\n  });\n};\n\nconst onClickViewState = (e, lessons) => {\n\n  const icon = e.currentTarget;\n  const isYoutubeIcon = elem.hasClass(icon, 'js-lesson-list-youtube');\n  const isChevronIcon = elem.hasClass(icon, 'js-lesson-list-chevron');\n  const row = icon.parentElement.parentElement;\n  const lessonId = parseInt(icon.dataset.lessonId);\n  const lesson = lessons.find(l => l.id === lessonId);\n  const container = document.querySelector(`.js-species-container[data-container-id=\"${lessonId}\"]`);\n  const speciesList = document.querySelector(`#species_list_id_${lessonId}`);\n  const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lessonId}\"]`);\n\n  let action = isYoutubeIcon ? enums.userEvent.START_LESSON : isChevronIcon ? enums.userEvent.TOGGLE_SPECIES_LIST : enums.userEvent.DEFAULT;\n  lessonStateHandler.recordUserAction(action);\n\n  hideOtherContentAndRevertChevrons(lessonId);\n\n  const isSpeciesListAvailable = !!speciesList;\n  const isSpeciesListHidden = elem.hasClass(speciesList, 'hide');\n\n  const lessonVideoState = document.querySelector(`.js-lesson-video-state[data-lesson-id=\"${lessonId}\"]`);\n  const iconIsChevron = !icon.dataset.lessonIsYoutubeIcon;\n\n  const state = {\n    requiresSpeciesList: !isSpeciesListAvailable,\n    revealSpeciesList: isSpeciesListAvailable && isSpeciesListHidden,\n    hideSpeciesList: isSpeciesListAvailable && !isSpeciesListHidden && iconIsChevron\n  };\n\n  return { icon, lesson, state, speciesList, container, lessonVideoState, reviewLink, row, isYoutubeIcon };\n};\n\nconst onLessonIconClickHandler = (icon, lessons, config, startLesson) => {\n  \n  return icon.addEventListener('click', async e => {      \n\n    const { icon, lesson, state, speciesList, container, lessonVideoState, row, isYoutubeIcon } = onClickViewState(e, lessons);\n\n    const isItemActive = item => {\n      if(item.hasOwnProperty('isActive')) {\n        return item.isActive;\n      } else {\n        return true;\n      }\n    };\n\n    lesson.items = lesson.items.filter(item => isItemActive(item));\n\n    if(config.isLandscapeMode) {\n\n      const lessonYoutubeIcons = document.querySelectorAll('.lesson-list-selected-lesson .youtube-icon');\n            lessonYoutubeIcons.forEach(icon => icon.parentElement.classList.remove('youtube-green-fg'));\n\n      if(icon.dataset.lessonIsYoutubeIcon) {\n        icon.classList.add('youtube-green-fg');\n        const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${icon.dataset.lessonId}\"]`);\n              chevron.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n      }\n\n      let siblingChevron;\n\n      if(state.requiresSpeciesList) {\n        await loadAndDisplaySpeciesList(icon, lesson, container);\n      }\n\n      if(startLesson) {\n        renderLessonIntro(lesson);\n        siblingChevron = icon.parentElement.parentElement.parentElement.children[1].children[0].children[1];\n        if(isYoutubeIcon) {\n          if(state.hideSpeciesList) {\n            siblingChevron.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n          }\n        }\n      } else {\n        if(!isYoutubeIcon) {\n          if(state.hideSpeciesList) {\n            icon.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n          } else if(!state.revealSpeciesList) {\n            icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n          }\n        }\n      }\n\n      if(state.revealSpeciesList) {        \n        speciesList.classList.remove('hide');\n        if(!isYoutubeIcon) {\n          icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n        }\n      }\n      if(state.hideSpeciesList) {\n        speciesList.classList.add('hide');\n        lessonVideoState.innerHTML = videoHandler.setVideoState(store.getState().videoPlayer || [], lesson);\n      }\n    }\n\n    if(config.isPortraitMode) {\n\n      if(state.requiresSpeciesList) {\n        await loadAndDisplaySpeciesList(icon, lesson, container);\n      }\n\n      renderLessonIntro(lesson);\n      \n      lessonStateHandler.changeRequest({\n        requestType: enums.lessonState.RENDER_SPECIES_LIST,\n        requestArgs: { lesson, container: DOM.rightBody.querySelector('.js-home-scrolling-container .scrollable') }\n      });\n    }\n\n    row.classList.add('lesson-list-selected-lesson');\n  });\n};\n\nconst onLessonTitleClickHandler = (title, lessons) => {\n    title.addEventListener('click', e => {\n          const lesson = lessons.find(lesson => lesson.id === parseInt(title.dataset.lessonId));\n          renderEditLesson(lesson);\n    });\n};\n\nconst onReviewClickHandler = reviewLink => {    \n\n  reviewLink.addEventListener('click', async e => {\n\n    lessonStateHandler.recordUserAction(enums.userEvent.START_LESSON_REVIEW);\n\n    const lessonId = reviewLink.dataset.lessonId;\n    // const loadingMessage = document.querySelector(`.js-loading-review-message[data-lesson-id=\"${lessonId}\"]`);\n    //       loadingMessage.classList.remove('hide');\n\n    //       setTimeout(() => {\n    //         loadingMessage.classList.add('hide');\n    //       }, 2000);\n\n    const { lesson } = store.getState();\n\n    lessonStateHandler.changeRequest({\n      requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n      requestArgs: {\n        id: reviewLink.dataset.lessonId\n      }\n    });\n  });\n};\n\nconst hideOtherContentAndRevertChevrons = selectedLessonId => {\n\n  const upChevrons = Array.from(document.querySelectorAll('.js-lesson-list-chevron .fa-chevron-up'));\n\n  upChevrons.forEach(chevron => {\n    \n    const chevronLessonId = parseInt(chevron.dataset.lessonId);\n\n    if(chevronLessonId !== selectedLessonId) {\n      \n      chevron.parentElement.click();\n        \n      const lesson = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${chevronLessonId}\"]`);\n            lesson.classList.remove('highlighted-for-review-row');\n    }\n  });\n};\n\nconst loadAndDisplaySpeciesList = async(icon, lesson, container) => {\n\n  Array.from(icon.parentElement.children).forEach(child => child.dataset.selected = true);\n\n  if(userAction && userAction.name === enums.userEvent.START_LESSON.name) { return; }\n\n  const { userAction, config } = store.getState();\n\n  await lessonStateHandler.changeRequest({\n    requestType: enums.lessonState.RENDER_SPECIES_LIST,\n    requestArgs: { lesson, container }\n  });\n\n  lessonListScrollHandler.scrollToTitle(lesson.id);\n};\n\nexport const lessonListEventHandler = {\n  onLoadLessonViewState,\n  onLoadLessonsViewState,\n  onLessonIconClickHandler,\n  onReviewClickHandler,\n  onLessonTitleClickHandler,\n  hideOtherContentAndRevertChevrons\n};","import { onCreateCustomLesson } from 'ui/create-guide-modal/create-guide';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonListEventHandler } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderCustomLesson = (lessons, savedLessons, videoPlayer, score, config) => {\n\n    onCreateCustomLesson(collection => {\n\n        const parent = document.querySelector('.lesson-list > .scrollable');\n        const template = document.createElement('template');\n              template.innerHTML = lessonTemplate;\n        \n        const lesson = lessonListEventHandler.onLoadLessonViewState(collection, savedLessons, videoPlayer, score, config);\n              lesson.hideVideoClass = 'hide-important';\n              lesson.hideTextIntroClass = '';\n        \n        lessons.push(lesson);\n        \n        lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n        renderTemplate({ lesson }, template.content, parent);\n        \n        // const title = document.querySelector(`.js-lesson-title[data-lesson-id=\"${lesson.id}\"]`);\n        // lessonListEventHandler.onLessonTitleClickHandler(title, lessons);\n\n        const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n        lessonListEventHandler.onReviewClickHandler(reviewLink, lessons);\n\n        const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${lesson.id}\"]`);\n\n        if(chevron) {\n          chevron.classList.remove('landscape');\n          lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false);\n        }\n\n        const youtubeLessonIcon = document.querySelector(`.js-lesson-list-youtube[data-lesson-id=\"${lesson.id}\"]`);\n        if(youtubeLessonIcon) {\n          youtubeLessonIcon.classList.add('hide-important');\n        }\n\n        const scrollOptions = {\n          left: 0,\n          top: 1000,\n          behavior: 'smooth'\n        }\n            \n        document.querySelector('.js-lesson-container').scrollTo(scrollOptions);\n    });\n};","import { contains } from 'ramda';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { createGuideHandler } from 'ui/create-guide-modal/create-guide';\nimport { quickFireHandlers } from 'ui/quick-fire-modal/quick-fire';\nimport { renderLessonListHeader } from 'ui/screens/lists/lesson-list-header';\nimport { renderLesson } from 'ui/screens/lists/lesson';\nimport { renderCustomLesson } from 'ui/screens/lists/lesson-custom';\nimport { lessonListEventHandler } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonListTemplate from 'ui/screens/lists/lesson-list-template.html';\n\nexport const renderLessons = () => {\n\n    let { config, collections, lessons: savedLessons, videoPlayer, score } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonListTemplate;\n\n    let lessons = lessonListEventHandler.onLoadLessonsViewState(collections.filter(collection => (collection.isActive === undefined || collection.isActive)), videoPlayer, score, config);\n\n    lessons = lessons.sort(function(a,b){\n          const tsa = a.create ? a.create.seconds : 0;\n          const tsb = b.create ? b.create.seconds : 0;\n        return tsb - tsa;\n    });\n\n    let parent = config.isPortraitMode ? DOM.rightBody : DOM.leftBody;\n        parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n      lessons.forEach(lesson => renderLesson(lesson));\n\n      renderLessonListHeader(parent);\n\n      const createCustomLessonBtn = parent.querySelector('.js-create-custom-lesson');          \n            createCustomLessonBtn.addEventListener('click', e => {\n                  createGuideHandler(1);\n                  lessonListEventHandler.hideOtherContentAndRevertChevrons(0);\n            });    \n\n      // const lessonTitles = document.querySelectorAll('.js-lesson-title');\n      //       lessonTitles.forEach(title => lessonListEventHandler.onLessonTitleClickHandler(title, lessons));\n\n      const youtubeLessonIcons = document.querySelectorAll('.js-lesson-list-youtube');\n            youtubeLessonIcons.forEach(youtube => lessonListEventHandler.onLessonIconClickHandler(youtube, lessons, config, true));\n      highlightActiveLesson(youtubeLessonIcons);\n\n      const chevrons = document.querySelectorAll('.js-lesson-list-chevron');\n            chevrons.forEach(chevron => lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false));\n      highlightActiveLesson(chevrons);\n\n      const reviews = document.querySelectorAll('.js-review-link');\n            reviews.forEach(reviewLink => lessonListEventHandler.onReviewClickHandler(reviewLink));\n      highlightActiveLesson(reviews);\n\n      setTimeout(() => {      \n\n            let terms = document.querySelectorAll('.js-terms-review-link');\n                terms.forEach(term => {\n                  term.addEventListener('click', e => {                         \n                        const lesson = lessons.find(lesson => lesson.id === parseInt(term.dataset.lessonId));\n                        if(lesson.terms) {\n                              const { glossary } = store.getState();\n                              setTimeout(() => {\n                                    const { quickFire } = store.getState();\n                                    if(quickFire && quickFire.lessonId === lesson.id) {\n                                          quickFireHandlers.questions(quickFire);\n                                    } else {\n                                          quickFireHandlers.questions({ ...quickFireHandlers.init(glossary, enums.quickFireType.DEFINITION, lesson), linkFromLesson: true });\n                                    }\n                              },150);\n                        }\n                });\n            });\n            highlightActiveLesson(terms);\n\n      },100);\n\n      renderCustomLesson(lessons, savedLessons, videoPlayer, score, config);      \n};\n\nconst highlightActiveLesson = lessons => {\n      lessons.forEach(lesson => lesson.addEventListener('click', e => {\n            \n            const rows = document.querySelectorAll('.js-lesson-list-carousel-item');\n                  rows.forEach(row => row.classList.remove('highlighted-for-review-row'));\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.dataset.lessonId}\"]`);\n            if (row)\n                  row.classList.add('highlighted-for-review-row');\n\n            // lessonListScrollHandler.scrollToTitle(lesson.dataset.lessonId);\n      }));\n};\n\n","// https://github.com/GoogleChromeLabs/samesite-examples/blob/master/javascript.md\n\nconst FIRST_TIME = 'first_time';\nconst LAST_VISITED = 'last_visited';\nconst TOO_MANY_DAYS = 5;\nconst SECURE = 'SameSite=Lax;';\n\nlet cookie;\n\nconst setFirstTimeVisitorCookie = () =>  {\n    let isFirstVisit = true;\n    if (document.cookie.indexOf(FIRST_TIME) < 0) {\n      cookie = `${FIRST_TIME}=false; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        isFirstVisit = false;\n    }\n    return isFirstVisit;\n};\n\nconst setLastVisitedCookie = date => {    \n    if (document.cookie.indexOf(LAST_VISITED) < 0) {\n      cookie = `${LAST_VISITED}=${date}; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        setLastVisited(date);\n    }    \n};\n\nconst hasUserBeenAwayTooLong = () => {\n    const lastVisited = readCookie(LAST_VISITED);\n\n    if(!lastVisited) return false;\n\n    const timeDiff = Math.abs(new Date() - new Date(lastVisited));\n    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)); \n    const beenGoneTooLong = daysDiff > TOO_MANY_DAYS;\n    if(beenGoneTooLong) {\n        setLastVisited(Date());\n    }\n    return beenGoneTooLong;\n};\n\nconst isFirstTimeVisitor = () => {\n    return readCookie(FIRST_TIME) === null;\n};\n\nconst removeFirstTimeVisitorCookie = () => {\n  cookie = `${FIRST_TIME}= ; expires = Thu, 01 Jan 1970 00:00:00 GMT; ${SECURE}`;\n  document.cookie = cookie; \n};\n\nexport const cookieHandler = {\n    setFirstTimeVisitorCookie,\n    isFirstTimeVisitor,\n    removeFirstTimeVisitorCookie,\n    setLastVisitedCookie,\n    hasUserBeenAwayTooLong\n};\n\nconst readCookie = name => {\n\tvar nameEQ = name + \"=\";\n\tvar ca = document.cookie.split(';');\n\tfor(var i=0;i < ca.length;i++) {\n\t\tvar c = ca[i];\n\t\twhile (c.charAt(0)==' ') c = c.substring(1,c.length);\n\t\tif (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n\t}\n\treturn null;\n}\n\nconst setLastVisited = date => {\n    const cookieValue = document.cookie.replace(/(?:(?:^|.*;\\s*)last_time\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n    const cookieToAdd = cookieValue + `${LAST_VISITED}=${date};`;\n    cookie = `${cookieToAdd}; ${SECURE}`;\n    document.cookie = cookie;\n};\n","import lessonListHeaderTemplate from 'ui/screens/lists/lesson-list-header-template.html';\n\nexport const renderLessonListHeader = parent => {\n\n    const header = document.createElement(\"div\");\n          header.innerHTML = lessonListHeaderTemplate;\n\n    const sibling = document.querySelector('.lesson-list .scrollable');\n\n    parent = document.querySelector('.lesson-list');\n    parent.insertBefore(header, sibling);\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport settingsTemplate from 'ui/fixtures/settings-template.html';\n\nexport const settingsHandler = () => {\n    \n  document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n    \n    template.innerHTML = settingsTemplate;\n    \n    const title = document.querySelector('#basicModal .js-modal-text-title');\n\n    title.innerHTML = '<header>Snapdragon settings</header>';\n\n    const { config } = store.getState();\n\n    const delay = config.callbackTime/1000;\n\n    const languages = config.languages;\n\n    renderTemplate({ delay, languages }, template.content, document.querySelector('#basicModal .js-modal-text'));\n    \n    const clearCacheBtn = document.querySelector('.js-clear-cache-btn');\n    const setDelayBtn = document.querySelector('.js-set-delay-btn');\n    const setDelayInput = document.querySelector('.js-set-delay-input');\n    const delayTxt = document.querySelector('.js-delay-text');\n\n    document.querySelector('#basicModal .modal-body').classList.remove('bird-song-bg');\n\n    delayTxt.innerHTML = delay === 1\n    ? `The current delay is ${delay} second.`\n    : `The current delay is ${delay} seconds.`;\n\n    clearCacheBtn.addEventListener('click', () => { \n        clearCacheBtn.innerText = 'Clearing cache…';\n        setTimeout(() => {\n            persistor.purge();\n            clearCacheBtn.innerText = 'Cache cleared';\n            cookieHandler.removeFirstTimeVisitorCookie();\n            setTimeout(() => {                                \n                setTimeout(() => {                    \n                    window.location.reload(true);\n                }, 500);\n            }, 500);\n        }, 1000);\n    });\n\n    setDelayBtn.addEventListener('click', () => {\n        setDelayBtn.innerHTML = 'Setting delay…';\n        setTimeout(() => {\n            const delay = setDelayInput.value;\n            config.callbackTime = delay * 1000;\n            actions.boundUpdateConfig(config);\n            setDelayBtn.innerHTML = 'Set delay';\n            delayTxt.innerHTML = delay === '1'\n                ? `Delay updated to ${delay} second.`\n                : `Delay updated to ${delay} seconds.`;\n        }, 500);        \n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        actions.boundUpdateConfig(config);\n    });\n};","import { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport loginTemplate from 'ui/fixtures/login-template.html';\nimport logoutTemplate from 'ui/fixtures/logout-template.html';\n\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\n\nexport const renderLogin = user => {\n\n  const init = () => {\n\n    document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n        \n    if(user) {\n\n        template.innerHTML = logoutTemplate\n\n        renderTemplate({ email: user.email }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon logout';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        const auth = firebase.auth();\n\n        setTimeout(() => {\n            \n            const form = document.querySelector('#logout-form');\n                  form.addEventListener('submit', e => {\n\n                e.preventDefault();\n\n                const logOut = document.querySelector('#js-logout-btn');\n                      logOut.setAttribute('disabled', 'disabled');\n\n                  auth.signOut()\n                  .then(() => {\n                    actions.boundUpdateUser(null);\n                    logOut.innerHTML = 'Success';\n                    setTimeout(() => {\n                        footer.click();\n                    }, 2500);\n                  });\n          });\n\n        }, 500);\n\n\n    } else {\n\n        template.innerHTML = loginTemplate;\n\n        renderTemplate({ }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon login';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        const auth = firebase.auth();\n\n        setTimeout(() => {\n\n            const email = document.querySelector('#login-email');\n                  email.focus();\n            \n            const password = document.querySelector('#login-password');   \n\n            const form = document.querySelector('#login-form');\n                  form.addEventListener('submit', e => {\n\n                    e.preventDefault();\n\n                    const logIn = document.querySelector('#js-login-btn');\n                          logIn.setAttribute('disabled', 'disabled');              \n                    \n                    auth.signInWithEmailAndPassword(email.value, password.value)\n                    .then((credentials) => {\n                        actions.boundUpdateUser({\n                            email: email.value,\n                            password: password.value\n                        });\n                        logIn.innerHTML = 'Success';\n                        setTimeout(() => {\n                            footer.click();\n                        }, 2500);\n                    })\n                    .catch( error => {\n                        const notLoggedIn = document.querySelector('.js-not-logged-in');\n                              if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n                              if(notLoggedIn) notLoggedIn.querySelector('.js-message').innerHTML = error.message;\n                    });\n                });\n\n        }, 500);\n\n    }\n  };\n\n  init();\n};\n\nexport const renderLoggedIn = user => {\n\n    if(user) {\n        const loggedIn = document.querySelector('.js-logged-in');\n        if(loggedIn) loggedIn.classList.remove('hide-important');\n    } else {\n        const notLoggedIn = document.querySelector('.js-not-logged-in');\n        if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n        const loggedOut = document.querySelector('.js-logged-out');\n        if(loggedOut) loggedOut.classList.remove('hide-important');\n    }\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport languageTemplate from 'ui/fixtures/language-template.html';\n\nexport const renderLanguagePicker = () => {\n\n    const { config } = store.getState();\n\n    const parent = document.querySelector('#basicModal .js-modal-text');\n          parent.innerHTML = '';\n\n    const template = document.createElement('template');    \n          template.innerHTML = languageTemplate;\n\n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Vernacular language';\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        actions.boundUpdateConfig(config);\n    });\n};","import{ contains } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { subscription } from 'redux/subscriptions';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { settingsHandler } from 'ui/fixtures/settings';\nimport { renderLogin } from 'ui/fixtures/login';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { quickFireHandlers } from 'ui/quick-fire-modal/quick-fire';\nimport { renderLanguagePicker } from 'ui/fixtures/language';\n\nimport navigationPortraitTemplate from 'ui/fixtures/navigation-portrait-template.html';\nimport navigationLeftTemplate from 'ui/fixtures/navigation-left-template.html';\nimport navigationRightTemplate from 'ui/fixtures/navigation-right-template.html';\n\nconst onLoseFocusListeners = [];\n\nexport const onAddLoseFocusListener = listener => {\n    onLoseFocusListeners.pop();\n    onLoseFocusListeners.push(listener);\n}\n\nexport const renderNavigation = collection => {\n\n    const { config, counter } = store.getState();\n\n    const template = document.createElement('template');\n\n    let parent;\n    \n    if(config.isPortraitMode) {\n        template.innerHTML = navigationPortraitTemplate;\n        parent = document.querySelector('.js-main-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    } else {\n        template.innerHTML = navigationLeftTemplate;\n        parent = document.querySelector('.js-left-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n        template.innerHTML = navigationRightTemplate;\n        parent = document.querySelector('.js-right-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    }\n\n    const navIcons =  document.querySelectorAll('.js-nav-icons .icon');\n\n    navIcons.forEach(icon => {\n\n        icon.addEventListener('click', async event => {\n            \n                const clickedIcon = event.currentTarget;\n                \n                const { collection, config } = store.getState();\n\n                const toggleIconOnOff = clickedIcon => {\n                    clickedIcon.classList.add('active-icon');\n                    setTimeout(() => {\n                        clickedIcon.classList.remove('active-icon');\n                    }, 1000);\n                };\n\n                let lesson;\n\n                switch(enums.navigation.enumValueOf(clickedIcon.id)) {\n                    case enums.navigation.LANDSCAPE_HOME:\n                        const isIconActive = contains('active-icon', clickedIcon.classList);\n                        if(!isIconActive) {\n                            clickedIcon.classList.add('active-icon');\n                        }\n                        break;\n                    case enums.navigation.SETTINGS:\n                        toggleIconOnOff(clickedIcon);\n                        settingsHandler();\n                        break;\n                    case enums.navigation.PORTRAIT_HOME:\n                        onLoseFocusListeners.forEach(listener => listener());\n                        const activeInfoIcon = document.querySelector('.js-info.active-icon');\n                        if(activeInfoIcon) activeInfoIcon.classList.remove('active-icon');\n                        clickedIcon.classList.add('active-icon');\n                        subscription.getByRole('screen').forEach(sub => subscription.remove(sub));\n                        lesson = await lessonStateHandler.changeRequest({ requestType: enums.lessonState.PAUSE_LESSON });\n                        renderLessons();\n                        DOM.rightHeaderTxt.innerHTML = 'Learn the planet';\n                        DOM.rightHeaderScoreTxt.innerHTML = '';\n                        break;\n                    case enums.navigation.GLOSSARY:   \n                        toggleIconOnOff(clickedIcon);\n                        const { glossary } = store.getState();\n                        const definitions = !!collection.glossary\n                            ? glossary.filter(definition => contains(definition.taxon, collection.glossary))\n                            : glossary;\n                        quickFireHandlers.definitions(definitions);\n                        break;\n                    case enums.navigation.EMAIL:\n                        toggleIconOnOff(clickedIcon);\n                        break;\n                    case enums.navigation.LOGIN:\n                        renderLogin(store.getState().user);\n                        break;\n                    case enums.navigation.LANGUAGE:\n                        renderLanguagePicker();\n                    default:\n                        return;\n                }\n        });        \n    });\n\n    const onLoadState = (config, counter) => {\n        \n        if(config.isPortraitMode && config.collection.id !== 0 && !counter.isLessonRehydrated) {\n            navIcons.forEach(icon => icon.classList.remove('active-icon'));\n            return;\n        }\n\n        if(counter.isLessonPaused) {\n\n            if(config.isPortraitMode) {\n                const id = enums.navigation.PORTRAIT_HOME.name;\n                let icon = document.getElementById(id);\n                const returningUser = !cookieHandler.isFirstTimeVisitor();\n\n                if(id === enums.navigation.LANDSCAPE_HOME.name || (id === enums.navigation.PORTRAIT_HOME.name && returningUser)) {\n                    icon.classList.add('active-icon');\n                }\n            }\n        } else {\n            navIcons.forEach(icon => icon.classList.remove('active-icon'));\n        }\n\n        const loginIcon = document.querySelector('.js-login');\n              loginIcon.dataset.isLoggedIn = !!store.getState().user;\n    };\n\n    onLoadState(config, counter);\n};\n\nexport const renderLoginChanges = user => {\n  const loginIcon = document.querySelector('.js-login');\n  loginIcon.dataset.isLoggedIn = !user ? \"false\" : \"true\";\n};\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport { onAddLoseFocusListener } from 'ui/fixtures/navigation';\n\nimport textEntryTemplate from 'ui/screens/text-entry/text-entry-templates.html';\nimport textEntryPortraitTemplate from 'ui/screens/text-entry/text-entry-portrait-templates.html';\n\nexport const renderInput = (screen, question) => {\n\n    const { lessonPlan, collection, config, layout } = store.getState();\n\n    const item = collection.nextItem;\n\n    let vernacularName, binomial, questionTxt;\n\n    questionTxt = 'Complete the latin name';\n\n    switch(question.taxon) {\n        case 'genus': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ${question.species}`;\n            questionTxt = 'Enter the genus name';\n            break;\n        case 'species': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `${question.genus} ---`;\n            questionTxt = 'Enter the species name';\n            break;\n        case 'name': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ---`;\n            questionTxt = 'Enter full latin name';\n            break;\n        case 'vernacular':\n            vernacularName = '--- ---';\n            binomial = item.name;\n            questionTxt = 'Enter the common name';\n            break;\n    }\n\n    const help = config.isLandscapeMode ? '(Complete the name below.)' : '(Scroll to see more images.)';\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help, term: '' });\n\n    const template = document.createElement('template');\n          template.innerHTML = config.isLandscapeMode ? textEntryTemplate : textEntryPortraitTemplate;\n    \n    renderTemplate({ }, template.content, parent);\n\n    const inputTxt = document.querySelector('.js-txt-input');\n    const helpTxt = document.querySelector('.js-help-txt');\n\n    switch(question.taxon) {\n        case 'genus': \n            inputTxt.setAttribute('placeholder', 'Enter genus name');\n            helpTxt.innerHTML = `--- ${question.species}`;\n            break;\n        case 'species': \n            inputTxt.setAttribute('placeholder', 'Enter species name');\n            helpTxt.innerHTML = `${utils.capitaliseFirst(question.genus)} ---`;\n            break;\n        case 'name': \n            inputTxt.setAttribute('placeholder', 'Enter latin name');\n            helpTxt.innerHTML = `--- ---`;\n            break;\n        case 'vernacular':\n            inputTxt.setAttribute('placeholder', 'Enter common name');\n            helpTxt.innerHTML = `-----`;\n            break;\n    }\n\n    const boundScore = {};\n\n    const answerBtn = document.querySelector('.js-check-answer');\n\n    const callback = (score, scoreUpdateTimer) => {        \n        boundScore.scoreUpdateTimer = scoreUpdateTimer;\n        boundScore.score = score;\n    };\n\n    const scoreEventHandler = e => {\n        e.preventDefault();\n        const answer = document.querySelector('.js-txt-input').value;\n        const score = { \n            itemId: item.id, question, answer, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt, \n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        if(answerBtn) answerBtn.disabled = true;\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n        if(helpTxt) helpTxt.innerHTML = question.taxon === 'vernacular' ? item.vernacularName : item.name;\n    };\n\n    const loseFocusMobileHandler = e => {\n        document.removeEventListener('focusout', loseFocusMobileHandler);\n        const answer = document.querySelector('.js-txt-input').value;\n        const score = { \n            itemId: item.id, question, answer: document.querySelector('.js-txt-input').value, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt,\n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n    };\n\n    if(config.isLandscapeMode) {\n        answerBtn.addEventListener('click', scoreEventHandler, { once: true });\n    }\n    \n    if(config.isPortraitMode) renderPortrait(item, config);\n    else renderLandscape(item, config, question);\n\n    document.querySelector('.js-continue-lesson-btn').addEventListener('click', e => {\n        window.clearTimeout(boundScore.scoreUpdateTimer);\n        bindScore(boundScore.score);\n    }, { once: true });\n\n    if(config.isPortraitMode) {\n\n        // hide attribution for now - space issue various across devices\n        const attribution = document.querySelector('.js-attribution-layer');\n              attribution.classList.add('hide-important');\n        const indicators = document.querySelector('.js-carousel-indicators');\n              indicators.classList.add('hide-important');\n    }\n};\n\nconst renderPortrait = (item, config) => {\n    \n    const images = prepImagesForCarousel(item, config, imageUseCases.TEXT_ENTRY);\n\n    const parent = document.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent });\n};\n\nconst renderLandscape = (item, config, question) => {\n    \n    let answer = question[question.taxon];\n    \n    let pool;\n\n    switch(question.taxon) {\n        case 'vernacular':\n            pool = item.vernacularName.toLowerCase();\n            answer = question.common;\n            break;\n        case 'genus':\n            pool = item.taxonomy.genus.toLowerCase();\n            break;\n        case 'species':\n            pool = item.taxonomy.species.toLowerCase();\n            break;\n        case 'binomial':\n        case 'name':\n            pool = item.name.toLowerCase();\n            answer = question.binomial;\n            break;\n    }\n\n    let letterBlocks = '';\n\n    utils.shuffleArray(Array.from(pool)).forEach( (letter, index) => {\n        if(letter === ' ') letter = '&nbsp;';\n        letterBlocks += `<span id=\"${index}\" class=\"block\">${letter}</span>`\n    });\n\n    document.querySelector('.js-pool-letters').innerHTML = letterBlocks;\n\n    const input = document.querySelector('.js-txt-input');\n\n    const letters = [];\n\n    const deleteLetter = letter => {\n        let value = document.querySelector('.js-txt-input').value;\n        let activeBlocks = Array.from(document.querySelectorAll('.block.active'));\n        let activeLetters = Array.from(value);\n        let activeBlock = activeBlocks.find(block => block.innerText.trim() === activeLetters[activeLetters.length-1].trim());\n        let lastLetter = letter || activeBlock;\n        if(value.length > 0){\n            let indexInInput = value.lastIndexOf(lastLetter.innerHTML);            \n            let newValue = '';\n            let letters = Array.from(value);\n            letters.splice(indexInInput,1);\n            letters.forEach(letter => newValue += letter);            \n            input.value = newValue;\n        }\n        let correctBlocks = Array.from(document.querySelectorAll('.correct'));\n            correctBlocks.forEach(b => b.classList.remove('correct'));\n            correctBlocks.forEach(b => b.classList.add('active'));\n        if(lastLetter) {\n          lastLetter.classList.remove('active');\n          letters.forEach(l => {            \n              if(l.id === lastLetter.id) {\n                  const letterIndex = letters.indexOf(l);\n                  if(letterIndex > -1)\n                      letters.splice(letterIndex,1);\n              }\n          });        \n        }\n    };\n\n    const blocks = document.querySelectorAll('.block');\n\n    blocks.forEach(block => {\n        block.addEventListener('click', e => {\n          e.preventDefault();\n          const letter = e.target;\n          if(letter.classList.contains('active')) {\n              deleteLetter(letter);\n          } else {\n              letter.classList.add('active');\n              letters.push(letter);\n              if(letter.innerHTML === '&nbsp;')\n                  input.value += ' ';\n              else\n                  input.value += letter.innerHTML;\n          }\n          if(input.value === answer.toLowerCase()) {\n              blocks.forEach(block => block.classList.add('correct'));\n          }\n        });\n    });\n\n    document.querySelector('.js-delete-letter').addEventListener('click', e => {\n      e.preventDefault();\n      deleteLetter();\n    });\n\n    const keyboardBtn = document.querySelector('.js-toggle-keyboard');          \n          keyboardBtn.addEventListener('click', e =>{\n            e.preventDefault();\n            const disabled = input.hasAttribute('disabled');\n            if(disabled) {\n                keyboardBtn.innerHTML = 'Enable letters';\n                input.removeAttribute('disabled');\n                input.focus();\n            } else {\n                keyboardBtn.innerHTML = 'Enable keyboard'\n                input.setAttribute('disabled', 'disabled');\n            }\n          });\n\n    setTimeout(() => {\n      keyboardBtn.focus();\n    }, 500);\n\n    const blockArray = [ ...blocks ];    \n    const entries = [];\n    let selectedBlock;\n\n    input.addEventListener('input', e => {\n        e.preventDefault();\n        if(!e.data) return;\n        let entry = e.data.toLowerCase();\n        entry = entry === ' ' ? '&nbsp;' : entry;\n        entries.push(entry);\n        selectedBlock = blockArray.find(block => block.innerHTML === entry);\n        if(selectedBlock) selectedBlock.classList.add('active');\n        if(input.value === answer.toLowerCase()) {\n            blockArray.forEach(block => block.classList.add('correct'));\n        }\n    });\n\n    input.addEventListener('keyup', e => {\n        e.preventDefault();\n        if(e.keyCode === 8) { // Backspace\n          const entry = entries.pop();\n          selectedBlock = blockArray.find(block => block.innerHTML === entry);\n          if(selectedBlock) selectedBlock.classList.remove('active');\n        }            \n    });\n};\n","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { findRankByIconicTaxon } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\n\nexport const getPoolItems = async (collection, poolSize = 5) => {\n  \n  try {\n    \n    const item = collection.nextItem;\n\n    if(collection.behaviour === 'static') {\n      const otherItems = collection.items.filter(i => i.name !== item.name);\n      if(otherItems && otherItems.length > 0) {\n        return getItemsFromCollection(otherItems, item, poolSize);\n      }\n    }\n\n    const rank = findRankByIconicTaxon(item.taxonomy, item.iconicTaxon);\n\n    let taxonicMatches = await firestore.getSpeciesByIconicTaxon(item);\n\n    if(item.iconicTaxon.toLowerCase() === 'fungi') {\n        const isLichen = item.lichen;\n        taxonicMatches = isLichen ? taxonicMatches.filter(item => item.lichen) : taxonicMatches.filter(item => !item.lichen);\n    }\n\n    const speciesPool = utils.shuffleArray(taxonicMatches.filter(ci => ci.name.toLowerCase() !== item.name.toLowerCase()));\n\n    // temporary exceptions because there are so few (6 and 3) members of these taxa\n\n    const isException = item.iconicTaxon.toLowerCase() === 'reptilia' || item.iconicTaxon.toLowerCase() === 'amphibia';\n    \n    if(!speciesPool) {\n      getPoolItems(collection);\n    }\n\n    // if not enough, only get the additional necessary number (but duplicates???)\n\n    else if(speciesPool.length < poolSize && !isException) {\n      getPoolItems(collection);\n    } \n    else {\n\n      const items = take(poolSize, speciesPool);\n      \n      items.push(item);\n    \n      return await items;\n    }\n  } catch(e) {\n    logError('renderMixedSpecimenImagesAndQuestion init', e);\n  }\n};\n\n  const getItemsFromCollection = (otherItems, item, poolSize) => {\n    const items = take(poolSize, utils.shuffleArray(otherItems));\n    return utils.shuffleArray([ ...items, item]);\n  };","import{ take, contains, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { epithets } from 'api/botanical-latin';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nimport stripTemplate from 'ui/screens/multichoice/multi-strips-template.html';\nimport stripWithImageTemplate from 'ui/screens/multichoice/multi-strips-with-images.html';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\n\nexport const renderMultiStrips = (collection, bonus, args) => {\n\n    try {\n\n        const { config, lesson, layout, userAction } = store.getState();\n\n        if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n\n        const item = collection.nextItem || collection.items[collection.itemIndex];\n\n        const taxon = matchTaxon(item.taxonomy, iconicTaxa);                        \n    \n        const screen = bonus ? bonus.screen || layout.screens[1] : layout.screens[1];\n\n        let defaultQueryLimit = 6, defaultLanguage = 'en';\n\n        defaultLanguage = config.language;\n\n        const init = async () => {\n\n            const render = (answer, answers, overrides) => {\n\n                const vernacularName = (overrides && overrides.vernacularName !== undefined) ? overrides.vernacularName : item.vernacularName;\n                const binomial = (overrides && overrides.binomial !== undefined) ? overrides.binomial : item.name;\n                const question = (overrides && overrides.question) ? overrides.question : 'Match the name';\n                const helpDefault = config.isLandscapeMode ? '(Select the name below.)' : '(Tap on the name below.)';\n                const help = (overrides && overrides.help !== undefined) ? overrides.help : helpDefault;\n                const term = (overrides && overrides.term !== undefined) ? overrides.term : '';\n                const className = (overrides && overrides.className !== undefined) ? overrides.className : '';\n                const headerClassName = (overrides && overrides.headerClassName !== undefined) ? overrides.headerClassName : '';\n                const clue = (overrides && overrides.clue !== undefined) ? overrides.clue : null;\n                \n                const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question, help, term, className, headerClassName, bonus });\n\n                const template = document.createElement('template');\n                      template.innerHTML = answer.img ? stripWithImageTemplate : stripTemplate;\n\n                answers.forEach((answer, index) => {\n                    answer.index = index;\n                    answer.name = answer.name || '';\n                    answer.names = answer.names ? answer.names.join(', ') : '';\n                });\n\n                renderTemplate({ answers }, template.content, parent);\n\n                const strips = document.querySelectorAll('.js-rptr-strips .strip');\n\n                if(overrides.italicise) strips.forEach(strip => strip.classList.add('binomial'));\n\n                const taxon = { name: item.taxonomy.family, binomial: item.name, question: answer.term };\n\n                const test = { \n                    itemId: item.id, \n                    items: strips, \n                    taxon, binomial: \n                    item.name, \n                    questionCount: lesson.questionCount, \n                    layoutCount: lesson.layoutCount, \n                    points: layout.points, \n                    clue, \n                    answerIndex: answers.findIndex(a => a.term === answer.term),\n                    questionText: question\n                };\n                        \n                scoreHandler('strip', test, null, config);\n            }\n\n            if(screen.name === 'species-scientifics') {\n\n                const renderBinomialQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.name };\n                        answers = await getPoolItems(collection, 6);\n                        answers = take(8, answers).filter(s => s.name.toLowerCase() !== item.name.toLowerCase()).map(s => s.name);\n                        answers = take(5, answers);\n                        answers.push(item.name);\n                        answers = answers.map(a => { return { term: a } });\n                        answers = utils.shuffleArray(answers);\n                        \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    }\n\n                    await buildQuestion();\n\n                    render( answer, answers, { binomial: 'Latin name', question: 'What\\'s the latin name?', help, italicise: true });\n                };\n\n                renderBinomialQuestions();\n            }\n\n            if(screen.name === 'species-vernaculars') {\n\n                const renderVernacularQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.vernacularName };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => itemProperties.getVernacularName(a, config, false, 'vernacularName', defaultLanguage));\n                        answers = take(5, answers.filter(a => a !== item.vernacularName));\n                        answers = utils.shuffleArray([item.vernacularName, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: 'Common name', question: `What's the common name?`, help });\n                };\n\n                renderVernacularQuestions();\n            }\n\n            if(screen.name === 'species-identification') {\n\n                const renderIdQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.quickId };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => a.quickId);\n                        answers = take(5, answers.filter(a => a !== item.quickId));\n                        answers = utils.shuffleArray([item.quickId, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: item.vernacularName, question: 'Which description fits?', help });\n                };\n\n                renderIdQuestions();\n            }\n\n            if(screen.name === 'family-strips') {\n\n                const random = utils.getRandomInt(2);\n\n                const type = random === 0 ? 'identification' : 'summary';\n\n                const number = config.isPortraitMode ? 4 : 4;\n\n                const families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                const answer = { term: item.family[type], name: item.family.name } || { type: { term: `Missing ${type}`}, name: item.family.name };\n                const alternativeFamilies = take(number-1, take(number, utils.shuffleArray(families))).filter(f => f.name.toLowerCase() !== item.taxonomy.family.toLowerCase());\n                let alternatives = alternativeFamilies.filter(f => f[type] && f[type] !== undefined && f[type] !== '').map(f => { return { type: f[type], name: f.name, names: f.names } });\n                    alternatives = alternatives.map(a => { return { term: a.type, name: a.name, names: a.names } });\n                let answers = utils.shuffleArray([answer, ...alternatives]);                    \n                \n                const help = config.isLandscapeMode ? '(Select the description below.)' : '(Tap on the description.)';\n\n                render(answer, answers, { question: 'Match species family', help, clue: item.taxonomy.family });\n            }\n\n            if(screen.name === 'epithet') {\n                \n                const epithet = layout.epithet.latin.join(', ');\n                const number = config.isPortraitMode ? 6 : 6;\n                \n                let alternatives = take(number-1, utils.shuffleArray(epithets)).filter(e => !contains(e.latin, epithet));\n                    alternatives = alternatives.map(e => e.en.join(', '));\n                    alternatives = alternatives.map(a => { return { term: a } });\n                let answer = epithets.find(e => e.latin.join(', ').toUpperCase() === epithet.toUpperCase());\n                    answer = answer ? answer[config.language][0] : epithet;\n                    answer = { term: answer };\n                \n                const answers = utils.shuffleArray([answer, ...alternatives]);\n                \n                if(config.isLandscapeMode) {            \n                    render(answer, answers, { question: layout.epithet.latin.join(', '), help: '(Match the latin term)' });\n                } else {\n                    render(answer, answers, { question: 'Match latin word', help: '', vernacularName: '', binomial: '', term: layout.epithet.latin.join(', ') });\n                }\n            }\n\n            if(screen.name === 'definition') {\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n            }\n\n            if(screen.name === 'family') {\n\n                const indices = config.isPortraitMode ? [5,6] : [5,6];\n\n                let families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                let family = item.taxonomy.family;\n                let otherFamilies = take(indices[0], take(indices[1], utils.shuffleArray(families)).filter(family => family.name.toLowerCase() !== item.taxonomy.family.toLowerCase()));\n                let otherFamiliesLatinNames = otherFamilies.map(family => family.name);\n                let otherFamiliesCommonNames = otherFamilies.map(of => of.names[0]);\n                \n                let answer, answers;\n\n                const random = utils.getRandomInt(2);\n\n                switch(random) {            \n                    case 0:\n                        answer = { term: item.family.vernacularName };\n                        otherFamiliesCommonNames = otherFamiliesCommonNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesCommonNames]);\n                        if(answer === undefined) console.log('Missing question - case 0 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name' });\n                    break;\n                    case 1:\n                        answer = { term: family };\n                        otherFamiliesLatinNames = otherFamiliesLatinNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesLatinNames]);\n                        if(answer === undefined) console.log('Missing question - case 1 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name', italicise: true });\n                    break;\n                } \n            }\n\n            if(screen.name === 'trait-property') {\n\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n\n                if(bonus.overrides.trait && bonus.overrides.trait.name === 'song') {\n\n                        const renderBirdsong = async () => {\n\n                            const parent = document.querySelector('.js-question-help');\n                                  parent.innerHTML = '';\n\n                            const template = document.createElement('template');\n                                  template.innerHTML = audioMediaTemplate;\n\n                            const xcID = bonus.overrides.trait.value[0];\n\n                            const mp3 = await firestore.getBirdsong(xcID);\n                            \n                            renderTemplate({ mp3, title: item.name }, template.content, parent);\n\n                            const header = document.querySelector('.js-test-card-question');\n                                  header.classList.remove('standard-block');\n                                  header.classList.add('double-standard-block');\n\n                            const content = document.querySelector('.js-test-card-content');\n                                  content.classList.add('test-card-content-less-standard-block');\n                        };\n\n                        renderBirdsong();\n                }\n            }\n\n            if(layout.name === 'mixed-trait-images') {\n\n                // portrait only - redirect from renderMixedTraitImages\n\n                const { traits, requiredTraits, item, question, help } = args;\n\n                const answers = flatten(traits);\n                const answer = requiredTraits[0];\n\n                render(answer, answers, { binomial: item.name, question, help, italicise: true});\n\n            }\n        }\n\n        init();\n\n    } catch(e) {\n        console.error('Crashed out somwhere on multi-strips with this error: ', e);        \n    }\n};","import{ take, clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\n\nimport mixedSpecimenTemplate from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html';\n\nexport const renderMixedSpecimenImagesAndQuestion = collection => {\n\n    const { config, lesson, layout, score } = store.getState();\n\n    const item = clone(collection.nextItem);\n\n    if(!item) return;\n\n    const init = async () => {\n\n        const getPortraitImages = images => {\n            const multiImages = utils.flatten(images.map(image => { \n                const images = image.srcs.filter(i => i.starred).length === 0 ? take(1, utils.shuffleArray(image.srcs)) : image.srcs.filter(i => i.starred);\n                const item = { name: image.itemName, images };\n                return prepImagesForCarousel(item, config, imageUseCases.MIXED_SPECIMENS);\n            }));\n            return multiImages;\n        }\n\n        const items = await getPoolItems(collection);\n\n        let images = items.map((item, index) => { \n            return { index: index + 1, srcs: item.images, itemName: item.name };\n        });\n\n        images = getPortraitImages(images);\n\n        let question = config.islandscapeMode ? 'Find then click to ID' : 'Swipe and tap to ID';\n\n        let parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help: '(Click on the matching photo.)', term: '' });\n            parent.innerHTML = '';\n            \n        const template = document.createElement('template');\n              template.innerHTML = mixedSpecimenTemplate;\n        \n        renderTemplate({}, template.content, parent);\n\n        parent = document.querySelector('.js-test-card-container-images');\n\n        imageSlider({ config, images: utils.shuffleArray(images), parent, identifier: 'mixed-specimens' });\n\n        const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n        const boundScore = {};\n\n        const answers = [];\n\n        images.forEach(image => {\n            answers.push({ value: image.itemName, url: scaleImage(image).small });\n        });\n\n        document.querySelectorAll('#imageSlider_mixed-specimens .carousel-item img').forEach(img => {\n            \n            img.addEventListener('click', event => {\n\n                const layer = event.target;\n                const selectedName = layer.dataset.itemName;\n                const question = item.name;\n                const answer = selectedName || 'incorrect';\n                const isCorrect = answer === question;\n                const answerIcon = document.createElement('span');\n                      answerIcon.innerHTML = isCorrect \n                            ? '<span class=\"icon\"><i class=\"fas fa-check-circle\"></i></span>'\n                            : '<span class=\"icon\"><i class=\"fas fa-times-circle\"></i></span>';\n\n                const test = { ...score, itemId: item.id, \n                    question, answer, binomial: item.name, \n                    questionCount: lesson.questionCount, layoutCount: lesson.layoutCount, \n                    points: layout.points,\n                    answers,\n                    questionText: config.isPortraitMode ? 'Swipe and tap to ID' : 'Identify this species',\n                    vernacularName: itemProperties.getVernacularName(item, config),\n                };\n\n                const callback = (score, scoreUpdateTimer) => {\n                    boundScore.score = score;\n                    boundScore.scoreUpdateTimer = scoreUpdateTimer;\n                    continueLessonBtn.disabled = false;          \n                    if(!score.success) {\n                        const wrongItem = items.find(item => item.name === score.answer);\n                        const vernacularName = itemProperties.getVernacularName(wrongItem, config);\n                        const name = vernacularName || score.answer;\n                    }\n                };\n\n                scoreHandler('image-match', test, callback, config);  \n            });\n        });\n\n        continueLessonBtn.addEventListener('click', event => {\n\n            if(!score.success) {            \n                setTimeout(() => {\n                    window.clearTimeout(boundScore.scoreUpdateTimer);\n                    bindScore(boundScore.score);\n                });\n            } else {\n                window.clearTimeout(boundScore.scoreUpdateTimer);\n                bindScore(boundScore.score);\n            }\n\n        });\n    };\n\n    try {\n      init();\n    } catch(e) {\n      logError('renderMixedSpecimenImagesAndQuestion init', e);\n    }\n};\n","import{ clone } from 'ramda'\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { returnIcon } from 'ui/helpers/icon-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { bindScore } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { listenToImageSelection, listenToUserAnswer, renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\nimport { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport mixedSpecimenQuestionTemplate from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question-template.html';\n\nexport const renderMixedSpecimenQuestion = (collection, bonusLayout) => {\n\n    const { config, layout } = store.getState();\n\n    renderMixedSpecimenImagesAndQuestion(collection);\n    \n    return;\n\n    const item = clone(collection.nextItem);\n\n    let question = config.isPortraitMode ? 'Slide to ID this species' : 'Identify this species';\n    let help = '(Click on the matching photo.)';\n\n    if(bonusLayout) {\n        question = bonusLayout.overrides.question || question;\n        help = bonusLayout.overrides.help || help;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });\n    \n    const template = document.createElement('template');\n          template.innerHTML = mixedSpecimenQuestionTemplate;\n\n    const instructions = `Identify & Select`;\n    const binomial = item.name;\n\n    renderTemplate({ instructions, binomial }, template.content, parent);\n\n    const subheader = document.querySelector('.mixed-specimen-container > div > span:nth-child(1)');\n          subheader.innerHTML = `Click the picture of <span>${item.vernacularName} </span> from among those on the left.`;\n\n    const listenToImageChangeHandler = async images => {        \n\n        const uniqueSpecies = [ ...new Set(utils.shuffleArray(images).map(i => i.itemName)) ];\n\n        const speciesList = document.querySelector('.js-images-names-txt');\n\n        if(!speciesList) return;\n\n        speciesList.innerHTML = \"\";\n\n        const speciesItems = await Promise.all(uniqueSpecies.map(async species => {\n\n            const imageItem = await firestore.getSpeciesByName(species);\n            const vernacularName = itemProperties.getVernacularName(imageItem, config);\n            const taxonIcon = returnIcon(imageItem);\n\n            return `<li id=\"${species}\">${taxonIcon}<span>${vernacularName}</span><span class=\"binomial margin-left\">${imageItem.name}</li>`;\n        }));\n\n        speciesList.innerHTML = speciesItems.join('');\n    };\n\n    listenToImageSelection(listenToImageChangeHandler);\n\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n\n    const pendingScore = {};\n\n    listenToUserAnswer((score, scoreUpdateTimer) => {\n        \n        continueLessonBtn.disabled = false;\n        pendingScore.score = score;\n        pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    });\n\n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n\n    document.querySelector('.js-help-txt').addEventListener('click', () => {\n        const noOfImagesPerItem = layout.bonus ? 6 / collection.items.length : 1;\n        const preselectedItems = layout.bonus ? collection.items : null;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, preselectedItems, true);\n    });    \n};\n","import{ clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\n\nexport const renderBonusTest = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n\n    collection.nextItem = bonusLayout.item;\n\n    if(bonusLayout.overrides && bonusLayout.overrides.trait && bonusLayout.overrides.trait.name === 'lookalikes') {\n        collection.items = [ ...bonusLayout.overrides.trait.lookalikes, collection.nextItem ];\n        renderMixedSpecimenQuestion(collection, bonusLayout);\n    } else {        \n        renderMultiStrips(collection, bonusLayout);\n    }\n\n};\n","import{ clone, contains, take, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils'; \nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { imageUseCases, prepImagesForCarousel, prepImageForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderSpecimenTiles = collection => {\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    renderItemSpecimenTiles(item);\n};\n\nconst renderItemSpecimenTiles = item => {\n    \n    const { config, collection, layout } = store.getState();\n\n    const hasTiles = layout.itemIndex === layout.prevItemIndex && !!document.querySelector('.js-tiles');\n\n    if(hasTiles) return;\n\n    const familes = [ 'family-strips', 'family', 'taxon-card' ];\n\n    const collectionItems = collection.allItems || collection.items;\n\n    let images, items;\n    \n    if (contains(layout.screens[1].name, familes)) {        \n        const family = collectionItems.filter(i => i.family.name.toLowerCase() === item.taxonomy.family.toLowerCase());\n        images = take(6, utils.shuffleArray(getImagesFromItemFamily(family, config, imageUseCases.SPECIES_CARD)));\n        items = images.map(image => collectionItems.find(item => item.name === image.itemName));\n    } else {\n        images = take(6, utils.shuffleArray(clone(item.images)));\n        images = prepImagesForCarousel({ name: item.name, itemCommon: item.itemCommon, images }, config, imageUseCases.SPECIES_CARD);\n        items = [item];\n    }\n\n    images = images.map(image => {\n        return scaleImage(image, imageUseCases.VISUAL_MATCH, config);\n    });\n\n    renderSpecimenImageTiles({ items: items }, images, item);\n};\n\nconst renderSpecimenImageTiles = (collection, images, item) => {\n\n    const { layout, config } = store.getState();\n\n    const acceptableScreens = [ 'specimen-images', 'trait-images' ]; // lookalike options?\n\n    let screen = layout.screens.find(screen => contains(screen.name, acceptableScreens));\n\n    if(!screen) return;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = specimensTemplate;    \n\n    const parent = DOM.leftBody;\n          parent.innerHTML = '';\n\n    snapLog('renderSpecimenImageTiles, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images }, template.content, parent);\n\n    modalImagesHandler(document.querySelectorAll('.js-tiles .square'), item, collection, config);\n};\n\nconst getImagesFromItemFamily = (family, config, useCase) => {\n\n    let itemImages, items;\n\n    itemImages = flatten(family.map(i => {\n        return { images: i.images, item: { name: i.name, itemCommon: i.names[0].vernacularName, vernacularName: i.names[0].vernacularName, names: i.names } };\n    }));\n\n    if (itemImages.length < 6) {\n        \n        let pool = itemImages.map(image => {\n            const item = family.find(i => i.name === image.item.name);\n            return {\n                images: item.images,\n                item: {\n                    name: item.name,\n                    itemCommon: item.names[0].vernacularName,\n                    vernacularName: item.names[0].vernacularName,\n                    names: item.names\n                }\n            };\n        });\n        let pooledImages = flatten(pool);\n            pooledImages.forEach(pooledImage => {\n                pooledImage.images.forEach(image => {\n                    itemImages.push({ images: pooledImage.images, item: pooledImage.item });\n                });\n            });\n    }\n\n    items = itemImages.map(image => image.item);\n    \n    items.forEach(i => {\n        const itemName = i.name;\n        i.images = family.find(i => i.name === itemName).images;\n    });\n\n    const uniqueImages = [];\n\n    const getUniqueImage = (image, index, uniqueImages) => {\n        let uniqueImage = image.images.find(i => i.starred);\n        if(uniqueImage) {\n            uniqueImage = contains(uniqueImage.title, uniqueImages.map(i => i.title)) ? null : uniqueImage;\n        }\n        if(uniqueImage) {\n            uniqueImages.push(uniqueImage);\n            return uniqueImage;\n        }\n        else {\n            uniqueImage = image.images[index];\n            if(uniqueImage && !contains(uniqueImage.title, uniqueImages.map(i => i.title))) {\n                uniqueImages.push(uniqueImage);\n                return uniqueImage;\n            }\n        }\n    }; \n\n    const familyImages = [];\n\n    itemImages.forEach((image, index) => {\n        let imageToPrep = getUniqueImage(image, index, uniqueImages);\n        if(imageToPrep) {\n            familyImages.push(prepImageForCarousel(imageToPrep, index, image.item, config, useCase));\n        }\n    });\n\n    return familyImages;\n}\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\n\nimport questionTemplate from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html';\n\nexport const renderMixedTraitQuestion = collection => {\n\n    const init = async () => {\n\n        const { layout, collection, config } = store.getState();\n\n        const template = document.createElement('template');\n              template.innerHTML = questionTemplate;\n        \n        const item = collection.nextItem;\n        const question = 'Match the trait';\n        const help = `Select the correct ${utils.fromCamelCase(layout.trait)}`;\n    \n        const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });              \n\n        renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n\n        // if(config.isPortraitMode) {\n        //     renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n        //     return;\n        // }\n\n        // parent.innerHTML = '';\n        // renderTemplate({ traits: Array.from(new Set(layout.traits.flat())), help }, template.content, parent);\n        // document.querySelectorAll('.js-traits-names-txt img').forEach(img => {\n        //     if(img.src.indexOf('png') > -1) {\n        //         img.classList.add('png');\n        //     }\n        // });\n    };\n\n    init();\n};","import { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport stripTemplate from 'ui/screens/multichoice/horizontal-strips.html';\n\nexport const renderHorizontalStrips = collection => {\n\n    const { config, lesson, layout } = store.getState();\n\n    const item = collection.nextItem || collection.items[collection.itemIndex];\n\n    const binomial = layout.provider.name || layout.provider.taxon;\n    const statement = layout.provider.statement;\n    const providerQuestion = layout.provider.question;\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial, question: '', help: '', term: '', className: '', headerClassName: '', bonus: undefined, statement, providerQuestion });\n\n    const template = document.createElement('template');\n          template.innerHTML = stripTemplate;\n\n    let answers = utils.shuffleArray([ ...layout.provider.answers, layout.provider.answer ]);\n\n    answers = answers.map((answer, index) => {\n        return {\n            term: answer,\n            index\n        }\n    });\n\n    renderTemplate({ answers }, template.content, parent);\n\n    document.querySelector('.js-test-card-question').classList.add('calendar-block');\n    document.querySelector('.js-test-card-question').classList.remove('standard-block');\n\n    const strips = document.querySelectorAll('.js-rptr-strips .strip');\n    const taxon = { name: item.taxonomy.family, binomial: item.name, question: layout.provider.answer.term };\n\n    const test = { itemId: item.id, items: strips, taxon, binomial: item.name, \n        questionCount: lesson.questionCount, vernacularName: item.vernacularName,\n        layoutCount: lesson.layoutCount, points: layout.points, clue: '', \n        answerIndex: answers.findIndex(a => a.term === layout.provider.answer), answers, \n        questionText: providerQuestion, statement };\n\n    scoreHandler('strip', test, null, config);\n};","import { renderTextEntry } from 'ui/screens/text-entry/species-text-entry';\nimport { renderHistory } from 'ui/screens/progress/history';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderSummary } from 'ui/screens/progress/summary';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderCompleteText } from 'ui/screens/text-entry/text-complete';\nimport { renderCultivarCard } from 'ui/screens/cards/cultivar-card';\nimport { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\nimport { renderNonTaxonCardSpecimenTiles } from 'ui/screens/cards/non-taxon-card-specimen-tiles';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\nimport { renderMediaPlayers } from 'ui/screens/media/landscape/media-players';\nimport { renderBonusTest } from 'ui/screens/bonus/bonus-test';\nimport { renderBonusSpecimenTiles } from 'ui/screens/bonus/bonus-specimen-tiles';\nimport { renderMixedTraitQuestion } from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question';\nimport { renderHorizontalStrips } from 'ui/screens/multichoice/horizontal-strips.js';\n\nconst functions = [\n    { name: 'mixed-specimen-questions', func: renderMixedSpecimenImagesAndQuestion },\n    { name: 'non-taxon-specimen-tiles', func: renderNonTaxonCardSpecimenTiles },\n    { name: 'text-entry', func: renderTextEntry },\n    { name: 'species-card', func: renderCard },\n    { name: 'species-scientifics', func: renderMultiStrips },\n    { name: 'species-vernaculars', func: renderMultiStrips },\n    { name: 'species-identification', func: renderMultiStrips },\n    { name: 'summary', func: renderSummary },\n    { name: 'history', func: renderHistory },\n    { name: 'epithet', func: renderMultiStrips },\n    { name: 'definition', func: renderBonusTest },\n    { name: 'family', func: renderMultiStrips },\n    { name: 'family-strips', func: renderMultiStrips },\n    { name: 'taxon-card', func: renderTaxonCard },\n    { name: 'non-taxon-card', func: renderNonTaxonCard },\n    { name: 'text-complete', func: renderCompleteText },\n    { name: 'cultivar-card', func: renderCultivarCard },\n    { name: 'visual-match', func: renderMultiStrips },\n    { name: 'trait-images', func: renderBonusSpecimenTiles },\n    { name: 'trait-property', func: renderBonusTest },\n    { name: 'lookalike-property', func: renderBonusTest },\n    { name: 'symbiotic-property', func: renderMultiStrips },\n    { name: 'mixed-specimen-question', func: renderMixedSpecimenQuestion },\n    { name: 'mixed-specimen-images', func: renderMixedSpecimenQuestion },\n    { name: 'birdsong', func: renderBonusTest },\n    { name: 'media-players', func: renderMediaPlayers },    \n    { name: 'mixed-trait-question', func: renderMixedTraitQuestion },\n    { name: 'provider-horizontal-strip-questions', func: renderHorizontalStrips },\n];\n\nexport const funcByName = name => {\n    const match = functions.find(func => func.name === name);\n    const func = match ? match.func : null;\n    return func;\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { subscribeToNonTaxaSelection } from 'ui/screens/cards/non-taxon-card';\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderNonTaxonCardSpecimenTiles = collection => {\n\n    const { config } = store.getState(); \n\n    const callback = images => {\n\n        const template = document.createElement('template');\n\n        template.innerHTML = specimensTemplate;\n\n        const parent = DOM.leftBody;\n        parent.innerHTML = '';\n\n        renderTemplate({images}, template.content, parent);\n\n        modalImagesHandler(document.querySelectorAll('.js-tiles .square'), null, collection, config);\n    };\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    subscribeToNonTaxaSelection(callback);    \n};","import { store } from 'redux/store';\nimport { renderInput } from 'ui/screens/text-entry/text-entry';\n\nexport const renderTextEntry = (collection) => {\n\n    const { layout } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-entry')[0];\n    const item = collection.nextItem;\n    \n    if(!screen) return;\n\n    item.vernacular = item.vernacularName;\n\n    const q = screen.taxon === 'name' ? item.name : \n                    screen.taxon === 'vernacular' \n                        ? item.vernacularName\n                        : item.taxonomy[screen.taxon];\n\n    const question = { binomial: item.name, species: item.taxonomy.species, genus: item.taxonomy.genus, taxon: screen.taxon, question: q, common: item.vernacularName };\n\n    renderInput(screen, question);\n};","import { subscription } from 'redux/subscriptions';\nimport { store } from 'redux/store';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nexport const renderSummary = history => {\n\n    subscription.remove(subscription.getByName('renderSummary'));\n\n    const { collection } = store.getState();\n\n    renderScoreSummary(collection.id);\n\n    return;\n};\n\n","import { store } from 'redux/store';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nexport const renderHistory = history => {\n            \n    const { collection} = store.getState();\n\n    renderLessons();\n}    ","import{ take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, continueLessonHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport completeTemplate from 'ui/screens/text-entry/text-complete-template.html';\n\nexport const renderCompleteText = (collection) => {\n\n    const item = collection.nextItem;\n\n    const { layout, config, lessonPlan } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-complete')[0];\n    \n    if(!screen) return;\n\n    let question, genus, species, givenTaxon, vernacularName, binomial, questionTxt;\n\n    vernacularName = item.vernacularName;\n    binomial = item.name;\n    questionTxt = 'Complete the latin name';\n\n    switch(screen.type) {\n        case 'text-complete-genus':\n            question = item.taxonomy.genus;\n            genus = '---';\n            species = item.taxonomy.species;\n            binomial = `--- ${item.taxonomy.species}`;\n            givenTaxon = 'genus';\n            questionTxt = 'Select genus name';\n            break;\n        case 'text-complete-species':\n            question = item.taxonomy.species;\n            genus = item.taxonomy.genus;\n            species = '---';\n            binomial = `${item.taxonomy.genus} ---`;\n            givenTaxon = 'species';\n            questionTxt = 'Select species name';\n            break;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help: '(Select the name below.)', term: '' });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = completeTemplate;\n\n    const numerOfItems = config.isPortraitMode ? 4 : 5;\n\n    // broaden pool to species matching iconic taxon\n    const itemTaxons = collection.items.map(item => {\n        switch(givenTaxon) {\n            case 'genus':\n                return item.taxonomy.genus;\n            case 'species':\n                return item.taxonomy.species;\n            default:\n                return item.name;\n        }\n    });\n    const pool = take(numerOfItems, utils.shuffleArray(itemTaxons).filter(utils.onlyUnique).filter(itemTaxon => itemTaxon !== item.taxonomy[givenTaxon])).filter(item => item !== undefined);\n    pool.push(item.taxonomy[givenTaxon]);\n\n    let answers = utils.shuffleArray(pool);\n\n    answers = answers.map((answer, index) => {\n      return {\n        index,\n        value: answer\n      }\n    });\n\n    renderTemplate({ genus, species, answers }, template.content, parent);\n\n    setTimeout(() => {\n      const block = document.querySelectorAll('.pool .block')[0];\n            block.focus(); \n    },1000);\n\n    const score = { itemId: item.id, binomial: item.name, question: item.taxonomy[givenTaxon], callbackTime: config.callbackTime, layoutCount: lessonPlan.layouts.length, points: layout.points };\n\n    const callback = (score, scoreUpdateTimer, config) => {\n\n        const iconColour  = score.success ? 'answer-box-success' : 'answer-box-alert';\n\n        const answerIcon = score.success\n            ? `<span class=\"icon\"><i class=\"fas fa-check\"></i></span>`\n            : `<span class=\"icon\"><i class=\"fas fa-times\"></i></span>`;\n\n        const response = score.success ? `Correct` : `Incorrect`;\n        \n        document.querySelector('.js-txt-question').innerHTML = `<div class=\"${iconColour}\"><span>${answerIcon}</span><span>${ response }</span</div>`;        \n\n        document.querySelectorAll('.block span').forEach(block => {\n            if(block.innerText === score.answer) {\n                score.success\n                    ? block.parentElement.classList.add('snap-success')\n                    : block.parentElement.classList.add('snap-alert');\n            }\n            if(block.innerText === score.question) {\n                block.parentElement.classList.add('snap-success');\n            }\n        });\n\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    };\n\n    document.querySelectorAll('.js-pool button').forEach(answer => {\n        answer.addEventListener('click', e => {\n          e.preventDefault();\n          const button = e.target;\n          const answer = button.innerText;\n          if(question === item.taxonomy.species) {\n              document.querySelector('.species').innerText = answer;                \n          } else {\n              document.querySelector('.genus').innerText = answer;\n          }\n          score.answer = answer;\n          score.answers = answers;\n          score.questionText = questionTxt;\n          scoreHandler('block', score, callback, config);\n        });\n    });    \n};\n","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport cultivarTemplate from 'ui/screens/cards/cultivar-card-template.html';\n\nexport const renderCultivarCard = collection => {\n\n    const item = collection.nextItem;\n    const { lessonPlan, layout, config } = store.getState();\n\n    const cultivarCollection = lessonPlan.layouts.find(layout => layout.name === 'screen-cultivar-card').cultivars;\n\n    const cultivars = cultivarCollection.subspecies.map(sub => {\n        let locale = sub.names.find(n => n.language === config.language);\n        locale = locale || sub.names.find(n => n.language === 'en');\n        return {\n            vernacular: locale.vernacularName || '',\n            variety: sub.variety || '',\n            form: sub.form || '',\n            eol: locale.eol || '',\n            eolAlt: locale.eol || 'N/A',\n            wiki: locale.wiki || '',\n            wikiAlt: locale.wiki || 'N/A'\n        }\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cultivarTemplate;\n\n    const parent = DOM.rightBody;\n    parent.innerHTML = '';\n\n    const context = {\n        rank: 'cultivar',\n        item: item,\n        cultivars: cultivars\n    }\n\n    renderTemplate(context, template.content, parent);\n\n    document.querySelectorAll('[title=\"N/A\"]').forEach(a => a.style.display = 'none');\n};","import{ clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderSpecimenTiles } from 'ui/screens/landscape/specimen-tiles';\n// import { renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\n\nexport const renderBonusSpecimenTiles = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n          collection.nextItem = bonusLayout.item;\n          collection.nextItem = collection.nextItem || collection.items[collection.itemIndex];\n    \n    const lookalikesCount = bonusLayout.item \n            ? bonusLayout.overrides.trait.lookalikes ? bonusLayout.overrides.trait.lookalikes.length + 1 : 0 // lookalikes + item itself\n            : 0;\n\n    if(lookalikesCount > 0) {\n        let noOfImagesPerItem = 6 / lookalikesCount;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, [ collection.nextItem, ...bonusLayout.overrides.trait.lookalikes]);\n    } else {\n        renderSpecimenTiles(collection);\n    }\n\n};","export const renderMediaPlayers = collection => {\n\n    let isAudio = true;\n\n    const mediaPlayers = isAudio \n                ? document.querySelectorAll('.media-audio-players')\n                : document.querySelectorAll('.media-video-players');\n};","import * as R from 'ramda';\n\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { store } from 'redux/store';\nimport { observeStore } from 'redux/observe-store';\nimport { funcByName } from 'ui/helpers/function-lookups';\n\nlet subscriptions = [];\n\nconst add = (subscription, domain, role, layout) => {\n\n    const select = store => store[domain];\n    const onChange = subscription;    \n\n    const sub = observeStore(store, select, onChange, domain, layout);\n\n    const existingSub = getByName(sub.name);\n\n    if(existingSub) return;\n\n    subscriptions.push({ ...sub, role});\n    return sub;\n};\n\nconst remove = subscription => {\n\n    if(subscription) {\n\n        subscription.unsubscribe();\n        subscriptions = subscriptions.filter(sub => sub.name !== subscription.name);\n    }\n    return subscriptions;\n};\n\nconst removeByName = name => {\n    const subscription = getByName(name);\n    if(subscription) {\n        return remove(subscription);\n    }\n};\n\nconst getByName = name => {\n    return subscriptions.find(sub => sub.name === name);\n};\n\nconst getByRole = role => {\n    return subscriptions.filter(sub => sub.role === role);\n};\n\nconst getAll = () => {\n    return subscriptions;\n};\n\nconst removeSubs = () => {\n\n    let screens = getByRole('screen');\n\n    screens.forEach(sub => subscription.remove(sub));\n};\n\nconst checkRequired = (state, layout) => {\n\n    const { userAction, config } = state;\n\n    let isRequired = true, isReviewingLesson = true;\n\n    isReviewingLesson = lessonStateHelper.getIsReviewingLesson(userAction, config, isReviewingLesson); \n        \n    const reviewLayouts = [\n        'screen-species-card',\n        'screen-taxon-card',\n        'screen-non-taxon-card',\n        'species-vernaculars',\n        'mixed-specimen-images',\n        'mixed-specimen-question',\n        'screen-common-to-latin',\n        'screen-genus-completion',\n        'screen-latin-to-common',\n        'media-match'\n    ];\n\n    isRequired = isReviewingLesson ? true : !R.contains(layout.name, reviewLayouts);\n\n    return isRequired;\n};\n\nconst addSubs = (layout, config) => {\n\n    if(!layout) return;\n    \n    layout.screens.forEach( (screen, index) => {\n\n        const func = funcByName(screen.name);\n\n        const isSubscriptionRequired = checkRequired(store.getState(), layout);\n\n        if(func && isSubscriptionRequired) {\n            if(config.isPortraitMode) {\n                if(index === 1 || screen.name === 'summary') subscription.add(func, screen.domain, 'screen', layout ? layout.name : '');\n            } else {\n                subscription.add(func, screen.domain, 'screen', layout ? layout.name : '');\n            }                           \n        } else {\n            subscription.remove(subscription.getByName('nextItem'));\n            subscription.remove(subscription.getByName('traitValuesHandler'));\n        }\n    });\n};\n\n\n\nexport const subscription = {\n    add,\n    remove,\n    removeByName,\n    getByName,\n    getByRole,\n    getAll,\n    removeSubs,\n    addSubs\n};\n\n","export const observeStore = (store, select, onChange, domain, layout) => {\n    let currentState = null;\n    let hasStateSignificantlyChanged = false;\n\n    function handleChange() {      \n      let nextState = select(store.getState());\n\n      // let hasStateSignificantlyChanged = false;\n          hasStateSignificantlyChanged = nextState !== currentState;\n\n          if(currentState && Object.is(currentState.index,0)) {            \n            let areEqual = true;\n                areEqual = areEqual && Object.is(nextState.index, currentState.index);\n                areEqual = areEqual && Object.is(nextState.isLessonPaused, currentState.isLessonPaused);\n            hasStateSignificantlyChanged = !areEqual;\n          }\n\n      if(currentState && nextState) {\n        switch(layout) {\n          case 'screen-species-card':\n          case 'screen-taxon-card':\n          case 'screen-non-taxon-card':\n          case 'species-vernaculars':\n          case 'mixed-specimen-images':\n          case 'mixed-specimen-question':\n          case 'screen-common-to-latin':\n          case 'screen-genus-completion':\n          case 'screen-latin-to-common':\n          case 'media-match':\n            hasStateSignificantlyChanged = (nextState.nextItem && nextState.nextItem.name) !== (currentState.nextItem && currentState.nextItem.name);\n            break;\n        }\n      }\n\n      if(hasStateSignificantlyChanged) {\n        currentState = nextState;\n        onChange(currentState);\n      }\n    }\n  \n    handleChange.domain = domain;\n    handleChange.calledBy = onChange.name;\n    let unsubscribe = store.subscribe(handleChange);\n    if(hasStateSignificantlyChanged) {\n      handleChange();\n    }\n    return { unsubscribe, name: onChange.name };\n  };","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { markTest} from 'ui/helpers/test-handler';\nimport { subscription } from 'redux/subscriptions';\n\nexport const scoreHandler = (type, test, callback, config) => {\n    \n    switch(type) {\n        case 'radio':\n        case 'text':\n            return genericScoreHandler(test, callback, config);\n        case 'block':\n            blockScoreHander(test, callback, config);\n            break;\n        case 'strip':   \n            stripScoreHandler(test, callback, config);\n            break;\n        case 'image':\n            imageScoreHandler(test, callback, config);\n            break;\n        case 'image-match':\n            simpleScoreHandler(test, callback, config);\n            break;\n    }\n};\n\nexport const renderScoreHTMLResponse = response => {\n    const html = response.success\n            ? `<div class=\"answer-box-success\">\n                <span class=\"icon\"><i class=\"fas fa-check\"></i></span><span class=\"answer-response\">${ response.correct }</span>\n                </div>`\n            : `<div class=\"answer-box-alert\">\n                <span class=\"icon\"><i class=\"fas fa-times\"></i></span><span class=\"answer-response\">${response.answer || response.incorrect}</span>\n            </div>`;\n    return html;\n};\n\nconst showResponseToAnswerHandler = response => {\n    const questionText = document.querySelector(response.container) || document.querySelector('.js-txt-question');\n    if(questionText) {\n          questionText.innerHTML = renderScoreHTMLResponse(response);\n    }\n}\n\nexport const continueLessonHandler = (btn, score, timer) => {\n        \n    btn.disabled = false;\n    btn.style.cursor = 'pointer';\n\n    btn.addEventListener('click', event => {\n        btn.disabled = true;\n        window.clearTimeout(timer);\n        subscription.removeSubs();\n        bindScore(score);\n    });\n};\n\nconst simpleScoreHandler = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);      \n    }, delay);\n\n    if(callback) {\n        callback(score, scoreUpdateTimer);\n    } else {\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n}\n\nconst genericScoreHandler = (_score, callback, config) => {\n    \n    const { itemId, question, answer, target, layoutCount, points, names, questionText, answers } = _score;\n    const test = { itemId, ...question, answer, points, names, questionText, answers };\n\n    const score = markTest(test);\n\n    let responseTxt = (test.names && test.names.length > 0) ? test.names[0] : test.binomial;\t\n    let labelTxt = 'Species';\t\n\n    if(score.taxon === 'genus') {\n        responseTxt = score.genus;\n        labelTxt = 'Genus name';\n    }\n\n    if(score.taxon === 'species') {\n        responseTxt = score.species;\n        labelTxt = 'Species name';\n    }\n    if(score.taxon === 'name') {\n        responseTxt = score.binomial;\n        labelTxt = 'Latin name';\n    }\n\n    if(score.taxon === 'family') {\n        responseTxt = score.question;\n        labelTxt = 'Family name';\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    const container = window.matchMedia(\"(max-height: 568px)\").matches ? '.js-check-answer' : '.js-txt-question';\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect,  container, answer: score.question });\n\n    score.layoutCount = layoutCount;\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs(); \n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);               \n    }, delay);\n\n    if(callback) callback(score, scoreUpdateTimer);\n\n    return { score, scoreUpdateTimer };\n};\n\nconst blockScoreHander = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);        \n    }, delay);\n\n    callback(score, scoreUpdateTimer, config);\n};\n\nconst stripScoreHandler = (test, callback, config) => {    \n\n    const { items, taxon } = test;\n\n    const handleClickEvent = e => {\n      \n        e.preventDefault();\n\n        const target = e.target;\n\n        if(elem.hasClass(target, 'disabled')) return;\n\n        const answerNode = target;\n        const answer = answerNode.innerText.trim();\n        const answerIndex = answerNode.dataset.answerIndex;\n        const name = answerNode.dataset.name;\n        const vernacular = target.dataset.vernacular;\n\n        test.taxon = 'name';\n        test.vernacular = vernacular;\n        test.question = taxon.question;\n        test.answer = (name && name !== '') ? { term: answer, name } : answer;\n            \n        const score = markTest({...test, answeredIndex: parseInt(answerIndex), answers: [] });\n\n        target.classList.add(score.colour);\n\n        items.forEach(strip => {   \n            const stripAnswer = strip.querySelector('button');\n            const stripAnswerIndex = parseInt(stripAnswer.dataset.answerIndex);\n            const stripAnswerName = stripAnswer.dataset.name || '';\n            \n            stripAnswer === '' \n                ? score.answers.push(stripAnswer.innerText) \n                : score.answers.push({\n                    term: stripAnswer.innerText,\n                    name: stripAnswerName\n                });\n            \n            if(stripAnswerIndex === score.answerIndex) {\n                strip.classList.add('snap-success');\n            } else if(stripAnswerIndex === score.answeredIndex) {\n              strip.classList.add('snap-alert');\n            }\n        });     \n        \n        if(callback) {\n            callback(score);\n        } else {\n            const _callback = (score) => {\n\n                const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n                const scoreUpdateTimer = setTimeout(()=>{\n                    subscription.removeSubs();\n                    bindScore(score);\n                }, delay);\n            \n                continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n\n                // screen is always null\n                if(screen.name === 'family-strips') {\n                    document.querySelector('.js-question-question').innerHTML = item.taxonomy.family;\n                    document.querySelector('.js-question-help').classList.add('hide');\n                }\n            };\n            _callback(score);\n        }\n            \n        let correct = `Correct`;\n        let incorrect = `Incorrect`;\n\n        showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n\n        items.forEach(item => item.classList.add('disabled'));\n    };\n\n    items.forEach(selected => {        \n        selected.addEventListener('click', handleClickEvent);\n    });\n\n    window.addEventListener('keydown', e => {\n      if(e.key === 'Enter') {\n        handleClickEvent(e);\n      }                  \n    }, { once: true });\n};\n\nconst imageScoreHandler = (test, callback, config) => {\n\n    const { items, taxon } = test;\n\n    items.forEach(tile => {\n        tile.addEventListener('click', event => {\n\n            const img = event.target;\n            const answer = img.dataset.answer;\n\n            if(!answer) return;\n\n            test.taxon = 'name';\n            test.question = taxon.name\n            test.answer = answer;\n            const score = markTest(test);\n\n            tile.style.filter = 'saturate(100%)';\n\n            img.parentNode.style.filter = 'saturate(100%)';\n\n            items.forEach(tile => {\n                tile.style.filter = 'saturate(10%)';\n                tile.style.opacity = .3;\n                if(tile.dataset.answer.trim().toLowerCase() === taxon.name.trim().toLowerCase()) {\n                    tile.style.filter = 'saturate(100%)';\n                    tile.style.opacity = 1;\n                }\n            });\n\n            const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n            subscription.removeSubs();\n\n            const scoreUpdateTimer = setTimeout(() => {\n                bindScore(score);\n            }, delay);\n                \n            if(callback) callback(score, scoreUpdateTimer);\n        });\n    });\n};\n\nexport const bindScore = score => {\n\n    const { collection } = store.getState();\n\n    score.collectionId = collection.id;\n\n    actions.boundUpdateScore(score);\n};","import{ take, contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nconst onTraitsReadyListeners = [];\nconst onTraitsReady = listener => {\n    onTraitsReadyListeners.push(listener);\n};\n\nconst onTraitClickedListeners = [];\nconst onTraitClicked = listener => {\n    onTraitClickedListeners.push(listener);\n};\n\nconst getMatchingTrait = (layoutTraits, traitValues) => {\n\n    try {\n        let requiredTraitValues, trait;\n\n        for (let [key, obj] of Object.entries(traitValues)) {\n            let t;\n            layoutTraits.map(t => { \n                if(t.toLowerCase() === utils.toCamelCase(key).toLowerCase()) {\n                    requiredTraitValues = obj.value.map(v => v.toLowerCase());\n                    trait = t;\n                }\n            }) \n        };\n    \n        return { requiredTraitValues, trait };\n    } catch (e) {\n      logError(getMatchingTrait, e);\n      return { requiredTraitValues: [], trait: {}};\n    }\n\n};\n\nconst fetchTraits = async (trait, requiredTraitValues, required) => {\n\n    const glossary = store.getState().glossary;\n\n    let traits = await firestore.getTraitDefinitions(glossary, required, trait);\n        traits.forEach(t => {\n            t.term = t.term.toLowerCase();\n            if(t.alt) t.alt = t.alt.toLowerCase();\n            return t;\n        });\n\n    if(!requiredTraitValues) return { traits: null, requiredTraits: null};\n\n    let multiples = traitsHandler.getNMultiplesFromArray(traits.map(t => t.term), requiredTraitValues.length);\n\n        multiples = multiples.filter(multiple => {\n            return !traitsHandler.doArraysHaveSameValues(multiple, requiredTraitValues);\n        });\n        \n        let requiredTraits = traits.filter(t => contains(t.term, requiredTraitValues));\n        \n        multiples = utils.shuffleArray([ ...take(5, multiples), requiredTraitValues ]);\n\n        traits = multiples.map(multiple => {\n            return multiple.map(term => traits.find(trait => trait.term === term));\n        });\n\n    onTraitsReadyListeners.forEach(listener => listener(traits, requiredTraits));\n\n    return { traits, requiredTraits };\n};\n\nconst pendingScore = {};\n\nconst callback = (score, scoreUpdateTimer) => {\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n          continueLessonBtn.disabled = false;\n    pendingScore.score = score;\n    pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    \n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n};\n\nconst onClickTileHandler = (tile, requiredTraits, tiles) => {\n\n    const { config, lesson, collection } = store.getState();\n\n    const item = collection.nextItem;\n\n    tile.addEventListener('click', e => {\n        \n        const tile = e.currentTarget;\n        const traits = Array.from(tile.querySelectorAll('img')).map(t => t.dataset.term);\n        const images = Array.from(tiles).map(t => t.querySelector('img').dataset);\n        const answers = images.map(i => { return { value: i.term, url: i.url } })\n        const test = {\n            points: 0,\n            binomial: item.name, \n            trait: true,\n            question: requiredTraits.map(trait => trait.term),\n            answer: traits,\n            questionCount: lesson.questionCount, \n            layoutCount: lesson.layoutCount,\n            answers,\n            questionText: 'Match the trait'\n        }\n        scoreHandler('image-match', test, callback, config);\n\n        tiles.forEach(tile => {\n            if(!traitsHandler.doArraysHaveSameValues(Array.from(tile.querySelectorAll('img')).map(img => img.dataset.term), requiredTraits.map(trait => trait.term))) {\n                tile.querySelectorAll('img').forEach(img => img.classList.add('desaturate'));\n            }\n        });\n})};\n\nexport const mixedTraitHandler = {\n    getMatchingTrait,\n    fetchTraits,\n    onTraitsReady,\n    onTraitClicked,\n    onClickTileHandler\n};","import { clone } from 'ramda';\n\nimport { panels } from 'snapdragon-config/screen-panels';\n\nconst { \n    specimenImages, speciesCard, vernaculars, scientifics, text, \n    leaf, leafName, \n    family, familyStrips, taxon, nonTaxon, textComplete, cultivar, cultivarCard, \n    epithets, definitions, \n    specimenCommonMatch, specimenLatinMatch,\n    definitionCard, \n    traitProperty, symbioticProperty\n    , lookalikeProperty\n    , traitImages,\n    nonTaxonSpecimenTiles,\n    mixedSpecimenQuestions,\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n    history, summary, \n    birdsong, mediaPlayers,\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification } = panels;\n\nconst mixedSpeciesMatch = {\n    name: 'screen-mixed-species-match',\n    type: 'test',\n    score: 1,\n    kind: 'VMC',\n    points: 3,\n    given: 'Given species name',    \n    requirement: 'Select species image',\n    screens: [\n        { ...specimenImages },\n        { ...mixedSpecimenQuestions }\n    ]\n};\n\nconst speciesRevision = {\n    name: 'screen-species-card',\n    type: 'revision',\n    score: 0,\n    kind: 'S',\n    points: 0,\n    given: 'Given species summary',\n    requirement: 'Study species',\n    screens: [\n        { ...specimenImages },\n        { ...speciesCard }\n    ]\n};\n\nconst taxonRevision = {\n    name: 'screen-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'F',\n    points: 0,\n    given: 'Study',\n    requirement: 'Family summary',\n    screens: [\n        { ...specimenImages },\n        { ...taxon }\n    ]\n};\n\nconst nonTaxonRevision = {\n    name: 'screen-non-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'GR',\n    points: 0,\n    given: 'Group summary',\n    requirement: 'Study',\n    screens: [\n        { ...nonTaxonSpecimenTiles },\n        { ...nonTaxon }\n    ]\n};\n\nconst definitionRevision = {\n    name: 'screen-definition-card',\n    type:'revision',\n    score: 0,\n    kind: 'G',\n    points: 0,\n    given: 'Given glossary',\n    requirement: 'Study definitions',\n    screens: [\n        { ...specimenImages },\n        { ...definitionCard }\n    ]\n};\n\nconst latinToCommonMatch = {\n    name: 'screen-latin-to-common',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given latin name',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...vernaculars }\n    ]\n};\n\nconst commonToLatinMatch = {\n    name: 'screen-common-to-latin',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given common name',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...scientifics }\n    ]\n};\n\nconst speciesIdentificationMatch = {\n    name: 'screen-species-identification',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select identification',\n    screens: [\n        { ...specimenImages },\n        { ...speciesIdentification }\n    ]\n};\n\nconst textCompleteGenus = {\n    name: 'screen-genus-completion',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select genus name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-genus'  }\n    ]\n};\n\nconst multiSpecimenCommonMatch = {\n    name: 'screen-specimens-common-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenCommonMatch }\n    ]\n};\n\nconst multiSpecimenLatinMatch = {\n    name: 'screen-specimens-latin-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenLatinMatch }\n    ]\n};\n\nconst traitPropertyMatch = {\n    name: 'trait-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...traitProperty }\n    ]\n};\n\nconst lookalikePropertyMatch = {\n    name: 'lookalike-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...lookalikeProperty }\n    ]\n};\n\nconst symbioticPropertyMatch = {\n    name: 'symbiotic-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given specimenImages images',\n    requirement: 'Select symbiotic match',\n    screens: [\n        { ...specimenImages },\n        { ...symbioticProperty }\n    ]\n};\n\nconst familyMatch = {\n    name: 'screen-species-to-family',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Species name',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...family }\n    ]\n};\n\nconst cultivarMatch = {\n    name: 'screen-cultivar-to-species',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Cultivar name',\n    requirement: 'List species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivar }\n    ]\n};\n\nconst familyStripsMatch = {\n    name: 'screen-family-to-description',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Family description',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...familyStrips }\n    ]\n};\n\nconst genusEntry = {\n    name: 'screen-genus-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given species name',\n    requirement: 'Enter genus name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'genus'}\n    ]\n};\n\nconst speciesEntry = {\n    name: 'screen-species-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given genus name',\n    requirement: 'Enter species name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'species'}\n    ]\n};\n\nconst speciesGenusEntry = {\n    name: 'screen-binomial-entry',\n    type:'test',\n    score: 1,\n    points: 4,\n    kind: 'T',\n    given: 'Given common name',\n    requirement: 'Enter latin name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'name'}\n    ]\n};\n\nconst leafEntry = {\n    type:'test',\n    score: 1,\n    points: 3,\n    kind: 'T',\n    screens: [\n        { ...leaf },\n        { ...leafName }\n    ]\n};\n\nconst textCompleteSpecies = {\n    name: 'screen-species-completion',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Given genus name',\n    requirement: 'Select species name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-species' }\n    ]\n};\n\nconst commonEntry = {\n    name: 'screen-common-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species latin name',\n    requirement: 'Enter common name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'vernacular'  }\n    ]\n};\n\nconst latinEpithets = {\n    name: 'screen-epithets',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Epithet',\n    requirement: 'List epithet definitions',\n    screens: [\n        { ...specimenImages },\n        { ...epithets }\n    ]\n};\n\nconst glossaryTerms = {\n    name: 'screen-definitions',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'Given glossary term',\n    requirement: 'Select definition',\n    screens: [\n        { ...specimenImages },\n        { ...definitions }\n    ]\n};\n\nconst cultivars = {\n    name: 'screen-cultivars',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'List of cultivars',\n    requirement: 'List of species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivarCard },\n        { ...cultivar }\n    ]\n};\n\nconst mixedSpecimenImages = {\n  name: 'mixed-specimen-images',\n  type:'test',\n  score: 1,\n  points: 2,\n  kind: 'T',\n  given: 'Specimen images',\n  requirement: 'Select species image',\n  screens: [\n      { ...mixedSpecimensLeft },\n      { ...mixedSpecimensRight }\n  ]\n};\n\nconst mediaMatch = {\n    name: 'media-match',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species song',\n    requirement: 'Select species',\n    screens: [\n        { ...specimenImages },\n        { ...birdsong }\n    ]\n};\n\nconst mixedTraitImages = {\n    name: 'mixed-trait-images',\n    type:'test',\n    kind: 'T',\n    score: 1,\n    points: 2,\n    given: 'Trait images',\n    requirement: 'Select trait image',\n    screens: [\n        { ...mixedTraitLeft },\n        { ...mixedTraitRight }\n    ]\n  };  \n\nconst providerHorizontalStrip = {\n    name: 'provider-horizontal-strip',\n    type: 'test',\n    score: 1,\n    screens: [\n        { ...specimenImages },\n        { ...providerHorizontalStripQuestions }\n    ]\n};\n\nconst propertyTrait = (traitPropertyMatch, traits) => {\n    const layout = clone(traitPropertyMatch);\n    layout.screens[0].traits = traits;\n    layout.screens[1].traits = traits;\n    return layout;\n};\n\nexport const layouts = {\n  mixedSpeciesMatch,\n  speciesRevision,\n  taxonRevision,\n  nonTaxonRevision,\n  definitionRevision,\n  \n  latinToCommonMatch,\n  commonToLatinMatch,\n  textCompleteGenus,\n  multiSpecimenCommonMatch,\n  multiSpecimenLatinMatch,\n  traitPropertyMatch,\n  lookalikePropertyMatch,\n  symbioticPropertyMatch,\n  familyMatch,\n  cultivarMatch,\n  familyStripsMatch,\n  genusEntry,\n  speciesEntry,\n  speciesGenusEntry,\n  textCompleteSpecies,\n  commonEntry,\n  leafEntry,\n  glossaryTerms,\n  latinEpithets,\n  cultivars,\n  mixedSpecimenImages,\n  history,\n  summary,\n  mediaMatch,\n  mixedTraitImages,\n  providerHorizontalStrip,\n  speciesIdentificationMatch,\n  propertyTrait\n}","const specimenImages = {\n    name: 'specimen-images',\n    domain: 'collection',\n  };\n  \nconst traitImages = {\n    name: 'trait-images',\n    domain: 'bonusLayout',\n  };\n  \n  const history = { \n    name: 'history', \n    domain: 'history'\n  };\n  \n  const speciesCard = {\n    name: 'species-card',\n    domain: 'collection',\n  };\n  \n  const definitionCard = {\n    name: 'definition-card',\n    domain: 'collection'\n  };\n  \n  const scientifics = {\n    name: 'species-scientifics',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  const birdsong = {\n    name: 'birdsong',\n    domain: 'bonusLayout',\n  }\n\n  const mediaPlayers = {\n    name: 'media-players',\n    domain: 'collection',    \n  }\n  \n  const vernaculars = {\n    name: 'species-vernaculars',\n    domain: 'collection',\n    taxon: 'name'\n  };\n  \n  const text = {\n    name: 'text-entry',\n    domain: 'collection'\n  };\n  \n  const textComplete = {\n    name: 'text-complete',\n    domain: 'collection',\n    question: 'Complete the latin name',\n  };\n  \n  const summary = { \n    name: 'summary', \n    domain: 'history' \n  };\n  \n  const mixedSpecimenQuestions = {\n    name: 'mixed-specimen-questions',\n    domain: 'collection'\n  };\n\n  const leaf = {\n    name: 'leaf-image',\n    domain: 'collection'\n  };\n  \n  const leafName = {\n    name: 'leaf-text',\n    domain: 'collection'\n  };\n  \n  const epithets = {\n    name: 'epithet',\n    domain: 'collection'\n  };\n  \n  const definitions = {\n    name: 'definition',\n    domain: 'bonusLayout'\n  };\n  \n  const family = {\n    name: 'family',\n    domain: 'collection'\n  };\n  \n  const familyStrips = {\n    name: 'family-strips',\n    domain: 'collection'\n  };\n  \n  const taxon = {\n    name: 'taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxon = {\n    name: 'non-taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxonSpecimenTiles = {\n    name: 'non-taxon-specimen-tiles',\n    domain: 'collection'\n  };\n  \n  const cultivarCard = {\n    name: 'cultivar-card',\n    domain: 'collection'\n  };\n  \n  const cultivar = {\n    name: 'cultivar-match',\n    domain: 'collection'\n  };\n\n  const specimenCommonMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'vernacular'\n  };\n  \n  const specimenLatinMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'binomial'\n  };\n  \n  const traitProperty = {\n    name: 'trait-property',\n    domain: 'bonusLayout'\n  };\n  \n  const lookalikeProperty = {\n    name: 'lookalike-property',\n    domain: 'bonusLayout'\n  };\n  \n  const symbioticProperty = {\n    name: 'symbiotic-property',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensLeft = {\n    name: 'mixed-specimen-images',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensRight = {\n    name: 'mixed-specimen-question',\n    domain: 'collection'\n  };\n  \n  const mixedTraitLeft = {\n    name: 'mixed-trait-images',\n    domain: 'collection'\n  };\n\n  const mixedTraitRight = {\n    name: 'mixed-trait-question',\n    domain: 'collection'\n  };\n\n  const providerHorizontalStripQuestions = {\n    name: 'provider-horizontal-strip-questions',\n    domain: 'collection'\n  };\n\n    \n  const speciesIdentification = {\n    name: 'species-identification',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  \n  export const panels = {\n    specimenImages,\n    history,\n  \n    speciesCard,\n    definitionCard,\n    scientifics,\n    vernaculars,\n    text,\n    summary,\n\n    leaf,\n    leafName,\n  \n    epithets,\n    definitions,\n    family,\n    familyStrips,\n    \n    taxon,\n    nonTaxon,\n    nonTaxonSpecimenTiles,\n    textComplete,\n    cultivarCard,\n    cultivar,\n  \n    specimenCommonMatch,\n    specimenLatinMatch,\n    traitProperty,\n    lookalikeProperty,\n    symbioticProperty,\n    \n    mixedSpecimenQuestions,\n\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n\n    birdsong,\n    mediaPlayers,\n    traitImages,\n\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification\n  };","import { contains, flatten } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { utils } from 'utils/utils';\n\nimport { roundHandler } from \"snapdragon-engine/round-plan-handler\";\nimport { bonusHandler } from 'snapdragon-engine/bonus/bonus-test-handler';\nimport { providerHandler } from 'snapdragon-engine/provider/provider-test-handler';\nimport { mixedTraitHandler } from 'ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const createNextRound = (lessonPlan, nextRoundLayoutTemplates, progressScreens, collection, lesson) => {\n\n    const init = async () => {\n    \n        lessonPlan.layouts = [];\n\n        const moduleSize = lesson.moduleSize;\n        const lessonName = lesson.name;\n        const levelName = lesson.level.name;\n        const itemsCountToDate = (lesson.currentRound - 1) * moduleSize;\n        const itemsLeft = collection.items.length - itemsCountToDate;\n\n        const layoutsToAdd = moduleSize > itemsLeft ? itemsLeft : moduleSize;\n        const roundItemNames = roundHandler.getRoundItems(lesson.currentRound, moduleSize, collection.items.map(i => i.name));\n\n        nextRoundLayoutTemplates.forEach( async (layout, index) => {\n            let itemIndex = 0;\n            do {\n                if(layout.name === 'mixed-trait-images') {\n                    \n                    const item = collection.items.find(i => i.name === roundItemNames[itemIndex]);\n\n                    const { requiredTraitValues, trait } = mixedTraitHandler.getMatchingTrait(utils.shuffleArray(layout.screens[1].traits), item.traits);\n\n                    if(!trait) return;\n\n                    const { traits, requiredTraits } = await mixedTraitHandler.fetchTraits(trait, requiredTraitValues, collection.glossary);\n\n                    if(!requiredTraits || !traits) return;\n\n                    layout.trait = trait;\n                    layout.traits = traits;\n                    layout.requiredTraits = requiredTraits;\n\n                    const traitsToIgnore = [ 'n/a', 'none' ];\n                    const addLayout = !!requiredTraits.find(t => !contains(t.term.toLowerCase(), traitsToIgnore));\n\n                    if(addLayout) {\n                        lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                    }\n        \n                } else {\n                    lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                }\n\n                itemIndex++;\n                \n            } while (itemIndex < layoutsToAdd);\n        });\n\n        if(lesson.level.id === 1) {\n            let providerQuestions = await providerHandler.getLayouts(collection, roundItemNames);\n                providerQuestions = flatten(providerQuestions).filter(layout => layout);\n\n            let providerLayouts = providerQuestions.map(provider => {\n                return { ...L.providerHorizontalStrip, lessonName:\"Lesson 1\", levelName:\"Level 1\", speciesName: provider.name || provider.taxon, provider };\n            });\n\n            if(providerLayouts) {\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...providerLayouts ];\n            }\n        }\n\n        const bonusLayouts = lessonPlan.layouts.filter(layout => layout.bonus);\n\n        let lessonLayouts = lessonPlan.layouts.filter(layout => !layout.bonus).map((layout, i) => {\n            layout.itemIndex = layout.itemIndex === undefined ? utils.calcItemIndex(itemsCountToDate, layoutsToAdd, i) : layout.itemIndex;\n            return { ...layout };\n        });\n\n        const itemIndices = [ ...new Set(lessonPlan.layouts.map(layout => layout.itemIndex).filter(i => i !== undefined)) ];\n        \n        lessonPlan.layouts = lessonLayouts;\n\n        if(lesson.level.id === 1) {\n\n            if(bonusLayouts) {\n                const bonusTests = await bonusHandler.getTests(collection, itemIndices, bonusLayouts, lessonName, levelName);\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...bonusTests ];\n            }\n        }\n\n        lessonLayouts = lessonPlan.layouts.map((layout, i) => {\n            layout.roundProgressIndex = i + 1;\n            return { ...layout };\n        });\n\n        const summaryLayout = lessonPlan.portrait \n            ? {\n                name: 'summary',\n                screens: [{ \n                    name: 'summary', \n                    domain: 'history', \n                    parent: DOM.rightBody\n                }],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            }\n            : {\n                name: 'summary',\n                screens: [...progressScreens],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            };\n\n        // lessonPlan.layouts.push(summaryLayout);\n\n        lessonPlan.layouts.push({\n            name: 'summary',\n            screens: [{ \n                name: 'summary', \n                domain: 'history', \n                parent: DOM.rightBody\n            }],\n            lessonName,\n            levelName,\n            layoutIndex: lessonPlan.layouts.length,\n            itemIndex: 0\n        });\n\n        const scores = lessonPlan.layouts.map(layout => layout.score || 0);\n        const roundScoreCount = scores.reduce((accumulator, currentValue) => accumulator + currentValue);\n\n        lessonPlan.layouts.map(layout => layout.roundScoreCount = roundScoreCount);\n\n        lesson.questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n        lesson.layoutCount = lessonPlan.layouts.length;\n        lesson.layoutNames = lessonPlan.layouts.map(layout => layout.name);\n\n        return { updatedLessonPlan: lessonPlan, updatedCollection: collection, updatedLesson: lesson };\n    }\n\n    return init();\n};\n","export const getNextRoundLayouts = (lessonPlan, config, lesson) => {\n\n    // All layouts are currently activated because the lesson edit function is not in use.\n\n    lesson.activeLevelCount = lessonPlan.levels.filter(level => level.layouts.length > 0).length;\n\n    const getCurrentLevelFromLessonPlan = (lessonPlan, levelId) => {\n        return lessonPlan.levels.find(level => level.id === levelId);\n    }\n    \n    const getLayouts = (currentLevel, mode) => {    \n        switch(mode) {\n            case 'learn':\n                currentLevel.bonusLayouts = currentLevel.bonusLayouts || [];\n                return [ ...currentLevel.layouts.filter(l => l), ...currentLevel.bonusLayouts ];\n            case 'review':\n                return currentLevel.reviewLayouts || [];\n            default:\n                return currentLevel.layouts;\n        }\n    };\n\n    const goToNextLevelThatHasLayouts = (lessonPlan, levelId) => {\n\n        let layouts = [], lessonName = '', levelName = '';        \n        \n        const iterateOverLevelsCheckingForAvailableLayouts = (intialValue, levelId) => {\n            \n            let increment = intialValue;\n\n            if(layouts.length > 0) return;\n\n            const level = lessonPlan.levels.find(level => level.id === levelId + increment);\n\n            if(!level) return;\n            \n            lesson.level = level;\n\n            lesson.level = level;\n            lessonName = lesson.name;\n            levelName = lesson.level.name; // sometimes returns null (when at final level, looking for next?)\n            layouts = getLayouts(getCurrentLevelFromLessonPlan(lessonPlan, levelId + increment), config.mode);\n\n            increment++;\n\n            iterateOverLevelsCheckingForAvailableLayouts(increment, levelId);\n        }     \n        \n        iterateOverLevelsCheckingForAvailableLayouts(0, levelId);\n\n        return { lessonName, levelName, layouts };\n    }\n\n    let levelId = lesson.level.id;\n\n    if(lesson.isLevelComplete) {\n        levelId++;\n        lesson.level = lessonPlan.levels.find(level => level.id === levelId);\n    }\n\n    const { layouts } = goToNextLevelThatHasLayouts(lessonPlan, levelId);\n\n    return layouts;\n};","import { createNextRound } from 'snapdragon-engine/round-planner';\nimport { layouts } from 'snapdragon-config/screen-layouts';\nimport { getNextRoundLayouts } from 'snapdragon-engine/lesson-plan-handler';\n\nconst { summary, history } = layouts;\n\nconst createLessonPlan = async (lessonPlan, config, collection, lesson) => {\n\n    lesson.moduleSize = lesson.moduleSize || collection.moduleSize || config.moduleSize;\n    lesson.currentRound = lesson.currentRound || 1;\n\n    let rounds = collection.items.length / lesson.moduleSize;            \n        rounds = collection.items.length % lesson.moduleSize === 0 ? rounds : rounds === 1 ? 1 : Math.floor(rounds) + 1;\n\n    lesson = lesson.level === undefined \n            ? { ...lesson, ...lessonPlan, level: { id: 1 }, rounds } \n            : lesson;\n\n    const nextRoundLayoutTemplates = getNextRoundLayouts(lessonPlan, config, lesson);\n\n    if(lesson.level === undefined) {\n        return new Promise(resolve => resolve(null));\n    }\n\n    return await createNextRound(\n        lessonPlan,\n        nextRoundLayoutTemplates, \n        [ summary, history ],\n        collection,\n        lesson\n    );        \n};\n\nexport const lessonPlanner = {\n    createLessonPlan\n}","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeCustom = {\n    id: 1,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeCustom2 = {\n    id: 2,\n    name:'Lesson 2',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeFungi = {\n    id: 3,\n    name:'Lesson 3',\n    portrait: false,\n    default: false,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape']),\n                        L.propertyTrait(L.mixedTraitImages, ['gillAttachment']),\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        },\n    ]\n};\n\nexport const landscapeLichens = { ...clone(landscapeFungi), id: 4 };\nlandscapeLichens.levels[0] = { \n    id: 1,\n    name:'Level 1',\n    description: 'Species recognition',\n    layouts: [                          \n        L.mixedSpecimenImages\n    ],\n    // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n    // reviewLayouts: [ L.multiSpecimenCommonMatch, L.mixedSpecimensRight ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeStatic = {\n    id: 10,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticTaxonGroup = {\n    id: 11,\n    name:'Lesson 11',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages,\n                        L.speciesIdentificationMatch,\n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, \n                        L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                    ],\n            // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticProviderQuestionsOnly = {\n    id: 12,\n    name:'Lesson 12',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [],\n            bonusLayouts: []\n        }\n    ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const portraitStatic = {\n    id: 110,\n    name:'Lesson 110',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const portraitStaticTaxonGroup = {\n    id: 111,\n    name:'Lesson 111',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nimport { landscapeCustom } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeCustom2 } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeFungi, landscapeLichens } from 'snapdragon-config/plans/landscape/landscape-fungi';\n\nimport { landscapeStatic, landscapeStaticTaxonGroup, landscapeStaticProviderQuestionsOnly } from 'snapdragon-config/plans/landscape/landscape-static';\nimport { portraitStatic, portraitStaticTaxonGroup } from 'snapdragon-config/plans/portrait/portrait-static';\n\nconst landscapeBirds = { ...clone(landscapeStatic), id: 5 };\n      if(landscapeBirds.levels[0].bonusLayouts) landscapeBirds.levels[0].bonusLayouts[0].types.push('song');\n\nconst portraitBirds = { ...clone(portraitStatic), id: 105 };\n      portraitBirds.levels[0].layouts.push(L.mediaMatch); \n\nconst portraitFungi = { ...clone(landscapeFungi), id: 103, portrait: true };\n      portraitFungi.levels[0].bonusLayouts = [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ];\n\nconst portraitLichens = { ...clone(landscapeLichens), id: 104, portrait: true };\nconst portraitCustom = { ...clone(landscapeCustom), id: 101, portrait: true };\nconst portraitCustom2 = { ...clone(landscapeCustom2), id: 102, portrait: true };\n\nexport const lessonPlans = [\n\n    landscapeCustom,\n    landscapeCustom2,\n    landscapeStatic,\n    landscapeStaticTaxonGroup,\n    landscapeStaticProviderQuestionsOnly,\n    landscapeFungi,    \n    landscapeLichens,\n    landscapeBirds,\n    \n    portraitCustom,\n    portraitCustom2,\n    portraitStatic,\n    portraitStaticTaxonGroup,    \n    portraitFungi,    \n    portraitLichens,\n    portraitBirds,\n    \n];","import { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nconst isRequired = (step, args) => {\n\n    const { layout, counter, lessonPlan, config, lesson, collection } = args;\n\n    let required = false;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            required = layout && !layout.bonus;\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            if(counter.isLessonPaused) {\n                required = false;\n            } else {\n                required = lessonPlan && lessonPlan.layouts;\n                required = required && lessonPlan.layouts[counter.index] !== null;\n            }\n            break;\n        case enums.nextStep.NEXT_LESSON:\n            required =      (config.collection.id > 0 && !counter.isLessonPaused) // new lesson\n                        ||  (config.collection.id > 0 && config.collection.id !== collection.id); // new lesson from new collection\n            break;\n        case enums.nextStep.NEXT_ROUND:\n            required = counter.index === 0 && lesson.isNextRound && collection.items && collection.items.length > 0;\n            break;\n    }\n\n    return required;\n};\n\nconst actionUpdate = (step, args) => {\n\n    const { layout, config, asyncFunc } = args;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            actions.boundNextItem(layout.itemIndex);\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            actions.boundNextLayout(layout);\n            subscription.addSubs(layout, config);\n            lessonStateHandler.changeRequest({\n                requestType: enums.lessonState.SAVE_LESSON_PROGRESS,\n            });\n            break;\n        case enums.nextStep.NEXT_LESSON:\n            actions.boundNextLesson(asyncFunc);\n            break;\n    }\n}\n\nexport const setupHandler = {\n    isRequired,\n    actionUpdate\n}","import{ clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { lessonPlanner } from 'snapdragon-engine/lesson-planner';\nimport { lessonPlans } from 'snapdragon-config/lesson-plans';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\n\nexport const nextLesson = counter => {\n\n    const { layout, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, config, lesson, collection };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_LESSON, args)) {\n\n        const planId = config.isPortraitMode ? collection.lessonPlanPortrait : collection.lessonPlanLandscape;    \n        const lessonPlan = clone(lessonPlans.find(plan => plan.id === planId && plan.portrait === config.isPortraitMode));\n\n        args.lessonPlan = lessonPlan;\n\n        if(setupHandler.isRequired(enums.nextStep.NEXT_ROUND, args)) {\n\n            // asyncFunc will return collection, lessonPlan and lesson\n\n            const asyncFunc = lessonPlanner.createLessonPlan(lessonPlan, config, clone(collection), clone(lesson)).then(props => {\n                if(!props) return;\n                return { lessonPlan: props.updatedLessonPlan, collection: props.updatedCollection, lesson: props.updatedLesson };\n            });\n\n            if(asyncFunc === null) return;\n\n            setupHandler.actionUpdate(enums.nextStep.NEXT_LESSON, { asyncFunc });\n        }\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextLayout = counter => {\n\n    const { layout, lessonPlan, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection };\n\n    const isRequired = setupHandler.isRequired(enums.nextStep.NEXT_LAYOUT, args);\n\n    if(isRequired) {\n        const nextLayout = lessonPlan.layouts[counter.index];\n        setupHandler.actionUpdate(enums.nextStep.NEXT_LAYOUT, { layout: nextLayout, config });\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextItem = layout => {\n\n    const { counter, lessonPlan, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_ITEM, args)) {\n        setupHandler.actionUpdate(enums.nextStep.NEXT_ITEM, { layout });\n    }\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\n\nexport const renderHeaders = collection => {\n\n    DOM.leftHeaderTxt.innerHTML = 'Learn the planet';\n    DOM.rightHeaderTxt.innerHTML = 'Learn the planet';\n\n    setTimeout(() => {\n        \n        const { layout, lessonPlan } = store.getState();\n        const progressBar = document.querySelector('.js-right-grid progress');\n\n        if(lessonPlan) {\n\n            const questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n            progressBar.max = questionCount;\n            progressBar.value = layout.roundProgressIndex || progressBar.value;\n        }\n    });\n};","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\n\nexport const renderScore = score => {\n    \n    const { history, collection, config, layout, lesson, lessonPlan } = store.getState();\n\n    score.mode = config.mode;\n\n    if(!layout) return;\n\n    if(score.total === layout.roundScoreCount) {\n        actions.boundUpdateHistory(score);\n    }\n};","import { subscription } from 'redux/subscriptions';\nimport { store } from 'redux/store';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\n\nexport const renderHome = (counter, forceIntroDisplay = false) => {\n    \n    subscription.remove(subscription.getByName('renderHome'));\n    \n    const isFirstTimeVisitor = cookieHandler.setFirstTimeVisitorCookie();\n\n    if(counter.index > 0 && !counter.isLessonPaused) return;\n\n    let { config } = store.getState();\n\n    if(config.isLandscapeMode || forceIntroDisplay) {\n        renderLessons();\n    }\n\n    if(config.isPortraitMode && !isFirstTimeVisitor) {\n        renderLessons();\n    }\n};\n","import { clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { getIPLocation } from 'geo/geo';\n\nexport const initialiseConfig = async originalConfig => {\n\n    const config = clone(originalConfig);\n\n    const observableMonths = utils.getObservableMonths(new Date(), 3);\n\n    config.season = { observableMonths };\n    config.guide.season.observableMonths = observableMonths;\n    config.guide.season.type = config.guide.season.type || 'all_year';\n\n    config.collection.id = config.collection.id || 0; \n    config.guide.locationPlace = '';\n    config.guide.place.type = '';\n    \n    try {\n        \n        const ipLocation = await getIPLocation(config);\n        \n        if(ipLocation) {\n            const location = ipLocation.city ? `${ipLocation.city}, ${ipLocation.country_name}` : ipLocation;\n            config.ipLocation = location;\n            config.guide.locationType = 'longLat';\n            config.guide.locationLongLat = location;\n            config.guide.place.name = location;\n            config.guide.coordinates = {\n                lat: ipLocation.latitude,\n                long: ipLocation.longitude\n            }; \n        }\n        else {\n            config.guide.locationPlace = 'Earth';\n            config.guide.locationType = 'place';\n            config.guide.place = { id: 'any', name: 'Earth' };\n        }\n\n    } catch(e) {            \n        config.guide.locationPlace = 'Earth';\n        config.guide.locationType = 'place';\n        config.guide.place = { id: 'any', name: 'Earth' };\n    }    \n\n    return config;\n}","import { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nconst onCloseModal = () => {\n\n    const modal = document.querySelector('#lessonModal');\n    const closer = modal.querySelector('.js-modal-footer');\n          closer.addEventListener('click', e => {\n            const contents = modal.querySelector('.js-modal-text');\n                  contents.innerHTML = `\n                    <div class=\"lesson-spinner double-centred-block\">\n                        <div class=\"icon\"><i class=\"fas fa-sun slow-spin\"></i></div>\n                    </div>\n                  `;\n            // renderLessons();\n            // const activeLesson = document.querySelector('.highlighted-for-review-row');\n            // lessonListScrollHandler.scrollToTitle(activeLesson.dataset.lessonId);\n          });\n\n      // remove subscriptions? e.g. renderScoreSummary\n\n};\n\nexport const lessonModalHandler = {\n    onCloseModal\n};","import { renderTemplate } from 'ui/helpers/templating';\n\nimport modalsTemplate from 'modals.html';\n\nimport { library, dom } from '@fortawesome/fontawesome-svg-core'\n\nimport { faBookOpen, faLanguage, faEnvelope, faUserSlash, faUserCheck, faCog, faChevronDown, faGlasses, faDove, faFrog, faPaw, faBug, faLeaf, faBarcode, faSun, faRegistered, faChevronUp, faChalkboard, faTimes, faTimesCircle, faCheck, faExternalLinkAlt, faExclamation, faClone, faCopyright, faSlidersH, faUndo } from '@fortawesome/free-solid-svg-icons'; // fas\nimport { faArrowAltCircleLeft, faArrowAltCircleRight, faRegistered as faRegisteredFar } from '@fortawesome/free-regular-svg-icons'; // far\nimport { faYoutube } from '@fortawesome/free-brands-svg-icons'; // fab\n\n// https://fontawesome.com/v5.9.0/how-to-use/with-the-api/setup/library/\n\nlibrary.add(\n  faBookOpen, faLanguage, faEnvelope, faUserSlash, faUserCheck, faCog, faChevronDown, faGlasses, faDove, faFrog, faPaw, faBug, faLeaf, faRegistered, faBarcode, faSun, faChevronUp, faChalkboard, faTimes, faTimesCircle, faCheck, faExternalLinkAlt, faExclamation, faClone, faCopyright, faSlidersH, faUndo,\n  faArrowAltCircleLeft, faArrowAltCircleRight, faRegisteredFar,\n  faYoutube\n)\n\ndom.watch();\n\nexport const handleWindowResize = () => {\n\n  const setWindowHeight = () => {\n\n      const iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream; \n      const iw = (iOS) ? screen.width : window.innerWidth; \n      const ih = (iOS) ? screen.height : window.innerHeight;\n\n      const verticalHeight = window.innerHeight * 0.01;                \n\n      document.documentElement.style.setProperty('--vh', verticalHeight + 'px');\n      document.documentElement.style.setProperty('--vhGrid', verticalHeight * 100  + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlock', (verticalHeight * 7.5) + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlocks', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhStandardBlock', (verticalHeight * 10) + 'px');\n      document.documentElement.style.setProperty('--vhHalfStandardBlock', (verticalHeight * 5) + 'px');\n      document.documentElement.style.setProperty('--vhOneAndHalfStandardBlock', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhDoubleStandardBlock', (verticalHeight * 20) + 'px');\n      document.documentElement.style.setProperty('--vhCarousel', (verticalHeight * 30) + 'px');\n      document.documentElement.style.setProperty('--vhButtonBlock', (verticalHeight * 9) + 'px');\n      document.documentElement.style.setProperty('--vhRow', (verticalHeight * 11) + 'px');\n      document.documentElement.style.setProperty('--vhFixtures', (verticalHeight * 15) + 5 + 'px');\n      document.documentElement.style.setProperty('--vhCalendar', (verticalHeight * 11) + 'px');                \n\n      const fixtures = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhFixtures').replace('px', ''));\n      const largeImage = ((verticalHeight * 100) - fixtures) / 3;\n\n      document.documentElement.style.setProperty('--vhLargeImage', largeImage + 'px');\n      document.documentElement.style.setProperty('--vhSmallImageCarousel', verticalHeight * 36 + 'px');           \n      document.documentElement.style.setProperty('--vhExtraSmallImageCarousel', verticalHeight * 36    + 'px');           \n\n      const horizontalWidth = window.innerWidth * 0.01;\n\n      document.documentElement.style.setProperty('--vw', horizontalWidth + 'px');\n\n      document.documentElement.style.setProperty('--vwGrid', horizontalWidth * 100  + 'px');\n      document.documentElement.style.setProperty('--vwGridNegative', (horizontalWidth * -100) + 52  + 'px');\n      document.documentElement.style.setProperty('--vhScrollingTop', (horizontalWidth * 56.25) + (verticalHeight * 10) + 'px');\n  };\n\n  setWindowHeight();\n\n  window.addEventListener('resize', () => {\n      setWindowHeight();\n  });\n\n  if(window.location.origin.indexOf('learn-the-planet') > -1) {\n     snapLog('*** Live site detected ***');\n      if(window.location.protocol != 'https:') {\n          location.href =  location.href.replace(\"http://\", \"https://\");\n         snapLog(' *** Site secured ***');\n      }\n  }\n};\n\nexport const loadModalHTML = () => {\n\n  const template = document.createElement('template');\n        template.innerHTML = modalsTemplate;\n\n  const parent = document.querySelector('body');\n\n  renderTemplate({}, template.content, parent);\n};","// https://developer.mozilla.org/en-US/docs/Web/API/console#Outputting_text_to_the_console\n\n// import { object } from \"firebase-functions/lib/providers/storage\";\n\nexport const snapLog = (msg, obj) => {\n\n  // console.log('SECRET_KEY: ', process.env.SECRET_KEY);\n\n  let css = 'background: #222; color: #bada55; padding: 5px; margin-right: 5px;';\n  if(Array.isArray(obj)) obj = { obj };\n  obj \n    ? console.log(`%c${msg} %o`, css, obj)\n    : console.log(`%c${msg}: ${obj}`, css)\n};\n\nexport const logError = (source, e) => {\n  let css = 'background: #222; color: #fff; padding: 5px; margin-right: 5px;';\n  let output;\n  if(Array.isArray(source)) source = { source };\n  // if(source === typeof(object)) {\n  //   output = `%cError: ${e.message} at %o`;\n  //   console.log(output, source, css);\n  // } else {\n  //   output = `%cError: ${e.message} at ${source}`;\n  //   console.log(output, css);\n  // }\n};\n\nexport const logAPIError = (call, e) => {\n  let source = `Firebase ${call} error`;\n  logError(source, e);\n};","import \"babel-polyfill\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport 'bootstrap/js/dist/carousel';\nimport 'bootstrap/js/dist/modal';\nimport 'bootstrap/js/dist/dropdown';\nimport 'bootstrap/js/dist/collapse';\n\nimport 'ui/css/snapdragon-colours.css';\nimport 'ui/css/snapdragon.css';\nimport 'ui/css/common.css';\nimport 'ui/css/species-list.css';\nimport 'ui/css/snapdragon-media.css';\n\nimport { utils } from 'utils/utils';\nimport { store, persistor } from 'redux/store';\nimport { nextLesson } from 'ui/setup/next-lesson';\nimport { nextLayout } from 'ui/setup/next-layout';\nimport { nextItem } from 'ui/setup/next-item';\nimport { renderHeaders } from 'ui/fixtures/headers';\nimport { renderScore } from 'ui/fixtures/score';\nimport { renderHome } from 'ui/screens/home/home';\nimport { renderNavigation, renderLoginChanges } from 'ui/fixtures/navigation';\nimport { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { traitValuesHandler } from 'api/traits/trait-types';\nimport { initialiseConfig } from 'ui/helpers/location-helper';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderLoggedIn } from 'ui/fixtures/login';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { lessonModalHandler } from 'ui/screens/cards/test-card-modal-handler';\nimport { handleWindowResize, loadModalHTML } from 'media-helper';\nimport { snapLog, logError, logAPIError } from 'ui/helpers/logging-handler';\nimport * as Sentry from '@sentry/browser';\n\nconst onLoadHandler = () => {\n\n    setTimeout( async () => {\n\n      Sentry.init({ dsn: 'https://9d9d8654a6a345a3af09df89cb615bde@o136894.ingest.sentry.io/302756' });\n\n      handleWindowResize();      \n\n      const purgeData = cookieHandler.hasUserBeenAwayTooLong();\n\n      if(purgeData) {\n          persistor.purge();\n          window.location.reload(true);\n      } else {\n        const lastVisitedCookie = cookieHandler.setLastVisitedCookie(Date());\n      }\n\n      let lessonPlan;\n\n      try {\n\n          const { config, counter: currentCounter, lessonPlan: statePlans, collections } = store.getState();\n\n          lessonPlan = statePlans;\n\n          config.isPortraitMode = window.matchMedia(\"(max-width: 767px)\").matches;\n          config.isLandscapeMode = !config.isPortraitMode;\n\n          const counter = currentCounter ? { ...currentCounter } : { index: null, isLessonPaused: true };\n\n          actions.boundUpdateConfig(config);\n          actions.boundStopStartLesson(counter);\n\n          if(collections && collections.length === 0) {\n              const cloudCollections = await firestore.getCollections();\n              actions.boundUpdateCollections(cloudCollections);\n          }\n\n          subscription.add(renderHeaders, 'collection', 'flow');\n          renderNavigation();\n          subscription.add(renderNavigation, 'collection', 'flow');\n          renderLoginChanges();\n          subscription.add(renderLoginChanges, 'user', 'flow');\n          subscription.add(renderLoggedIn, 'user', 'flow');\n\n          subscription.add(renderHome, 'counter', 'flow'); // avoid adding as listener on page refresh\n                  \n          subscription.add(nextItem, 'layout', 'flow');\n          subscription.add(nextLesson, 'counter', 'flow');\n          subscription.add(nextLayout, 'counter', 'flow');\n          subscription.add(renderScore, 'score', 'flow');\n          subscription.add(traitValuesHandler, 'config', 'localisation');\n\n          const updateConfig = async () => {\n              const initialisedConfig = await initialiseConfig(config);\n              actions.boundUpdateConfig(initialisedConfig);\n          };\n\n          if(!config.guide.locationType) {\n              updateConfig();\n          }\n\n          let glossary = await firestore.getDefinitionsByTaxa(['common', 'plantae', 'aves', 'fungi', 'insecta']);\n              glossary = utils.sortAlphabeticallyBy(glossary, 'term');\n          actions.boundCreateGlossary(glossary);\n\n          loadModalHTML();\n          lessonModalHandler.onCloseModal();\n\n      }\n      catch(e) {\n          console.log('home page error: ', e)\n          // persistor.purge();\n          // window.location.reload(true);        \n      }\n    });\n\n    window.snapLog = snapLog;\n    window.logError = logError;\n    window.logAPIError = logAPIError;\n\n};\n\nonLoadHandler();","import{ contains, flatten } from 'ramda';\nimport { utils } from 'utils/utils';\n\nlet root = '';\n\nconst formatUrl = (name, root, encode) => {\n    let binomial = name;\n    if(name.indexOf(' ') > 0) {\n        let ranks = name.split(' ');\n        binomial = ranks[0] + ' ' + ranks[1];\n        if(binomial.indexOf('Speckled wood') > -1) {\n            binomial += ' ' + ranks[2];\n        }\n    }    \n    return root + encode(binomial);\n};\n\nasync function fetchWiki(name, missingMessage) {\n    \n    if(name === undefined) {\n        return missingMessage;  \n    }\n\n    const url = formatUrl(name, root, utils.encodeQuery);\n    const config = { \n        method: 'GET'\n    };\n    \n    try { \n        const response = await fetch(url, config);\n        const data = await response.json();        \n        return flatten(data);        \n    } catch (e) {\n        const errorPromise = new Promise((resolve, reject) => {\n            resolve(missingMessage)\n        });\n        return errorPromise;\n    }    \n};\n\nconst cleanEntry = str => {\n    let cleaned = str;\n    cleaned = cleaned.replace('( or UK: , US: )', '');\n    cleaned = cleaned.replace('(;', '(');\n    cleaned = cleaned.replace('()', '');\n    cleaned = cleaned.replace('( ', '(');\n    cleaned = cleaned.replace('  ', ' ');\n    return cleaned;\n};\n\nconst wikiLink = entry => {\n    const src = cleanEntry(entry).replace('.wikipedia', '.m.wikipedia');\n    return `<span data-toggle=\"modal\" data-target=\"#wikiModal\" data-src=\"${src}\" class=\"underline-link\">Wiki modal</span>`;    \n};\n\nconst formatWiki = (entry) => {\n\n    const exceptions = ['Tarragon', 'Apple'];\n\n    if(contains(entry[0], exceptions)) {\n        return `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    }\n\n    if(!entry) return '';\n    let html = '';\n    if(entry.length === 1) {\n        html += wikiLink(entry[0]);\n    }\n    if(entry[1]) html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[1])}'</li>`;\n    if(entry[2])\n        if(entry[2].indexOf('https')!== -1) html += wikiLink(entry[2]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    if(entry[3]) \n        if(entry[3].indexOf('https')!== -1)\n        html += wikiLink(entry[3]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[3])}'</li>`;\n    return html;\n};\n\nasync function renderWiki(wikiNode, item, language) {\n    const binomial = item.name;\n    const wikiSearchTerm = item.names ? item.names.filter(name => name.language === language).find(name => name.wikiSearchTerm) : null;\n    const searchTerm = wikiSearchTerm ? wikiSearchTerm.vernacularName : (item.searchTerms \n                            ? item.searchTerms.filter(term => term.language === language)[0].searchTerm \n                            : binomial);\n    root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=1&search=`;\n    const exceptions = [ 'Artemisia dracunculus', 'Malus domestica', 'Zingiber officinale'];\n    if(contains(item.name, exceptions)) {\n        root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=2&redirects=resolve&search=`;\n    }    \n    wikiNode.innerHTML = \"\";\n\n    const entry = await fetchWiki(searchTerm);\n\n    if(entry && entry[2]) {\n        wikiNode.innerHTML = formatWiki(entry.slice(1));\n    } else {\n        if(!binomial) return '';\n        const genus = binomial.split(' ')[0];\n        const genusEntry = await fetchWiki(genus);\n        if(genusEntry[2] !== '')\n            wikiNode.innerHTML = formatWiki(genusEntry.slice(1));\n        else if (language !== 'en') {\n            renderWiki(wikiNode, binomial, 'en');\n        }\n    }\n}\n\nexport {\n    formatUrl, \n    formatWiki,\n    renderWiki\n};"],"sourceRoot":""}