{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/utils.js","webpack:///./src/ui/screens/common/audio-media-template.html","webpack:///./src/ui/screens/lists/lesson-template.html","webpack:///./src/ui/screens/landscape/specimen-tiles-template.html","webpack:///./src/ui/screens/common/image-slider-template.html","webpack:///./src/ui/screens/common/rights-attribution-template.html","webpack:///./src/ui/screens/common/look-alikes-link-template.html","webpack:///./src/ui/screens/common/linked-taxa-lookalike-template.html","webpack:///./src/ui/screens/common/linked-taxa-relationship-template.html","webpack:///./src/ui/screens/common/id-box-template.html","webpack:///./src/ui/screens/common/info-detail-slider-template.html","webpack:///./src/ui/screens/common/info-slider-template.html","webpack:///./src/ui/screens/common/inat-box-template.html","webpack:///./src/ui/screens/common/calendar-template.html","webpack:///./src/ui/screens/common/taxa-box-template.html","webpack:///./src/ui/screens/common/badge-template.html","webpack:///./src/ui/screens/cards/card-template.html","webpack:///./src/ui/screens/cards/taxon-card-template.html","webpack:///./src/ui/screens/cards/non-taxon-card-template.html","webpack:///./src/ui/screens/lists/species-table-template.html","webpack:///./src/ui/screens/home/home-lesson-intro-video-template.html","webpack:///./src/ui/screens/lists/species-list-definition-insert.html","webpack:///./src/ui/screens/progress/score-summary-template.html","webpack:///./src/ui/screens/progress/score-summary-row-template.html","webpack:///./src/ui/screens/progress/score-summary-no-row-template.html","webpack:///./src/ui/screens/cards/test-card-template.html","webpack:///./src/ui/screens/common/language-selection-template.html","webpack:///./src/ui/create-guide-modal/species-search-options-template.html","webpack:///./src/ui/create-guide-modal/location-template.html","webpack:///./src/ui/create-guide-modal/inat-user-template.html","webpack:///./src/ui/create-guide-modal/categories-template.html","webpack:///./src/ui/create-guide-modal/species-in-guide-editor-template.html","webpack:///./src/ui/create-guide-modal/species-editor-template.html","webpack:///./src/ui/create-guide-modal/species-picker-template.html","webpack:///./src/ui/create-guide-modal/species-search-template.html","webpack:///./src/ui/create-guide-modal/species-summary-template.html","webpack:///./src/ui/create-guide-modal/common/actions-template.html","webpack:///./src/ui/fixtures/glossary-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-filters-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-questions-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-summary-template.html","webpack:///./src/ui/screens/lists/lesson-list-header-template.html","webpack:///./src/ui/screens/home/home-lesson-intro-text-template.html","webpack:///./src/ui/screens/lists/lesson-edit-template.html","webpack:///./src/ui/screens/lists/lesson-list-template.html","webpack:///./src/ui/fixtures/settings-template.html","webpack:///./src/ui/fixtures/login-template.html","webpack:///./src/ui/fixtures/logout-template.html","webpack:///./src/ui/fixtures/language-template.html","webpack:///./src/ui/fixtures/navigation-portrait-template.html","webpack:///./src/ui/fixtures/navigation-left-template.html","webpack:///./src/ui/fixtures/navigation-right-template.html","webpack:///./src/ui/screens/text-entry/text-entry-templates.html","webpack:///./src/ui/screens/text-entry/text-entry-portrait-templates.html","webpack:///./src/ui/screens/multichoice/multi-strips-template.html","webpack:///./src/ui/screens/multichoice/multi-strips-with-images.html","webpack:///./src/ui/screens/text-entry/text-complete-template.html","webpack:///./src/ui/screens/cards/cultivar-card-template.html","webpack:///./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/left/mixed-trait-images-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html","webpack:///./src/ui/screens/multichoice/horizontal-strips.html","webpack:///./src/ui/fixtures/score-template.html","webpack:///./src/ui/screens/home/home-template.html","webpack:///./src/modals.html","webpack:///./src/ui/css/snapdragon-colours.css?5b4a","webpack:///./src/ui/css/snapdragon-colours.css","webpack:///./src/ui/css/snapdragon.css?662e","webpack:///./src/ui/css/snapdragon.css","webpack:///./src/ui/css/common.css?6547","webpack:///./src/ui/css/common.css","webpack:///./src/ui/css/species-list.css?1eb5","webpack:///./src/ui/css/species-list.css","webpack:///./src/ui/css/snapdragon-media.css?6f1e","webpack:///./src/ui/css/snapdragon-media.css","webpack:///./src/redux/actions/action-types.js","webpack:///./src/snapdragon-config/lesson-config.js","webpack:///./src/redux/reducers/config-reducer.js","webpack:///./src/redux/reducers/species-reducers.js","webpack:///./src/redux/reducers/initial-state/initial-progress-state.js","webpack:///./src/redux/reducers/lesson-reducers.js","webpack:///./src/redux/reducers/quick-fire-reducers.js","webpack:///./src/redux/store.js","webpack:///./src/redux/reducers/progress-reducers.js","webpack:///./src/redux/reducers/layout-reducers.js","webpack:///./src/redux/middleware/logger.js","webpack:///./src/ui/dom.js","webpack:///./src/snapdragon-engine/round-plan-handler.js","webpack:///./src/api/botanical-latin.js","webpack:///./src/ui/helpers/data-checking.js","webpack:///./src/ui/helpers/traits-handler.js","webpack:///./src/api/traits/traits-for-tests.js","webpack:///./src/snapdragon-engine/bonus/tests/trait-test.js","webpack:///./src/snapdragon-engine/bonus/tests/birdsong-test.js","webpack:///./src/admin/api/enums.js","webpack:///./src/api/firebase/firestore.js","webpack:///./src/api/firebase/credentials.js","webpack:///./src/snapdragon-engine/bonus/tests/lookalike-test.js","webpack:///./src/api/snapdragon/iconic-taxa.js","webpack:///./src/snapdragon-engine/bonus/tests/definition-test.js","webpack:///./src/snapdragon-engine/bonus/bonus-test-handler.js","webpack:///./src/snapdragon-engine/provider/provider-test-handler.js","webpack:///./src/redux/actions/action-creators.js","webpack:///./src/ui/helpers/class-behaviour.js","webpack:///./src/ui/helpers/test-handler.js","webpack:///./src/ui/helpers/enum-helper.js","webpack:///./src/ui/screens/lists/lesson-state-helper.js","webpack:///./src/ui/helpers/templating.js","webpack:///./src/ui/screens/common/rights-attribution.js","webpack:///./src/ui/screens/common/image-slider.js","webpack:///./src/ui/helpers/image-handler.js","webpack:///./src/ui/helpers/icon-handler.js","webpack:///./src/xeno-canto/birdsong.js","webpack:///./src/ui/screens/common/look-alikes.js","webpack:///./src/ui/screens/common/linked-taxa.js","webpack:///./src/ui/screens/common/info-detail-slider.js","webpack:///./src/ui/screens/common/info-slider.js","webpack:///./src/geo/geo.js","webpack:///./src/api/inat/inat.js","webpack:///./src/wikipedia/wiki-modal.js","webpack:///./src/ui/screens/common/inat-box.js","webpack:///./src/ui/screens/common/calendar.js","webpack:///./src/api/snapdragon/infraspecifics.js","webpack:///./src/ui/screens/common/taxa-box.js","webpack:///./src/ui/screens/common/badge.js","webpack:///./src/ui/screens/cards/card.js","webpack:///./src/ui/screens/cards/taxon-card.js","webpack:///./src/api/traits/trait-types.js","webpack:///./src/api/glossary/lichen.js","webpack:///./src/api/snapdragon/non-taxa.js","webpack:///./src/ui/screens/cards/non-taxon-card.js","webpack:///./src/ui/screens/lists/species-table.js","webpack:///./src/ui/screens/lists/video-handler.js","webpack:///./src/ui/screens/home/home-lesson-intro-video.js","webpack:///./src/ui/helpers/logging-handler.js","webpack:///./src/ui/screens/lists/species-list-definition-insert.js","webpack:///./src/ui/screens/lists/species-list.js","webpack:///./src/ui/helpers/collection-handler.js","webpack:///./src/ui/screens/lists/lesson-state-handler.js","webpack:///./src/ui/screens/progress/score-summary-handler.js","webpack:///./src/ui/screens/progress/score-summary.js","webpack:///./src/ui/screens/cards/test-card.js","webpack:///./src/ui/screens/common/language-selection.js","webpack:///./src/ui/helpers/inat-autocomplete.js","webpack:///./src/ui/create-guide-modal/common/snapdragon-switch.js","webpack:///./src/ui/create-guide-modal/location.js","webpack:///./src/ui/create-guide-modal/inat-user.js","webpack:///./src/snapdragon-config/snapdragon-iconic-taxa.js","webpack:///./src/ui/create-guide-modal/species-in-guide-editor.js","webpack:///./src/ui/create-guide-modal/species-editor.js","webpack:///./src/ui/create-guide-modal/species-search.js","webpack:///./src/ui/create-guide-modal/create-guide.js","webpack:///./src/ui/create-guide-modal/species-search-options.js","webpack:///./src/ui/create-guide-modal/species-picker.js","webpack:///./src/ui/create-guide-modal/categories.js","webpack:///./src/ui/create-guide-modal/common/save-guide.js","webpack:///./src/ui/quick-fire-modal/quick-fire-api.js","webpack:///./src/ui/quick-fire-modal/quick-fire-ui.js","webpack:///./src/ui/quick-fire-modal/quick-fire-logic.js","webpack:///./src/ui/quick-fire-modal/quick-fire.js","webpack:///./src/ui/screens/lists/lesson.js","webpack:///./src/ui/screens/home/home-lesson-intro-text.js","webpack:///./src/ui/screens/home/home-lesson-intro.js","webpack:///./src/ui/screens/lists/lesson-edit.js","webpack:///./src/ui/screens/lists/lesson-list-scroll-handler.js","webpack:///./src/ui/screens/lists/lesson-list-event-handler.js","webpack:///./src/ui/screens/lists/lesson-custom.js","webpack:///./src/ui/screens/lists/lesson-list.js","webpack:///./src/ui/helpers/cookie-handler.js","webpack:///./src/ui/screens/lists/lesson-list-header.js","webpack:///./src/ui/fixtures/settings.js","webpack:///./src/ui/fixtures/login.js","webpack:///./src/ui/fixtures/language.js","webpack:///./src/ui/fixtures/navigation.js","webpack:///./src/ui/screens/text-entry/text-entry.js","webpack:///./src/ui/screens/landscape/specimen-tiles.js","webpack:///./src/snapdragon-engine/pool-handler.js","webpack:///./src/ui/screens/multichoice/multi-strips.js","webpack:///./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question.js","webpack:///./src/ui/screens/bonus/bonus-test.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question.js","webpack:///./src/ui/screens/multichoice/horizontal-strips.js","webpack:///./src/ui/helpers/function-lookups.js","webpack:///./src/ui/screens/cards/non-taxon-card-specimen-tiles.js","webpack:///./src/ui/screens/text-entry/species-text-entry.js","webpack:///./src/ui/screens/progress/summary.js","webpack:///./src/ui/screens/progress/history.js","webpack:///./src/ui/screens/text-entry/text-complete.js","webpack:///./src/ui/screens/cards/cultivar-card.js","webpack:///./src/ui/screens/bonus/bonus-specimen-tiles.js","webpack:///./src/ui/screens/media/landscape/media-players.js","webpack:///./src/redux/subscriptions.js","webpack:///./src/redux/observe-store.js","webpack:///./src/ui/helpers/score-handler.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler.js","webpack:///./src/snapdragon-config/screen-layouts.js","webpack:///./src/snapdragon-config/screen-panels.js","webpack:///./src/snapdragon-engine/round-planner.js","webpack:///./src/snapdragon-engine/lesson-plan-handler.js","webpack:///./src/snapdragon-engine/lesson-planner.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-custom.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-fungi.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-static.js","webpack:///./src/snapdragon-config/plans/portrait/portrait-static.js","webpack:///./src/snapdragon-config/lesson-plans.js","webpack:///./src/ui/setup/setup-handler.js","webpack:///./src/ui/setup/next-lesson.js","webpack:///./src/ui/setup/next-layout.js","webpack:///./src/ui/setup/next-item.js","webpack:///./src/ui/fixtures/headers.js","webpack:///./src/ui/fixtures/score.js","webpack:///./src/ui/screens/home/home.js","webpack:///./src/ui/helpers/location-helper.js","webpack:///./src/ui/screens/cards/test-card-modal-handler.js","webpack:///./src/media-helper.js","webpack:///./src/index.js","webpack:///./src/wikipedia/wiki.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Array","concatAll","results","this","forEach","subArray","element","timer","sink","delay","id","Bacon","fromBinder","setInterval","onValue","shuffleArray","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","getCellValue","tr","idx","headerSortIndex","wide","children","filter","child","classList","join","indexOf","dataset","snapIndex","querySelector","vernacularName","innerText","textContent","utils","encodeQuery","q","undefined","Number","isInteger","encodeURIComponent","trim","randomiseSelection","source","required","zeroBased","selection","arr","concat","map","item","index","onlyUnique","self","sortBy","prop","dir","sort","a","b","parseFloat","sortAlphabeticallyBy","calcItemIndex","offSet","moduleSize","capitaliseFirst","str","substr","toUpperCase","toLowerCase","capitaliseAll","split","charAt","substring","makeSortable","document","callback","from","querySelectorAll","sp","addEventListener","names","th","parentElement","table","closest","tbody","footer","snapLog","comparer","asc","v1","v2","isNaN","toString","localeCompare","parentNode","appendChild","cells","flatten","reduce","accumulator","currentValue","getObservableMonths","date","daysAway","when","days","dateFromDays","direction","setDate","getDate","startMonth","getMonth","thisMonth","endMonth","getMonthName","month","Date","toLocaleString","months","getRandomInt","max","createSessionToken","replace","getRandomObjectProperty","obj","keys","constructor","toCamelCase","sentenceCase","out","el","add","fromCamelCase","parseToLowerCase","content","options","transform","locals","___CSS_LOADER_API_IMPORT___","types","config","language","callbackTime","callbackDelay","excludeRevision","isPortraitMode","isLandscapeMode","collection","languages","lang","guide","iconicTaxa","locationLongLat","locationPlace","locationType","place","speciesRange","inatId","type","param","season","perPage","noOfRecords","resetScore","total","correct","taxon","binomial","answer","success","incorrect","question","fails","passes","answers","statement","totalPassPoints","totalPoints","progressState","score","initialState","currentRound","rounds","isNextRound","cleanAndReturnIncomingState","state","quickFire","onClickFiltersLinkListeners","onClickGlossaryLinkListeners","reducer","combineReducers","counter","action","payload","isLessonRehydrated","isLessonPaused","isLessonSelected","layoutCount","lesson","isCustomLessonPausedOverride","lessonPlans","lessonPlan","layout","screens","prevItemIndex","itemIndex","initialConfig","coordinates","lessons","savedLessonNames","R","layoutName","layoutCounter","isLevelComplete","isLessonComplete","level","levels","getNextRound","nextItem","items","updateCollection","allItems","isDeselected","bonus","totalFailPoints","points","itemId","questionText","questionTotal","passesTotals","failsTotals","bonusScores","guid","collections","cols","col","selected","isActive","isCollectionUpdate","history","scores","historyCorrect","historyTotal","videoPlayer","enums","bonusLayout","user","glossary","userAction","persistConfig","storage","persistedReducer","persistReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","logger","next","thunk","persistor","persistStore","DOM","leftGrid","getElementsByClassName","leftHeader","leftBody","leftFooter","leftHeaderTxt","specimenRptr","rightGrid","rightHeader","rightHeaderTxt","rightHeaderScoreTxt","rightBody","rightRptrSummary","rightBodyBottom","rightFooter","roundHandler","getRoundItems","start","end","epithets","species","genus","getTrait","formatter","traits","trait","entries","acc","curr","statsReducer","elem","itemProperties","getVernacularName","useShortForm","namePart","shortForm","englishShortForm","find","languageSortForm","englishNames","english","capitalisedNames","e","console","error","message","getSpeciesName","getNestedTaxonProp","prop1","prop2","prop1Value","prop2Value","trimLatinName","getActiveTrait","option","traitName","getVernacularNames","getFamilyStats","taxonomy","family","getRootTraitValue","traitValue","drop","pattern","parts","match","dropStarters","starter","rootTraitValue","part","getTraitValues","enumKey","getTraitByKey","traitKey","hasTraitPropeties","handleUnit","unit","doArraysHaveSameValues","traitsHandler","getRandomTrait","traitsToIgnore","allowedTraits","getTraitsPoolForUnits","traitsPool","help","getTraitsPoolForRoles","role","getTraitsPool","traitValues","getSetOfTraitAnswers","pool","traitSet","sets","set","getTraitValueByKey","getLinkedTaxaTraits","taxaTraits","getTraitsToExclude","convertTraitsToNameValuePairsArray","traitsToExclude","includedTraits","lookalike","description","symbiont","getNMultiplesFromArray","arra","arra_size","result_set","x","pow","getTraitTests","itemsInThisRound","getTraitsForTests","alreadyTestedTraits","excludedTraits","et","overrides","typedItemTraits","getState","getBirdsongTests","getBirdsongTest","birdsong","birds","bird","birdNames","DESCRIPTION","CIRCUMFERENCE","EXPOSURE","CAP_SHAPE","CAP_COLOUR","CAP_DIAMETER","CAP_WIDTH","CAP_HEIGHT","SHELF_WIDTH","SHELF_THICKNESS","ECO_TYPE","HOW_EDIBLE","HYMENIUM_TYPE","SPORE_PRINT_COLOUR","STIPE_CHARACTER","STIPE_LENGTH","STIPE_WIDTH","STIPE_COLOUR","GILL_ATTACHMENT","FLESH","STEM_CHARACTER","GILL_COLOUR","TRUNK_COLOUR","SUBSTRATE","THALLUS_TYPE","RHIZINE_TYPE","DISC_WIDTH","LOBE_WIDTH","LOBE_LENGTH","LOBE_DIAMETER","ROLE","NATIVE","NATIVE_TO","SYMBIOSIS","ASSOCIATE","SYMBIONTS","LOOKALIKES","ECOLOGY","HABITAT","TROPHIC_LEVEL","ORGANISATION","SMELL","FRUIT_TYPE","FRUIT_WIDTH","FRUIT_HEIGHT","FRUIT_DIAMETER","FRUIT_LENGTH","FRUIT_COLOUR","FRUIT_TEXTURE","BRANCH_TEXTURE","FRUIT_SURFACE","SEED_DISPERSAL","VITAMINS","STAMEN_COUNT","STYLE_COUNT","LEAFLET_COUNT","LOBE_COUNT","LEAFLET_LENGTH","LEAFLET_WIDTH","GROUPING","MEDICINAL_PROPERTIES","COLOUR","USAGE","FORM","LIFE_SPAN","GERMINATION","ACTIVE","SUBSTRATE_ADHERANCE","RANK","SIZE","LENGTH","VOICE","HEIGHT","WEIGHT","REPRODUCTION","ASEXUAL_REPRODUCTION","DISPLAY","BEHAVIOUR","CHARACTERISTIC","COMMUNICATION","SHELTER","DISEASE","THREAT","FOOD","SEXUAL_DIMORPHISM","WING_SPAN","TREE_SHAPE","CROWN_SHAPE","LEAF_DIVISION","LEAFLET_DIVISION","LEAF_BLADE","LEAF_VARIATION","LEAF_SHAPE","JUVENILE_LEAF_SHAPE","LEAF_MARGIN","LEAF_ARRANGEMENT","LEAF_ATTACHMENT","LEAF_LENGTH","AWN_LENGTH","JUVENILE_LEAF_LENGTH","LEAF_WIDTH","LEAF_COLOUR","LEAF_SURFACE","LEAF_ABOVE_SURFACE","LEAF_BELOW_SURFACE","LEAF_TEXTURE","JUVENILE_TEXTURE","howEdible","CHOICE","EDIBLE","INEDIBLE","POISONOUS","DEADLY","TOXIC","habitat","WOOD","WOODLAND","WOODLAND_LITTER","GRASSLAND","SOIL","VEGETATION","DUNG","DUNES","WIDESPREAD","DEAD_WOOD","WASTELAND","MEADOW","FIELDS","MOSS","PASTURE","BARK","SHOOTS","COMMONS","HEATH","ORCHARDS","HEDGEROWS","LAWNS","RINGS","DAMP","TREE_BASE","FOREST_EDGE","PARKS","TRUNKS","STUMPS","ROCKS","FENCES","TREES","SHRUBS","SHRUBLAND","MARSHLAND","EXPOSED_WOOD","BRANCHES","HILLS","URBAN","VALLEYS","MAQUIS","SAVANNA","FOREST_STEPPE","MEADOW_STEPPE","BOREAL","SCRUB","WALLS","MOORLAND","COAST","BRUSH","WATER","SNOW","NO_SNOW","CONIFERS","BROAD_LEAF","PINE","BEECH","OAK","DITCH","WET_MEADOW","LAKESIDE","RIPERIAN","WETLANDS","ecologicalType","SAPROTROPHIC","PARASITIC","MYCORRHIZAL","PLANT_PATHOGEN","capShape","CAMPANULATE","CONICAL","CONVEX","DEPRESSED","FLAT","INFUNDIBULIFORM","OFFSET","OVATE","UMBILLICATE","UMBONATE","POTATO_SHAPED","NA","SPHERICAL","PEAR_SHAPED","BRAIN_LIKE","HONEYCOMB","HEMI_SPHERICAL","treeEcology","BIRCH","DECIDUOUS","SOFTWOOD","HARDWOOD","MIXED_WOODLAND","CONIFEROUS","ELM","ASH","SYCAMORE","ASPEN","ELDER","CHESTNUT","HARDWOODS","PRUNUS","PYRUS","SALIX","ROBINIA","CERATONIA","EUCALYPTUS","SWEET_CHESTNUT","POPLAR","CORK","FIR","SPRUCE","PLANE","WILLOW","MAPLE","LARCH","CEDAR","YEW","TURKEY_OAK","HAWTHORN","BUSH","SHRUB","hymeniumType","GILLS","PORES","GLEBA","SMOOTH","TEETH","RIDGES","FALSE_GILLS","associate","ALGA","CYNOBACTERIUM","FUNGUS","thallusType","FOLIOSE","FRUTICOSE","CRUSTOSE","SQUAMULOSE","LEPROSE","EPIPHYTE","rhizineType","SPARSE","HAPTER","substrate","HIGH","MEDIUM","LOW","VARIABLE","medicinalProperties","ANTIVIRAL","ANTISEPTIC","ANTI_INFLAMMATORY","ANTIBIOTIC","ANLAGESIC","ANTIBACTERIAL","ANTICOAGULANT","ANTIFUNGAL","ph","ACIDIC","ALKALINE","NEUTRAL","colour","LILAC","BUFF","WHITE","YELLOW","DARK_GREEN","GREEN","WHITE_GREEN","BRIGHT_GREEN","OLIVE_GREEN","BRIGHT_YELLOW_GREEN","YELLOW_GREEN","YELLOW_BROWN","PURPLE_BROWN","GREY_BROWN","DARK_YELLOW","DARK_RED","DARK_PINK","ORANGE","SCARLET","BLOOD_RANGE","RED","RED_BROWN","ORANGE_RED","GREY","PALE_GREY","PALE_BROWN","GREY_GREEN","GREY_WHITE","BROWN","CHESTNUT_BROWN","PAPER_BROWN","BLACK","BLUE","PALE_BLUE","BLUE_BLACK","JET_BLACK","BLUE_GREEN","VIOLET","BURGUNDY","PALE_VIOLET","VIOLET_PURPLE","PALE_GREEN","PALE_YELLOW","PALE_YELLOW_GREEN","PALE_GREY_GREEN","GLAUCOUS","GREY_YELLOW","ORANGE_YELLOW","CREAM","CHALKY","PINK","PALE_PINK","PURPLE","PALE_PURPLE","DARK_PURPLE","TAN","DARK_BROWN","HONEY","RED_PURPLE","usage","PERFUMERY","TANNING","DYING","BREWING","WINE","COFFEE","TEA","BIRDS_NEST","POISON","FODDER","FORAGE","GREEN_MANURE","MEDICINE","FUR","TIMBER","PEST_CONTROL","HERB","SPICE","ESSENTIAL_OIL","MORDANT","ASTRINGENT","nonTaxaType","NITROGEN","SULPUR_DIOXIDE","leafBlade","SIMPLE","COMPOUND","leafDivision","PALMATE","COMPOUND_PALMATE","PALMATELY_LOBED","PINNATE","COMPOUND_PINNATE","ODD_PINNATE","EVEN_PINNATE","BIPINNATE","COMPOUND_BIPINNATE","TRIFOLIATE","PINNATIFID","TRIPINNATE","IMPARIPINNATE","PARIPINNATE","leafletDivision","leafVariation","HOMOBLASTIC","HETEROBLASTIC","shape","LINEAR","OBLANCEOLATE","OBOVATE","ACICULAR","ACUMINATE","ACUTE","APICULATE","ATTENUATE","AURICULATE","ASYMMETRICAL","CAUDATE","CORDATE","CUNEATE","CUSPIDATE","DELTOID","DIGITATE","ELLIPTIC","ENSIFORM","EMARGINATE","FALCATE","FENESTRATE","FILIFORM","FLABELLATE","HASTATE","LACINIATE","LANCEOLATE","LAMINAR","reproduction","SELF_POLLINATION","CROSS_POLLINATION","asexualReproduction","BUDDING","FRAGMENTATION","FISSION","SPORE_FORMATION","VEGETATIVE_PROPAGATION","leafArrangement","ALTERNATE","BASAL","CAULINE","OPPOSITE","WHORLED","ROWS","SPIRAL","OVERLAPPING","INCURVED","DECUSSATE","leafAttachment","SESSILE","SUBSESSILE","PEDICELLATE","leafMargin","ENTIRE","CILIATE","CRENATE","DENTATE","DENTICULATE","DOUBLY_SERRATE","SERRATE","SERRULATE","SINUATE","LOBATE","UNDULATE","SPINY","food","GRASS","ROTTEN_FRUIT","NECTAR","HONEYDEW","SEEDS","NUTS","GRAINS","BERRIES","HERBAGE","SWARD","LEAVES","ROOTS","TUBERS","RHIZOMES","BULBS","hibernatingStage","ADULT","CATERPILLAR","PUPA","symbiosis","MUTUALISM","COMMENSALISM","PREDATION","PARASITISM","HERBIVORY","COMPETITION","ECTOMYCORRHIZAL","COMPANION","POLLINATION","SEED_PREDATION","trophicLevel","PRIMARY_PRODUCER","PRIMARY_CONSUMER","SECONDARY_CONSUMER","OMNIVORE","TERTIARY_CONSUMER","APEX_PREDATOR","shelter","DREY","BURROW","DEN","WARREN","SETT","ROOKERY","LODGE","DAM","NEST","active","CREPUSCULAR","DIURNAL","NOCTURNAL","MATUTINAL","VESPERTINE","juvenile","KIT","SQUEAKER","CUB","KITTEN","CHICK","PUP","CALF","DUCKLING","EYAS","MAGGOT","KID","GOSLING","LEVERET","NYMPH","LARVA","SALAMANQUESA","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER","female","VIXEN","DOE","JILL","BITCH","SOW","HEN","DUCK","GOOSE","PEN","male","BUCK","DOG","BOAR","TOM","JACK","COCK","DRAKE","REYNARD","TOD","TERCEL","GANDER","COB","diet","HERBIVORE","CARNIVORE","XYLOPHAGOUS","POLYPHAGOUS","fungusMarginType","APPENDICULATE","STRIATE","PLICATE","RIMMOSE","ERODED","INROLLED","soilType","SILICEOUS","CALCAREOUS","NITROGENOUS","NUTRIENT_POOR","WELL_DRAINED","WELL_WATERED","LOAM","CHALK","SAND","RICH","MOIST","organisation","EUSOCIAL","SOCIAL","SOLITARY","MATRIARCHY","INDICATOR","KEYSTONE","FOUNDATION","SPECIALIST","GENERALIST","PIONEER","INVASIVE","DOMINANT","POLLINATOR","PREDATOR","GRANIVORE","MUCIVORE","PREY","COMPETITOR","HOST","CARRIER","RUDERAL","SUPERTRAMP","SYMBIONT","OCCUPANT","PARASITE","COLONISER","EARLY_SUCCESSION","FERTILISATION","PROPAGATION","BIOINDICATOR","STRANGLER","FOOD_SOURCE","EPIPHYTIC","EPIPHYTIC_STRANGLER","NUTRIENT_CYCLING","CARBON_DIOXIDE_PRODUCTION","MYCOREMEDIATION","fruitType","DRUPE","POME","BERRY","AGGREGATE_FRUIT","LEGUME","CAPSULE","NUT","GRAIN","MULTIPLE_FRUIT","SAMARA","ACHENE","POD","ARIL","SYCONIUM","FOLLICLE","SILIQUE","inflorescence","CATKIN","UMBEL","RACEME","CORYMB","SPIKE","SPADEX","SINGLE","PANICLE","CYMOSE","BRANCHED_SPIKE","umbelType","TERMINAL","display","DIEMATIC","SEXUAL_COLOUR_DIMORPHISM","NO_SEXUAL_COLOUR_DIMORPHISM","NO_SEXUAL_DIMORPHISM","MELANISTIC","behaviour","SEXUAL_CANNIBALISM","MONANDROUS","VOCALISATION","CRYPSIS","HOARDING","HIBERNATION","GAME_PLAYING","PLAYFUL","TERRITORIAL","NON_TERRITORIAL","BIPARENTAL_CARE","COOPERATIVE_BREEDING","TOOL_MAKING","PROBLEM_SOLVING","DIVISION_OF_LABOUR","SUPERORGANISM","ANAUTOGENY","MASS_PROVISIONING","PRECOCIAL","ALTRICIAL","AUTOTOMIC","ECTOTHERMIC","ADHESION","POLYPHYODONT","VIVIPAROUS","REGURGITATION","MULTIVOLTINE","BIVOLTINE","UNIVOLTINE","SEMIVOLTINE","METAMORPHOSIS","RUTTING","WHELPING","FARROWING","SWIMMING","DECUMBENT","ETHYLENE_RIPENING","MIGRATORY","sense","SIGHT","MOVEMENT","SPATIAL","MEMORY","ECHOLOCATION","crypsis","CAMOUFLAGE","NOCTURNALITY","SUBTERRANEAN","MIMICRY","VISUAL","OLFACTORY","AUDITORY","allochory","ANEMOCHORY","HYDROCHORY","ZOOCHORY","ANTHROPOCHORY","reproductiveContainer","CONE","communication","POSTURING","matingSystem","POLYGYNOUS","MONOGAMOUS","physiology","NEGATIVE_ALLELOPATHY","POSITIVE_ALLELOPATHY","C3_CARBON_FIXATION","NITROGEN_FIXING","DORMANCY","EVERGREEN","ADVENTITIOUS","NYCTINASTY","XEROMORPHIC","SUCCULENT","DROUGHT_TOLERANT","FIRE_TOLERANT","FIRE_RESISTANT","POLLUTION_TOLERANT","PH_TOLERANT","SALT_TOLERANT","FROST_TOLERANT","HEAT_TOLERANT","NITROGEN_TOLERANT","HEAVY_METAL_TOLERANT","ACID_RAIN_TOLERANT","COMPACT_SOIL_TOLERANT","FLORAL_SCENT","AROMATIC","MONOCARPIC","POLYCARPIC","PYROPHYTIC","SEROTINOUS","STYPTIC","BIOLUMINESCENCE","collective","SOUNDER","SLOTH","MURMURATION","PACK","ecology","DIGGING","SCRAPING","ROOTING","SCAVENGING","characteristic","PERENNIAL","ANNUAL","BIENNIAL","HERBACEOUS","DIOECIOUS","MONOECIOUS","SYNOECIOUS","PERFECT","COMPLETE","DICOTYLEDON","MONOCOTYLEDON","CAULIFLORY","RAMIFLORY","PUBESCENT","CHAMAEPHYTE","FIBROUS_ROOT_SYSTEM","TAPROOT_SYSTEM","KIN_SELECTION","BROADLEAF","AERIAL_ROOTS","EPICORMIC_ROOTS","BASAL_ROOTS","RUNNER","CLIMBER","BUTTRESS_ROOT","MONOPODIAL","APICAL_DOMINANCE","POLYMORPHIC","CRYPTIC_SPECIES_COMPLEX","RHIZOMORPHS","GEOPHYTE","RICTAL_BRISTLES","DEHISCENCE","EXPLOSIVE_DEHISCENCE","RESIN_CANAL","APOSEMATIC","climate","HOT","DRY","TEMPERATE","COOL","TROPICAL","CONTINENTAL","pollination","ALLOGAMY","ANEMOPHILY","HYDROPHILY","ENTOMOPHILY","AMBOPHILY","MELITTOPHILY","PSYCHOPHILY","PHALAENOPHILY","SONICATION","GENERALISED_SYNDROME","CLEISTOGAMY","stipeCharacter","RING","RING_AND_VOLVA","BARE","SHORT","STUMPY","CLUB_LIKE","WARTS","HOLLOW","PRUINOSE","PARTIAL_VEIL","stemCharacter","TERETE","HAIRY","FARINOSE","SCURFY","VISCOUS","PUNCTATE","PAPILLATE","TUBERCULATE","RUGOSE","GLABROUS","gillAttachment","ADNATE","ADNEXED","DECURRENT","FREE","Seceding","SUBDECURRENT","grouping","LARGE_GROUPS","CLUSTERS","LARGE_CLUSTERS","SCATTERED_CLUSTERS","FAIRY_RINGS","GREGARIOUS","NUMEROUS","propagation","SUCKERS","STOLONS","CORMS","PLANTLETS","KEIKIS","APOMIXIS","seedDispersal","AUTOCHORY","exposure","FULL_SUN","PARTIAL_SUN","PARTIAL_SHADE","SHADE","nutType","ACORN","HAZELNUT","surface","TOMENTOSE","texture","LEATHERY","FLESHY","GLOSSY","WOOLY","SCALY","ROUGH","VELVETY","treeShape","COLUMNAR","OPEN_HEAD_IRREGULAR","WEEPING","PYRAMIDAL","GLOBE","FASTIGIATE","VASE","HORIZONTAL_SPREADING","NARROW_DOMED","crownShape","OVOID_CONIC","CONIC","DOMED","SPIRE_LIKE","SLENDER","barkType","LENTICELS","PEELING_STRIPS","VERTICAL_CRACK","VERTICAL_STRIPS","SCALES","PLATES","INTERSECTING_RIDGES","UNINTERRUPTED_RIDGES","RIDGES_BROKEN_HORIZONTALLY","PAPER_LIKE","SQUARE_CRACKED","RESINOUS","THICK","coneShape","BARREL_SHAPED","GLOBULAR","leafVenation","ARCUATE","DICHOTOMOUS","LONGITUDINAL","PARALLEL","RETICULATE","ROTATE","TRANSVERSE","flowerShape","TRUMPET_SHAPED","BILABIATE","REGULAR","ACTINOMORPHIC","ZYGOMORPHIC","branchArrangement","HORIZONTAL","WHORLS","leafFeatures","BLUNT_TIPS","STOMATAL_LINES","DROOPING","leafFolding","CARINATE","CONDUPLICATE","CUCULLATE","INVOLUTE","REDUPLICATE","REVOLUTE","SUPERVOLUTE","mushroomGroup","MYCOTROPHS","POLYPORES","BOLETES","PUFFBALLS","GILLED_MUSHROOMS","CHANTERELLES_AND_TRUMPETS","TOOTHED_MUSHROOMS","STINKHORNS","CUP_FUNGI","BIRDS_NEST_FUNGI","TRUE_MORELS_AND_VERPAS","FALSE_MORELS","SADDLES","JELLY_FUNGI","CLUBS_AND_CORALS","CRUST_FUNGI","units","lifeSpan","gestation","weaning","germination","height","diameter","circumference","trunkDiameter","capDiameter","umbelDiameter","capWidth","infructescenceWidth","width","breadth","capHeight","shelfWidth","shelfThickness","leafLength","awnLength","infructescenceLength","juvenileLeafLength","leafWidth","petalLength","petalWidth","petioleLength","bractLength","fruitWidth","fruitLength","fruitDiameter","fruitHeight","flowerDiameter","flowerLength","coneDiameter","coneLength","maleConeLength","femaleConeLength","bulbWidth","coneWidth","maleConeWidth","femaleConeWidth","stalkHeight","stemHeight","scapeHeight","stemDiameter","stipeLength","tailLength","leafletLength","leafletWidth","queenLength","queenWingspan","workerLength","workerWingspan","maleLength","maleWingspan","stipeWidth","wingSpan","tongueLength","phValue","weight","queenWeight","workerWeight","maleWeight","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","firestore","getSpeciesWhere","props","operator","limit","speciesRef","where","querySnapshot","docs","doc","getSpecies","getSpeciesNames","speciesPropertiesRef","getTaxaNames","taxaPropertiesRef","getSpeciesByIconicTaxon","number","iconicTaxon","isLichen","lichen","eolId","randomId","getRandomId","FieldPath","documentId","getSpeciesByName","itemName","getTaxaWhere","taxaRef","getFamiliesByIconicTaxon","iconicTaxonRank","iconicTaxonValue","getTaxonByName","getAsyncTraitsByNameAndCollection","languageTraits","getTraitsBySpeciesName","Promise","resolve","getTraitsByTaxonName","getBirdsong","xcID","storageRef","ref","getDownloadURL","url","getImage","image","addSpecies","images","license","photographer","rightsHolder","title","docRef","updateSpecies","updatedSpecies","starred","provider","speciesDocRef","update","updateSpeciesNames","deleteSpeciesByName","then","addTraits","empty","speciesTraitsRef","addSpeciesRelationship","batch","readyBatch","all","FieldValue","arrayUnion","commit","addPhotos","photos","deleteSpeciesTraitField","field","removeField","getRandomSpecies","addTaxon","getSpeciesInParallel","time","questionIds","quickId","getSpeciesByNameInParallel","itemNames","addCollection","details","getCollectionsWhere","collectionRef","addQuestion","getQuestionsWhere","addDefinition","definition","term","getDefinitionsWhere","getDefinitionById","getBatchDefinitionsById","ids","terms","getDefinition","definitions","alt","getCollections","async","updateDefinition","getTraitDefinitions","entry","getDefinitionsByTaxa","taxa","chars","autoId","getLookalikeTests","init","getLookalikeTest","tests","getItemLookalikes","lookaliketraits","lookalikes","getLookalikes","FUNGI","PLANTAE","AVES","AMPHIBIA","REPTILIA","MAMMALIA","INSECTA","ARACHNIDA","LEPIDOPTERA","matchTaxon","matchTaxonKey","iconicTaxaKeys","rank","order","kingdom","findRankByIconicTaxon","matchIcon","matchRank","icon","getDefinitionTests","getDefinitionTest","alternatives","bonusHandler","getTests","itemIndices","bonusLayouts","lessonName","levelName","addLayoutToTest","traitTests","traitTest","getTraitTypeTests","getTraitTypeBirdsongTests","getTraitTypeLookalikeTests","getDefinitionTypeTests","getResolvedPromises","promises","testGroups","group","g","getItemLayouts","itemQuestions","providerHandler","getLayouts","roundItemNames","speciesQuestions","questions","sq","itemsQuestions","makeActionCreator","meta","nextLesson","updateScore","nextLayout","nexItem","updateHistory","newCollection","updateCollections","nextRound","nextLevel","updateConfig","stopStartLesson","updateEnums","updateUser","saveLesson","updateVideoPlayer","createQuickFire","updateQuickFire","createGlossary","clickEvent","boundAsyncNextLesson","func","dispatch","response","actions","boundNextLesson","boundUpdateScore","boundNextItem","boundNextLayout","boundUpdateHistory","boundSetActiveCollection","boundUpdateCollection","boundUpdateCollections","boundNextRound","boundNextLevel","boundUpdateConfig","boundStopStartLesson","boundUpdateEnums","boundSaveLesson","boundUpdateVideoPlayer","boundUpdateUser","boundCreateQuickFire","boundUpdateQuickFire","boundCreateGlossary","boundClickEvent","hasClass","className","classArray","cleanText","text","isAnswerCorrect","isCorrect","answeredIndex","parseInt","answerIndex","isAnswerEqualToQuestion","eqValues","alternativeIsCorrect","alternativeAccepted","markTest","test","isTraitAnswerCorrect","lessonState","Enum","initEnum","navigation","guideOption","nextStep","quickFireType","quickFireStep","userEvent","getIsReviewingLesson","isNotReviewingLesson","START_LESSON","TOGGLE_SPECIES_LIST","lessonStateHelper","overrideLesson","purgeLesson","purge","location","reload","clearGuide","getCollectionToLoad","currentCollection","selectedLessonCollectionId","resume","getLatestCounter","log","getUserLessonState","collectionToLoad","savedLesson","newLessonCounter","restoredLesson","Stamp","Context","importNode","re","filterState","address","mystate","len","hasAttribute","JSON","stringify","getAttribute","expandString","count","matches","exec","cloneAllNodes","clones","nodeName","cloneNode","appendChildren","ele","nodes","expand","isArray","processChildren","attributes","attr","iterName","tpl","firstChild","removeChild","childState","instanceState","k","cl","removeAttribute","setAttribute","childEle","nextSibling","replacement","childNodes","insertBefore","expandInto","target","replaceChildren","innerHTML","renderTemplate","context","parent","clone","contentClone","expanded","handleRightsAttribution","template","createElement","rightsAttributionTemplate","licence","medium","author","rightsholder","identifier","large","scaleImage","rightsAttribution","rightsLink","indicators","showAttribution","event","remove","removeEventListener","showLink","carouselControlHandler","parentScreen","setTimeout","slider","imageSlider","sliderArgs","imageSliderTemplate","img","prev","selectActiveImage","elemSrc","imageMatch","activeNode","slideTo","click","imageSideBySlider","slides","sideBySlider","slide","itemCommon","prepImagesForCarousel","imageUseCases","CAROUSEL","originalImageLink","stripImageUrlOfScaleAndPrefix","prefix","SPECIES_LIST","SPECIES_CARD","TAXON_CARD","SPECIES_SPECIMENS","NON_TAXON_CARD","VISUAL_MATCH","MIXED_SPECIMENS","TEXT_ENTRY","ACTUAL_SIZE","SPECIES_GRID","denormaliseImages","photographersName","full_name","src1","src2","prepImageForCarousel","useCase","src","small","modalImagesHandler","displayNameType","modalImageHandler","handleImageSelectionFromList","selectedItem","selectedItemImage","selectedImage","displayName","mushroomIcon","renderIcon","rootNode","iconicIcon","returnTaxonIcon","getBirdSong","node","portrait","fetchAsync","endpoint","fetch","json","loadPlayer","playerId","song","recording","recordings","style","renderInfoDetails","activeTraitKey","activeTraitValue","idBoxTemplate","linkedTaxa","isInCarousel","addLinksToSpeciesCards","link","renderCard","taxonName","isSpecies","addVernacularName","relationshipTraits","relationships","convertTraitsForDisplay","speciesA","speciesARole","speciesB","speciesBRole","lookalikeTraits","convertLookalikesForDisplay","speciesDescription","lookalikeDescription","addDisplayRules","relationship","modal","linkedTaxaRelationshipTemplate","linkedTaxaLookalikeTemplate","getLinkedTaxa","detail","detailsTemplate","imgClassName","renderInfoSlider","infoSliderTemplate","activeTrait","control","changeTraitHandler","taxonInfoSlider","convertedTraits","service","getLocation","lat","getHTML5Location","reject","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","logError","listeners","parseMapBoxPlace","locality","features","f","place_type","region","country","area","shortLocation","longLocation","summary","placePromise","updatedPlace","getMapBoxPlace","long","listener","getPlace","force","LocationLookup","ip","city","state_prov","country_name","IPLookup","getIPLocation","ipLocation","requireNewSession","current_term","inatListeners","unsubscribe","listenToInatRequests","getBasePath","observableMonths","getInatSpecies","speciesNames","snapdragonSpeciesNames","getIconicTaxa","getUserOrProjectKeyValuePair","parameter","getAllInatObservations","snapdragonSpecies","records","keepGoing","page","getInatObservations","recordsFromThisRequest","record","noMoreRecords","recordsCountReached","loadSpeciesInParallel","observations","observation","observationCount","observations_count","iconic_taxon_name","lng","placeId","radius","inat","params","guideTpe","numberOfRequests","ceil","total_results","RECORDS_per_page","getInatPlaceId","getInatTaxonStats","getHistogram","getAutocompleteBy","by","renderWikiModal","wikiLink","wiki","focus","inatBoxTemplate","eolPage","wikiNode","renderWiki","stats","taxonId","stat","taxonCount","taxonLink","place_name_en","places","display_name","itemStats","placeTaxonCount","establishment","preferred_establishment_means","renderCalendar","calendarTemplate","getENShortMonth","ordinal","histogram","monthlyStats","month_of_year","currentMonthIndex","infraspecifics","subspecies","variety","eol","form","renderTaxaBox","taxaBoxArgs","familyName","familyVernacularName","specific","subSpeciesCount","taxaBoxTemplate","subspeciesBadge","members","list","html","member","transition","getItemWithProps","getItem","itemWithProps","FAMILY","ORDER","cardTemplate","renderCommonParts","renderPortrait","renderLandscape","renderInatDataBox","lookalikeSpecies","renderLookalikes","readyLookalikesForRendering","lookalikeItem","scientificNames","lookalikeParent","matchTemplate","speciesComparisonLink","mp3","audioMediaTemplate","visualComparisonTemplate","player","iframe","border","elm","infoSlider","renderBadge","badge","Set","common","languageNames","occurrences","badgeTemplate","lines","getElementsByTagName","hr","attribution","indicator","modalCarousel","renderTaxonCard","taxonTemplate","familyStats","identification","descriptions","genera","families","toxic","notableMembers","membersCount","traitValuesHandler","branch","technical","nonTaxaGroup","LICHEN_FORM","getNonTaxa","SD","examples","subscriptions","renderNonTaxonCard","keyTrait","nonTaxa","nt","onChange","sub","prepImages","itemImagesArray","itemImages","nonTaxon","portraitImagesNode","lookup","getElementById","buildTable","args","overrideParent","matchMedia","getTraitName","keyTratLinkClass","phylum","getIconicTaxonIcon","iconicTaxonIcon","hideFungiIcon","genusLinkClass","shortName","getOrderLinkClass","hasVideo","speciesTemplate","vn","span","append","caption","thead","headerRow","imageHeader","speciesHeader","familyHeader","traitNameHeader","iconicTaxonHeader","accordionHeader","sortableCalback","isReady","onSpeciesTimeMatchListeners","onNoteTimeMatchListeners","onSpeciesPlayRequestListeners","onPlayerStateChangeListeners","isPlayerReady","states","videoHandler","readyPlayer","YT","Player","playerVars","events","onPlayerReady","onPlayerStateChange","onSpeciesTimeMatch","pop","onNoteTimeMatch","onSpeciesPlayRequest","onPlayerReadyListeners","subscribeToPlayerStateChange","playVideoFrom","getPlayerState","seekTo","playVideo","setVideoState","activeLesson","collectionId","pausedAt","speciesName","destroyPlayer","stopVideo","destroy","saveVideoState","isVideoPlayerReady","videoId","doIdsMatch","getVideoData","video_id","getPlayerTime","getCurrentTime","videoSetup","startTime","videoTemplate","video","webLabel","links","label","webUrl","startAt","playAt","checkInt","checkCurrentTime","matchSpeciesTime","notes","noteMatch","note","onPlayerStateChangeCallback","clearInterval","videoWidth","offsetWidth","msg","process","css","currentlyActiveRow","onSpeciesChangeHandler","openNoteHandler","definitionTemplate","insert","colCount","noteText","renderSpeciesList","callingParentContainer","traitEnums","openAccordionHandler","accordion","openSpeciesDescriptionHandler","closeAccordionHandler","userClickHandlers","itemImage","accordionHandler","currentTarget","stopPropagation","activeIcon","cardModal","card","nthChild","taxonIcons","noWrongAnswersForThisSpecies","totals","contains","firstTime","lessonStateHandler","changeRequest","requestType","BEGIN_OR_RESUME_LESSON","requestArgs","enableScroll","activateYoutubeIcon","closeOpenAccordions","accordions","activeAccordion","activeYouTubeIcon","td","scrollIntoView","rowHeight","noOfRows","scroll","top","getComputedStyle","documentElement","getPropertyValue","scrollTop","previousElementSibling","offsetHeight","prevTaxon","nextTaxon","playerRecords","inactiveAccordion","getItems","guideType","query","logErrorg","getSnapdragonSpeciesData","loadCollection","insecta","lepidoptera","noninsecta","loadCollectionItemProperties","itemReadyCollection","orders","familyTaxa","orderTaxa","genusTaxa","getGenusTaxa","genusTaxon","getFamilyTaxa","familyTaxon","getOrderTaxa","orderTaxon","getFamilyNames","findRank","taxonRank","GENUS","vernacularNames","loadTraitsInParallel","itemTraits","collectionHandler","PAUSE_LESSON","UPDATE_COLLECTION","SAVE_LESSON_PROGRESS","GET_LESSON_PROGRESS","ADD_SPECIES_TO_COLLECTION","RENDER_SPECIES_LIST","NEXT_ROUND","isLandcapeMode","changeLessonState","saveCurrentLesson","updatedCounter","getUserLessonProgressState","addExtraSpeciesSelection","renderLessonSpeciesList","beginOrResumeLesson","requestedlessonState","RESUME_LESSON","BEGIN_LESSON","container","stateCounter","userLessonState","setActiveCollection","extraSpecies","collectionExtension","recordUserAction","scoreSummaryHandler","getLessonScores","stateScore","savedScore","historyIsUpToDate","getSummaryRows","rows","getAnswer","isObj","hasImage","isTrue","isWrongAnswer","renderScoreSummary","lessonId","summaryContainer","summaryTemplate","actionLinks","reverse","renderScoreSummaryRow","handleContinueLesson","preventDefault","handleNewLesson","actionLink","once","summaryRowTemplate","summaryNoRowTemplate","noQuestionsText","renderTestCardTemplate","testCardTemplate","headerClassName","providerQuestion","progressLink","renderSummaryCard","toggleScreens","screenOne","screenTwo","hideCurrentCard","testCardContainer","toggleStatementAndQuestion","testCard","testCardIcon","showNextCard","selector","speciesContainer","taxonContainer","renderSpeciesCard","speciesCard","taxonCard","interval","languagePicker","languageSelectionTemplate","taxonLanguageBtn","taxonLanguageTxt","inatAutocomplete","input","rb","users","login_autocomplete","photo","getPlaceSuggestions","GoogleAutocomplete","getPredictions","SESSION_TOKEN","google","maps","AutocompleteService","getPlacePredictions","AutocompleteSessionToken","predictions","prediction","place_id","projects","autocomplete","getUserSuggestions","getProjectSuggestions","onSelect","minLength","debounceWaitMs","switchHandler","idSwitch","startingPosition","switchControl","leftText","rightText","switcher","saveLocation","locationPlaceInput","createGuide","selectedText","selectedId","GooglePlaceDetails","request","Geocoder","geocode","geocoderResult","geometry","setConfig","saveStep","saveInatId","autocompleteRef","isLandsapeMode","speciesInGuideEditor","selectedSpeciesDisplay","selectedSpecies","savedSpeciesNames","spinner","editorTemplate","speciesCount","getTaxa","ss","addSpeciesToList","updatedConfig","updatedCollection","startsWith","highlightedText","checkBox","removedSpecies","listenersToAddedSpecies","speciesEditor","addedSpecies","CreateGuide","step","steps","disabled","nextSteps","LOCATION","INAT","PICKER","prevStep","currentStep","modalTitle","navigationContainer","progressSteps","previousStepActionArrow","previousStepActionTxt","optionsTxt","nextStepActionArrow","nextStepActionTxt","ps","getConfig","getCurrentStep","setCurrentStep","actionsTemplate","renderSpeciesSearchOptions","handleNextStepAction","nextStepName","startLesson","goToNextStep","handler","warning","renderLocation","locationTemplate","defaultNoOfRecords","setLocationLongLatBtn","handleSetLocationLongLat","placeholder","handleLocationPlaceInput","keyCode","range","rangeTxt","updateSlider","switchCallback","currentType","renderInatUser","inatTemplate","byType","inatIdentityInput","handlerInatIdentityInput","renderSpeciesPicker","speciesPickerTemplate","renderCategories","categoriesTemplate","icons","filterId","fungiIcon","hasChanged","category","commonName","speciesSearch","spinnerTemplate","feedback","viewGuideIcon","viewTaxaIcon","renderLessonSummary","clearTimeout","speciesSummaryTemplate","callOnCreateCustomListeners","editSpecies","editableCollectionName","initLesson","isPrivate","OrdinalSuffixOf","addingExtraSpecies","every","val","includes","initPicker","addStepActions","previousStepProperties","stepDescription","saveGuide","chosen","handleSaveEvent","onCloseModalListeners","quickFireAPI","includeTechnicalTerms","getBranches","branches","getQuickFire","isComplete","termScore","isIncorrect","poolSize","renderResponse","updateBranchCounts","branchOptions","branchBadge","updateTaxonCounters","taxonCounters","taxonBadge","quickFireUI","updateTotalCounts","counters","branchCounters","updateHeaders","screen","quickFireActions","filters","hide","loadGlossary","quickFireGlossary","linkFromLesson","loadFilters","quickFireFilters","handleGlossaryLink","handleFiltersLink","FILTERS","QUESTIONS","GLOSSARY","scoreMultipleChoice","quickFireMessage","scoreTextEntry","quickFireInput","continueQuickFireBtn","brackets","acceptableAnswers","acceptable","readyTemplate","headerTemplate","quickFireLogic","selectAnswers","quickFireItems","spareItems","itemCount","headers","templateCreateQuickFire","resetQuickFire","DEFINITION","updateArray","getFilterTaxa","chkBox","selectedTaxon","updatedTaxa","getIncludeTechnicalTerms","createQuickFireBtn","quickFireOptions","checkedBranches","checked","templateQuestionQuickFire","answered","quickFireInputContainer","subscription","quickFireQuestions","check","review","getTermsGlossary","def","glossaryTemplate","templateSummaryQuickFire","pass","showWikiClass","fail","tab","summaryText","scoreSummary","continueReview","quickFireRevision","quickFireHandlers","renderReview","progressBar","roundProgressIndex","roundScoreCount","handleSpeciesUpdate","speciesSummary","getSpeciesCount","getSpeciesSummary","renderLessonIntro","textSetup","textIntroTemplate","lessonIntro","intro","renderEditLesson","lessonEditTemplate","lessonListScrollHandler","scrollToTitle","siblingsBefore","siblings","sibling","before","onLoadLessonViewState","showVideoIconClass","videoState","reviewState","hasTermsClass","isCollectionEditableClass","onClickViewState","isYoutubeIcon","isChevronIcon","row","speciesList","reviewLink","DEFAULT","hideOtherContentAndRevertChevrons","isSpeciesListAvailable","isSpeciesListHidden","lessonVideoState","iconIsChevron","lessonIsYoutubeIcon","requiresSpeciesList","revealSpeciesList","hideSpeciesList","selectedLessonId","chevron","chevronLessonId","loadAndDisplaySpeciesList","lessonListEventHandler","onLoadLessonsViewState","onLessonIconClickHandler","isItemActive","siblingChevron","onReviewClickHandler","START_LESSON_REVIEW","onLessonTitleClickHandler","renderCustomLesson","savedLessons","onCreateCustomLesson","lessonTemplate","hideVideoClass","hideTextIntroClass","youtubeLessonIcon","scrollTo","left","behavior","cookie","renderLessons","lessonListTemplate","tsa","seconds","renderLesson","saved","isPaused","renderLessonListHeader","header","lessonListHeaderTemplate","createGuideHandler","handlePreviousStepAction","youtubeLessonIcons","youtube","highlightActiveLesson","chevrons","reviews","termsReviewLink","SECURE","cookieHandler","setFirstTimeVisitorCookie","isFirstVisit","isFirstTimeVisitor","readCookie","removeFirstTimeVisitorCookie","setLastVisitedCookie","setLastVisited","hasUserBeenAwayTooLong","lastVisited","timeDiff","abs","beenGoneTooLong","nameEQ","ca","cookieToAdd","settingsHandler","settingsTemplate","clearCacheBtn","setDelayBtn","setDelayInput","delayTxt","renderLogin","auth","logoutTemplate","email","logOut","signOut","loginTemplate","password","logIn","signInWithEmailAndPassword","credentials","notLoggedIn","renderLoggedIn","loggedIn","loggedOut","renderLanguagePicker","languageTemplate","onLoseFocusListeners","renderNavigation","navigationPortraitTemplate","navigationLeftTemplate","navigationRightTemplate","navIcons","clickedIcon","toggleIconOnOff","enumValueOf","LANDSCAPE_HOME","SETTINGS","PORTRAIT_HOME","EMAIL","LOGIN","LANGUAGE","activeInfoIcon","getByRole","onLoadState","returningUser","renderLoginChanges","letterBlocks","letter","letters","deleteLetter","activeBlocks","activeLetters","activeBlock","block","lastLetter","indexInInput","lastIndexOf","newValue","correctBlocks","letterIndex","blocks","keyboardBtn","selectedBlock","blockArray","renderItemSpecimenTiles","collectionItems","getImagesFromItemFamily","renderSpecimenImageTiles","acceptableScreens","specimensTemplate","pooledImage","uniqueImages","familyImages","imageToPrep","getUniqueImage","uniqueImage","getPoolItems","otherItems","getItemsFromCollection","taxonicMatches","speciesPool","ci","isException","renderMultiStrips","defaultLanguage","render","helpDefault","clue","stripWithImageTemplate","stripTemplate","strips","italicise","strip","questionCount","findIndex","scoreHandler","buildQuestion","renderBinomialQuestions","renderVernacularQuestions","renderIdQuestions","alternativeFamilies","epithet","latin","en","indices","otherFamilies","otherFamiliesLatinNames","otherFamiliesCommonNames","of","renderBirdsong","requiredTraits","renderMixedSpecimenImagesAndQuestion","getPortraitImages","srcs","islandscapeMode","mixedSpecimenTemplate","continueLessonBtn","boundScore","selectedName","scoreUpdateTimer","wrongItem","bindScore","renderMixedSpecimenQuestion","renderBonusTest","functions","renderNonTaxonCardSpecimenTiles","subscribeToNonTaxaSelection","renderTextEntry","vernacular","renderInput","questionTxt","textEntryTemplate","textEntryPortraitTemplate","inputTxt","helpTxt","answerBtn","scoreEventHandler","layouts","renderSummary","getByName","renderHistory","renderCompleteText","givenTaxon","completeTemplate","numerOfItems","itemTaxons","itemTaxon","iconColour","answerIcon","continueLessonHandler","renderCultivarCard","cultivars","locale","eolAlt","wikiAlt","cultivarTemplate","renderBonusSpecimenTiles","lookalikesCount","renderSpecimenTiles","renderMediaPlayers","renderMixedTraitQuestion","questionTemplate","renderHorizontalStrips","domain","observeStore","select","currentState","hasStateSignificantlyChanged","handleChange","nextState","is","areEqual","calledBy","subscribe","removeByName","getAll","removeSubs","addSubs","funcByName","isSubscriptionRequired","checkRequired","isReviewingLesson","genericScoreHandler","blockScoreHander","stripScoreHandler","imageScoreHandler","simpleScoreHandler","showResponseToAnswerHandler","renderScoreHTMLResponse","btn","cursor","_score","handleClickEvent","answerNode","stripAnswer","stripAnswerIndex","stripAnswerName","_callback","tile","opacity","onTraitsReadyListeners","onTraitClickedListeners","pendingScore","mixedTraitHandler","getMatchingTrait","layoutTraits","requiredTraitValues","v","fetchTraits","multiples","multiple","onTraitsReady","onTraitClicked","onClickTileHandler","tiles","specimenImages","vernaculars","scientifics","leaf","leafName","familyStrips","textComplete","cultivar","cultivarCard","specimenCommonMatch","specimenLatinMatch","definitionCard","traitProperty","symbioticProperty","lookalikeProperty","traitImages","nonTaxonSpecimenTiles","mixedSpecimenQuestions","mixedSpecimensLeft","mixedSpecimensRight","mixedTraitLeft","mixedTraitRight","providerHorizontalStripQuestions","speciesIdentification","mixedSpeciesMatch","kind","given","requirement","speciesRevision","taxonRevision","nonTaxonRevision","definitionRevision","latinToCommonMatch","commonToLatinMatch","speciesIdentificationMatch","textCompleteGenus","multiSpecimenCommonMatch","multiSpecimenLatinMatch","traitPropertyMatch","lookalikePropertyMatch","symbioticPropertyMatch","familyMatch","cultivarMatch","familyStripsMatch","genusEntry","speciesEntry","speciesGenusEntry","leafEntry","textCompleteSpecies","commonEntry","latinEpithets","glossaryTerms","mixedSpecimenImages","mediaMatch","mixedTraitImages","providerHorizontalStrip","propertyTrait","createNextRound","nextRoundLayoutTemplates","progressScreens","itemsCountToDate","itemsLeft","layoutsToAdd","providerQuestions","providerLayouts","L","lessonLayouts","bonusTests","layoutIndex","layoutNames","updatedLessonPlan","updatedLesson","getNextRoundLayouts","activeLevelCount","levelId","goToNextLevelThatHasLayouts","iterateOverLevelsCheckingForAvailableLayouts","intialValue","increment","currentLevel","reviewLayouts","getCurrentLevelFromLessonPlan","lessonPlanner","createLessonPlan","landscapeCustom","default","landscapeCustom2","landscapeFungi","landscapeLichens","landscapeStatic","landscapeStaticTaxonGroup","portraitStatic","portraitStaticTaxonGroup","landscapeBirds","portraitBirds","portraitFungi","portraitLichens","setupHandler","isRequired","NEXT_ITEM","NEXT_LAYOUT","NEXT_LESSON","actionUpdate","asyncFunc","planId","lessonPlanPortrait","lessonPlanLandscape","plan","renderHeaders","renderScore","renderHome","forceIntroDisplay","initialiseConfig","originalConfig","lessonModalHandler","onCloseModal","handleWindowResize","setWindowHeight","iOS","userAgent","MSStream","verticalHeight","innerWidth","innerHeight","setProperty","largeImage","horizontalWidth","origin","protocol","href","loadModalHTML","modalsTemplate","onLoadHandler","Sentry","dsn","currentCounter","statePlans","cloudCollections","initialisedConfig","root","formatUrl","encode","ranks","fetchWiki","missingMessage","method","errorPromise","cleanEntry","cleaned","formatWiki","wikiSearchTerm","searchTerm","searchTerms","exceptions"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0,\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([466,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","Array.prototype.concatAll = function() {\n    const results = [];\n  \n    this.forEach(function(subArray) {\n      subArray.forEach(function(element) {\n        results.push(element);\n      });\n    });\n  \n    return results;\n  };\n  \n  const encodeQuery = q => { \n    if(q === undefined) return q;\n    if(Number.isInteger(q)) return q;\n    return encodeURIComponent(q.trim()) \n  };\n  \n  const timer = function (sink, delay) {\n    let id = null;\n    Bacon.fromBinder(function() {\n      id = setInterval(function() {\n          sink();\n        }, delay);    \n      })\n    .onValue(function(element) { \n      //\n     });\n    return id;\n  };\n  \n  function intervalTimer (sink, delay) {\n    var timerId;\n  \n    this.pause = function() {\n        window.clearInterval(timerId);\n    };\n  \n    this.resume = function() {\n        window.clearInterval(timerId);\n        timerId = timer(sink, delay);\n    };\n  \n    this.getId = function (){\n      return timerId;\n    }\n  \n    this.resume();\n  \n    return this;\n  };\n  \n  const shuffleArray = array => {\n\n    // Check against https://bost.ocks.org/mike/shuffle/ Fisher–Yates Shuffle\n\n    if(!array || array.length === 0) return;\n\n    var currentIndex = array.length, temporaryValue, randomIndex;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return [ ...array ];\n\n    // return (arr\n    //   .map(a => [Math.random(), a])\n    //   .sort((a, b) => a[0] - b[0])\n    //   .map(a => a[1]))\n  };\n  \n  const randomiseSelection = (source, required, zeroBased = false) => {\n    const r = selection => {\n      const arr = shuffleArray(source);\n      selection = selection.concat(arr.map((item, index) => {\n        if(index + selection.length < required) {\n          return zeroBased ? --item : item;\n        }      \n      })).filter(item => item !== undefined);\n      return selection.length < required ? r(selection) : selection;\n    }\n    return r([]);\n  };\n\n const onlyUnique = (value, index, self) => { \n    return self.indexOf(value) === index;\n};\n\nconst sortBy = (arr, prop, dir = 'asc') => {\n  return dir === 'asc' \n    ? arr.sort((a, b) => parseFloat(a[prop]) - parseFloat(b[prop]))\n    : arr.sort((a, b) => parseFloat(b[prop]) - parseFloat(a[prop]));  \n};\n\nconst sortAlphabeticallyBy = (arr, prop) => {\n  arr.sort(function(a, b){\n    if(a[prop] < b[prop]) return -1;\n    if(a[prop] > b[prop]) return 1;\n    return 0;\n  });\n  return arr;\n};\n\nconst calcItemIndex = (offSet, moduleSize, index) => {\n  const itemIndex = \n        (offSet + index) % moduleSize === 0 \n          ? offSet\n          : offSet + (offSet + index) % moduleSize;\n  return itemIndex;\n};\n\nconst capitaliseFirst = str => {\n  const text = str.substr(0, 1).toUpperCase() + str.substr(1).toLowerCase();\n  return text;\n};\n\nconst capitaliseAll = str => {\n  const text = str.toLowerCase()\n    .split(' ')\n    .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n    .join(' ');\n  return text;\n};\n\nconst getCellValue = function(tr, idx, headerSortIndex, wide){\n  let children = tr.children;\n  if(!wide) {\n    children = [...tr.children].filter(child => [...child.classList].join('').indexOf('wide-screen') === -1);\n  }\n  const valueToSortOn = \n    children[idx].dataset.snapIndex ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.vernacularName) ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.name) ||\n    children[idx].children[headerSortIndex].innerText ||\n    children[idx].innerText || \n    children[idx].classList[0] || \n    children[idx].textContent;\n  return valueToSortOn;\n}\n\nconst comparer = function(idx, asc, headerSortIndex, wide) { return function(a, b) { return function(v1, v2) {\n      const isNumericallyComparible = v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2);\n      return isNumericallyComparible ? v1 - v2 : v1.toString().localeCompare(v2.toString());\n    }(getCellValue(asc ? a : b, idx, headerSortIndex, wide), getCellValue(asc ? b : a, idx, headerSortIndex, wide));\n}};\n\n// https://stackoverflow.com/questions/14267781/sorting-html-table-with-javascript/14268260\n\nconst makeSortable = (document, callback, wide) => {\n\n  Array.from(document.querySelectorAll('th > span')).forEach(function(sp) { sp.addEventListener('click', function() {\n\n          const headerSortIndex = this.innerText.toUpperCase() === 'ORDER' ? 1 : 0;\n\n          const names = [];\n          var th = this.parentElement;\n          if(th.classList[0] === 'not-sortable') return;\n          var table = th.closest('table');\n          var tbody = table.querySelector('tbody');\n          var footer = table.querySelector('tfoot');          \n\n          snapLog('Array.from(tbody.querySelectorAll(\"tr\")): ', Array.from(tbody.querySelectorAll('tr')));\n\n          Array.from(tbody.querySelectorAll('tr'))\n              .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc, headerSortIndex, wide))\n              .forEach(function(tr) { \n                if(tr !== footer) {\n                  tbody.appendChild(tr);\n                  names.push(tr.cells[0].id);\n                }\n              });        \n\n            callback(names);\n      })\n  });\n};\n\nconst flatten = array => {\n  const flattenedArray = array.reduce(\n    function(accumulator, currentValue) {\n      return accumulator.concat(currentValue);\n    },\n    []\n  );\n  return flattenedArray;\n}\n\nconst getObservableMonths = (date, span = 3) => {\n\n  const daysAway = (when, days) => {\n      let dateFromDays = date;\n      const direction = when === 'future' ? 1 : -1;\n      dateFromDays.setDate(dateFromDays.getDate() + direction * days);\n      return dateFromDays;\n  };\n\n  const startMonth = daysAway('past', 30).getMonth();\n  const thisMonth = date.getMonth() + 1;\n  const endMonth = daysAway('future', 30).getMonth() + 1;\n\n  const getMonthName = month => {    \n    const exampleDate = new Date(2000, month, 1);\n    const name = exampleDate.toLocaleString('en-uk', { month: 'long' });\n    return name;\n  }\n\n  const months = [ \n      { index: startMonth, name: getMonthName(startMonth)}, \n      { index: thisMonth, name: getMonthName(thisMonth)}, \n      { index: endMonth, name: getMonthName(endMonth)}\n    ];\n\n  return months;\n};\n\nconst getRandomInt = max => {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nconst createSessionToken = () => {\n\n  // uuidv4\n\n  // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript#answer-2117523\n\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nconst getRandomObjectProperty = obj => {\n  if(Object.keys(obj).length === 0 && obj.constructor === Object) return {};\n  const keys = Object.keys(obj);\n  const index = Math.floor(Math.random() * keys.length);\n  const key = keys[index];\n\treturn { key, value: obj[key] };\n};\n\nconst toCamelCase = sentenceCase => {\n  if(sentenceCase === undefined) return '';\n  var out = \"\";\n  sentenceCase.split(\" \").forEach(function (el, idx) {\n      var add = el.toLowerCase();\n      out += (idx === 0 ? add : add[0].toUpperCase() + add.slice(1));\n  });\n  return out;\n};\n\nconst fromCamelCase = str => {\n  if(str === undefined) return '';\n  return str.replace(/([a-z])([A-Z])/g, '$1 $2').toLowerCase();\n};\n\nconst parseToLowerCase = value => {\n  if(value === undefined || value === null) return '';\n  else if(typeof value === 'object') return value;\n  else return !!value ? value.toLowerCase() : '';\n};\n\nexport const utils = {\n  encodeQuery,\n  timer, \n  shuffleArray,\n  randomiseSelection,\n  onlyUnique,\n  sortBy,\n  sortAlphabeticallyBy,\n  calcItemIndex,\n  capitaliseFirst,\n  capitaliseAll,\n  makeSortable,\n  flatten,\n  getObservableMonths,\n  getRandomInt,\n  createSessionToken,\n  getRandomObjectProperty,\n  toCamelCase,\n  fromCamelCase,\n  parseToLowerCase\n};","// Module\nvar code = \"<figure> <figcaption class=hide>{{ title }}</figcaption> <audio controls src=\\\"{{ mp3 }}\\\"> Your browser does not support the <code>audio</code> element. </audio> </figure>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"relative lesson-list-carousel-item js-lesson-list-carousel-item\\\"> <div class=\\\"landscape double-centred-block\\\"> <img class=lesson-icon src=\\\"{{ lesson.icon }}\\\" alt=\\\"{{ lesson.name }}\\\"> </div> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-list-item js-lesson-list-item\\\" data-has-video=\\\"{{ lesson.hasVideo }}\\\"> <div> <div class=\\\"lesson-name js-lesson-title\\\" data-lesson-id=\\\"{{ lesson.id }}\\\"> <span data-toggle=modal data-target=#basicModal id=\\\"lesson_{{ lesson.id }}\\\" class=\\\"lesson-title margin-right {{ lesson.isCollectionEditableClass }}\\\">{{ lesson.name }}</span> </div> <div class=lesson-taxa data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.taxa }}</div> <div class=\\\"latin hide-empty js-lesson-video-state\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.videoState }}</div> </div> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-review js-lesson-review\\\"> <div class=flex> <div class=\\\"centred-block fit-width\\\"> <span class=\\\"lesson-terms-review {{ lesson.hasTermsClass }} margin-right fit-width js-terms-review-link\\\" data-toggle=modal data-target=#glossaryModal data-lesson-id=\\\"{{ lesson.id }}\\\"> <button data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"vocab test for {{ lesson.name }} lesson\\\" class=\\\"btn snap-btn extra-small-text\\\" data-toggle=modal data-target=#glossaryModal>Vocab test</button> <span> </span></span></div> <div class=\\\"vertical-centred-block relative\\\"> <span class=\\\"\\\"> <button data-toggle=modal data-target=#lessonModal data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"landscape btn snap-btn extra-small-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button> <button data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"portrait btn snap-btn extra-small-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button> </span> <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide-important inline-progress-container js-review\\\"> <span class=absolute>&nbsp;</span> </span> <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide margin-right js-loading-review-message\\\"> <span><i class=\\\"fas fa-sync slow-spin\\\"></i></span> </span> </div> </div> </div> </div> <div class=\\\"lesson-list-action-icons js-lesson-list-action-icons\\\"> <div class=\\\"\\\"> <button data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-is-youtube-icon=true class=\\\"snap-icon-btn fit-width js-lesson-list-youtube\\\" aria-label=\\\"play video for the lesson {{ lesson.name }}\\\"> <i class=\\\"fab fa-youtube youtube-icon {{ lesson.hideVideoClass }}\\\"></i> <i class=\\\"fas fa-glasses youtube-icon {{ lesson.hideTextIntroClass }}\\\"></i> </button> <button data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"landscape snap-icon-btn fit-width js-lesson-list-chevron\\\" aria-label=\\\"species list for the lesson {{ lesson.name }}\\\"> <i class=\\\"fas fa-chevron-down\\\"></i> </button> </div> </div> </div> <div data-container-id=\\\"{{ lesson.id }}\\\" class=\\\"species-container js-species-container\\\"></div> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"standard-block border-bottom double-centred-block\\\"></div> <div class=tiles-container> <div class=\\\"squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\"> <div> <img class=square src=\\\"{{ image.medium }}\\\" data-toggle=modal data-target=#imageModal data-item-name=\\\"{{ image.itemName }}\\\" data-url=\\\"{{ image.url }}\\\"/> </div> </div> </div> <div class=lesson-companion> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"imageSlider_{{ identifier }}\\\" class=\\\"imageSlider carousel slide\\\" data-ride=carousel data-interval=false> <div class=\\\"carousel-inner js-carousel-inner no-pointer-events\\\"> <div data-repeat-image=\\\"{{ images }}\\\"> <div class=\\\"carousel-item image-slider-190\\\"> <img role=button src=\\\"{{ image.medium }}\\\" data-title=\\\"{{ image.itemName }}\\\" data-source=\\\"{{ image.source }}\\\" data-license=\\\"{{ image.license }}\\\" data-rights-holder=\\\"{{ image.rightsHolder }}\\\" data-photographers-name=\\\"{{ image.photographersName }}\\\" data-url=\\\"{{ image.url }}\\\" data-provider=\\\"{{ image.provider }}\\\" data-item-name=\\\"{{ image.itemName }}\\\" data-index=\\\"{{ image.index }}\\\" alt=\\\"Give {{ image.itemName }} as your answer\\\"> </div> </div> <div> <div class=\\\"attribution-layer js-attribution-layer {{ identifier }}\\\"></div> <ol class=\\\"carousel-indicators js-carousel-indicators\\\" data-repeat-image=\\\"{{ images }}\\\"> <li data-target=#carouselExampleIndicators data-slide-to=\\\"{{ image.index }}\\\"></li> </ol> </div> </div> <a class=carousel-control-prev href=\\\"#imageSlider_{{ identifier }}\\\" role=button data-slide=prev data-slider=\\\"#imageSlider_{{ identifier }}\\\"> <button class=\\\"btn snap-icon-btn carousel-control-prev-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button> <button class=sr-only>Previous</button> </a> <div class=carousel-control-next href=\\\"#imageSlider_{{ identifier }}\\\" role=button data-slide=next data-slider=\\\"#imageSlider_{{ identifier }}\\\"> <button class=\\\"btn snap-icon-btn carousel-control-next-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button> <button class=sr-only>Next</button> </div> <div class=\\\"description_{{ identifier }} image-description\\\"></div> <div class=double-centred-block></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=attribution-layer> <div class=\\\"rights-link js-rights-link\\\"> <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\"> <i class=\\\"fas fa-copyright\\\"></i> </div> <div></div> <div class=\\\"rights-link-copyright double-centred-block\\\"> <a href=\\\"{{ large }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <i class=\\\"fas fa-external-link-alt\\\"></i> </a> </div> </div> <div class=\\\"rights-attribution hide-important js-rights-attribution\\\"> <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\"> <i class=\\\"fas fa-copyright\\\"></i> </div> <div class=double-centred-block> <a href=\\\"{{ source }}\\\" target=_blank> <span class=centred-block> <span class=sr-only>Opens in new window</span> <span class=\\\"underline-link half-margin-right\\\">{{ author }}</span> <i class=\\\"super active-icon fas fa-external-link-alt\\\"></i> </span> </a> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span class=\\\"feature-label js-compare-species-label\\\"></span> <span title=\\\"Lookalike species\\\" class=\\\"landscape compare-species-link js-compare-species-link\\\" data-toggle=modal data-target=#imageComparisonModal data-slides=\\\"{{ slides }}\\\"> <i class=\\\"fas fa-clone\\\"></i> </span> <span title=\\\"Lookalike species\\\" class=\\\"portrait compare-species-link js-compare-species-link\\\"> <i class=\\\"fas fa-clone\\\"></i> </span>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=js-relationship-card-list data-repeat-lookalike=\\\"{{ lookalikes }}\\\"> <div class=lookalike-card> <div>{{ lookalike.species }}</div> <div>{{ lookalike.speciesDescription }}</div> <div class=js-test-card-container-link> <span data-toggle=\\\"{{ lookalike.modal }}\\\" data-target=#cardModal class=\\\"{{ lookalike.className }}\\\" id=\\\"{{ lookalike.lookalike }}\\\">{{ lookalike.lookalike }}</span> </div> <div>{{ lookalike.lookalikeDescription }}</div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div class=js-relationship-card-list data-repeat-relationship=\\\"{{ relationships }}\\\"> <div class=relationship-card> <div class=cols> <div>Relationship</div><div>{{ relationship.type }}</div> </div> <div class=cols> <div class=js-test-card-container-link> <span data-toggle=\\\"{{ relationship.modal }}\\\" data-target=#cardModal class=\\\"{{ relationship.className }}\\\" id=\\\"{{ relationship.speciesA }}\\\">{{ relationship.speciesA }}</span> </div> <div class=capitalise>{{ relationship.speciesARole }}</div> </div> <div class=cols> <div>{{ relationship.speciesB }}</div><div class=capitalise>{{ relationship.speciesBRole }}</div> </div> <div>{{ relationship.description }}</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=id-box> <div>{{ id }}</div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div data-repeat-detail=\\\"{{ details }}\\\"> <dl class=info_detail> <dt>{{ detail.term }}</dt> <dd><img class=\\\"{{ detail.imgClassName }}\\\" src=\\\"{{ detail.img.url }}\\\" alt=\\\"\\\"></dd> <dd>{{ detail.definition }}</dd> </dl> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"traitSlider{{ id }}\\\" class=\\\"info carousel slide\\\" data-ride=false data-interval=false> <div class=carousel-inner data-repeat-trait=\\\"{{ traits }}\\\"> <dl class=carousel-item> <div> <dt>{{ trait.name }}</dt> <dd>{{ trait.value }} {{ trait.unit }}</dd> </div> <div class=hide-important>{{ trait.description }}</div> </dl> </div> <a class=\\\"carousel-control carousel-control-prev\\\" href=\\\"#traitSlider{{ id }}\\\" role=button data-slide=prev> <button class=carousel-control-prev-icon aria-hidden=true></button> <button class=sr-only>Previous</button> </a> <a class=\\\"carousel-control carousel-control-next\\\" href=\\\"#traitSlider{{ id }}\\\" role=button data-slide=next> <button class=carousel-control-next-icon aria-hidden=true></button> <button class=sr-only>Next </button></a> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=data-box> <div> <span class=js-world>Worldwide</span><span class=js-taxon-count>---</span> </div> <div> <span class=js-place>Location</span><span class=js-place-taxon-count>---</span> </div> <div> <span><a target=_blank href=\\\"\\\" class=\\\"underline-link js-taxon-link underline-link-left-margin\\\">iNat</a></span> <span class=js-test-card-container-wiki></span> <span><a class=\\\"species-card-eol-link js-test-card-container-eol-link underline-link\\\">EOL</a></span> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=calendar-box> <div data-repeat-row=\\\"{{ data }}\\\" class=\\\"\\\"> <div class=col data-repeat-value=\\\"{{ row }}\\\"> <div title=\\\"{{ value.count }}\\\" class=\\\"{{ value.class }}\\\">{{ value.month }}</div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span> <span class=\\\"uppercase small-text js-native-container\\\"></span> <span class=rank>{{ trait }}</span> <span class=\\\"lookalikes js-lookalikes\\\"></span> <span class=\\\"badge badge-light js-subspecies-badge\\\" data-toggle=modal data-target=#badgeListModal>{{ subSpeciesCount }}</span> <span class=sr-only>species of this family in the collection</span> </span> <span class=hide-empty>{{ familyVernacularName }}</span> <span class=\\\"latin hide-empty\\\">{{ familyName }}</span> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul data-repeat-language=\\\"{{ languageNames }}\\\" class=\\\"scrollable badge-list\\\"> <li class=capitalise> <div class=\\\"margin-top uppercase\\\">{{ language.name }}</div> <ul data-repeat-common=\\\"{{ language.names }}\\\"> <li>{{ common }}</li> </ul> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=\\\"card-card js-species-card\\\"> <div id=card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container vernacular-name-badge js-names-container\\\"> <div> <span class=vernacular-name>{{ vernacularName }}</span> </div> <div> <span class=binomial>{{ name }}</span> <span class=js-names-badge></span> <span class=\\\"portrait bird-song-icon-disabled js-bird-song-player\\\" data-src=player data-toggle=modal data-target=#basicModal> <i class=\\\"fas fa-music\\\"></i> </span> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"data-box-container landscape\\\"> <div class=\\\"calendar-container landscape\\\"> <div class=js-calendar-box></div> </div> <div class=\\\"inat-box js-inat-box\\\"></div> <div class=\\\"taxa-container landscape js-taxa-box\\\"></div> </div> <div class=\\\"portrait-grid species-card-images carousel js-test-card-container-images\\\"></div> <div class=\\\"mixed-content-container scrollable\\\"> <div class=\\\"landscape bird-song\\\"> <div class=hide-empty> <iframe class=js-bird-song src=\\\"\\\" scrolling=no frameborder=0 width=80vw height=115> </iframe> </div> </div> <div class=\\\"card-txt-block lookalikes js-lookalikes\\\"></div> <div class=\\\"js-info-box-details info-details\\\"></div> </div> <div class=\\\"info-box js-info-box\\\"></div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container\\\"> <div class=\\\"taxon card-card js-taxon-card\\\"> <div id=taxon-card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container vernacular-name-badge js-names-container\\\"> <div> <span>{{ vernacularName }}</span> </div> <div> <span class=binomial>{{ name }}</span> <span class=\\\"names-badge js-names-badge\\\" data-toggle=modal data-target=#badgeListModal>{{ occurrences }}</span> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"data-box-container sub-header\\\"> <div class=data-box> <div class=\\\"taxon-data js-taxon-rank\\\"><span>Rank</span> <span>{{ rank }}</span></div> <div class=taxon-data><span>Species</span> <span>{{ species }}</span></div> <div class=\\\"taxon-data js-taxon-genus\\\"><span>Genera</span> <span>{{ genera }}</span></div> <div class=\\\"taxon-data js-taxon-family\\\"><span>Families</span> <span>{{ families }}</span></div> </div> <div class=\\\"landscape external-links js-external-links\\\"> <div><a href=\\\"{{ eol }}\\\" target=_blank class=underline-link>EOL</a><span> taxon home page</span> <span class=names-badge> <i class=\\\"super fas fa-external-link-alt\\\"></i></span></div> <div><a href=\\\"{{ wiki }}\\\" class=underline-link data-toggle=modal data-target=#wikiModal>Wikipedia page</a></div> </div> </div> <div class=mixed-content-container> <div class=centred-block> <div class=id-box-container> <div class=id-box> <div> </div> <div> <div class=taxon-identification>{{ identification }}</div> </div> </div> </div> <div class=taxon-summary> <div>{{ summary }}</div> </div> </div> </div> <div class=\\\"info-box js-taxon-info-box\\\"></div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=\\\"portrait-grid non-taxon-card-images carousel js-non-taxon-card-images\\\"></div> <div class=\\\"card-card card non-taxon js-non-taxon-card\\\"> <div id=taxon-card-header class=question-container> <div class=\\\"species-header js-species-header\\\"> <img src=\\\"{{ image.small }}\\\" alt=\\\"\\\"> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container js-names-container\\\"> <div> Foliose </div> <div> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"non-taxa js-non-taxa\\\"> <div class=\\\"btn-group btn-group-toggle\\\" data-toggle=buttons data-repeat-taxon=\\\"{{ group }}\\\"> <label class=\\\"btn btn-secondary\\\" id=\\\"{{ taxon.id }}\\\"> <input type=radio name=options id=\\\"{{ taxon.id }}\\\" autocomplete=off checked=checked> {{ taxon.id }} </label> </div> </div> <div class=definitions> <div class=\\\"non-taxa-definition js-non-taxa-definition\\\"> <div></div> </div> <div class=non-taxa-definition> <div class=id-box> <div> <div class=landscape></div> <div class=portrait></div> </div> <div> <div></div> </div> </div> </div> <div class=\\\"landscape species-card-wiki\\\"> <span class=\\\"non-taxon-card-wiki js-non-taxon-card-wiki\\\"></span> </div> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<table id=\\\"species_list_id_{{ id }}\\\" class=\\\"species-table js-species-list\\\" style=width:100%> <tbody data-repeat-item=\\\"{{ itemImages }}\\\"> <tr class=\\\"table-row master js-list-item\\\" id=\\\"id_{{ item.id }}\\\"> <td id=\\\"{{ item.name }}\\\" data-snap-index=\\\"{{ item.snapIndex }}\\\"> <button class=\\\"btn snap-icon-btn double-centred-block\\\"> <img id=\\\"{{ item.name }}\\\" src=\\\"{{ item.small }}\\\" alt=\\\"Open gallery to more photos of {{ item.name }}\\\" data-toggle=modal data-item-name=\\\"{{ item.name }}\\\" data-target=#imageModal data-id=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rights-holder=\\\"{{ item.rightsHolder }}\\\" data-title=\\\"{{ item.name }}\\\" data-license=\\\"{{ item.license }}\\\" data-source=\\\"{{ item.source }}\\\" data-provider=\\\"{{ item.provider }}\\\"> </button> </td> <td> <button data-toggle=modal data-name=\\\"{{ item.name }}\\\" data-vernacular-name=\\\"{{ item.vernacularName }}\\\" data-id=\\\"{{ item.id }}\\\" data-type=speciesCardLink data-target=#cardModal class=\\\"snap-link-btn underline-link js-test-card-container-link\\\">{{ item.vernacularName }}</button> <span class=\\\"no-underline-link latin-name\\\"> <button data-toggle=modal data-name=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=genus data-genus=\\\"{{ item.genus }}\\\" data-target=#cardModal class=\\\"{{ item.genusLinkClass }}\\\">{{ item.genus }}</button> <span>{{ item.species }}</span> </span> </td> <td class=wide-screen> <button data-toggle=modal data-name=\\\"{{ item.taxonomy.family }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=family data-family=\\\"{{ item.taxonomy.family }}\\\" data-target=#cardModal class=\\\"no-underline-link {{ item.familyLinkClass }}\\\">{{ item.taxonomy.family }}</button> <button data-toggle=modal data-name=\\\"{{ item.taxonomy.order }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=order data-order=\\\"{{ item.taxonomy.order }}\\\" data-target=#cardModal class=\\\"no-underline-link {{ item.orderLinkClass }} js-order-link\\\">{{ item.taxonomy.order }}</button> </td> <td class=\\\"{{ item.iconicTaxon }} {{ item.hasTaxonClassName }}\\\"> <span id=\\\"{{ item.id }}\\\" name=\\\"{{ item.name }}\\\"><i class=\\\"{{ item.iconicTaxonIcon }}\\\"></i></span> <span class=\\\"mushroom-icon {{ item.hideFungiIcon }}\\\"></span> </td> <td class=\\\"{{ item.hasVideoClassName }}\\\"> <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width js-youtube\\\" aria-label=\\\"start video from the species {{ item.name }}\\\"> <i class=\\\"fab fa-youtube youtube-icon\\\" data-name=\\\"{{ item.name }}\\\"></i> </button> </td> <td class=\\\"{{ item.hasVideoClassName }}\\\"> <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width accordion-icon js-accordion\\\" aria-label=\\\"video commentary for the species {{ item.name }}\\\"> <i data-name=\\\"{{ item.name }}\\\" class=\\\"fas fa-chevron-down\\\"></i> </button> </td> </tr> </tbody> </table> <button class=\\\"btn snap-action-btn portrait btn-current-lesson-begin js-btn-current-lesson-begin\\\">Quiz</button>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container js-home-scrolling-container\\\"> <div class=\\\"title standard-block double-centred-block\\\">{{ video.title }}</div> <div class=video> <div style=min-height:1px></div> <iframe type=text/html id=embedded-video width=100% src=\\\"https://www.youtube.com/embed/{{ video.id }}?enablejsapi=1&playsinline=1&start={{ video.playAt }}\\\" frameborder=0 allowfullscreen> </iframe> </div> <div class=scrollable> <div class=\\\"one-and-half-standard-block centred-block justify-space-between padding-left\\\"> <div class=centred-block> <div class=margin-right> <img width=48px height=48px src=\\\"{{ video.src }}\\\" alt=\\\"\\\"> </div> <div class=vertical-centred-block> <div><span class=\\\"hide margin-right\\\">Created by:</span><span class=emphasis>{{ video.presenter }}</span></div> <div><span class=\\\"hide margin-right\\\">Location:</span><span class=font-size-small>{{ video.location }}</span></div> </div> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div>{{ note.tag }}</div> <div>{{ note.description }}</div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container score-summary-container js-test-card-container\\\"> <div class=js-summary-card> <div class=\\\"test-card-question standard-block centred-block js-test-card-question\\\"> <div class=\\\"question question-txt\\\"> <div> <span class=\\\"hide-empty question-question js-question-question\\\">Quiz progress</span> <span class=\\\"hide-empty question-statement\\\"></span> </div> </div> </div> <div id=accordion class=\\\"score-summary scrollable review-summary\\\"> <div class=score-summary-row-title> <div> <div class=double-centred-block> <span class=uppercase>{{ collection.name }}</span> </div> <div class=double-centred-block> <span>Round {{ lesson.currentRound }} of {{ lesson.rounds }}</span> </div> </div> </div> <div class=\\\"score-summary-footer running-block centred-block\\\"> <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button> </div> <div class=js-score-summary-rows></div> <div class=\\\"score-summary-footer running-block centred-block\\\"> <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button> </div> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"score-summary-row species\\\"> <div></div> <div> <div></div> <div> <span>{{ vernacularName }}</span> <span class=latin>{{ binomial }}</span> </div> </div> <div>{{ score }}</div> </div> <div data-repeat-row=\\\"{{ rows }}\\\"> <div class=\\\"collapsed score-summary-row header\\\" data-toggle=collapse data-target=\\\"#{{ row.id }}\\\" aria-expanded=false aria-controls=\\\"{{ row.id }}\\\"> <div data-is-true=\\\"{{ row.success }}\\\"> <i class=\\\"fas fa-check\\\"></i> <i class=\\\"fas fa-times\\\"></i> </div> <div> <div class=binomial>{{ row.statement }}</div> <div>{{ row.questionText }}</div> </div> <div> <i class=\\\"fas fa-chevron-down\\\"></i> </div> </div> <div id=\\\"{{ row.id }}\\\" class=\\\"collapse score-summary-row in-columns\\\" data-repeat-answer=\\\"{{ row.answers }}\\\" data-parent=#accordion> <div data-question=\\\"{{ ^.row.question }}\\\"> <div> </div> <div data-is-true=\\\"{{ answer.isTrue }}\\\" data-is-wrong-answer=\\\"{{ answer.isWrongAnswer }}\\\"> <div> <img data-has-image=\\\"{{ answer.hasImage }}\\\" src=\\\"{{ answer.url }}\\\" alt=\\\"{{ answer.value }}\\\"> </div> <div> <span>{{ answer.value }}</span><span class=\\\"hide-empty margin-left\\\">{{ answer.name }}</span> </div> <div></div> </div> <div></div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"horizontal-evenly-spaced-block js-no-questions\\\"> <span>You haven't answered any questions yet.</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=js-test-card> <div id=test-card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container {{ headerClassName }}\\\"> <div> <h2 class=vernacular-name>{{ vernacularName }}</h2> <span class=\\\"hide-empty names-badge\\\"></span> </div> <div> <h2 class=binomial>{{ binomial }}</h2> <span class=\\\"names-badge traits-count-badge js-traits-count-badge\\\"></span> <h2 class=\\\"term-header hide-empty js-term-header\\\">{{ term }}</h2> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <form action=\\\"\\\"> <fieldset> <div class=\\\"test-card-question standard-block centred-block js-test-card-question border-bottom\\\"> <div class=\\\"question question-txt {{ className }}\\\"> <div> <legend class=\\\"hide-empty question-question js-question-question\\\">{{ question }}</legend> <legend class=\\\"hide-empty question-help js-question-help\\\">{{ help }}</legend> <legend class=\\\"hide-empty question-statement js-statement-para\\\">{{ statement }}</legend> <legend class=\\\"hide-empty margin-top question-provider-question js-question-para\\\">{{ providerQuestion }}</legend> </div> </div> </div> <div class=\\\"test-card-content js-test-card-content scrollable\\\"> </div> </fieldset> </form> <div class=\\\"text-question js-txt-question\\\"></div> <div class=action-update-container> <div class=action-update> <button disabled=disabled class=\\\"btn snap-action-btn js-continue-lesson-btn\\\">Continue lesson</button> </div> </div> </div> </div> <div class=\\\"swap-out-card js-species-container\\\"></div> <div class=\\\"swap-out-card js-taxon-container\\\"></div> <div class=\\\"swap-out-card js-summary-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=filter-language-option-block> <div class=filter-options> <div class=language-options> <div class=dropdown> <button class=\\\"btn smaller-text snap-btn dropdown-toggle\\\" type=button id=taxonLanguageBtn data-toggle=dropdown aria-haspopup=true aria-expanded=false> Taxon language </button> <div class=dropdown-menu aria-labelledby=dropdownMenuButton data-repeat-language=\\\"{{ languages }}\\\"> <a id=\\\"{{ language.lang }}\\\" class=dropdown-item href=#>{{ language.name }}</a> </div> </div> </div> </div> <h2 class=\\\"half-standard-block centred-block\\\">Common names will be shown in<span id=taxonLanguageTxt>English</span>.</h2> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<menu> <ul class=custom-lesson-menu-options data-repeat-option=\\\"{{ options }}\\\"> <li data-option=\\\"{{ option.id }}\\\"> <button class=\\\"icon snap-icon-btn arrow-wrapper\\\"><span class=small-text>{{ option.text }}</span><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></button> </li> </ul> </menu> <hr class=\\\"double-margin-top double-margin-bottom\\\"> <div class=js-language-selection-container></div> <h3 class=\\\"standard-block centred-block js-persistence-warning\\\"> <span><i class=\\\"fas fa-exclamation\\\"></i> You are not currently logged in. Your collection will not be availble outside this browser.</span> </h3>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=border-bottom> <div class=\\\"running-block vertical-centred-block location-option html5-location\\\"> <div class=html5-location-place><button class=\\\"btn snap-action-btn js-set-location-btn\\\"></button><span class=landscape></span></div> </div> <div class=\\\"standard-block location-option place bottom-aligned\\\"> <form id=locationForm action=#> <div class=standard-block> <label for=#inat-place class=extra-small-text>Location</label> <input id=inat-place type=text placeholder=\\\"Or start typing the name of a place.\\\"> <input class=hide type=submit value=\\\"\\\"> </div> </form> </div> <div class=\\\"location-option margin-top range\\\"> <div class=range-slider> <div class=js-range></div> <div> <span class=range-limits>0km</span> <span class=margin-right style=width:100%><input class=\\\"set-range-input js-set-range-input\\\" type=range min=0 max=250 value=10></span> <span class=range-limits> 250km</span> <span class=\\\"saved js-range-saved\\\"></span> </div> </div> </div> </div> <div class=location-filter-options> <div> <div class=black-text>Species by season</div> <div class=\\\"season snap-switch margin-top margin-bottom\\\"> <div class=embedded-switch> <div class=txt-left><span>{{ observableMonths }}</span></div> <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\"> <div></div> </div> <div class=txt-right><span>All Year</span></div> </div> </div> </div> <div> <div class=black-text>Species by observation count</div> <div class=\\\"margin-top margin-bottom\\\"> <span> Top <input min=1 max=500 required class=\\\"medium half-margin-right js-location-no-of-records\\\" type=number value=\\\"{{ noOfRecords }}\\\"> most observed. </span> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div class=\\\"inat snap-switch running-block\\\"> <div class=embedded-switch> <div class=txt-left><span>iNaturalist User</span></div> <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\"> <div></div> </div> <div class=txt-right><span>Project</span></div> </div> </div> <div class=\\\"location-option inat-entry\\\"> <div class=\\\"input-container standard-block bottom-aligned\\\"> <form id=inatForm action=#> <input id=inat-identity type=text placeholder=\\\"Start typing a user or project Id.\\\"> </form> </div> </div> <div class=\\\"location-option chosen-guide-filter js-chosen-inat standard-block\\\"> <div>Learn more about <a href=https://www.inaturalist.org/ target=_blank class=underline-link>iNaturalist</a>.</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"iconic-taxa-categories js-iconic-taxa-categories\\\"> <div class=double-centred-block id=aves><div> <button class=snap-icon-btn aria-label=birds><i class=\\\"fas fa-dove\\\" aria-hidden=true></i></button> <div>Birds</div></div> </div> <div class=double-centred-block id=amphibia><div> <button class=snap-icon-btn aria-label=amphibians><i class=\\\"fas fa-frog\\\" aria-hidden=true></i></button> <div>Amphibians</div></div> </div> <div class=double-centred-block id=mammalia><div> <button class=snap-icon-btn aria-label=mammals><i class=\\\"fas fa-paw\\\" aria-hidden=true></i></button> <div>Mammals</div></div> </div> <div class=double-centred-block id=insecta><div> <button class=snap-icon-btn aria-label=insects><i class=\\\"fas fa-bug\\\" aria-hidden=true></i></button> <div>Insects</div></div> </div> <div class=double-centred-block id=fungi><div> <button class=snap-icon-btn aria-label=\\\"fungi and lichens\\\"><svg-icon class=si-glyph-mushrooms><src href=./icons/si-glyph-mushrooms.svg /></svg-icon></button> <div class=small-text>Fungi & Lichens</div></div> </div> <div class=double-centred-block id=plantae><div> <button class=snap-icon-btn aria-label=plants><i class=\\\"fas fa-leaf\\\" aria-hidden=true></i></button> <div>Plants</div></div> </div> <div class=double-centred-block id=reptilia><div> <button class=snap-icon-btn aria-label=reptiles><i class=\\\"far fa-registered\\\" aria-hidden=true></i></button> <div>Reptiles</div></div> </div> <div class=double-centred-block id=lepidoptera><div> <button class=snap-icon-btn aria-label=\\\"butterflies and moths\\\"><i class=\\\"fas fa-barcode\\\" aria-hidden=true></i></button> <div class=small-text>Butterflies & Moths</div></div> </div> </div> <div class=\\\"hide-important guide-bottom-actions\\\"> <span>Know what you want?</span> <span class=\\\"underline-link species-picker-link js-species-picker-link\\\">Species picker</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"guide-text-container hide-empty\\\"> <input id=input-species type=text placeholder=\\\"Start typing a latin species name\\\" autofocus> </div> <div class=\\\"autocomplete-options-container hide-important\\\" id=snapdragon-species-autocomplete style=width:unset></div> <ul class=\\\"selected-species js-selected-species\\\" data-repeat-species=\\\"{{ selectedSpecies }}\\\"> <li class=\\\"custom-control custom-checkbox\\\"> <input type=checkbox class=custom-control-input id=\\\"{{ species.name }}\\\" checked=checked> <label class=custom-control-label for=\\\"{{ species.name }}\\\">{{ species.name }}</label> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <input id=input-species type=text placeholder=\\\"Start typing a latin species name\\\" autofocus> </div> <div class=\\\"autocomplete-options-container hide-important\\\" id=snapdragon-species-autocomplete style=width:unset></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=selected-species-container> <div class=\\\"scrollable open js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div class=\\\"species-search js-species-search\\\"> <div><div class=icon><i class=\\\"fas fa-sun slow-spin\\\"></i></div></div> <h2 class=standard-block>This search is based on observations recorded by the public on <a class=underline-link target=_blank href=https://www.inaturalist.org/ >iNaturalist</a>.</h2> </div> <div> <div class=\\\"hide-empty request-feedback js-request-feedback\\\">Contacting iNaturalist…</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\"> <div class=\\\"lesson-name hide-important\\\" id=js-input-collection-name> <label for=#new-collection-name class=extra-small-text>lesson name</label> <input id=new-collection-name type=text value=\\\"{{ collection.name }}\\\"> </div> <div class=lesson-taxa><span class=js-lesson-taxa-count>{{ collection.items.length }}</span> <span class=js-lesson-taxa>{{ collection.taxa }}</span></div> </div> <div class=\\\"edit-species centred-block half-standard-block js-edit-species\\\"> <button class=\\\"snap-btn fit-width\\\">Edit lesson</button> </div> <div class=selected-species-container> <div class=\\\"scrollable js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"{{ className }}\\\"> <div class=\\\"actions js-actions\\\"></div> <div class=\\\"save-your-changes js-save-your-changes\\\"></div> </div> <div class=\\\"chosen js-chosen\\\"> <div class=prop-value-block><span></span><span class=selected-text></span></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=snapdragon-container> <dl data-repeat-item=\\\"{{ glossary }}\\\" class=\\\"definition card scrollable\\\"> <dt>{{ item.term }}</dt><dd>{{ item.definition }}</dd> </dl> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"margin-left centred-block standard-block padding-top\\\"> Answer <input min=1 max=\\\"{{ quickFire.count }}\\\" required class=\\\"big half-margin-left half-margin-right js-input-quick-fire\\\" type=number value=\\\"{{ quickFire.count }}\\\"> <span class=landscape>questions selected at random from <span class=js-quick-fire-count>{{ quickFire.count }}</span> terms.</span> <span class=portrait>from <span class=js-quick-fire-count>{{ quickFire.count }}</span> terms.</span> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait padding\\\"></div> <ul class=\\\"quick-fire-taxa margin-left js-quick-fire-taxa\\\" data-repeat-taxon=\\\"{{ quickFire.filter.taxa }}\\\"> <li class=\\\"custom-control custom-checkbox\\\" data-name=\\\"{{ taxon.name }}\\\"> <input type=checkbox class=custom-control-input id=\\\"{{ taxon.name }}\\\" checked=checked> <label class=custom-control-label for=\\\"{{ taxon.name }}\\\">{{ taxon.name }}</label> <span data-taxon=\\\"{{ taxon.name }}\\\" class=\\\"\\\">{{ taxon.count }}</span> </li> </ul> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait padding\\\"></div> <div class=\\\"btn-group btn-group-toggle quick-fire-branches js-quick-fire-branches\\\" data-toggle=buttons data-repeat-branch=\\\"{{ branches }}\\\"> <label data-key=\\\"{{ branch.name }}\\\" class=\\\"btn btn-secondary margin-left active\\\" data-value=\\\"{{ branch.name }}\\\"> <input type=checkbox name=branches id=\\\"{{ branch.name }}\\\" autocomplete=off> {{ branch.name }} <span data-name=\\\"{{ branch.name }}\\\">{{ branch.count }}</span> </label> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait half-padding\\\"></div> <div class=\\\"btn-group btn-group-toggle margin-left quick-fire-options margin-bottom js-quick-fire-filter-options\\\" data-toggle=buttons data-repeat-option=\\\"{{ options }}\\\"> <label data-key=\\\"{{ option.key }}\\\" class=\\\"btn btn-secondary margin-right\\\" data-value=\\\"{{ option.value }}\\\"> <input type=radio name=options id=\\\"{{ option.key }}\\\" autocomplete=off> {{ option.value }} </label> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"low-relief-block standard-block centred-block horizontal-evenly-spaced-block\\\"> <div class=\\\"custom-control custom-checkbox\\\"> <input type=checkbox class=\\\"custom-control-input js-quick-fire-technical\\\" id=technical> <label class=custom-control-label for=technical>Include technical (advanced)</label> </div> <div> <div class=\\\"btn snap-action-btn js-quick-fire-reset\\\">Reset filters</div> </div> </div> <div class=\\\"centred-block absolute-bottom\\\"> <button class=\\\"btn snap-action-btn js-create-quick-fire\\\">Start quick-fire review</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"margin-left centred-block standard-block justify-space-between\\\"> <h2> <span>Question {{ total }} of {{ count }}</span> </h2> <div class=margin-right> <button class=\\\"btn snap-btn small-text js-quick-review-progress\\\">Progress</button> </div> </div> <div class=\\\"centred-block double-standard-block modal-background-relief border-light js-quick-fire-definition\\\"> <span class=padding>{{ question.definition }}</span> </div> <ul id=0 class=\\\"strips description margin-top js-quick-layouts js-quick-fire-options\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <li class=strip id=\\\"{{ answer.term }}\\\" role=group aria-label=\\\"answers to the question\\\"> <button class=snap-icon-btn data-answer-index=\\\"{{ answer.index }}\\\"> <span>{{ answer.term }}</span> </button> </li> </ul> <div id=1 class=\\\"hide vertical-block centred-block margin-top js-quick-layouts quick-fire-text-entry js-quick-fire-text-entry\\\"> <div class=\\\"centred-block standard-block\\\"> <input type=text placeholder=\\\"Enter the term that fits this description\\\"> </div> <div class=half-standard-block> <div class=\\\"hide centered-block js-quick-fire-hint\\\"> <span class=\\\"margin-left latin\\\">Hint: </span><span>The answer has two words.</span> </div> </div> </div> <div class=\\\"vertical-centred-block centred-block absolute-bottom\\\"> <div class=\\\"margin-left centred-block standard-block js-quick-fire-message\\\"></div> <div class=half-standard-block> Score {{ correct }} of {{ answered }} </div> <div class=action-update> <button disabled=disabled class=\\\"btn snap-action-btn js-continue-quick-fire-btn\\\">Continue lesson</button> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"justify-space-between centred-block margin-left standard-block js-quick-fire-summary\\\"> <div> <span>You have answered all of the questions.</span> </div> <div class=\\\"margin-right padding-left nowrap\\\"> <button class=\\\"btn snap-btn small-text js-quick-review-continue-review\\\">Vocab</button> </div> </div> <div class=\\\"border-light standard-block padding-left centred-block modal-background-relief js-score-text-summary\\\"> You have scored {{ score.correct }} out of {{ score.total }} so far. </div> <ul class=\\\"margin-top nav nav-pills nav-fill quick-review-tabs js-quick-review-tabs mb-3\\\" role=tablist> <li class=nav-item> <a class=nav-link href=# id=js-quick-review-correct data-toggle=pill role=tab> <span class=landscape>Correct answers</span> <span class=portrait>Correct</span> </a> </li> <li class=nav-item> <a class=\\\"nav-link active\\\" href=# id=js-quick-review-incorrect data-toggle=pill role=tab> <span class=landscape>Incorrect answers</span> <span class=portrait>Incorrect</span> </a> </li> </ul> <div class=\\\"scrollable accordions-container\\\"> <div id=accordion-correct data-type=js-quick-review-correct class=\\\"hide-important quick-review-answers js-quick-review-answers\\\" data-repeat-pass=\\\"{{ passes }}\\\"> <div class=\\\"card quick-fire-summary-row margin-bottom\\\"> <div class=\\\"card-header capitalise\\\" id=\\\"pass_header_{{ pass.index }}\\\"> <div data-toggle=collapse data-target=\\\"#pass_target_{{ pass.index }}\\\" aria-expanded=true aria-controls=\\\"pass_target_{{ pass.index }}\\\"> <div>{{ pass.term }}</div> </div> </div> </div> <div id=\\\"pass_target_{{ pass.index }}\\\" class=collapse aria-labelledby=\\\"pass_header_{{ pass.index }}\\\" data-parent=#accordion-correct> <div class=card-body> <div>{{ pass.definition }}</div> <div class=\\\"centred-block half-standard-block\\\"> <span class=sr-only>Opens in new window</span> <a class=\\\"small-text underline-link underline-link-left-margin {{ pass.showWikiClass }}\\\" href=\\\"{{ pass.wiki }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <span>View Wikipedia page for {{ pass.term }} in a new window</span> <i aria-hidden=true class=\\\"super fas fa-external-link-alt\\\"></i> </a> </div> </div> </div> </div> <div id=accordion-incorrect data-type=js-quick-review-incorrect class=\\\"quick-review-answers js-quick-review-answers\\\" data-repeat-fail=\\\"{{ fails }}\\\"> <div class=\\\"card quick-fire-summary-row margin-bottom\\\"> <div class=\\\"card-header capitalise\\\" id=\\\"fail_header_{{ fail.index }}\\\"> <div data-toggle=collapse data-target=\\\"#fail_target_{{ fail.index }}\\\" aria-expanded=true aria-controls=\\\"fail_target_{{ fail.index }}\\\"> <div>{{ fail.term }}</div> </div> </div> </div> <div id=\\\"fail_target_{{ fail.index }}\\\" class=collapse aria-labelledby=\\\"fail_header_{{ fail.index }}\\\" data-parent=#accordion-incorrect> <div class=card-body> <div>{{ fail.definition }}</div> <div class=\\\"centred-block half-standard-block\\\"> <a class=\\\"small-text underline-link underline-link-left-margin {{ fail.showWikiClass }}\\\" href=\\\"{{ fail.wiki }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <span>View Wikipedia page for {{ fail.term }} in a new window</span> <i aria-hidden=true class=\\\"super fas fa-external-link-alt\\\"></i> </a> </div> <div class=\\\"small-text margin-top\\\"><span>You answered: </span><span>{{ fail.answer }}</span></div> </div> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-header centred-block btn standard-block\\\"> <div class=\\\"standard-block js-toggle-element\\\"> <div> <div class=main-header> <h2>Lessons</h2> </div> </div> </div> <div class=\\\"margin-right standard-block js-toggle-control\\\"> <button data-toggle=modal data-target=#createGuide class=\\\"btn snap-btn margin-right small-text js-create-custom-lesson\\\">Create lesson</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container js-home-scrolling-container\\\"> <div class=\\\"title standard-block double-centred-block border-bottom\\\">{{ title }}</div> <div class=\\\"snapdragon-intro padding\\\"> <div class=half-standard-block> <span class=js-species-summary>{{ speciesSummary }}</span> </div> <div class=half-standard-block> <span>{{ season }}</span> </div> <div class=\\\"centred-block standard-block landscape js-intro-text\\\">{{ lessonIntro }}</div> </div> <div class=scrollable></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\"> <div class=lesson-name id=js-input-collection-name> <input type=text value=\\\"{{ collection.name }}\\\"> </div> <div class=\\\"margin-left lesson-taxa\\\"><span class=js-lesson-taxa-count>{{ collection.items.length }}</span> <span class=js-lesson-taxa>{{ collection.taxa }}</span></div> </div> <div class=selected-species-container> <div class=\\\"open scrollable js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list js-lesson-list\\\"> <ul class=\\\"scrollable js-lesson-container\\\" data-toggle=buttons> </ul> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"double-standard-block vertical-centred-block\\\"> <p>Clear all data (and delete your score).</p> <button class=\\\"btn snap-action-btn js-clear-cache-btn\\\">Clear all data</button> </div> <hr> <div class=\\\"half-standard-block centred-block\\\">Time for answer to remain visible:</div> <div class=delay-slider> <div class=\\\"standard-block double-centred-block\\\"> <span>0 secs</span> <input class=js-set-delay-input type=range min=0 max=5 value=\\\"{{ delay }}\\\"><span> 5 secs</span> </div> <button class=\\\"btn snap-action-btn js-set-delay-btn\\\">Set delay</button> <div class=\\\"half-standard-block centred-block js-delay-text\\\"></div> </div> <hr class=portrait> <div class=\\\"portrait js-language-selection-container\\\"></div> <hr class=portrait> <div class=\\\"portrait email centred-block\\\"> <a target=_blank href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\"> <i class=\\\"fas fa-envelope\\\"></i> </a> <span class=margin-left>Contact Snapdragon</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=modal-content> <div class=snapdragon-container> <div class=\\\"large-text centred-block standard-block\\\">User access</div> <form id=login-form> <div class=\\\"standard-block centred-block\\\"> <input id=login-email type=text placeholder=Email> </div> <div class=\\\"standard-block centred-block\\\"> <input id=login-password type=text placeholder=Password> </div> <button id=js-login-btn class=\\\"btn snap-action-btn\\\">Log in</button> </form> <div class=\\\"standard-block centred-block hide-important js-logged-in\\\">You are now logged in.</div> <div class=\\\"standard-block vertical-centred-block hide-important js-not-logged-in\\\"> <span class=\\\"standard-block centred-block\\\">Please check your email and password.</span> <span class=\\\"standard-block centred-block js-message\\\"></span> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=modal-content> <div class=snapdragon-container> <form id=logout-form> <div class=\\\"vertical-centred-block double-standard-block\\\"> <span>You are logged in with the account:</span> <span>{{ email }}</span> </div> <div> <button id=js-logout-btn class=\\\"btn snap-action-btn\\\">Log out</button> </div> </form> <div class=\\\"standard-block centred-block hide-important js-logged-out\\\">You are now logged out.</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"large-text centred-block standard-block\\\">Language preference</div> <div class=standard-block> <div>Your selection will affect the vernacular names of species only.</div> <br> <div>It will not apply to lessons in progress.</div> <br> </div> <div class=\\\"double-standard-block js-language-selection-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=PORTRAIT_HOME class=\\\"snap-icon-btn portrait icon list js-list\\\" aria-label=home> <i aria-hidden=true focusable=false class=\\\"fas fa-chalkboard\\\"></i> <span class=visually-hidden>Lesson home</span> </button> </li> <li> <button id=SETTINGS class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=modal data-target=#basicModal aria-label=settings> <i aria-hidden=true focusable=false class=\\\"fas fa-cog\\\"></i> <span class=visually-hidden>Settings</span> </button> </li> <li> <button id=LOGIN class=\\\"snap-icon-btn icon login js-login\\\" data-toggle=modal data-target=#basicModal data-is-logged-in=false aria-label=login> <i aria-hidden=true focusable=false class=\\\"fas fa-user-slash\\\"></i> <i aria-hidden=true focusable=false class=\\\"fas fa-user-check\\\"></i> <span class=visually-hidden>Login or logout</span> </button> </li> <li> <button id=GLOSSARY class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=modal data-target=#glossaryModal aria-label=glossary> <i aria-hidden=true focusable=false class=\\\"fas fa-book-open\\\"></i> <span class=visually-hidden>Glossary</span> </button> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=GLOSSARY class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=modal data-target=#glossaryModal aria-label=glossary> <i aria-hidden=true focusable=false class=\\\"fas fa-book-open\\\"></i> <span class=visually-hidden>Glossary</span> </button> </li> <li> <button id=LANGUAGE class=\\\"snap-icon-btn icon language js-language\\\" data-toggle=modal data-target=#basicModal aria-label=\\\"language settings\\\"> <i aria-hidden=true focusable=false class=\\\"fas fa-language\\\"></i> <span class=visually-hidden>Language</span> </button> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=SETTINGS class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=modal data-target=#basicModal aria-label=settings> <i aria-hidden=true focusable=false class=\\\"fas fa-cog\\\"></i> <span class=visually-hidden>Settings</span> </button> </li> <li> <button id=LOGIN class=\\\"snap-icon-btn icon login js-login\\\" data-toggle=modal data-target=#basicModal data-is-logged-in=false aria-label=login> <i aria-hidden=true focusable=false class=\\\"fas fa-user-slash\\\"></i> <i aria-hidden=true focusable=false class=\\\"fas fa-user-check\\\"></i> <span class=visually-hidden>Login or logout</span> </button> </li> <li> <a id=EMAIL class=\\\"landscape icon email js-email\\\" target=_blank href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\"> <i aria-hidden=true focusable=false class=\\\"fas fa-envelope\\\"></i> <span class=visually-hidden>Open email link</span> </a> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\"> <input disabled=disabled class=js-txt-input type=text placeholder=Genus autocomplete=off autocorrect=off autocapitalize=off spellcheck=false> </div> <div> <div class=\\\"help-txt binomial margin-left js-help-txt\\\"></div> </div> <div class=text-entry-container> <div class=\\\"js-pool-letters pool margin-left margin-top margin-bottom\\\"></div> <div class=horizontal-buttons> <button class=\\\"btn btn-tertiary js-toggle-keyboard\\\">Enable keyboard</button> <button class=\\\"btn btn-tertiary js-delete-letter\\\">Delete last letter</button> <button class=\\\"btn snap-action-btn js-check-answer\\\">Check answer</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"js-test-card-container-images species-card-images\\\"></div> <div class=text-entry> <input class=js-txt-input type=text placeholder=Genus> </div> <div class=\\\"landscape help-txt binomial js-help-txt\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <li class=strip> <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\" data-name=\\\"{{ answer.name }}\\\" data-names=\\\"{{ answer.names }}\\\"> <span>{{ answer.term }}</span> </button> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <div class=strip> <button class=\\\"double-centred-block btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\"> <img width=25px height=25px src=\\\"{{ answer.img.url }}\\\" alt=\\\"\\\"> <span>{{ answer.term }}</span> </button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\"> <button class=\\\"btn snap-icon-btn block\\\"> <span class=\\\"given genus\\\">{{ genus }}</span> </button> <button class=\\\"btn snap-icon-btn block\\\"> <span class=species>{{ species }}</span> </button> </div> <div class=text-complete-container> <div class=\\\"margin-bottom landscape\\\">Click to select the correct name:</div> <div class=\\\"margin-bottom portrait\\\">Tap to select the correct name:</div> <div class=\\\"pool js-pool\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <button type=submit class=\\\"btn snap-icon-btn block\\\"> <span>{{ answer.value }}</span> </button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=snapdragon-container> <div class=\\\"cultivar revision card\\\"> <div class=taxon-highlight><span>{{ item.name }}</span><hr></div> <div class=title>The following cultivars are all derived from the single species {{ item.name }}:</div> <div> <div class=list-group-headers> <span>Name</span><span>Variety</span><span class=landscape>Form</span><span class=landscape>More</span> </div> <div class=scrollable> <ul class=\\\"list-group list-group-flush\\\" data-repeat-cultivar=\\\"{{ cultivars }}\\\"> <li class=list-group-item> <span>{{ cultivar.vernacular }}</span> <span>{{ cultivar.variety }}</span> <span class=landscape>{{ cultivar.form }}</span> <span class=landscape><a class=underline-link href=\\\"{{ cultivar.wiki }}\\\" title=\\\"{{ cultivar.wikiAlt }}\\\">WIKI</a> <a class=underline-link href=\\\"{{ cultivar.eol }}\\\" target=_blank title=\\\"{{ cultivar.eolAlt }}\\\">EOL</a></span> </li> </ul> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"species-card-images carousel js-test-card-container-images\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=hide-important>mixed-specimen-images-template.html</div> <div class=\\\"standard-block border-bottom double-centred-block\\\"></div> <div> <div class=\\\"tiles-container squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\"> <div> <img class=square src=\\\"{{ image.medium }}\\\" data-item-name=\\\"{{ image.itemName }}\\\" data-url=\\\"{{ image.url }}\\\"/> </div> </div> </div> <div class=lesson-companion> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=mixed-specimen-container> <div class=margin-bottom> <span>You are choosing from</span> <br> <br> <span> Species shown (in no particular order): </span> </div> <ul class=\\\"images-names-txt js-images-names-txt\\\"></ul> <div class=vertical-evenly-spaced-block> <button class=\\\"btn snap-action-btn btn-auxiliary js-help-txt\\\">Click to refresh selection</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"standard-block border-bottom double-centred-block\\\"></div> <div class=\\\"squares traits js-tiles\\\" data-repeat-trait=\\\"{{ traits }}\\\"> <div data-repeat-value=\\\"{{ trait }}\\\"> <img class=square src=\\\"{{ value.img.url }}\\\" data-term=\\\"{{ value.term }}\\\" data-url=\\\"{{ value.img.url }}\\\"/> </div> </div> <div class=lesson-companion> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=mixed-specimen-container> <div class=margin-bottom><span>{{ help }}</span></div> <ul class=\\\"traits-names-txt js-traits-names-txt\\\" data-repeat-trait=\\\"{{ traits }}\\\"> <li> <img src=\\\"{{ trait.img.url }}\\\" alt=\\\"{{ trait.term }}\\\"> <span>{{ trait.term }}</span> </li> </ul> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <div class=strip> <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\"> <span>{{ answer.term }}</span> </button> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div>{{ questionFormat }}</div> <div class=\\\"footer-score js-footer-score\\\"> <span class=hide-important>{{ score.correct }} {{ scoreText }}</span> <span>Score: {{ score.correct }} / {{ score.total }}</span> <span>History: {{ history.correct }} / {{ history.total }}</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=home-container> <div class=\\\"snapdragon-header double-centred-block\\\"> <h1> <a href=\\\"\\\">Welcome</a> </h1> </div> <main id=main class=\\\"snapdragon-intro scrollable js-snapdragon-intro\\\"> <h3>Learn The Planet is a collection of a video lessons about the natural world.</h3> <h4 class=\\\"centred-block landscape\\\"> <i class=\\\"margin-left extra-large-text fab fa-youtube youtube-icon\\\"></i><span class=margin-left>Click to watch a lesson video.</span> </h4> <h4 class=\\\"centred-block landscape\\\"> <i class=\\\"margin-left extra-large-text fas fa-glasses youtube-icon\\\"></i><span class=margin-left>Click to see lesson species.</span> </h4> <h4 class=landscape> <button class=\\\"btn snap-btn extra-small-text fit-width\\\" disabled=disabled style=opacity:1>Vocab test</button> <span class=margin-left>Brush up on terms and definitions.</span> </h4> <h4 class=landscape> <button class=\\\"btn snap-btn extra-small-text fit-width\\\" disabled=disabled style=opacity:1>Lesson Quiz</button> <span class=margin-left>Test yourself on the contents of a lesson.</span> </h4> <br class=landscape> <br class=landscape> <h4 class=portrait> Tap on the home icon <span><i class=\\\"fas fa-chalkboard\\\"></i></span> below to get started, then select an <span><i class=\\\"fab fa-youtube youtube-icon\\\"></i></span> icon to begin a lesson. </h4> <h5>These lessons took time and effort to make; Learn The Planet would like to thank the people who created them.</h5> </main> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div class=\\\"modal fade\\\" id=imageModal role=dialog aria-labelledby=imageModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-image-title\\\"> <span></span><span></span> </div> <button type=button class=close data-dismiss=modal aria-label=Close> <span aria-hidden=true>&times;</span> </button> </div> </header> <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div> <div class=\\\"modal-body centred-block\\\"> <div class=\\\"modal-image js-modal-image\\\" style=flex:auto></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade\\\" id=imageComparisonModal tabindex=-1 role=dialog aria-labelledby=imageModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-image-title\\\"> <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div> <span></span><span></span><span class=hide-empty></span><span class=hide-empty></span> </div> </div></header> </div> <div class=modal-body> <div class=\\\"modal-image js-modal-image\\\"></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div>  <div class=\\\"modal fade\\\" id=wikiModal tabindex=-1 role=dialog aria-labelledby=exampleModalLongTitle aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-external-page-title\\\"></div> </div> </header> <div class=\\\"modal-body js-external-page-body\\\"> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=basicModal tabindex=-1 role=dialog aria-labelledby=basicModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <div class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div> <div></div> </div> </div> </div> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=glossaryModal tabindex=-1 role=dialog aria-labelledby=glossaryModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><h1>Glossary</h1></div> <button class=\\\"btn fit-width snap-btn double-margin-right small-text js-quick-fire-filters\\\">Glossary</button> <button class=\\\"btn hide-important fit-width snap-btn double-margin-right small-text js-quick-fire-questions\\\">Quick-fire questions</button> </div> </div> </header> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div> <div class=\\\"modal fade\\\" id=cardModal tabindex=-1 role=dialog aria-labelledby=speciesCardLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-text-title\\\"></div> </div> </header> <div class=\\\"carousel slide\\\"> <div class=carousel-inner> <div class=\\\"prev landscape js-prev\\\" role=button> <span class=carousel-control-prev-icon data-direction=prev aria-hidden=true></span> <span class=sr-only>Previous</span> </div> <div class=\\\"modal-body js-modal-body\\\"> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <div class=\\\"next landscape js-next\\\" role=button> <span class=carousel-control-next-icon data-direction=next aria-hidden=true></span> <span class=sr-only>Next</span> </div> </div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div>  <div class=\\\"modal fade\\\" id=badgeListModal tabindex=-1 role=dialog aria-labelledby=badgeListModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-text-title\\\"></div> </div> </header> <div class=\\\"modal-body js-modal-body\\\"> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade modal-guide-wrapper\\\" id=createGuide tabindex=-1 role=dialog aria-labelledby=createGuideModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-title\\\"> <header class=header></header> </div> </div> </header> <div class=\\\"modal-body modal-guide-body\\\"> <div class=\\\"modal-guide-progress standard-block js-modal-guide-progress\\\"> <div class=\\\"modal-subheader js-options\\\"> <h1>Select species</h1> </div> <div class=\\\"hide-important steps js-steps\\\"> <div class=completed>Step 1</div> <div>Step 2</div> <div>Step 3</div> </div> </div> <div class=\\\"step-action-content js-step-action-content\\\">Step action</div> <nav aria-label=\\\"navigation for creating new lesson\\\" class=\\\"modal-guide-navigation js-modal-guide-navigation\\\"> <button class=\\\"snap-icon-btn js-left\\\"> <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-left\\\"></i></span> <span class=title></span> </button> <div class=\\\"centred-block js-centre\\\"><span class=title>Provenance</span></div> <button class=\\\"snap-icon-btn right-justify js-right\\\"> <span class=title></span> <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span> </button> </nav> </div> <div class=\\\"modal-footer double-centred-block js-create-guide-close-btn\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=lessonModal data-backdrop=static data-keyboard=false tabindex=-1 role=dialog aria-labelledby=lessonModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block margin-right\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div> <button class=\\\"btn small-text fit-width snap-btn margin-right js-review-progress\\\">Progress</button> </div> </div> </header> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"> <div class=\\\"lesson-spinner double-centred-block\\\"> <div class=icon><i class=\\\"fas fa-sun slow-spin\\\"></i></div> </div> </div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":root {\\n\\n    --snap-lesson-row-blue: rgb(218, 230, 237);\\n    --snap-lesson-row-green: rgb(216, 223, 210);\\n\\n    --snap-dd-non-taxa-bg-intial: rgb(197, 193, 175);\\n    --snap-dd-non-taxa-bg-hover: rgb(229, 227, 220);\\n    --snap-dd-non-taxa-bg-active: rgb(229, 227, 220);\\n\\n    --snap-text-black: rgb(30,30,30);\\n    --snap-text-dark: rgb(60, 60, 60);\\n    --snap-text-dark-medium-dark: rgb(50, 50, 50);\\n    --snap-text-medium-dark: rgb(65, 65, 65);\\n    --snap-text-medium-dark-hover: rgb(108, 114, 120);\\n    --snap-text-medium-light:rgb(73, 80, 87);\\n    --snap-text-light:rgb(245, 245, 245);\\n    --snap-text-green: rgb(16, 66, 28);\\n    \\n    --snap-portrait: rgb(179, 197, 174);\\n    --snap-landscape: rgb(185, 200, 204);\\n    \\n    --snap-collection: rgb(87, 97, 99);\\n    --snap-collection-active: rgb(95, 125, 89);    \\n    --snap-collection-light: rgb(117, 126, 126);\\n    --snap-collection-faint: rgb(240, 242, 235);\\n    --snap-non-taxa: rgb(165, 159, 131);\\n\\n    --snap-active: rgb(246, 157, 53);\\n    --snap-alert: rgb(197, 59, 67);\\n    --snap-alert-medium: rgb(225, 155, 155);\\n    --snap-alert-light: rgb(241, 229, 225);\\n    --snap-inactive: rgba(7, 2, 2, 0.4);\\n    --snap-success: rgb(84, 137, 84);\\n    --snap-success-medium: rgb(169, 196, 163);\\n    --snap-success-light: rgb(216, 225, 208);\\n    \\n    --snap-link: rgb(54, 69, 82);\\n\\n    --snap-progress-bg: rgb(168, 168, 168);\\n    --snap-progress-bar: rgb(255, 255, 255);\\n  \\n    --snap-block-light: rgb(245, 245, 245);\\n\\n    --snap-main-background: rgb(244, 244, 244);\\n    --snap-content-background: rgb(255, 255, 243);\\n    --snap-content-background-relief: rgb(251, 251, 247);\\n    --snap-header-background: rgb(213, 213, 210);\\n    --snap-list-header-background: rgb(252, 251, 246);\\n    --snap-row-background: rgb(240, 239, 233);\\n    \\n    --snap-taxon-card-background: rgba(52, 105, 23,.1);\\n    --snap-species-highlight-background: rgb(249, 248, 238);\\n    --snap-species-header-background: rgb(226, 222, 180);\\n    --snap-species-header-dark-background: rgb(146, 139, 56);\\n    \\n    --snap-btn-auxillary: rgb(96, 117, 90);\\n    --snap-btn-hover: rgb(240, 240, 240);\\n    \\n    --snap-btn-dropdown: rgb(252, 193, 186);\\n    --snap-btn-dropdown-options: rgb(254, 240, 229);\\n\\n    --snap-btn-blue: rgb(54, 69, 82);\\n    --snap-snap-action-btn: rgb(245, 245, 245);\\n\\n    --snap-tertiary-background: rgb(95, 125, 89);\\n\\n    --snap-btn-filter-on: rgb(214, 208, 213);\\n    --snap-btn-filter-off: rgb(235, 231, 228);\\n\\n    --snap-border-light: rgb(175,175,175);\\n    --snap-border-medium: rgb(211, 211, 211);\\n    --snap-border-lightest: rgb(225,225,225);\\n\\n    --snap-iconic-icon-header: rgb(193, 186, 112);\\n\\n    --snap-inat: rgb(127, 151, 122);\\n\\n    --snap-youtube-green: rgb(52, 105, 23);\\n\\n    --snap-button-light: #576163; \\n    --snap-button-main: #3c4345; \\n    --snap-button-dark: #788082; \\n  }\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"* {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nhtml {\\n  height: var(--vhGrid, 100vh);\\n}\\n\\nbody {\\n  /* width: var(--vwGrid, 100vh);\\n  max-width: var(--vwGrid, 100vh); */\\n  height: var(--vhGrid, 100vh);\\n  /* font-size: .8em; */\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-family: 'Open Sans', sans-serif;\\n  color: var(--snap-text-dark);\\n  margin: auto;\\n  background-color: var(--snap-main-background);\\n}\\n\\nbutton {\\n  width: 100%;\\n  letter-spacing: .03rem;\\n}\\n\\nbutton[disabled] {\\n  opacity: .38; /* why  38%? google material design */\\n  pointer-events: none;\\n}\\n\\ninput[type=\\\"text\\\"] {\\n  padding: .5rem;\\n  width: 100%;\\n  border-color: var(--snap-border-lightest);\\n  border-style: solid;\\n}\\n\\nfigure {\\n  margin: .5rem 0 0;\\n}\\n\\na:hover {\\n  text-decoration: none;\\n}\\n\\nul {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nli {\\n  list-style-type: none;\\n  margin: 0 0 .5rem 0;\\n}\\n\\nprogress {\\n  margin: 0 !important;\\n  width: 100%;\\n  border: 0;\\n  background: var(--snap-progress-bg);\\n  max-height: 5px;\\n}\\n\\nprogress::-webkit-progress-bar {\\n  background-color: var(--snap-progress-bg);\\n}\\nprogress::-webkit-progress-value {\\n  background-color: var(--snap-text-black);\\n}\\nprogress::-moz-progress-bar {\\n  background-color: var(--snap-progress-bar);\\n}\\n\\n.progress-icon {\\n  color: var(--snap-progress-bar) !important;\\n  cursor: pointer;\\n}\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg);\\n}\\n\\n.inline-progress-container progress {\\n  width: 95px;\\n  height: 3px;\\n  left: 0;\\n  top: 2.5rem;\\n}\\n\\nhr {\\n  margin: 0;\\n}\\n\\n.font-size-small {\\n  font-size: .7rem;\\n}\\n\\n.desaturate {\\n  opacity: .6;\\n  filter: grayscale(80%);\\n}\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg);\\n}\\n\\n\\n\\n.btn-collection {\\n  background-color: var(--snap-portrait);\\n  color: var(--snap-text-dark);\\n}\\n\\n.btn-language {\\n  background-color: var(--snap-landscape);\\n  color: var(--snap-text-medium-dark);\\n}\\n\\n.btn.btn-non-taxa {\\n  width: 15rem;\\n  background-color: var(--snap-non-taxa);\\n  float: left;\\n}\\n\\n.non-taxa-definition {\\n  padding: 0 0.5rem;\\n}\\n\\n.icon::after\\n{\\n  display: inline-block;\\n  font-style: normal;\\n  font-variant: normal;\\n  text-rendering: auto;\\n  -webkit-font-smoothing: antialiased;\\n  font-family: \\\"Font Awesome 5 Free\\\";\\n}\\n\\n.icon.active::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f00c\\\";\\n  padding: 0 0.5rem 0 0;\\n  margin: 0 0 0 -1.5rem;\\n  color: rgb(99, 127, 91);\\n}\\n\\n.icon.choice::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: rgb(99, 127, 91);\\n}\\n\\n.icon.edible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive);\\n}\\n\\n.icon.inedible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f056\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive);\\n}\\n\\n.icon.toxic::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f071\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-alert);\\n}\\n\\n.dropdown-menu {\\n  margin: 0.15rem 0 0 0;\\n  padding: 0;\\n  color: var(--snap-text-dark);\\n  border: .05rem solid var(--snap-border-light);\\n  left: inherit !important;\\n}\\n\\n.non-taxa .dropdown-menu {\\n  width: 15rem !important;\\n  background-color: var(--snap-dd-non-taxa-bg-intial);\\n}\\n\\n.non-taxa a.dropdown-item.active {\\n  background-color: var(--snap-dd-non-taxa-bg-active);\\n}\\n\\na.dropdown-item {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.5rem 0 0.5rem 1rem;\\n  cursor: pointer;\\n}\\n\\n.dropdown-menu.show {\\n  top: -.25rem !important;\\n}\\n\\n.non-taxa a.dropdown-item:hover {\\n  background-color: var(--snap-dd-non-taxa-bg-hover);\\n}\\n\\n.underline-external-link {\\n  color: var(--snap-link) !important;\\n  text-decoration: none;\\n  border-bottom: solid .05rem !important;\\n  color: inherit;\\n  cursor: pointer;\\n}\\n\\n.lesson-title {\\n  line-height: 1.6;\\n}\\n\\n.toUpperCase {\\n  text-transform: uppercase;\\n}\\n\\n.home, .settings, .nav-info, .list, .glossary, .email, .login, .email > a, .language {\\n  cursor: pointer;\\n  color: var(--snap-text-dark);\\n  font-size: 1.4rem;\\n}\\n\\na.icon:hover {\\n  color: var(--snap-text-light);\\n}\\n\\n.email span {\\n  font-size: .8rem;\\n}\\n\\n.glossary svg {\\n  vertical-align: middle;\\n}\\n\\n.grid-header {\\n  background-color: rgb(153, 172, 149);\\n  background-color: var(--snap-portrait);\\n  display: flex;\\n  align-items: center;\\n  color: var(--snap-text-dark);\\n  width: 100%;\\n  border-radius: 0.25rem 0.25rem 0 0;\\n  letter-spacing: 0.07rem;\\n  text-transform: uppercase;\\n}\\n\\n.grid-header > div {\\n  padding: 0 0.5rem;\\n}\\n\\n.hover-box {\\n  border: .05rem solid rgba(48, 94, 37,.8);\\n  padding: .25rem;\\n  margin: 0 0 0 -.25rem;\\n  border-radius: 0.25rem;\\n}\\n\\n.nav-icons .active-icon, .active-icon {\\n  color: white;\\n}\\n\\n.nav-icons .inactive-icon {\\n  color: var(--snap-inactive);\\n  cursor: not-allowed;\\n}\\n\\n.info-box .inactive-icon {\\n  display: none;\\n}\\n\\n.disabled-icon {\\n  cursor: initial;\\n  opacity: .38; /* why  38%? google material design */\\n  pointer-events: none;\\n}\\n\\n.scrollable.card {\\n  text-align: left;\\n}\\n\\n.score-summary-container {\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));\\n}\\n\\n.snapdragon-container {\\n  justify-content: flex-start;\\n  position: relative;\\n}\\n\\n.test-card-question.standard-block, .lesson-list-header.centred-block {\\n  border-bottom: .03rem solid var(--snap-border-medium);\\n}\\n\\n.home-container {\\n  position: relative;\\n  display: grid;\\n  grid-template-rows: var(--vhStandardBlock) auto;\\n}\\n\\n.feature-types {\\n  background-color: var(--snap-content-background);\\n}\\n\\n.species.card {\\n  margin: 0;\\n}\\n\\n.non-taxa {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-top: 1rem;\\n}\\n\\n.non-taxa .btn-group {\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  flex-direction: column;\\n  margin: 0 .5rem;\\n  justify-content: space-evenly;\\n  background-color: var(--snap-landscape);\\n}\\n\\n.non-taxa .btn.btn-secondary {\\n  height: initial;\\n}\\n\\n.non-taxa .species-header {\\n  padding: 0 1.25rem 0 0;\\n}\\n\\n.non-taxon.card img {\\n  height: 4rem;\\n  width: 4rem;\\n}\\n\\n.non-taxon .btn.btn-secondary {\\n  width: 100%;\\n  background-color: var(--snap-landscape);\\n  border-radius: unset;\\n}\\n\\n.non-taxa-definition {\\n  display: flex;\\n  align-items: center;\\n  padding: 0 2rem;\\n}\\n\\n.non-taxon .definitions {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n  height: 100%;\\n  text-align: left;\\n}\\n\\n.species.card-small {\\n  padding: 0.5rem;\\n}\\n\\n.card.radio-buttons-container {\\n  margin: 0 0 0.5rem 0;\\n}\\n\\n.binomial {\\n  font-style: italic;\\n  text-transform: initial;\\n}\\n\\n.lesson-plans .table-row.species-background:nth-child(n) {\\n  background-color: var(--snap-species-highlight-background);\\n}\\n\\n.lesson-plans .table-row.taxon-background:nth-child(n) {\\n  background-color: var(--snap-taxon-card-background);\\n}\\n\\n.snapdragon-options {\\n  padding: 0 .5rem;\\n}\\n\\n.grid {\\n  display: grid;\\n  grid-auto-flow: column;\\n  width: 100%;\\n  height: var(--vhGrid, 100vh);\\n  font-size: .8rem;\\n}\\n\\n.left-grid, .right-grid {\\n  display: grid;\\n  grid-template-columns: 100%;\\n  grid-auto-flow: column;\\n  grid-template-rows: var(--vhRunningBlock, 7.5vh) 5px auto var(--vhRunningBlock, 7.5vh);\\n}\\n\\n.left-body, .right-body {\\n  display: grid;\\n  grid-auto-flow: row;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));  \\n  background-color: var(--snap-content-background);\\n}\\n\\n.header, .footer {\\n  display: flex;\\n  align-items: center;\\n  padding: 0 0.5rem;\\n  letter-spacing: 0.1rem;\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-dark);\\n}\\n\\n.header > div:nth-child(2) {\\n  max-width: 50%;\\n  font-size: .9rem;  \\n}\\n\\n.footer {\\n  bottom: 0;\\n}\\n\\n.left-grid .footer .nav-icons, .right-grid .footer .nav-icons {\\n  flex: auto;\\n  justify-content: space-evenly;\\n}\\n\\n.left-grid .footer .nav-icons li, .right-grid .footer .nav-icons li {\\n  margin: 0 !important;\\n}\\n\\n.footer-round, .footer-score span {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.75rem;\\n}\\n\\n.left-grid .header, .left-grid .footer {\\n  justify-content: flex-end;\\n  background-color: var(--snap-portrait);\\n}\\n\\n.right-grid .header, .right-grid .footer {\\n  justify-content: center;\\n  background-color: var(--snap-landscape);\\n}\\n\\n.header-text {\\n  color: var(--snap-text-dark-medium-dark);\\n}\\n\\n.scrollable {\\n  overflow-y: auto;\\n  -webkit-overflow-scrolling: touch;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;  \\n}\\n\\n/* .txt-specimen-species {\\n  margin: 0 0 0 1rem;\\n} */\\n\\n.answer {\\n  padding: 1rem;\\n  text-transform: capitalize;\\n  cursor: pointer;\\n}\\n\\n.answer button {\\n  width: 10rem;\\n}\\n\\n.squares {\\n  display: grid;\\n  grid-auto-flow: row;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr 1fr 1fr;\\n}\\n\\n.tiles {\\n  display: grid;\\n  height: 50%;\\n  grid-auto-flow: column;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr 1fr;\\n}\\n\\n.squares > div {\\n  display: grid;\\n  justify-self: center;\\n  height: 140px;\\n  width: 224px;\\n}\\n\\n.squares img, .tiles img {\\n  cursor: pointer;\\n  height: inherit;\\n  width: inherit;\\n  object-fit: cover;\\n}\\n\\n.traits.squares img {\\n  object-fit: scale-down;\\n}\\n\\n.traits.squares > div.multiple {\\n  grid-template-columns: 1fr 1fr;\\n  cursor: pointer;\\n  width: 80%;\\n}\\n\\n.square, .tile {\\n  border-radius: 0.2rem;\\n  cursor: pointer;\\n}\\n\\n.strips {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  cursor: pointer;\\n  height: calc( (var(--vh, 1vh) * 100) \\n    - var(--vhFixtures, 15vh) \\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhButtonBlock, 9vh)\\n    );\\n}\\n\\n.strip {\\n  background: #fff;\\n  border: 1px solid transparent;\\n  border-radius: 2px;\\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\\n  margin: .5rem .25rem;\\n  padding: .75rem;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.strip > div::first-letter {\\n  text-transform: capitalize;\\n}\\n\\n  .strip > * {\\n    pointer-events: none;\\n  }\\n\\n  .pointer-events-none {\\n    pointer-events: none !important;\\n  }\\n  \\n  .pointer-events-initial {\\n    pointer-events: initial !important;\\n  }\\n\\n.strips .strip.snap-success {\\n  background-color: var(--snap-success-medium);\\n  box-shadow: 0 2px 8px rgba(0,0,0,.8);\\n}\\n\\n.strips .strip.snap-alert {\\n  background-color: var(--snap-alert-medium);\\n  box-shadow: 0 2px 8px rgba(0,0,0,.8);\\n  border: none;\\n}\\n\\n.strip.snap-success > div.disabled {\\n  color: var(--gray-dark) !important;\\n}\\n\\n.strip div {\\n  text-align: center;\\n}\\n\\n.names-container .vernacular-name {\\n  max-width: 12rem;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  display: inline-block;\\n}\\n\\n.names-container.definition .vernacular-name {\\n  margin-top: 1.25rem;\\n}\\n\\n.align-left {\\n  text-align: left;\\n}\\n\\n.snapdragon.card {\\n  border: 0;\\n}\\n\\n.snapdragon.card.align-left {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.5rem;\\n}\\n\\n.snapdragon.card.align-left .feature-label {\\n  letter-spacing: 0.03rem;\\n  width: fit-content;\\n  display: inline-table;\\n}\\n\\n.taxon-highlight {\\n  background-color: var(--snap-taxon-card-background);\\n  padding: 0.5rem;\\n  margin: -0.5rem -0.5rem 0 -0.5rem;\\n  display: flex;\\n  justify-content: right;\\n}\\n\\n.taxon-highlight > div:nth-child(1) {\\n  flex: 1;\\n  align-self: center;\\n}\\n\\n.taxon-highlight > div:nth-child(2) {\\n  align-self: center;\\n}\\n\\n.taxon-highlight img {\\n  height: 5.5rem;\\n  width: 5.5rem;\\n  margin: 0 0 0 1rem;\\n  object-fit: cover;\\n}\\n\\n.latin-name {\\n  font-style: italic;\\n  font-family: serif;\\n  text-transform: initial;\\n}\\n\\n.common-name {\\n  font-style: normal;\\n  text-transform: capitalize;\\n}\\n\\n.taxon-header {\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  text-align: left;\\n}\\n\\n.species-header img {\\n  filter: grayscale(80%);\\n  object-fit: scale-down;\\n  max-height: var(--vhStandardBlock, 10vh);\\n}\\n\\n.species-header > div:nth-child(1) {\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0.25rem 1rem 0 0;\\n}\\n\\n.card-link-container {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.card-link-container i {\\n  font-size: 2rem;\\n  cursor: pointer;\\n  color: var(--snap-iconic-icon-header);\\n}\\n\\n.card-link-container i:hover {\\n  color: var(--snap-text-medium-light);\\n}\\n\\n.block-container {\\n  position: relative;\\n  justify-content: flex-start;\\n}\\n\\n.species-common-name {  \\n  text-transform: capitalize;\\n}\\n\\n.data-box-container {\\n  height: var(--vhCalendar, 11vh);\\n  display: grid;\\n  grid-template-columns: 2fr 2fr 3fr;\\n  grid-gap: .5rem;\\n  border-bottom: .03rem solid var(--snap-dd-non-taxa-bg-hover);\\n  font-size: .8rem;\\n}\\n\\n.mixed-content-container {\\n  top: calc(\\n      var(--vhStandardBlock, 10vh)\\n    + var(--vhSmallImageCarousel,23vh));\\n  height: calc(\\n        var(--vh, 1vh) * 100\\n      - var(--vhFixtures,15vh)\\n      - var(--vhSmallImageCarousel,23vh)\\n      - var(--vhDoubleStandardBlock,20vh)      \\n      - .5rem);\\n}\\n\\n.taxon.card-card .mixed-content-container {\\n  height: calc(\\n        var(--vh, 1vh) * 100\\n      - var(--vhFixtures,15vh)\\n      - var(--vhDoubleStandardBlock,20vh) \\n      - var(--vhCalendar)\\n      - 5px);\\n      padding: .5rem;\\n}\\n\\n.taxon.card-card .mixed-content-container .centred-block {\\n  flex-direction: column;\\n  height: 100%;\\n  align-items: flex-start;\\n  justify-content: space-evenly;\\n}\\n\\n.taxon.card-card .data-box-container {\\n  grid-template-columns: 1fr 2fr;\\n  padding: 0 .5rem;\\n}\\n\\n.inat-box .data-box {\\n  color: var(--snap-text-medium-light);\\n  height: 100%;\\n  border-left: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  border-right: 1px solid var(--snap-border-lightest);\\n  font-size: .8rem\\n}\\n\\n.inat-box .data-box > div:nth-child(1), .inat-box .data-box > div:nth-child(2) {\\n  display: grid;\\n  grid-template-columns: 2fr 1fr;\\n  grid-gap: .25rem;\\n}\\n\\n.inat-box .data-box > div:nth-child(2) > div:nth-child(1) {\\n  padding: 0 0.5rem 0 0;\\n}\\n\\n.inat-box .data-box > div > div:nth-child(2) > div {\\n  text-align: center;\\n}\\n\\n.taxon-data > span:nth-child(1) {\\n  min-width: 50%;\\n}\\n\\n.data-box .taxon-data:nth-child(1) > span {\\n  text-transform: uppercase;\\n} \\n\\n.taxon-data {\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.latin {\\n  font-style: italic;\\n  font-family: serif;\\n}\\n\\n.taxon-members {\\n  font-style: italic;\\n}\\n\\n.family-img {\\n  filter: grayscale(80%);\\n}\\n\\n.family-name {\\n  text-transform: uppercase;\\n}\\n\\n.history div {\\n  margin: 0 0 1rem 0;\\n}\\n\\n.clickable {\\n  cursor: pointer;\\n}\\n\\n.btn {\\n  font-size: inherit;\\n  padding: .5rem;\\n  border: none;\\n}\\n\\n.btn:hover {\\n  opacity: .8;  \\n}\\n\\n.btn.focus, .btn:focus {\\n  box-shadow: none;\\n}\\n\\nbtn:disabled {\\n  pointer-events: none;\\n}\\n\\n.btn-placeholder.btn {\\n  color: var(--snap-text-dark);\\n}\\n\\n.snap-btn {\\n  background-color: var(--snap-list-header-background);\\n  color: var(--snap-text-black);\\n  letter-spacing: .05rem;\\n  border: 1px solid var(--snap-portrait);\\n  padding: .25rem .75rem;\\n}\\n\\n.snap-btn:active {\\n  color: green !important;\\n}\\n\\n.snap-btn:focus:not(:focus-visible), .snap-icon-btn:focus:not(:focus-visible) {\\n  color: var(--snap-youtube-green) !important;\\n  outline: none;\\n  border: 1px solid var(--snap-youtube-green);\\n}\\n\\n.snap-icon-btn {\\n  color: var(--snap-text-dark);\\n  background-color: transparent;\\n  border: 1px solid transparent;\\n  padding: 0 .5rem;\\n}\\n\\n.snap-icon-btn:focus, .snap-icon-btn:hover {\\n  color: var(--snap-youtube-green);\\n  outline: none;\\n}\\n\\n.snap-link-btn, .snap-no-link-btn {\\n  color: var(--snap-text-dark);\\n  background-color: transparent;\\n  border: none;\\n  font-size: .7rem;\\n  width: intrinsic;           /* Safari/WebKit uses a non-standard name */\\n  width: -moz-max-content;    /* Firefox/Gecko */\\n  width: -webkit-max-content; /* Chrome */\\n}\\n\\n.snap-no-link-btn {\\n  pointer-events: none;\\n}\\n\\n.snap-action-btn {\\n  background-color: var(--snap-tertiary-background);\\n  color: var(--snap-text-light);\\n  letter-spacing: .05rem;\\n  border: 1px solid var(--snap-non-taxa) !important;\\n  padding: .5rem .75rem;\\n}\\n\\n.snap-action-btn:focus {\\n  outline: none;\\n  color: var(--snap-text-black);\\n}\\n\\n.snap-action-btn.snap-success {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-success) !important;\\n  border: 0.05rem solid var(--snap-success);\\n}\\n\\n.snap-action-btn.snap-alert {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-alert) !important;\\n  border: 0.05rem solid var(--snap-alert);\\n}\\n\\n.btn-tertiary {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-tertiary-background) !important;\\n  border: 1px solid var(--snap-border-light);\\n  cursor: pointer !important;\\n}\\n\\n.btn-tertiary:focus {\\n  outline: none;\\n  color: var(--snap-text-black);\\n}\\n\\n.dropdown-toggle::after {\\n  vertical-align: 0.2rem;\\n  margin-left: 0.2rem;\\n}\\n\\n.course-description {\\n  margin: 1rem 0;\\n}\\n\\n.course-description span {\\n  margin: 0 0 0.5rem 0;\\n}\\n\\n.course-description span:nth-child(1) {\\n  background-color: lightblue;\\n  padding: 0.25rem;\\n}\\n\\n.course-description .snap-alert {\\n  width: 50%;\\n}\\n\\n.species-count {\\n  vertical-align: super;\\n}\\n\\n.clear-lesson button {\\n  float: left;\\n}\\n\\n.collection span {\\n  padding: 0 0.5rem;\\n  cursor: pointer;\\n}\\n\\n.dropdown div {\\n  white-space: nowrap;\\n}\\n\\n.single-tile {\\n  display: flex;\\n  flex-direction: column;\\n  margin: 2rem 1rem;\\n}\\n\\n.image-border {\\n  text-align: center;\\n  margin: 0 0 2rem 0;\\n  border: .05rem solid;\\n  border-radius: .2rem;\\n  padding: 1rem;\\n}\\n\\n.blocks {\\n  flex: auto;\\n  flex-direction: column;\\n  padding: 2rem;\\n}\\n\\n.block {\\n  font-size: 1rem;\\n  display: inline-block;\\n  cursor: pointer;\\n  width: fit-content;\\n  background-color: var(--snap-block-light);\\n  color: var(--snap-text-dark);\\n  margin: 0 .5rem 0 0;\\n  padding: .25rem .5rem;\\n  letter-spacing: .1rem;\\n  border-radius: .2rem;\\n  border: .05rem solid var(--snap-text-dark);\\n}\\n\\n.pool .block {\\n  margin: 0 .5rem .5rem 0;\\n}\\n\\n.block + hr {\\n  margin: .5rem 0 0 0;\\n}\\n\\n.pool {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.pool .block.active {\\n  color: var(--snap-text-light);\\n  background-color: rgb(128, 128, 128);\\n}\\n\\n.pool .block.correct {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-success);\\n}\\n\\nspan.correct {\\n  color: rgb(2, 107, 26);\\n}\\n\\n.block.snap-success, .block.snap-alert {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-success) !important;\\n  border: none;\\n}\\n\\n.block.snap-alert {\\n  background-color: var(--snap-alert) !important;\\n}\\n\\n.snap-alert-fg {\\n  color: var(--snap-alert);\\n}\\n\\n.btn.snap-alert {\\n  padding: 0.175rem 0.75rem;\\n}\\n\\n.block.white {\\n  color: var(--snap-text-dark);\\n}\\n\\n.blocks button {\\n  margin: 2rem 0 0 0;\\n}\\n\\n.delay-slider {\\n  margin: 1rem 0;\\n}\\n\\n.delay-slider > div input {\\n  flex: auto;\\n  margin: 0 .5rem;\\n}\\n\\n.response-update {\\n  flex: initial;\\n  display: flex;\\n  flex-direction: row;\\n  position: absolute;\\n  bottom: 0.5rem;\\n  right: .5rem;\\n  left: .5rem;\\n}\\n\\n.action-update {\\n  width: 100%;\\n}\\n\\n.action-update button {\\n  width: 100%;\\n}\\n\\n.answer-container .icon-container {\\n  position: relative;\\n  display: inline-block;\\n}\\n\\n.answer-container .icon {\\n  font-size: 1.5rem;\\n  position: absolute;\\n  top: -0.9rem;\\n}\\n\\n.taxa svg {\\n  margin: 0 .25rem 0 0;\\n}\\n\\n.taxa .si-glyph-mushrooms svg {\\n  margin: 0;\\n}\\n\\n.species-answer {\\n  display: none;\\n}\\n\\n.species-question,\\n.species-answer,\\n.btn-placeholder {\\n  text-align: center;\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.species-question.btn,\\n.btn-placeholder.btn {\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-block-light);\\n}\\n\\nbutton:disabled {\\n  cursor: initial !important;\\n}\\n\\n.species-answer {\\n  text-align: center;\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-block-light);\\n  border-left: 1px solid var(--snap-border-light);\\n  border-right: 1px solid var(--snap-border-light);\\n  border-bottom: 1px solid var(--snap-border-light);\\n}\\n\\n.answer-box-success .icon {\\n  color: var(--snap-success);\\n}\\n\\n.answer-box-alert .icon {\\n  color: var(--snap-alert);\\n}\\n\\n.species-card-images,\\n.non-taxon-card-images {\\n  /* height: initial; */\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  cursor: pointer;\\n}\\n\\n.non-taxon-card-images {\\n  margin: 0;\\n}\\n\\n.trait.card li span:nth-child(1) {\\n  width: 25%;\\n  text-align: left;\\n}\\n\\n.trait.card li span:nth-child(2) {\\n  width: 75%;\\n  text-align: left;\\n}\\n\\n.toggle-content,\\n.toggle-content * {\\n  display: none;\\n}\\n\\n.toggle-content.is-visible,\\n.toggle-content.is-visible * {\\n  display: initial;\\n}\\n\\n.btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-text-light);\\n  color: var(--snap-text-dark);\\n}\\n\\n.non-taxon .btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-species-header-background);\\n}\\n\\n.rb.btn-group {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.rb.btn-group .btn.btn-secondary.active {\\n  color: var(--snap-success);\\n  background-color: inherit;\\n  border: none;\\n}\\n\\n.btn-secondary:not(:disabled):not(.disabled):active {\\n  color: var(--snap-text-medium-dark);\\n  background-color: initial;\\n  border: none;\\n}\\n\\n.rb.btn-group .btn:hover {\\n  color: rgb(100, 100, 100);\\n}\\n\\n.btn.btn-secondary.disabled.active {\\n  opacity: 1;\\n}\\n\\n.rb.btn-group label {\\n  margin: 0 0 .5rem 0;\\n}\\n\\n.rb.btn-group input[type=radio] {\\n  box-sizing: border-box;\\n  padding: 0;\\n  position: absolute;\\n  clip: rect(0,0,0,0);\\n  pointer-events: none;\\n}\\n\\n.btn.btn-secondary {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--white);\\n  border: 0;\\n  width: fit-content;\\n  border: none;\\n}\\n\\n.btn.btn-secondary:hover {\\n  transition: none;\\n}\\n\\n.btn.btn-secondary.disabled .collectionName, .btn.btn-secondary.active .guideName {\\n  border: none;  \\n}\\n\\n.left-grid,\\n.species-card-wiki-entry,\\n.collection-preview,\\n.collection button,\\n.collections-skills {\\n  display: none;\\n}\\n\\n.species-table td .portrait input {\\n  height: 1.15rem;\\n  width: 1.15rem;\\n}\\n\\n.badge {\\n  vertical-align: text-top;\\n  cursor: pointer;\\n}\\n\\n.badge-light {\\n  color: inherit;\\n  background-color: transparent;\\n  margin: -0.25rem 0 0 0.25rem;\\n  padding: 0.4rem 0.4rem 0.3rem 0.4rem;\\n}\\n\\n.badge-list {\\n  height: 100%;\\n  padding: 1rem;\\n  background-color: var(--snap-snap-action-btn);\\n}\\n\\n.question-images {\\n  display: grid;\\n  height: 8rem;\\n  grid-template-columns: 1fr 1fr 1fr 1fr;\\n  grid-gap: 0.5rem;\\n}\\n\\n.layer-container {\\n  cursor: pointer;\\n  background-size: cover;\\n  background-position: center;\\n}\\n\\n.layer {\\n  height: 100%;\\n  width: 100%;\\n  color: rgb(101, 132, 37, 0);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.layer > div {\\n  text-align: center;\\n}\\n\\n.feature-label {\\n  color: var(--snap-text-green);\\n}\\n\\n.lesson-option-headers {\\n    height: 2.5rem;\\n    display: flex;\\n    align-items: center;\\n    color: var(--snap-text-dark);\\n    letter-spacing: 0.03rem;\\n    padding: 0;\\n    width: fit-content;\\n}\\n\\n.faded {\\n  color: var(--snap-border-lightest);\\n}\\n\\n.compare-species-link {\\n  cursor: pointer;\\n}\\n\\n.imageSlider .carousel-inner {\\n  display: flex;\\n  flex-direction: column;\\n  background-color: rgba(211, 214, 173, 0.4);\\n}\\n\\n.imageSlider .carousel-inner > div {\\n  width: inherit;\\n}\\n\\n.imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n  top: 40%;\\n  height: 20%;\\n  width: 10%;\\n  background-color: rgba(211, 214, 173, 0.2);\\n  opacity: 0.5;\\n}\\n\\n.carousel-control-next button, .carousel-control-prev button {\\n  background-color: transparent !important;\\n  border: none !important;\\n}\\n\\n.carousel-control-next[disabled=\\\"disabled\\\"],\\n.carousel-control-prev[disabled=\\\"disabled\\\"] {\\n  pointer-events: none;\\n}\\n\\n.imageSlider .carousel.slide {\\n  background-color: var(--snap-text-dark-medium-dark);\\n}\\n\\n.imageSlider .carousel-inner > div:nth-child(1), .imageSlider .carousel-item {\\n  height: var(--vhExtraSmallImageCarousel);\\n  min-height: var(--vhExtraSmallImageCarousel);\\n}\\n\\n.species-card-images .carousel-item-next, .species-card-images .carousel-item-prev, .species-card-images .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.imageSlider .carousel-item-next, .imageSlider .carousel-item-prev, .imageSlider .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  pointer-events: all;\\n}\\n\\n.info-box .carousel-item-next, .info-box .carousel-item-prev, .info-box .carousel-item.active {\\n  display: grid;\\n}\\n\\n.carousel-item.active button {\\n  width: initial;\\n}\\n\\n.imageSlider .carousel-item > div {\\n  height: 90%;\\n  background-size: inherit;\\n  background-repeat: no-repeat;\\n  background-position: center;  \\n}\\n\\n#imageSlider_card-card .carousel-item > div, #imageSlider_card-card .carousel-item > div {\\n  pointer-events: none;\\n}\\n\\n.imageSlider .carousel-item > div.contain-image {\\n  background-size: contain;\\n}\\n\\n.imageSlider .carousel-control-next-icon,\\n.imageSlider .carousel-control-prev-icon {\\n  width: 1.5rem;\\n  height: 1.5rem;\\n  background-color: transparent;\\n  border: none;\\n}\\n\\n#imageSlider1 {\\n  flex: 1;\\n}\\n\\n#imageSlider2 {\\n  flex: 1;\\n}\\n\\n#imageSlider3 {\\n  flex: 1;\\n}\\n\\n.info-box .carousel.slide {\\n  float: right;\\n  width: 100%;\\n  background-color: var(--snap-species-header-background);\\n}\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  padding: .25rem 0;\\n  text-align: center;\\n  margin: 0 15%;\\n  height: var(--vhHalfStandardBlock, 5vh);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.3);\\n}\\n\\n.info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.1);\\n  text-transform: lowercase;\\n}\\n\\n.info.carousel-control .carousel-control-next-icon {\\n  color: black;\\n}\\n\\n.carousel-control-prev-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\\\");\\n}\\n\\n.carousel-control-next-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\\\");\\n}\\n\\n.bird-song div:nth-child(2) {\\n  background-color: rgb(142, 160, 119);\\n}\\n\\n.bird-song-bg {\\n  background-color: var(--snap-collection-active);\\n}\\n\\n.bird-song-icon {\\n  color: rgba(0, 0, 0, 1);\\n  margin-left: -.5rem;\\n}\\n\\n.bird-song-icon-disabled {\\n  color: rgba(0, 0, 0, 0.2);\\n  pointer-events: none;\\n  margin-left: -.5rem;\\n}\\n\\niframe#birdsong {\\n  width: 1px;\\n  min-width: 260px;\\n}\\n\\n.rank {\\n  border-radius: 0.24rem;\\n  display: inline-block;\\n  vertical-align: text-top;\\n}\\n\\n.radio-buttons.disabled label {\\n  color: rgb(100,100,100);\\n}\\n\\n.visual-match .description div:empty,\\n.visual-match .description span:empty {\\n  display: none;\\n}\\n\\ndiv.hide-empty:empty,\\nspan.hide-empty:empty {\\n  display: none !important;\\n}\\n\\n.visual-match .description {\\n  background-color: rgb(200, 197, 172);\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0.5rem;\\n}\\n\\n.visual-match .description span {\\n  flex: 1;\\n  padding: 0.5rem;\\n}\\n\\n.comparison-description {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  padding: 0 0.5rem;\\n}\\n\\n.species-search .icon {\\n  font-size: 2.5rem;\\n  height: calc(var(--vhStandardBlock, 30vh) * 1.5);\\n  color: rgb(90, 147, 252);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.species-search .icon i:not(.slow-spin) {\\n  color: var(--snap-active);\\n}\\n\\n.question-container .icon {\\n  color: rgb(90, 147, 252);\\n  font-size: 1.8rem;\\n}\\n\\n.slow-spin {\\n  -webkit-animation: fa-spin 6s infinite linear;\\n  animation: fa-spin 6s infinite linear;\\n}\\n\\na.collection-disabled {\\n  color: grey;\\n  pointer-events: none;\\n}\\n\\n.attribution-layer {\\n  color: var(--snap-text-light);\\n}\\n\\n.rights-attribution {\\n  display: grid;\\n  grid-template-columns: 2rem auto;\\n  height: var(--vhRunningBlock);\\n  background-color: rgb(166, 177, 155);\\n  font-size: .7rem;\\n}\\n\\n.rights-attribution .underline-link {\\n  color: white !important;\\n}\\n\\n.rights-link-copyright {\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  z-index: 25;\\n}\\n\\n.rights-link-copyright .underline-link {\\n  line-height: 1.5;\\n}\\n\\n.rights-link-copyright i {\\n  color: white;\\n  font-size: 1.1rem;\\n}\\n\\n.rights-link-copyright i.fas.fa-copyright {\\n  font-size: 1.3rem;\\n}\\n\\n.rights-link {\\n  height: var(--vhRunningBlock);\\n  grid-template-columns: 2rem auto 2rem;\\n  background-color: rgb(166, 177, 155);\\n  display: grid;\\n}\\n\\n.rights-link > div:nth-child(1), .rights-link > div:nth-child(3) {\\n  cursor: pointer;\\n}\\n\\n.rights-attribution > div > div:nth-child(1) {\\n  margin: 0 0.5rem 0 0;\\n}\\n\\n.rights-attribution > div > div:nth-child(2) {\\n  flex: 1;\\n}\\n\\n.rights-attribution span {\\n  vertical-align: baseline;\\n  margin: 0 0 0 0.25rem;\\n}\\n\\n.greek {\\n  vertical-align: super;\\n}\\n\\n.dropdown.collections {\\n  display: flex;\\n}\\n\\n.range-slider-control {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.carousel-indicators {\\n  height: var(--vhRunningBlock);\\n  bottom: 0;\\n  margin: 0 !important;\\n  margin-left: 2.5rem !important;\\n  margin-right: 2.5rem !important;\\n  align-items: center;\\n}\\n\\n.carousel-indicators li {\\n  background-color: var(--snap-text-medium-dark);\\n  width: 1rem;\\n  height: 0.25rem;\\n  margin-bottom: 0;\\n}\\n\\n.carousel-indicators .active {\\n  background-color: white;\\n}\\n\\n.question-header {\\n  display: flex;\\n  background-color: var(--snap-species-header-background);\\n  color: var(--snap-dark);\\n  justify-content: center;\\n}\\n\\n.card-link {\\n  cursor: pointer;\\n  color: rgb(128, 121, 49);\\n}\\n\\n.calendar-container {\\n  display: flex;\\n  align-items: center;\\n  border-right: 1px solid var(--snap-border-lightest);\\n  justify-content: center;\\n}\\n\\n.calendar-box .row {\\n  display: grid;\\n  grid-auto-flow: row;\\n}\\n\\n.calendar-box .col {\\n  display: grid;\\n  grid-auto-flow: column;\\n}\\n\\n.calendar-box .col div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: 1.4rem;\\n  height: 1.4rem;\\n}\\n\\n.most-observations {\\n  color: var(--orange);\\n}\\n\\n.current-month {\\n  border: 0.05rem solid rgba(108, 117, 125,.8);\\n}\\n\\n.floating-card > span:nth-child(1) {\\n  background: #fff;\\n  border: none;\\n  border-radius: 2px;\\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\\n  display: inline-block;\\n  font-weight: 300;\\n  margin: .5rem;\\n  padding: .8rem 1.1rem;\\n}\\n\\n.home-container .snapdragon-header {\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-light);\\n  font-size: 1.6rem;\\n  letter-spacing: .25rem;\\n  border-bottom: 1px solid var(--snap-border-lightest);\\n}\\n\\n.home-container .snapdragon-header a, .home-container .snapdragon-header a:visited {\\n  color: var(--snap-text-medium-light);\\n}\\n\\n.home-container .snapdragon-tag, .home-container .summary-scores, .trait-card-summary-container .summary-scores {\\n  justify-content: center;\\n  font-style: italic;\\n  display: flex;\\n  color: var(--snap-link);\\n  letter-spacing: .03rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n}\\n\\n.trait-card-summary-container .summary-scores {\\n  padding: 0 1rem;\\n}\\n\\n.home-guide .taxa {\\n  color: var(--snap-collection-active);\\n}\\n\\n.home-guide .taxa > span {\\n  margin-right: .25rem;\\n}\\n\\n.summary-scores .summary-progress {\\n  margin: 1rem 0 0 0;\\n  position: relative;\\n}\\n\\n.summary-scores .summary-progress span {\\n  margin: 0 0 0 .5rem;\\n}\\n\\n.summary-scores .summary-progress span.above {\\n  position: relative;\\n  bottom: .5rem;\\n}\\n\\n.summary-scores .summary-progress span.below {\\n  position: relative;\\n  top: .5rem;\\n}\\n\\n.summary-scores span {\\n  margin: 0 .25rem 0 0;\\n}\\n\\n.summary-scores span:nth-child(2) {\\n  vertical-align: super;\\n}\\n\\n.trait-line {\\n  margin-top: 2rem;\\n}\\n\\n.trait-line .small-icon {\\n  font-size: 1rem !important;\\n  margin: 0 !important;\\n}\\n\\n.trait-icon, .trait-icon > span {\\n  margin: 0 !important;\\n}\\n\\n.trait-icon svg g g {\\n  fill: var(--snap-link);\\n}\\n\\n.home-container .snapdragon-tag .inat-widget span:nth-child(1) {\\n  font-style: initial;\\n}\\n\\n.home-container .vernacular-language {\\n  font-size: 1rem;\\n}\\n\\n.delete-guide-link > span.active {\\n  color: var(--snap-alert) !important; \\n  pointer-events: initial;\\n}\\n\\n.delete-guide-link > span.disabled {\\n  color: var(--secondary) !important;\\n  pointer-events: none;\\n}\\n\\n.delete-guide-link input {\\n  cursor: pointer;\\n  width: 1rem;\\n  height: 1rem;\\n  vertical-align: text-bottom;\\n}\\n\\n.home-container .snapdragon-tag > div .underline-link {\\n  text-transform: initial;\\n}\\n\\n.home-container .snapdragon-tag > div .super-text {\\n  display: inline-block;\\n  margin: .5rem 0 0 .25rem;\\n  vertical-align: top;\\n  color: var(--secondary);\\n  font-style: italic;\\n}\\n\\n.snapdragon-create-guide {  \\n  position: absolute;\\n  bottom: 1rem;\\n  right: 1rem;\\n  color: var(--snap-link);\\n}\\n\\n.snapdragon-create-guide > div:nth-child(1) {\\n  letter-spacing: .05rem;\\n  text-transform: uppercase;\\n}\\n\\n.snapdragon-create-guide .for-text {\\n  vertical-align: middle;\\n}\\n\\n.snapdragon-create-guide .toggle-links {\\n  display: flex;\\n  justify-content: flex-end;\\n  margin: .5rem .25rem 0 0;\\n}\\n\\n.edit-guide-link, .save-guide-link, .margin-right {\\n  margin: 0 .5rem 0 0;\\n}\\n\\n.swap-in-card {\\n  display: initial;\\n}\\n\\n.swap-out-card {\\n  display: none !important;\\n}\\n\\n.no-pointer-events {\\n  pointer-events: none;\\n}\\n\\n.snapdragon-intro {\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock));\\n  top: calc(var(--vhStandardBlock));  \\n}\\n\\n.snapdragon-intro > h3, .snapdragon-intro > h4, .snapdragon-intro > h5 {\\n  line-height: 2;\\n  font-size: 1rem;\\n  margin: 1.2rem 2.4rem 0 2.4rem !important;\\n}\\n\\n.snapdragon-intro .youtube-icon {\\n  font-size: 1rem;\\n}\\n\\n.lesson-list {\\n  position: relative;\\n  background-color: var(--snap-block-light);\\n}\\n\\n.lesson-list-header {\\n  padding: 0 !important;\\n  background-color: var(--snap-list-header-background);\\n  justify-content: space-between;\\n}\\n\\n.lesson-list-header > div:nth-child(1) {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.lesson-list-header > div:nth-child(1) > div {\\n  color: var(--snap-text-medium-light);\\n  display: flex;\\n  align-items: center;\\n  width: 100%;\\n  justify-content: space-between;\\n  padding-right: 1rem;\\n}\\n\\n.lesson-list-header > div:nth-child(2) {  \\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer;\\n}\\n\\n.lesson-list-header > div:nth-child(2) > div {  \\n  height: calc( var(--vh) * 5);\\n  width: calc( var(--vh) * 5);\\n}\\n\\n.lesson-list-header > div:nth-child(1) {\\n  padding-left: .5rem !important;\\n}\\n\\n.lesson-list-header > div[data-toggle-state=\\\"off\\\"]:nth-child(1) > div:nth-child(1) {\\n  display: none;\\n}\\n\\n.lesson-list-header > div[data-toggle-state=\\\"on\\\"]:nth-child(1) > div:nth-child(2) {\\n  display: none;\\n}\\n\\n.lesson-list-header i {\\n  font-size: 1rem;\\n  vertical-align: super;\\n  color: var(--snap-text-medium-light);\\n  cursor: pointer;\\n}\\n\\n.lesson-list-carousel-item {\\n  display: flex;\\n  margin: .25rem 0;\\n}\\n\\n.lesson-list-carousel-item > div:nth-child(3) {\\n  font-size: 1.3rem;\\n  cursor: pointer;\\n  align-items: center;\\n  display: flex;\\n  position: absolute;\\n  right: .5rem;\\n}\\n\\n.lesson-list-item {\\n  padding: 1rem .5rem;\\n  pointer-events: none;\\n}\\n\\n.lesson-review, .lesson-terms-review {\\n  pointer-events: initial;  \\n  line-height: 3;\\n}\\n\\n.lesson-review i {\\n  font-size: .9rem;\\n  color: var(--snap-collection);\\n}\\n\\n.lesson-review i.fa-sync, .lesson-list-item i.fa-sync {\\n  font-size: 1rem;\\n  color: var(--snap-active);\\n}\\n\\n.lesson-list > div > div:nth-child(1) {\\n  justify-content: space-between;\\n  /* top: 0; */\\n  /* z-index: 30;\\n  width: 100%; */\\n}\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n) {\\n  background-color: var(--snap-lesson-row-green);\\n}\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n+1) {\\n  background-color: var(--snap-lesson-row-green);\\n}\\n\\n.lesson-list .scrollable {\\n  width: 100%;  \\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock, 10vh));\\n  flex-direction: column;\\n  top: var(--vhStandardBlock, 10vh);\\n  border-top: 1px solid var(--snap-border-lightest);\\n}\\n\\n.lesson-list .scrollable .btn input[type=radio] {\\n  position: absolute;\\n  clip: rect(0,0,0,0);\\n}\\n\\n.youtube-green-fg {\\n  color: var(--snap-youtube-green);\\n}\\n\\n.button-block {\\n  height: var(--vhButtonBlock, 9vh);\\n  margin: 0 !important;\\n}\\n\\n.running-block {\\n  height: var(--vhRunningBlock, 9vh);\\n}\\n\\n.calendar-block {\\n  height: var(--vhCalendar, 11vh);\\n}\\n\\n.modal-footer.double-centred-block {\\n  background-color: var(--snap-portrait);\\n  text-transform: uppercase;\\n  cursor: pointer;\\n}\\n\\n.video {\\n  position: sticky;\\n  position: -webkit-sticky; \\n  top: 0; \\n  margin: 0;\\n  padding: 0;\\n  padding-top: .4rem;\\n  border-top: 1px solid var(--snap-border-light);\\n  position: relative;\\n  height: 0;\\n  padding-top: 56.25%;\\n  width:100%;\\n}\\n\\n.video iframe {\\n  position: absolute;\\n  top: 0; left: 0;\\n  border: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.home-scrolling-container {\\n  position: relative;\\n}\\n\\n.home-scrolling-container .scrollable {\\n  top: calc( var(--vhScrollingTop));\\n}\\n\\n.form-check {\\n  pointer-events: initial !important;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.form-check-input {\\n  margin-top: 0;\\n}\\n\\n.lesson-list .btn-group label.form-check-label {\\n  background-color: initial;\\n  cursor: pointer;\\n}\\n\\n/* .lesson-review > div {\\n  font-size: .7em;\\n} */\\n\\n.main-header {\\n  font-size: 1.4rem;\\n  text-transform: uppercase;\\n  letter-spacing: .25rem;\\n}\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5;\\n}\\n\\n#insertParent {\\n  /* background-color: var(--snap-container-background);   */\\n  font-size: .8rem;\\n  padding: 1rem;\\n}\\n\\n.col-count-2 {\\n  column-count: 2;\\n}\\n\\n.col-count-3 {\\n  column-count: 3;\\n}\\n\\n#insertParent > div > div:nth-child(1) {\\n  font-style: italic;\\n  font-size: .9rem;\\n}\\n\\n.border-bottom {\\n  border-bottom: .03rem solid var(--snap-border-medium);\\n}\\n\\n/* .title {\\n  padding: 0 .5rem;\\n} */\\n\\n.lesson-companion {\\n  display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    font-style: italic;\\n    font-size: 1.1em;\\n    height: var(--vhStandardBlock, 10vh);\\n}\\n\\n.score-summary {\\n  top: calc(var(--vhStandardBlock));\\n  padding: .5rem 1.5rem;\\n}\\n\\n.score-summary.scrollable.review-summary {\\n  bottom: 1rem;\\n}\\n\\n.continue-link {\\n  margin-top: .5rem;  \\n}\\n\\n.highlighted-for-review-row {\\n  background-color: var(--snap-content-background) !important;\\n  border-top: 1px solid var(--snap-btn-auxillary);\\n  border-right: 1px solid var(--snap-btn-auxillary);\\n  border-bottom: 1px solid var(--snap-btn-auxillary);\\n  border-left: 1px solid var(--snap-btn-auxillary);\\n}\\n\\n.score-summary-row {\\n  border-bottom: .3rem solid var(--snap-content-background);\\n  padding: 1rem 0;\\n}\\n\\n.score-summary-row-title {\\n  padding: .5rem 0 0 0;\\n}\\n\\n.score-summary-row.species {\\n  background-color: var(--snap-header-background);\\n  border: none;\\n  display: flex;\\n  width: 100%;\\n}\\n\\n.score-summary-row.header {\\n  cursor: pointer;\\n  background-color: initial;\\n  font-size: initial;\\n  letter-spacing: initial;\\n  background-color: var(--snap-row-background);\\n}\\n\\n.score-summary-row > div:nth-child(1), .score-summary-row > div:nth-child(3) {\\n  width: 5rem;\\n  min-width: 5rem;\\n}\\n\\n.score-summary-row > div:nth-child(1) i, .score-summary-row > div:nth-child(3) i {\\n  font-size: 1.2rem;\\n}\\n\\n.score-summary-row > div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n\\n.score-summary-row > div:nth-child(2) {\\n  flex: auto;\\n  align-items: flex-start;\\n  max-width: 100%;\\n}\\n\\n.score-summary-row.in-columns {\\n  flex-direction: column;\\n  padding: 0;\\n}\\n\\n.score-summary-row.in-columns > div {  \\n  display: flex;\\n  flex-direction: row;\\n  width: 100%;\\n}\\n\\n.score-summary-row.in-columns > div > div {\\n  padding: 1rem 0;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(1), .score-summary-row.in-columns > div > div:nth-child(3) {\\n  width: 6rem;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) {\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  width: 100%;\\n  border-bottom: .03rem solid var(--snap-dd-non-taxa-bg-hover);\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) > div {\\n  font-size: .8rem;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) > div:nth-child(1) {\\n  padding: .5rem;\\n}\\n\\n.score-summary-row.in-columns div[data-is-true=\\\"true\\\"] > div:nth-child(2) {\\n  color: var(--snap-success);\\n}\\n\\n.score-summary-row.in-columns div[data-is-true=\\\"true\\\"] > div:nth-child(2) {\\n  border: solid 1px var(--snap-progress-bar);\\n  padding: .3rem;\\n  display: inline-block;\\n}\\n\\n.score-summary-row.in-columns div[data-is-wrong-answer=\\\"true\\\"] {\\n  color: var(--snap-alert); \\n}\\n\\nimg[data-has-image=\\\"false\\\"] {\\n  display: none;\\n}\\n\\n.score-summary-row > div:nth-child(1) i {\\n  display: none;\\n}\\n\\n.score-summary-row > div[data-is-true=\\\"true\\\"]:nth-child(1) i:nth-child(1) {\\n  display: initial;\\n  color: rgb(52, 105, 23,.5);\\n  font-size: .8rem;\\n  font-size: 1.5rem;\\n}\\n\\n.score-summary-row > div:nth-child(1)[data-is-true=\\\"false\\\"] i:nth-child(2) {\\n  display: initial;\\n  color: var(--snap-alert);\\n  color: rgba(183, 12, 21,.5);\\n  font-size: 1.5rem;\\n}\\n\\n.score-summary-row img {\\n  width: 98px;\\n  height: 68px;\\n}\\n\\n.score-summary-row.title > span {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n\\n.score-summary-footer {\\n  justify-content: flex-end;\\n  align-items: flex-start;\\n}\\n\\n.concealed {\\n  opacity: 0;\\n}\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5 !important;\\n}\\n\\n.autocomplete {\\n  height: 5rem !important;\\n  position: absolute !important;\\n}\\n\\n.login.icon > i:nth-child(2) {\\n  color: var(--snap-text-light);\\n}\\n\\n.login.icon[data-is-logged-in=\\\"true\\\"] > i:nth-child(1) {\\n  display: none;\\n}\\n\\n.login.icon[data-is-logged-in=\\\"false\\\"] > i:nth-child(2) {\\n  display: none;\\n}\\n\\n.quick-fire {\\n  position: relative;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n/* .quick-fire .score {\\n  bottom: 5rem;\\n  position: absolute;\\n} */\\n\\n.quick-fire .strips {\\n  height: initial;\\n}\\n\\ninput[type=\\\"number\\\"].big {\\n  width: 4rem;\\n  padding: .5rem;\\n}\\n\\ninput[type=\\\"number\\\"].medium {\\n  width: 3rem;\\n  padding: .25rem;\\n  font-size: .8rem;\\n}\\n\\n.quick-fire-taxa {\\n  column-count: 2;\\n}\\n\\n.quick-fire label, .quick-fire-taxa label {\\n  cursor: pointer;\\n}\\n\\n.quick-fire-taxa span, .quick-fire-branches span {\\n  font-size: .6rem;\\n  vertical-align: super;\\n  display: inline-block;\\n  padding: 0 .125rem;\\n  min-width: 1.5rem;\\n  text-align: left;\\n}\\n\\n.quick-fire-branches span {\\n  font-size: .6rem;\\n}\\n\\n.quick-fire .btn-group {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.quick-fire .btn-group >.btn {\\n  background-color: var(--snap-snap-action-btn);\\n  margin: 0 0 .5rem 0;\\n  border-radius: .25rem !important;\\n  letter-spacing: .03rem;\\n  width: fit-content;\\n  width: max-content;\\n  cursor: pointer !important;  \\n}\\n\\n.quick-fire .btn-group >.btn.active {\\n  background-color: var(--snap-text-medium-dark-hover);\\n  color: var(--snap-text-light);\\n}\\n\\n.quick-fire .quick-fire-branches.btn-group >.btn {\\n  background-color: var(--snap-btn-filter-off);\\n  border: 1px solid var(--snap-border-lightest);\\n}\\n\\n.quick-fire .quick-fire-options .btn-secondary {\\n  border: 1px solid var(--snap-collection-active);\\n}\\n\\n.quick-fire .quick-fire-options .btn-secondary:not(:disabled):not(.disabled).active {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-tertiary-background);\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.quick-fire .quick-fire-branches .btn-secondary {\\n  font-size: .7rem;\\n}\\n\\n.quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n  font-size: .7rem;\\n  background-color: var(--snap-btn-filter-on);\\n  color: var(--snap-text-dark-medium-dark);\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.quick-fire .btn {  \\n  cursor: pointer !important;\\n}\\n\\n.quick-fire-text-entry > div{\\n  width: 100%;\\n}\\n\\n.quick-fire .custom-checkbox .custom-control-input:checked ~ .custom-control-label::before {\\n  background-color: var(--snap-btn-blue);\\n}\\n\\n.quick-fire-summary-row.card {\\n  background-color: var(--snap-row-background);\\n  text-align: left;\\n  cursor: pointer;\\n}\\n\\n.quick-fire-summary-row .card-header {\\n  border-bottom: 0;\\n}\\n\\n.quick-review-tabs span {\\n  pointer-events: none;\\n}\\n\\n.nav-link {\\n  color: var(--snap-text-medium-dark);\\n  letter-spacing: .03rem;\\n}\\n\\n.nav-pills .nav-link.active, .nav-pills .show>.nav-link {\\n  color: var(--snap-text-light);\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--snap-collection-light);\\n}\\n\\n.nav-pills .nav-item:nth-child(1) .nav-link.active, .nav-pills .nav-item:nth-child(1) .show>.nav-link {\\n  background-color: var(--snap-success-medium);\\n}\\n\\n.nav-pills .nav-item:nth-child(2) .nav-link.active, .nav-pills .nav-item:nth-child(2) .show>.nav-link {\\n  background-color: var(--snap-alert-medium);\\n}\\n\\n.nav-pills .nav-link {\\n  border-radius: 0;\\n  position: relative;\\n}\\n\\n.quick-fire .nav-link.active.show {\\n  display: block;\\n}\\n\\n.quick-fire .nav-item a:hover {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--snap-btn-hover);\\n}\\n\\n.quick-fire .nav-item:nth-child(1) a:hover {\\n  background-color: var(--snap-success-light);\\n}\\n\\n.quick-fire .nav-item:nth-child(2) a:hover {\\n  background-color: var(--snap-alert-light);\\n}\\n\\n.quick-fire .accordions-container {\\n  height: calc(\\n     (var(--vh, 1vh) * 100) \\n    - var(--vhFixtures, 15vh)\\n    - var(--vhDoubleStandardBlock,20vh)\\n    - var(--vhStandardBlock,10vh) \\n    - 1rem\\n    );\\n    top: calc(\\n        var(--vhDoubleStandardBlock,20vh)\\n      + var(--vhStandardBlock,10vh) \\n    );\\n}\\n\\n.correct-answer-color {\\n  color: var(--snap-success); \\n}\\n\\n.incorrect-answer-color {\\n  color: var(--snap-alert);\\n}\\n\\n.low-relief-block {\\n  border: 1px solid var(--snap-success-light) !important;\\n  background-color: var(--snap-species-highlight-background);\\n}\\n\\n.horizontal-buttons {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr;\\n  grid-gap: .5rem;\\n}\\n\\n.lesson-spinner {\\n  font-size: 5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh)); \\n}\\n\\n.image-slider-190 img {\\n  height: 190px;\\n  min-height: 190px;\\n}\\n\\n.lesson-icon{\\n  width: 98px;\\n  height: 68px;\\n  object-fit: none;\\n}\\n\\n.location-filter-options {\\n  padding: .5rem;\\n  grid-template-rows: 1fr 1fr;\\n  display: grid;\\n}\\n\\n.skip-link {\\n  position: absolute;\\n  top: -40px;\\n  left: 0;\\n  background: #000000;\\n  color: white;\\n  padding: 8px;\\n  z-index: 100;\\n}\\n\\n.skip-link:focus {\\n  top: 0;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  a {\\n    color: var(--snap-youtube-green);\\n  }\\n\\n  h1 {\\n    font-size: .9rem;\\n  }\\n\\n  h2 {\\n    font-size: .8rem;\\n  }\\n\\n  h3 {\\n    font-size: .7rem;\\n  }\\n\\n  img {\\n    max-width: 100%;\\n    display: block;\\n  }\\n\\n  h1, h2, h3 {\\n    font-weight: unset;\\n    margin: 0 !important;\\n  }\\n\\n  label {\\n    margin: 0;\\n  }\\n\\n  legend {\\n    margin-bottom: 0 !important;\\n    width: initial !important;\\n  }\\n\\n  caption {\\n    padding: 0;\\n    height: 0;\\n  }\\n\\n  dt {\\n    font-weight: 500;\\n  }\\n\\n  .flex {\\n    display: flex;\\n  }\\n\\n  .flexnowrap {\\n    flex-wrap: nowrap;\\n  }\\n\\n  .relative {\\n    position: relative;\\n  }\\n\\n  .absolute {\\n    position: absolute;\\n  }\\n\\n  .standard-block {\\n    height: var(--vhStandardBlock, 10vh);\\n  }\\n  \\n  .double-standard-block {\\n    height: var(--vhDoubleStandardBlock, 20vh);\\n  }\\n  \\n  .half-standard-block {\\n    height: var(--vhHalfStandardBlock, 5vh);\\n  }\\n  \\n  .one-and-half-standard-block {\\n    height: var(--vhOneAndHalfStandardBlock, 15vh);\\n  }\\n\\n .centred-block {\\n    display: flex;\\n    align-items: center;\\n    width: -moz-available;\\n    width: -webkit-fill-available;\\n  }\\n  \\n  .bottom-aligned {\\n    display: flex;\\n    align-items: flex-end;\\n  }\\n  \\n  .double-centred-block {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  \\n  .vertical-centred-block {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n  }\\n  \\n  .vertical-evenly-spaced-block {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-evenly;\\n  }\\n  \\n  .horizontal-evenly-spaced-block {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: space-evenly;\\n  }\\n\\n  .margin-all {\\n    margin: .5rem !important;\\n  }\\n  \\n  .margin-top {\\n    margin-top: .5rem !important;\\n  }\\n  \\n  .margin-right {\\n    margin-right: .5rem !important;\\n  }\\n  \\n  .half-margin-right {\\n    margin-right: .25rem !important;\\n  }\\n  \\n  .double-margin-right {\\n    margin-right: 1rem !important;\\n  }\\n  \\n  .margin-bottom {\\n    margin-bottom: .5rem !important;\\n  }\\n  \\n  .margin-left {\\n    margin-left: .5rem !important;\\n  }\\n  \\n  .half-margin-left {\\n    margin-left: .25rem !important;\\n  }\\n  \\n  .padding {\\n    padding: .5rem;\\n  }\\n  \\n  \\n  .half-padding {\\n    padding: .25rem;\\n  }\\n  \\n  .padding-top {\\n    padding-top: .5rem;\\n  }\\n  \\n  .padding-right {\\n    padding-right: .5rem;\\n  }\\n  \\n  .padding-bottom {\\n    padding-bottom: .5rem;\\n  }\\n  \\n  .padding-left {\\n    padding-left: .5rem;\\n  }\\n\\n  .custom-control {\\n    display: flex;\\n    align-items: center;\\n  }\\n  \\n  .custom-checkbox .custom-control-input:checked ~ .custom-control-label::before {\\n    background-color: rgb(98, 127, 134);\\n  }\\n  \\n  .custom-checkbox\\n    .custom-control-input:disabled:checked\\n    ~ .custom-control-label::before {\\n    background-color: rgba(41, 108, 44, 0.3);\\n    pointer-events: none;\\n  }\\n  \\n  .custom-checkbox input {\\n    margin: 0 0.5rem 0 0;\\n  }\\n\\n  .show {\\n    display: inline;\\n  }\\n  \\n  .hide {\\n    display: none;\\n  }\\n  \\n  .hide-important {\\n    display: none !important;\\n  }\\n\\n\\n  .visually-hidden:not(:focus):not(:active) {\\n    position: absolute !important;\\n    height: 1px; \\n    width: 1px;\\n    overflow: hidden;\\n    clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\\n    clip: rect(1px, 1px, 1px, 1px);\\n    white-space: nowrap; /* added line */\\n}\\n  \\n  .underline-link {\\n    color: var(--snap-youtube-green);\\n    cursor: pointer;\\n    display: inline-block;\\n    line-height: 1.8;\\n    pointer-events: initial;\\n  }\\n\\n  .underline-link:hover, .underline-link:focus {\\n    color: var(--snap-text-black);\\n  }\\n\\n  .underline-link:focus {\\n    outline: 1px solid var(--snap-border-medium); /* must put something back! */\\n  }\\n\\n  .underline-link-left-margin {\\n    margin-left: -.25rem;\\n  }\\n\\n  a.underline-link, a.underline-link:hover, a.underline-link:active, a.underline-link:focus {\\n    color: var(--blue) !important;\\n    border-color: transparent;\\n  }\\n\\n  a.underline-link:hover, a.underline-link:active, a.underline-link:focus {\\n    border-color: var(--blue) !important;\\n  }\\n\\n  .full-width {\\n    width: 100%;\\n  }\\n\\n  .cursor-pointer {\\n    cursor: pointer;\\n  }\\n\\n  .border-top {\\n    border-bottom: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-right {\\n    border-right: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-bottom {\\n    border-bottom: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-left {\\n    border-left: 1px solid var(--snap-border-light);\\n  }\\n\\n  .justify-space-between {\\n    justify-content: space-between;\\n  }\\n\\n  .justify-end {\\n    justify-content: flex-end;\\n  }\\n\\n  .small-text {\\n    font-size: .8rem !important;\\n  }\\n\\n  .smaller-text {\\n    font-size: .7rem !important;\\n  }\\n\\n  .extra-small-text {\\n    font-size: .6rem !important;\\n  }\\n\\n  .large-text {\\n    font-size: 1.2rem !important;\\n  }\\n\\n  .extra-large-text {\\n    font-size: 1.5rem !important;\\n  }\\n\\n  .capitalise {\\n    text-transform: capitalize;\\n  }\\n  \\n  .uppercase {\\n    text-transform: uppercase;\\n  }\\n  \\n  .line-through {\\n    text-decoration: line-through;\\n  }\\n\\n  .modal-background-relief {\\n    background-color: var(--snap-species-highlight-background);\\n  }\\n\\n  .modal-background-relief-emphasis {\\n    border: 1px solid var(--snap-success) !important;\\n  }\\n\\n  .border-light {\\n    border: 1px solid var(--snap-success-light) !important;\\n  }\\n\\n  .border-medium {\\n    border: 1px solid var(--snap-border-medium);\\n  }\\n\\n  .vertical-block {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\\n  .emphasis {\\n    font-weight: bold;\\n    letter-spacing: .03rem;\\n  }\\n  \\n  .absolute-bottom {\\n    position: absolute;\\n    bottom: .5rem;\\n  }\\n\\n  .answer-response {\\n    margin: 0 0 0 .25rem;\\n  }\\n\\n  .col-count-2 {\\n    column-count: 2;\\n  }\\n\\n  .col-count-3 {\\n    column-count: 3;\\n  }\\n\\n  .col-count-4 {\\n    column-count: 4;\\n  }\\n\\n  .col-count-5 {\\n    column-count: 5;\\n  }\\n\\n  .col-count-6 {\\n    column-count: 6;\\n  }\\n\\n  .nowrap {\\n    white-space: nowrap;\\n  }\\n  \\n  .snap-inactive {\\n    color: var(--snap-inactive) !important;\\n    pointer-events: none !important;\\n  }\\n\\n  .black-text {\\n    color: var(--snap-text-black);\\n  }\\n\\n  /* If set to display inline, would width automatically be determined by the text they contain? each span vs div */\\n  .fit-width {\\n    width: intrinsic;           /* Safari/WebKit uses a non-standard name */\\n    width: -moz-max-content;    /* Firefox/Gecko */\\n    width: -webkit-max-content; /* Chrome */\\n  }\\n\\n  .sr-only {\\n    position: absolute;\\n    width: 1px;\\n    height: 1px;\\n    padding: 0;\\n    margin: -1px;\\n    overflow: hidden;\\n    clip: rect(0, 0, 0, 0);\\n    border: 0;\\n  }  \\n\\n  .super {\\n    vertical-align: super;\\n    font-size: .8em;\\n  }  \\n\\n/* https://css-tricks.com/styling-cross-browser-compatible-range-inputs-css/ */\\n\\n/* \\n  input[type=range] {\\n    -webkit-appearance: none;\\n    margin: 18px 0;\\n    width: 100%;\\n  }\\n  input[type=range]:focus {\\n    outline: none;\\n  }\\n  input[type=range]::-webkit-slider-runnable-track {\\n    width: 100%;\\n    height: 8.4px;\\n    cursor: pointer;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    background: #3071a9;\\n    border-radius: 1.3px;\\n    border: 0.2px solid #010101;\\n  }\\n  input[type=range]::-webkit-slider-thumb {\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    border: 1px solid #000000;\\n    height: 36px;\\n    width: 16px;\\n    border-radius: 3px;\\n    background: #ffffff;\\n    cursor: pointer;\\n    -webkit-appearance: none;\\n    margin-top: -14px;\\n  }\\n  input[type=range]:focus::-webkit-slider-runnable-track {\\n    background: #367ebd;\\n  }\\n  input[type=range]::-moz-range-track {\\n    width: 100%;\\n    height: 8.4px;\\n    cursor: pointer;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    background: #3071a9;\\n    border-radius: 1.3px;\\n    border: 0.2px solid #010101;\\n  }\\n  input[type=range]::-moz-range-thumb {\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    border: 1px solid #000000;\\n    height: 36px;\\n    width: 16px;\\n    border-radius: 3px;\\n    background: #ffffff;\\n    cursor: pointer;\\n  }\\n  input[type=range]::-ms-track {\\n    width: 100%;\\n    height: 8.4px;\\n    cursor: pointer;\\n    background: transparent;\\n    border-color: transparent;\\n    border-width: 16px 0;\\n    color: transparent;\\n  }\\n  input[type=range]::-ms-fill-lower {\\n    background: #2a6495;\\n    border: 0.2px solid #010101;\\n    border-radius: 2.6px;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n  }\\n  input[type=range]::-ms-fill-upper {\\n    background: #3071a9;\\n    border: 0.2px solid #010101;\\n    border-radius: 2.6px;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n  }\\n  input[type=range]::-ms-thumb {\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    border: 1px solid #000000;\\n    height: 36px;\\n    width: 16px;\\n    border-radius: 3px;\\n    background: #ffffff;\\n    cursor: pointer;\\n  }\\n  input[type=range]:focus::-ms-fill-lower {\\n    background: #3071a9;\\n  }\\n  input[type=range]:focus::-ms-fill-upper {\\n    background: #367ebd;\\n  } */\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".species-table {\\n  border-right: 1px solid var(--snap-btn-auxillary);\\n  border-left: 1px solid var(--snap-btn-auxillary);\\n  border-bottom: 1px solid var(--snap-btn-auxillary);\\n}\\n\\n.table-header {\\n  cursor: pointer;\\n  display: flex;\\n  flex-direction: row;\\n  border: 0;\\n  height: var(--vhRunningBlock,7.5vh);\\n  z-index: 10;\\n  align-items: center;\\n  top: 0;\\n  background-color: var(--snap-btn-auxillary);\\n  color: var(--snap-text-light);\\n  font-size: 1.1em;\\n  letter-spacing: .01rem;\\n}\\n\\n.table-header th {\\n  cursor: pointer;\\n  font-weight: initial;\\n}\\n\\n.table-row {\\n    display: flex;\\n    flex-direction: row;\\n    height: var(--vhRow, 12.5vh);\\n    font-size: .9em;\\n  }\\n  \\n  .table-row-chevron {\\n    display: flex;\\n    justify-content: center;\\n    width: 100%;\\n  }\\n\\n  tr.master:nth-child(2n + 1) {\\n    background-color: var(--snap-content-background);\\n  }\\n \\n  .table-row img, table input {\\n    cursor: pointer;\\n  }\\n\\n  .table-row td button i {\\n    min-width: 2.5rem;\\n  }\\n  \\n  .table-row img {\\n    width: 64px;\\n    height: 64px;\\n    object-fit: none;\\n    padding: .5rem;\\n  }\\n\\n  .table-row img:hover {\\n    opacity: .8;\\n  }\\n  \\n  .table-row img:focus {\\n    border: 1px solid black;\\n  }\\n  \\n  .table-row .lp-level {\\n    padding: 0 0 0 0.5rem;\\n  }\\n\\n  .inserted-td {\\n    font-size: .9rem;\\n    white-space: normal;\\n    text-align: left;\\n    padding: .5rem;\\n  }\\n\\n  th {\\n    text-align: initial;\\n  }\\n\\n\\n  .table-header th:nth-child(1) {\\n    min-width: 80px;\\n  }\\n\\n  .species-list .table-header th:nth-child(2):after,\\n  .species-list .table-header th:nth-child(3):after {\\n    display: inline-block;\\n    width: 0;\\n    height: 0;\\n    margin-left: 0.255rem;\\n    vertical-align: middle;\\n    content: \\\"\\\";\\n    border-top: 0.3rem solid;\\n    border-right: 0.3rem solid transparent;\\n    border-bottom: 0;\\n    border-left: 0.3rem solid transparent;\\n    cursor: default;\\n  }\\n  \\n  .table-header th:nth-child(1) > span,\\n  .table-footer td:nth-child(1) > span {\\n    height: 1px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  \\n  .table-header th:nth-child(2) {\\n    flex: 3;\\n    align-items: flex-start;\\n  }\\n  \\n  .master.table-row td:nth-child(1) {\\n    width: 80px;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .species-description > td:nth-child(1) {\\n    width: 100%;\\n  }\\n\\n  .table-row td:nth-child(2) {\\n    flex: 3;\\n    display: flex;\\n    align-items: flex-start;\\n    flex-direction: column;\\n    justify-content: center;\\n  }\\n\\n  .table-header th:nth-child(3), .table-row td:nth-child(3), .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n    flex: 1;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .table-header th:nth-child(5), .table-row td:nth-child(5) {\\n    flex: 1;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) {\\n      flex: 1;\\n      display: flex;\\n      align-items: center;\\n  }\\n\\n  .table-header th:nth-child(5), .table-row td:nth-child(5) button {\\n    position: absolute;\\n    right: 2.5rem;\\n  }\\n\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) button {\\n    position: absolute;\\n    right: .5rem;\\n  }\\n\\n  .hide-column {\\n    flex: 0 !important;\\n    display: none !important;\\n  }\\n\\n .species-table .mushroom-icon svg {\\n  width: 1rem;\\n  height: 1rem;\\n  margin-top: .3rem;\\n }\\n\\ndiv.species-description {\\n  background-color: var(--snap-species-highlight-background);\\n  border-top: .5px solid var(--snap-youtube-green);\\n  border-bottom: .5px solid var(--snap-youtube-green);\\n  padding: 1rem;\\n  color: rgba(0, 0, 0, .85);\\n  height: initial;\\n}\\n\\n.species-description > td {\\n  width: 100%;\\n}\\n\\n.youtube-icon, .accordion-icon {\\n  font-size: 1.8rem;\\n  cursor: pointer;\\n}\\n\\ntable .youtube-icon, .accordion-icon {\\n  font-size: 1.2rem;\\n}\\n\\n.species-container {\\n  position: relative;\\n  width: 100%;\\n}\\n\\n.lesson-list-action-icons {\\n  right: .5rem;\\n  bottom: 1.5rem;\\n}\\n \\n.species-table .underline-link {\\n    text-transform: initial;\\n    display: initial;\\n}  \\n\\n.btn-current-lesson-begin {\\n  width: calc(var(--vwGrid) - 1rem);\\n  margin: .5rem;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* iPhone 5, ?? */\\n\\n@media (max-width: 320px) and (max-height: 568px) {\\n    .imageSlider .active.carousel-item {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n    }\\n}\\n\\n@media (min-width: 320px) {\\n}\\n@media (min-width: 414px) {\\n    .test-card-question .question-question {\\n        font-size: 1.2rem;\\n    }\\n    .rights-link, .rights-attribution {\\n        grid-template-columns: 4rem auto 4rem;\\n    }\\n}\\n\\n/* iPHONE 6,7,8 */\\n\\n@media (max-width:375px) and (min-height:667px) {\\n    .autocomplete {\\n        height: 8rem !important;\\n    }\\n}\\n\\n/* Galaxy S5 */\\n\\n@media (min-width:360px) {\\n    .names-container .vernacular-name {\\n        max-width: 13.5rem;\\n    }\\n}\\n\\n/* @media (min-width:414px) {\\n    .youtube-icon, .accordion-icon {\\n        font-size: 1.4rem;\\n    }\\n    .species-table .youtube-icon, .accordion-icon {\\n        font-size: 1.2rem;\\n    }\\n} */\\n\\n/* iPHONE 6,7,8 PLUS, iPHONE X, GALAXY S9/S9+ */\\n\\n/* @media  (max-width:414px) and (min-height:736px),\\n        (max-width:375px) and (min-height:812px),\\n        (max-width:360px) and (min-height:740px) {\\n            body {\\n                font-size: 1em;\\n            }\\n} */\\n\\n@media (max-height:568px) {\\n    .test-card .help-txt {\\n        display: none;\\n    }\\n}\\n\\n@media (min-height: 667px) {\\n    .quick-fire .quick-fire-branches .btn-secondary, .quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n        font-size: .9rem;\\n        padding: .5rem;\\n    }\\n}\\n\\n@media (min-width: 576px) {\\n}\\n\\n@media (min-width: 600px) {\\n    .test-card-question .question-question {\\n        font-size: 1.4rem;\\n    }\\n    .modal-subheader {\\n        font-size: 1.2em;\\n    }\\n    .table-header th:nth-child(1) {\\n        min-width: 105px;\\n    }\\n    \\n    .master.table-row td:nth-child(1) {\\n        width: 105px;\\n    }\\n    \\n    .table-row img {\\n        width: 98px;\\n        height: 69px;\\n    }\\n}\\n\\n/* NEXUS 6 */\\n\\n@media (width: 412px) and (max-height: 732px) {\\n    .youtube-icon {\\n        font-size: 1.5rem !important;\\n    }\\n}\\n\\n/* NEXUS 7 */\\n\\n@media (width: 600px) and (max-height: 960px) {\\n    \\n    .block {\\n        font-size: 1.3rem;\\n    }    \\n    .test-card-question .question-statement, .test-card-question .question-provider-question {\\n        font-size: 1rem;\\n    }\\n    body {\\n        font-size: 1.2em;\\n    }\\n    .snapdragon-intro > div {\\n        font-size: 1.2rem;\\n    }\\n    .youtube-icon {\\n        font-size: 1.8rem !important;\\n    }\\n    .lesson-name, .lesson-name .underline-link {\\n        font-size: 1rem;\\n    }\\n}\\n\\n@media (min-height:812px) {\\n}\\n\\n@media (max-width: 768px) {\\n    .landscape {\\n        display: none !important;\\n    }\\n    .portrait-grid {\\n        display: grid;        \\n    }\\n}\\n\\n@media (min-height: 640px) {   \\n    .modal-title {\\n        line-height: 1.5;\\n    } \\n}\\n\\n@media (min-width: 768px) {\\n\\n  h1 {\\n    font-size: 1.6rem;\\n  }\\n\\n  h2 {\\n    font-size: 1.3rem;\\n  }\\n\\n  h3 {\\n    font-size: 1rem;\\n  }\\n\\n  .modal h1 {\\n    font-size: 1.2rem;\\n  }\\n\\n  h2 {\\n    font-size: 1rem;\\n  }\\n\\n  h3 {\\n    font-size: .8rem;\\n  }\\n\\n    .quick-fire .quick-fire-branches .btn-secondary, .quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n        font-size: .9rem;\\n        padding: .5rem;\\n    }\\n\\n    .quick-fire-branches span {\\n        font-size: .6rem;\\n    }\\n    \\n    .autocomplete-options-container{\\n        top: calc(\\n            var(--vhRunningBlock, 7.5vh) + \\n            5px +\\n            var(--vhStandardBlock, 10vh) +\\n            var(--vhStandardBlock, 10vh)\\n            + .25rem\\n        ) !important;\\n    }\\n\\n    .species-search .icon {\\n        font-size: 5.5rem;\\n        height: calc(var(--vhStandardBlock, 30vh) * 2);\\n    }\\n\\n    .autocomplete-options-container.autocomplete {\\n        height: 15rem !important;\\n    }\\n\\n    .squares {\\n        height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh));\\n    }\\n\\n    .imageSlider .carousel-item {\\n        height: var(--vhSmallImageCarousel);\\n        min-height: var(--vhSmallImageCarousel);\\n    }\\n\\n    .score-summary-row {\\n        display: flex;\\n    }\\n\\n    #imageModal .imageSlider .carousel-item, #imageComparisonModal .imageSlider .carousel-item {        \\n        height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - 300px ); /* see below (hack) */\\n    }\\n\\n    .image-description {\\n        padding: 1rem 4rem;\\n        margin-top: -300px; /* see above (hack) */\\n        color: black; /* to compensate for layer above (hack) */\\n    }\\n\\n    .imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n        top: 15%;\\n        top: calc(\\n            (var(--vh, 1vh) * 75 * .5) -\\n            (var(--vh, 1vh) * 7.5) -\\n            .5rem\\n            - 100px /* see above (hack) */\\n        );\\n    }\\n\\n    .modal-image .carousel-inner > div:nth-child(1) {\\n        height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhRunningBlock));\\n    }\\n\\n    .carousel-indicators {\\n        position: absolute;\\n        left: .5rem;\\n        right: .5rem;\\n        padding: .5rem;\\n        text-align: left;\\n        margin-left: 4rem !important;\\n        margin-right: 4rem !important;\\n    }\\n\\n    .carousel-indicators li {\\n        margin-bottom: 0;\\n    }\\n\\n    .test-card-question .question-statement, .test-card-question .question-provider-question {\\n        font-size: .9rem;\\n    }\\n\\n    .species-picker-actions ul {\\n        column-count: 2;\\n    }  \\n\\n    .guide-header-container > div:nth-child(2) {\\n        flex-direction: row;\\n    }\\n\\n    .iconic-taxa-categories svg {\\n        width: 2rem;\\n        height: 2rem;\\n    }\\n\\n    .iconic-taxa-categories-selected svg {\\n        width: 1rem;\\n        height: 1rem;\\n    }\\n\\n    .iconic-taxa-categories i {\\n        font-size: 1.5rem;\\n    }\\n\\n    .inat.snap-switch .inat-entry {\\n        display: flex;\\n        align-items: center;\\n        margin: 0 0 0 1rem;\\n    }\\n\\n    .inat.snap-switch input[type=\\\"text\\\"] {\\n        margin: 0 .5rem 0 0;\\n        color: var(--snap-text-medium-dark);\\n        padding: 0 .1rem;\\n    }\\n\\n    .modal-guide-wrapper .location.snap-switch {\\n        width: 100%;\\n        margin-top: 2rem;\\n    }\\n\\n    .location-option.place > button {\\n        margin-left: .25rem;\\n    }\\n\\n    #inat-place::placeholder {\\n        color: var(--gray);\\n        font-size: 1rem;\\n    }\\n\\n    .inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n        width: 12rem;\\n        width: fit-content;\\n        padding: 0 .25rem;\\n    }  \\n\\n    .range-slider {\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n    }\\n\\n    .range-slider > span:nth-child(2) {\\n        width: fit-content;\\n        border: .05rem solid var(--snap-border-lightest);\\n        padding: .5rem;\\n    }\\n\\n    .range-limits {\\n        display: initial;\\n    }\\n\\n    .inat-location-elsewhere {\\n        display: grid;\\n        grid-template-columns: 1fr .25rem 1fr;\\n    }\\n\\n    .location-filter-options {\\n      padding: 2rem;\\n      grid-template-columns: 1fr 1fr;\\n    }\\n    \\n    .traits-names-txt {\\n        display: grid;\\n        grid-template-columns: 1fr 1fr;\\n        padding: 1rem;\\n        border-bottom: 1px solid var(--snap-border-lightest);\\n    }\\n\\n    .iconic-icon {\\n        font-size: 2rem;\\n    }\\n\\n    .question-container .mushroom-icon-header svg {\\n        width: 1.8rem;\\n        height: 1.8rem;\\n        fill: var(--snap-iconic-icon-header);\\n    }\\n\\n    .species-header {\\n        text-align: right;\\n    }\\n\\n    .test-card-question .help-txt {\\n        margin: 1rem .5rem;\\n        font-family: serif;\\n        font-weight: bold;\\n        letter-spacing: .05rem;\\n    }\\n\\n    div.text-entry {\\n        margin: 1rem 0;\\n        padding: 0.5rem;\\n    }\\n\\n    .text-entry input {\\n        width: 75%;\\n        padding: 0.5rem;\\n        border: 0.05rem solid var(--snap-border-light);\\n    }\\n\\n    .video {\\n        top: -2px;\\n    }\\n\\n    .table-row {\\n        font-size: .8rem;\\n    }\\n\\n    .table-row td:nth-child(3) {\\n        display: flex;\\n        flex-direction: column;\\n        align-items: flex-start;\\n        justify-content: center;\\n    }\\n\\n    .species-list .scrollable {\\n        bottom: 0;\\n        top: 0;      \\n    }\\n        \\n    .right-grid .header, .right-grid .footer {\\n        justify-content: flex-start;\\n        padding-right: 1rem;\\n    }\\n\\n    .right-grid .footer > ul, .left-grid .footer > ul {\\n        max-width: 50%;\\n        text-transform: none;\\n        justify-content: space-between;\\n    }\\n\\n    .snapdragon-intro > div:nth-child(1) {\\n        margin: 0rem 2.4rem 0 2.4rem !important;\\n    }\\n\\n    .snapdragon-intro {\\n        height: initial;  \\n        padding: 2rem;\\n    }\\n\\n    .lesson-icon {\\n        width: 80px;\\n        height: 80px;\\n        object-fit: none;\\n    }\\n\\n    .lesson-list-carousel-item {\\n        align-items: center;\\n        display: grid;\\n        grid-template-columns: 1fr 3fr 1fr;\\n    }\\n\\n    .lesson-list-carousel-item > div:nth-child(3) {\\n        justify-content: center;\\n        margin: 0;\\n    }\\n\\n    .lesson-list-carousel-item > div:nth-child(3) > div {\\n        display: flex;\\n    }\\n\\n    body {\\n        max-width: 1200px;\\n    }\\n\\n    .left-grid {\\n        width: 458px;\\n        grid-area: left;\\n    }\\n\\n    .right-grid {\\n        width: 742px;\\n        grid-area: right;\\n    }\\n\\n    .grid {\\n        grid-template-columns: 1fr 1fr;\\n        grid-template-areas: \\\"right left\\\";\\n    }\\n\\n    .left-grid {\\n        display: grid;\\n    }  \\n\\n    .pool {\\n        max-width: 70%;\\n    }\\n\\n    .bird-song, .taxon-identification, .taxon-summary {\\n        margin: 1rem 4rem 0 4rem;\\n    }\\n\\n    .strips {\\n        cursor: pointer;\\n        width: initial;\\n        overflow-y: auto;\\n        padding: .5rem;\\n    }\\n\\n    .strip {\\n        min-width: initial;\\n        margin: .75rem .5rem .75rem 0;\\n        padding: .75rem;\\n    }\\n\\n    body {\\n        font-size: .9em;\\n    }\\n\\n    .home-scrolling-container .scrollable {\\n        position: relative; \\n        top: 0;\\n    }\\n\\n    .mixed-content-container {\\n        top: calc(\\n              var(--vhStandardBlock, 10vh)\\n            + var(--vhCalendar,11vh));\\n        height: calc(\\n              var(--vh, 1vh) * 100\\n            - var(--vhRunningBlocks,15vh)\\n            - var(--vhDoubleStandardBlock,20vh) \\n            - var(--vhCalendar,11vh) \\n            - 1.5rem);\\n      }\\n\\n      .modal-header {\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n      }\\n    \\n      iframe {\\n          width: 100%;\\n          border: 0;\\n      }\\n\\n      #badgeListModal .modal-dialog {\\n        width: 30vw;\\n        margin: calc( var(--vhRunningBlock) + var(--vhStandardBlock) + 5px + .5rem ) auto auto auto;\\n      }\\n\\n      #badgeListModal .modal-body {\\n        height: calc(var(--vhDoubleStandardBlock, 20vh) * 2);\\n      }\\n\\n      #wikiModal .modal-dialog {\\n        max-width: 900px;\\n        margin: auto;\\n      }\\n\\n      #wikiModal iframe {\\n          height: 100%;\\n      }\\n    \\n      #imageModal .modal-dialog {\\n        max-width: 600px;\\n        margin: auto;\\n      }\\n        \\n      #imageModal .modal-title span {\\n          display: flex;\\n          flex-direction: row;\\n      }\\n    \\n      #imageModal .modal-title span > span:nth-child(1) {\\n          margin: 0 .5rem 0 0;\\n      }\\n    \\n      #iNatWidgetModal .modal-dialog {\\n          max-width: 45vw;\\n      }\\n      \\n      #iNatWidgetModal .modal-header {\\n          display: inline;\\n      }\\n    \\n      #cardModal .feature-types {\\n          width: 100%;\\n          margin: 0;\\n      }\\n\\n      .info-details {\\n        padding: 1rem 4rem;\\n      }\\n\\n      .info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n          padding: .5rem;\\n      }\\n\\n    .non-taxon.card img {\\n        height: 5.5rem;\\n        width: 5.5rem;\\n      }\\n\\n    .response-update {\\n        left: 0;\\n        right: 0;\\n        justify-content: flex-end;\\n    }\\n\\n    .strip:hover, .strip:focus, .strip:focus-within {\\n        box-shadow: 0 2px 8px transparent;\\n        border: 1px solid var(--snap-border-light);\\n    }\\n\\n    .strip:hover button, .strip:focus button, .strip:focus-within button {\\n      color: var(--snap-text-medium-dark);\\n    }\\n\\n    .strip {\\n        display: flex;\\n        flex-direction: column;\\n    }\\n\\n    .strip > div:nth-child(2) {\\n        margin-top: .5rem;\\n    }\\n\\n    .strip-single-line {\\n        padding: 1.5rem;\\n    }\\n\\n    .portrait, .portrait-grid {\\n        display: none !important;\\n    }  \\n\\n    .header > div:nth-child(2) {\\n        max-width: initial;\\n        text-transform: initial;\\n    }\\n\\n    .non-taxa {\\n        display: flex;\\n        flex-direction: column;\\n        align-items: flex-end;\\n    }\\n\\n    .non-taxa .btn-group {\\n        width: 12rem;\\n        flex-direction: column;\\n        margin: 0 .5rem;\\n    }\\n\\n    .non-taxa .btn.btn-secondary {\\n        height: 3rem;\\n        cursor: pointer !important;\\n    }\\n\\n    .non-taxon-card-wiki {\\n        margin: 0 .5rem 0 0;\\n    }\\n\\n    .modal-header-container {\\n        padding-bottom: 4px;\\n        border-bottom: 1px solid var(--snap-border-light);\\n    }\\n}\\n\\n@media (min-width: 1024px) {\\n\\n    .left-grid {\\n        width: 391px;\\n    }\\n\\n    .right-grid {\\n        width: 633px;\\n    }\\n\\n    .squares {\\n        padding-top: 2rem;\\n    }\\n\\n    .squares > div {\\n        width: 190px;\\n        height: 150px;\\n    }\\n\\n    .table-header th:nth-child(2), .table-row td:nth-child(2) {\\n        flex: 5;\\n    }\\n    \\n    .table-header th:nth-child(3), .table-row td:nth-child(3) {\\n        flex: 5;\\n        font-size: .8rem;\\n        line-height: 2;\\n    }\\n    \\n    .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n        flex: 2 !important;\\n    }\\n\\n    .table-header th:nth-child(3) span:nth-child(2):after {\\n        margin-left: .355rem;\\n    }\\n\\n    .table-header th:nth-child(3):after {\\n        display: none;\\n    }\\n\\n    .species-list .table-header th:nth-child(3) span:after {\\n        display: inline-block;\\n        width: 0;\\n        height: 0;\\n        margin-left: .255rem;\\n        vertical-align: middle;\\n        content: \\\"\\\";\\n        border-top: .3rem solid;\\n        border-right: .3rem solid transparent;\\n        border-bottom: 0;\\n        border-left: .3rem solid transparent;\\n        cursor: default;\\n    }\\n\\n    .species-list .table-header th:nth-child(4):after, .species-list .table-header th:nth-child(5):after {\\n        display: inline-block;\\n        width: 0;\\n        height: 0;\\n        margin-left: .255rem;\\n        vertical-align: middle;\\n        content: \\\"\\\";\\n        border-top: .3rem solid;\\n        border-right: .3rem solid transparent;\\n        border-bottom: 0;\\n        border-left: .3rem solid transparent;\\n        cursor: default;\\n    }\\n\\n    .table-header th:nth-child(3) {\\n        flex-direction: column;\\n        display: flex;\\n        align-items: start;\\n    }\\n\\n    .table-header th:nth-child(3) span {\\n        flex: 1;\\n        line-height: initial;\\n    }\\n\\n    .table-header th:nth-child(5), .table-row td:nth-child(5),\\n    .table-header th:nth-child(6), .table-row td:nth-child(6) {\\n        flex: 1;\\n    }\\n\\n    .narrow-screen {\\n        display: none !important;\\n    }\\n\\n    .names-container .vernacular-name {\\n        max-width: none;\\n      }\\n}\\n\\n@media (max-width: 1024px) {    \\n    .wide-screen {\\n      display: none !important;\\n    }\\n}\\n\\n@media (min-width: 1112px) {\\n\\n    .left-grid, .tiles-container {\\n        width: 450px;\\n    }\\n\\n    .squares > div {\\n        height: calc( ((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh)) / 3);\\n        width: 225px; \\n    }\\n\\n    .squares {\\n        padding-top: 1rem;\\n    }\\n    \\n    .squares > div img {\\n        padding: .5rem;\\n    }\\n\\n    .right-grid {\\n        width: 662px;\\n    }\\n}\\n\\n@media (min-width: 1200px) {\\n    \\n    .left-grid, .tiles-container {\\n        width: 458px;\\n    }\\n\\n    .right-grid {\\n        width: 742px;\\n    }\\n\\n    .squares > div {\\n        width: 229px;\\n    }\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","const UPDATE_CONFIG = '[UPDATE_CONFIG] change to config';\nconst STOP_START_LESSON = '[STOP_START_LESSON] Pause or play current lesson';\nconst CHANGE_LESSON_PLANS = '[CHANGE_LESSON_PLANS] Edit the set of lesson plans';\nconst CHANGE_LESSON_PLAN = '[CHANGE_LESSON_PLAN] Edit the original lesson plan';\nconst SELECT_COLLECTION = '[SELECT_COLLECTION] Update the current selected collection';\nconst NEXT_ROUND = '[NEXT_ROUND] Go to next round';\nconst NEXT_LESSON = '[NEXT_LESSON] Get (new) lesson plan';\nconst NEXT_LAYOUT = '[NEXT_LAYOUT] Render next layout';\nconst NEXT_ITEM = '[NEXT_ITEM] Get next item';\n\nconst SET_ACTIVE_COLLECTION = '[SET_ACTIVE_COLLECTION] New collection';\nconst UPDATE_COLLECTION = '[UPDATE_COLLECTION] Change collection';\nconst UPDATE_COLLECTIONS = '[UPDATE_COLLECTIONS] Update collections list';\nconst RESET_COLLECTION = '[RESET_COLLECTION] Reset collection to initial state';\n\nconst UPDATE_SCORE = '[UPDATE_SCORE] Check user answer and update running score';\nconst UPDATE_TRAIT_SCORE = '[UPDATE_TRAIT_SCORE] Check user answer and update running score';\nconst END_REVISION = '[END_REVISION] Revision complete';\nconst UPDATE_HISTORY = '[UPDATE_HISTORY] Copy round score to history';\nconst UPDATE_COLLECTION_ITEMS = '[UPDATE_COLLECTION_ITEMS] Change collection items';\nconst NEXT_LEVEL = '[NEXT_LEVEL] Go to next level';\nconst UPDATE_LANGUAGE = '[UPDATE_LANGUAGE] Update the current language';\n\nconst UPDATE_ENUMS = '[UPDATE_ENUMS] Update enums by config language';\nconst UPDATE_USER = '[UPDATE_USER] Update user';\nconst UPDATE_LESSON = '[UPDATE_LESSON] Create new lesson';\n\nconst SAVE_LESSON = '[SAVE_LESSON] Add lesson to saved lessons';\nconst REMOVE_LESSON = '[REMOVE_LESSON] Remove lesson from saved lessons on restarting lesson';\n\nconst UPDATE_VIDEO_PLAYER = '[UPDATE_VIDEO_PLAYER] Update video player state';\n\nconst UPDATE_QUICKFIRE = '[UPDATE_QUICKFIRE] Update quick-fire';\nconst CREATE_QUICKFIRE = '[CREATE_QUICKFIRE] Add quick-fire';\nconst CREATE_GLOSSARY = '[CREATE_GLOSSARY] Add glossary';\n\nconst CLICK_EVENT = '[CLICK_EVENT] User triggered event';\n\nexport const types = {\n    CHANGE_LESSON_PLANS,\n    CHANGE_LESSON_PLAN,\n    NEXT_LESSON,\n    NEXT_LAYOUT,\n    NEXT_ITEM,\n    UPDATE_SCORE,\n    UPDATE_TRAIT_SCORE,\n    END_REVISION,\n    UPDATE_HISTORY,\n    SET_ACTIVE_COLLECTION,\n    UPDATE_COLLECTION,\n    UPDATE_COLLECTION_ITEMS,\n    UPDATE_COLLECTIONS,\n    RESET_COLLECTION,\n    NEXT_ROUND,\n    NEXT_LEVEL,\n    UPDATE_CONFIG,\n    STOP_START_LESSON,\n    SELECT_COLLECTION,\n    UPDATE_LANGUAGE,\n    UPDATE_ENUMS,\n    UPDATE_LESSON,\n    SAVE_LESSON,\n    REMOVE_LESSON,\n    UPDATE_VIDEO_PLAYER,\n    UPDATE_USER,\n    CREATE_QUICKFIRE,\n    UPDATE_QUICKFIRE,\n    CREATE_GLOSSARY,\n    CLICK_EVENT\n};","export const config = {\n    language: 'en',\n    moduleSize: 4,\n    callbackTime: 1500,\n    callbackDelay: 1500,\n    excludeRevision: false,\n    isPortraitMode: false,\n    isLandscapeMode: true,\n    collection: {\n        id: 0\n    },\n    mode: 'learn',\n    languages : [\n        { name: 'Deutsche', lang: 'de' },\n        { name: 'English', lang: 'en' },\n        { name: 'Español', lang: 'es' },\n        { name: 'Français', lang: 'fr' },\n        { name: 'Italiano', lang: 'it' },\n        { name: 'Português', lang: 'pt' }\n    ],\n    guide: {\n        iconicTaxa: null,\n        locationLongLat: '',\n        locationPlace: '',\n        locationType: null,\n        place: {\n            id: 1,\n            name: ''\n        },\n        speciesRange: 10,\n        inatId: { key: '', type: '', param: 'user_id' },\n        season: {},\n        perPage: 200,\n        noOfRecords: 50\n    },    \n};","import { types } from 'redux/actions/action-types';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nexport const config = (state = initialConfig, action) => {\n    switch(action.type) {\n        case types.UPDATE_COLLECTION:        \n            return { ...action.data.config, ...{ coordinates: state.coordinates }, ...{ place: state.place } };    \n        case types.UPDATE_CONFIG:\n            return { ...state, ...action.data };\n        case types.UPDATE_LANGUAGE:\n            return { ...state, ...{ language: action.data.lang } };\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.config };\n        default: \n            return state;\n    }\n};\n\nexport const enums = (state = {}, action) => {\n    switch(action.type) {\n        case types.UPDATE_ENUMS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const user = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_USER:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const userAction = (state = null, action) => {\n    switch(action.type) {\n        case types.CLICK_EVENT:\n            return action.data;\n        default:\n            return state;\n    }\n};","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nexport const collections = (state = [], action) => {\n    switch(action.type) {\n        case types.SELECT_COLLECTION:\n            const cols = [ ...state ];\n            cols.forEach(col => {\n                if(col.id === action.data.id) {\n                    col.selected = true;\n                } else {\n                    col.selected = false;\n                }\n            });\n            return cols;\n        case types.UPDATE_COLLECTIONS: {            \n            return state ? [ ...state, ...action.data ] : action.data;\n        }\n        case types.UPDATE_COLLECTION: {\n\n            const collections = [ ...state ];\n\n            collections.forEach(collection => {\n                if(collection.id === action.data.collection.id) {\n                    collection = action.data.collection;\n                }\n            });\n\n            return collections;\n        }\n        case types.SET_ACTIVE_COLLECTION: {\n\n            action.data.lesson.collection.isActive = true;\n\n            const isCollectionUpdate = R.contains(action.data.lesson.collection.id, state.map(collection => collection.id));\n            if(isCollectionUpdate) {\n                return [ ...state.filter(collection => collection.id !== action.data.lesson.collection.id), action.data.lesson.collection ];\n            } else {\n                return [ ...state, action.data.lesson.collection ];\n            }\n        }\n        default:\n            return state;\n    }\n};\n\nexport const collection = (state = { id: 0 }, action) => {\n\n    const getNextRound = (action, state) => {        \n\n        let lesson = action.data.lesson;\n        let itemIndex = (lesson.moduleSize * (lesson.currentRound - 1));\n        let nextItem = state.items[itemIndex];\n        \n        if(lesson.isLevelComplete) {\n            itemIndex = 0;\n            nextItem = state.items[itemIndex];\n        }        \n        return { itemIndex, nextItem };\n    };\n\n    const updateCollection = (state, action) => {\n        \n        let collection = { ...state, ...action.data.collection };\n        if(state.id && state.id === action.data.collection.id ) {\n            collection.itemIndex = state.itemIndex;\n        }\n        let nextItem = collection.items[collection.itemIndex];\n        \n        if(action.data.config.mode === 'review') {\n            collection.allItems = action.data.collection.allItems;\n        }\n\n        if(action.data.config.mode === 'learn-again') {\n            collection.itemIndex = 0;\n            collection.nextItem = collection.items[collection.itemIndex];            \n        }\n\n        return { collection, nextItem };\n    };\n    \n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.SELECT_COLLECTION: {\n            return action.data;\n        }\n        case types.UPDATE_COLLECTION_ITEMS: {\n            const collection = R.clone(state);\n            collection.items = action.data.filter(item => !item.isDeselected);\n            return collection;\n        }\n\n        case types.SET_ACTIVE_COLLECTION: {\n            return { \n                ...action.data.lesson.collection, \n                nextItem: action.data.lesson.collection.items[action.data.lesson.collection.itemIndex] };\n        }\n\n        case types.RESET_COLLECTION: {\n            return action.data.collection;\n        }\n\n        case types.UPDATE_COLLECTION: {            \n            const { collection, nextItem } = updateCollection(state, action);\n            return { ...state, ...collection, nextItem };\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n            return layout.bonus ? state : state;\n        }            \n\n        case types.NEXT_ITEM: {\n            let itemIndex = action.data;\n            let nextItem = state.items[itemIndex];\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_ROUND: {\n            const { itemIndex, nextItem } = getNextRound(action, state);\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_LESSON: {\n            const collection = { ...state, ...action.data.collection };\n            return { ...state, ...collection };\n        }\n\n        case types.NEXT_LEVEL: {\n            return state;\n        }\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const bonusLayout = (state = null, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n\n            if(layout.bonus) {\n                state = layout;\n            }\n            return state;\n        }\n\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.bonusLayout };\n\n        default: {\n            return state; \n        }\n    }\n};","const resetScore = ({\n    total = 0,\n    correct = 0,\n    taxon = '',\n    binomial = '',\n    answer = '',\n    success = false,\n    incorrect = 0,\n    question = '',\n    fails = [],\n    passes = [],\n    answers = [],\n    statement = '',\n    mode = '',\n    totalPassPoints = 0,\n    totalPoints = 0\n  } = {}) => ({\n    total, correct, taxon, binomial, answer, success, incorrect, question, fails, passes, answers, statement, mode, totalPassPoints, totalPoints\n  });\n\nexport const progressState = {\n    score: resetScore(),\n    resetScore\n}","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nconst initialState = { currentRound: 1, rounds: 0, isNextRound: true };\n\nexport const lesson = (state = initialState, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE':\n            return state;\n        \n        case types.UPDATE_LESSON: {\n            return { ...state, ...action.data };\n        }\n\n        case types.NEXT_LAYOUT: {\n            return { ...state, layoutName: action.data.name };\n        }\n\n        case types.NEXT_ITEM: {\n\n            let layoutCounter, isNextRound, isLevelComplete, isLessonComplete = false;;\n\n            layoutCounter = state.layoutCounter ? state.layoutCounter + 1 : 1; \n            \n            layoutCounter = layoutCounter > state.layoutCount ? state.layoutCount : layoutCounter;\n            isNextRound = layoutCounter === state.layoutCount;\n            \n            if(state.layoutName && state.layoutName === 'summary') {\n                isNextRound = true;\n            }\n            isLevelComplete = state.rounds === 0 ? false : state.currentRound === state.rounds;\n    \n            if(state.level && state.level.id && state.levels) {\n                isLessonComplete = isLevelComplete && (state.levels[state.levels.length -1].id === state.level.id);\n            }\n\n            return { ...state, layoutCounter, isNextRound, isLevelComplete, isLessonComplete };\n        }\n\n        case types.NEXT_ROUND: {\n\n            let currentRound = action.data.lesson.currentRound;\n\n            let isLessonComplete = state.rounds === 0 ? false : currentRound === state.rounds;\n\n            let layoutCounter = state.layoutCounter;\n\n            let level = state.level;\n\n            return { ...state, currentRound, layoutCounter, level, isLessonComplete };\n        }\n\n        case types.NEXT_LESSON: {\n\n            let isNextRound = !!state.layoutCount ? state.layoutCounter === state.layoutCount : false;\n            let layoutCounter = 0;\n            let layoutCount = action.data.lesson.layoutCount;\n            \n            return { ...state, ...action.data.lesson, isNextRound, layoutCounter, layoutCount };\n        }\n\n        case types.NEXT_LEVEL: {\n         \n            return { ...state, currentRound: 1 };\n        }\n\n        case types.UPDATE_COLLECTION: {\n\n            if(action.data.config.mode === 'learn-again') {\n                const isNextRound = true;\n                const isLevelComplete = true;\n                return { ...state, currentRound: 1, isNextRound, isLevelComplete };\n\n            } else {\n                return state;\n            }\n        }\n\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.lesson, isNextRound: true };\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const lessons = (state = [], action) => {\n\n    switch(action.type) {\n        case types.SAVE_LESSON:\n            const savedLessonNames = state.map(lesson => lesson.name);\n            if(R.contains(action.data.collection.name, savedLessonNames)) {\n                const lessons = state.filter(lesson => lesson.name !== action.data.collection.name);\n                      lessons.push(action.data);\n                return lessons;\n            } else {\n                return [ ...state, action.data ];\n            }\n            case types.REMOVE_LESSON: {\n                return state.filter(lesson => lesson.name !== action.data.name); \n            }\n        default:\n            return state;\n    }\n};","import { types } from 'redux/actions/action-types';\n\n\nconst cleanAndReturnIncomingState = state => {\n    const quickFire = state;\n    if(quickFire.onClickFiltersLinkListeners) delete quickFire.onClickFiltersLinkListeners;\n    if(quickFire.onClickGlossaryLinkListeners) delete quickFire.onClickGlossaryLinkListeners;\n    return quickFire;\n};\n\nexport const quickFire = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        case types.UPDATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        default:\n            return state;\n    }\n}\n\nexport const glossary = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_GLOSSARY:\n            return action.data;\n        default:\n            return state;\n    }\n}","import { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport thunk from 'redux-thunk';\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web and AsyncStorage for react-native\n\nimport { logger } from 'redux/middleware/logger';\nimport { timeoutScheduler } from 'redux/middleware/timeoutScheduler';\n\nimport { config, enums, user, userAction } from 'redux/reducers/config-reducer';\nimport { collections, collection, bonusLayout } from 'redux/reducers/species-reducers';\nimport { counter, score, history, videoPlayer } from 'redux/reducers/progress-reducers';\nimport { lessonPlans, lessonPlan, layout } from 'redux/reducers/layout-reducers';\nimport { lesson, lessons } from 'redux/reducers/lesson-reducers';\nimport { quickFire, glossary } from 'redux/reducers/quick-fire-reducers';\n\nimport hardSet from 'redux-persist/lib/stateReconciler/hardSet'\n\nconst reducer = combineReducers({\n    counter,\n    lessonPlans,\n    lessonPlan,\n    layout,\n    config,\n    lessons,\n    lesson,\n    collection,\n    score,\n    collections,\n    history, \n    videoPlayer,\n    enums,\n    bonusLayout,\n    user,\n    quickFire,\n    glossary,\n    userAction\n});\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n//   stateReconciler: hardSet\n//   blacklist: ['config']\n}\n\nconst persistedReducer = persistReducer(persistConfig, reducer)\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const store = createStore(\n    persistedReducer, \n    composeEnhancers(applyMiddleware(\n        logger,\n        thunk\n    ))\n);\n\nexport const persistor = persistStore(store);\n\nexport const rootReducer = (state, action) => {\n\n    // For this use case we can use purge instead:\n\n    // https://stackoverflow.com/questions/35622588/how-to-reset-the-state-of-a-redux-store/35641992#35641992\n\n    if(action.type === 'INITIALISE_STATE') {\n        state = undefined;\n    }\n\n    return reducer(state, action);\n  }","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\n\nexport const counter = (state = null, action) => {\n    switch(action.type) {\n        case 'persist/REHYDRATE':\n            return action.payload ? { ...action.payload.counter, isLessonRehydrated: true, isLessonPaused: true } : state;\n        case types.RESET_COLLECTION:\n            return { ...state, isLessonSelected: false, isLessonPaused: false };\n        case types.UPDATE_COLLECTION:    \n            return { ...state, isLessonRehydrated: false };\n        case types.NEXT_ROUND:\n            return { index: 0 };\n        case types.NEXT_LESSON:\n            return { index: 0 };\n        case types.NEXT_LEVEL:\n            return { ...state, index: action.data.index };\n        case types.STOP_START_LESSON:\n            const index = (state && state.index) || 0;\n            return { ...action.data, index };\n        case types.UPDATE_SCORE:\n        case types.END_REVISION:\n            let i = (state.index + 1) <= action.data.layoutCount ? (state.index + 1) : state.index;\n            return { index: i };\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.counter, isLessonPaused: !!action.data.lesson.counter.isCustomLessonPausedOverride };\n        default:\n            return state;\n    }\n};\n\nexport const score = (state = progressState.score, action) => {\n    switch(action.type) {\n        case types.UPDATE_SCORE: {\n        \n            const score = { ...state, ...action.data, statement: action.data.statement || '' };\n\n            score.totalPoints = score.totalPoints || 0;\n            score.totalPassPoints = score.totalPassPoints || 0;\n            score.totalFailPoints = score.totalFailPoints || 0;\n\n            score.totalPoints += score.points ? score.points : 0;\n\n            score.total++;\n            if(score.success) {\n                score.totalPassPoints += score.points ? score.points : 0;\n                score.correct++;\n                score.passes.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question, \n                    statement: score.statement || '',\n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            else {\n                score.incorrect++;\n                score.totalFailPoints += score.points ? score.points : 0;\n                score.fails.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question,\n                    statement: score.statement || '', \n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            score.questionTotal = score.passes.length + score.fails.length;\n            \n            score.passesTotals = R.clone(state.passesTotals) || {};\n            score.failsTotals = R.clone(state.failsTotals) || {};\n\n            if(score.success) {\n                score.passesTotals[score.itemId] = score.passesTotals[score.itemId] ? score.passesTotals[score.itemId] + 1 : 1;\n                if(!score.failsTotals[score.itemId]) {\n                    score.failsTotals[score.itemId] = 0;\n                }\n            } else {\n                score.failsTotals[score.itemId] = score.failsTotals[score.itemId] ? score.failsTotals[score.itemId] + 1 : 1;\n                if(!score.passesTotals[score.itemId]) {\n                    score.passesTotals[score.itemId] = 0;\n                }\n            }\n            \n            return { ...state, ...score};\n        }\n        case types.SELECT_COLLECTION:\n            return R.clone(progressState.score);\n        case types.NEXT_ROUND:\n        case types.NEXT_LEVEL:\n        case types.UPDATE_COLLECTION:\n            return { ...progressState.score, ...{ fails: [], passes: []} };\n        case types.UPDATE_TRAIT_SCORE: {\n            const bonusScores = state.bonusScores || [];\n            bonusScores.push(\n                {\n                    id: action.data.itemId,\n                    name: action.data.binomial,\n                    success: action.data.success,\n                    guid: action.data.guid\n                }\n            );\n            return { ...state, bonusScores: bonusScores };\n        }\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.score;\n        case types.NEXT_LESSON: {\n            return { ...state, mode: 'learn'};\n            }\n        default:\n            return state;\n    }       \n};\n\nexport const history = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_HISTORY: {\n          \n            const history = { scores: [] };\n\n            history.scores = state === null \n                ? [action.data] \n                : state.scores[state.scores.length-1].question === action.data.question\n                    ? [...state.scores]\n                    : [...state.scores, action.data];\n\n            let historyCorrect = 0;\n            let historyTotal = 0;\n        \n            history.scores.forEach(score => {\n                historyCorrect += score.correct;\n                historyTotal += score.total;\n            });\n\n            history.correct = historyCorrect;\n            history.total = historyTotal;\n            history.incorrect = history.total - history.correct;\n\n            return history;\n        }\n        case types.SELECT_COLLECTION:\n            return null;   \n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.history;\n        default:\n            return state;\n    }\n};\n\nexport const videoPlayer = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_VIDEO_PLAYER:\n            return action.data;\n        default:\n            return state;\n    }\n};","import { types } from 'redux/actions/action-types';\n\nexport const lessonPlans = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLANS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const lessonPlan = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLAN:\n            return action.data || state;\n        case types.NEXT_LESSON:\n            return action.data.lessonPlan || state;\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.lessonPlan || state;\n        default:\n            return state;\n    }\n};\n\nexport const layout = (state = null, action) => { \n    switch(action.type) {\n        case types.NEXT_LAYOUT:\n            if(state) {\n                if(action.data.screens.length > 1) { // sometimes BUG here\n                    const prevItemIndex = state.screens[0].name === action.data.screens[0].name ? state.itemIndex : null;                \n                    return { ...action.data, prevItemIndex }\n                } else {\n                    return action.data;\n                }\n            } else {\n                return action.data;\n            }\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.layout || state;\n        default: \n            return state;\n    }\n};\n","export const logger = store => next => action => {\n    \n    // console.log('NEXT: ', next);\n    // console.group(action.type)\n    // console.info('dispatching', action)\n    let result = next(action)\n    // console.log('next state', store.getState())\n    // console.groupEnd(action.type)\n\n    // console.clear();\n    // console.log(`^^^ ${action.type}`);\n  \n    return result;\n};","export const DOM = {\n  \n    leftGrid : document.getElementsByClassName('js-left-grid')[0],\n    leftHeader : document.getElementsByClassName('js-left-header')[0],\n    leftBody : document.getElementsByClassName('js-left-body')[0],\n    leftFooter : document.getElementsByClassName('js-left-footer')[0],\n\n    leftHeaderTxt : document.getElementsByClassName('js-left-txt-header')[0],\n    specimenRptr : document.getElementsByClassName('js-rptr-specimen')[0],\n    \n    rightGrid : document.getElementsByClassName('js-right-grid')[0],\n    rightHeader : document.getElementsByClassName('js-right-header')[0],\n    rightHeaderTxt : document.getElementsByClassName('js-right-txt-header')[0],\n    rightHeaderScoreTxt : document.getElementsByClassName('js-right-txt-score')[0],\n    rightBody : document.getElementsByClassName('js-right-body')[0],\n    rightRptrSummary : document.getElementsByClassName('js-summary')[0],\n    rightBodyBottom : document.getElementsByClassName('js-right-body-bottom')[0],\n    rightFooter : document.getElementsByClassName('js-right-footer')[0]    \n};\n","const getRoundItems = (currentRound, moduleSize, items) => {\n\n    const start = (currentRound - 1) * moduleSize;\n    const end = start + moduleSize;\n    return items.slice(start, end);\n}\n\nexport const roundHandler = {\n    getRoundItems\n};","export const epithets = [\n    {\n        \"latin\": ['armeniaca'],\n        \"en\": ['from Armenia']\n    },\n    {\n        \"latin\": ['agastache'],\n        \"en\": ['many spikes']\n    },\n    {\n        \"latin\": [\"aster\"],\n        \"en\" : [\"star\"]\n    },\n    {\n        \"latin\" : [\"alba\"],\n        \"en\" : [\"white\"]\n    },\n    {\n        \"latin\" : [\"avium\"],\n        \"en\" : [\"bird\"]\n    },\n    {\n        \"latin\" : [\"nigrum\"],\n        \"en\" : [\"black\"]\n    },\n    {\n        \"latin\" : [\"ater\"],\n        \"en\" : [\"black\"]\n    },\n    {\n        \"latin\": [\"botanikos\"],\n        \"en\" : [\"plant\"]\n    },\n    {\n        \"latin\": [\"capitata\"],\n        \"en\" : [\"having a head\"]\n    },\n    {\n        \"latin\" : [\"chrysus\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\" : [\"erythro\"],\n        \"en\" : [\"red\"]\n    },\n    {\n        \"latin\" : [\"lactuca\"],\n        \"en\" : [\"milky\"]\n    },\n    {\n        \"latin\" : [\"sylvestris\"],\n        \"en\" : [\"woodland\"]\n    },\n    {\n        \"latin\" : [\"contorta\"],\n        \"en\" : [\"twisted\"]\n    },\n    {\n        \"latin\" : [\"globosa\"],\n        \"en\" : [\"rounded\"]\n    },\n    {\n        \"latin\" : [\"maculata\"],\n        \"en\" : [\"spotted\"]\n    },\n    {\n        \"latin\" : [\"pendula\"],\n        \"en\" : [\"weeping\"]\n    },\n    {\n        \"latin\": [\"pratense\"],\n        \"en\" : [\"of meadows\"]\n    },\n    {\n        \"latin\" : [\"prostrata\"],\n        \"en\" : [\"creeping\"]\n    },\n    {\n        \"latin\" : [\"phyllos\"],\n        \"en\" : [\"leaf\", \"foliage\"]\n    },\n    {\n        \"latin\" : [\"platy\"],\n        \"en\" : [\"broad\", \"flat\"]\n    },\n    {\n        \"latin\" : [\"angustus\"],\n        \"en\" : [\"narrow\"]\n    },\n    {\n        \"latin\" : [\"arena\"],\n        \"en\" : [\"sand\"]\n    },\n    {\n        \"latin\" : [\"argentum\"],\n        \"en\" : [\"silver\"]\n    },\n    {\n        \"latin\" : [\"arvensis\"],\n        \"en\" : [\"in the field\"]\n    },\n    {\n        \"latin\" : [\"brachy-\"],\n        \"en\" : [\"short\"]\n    },\n    {\n        \"latin\" : [\"brachyphyllus\"],\n        \"en\" : [\"short leaved\"]\n    },\n    {\n        \"latin\" : [\"caprae\"],\n        \"en\" : [\"goat\"]\n    },\n    {\n        \"latin\" : [\"chroma\"],\n        \"en\" : [\"colour\"]\n    },\n    {\n        \"latin\" : [\"cilium\"],\n        \"en\" : [\"eyelash\"]\n    },\n    {\n        \"latin\" : [\"coccineus\"],\n        \"en\" : [\"scarlet\"]\n    },\n    {\n        \"latin\" : [\"cordifolius\"],\n        \"en\" : [\"heart-shaped\"]\n    },\n    {\n        \"latin\" : [\"coronatus\"],\n        \"en\" : [\"crowned\"]\n    },\n    {\n        \"latin\" : [\"crassus\"],\n        \"en\" : [\"thick\", \"fat\"]\n    },\n    {\n        \"latin\" : [\"crocos\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\": [\"cruciferae\"],\n        \"en\" : [\"cross-bearing\"]\n    },\n    {\n        \"latin\" : [\"derma\"],\n        \"en\" : [\"skin\"]\n    },\n    {\n        \"latin\" : [\"digitalis\"],\n        \"en\" : [\"having fingers\"]\n    },\n    {\n        \"latin\" : [\"domus\"],\n        \"en\" : [\"home\"]\n    },\n    {\n        \"latin\" : [\"domestica\"],\n        \"en\" : [\"which lives in the house\"]\n    },\n    {\n        \"latin\" : [\"echinatus\"],\n        \"en\" : [\"prickly\", \"spiny\"]\n    },\n    {\n        \"latin\" : [\"edulis\"],\n        \"en\" : [\"edible\"]\n    },\n    {\n        \"latin\" : [\"elatior\"],\n        \"en\" : [\"taller\"]\n    },\n    {\n        \"latin\" : [\"electro-\"],\n        \"en\" : [\"amber\"]\n    },\n    {\n        \"latin\" : [\"emarginatus\"],\n        \"en\" : [\"having no edges\"]\n    },\n    {\n        \"latin\" : [\"enanti-\"],\n        \"en\" : [\"opposite\", \"against\"]\n    },\n    {\n        \"latin\": [\"endemos\"],\n        \"en\" : [\"native\"]\n    },\n    {\n        \"latin\" : [\"ensatus\"],\n        \"en\" : [\"sword-like\"]\n    },\n    {\n        \"latin\" : [\"erectus\"],\n        \"en\" : [\"upright\"]\n    },\n    {\n        \"latin\" : [\"erica\"],\n        \"en\" : [\"heath\", \"broom\"]\n    },\n    {\n        \"latin\" : [\"erio-\"],\n        \"en\" : [\"wool\", \"woolly\"]\n    },\n    {\n        \"latin\" : [\"erosus\"],\n        \"en\" : [\"indented\", \"jagged\", \"serrated\"]\n    },\n    {\n        \"latin\" : [\"fallax\"],\n        \"en\" : [\"false\"]\n    },\n    {\n        \"latin\" : [\"foeniculum\"],\n        \"en\" : [\"hay\"]\n    },\n    {\n        \"latin\" : [\"filium\"],\n        \"en\" : [\"thread\"]\n    },\n    {\n        \"latin\" : [\"flavus\"],\n        \"en\" : [\"golden yellow\", \"light yellow\"],\n    },\n    {\n        \"latin\" : [\"floridus\"],\n        \"en\" : [\"flowery\"]\n    },\n    {\n        \"latin\" : [\"furcatus\"],\n        \"en\" : [\"forked\"]\n    },\n    {\n        \"latin\" : [\"fuscus\"],\n        \"en\" : [\"dark\", \"dark brown\"]\n    },\n    {\n        \"latin\" : [\"gala\"],\n        \"en\" : [\"milk\"]\n    },\n    {\n        \"latin\" : [\"galum\"],\n        \"en\" : [\"milk\"]\n    },\n    {\n        \"latin\" : [\"glaber\"],\n        \"en\" : [\"smooth; hairless\"]\n    },\n    {\n        \"latin\" : [\"glaucus\"],\n        \"en\" : [\"blue-green\", \"blue-gray\"]\n    },\n    {\n        \"latin\" : [\"glycy-\"],\n        \"en\" : [\"sweet\"]\n    },\n    {\n        \"latin\" : [\"perennis\"],\n        \"en\" : [\"perennial, lasting, yearlong\"]\n    },\n    {\n        \"latin\" : [\"gracile\"],\n        \"en\" : [\"slender\", \"graceful\"]\n    },\n    {\n        \"latin\" : [\"gravis\"],\n        \"en\" : [\"heavy\"]\n    },\n    {\n        \"latin\" : [\"hali-\"],\n        \"en\" : [\"of the sea\", \"salt\"]\n    },\n    {\n        \"latin\" : [\"hetero-\"],\n        \"en\" : [\"diversely or different\"]\n    },\n    {\n        \"latin\" : [\"hirsutus\"],\n        \"en\" : [\"hairy\"]\n    },\n    {\n        \"latin\" : [\"hirsuta\"],\n        \"en\" : [\"hairy\"]\n    },\n    {\n        \"latin\" : [\"hortensis\"],\n        \"en\" : [\"from the garden\"]\n    },\n    {\n        \"latin\" : [\"hydro-\"],\n        \"en\" : [\"water\"]\n    },\n    {\n        \"latin\": [\"hymen\"],\n        \"en\": [\"membrane\"]\n    },\n    {\n        \"latin\" : [\"hypo-\", \"hyp-\"],\n        \"en\" : [\"under\", \"beneath\"]\n    },\n    {\n        \"latin\" : [\"hyper-\"],\n        \"en\" : [\"over\", \"above\"]\n    },\n    {\n        \"latin\" : [\"laevis\"],\n        \"en\" : [\"smooth\"]\n    },\n    {\n        \"latin\" : [\"lateralis\"],\n        \"en\" : [\"side\"]\n    },\n    {\n        \"latin\" : [\"lepis\", \"lepido-\"],\n        \"en\" : [\"scale\", \"rind\", \"husk\", \"flake\"]\n    },\n    {\n        \"latin\" : [\"lepto-\", \"lepti-\"],\n        \"en\" : [\"light\"]\n    },\n    {\n        \"latin\" : [\"mel\"],\n        \"en\" : [\"honey\"]\n    },\n    {\n        \"latin\" : [\"muralis\"],\n        \"en\" : [\"growing on the wall\"]\n    },\n    {\n        \"latin\" : [\"nobilis\"],\n        \"en\" : [\"noble\"]\n    },\n    {\n        \"latin\" : [\"nix\"],\n        \"en\" : [\"snow\"]\n    },\n    {\n        \"latin\" : [\"nucifer\"],\n        \"en\" : [\"bearing nuts\"]\n    },\n    {\n        \"latin\" : [\"officinale\"],\n        \"en\" : [\"of or belonging to the officina (storeroom for medicines)\"],\n        \"wiki\": \"https://en.wikipedia.org/wiki/Officinalis\"\n    },\n    {\n        \"latin\" : [\"officinalis\"],\n        \"en\" : [\"of or belonging to the officina (storeroom for medicines)\"],\n        \"wiki\": \"https://en.wikipedia.org/wiki/Officinalis\"\n    },\n    {\n        \"latin\": [\"oleo\"],\n        \"en\" : [\"oily\"]\n    },\n    {\n        \"latin\" : [\"palustris\"],\n        \"en\" : [\"of the marsh\"]\n    },\n    {\n        \"latin\" : [\"parviflorus\"],\n        \"en\" : [\"small-flowered\"]\n    },\n    {\n        \"latin\" : [\"parvifolius\"],\n        \"en\" : [\"small-leaved\"]\n    },\n    {\n        \"latin\" : [\"pelagicus\"],\n        \"en\" : [\"of the open sea\"]\n    },\n    {\n        \"latin\": [\"persica\"],\n        \"en\" : [\"from Persia\"],\n        \"examples\": [\"Prunus persica\"]\n    },\n    {\n        \"latin\" : [\"petro-\"],\n        \"en\" : [\"rock\", \"stone\"]\n    },\n    {\n        \"latin\" : [\"phyto-\"],\n        \"en\" : [\"plant\"]\n    },\n    {\n        \"latin\" : [\"pomum\"],\n        \"en\" : [\"fruit\"]\n    },\n    {\n        \"latin\" : [\"pratum\"],\n        \"en\" : [\"meadow\"]\n    },\n    {\n        \"latin\" : [\"proto-\"],\n        \"en\" : [\"first\"]\n    },\n    {\n        \"latin\": [\"pteron\"],\n        \"en\" : [\"feather\", \"wing\"]\n    },\n    {\n        \"latin\" : [\"radix\"],\n        \"en\" : [\"root or radish\"]\n    },\n    {\n        \"latin\" : [\"ramus\"],\n        \"en\" : [\"branch\"]\n    },\n    {\n        \"latin\": [\"rapum\"],\n        \"en\" : [\"turnip\"]\n    },\n    {\n        \"latin\" : [\"repandus\"],\n        \"en\" : [\"curved upwards\", \"turned up\"]\n    },\n    {\n        \"latin\" : [\"rhiza\"],\n        \"en\" : [\"root\"]\n    },\n    {\n        \"latin\" : [\"sativus\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"sativum\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"sativa\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"setosus\"],\n        \"en\" : [\"bristly or shaggy\"]\n    },\n    {\n        \"latin\" : [\"silvestris\"],\n        \"en\" : [\"from woodland or forest; wild\"]\n    },\n    {\n        \"latin\" : [\"sylvestris\"],\n        \"en\" : [\"from woodland or forest; wild\"]\n    },\n    {\n        \"latin\" : [\"speciosus\"],\n        \"en\" : [\"showy\"]\n    },\n    {\n        \"latin\" : [\"sperma\"],\n        \"en\" : [\"seed\"]\n    },\n    {\n        \"latin\" : [\"striatus\"],\n        \"en\" : [\"striped\"]\n    },\n    {\n        \"latin\" : [\"strictus\"] ,\n        \"en\" : [\"straight\", \"narrow\", \"erect\"]\n    },\n    {\n        \"latin\" : [\"suber\"],\n        \"en\" : [\"cork\"]\n    },\n    {\n        \"latin\" : [\"sucus\"],\n        \"en\" : [\"juice\"]\n    },\n    {\n        \"latin\" : [\"sulcatus\"],\n        \"en\" : [\"furrowed\"]\n    },\n    {\n        \"latin\" : [\"tenuis\"],\n        \"en\" : [\"thin\", \"slender\", \"fine\"]\n    },\n    {\n        \"latin\" : [\"tinctorius\"],\n        \"en\" : [\"or dyeing\"]\n    },\n    {\n        \"latin\" : [\"tomentosus\"],\n        \"en\" : [\"furry\", \"hairy\"]\n    },\n    {\n        \"latin\" : [\"ulmus\"],\n        \"en\" : [\"elm\"]\n    },\n    {\n        \"latin\" : [\"vernus\"],\n        \"en\" : [\"spring\"]\n    },\n    {\n        \"latin\" : [\"vernalis\"],\n        \"en\" : [\"spring\"]\n    },\n    {\n        \"latin\" : [\"verus\"],\n        \"en\" : [\"true\", \"genuine\"]\n    },\n    {\n        \"latin\" : [\"villosus\"],\n        \"en\" : [\"hairy\", \"shaggy\"]\n    },\n    {\n        \"latin\" : [\"viridis\"],\n        \"en\" : [\"green\"]\n    },\n    {\n        \"latin\" : [\"vulgaris\"],\n        \"en\" : [\"common\"]\n    },\n    {\n        \"latin\" : [\"vulgare\"],\n        \"en\" : [\"common\"]\n    },\n    {\n        \"latin\" : [\"xanthos\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\" : [\"zygos\"],\n        \"en\" : [\"joined\"]\n    },\n    {\n        \"latin\" : [\"stipula\"],\n        \"en\" : [\"straw, stalk\"]\n    },\n    {\n        \"latin\" : [\"convolvulus\"],\n        \"en\" : [\"wound\"]\n    },\n    {\n        \"latin\" : [\"ranunculus\"],\n        \"en\" : [\"little frog\"]\n    },\n    {\n        \"latin\" : [\"esculenta\"],\n        \"en\" : [\"edible\"]\n    },\n    {\n        \"latin\" : [\"ascus\"],\n        \"en\" : [\"sack, wineskin\"]\n    },\n    {\n        \"latin\" : [\"sclero\"],\n        \"en\" : [\"hard\"]\n    },\n    {\n        \"latin\" : [\"derma\"],\n        \"en\" : [\"skin\"]\n    },\n    {\n        \"latin\" : [\"odora\"],\n        \"en\" : [\"perfumed\"]\n    },\n    {\n        \"latin\" : [\"kantharos\"],\n        \"en\" : [\"tankard\", \"cup\"]\n    },\n    {\n        \"latin\" : [\"pyriforme\"],\n        \"en\" : [\"pear-shaped\"]\n    },\n    {\n        \"latin\" : [\"Lycoperdon\"],\n        \"en\" : [\"wolf's fart\"]\n    },\n    {\n        \"latin\" : [\"Lycopersicon\"],\n        \"en\" : [\"wolf's peach\"]\n    },\n    {\n        \"latin\" : [\"Grifola\"],\n        \"en\" : [\"Something intricate or braided\"]\n    },\n    {\n        \"latin\" : [\"Frondosa\"],\n        \"en\" : [\"Full of leaves\"]\n    },\n    {\n        \"latin\" : [\"calvus\"],\n        \"en\" : [\"bald, without hair\"]\n    },\n    {\n        \"latin\" : [\"thallus\"],\n        \"en\" : [\"a green shoot or twig\"]\n    },\n    {\n        \"latin\" : [\"vasculum\"],\n        \"en\" : [\"duct\"]\n    },\n    {\n        \"latin\" : [\"xylem\"],\n        \"en\" : [\"wood\"]\n    },\n    {\n        \"latin\" : [\"phloios\"],\n        \"en\" : [\"bark\"]\n    },\n    {\n        \"latin\" : [\"parietina\"],\n        \"en\" : [\"on walls\"]\n    },\n    {\n        \"latin\" : [\"eutrophos\"],\n        \"en\" : [\"well nourished\"]\n    },\n    {\n        \"latin\" : [\"askos\"],\n        \"en\" : [\"sac, wineskin\"]\n    },\n    {\n        \"latin\" : [\"Suillus\"],\n        \"en\" : [\"of pigs\"]\n    },\n    {\n        \"latin\" : [\"sus\"],\n        \"en\" : [\"pig\"]\n    },\n    {\n        \"latin\" : [\"collinitus\"],\n        \"en\" : [\"smeared\", \"greased\"]\n    },\n    {\n        \"latin\" : [\"pyrrho\"],\n        \"en\" : [\"fire\"]\n    },\n    {\n        \"latin\" : [\"coris\"],\n        \"en\" : [\"bug\"]\n    },\n    {\n        \"latin\" : [\"boreal\"],\n        \"en\" : [\"(far) northern\"]\n    },\n    {\n        \"latin\" : [\"physcia\"],\n        \"en\" : [\"inflated, sausage-like\"]\n    },\n    {\n        \"latin\" : [\"apis\"],\n        \"en\" : [\"bee\"],\n        species: [ 'Apis mellifera' ]\n    },\n    {\n        \"latin\" : [\"mellifera\"],\n        \"en\" : [\"honey-bearing\"],\n        species: [ 'Apis mellifera' ]\n    },\n    {\n        \"latin\" : [\"instar\"],\n        \"en\" : [\"likeness, form\"]\n    },\n    {\n        \"latin\" : [\"skia\"],\n        \"en\" : [\"shadow\"]\n    },\n    {\n        \"latin\" : [\"oura\"],\n        \"en\" : [\"tail\"]\n    },\n    {\n        \"latin\" : [\"geo\"],\n        \"en\" : [\"earth\"]\n    },\n    {\n        \"latin\" : [\"metron\"],\n        \"en\" : [\"measure\"]\n    },\n    {\n        \"latin\" : [\"pente\"],\n        \"en\" : [\"five\"]\n    },\n    {\n        \"latin\" : [\"tomos\"],\n        \"en\" : [\"section\"]\n    },\n    {\n        \"latin\" : [\"praecox\"],\n        \"en\" : [\"before its time\"]\n    },\n    {\n        \"latin\" : [\"rudus\"],\n        \"en\" : [\"rubble\"]\n    },\n    {\n        \"latin\" : [\"phoinix\"],\n        \"en\" : [\"red\"]\n    },\n    {\n        \"latin\" : [\"ouros\"],\n        \"en\" : [\"tailed\"]\n    },\n    {\n        \"latin\" : [\"coluber\"],\n        \"en\" : [\"snake\"]\n    },\n    {\n        \"latin\" : [\"noctua\"],\n        \"en\" : [\"little owl\"]\n    },\n    {\n        \"latin\" : [\"epidermis\"],\n        \"en\" : [\"over-skin\"]\n    },\n    {\n        \"latin\" : [\"septem\"],\n        \"en\" : [\"seven\"],\n        species: [ 'Coccinella septempunctata' ]      \n    },\n    {\n        \"latin\" : [\"punctus\"],\n        \"en\" : [\"spot\"],\n        species: [ 'Coccinella septempunctata' ]      \n    },\n    {\n        \"latin\" : [\"tussis\"],\n        \"en\" : [\"cough\"],\n        species: [ 'Tussilago farfara' ]      \n    },\n    {\n        \"latin\" : [\"stoechas\"],\n        \"en\" : [\"in rows\"],\n        species: [ 'Lavandula stoechas' ]      \n    },\n    {\n        \"latin\" : [\"ros marinus\"],\n        \"en\" : [\"dew of the sea\"],\n        species: [ 'Rosmarinus officinalis' ]      \n    },\n    {\n        \"latin\" : [\"auriculata\"],\n        \"en\" : [\"with ears\"],\n        species: [ 'Plumbago auriculata' ]      \n    },\n    {\n        \"latin\" : [\"baccata\"],\n        \"en\" : [\"bearing red berries\"],\n        species: [ 'Taxus baccata' ]      \n    },\n    {\n        \"latin\" : [\"pleurotus\"],\n        \"en\" : [\"sideways\"],\n        species: [ 'Pleurotus ostreatus' ]      \n    },\n    {\n        \"latin\" : [\"sema\"],\n        \"en\" : [\"sign\"],\n        genus: [ 'Bombus' ]      \n    },\n];","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { epithets } from 'api/botanical-latin';\n\nconst getVernacularName = (item, config, useShortForm = false, namePart = 'vernacularName') => {\n    try {\n        let shortForm;\n        if(useShortForm) {\n            let englishShortForm = item.names.find(name => name.language === 'en' && name.shortForm);\n            englishShortForm = englishShortForm ? englishShortForm.shortForm : undefined;\n            let languageSortForm = item.names.find(name => name.language === config.language && name.shortForm);\n            languageSortForm = languageSortForm ? languageSortForm.shortForm : undefined;\n            shortForm = languageSortForm || englishShortForm;\n        }\n        if(shortForm) return shortForm;    \n        const englishNames = item.names.filter(name => name.language === 'en');\n        const english = englishNames.length > 0 ? englishNames[0][namePart] : 'Unknown';\n        const names = item.names.filter(name => name.language === config.language);\n        const name = names.length > 0 ? names[0][namePart] : english;\n        const capitalisedNames = name.split(' ');\n        let capitalisedName;\n        if(config.language === 'fr') {        \n            capitalisedName = utils.capitaliseFirst(capitalisedNames.join(' '));\n        } else {\n            capitalisedName = capitalisedNames.map(name => utils.capitaliseFirst(name)).join(' ');\n        }\n        return capitalisedName;\n    } catch(e) {\n        console.error('Failing getting vernacular name for: ', item, 'error: ', e.message);\n        return '';\n    }\n};\n\nconst getGenusName = binomial => {\n    return binomial.split(' ')[0];\n};\n\nconst getSpeciesName = binomial => {\n    return binomial.split(' ')[1];\n};\n\nconst latin = species => {\n    let epithet = epithets.find(e => {        \n        const match = e.latin.find(part => part.toUpperCase() === species.toUpperCase());\n        return match || '';\n    });\n    return epithet ? { ...epithet } : '';\n};\n\nconst getTaxonProp = (taxon, language, prop) => {\n\n    if(!taxon[prop]) return '';\n\n    const propValue = taxon[prop].find(p => p.language === language) ? taxon[prop].find(p => p.language === language) : taxon[prop].find(p => p.language === 'en');\n\n    return propValue || '';\n};\n\nconst getNestedTaxonProp = (taxon, language, prop1, prop2, index) => {\n\n    if(!taxon || !taxon[prop1]) return '';\n\n    const prop1Value = taxon[prop1].find(name => name.language === language) ? taxon[prop1].find(name => name.language === language) : taxon[prop1].find(name => name.language === 'en');\n\n    if(!prop1Value) return '';\n\n    const prop2Value = prop1Value[prop2];\n\n    if(!prop2Value) return '';\n\n    const output = index ? prop2Value[index] : prop2Value;\n\n    return output;\n}\n\nconst trimLatinName = name => {\n\n    let binomial = name;\n\n    if(name.indexOf('.') < 0) {\n        binomial = name.split(' ').map((n,i) => {\n            return i === 0 ? n.slice(0,1).trim() + '.' : n.trim()\n          }).join(' ')\n    }\n    \n    return binomial;\n};\n\nconst familyVernacularNames = (name, language, taxa) => {\n    if(name === '') return;\n    const taxon = taxa.find(taxon => taxon.name.toUpperCase() === name.toUpperCase());\n    if(!taxon) return;\n    return taxon.names.find(name => name.language === language).names;\n};\n\nconst getTrait = (item, name, formatter) => {\n    \n    if(!item.traits) return '';\n\n    let trait;\n\n    for (let [key, obj] of Object.entries(item.traits)) {\n        if(key === name) {\n            trait = obj.value;\n        }\n    }\n\n    if(!trait) return '';\n    if(!formatter) return trait;\n    return formatter(trait);\n}\n\nconst reducer = (acc, curr) => {\n    return acc + curr;\n}\n\nconst getActiveTrait = (item, options) => {\n    const traitValues = options.map(option => { \n        const traitName = option.name;\n        const formatter = option.formatter;\n        return getTrait(item, traitName, formatter);\n    });\n    return traitValues.reduce(reducer, '');\n}\n\nconst vernacularNamesForItems = (items, config) => {\n    let itemNames = items.map(item => item.names);\n    let vernaculars = itemNames.map(itemNames => itemNames.filter(name => \n        { return name.language === config.language || name.language === 'en' }));\n    if(vernaculars.length === 0) return [];\n    vernaculars = vernaculars.map(vernacular => {\n        let name = vernacular.find(v => v.language === config.language);\n        if(!name) name = vernacular.find(v => v.language === 'en');\n        if(!name) return '';\n        return utils.capitaliseFirst(name.vernacularName);\n    }).filter(v => v !== '');\n    return vernaculars;\n};\n\nconst getVernacularNames = (item, config) => {\n    try {\n        const names = item.names.filter(name => name.language === config.language).map(name => utils.capitaliseFirst(name.vernacularName));\n        return names;\n    } catch(e) {\n        console.error('Failing getting vernacular names for: ', item);\n        return '';\n    }\n};\n\nconst answersFromList = (list, toInclude, number) => {\n    const answers = R.take(number - 1, list.filter(item => item !== toInclude));\n    answers.push(toInclude);\n    return utils.shuffleArray(answers);\n};\n\nconst statsReducer = function(obj,elem){\n    obj[elem]=obj[elem] || 0;\n    obj[elem]++;\n    return obj;\n};\n\nconst getFamilyStats = items => {\n    return items.map(item => item.taxonomy.family).reduce(statsReducer,{});\n};\n\nconst getFileNameFromImageUrl = url => {\n\n    const pattern = /[\\w:]+\\.(jpe?g|png|gif|svg)/i;\n\n    var filename = pattern.exec(url)[0];\n\n    return filename;    \n};\n\nconst getRootTraitValue = (traitValue, drop = 'end') => {\n\n    const pattern = /[A-Z]+[^A-Z]*|[^A-Z]+/g;\n\n    const parts = traitValue.match(pattern);\n\n    const dropStarters = ['colour', 'shape'];\n\n    dropStarters.forEach(starter => {\n        if(traitValue.toLowerCase().indexOf(starter) > -1) {\n            drop = 'start';\n        }\n    });\n\n    let rootTraitValue = '';\n\n    if(drop === 'start') {\n        parts.forEach((part,index) => {\n            if(index === parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n        rootTraitValue = rootTraitValue.charAt(0).toLowerCase() + rootTraitValue.slice(1);\n    } else {\n        parts.forEach((part,index) => {\n            if(index < parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n    }\n    \n    return rootTraitValue;\n};\n\nconst getImageRightsUrl = url => {\n\n    const filename = getFileNameFromImageUrl(url);\n\n    const template = `https://en.wikipedia.org/w/api.php?action=query&prop=imageinfo&iiprop=extmetadata&titles=File:${filename}&format=json`;\n\n    return template;\n}\n\nexport const itemProperties = {\n    getVernacularName,\n    getGenusName,\n    getSpeciesName,\n    latin,\n    getTaxonProp,\n    getNestedTaxonProp,\n    trimLatinName,\n    familyVernacularNames,\n    getTrait,\n    getActiveTrait,\n    vernacularNamesForItems,\n    getVernacularNames,\n    answersFromList,\n    getFamilyStats,\n    getFileNameFromImageUrl,\n    getImageRightsUrl,\n    getRootTraitValue\n};","import * as R from 'ramda';\n\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { utils } from 'utils/utils';\n\nconst getRandomTrait = (traits, traitsToIgnore) => {    \n\n    const allowedTraits = {};\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!R.contains(key.toLowerCase(), traitsToIgnore)) {\n            allowedTraits[key] = obj.unit ? [`${obj.value}${obj.unit}`] : obj.value;\n        }\n    }\n\n    let trait = utils.getRandomObjectProperty(allowedTraits);\n    return trait;\n};\n\nconst getTraitsPoolForUnits = trait => {\n    // create set of numeric answers based on the value\n\n    const traitsPool = [1,2,3,4,5,6,7,8,9];\n\n    if(trait.unit === 'MM'){\n        // months\n        // find distance between first and second and add answers with similar gap\n        // e.g. jan-feb produces aug-sep, nov-dec, etc.\n    }\n\n    return { traitsPool, help: 'Pick the best range'};\n};\n\nconst getTraitsPoolForRoles = trait => {    \n    enumKey = trait.role; // e.g. name of role, but role of predator; (and possibly need to apply logic as below)\n    const traitsPool = ['role1', 'role2', 'role3', 'role4', 'role5', 'role6', 'role7', 'role8', 'role9', 'role10'];\n    return { traitsPool, help: 'symbiosis'};\n};\n\nconst getTraitValues = (trait, traits) => {\n\n    let traitKeyParts = trait.key.split(' ');\n    let enumKey; // e.g map 'leaf variation' to leafVariation\n    \n    traitKeyParts.forEach((part, index) => {\n        if(index === 0) {\n            enumKey = part.toLowerCase();\n        } else {\n            enumKey += utils.capitaliseFirst(part);\n        }\n    });\n\n    const traitValues = traits[enumKey];\n\n    return traitValues;\n};\n\nconst getTraitsPool = (trait, traits) => {\n\n    let traitsPool = [];\n\n    let traitValues = getTraitValues(trait, traits);\n\n    if(!traitValues) {\n        traitValues = traits[itemProperties.getRootTraitValue(utils.toCamelCase(trait.key))];\n        if(traitValues) traitValues.help = trait.key;\n    }\n\n    if(traitValues) {        \n        for (let [key, obj] of Object.entries(traitValues)) {\n            if(!R.contains(key, [ 'type', 'name', 'help'])) {\n                if(key !== trait.key) {\n                    traitsPool.push(obj);\n                }\n            }\n        }\n    }\n\n    let help = traitValues \n            ? traitValues.help || traitValues.name\n            : trait.key;\n\n    return { traitsPool, help };\n};\n\nconst getSetOfTraitAnswers = (pool, trait) => {\n\n    let traitSet = trait.value;\n        traitSet = traitSet.map(t => t.trim());\n        traitSet = utils.shuffleArray(traitSet);\n\n    // take maximum of 2 values from the trait values array\n\n    let traitValues = R.take(2, traitSet);\n\n    let sets = [];\n  \n    if(traitValues.length === 1) {\n        \n        sets = [ ...R.take(5, pool.filter(value => value !== trait.value[0])), trait.value[0] ];\n\n    } else {\n\n        // create a 'set' of all possible unique 2-value combinations\n        \n        pool.forEach(a => {\n            pool.forEach( b => {\n                if(a !== b) {\n                    const exists = sets.filter(s => s === [a,b] || s === [b,a]).length > 0;\n                    if(!exists) { \n                        sets.push([a,b]);\n                    }\n                }\n            })\n        });\n\n        sets = R.take(6, utils.shuffleArray(sets));\n\n        // remove any combination that matches the trait value set (in either order) \n\n        sets = sets.map(set => {\n            if(set[0] !== traitSet[0] && set[1] !== traitSet[1] || set[0] !== traitSet[1] && set[1] !== traitSet[0]) {\n                return set;\n            }\n        }).filter(s => s);\n\n        sets = R.take(5, sets);\n        sets = [ ...sets, traitSet ];\n\n        if(sets.length === 0) {\n            sets = ['a', 'b', trait.value];\n        }\n        \n        sets = sets.map(set => set.join(', '));\n    }\n  \n    return utils.shuffleArray(sets);\n};\n\nconst getTraitByKey = (traits, traitKey) => {\n    return traits[Object.keys(traits).find(key => key === traitKey)];\n}\n\nconst getTraitValueByKey = (traits, traitKey) => {\n    const trait = getTraitByKey(traits, traitKey);\n    if(trait) return trait.value;\n}\n\nconst hasTraitPropeties = traits => {\n    for(var prop in traits) {\n        if (traits.hasOwnProperty(prop)) {\n            return true;\n        }\n    }\n};\n\nconst getLinkedTaxaTraits = traits => {\n    \n    const taxaTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(obj.type) {\n            taxaTraits.push({ name: key, value: obj.value, type: obj.type });\n        } else if(key === 'lookalikes') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'lookalike' });\n        } else if(key === 'symbionts') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'symbionts' });\n        }\n    }\n\n    return taxaTraits;\n};\n\nconst getTraitsToExclude = () => {\n    return [ \n        'symbionts', 'voice', 'pollination', 'name', \n        'units', 'song', 'uk rank',\n        'colour', 'bark colour', 'height',\n        'physiology', 'description',\n        'usage', 'habitat',\n        'symbiont'\n        //'characteristic'\n    ];\n};\n\nconst handleUnit = unit => {\n\n    unit = unit || '';\n\n    switch(unit) {\n        case 'DD':\n            return ' days';\n        case 'MM':\n            return '';\n        case 'YY':\n            return ' years';\n     default:\n        return unit;   \n    }    \n};\n\nconst convertTraitsToNameValuePairsArray = (traits, traitsToExclude, item) => {\n\n    if(!hasTraitPropeties(traits)) return {};\n    \n    const includedTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!R.contains(key, traitsToExclude)) {\n            if(key === 'lookalikes') {\n                obj.forEach(species => {\n                    includedTraits.push({\n                        name: key, \n                        value: [species.lookalike.name],\n                        description: species.description, lookalike: { name: species.lookalike.name, description: species.lookalike.description } \n                    }); \n                });\n            } else if(key === 'relationships') {\n                obj.forEach(species => {\n                    includedTraits.push({ \n                        name: key, value: [species.symbiont.name],\n                    }); \n                });\n            } else {\n                includedTraits.push({ name: key, value: obj.value, unit: handleUnit(obj.unit), type: obj.type || '' });\n            }\n        }\n    }\n    \n    return includedTraits;\n};\n\nconst getNMultiplesFromArray = (arra, arra_size) => {\n\n    if(arra.length === 0) return [];\n\n    var result_set = [], \n        result;\n    \n   \n    for(var x = 0; x < Math.pow(2, arra.length); x++) {\n        result = [];\n        var i = arra.length - 1; \n        do {\n            if((x & (1 << i)) !== 0) {\n                result.push(arra[i]);\n            }\n        } \n        \n        while(i--);\n\n        if(result.length >= arra_size) {\n            result_set.push(result);\n        }\n    }\n\n    return result_set.filter(set => set.length === arra_size);\n};\n\nconst doArraysHaveSameValues = R.compose(R.isEmpty, R.symmetricDifference);\n\nexport const traitsHandler = {\n    getRandomTrait,\n    getTraitsPoolForUnits,  \n    getTraitsPoolForRoles,\n    getTraitValues,\n    getTraitsPool,\n    getSetOfTraitAnswers,\n    getTraitByKey,\n    getTraitValueByKey,\n    getLinkedTaxaTraits,\n    getTraitsToExclude,\n    convertTraitsToNameValuePairsArray,\n    getNMultiplesFromArray,\n\n    doArraysHaveSameValues,\n    hasTraitPropeties,\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nexport const getTraitsForTests = (enums, item, alreadyTestedTraits = []) => {\n\n    if(item.traits === undefined || (Object.keys(item.traits).length === 0 && item.traits.constructor === Object)) return {};\n\n    const excludedTraits = [ ...traitsHandler.getTraitsToExclude(), ...alreadyTestedTraits, 'lookalikes', 'relationships' ].filter(et => et);\n\n    const trait = traitsHandler.getRandomTrait(item.traits, excludedTraits);\n\n    if((Object.keys(trait).length === 0 && trait.constructor === Object)) return {};\n \n    let { traitsPool, help } = \n        trait.unit \n            ? traitsHandler.getTraitsPoolForUnits(trait)\n            : trait.role\n                ? traitsHandler.getTraitsPoolForRoles(trait)\n                : traitsHandler.getTraitsPool(trait, enums);\n\n    const question = trait.unit\n                        ? trait.value.join('-')\n                        : trait.value.join(',');\n                           \n    trait.value = trait.value.map(t => utils.capitaliseFirst(t));\n\n    const answers = traitsHandler.getSetOfTraitAnswers(traitsPool, trait);        \n\n    help = help || trait.key;\n\n    const overrides = { question: 'Match the trait', help, trait };\n\n    return { question, answers, overrides, typedItemTraits: item.traits };\n};  ","import { store } from 'redux/store';\nimport { getTraitsForTests } from 'api/traits/traits-for-tests';\n\nexport const getTraitTests = itemsInThisRound => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        const { enums } = store.getState();\n\n        const { question, answers, overrides } = getTraitsForTests(enums, item);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n};","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getBirdsongTests = (itemsInThisRound, collection) => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n        \n        if(item.taxonomy.class && item.taxonomy.class.toLowerCase() !== 'aves') return [];\n        \n        const { question, answers, overrides } = getBirdsongTest(item, itemsInThisRound, collection);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n}\n\nconst getBirdsongTest = (item, itemsInThisRound, collection) => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return;\n\n    const name = 'song';\n    const birdsong = { name, ...item.traits[name] };\n    \n    // require other birds, which may not be in this collection…\n\n    let birds = R.take(3, collection.items.filter(bird => bird.name.toLowerCase() !== item.name.toLowerCase()));\n        birds.push(item);\n\n    const birdNames = utils.shuffleArray(birds.map(bird => bird.name));\n\n    const question = item.name;\n    const answers = birdNames;\n    const overrides = { question: 'Match the birdsong', vernacularName: 'Common name', binomial: 'Latin name', trait: birdsong };\n\n    return { question, answers, overrides };\n};","export const enums = {\n  name: {\n  DESCRIPTION: 'description',\n  CIRCUMFERENCE: 'circumference',\n  EXPOSURE: 'exposure',\n  CAP_SHAPE: 'cap shape',\n  CAP_COLOUR: 'cap colour',\n  CAP_DIAMETER: 'cap diameter',\n  CAP_WIDTH: 'cap width',\n  CAP_HEIGHT: 'cap height',\n  SHELF_WIDTH: 'shelf width',\n  SHELF_THICKNESS: 'shelf thickness',\n  ECO_TYPE: 'ecological type',\n  HOW_EDIBLE: 'how edible',\n  HYMENIUM_TYPE: 'hymenium type',\n  SPORE_PRINT_COLOUR: 'spore print colour',\n  STIPE_CHARACTER: 'stipe character',\n  STIPE_LENGTH: 'stipe length',\n  STIPE_WIDTH: 'stipe width',\n  STIPE_COLOUR: 'stipe colour',\n  GILL_ATTACHMENT: 'gill attachment',\n  FLESH: 'flesh',\n  STEM_CHARACTER: 'stem character',\n  GILL_COLOUR: 'gill colour',\n  TRUNK_COLOUR: 'trunk colour',\n  SUBSTRATE: 'substrate',\n  THALLUS_TYPE: 'thallus type',\n  RHIZINE_TYPE: 'rhizine type',\n  DISC_WIDTH: 'Width',\n  LOBE_WIDTH: 'Lobe width',\n  LOBE_LENGTH: 'Lobe length',\n  LOBE_DIAMETER: 'Lobe diameter',\n  ROLE: 'Role',\n  NATIVE: 'Native',\n  NATIVE_TO: 'Native to',\n  SYMBIOSIS: 'Symbiosis',\n  ASSOCIATE: 'associate',\n  SYMBIONTS: 'symbionts',\n  LOOKALIKES: 'look alikes',\n  ECOLOGY: 'ecology',\n  HABITAT: 'habitat',\n  TROPHIC_LEVEL: 'Trophic level',\n  ORGANISATION: 'Organisation',\n  SMELL: 'smell',\n  FRUIT_TYPE: 'Fruit type',\n  FRUIT_WIDTH: 'Fruit width',\n  FRUIT_HEIGHT: 'Fruit height',\n  FRUIT_DIAMETER: 'Fruit diameter',\n  FRUIT_LENGTH: 'Fruit length',\n  FRUIT_COLOUR: 'Fruit colour',\n  FRUIT_TEXTURE: 'Fruit texture',\n  BRANCH_TEXTURE: 'Branch texture',\n  FRUIT_SURFACE: 'Fruit surface',\n  SEED_DISPERSAL: 'Seed dispersal',\n  VITAMINS: 'vitamins',\n  STAMEN_COUNT: 'Stamen count',\n  STYLE_COUNT: 'Style count',\n  LEAFLET_COUNT: 'Leaflet count',\n  LOBE_COUNT: 'Lobe count',\n  LEAFLET_LENGTH: 'Leaflet length',\n  LEAFLET_WIDTH: 'Leaflet width',\n  GROUPING: 'grouping',\n  MEDICINAL_PROPERTIES: 'Medicinal properties',\n  COLOUR: 'Colour',\n  USAGE: 'Usage',\n  FORM: 'Form',\n  LIFE_SPAN: 'Life span',\n  GERMINATION: 'Germination',\n  ACTIVE: 'Active',\n  SUBSTRATE_ADHERANCE: 'Substrate adherance',\n  RANK: 'UK Rank',\n  SIZE: 'Size',\n  LENGTH: 'Length',\n  VOICE: 'Voice',\n  HEIGHT: 'Height',\n  WEIGHT: 'Weight',\n  REPRODUCTION: 'Reproduction',\n  ASEXUAL_REPRODUCTION: 'Asexual reproduction',\n  DISPLAY: 'Display',\n  BEHAVIOUR: 'behaviour',\n  CHARACTERISTIC: 'Characteristic',\n  COMMUNICATION: 'Communication',\n  SHELTER: 'Shelter',\n  DISEASE: 'Disease',\n  THREAT: 'Threat',\n  FOOD: 'Food',\n  SEXUAL_DIMORPHISM: 'Sexual dimorphism',\n  WING_SPAN: 'Wing span',\n  TREE_SHAPE: 'Tree shape',\n  CROWN_SHAPE: 'Crown shape',\n  LEAF_DIVISION: 'Leaf division',\n  LEAFLET_DIVISION: 'Leaflet division',\n  LEAF_BLADE: 'Leaf blade',\n  LEAF_VARIATION: 'Leaf variation',\n  LEAF_SHAPE: 'Leaf shape',\n  JUVENILE_LEAF_SHAPE: 'Juvenile leaf shape',\n  LEAF_MARGIN: 'Leaf margin',\n  LEAF_ARRANGEMENT: 'Leaf arrangement',\n  LEAF_ATTACHMENT: 'Leaf attachment',\n  LEAF_LENGTH: 'Leaf length',\n  AWN_LENGTH: 'Awn length',\n  JUVENILE_LEAF_LENGTH: 'Juvenile leaf length',\n  LEAF_WIDTH: 'Leaf width',\n  LEAF_COLOUR: 'Leaf colour',\n  LEAF_SURFACE: 'Leaf surface',\n  LEAF_ABOVE_SURFACE: 'Leaf above surface',\n  LEAF_BELOW_SURFACE: 'Leaf below surface',\n  LEAF_TEXTURE: 'Leaf texture',\n  JUVENILE_TEXTURE: 'Juvenile leaf texture',\n  LEAF_SHAPE: 'Leaf shape',\n  LEAFLET_SHAPE: 'Leaflet shape',\n  LEAF_BELOW_COLOUR: 'Leaf below colour',\n  LEAF_ABOVE_COLOUR: 'Leaf above colour',\n  LEAF_VENATION: 'Leaf venation',\n  LEAF_BUNDLE_COUNT: 'Leaf bundle count',\n  LEAF_FEATURES: 'Leaf features',\n  LEAF_FOLDING: 'Leaf folding',\n  BRANCH_ARRANGEMENT: 'Branch arrangement',\n  STALK_HEIGHT: 'Stalk height',\n  STEM_HEIGHT: 'Stem height',\n  SCAPE_HEIGHT: 'Scape height',\n  STEM_DIAMETER: 'Stem diameter',\n  TRUNK_DIAMETER: 'Trunk diameter',\n  BRACT_COLOUR: 'Bract colour',\n  BRACT_LENGTH: 'Bract length',\n  PETIOLE_LENGTH: 'Petiole length',\n  FLOWER_DIAMETER: 'Flower diameter',\n  FLOWER_LENGTH: 'Flower length',\n  FLOWER_COLOUR: 'Flower colour',\n  FLOWER_SHAPE: 'Flower shape',\n  PETAL_COUNT: 'Petal count',\n  LEAFLET_COUNT: 'Leaflet count',\n  PETAL_LENGTH: 'Petal length',\n  PETAL_WIDTH: 'Petal width',\n  PETAL_COLOUR: 'Petal colour',\n  SEPAL_COUNT: 'Sepal count',\n  INFLORESCENCE: 'Inflorescence',\n  FEMALE_CONE_LENGTH: 'Female cone length',\n  MALE_CONE_LENGTH: 'Male cone length',\n  CONE_LENGTH: 'Cone length',\n  FEMALE_CONE_WIDTH: 'Female cone width',\n  MALE_CONE_WIDTH: 'Male cone width',\n  BULB_WIDTH: 'Bulb width',\n  CONE_WIDTH: 'Cone width',\n  CONE_DIAMETER: 'Cone diameter',\n  CONE_COLOUR: 'Cone colour',\n  CONE_SHAPE: 'Cone shape',\n  MALE_CONE_COLOUR: 'Male cone colour',\n  FEMALE_CONE_COLOUR: 'Female cone colour',\n  CONE_SCALE_COUNT: 'Cone scale count',\n  BARK_TYPE: 'Bark type',\n  BARK_TEXTURE: 'Bark texture',\n  CAP_TEXTURE: 'Cap texture',\n  BARK_COLOUR: 'Bark colour',\n  ALLOCHORY: 'Allochory',\n  REPRODUCTIVE_CONTAINER: 'Reproductive container',\n  CATERPILLAR_FOOD: 'Caterpillar food',\n  CATERPILLAR_LENGTH: 'Caterpillar length',\n  CATERPILLAR_COLOUR: 'Caterpillar colour',\n  HIBERNATING_STAGE: 'Hibernating stage',\n  PHYSIOLOGY: 'Physiology',\n  MATING: 'Mating season',\n  MATING_SYSTEM: 'mating system',\n  PREGNANCY: 'Pregnancy',\n  LITTER_SIZE: 'Litter size',\n  JUVENILE: 'Juvenile',\n  GESTATION: 'Gestation',\n  WEANING: 'Weaning',\n  LACTATION: 'Lactation',\n  SENSORY_ACUITY: 'Sensory acuity',\n  CRYPSIS: 'Crypsis',\n  CACHE_SIZE: 'Number of caches',\n  COLLECTIVE: 'Collective',\n  FEMALE: 'Female',\n  MALE: 'Male',\n  TAIL_LENGTH: 'Tail length',\n  MAX_SPEED: 'Maximum speed',\n  DIET: 'Diet',\n  ALTRICIAL: 'Altricial',\n  MOULTING: 'Moulting',\n  MATURITY: 'Maturity',\n  FUNGUS_MARGIN_TYPE: 'Fungus margin type',\n  SOIL_TYPE: 'Soil type',\n  PH: 'pH',\n  PH_VALUE: 'pH value',\n  LICEN_CUP_COLOUR: 'Licen cup colour',\n  RIM: 'Rim',\n  CENTRE: 'Centre',\n  POLLINATION: 'Pollination',\n  PROPAGATION: 'Propagation',\n  CLIMATE: 'Climate',\n  SONG: 'Song',\n  DIAMETER: 'diameter',\n  NUT_TYPE: 'nut type',\n  TREE_ECOLOGY: 'Tree ecology',\n  KEY_FEATURE: 'Key feature', \n  GILL_ATTACHMENT : 'gill attachment',\n  MUSHROOM_GROUP : 'Mushroom group',\n  QUEEN_LENGTH: 'Queen length',\n  QUEEN_WINGSPAN: 'Queen wingspan',\n  QUEEN_WEIGHT: 'Queen weight',\n  WORKER_LENGTH: 'Worker length',\n  WORKER_WINGSPAN: 'Worker wingspan',\n  WORKER_WEIGHT: 'Worker weight',\n  MALE_LENGTH: 'Male length',\n  MALE_WINGSPAN: 'Male wingspan',\n  MALE_WEIGHT: 'Male weight',\n  COLONY_SIZE: 'colony size',\n  TONGUE_LENGTH: 'Tongue length',\n  INFRUCTESCENCE_LENGTH: 'Infructescence length',\n  INFRUCTESCENCE_WIDTH: 'Infructescence width',\n  UMBEL_DIAMETER: 'Umbel diameter',\n  WIDTH: 'Width',\n  BREADTH: 'Breadth',\n  UMBEL_TYPE: 'Umbel type',\n  },\n  howEdible: {\n  help: 'How edible is this species?',\n  CHOICE: 'Choice',\n  EDIBLE: 'Edible',\n  INEDIBLE: 'Inedible',\n  POISONOUS: 'Poisonous',\n  DEADLY: 'Deadly',\n  TOXIC: 'Toxic',\n  type: 'howEdible',\n  name: 'how edible'\n  },\n  habitat: {\n  help: 'What is the habitat of this species?',\n  WOOD: 'Wood',\n  WOODLAND: 'Woodland',\n  WOODLAND_LITTER: 'Woodland litter',\n  GRASSLAND: 'Grassland',\n  SOIL: 'Soil',\n  VEGETATION: 'Vegetation',\n  DUNG: 'Dung',\n  DUNES: 'Dunes',\n  WIDESPREAD: 'Widespread',\n  DEAD_WOOD: 'Dead wood',\n  WASTELAND: 'Wasteland',\n  MEADOW: 'Meadow',\n  FIELDS: 'Fields',\n  MOSS: 'Moss',\n  PASTURE: 'Pasture',\n  BARK: 'Bark',\n  SHOOTS: 'Shoots',\n  COMMONS: 'Common',\n  HEATH: 'Heath',\n  ORCHARDS: 'Orchards',\n  HEDGEROWS: 'Hedgerows',\n  LAWNS: 'Lawns',\n  RINGS: 'Rings',\n  DAMP: 'Damp',\n  TREE_BASE: 'Tree base',\n  FOREST_EDGE: 'Forest edge',\n  PARKS: 'Parks',\n  TRUNKS: 'Trunks',\n  STUMPS: 'Stumps',\n  ROCKS: 'Rocks',\n  FENCES: 'Fences',\n  TREES: 'Trees',\n  SHRUBS: 'Shrubs',\n  SHRUBLAND: 'Shrubland',\n  MARSHLAND: 'Marshland',\n  EXPOSED_WOOD: 'Exposed wood',\n  BRANCHES: 'Branches',\n  HILLS: 'Hills',\n  URBAN: 'Urban',\n  VALLEYS: 'Valleys',\n  MAQUIS: 'Maquis',\n  SAVANNA: 'Savanna',\n  FOREST_STEPPE: 'Forest steppe',\n  MEADOW_STEPPE: 'meadow steppe',\n  BOREAL: 'Boreal',\n  SCRUB: 'Scrub',\n  WALLS: 'Walls',\n  MOORLAND: 'Moorland',\n  COAST: 'Coast',\n  BRUSH: 'Brush',\n  WATER: 'Water',\n  SNOW: 'Snow',\n  NO_SNOW: 'No snow',\n  CONIFERS: 'conifers',\n  BROAD_LEAF: 'broad-leaf',\n  PINE: 'pine',\n  BEECH: 'beech',\n  OAK: 'oak',\n  DITCH: 'Ditch',\n  WET_MEADOW: 'Wet meadow',\n  LAKESIDE: 'Lakeside',\n  RIPERIAN: 'Riperian',\n  WETLANDS: 'Wetlands'\n  },\n  ecologicalType: {\n  help: 'What is the ecological type of this mushroom?',\n  SAPROTROPHIC: 'Saprotrophic',\n  PARASITIC: 'Parasitic',\n  MYCORRHIZAL: 'Mycorrhizal',\n  PLANT_PATHOGEN: 'Plant pathogen',  \n  },\n  capShape: {\n  help: 'How would you describe the pileus?',\n  \n  CAMPANULATE: 'Campanulate',\n  CONICAL: 'Conical',\n  CONVEX: 'Convex',\n  DEPRESSED: 'Depressed',\n  FLAT: 'Flat',\n  INFUNDIBULIFORM: 'Infundibuliform',\n  OFFSET: 'Offset',\n  OVATE: 'Ovate',\n  UMBILLICATE: 'Umbillicate',\n  UMBONATE: 'Umbonate',\n  \n  POTATO_SHAPED: 'Potato shaped',\n  NA: 'N/A',\n  SPHERICAL: 'Spherical',\n  PEAR_SHAPED: 'Pear shaped',\n  BRAIN_LIKE: 'Brain-like',\n  HONEYCOMB: 'Honeycomb',\n  HEMI_SPHERICAL: 'Hemispherical',\n  type: 'capShape',\n  name: 'cap shape'\n  },\n  treeEcology: {\n  OAK: 'Oak',\n  BEECH: 'Beech',\n  BIRCH: 'Birch',\n  DECIDUOUS: 'Deciduous',\n  SOFTWOOD: 'Softwood',\n  HARDWOOD: 'Hardwood',\n  MIXED_WOODLAND: 'Mixed woodland',\n  CONIFEROUS: 'Coniferous',\n  PINE: 'Pine',\n  ELM: 'Elm',\n  ASH: 'Ash',\n  SYCAMORE: 'Sycamore',\n  ASPEN: 'Aspen',\n  ELDER: 'Elder',\n  CHESTNUT: 'Chestnut',\n  HARDWOODS: 'Hardwoods',\n  PRUNUS: 'Prunus',\n  PYRUS: 'Pyrus',\n  SALIX: 'Salix',\n  ROBINIA: 'Robinia',\n  CERATONIA: 'Ceratonia',\n  EUCALYPTUS: 'Eucalyptus',\n  BROAD_LEAF: 'Broad-leaf',\n  SWEET_CHESTNUT: 'Sweet chestnut',\n  POPLAR: 'Poplar',\n  CORK: 'Cork',\n  FIR: 'Fir',\n  SPRUCE: 'Spruce',\n  PLANE: 'Plane',\n  WILLOW: 'Willow',\n  MAPLE: 'Maple',\n  LARCH: 'Larch',\n  CEDAR: 'Cedar',\n  YEW: 'Yew',\n  TURKEY_OAK: 'Turkey oak',\n  HAWTHORN: 'Hawthorn',\n  BUSH: 'Bush',\n  SHRUB: 'Shrub',\n  },\n  hymeniumType: {\n  help: 'What is the hymenium type?',\n  GILLS: 'Gills',\n  PORES: 'Pores',\n  GLEBA: 'Gleba',\n  SMOOTH: 'Smooth',\n  TEETH: 'Teeth',\n  RIDGES: 'Ridges',\n  FALSE_GILLS: 'False gills',\n  },\n  associate: {\n  ALGA: 'Alga',\n  CYNOBACTERIUM: 'Cyanobacterium',\n  FUNGUS: 'Fungus',\n  type: 'associate',\n  name: 'associate'\n  },\n  thallusType: {\n  help: 'What is this lichen\\'s thallus type?',\n  FOLIOSE: 'Foliose',\n  FRUTICOSE: 'Fruticose',\n  CRUSTOSE: 'Crustose',\n  SQUAMULOSE: 'Squamulose',\n  LEPROSE: 'Leprose',\n  EPIPHYTE: 'Epiphyte',\n  type: 'thallusType',\n  name: 'thallus type'\n  },\n  rhizineType: {\n  SPARSE: 'Sparse',\n  HAPTER: 'Hapter',\n  type: 'rhizineType',\n  name: 'rhizine type'\n  },\n  substrate: {\n  WOOD: 'Wood',\n  BARK: 'Bark',\n  ROCKS: 'Rocks',\n  SOIL: 'Soil',\n  type: 'substrate',\n  name: 'substrate'\n  },\n  level: {\n  HIGH: 'High',\n  MEDIUM: 'Medium',\n  LOW: 'Low',\n  VARIABLE: 'Variable',\n  type: 'level',\n  name: 'level'\n  },\n  medicinalProperties: {\n  ANTIVIRAL: 'Antiviral',\n  ANTISEPTIC: 'Antiseptic',\n  ANTI_INFLAMMATORY: 'Anti-inflammatory',\n  ANTIBIOTIC: 'Antibiotic',\n  ANLAGESIC: 'Analgesic',\n  ANTIBACTERIAL: 'Antibacterial',\n  ANTICOAGULANT: 'Anticoagulant',\n  ANTIFUNGAL: 'Antifungal',\n  type: 'medicinalProperties',\n  name: 'medicinal properties'\n  },\n  ph: {\n  ACIDIC: 'Acidic',\n  ALKALINE: 'Alkaline',\n  NEUTRAL: 'Neutral',\n  type: 'pHLevel',\n  name: 'ph level'\n  },\n  colour: {\n  LILAC: 'Lilac',\n  BUFF: 'Buff',\n  WHITE: 'White',\n  YELLOW: 'Yellow',\n  DARK_GREEN: 'Dark green',\n  GREEN: 'Green',\n  WHITE_GREEN: 'White-green',\n  BRIGHT_GREEN: 'Bright green',\n  OLIVE_GREEN: 'Olive-green',\n  BRIGHT_YELLOW_GREEN: 'Bright yellow-green',\n  YELLOW_GREEN: 'Yellow-green',\n  YELLOW_BROWN: 'Yellow-brown',\n  PURPLE_BROWN: 'Purple-brown',\n  GREY_BROWN: 'Grey-brown',\n  DARK_YELLOW: 'Dark yellow',\n  DARK_RED: 'Dark red',\n  DARK_PINK: 'Dark pink',\n  ORANGE: 'Orange',\n  SCARLET: 'scarlet',\n  BLOOD_RANGE: 'Blood orange',\n  RED: 'Red',\n  RED_BROWN: 'Red-brown',\n  ORANGE_RED: 'Orange-red',\n  GREY: 'Grey',\n  PALE_GREY: 'Pale grey',\n  PALE_BROWN: 'Pale brown',\n  GREY_GREEN: 'Grey-green',\n  GREY_WHITE: 'Grey-white',\n  BROWN: 'Brown',\n  CHESTNUT_BROWN: 'Chestnut brown',\n  PAPER_BROWN: 'Paper brown',\n  BLACK: 'Black',\n  BLUE: 'Blue',\n  PALE_BLUE: 'Pale blue',\n  BLUE_BLACK: 'Blue-black',\n  JET_BLACK: 'Jet-black',\n  BLUE_GREEN: 'Blue-green',\n  VIOLET: 'Violet',\n  BURGUNDY: 'Burgundy',\n  PALE_VIOLET: 'Pale violet',\n  VIOLET_PURPLE: 'Violet purple',\n  PALE_GREEN: 'Pale green',\n  PALE_YELLOW: 'Pale yellow',\n  PALE_YELLOW_GREEN: 'Pale yellow-green',\n  PALE_GREY_GREEN: 'Pale yellow-green',\n  GLAUCOUS: 'Glaucous',\n  GREY_YELLOW: 'Grey-yellow',\n  ORANGE_YELLOW: 'Orange-yellow',\n  CREAM: 'Cream',\n  CHALKY: 'Chalky',\n  PINK: 'Pink',\n  PALE_PINK: 'Pale pink',\n  PURPLE: 'Purple',\n  PALE_PURPLE: 'Pale purple',\n  DARK_PURPLE: 'Dark purple',\n  TAN: 'Tan',\n  DARK_BROWN: 'Dark brown',\n  HONEY: 'Honey',\n  RED_PURPLE: 'Red-purple',\n  type: 'colour',\n  name: 'colour'\n  },\n  usage: {\n  help: 'To what use do humans put this species?',\n  PERFUMERY: 'Perfumery',\n  TANNING: 'Tanning',\n  DYING: 'Dying',\n  BREWING: 'Brewing',\n  FOOD: 'Food',\n  WINE: 'Wine',\n  COFFEE: 'Coffee',\n  TEA: 'Tea',\n  BIRDS_NEST: 'Bird\\'s nest',\n  POISON: 'Poison',\n  FODDER: 'Fodder',\n  FORAGE: 'Forage',\n  GREEN_MANURE: 'Green manure',\n  MEDICINE: 'Medicine',\n  FUR: 'Fur',\n  TIMBER: 'Timber',\n  PEST_CONTROL: 'Pest control',\n  HERB: 'Herb',\n  SPICE: 'Spice',\n  ESSENTIAL_OIL: 'Essential oil',\n  MORDANT: 'Mordant',\n  ASTRINGENT: 'Astringent'\n  },\n  nonTaxaType: {\n  FORM: 'Form',\n  type: 'nonTaxaType',\n  name: 'non taxa type'\n  },\n  element: {\n  NITROGEN: 'Nitrogen',\n  SULPUR_DIOXIDE: 'Sulpur dioxide',\n  type: 'element',\n  name: 'element'\n  },\n  leafBlade: {\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  type: 'leaf blade',\n  name: 'leaf blade'\n  },\n  leafDivision: {\n  PALMATE: 'Palmate',\n  COMPOUND_PALMATE: 'Compound Palmate',\n  PALMATELY_LOBED: 'Palmately lobed',\n  PINNATE: 'Pinnate',\n  COMPOUND_PINNATE: 'Compound Pinnate',\n  ODD_PINNATE: 'Odd pinnate',\n  EVEN_PINNATE: 'Even pinnate',\n  BIPINNATE: 'Bipinnate',\n  COMPOUND_BIPINNATE: 'Compound Bipinnate',\n  TRIFOLIATE: 'Trifoliate',\n  PINNATIFID: 'Pinnatifid',\n  TRIPINNATE: 'Tripinnate',\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  IMPARIPINNATE: 'Imparipinnate',\n  PARIPINNATE: 'Paripinnate',\n  },\n  leafletDivision: {\n  PALMATE: 'Palmate',\n  COMPOUND_PALMATE: 'Compound Palmate',\n  PALMATELY_LOBED: 'Palmately lobed',\n  PINNATE: 'Pinnate',\n  COMPOUND_PINNATE: 'Compound Pinnate',\n  ODD_PINNATE: 'Odd pinnate',\n  EVEN_PINNATE: 'Even pinnate',\n  BIPINNATE: 'Bipinnate',\n  COMPOUND_BIPINNATE: 'Compound Bipinnate',\n  TRIFOLIATE: 'Trifoliate',\n  PINNATIFID: 'Pinnatifid',\n  TRIPINNATE: 'Tripinnate',\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  },\n  leafVariation: {\n  HOMOBLASTIC: 'Homoblastic',\n  HETEROBLASTIC: 'Heteroblastic',\n  type: 'leafVariation',\n  name: 'leaf variation'\n  },\n  shape: {\n  LINEAR: 'Linear',\n  OVATE: 'Ovate',\n  OBLANCEOLATE: 'Oblanceolate',\n  OBOVATE: 'Obovate',\n\n  ACICULAR: 'Acicular',\n  ACUMINATE: 'acuminate',\n  ACUTE: 'acute',\n  APICULATE: 'apiculate',\n  ATTENUATE: 'attenuate',\n  AURICULATE: 'auriculate',\n  ASYMMETRICAL: 'asymmetrical',\n  CAUDATE: 'caudate',\n  CORDATE: 'cordate',\n  CUNEATE: 'cuneate',\n  CUSPIDATE: 'cuspidate',\n  DELTOID: 'deltoid',\n  DIGITATE: 'digitate',\n  ELLIPTIC: 'elliptic',\n  ENSIFORM: 'ensiform',\n  EMARGINATE: 'emarginate',\n  FALCATE: 'falcate',\n  FENESTRATE: 'fenestrate',\n  FILIFORM: 'filiform',\n  FLABELLATE: 'flabellate',\n  HASTATE: 'hastate',\n  LACINIATE: 'laciniate',\n  LANCEOLATE: 'lanceolate',\n  LAMINAR: 'laminar',\n  LINEAR: 'linear',\n  LOBED: 'lobed',\n  LORATE: 'lorate',\n  LYRATE: 'lyrate',\n  MUCRONATE: 'mucronate',\n  MULTIFID: 'multifid',\n  OBCORDATE: 'obcordate',\n  OBLANCEOLATE: 'oblanceolate',\n  OBLIQUE: 'oblique',\n  OBLONG: 'oblong',\n  OBOVATE: 'obovate',\n  OBTRULLATE: 'obtrullate',\n  OBTUSE: 'obtuse',\n  ORBICULAR: 'orbicular',\n  OVATE: 'ovate',\n  PALMATE: 'palmate',\n  PALMATELY_LOBED: 'palmately lobed',\n  PALMATIFID: 'palmatifid',\n  PALMATIPARTITE: 'palmatipartite',\n  PALMATISECT: 'palmatisect',\n  PANDURATE: 'pandurate',\n  PEDATE: 'pedate',\n  PELTATE: 'peltate',\n  PERFOLIATE: 'perfoliate',\n  PERFORATE: 'perforate',\n  PINNATELY_LOBED: 'pinnately lobed',\n  PINNATIFID: 'pinnatifid',\n  PINNATIPARTITE: 'pinnatipartite',\n  PINNATISECT: 'pinnatisect',\n  PLICATE: 'plicate',\n  RENIFORM: 'reniform',\n  RETUSE: 'retuse',\n  RHOMBOID: 'rhomboid',\n  ROUNDED: 'rounded',\n  TRIANGULAR: 'Triangular',\n  QUADRANGULAR: 'Quadrangular',\n  SEMITERETE: 'semiterete',\n  SINUATE: 'sinuate',\n  SAGITTATE: 'sagittate',\n  SPATULATE: 'spatulate',\n  SPEAR_SHAPED: 'spear-shaped',\n  SUBOBTUSE: 'subobtuse',\n  SUBULATE: 'subulate',\n  TERETE: 'terete',\n  TRULLATE: 'trullate',\n  TRUNCATE: 'truncate',\n  UNDULATE: 'undulate',\n  UNIFOLIATE: 'unifoliate',\n  FLAT: 'Flat',\n  NEEDLE: 'Needle',\n  },\n  reproduction: {\n  SELF_POLLINATION: 'Self-pollination',\n  CROSS_POLLINATION: 'Cross-pollination',\n  type: 'reproduction',\n  name: 'reproduction'\n  },\n  asexualReproduction: {\n  BUDDING: 'budding',\n  FRAGMENTATION: 'fragmentation',\n  FISSION: 'fission',\n  SPORE_FORMATION: 'spore formation',\n  VEGETATIVE_PROPAGATION: 'vegetative propagation',\n  type: 'asexualReproduction',\n  name: 'asexual reproduction'\n  },\n  leafArrangement: {\n  ALTERNATE: 'Alternate',\n  BASAL: 'Basal',\n  CAULINE: 'Rosulate',\n  OPPOSITE: 'Opposite',\n  WHORLED: 'Whorled',\n  ROWS: 'Rows',\n  SPIRAL: 'Spiral',\n  OVERLAPPING: 'Overlapping',\n  INCURVED: 'Incurved',\n  DECUSSATE: 'Decussate',\n  type: 'leafArrangement',\n  name: 'leaf arrangement'\n  },\n  leafAttachment: {\n    SESSILE: 'Sessile',\n    SUBSESSILE: 'Subsessile',\n    PEDICELLATE: 'Pedicellate',\n  },\n  leafMargin: {\n  ENTIRE: 'Entire',\n  CILIATE: 'Ciliate',\n  CRENATE: 'Crenate',\n  DENTATE: 'Dentate',\n  DENTICULATE: 'Denticulate',\n  DOUBLY_SERRATE: 'Doubly serrate',\n  SERRATE: 'Serrate',  \n  SERRULATE: 'Serrulate',  \n  SINUATE: 'Sinuate',  \n  LOBATE: 'Lobate',  \n  UNDULATE: 'Undulate',  \n  SPINY: 'Spiny',  \n  SMOOTH: 'Smooth',\n  type: 'leafMargin',\n  name: 'leaf margin'\n  },\n  food: {\n  GRASS: 'Grass',\n  ROTTEN_FRUIT: 'Rotten fruit',\n  NECTAR: 'Nectar',\n  HONEYDEW: 'Honeydew',\n  SEEDS: 'Seeds',\n  NUTS: 'Nuts',\n  GRAINS: 'Grains',\n  BERRIES: 'Berries',\n  HERBAGE: 'Herbage',\n  SWARD: 'Sward',\n  LEAVES: 'Leaves',\n  WOOD: 'Wood',\n  ROOTS: 'Roots',\n  TUBERS: 'Tubers',\n  RHIZOMES: 'Rhizomes',\n  BULBS: 'Bulbs',\n  BARK: 'Bark',\n  SHOOTS: 'Shoots',\n  type: 'food',\n  name: 'food'\n  },\n  hibernatingStage: {\n  ADULT: 'Adult',\n  CATERPILLAR: 'Caterpillar',\n  PUPA: 'Pupa',\n  type: 'hibernatingStage',\n  name: 'hibernating stage'\n  },\n  symbiosis: {\n  MUTUALISM: 'Mutualism',\n  COMMENSALISM: 'Commensalism',\n  PREDATION: 'Predation',\n  PARASITISM: 'Parasitism',\n  HERBIVORY: 'Herbivory',\n  COMPETITION: 'Competition',\n  MYCORRHIZAL: 'Mycorrhizal',\n  ECTOMYCORRHIZAL: 'Ectomycorrhizal',\n  COMPANION: 'Companion planting',\n  POLLINATION: 'Pollination',\n  SEED_PREDATION: 'Seed predation',\n  type: 'symbiosis',\n  name: 'symbiosis'\n  },\n  trophicLevel: {\n  help: 'What is the trophic level or this species?',\n  PRIMARY_PRODUCER: 'Primary producer',\n  PRIMARY_CONSUMER: 'Primary consumer',\n  SECONDARY_CONSUMER: 'Secondary consumer',\n  OMNIVORE: 'Omnivore',\n  TERTIARY_CONSUMER: 'Tertiary consumer',\n  APEX_PREDATOR: 'Apex predator',\n  type: 'trophicLevel',\n  name: 'trophic level'\n  },\n  shelter: {\n  help: 'What is the name of this species`s shelter?',\n  DREY: 'Drey',\n  BURROW: 'Burrow',\n  DEN: 'Den',\n  WARREN: 'Warren',\n  SETT: 'Sett',\n  ROOKERY: 'Rookery',\n  LODGE: 'Lodge',\n  DAM: 'Dam',\n  NEST: 'Nest',\n  SHELTER: 'Shelter',\n  VEGETATION: 'vegetation',\n  type: 'shelter',\n  name: 'shelter'\n  },\n  active: {\n  help: 'When is this species most active?',\n  CREPUSCULAR: 'Crepuscular',\n  DIURNAL: 'Diurnal',\n  NOCTURNAL: 'Nocturnal',\n  MATUTINAL: 'Matutinal',\n  VESPERTINE: 'Vespertine',\n  type: 'active',\n  name: 'active'\n  },\n  juvenile: {\n  help: 'What is the name for the juvenile of this species?',\n  KIT: 'Kit',\n  SQUEAKER: 'Squeaker',\n  CUB: 'Cub',\n  KITTEN: 'Kitten',\n  CHICK: 'Chick',\n  PUP: 'Pup',\n  CALF: 'Calf',\n  DUCKLING: 'Duckling',\n  EYAS: 'Eyas',\n  MAGGOT: 'Maggot',\n  KID: 'Kid',\n  GOSLING: 'Gosling',\n  LEVERET: 'Leveret',\n  NYMPH: 'Nymph',\n  CATERPILLAR: 'Caterpillar',\n  LARVA: 'Larva',\n  SALAMANQUESA: 'Salamanquesa',\n  type: 'juvenile',\n  name: 'juvenile'\n  },\n  month: {\n  JANUARY: 'January',\n  FEBRUARY: 'February',\n  MARCH: 'March',\n  APRIL: 'April',\n  MAY: 'May',\n  JUNE: 'June',\n  JULY: 'July',\n  AUGUST: 'August',\n  SEPTEMBER: 'September',\n  OCTOBER: 'October',\n  NOVEMBER: 'November',\n  DECEMBER: 'December',\n  type: 'month',\n  name: 'month'\n  },\n  female: {\n  help: 'What is the name for a female of this species?',\n  VIXEN: 'Vixen',\n  DOE: 'Doe',\n  JILL: 'Jill',\n  BITCH: 'Bitch',\n  SOW: 'Sow',\n  HEN: 'Hen',\n  DUCK: 'Duck',\n  GOOSE: 'Goose',\n  PEN: 'Pen',\n  type: 'female',\n  name: 'female'\n  },\n  male: {\n  help: 'What is the name for a male of this species?',\n  BUCK: 'Buck',\n  DOG: 'Dog',\n  BOAR: 'Boar',\n  TOM: 'Tom',\n  JACK: 'Jack',\n  COCK: 'Cock',\n  DRAKE: 'Drake',\n  REYNARD: 'Reynard',\n  TOD: 'Tod',\n  TERCEL: 'Tercel',\n  GANDER: 'Gander',\n  COB: 'Cob',\n  type: 'male',\n  name: 'male'\n  },\n  diet: {\n  help: 'How is the diet of this species best described?',\n  HERBIVORE: 'Herbivore',\n  OMNIVORE: 'Omnivore',\n  CARNIVORE: 'Carnivore',\n  XYLOPHAGOUS: 'Xylophagous',\n  POLYPHAGOUS: 'Polyphagous',\n  type: 'diet',\n  name: 'diet'\n  },\n  fungusMarginType: {\n  ENTIRE: 'Smooth entire',\n  APPENDICULATE: 'Appendiculate',\n  UNDULATE: 'Undulate',\n  STRIATE: 'Striate',\n  PLICATE: 'Plicate',\n  RIMMOSE: 'Rimmose',\n  ERODED: 'Eroded',\n  INROLLED: 'Inrolled',\n  type: 'marginType',  \n  name: 'fungus margin type'\n  },\n  soilType: {\n  SILICEOUS: 'Siliceous',\n  CALCAREOUS: 'Calcareous',\n  NITROGENOUS: 'Nitrogenous',\n  NUTRIENT_POOR: 'Nutrient poor',\n  WELL_DRAINED: 'Well-drained',\n  WELL_WATERED: 'Well-watered',\n  LOAM: 'Loam',\n  CHALK: 'Chalk',\n  SAND: 'Sand',\n  RICH: 'Rich',\n  MOIST: 'Moist'\n  },\n  organisation: {\n  help: 'How is this species organised?',\n  EUSOCIAL: 'Eusocial',\n  SOCIAL: 'Social',\n  SOLITARY: 'Solitary',\n  MATRIARCHY: 'Matriarchy',\n  type: 'organisation',\n  name: 'organisation'\n  },\n  role: {\n  INDICATOR: 'Indicator',\n  KEYSTONE: 'Keystone',\n  FOUNDATION: 'Foundation',\n  SPECIALIST: 'Specialist',\n  GENERALIST: 'Generalist',\n  PIONEER: 'Pioneer',\n  INVASIVE: 'Invasive',\n  DOMINANT: 'Dominant',\n  POLLINATOR: 'Pollinator',\n  PREDATOR: 'Predator',\n  HERBIVORE: 'Herbivore',\n  OMNIVORE: 'Omnivore',\n  CARNIVORE: 'Carnivore',\n  GRANIVORE: 'Granivore',\n  MUCIVORE: 'Mucivore',\n  PREY: 'Prey',\n  COMPETITOR: 'Competitor',\n  HOST: 'Host',\n  CARRIER: 'Carrier',\n  RUDERAL: 'Ruderal',\n  SUPERTRAMP: 'Supertramp',\n  SYMBIONT: 'Symbiont',\n  OCCUPANT: 'Lives in',\n  PARASITE: 'Parasite',\n  COLONISER: 'Coloniser',\n  EARLY_SUCCESSION: 'early-succession',\n  SEED_DISPERSAL: 'Seed dispersal',\n  FERTILISATION: 'Fertilisation',\n  PROPAGATION: 'propagation',\n  REPRODUCTION: 'reproduction',\n  BIOINDICATOR: 'Bioindicator',\n  STRANGLER: 'Strangler',\n  FOOD_SOURCE: 'Food source',\n  EPIPHYTIC: 'Epiphytic',\n  EPIPHYTIC_STRANGLER: 'Epiphytic strangler',\n  NUTRIENT_CYCLING: 'Nutrient cycling',\n  CARBON_DIOXIDE_PRODUCTION:'Carbon dioxide production',\n  MYCOREMEDIATION: 'Mycoremediation',\n  type: 'role',\n  name: 'role'\n  },\n  fruitType: {\n  help: 'What fruit type does this plant have?',\n  DRUPE: 'Drupe',\n  POME: 'Pome',\n  BERRY: 'Berry',\n  AGGREGATE_FRUIT: 'Aggregate fruit',\n  LEGUME: 'Legume',\n  CAPSULE: 'Capsule',\n  NUT: 'Nut',\n  GRAIN: 'Grain',\n  MULTIPLE_FRUIT: 'Multiple fruit',\n  SAMARA: 'Samara',\n  ACHENE: 'Achene',\n  POD: 'Pod',\n  ARIL: 'Aril',\n  SYCONIUM: 'syconium',\n  FOLLICLE: 'Follicle',\n  SILIQUE: 'Silique',\n  type: 'fruitType',\n  name: 'fruit type'\n  },\n  inflorescence: {\n  help: 'What type of inflorescence does this plant have?',\n  CATKIN: 'catkin',\n  UMBEL: 'umbel',\n  RACEME: 'raceme',\n  CORYMB: 'corymb',\n  SPIKE: 'Spike',\n  SPADEX: 'Spadex',\n  SINGLE: 'Single',\n  PANICLE: 'Panicle',\n  CYMOSE: 'Cymose',\n  BRANCHED_SPIKE: 'Branched spike',\n  },\n  umbelType: {\n    FLAT: 'Flat',\n    SPHERICAL: 'Spherical',\n    SIMPLE: 'Simple',\n    COMPOUND: 'Compound',\n    TERMINAL: 'Terminal',\n  },\n  display: {\n  help: 'Which form of display does this species exhibit?',\n  DIEMATIC: 'Diematic',\n  SEXUAL_COLOUR_DIMORPHISM: 'Sexual colour dimorphism',\n  NO_SEXUAL_COLOUR_DIMORPHISM: 'No sexual colour dimorphism',\n  SEXUAL_DIMORPHISM: 'Sexual dimorphism',\n  NO_SEXUAL_DIMORPHISM: 'No sexual dimorphism',\n  MELANISTIC: 'Melanistic',\n  type: 'display',\n  name: 'display'\n  },\n  behaviour: {\n  help: 'This species exhibits which form of behaviour?',\n  SEXUAL_CANNIBALISM: 'Sexual cannibalism',\n  MONANDROUS: 'Monandrous',\n  VOCALISATION: 'Vocalisation',\n  CRYPSIS: 'Crypsis',\n  HOARDING: 'Hoarding',\n  HIBERNATION: 'Hibernation',\n  GAME_PLAYING: 'Game playing',\n  PLAYFUL: 'Playful',\n  TERRITORIAL: 'Territorial',\n  NON_TERRITORIAL: 'Non territorial',\n  BIPARENTAL_CARE: 'Biparental care',\n  COOPERATIVE_BREEDING: 'Cooperative breeding',\n  TOOL_MAKING: 'Tool making',\n  PROBLEM_SOLVING: 'Problem solving',\n  DIVISION_OF_LABOUR: 'Division of labour',\n  SUPERORGANISM: 'Superorganism',\n  ANAUTOGENY: 'Anautogeny',\n  MASS_PROVISIONING: 'Mass provisioning',\n  PRECOCIAL: 'Precocial',\n  ALTRICIAL: 'Altricial',\n  AUTOTOMIC: 'Autotomic',\n  ECTOTHERMIC: 'Ectothermic',\n  ADHESION: 'Adhesion',\n  POLYPHYODONT: 'Polyphyodont',\n  VIVIPAROUS: 'Viviparous',\n  REGURGITATION: 'Feeding through regurgitation',\n  MULTIVOLTINE: 'Multivoltine',\n  BIVOLTINE: 'Bivoltine',\n  UNIVOLTINE: 'Univoltine',\n  SEMIVOLTINE: 'Semivoltine',\n  METAMORPHOSIS: 'Metamorphosis',\n  RUTTING: 'Rutting',\n  WHELPING: 'Whelping',\n  FARROWING: 'Farrowing',\n  SWIMMING: 'Swimming',\n  DECUMBENT: 'Decumbent',\n  ETHYLENE_RIPENING: 'Ethylene ripening',\n  MIGRATORY: 'Migratory',\n  type: 'behaviour',\n  name: 'behaviour'\n  },\n  sense: {\n  help: 'Which sense does this species favour?',\n  SIGHT: 'Sight',\n  MOVEMENT: 'Movement',\n  SMELL: 'Smell',\n  SPATIAL: 'Spatial',\n  MEMORY: 'Memory',\n  ECHOLOCATION: 'Echolocation',\n  type: 'sense',\n  name: 'sense'\n  },\n  crypsis: {\n  CAMOUFLAGE: 'Camouflage',\n  NOCTURNALITY: 'Nocturnality',\n  SUBTERRANEAN: 'Subterranean',\n  MIMICRY: 'Mimicry',\n  VISUAL: 'Visual',\n  OLFACTORY: 'Olfactory',\n  AUDITORY: 'Auditory',\n  },\n  allochory: {\n  ANEMOCHORY: 'Anemochory',\n  HYDROCHORY: 'Hydrochory',\n  ZOOCHORY: 'Zoochory',\n  ANTHROPOCHORY: 'Anthropochory',\n  type: 'allochory',\n  name: 'allochory'\n  },\n  reproductiveContainer: {\n  CONE: 'Cone',\n  type: 'reproductiveContainer',\n  name: 'reproductive container'\n  },\n  communication: {\n  VOCALISATION: 'Vocalisation',\n  POSTURING: 'Posturing',\n  type: 'communication',\n  name: 'communication'\n  },\n  matingSystem: {\n  POLYGYNOUS: 'Polygynous',\n  MONOGAMOUS: 'Monogamous',\n  type: 'matingSystem',\n  name: 'mating system'\n  },\n  physiology: {\n  NEGATIVE_ALLELOPATHY: 'Negative allelopathy',\n  POSITIVE_ALLELOPATHY: 'Positive allelopathy',\n  C3_CARBON_FIXATION: 'C3 carbon fixation',\n  NITROGEN_FIXING: 'Nitrogen fixing',\n  MYCORRHIZAL: 'Mycorrhizal',\n  ECTOMYCORRHIZAL: 'Ectomycorrhizal',\n  DORMANCY: 'Dormancy',\n  EVERGREEN: 'Evergreen',\n  DECIDUOUS: 'Deciduous',\n  CONIFEROUS: 'Coniferous',\n  ADVENTITIOUS:'Adventitious',\n  NYCTINASTY:'Nyctinasty',\n  XEROMORPHIC: 'Xeromorphic',\n  SUCCULENT: 'Succulent',\n  DROUGHT_TOLERANT: 'Drought tolerant',\n  FIRE_TOLERANT: 'Fire tolerant',\n  FIRE_RESISTANT: 'Fire resistant',\n  POLLUTION_TOLERANT: 'Pollution tolerant',\n  PH_TOLERANT: 'pH tolerant',\n  SALT_TOLERANT: 'Salt tolerant',\n  FROST_TOLERANT: 'Frost tolerant',\n  HEAT_TOLERANT: 'Heat tolerant',\n  NITROGEN_TOLERANT: 'Nitrogen tolerant',\n  HEAVY_METAL_TOLERANT: 'heavy metal tolerant',\n  ACID_RAIN_TOLERANT: 'Acid rain tolerant',\n  COMPACT_SOIL_TOLERANT: 'Compact soil tolerant',\n  FLORAL_SCENT: 'Floral scent',\n  AROMATIC: 'Aromatic',\n  MONOCARPIC: 'Monocarpic',\n  POLYCARPIC: 'Polycarpic',\n  PYROPHYTIC: 'Pyrophytic',\n  SEROTINOUS: 'Serotinous',\n  STYPTIC: 'Styptic',\n  BIOLUMINESCENCE: 'Bioluminescence',\n  type: 'physiology',\n  name: 'physiology'\n  },\n  collective: {\n  help: 'What is the term for a collective of this species?',\n  SOUNDER: 'Sounder',\n  SLOTH: 'Sloth',\n  MURMURATION: 'Murmuration',\n  PACK: 'Pack',\n  type: 'collective',\n  name: 'collective'\n  },\n  ecology: {\n  DIGGING: 'Digging',\n  SCRAPING: 'Scraping',\n  ROOTING: 'Rooting',\n  SCAVENGING: 'Scavenging',\n  type: 'ecology',\n  name: 'ecology'\n  },\n  characteristic: {\n  help: 'Which characteristic/s does this species display?',\n  PERENNIAL: 'Perennial',\n  ANNUAL: 'Annual',\n  BIENNIAL: 'Biennial',\n  HERBACEOUS: 'Herbaceous',\n  DIOECIOUS: 'Dioecious',\n  MONOECIOUS: 'Monoecious',\n  SYNOECIOUS: 'Synoecious',\n  PERFECT: 'Perfect',\n  COMPLETE: 'Complete',\n  DICOTYLEDON: 'Dicot',\n  MONOCOTYLEDON: 'Monocot',\n  CAULIFLORY: 'Cauliflory',\n  RAMIFLORY: 'Ramiflory',\n  PUBESCENT: 'Pubescent',\n  CHAMAEPHYTE: 'Chamaephyte',\n  FIBROUS_ROOT_SYSTEM: 'Fibrous root system',\n  TAPROOT_SYSTEM: 'Taproot system',\n  KIN_SELECTION: 'Kin selection',  \n  BROADLEAF: 'Broadleaf',\n  AERIAL_ROOTS: 'Aerial roots',\n  EPICORMIC_ROOTS: 'Epicormic shoots',\n  BASAL_ROOTS: 'Basal shoots',\n  RUNNER: 'Runner',\n  CLIMBER: 'Climber',\n  BUTTRESS_ROOT: 'Buttress root',\n  MONOPODIAL: 'Monopodial',\n  APICAL_DOMINANCE: 'Apical dominance',\n  POLYMORPHIC: 'Polymorphic',\n  CRYPTIC_SPECIES_COMPLEX: 'Cryptic species complex',  \n  RHIZOMORPHS: 'Rhizomorphs',\n  GEOPHYTE: 'Geophyte',\n  RICTAL_BRISTLES: 'Rictal bristles',\n  DEHISCENCE: 'Dehiscence',\n  EXPLOSIVE_DEHISCENCE: 'Explosive dehiscence',\n  RESIN_CANAL: 'Resin canal',\n  APOSEMATIC: 'Aposematic'\n  },\n  climate: {\n  HOT: 'Hot',\n  DRY: 'Dry',\n  TEMPERATE: 'Temperate',\n  COOL: 'Cool',\n  TROPICAL: 'Tropical',\n  CONTINENTAL: 'Continental',\n  DROUGHT_TOLERANT: 'Drought-tolerant',\n  type: 'climate',\n  name: 'climate'\n  },\n  pollination: {\n  ALLOGAMY: 'Allogamy',\n  ANEMOPHILY: 'Anemophily',\n  HYDROPHILY: 'Hydrophily',\n  ENTOMOPHILY: 'Entomophily',\n  AMBOPHILY: 'Ambophily',\n  MELITTOPHILY: 'Melittophily',\n  PSYCHOPHILY: 'Psychophily',\n  PHALAENOPHILY: 'Phalaenophily',\n  SONICATION: 'Sonication',\n  GENERALISED_SYNDROME: 'Generalised syndrome',\n  CLEISTOGAMY: 'Cleistogamy'\n  },\n  stipeCharacter: {\n  RING: 'Ring',\n  RING_AND_VOLVA: 'ring and volva',\n  BARE: 'Bare',\n  NA: 'N/A',\n  SHORT: 'short',\n  STUMPY: 'stumpy',\n  CLUB_LIKE: 'Club-like',\n  WARTS: 'warts',\n  HOLLOW: 'hollow',\n  PRUINOSE: 'pruinose',\n  PARTIAL_VEIL: 'Partial veil',\n  type: 'stipeCharacter',\n  name: 'stipe character'\n  },\n  stemCharacter: {\n    HOLLOW: 'hollow',\n    TERETE: 'terete',\n    HAIRY: 'Hairy',\n    GLAUCOUS: 'Glaucous',\n    FARINOSE: 'Farinose',\n    SCURFY: 'Scurfy',\n    VISCOUS: 'Viscous',\n    PUNCTATE: 'Punctate',\n    PAPILLATE: 'Papillate',\n    TUBERCULATE: 'Tuberculate',\n    RUGOSE: 'Rugose',\n    GLABROUS: 'Glabrous',\n    PUBESCENT: 'Pubescent',\n  },\n  gillAttachment: {\n    ADNATE: 'Adnate',\n    ADNEXED: 'Adnexed',\n    DECURRENT: 'Decurrent',\n    EMARGINATE: 'Emarginate',\n    FREE: 'Free',\n    Seceding: 'Seceding',\n    SINUATE: 'Sinuate',\n    SUBDECURRENT: 'Subdecurrent',\n    NA: 'N/A',\n    type: 'gillAttachment',\n    name: 'gill attachment'\n  },\n  grouping: {\n    LARGE_GROUPS: 'large groups',\n    CLUSTERS: 'clusters',\n    LARGE_CLUSTERS: 'large clusters',\n    SCATTERED_CLUSTERS: 'scattered clusters',\n    FAIRY_RINGS: 'fairy rings',\n    GREGARIOUS: 'gregarious',\n    NUMEROUS: 'numerous',\n    type: 'grouping',\n    name: 'grouping'\n  },\n  propagation: {\n    RHIZOMES: 'Rhizomes',\n    SEEDS: 'Seeds',\n    SUCKERS: 'Suckers',\n    STOLONS: 'Stolons',\n    BULBS: 'Bulbs',\n    TUBERS: 'Tubers',\n    CORMS: 'Corms',\n    PLANTLETS: 'Plantlets',\n    KEIKIS: 'Keikis',\n    APOMIXIS: 'Apomixis',\n    type: 'propagation',\n    name: 'propagation'\n  },\n  seedDispersal: {\n    AUTOCHORY: 'autochory',\n    ANEMOCHORY: 'anemochory',\n    HYDROCHORY: 'Hydrochory',\n    ZOOCHORY: 'Zoochory',\n    ANTHROPOCHORY: 'Anthropochory',\n  },\n  exposure: {\n    FULL_SUN: 'Full sun',\n    PARTIAL_SUN: 'Partial Sun',\n    PARTIAL_SHADE: 'Partial Shade',\n    SHADE: 'shade'\n  },\n  nutType: {\n    ACORN: 'acorn',\n    HAZELNUT: 'hazelnut',\n    CHESTNUT: 'chestnut',\n  },\n  surface: {\n    GLAUCOUS: 'Glaucous',\n    FARINOSE: 'Farinose',\n    SCURFY: 'Scurfy',\n    VISCOUS: 'Viscous',\n    PUNCTATE: 'Punctate',\n    PAPILLATE: 'Papillate',\n    TUBERCULATE: 'Tuberculate',\n    RUGOSE: 'Rugose',\n    GLABROUS: 'Glabrous',\n    PUBESCENT: 'Pubescent',\n    TOMENTOSE: 'tomentose',\n  },\n  texture: {\n    LEATHERY: 'Leathery',\n    FLESHY: 'Fleshy',\n    GLOSSY: 'Glossy',\n    WOOLY: 'Wooly',\n    TOMENTOSE: 'tomentose',\n    SCALY: 'Scaly',\n    ROUGH: 'Rough',\n    SMOOTH: 'Smooth',\n    VELVETY: 'Velvety',\n    HAIRY: 'Hairy',\n    PUBESCENT: 'Pubescent',\n  },\n  treeShape: {\n    help: \"Which descrption is the best match for this tree?\",\n    COLUMNAR: 'Columnar',\n    OPEN_HEAD_IRREGULAR: 'Open head irregular',\n    WEEPING: 'Weeping',\n    PYRAMIDAL: 'Pyramidal',\n    GLOBE: 'Globe',\n    FASTIGIATE: 'Fastigiate',\n    VASE: 'Vase',\n    HORIZONTAL_SPREADING: 'Horizontal spreading',\n    NARROW_DOMED: 'Narrow domed'\n  },\n  crownShape: {\n    OVOID_CONIC: 'Ovoid-conic',\n    CONIC: 'Conic',\n    DOMED: 'Domed',\n    SPIRE_LIKE: 'Spire-like',\n    SLENDER: 'Slender'\n  },\n  barkType: {\n    SMOOTH: 'Smooth',\n    LENTICELS: 'Lenticels',\n    PEELING_STRIPS: 'Peeling strips',\n    VERTICAL_CRACK: 'Vertical cracks',\n    VERTICAL_STRIPS: 'Vertical strips',\n    SCALES: 'Scales',\n    PLATES: 'Plates',\n    INTERSECTING_RIDGES: 'Intersecting ridges',\n    UNINTERRUPTED_RIDGES: 'Uninterrupted ridges',\n    RIDGES_BROKEN_HORIZONTALLY: 'Ridges broken horizontally',\n    PAPER_LIKE: 'Paper-like',\n    SQUARE_CRACKED: 'Square-cracked',\n    RESINOUS: 'Resinous',\n    THICK: 'Thick'\n  },\n  coneShape: {\n    BARREL_SHAPED: 'Barrel-shaped',\n    GLOBULAR: 'Globular'\n  },\n  leafVenation: {\n    ARCUATE: 'Arcuate',\n    DICHOTOMOUS: 'Dichotomous',\n    LONGITUDINAL: 'Longitudinal',\n    PARALLEL: 'Parallel',\n    PINNATE: 'Pinnate',\n    RETICULATE: 'Reticulate',\n    ROTATE: 'Rotate',\n    TRANSVERSE: 'Transverse',\n  },\n  flowerShape: {\n    TRUMPET_SHAPED: 'Trumpet-shaped',\n    BILABIATE: 'Bilabiate',\n    REGULAR: 'Regular',\n    ACTINOMORPHIC: 'Actinomorphic',\n    ZYGOMORPHIC: 'Zygomorphic'\n  },\n  branchArrangement: {\n    HORIZONTAL: 'Horizontal',\n    WHORLS: 'Whorls'\n  },\n  leafFeatures: {\n    BLUNT_TIPS: 'Blunt tips',\n    STOMATAL_LINES: 'Stomatal lines',\n    DROOPING: 'Drooping'\n  },\n  leafFolding: {\n    CARINATE: 'Carinate',\n    CONDUPLICATE: 'Conduplicate',\n    CUCULLATE: 'Cucullate',\n    INVOLUTE: 'Involute',\n    PLICATE: 'Plicate',\n    REDUPLICATE: 'Reduplicate',\n    REVOLUTE: 'Revolute',\n    SUPERVOLUTE: 'Supervolute',\n  },\n  mushroomGroup: {    \n    MYCOTROPHS: 'Mycotrophs',\n    POLYPORES: 'Polypores',\n    BOLETES: 'Boletes',\n    PUFFBALLS: 'Puffballs',\n    GILLED_MUSHROOMS: 'Gilled Mushrooms',\n    CHANTERELLES_AND_TRUMPETS: 'Chanterelles and Trumpets',\n    TOOTHED_MUSHROOMS: 'Toothed Mushrooms',\n    STINKHORNS: 'Stinkhorns',\n    CUP_FUNGI: 'Cup Fungi',\n    BIRDS_NEST_FUNGI:'Bird\\'s Nest Fungi',\n    TRUE_MORELS_AND_VERPAS: 'True Morels and Verpas',\n    FALSE_MORELS: 'False Morels',\n    SADDLES: 'Saddles',\n    JELLY_FUNGI: 'Jelly Fungi',\n    CLUBS_AND_CORALS: 'Clubs and Corals',\n    CRUST_FUNGI: 'Crust Fungi'\n  },\n  units: [\n    { lifeSpan: [ 'DD', 'MM', 'YY'] },\n    { gestation: [ 'DD', 'MM', 'YY'] },\n    { weaning: [ 'DD', 'MM', 'YY'] },\n    { germination: [ 'DD', 'WW', 'MM', 'YY'] },\n    { height: [ 'm', 'cm', 'mm'] },\n    { diameter: [ 'm', 'cm', 'mm'] },\n    { circumference: [ 'm', 'cm', 'mm'] },\n    { trunkDiameter: [ 'm', 'cm', 'mm'] },\n    { capDiameter: [ 'm', 'cm', 'mm'] },\n    { umbelDiameter: [ 'cm', 'mm'] },\n    { capWidth: [ 'm', 'cm', 'mm'] },\n    { infructescenceWidth: [ 'm', 'cm', 'mm'] },\n    { width: [ 'm', 'cm', 'mm'] },\n    { breadth: [ 'm', 'cm', 'mm'] },\n    { capHeight: [ 'm', 'cm', 'mm'] },\n    { shelfWidth: [ 'm', 'cm', 'mm'] },\n    { shelfThickness: [ 'm', 'cm', 'mm'] },\n    { length: [ 'm', 'cm', 'mm'] },\n    { leafLength: [ 'm', 'cm', 'mm'] },\n    { awnLength: [ 'cm', 'mm'] },\n    { infructescenceLength: [ 'm', 'cm', 'mm'] },\n    { juvenileLeafLength: [ 'm', 'cm', 'mm'] },\n    { leafWidth: [ 'm', 'cm', 'mm'] },\n    { petalLength: [ 'cm', 'mm'] },\n    { petalWidth: [ 'cm', 'mm'] },\n    { petioleLength: [ 'cm', 'mm'] },\n    { bractLength: [ 'cm', 'mm'] },\n    { fruitWidth: [ 'cm', 'mm'] },\n    { fruitLength: [ 'cm', 'mm'] },\n    { fruitDiameter: [ 'cm', 'mm'] },\n    { fruitHeight: [ 'cm', 'mm'] },\n    { flowerDiameter: [ 'cm', 'mm'] },\n    { flowerLength: [ 'cm', 'mm'] },\n    { coneDiameter: [ 'cm', 'mm'] },\n    { coneLength: [ 'cm', 'mm'] },\n    { maleConeLength: [ 'cm', 'mm'] },\n    { femaleConeLength: [ 'cm', 'mm'] },\n    { bulbWidth: [ 'cm', 'mm'] },\n    { coneWidth: [ 'cm', 'mm'] },\n    { maleConeWidth: [ 'cm', 'mm'] },\n    { femaleConeWidth: [ 'cm', 'mm'] },\n    { stalkHeight: [ 'm', 'cm', 'mm'] },\n    { stemHeight: [ 'm', 'cm', 'mm'] },\n    { scapeHeight: [ 'm', 'cm', 'mm'] },\n    { stemDiameter: [ 'm', 'cm', 'mm'] },\n    { stipeLength: [ 'm', 'cm', 'mm'] },\n    { tailLength: [ 'm', 'cm', 'mm'] },\n    { leafletLength: [ 'cm', 'mm'] },\n    { leafletWidth: [ 'cm', 'mm'] },\n    { queenLength: [ 'cm', 'mm'] },\n    { queenWingspan: [ 'cm', 'mm'] },\n    { workerLength: [ 'cm', 'mm'] },\n    { workerWingspan: [ 'cm', 'mm'] },\n    { maleLength: [ 'cm', 'mm'] },\n    { maleWingspan: [ 'cm', 'mm'] },\n    { stipeWidth: [ 'm', 'cm', 'mm'] },\n    { wingSpan: [ 'm', 'cm', 'mm'] },\n    { tongueLength: [ 'cm', 'mm'] },\n    { phValue: ['pH']},\n    { weight: [ 'g', 'kg']},\n    { queenWeight: [ 'g']},\n    { workerWeight: [ 'g']},\n    { maleWeight: [ 'g']},\n  ],\n};","import { utils } from 'utils/utils';\nimport { enums } from 'admin/api/enums';\nimport { firebaseConfig } from 'api/firebase/credentials';\nimport { questions } from 'api/firebase/questions';\n\nfirebase.initializeApp(firebaseConfig);\n\nconst storage = firebase.storage();\n\nconst db = firebase.firestore();\n\nconst getSpeciesWhere = async props => {\n\n    try {\n        const { key, operator, value, limit } = props;\n\n        let speciesRef = limit\n                        ? db.collection(`species`).where(key, operator, value).limit(limit)\n                        : db.collection(`species`).where(key, operator, value);\n\n        const querySnapshot = await speciesRef.get();\n\n        const docs = [];\n\n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n\n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesWhere');\n    }\n};\n  \nconst getSpecies = async props => {\n    const item = await getSpeciesWhere(props);\n    return item;\n};\n\nconst getSpeciesNames = async () => {\n\n    try {\n        const speciesPropertiesRef = db.collection(`species`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await speciesPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesNames');\n    }\n};\n\nconst getTaxaNames = async () => {\n\n    try {\n        const taxaPropertiesRef = db.collection(`taxa`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await taxaPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n    } catch(e) {\n      // logAPIError(e, 'getTaxaNames');\n    }\n};\n\nconst getSpeciesByIconicTaxon = async (item, number = 6) => {\n\n    const { iconicTaxon, lichen: isLichen, eolId } = item;\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    const randomId = getRandomId();\n    \n    if(isLichen) {\n        querySnapshot = await species.where('lichen', '==', true).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    } else {\n        querySnapshot = await species.where('iconicTaxon', '==', iconicTaxon.toLowerCase()).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    }\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getSpeciesByName = async (itemName, force = false) => {\n\n    if(!itemName) return '';\n\n    const items = await getSpecies({ key:'name', operator:'==', value:itemName });\n    \n    return items[0];\n};\n\nconst getTaxaWhere = async props => {\n\n    const { language, key, operator, value, limit } = props;\n  \n    const taxaRef = limit\n                        ? db.collection(`taxa_en`).where(key, operator, value).limit(limit)\n                        : db.collection(`taxa_en`).where(key, operator, value);\n  \n    const querySnapshot = await taxaRef.get();\n  \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return await docs;\n};\n  \nconst getFamiliesByIconicTaxon = async (iconicTaxonRank, iconicTaxonValue, isLichen, config) => {\n    return await getTaxaWhere({ language: config.language, key: 'iconicTaxon', operator: '==', value: iconicTaxonValue, limit: 7 });\n};\n\nconst getTaxonByName = async (config, name) => {\n\n    try {\n                \n        let taxon = {};\n\n        const taxaRef = db.collection(`taxa_en`).where('name', '==', name);\n\n        const querySnapshot = await taxaRef.get();\n        \n        if(querySnapshot.docs.length > 0) {\n            querySnapshot.forEach(doc => {\n                taxon = doc.data();                                \n          });          \n        }\n\n        return taxon;\n\n    } catch (e) {\n      // logAPIError(e, 'getTaxonByName');\n      return e;\n    }\n};\n\nconst getAsyncTraitsByNameAndCollection = async (name, collection = 'traits_en', language) => {\n\n    try {\n    \n    const languageTraits = db.collection(collection).where(\"name\", \"==\", name);\n  \n    const traits = await languageTraits.get();\n  \n    return await traits;\n    \n    } catch(e) {\n      // logAPIError(e, 'getAsyncTraitsByNameAndCollection');\n    }\n};\n\nconst getTraitsBySpeciesName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'traits_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getTraitsByTaxonName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'taxa_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getBirdsong = async xcID => {\n\n    const storageRef = storage.ref();\n    const url = await storageRef.child(`birdsong/${xcID}.mp3`).getDownloadURL();\n    return url;\n};\n\nconst getImage = async image => {\n\n  const storageRef = storage.ref();\n  const url = await storageRef.child(`images/${image}`).getDownloadURL();\n  return url;\n};\n\nconst addSpecies = async species => {\n\n    let docRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            return {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || ''\n            }\n        });\n    }\n\n    try {\n        docRef = await db.collection('species').add(species);\n    } catch(e) {\n      // logAPIError(e, 'addSpecies');\n    }\n\n    return docRef;\n};\n\nconst updateSpecies = async species => {\n\n    let speciesDocRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            const updatedSpecies = {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || '',\n            };\n            if(image.starred) {\n                updatedSpecies.starred = image.starred;\n            }\n            if(image.provider) {\n                updatedSpecies.provider = image.provider;\n            }\n            return updatedSpecies;\n        });\n    }\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update(species); \n\n};\n\nconst updateSpeciesNames = async (species, names) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update({names}); \n\n};\n\nconst getTraitValues = async () => {\n\n    const traits = enums;\n\n    return new Promise(resolve => resolve(enums));\n};\n\nconst deleteSpeciesByName = async name => {\n\n    const speciesRef = db.collection(`species`).where('name', '==', name);\n\n    speciesRef.get().then(function(querySnapshot) {\n        querySnapshot.forEach(function(doc) {\n        doc.ref.delete();\n        });\n    });\n};\n\nconst addTraits = async (name, trait, collection = 'traits_en') => {\n\n    let speciesTraitsRef;\n\n    try {\n\n        const querySnapshot = await db.collection(collection).where(\"name\", \"==\", name).get();\n        \n        if(querySnapshot.empty) {\n            trait.name = name;\n            return await db.collection(collection).add(trait);\n        } else {\n            querySnapshot.forEach(function(doc) {\n                speciesTraitsRef = doc.ref;\n            });\n\n            await speciesTraitsRef.update(trait); \n\n            return 'Update successful';\n        }\n    } catch(e) {\n      // logAPIError(e, 'addTraits');\n      return `Update failed. Error ${e.message}.`;\n    }\n};\n\nconst addSpeciesRelationship = async (type, traits) => {\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(traits.map(async trait => {\n\n                let speciesTraitsRef;\n        \n                const querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", trait.name).get();\n\n                if(querySnapshot.empty) {\n                    trait.name = name;\n                    speciesTraitsRef = await db.collection(`traits_en`).add(trait);\n                } else {\n                    querySnapshot.forEach(function(doc) {\n                        speciesTraitsRef = doc.ref;\n                    });\n                }\n\n                speciesTraitsRef.update({\n                    [type]: firebase.firestore.FieldValue.arrayUnion(trait.update)\n                });\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return 'Relationship added.';\n\n    } catch (e) {\n      // logAPIError(e, 'addSpeciesRelationship');\n      return e.message;\n    }\n\n};\n\nconst addPhotos = async (name, photos) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    try {\n        return speciesDocRef.update({\n            images: firebase.firestore.FieldValue.arrayUnion(...photos)\n        });\n    } catch (e) {\n      // logAPIError(e, 'addPhotos');\n      return e.message;\n    }\n\n};\n\nconst deleteSpeciesTraitField = async (name, field) => {\n\n    let querySnapshot, speciesTraitsRef;\n  \n    try {\n        try {\n          querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", name).get();\n      \n          querySnapshot.forEach(function(doc) {\n              speciesTraitsRef = doc.ref;\n          });\n        } catch(e) {\n          // logAPIError(e, 'deleteSpeciesTraitField unable to obtain reference to species trait');\n        }\n      \n        var removeField = speciesTraitsRef.update({\n            [field] : firebase.firestore.FieldValue.delete()\n        });\n  \n        return removeField;\n\n      } catch(e) {\n        // logAPIError(e, 'deleteSpeciesTraitField');\n    }    \n  };\n\nconst getRandomSpecies = async number => {\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    querySnapshot = await species.where(firebase.firestore.FieldPath.documentId(), operator, getRandomId()).limit(number).get();\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getDefinition = (term, glossary, required) => {\n\n    const terms = term.split(',');\n\n    let definitions = [];\n\n    for(let term of terms) {        \n        const definition = glossary.find(definition => definition.term.toLowerCase() === term.trim().toLowerCase() || definition.alt && definition.alt.toLowerCase() === term.trim().toLowerCase());\n        definitions.push(definition);\n    };\n    \n    return definitions.filter(definition => definition);\n};\n\nconst getTraitDefinitions = (glossary, required, trait) => {\n    \n    const traits = glossary.filter(entry => entry.trait).filter(entry => entry.trait.toLowerCase() === trait.toLowerCase());\n\n    return new Promise(resolve => resolve(traits));\n};\n\nconst addTaxon = async props => {\n\n    const { language, taxon } = props;\n  \n    let docRef;\n  \n    try {\n        docRef = await db.collection(`taxa_en`).add(taxon);\n        return 'Taxon saved.';\n    } catch(e) {\n      // logAPIError(e, 'addTaxon');\n    }\n  \n    return docRef;\n};\n\nconst getSpeciesInParallel = async species => {\n\n    try {\n        return Promise.all(species.map(sp => {                    \n            return firestore.getSpeciesByName(sp.name).then(async item => {\n                return await {                         \n                    ...item, description: sp.description || '', time: sp.time || 0, questionIds: sp.questionIds, quickId: sp.quickId || ''\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      // logAPIError(e, 'getSpeciesInParallel');\n    }\n};\n\nconst getSpeciesByNameInParallel = async itemNames => {\n    try {\n        return Promise.all(itemNames.map(name => {                    \n            return firestore.getSpeciesByName(name).then(async item => {\n                return await {                         \n                    ...item\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      // logAPIError(e, 'getSpeciesByNameInParallel');\n    }\n};\n\n// const getQuestionById = (id, name) => {\n\n//     return new Promise(resolve => resolve(questions.map(q => {\n//         if(parseInt(q.id) === parseInt(id)) {\n//             return {\n//                 ...q,\n//                 name: name\n//             }\n//         }\n//     })));\n// };\n\n\nconst addCollection = async (collection, user) => {\n\n    if(!user) return;\n\n    const collectionRef = await updateCollection(collection);\n\n    if(collectionRef) return;\n    \n    collection.user = user;\n\n    let docRef = null;\n  \n    try {\n        docRef = await db.collection('collections').add(collection);\n    } catch(e) {\n      // logAPIError(e, 'addCollection');\n    }\n  \n    return docRef;\n  };\n\n  const updateCollection = async collection => {\n\n    try {\n        collection.items = []; // we don't want to update items as we have the info we need in species; the rest we get at runtime\n\n        let docRef = null;\n\n        const querySnapshot = await db.collection(\"collections\").where(\"name\", \"==\", collection.name).get();\n        \n        querySnapshot.forEach(function(doc) {\n            docRef = doc.ref;\n        });\n\n        if(docRef) {\n            await docRef.update(collection);\n        }\n\n        return { message: 'Success', success : true };\n\n    } catch(e) {\n      // logAPIError(e, 'updateCollection');\n      return { message: 'Failure', details: e.message, success : false };\n    }\n\n};\n  \n  const getCollectionsWhere = async props => {\n  \n    const { key, operator, value, limit } = props;\n  \n    const collectionRef = limit\n      ? db.collection('collections').where(key, operator, value).limit(limit)\n        : key\n            ? db.collection('collections').where(key, operator, value)\n            : db.collection('collections');\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const getCollections = async => {\n    return getCollectionsWhere({});\n  };\n\n  const addQuestion = async question => {\n\n    let docRef;\n  \n    try {\n        docRef = await db.collection('questions').add(question);\n    } catch(e) {\n      // logAPIError(e, 'getCollectionsWhere');\n    }\n  \n    return docRef;\n  };\n  \n  const getQuestionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`questions`).where(key, operator, value)\n            : db.collection(`questions`);\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const addDefinition = async definition => {\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n\n    let docRef;\n\n    if(querySnapshot.empty) {\n\n        try {\n            docRef = await db.collection('glossary').add(definition);\n        } catch(e) {\n          // logAPIError(e, 'getQuestionsWhere');\n        }\n      \n        return docRef;        \n\n    } else {\n        throw 'That definition already exists!';\n    }\n\n  };\n  \n  const getDefinitionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`glossary`).where(key, operator, value)\n            : db.collection(`glossary`);\n\n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push({ ...doc.data(), id: doc.id });\n    });\n  \n    return docs;\n  };\n\n  const getDefinitionById = async id => {\n    return db.collection('glossary').doc(id).get().then(data => {\n        return { ...data.data(), id: data.id };\n    });\n  };\n\n  const getBatchDefinitionsById = async ids => {\n\n    const terms = [];\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(ids.map(async id => {\n\n                const term = await getDefinitionById(id);\n\n                terms.push(term);\n\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return terms;\n\n    } catch (e) {\n      // logAPIError(e, 'getBatchDefinitionsById');\n    }\n  }\n\n  const getDefinitionsByTaxa = taxa => {\n      return getDefinitionsWhere({\n        key: 'taxon',\n        operator: 'in', \n        value: taxa\n    });\n  };\n\n  const updateDefinition = async definition => {\n\n    let docRef;\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n    \n    querySnapshot.forEach(function(doc) {\n        docRef = doc.ref;\n    });\n\n    return await docRef.update(definition);\n  };\n\nexport const firestore = {\n\n    getSpecies,\n    getSpeciesNames,\n    getTaxaNames,\n    getSpeciesByName,\n    getSpeciesByIconicTaxon,\n    getFamiliesByIconicTaxon,\n    getTaxonByName,\n    getTraitsBySpeciesName,\n    getTraitsByTaxonName,\n    getBirdsong,\n    getImage,\n    getTraitValues,\n    getRandomSpecies,\n    getDefinition,\n    getSpeciesInParallel,\n    getSpeciesByNameInParallel,\n    getCollections,\n    getCollectionsWhere,\n    getQuestionsWhere,\n    \n    addSpecies,\n    addTraits,\n    addSpeciesRelationship,\n    addPhotos,\n    addTaxon,\n    addCollection,\n    addQuestion,\n    addDefinition,\n    \n    updateSpecies,\n    updateSpeciesNames,\n    updateCollection,\n    updateDefinition,\n  \n    deleteSpeciesByName,\n    deleteSpeciesTraitField,\n\n    getTraitDefinitions,\n    // getQuestionById,\n    getDefinitionsWhere,\n    getDefinitionsByTaxa,\n    getDefinitionById,\n    getBatchDefinitionsById\n};\n\nconst getRandomId = () => {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let autoId = '';\n    for (let i = 0; i < 20; i++) {\n        autoId += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return autoId;\n};","export const firebaseConfig = {\n    apiKey: \"AIzaSyCA5oDmWevmZy2Ginb9eKcIe72Titk7szM\",\n    authDomain: \"snapdragon-222014.firebaseapp.com\",\n    databaseURL: \"https://snapdragon-222014.firebaseio.com\",\n    projectId: \"snapdragon-222014\",\n    storageBucket: \"snapdragon-222014.appspot.com\",\n    messagingSenderId: \"947213844747\",\n    appId: \"1:947213844747:web:97c1a5e664a670de\"\n};\n","import { firestore } from 'api/firebase/firestore';\n\nexport const getLookalikeTests = async itemsInThisRound => {\n\n    const init = async () => {\n\n        if(itemsInThisRound === undefined) return new Promise(resolve => resolve([]));\n\n        return Promise.all(itemsInThisRound.map(async item => {\n            \n            const { question, answers, overrides } = await getLookalikeTest(item);\n\n            if(!question) return new Promise(resolve => resolve({}));\n\n            return {\n                item,\n                question,\n                answers,\n                overrides\n            }\n        }));\n    }\n\n    const tests = await init();\n\n    return tests;\n}\n\nexport const getItemLookalikes = async item => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return {};\n\n    const lookaliketraits = item.traits['lookalikes'];\n\n    if(!lookaliketraits) return new Promise(resolve => resolve([]));\n\n    let lookalikes = lookaliketraits.map(trait => trait.lookalike.name);\n\n    if(lookalikes.length === 0) return {};\n\n    // check current collection first?\n\n    const getLookalikes = async () => {\n        return Promise.all(lookalikes.map(async name => {\n            return await firestore.getSpeciesByName(name);\n        })\n    )};\n    \n    lookalikes = await getLookalikes();\n    lookalikes = lookalikes.filter(lookalike => lookalike);\n\n    return lookalikes;\n};\n\nconst getLookalikeTest = item => {\n\n    const init = async () => {\n\n        const lookalikes = await getItemLookalikes(item);\n\n        const question = lookalikes.length > 0 ? item.name : null;\n        const answers = [ question, ...lookalikes.map(item => item.name) ];\n\n\n        return { question, answers, overrides : { question: 'Avoid look-alikes', help: '(Pick one correct image)', binomial: 'Latin name', vernacularName: 'Common name', trait: { name: 'lookalikes', lookalikes } } };\n    };\n\n    return init();\n};\n","import * as R from 'ramda';\n\nexport const iconicTaxa = {\n\n    // kingdom\n    FUNGI: 'Fungi',\n    PLANTAE: 'Plants',\n\n    // phlyum\n    // MOLLUSCA: 'Mollusks',\n\n    // class\n    AVES: 'Birds',\n    AMPHIBIA: 'Amphibians',\n    REPTILIA: 'Reptilians',\n    MAMMALIA: 'Mammals',\n    INSECTA: 'Insects',\n    // ACTINOPTERYGII: 'Ray-finned fishes',\n    ARACHNIDA: 'Arachnids',\n\n    //order\n    LEPIDOPTERA: 'Lepidoptera'\n};\n\nexport const matchTaxonKey = (taxonomy, iconicTaxaKeys) => {\n    let taxon = { rank: '', value: '' };\n    if(!taxonomy) return taxon;\n    if(taxonomy.order && R.contains(taxonomy.order.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'order', value: taxonomy.order.toLowerCase() };\n    if(taxon.value === '' && taxonomy.class && R.contains(taxonomy.class.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'class', value: taxonomy.class.toLowerCase() };\n    if(taxon.value === '' && taxonomy.kingdom && R.contains(taxonomy.kingdom.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'kingdom', value: taxonomy.kingdom.toLowerCase() };\n\n    return taxon;\n}\n\nexport const matchTaxon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return false;\n    let iconicTaxaKeys = Object.keys(iconicTaxa).map(key => key.toLowerCase());\n    const taxon = matchTaxonKey(taxonomy, iconicTaxaKeys);\n    return taxon;\n};\n\nexport const findRankByIconicTaxon = (taxonomy, iconicTaxon) => {\n    return Object.keys(taxonomy).find(key => taxonomy[key].toLowerCase() === iconicTaxon.toLowerCase());\n};\n\nexport const matchIcon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return '';\n    const rank = matchTaxon(taxonomy, iconicTaxa).value;\n    if(!rank) return ''\n    return matchRank(rank);\n}\n\nexport const matchRank = rank => {\n    let icon;\n    switch(rank.toLowerCase()) {\n        case 'aves':\n            icon = 'fas fa-dove';\n            break;\n        case 'lepidoptera':\n            icon = 'fas fa-barcode';\n            break;\n        case 'amphibia':\n            icon = 'fas fa-frog';\n            break;\n        case 'mammalia':        \n        case 'actinopterygii':\n            icon = 'fas fa-paw';\n            break;\n        case 'reptilia':\n            icon = 'fas fa-registered';\n            break;\n        case 'insecta':\n        case 'arachnida':\n            icon = 'fas fa-bug';\n            break;\n        case 'fungi':\n            icon = './icons/mushroom.svg';\n            break;\n        case 'plantae':\n            icon = 'fas fa-leaf';\n            break;\n    }\n    return icon;\n}","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nexport const getDefinitionTests = itemsInThisRound => {\n    \n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        return getDefinitionTest(item);\n\n    });\n\n    return tests;\n};\n\nconst getDefinitionTest = async item => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const number = config.isPortraitMode ? 4 : 4;\n\n    const taxon = matchTaxon(item.taxonomy, iconicTaxa).value;\n\n    let definitions = glossary.filter(definition => R.contains(definition.taxon, [ taxon, 'common' ]));\n\n    definitions = utils.shuffleArray(definitions);\n\n    const term = item.terms \n                    ? utils.shuffleArray(item.terms)[0] \n                    : item.genus\n                        ? item.genus.terms\n                            ? item.genus.terms[collection.itemIndex] \n                                ? item.genus.terms[collection.itemIndex] \n                                    : item.family\n                                    ? item.family.terms\n                                        ? utils.shuffleArray(item.family.terms)[0]\n                                        : null\n                                    : null\n                            : null\n                        : null;\n                    \n\n    const definition = !!term \n        ? definitions.find(definition => definition.term.toLowerCase() === term.toLowerCase())\n        : definitions[0];\n\n    const alternatives = R.take(number-1, R.take(number, utils.shuffleArray(definitions)).filter(d => d.term.toLowerCase() !== definition.term.toLowerCase())).map(d => utils.capitaliseFirst(d.definition));\n    \n    const question = definition.definition;\n    const answers = utils.shuffleArray([question, ...alternatives]);\n    const help = config.isLandscapeMode ? 'Select the correct answer' : 'Select correct answer';\n\n    return { question, answers, overrides : { question: definition.term, help, binomial: item.name, vernacularName: item.vernacularName } };\n};","import * as R from 'ramda';\n\nimport { getTraitTests } from 'snapdragon-engine/bonus/tests/trait-test';\nimport { getBirdsongTests } from 'snapdragon-engine/bonus/tests/birdsong-test';\nimport { getLookalikeTests } from 'snapdragon-engine/bonus/tests/lookalike-test';\nimport { getDefinitionTests } from 'snapdragon-engine/bonus/tests/definition-test';\n\nconst getTests = async (collection, itemIndices, bonusLayouts, lessonName, levelName) => {\n\n    const itemsInThisRound = collection.items.map((item, index) => {\n        if(R.contains(index, itemIndices)) {\n            return { ...item, itemIndex: index }\n        } else return null;        \n    }).filter(item => item);\n\n    const addLayoutToTest = traitTests => {\n        const lessonReadyTests = traitTests.map(traitTest => {             \n            traitTest.itemIndex = traitTest.item ? traitTest.item.itemIndex : 0; \n            traitTest = { ...traitTest, ...layout, lessonName, levelName };            \n            return traitTest;\n        });\n        return lessonReadyTests;\n    };\n\n    const getTraitTypeTests = itemsInThisRound => {\n        return new Promise(resolve => resolve(getTraitTests(itemsInThisRound)));\n    };\n\n    const getTraitTypeBirdsongTests = (itemsInThisRound, collection) => {\n        return new Promise(resolve => resolve(getBirdsongTests(itemsInThisRound, collection)));\n    };\n\n    const getTraitTypeLookalikeTests = itemsInThisRound => {\n        return getLookalikeTests(itemsInThisRound);     \n    };\n\n    const getDefinitionTypeTests = itemsInThisRound => {\n        return getDefinitionTests(itemsInThisRound);\n    };\n\n    let traitTests = [], birdsongTests = [], lookalikeTests = [], definitionTests = [];\n\n    let layout = bonusLayouts.find(layout => layout.name === \"trait-property-match\");\n\n    if(layout) {\n\n        if(layout.types) {\n\n            const getResolvedPromises = async () => {\n            const promises = await layout.types.map(async type => {\n                switch(type) {\n                    case 'traits':\n                        return getTraitTypeTests(itemsInThisRound);\n                    case 'song':\n                        return getTraitTypeBirdsongTests(itemsInThisRound, collection);\n                    case 'lookalikes':\n                        return getTraitTypeLookalikeTests(itemsInThisRound);\n                    case 'definition':                        \n                        return getDefinitionTypeTests(itemsInThisRound);\n                }\n            });\n\n            const testGroups = await Promise.all(promises);\n\n            const tests = testGroups.map(group => {\n                group = group.filter(g => g.question);\n                return addLayoutToTest(group);\n            });\n\n            return tests;\n        };\n\n        traitTests = await getResolvedPromises();\n\n        } else {\n            traitTests = getTraitTypeTests(itemsInThisRound);\n            birdsongTests = getTraitTypeBirdsongTests(itemsInThisRound, collection);            \n            lookalikeTests = getTraitTypeLookalikeTests(itemsInThisRound);\n            definitionTests = getDefinitionTypeTests(itemsInThisRound);\n        }\n    }\n\n    return R.flatten(traitTests);\n};\n\nexport const bonusHandler = {\n    getTests\n};","import * as R from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\n\nconst getItemLayouts = async itemQuestions => {\n    if(!itemQuestions.questionIds) return new Promise(resolve => resolve(null));\n    // return Promise.all(itemQuestions.questionIds.map(async id => await firestore.getQuestionById(id, itemQuestions.name)));\n};\n\nconst getLayouts = async (collection, roundItemNames) => {\n\n    if(collection.species) {\n    \n        const species = collection.species.filter(sp => R.contains(sp.name, roundItemNames));\n        const speciesQuestions = species.filter(sp => sp.questions);\n\n        if(speciesQuestions.length > 0) {\n            return Promise.all(speciesQuestions.map(sq => sq.questions));\n        }\n\n        const itemsQuestions = collection.items.filter(i => R.contains(i.name, roundItemNames)).map(i => { return { name: i.name, questionIds: i.questionIds }});\n        \n        if(itemsQuestions) {\n            const promises = itemsQuestions.map(async (itemQuestions) => {\n                if(itemQuestions.questionIds) return await getItemLayouts(itemQuestions);\n            });\n            return await Promise.all(promises);\n        } else {\n            return new Promise(resolve => resolve(null));\n        }\n    } else {\n        return [];\n    }\n}\n\nexport const providerHandler = {\n    getLayouts\n};","import { store } from 'redux/store';\nimport { types } from 'redux/actions/action-types';\n\nconst makeActionCreator = action => {\n    return function (value, meta) {\n      return { \n        type: action,\n        data: value,\n        meta: meta\n      }\n    }\n  }\n\nconst changeLessonPlans = makeActionCreator(types.CHANGE_LESSON_PLANS);\nconst changeLessonPlan = makeActionCreator(types.CHANGE_LESSON_PLAN);\nconst nextLesson = makeActionCreator(types.NEXT_LESSON);\nconst updateScore = makeActionCreator(types.UPDATE_SCORE);\nconst updateTraitScore = makeActionCreator(types.UPDATE_TRAIT_SCORE);\nconst nextLayout = makeActionCreator(types.NEXT_LAYOUT);\nconst nexItem = makeActionCreator(types.NEXT_ITEM);\nconst endRevision = makeActionCreator(types.END_REVISION);\nconst updateHistory = makeActionCreator(types.UPDATE_HISTORY)\nconst newCollection = makeActionCreator(types.SET_ACTIVE_COLLECTION);\nconst updateCollection = makeActionCreator(types.UPDATE_COLLECTION);\nconst resetCollection = makeActionCreator(types.RESET_COLLECTION);\nconst updateCollections = makeActionCreator(types.UPDATE_COLLECTIONS);\nconst changeCollectionItems = makeActionCreator(types.UPDATE_COLLECTION_ITEMS);\nconst nextRound = makeActionCreator(types.NEXT_ROUND);\nconst nextLevel = makeActionCreator(types.NEXT_LEVEL);\nconst updateConfig = makeActionCreator(types.UPDATE_CONFIG);\nconst stopStartLesson = makeActionCreator(types.STOP_START_LESSON);\nconst selectCollection = makeActionCreator(types.SELECT_COLLECTION);\nconst traitValuesHandler = makeActionCreator(types.UPDATE_LANGUAGE);\nconst updateEnums = makeActionCreator(types.UPDATE_ENUMS);\nconst updateUser = makeActionCreator(types.UPDATE_USER);\nconst updateLesson = makeActionCreator(types.UPDATE_LESSON);\nconst saveLesson = makeActionCreator(types.SAVE_LESSON);\nconst removeSavedLesson = makeActionCreator(types.REMOVE_LESSON);\nconst updateVideoPlayer = makeActionCreator(types.UPDATE_VIDEO_PLAYER);\nconst createQuickFire = makeActionCreator(types.CREATE_QUICKFIRE);\nconst updateQuickFire = makeActionCreator(types.UPDATE_QUICKFIRE);\nconst createGlossary = makeActionCreator(types.CREATE_GLOSSARY);\nconst clickEvent = makeActionCreator(types.CLICK_EVENT);\n\nconst boundchangeLessonPlan = data => store.dispatch(changeLessonPlan(data));\nconst boundchangeLessonPlans = data => store.dispatch(changeLessonPlans(data));\nconst boundNextLesson = data => store.dispatch(boundAsyncNextLesson(data));\n\nconst boundAsyncNextLesson = func => {\n  return function(dispatch) {\n    return func.then(response => {\n      return dispatch(nextLesson(response));\n    })\n  }  \n};\n\nconst boundUpdateScore = data => store.dispatch(updateScore(data));\nconst boundUpdateTraitScore = data => store.dispatch(updateTraitScore(data));\nconst boundNextLayout = data => store.dispatch(nextLayout(data));\nconst boundNextItem = data => store.dispatch(nexItem(data,{delay:500}));\nconst boundEndRevision = data => store.dispatch(endRevision(data));\nconst boundUpdateHistory = data => store.dispatch(updateHistory(data));\nconst boundSetActiveCollection = data => store.dispatch(newCollection(data));\nconst boundUpdateCollection = data => store.dispatch(updateCollection(data));\nconst boundResetCollection = data => store.dispatch(resetCollection(data));\nconst boundUpdateCollections = data => store.dispatch(updateCollections(data));\nconst boundUpdateCollectionItems = data => store.dispatch(changeCollectionItems(data));\nconst boundNextRound = data => store.dispatch(nextRound(data));\nconst boundNextLevel = data => store.dispatch(nextLevel(data));\nconst boundUpdateConfig = data => store.dispatch(updateConfig(data));\nconst boundStopStartLesson = data => store.dispatch(stopStartLesson(data));\nconst boundSelectCollection = data => store.dispatch(selectCollection(data));\nconst boundUpdateLanguage = data => store.dispatch(traitValuesHandler(data));\nconst boundUpdateEnums = data => store.dispatch(updateEnums(data));\nconst boundUpdateUser = data => store.dispatch(updateUser(data));\nconst boundUpdateLesson = data => store.dispatch(updateLesson(data));\nconst boundSaveLesson = data => store.dispatch(saveLesson(data));\nconst boundRemoveSavedLesson = data => store.dispatch(removeSavedLesson(data));\nconst boundUpdateVideoPlayer = data => store.dispatch(updateVideoPlayer(data));\nconst boundCreateQuickFire = data => store.dispatch(createQuickFire(data));\nconst boundUpdateQuickFire = data => store.dispatch(updateQuickFire(data));\nconst boundCreateGlossary = data => store.dispatch(createGlossary(data));\nconst boundClickEvent = data => store.dispatch(clickEvent(data));\n\nexport const actions = {\n    boundchangeLessonPlans,\n    boundchangeLessonPlan,\n    boundNextLesson,\n    boundUpdateScore,\n    boundUpdateTraitScore,\n    boundNextItem,\n    boundNextLayout,\n    boundEndRevision,\n    boundUpdateHistory,\n    boundSetActiveCollection,\n    boundUpdateCollection,\n    boundResetCollection,\n    boundUpdateCollections,\n    boundUpdateCollectionItems,\n    boundNextRound,\n    boundNextLevel,\n    boundUpdateConfig,\n    boundStopStartLesson,\n    boundSelectCollection,\n    boundUpdateLanguage,\n    boundUpdateEnums,\n    boundUpdateLesson,\n    boundSaveLesson,\n    boundRemoveSavedLesson,\n    boundUpdateVideoPlayer,\n    boundUpdateUser,\n    boundCreateQuickFire,\n    boundUpdateQuickFire,\n    boundCreateGlossary,\n    boundClickEvent\n};","import * as R from 'ramda';\n\nconst show = (elem) => {\n    if(!elem) return;\n\telem.classList.add('is-visible');\n};\n\nconst hide = (elem) => {\n    if(!elem) return;\n\telem.classList.remove('is-visible');\n};\n\nconst toggle = (elem) => {\n    if(!elem) return;\n\telem.classList.toggle('is-visible');\n};\n\nconst hasClass = (elem, className) => {\n    if(!elem) return false;\n    const classArray = [ ...elem.classList ];\n    return R.contains(className, classArray);\n};\n\nconst removeClass = (elem, className) => {\n    if(hasClass(elem, className)) {\n        elem.classList.forEach(c => {\n            if(c === className) {\n                elem.classList.remove(c);\n            }\n        });\n    }\n};\n\nexport const elem = {\n    show, hide, toggle, hasClass, removeClass\n};","import * as R from 'ramda';\n\nexport const cleanText = text => {\n    return text.term ? text.term.toLowerCase() : text.toLowerCase().replace(/ /g,'');\n};\n\nexport const isAnswerEqualToQuestion = (question, answer) => {\n\n\n    const eqValues = R.compose(R.isEmpty, R.symmetricDifference);\n\n    return eqValues(cleanText(question), cleanText(answer));\n};\n\nconst isAnswerCorrect = score => {\n\n    let isCorrect;\n\n    if(score.answeredIndex) {\n        return parseInt(score.answeredIndex) === score.answerIndex;\n    }\n\n    score.answer = score.answer.trim();\n\n    isCorrect = isAnswerEqualToQuestion(score.question, score.answer);\n\n    // score.clue = score.clue ? score.clue.toLowerCase().replace(/ /g,'') : null;\n\n    // isCorrect = score.clue ? score.answer.indexOf(score.clue) > -1 : isCorrect;\n\n    switch(score.taxon) {\n        case 'vernacular':\n            score.names = score.names.map(name => name.toLowerCase());\n            if(score.names && score.names.length > 0) {\n                const alternativeIsCorrect = R.contains(score.answer, score.names);                \n                if(!isCorrect && alternativeIsCorrect) score.alternativeAccepted = true;\n                isCorrect = isCorrect || alternativeIsCorrect;\n            }\n        break;\n    }\n    return isCorrect;\n};\n\nconst isTraitAnswerCorrect = score => {\n    const doArraysHaveSameValues = R.compose(R.isEmpty, R.symmetricDifference);\n    return doArraysHaveSameValues(score.answer, score.question);\n};\n\nexport const markTest = test => {\n\n    const score = R.clone(test);\n\n    score.success = score.trait ? isTraitAnswerCorrect(score) : isAnswerCorrect(score);\n    score.colour  = score.success ? 'snap-success' : 'snap-alert';\n    \n    return score;\n};","import { Enum } from 'enumify';\n\nclass lessonState extends Enum {};\nlessonState.initEnum([\n    'CREATE_LESSON',\n    'BEGIN_LESSON',\n    'BEGIN_OR_RESUME_LESSON',\n    'PAUSE_LESSON', \n    'RESUME_LESSON',\n    'NEXT_ROUND',\n    'BEGIN_INTRO',\n    'REVIEW_SUMMARY',\n    'UPDATE_COLLECTION', // required? use set active collection\n    'GET_LESSON_PROGRESS',\n    'ADD_SPECIES_TO_COLLECTION',\n    'SAVE_LESSON_PROGRESS',\n    'RENDER_SPECIES_LIST',    \n]);\n\nclass navigation extends Enum {};\nnavigation.initEnum([\n    'LANDSCAPE_HOME', \n    'SETTINGS', \n    'PORTRAIT_HOME',\n    'GLOSSARY', \n    'EMAIL',\n    'INFO',\n    'LOGIN',\n    'LANGUAGE'\n]);\n\nclass taxon extends Enum {};\ntaxon.initEnum([\n    'KINGDOM',\n    'PHYLUM',\n    'ORDER',\n    'FAMILY',\n    'GENUS',\n    'SPECIES',\n]);\n\nclass guideOption extends Enum {};\nguideOption.initEnum([\n    'LOCATION',\n    'INAT',\n    'PICKER'\n]);\n\nclass nextStep extends Enum {};\nnextStep.initEnum([\n    'NEXT_ITEM',\n    'NEXT_LAYOUT',\n    'NEXT_LESSON',\n    'NEXT_ROUND',\n]);\n\nclass quickFireType extends Enum {};\nquickFireType.initEnum([\n    'DEFINITION',\n    'REVERSE_DEFINITION',\n    'TEXT_ENTRY'\n]);\n\nclass quickFireStep extends Enum {};\nquickFireStep.initEnum([\n    'GLOSSARY',\n    'FILTERS',\n    'QUESTIONS'\n]);\n\nclass userEvent extends Enum {};\nuserEvent.initEnum([\n    'DEFAULT',\n    'START_LESSON',\n    'START_LESSON_REVIEW',\n    'START_TERM_REVIEW',\n    'NAVIGATE_HOME',\n    'EDIT_LESSON',\n    'TOGGLE_SPECIES_LIST'\n]);\n\nexport const enums = {\n    lessonState,\n    navigation,\n    taxon,\n    guideOption,\n    nextStep,\n    quickFireType,\n    quickFireStep,\n    userEvent\n};","import * as R from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nconst getIsReviewingLesson = (userAction, config) => {\n\n    let isNotReviewingLesson = true;\n  \n    if (userAction) {\n        if (config.isLandscapeMode) {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name || userAction.name === enums.userEvent.TOGGLE_SPECIES_LIST.name);\n        }\n        else {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name);\n        }\n    }\n  \n    return !isNotReviewingLesson;\n};\n\nconst overrideLesson = (userAction, config) => {\n    return !getIsReviewingLesson(userAction, config);\n};\n\nconst purgeLesson = () => {\n    persistor.purge();\n    window.location.reload(true);\n};\n\nconst clearGuide = () => {\n    const config = store.getState().config;\n    config.guide = initialConfig.guide;\n    actions.boundUpdateConfig(config);\n};\n\nconst getCollectionToLoad = (currentCollection, collections, selectedLessonCollectionId)  => {\n\n    const id = parseInt(selectedLessonCollectionId);\n  \n    let resume = true;\n        resume = resume && currentCollection.id > 0;\n        resume = resume && currentCollection.id === id;\n  \n    const collection = resume ? currentCollection : collections.find(c => c.id === id);\n  \n    return collection;\n};\n\nconst getLatestCounter = collection => { \n    const { counter, lessons } = store.getState();\n    const log = counter.log;\n    const index = log ? log.index : \n                lessons.find(l => l.collection.id === collection.id)\n                    ? lessons.find(l => l.collection.id === collection.id).counter.index\n                    : counter.index;\n  \n    return { index };\n};\n\nconst getUserLessonState = (lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter) => {\n\n    let restoredLesson = lessons.find(l => l.name === collectionToLoad.name);\n\n    let lesson;\n  \n    if(restoredLesson) {\n      lesson = restoredLesson;\n      if(lesson.lesson.isNextRound) {\n        lesson.score = R.clone(progressState.score);\n      }\n    } else {\n      lesson = { \n        collection: collectionToLoad, \n        counter: { ...counter, index: 0 },\n        lesson: savedLesson || { currentRound: 1, rounds: 0, isNextRound: true },\n        layout: null,\n        history: null,\n        score: R.clone(progressState.score)\n      };\n    }\n\n    if(newLessonCounter) {\n        lesson.counter.isCustomLessonPausedOverride = true;\n    }\n\n    return lesson;\n};\n  \nexport const lessonStateHelper = {\n    getIsReviewingLesson,\n    overrideLesson,\n    purgeLesson,\n    clearGuide,\n    getCollectionToLoad,\n    getLatestCounter,\n    getUserLessonState\n};","// https://github.com/jcgregorio/stamp/wiki\n\nvar Stamp = Stamp || {};\n\n(function(ns) {\n\n  // Utilty object to capture the document context of the script\n  // tag that instantiated the Context. Useful for getting access to\n  // assetts in HTML Imports.\n  ns.Context = function() {\n    //this.doc = (document.currentScript||document._currentScript).ownerDocument;\n  };\n\n  // Import the element 'id' from the HTML Import into the current docuemnt.\n  ns.Context.prototype.import = function(id) {\n    return document.importNode(this.doc.querySelector('#'+id).content, true);\n  };\n\n  // Regex to grab double moustache'd content.\n  var re = /{{\\s([\\w\\.\\^]+)\\s}}/g;\n\n  // Returns 'state' after applying address, where address is an array of\n  // string.\n  //\n  // I.e. if the state is {a: {b: [9, 8, 7]}} then the address of [\"a\", \"b\",\n  // 0] would return 9.\n  function filterState(address, state) {\n    var mystate = state;\n    for (var i = 0, len = address.length; i < len; i++) {\n      var a = address[i];\n      if (a in mystate) {\n        mystate = mystate[a];\n      } else if (mystate.hasAttribute && mystate.hasAttribute(a)) {\n        mystate = mystate.getAttribute(a);\n      } else {\n        throw a + \" is not a valid property of \" + JSON.stringify(mystate);\n      }\n    }\n    return mystate;\n  }\n\n  // Replace the content in 'str' from [index, index+count) with 'add'.\n  function ssplice(str, index, count, add) {\n    return str.slice(0, index) + add + str.slice(index + count);\n  }\n\n  // Extracts an address path, i.e. [\"a\", \"b\", \"0\"] from the input string 's',\n  // such as from \"{{a.b.0}}\".\n  let match;\n  function addressOf(s) {\n    if ((match = re.exec(s)) != null) {\n      return match[1].split(\".\");\n    } else {\n      return null;\n    }\n  }\n\n  // Keeps expanding double moustache in the text content until there no more\n  // double moustache instances. Returns null if no templates were found,\n  // otherwise returns the expanded string.\n  function expandString(s, state) {\n    var match;\n    var matches = [];\n\n    // Flush re's cache of the last string it was parsing.\n    re.exec(\"\");\n    // Find all the matches in s.\n    while ((match = re.exec(s)) != null) {\n      matches.push(match);\n    }\n\n    for (var i = matches.length - 1; i >= 0; i--) {\n      match = matches[i];\n      var address = match[1].split(\".\");\n      var m = filterState(address, state);\n      s = ssplice(s, match.index, match[0].length, m);\n    }\n    if (matches.length) {\n      return s;\n    }\n    return null;\n  }\n\n  // Takes an array of nodes and returns an array of cloned nodes in the same\n  // order.\n  function cloneAllNodes(a) {\n    var clones = [];\n    for (var i = 0, len = a.length; i < len; i++) {\n      if (a[i].nodeName == \"TEMPLATE\") {\n        // Template nodes have their contents hoisted up to this level for expansion.\n        clones.push(a[i].content.cloneNode(true));\n      } else {\n        clones.push(a[i].cloneNode(true));\n      }\n    }\n    return clones;\n  }\n\n  // Append all the elements in 'nodes' as children of 'ele'.\n  function appendChildren(ele, nodes) {\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      ele.appendChild(nodes[i]);\n    }\n  }\n\n  // Removes all the children of 'ele'.\n  function removeChildren(ele) {\n    ele.innerHTML = \"\";\n  }\n\n  // Removes all the children of 'ele' and then adds 'nodes' as ele's\n  // children.\n  function replaceChildren(ele, nodes) {\n    ele.innerHTML = \"\";\n    appendChildren(ele, nodes);\n  }\n\n  // Expand all the double moustaches found in the node\n  // 'ele' and all its children against the data in 'state'.\n  //\n  // When descending into nested templates, i.e. a data-repeat- template then\n  // '^' is added to the child state as a way to access the data in the\n  // parent's scope.\n  function expand(ele, state) {\n    if (ele.nodeName === \"#text\") {\n      m = expandString(ele.textContent, state);\n      if (m != null) {\n        ele.textContent = m;\n      }\n      return ele;\n    }\n    if (!Array.isArray(ele)) {\n      ele = [ele];\n    }\n    for (var j = 0, len = ele.length; j < len; j++) {\n      var e = ele[j];\n      var processChildren = true;\n      if (e.nodeName === \"#text\") {\n        m = expandString(e.textContent, state);\n        if (m != null) {\n          e.textContent = m;\n        }\n      } else {\n        if (e.attributes != undefined) {\n          for (var i = e.attributes.length-1; i >= 0; i--) {\n            var attr = e.attributes[i];\n            if (attr.name.indexOf('data-repeat') === 0) {\n              processChildren = false;\n              var parts = attr.name.split('-');\n              if (parts.length !== 3 && parts.length !== 4) {\n                throw \"Repeat format is data-repeat-<name>[-<iterName>]. Got \" + attr.name;\n              }\n              var name = parts[2];\n              var iterName = parts[3];\n              var tpl = [];\n              while (e.firstChild) {\n                tpl.push(e.removeChild(e.firstChild));\n              }\n              var address = [attr.value];\n              if (attr.value.indexOf(\"}}\") !== -1) {\n                address = addressOf(attr.value);\n              }\n              if (address === null) {\n                throw attr.value + \" doesn't contain an address.\";\n              }\n              var childState = filterState(address, state);\n              var instanceState = {\n                \"^\": state,\n              };\n              if (Object.prototype.toString.call( childState) === '[object Array]') {\n                iterName = iterName || \"i\";\n                for (var k = 0; k < childState.length; k++) {\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] =  childState[k];\n                  instanceState[iterName] = k;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              } else {\n                iterName = iterName || \"key\";\n                var keys = Object.keys(childState).sort();\n                for (var m = 0; m < keys.length; m++) {\n                  var key = keys[m];\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] = childState[key];\n                  instanceState[iterName] = key;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              }\n              // Remove the data-repeat-* attribute.\n              e.removeAttribute(attr.name);\n            } else {\n              m = expandString(attr.value, state);\n              if (m != null) {\n                var name = attr.name;\n                // Strip trailing \"-\" from attribute names. This allows\n                // setting attributes like src on an img where you would't\n                // want the unexpanded value to be used by the browser.\n                if (name.charAt(name.length-1) == \"-\") {\n                  e.removeAttribute(attr.name);\n                  e.setAttribute(attr.name.slice(0, -1), m);\n                } else {\n                  attr.value = m;\n                }\n              }\n            }\n          }\n        }\n      }\n      if (processChildren) {\n        var childEle = e.firstChild;\n        while (childEle != null) {\n          var nextSibling = childEle.nextSibling;\n          if (childEle.nodeName == \"TEMPLATE\") {\n            // If this is a template we need to expand the content of the\n            // template node, then replace the template node with the expanded\n            // content.\n            var replacement = expand(childEle.content.cloneNode(true), state);\n            while (replacement[0].childNodes.length > 0) {\n              e.insertBefore(replacement[0].firstChild, childEle);\n            }\n            // Finally remove the original element.\n            e.removeChild(childEle);\n          } else {\n            expand(childEle, state);\n          }\n          childEle = nextSibling;\n        }\n      }\n    }\n    return ele;\n  };\n\n  // Expand the template 'ele' with 'state' and then replace all the children\n  // of 'target' with the expanded content.\n  function expandInto(target, ele, state) {\n    replaceChildren(target, expand(ele, state));\n  }\n\n  ns.appendChildren = appendChildren;\n  ns.expand = expand;\n  ns.expandInto = expandInto;\n})(Stamp);\n\nexport const renderTemplate = (context, content, parent, clone) => {\n    const contentClone = clone || document.importNode(content, true);    \n    var ctx = new Stamp.Context();\n    var expanded = Stamp.expand(contentClone, context);\n    Stamp.appendChildren(parent, expanded);\n};\n\n//https://github.com/jcgregorio/stamp/wiki","import { scaleImage } from 'ui/helpers/image-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport rightsAttributionTemplate from 'ui/screens/common/rights-attribution-template.html';\n\nexport const handleRightsAttribution = image => {\n\n    const template = document.createElement('template');\n          template.innerHTML = rightsAttributionTemplate;\n\n    let text;\n\n    switch(image.license) {\n        case 'http://creativecommons.org/licenses/publicdomain/':\n            text = 'CC PD';\n            break;\n        case 'http://creativecommons.org/licenses/by/2.0/':        \n            text = 'CC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/2.0/':\n            text = 'CC BY SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/2.0/':\n            text = 'CC BY NC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/2.0/':\n            text = 'CC BY NC-SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by/3.0/':        \n            text = 'CC 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/3.0/':\n            text = 'CC BY SA 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/3.0/':\n            text = 'CC BY NC-SA 3.0';\n            break;        \n        case 'http://creativecommons.org/licenses/by/4.0/':        \n            text = 'CC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/4.0/':\n            text = 'CC BY NC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/4.0/':\n            text = 'CC BY NC-SA 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/4.0/':\n            text = 'CC BY SA 4.0';\n            break;\n        default: \n            text = image.license || '';\n            break;\n    };\n\n    const licence = { text, url: image.medium };\n    const title = image.title;\n    const author = image.rightsholder || image.rightsHolder || 'Public domain';\n    const source = image.source || '';\n    const identifier = `${image.itemName.replace(' ', '_')}`;\n    const large = image.large || scaleImage(image).large;\n    \n    let parent = document.querySelector(`.js-attribution-layer.${identifier}`);\n        parent = parent || document.querySelector(`.js-attribution-layer`);\n        parent.innerHTML = '';\n\n    renderTemplate({title,author,source,licence,large}, template.content, parent);\n\n    const rightsAttribution = parent.querySelector('.js-rights-attribution .js-copyright');\n    const rightsLink = parent.querySelector('.js-rights-link .js-copyright');\n    const indicators = document.querySelector(`.carousel-indicators`);\n\n    const showAttribution = event => {\n        rightsAttribution.parentElement.classList.add('hide-important');\n        rightsLink.parentElement.classList.remove('hide-important');\n        indicators.classList.remove('hide-important');\n        rightsLink.removeEventListener('click', showLink), true;\n        rightsLink.addEventListener('click', showLink, true);\n    };\n\n    rightsAttribution.removeEventListener('click', showAttribution, true);\n    rightsAttribution.addEventListener('click', showAttribution, true);\n\n    const showLink = event => {\n        rightsAttribution.parentElement.classList.remove('hide-important');\n        rightsLink.parentElement.classList.add('hide-important');\n        indicators.classList.add('hide-important');\n        rightsAttribution.removeEventListener('click', showAttribution, true);\n        rightsAttribution.addEventListener('click', showAttribution, true);\n    };\n\n    rightsLink.removeEventListener('click', showLink), true;\n    rightsLink.addEventListener('click', showLink, true);\n\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { scaleImage, imageMatch, imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { handleRightsAttribution } from 'ui/screens/common/rights-attribution';\n\nimport imageSliderTemplate from 'ui/screens/common/image-slider-template.html';\n\nconst selectActiveImage = (image, parent, config) => {\n    parent.querySelectorAll('.carousel-item').forEach(i => {\n        const elemSrc = i.querySelector('img').dataset;\n        if(imageMatch(elemSrc, image.dataset || image)) {\n            i.classList.add('active');\n            return;\n        }\n    });    \n    \n    const activeNode = parent.querySelector('.imageSlider.carousel .carousel-item.active img'); \n    \n    const indicators = document.querySelectorAll('.carousel-indicators li');\n          indicators.forEach(i => {\n              if(i.dataset && activeNode.dataset && i.dataset.slideTo === activeNode.dataset.index) {\n                  i.classList.add('active');\n              }\n          });\n\n    let img = image.dataset || image;\n    img.title = img.title || img.itemName;\n    img = scaleImage(img);\n    handleRightsAttribution(img);\n\n    return img;\n};\n\nconst carouselControlHandler = (event, parentScreen = document) => {\n\n    setTimeout(() => {\n\n        const activeNode = parentScreen.querySelector(`${event.target.dataset.slider} .carousel-item.active img`);\n        const image = activeNode.dataset;   \n        \n        handleRightsAttribution(image);    \n\n    }, 750);\n};\n\nexport const imageSlider = sliderArgs => {\n\n    const { config, images, parent, image, parentScreen = document, identifier = '' } = sliderArgs;\n\n    const slider = document.createElement('template');\n          slider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n\n    images.forEach((img, i) => {\n        img.index = i;\n        img.rightsHolder = img.rightsHolder || 'Public domain';\n        img.provider = img.provider || 'eol';\n        img = scaleImage(img);\n    });\n\n    snapLog('imageSlider, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images, identifier }, slider.content, parent);\n\n    let next = document.querySelector(`#imageSlider_${identifier} .carousel-control-next-icon`);\n    let prev = document.querySelector(`#imageSlider_${identifier} .carousel-control-prev-icon`);\n\n    if(config.isPortraitMode) {        \n        next.classList.add('concealed');\n        prev.classList.add('concealed');\n    }\n\n    setTimeout(() => {\n        selectActiveImage(image || images[0], parent, config);        \n    },250);\n\n    setTimeout(() => {\n      // next.focus();\n    }, 1000);\n\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-prev`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-next`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n\n    document.addEventListener('swiped-left', function(e) {\n        next.click();\n    });\n\n    document.addEventListener('swiped-right', function(e) {\n        prev.click();\n    });\n};\n\nexport const imageSideBySlider = (slides, parent, config) => {\n\n    const sideBySlider = document.createElement('template');\n          sideBySlider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n    parent.classList.add('slideBySliderContainer');\n\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(3)`).innerHTML = '';\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(4)`).innerHTML = '';\n\n    slides.forEach((slide, index) => {\n\n        const identifier = slide.id.replace(' ', '_') || index + 1;\n\n        const header = document.querySelectorAll(`#imageComparisonModal .js-modal-image-title > span`)[index];\n              header.innerHTML = `<span class=\"common-name\">${slide.images[0].itemCommon}</span><span class=\"latin-name\">${slide.images[0].itemName}</span>`;\n        const item = { name: slide.images[0].itemName, itemCommon: slide.images[0].itemCommon, images: slide.images };\n        const images = prepImagesForCarousel(item, config, imageUseCases.CAROUSEL);\n        \n        snapLog('imageSideBySlider, image medium values:', images.map(i => i.medium));\n\n        renderTemplate({ images, identifier }, sideBySlider.content, parent);\n        \n        const activeNode = document.querySelector(`#imageSlider_${identifier} .carousel-item`);\n              activeNode.classList.add('active');\n        handleRightsAttribution(images[0]);\n\n        const originalImageLink = document.querySelector(`#imageSlider_${identifier} .js-expand`);\n        if(originalImageLink) originalImageLink.classList.add('hide-important');\n    });\n};","import * as R from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\n\nconst stripImageUrlOfScaleAndPrefix = img => {  \n    const prefix = img.provider === 'inat' ? 'https://static.inaturalist.org/photos/' : 'https://content.eol.org/data/media/';\n    if(!img.url || typeof img.url === 'object') return '';\n    let part = img.url.replace('.260x190.jpg', '');\n        part = part.replace('.98x68.jpg', '');\n        part = part.replace('.jpg', '');\n        part = part.replace(prefix, '');\n\n    if(img.provider === 'inat') {\n      part = part.split('?')[0];\n    }\n\n    return part;\n};\n\nexport const imageUseCases = {\n    SPECIES_LIST: 'Species list',\n    SPECIES_CARD: 'Species card',\n    TAXON_CARD: 'Taxon card',\n    SPECIES_SPECIMENS: 'Species specimens',\n    NON_TAXON_CARD: 'Non-taxon card',\n    VISUAL_MATCH: 'Visual match',\n    MIXED_SPECIMENS: 'Mixed specimens',\n    CAROUSEL: 'Carousel',\n    TEXT_ENTRY: 'Text entry',\n    ACTUAL_SIZE: 'Actual size',\n    SPECIES_GRID: 'Species grid'\n}\n\nexport const denormaliseImages = images => {\n    const denormalisedImages = images.map(image => {\n        image.photographersName = image.photographer ? image.photographer.full_name || '' : '';\n        return image;\n    });\n    return denormalisedImages;\n};\n\nexport const imageMatch = (src1, src2) => {\n    if(!src2) return false;\n    src1 = stripImageUrlOfScaleAndPrefix(src1);\n    src2 = stripImageUrlOfScaleAndPrefix(src2);\n    const isActiveImage = src1 === src2;\n    return isActiveImage;\n};\n\nexport const prepImageForCarousel = (image, index, item, config, useCase) => {\n    let img = { \n        index: index + 1, \n        ...image,\n        url: scaleImage(image, useCase, config).medium,\n        // large: scaleImage({ url:image.src }).large,\n        itemName: item.name,\n        itemCommon: item.itemCommon,\n        rightsHolder: image.rightsHolder || '',\n        photographersName : image.photographer ? image.photographer.full_name || '' : '',\n        provider: image.provider || ''       \n    };\n    if(image.src) {\n        img = { ...img, ...image.src, medium: image.medium };\n    }\n    return img;\n};\n\nexport const prepImagesForCarousel = (item, config, useCase) => {\n    const images = item.images.map((image, index) => { \n        return prepImageForCarousel(image, index, item, config, useCase);\n    });\n    return images;\n};\n\nexport const scaleImage = image => {\n\n    if(!image.url) {\n        return image;\n    }\n\n    image.part = stripImageUrlOfScaleAndPrefix(image);\n\n    if(image.provider === 'inat') {\n        image.small = `https://static.inaturalist.org/photos/${image.part}`;\n        image.medium = image.part.replace('small', 'medium');\n        image.medium = `https://static.inaturalist.org/photos/${image.medium}`;\n        image.large = image.part.replace('small', 'large');\n        image.large = `https://static.inaturalist.org/photos/${image.large}`;\n        return image;\n    } else {\n        image.small = `https://content.eol.org/data/media/${image.part}.98x68.jpg`;\n        image.medium = `https://content.eol.org/data/media/${image.part}.260x190.jpg`;\n        image.large = `https://content.eol.org/data/media/${image.part}.jpg`;\n        return image;\n    }\n    \n};\n\nexport const modalImagesHandler = (images, item, collection, config, displayNameType) => {\n    images.forEach(image => {\n        modalImageHandler(image, item, collection, config, displayNameType);\n    });\n};\n\nconst handleImageSelectionFromList = (image, item, collection, config, displayNameType = 'binomial') => {\n\n    const parent = document.querySelector('#imageModal .js-modal-image');\n    const selectedItem = item || collection.items.find(item => item.name === image.dataset.itemName);\n    let images = R.clone(selectedItem.images.map((image, index) => {\n        selectedItem.vernacularName = itemProperties.getVernacularName(selectedItem, config);\n        image = scaleImage(image, imageUseCases.CAROUSEL, config);\n        return { ...image, itemName: selectedItem.name, itemCommon: selectedItem.vernacularName };\n    }));\n    images = denormaliseImages(images);\n    const selectedItemImage = selectedItem.images.find(i => imageMatch(i,image.dataset));\n    const selectedImage = { dataset: { ...image.dataset, ...selectedItemImage } };\n    imageSlider({ config, images, parent, image: selectedImage, identifier: selectedImage.dataset.itemName.replace(' ', '_') });\n    let displayName = '';\n    switch(displayNameType) {\n        case 'biomial':\n            displayName = selectedItem.name;\n            break;\n        case 'vernacular':\n            displayName = selectedItem.vernacularName;\n            break;\n        case 'withheld':\n            displayName = 'Species name withheld';\n            break;\n        default:\n            displayName = `<span>${selectedItem.vernacularName}</span> <span class=\"latin-name\">${selectedItem.name}</span>`;\n    }\n\n    document.querySelector('#imageModal .js-modal-image-title span:nth-child(1)').innerHTML = displayName;\n};\n\nexport const modalImageHandler = (image, item, collection, config, displayNameType = 'binomial') => {\n    image.addEventListener('click', e => {\n        if(!item) return;\n        handleImageSelectionFromList(image, item, collection, config, displayNameType);        \n    }, true);\n};\n","import { iconicTaxa, matchIcon, matchRank } from 'api/snapdragon/iconic-taxa';\n\nconst mushroomIcon = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./icons/si-glyph-mushrooms.svg\"/></svg-icon>';\n\nexport const renderIcon = (taxonomy, rootNode) => {\n\n    if(taxonomy.kingdom.toLowerCase() === 'fungi') {\n\n        const iconicIconContainer = rootNode.querySelector('.js-iconic-icon');\n\n        iconicIconContainer.innerHTML = `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n\n    } else {\n\n        const iconicIcon = rootNode.querySelector('.js-iconic-icon i');\n\n        const classes = matchIcon(taxonomy, iconicTaxa).split(' ');\n\n        classes.forEach(c => iconicIcon.classList.add(c));   \n    }\n\n    return rootNode.querySelector('.js-iconic-icon');\n};\n\nexport const returnIcon = item => {\n\n    if(!item.taxonomy) return '';\n\n    if(item.taxonomy.kingdom.toLowerCase() === 'fungi') {\n        return `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n    } else {\n        return `<i class=\"small-icon ${matchIcon(item.taxonomy, iconicTaxa)}\"></i>`;\n    }\n};\n\nexport const returnTaxonIcon = taxon => {\n\n    if(taxon.toLowerCase() === 'fungi') {\n        return `<span class=\"iconic-taxa-categories-selected\">${mushroomIcon}</span>`;\n\n    } else {\n        return `<span><i class=\"small-icon ${matchRank(taxon)}\"></i></span>`;\n    }\n};","export const getBirdSong = (item, node, portrait) => {\n\n    if(item.taxonomy.class.toUpperCase() === 'AVES') {\n\n        const endpoint = `https://cors-anywhere.herokuapp.com/http://www.xeno-canto.org/api/2/recordings?query=${item.name} q:A`;\n\n        async function fetchAsync (endpoint) {\n\n            let response = await fetch(endpoint);\n            \n            let data = await response.json();\n            \n            return data;\n        }\n\n        const loadPlayer = id => {\n            const url = `https://www.xeno-canto.org/${id}/embed?simple=1`;\n            portrait ? node.dataset.src = url : node.src = url;\n            if(portrait) {\n                node.classList.remove('bird-song-icon-disabled');\n                node.classList.add('bird-song-icon');\n            } else {\n                node.parentElement.classList.add('bird-song-spacing');\n            }\n        };\n\n        const playerId = item.traits.song.value[0];\n            \n        if(playerId) {\n            loadPlayer(playerId);\n        } else {\n            fetchAsync(endpoint).then(data => {        \n                const recording = data.recordings[0];\n                loadPlayer(recording.id);\n            });\n        }\n    } else {\n        node.style.display = 'none';\n        document.querySelector('.bird-song').style.display = 'none';\n    }\n}","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageSideBySlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { firestore } from 'api/firebase/firestore';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\nimport visualComparisonTemplate from 'ui/screens/common/look-alikes-link-template.html';\n\nexport const lookalikeSpecies = (item, config, rootNode = document) => {\n    \n    const lookalikes = item.traits.lookalikes || item.traits['look-alikes'];\n\n    if(lookalikes) {\n        \n        const matchTemplate = document.createElement('template');\n              matchTemplate.innerHTML = visualComparisonTemplate;\n        const lookalikeParent = rootNode.querySelector('.js-lookalikes');\n\n        const slides = [];\n        const names = [];\n        const scientificNames = [];\n\n        let species;\n\n        async function renderLookalikes() {\n\n            const readyLookalikesForRendering = async () => {\n\n                species = [ ...lookalikes.map(lookalike => lookalike.lookalike), { name: item.name, description: lookalikes[0].description } ];\n\n                for (let lookalike of species) {\n\n                    const lookalikeItem = await firestore.getSpeciesByName(lookalike.name);\n\n                    if(!lookalikeItem) return;\n                    \n                    lookalikeItem.vernacularName = itemProperties.getVernacularName(lookalikeItem, config);\n                    names.push(lookalikeItem.vernacularName);\n                    scientificNames.push(lookalikeItem.name);\n    \n                    const images = lookalikeItem.images.map((img, index) => { \n\n                        const url = scaleImage({ url: img.url }, imageUseCases.CAROUSEL, config);\n\n                        return { \n                                index: index + 1, \n                                src: { ...img, url: url.medium },\n                                url: url.medium,\n                                itemName: lookalikeItem.name, \n                                itemCommon: lookalikeItem.vernacularName };\n                    });\n    \n                    slides.push({ id: lookalikeItem.name, images });\n                };\n            };\n\n            await readyLookalikesForRendering();\n\n            if(slides.length === 0) return;\n\n            lookalikeParent.innerHTML = '';\n\n            renderTemplate({slides, names: names.join(', ')}, matchTemplate.content, lookalikeParent);\n\n            const speciesComparisonLink = rootNode.querySelector('.js-compare-species-link');\n\n            speciesComparisonLink.classList.remove('hide');\n\n            const getTrait = async (itemName, parent) => {\n    \n                const item = await firestore.getSpeciesByName(itemName);\n                item.traits = await firestore.getTraitsBySpeciesName(item.name);\n                    \n                if(item.taxonomy.class.toLowerCase() === 'aves') {\n    \n                    if(item.traits && Object.keys(item.traits).length === 0) return;\n    \n                    const xcID = item.traits['song'].value;\n    \n                    if(!xcID) return;\n        \n                    const mp3 = await firestore.getBirdsong(xcID);\n    \n                    const template = document.createElement('template');\n                          template.innerHTML = audioMediaTemplate;\n                    \n                    renderTemplate({ mp3, title: item.name }, template.content, parent);\n                }\n            }\n    \n            speciesComparisonLink.addEventListener('click', () => {\n    \n                const parent = document.querySelector('#imageComparisonModal .js-modal-image');\n                            \n                imageSideBySlider(slides, parent, true, config);\n                    \n                species.forEach(lookalike => {\n                    const identifier = `.description_${lookalike.name.replace(' ', '_')}`;\n                    const description = document.querySelector(identifier);\n                          description.innerHTML = lookalike.description;                    \n                    getTrait(lookalike.name, document.querySelector(`${identifier} + div`));\n                });\n                \n            });\n        }\n\n        renderLookalikes();   \n    }\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { firestore } from 'api/firebase/firestore';\n\nimport linkedTaxaLookalikeTemplate from 'ui/screens/common/linked-taxa-lookalike-template.html';\nimport linkedTaxaRelationshipTemplate from 'ui/screens/common/linked-taxa-relationship-template.html';\n\nexport const linkedTaxa = (item, config, parent, mode, isInCarousel, collection, activeTraitValue) => {\n\n    parent.innerHTML = '';\n    const template = document.createElement('template');\n\n    const addLinksToSpeciesCards = async mode => {        \n        \n        if(!isInCarousel) {            \n            const speciesCardLinks = mode === 'MODAL'\n                    ? document.querySelectorAll('#cardModal .js-test-card-container-link')\n                    : document.querySelectorAll('.js-test-card-container-link');\n            \n            speciesCardLinks.forEach(async link => {\n                link.addEventListener('click', async event => {\n                    const name = event.target.id || event.target.dataset.name;\n                    const selectedItem = await firestore.getSpeciesByName(name);\n                    selectedItem.species = itemProperties.getSpeciesName(item.name);\n                    renderCard({ name: 'Local species', items: [ selectedItem ] }, 'MODAL', selectedItem, document.querySelector('#cardModal .js-modal-body'), false);\n                });\n            });\n        }\n    };\n\n    const getLinkedTaxa = async () => {\n\n        const addVernacularName = async taxonName => {\n            const item = await firestore.getSpeciesByName(taxonName);\n            if(!item) return { name: taxonName, display: taxonName, isSpecies: false };\n            const vernacularName = itemProperties.getVernacularName(item, config);\n            return vernacularName ? { name: taxonName, display: taxonName, isSpecies: true } : { name: taxonName, display: taxonName, isSpecies: true };\n        };\n    \n        let relationshipTraits = item.traits ? item.traits.relationships : null;\n\n        let relationships = [];\n\n        if(relationshipTraits) {\n\n            const convertTraitsForDisplay = async () => {\n                return Promise.all(relationshipTraits.map(trait => {\n                    return  {\n                        type: trait.value[0],\n                        speciesA: trait.symbiont.name,\n                        speciesARole: trait.symbiont.role,\n                        speciesB: item.name,\n                        speciesBRole: trait.type,\n                        description: trait.description\n                    };\n                }));\n            };\n\n            relationships = await convertTraitsForDisplay();\n        }\n\n        let lookalikeTraits = item.traits ? item.traits.lookalikes : null;\n\n        let lookalikes = [];\n\n        if(lookalikeTraits) {\n\n            lookalikeTraits = lookalikeTraits.filter(species => species.lookalike.name === activeTraitValue);\n\n            const convertLookalikesForDisplay = async () => {\n                return Promise.all(lookalikeTraits.map(trait => {\n                    return  {\n                        species: item.name,\n                        speciesDescription: trait.description,\n                        lookalike: trait.lookalike.name,\n                        lookalikeDescription: trait.lookalike.description\n                    };\n                }));\n            };\n\n            lookalikes = await convertLookalikesForDisplay();\n        }\n\n        const addDisplayRules = relationships => {\n            for(const relationship of relationships) {\n                if(mode !== 'MODAL') {\n                    relationship.className = 'underline-link';\n                    relationship.modal = 'modal';\n                } else {\n                    relationship.className = '';\n                    relationship.modal = '';\n                }\n            };\n\n            return relationships;\n        };\n\n        if(relationships) {\n            relationships = addDisplayRules(relationships);\n            template.innerHTML = linkedTaxaRelationshipTemplate;\n            renderTemplate({ relationships }, template.content, parent);\n        }\n\n        if(lookalikes) {\n            lookalikes = addDisplayRules(lookalikes);        \n            template.innerHTML = linkedTaxaLookalikeTemplate;\n            renderTemplate({ lookalikes }, template.content, parent);\n        }\n        addLinksToSpeciesCards(mode);\n    }; \n\n    getLinkedTaxa();\n};","import { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { linkedTaxa } from 'ui/screens/common/linked-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport idBoxTemplate from 'ui/screens/common/id-box-template.html';\nimport detailsTemplate from 'ui/screens/common/info-detail-slider-template.html';\n\nexport const renderInfoDetails = (item, activeTraitKey, activeTraitValue, description) => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const template = document.createElement('template');\n    const parent = document.querySelector('.js-info-box-details');\n\n\n    if(!parent) return; // hack! currently the case with (non-species) taxon cards (see same below)\n\n    parent.innerHTML = '';\n\n    if(activeTraitKey.toLowerCase().indexOf('description') > -1) {        \n        template.innerHTML = idBoxTemplate;\n        // renderTemplate({ id: activeTraitValue }, template.content, parent);\n        renderTemplate({ id: description }, template.content, parent);\n        const text = document.querySelector('.id-box > div');\n              text.innerHTML = text.innerHTML.replace(/\\r?\\n/g, '<br />');        \n    }\n    else if(activeTraitKey.toLowerCase() === 'relationships' || activeTraitKey.toLowerCase() === 'lookalikes') {\n        const mode = 'MODAL';\n        const isInCarousel = true;\n        linkedTaxa(item, config, parent, mode, isInCarousel, collection, activeTraitValue);\n    } else {\n\n        const details = firestore.getDefinition(activeTraitValue, glossary, collection.glossary); // make dependent on a promise\n\n        if(!parent) return; // hack! taxon info sliders\n\n        if(details && details.length > 0) {            \n            details.forEach(detail => {\n                template.innerHTML = detailsTemplate;\n                detail.imgClassName = detail.img ? detail.img.url === '' ? 'hide-important' : '' : 'hide-important';\n                detail.img = detail.img || { url: '' }; \n            });\n            renderTemplate({ details }, template.content, parent);\n        }\n    }\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderInfoDetails } from 'ui/screens/common/info-detail-slider';\n\nimport infoSliderTemplate from 'ui/screens/common/info-slider-template.html';\n\nconst renderInfoSlider = (item, traits, parent, id) => {\n\n    const slider = document.createElement('template');\n          slider.innerHTML = infoSliderTemplate;\n\n    parent.innerHTML = '';\n\n    traits = traits.filter(t => t.value);\n\n    traits.forEach(trait => {        \n        trait.name = trait.name ? trait.name === 'ph' ? 'pH' : utils.capitaliseFirst(trait.name) : '';\n        if(trait.name.toLowerCase() === 'role') trait.name = trait.type || 'role';\n        trait.name = trait.name === 'Ph value' ? 'pH value' : trait.name; \n        trait.unit = trait.unit ? trait.unit.toLowerCase() === 'colour' ? '' : trait.unit : '';\n        trait.description = trait.value;\n        trait.value = trait.name.toLowerCase() === 'description' ? '< traits >' : trait.value.join(', ');\n    });\n    \n    let description = traits.find(trait => trait.name.toLowerCase() === 'description');\n        description = description ? description.description[0] : '';\n\n    renderTemplate({ id, traits }, slider.content, parent);\n\n    let activeTrait, activeTraitKey, activeTraitValue;\n    \n    activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item:nth-child(1)`);\n    activeTrait.classList.add('active');\n\n    const traitCount = traits.length;\n\n    if(traitCount === 1) {\n        parent.querySelectorAll('.carousel.slide a').forEach(control => {\n            control.setAttribute('disabled', 'disabled');\n            control.classList.add('inactive-icon');\n        });\n    }\n\n    const changeTraitHandler = event => {\n        setTimeout(() => {\n            activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item.active`);\n            activeTraitKey = activeTrait.querySelector('dt').innerHTML;\n            activeTraitValue = activeTrait.querySelector('dd').innerHTML;\n            renderInfoDetails(item, activeTraitKey, activeTraitValue, description);\n        }, 1000);\n    };\n\n    changeTraitHandler();\n\n    parent.querySelector(`#traitSlider${id} .carousel-control-prev`).addEventListener('click', changeTraitHandler);\n    parent.querySelector(`#traitSlider${id} .carousel-control-next`).addEventListener('click', changeTraitHandler);\n}\n\nexport const taxonInfoSlider = (item, traits, parent, mode) => {\n\n    const id = mode === 'MODAL' ? 'taxon_1' : 'taxon_0';\n\n    const convertedTraits = traitsHandler.convertTraitsToNameValuePairsArray(traits, traitsHandler.getTraitsToExclude());\n\n    if(convertedTraits.length > 0) {\n        renderInfoSlider(item, convertedTraits, parent, id);\n    }    \n};\n\nexport const infoSlider = (item, parent, mode) => {\n    \n    if(!traitsHandler.hasTraitPropeties(item.traits)) return;\n\n    let traits = traitsHandler.convertTraitsToNameValuePairsArray(item.traits, traitsHandler.getTraitsToExclude(), item);\n\n    if(item.traits.description) {\n        const description = {\n            name: 'description',\n            value: item.traits.description.value\n        }\n        traits = [ description, ...traits ];\n    }\n    \n    if(traits.length === 0) return;\n    \n    const id = mode === 'MODAL' ? 1 : 0;\n\n    renderInfoSlider(item, traits, parent, id);\n};","import { utils } from 'utils/utils';\n\nconst getHTML5Location = () => {\n\n  return new Promise(function (resolve, reject) {\n    function success(position) {\n      resolve([position.coords.latitude, position.coords.longitude]);\n    }\n\n    function error(e) {\n      logError('getHTML5Location', e);\n      resolve({\n        '0': 0,\n        '1': 0,\n      });\n    }\n\n    navigator.geolocation.getCurrentPosition(success, error);\n  });\n};\n\nexport const getLocation = (config) => {\n  if(!!config.coordinates && config.coordinates.lat && config.coordinates.long) {\n   snapLog('geolocation config',config);\n    return new Promise(resolve => {\n        resolve(config.coordinates);\n    });\n  } else {\n   snapLog('geolocation config', config);\n    return getHTML5Location();\n  }  \n};\n\nconst listeners = [];\n\nconst parseMapBoxPlace = async (json, config) => {\n  const place = await json;\n  const locality = place.features.find(f => f.place_type[0] === 'locality');\n  const region = place.features.find(f => f.place_type[0] === 'region');\n  const country = place.features.find(f => f.place_type[0] === 'country');\n\n  place.locality = locality ? locality.text : '';\n  place.region = region ? region.text : '';\n  place.country = country ? country.text : '';\n  place.area = place.region || place.country;\n  \n  place.shortLocation = `${place.locality}, ${place.country}`;\n  place.longLocation = `${place.locality}, ${place.region}, ${place.country}`;\n \n  place.summary = config.isLandscapeMode ? `Species from ${place.longLocation}` : `Species from ${place.shortLocation}`;\n  const placePromise = new Promise(resolve => {\n    resolve(place);\n  });\n  const updatedPlace = await placePromise;\n  return await updatedPlace;\n}\n\nconst getMapBoxPlace = async (long, lat, config) => {\n  const token = 'pk.eyJ1IjoiZGFuaGFydGxleSIsImEiOiJjam84Zjd3aGowMDdoM2ttaDAzeDk4bHJ6In0.oEcO6w3DhHUv_mXrFW1clg';  \n  const longitude = long;// || '-9.163009899999999';\n  const latitude = lat;// || '38.7155762';  \n  const language = config.language || 'en';\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${longitude},${latitude}.json?language=${language}&access_token=${token}`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const place = await parseMapBoxPlace(json, config);\n  listeners.forEach(listener => listener(place));\n  return await place;\n}\n\nexport const getPlace = async (config, force = false) => {\n  if(!!config.place && !force) {\n    const response = new Promise(resolve => {\n      resolve(config.place);\n    });\n    const json = await response;    \n    return await json;\n  } else {    \n   snapLog('getPlace config', config);\n    const coordinates = await getLocation(config);        \n    const latitude = coordinates['0'] || coordinates.lat;\n    const longitude = coordinates['1'] || coordinates.long;\n    config.coordinates = { lat: latitude, long: longitude };\n\n    return getMapBoxPlace(longitude, latitude, config);\n  }\n};\n\nexport const listenToPlaceChange = listener => { \n  listeners.push(listener);\n};\n\nconst IPCountryLookup = async () => {\n  const ACCESS_KEY = '69402a39530c7ae8218dfaf69ef78337';  \n  const url = `http://api.ipstack.com/check?access_key=${ACCESS_KEY}`;\n  try {\n    const response = await fetch(url);\n    const json = await response.json();\n    const { country_code, country_name } = await json;\n    return { country_code, country_name };\n  } catch (error) {\n    console.warn(`ERROR(${err.code}): ${err.message}`);\n  }  \n}\n\nconst LocationLookup = async ip => {\n  const ACCESS_KEY = 'a8563e7b75654ae8b016dc52719dee3b';\n  const url = `https://api.ipgeolocation.io/ipgeo?apiKey=${ACCESS_KEY}&ip=${ip}&fields=city,state_prov,country_name,latitude,longitude&output=json`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const { city, state_prov, country_name, latitude, longitude } = await json; \n  return { city, state_prov, country_name, latitude, longitude };\n}\n\nconst IPLookup = async () => {  \n  const url = 'https://api.ipgeolocation.io/getip';\n  const response = await fetch(url);\n  const json = await response.json();\n  const { ip } = await json; \n  return ip;\n}\n\nexport const getIPLocation = async (config, force = false) => {\n\n     if(!!config.ipLocation && !force) {\n      const response = new Promise(resolve => {\n        resolve(config.ipLocation);\n      });\n      const json = await response;    \n      return await json;\n     } else {\n      const ip = await IPLookup();\n      const { city, state_prov, country_name, latitude, longitude } = await LocationLookup(ip);\n      return { city, state_prov, country_name, latitude, longitude };\n     }\n};\n\nexport async function GoogleFindPlace(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n\n  const url = `https://maps.googleapis.com/maps/api/place/findplacefromtext/json?input=${place}&inputtype=textquery&key=${ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { candidates } = await json; \n  return candidates;\n}\n\nlet service;\nlet requireNewSession = true;\nlet isScriptReady = false;\nlet SESSION_TOKEN;\nlet current_term = '';\n\nexport async function GoogleAutocompleteServerSide(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n\n  const url = `https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${place}&inputtype=textquery&key=${ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { predictions } = await json; \n  return predictions;\n}\n\nconst createScriptRequest = (src, callback) => {\n  requireNewSession = false;\n  const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = src;\n    document.body.appendChild(script);\n    script.addEventListener(\"load\", () => {\n      isScriptReady = true;\n      callback();\n    });\n}\n\nexport const GoogleAutocomplete_Original = (place, callback) => {\n\n  const getPredictions = () => {\n    \n    if(!isScriptReady) return;\n\n    const displaySuggestions = function(predictions, status) {\n      if (status != google.maps.places.PlacesServiceStatus.OK) {\n        alert(status);\n        return;\n      }\n  \n      callback(predictions);\n    };\n    if(!service) {\n      service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions({ input: place }, displaySuggestions);\n  };\n\n  if(requireNewSession) {\n    const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n    const SESSION_TOKEN = utils.createSessionToken();\n\n    const src = `https://maps.googleapis.com/maps/api/js?key=${ACCESS_KEY}&sessiontoken=${SESSION_TOKEN}&libraries=places`;\n\n    createScriptRequest(src, () => {\n      getPredictions();\n    });\n  } else {\n    getPredictions();\n  }\n}\n\nexport const GoogleAutocomplete = (place, callback) => {\n\n  const getPredictions = SESSION_TOKEN => {\n\n    if(!service) {\n        service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions(\n      { \n        input: place,\n        // sessionToken: SESSION_TOKEN\n      }, \n      callback);\n  };\n\n  if(requireNewSession) {\n    SESSION_TOKEN = new google.maps.places.AutocompleteSessionToken();\n    getPredictions(SESSION_TOKEN);\n    current_term = place;\n    requireNewSession = false; //or on expires/error, get a new one\n  } else {\n    if(place !== current_term) {\n      getPredictions(SESSION_TOKEN);\n    }\n    current_term = place;\n  }\n}\n\nexport const GooglePlaceDetails = (placeId, callback) => {\n  \n  var request = {\n    placeId: placeId,\n    // sessionToken: SESSION_TOKEN\n  };\n\n  var service = new google.maps.Geocoder();\n      service.geocode(request, callback);  \n\n  requireNewSession = true;\n}","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nlet inatListeners = [];\nlet RECORDS_PER_PAGE = 200;\n\nconst unsubscribe = listener => {\n    inatListeners = inatListeners.filter(l => l !== listener);\n};\n\nexport const listenToInatRequests = listener => {\n    inatListeners.push(listener);\n    return unsubscribe;\n};\n\nconst getBasePath = config => {\n    \n    const month = config.guide.season.type === 'all_year' \n            ? ''\n            : config.guide.season.observableMonths.map(month => month.index).join(',');\n\n    const perPage = config.guide.perPage || RECORDS_PER_PAGE;\n\n    const basePath = `https://api.inaturalist.org/v1/observations/species_counts?captive=false&rank=species&per_page=${perPage}&month=${month}`;\n\n    return basePath;\n};\n\nexport const getInatSpecies = async config => {\n\n    const speciesNames = await firestore.getSpeciesNames();\n\n    const snapdragonSpeciesNames = speciesNames[0].value;\n\n   snapLog('snapdragon species', snapdragonSpeciesNames);\n\n    const iconicTaxaKeys = Object.keys(iconicTaxa).join(',');\n\n    const getIconicTaxa = config => {\n      \n      try {\n\n          const iconicTaxa = config.guide.iconicTaxa.map(taxon => taxon.id) || iconicTaxaKeys;\n\n          // Create new taxonic group for reptilia, etc?\n\n          if(iconicTaxa.find(taxon => taxon === 'mammalia')) {\n              iconicTaxa.push('reptilia');\n          }\n\n          const taxa = iconicTaxa.map(taxon => {\n              if(taxon === 'lepidoptera') taxon = 'insecta';            \n              return taxon;\n          });\n\n          return taxa;\n\n      } catch (e) {\n        logError('Error for getIconicTaxa: ', e);\n    }\n    };\n\n    const getUserOrProjectKeyValuePair = config => {\n        if(!config.guide.inatId) return '';\n        const param = config.guide.inatId.param;    \n        const id = config.guide.inatId.id;\n        const parameter = `&${param}=${id}`;\n        return id ? parameter : '';\n    };\n\n    const getAllInatObservations = async (config, snapdragonSpeciesNames) => {\n        let snapdragonSpecies = [];\n        let records = [];\n        let keepGoing = true;\n        let page = 1;\n        while (keepGoing) {\n          try {\n            let recordsFromThisRequest = await getInatObservations(config, page);\n            await records.push.apply(records, recordsFromThisRequest);\n            let matches = recordsFromThisRequest.filter(record => R.contains(record.taxon.name, snapdragonSpeciesNames));\n            await snapdragonSpecies.push.apply(snapdragonSpecies, matches);\n            page = page + 1;\n            let noMoreRecords = recordsFromThisRequest.length < RECORDS_PER_PAGE;\n            let recordsCountReached = snapdragonSpecies.length >= config.guide.noOfRecords;\n           snapLog('snapdragonSpecies', snapdragonSpecies);\n           snapLog('records', records);\n            if (noMoreRecords || recordsCountReached) {\n                keepGoing = false;\n                return snapdragonSpecies;\n            }\n          } catch(e) {\n            logError('getInatObservations', e);\n            return snapdragonSpecies;\n          }\n        }\n    }\n\n    const loadSpeciesInParallel = async observations => {\n        try {\n            return Promise.all(observations.map(observation => {\n                return firestore.getSpeciesByName(observation.taxon.name).then(async item => {\n                    return await {                         \n                        ...item, \n                        observationCount: observation.taxon.observations_count, \n                        iconicTaxon: observation.taxon.iconic_taxon_name\n                    };\n                })                    \n            }));\n\n        } catch (e) {\n          logError('loadSpeciesInParallel: ', e);\n        }\n    };\n\n    const getInatObservations = async (config, page) => {\n\n      try {\n\n        let lat = '', lng = '', placeId = '';\n\n        let radius = config.guide.speciesRange ? parseInt(config.guide.speciesRange) : 10;\n        let inat = '';\n        \n        switch(config.guide.locationType) {\n            case 'place':\n                placeId = config.guide.place.id;\n                break;\n            case 'longLat':\n                lat = config.guide.coordinates.lat;\n                lng = config.guide.coordinates.long;\n                break;\n            case 'inat':\n                lat = '';\n                lng = '';\n                placeId = '';\n                radius = '';\n                inat = `&${config.guide.inatId.param}=${config.guide.inatId.key}`;\n                break;\n        }\n\n        const iconicTaxa = getIconicTaxa(config);\n        const params = config.guide.guideTpe === 'INAT' ? getUserOrProjectKeyValuePair(config) : '';\n        const url = getBasePath(config) + `&page=${page}&iconic_taxa=${iconicTaxa}&place_id=${placeId}&lat=${lat}&lng=${lng}&radius=${radius}${inat}${params}`;\n\n       snapLog('inat species request url', url);\n\n        const recordsFromThisRequest = await fetch(url);\n\n       snapLog('inat recordsFromThisRequest', recordsFromThisRequest);\n\n        const json = await recordsFromThisRequest.json();\n        inatListeners.forEach(listener => listener(\n            { page: json.page, numberOfRequests: Math.ceil(json.total_results/json.RECORDS_per_page) }\n        ));\n        return json ? await json.results : [];\n      } catch(e) {\n        logError('getInatObservations', e);\n        return [];\n      }\n    }\n    \n    let observations;\n\n    try {\n      observations = await getAllInatObservations(config, snapdragonSpeciesNames);\n      observations = observations.filter(observation => R.contains(observation.taxon.name, snapdragonSpeciesNames));\n      observations = R.take(config.guide.noOfRecords, utils.sortBy(observations.filter(item => item), 'observationCount', 'desc'));\n    } catch(e) {\n      logError('getAllInatObservations', e);\n    }\n\n   snapLog('observations', observations);\n\n    if(!observations) return [];\n\n    return await loadSpeciesInParallel(observations);\n}\n\nexport async function getInatPlaceId(place) {\n    \n    const url = `https://api.inaturalist.org/v1/places/autocomplete?q=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json  = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getInatTaxonStats(item, config, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/species_counts?&verifiable=true&taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getHistogram(item, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/histogram?taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getAutocompleteBy(q, by) {\n\n    // currently set up for USERS and PROJECTS but PLACES? Not sure\n    // https://api.inaturalist.org/v1/places/autocomplete?q=O%20Parque%20Natural%20da%20Arr%C3%A1bida\n\n    const url = `https://api.inaturalist.org/v1/${by}/autocomplete?q=${q}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\n// https://www.inaturalist.org/observations/danielhartley.json?m1=1&m2=11&iconic_taxa[]=Fungi","export const renderWikiModal = (item, wikiLink, config) => {\n    if(wikiLink) {\n        wikiLink.addEventListener('click', event => {\n            document.querySelector('.js-external-page-title').innerHTML = `${item.name}`;\n            const entry = document.querySelector('.species-card-wiki-entry').innerText;\n            const style = `\n                <style type='text/css'>\n                body {\n                    font-family: PT Sans', 'Roboto', arial,sans-serif;\n                }\n                a {\n                    text-decoration: none;\n                    border: solid 1px;\n                    border-top: none;\n                    border-left: none;\n                    border-right: none;\n                    color: black;\n                    cursor: pointer;\n                }\n            </style>`;\n            const wiki = `<header>${style}</header><p>${entry}</p><p><a href='https://en.wikipedia.org/wiki/Salvia_officinalis' target='_blank'>Wikipedia page</a></p>`;\n\n            document.querySelector('.js-external-page-body').innerHTML = config.isPortraitMode\n                ? `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"data:text/html,${wiki}\"></iframe>`          \n                : `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"${wikiLink.querySelector('span').dataset.src}\"></iframe>`;\n                \n            document.querySelector('#wikiModal').focus();\n        });\n    }\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace } from 'geo/geo';\nimport { getInatTaxonStats, getInatPlaceId } from 'api/inat/inat';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\n\nimport inatBoxTemplate from 'ui/screens/common/inat-box-template.html';\n\nexport async function renderInatDataBox(parent, item, config, mode) {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatBoxTemplate;\n\n    parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n    const eolPage = document.querySelector('.js-test-card-container-eol-link');\n    \n    eolPage.setAttribute('href', `http://eol.org/pages/${item.id}/overview`);\n    eolPage.setAttribute('target', '_blank');\n    eolPage.setAttribute('style', 'text-decoration: none');\n\n    setTimeout(()=>{\n        const wikiLink = document.querySelector('.js-test-card-container-wiki');            \n        renderWikiModal(item, wikiLink, config);\n    });    \n\n    const wikiNode = document.querySelector('.js-test-card-container-wiki');\n          wikiNode.innerHTML = '';\n\n    renderWiki(wikiNode, item, config.language);\n    \n    getInatTaxonStats(item, config).then(stats => {\n\n        if(!stats.results) return;\n\n        const taxonId = stats.results.find(stat => stat.taxon.name === item.name).taxon.id;\n        const taxonCount = stats.results.find(stat => stat.taxon.name === item.name).count;\n\n        const taxonLink = `https://www.inaturalist.org/taxa/${taxonId}`;\n\n        parent.querySelector('.js-taxon-count').innerHTML = taxonCount.toLocaleString();\n        parent.querySelector('.js-taxon-link').setAttribute('href', taxonLink);\n    });\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n    \n    getInatTaxonStats(item, config, placeId).then(stats => {\n\n        if(stats.results.length === 0) return;\n\n        const itemStats = stats.results.find(stat => stat.taxon.name === item.name);\n\n        if(!itemStats) return;\n\n        const placeTaxonCount = itemStats.count;\n        const establishment = itemStats.taxon.preferred_establishment_means;\n\n        document.querySelector('.js-native-container').innerHTML = establishment || '';\n\n        parent.querySelector('.js-world').innerHTML = mode === 'MODAL' ? 'Worldwide' : 'Worldwide sightings';\n        parent.querySelector('.js-place').innerHTML = mode === 'MODAL' ? country : `${country} sightings`;\n        parent.querySelector('.js-place-taxon-count').innerHTML = placeTaxonCount.toLocaleString();\n    });\n}","import { utils } from 'utils/utils';\nimport { getLocation, getPlace } from 'geo/geo';\nimport { getHistogram, getInatPlaceId } from 'api/inat/inat';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport calendarTemplate from 'ui/screens/common/calendar-template.html';\n\nexport const renderCalendar = async (parent, item, config) => {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = calendarTemplate;\n\n    parent.innerHTML = '';\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n\n    let months = [];\n\n    const getENShortMonth = (ordinal) => {\n        let month;\n        switch(ordinal) {\n            case 1:\n                month = 'J';\n                break;\n            case 2:\n                month = 'F';\n                break;\n            case 3:\n                month = 'M';\n                break;\n            case 4:\n                month = 'A';\n                break;\n            case 5:\n                month = 'M';\n                break;\n            case 6:\n                month = 'J';\n                break;\n            case 7:\n                month = 'J';\n                break;\n            case 8:\n                month = 'A';\n                break;\n            case 9:\n                month = 'S';\n                break;\n            case 10:\n                month = 'O';\n                break;\n            case 11:\n                month = 'N';\n                break;\n            case 12:\n                month = 'D';\n                break;\n        }\n        return month;\n    }\n\n    const getMonth = (ordinal, config) => {\n        let month;\n        switch(config.language) {\n            case 'en':\n                month = getENShortMonth(ordinal);\n                break;\n            default:\n                month = getENShortMonth(ordinal);\n        }\n        return month;\n    }\n\n    getHistogram(item, placeId).then(histogram => {\n        const monthlyStats = histogram.results.month_of_year;\n        for (var month in monthlyStats) {\n            months.push({\n                month: getMonth(parseInt(month), config),\n                index: parseInt(month),\n                count: monthlyStats[month]\n            });\n        }\n\n        utils.sortBy(months, 'count', 'desc').forEach( (month, index) => {\n            if(index < 4 && month.count !== 0) {\n                month.class = 'most-observations';\n            } else {\n                month.class = '';\n            }\n        });\n\n        utils.sortBy(months, 'index', 'asc');\n\n        const data = [];\n        let season = [];\n\n        months.map((month,index) => {\n            if(index < 4) {\n                season.push(month);                \n            }\n            if(index === 3) {\n                data.push(season);\n                season = [];\n            }\n            if(3 < index && index < 8) {\n                season.push(month);                \n            }\n            if(index === 7) {\n                data.push(season);\n                season = [];\n            }\n            if(7 < index && index < 12) {\n                season.push(month);                \n            }\n            if(index === 11) {\n                data.push(season);\n                season = [];\n            }\n        });\n\n        renderTemplate({ data }, template.content, parent);\n\n        const currentMonthIndex = new Date().getMonth();\n\n        const monthNodes = document.querySelectorAll('.calendar-box .col > div');\n    \n        monthNodes.forEach((node, index) => {\n            if(index === currentMonthIndex) {\n                node.classList.add('current-month');\n            }\n        });\n    });\n    \n};","export const infraspecifics = [\n    {\n        name: 'Brassica rapa',\n        subspecies: [\n            {\n                variety: 'chinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Bok choy\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Pak choi\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'rapa',\n                names: [\n                    {\n                        \"vernacularName\": \"Turnip\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'oleifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Field mustard\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'pekinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Chinese cabbage\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Wombok\",\n                        \"language\": \"en\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        name: 'Brassica oleracea',\n        variety: 'oleracea',\n        subspecies: [\n            {\n                variety: 'oleracea',\n                names: [\n                    {\n                        \"vernacularName\": \"Wild cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Brassica_oleracea',\n                        eol: 'http://eol.org/pages/1283630/overview'              \n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'alba',\n                names: [\n                    {\n                        \"vernacularName\": \"Cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Cabbage',\n                        eol: 'http://eol.org/pages/38390/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'sabauda',\n                names: [\n                    {\n                        \"vernacularName\": \"Savoy cabbage\",\n                        \"language\": \"en\",\n                        \"wiki\": 'https://en.wikipedia.org/wiki/Savoy_cabbage',\n                        eol: 'http://eol.org/pages/5148887/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'rubra',\n                names: [\n                    {\n                        \"vernacularName\": \"Red cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Red_cabbage'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'acuta',\n                names: [\n                    {\n                        \"vernacularName\": \"Cone cabbage\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Collards\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'Acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Kale\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gemmifera',\n                group: 'Gemmifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Brussels sprouts\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gongylodes',\n                group: 'Gongylodes',\n                names: [\n                    {\n                        \"vernacularName\": \"Kohlrabi\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'italica',\n                group: 'Italica',\n                names: [\n                    {\n                        \"vernacularName\": \"Broccoli\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'botrytis',\n                group: 'Botrytis',\n                names: [\n                    {\n                        \"vernacularName\": \"Cauliflower\",\n                        \"language\": \"en\"\n                    },\n                ]\n            }\n        ]\n    }\n];","import { itemProperties } from 'ui/helpers/data-checking';\nimport { infraspecifics } from 'api/snapdragon/infraspecifics';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport taxaBoxTemplate from 'ui/screens/common/taxa-box-template.html';\n\nexport const renderTaxaBox = async (parent, taxaBoxArgs) => {\n\n    const enums = store.getState().enums;\n\n    parent.innerHTML = '';\n\n    let { item, familyName, familyVernacularName } = taxaBoxArgs;\n\n    const options = [\n        { name: enums.name.RANK, formatter: trait => `UK # ${trait[0]}` },\n        { name: enums.name.HOW_EDIBLE, formatter: trait => trait[0] }\n    ];\n\n    let trait = itemProperties.getActiveTrait(item, options);\n    \n    const specific = infraspecifics.find(specific => specific.name === item.name);\n    const subSpeciesCount = specific ? specific.subspecies.length : 0;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = taxaBoxTemplate;\n\n    renderTemplate({ subSpeciesCount, familyName, familyVernacularName, trait }, template.content, parent);\n\n    const subspeciesBadge = parent.querySelector('.js-subspecies-badge');\n\n    if(subSpeciesCount === 0) {\n\n        subspeciesBadge.classList.add('hide');\n        \n    } else {\n\n        const members = specific.subspecies;\n\n        subspeciesBadge.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Cultivars of ${item.name}`;            \n            const list = rootNode.querySelector('#badgeListModal .js-modal-text');\n            let html = '<div class=\"modal-list scrollable\">';\n            members.forEach(member => {\n                html += `<div><span>subspecies: ${member.name}</span>`;\n                html += `<ul>`;\n                member.names.forEach(name => {\n                    if(name.language === config.language)\n                        html += `<li>name: ${name.vernacularName}</li>`;\n                });\n                html += `</ul></div>`;\n            });\n            html += '</div>';\n            list.innerHTML = html;\n        });\n    }\n}","import { renderTemplate } from 'ui/helpers/templating';\n\nimport badgeTemplate from 'ui/screens/common/badge-template.html';\n\nexport const renderBadge = (badge, item, config) => {\n\n    let names = [ ...new Set(item.names.map(name => {\n        return {\n            common: name.vernacularName.toLowerCase(),\n            language: name.language\n        }\n    })) ];\n\n    const languageNames = names.reduce(function (r, a) {\n        r[a.language] = r[a.language] || {};\n        r[a.language].name = config.languages.find(language => language.lang === a.language).name;\n        r[a.language].names = r[a.language].names || [];\n        r[a.language].names.push(a.common);\n        return r;\n    }, Object.create(null));\n\n    const occurrences = names.length;\n\n    const template = document.createElement('template');\n\n    if(occurrences === 0) {\n\n        badge.classList.add('hide');\n        \n    } else {\n\n        badge.innerHTML = '';\n\n        template.innerHTML = `<span class=\"names-badge js-names-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">${occurrences}</span>`;\n\n        renderTemplate({}, template.content, badge);\n\n        badge.addEventListener('click', event => {\n            \n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = 'Common species names';\n\n            const parent = document.querySelector('#badgeListModal .js-modal-text');\n\n            parent.innerHTML = '';\n\n            template.innerHTML = badgeTemplate;\n\n            renderTemplate({ languageNames }, template.content, parent);\n        });\n    }\n}","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { getBirdSong } from 'xeno-canto/birdsong';\nimport { lookalikeSpecies } from 'ui/screens/common/look-alikes';\nimport { infoSlider } from 'ui/screens/common/info-slider';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { renderInatDataBox } from 'ui/screens/common/inat-box';\nimport { renderCalendar } from 'ui/screens/common/calendar';\nimport { renderTaxaBox } from 'ui/screens/common/taxa-box';\nimport { renderBadge } from 'ui/screens/common/badge';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { firestore } from 'api/firebase/firestore';\n\nimport cardTemplate from 'ui/screens/cards/card-template.html';\n\nexport const renderCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, isInCarousel = true) => {\n\n    if(!selectedItem) return;\n\n    const { layout, config } = store.getState();\n\n    let item;\n\n    const init = async () => {\n\n            const getItemWithProps = async item => {\n\n            if(item.eolId) return new Promise(resolve => resolve(item));\n            \n            const getItem = async item => {\n                return item.family\n                            ? new Promise(resolve => resolve(item))\n                            : await firestore.getSpeciesByName(item.name);\n            };\n\n            const itemWithProps = await getItem(item);\n            \n            itemWithProps.family = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.FAMILY.name.toLowerCase()]) || { names: [ itemWithProps.taxonomy.family ]};\n            itemWithProps.order = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.ORDER.name.toLowerCase()]);\n            itemWithProps.traits = await firestore.getTraitsBySpeciesName(item.name);\n            itemWithProps.vernacularName = itemWithProps.vernacularName || itemProperties.getVernacularName(item, config);\n\n            const names = item.name.split(' ');\n\n            itemWithProps.taxonomy.genus = names[0];                \n            itemWithProps.taxonomy.species = names[1];\n\n            return itemWithProps;\n        };\n    \n        item = selectedItem || collection.nextItem;\n\n        item = await getItemWithProps(item);\n\n        let rootNode;\n    \n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = config.isLandscapeMode ? modal.querySelector('.js-modal-text') : document.querySelector('.right-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = config.isLandscapeMode ? parent : document.querySelector('.js-species-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n    \n        if(mode === 'STAND-ALONE') {        \n            const screen = layout.screens.filter(el => el.name === 'species-card')[0];\n            if(!screen) return;\n        }\n    \n        const prev = document.querySelector('#cardModal .js-prev');\n        const next = document.querySelector('#cardModal .js-next');\n    \n        if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n        if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n        \n        const template = document.createElement('template');\n    \n        template.innerHTML = cardTemplate;\n    \n        renderCommonParts(template, config, item, collection, mode, parent, rootNode, isInCarousel);\n    \n        config.isPortraitMode\n            ? renderPortrait(item, config, mode, rootNode)\n            : renderLandscape(item, config, mode, rootNode);\n    };\n\n    init();\n};\n\nconst renderLandscape = (item, config, mode, rootNode) => {\n\n    const src = rootNode.querySelector('.js-bird-song');\n    \n    getBirdSong(item, src, config.isPortraitMode);\n\n    const inatNode = rootNode.querySelector('.js-inat-box');\n\n    renderInatDataBox(inatNode, item, config, mode);\n    \n    renderCalendar(rootNode.querySelector('.js-calendar-box'), item, config);\n\n    lookalikeSpecies(item, config, rootNode);\n};\n\nconst renderPortrait = (item, config, mode, rootNode) => {\n\n    const images = prepImagesForCarousel(item, config, imageUseCases.SPECIES_CARD);\n\n    const parent = rootNode.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent, parentScreen: rootNode.querySelector('.card-card'), identifier: item.name.replace(' ', '_') });\n\n    const player = rootNode.querySelector('.js-bird-song-player');\n\n    if(mode =='MODAL') {\n        player.style.display = 'none';\n        return;\n    };\n\n    getBirdSong(item, player, config.isPortraitMode);\n\n    player.addEventListener('click', () => {\n        const iframe = document.createElement('iframe');\n        iframe.id = 'birdsong';\n        iframe.style.border = 0;\n        iframe.src = player.dataset.src;\n        document.querySelector('#basicModal .modal-body').classList.add('bird-song-bg');\n        document.querySelector('#basicModal .js-modal-text-title').innerHTML = `${item.name}`;\n        const elm = document.querySelector('#basicModal .js-modal-text');\n        while (elm.firstChild) {\n            elm.removeChild(elm.firstChild);\n         }\n        elm.appendChild(iframe);\n    });\n};\n\nconst renderCommonParts = (template, config, item, collection, mode, parent, rootNode, isInCarousel) => {\n\n    const image = scaleImage({ url: item.starred || item.images[0].url }, imageUseCases.SPECIES_CARD, config);\n    \n    const clone = document.importNode(template.content, true);\n    \n    parent.innerHTML = '';\n    \n    renderTemplate({ name: item.name, vernacularName: item.vernacularName, image, iconicTaxon: item.iconicTaxon }, template.content, parent, clone);\n    \n    renderTaxaBox(rootNode.querySelector('.js-taxa-box'), { item, familyName: item.taxonomy.family, familyVernacularName: item.family.vernacularName || '' });\n\n    infoSlider(item, rootNode.querySelector('.js-info-box'), mode);\n\n    renderBadge(rootNode.querySelector('.js-names-badge'), item, config);    \n\n    renderIcon(item.taxonomy, rootNode);\n\n    if(mode === 'MODAL') {      \n          \n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n        const prev = rootNode.querySelector('#cardModal .js-prev > span');\n        prev.dataset.id = item.id;\n        prev.dataset.transition = 'prev';\n        prev.dataset.modal = 'cardModal';\n\n        const next = rootNode.querySelector('#cardModal .js-next > span');\n        next.dataset.id = item.id;\n        next.dataset.transition = 'next';\n        next.dataset.modal = 'cardModal';\n        \n        const lines = document.getElementsByTagName('hr');\n\n        Array.from(lines).forEach(hr => hr.style.display = 'none');\n    }\n\n    setTimeout(() => {\n        \n        if(config.isPortraitMode) {\n            // hide attribution for now - space issue various across devices\n            const attributions = document.querySelectorAll('.js-attribution-layer');\n                    attributions.forEach(attribution => attribution.classList.add('hide-important'));\n            const indicators = document.querySelectorAll('.js-carousel-indicators');\n                    indicators.forEach(indicator => indicator.classList.add('hide-important'));\n        }\n    });\n};","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { taxonInfoSlider } from 'ui/screens/common/info-slider';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\n\nimport taxonTemplate from 'ui/screens/cards/taxon-card-template.html';\n\nlet transition;\n\nconst modalCarousel = document.querySelector('#cardModal .carousel');\n\nif(modalCarousel) {\n    modalCarousel.addEventListener('click', event => {    \n        transition = event.target.dataset.transition;\n    });\n}\n\nexport const renderTaxonCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, speciesTaxon, rank, isInCarousel = true) => {\n  \n    try {\n\n        const item = selectedItem || collection.nextItem;\n\n        if(!item) {\n            document.querySelector('#cardModal .close').click();\n        }\n\n        const { config } = store.getState();\n\n        let rootNode;\n\n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = document.querySelector('.right-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = document.querySelector('.js-taxon-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n\n        const template = document.createElement('template');\n              template.innerHTML = taxonTemplate;\n        \n        const clone = document.importNode(template.content, true);\n\n        parent.innerHTML = '';\n\n        rank = rank ? rank.toUpperCase() : 'FAMILY';\n\n        let taxon;\n\n        switch(rank) {\n            case 'ORDER':\n                taxon = item.order;\n                break;\n            case 'FAMILY':\n                taxon = item.family;\n                break;\n            case 'GENUS':\n                taxon  = item.genus;\n                break;\n            default:\n                taxon = item.family;\n                break;\n        };\n\n        const familyStats = itemProperties.getFamilyStats(collection.items);\n        const occurrences = familyStats ? familyStats[taxon.name] : 0;\n        const url = item.images ? item.starred ? item.images[0].url : '' : '';\n        const image = scaleImage({ url }, imageUseCases.TAXON_CARD, config);\n        const vernacularName = taxon.vernacularName || itemProperties.getNestedTaxonProp(taxon, config.language, 'names', 'names', '0').split(',')[0];\n        const identification = taxon.identification ? taxon.identification : taxon.descriptions ? taxon.descriptions[0].identification : '';\n        const summary = taxon.summary ? taxon.summary : taxon.descriptions ? taxon.descriptions[0].summary : '';\n                \n        const context = {\n            rank: rank,\n            name: taxon.name,\n            image,\n            alt: taxon ? taxon.alt : '',\n            vernacularName,\n            species: taxon.species || '--',\n            genera: taxon.genera || '--',\n            families: taxon.families || '--',\n            identification,\n            summary,\n            eol: taxon.eol ? taxon.eol.replace('en', config.language) : '',\n            wiki: taxon.wiki ? taxon.wiki.replace('en', config.language) : '',\n            occurrences: occurrences,\n            toxic: taxon.toxic ? `Toxic species: ${taxon.toxic.members.join(', ')}` : '',\n            notableMembers: taxon.members ? R.take(2, taxon.members).join(', ') : ''\n        }\n\n        renderTemplate(context, template.content, parent, clone);\n\n        taxonInfoSlider(item, taxon.traits, rootNode.querySelector('.js-taxon-info-box'), mode);\n\n        switch(rank) {\n            case 'GENUS': \n                rootNode.querySelector('.js-taxon-genus').classList.add('hide-important');\n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'FAMILY': \n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'ORDER':\n                rootNode.querySelector('.js-taxon-rank').classList.add('hide-important');\n                break;\n        }\n\n        renderIcon(item.taxonomy, rootNode);\n\n        if(mode === 'MODAL') {\n\n            rootNode.querySelector('.js-external-links').classList.add('hide');\n\n            rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n            const prev = rootNode.querySelector('#cardModal .js-prev > span');\n            prev.dataset.id = item.id;\n            prev.dataset.transition = 'prev';\n            prev.dataset.modal = 'cardModal';\n\n            const next = rootNode.querySelector('#cardModal .js-next > span');\n            next.dataset.id = item.id;\n            next.dataset.transition = 'next';\n            next.dataset.modal = 'cardModal';\n\n            if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n            if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n\n        }\n        \n        // if(taxon.toxic) {\n        //     document.querySelector('.js-taxon-toxic-warning').innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>';\n        // }\n\n        document.querySelector('.js-external-page-title').innerHTML = `${taxon.name}`;\n        document.querySelector('.js-external-page-body').innerHTML = `<iframe class=\"modal-iframe\" title=\"Wikipedia page for ${taxon.name}\" src=\"${context.wiki}\"></iframe>`;\n\n        const membersCount = document.querySelector('#taxon-card-header .js-names-badge');\n\n        if(!context.occurrences || context.occurrences === 0) membersCount.classList.add('hide-important');\n\n        membersCount.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Members of the ${taxon.name} family`;\n            const members = collection.items.filter(i => i.taxonomy.family.toLowerCase() === taxon.name.toLowerCase());\n            const list = document.querySelector('#badgeListModal .js-modal-text');\n            list.innerHTML = '';\n            members.forEach(member => {\n                list.innerHTML += `<div>${member.name}</div>`;\n            });\n        });\n\n    } catch(e) {\n\n        console.error(e);\n\n        setTimeout(() => {        \n\n            switch(transition) {\n                case 'next':\n                    document.querySelector('#cardModal .carousel-control-next-icon').click();                   \n                    break;\n                case 'prev':\n                    document.querySelector('#cardModal .carousel-control-prev-icon').click();                    \n                    break;\n            }\n        });\n    }\n};","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { firestore } from 'api/firebase/firestore';\n\nlet language;\n\nexport const traitValuesHandler = async config => {\n\n    if(language === config.language) return;\n\n    language = config.language;\n\n    if(!R.isEmpty(store.getState().enums)) return;\n\n    const enums = await firestore.getTraitValues();\n\n    actions.boundUpdateEnums(enums);\n};\n","export const lichen = [\n    {\n        term: \"Lichen\",\n        definition: \"Composite organism of algae or cyanobacteria (or rarely, both), fungi and yeast living in a mutualistic relationship.\",\n        wiki: \"https://en.wikipedia.org/wiki/Lichen\",\n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Fruticose\",\n        definition: \"Growing like tuft or multiple-branched leafless mini-shrub (beardy), upright or hanging down, flat or round 3D branches.\",\n        wiki: \"https://en.wikipedia.org/wiki/Fruticose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Foliose\",\n        definition: \"Having flat, 2D leaf-like structures.\",\n        wiki: \"https://en.wikipedia.org/wiki/Foliose_lichen\",\n        level: 2,\n        image: {\n            url: 'https://content.eol.org/data/media/58/87/e8/509.25630291.260x190.jpg'\n        },\n        branch: 'classification'\n    },\n    {\n        term: \"Crustose\",\n        definition: \"Forming a crust that strongly adheres to a substrate (crusty).\",\n        wiki: \"https://en.wikipedia.org/wiki/Crustose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Leprose\",\n        definition: \"Having a powdery or granular surface.\",\n        wiki: \"https://en.wikipedia.org/wiki/Leprose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Squamulose\",\n        definition: \"Composed of small, often overlapping squamules( scales).\",\n        wiki: \"https://en.wikipedia.org/wiki/Squamulose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Soredium\",\n        definition: \"Common reproductive structures of lichens.\",\n        wiki: \"https://en.wikipedia.org/wiki/Soredium\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Epiphyte\",\n        definition: \"An organism that grows on the surface of a plant and derives its moisture and nutrients from the air, rain, water or surrounding debris.\",\n        wiki: \"https://en.wikipedia.org/wiki/Epiphyte\",\n        branch: 'classification'\n    },\n    {\n        term: \"Gametophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. It is the sexual phase (see Sporophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Gametophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Sporophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. In seed plants it is the roots, stem, leaves, cones and flowers (see Gametophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Sporophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Thallus\",\n        definition: \"Nonreproductive, undifferentiated tissue, or vegetative body part of a lichen. Usually visually prominent.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Thallus type\",\n        definition: \"Means of distinuguishing lichen e.g. foliose, crustose.\", \n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Squamule\",\n        definition: \"One of the scalelike lobes of the thallus of a lichen.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Podetium\",\n        definition: \"The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Apothecium\",\n        definition: \"Wide, open, saucer-shaped or cup-shaped fruit body. Sessile and fleshy.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Rhizine',\n        definition: 'Multiceullar, root-like structures which anchor licen to substrate.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Erhizinate',\n        definition: 'Without rhizines.',\n        technical: 'true',\n        branch: 'general'\n    },\n    {\n        term: 'Hapter',\n        definition: 'Short, peg-like attachments of the lower surface of lichen to the substrate on which they grow.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Common reproductive structures of lichen.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Cortex (lichen)',\n        definition: 'Composed of closely packed fungal hyphae that protects thallus from water loss (evaporation).',\n        branch: 'morphology'\n    },\n    {\n        term: 'Holdfast',\n        definition: 'Means by which a (bushy) lichen is attached to the substrate.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Disc',\n        definition: 'Spore-bearing part of the fruiting body of a lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lobe',\n        definition: 'Leaf-like part of a leafy (foliose) lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Medulla',\n        definition: 'Fungal part of the thallus situated below the skin like upper cortex.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Mycobiont',\n        definition: 'Fungal component of a lichen.',\n        branch: 'general'\n    },\n    {\n        term: 'Photobiont',\n        definition: 'Photosynthetic partner in a lichen (alga or cyanobacterium).',\n        branch: 'general'\n    },\n    {\n        term: 'Cyanobacteria',\n        definition: 'Phylum of bacteria that obtain their energy through photosynthesis. They produce oxygen.',\n        branch: 'classification'\n    },\n    {\n        term: '(Green) Algae',\n        definition: 'Heterogeneous grouping of eukaryotes photosynthesis',\n        branch: 'classification'\n    },\n    {\n        term: 'Placodioid',\n        definition: 'Crustose lichen which radiates out from its centre.',\n        wiki: 'https://en.wikipedia.org/wiki/Placodioid_lichen',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Pruinescence',\n        definition: 'A \"frosted\" or dusty looking coating on top of a surface.',\n        wiki: 'https://en.wikipedia.org/wiki/Pruinescence',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lecanorine',\n        definition: 'Shaped like a plate with a surrounding ring similar tissue to main non-fruiting body (after genus Lecanora).',\n        wiki: 'https://en.wikipedia.org/wiki/Lecanorine_lichen',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Apothecium',\n        definition: 'Wide, open, saucer-shaped or cup-shaped fruit body.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascocarp#Apothecium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascus',\n        definition: 'Spore-bearing cell produced in ascomycete fungi.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascus',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascomycota',\n        definition: '(Ascomycetes or Sac fungi) One of two main fungi divisions (phylum), characterised by spore-containing ascus. Majority of fungal symbionts in lichens are ascomycetes',\n        wiki: 'https://en.wikipedia.org/wiki/Ascomycota',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Basidiomycota',\n        definition: '(Basidiomycetes (Mushrooms)) Reproduce sexually via formation of specialised end cells (basidia) bearing external meiospores.',\n        wiki: 'https://en.wikipedia.org/wiki/Basidiomycota',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Powdery (asexual) reproductive structure (propagule) composed of fungal hyphae wrapped around the photobiont.',\n        wiki: 'https://en.wikipedia.org/wiki/Soredium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Isidium',\n        definition: 'Vegetative (asexual) reproductive structure. Outgrowths from the thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Isidium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Podetium',\n        definition: 'The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Podetium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n];","import * as traitEnums from 'api/traits/trait-types';\nimport { lichen } from 'api/glossary/lichen';\n\nexport const nonTaxaGroup = [\n    { LICHEN_FORM: 'Lichen Form' }     \n];\n\nexport const getNonTaxa = (enums) => {\n    // const SD = Object.keys(enums).length ? enums : traitEnums.enums;\n    const SD = enums;\n    return [\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FRUTICOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Fruticose').definition,\n            quickId: 'Free-standing branching tubes',            \n            names: [ { language: \"en\", name: 'Fruticose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.SOIL}, ${SD.substrate.ROCKS}` },  \n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Letharia vulpina', 'Evernia prunastri', 'Ramalina polymorpha', 'Roccella phycopsis', 'Ramalina farinacea' ],\n            wiki: 'https://en.wikipedia.org/wiki/Fruticose_lichen',\n            url: '81/9d/a2/542.9769039745.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FOLIOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Foliose').definition,\n            quickId: 'Leaflike, with flat sheets of tissue not tightly bound',\n            names: [ { language: \"en\", name: 'Foliose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW },\n                { name: SD.name.USAGE, value: SD.usage.FOOD, examples: [ { language: 'en', value: 'Deer, goats, and caribou' } ] },\n                { name: SD.name.USAGE, value: SD.usage.BIRDS_NEST },\n                { name: SD.name.LIFE_SPAN, value: '30-60a' },\n                { name: SD.name.MEDICINAL_PROPERTIES, value: `${SD.medicinalProperties.ANTIBIOTIC}`},\n                { name: SD.name.CHARACTERISTIC, value: SD.characteristic.BIOINDICATOR},\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Lobaria pulmonaria', 'Xanthoria parietina'  ],\n            genera: [ 'Usnea', 'Cladonia' ],\n            wiki: 'https://en.wikipedia.org/wiki/Foliose_lichen',\n            url: '81/66/25/542.8580717370.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.CRUSTOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Crustose').definition,\n            quickId: 'Crustlike, growing tight against the substrate',\n            names: [ { language: \"en\", name: 'Crustose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.HIGH }\n            ],\n            examples: [ 'Graphis scripta', 'Diploschistes scruposus', 'Caloplaca ochracea', 'Ophioparma ventosa' ],\n            wiki: 'https://en.wikipedia.org/wiki/Crustose',\n            url: '7f/69/15/542.3258067212.260x190.jpg'\n        },\n        // {\n        //     group: nonTaxaGroup[0].LICHEN_FORM,\n        //     id: SD.thallusType.SQUAMULOSE,\n        //     type: SD.nonTaxaType.FORM,\n        //     definition: lichen.find(l => l.term === 'Squamulose').definition,\n        //     quickId: 'Tightly clustered and slightly flattened pebble-like units',\n        //     names: [ { language: \"en\", name: 'Squamulose lichen'}],\n        //     traits: [\n        //         { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n        //         { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.MEDIUM }\n        //     ],\n        //     examples: [ 'Squamarina cartilaginea', 'Vahliella leucophaea', 'Cladonia subcervicornis' ],\n        //     wiki: 'https://en.wikipedia.org/wiki/Squamulose'\n        // },\n    ]\n}","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport * as group from 'api/snapdragon/non-taxa';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport cardTemplate from 'ui/screens/cards/non-taxon-card-template.html';\n\nconst subscriptions = [];\n\nexport const subscribeToNonTaxaSelection = callback => {\n    subscriptions.push(callback);\n};\n\nexport const renderNonTaxonCard = (mode = 'STAND_ALONE', keyTrait, parent = DOM.rightBody, url, isInCarousel = false) => {\n\n    const prev = document.querySelector('#cardModal .js-prev');\n    const next = document.querySelector('#cardModal .js-next');\n\n    if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n    if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n    \n\n    const { enums, config } = store.getState();\n\n    const nonTaxa = group.getNonTaxa(enums).filter(nt => nt.group === group.nonTaxaGroup[0].LICHEN_FORM);\n\n    nonTaxa.forEach(nt => {\n        nt.name = itemProperties.getVernacularName(nt, config, false, 'name');\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cardTemplate;\n    \n    const onChange = items => {\n        subscriptions.forEach(sub => sub(items));\n    };\n\n    const prepImages = (items) => {\n        const itemImagesArray = items.map(item => {\n            return prepImagesForCarousel(item, config, imageUseCases.NON_TAXON_CARD);\n        });\n        const itemImages = utils.shuffleArray([].concat(...itemImagesArray));\n        return R.take(9, itemImages);\n    };\n\n    const callback = async id => {\n\n        const nonTaxon = nonTaxa.find(nt => nt.id === id)\n\n        let items = await firestore.getSpeciesByNameInParallel(nonTaxon.examples);\n            items = items.filter(item => item.images);\n\n        const portraitImagesNode = document.querySelector('.js-non-taxon-card-images');\n\n        const images = prepImages(items);\n\n        if(nonTaxon.type) {\n            document.querySelector('.js-species-header img').src = `https://content.eol.org/data/media/${nonTaxon.url}`;\n        } else {\n            config.isPortraitMode ? imageSlider({ config, images, portraitImagesNode }) : onChange(images);\n        }\n\n        const wikiNode = document.querySelector('.js-non-taxon-card-wiki');\n        const lookup = { name: nonTaxon.name };\n\n        const idNode = document.querySelector('.id-box > div:nth-child(2) > div');\n              idNode.innerHTML = nonTaxon.quickId;\n\n        const definitionNode = document.querySelector('.js-non-taxa-definition div');\n              definitionNode.innerHTML = nonTaxon.definition;\n\n        const nameNode = document.querySelector('.js-non-taxon-card .js-names-container > div:nth-child(1)');\n              nameNode.innerHTML = nonTaxon.id;\n\n        if(mode === 'MODAL') {\n        } else {\n            renderWikiModal(lookup, wikiNode, config);    \n            renderWiki(wikiNode, lookup, config.language);\n        }\n    };\n\n    let rootNode;\n\n    switch(mode) {\n        case 'STAND_ALONE':\n            rootNode = document.querySelector('.right-body');\n            break;\n        case 'SWAP_OUT':\n            rootNode = document.querySelector('.js-taxon-container');\n            break;\n        case 'MODAL':\n            rootNode = document.querySelector('#cardModal');\n            break;\n    }\n\n    parent.innerHTML = '';\n\n    renderTemplate({group: nonTaxa, image: scaleImage({ url })}, template.content, parent);\n\n    if(mode === 'MODAL') {\n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = `Lichen Forms`;\n    }\n\n    rootNode.querySelectorAll('.js-non-taxa .btn.btn-secondary').forEach(form => {\n        form.addEventListener('click', event => {\n            const id = event.target.id;\n            callback(id);\n        });\n    });\n\n    const id = keyTrait || nonTaxa[0].id;\n    document.getElementById(id).click();\n};","import { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { iconicTaxa, matchIcon } from 'api/snapdragon/iconic-taxa';\n\nimport speciesTemplate from 'ui/screens/lists/species-table-template.html';\n\nexport const buildTable = (collection, args) => {\n\n  try {\n\n    const { config, enums, overrideParent } = args;\n\n    const template = document.createElement('template');\n\n    const wide = window.matchMedia(\"(min-width: 1024px)\").matches;\n\n    const getTraitName = (item, enums) => {\n        let traitName = '';        \n        let keyTratLinkClass = 'capitalise underline-link js-key-trait-link';\n        item.taxonomy.phylum = item.taxonomy.phylum || '';\n        if(item.taxonomy) {\n            switch(item.taxonomy.phylum.toLowerCase()) {\n                case 'ascomycota':\n                    traitName = item.taxonomy.order.toLowerCase() === 'pezizales'\n                        ? enums.name.HOW_EDIBLE\n                        : enums.name.THALLUS_TYPE;\n                    if(item.taxonomy.order.toLowerCase() === 'pezizales') keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                case 'basidiomycota':\n                    traitName = enums.name.HOW_EDIBLE;\n                    keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                default:\n                    traitName = '-';\n            }        \n        } else {\n            keyTratLinkClass = 'js-key-trait-link';\n        }\n        return { traitName, keyTratLinkClass };\n    }\n\n    const getOrderLinkClass = item => {\n        let orderLinkClass;\n        if(item.taxonomy && item.taxonomy.order) {\n            orderLinkClass = item.order\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link';\n        } else { orderLinkClass = 'snap-no-link-btn no-underline-link js-taxon-card-link'; }\n        return orderLinkClass;\n    };\n\n    const getIconicTaxonIcon = item => {\n        let iconicTaxonIcon, hideFungiIcon;\n        if(item.iconicTaxon.toLowerCase() === 'fungi') {\n            iconicTaxonIcon = 'hide';\n            hideFungiIcon = '';\n        } else {\n            iconicTaxonIcon = matchIcon(item.taxonomy, iconicTaxa);\n            hideFungiIcon = 'hide';\n        }\n        return { iconicTaxonIcon, hideFungiIcon };\n    };\n\n    const itemImages = collection.items.map(item => { \n\n        let image = item.images.find(i => i.starred) || utils.shuffleArray(item.images)[0];\n            image = scaleImage(image, imageUseCases.SPECIES_LIST, config);\n\n        const { traitName, keyTratLinkClass } = getTraitName(item, enums);\n        const { iconicTaxonIcon, hideFungiIcon } = getIconicTaxonIcon(item);\n\n        const itemImage = {\n            id: item.id,\n            name: item.name,\n            itemName: item.name,\n            genus: item.taxonomy.genus,\n            species: item.taxonomy.species,\n            genusLinkClass: item.genus\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            shortName: itemProperties.trimLatinName(item.name),\n            taxonomy: item.taxonomy,\n            iconicTaxon: item.iconicTaxon,\n            vernacularName: item.vernacularName,\n            snapIndex: item.snapIndex,\n            license: image.license,\n            url: image.url,\n            small: image.small,\n            rightsHolder: image.rightsHolder || 'Public domain',\n            source: image.source,\n            shortName: itemProperties.trimLatinName(item.name),\n            keyTrait: utils.capitaliseFirst(itemProperties.getActiveTrait(item, [{ name: traitName, formatter: trait => trait[0] }])) || '',\n            keyTratLinkClass: keyTratLinkClass,\n            familyLinkClass: item.family\n                                ? 'snap-link-btn underline-link js-taxon-card-link' \n                                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            orderLinkClass: getOrderLinkClass(item),\n            taxonomy: item.taxonomy || { family: '', order: ''},\n            iconicTaxonIcon,\n            hideFungiIcon, \n            hasVideoClassName: !collection.hasVideo ? 'hide-column' : '',\n            hasTaxonClassName: collection.hasVideo ? 'hide-column' : '',\n            provider: image.provider || ''\n        };\n\n        return itemImage;\n    });\n\n    template.innerHTML = speciesTemplate;\n\n    let parent = config.isPortraitMode\n            ? overrideParent\n            : document.querySelector(`.js-species-container[data-container-id=\"${collection.id}\"]`);\n        parent.innerHTML = '';\n\n    renderTemplate({ id: collection.id, itemImages }, template.content, parent);\n\n    const table = parent.querySelector(`table#species_list_id_${collection.id}`);\n\n    const keyTraits = table.querySelectorAll('.js-key-trait-link');\n\n    keyTraits.forEach(vn => {\n        const keyTrait = vn.dataset.keyTrait;\n        const span = document.createElement('span');\n        switch(keyTrait) {                \n            case enums.howEdible.CHOICE:\n                span.innerHTML = '<span class=\"icon choice\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.EDIBLE:\n                span.innerHTML = '<span class=\"icon edible\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.INEDIBLE:\n                span.innerHTML = '<span class=\"icon inedible\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.POISONOUS:\n            case enums.howEdible.DEADLY:\n                span.innerHTML = '<span class=\"icon toxic\"></span>';\n                vn.append(span);\n                break;\n        }\n    });\n\n    const tbody = table.querySelector('.species-table tbody');\n\n    if(!tbody) return;\n    \n    const caption = document.createElement('caption');\n          caption.innerHTML = `Species in ${collection.name}`;\n          caption.classList.add('visually-hidden');\n\n    const thead = document.createElement('thead');\n\n    table.insertBefore(thead, tbody);\n    table.insertBefore(caption, thead);\n\n    const headerRow = document.createElement('tr');\n          headerRow.classList.add('table-header');\n    const imageHeader = document.createElement('th');\n    const speciesHeader = document.createElement('th');\n    const familyHeader = document.createElement('th');\n    const traitNameHeader = document.createElement('th');\n    const iconicTaxonHeader = document.createElement('th');\n\n    const accordionHeader = document.createElement('th');\n          accordionHeader.classList.add('not-sortable');\n\n    speciesHeader.innerHTML = '<span>Species</span';\n    familyHeader.innerHTML = '<span>Family</span><span>Order</span>';\n    traitNameHeader.innerHTML = '<span></span>';\n    iconicTaxonHeader.innerHTML = '<span><i class=\"fas fa-sliders-h\"></i></span>';\n    imageHeader.innerHTML = overrideParent ? '' : '<span><i class=\"fas fa-undo\"></i></span>';\n    if(wide) {        \n        headerRow.appendChild(imageHeader);\n        headerRow.appendChild(speciesHeader);    \n        headerRow.appendChild(familyHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    } else {\n        headerRow.appendChild(imageHeader);    \n        headerRow.appendChild(speciesHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    }\n    if(collection.behaviour === 'static') {\n        headerRow.appendChild(accordionHeader);\n    }\n\n    if(!tbody.querySelector('.table-header')) {\n        thead.appendChild(headerRow);\n    }\n\n    const sortableCalback = () => {};\n\n    utils.makeSortable(document, sortableCalback, wide);\n\n    return new Promise(resolve => resolve({isReady: true}));\n\n  } catch(e) {\n    logError('buildTable', e);\n    return new Promise(resolve => resolve({isReady: false}));\n  }\n}\n","import { actions } from 'redux/actions/action-creators';\n\nconst onSpeciesTimeMatchListeners = [];\nconst onNoteTimeMatchListeners = [];\n\nconst onSpeciesTimeMatch = listener => {    \n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n    onSpeciesTimeMatchListeners.push(listener);\n};\n\nconst onNoteTimeMatch = listener => {    \n    while(onNoteTimeMatchListeners.length > 0) {\n        onNoteTimeMatchListeners.pop();\n    }\n    onNoteTimeMatchListeners.push(listener);\n};\n\nconst onSpeciesPlayRequestListeners = [];\n\nconst onSpeciesPlayRequest = listener => {\n    onSpeciesPlayRequestListeners.push(listener);\n};\n\nconst onPlayerReadyListeners = [];\nconst onPlayerStateChangeListeners = [];\n\nconst subscribeToPlayerStateChange = listener => {\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n    onPlayerStateChangeListeners.push(listener);\n};\n\nlet player, isPlayerReady = false;\n\nconst readyPlayer = () => {\n\n    const onPlayerReady = event => {\n        player = event.target;\n        isPlayerReady = true;\n    };\n    \n    const onPlayerStateChange = event => {\n        player = event.target;\n        if(player) {\n            onPlayerStateChangeListeners.forEach(listener => listener(player));\n        }\n     };\n    \n    new YT.Player('embedded-video', {\n        playerVars: { 'autoplay': 1 },\n        events: {\n        'onReady': onPlayerReady,\n        'onStateChange': onPlayerStateChange\n        }\n    });\n};\n\nconst playVideoFrom = time => {\n\n    if(! typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n    if(! typeof player.seekTo === 'function' || player.seekTo === undefined) return;\n\n    player.seekTo(time + 1);\n    const state = player.getPlayerState();\n    if(state === states[0].key || state === states[2].key) {\n        player.playVideo();\n    }\n};\n\n// -1 – unstarted\n//  0 – ended\n//  1 – playing\n//  2 – paused\n//  3 – buffering\n//  5 – video cued\n\nconst states = [ { key: -1, value: 'unstarted' }, { key: 1, value: 'playing' }, { key: 2, value: 'paused' }, { key: 3, value: 'buffering' } ];\n\nconst setVideoState = (videoPlayer, lesson) => {\n\n    let state = '';\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === lesson.id);\n    \n    if(activeLesson) {\n        if(lesson.id === activeLesson.collectionId) {\n        state = activeLesson.pausedAt ? `Video paused at ${activeLesson.speciesName}` : ''; \n        }\n    } else {\n        state = '';\n    }\n\n    return state;\n\n};\n\nconst isVideoPlayerReady = videoId => {\n    if(isPlayerReady) {\n        const doIdsMatch = videoId === player.getVideoData().video_id;\n        return isPlayerReady && doIdsMatch;\n    } else {\n        return false;\n    }\n};\n\nconst destroyPlayer = () => {\n\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n\n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n\n    if (!player) {\n\n      } else {\n        player.stopVideo();\n        player.destroy();\n        player = null;  // Clear out the reference to the destroyed player\n      }\n};\n\nconst saveVideoState = player => {\n    actions.boundUpdateVideoPlayer(player);\n};\n\nconst getPlayerTime = () => {\n    return Math.floor(player.getCurrentTime());\n};\n\nexport const videoHandler = {\n    readyPlayer,\n    onSpeciesTimeMatchListeners,\n    onNoteTimeMatchListeners,\n    onSpeciesTimeMatch,\n    onNoteTimeMatch,\n    onSpeciesPlayRequestListeners,\n    onSpeciesPlayRequest,\n    onPlayerReadyListeners,\n    subscribeToPlayerStateChange,\n    playVideoFrom,\n    states,\n    setVideoState,\n    destroyPlayer,\n    saveVideoState,\n    isVideoPlayerReady,\n    getPlayerTime\n};","import * as R from 'ramda';\n\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\n\nimport videoTemplate from 'ui/screens/home/home-lesson-intro-video-template.html';\n\nexport const videoSetup = (collection, videoPlayer, parent, startTime) => {\n\n    parent.innerHTML = '';\n   \n    const template = document.createElement('template');\n          template.innerHTML = videoTemplate;\n\n    collection.video.webLabel = collection.video.links[1].label;\n    collection.video.webUrl = collection.video.links[1].url;\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === collection.id) || { collectionId: collection.id, startAt: collection.video.startAt || 0 };\n          activeLesson.playAt = activeLesson.pausedAt || activeLesson.startAt;\n\n    renderTemplate({ video: { ...collection.video, playAt: activeLesson.playAt, location: collection.video.location || '' } }, template.content, parent);\n\n    const timeBeforeVideoPlayerReady = 1000;\n\n    setTimeout(() => {\n\n        videoHandler.readyPlayer();\n\n        let checkInt;\n\n        const checkCurrentTime = player => {\n\n            checkInt = setInterval(function() {\n               const time = Math.floor(player.getCurrentTime());               \n               const match = matchSpeciesTime(time, collection);\n               if(!!match) {\n                   videoHandler.onSpeciesTimeMatchListeners.map(listener => listener(collection, match));\n               }\n               if(!collection.notes) return;\n               const noteMatch = collection.notes.find(note => R.contains(time, note.time));\n               if(noteMatch) {\n                   videoHandler.onNoteTimeMatchListeners.map(listener => listener(collection, noteMatch));\n               }\n            }, 1000);\n        };\n\n        const onPlayerStateChangeCallback = player => {\n\n            if(!typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n\n            const playerState = player.getPlayerState();\n\n            switch(playerState) {\n                case videoHandler.states.find(state => state.value === 'playing').key: // 1\n                    checkCurrentTime(player);\n                    break;\n                case videoHandler.states.find(state => state.value === 'paused').key: // 2\n                    clearInterval(checkInt);\n                    checkInt = null;\n                    break;\n                default:\n                    checkCurrentTime(player);\n            }\n        };\n\n        videoHandler.subscribeToPlayerStateChange(onPlayerStateChangeCallback);\n\n        if(startTime) {\n            setTimeout(() => {\n                videoHandler.playVideoFrom(startTime);\n            }, 1000);\n        }        \n\n    }, timeBeforeVideoPlayerReady);\n        \n    const video = document.getElementsByTagName('iframe')[0];\n    const videoWidth = video.offsetWidth;\n          video.height = videoWidth * 9/16;\n  \n};\n\nexport const matchSpeciesTime = (time, collection) => {\n  const species = collection.items ? collection.items.filter(sp => sp.time) : collection.species.filter(sp => sp.time);\n  const match = species.find(sp => R.contains(time, sp.time));\n  return match;\n}\n","// https://developer.mozilla.org/en-US/docs/Web/API/console#Outputting_text_to_the_console\n\n// import { object } from \"firebase-functions/lib/providers/storage\";\n\nexport const snapLog = (msg, obj) => {\n\n  console.log('SECRET_KEY: ', process.env.SECRET_KEY);\n\n  let css = 'background: #222; color: #bada55; padding: 5px; margin-right: 5px;';\n  if(Array.isArray(obj)) obj = { obj };\n  obj \n    ? console.log(`%c${msg} %o`, css, obj)\n    : console.log(`%c${msg}: ${obj}`, css)\n};\n\nexport const logError = (source, e) => {\n  let css = 'background: #222; color: #fff; padding: 5px; margin-right: 5px;';\n  let output;\n  if(Array.isArray(source)) source = { source };\n  // if(source === typeof(object)) {\n  //   output = `%cError: ${e.message} at %o`;\n  //   console.log(output, source, css);\n  // } else {\n  //   output = `%cError: ${e.message} at ${source}`;\n  //   console.log(output, css);\n  // }\n};\n\nexport const logAPIError = (call, e) => {\n  let source = `Firebase ${call} error`;\n  logError(source, e);\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { snapLog, logError, logAPIError } from 'ui/helpers/logging-handler';\n\nimport definitionTemplate from 'ui/screens/lists/species-list-definition-insert.html';\n\nlet currentlyActiveRow = null;\nlet currentlyActiveSpecies;\n\nexport const onSpeciesChangeHandler = species => {\n\n    try {\n\n        const id = species.id || species.eolId;\n        const tr = document.querySelector(`#id_${id}`);\n\n        currentlyActiveRow = tr;\n        currentlyActiveSpecies = species;\n        \n    } catch(e) {\n      logError(onSpeciesChangeHandler, e);\n    }\n};\n\nexport const openNoteHandler = (note, time) => {\n\n    if(Math.floor(note.time) !== time) return;\n\n    let parent = document.getElementById('insertParent');\n\n    if(parent) parent.remove();\n\n    const template = document.createElement('template');\n          template.innerHTML = definitionTemplate;\n\n    const insert = document.createElement('div');\n          insert.setAttribute('id', 'insertParent');\n\n    if(note.colCount) {\n        insert.classList.add(`col-count-${note.colCount}`);\n        insert.innerHTML = note.description.replace(/\\r?\\n/g, '<br />');\n    }\n\n    if(!currentlyActiveRow) {\n        // first row, before any species have been matched\n        currentlyActiveRow = document.querySelector('.js-list-item'); // first by default\n    }\n\n    currentlyActiveRow.parentElement.insertBefore(insert, currentlyActiveRow);\n\n    if(!note.colCount) {        \n        parent = document.getElementById('insertParent');\n        parent.innerHTML = '';\n        renderTemplate({ note }, template.content, parent);\n        const noteText = document.querySelector('#insertParent > div:nth-child(1) > div:nth-child(2)');\n              noteText.innerHTML =noteText.innerHTML.replace(/\\r?\\n/g, '<br />');\n    }    \n};\n","import { contains } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { utils } from 'utils/utils';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { modalImageHandler } from 'ui/helpers/image-handler';\nimport { buildTable } from 'ui/screens/lists/species-table';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { onSpeciesChangeHandler, openNoteHandler } from 'ui/screens/lists/species-list-definition-insert';\n\nexport const renderSpeciesList = (lesson, args) => {\n\n  const init = async () => {\n\n    const { callingParentContainer, isInCarousel = false } = args;\n\n    const { config, history, enums: traitEnums, collections  } = store.getState();    \n\n    // to ensure we have latest item list if species has been added\n    const collection = collections.find(c => c.id === lesson.id);\n\n    const openAccordionHandler = (species, accordion) => {\n        \n        accordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n        \n        openSpeciesDescriptionHandler(collection, species, true, false);\n\n        const closeAccordionHandler = event => {\n            // remove current close accordion handler\n            accordion.removeEventListener('click', closeAccordionHandler);\n            // change direction of chevron       \n            accordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${species.name}\"></i>`;\n            // attach new open accordion listener\n            accordion.addEventListener('click', event => {\n                openAccordionHandler(species, accordion);\n            });\n            // remove the species description - handled in group action\n            const description = document.querySelector('.species-description');\n            if(description) {\n                description.parentNode.removeChild(description);\n            }\n        };\n\n        // attach close accordion handler\n        accordion.addEventListener('click', closeAccordionHandler);\n    };\n\n    const userClickHandlers = () => {\n\n        const listItemImages = document.querySelectorAll('.table-row img');\n\n              listItemImages.forEach(itemImage => {                 \n                  const item = collection.items.find(item => item.name === itemImage.dataset.itemName)\n                  modalImageHandler(itemImage, item, collection, config); \n              });\n\n        const accordions = document.querySelectorAll('.js-accordion');\n\n              accordions.forEach(accordion => {\n                  const accordionHandler = event => {\n                      const species = collection.items.find(item => item.name === event.currentTarget.dataset.name);\n                      if(species) {\n                        openAccordionHandler(species, accordion);\n                      }\n                  };\n                  accordion.addEventListener('click', accordionHandler);\n              });\n\n        const youtubeIcons = document.querySelectorAll('.js-youtube');\n              youtubeIcons.forEach(icon => {                  \n                  icon.addEventListener('click', event => {       \n\n                    event.stopPropagation();\n\n                    const activeIcon = event.currentTarget;\n                          activeIcon.classList.add('youtube-green-fg');\n                    const speciesName = activeIcon.dataset.name;\n\n                    const species = { ...collection.items.find(item => item.name == speciesName), ...collection.species.find(item => item.name == speciesName) };\n\n\n                    openSpeciesDescriptionHandler(collection, species, true);\n\n                    if(species && species.time) {\n\n                        videoHandler.isVideoPlayerReady(collection.video.id)\n                            ? videoHandler.playVideoFrom(species.time[0])\n                            : videoSetup(collection, store.getState().videoPlayer || [], DOM.rightBody, species.time[0]);\n                    }\n\n                    updateVideoPlayer(collection, species);\n                  });\n              });\n\n        const cardModal = document.querySelector('#cardModal .js-modal-body');\n\n        setTimeout(() => {\n            \n            const speciesCardLinks = document.querySelectorAll('.js-test-card-container-link');\n                  speciesCardLinks.forEach((link, index) => {                \n                      link.addEventListener('click', event => {                    \n                        const name = event.target.dataset.name;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'species-card';\n                        renderCard(collection, 'MODAL', collection.items.find(i => i.name === name), cardModal, isInCarousel);\n                      });\n                  });\n\n            const traitCardLinks = document.querySelectorAll('.js-key-trait-link');\n                  traitCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const keyTrait = event.target.dataset.keyTrait;\n                        const url = event.target.dataset.url;\n                        renderNonTaxonCard('MODAL', keyTrait, cardModal, url);\n                    });\n                  });\n\n            const taxonCardLinks = document.querySelectorAll('.js-taxon-card-link');\n                  taxonCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const taxon = event.target.dataset.family || event.target.dataset.order;\n                        const name = event.target.dataset.name;\n                        const rank = event.target.dataset.rank;\n                        document.querySelector('#cardModal .prev > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'taxon-card';\n                        document.querySelector('#cardModal .next > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .next > span').dataset.card = 'taxon-card';\n                        renderTaxonCard(collection, 'MODAL', collection.items.find(i => i.taxonomy[rank] === name), cardModal, taxon, rank, isInCarousel);\n                    });\n                  });\n\n            document.querySelectorAll('.mushroom-icon').forEach(icon => {\n                icon.innerHTML = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./icons/si-glyph-mushrooms.svg\"/></svg>';\n            });\n\n            const nthChild = config.isLandscapeMode ? 5 : 3;\n            const taxonIcons = document.querySelectorAll(`.table-row.js-list-item td:nth-child(${nthChild}) > span`);\n\n            if(!history) return;\n\n            const noWrongAnswersForThisSpecies = [];\n            history.scores.map(score => score.failsTotals).forEach(totals => {\n                for (let [key, anyWrongAnwers] of Object.entries(totals)) {\n                    if(anyWrongAnwers == false) {\n                        noWrongAnswersForThisSpecies.push(parseInt(key));\n                    }\n                }\n            });\n\n            taxonIcons.forEach(icon => {\n                if(contains(parseInt(icon.id), noWrongAnswersForThisSpecies)) {\n                    icon.classList.add('correct');\n                }\n            });\n        });\n    };\n\n    if(!!collection.notes && !!collection.notes.time) {\n        collection.notes.forEach(n => sp.firstTime = n.time[0]);\n        collection.notes = utils.sortBy(collection.notes, 'firstTime', 'asc');\n    }\n\n    const table = await buildTable(collection, { config, enums: traitEnums, overrideParent: callingParentContainer });\n\n    if(!table.isReady) return;\n\n    userClickHandlers();\n\n    const btnBeginLesson = callingParentContainer.querySelector('.js-btn-current-lesson-begin');\n          btnBeginLesson.addEventListener('click', () => {\n            lessonStateHandler.changeRequest({\n                requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n                requestArgs: {\n                  id: collection.id\n                }\n              });\n          });\n\n    const openSpeciesDescriptionHandler = (collection, species, enableScroll = true, activateYoutubeIcon = true) => {\n\n        try {\n\n            const parent = document.getElementById('insertParent');\n            if(parent) parent.remove();\n\n            const { accordions } = closeOpenAccordions(species.name);\n\n            const activeAccordion = accordions.find(accordion => accordion.dataset.name === species.name);\n            \n            if(activeAccordion) {\n                activeAccordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n\n                if(activateYoutubeIcon) {\n                  const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                        activeYouTubeIcon.classList.add('youtube-green-fg');\n              }\n            }\n\n            // if(activateYoutubeIcon) {\n            //     const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n            //           activeYouTubeIcon.classList.add('youtube-green-fg');\n            // }\n\n            let description = species.description;\n                description = !!description ? description : (species.traits.description && species.traits.description.value) ? species.traits.description.value[0] : '';\n\n            if(description) {\n\n                const id = species.id || species.eolId;\n                const tr = document.querySelector(`#id_${id}`);\n                \n                const td = document.createElement('td');\n\n                const text = document.createElement('div');\n                      text.classList.add('inserted-td');\n                      text.innerHTML = description.replace(/\\r?\\n/g, '<br />');\n\n                td.appendChild(text);\n\n                const insert = document.createElement('div');\n                      insert.classList.add('table-row');\n                      insert.classList.add('species-description');\n                      insert.appendChild(td);\n\n                tr.parentElement.insertBefore(insert, tr.nextSibling);\n\n                const scrollIntoView = (rowHeight, noOfRows) => {\n\n                    const scroll = document.querySelector('.scrollable');\n                    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhStandardBlock').replace('px', ''));\n                    const unit = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vh').replace('px', ''));\n                    const top = (standardBlock * 2) + (rowHeight * (noOfRows - 1)) - ( 2 * unit);\n\n                    scroll.scrollTop = top;\n                };\n\n                if(enableScroll) {\n                    config.isLandscapeMode \n                        ? tr.previousElementSibling.scrollIntoView()\n                        : scrollIntoView(tr.offsetHeight, species.snapIndex);\n                }\n            }\n        } catch(e) {\n          logError(openSpeciesDescriptionHandler, e);\n        }\n    };\n\n    videoHandler.onSpeciesTimeMatch((collection, species) => {\n\n        openSpeciesDescriptionHandler(collection, species);\n        updateVideoPlayer(collection, species);\n        onSpeciesChangeHandler(species);\n    });\n\n    videoHandler.onNoteTimeMatch((collection, note) => {        \n        openNoteHandler(note, videoHandler.getPlayerTime());\n    });\n  };\n\n  init();\n};\n\nlet currentIndex = 0;\n\nconst carouselControlHandler = event => {\n\n    const { collection } = store.getState();\n    \n    let transition = event.target.dataset.transition;\n    let modal = event.target.dataset.modal;\n    let card = event.target.dataset.card;\n    let rank =  event.target.dataset.rank;\n\n    switch(transition) {\n        case 'prev':\n            currentIndex--;\n            currentIndex = currentIndex === -1 ? collection.items.length -1 : currentIndex;\n            break;\n        case 'next':\n            currentIndex++;\n            currentIndex = currentIndex === collection.items.length -1 ? 0 : currentIndex;\n            break;\n    }\n\n    let nextItem = collection.items.find((item,index) => index === currentIndex);\n\n    const parent = document.querySelector(`#${modal} .js-modal-body`);\n    \n    switch(card) {\n        case 'species-card':\n            renderCard(collection, 'MODAL', nextItem, parent, isInCarousel);\n            break;\n        case 'taxon-card':\n            renderTaxonCard(collection, 'MODAL', nextItem, parent, null, rank, isInCarousel);\n            break;    \n    }    \n};\n\nconst prev = document.querySelector('#cardModal .js-prev');\nconst next = document.querySelector('#cardModal .js-next');\n\nif(prev) prev.addEventListener('click', carouselControlHandler);\nif(next) next.addEventListener('click', carouselControlHandler);\n\nconst prevTaxon = document.querySelector('#cardModal .js-prev');\nconst nextTaxon = document.querySelector('#cardModal .js-next');\n\nif(prevTaxon) prevTaxon.addEventListener('click', carouselControlHandler);\nif(nextTaxon) nextTaxon.addEventListener('click', carouselControlHandler);\n\nconst updateVideoPlayer = (collection, species) => {\n        \n    const playerRecords = store.getState().videoPlayer || [];\n    \n    let activeLesson = playerRecords.find(p => p.collectionId === collection.id); \n    \n    if(!activeLesson) {\n        activeLesson = { collectionId: collection.id };\n        playerRecords.push(activeLesson);\n    };\n\n    activeLesson.speciesName = species.name;\n    activeLesson.pausedAt = species.time ? species.time[0] : 0;\n\n    videoHandler.saveVideoState(playerRecords);    \n};\n\nconst closeOpenAccordions = speciesName => {\n\n    const accordions = Array.from(document.querySelectorAll('.js-accordion'));\n    const openAccordions = accordions.filter(accordion => accordion.dataset.name !== speciesName);\n        \n    openAccordions.forEach(inactiveAccordion => {\n        \n        if (inactiveAccordion.innerHTML.indexOf('fa-chevron-up') > -1) {\n            \n            inactiveAccordion.click();\n            inactiveAccordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${speciesName}\"></i>`;\n            \n            const inActiveYouTubeIcon = inactiveAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                  inActiveYouTubeIcon.classList.remove('youtube-green-fg');\n        }\n    });\n\n    const parent = document.querySelector('.species-table tbody');\n    const currentDescriptions = document.querySelectorAll('.species-description');\n            currentDescriptions.forEach(tr => parent.removeChild(tr));\n\n    return { accordions };\n};","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getInatSpecies } from 'api/inat/inat';\nimport { getPlace } from 'geo/geo';\nimport { firestore } from 'api/firebase/firestore';\nimport { enums } from 'ui/helpers/enum-helper';\n\nasync function getItems(collection, config) {\n\n  try {\n\n    if(collection.behaviour === 'dynamic') {\n\n        const collectionIsUnchanged = \n            collection.items && collection.items.length > 0 && collection.items[0].collectionId === collection.id && \n            collection.speciesRange === config.guide.speciesRange;\n\n        if(!!collectionIsUnchanged) {\n            return new Promise(resolve => {\n                resolve(collection.items);\n            });\n\n        } else {\n\n            if(config.guide.guideType === 'LOCATION') {\n  \n              try {\n                const place = await getPlace(config, true);\n\n                config.guide.coordinates = {\n                    long: place.query[0],\n                    lat: place.query[1]\n                };\n              } catch (e) {\n                logError('Error for getPlace: ', e);\n              }\n\n              try {\n                return await getInatSpecies(config);\n              } catch(e) {\n                logErrorg('getInatSpecies in getItems: ', e);\n              }\n            }\n            else { // INAT\n                return await getInatSpecies(config);\n            }            \n        }\n    }\n    else if(collection.behaviour === 'static') { // names only available at this point e.g. 'PICKER';\n        return getSnapdragonSpeciesData(collection.species);\n    }\n  } catch (e) {\n    logError('Error for getItems: ', e);\n    return [];\n  }\n};\n\nconst loadCollection = async (collection, config) => {\n    \n    try {\n        \n        config.collection = { id: collection.id };\n        \n        if(collection.items.length > 0) {\n          // this point is often reached…\n         snapLog(`no collection items in loadCollection, collection: ${collection.name}`);\n          return collection;\n        };\n\n        let items = [];\n\n        try {\n          items = await getItems(collection, config);\n        } catch(e) {\n          logError('getItems in loadCollection', e);\n        }\n\n        if(!items) {\n         snapLog('no items from getItems in loadCollection to filter');\n          return collection;\n        };\n\n        collection.items = items.filter(item => item.name);\n\n        if(collection.nextItem) return; // after refreshing or returning to the page (using rehydrated collection)\n\n        if(contains('lepidoptera', collection.iconicTaxa.map(taxon => taxon.id)) && !contains('insecta', collection.iconicTaxa.map(taxon => taxon.id))) {\n            const insecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() === 'insecta');\n            const lepidoptera = insecta.filter(i => i.taxonomy.order.toLowerCase() === 'lepidoptera');\n            const noninsecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() !== 'insecta');\n            collection.items = [ ...lepidoptera, ...noninsecta ];\n        }\n\n        if(collection.behaviour === 'dynamic') {                    \n            collection.speciesRange = config.guide.speciesRange;\n        }\n\n        let itemReadyCollection;\n\n        if(collection.items) {\n\n            itemReadyCollection = await loadCollectionItemProperties(collection, config);\n            \n            try {\n                return itemReadyCollection;\n            } catch (e) {\n              logError('Error for loadCollectionItemProperties: ', e);\n            }\n\n        } else {\n           snapLog('No results for callbackWhenNoResults');\n            return collection;\n        }\n    } catch (e) {\n      logError('Error for loadCollection: ', e);\n    }\n};\n\nconst loadCollectionItemProperties = async (collection, config) => {\n\n    // collection.items = collection.items.filter(i => i);\n\n    if(collection.behaviour === 'dynamic') {\n        collection.items = utils.sortBy(collection.items.filter(item => item), 'observationCount', 'desc');\n    } else {\n        collection.items.forEach(sp => {\n            if(sp.time) {\n                sp.firstTime = sp.time[0];\n            }\n        });\n        collection.items = utils.sortBy(collection.items, 'firstTime', 'asc');\n    }\n\n    const families = [...new Set(collection.items.map(i => i.taxonomy.family))];\n    const orders = [...new Set(collection.items.map(i => i.taxonomy.order))];\n    const genera = [...new Set(collection.items.map(i => i.taxonomy.genus).filter(g => g))];\n    let familyTaxa = [], orderTaxa = [], genusTaxa = [];\n    let taxa = await firestore.getTaxaNames();\n    taxa = taxa[0].value;\n    const getGenusTaxa = async (genera) => {\n        return Promise.all(genera.map(async (genus) => {\n            const genusTaxon = await firestore.getTaxonByName(config, genus);\n            if(Object.entries(genusTaxon).length > 0 && genusTaxon.constructor === Object)\n                genusTaxa.push(genusTaxon);\n            return genusTaxa;\n        }));\n    };\n    await getGenusTaxa(genera);\n    const getFamilyTaxa = async (families) => {\n        return Promise.all(families.map(async (family) => {\n            const familyTaxon = await firestore.getTaxonByName(config, family);\n            if(Object.entries(familyTaxon).length > 0 && familyTaxon.constructor === Object)\n                familyTaxa.push(familyTaxon);\n            return familyTaxa;\n        }));\n    };\n    await getFamilyTaxa(families);\n    const getOrderTaxa = async (orders) => {\n        return Promise.all(orders.map(async (order) => {\n            const orderTaxon = await firestore.getTaxonByName(config, order);\n            if(Object.entries(orderTaxon).length > 0 && orderTaxon.constructor === Object)\n                orderTaxa.push(orderTaxon);\n            return orderTaxa;\n        }));\n    };\n    await getOrderTaxa(orders);\n    const getFamilyNames = item => {\n        if (item.family && item.family.names) {\n            return item.family.names[0].names ? item.family.names[0].names : item.family.names;\n        }\n        else {\n            return '';\n        }\n    };\n\n    const findRank = (taxa, item, rank) => {\n        const taxonRank = item.taxonomy[rank.name.toLowerCase()];\n        const taxon = taxa.length > 0 ? taxa.find(taxon => taxon.name === taxonRank) : null;\n        return taxon || '';\n    };\n\n    collection.items.forEach(async (item, index) => {\n        const names = item.name.split(' ');\n        item.taxonomy.genus = names[0];\n        item.taxonomy.species = names[1];\n        item.genus = findRank(genusTaxa, item, enums.taxon.GENUS);\n        item.family = findRank(familyTaxa, item, enums.taxon.FAMILY);\n        if (item.family) {\n            item.family.names = getFamilyNames(item);\n            item.family.vernacularName = item.family.names[0];\n        }\n        item.order = findRank(orderTaxa, item, enums.taxon.ORDER);\n        item.snapIndex = index + 1;\n        item.id = item.eolId;\n        item.vernacularNames = itemProperties.getVernacularNames(item, config);\n        item.vernacularName = itemProperties.getVernacularName(item, config);\n        item.name = names.slice(0, 2).join(' ');\n        item.questionIds = item.questionIds || [];\n    });\n    const loadTraitsInParallel = items => {\n        return Promise.all(items.map(async (item) => {\n            const itemTraits = await firestore.getTraitsBySpeciesName(item.name);\n            item.traits = itemTraits || {};\n            return item;\n        }));\n    };\n    await loadTraitsInParallel(collection.items);\n    collection.itemIndex = 0;\n    collection.glossary = [...Array.from(new Set(collection.items.map(item => item.iconicTaxon))), 'common'];\n    return collection;\n};\n\nconst getSnapdragonSpeciesData = async species => {\n    return await firestore.getSpeciesInParallel(species);\n}\n\nexport const collectionHandler = {\n    loadCollection,\n    loadCollectionItemProperties,\n    getSnapdragonSpeciesData\n};\n\n","import { contains, clone } from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderSpeciesList } from 'ui/screens/lists/species-list';\nimport { collectionHandler  } from 'ui/helpers/collection-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nconst changeRequest = async args => {\n\n  const { requestType, requestArgs } = args;\n\n  const { config, collection, collections, counter } = store.getState();\n\n  switch(requestType) {\n\n    case enums.lessonState.PAUSE_LESSON:\n      if(config.isLandcapeMode) return;      \n      changeLessonState(requestType, collection, config);\n    break;\n    \n    case enums.lessonState.UPDATE_COLLECTION:\n      updateCollection(requestArgs);\n    break;\n    \n    case enums.lessonState.SAVE_LESSON_PROGRESS:\n      saveCurrentLesson(collection);\n    break;\n    \n    case enums.lessonState.GET_LESSON_PROGRESS:\n      const { collectionToLoad, updatedCounter, guide } = requestArgs;\n      return await getUserLessonProgressState(collectionToLoad, { ...config, guide }, collections, updatedCounter);\n    \n    case enums.lessonState.ADD_SPECIES_TO_COLLECTION:\n      return await addExtraSpeciesSelection(requestArgs);\n    \n    case enums.lessonState.RENDER_SPECIES_LIST:\n      renderLessonSpeciesList(requestArgs);\n    break;\n    \n    case enums.lessonState.BEGIN_OR_RESUME_LESSON:\n      const { id } = requestArgs;\n      beginOrResumeLesson(id);\n    break;\n\n    case enums.lessonState.NEXT_ROUND:\n      const { lesson } = requestArgs; \n      changeLessonState(enums.lessonState.NEXT_ROUND, collection, lesson);\n    break;\n  }\n};\n\nconst beginOrResumeLesson = async (selectedLessonCollectionId, requestedlessonState)  => {\n\n  const { collections, collection: currentCollection, config } = store.getState();\n\n  const collectionToLoad = lessonStateHelper.getCollectionToLoad(currentCollection, collections, selectedLessonCollectionId);\n\n  const { collection, score, lesson } = await getUserLessonProgressState(collectionToLoad, config, collections);\n\n  const lessonState = !!requestedlessonState ? requestedlessonState : (score && score.collectionId === collection.id) \n          ? enums.lessonState.RESUME_LESSON\n          : enums.lessonState.BEGIN_LESSON;\n\n  changeLessonState(lessonState, collection, lesson); \n};\n\nconst renderLessonSpeciesList = async requestArgs => {\n\n  const { lesson: collectionToLoad, container } = requestArgs;\n\n  const { config, collections } = store.getState();\n\n  const { collection } = await getUserLessonProgressState(collectionToLoad, config, collections);\n\n  setTimeout(() => {\n    renderSpeciesList(collection, { callingParentContainer: container });\n  });\n};\n\nconst getUserLessonProgressState = async (collectionToLoad, config, collections, newLessonCounter) => {\n\n  const { counter: stateCounter, lessons, lesson: savedLesson } = store.getState();\n\n  const counter = newLessonCounter || stateCounter;\n\n  const userLessonState = lessonStateHelper.getUserLessonState(lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter);\n\n  await collectionHandler.loadCollection(userLessonState.collection, config, userLessonState.counter, collections);\n\n  setActiveCollection(userLessonState);\n\n  return userLessonState;\n};\n\nconst changeLessonState = async (lessonState, collection, lesson) => {    \n\n  switch(lessonState) {\n      case enums.lessonState.BEGIN_LESSON: {\n            actions.boundStopStartLesson({ index: 0, isLessonPaused: false });\n          break;\n      }\n      case enums.lessonState.PAUSE_LESSON: {\n\n        if(collection.items) {\n          const { index } = lessonStateHelper.getLatestCounter(collection);\n          actions.boundStopStartLesson({ index, isLessonPaused: true, log: { index: index, collection: collection.id  } });\n        }\n\n        break;\n      }\n      case enums.lessonState.RESUME_LESSON: {\n          actions.boundStopStartLesson({ ...lessonStateHelper.getLatestCounter(collection), isLessonPaused: false });\n          break;\n      }\n      case enums.lessonState.NEXT_ROUND: {\n          if(lesson.isLevelComplete) {\n            actions.boundNextLevel({ index: 0, lesson });\n          } else if(lesson.isNextRound) {\n              actions.boundNextRound({ index: 0, lesson: { ...lesson, currentRound: lesson.currentRound + 1 } });\n          };\n          break;      \n      }\n  }\n  return lesson;\n};\n\nconst addExtraSpeciesSelection = async requestArgs => {\n\n  const { config, collection } = requestArgs;\n\n  if(!collection) return;\n\n  if(!collection.items) return;\n\n  const extraSpecies = config.guide.species.filter(s => !contains(s.name, collection.items.map(i => i.name)));\n\n  const items = await collectionHandler.getSnapdragonSpeciesData(extraSpecies);\n\n  const collectionExtension = await collectionHandler.loadCollectionItemProperties({ items }, config);\n  collection.items = [ ...collection.items, ...collectionExtension.items];\n  const lesson = {\n      collection,\n      counter: { ...store.getState().counter, index: 0 },\n      lesson: { currentRound: 1, rounds: 0, isNextRound: true },\n      layout: null,\n      history: null,\n      score: clone(progressState.score)\n  };\n\n  setActiveCollection(lesson);\n};\n\nconst updateCollection = requestArgs => {\n  const { config, collection } = requestArgs;\n  actions.boundUpdateCollection({ config, collection }); // or use setActive-Collection?\n};\n\nconst setActiveCollection = lesson => {\n  lesson.counter = lesson.counter || { };\n  actions.boundSetActiveCollection({ lesson });\n  const { user } = store.getState();\n  firestore.addCollection(lesson.collection, user);\n};\n\nconst recordUserAction = action => {\n  actions.boundClickEvent(action);\n};\n\nconst saveCurrentLesson = async collection => {\n\n  const { counter, lessonPlan, lessonPlans, layout, lesson, score, history, bonusLayout, enums, config } = store.getState();\n  \n  config.collection.id = collection.id;\n\n  const savedLesson = { \n      name: collection.name,\n      config, collection, counter, lessonPlan, lessonPlans, layout, lesson, score: clone(score), history, bonusLayout, enums\n  };\n\n  actions.boundSaveLesson(savedLesson);\n\n  return savedLesson;\n};\n\nexport const lessonStateHandler = {\n  changeRequest,\n  recordUserAction\n};","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getLessonScores = (history, lesson, stateScore, savedScore) => {\n\n      if(!history) return [ stateScore ];\n\n      const historyIsUpToDate = R.contains(stateScore.binomial, history.scores.map(s => s.binomial));\n\n      let scores = [];\n\n      if(lesson.isNextRound) {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : stateScore.total === 0\n                        ? history.scores\n                        : [...history.scores, stateScore];\n      } else {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : [...history.scores, stateScore];\n      }\n      \n      return scores;\n};\n\nconst getSummaryRows = (rows) => {\n      rows = rows.map((r, i) => {\n            const _r = {\n                  ...r, id: `${i}${utils.toCamelCase(r.binomial)}`, question: r.question.term ? r.question.term : r.question, \n                        answers: r.answers.map(a => { return getAnswer(a, r); })\n            };\n            return _r;\n      });\n      return rows;\n};\n\nexport const scoreSummaryHandler = {\n    getLessonScores,\n    getSummaryRows\n}\n\nfunction getAnswer(a, r) {\n      \n      const isObj = typeof a === 'object';\n\n      const value = isObj ? a.value || a.term : a;\n      const hasImage = isObj && !!a.url;\n      const url = isObj ? a.url : '';\n      const question = r.question.term || r.question;\n      const isTrue = \n                  value !== \"\" && \n                          (utils.parseToLowerCase(value) === utils.parseToLowerCase(question))\n                        // || R.contains(value, r.answer))\n\n      const isWrongAnswer = !isTrue && utils.parseToLowerCase(value) === utils.parseToLowerCase(r.answer);\n      const name = isObj ? a.name || '' : '';\n      \n      const answer = {\n            value,\n            url,\n            hasImage,\n            isTrue,\n            isWrongAnswer,\n            name\n      };\n      return answer;\n}\n","import { enums } from 'ui/helpers/enum-helper';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { scoreSummaryHandler } from 'ui/screens/progress/score-summary-handler';\n\nimport summaryTemplate from 'ui/screens/progress/score-summary-template.html';\nimport summaryRowTemplate from 'ui/screens/progress/score-summary-row-template.html';\nimport summaryNoRowTemplate from 'ui/screens/progress/score-summary-no-row-template.html';\n\nexport const renderScoreSummary = (lessonId, summaryContainer) => {\n\n      const init = () => {\n\n            const { lessons, score: stateScore, userAction } = store.getState();\n\n            const { collection, history, config, score: savedScore } = lessons.length > 0\n                        ? !!lessons.find(l => l.collection.id === parseInt(lessonId))\n                              ? lessons.find(l => l.collection.id === parseInt(lessonId))\n                              : store.getState()\n                        : store.getState();\n      \n            const { lesson } = store.getState();\n      \n            if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n      \n            const template = document.createElement('template');\n                  template.innerHTML = summaryTemplate;\n      \n            const parent = config.isLandscapeMode\n                        ? summaryContainer || document.querySelector('#lessonModal .js-modal-text')\n                        : DOM.rightBody ;\n                  parent.innerHTML = '';\n            \n            renderTemplate({ collection, lesson }, template.content, parent);\n\n            const actionLinks = document.querySelectorAll('.js-continue-link');\n\n            setTimeout(() => {\n              actionLinks[0].focus();\n            }, 250);\n\n            if(summaryContainer) {\n                  actionLinks.forEach(link => link.classList.add('snap-inactive'));\n            }\n\n            if(lesson.layoutName === 'summary') {\n                  const progressLink = document.querySelector('.js-review-progress');\n                        progressLink.innerHTML = '';\n            }\n            \n            let scores = scoreSummaryHandler.getLessonScores(history, lesson, stateScore, savedScore).reverse();\n                scores.forEach(s => renderScoreSummaryRow(scores, s, config));\n      \n            const handleContinueLesson = async e => {\n                e.preventDefault();\n                lessonStateHandler.changeRequest({\n                      requestType: enums.lessonState.NEXT_ROUND,\n                      requestArgs: {\n                        id: lessonId,\n                        lesson: { ...lesson, isNextRound: true }\n                      }\n                    });\n            };\n      \n            const handleNewLesson = async event => {                   \n                  await lessonStateHelper.purgeLesson();\n            };\n      \n            if(lesson.isLessonComplete) {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.innerHTML = 'START NEW LESSON';\n                        actionLink.addEventListener('click', handleNewLesson, { once: true });\n                  });\n            } else {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.addEventListener('click', handleContinueLesson, { once: true });\n                  });\n            }\n\n            window.addEventListener('keydown', e => {\n              if(e.key === 'Enter') {\n                handleContinueLesson(e);\n              }                  \n            }, { once: true });\n      };\n\n      init();\n}\n\nconst renderScoreSummaryRow = (scores, s, config) => {\n    \n      const template = document.createElement('template');\n            template.innerHTML = summaryRowTemplate;\n\n      const parent = document.querySelector('.js-score-summary-rows');\n            \n      if(s.total === 0) {\n            parent.innerHTML = '';\n            template.innerHTML = summaryNoRowTemplate;            \n            renderTemplate({ }, template.content, parent);\n            return;\n      }\n      let rows = [ ...s.passes, ...s.fails ];\n          rows = scoreSummaryHandler.getSummaryRows(rows);          \n\n      const vernacularName = s.vernacularName || itemProperties.getVernacularName(s.binomial, config);\n\n      renderTemplate({ vernacularName, binomial: s.binomial, rows, score: `${s.correct}/${s.total}` }, template.content, parent);\n\n      if(scores.length > 0) {\n            const noQuestionsText = parent.querySelector('.js-no-questions');                  \n            if(noQuestionsText) {\n                  noQuestionsText.innerHTML = '';\n            }\n      }\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nimport testCardTemplate from 'ui/screens/cards/test-card-template.html';\n\nexport const renderTestCardTemplate = (collection, context) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = testCardTemplate;\n\n    const { config } = store.getState();\n\n    const modal = config.isLandscapeMode ? document.querySelector('#lessonModal') : document;\n\n    const parent = config.isLandscapeMode \n                        ? modal.querySelector('.js-modal-text')\n                        : DOM.rightBody ;\n          parent.innerHTML = '';\n\n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = collection.name;\n\n    context.className = context.className || '';\n    context.headerClassName = context.headerClassName || '';\n\n    context.statement = context.statement || '';\n    context.providerQuestion = context.providerQuestion || '';\n\n    renderTemplate(context, template.content, parent);\n\n    const progressLink = modal.querySelector('.js-review-progress');\n\n    if(progressLink) {\n\n        progressLink.innerHTML = 'Progress';\n        progressLink.addEventListener('click', e => {\n\n          const summaryContainer = modal.querySelector('.js-summary-container');\n\n          const renderSummaryCard = () => {\n\n              renderScoreSummary(collection.id, summaryContainer);\n\n              let count = 1;\n\n              const toggleScreens = (screenOne, screenTwo) => {\n                  hideCurrentCard(screenOne);\n                  progressLink.innerHTML = count % 2 === 0 ? 'Progress' : 'Quiz';\n                  count++;\n                  screenTwo.classList.remove('swap-out-card');\n                  progressLink.addEventListener('click', e => {                    \n                      toggleScreens(screenTwo, screenOne);\n                  }, { once: true });\n              };\n\n              toggleScreens(testCardContainer, summaryContainer);\n          };\n\n          renderSummaryCard();\n\n        }, { once: true });\n\n        progressLink.focus();\n    }\n\n    toggleStatementAndQuestion(config);\n\n    const testCardContainer = modal.querySelector('.js-test-card-container');\n    const testCard = modal.querySelector('.js-test-card-container');\n    const testCardIcon = testCard.querySelector('.js-card-link');\n\n    const item = collection.nextItem || collection.items[context.bonus.itemIndex];\n\n    const hideCurrentCard = (container, card) => {\n\n        container.classList.add('swap-out-card');\n        container.classList.remove('swap-in-card');\n\n        if(card) {\n            card.classList.add('swap-out-card');\n            card.classList.remove('swap-in-card');\n        }\n    };\n\n    const showNextCard = (container, selector) => {\n                \n        container.classList.remove('swap-out-card');\n        // container.classList.add('swap-in-card');\n\n        const card = modal.querySelector(selector);\n        const icon = card.querySelector('.js-card-link');\n              icon.classList.remove('disabled-icon');\n\n        return { card, icon };\n    }\n\n    testCardIcon.addEventListener('click', async event => {\n        \n        const speciesContainer = modal.querySelector('.js-species-container');\n        const taxonContainer = modal.querySelector('.js-taxon-container');\n\n        const renderSpeciesCard = async () => {\n\n            renderCard(collection, 'SWAP_OUT', item, speciesContainer, false);\n                    \n            setTimeout(() => {            \n\n                hideCurrentCard(testCardContainer, testCard);\n\n                const { card: speciesCard, icon: speciesIcon } = showNextCard(speciesContainer, '.js-species-card');\n\n                speciesIcon.addEventListener('click', async event => {\n\n                    item.lichen \n                        ? renderNonTaxonCard('SWAP_OUT', item.keyTrait, taxonContainer, item.images.find(i => i.starred) ? item.images.find(i => i.starred).url : item.images[0].url)\n                        : renderTaxonCard(collection, 'SWAP_OUT', item, taxonContainer, false);\n                    \n                    hideCurrentCard(speciesContainer, speciesCard);\n\n                    const { card: taxonCard, icon: taxonIcon } = item.lichen\n                        ? showNextCard(taxonContainer, '.js-non-taxon-card')\n                        : showNextCard(taxonContainer, '.js-taxon-card');\n\n                    taxonIcon.addEventListener('click', event => {\n                        hideCurrentCard(taxonContainer, taxonCard);\n                        showNextCard(testCardContainer, '.js-test-card');\n                    });\n                });\n\n            }, 500);\n        };\n\n        await renderSpeciesCard();\n    });\n\n    renderIcon(item.taxonomy, modal);\n\n    let testContentParent = modal.querySelector('.js-test-card-content');\n\n    return testContentParent;\n};\n\nconst toggleStatementAndQuestion = config => {\n\n    if(config.isLandscapeMode) return;\n    \n    const statement = document.querySelector('.js-statement-para');\n    const question = document.querySelector('.js-question-para');\n\n    question.classList.add('hide');\n\n    var iterations = 20;\n    var i = 0;\n\n    var interval = setInterval(function() { \n            if(i % 2) {\n                question.classList.add('hide');\n                statement.classList.remove('hide');\n            } else {\n                question.classList.remove('hide');\n                statement.classList.add('hide');\n            }\n            i++; \n            if(i >= iterations) clearInterval(interval);\n    }, 5000);\n\n};\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport languageSelectionTemplate from 'ui/screens/common/language-selection-template.html';\n\nexport const languagePicker = (config, parent, listener) => {\n\n    const languages = config.languages;\n\n    const template = document.createElement('template');\n          template.innerHTML = languageSelectionTemplate;\n    \n    parent.innerHTML = '';\n\n    renderTemplate({ languages }, template.content, parent);\n\n    const taxonLanguageBtn = document.querySelector('#taxonLanguageBtn');\n          taxonLanguageBtn.innerHTML = `Taxon language [ ${languages.find(l => l.lang === config.language).name} ] `;\n\n    const taxonLanguageTxt = document.querySelector('#taxonLanguageTxt');\n          taxonLanguageTxt.innerHTML = languages.find(l => l.lang === config.language).name;\n\n    document.querySelectorAll('.dropdown-item').forEach(language => {\n        language.addEventListener('click', event => {\n            config.language = languages.find(l => l.lang === event.target.id).lang;\n            const name = languages.find(l => l.lang === event.target.id).name;\n            taxonLanguageBtn.innerHTML = `Taxon language [ ${name} ]`;\n            taxonLanguageTxt.innerHTML = name;\n            listener(config);\n        });    \n    });\n\n};","import autocomplete from 'autocompleter';\nimport { getAutocompleteBy } from 'api/inat/inat';\nimport { GoogleAutocomplete } from 'geo/geo';\n\n// https://github.com/kraaden/autocomplete\n\nexport const inatAutocomplete = (input, type, className, rb) => {\n\n    const MIN_LENGTH = 3;\n\n    async function getUserSuggestions(text) {\n        const users = await getAutocompleteBy(text, 'users');\n        return users.results.map(user => {\n            return { label: user.login_autocomplete, value: user.id, photo: user.icon, name: user.name };\n        });\n    }\n\n    async function getInatPlaceSuggestions(text) {        \n        const users = await getAutocompleteBy(text, 'places');\n        return users.results.map(place => {\n            return { label: place.display_name, value: place.id };\n        });\n    }    \n\n    function getPlaceSuggestions(text, update) {\n        let callback = null;\n        callback = predictions => {\n            update(predictions.map(prediction => {\n                return { label: prediction.description, value: prediction.place_id };\n            }));\n        } \n        GoogleAutocomplete(text, callback);\n    }\n\n    async function getProjectSuggestions(text) {\n        const projects = await getAutocompleteBy(text, 'projects');\n        return projects.results.map(place => {\n            return { label: place.title, value: place.id };\n        });\n    }\n    \n    const autocompleteRef = autocomplete({\n        input: input,\n        fetch: function(text, update) {\n            switch(type) {\n                case 'users':\n                    getUserSuggestions(text).then(users => {\n                        update(users);\n                    });\n                    break;\n                case 'places':\n                    getPlaceSuggestions(text, update);\n                    break;\n                case 'projects':\n                    getProjectSuggestions(text).then(projects => {\n                            update(projects);\n                        });\n                    break;\n            }           \n\n        },\n        onSelect: function(item) {\n            input.value = item.label;\n            input.name = item.value;\n        },\n        className: className,\n        rb: rb,\n        minLength: MIN_LENGTH,\n        debounceWaitMs: 200\n    });\n\n    return autocompleteRef;\n};","export const switchHandler = (idSwitch, startingPosition, callback) => {\n    \n    if(!idSwitch) return;\n    \n    const state = { position: startingPosition === 'left' ? 'right' : 'left' };\n\n    let switchControl = idSwitch.querySelector('div');\n    let leftText = idSwitch.parentElement.querySelector('.txt-left');\n    let rightText = idSwitch.parentElement.querySelector('.txt-right');\n\n    const switcher = () => {\n        \n        switch(state.position) { \n            case 'left':\n                switchControl.parentElement.classList.add('right');\n                switchControl.parentElement.classList.remove('left');\n                leftText.classList.remove('selected');\n                rightText.classList.add('selected');\n                state.position = 'right';\n                break;\n            case 'right':\n                switchControl.parentElement.classList.add('left');\n                switchControl.parentElement.classList.remove('right');\n                leftText.classList.add('selected');\n                rightText.classList.remove('selected');\n                state.position = 'left';\n                break;\n        }\n        callback(state.position);\n    }\n\n    switcher();\n\n    idSwitch.addEventListener('click', event => {\n        switcher();        \n    });\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace, GooglePlaceDetails } from 'geo/geo';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\n\nimport locationTemplate from 'ui/create-guide-modal/location-template.html';\nimport googleLogoImg from 'img/powered_by_google_on_white_hdpi.png';\n\nexport const renderLocation = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    createGuide.saveStep('LOCATION');\n\n    let locationPlace = config.guide.locationPlace;\n    let autocompleteRef;\n\n    const template = document.createElement('template');\n          template.innerHTML = locationTemplate;\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    config.guide.season.observableMonths = config.guide.season.observableMonths || config.season.observableMonths;\n\n    if(config.guide.season.observableMonths) {\n\n        const months = config.guide.season.observableMonths.map(month => month.name);\n        const observableMonths = `${months[0]}-${months[months.length - 1]}`;\n        const defaultNoOfRecords = config.guide.noOfRecords;\n\n        renderTemplate({ observableMonths, noOfRecords: defaultNoOfRecords }, template.content, parent);\n    }\n\n    const defaultLocationTxt = 'Use your current location';\n\n    const setLocationLongLatBtn = modal.querySelector('.js-set-location-btn');\n          setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n\n    async function handleSetLocationLongLat(event) {\n\n        event.stopPropagation();\n        setLocationLongLatBtn.innerHTML = 'Updating location…'\n        const place = await getPlace(config, true);\n        config.guide.locationType = 'longLat';\n        config.place = place;\n        config.guide.locationLongLat = place.longLocation;\n        setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n        \n        createGuide.setConfig(config);\n        createGuide.saveStep('LOCATION');\n    }\n\n    setLocationLongLatBtn.addEventListener('click', handleSetLocationLongLat);\n\n    const locationPlaceInput = modal.querySelector('#inat-place');\n          locationPlaceInput.placeholder = config.isLandscapeMode\n                                            ? 'Or start typing the name of a place you are interested in.'\n                                            : 'Or start typing the name of a place.';\n          locationPlaceInput.focus();\n\n    // let counter = 0;\n\n    const handleLocationPlaceInput =  e => {\n        locationPlaceInput.removeEventListener('keypress', handleLocationPlaceInput);\n        // counter++;        \n        autocompleteRef = inatAutocomplete(locationPlaceInput, 'places', 'autocomplete-options-container', 'place');\n        // saveLocationBtn.disabled = false;        \n        // setTimeout(() => {\n        //     const googleImageContainer = modal.querySelector('#inat-place-autocomplete #googleLogoContainer');\n        //     if(!googleImageContainer && counter >= 3) {\n        //         const options = modal.querySelector('#inat-place-autocomplete');\n        //         if(options) options.innerHTML += `<div id=\"googleLogoContainer\"><img id=\"googleLogo\" src=\"${googleLogoImg}\" alt=\"\"></div>`;\n        //     }            \n        // },750);  \n    }\n\n    locationPlaceInput.addEventListener('keypress', handleLocationPlaceInput);\n\n    locationPlaceInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    locationPlaceInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('locationForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(locationPlaceInput.value !== '') {\n            saveLocation(config, locationPlaceInput, locationPlace, createGuide);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        locationPlaceInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveLocation(config, locationPlaceInput, locationPlace, createGuide);                   \n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    let range = config.guide.speciesRange;\n    const rangeTxt = modal.querySelector('.js-range');\n          rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n    modal.querySelector('.js-set-range-input').value = range;\n\n    const slider = modal.querySelector('.js-set-range-input');\n    \n    const updateSlider  = event => {\n        range = event.target.value;\n        config.guide.speciesRange = range;\n        rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n        createGuide.setConfig(config);\n    };\n    \n    slider.addEventListener('change', updateSlider);\n\n    createGuide.nextStepActionArrow.addEventListener('click', event => {\n        if(autocompleteRef)\n            autocompleteRef.destroy();\n    });\n\n    const idSwitch = parent.querySelector('.js-snap-switch-slider');\n\n    const switchCallback = position => {\n\n        const config = createGuide.getConfig();\n\n        const currentType = config.guide.season.type;\n\n        if(position === 'right') {\n            config.guide.season.type = 'all_year';\n        } else {\n            config.guide.season.type = 'months';\n        }\n\n        createGuide.setConfig(config);\n        \n        if(config.guide.season.type !== currentType) {\n            createGuide.saveStep('SEASON');\n        }        \n    };\n\n    const position = config.guide.season.type === 'months' ? 'left' : 'right';\n\n    switchHandler(idSwitch, position, switchCallback);\n\n    const noOfRecords = document.querySelector('.js-location-no-of-records');\n          noOfRecords.addEventListener('change', e => {\n            const config = createGuide.getConfig();\n                  config.guide.noOfRecords = parseInt(noOfRecords.value);\n            createGuide.setConfig(config);\n          });\n}\n\nconst saveLocation = (config, locationPlaceInput, locationPlace, createGuide) => {\n\n    let selectedText = locationPlaceInput.value;\n    let selectedId = locationPlaceInput.name;\n\n    config.guide.locationType = 'longLat';\n    config.guide.place.name = selectedText;\n    config.guide.locationLongLat = selectedText;\n\n    config.guide.locationType = 'longLat';\n    config.guide.locationLongLat = selectedText;\n\n    const callback = geocoderResult => {\n        if(geocoderResult && geocoderResult.length > 0) {\n            const lat = geocoderResult[0].geometry.location.lat();\n            const long = geocoderResult[0].geometry.location.lng();\n            config.guide.coordinates = { lat, long };\n            \n            locationPlaceInput.value = '';\n            \n            createGuide.setConfig(config);\n            createGuide.saveStep('LOCATION');\n        }\n    };\n    GooglePlaceDetails(selectedId, callback);\n\n    return locationPlace;\n}\n","import { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport inatTemplate from 'ui/create-guide-modal/inat-user-template.html';\n\nexport const renderInatUser = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatTemplate;\n\n    if(config.guide.inatId.key !== '-----') {\n        if(config.guide.locationType !== 'inat') {\n            config.guide.locationType = 'inat';\n            createGuide.setConfig(config);\n        }\n        createGuide.saveStep('INAT');\n    }\n\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('.js-chosen > div > span:nth-child(2)').innerHTML += '<div class=\"delete-guide-link js-toggle-filter\"><input class=\"hide\" type=\"checkbox\"></div>';\n\n    let autocompleteRef;\n\n    const position = config.guide.inatId.param === 'user_id' ? 'left' : 'right';\n\n    let byType = 'users';\n\n    const inatIdentityInput = parent.querySelector('#inat-identity');\n          inatIdentityInput.focus();\n\n    const handlerInatIdentityInput = e => {\n        inatIdentityInput.removeEventListener('keypress', handlerInatIdentityInput);\n        autocompleteRef = inatAutocomplete(inatIdentityInput, byType, 'inat-autocomplete-options-container', '');\n    }\n\n    inatIdentityInput.addEventListener('keypress', handlerInatIdentityInput);\n\n    inatIdentityInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    inatIdentityInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('inatForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(inatIdentityInput.value !== '') {\n            saveInatId(parent, config, createGuide, autocompleteRef);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        inatIdentityInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.inat-autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveInatId(parent, config, createGuide, autocompleteRef);\n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    const idSwitch = parent.querySelector('.snap-switch-slider');\n\n    const switchCallback = position => {\n        \n        byType = position === 'left' ? 'users' : 'projects';\n\n        const type = position === 'left' ? 'iNat user ID' : 'iNat project ID';\n        const param = position === 'left' ? 'user_id' : 'project_id';\n\n        config.guide.inatId.type = type;\n        config.guide.inatId.param = param;\n\n        createGuide.setConfig(config);\n    };\n\n    switchHandler(idSwitch, position, switchCallback);\n};\n\nconst saveInatId = (parent, config, createGuide, autocompleteRef) => {\n    const input = parent.querySelector('#inat-identity');\n    if (config.isLandsapeMode) {\n        input.value = '';\n        input.focus();\n    }\n    const key = input.value;\n    const id = input.name;\n    config.guide.inatId.key = key;\n    config.guide.inatId.id = id;\n    if (key !== '') {\n        config.guide.locationType = 'inat';\n        createGuide.setConfig(config);\n        createGuide.saveStep('INAT');\n        parent.querySelector('#inat-identity').value = '';\n        if (autocompleteRef) {\n            // autocompleteRef.destroy();\n        }\n    }\n}\n","const all = [\n    {\n      id: 'fungi',\n      common: 'Fungi & Lichens'\n    },\n    {\n      id: 'amphibia',\n      common: 'Amphibians'\n    },\n    {\n      id: 'mammalia',\n      common: 'Mammals'\n    },\n    {\n      id: 'plantae',\n      common: 'Plants'\n    },\n    {\n      id: 'lepidoptera',\n      common: 'Butterflies & Moths'\n    },\n    {\n      id: 'insecta',\n      common: 'Insects'\n    },\n    {\n      id: 'aves',\n      common: 'Birds'\n    },\n    {\n      id: 'reptilia',\n      common: 'Reptiles'\n    }\n];\n\nexport const iconicTaxa = {\n    all\n}","import * as R from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nimport editorTemplate from 'ui/create-guide-modal/species-in-guide-editor-template.html';\n\nexport const speciesInGuideEditor = (config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, savedSpeciesNames) => {\n\n    const spinner = modal.querySelector('.js-species-search');\n    if(spinner) spinner.classList.add('hide-important');\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = ''\n\n    renderTemplate({selectedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const getTaxa = (taxa, config, selectedSpecies) => {\n        if(taxa) {           \n            if(config.guide.iconicTaxa) {\n                taxa.innerHTML = config.guide.iconicTaxa.map(i => i.common).join(', ');\n            } else {\n                taxa.innerHTML = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon))].join(', ');\n            }\n        }\n    }\n        \n    const speciesCount = modal.querySelector('.js-lesson-taxa-count');\n\n    if(speciesCount) {\n        speciesCount.innerHTML = speciesCount === 1 \n            ? `There is ${selectedSpecies.length} species in this lesson.`\n            : `There are ${selectedSpecies.length} species in this lesson.`;;\n    }\n\n    const taxa = modal.querySelector('.js-lesson-taxa');\n    getTaxa(taxa, config, selectedSpecies);\n\n    const input = modal.querySelector(\"#input-species\");\n    if(config.isLandscapeMode) {\n        setTimeout(() => {\n            input.focus();\n        }, 500);\n    }\n\n    const addSpeciesToList = async species => {\n        \n        if(R.contains(species.name, selectedSpecies.map(ss => ss.name))) return;\n\n        selectedSpecies.push(species);\n\n        config.guide.species = selectedSpecies;\n        config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n        createGuide.setConfig(config);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        const { collection } = store.getState();\n\n        lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n            requestArgs: {\n                updatedConfig: config, updatedCollection: collection\n            }\n        });\n\n        setTimeout(() => {            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        }, 250);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !R.contains(n.value, selectedSpecies.map(ss => ss.name)));\n                update(suggestions);\n            },\n            onSelect: async function(item) {\n                input.value = item.label;\n                const species = await firestore.getSpeciesByName(item.label);\n                addSpeciesToList(species);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(async() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    const species = await firestore.getSpeciesByName(input.value);\n                    addSpeciesToList(species);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    modal.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species.name !== removedSpecies);\n            \n            config.guide.species = selectedSpecies;\n            config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n            createGuide.setConfig(config);\n            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        });\n    })\n};","import * as R from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport editorTemplate from 'ui/create-guide-modal/species-editor-template.html';\n\nconst listenersToAddedSpecies = [];\n\nexport const addListenerToAddedSpecies = listener => {\n    listenersToAddedSpecies.pop();  \n    listenersToAddedSpecies.push(listener);\n};\n\nexport const speciesEditor = (container, selectedSpeciesDisplay, selectedSpecies, savedSpeciesNames, addedSpecies) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = '';\n\n    renderTemplate({addedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const input = container.querySelector(\"#input-species\");\n          \n    setTimeout(() => {\n        input.focus();\n    }, 500);\n\n    const addSpeciesToList = species => {\n        \n        if(R.contains(species, selectedSpecies)) return;\n\n        selectedSpecies.push(species);\n        addedSpecies.push(species);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        listenersToAddedSpecies.forEach(listener => listener(species));\n\n        setTimeout(() => {            \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames, addedSpecies);\n        }, 200);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !R.contains(n.value, selectedSpecies));\n                update(suggestions);\n            },\n            onSelect: function(item) {\n                input.value = item.label;\n                addSpeciesToList(input.value);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    addSpeciesToList(input.value);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    container.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species !== removedSpecies);\n                        \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames);\n        });\n    })\n};","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { listenToInatRequests } from 'api/inat/inat';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\nimport { snapLog, logError, logAPIError } from 'ui/helpers/logging-handler';\n\nimport spinnerTemplate from 'ui/create-guide-modal/species-search-template.html';\nimport speciesSummaryTemplate from 'ui/create-guide-modal/species-summary-template.html';\n\nexport const speciesSearch = createGuide => {\n\n    const { config, modal, option } = createGuide;\n    const { collections } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = spinnerTemplate;\n\n    const parent = modal.querySelector('.js-step-action-content');\n\n    renderTemplate({ }, template.content, parent);\n\n    const feedback = document.querySelector('.js-request-feedback');\n\n    let count = 0;\n\n    const interval = setInterval(() => {\n      count = count === config.guide.iconicTaxa.length ? 0 : count;\n      feedback.innerHTML = `Fetching ${config.guide.iconicTaxa[count].common} from iNaturalist …`;\n      count++;\n    }, 2000);\n\n    const nextStepActionArrow = modal.querySelector('.js-right');\n    const viewGuideIcon = nextStepActionArrow.querySelector('i');\n          viewGuideIcon.classList.add('snap-inactive');\n\n    const back = modal.querySelector('.js-left .js-arrow-wrapper');\n    const viewTaxaIcon = back.querySelector('i');\n          viewTaxaIcon.classList.add('snap-inactive');\n\n    const renderLessonSummary = collection => {\n\n      try {\n\n        if(collection && collection.items && collection.items.length === 0) {\n            feedback.innerHTML = 'No species were found. Try widening your parameters.';\n            return;\n        }\n\n        clearTimeout(interval);\n\n        template.innerHTML = speciesSummaryTemplate;\n\n        feedback.innerHTML = '';\n\n        collection.taxa = collection.guide.iconicTaxa.map(taxon => taxon.common).join(', ');\n        \n        renderTemplate({ collection }, template.content, feedback);\n\n        const icon = modal.querySelector('.icon i');\n              icon.classList.remove('slow-spin');\n\n        setTimeout(() => {\n          nextStepActionArrow.addEventListener('click', e => {\n                setTimeout( async () => {\n\n                    if(config.guide.species) {\n\n                        collection.items = collection.items.filter(item => {\n                            return R.contains(item.name, config.guide.species.map(sp => sp.name));\n                        });\n    \n                        await lessonStateHandler.changeRequest({\n                            requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                            requestArgs: {\n                                updatedConfig: config, updatedCollection: collection\n                            }\n                        });\n                    }\n\n                    if(parseInt(nextStepActionArrow.dataset.number) === 4) {\n                        createGuide.callOnCreateCustomListeners(collection);\n                        lessonStateHelper.clearGuide();\n                    }\n                });\n            });   \n        });\n\n        title.innerHTML = 'New collection species';\n\n        const editSpecies = modal.querySelector('.js-edit-species');\n              editSpecies.addEventListener('click', e => {\n                const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n                      selectedSpeciesDisplay.classList.add('open');\n                      selectedSpeciesDisplay.classList.remove('hide-important');\n                      selectedSpeciesDisplay.innerHTML = '';\n                      editSpecies.classList.add('hide-important');\n                      \n                speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n\n                // const collectionName = modal.querySelector('#js-collection-name');\n                //       collectionName.classList.add('hide-important');\n\n                const editableCollectionName = modal.querySelector('#js-input-collection-name');\n                      editableCollectionName.classList.remove('hide-important');\n                      editableCollectionName.addEventListener('focusout', e => {      \n                          const name = e.target.value;                    \n                          // collectionName.innerHTML = name;\n                          // collectionName.classList.remove('hide-important');\n                          // editableCollectionName.classList.add('hide-important');\n                          config.guide.name = name;\n                          collection.name =  name;\n                          lessonStateHandler.changeRequest( { requestType: enums.lessonState.UPDATE_COLLECTION, requestArgs: { collection, config } });\n                          \n                      });\n              });\n\n        viewGuideIcon.classList.remove('snap-inactive');\n        viewTaxaIcon.classList.remove('snap-inactive');\n\n        } catch(e) {\n          logError(renderLessonSummary, e);\n        }\n    };\n\n    const initLesson = async collectionToLoad => {\n        \n        const counter = { \n            index: 0,\n            isLessonPaused: true\n        }\n        \n        const lesson = await lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.GET_LESSON_PROGRESS,\n            requestArgs: {\n                collectionToLoad,\n                updatedCounter: counter,\n                guide: createGuide.getConfig().guide\n            }\n        });\n        \n        const collection = lesson.collection;\n              collection.guide = config.guide;\n              collection.isPrivate = true;\n        \n        renderLessonSummary(collection);\n\n        const OrdinalSuffixOf = i => {\n        var j = i % 10,\n            k = i % 100;\n        if (j == 1 && k != 11) {\n            return i + \"st\";\n        }\n        if (j == 2 && k != 12) {\n            return i + \"nd\";\n        }\n        if (j == 3 && k != 13) {\n            return i + \"rd\";\n        }\n        return i + \"th\";\n        }\n\n        let unsubscribe;\n\n        const callback = request => {\n            if(feedback) {\n                feedback.innerHTML = `Making ${OrdinalSuffixOf(request.page)} request of ${request.numberOfRequests}`;\n            } else {\n                unsubscribe(callback);\n            }\n        };\n\n        unsubscribe = listenToInatRequests(callback);\n    };\n    \n    config.guide.guideType = option;\n\n    switch(option) {\n\n        case enums.guideOption.LOCATION.name:\n            initLesson({ \n                ...collections.find(c => c.guideType === option),                \n                name: config.guide.place.name,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                guide: config.guide,\n                language: config.language,\n                id: collections.length + 100010, // hack to avoid clashes with existing lessons\n            });\n            break;\n\n        case enums.guideOption.INAT.name:\n            initLesson({\n                ...collections.find(c => c.guideType === option),  \n                name: `${config.guide.inatId.key}'s observations`,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                iconicTaxa: config.guide.iconicTaxa,\n                id: collections.length + 10000,\n            });        \n            break;\n\n        case enums.guideOption.PICKER.name:\n\n            const initPicker = async () => {\n\n                const { collection } = store.getState();\n\n                let addingExtraSpecies = false;\n                \n                if(collection.items) {\n                    addingExtraSpecies = collection.items.map(i => i.name).every(val => config.guide.species.map(s => s.name).includes(val));\n                }\n    \n                let collectionToLoad;\n    \n                if(addingExtraSpecies) {\n                    collectionToLoad = collection;\n                    await lessonStateHandler.changeRequest({\n                        requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                        requestArgs: {\n                            updatedConfig: config, updatedCollection: collectionToLoad\n                        }\n                    });\n                } else {\n                    collectionToLoad = {\n                        ...collections.find(c => c.guideType === option),\n                        species: config.guide.species,\n                        id: collections.length + 10010,\n                        name: 'Your new lesson',\n                        hasVideo: false,\n                        video: {},\n                        terms: []\n                    };\n                }\n\n                initLesson(collectionToLoad);\n            };\n\n            initPicker();\n\n            break;\n    }\n\n   const title = modal.querySelector('.js-options > h1');\n         title.innerHTML = 'Requesting species images and traits';\n};","import { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderSpeciesSearchOptions } from 'ui/create-guide-modal/species-search-options';\nimport { renderLocation } from 'ui/create-guide-modal/location';\nimport { renderInatUser } from 'ui/create-guide-modal/inat-user';\nimport { renderCategories } from 'ui/create-guide-modal/categories';\nimport { renderSpeciesPicker } from 'ui/create-guide-modal/species-picker';\nimport { saveGuide } from 'ui/create-guide-modal/common/save-guide';\nimport { speciesSearch } from 'ui/create-guide-modal/species-search';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport actionsTemplate from 'ui/create-guide-modal/common/actions-template.html';\n\nclass CreateGuide {\n\n    constructor(step) {\n        \n        this.listeners = [];\n\n        this.steps = [\n            { number: 1, title: 'Species Picker', description: 'Provenance', nextStep: '', disabled: true, className:'species-actions',\n                nextSteps: [\n                    { id: enums.guideOption.LOCATION.name, step: 'Location' },\n                    { id: enums.guideOption.INAT.name, step: 'Location'},\n                    { id: enums.guideOption.PICKER.name, step: 'Picker'},\n                ] },\n            { number: 2, title: 'Species Picker', description: 'Location', nextStep: 'Taxa', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n            { number: 2, title: 'Species Picker', description: 'Picker', nextStep: 'Species', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n            { number: 3, title: 'Species Picker', description: 'Taxa', nextStep: 'Species', disabled: true, className:'taxa-actions' },\n            { number: 4, title: 'Species Picker', description: 'Species', nextStep: 'View Guide', disabled: true, className:'filter-actions' }\n        ];\n\n        this.currentStep = this.steps.find(s => s.number == step);\n        \n        this.modal = document.getElementById('createGuide');\n\n        if(!this.modal) return;\n\n        this.modalTitle = this.modal.querySelector('.js-modal-title header');\n        this.navigationContainer = this.modal.querySelector('.js-modal-guide-navigation');\n        this.progressSteps = this.modal.querySelectorAll('.js-modal-guide-progress > div > div');\n        \n        this.previousStepActionArrow = this.modal.querySelector('.js-left');\n        this.previousStepActionTxt = this.modal.querySelector('.js-left .title');\n        \n        this.optionsTxt = this.modal.querySelector('.js-centre .title');\n        \n        this.nextStepActionArrow = this.modal.querySelector('.js-right');\n        this.nextStepActionTxt = this.modal.querySelector('.js-right .title');\n\n        this.progressSteps.forEach((ps,index) => {\n            ps.innerHTML = this.steps[index].description;\n        });\n\n        this.config = this.config || store.getState().config;\n\n        this.getConfig = () => {\n            return this.config;\n        }\n    \n        this.setConfig = (config) => {\n            this.config = config;\n            actions.boundUpdateConfig(config);\n        }\n\n        this.getCurrentStep = () => {\n            return this.currentStep;\n        }\n\n        this.setCurrentStep = step => {\n            this.currentStep = this.steps.find(s => s.number === step);\n        }\n\n        this.user = store.getState().user;\n\n        // prevent user rescaling which is caused by autocomplete\n\n        // const viewport = document.querySelector(\"meta[name=viewport]\");\n        //       viewport.setAttribute('content', 'width=device-width, initial-scale=1, user-scalable=no');\n    }\n\n    addStepActions(nextStep) {\n        \n        if(!nextStep) return;\n        \n        const parent = this.modal.querySelector('.js-step-action-content');\n              parent.innerHTML = '';\n        const template = document.createElement('template');\n              template.innerHTML = actionsTemplate;\n        const description = this.steps.find(step => step.number === this.currentStep.number).description;\n\n        renderTemplate({ className: nextStep.className }, template.content, parent);\n\n        const options = this.modal.querySelector('.js-options > h1');\n\n        switch(description) {\n            case 'Provenance':\n                options.innerHTML = 'How do you want to select your species?';\n                renderSpeciesSearchOptions(this);\n                break;\n            case 'Location':                                \n                options.innerHTML = 'Filter species by location and season.'\n                switch(this.option) {\n                    case enums.guideOption.LOCATION.name:\n                        renderLocation(this.modal, this);\n                        break;\n                    case enums.guideOption.INAT.name:\n                        renderInatUser(this.modal, this);\n                        break;\n                    case enums.guideOption.PICKER.name:\n                        const chosenOnes = this.modal.querySelector('.js-chosen');\n                              chosenOnes.classList.add('hide-important');\n                        document.querySelector('.js-step-action-content .location-actions').classList.add('species-picker-actions');\n                        renderSpeciesPicker({\n                            container: this.modal,\n                            config: this.config,\n                            setConfig: this.setConfig\n                        }, this.modal.querySelector('.js-actions'));\n                        const title = this.modal.querySelector('.js-options > h1');\n                              title.innerHTML = 'Add species by name.';            \n                        break;\n                }\n                break;\n            case 'Taxa':\n                options.innerHTML = 'Filter species by taxa.'\n                renderCategories(this.modal, this);\n                break;\n            case 'Species':\n                setTimeout(() => {\n                    speciesSearch(this);\n                });\n                break;\n        }\n    }\n\n    goToNextStep(nextStep, direction, option = null, next = null) {\n\n        this.currentStep = next || this.steps.find(s => s.number === nextStep);\n\n        if(option === enums.guideOption.PICKER.name && direction === 'NEXT') {\n            this.currentStep = this.steps[2];\n        }\n\n        this.direction = direction;\n        this.option = option || this.option;\n\n        if(this.startLesson ) {\n            this.currentStep = { number: 0 };\n        };\n\n        if(!this.modalTitle) return;\n        \n        this.modalTitle.innerText = this.currentStep.title;\n        this.nextStepActionTxt.innerHTML = this.currentStep.nextStep;\n\n        this.progressSteps.forEach((ps,index) => {\n\n            ps.classList.remove('active');\n\n            if(index + 1 === this.currentStep.number) {\n                ps.classList.add('active');\n                for(let i = 0; i < index; i++) {\n                    this.progressSteps[i].classList.add('completed');\n                }\n            }\n        });\n        \n        this.addStepActions(this.steps.find(step => step.number === this.currentStep.number));\n\n        if(this.currentStep.number === 1) {\n            this.navigationContainer.classList.remove('progress-container');\n            this.optionsTxt.classList.remove('hide-important');\n            this.previousStepActionTxt.classList.add('hide-important');\n            this.previousStepActionArrow.classList.add('arrow-wrapper-hidden');\n            this.nextStepActionArrow.classList.add('arrow-wrapper-hidden');            \n        } else {\n            this.navigationContainer.classList.add('progress-container');\n            this.optionsTxt.classList.add('hide-important');\n            this.previousStepActionArrow.classList.remove('arrow-wrapper-hidden');\n            this.nextStepActionArrow.classList.remove('arrow-wrapper-hidden');\n            this.nextStepActionArrow.dataset.number = this.currentStep.number;\n            this.previousStepActionTxt.classList.remove('hide-important');\n            const previousStepProperties = this.currentStep.prevStep\n                                                ? this.steps.find(s => s.description === this.currentStep.prevStep)\n                                                : this.steps.find(s => s.number === (this.currentStep.number - 1));\n            \n\n            if(this.getCurrentStep().number === 4) {\n                this.previousStepActionTxt.innerHTML = this.option === enums.guideOption.PICKER.name \n                    ? this.steps[2].description\n                    : this.steps[3].description;\n            } else {\n                this.previousStepActionTxt.innerHTML = previousStepProperties.description;\n            }\n        }\n    }\n\n    saveStep(stepDescription, config) {\n        saveGuide(config || this.getConfig(), stepDescription)();\n    }\n};\n\nexport const createGuideHandler = step => {\n\n    const guide = new CreateGuide(step);\n    \n    guide.goToNextStep(step, 'NEXT');\n\n    const handleNextStepAction = event => {\n        guide.startLesson = parseInt(guide.nextStepActionArrow.dataset.number) === 4;\n        if(guide.startLesson) { \n            guide.nextStepActionArrow.setAttribute('data-dismiss','modal');\n        } else {\n            guide.nextStepActionArrow.removeAttribute('data-dismiss');\n        }\n        const step = guide.steps.find(step => step.description === guide.getCurrentStep().nextStep);\n        if(step) guide.goToNextStep(step.number, 'NEXT');\n        guide.listeners.push( { element: guide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    guide.nextStepActionArrow.addEventListener('click', handleNextStepAction, true);\n\n    const handlePreviousStepAction = event => {\n\n        let prevStep;\n        \n        if(guide.getCurrentStep() && guide.getCurrentStep().number === 4) {\n            prevStep = guide.option === enums.guideOption.PICKER.name ? 2 : 3;\n        } else {\n            prevStep = guide.getCurrentStep().number - 1;\n        }\n        \n        guide.goToNextStep(prevStep, 'PREVIOUS', guide.option);\n        guide.listeners.push( { element: guide.previousStepActionArrow, handler: handlePreviousStepAction });\n    };\n\n    guide.previousStepActionArrow.addEventListener('click', handlePreviousStepAction, true);\n\n    guide.callOnCreateCustomListeners = collection => {\n        onCloseModalListeners.forEach(listener => listener(collection));\n        onCloseModalListeners.pop();\n    };\n};\n\nconst onCloseModalListeners = [];\n\nexport const onCreateCustomLesson = listener => { \n    onCloseModalListeners.pop();\n    onCloseModalListeners.push(listener);\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport speciesTemplate from 'ui/create-guide-modal/species-search-options-template.html';\n\nexport const renderSpeciesSearchOptions = createGuide => {\n\n    const header = createGuide.modal.querySelector('.js-modal-title > header');\n          header.innerHTML = 'Create your own lesson';\n\n    const options = [\n        {\n            text: 'By location and season',\n            id: enums.guideOption.LOCATION.name\n        },\n        {\n            text: 'From iNaturalist observations',\n            id: enums.guideOption.INAT.name\n        },\n        {\n            text: 'Using a name-based search',\n            id: enums.guideOption.PICKER.name\n        }\n    ];\n\n    const template = document.createElement('template');\n          template.innerHTML = speciesTemplate;\n    const parent = createGuide.modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    const config = createGuide.getConfig();\n\n    renderTemplate({ options }, template.content, parent);\n\n    const handleNextStepAction = event => {\n\n        const option = event.currentTarget.dataset.option;\n        const step = createGuide.steps.find(s => s.number === createGuide.getCurrentStep().number);\n        const nextStepName = step.nextSteps.find(step => step.id === option).step;\n        const nextStep = createGuide.steps.find(s => s.description === nextStepName);\n\n        createGuide.startLesson = false;        \n        createGuide.goToNextStep(createGuide.getCurrentStep().number + 1, 'NEXT', option, nextStep);\n        createGuide.listeners = [];\n        createGuide.listeners.push( { element: createGuide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    const lessonOptions = document.querySelectorAll('.custom-lesson-menu-options li');\n    \n    lessonOptions.forEach((option, index) => {\n        option.addEventListener('click', handleNextStepAction, true);\n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        createGuide.setConfig(config);\n    });\n\n    const warning = createGuide.modal.querySelector('.js-persistence-warning');\n            \n    if(createGuide.user) {\n        warning.classList.add('hide-important');\n    }\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\nimport { speciesEditor } from 'ui/create-guide-modal/species-editor';\n\nimport speciesPickerTemplate from 'ui/create-guide-modal/species-picker-template.html';\n\nexport const renderSpeciesPicker = (props, parent) => {\n\n      const { config, container, selectedSpecies } = props;\n\n      const template = document.createElement('template');\n            template.innerHTML = speciesPickerTemplate;\n\n      parent.innerHTML = '';\n\n      renderTemplate({}, template.content, parent);\n\n      const selectedSpeciesDisplay = parent.querySelector('.js-selected-species-container');\n            selectedSpeciesDisplay.innerHTML = '';\n\n      if(config) {\n            speciesInGuideEditor(config, container, selectedSpeciesDisplay, props, config.guide.species || []);\n      } else {\n            speciesEditor(parent, selectedSpeciesDisplay, selectedSpecies, [], []);\n      }\n};\n","import * as R from 'ramda';\n\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { iconicTaxa } from 'snapdragon-config/snapdragon-iconic-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport categoriesTemplate from 'ui/create-guide-modal/categories-template.html';\n\nexport const renderCategories = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n          config.guide.iconicTaxa = config.guide.iconicTaxa || iconicTaxa.all;\n\n    const filterSelectedClass = 'iconic-taxa-selected';\n\n    const template = document.createElement('template');\n          template.innerHTML = categoriesTemplate;\n    \n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({}, template.content, parent);\n\n    const icons = parent.querySelectorAll('.js-iconic-taxa-categories > div > div:nth-child(1)');\n    \n    if(config.guide.iconicTaxa) {\n        icons.forEach(icon => {\n            const filterId = icon.parentElement.id;\n            if(R.contains(filterId, config.guide.iconicTaxa.map(taxon => taxon.id))) {\n                icon.classList.add(filterSelectedClass);\n            }\n        });\n    }\n\n    setTimeout(() => {\n        const fungiIcon = modal.querySelector('#fungi > div');\n        if(!fungiIcon) return;\n        if(elem.hasClass(fungiIcon, 'iconic-taxa-selected')) {\n            fungiIcon.querySelector('g g').classList.add('svg-icon-selected');\n        }   \n    },250);\n    \n    config.guide.hasChanged = false;\n\n    icons.forEach(category => {\n        category.addEventListener('click', event => {\n\n            config.guide.hasChanged = true;\n            \n            const filter = event.currentTarget;\n            const filterId = filter.parentElement.id;        \n            const commonName = filter.parentElement.innerText;              \n\n            if(config.guide.iconicTaxa.find(taxon => taxon.id === filterId)) {\n                \n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.remove('svg-icon-selected');                    \n                }\n                if(config.guide.iconicTaxa.length > 1) {\n                    filter.classList.remove(filterSelectedClass);\n                    config.guide.iconicTaxa = config.guide.iconicTaxa.filter(taxon => taxon.id !== filterId);\n                }\n\n            } else {\n\n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.add('svg-icon-selected');\n                }\n                filter.classList.add(filterSelectedClass);\n\n                config.guide.iconicTaxa.push(\n                    {\n                        id: filterId,\n                        common: commonName    \n                    }\n                )\n            }\n\n            createGuide.setConfig(config);\n            createGuide.saveStep('TAXA', config);            \n        });\n    });\n\n    createGuide.saveStep('TAXA');\n\n    document.querySelector('.js-right .js-arrow-wrapper').innerHTML = '<i class=\"far fa-arrow-alt-circle-right\"></i>';\n};","import { returnTaxonIcon } from 'ui/helpers/icon-handler';\n\nexport const saveGuide = (config, step, update = true) => {\n\n    const chosen = document.querySelector('.js-chosen span:nth-child(2)');\n\n    const handleSaveEvent = () => {\n\n        switch(step) {\n\n            case 'SPECIES':\n\n            break;\n\n            case 'LOCATION':\n\n                const splitLocation = locationStr => {\n                    return locationStr;\n                };\n\n                if(config.guide.locationType) {\n                    chosen.innerHTML = config.guide.locationType === 'place'\n                        ? config.guide.locationPlace\n                        : config.isLandscapeMode\n                            ? config.guide.locationLongLat\n                            : splitLocation(config.guide.locationLongLat);\n                }\n                break;\n\n            case 'TAXA':\n\n                chosen.innerHTML = '';\n                let icons = '';\n                if(config.guide.iconicTaxa.length > 0) {\n                    config.guide.iconicTaxa.forEach(taxon => {\n                        const icon = returnTaxonIcon(taxon.id);\n                        icons += icon;\n                    })\n                    chosen.innerHTML = icons;\n                } else {\n                    chosen.innerHTML = 'All species';\n                }\n                break;\n\n            case 'INAT':\n                \n                if(config.guide.inatId.key) {\n                    chosen.innerHTML = config.guide.inatId.key || '';\n                } else {\n                    chosen.innerHTML = '';\n                }\n                break;\n        }\n    }\n\n    return handleSaveEvent;\n}","import * as R from 'ramda';\n\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\n\nconst getItems = (taxa, includeTechnicalTerms = false) => {\n    \n    const glossary = store.getState().glossary;\n\n    const items = glossary.filter(definition => R.contains(definition.taxon, taxa));\n\n    let selectedItems = [];\n\n    includeTechnicalTerms\n        ? selectedItems = items\n        : selectedItems = items.filter(item => item.technical !== 'true');\n\n    return selectedItems.filter(item => R.contains(item.taxon, taxa));\n};\n\nconst getBranches = items => {\n    \n    let branches = [ ...new Set(items.map(item => item.branch)) ];\n        branches = branches.map(branch => {\n            return {\n                name: branch,\n                count: items.filter(item => item.branch == branch).length\n            }\n          });\n    return branches;\n};\n\nconst getQuickFire = (glossary, type, collection) => {\n\n    const items = collection.terms\n            ? glossary.filter(definition => R.contains(definition.id, collection.terms))\n            : glossary;\n\n    const taxa = [ ...new Set(items.map(definition => definition.taxon))];\n\n    const filter = {\n          iconicTaxa: taxa,\n          option: {\n                key: \"0\",\n                value: \"multiple choice\" // depends on type???\n          }\n    };\n    \n    const quickFire = {\n        index: 0,\n        isComplete: false,\n        items,\n        count: items.length,\n        filter,\n        type,\n        termScore: {\n            total: 0,\n            correct: 0,\n            incorrect: 0,\n            isCorrect: null,\n            isIncorrect: null,\n            rounds: [],\n            passes: [],\n            fails: []\n        },\n        poolSize: items.length,\n        terms: collection.terms,\n        onClickFiltersLinkListeners: [],\n        onClickGlossaryLinkListeners: [],\n        lessonId : collection.id\n    };\n\n    quickFire.filter.taxa = filter.iconicTaxa.map(taxon => {\n        const iconicTaxon = {\n            name: taxon,\n            count: items.filter(item => item.taxon === taxon).length\n        }\n        return iconicTaxon;\n    });\n\n    quickFire.filter.taxa = quickFire.filter.taxa.filter(taxon => taxon.count > 0);\n\n    actions.boundCreateQuickFire(quickFire);\n\n    return quickFire;\n};\n\nexport const quickFireAPI = {\n    getItems,\n    getBranches,\n    getQuickFire\n};","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\n\nconst renderResponse = (isCorrect, term) => {\n    return isCorrect\n    ? `<span class=\"centred-block icon\"><i class=\"fas fa-check extra-large-text correct-answer-color margin-right\"></i>That is correct.</span>`\n    : `<span class=\"centred-block icon\"><i class=\"fas fa-times extra-large-text incorrect-answer-color margin-right\"></i>The correct answer is <span class=\"answer-response half-margin-left\">'${term}'.</span></span>`;\n\n};\n\nconst updateBranchCounts = (quickFire, branchOptions) => {\n\n    const items = quickFire.terms ? quickFire.items.filter(item => R.contains(item.id, quickFire.terms)) : quickFire.items;\n\n    branchOptions.forEach(branchBadge => {\n    branchBadge.innerHTML = items.filter(item => item.branch === branchBadge.dataset.name).length;\n    });\n};\n\nconst updateTaxonCounters = (quickFire, taxonCounters, includeTechnicalTerms) => {\n\n    const items = quickFire.terms ? quickFire.items.filter(item => R.contains(item.id, quickFire.terms)) : quickFire.items;\n\n    taxonCounters.forEach(taxonBadge => {\n        taxonBadge.innerHTML = includeTechnicalTerms\n            ? items.filter(item => item.taxon === taxonBadge.dataset.taxon).length\n            : items.filter(item => item.taxon === taxonBadge.dataset.taxon && !item.technical).length;\n    });\n\n    return includeTechnicalTerms\n        ? items\n        : items.filter(item => !item.technical);\n};\n\nconst updateTotalCounts = (quickFire, input, counters, branchCounters, taxonCounters, includeTechnicalTerms = false) => {\n\n    updateBranchCounts(quickFire, branchCounters);\n    const terms = updateTaxonCounters(quickFire, taxonCounters, includeTechnicalTerms);\n\n    quickFire.count = terms.length;\n\n    counters.forEach(counter => {\n        counter.innerHTML = quickFire.count;\n    });\n    \n    input.value = quickFire.count;\n    quickFire.poolSize = parseInt(input.value);\n};\n\nconst scoreMultipleChoice = (quickFire, answer, quickFireMessage) => {\n\n    const isCorrect = answer === quickFire.question.term;\n\n    quickFire.question.answer = answer;\n        \n    quickFire.termScore.total++;\n\n    if(isCorrect) {\n        quickFire.termScore.correct++;\n        quickFire.termScore.isCorrect = true;\n        quickFire.termScore.isIncorrect = false;\n        quickFire.termScore.passes.push(quickFire.question);\n    } else {\n        quickFire.termScore.incorrect++;\n        quickFire.termScore.isCorrect = false;\n        quickFire.termScore.isIncorrect = true;\n        quickFire.termScore.fails.push(quickFire.question);\n    }\n\n    quickFireMessage.innerHTML = renderResponse(isCorrect, quickFire.question.term.toLowerCase());\n};\n\nconst scoreTextEntry = (quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn) => {\n\n    if (quickFire.filter.option.key === '1') {\n\n        const brackets = /\\(.+?\\)/;\n\n        const term = quickFire.question.term;\n\n        const acceptableAnswers = term.split(',').map(answer => {\n            \n            let acceptable = answer;\n                acceptable = acceptable.replace(brackets, '');\n                acceptable = acceptable.trim();\n                acceptable = acceptable.toLowerCase();\n\n            return acceptable;\n        });\n        \n        const isCorrect = R.contains(quickFireInput.value.trim().toLowerCase(), acceptableAnswers);\n        \n        quickFire.termScore.total++;\n        \n        if (isCorrect) {\n            quickFire.termScore.correct++;\n            quickFire.termScore.passes.push(quickFire.question);\n        }\n        else {\n            quickFire.termScore.incorrect++;\n            quickFire.termScore.fails.push(quickFire.question);\n        }\n        \n        quickFireMessage.innerHTML = renderResponse(isCorrect, quickFire.question.term.toLowerCase());\n\n        timer = setTimeout(() => {\n            continueQuickFireBtn.click();\n        }, store.getState().config.callbackTime + 500);\n    }\n\n    return timer;\n};\n\nconst readyTemplate = headerTemplate => {\n\n    const template = document.createElement('template');\n          template.innerHTML = headerTemplate;\n\n    const modal = document.querySelector('#glossaryModal');\n\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';   \n\n    return { template, modal, parent };\n};\n\nconst updateHeaders = (screen, links, getQuickFire, quickFireActions) => {\n\n    const { glossary, filters, questions } = links;\n\n    const hide = 'hide-important';\n\n    const quickFire = getQuickFire();\n\n    const loadGlossary = e => {\n        quickFireActions.quickFireGlossary(quickFire.items);\n        if(quickFire.linkFromLesson) {\n            questions.classList.remove(hide);\n            filters.classList.add(hide);\n        } else {\n            filters.classList.remove(hide);\n        }\n    };\n\n    const loadFilters = e => {\n        quickFireActions.quickFireFilters(quickFire.linkFromLesson);\n    };\n\n    const handleGlossaryLink = () => {\n\n        quickFire.onClickGlossaryLinkListeners = quickFire.onClickGlossaryLinkListeners || [];\n\n        if(quickFire.onClickGlossaryLinkListeners.length < 1) {\n            glossary.addEventListener('click', loadGlossary, { once: true });\n            quickFire.onClickGlossaryLinkListeners.push('filters');\n        }\n    };\n\n    const handleFiltersLink = () => {\n\n        quickFire.onClickFiltersLinkListeners = quickFire.onClickFiltersLinkListeners || [];\n\n        if(quickFire.onClickFiltersLinkListeners.length < 1) {\n            filters.addEventListener('click', loadFilters, { once: true }, true);\n            quickFire.onClickFiltersLinkListeners.push('filters');\n        }\n    };\n    \n    switch(screen) {        \n        case enums.quickFireStep.FILTERS:\n            filters.classList.add(hide);\n            glossary.classList.remove(hide);\n            handleGlossaryLink();\n        break;\n            \n        case enums.quickFireStep.QUESTIONS:\n            filters.classList.remove(hide);\n            filters.innerHTML = 'Vocab filter';\n            handleGlossaryLink();\n            handleFiltersLink();\n        break;\n\n        case enums.quickFireStep.GLOSSARY:\n            filters.classList.remove(hide);\n            filters.innerHTML = 'Vocab filter';\n            questions.classList.add(hide);\n            handleFiltersLink();\n        break;\n    }\n};\n\nexport const quickFireUI = {\n    updateTotalCounts,\n    updateHeaders,\n    scoreMultipleChoice,\n    scoreTextEntry,\n    readyTemplate\n};","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nconst selectAnswers = (quickFire, quickFireItems) => {\n\n    quickFire.spareItems = quickFire.spareItems || R.take(5, quickFireItems);\n\n    quickFire.question = quickFireItems.splice(0,1)[0];\n\n    let items = quickFireItems.filter(item => item.branch === quickFire.question.branch);\n\n    const itemCount = items ? items.length : 0;\n    const requiredItems = 3;\n\n    if (itemCount <= requiredItems) {\n        const itemsToAdd = R.take((requiredItems - itemCount), quickFire.spareItems.filter(sp => !R.contains(sp.term, items.map(i => i.term)) && sp.term !== quickFire.question.term ));\n              itemsToAdd.forEach(item => items.push(item));\n    }\n\n    let answers = R.take(3, items);\n        answers.push(quickFire.question);\n        answers = utils.shuffleArray(answers);\n        answers = answers.map((item, index) => {\n            return {\n                term: item.term,\n                index\n            };\n        });\n\n    return answers;\n};\n\nexport const quickFireLogic = {\n    selectAnswers\n};","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { actions } from 'redux/actions/action-creators';\nimport { subscription } from 'redux/subscriptions';\nimport { iconicTaxa  } from 'api/snapdragon/iconic-taxa';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { quickFireAPI } from 'ui/quick-fire-modal/quick-fire-api';\nimport { quickFireUI } from 'ui/quick-fire-modal/quick-fire-ui';\nimport { quickFireLogic } from 'ui/quick-fire-modal/quick-fire-logic';\n\nimport glossaryTemplate from 'ui/fixtures/glossary-template.html';\nimport templateCreateQuickFire from 'ui/quick-fire-modal/quick-fire-filters-template.html';\nimport templateQuestionQuickFire from 'ui/quick-fire-modal/quick-fire-questions-template.html';\nimport templateSummaryQuickFire from 'ui/quick-fire-modal/quick-fire-summary-template.html';\n\nconst headers = (step, quickFire) => {\n\n    const getQuickFire = () => quickFire;\n\n    const modal = document.querySelector('#glossaryModal');\n\n    const links = { \n        glossary: modal.querySelector('.js-modal-text-title'),\n        filters: modal.querySelector('.js-quick-fire-filters'),\n        questions: modal.querySelector('.js-quick-fire-questions')\n    };\n\n    quickFireUI.updateHeaders(step, links, getQuickFire, quickFireActions);\n};\n\nconst filters = async linkFromLesson => {\n\n    const args = await init();\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateCreateQuickFire);\n\n    headers(enums.quickFireStep.FILTERS, { items: args.items, onClickFiltersLinkListeners: [], onClickGlossaryLinkListeners: [] });\n\n    let { items, type, filter } = args;\n\n    const resetQuickFire = () => {\n        actions.boundUpdateQuickFire(quickFireAPI.getQuickFire(store.getState().glossary, enums.quickFireType.DEFINITION, {}));\n        quickFireFilters(quickFire.linkFromLesson);\n    };\n\n    let state = store.getState().quickFire || quickFireAPI.getQuickFire(items, filter, type);\n    let quickFire = R.clone(state);\n        quickFire = quickFire.isComplete ? resetQuickFire() : quickFire;\n        quickFire.linkFromLesson = linkFromLesson || false;\n        quickFire.onClickFiltersLinkListeners = [];\n        quickFire.onClickGlossaryLinkListeners = [];\n\n    actions.boundUpdateQuickFire(quickFire);\n\n    const options = [\n        { key: 0, value: 'multiple choice' },\n        { key: 1, value: 'text entry' },\n        // { key: 2, value: 'multiple choice followed by text entry' },\n        // { key: 3, value: 'mixed multiple choice and text entry' },\n    ];\n\n    const branches = quickFireAPI.getBranches(items);\n\n    renderTemplate({ quickFire, options, branches }, template.content, parent);\n\n    const counters = document.querySelectorAll('.js-quick-fire-count');\n    const branchCounters = document.querySelectorAll('.js-quick-fire-branches label > span');\n    const taxonCounters = document.querySelectorAll('.js-quick-fire-taxa li > span');\n\n    const input = document.querySelector('.js-input-quick-fire');\n          input.addEventListener('input', e => {\n            quickFire.poolSize = parseInt(e.target.value);          \n          });\n          setTimeout(() => {\n            input.focus();\n          }, 250);\n\n    quickFire.poolSize = parseInt(input.value);\n\n    const updateArray = (arr, elem) => {\n        if(arr.find(e => e === elem)) {\n            return arr.filter(iconicTaxon => iconicTaxon !== elem); \n        } else {\n            arr.push(elem);\n            return arr;\n        }\n    };\n\n    const getFilterTaxa = () => quickFire.filter.iconicTaxa;\n\n    const taxa = document.querySelectorAll('.js-quick-fire-taxa li');\n          taxa.forEach(taxon => {\n\n              const chkBox = taxon.querySelector('input');\n\n              if(!R.contains(taxon.dataset.name, quickFire.filter.iconicTaxa)) {\n                  chkBox.click();\n              }\n\n              taxon.addEventListener('change', async e => {\n                const selectedTaxon = e.target.id;\n                const updatedTaxa = updateArray(getFilterTaxa(getIncludeTechnicalTerms), selectedTaxon);\n                quickFire.filter.iconicTaxa = updatedTaxa;\n                quickFire.items = quickFireAPI.getItems(updatedTaxa);\n                quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n              });\n          });\n\n    let includeTechnicalTerms = quickFire.lessonId ? true : false;\n\n    const getIncludeTechnicalTerms = () => includeTechnicalTerms;\n      \n    quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n\n    const createQuickFireBtn = document.querySelector('.js-create-quick-fire');\n          createQuickFireBtn.innerHTML = quickFire.termScore.total === 0 ? 'Start vocab review' : 'Continue your vocab review';\n          createQuickFireBtn.addEventListener('click', e => {\n            questions(quickFire);\n          }, { once: true });\n\n    const quickFireOptions = document.querySelectorAll('.js-quick-fire-filter-options .btn');\n    \n    quickFire.filter.option.key === \"0\"\n      ? quickFireOptions[0].click()\n      : quickFireOptions[1].click();\n    \n    quickFireOptions[parseInt(quickFire.filter.option.key)].classList.add('active');\n\n    quickFireOptions[0].addEventListener('click', e => {\n      e.preventDefault();\n      if(!elem.hasClass(e.target, 'active')) {\n        e.target.classList.add('active');\n        quickFire.filter.option = {\n            key: e.target.dataset.key,\n            value: e.target.dataset.value\n        };\n        quickFireOptions[1].classList.remove('active');\n      }\n    });        \n\n    quickFireOptions[1].addEventListener('click', e => {\n      e.preventDefault();\n      if(!elem.hasClass(e.target, 'active')) {\n        e.target.classList.add('active');\n        quickFire.filter.option = {\n            key: e.target.dataset.key,\n            value: e.target.dataset.value\n        };\n        quickFireOptions[0].classList.remove('active');\n      }\n    });        \n\n    const branchOptions = document.querySelectorAll('.js-quick-fire-branches label');\n\n    if(quickFire.filter.branches) {\n\n        branchOptions.forEach(branch => {\n            if(!R.contains(branch.dataset.key, quickFire.filter.branches)) {\n                branch.click();\n            }\n        });    \n    }\n\n    branchOptions.forEach(branch => {\n        branch.addEventListener('click', e => {\n        setTimeout(async() => {\n                let checkedBranches = Array.from(branchOptions).filter(b => elem.hasClass(b, 'active'));\n                    checkedBranches = checkedBranches.map(b => b.dataset.key);\n                quickFire.filter.branches = checkedBranches;\n                quickFire.items = await quickFireAPI.getItems(quickFire.filter.iconicTaxa);\n                quickFire.items = quickFire.items.filter(item => R.contains(item.branch, checkedBranches));\n                quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n            });\n        });\n    });\n\n    const technical = document.querySelector('.js-quick-fire-technical');\n          technical.addEventListener('change', async e => {\n            includeTechnicalTerms = e.target.checked;\n            quickFire.filter.includeTechnicalTerms = includeTechnicalTerms;\n            quickFire.items = quickFire.items || await quickFireAPI.getItems(quickFire.filter.iconicTaxa, includeTechnicalTerms);\n            quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n          });\n\n    if(includeTechnicalTerms) technical.click();\n\n    const reset = document.querySelector('.js-quick-fire-reset');\n          reset.addEventListener('click', e => {\n            resetQuickFire();\n          });\n};\n\nconst questions = state => {\n\n    let quickFire;\n\n    if(!state) return;\n    else quickFire = R.clone(state);\n\n    quickFire.onClickGlossaryLinkListeners = [];\n\n    headers(enums.quickFireStep.QUESTIONS, quickFire);\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateQuestionQuickFire);\n\n    let timer;    \n\n    if(quickFire.poolSize > quickFire.termScore.total) {\n\n        let answers = quickFireLogic.selectAnswers(quickFire, utils.shuffleArray(quickFire.items));\n\n        renderTemplate({ question: quickFire.question, \n                answers, total: quickFire.termScore.total + 1, \n                count: quickFire.poolSize,\n                correct: quickFire.termScore.correct, \n                answered: quickFire.termScore.total \n        }, template.content, parent);\n\n        const layouts = document.querySelectorAll('.js-quick-layouts');\n              layouts.forEach(layout => {\n                  layout.classList.add('hide-important');\n                  if(layout.id === quickFire.filter.option.key) layout.classList.remove('hide-important');  \n              });\n\n        const quickFireMessage = document.querySelector('.js-quick-fire-message');\n\n        const options = Array.from(document.querySelectorAll('.js-quick-fire-options > li'));\n              options.forEach(option => {\n                option.addEventListener('click', e => {\n                    const button = e.target;\n                    const term = button.querySelector('span').innerHTML;\n                    const answer = term;\n                    quickFireUI.scoreMultipleChoice(quickFire, answer, quickFireMessage);\n                    continueQuickFireBtn.disabled = false;\n                    if(quickFire.termScore.isIncorrect) {\n                        option.classList.add('snap-alert');\n                    }\n                    options.forEach(option => {\n                        if(option.id === quickFire.question.term) {\n                            option.classList.add('snap-success');\n                        }\n                    });\n                    timer = setTimeout(() => {\n                        continueQuickFireBtn.click();\n                    }, store.getState().config.callbackTime);\n                }, { once: true });\n              });\n              setTimeout(() => {\n                options[0].querySelector('button').focus();\n              }, 500);\n\n        const quickFireInputContainer = modal.querySelector('.js-quick-fire-text-entry');\n        const quickFireInput = modal.querySelector('.js-quick-fire-text-entry input');\n        \n        if(quickFire.filter.option.key === '1') {\n            quickFireInputContainer.classList.remove('hide-important');\n            quickFireInput.focus();\n        }\n        \n        const continueQuickFireBtn = document.querySelector('.js-continue-quick-fire-btn');\n              continueQuickFireBtn.addEventListener('click', e => {\n                continueQuickFireBtn.setAttribute(\"disabled\", true);\n                quickFire.items = quickFire.items.filter(item => item.term !== quickFire.question.term);\n                subscription.add(quickFireQuestions, 'quickFire', 'modal');\n                actions.boundUpdateQuickFire(quickFire);\n                clearTimeout(timer);        \n              }, { once: true });\n\n        let check = true;\n\n        quickFireInput.addEventListener('keydown', event => {\n            if (event.keyCode == 9 && check) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }\n        });\n\n        quickFireInput.addEventListener('keypress', event => {\n            if (event.keyCode == 13 && check) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }            \n        });\n\n        quickFireInput.addEventListener('blur', e => {\n            if(check && e.target.value.length > 2) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }\n        });\n\n        if((quickFire.question.term.split(' ').length > 1 || quickFire.question.term.indexOf('(') === 0) && quickFire.filter.option.key === '1') {\n            const hint = modal.querySelector('.js-quick-fire-hint');\n                  hint.classList.remove('hide');\n        }\n\n    } else {\n        summary(quickFire);        \n    }\n    \n    const review = modal.querySelector('.js-quick-review-progress');\n    if(review) {\n          review.addEventListener('click', e => {\n            summary(quickFire);\n          }, { once: true });\n    }\n};\n\nconst getTermsGlossary = (glossary, terms) => {\n\n    if(!terms || terms.length === 0) return glossary;\n\n    const definitions = [];\n\n    terms.forEach(term => {\n        const definition = glossary.find(def => def.id === term);\n        definitions.push(definition);\n    });\n\n    return definitions.filter(term => term);\n}\n\nconst definitions = async terms => {\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(glossaryTemplate);\n\n    const quickFire = store.getState().quickFire || quickFireAPI.getQuickFire(terms, enums.quickFireType.DEFINITION, { collection: {} });\n\n    headers(enums.quickFireStep.GLOSSARY, quickFire);\n\n    parent.innerHTML = '';\n\n    const glossary = getTermsGlossary(terms, quickFire.terms);\n\n    renderTemplate({ glossary }, template.content, parent);\n};\n\nconst init = async () => {\n\n    let taxa = [];\n    let iconicTaxaKeys = Object.keys(iconicTaxa).map(key => key.toLowerCase());\n        iconicTaxaKeys.push('common');\n        iconicTaxaKeys.forEach(taxon => {\n            taxa.push(taxon);\n        });\n\n    const { quickFire } = store.getState();\n\n    const items = quickFire.items || await quickFireAPI.getItems(taxa);\n        \n    const args = {\n        items,\n        type: enums.quickFireType.DEFINITION,\n        filter: {\n            iconicTaxa: taxa\n        }\n    };\n    return args;\n};\n\nconst summary = quickFire => {\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateSummaryQuickFire);\n\n    const passes = quickFire.termScore.passes;\n          passes.forEach((pass, i) => {\n            pass.index = i;\n            pass.wiki = pass.wiki || '';\n            pass.showWikiClass = pass.wiki.length > 0 ? '' : 'hide-important'\n          });\n    const fails = quickFire.termScore.fails;\n          fails.forEach((fail, i) => {\n            fail.index = i;\n            fail.wiki = fail.wiki || '';\n            fail.showWikiClass = fail.wiki.length > 0 ? '' : 'hide-important';\n          });\n\n    renderTemplate({ score: quickFire.termScore, passes, fails }, template.content, parent);\n\n    const answers = modal.querySelectorAll('.js-quick-review-answers');\n    const tabs = modal.querySelectorAll('.js-quick-review-tabs a');\n    \n    tabs.forEach(tab => {\n        tab.addEventListener('click', e => {\n            const type = e.target.id;\n            answers.forEach(t => {\n                t.dataset.type === type\n                    ? t.classList.remove('hide-important')\n                    : t.classList.add('hide-important');\n            });\n        });\n    });\n\n    const summaryText = modal.querySelector('.js-quick-fire-summary div:nth-child(1) > span');\n    const scoreSummary = modal.querySelector('.js-score-text-summary');\n    const continueReview = modal.querySelector('.js-quick-review-continue-review');\n\n    quickFire.isComplete = quickFire.poolSize === quickFire.termScore.total;\n\n    if(quickFire.isComplete) {\n        summaryText.innerHTML = '<span class=\"emphasis\">You have answered all of the questions correctly.</span>';\n        scoreSummary.classList.add('modal-background-relief-emphasis');\n        scoreSummary.innerHTML = `You scored ${quickFire.termScore.correct} out of ${quickFire.termScore.total}.`;        \n        if(quickFire.termScore.incorrect > 0) {\n            summaryText.innerHTML = `<span class=\"emphasis\">You've answered the questions, but not all correctly.</span>`;\n            continueReview.innerHTML = `<span>Continue</span>`;            \n            continueReview.addEventListener('click', e => {\n                const quickFireRevision = quickFireAPI.getQuickFire(quickFire.termScore.fails, enums.quickFireType.DEFINITION, {});\n                quickFireQuestions(quickFireRevision);\n            }, { once: true });            \n        } else {\n            continueReview.classList.add('hide-important');\n            continueReview.addEventListener('click', e => {\n                questions(quickFire);\n            }, { once: true });\n        }\n    } else {\n        summaryText.innerHTML = `<span>You have answered ${quickFire.termScore.total} of ${quickFire.poolSize} questions.</span>`;\n        continueReview.addEventListener('click', e => {\n            questions(quickFire);\n        }, { once: true });\n    }\n};\n\nexport const quickFireHandlers = {\n    filters,\n    questions,\n    headers,\n    init: quickFireAPI.getQuickFire,\n    definitions\n};\n\nconst quickFireFilters = linkFromLesson => {\n    quickFireHandlers.filters(linkFromLesson);\n};\n\nconst quickFireQuestions = quickFire => {\n    quickFireHandlers.questions(quickFire);\n};\n\nconst quickFireGlossary = glossary => {\n    quickFireHandlers.definitions(glossary);\n};\n\nconst quickFireActions = {\n    quickFireFilters,\n    quickFireQuestions,\n    quickFireGlossary\n};","import { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderLesson = (lesson) => {\n\n      const { config, lessons, layout } = store.getState();\n\n      const template = document.createElement('template');\n            template.innerHTML = lessonTemplate;\n\n      lesson.hideVideoClass = lesson.hasVideo ? '' : 'hide-important';\n      lesson.hideTextIntroClass = lesson.hasVideo ? 'hide-important' : '';\n\n      const savedLesson = lessons.find(saved => saved.collection.id === lesson.id);\n\n      lesson.isPaused = !!savedLesson || config.collection.id === lesson.id;\n      lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n      renderTemplate({ lesson }, template.content, document.querySelector('.js-lesson-container'));\n\n      if(savedLesson) {\n            renderReview(savedLesson.layout, savedLesson.collection, null, config);\n      } \n      \n      if(config.collection.id === lesson.id) {\n\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.id}\"]`)\n                  if(row) row.classList.add('highlighted-for-review-row');\n\n            if(config.isLandscapeMode) {\n                  setTimeout(() => {\n                        const reviewLink = row.querySelector('.js-review-summary');                  \n                        if(reviewLink) reviewLink.click();\n                  });\n            }\n\n            // current lesson whose current state is not yet saved\n            if(layout && layout.roundScoreCount) {\n                  renderReview(layout, lesson, 'progress-icon', config);\n            }\n      }\n}; \n\nconst renderReview = (layout, lesson, className, config) => {\n      const progressBar = document.querySelector('.js-right-grid progress');\n      const value = !!layout.roundProgressIndex ? layout.roundProgressIndex : progressBar ? progressBar.value : 0;\n      const review = `<progress class=\"absolute\" value=\"${ value }\" max=\"${layout.roundScoreCount}\"></progress>`;\n      const parent = document.querySelector(`.js-review[data-lesson-id=\"${lesson.id}\"]`);\n            parent.innerHTML = review;\n\n      const reviewLinkBtn = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n            reviewLinkBtn.innerText = 'Resume Quiz';\n};\n","import { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport textIntroTemplate from 'ui/screens/home/home-lesson-intro-text-template.html';\n\nexport const textSetup = (collection, config) => {\n\n    let speciesCount = getSpeciesCount(collection);\n\n    const iconicTaxa = collection.guide\n                            ? collection.guide.iconicTaxa\n                            : collection.iconicTaxa || [ ...new Set(collection.items.map(i => i.iconicTaxon)) ];\n\n    const language = config.languages.find(l => l.lang === config.language).name; // place in guide, and copy to collection\n\n    const template = document.createElement('template');\n          template.innerHTML = textIntroTemplate;\n\n    const months = collection.guide ? collection.guide.season.observableMonths.map(month => month.name) : [];\n    const observableMonths = months.length > 0 ? `${months[0]}-${months[months.length - 1]}` : '';\n    const season = months.length === 0\n                    ? 'Species observations are drawn from the whole year.'\n                    : collection.guide.season === 'all_year'\n                        ? 'Species observations are drawn from the whole year.'\n                        : `Species observations are from ${observableMonths}.`;\n\n    let speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n\n    let lessonIntro = collection.intro || '';\n\n    const summary = {\n        speciesCount,\n        iconicTaxa,\n        title: collection.name,\n        language,\n        observableMonths,\n        season,\n        speciesSummary,\n        lessonIntro\n    };\n\n    DOM.rightBody.innerHTML = '';\n\n    renderTemplate(summary, template.content, DOM.rightBody);\n\n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 500);\n    \n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 1500);\n};\n\nconst handleSpeciesUpdate = (speciesCount, collection, speciesSummary, iconicTaxa) => {\n    if (speciesCount === '--') {\n        speciesCount = getSpeciesCount(collection);\n        document.querySelector('.js-species-summary').innerHTML = speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n    }\n    return { speciesCount, speciesSummary };\n};\n\nconst getSpeciesSummary = (iconicTaxa, speciesCount) => {\n    return iconicTaxa.length === 1\n        ? `${speciesCount} species in ${iconicTaxa.length} taxon.`\n        : `${speciesCount} species in ${iconicTaxa.length} taxa.`;\n};\n\nconst getSpeciesCount = collection => {\n    let count = (collection.itemNames && collection.itemNames.length > 0)\n        ? collection.itemNames.length\n        : collection.items ? collection.items.length : 0;\n    return count === 0 ? '--' : count;\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { textSetup } from 'ui/screens/home/home-lesson-intro-text';\n\nexport const renderLessonIntro = collection => {\n\n    const { config, videoPlayer, collection: lesson } = store.getState();\n\n    collection = { ...collection, items: lesson.items };\n\n    collection.hasVideo ? videoSetup(collection, videoPlayer || [], DOM.rightBody) : textSetup(collection, config);\n    \n}","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport lessonEditTemplate from 'ui/screens/lists/lesson-edit-template.html';\n\nexport const renderEditLesson = collection => {\n\nconst init = async () => {\n\n    const { config } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonEditTemplate;\n\n    const modal = document.querySelector('#basicModal');\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';\n\n    renderTemplate({ collection }, template.content, parent);\n    \n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = 'Edit lesson';\n\n    const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n          selectedSpeciesDisplay.innerHTML = '';\n    \n    const createGuide = {\n        setConfig: config => {\n        actions.boundUpdateConfig(config);\n        }\n    };\n\n    speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n};\n\ninit();\n\n};","const siblingsBefore = lessonId => {\n        \n    let siblings = document.querySelectorAll('.js-lesson-list-item:not(.hide-important)');\n    let sibling = siblings[0];\n    let index = 0;\n\n    const before = [];\n    \n    while(sibling) {\n      index++;\n      if(parseInt(sibling.dataset.lessonId) !== lessonId) {\n        before.push(sibling);\n        sibling = siblings[index];\n      } else {\n        sibling = null;\n      }\n    }\n\n    return before.length;\n  };\n\nconst scrollToTitle = lessonId => {\n  setTimeout(() => {\n    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhRow').replace('px', ''));\n    const rows = siblingsBefore(lessonId);\n    const top = standardBlock * (rows);\n\n    const scroll = document.querySelector('.lesson-list .scrollable');\n    if(scroll) scroll.scrollTop = top;\n  });\n};\n\nexport const lessonListScrollHandler = {\n  scrollToTitle\n}","import * as R from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessonIntro } from 'ui/screens/home/home-lesson-intro';\nimport { renderEditLesson } from 'ui/screens/lists/lesson-edit';\nimport { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nconst onLoadLessonViewState = (collection, videoPlayer, score, config) => {\n\n  const taxa = collection.iconicTaxa ? collection.iconicTaxa.map(taxon => taxon.common).join(', ') : '';\n\n  collection.taxa = taxa;\n  collection.hasVideo = collection.video && !R.isEmpty(collection.video) ? true : false;\n  collection.showVideoIconClass = collection.hasVideo ? '' : 'hide-important';\n  collection.videoState = videoHandler.setVideoState(videoPlayer || [], collection);\n  collection.reviewState = 'Lesson Quiz';\n\n  collection.hasTermsClass = collection.terms && Array.isArray(collection.terms) && collection.terms.length > 0 ? '' : 'hide-important';\n  collection.isCollectionEditableClass = '';\n\n  return collection;  \n};\n\nconst onLoadLessonsViewState = (collections, videoPlayer, score, config) => {\n  return collections.map(collection => {\n    return onLoadLessonViewState(collection, videoPlayer, score, config);\n  });\n};\n\nconst onClickViewState = (e, lessons) => {\n\n  const icon = e.currentTarget;\n  const isYoutubeIcon = elem.hasClass(icon, 'js-lesson-list-youtube');\n  const isChevronIcon = elem.hasClass(icon, 'js-lesson-list-chevron');\n  const row = icon.parentElement.parentElement;\n  const lessonId = parseInt(icon.dataset.lessonId);\n  const lesson = lessons.find(l => l.id === lessonId);\n  const container = document.querySelector(`.js-species-container[data-container-id=\"${lessonId}\"]`);\n  const speciesList = document.querySelector(`#species_list_id_${lessonId}`);\n  const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lessonId}\"]`);\n\n  let action = isYoutubeIcon ? enums.userEvent.START_LESSON : isChevronIcon ? enums.userEvent.TOGGLE_SPECIES_LIST : enums.userEvent.DEFAULT;\n  lessonStateHandler.recordUserAction(action);\n\n  hideOtherContentAndRevertChevrons(lessonId);\n\n  const isSpeciesListAvailable = !!speciesList;\n  const isSpeciesListHidden = elem.hasClass(speciesList, 'hide');\n\n  const lessonVideoState = document.querySelector(`.js-lesson-video-state[data-lesson-id=\"${lessonId}\"]`);\n  const iconIsChevron = !icon.dataset.lessonIsYoutubeIcon;\n\n  const state = {\n    requiresSpeciesList: !isSpeciesListAvailable,\n    revealSpeciesList: isSpeciesListAvailable && isSpeciesListHidden,\n    hideSpeciesList: isSpeciesListAvailable && !isSpeciesListHidden && iconIsChevron\n  };\n\n  return { icon, lesson, state, speciesList, container, lessonVideoState, reviewLink, row, isYoutubeIcon };\n};\n\nconst onLessonIconClickHandler = (icon, lessons, config, startLesson) => {\n  \n  return icon.addEventListener('click', async e => {      \n\n    const { icon, lesson, state, speciesList, container, lessonVideoState, row, isYoutubeIcon } = onClickViewState(e, lessons);\n\n    const isItemActive = item => {\n      if(item.hasOwnProperty('isActive')) {\n        return item.isActive;\n      } else {\n        return true;\n      }\n    };\n\n    lesson.items = lesson.items.filter(item => isItemActive(item));\n\n    if(config.isLandscapeMode) {\n\n      const lessonYoutubeIcons = document.querySelectorAll('.lesson-list-selected-lesson .youtube-icon');\n            lessonYoutubeIcons.forEach(icon => icon.parentElement.classList.remove('youtube-green-fg'));\n\n      if(icon.dataset.lessonIsYoutubeIcon) {\n        icon.classList.add('youtube-green-fg');\n        const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${icon.dataset.lessonId}\"]`);\n              chevron.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n      }\n\n      let siblingChevron;\n\n      if(state.requiresSpeciesList) {\n        await loadAndDisplaySpeciesList(icon, lesson, container);\n      }\n\n      if(startLesson) {\n        renderLessonIntro(lesson);\n        siblingChevron = icon.parentElement.parentElement.parentElement.children[1].children[0].children[1];\n        if(isYoutubeIcon) {\n          if(state.hideSpeciesList) {\n            siblingChevron.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n          }\n        }\n      } else {\n        if(!isYoutubeIcon) {\n          if(state.hideSpeciesList) {\n            icon.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n          } else if(!state.revealSpeciesList) {\n            icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n          }\n        }\n      }\n\n      if(state.revealSpeciesList) {        \n        speciesList.classList.remove('hide');\n        if(!isYoutubeIcon) {\n          icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n        }\n      }\n      if(state.hideSpeciesList) {\n        speciesList.classList.add('hide');\n        lessonVideoState.innerHTML = videoHandler.setVideoState(store.getState().videoPlayer || [], lesson);\n      }\n    }\n\n    if(config.isPortraitMode) {\n\n      if(state.requiresSpeciesList) {\n        await loadAndDisplaySpeciesList(icon, lesson, container);\n      }\n\n      renderLessonIntro(lesson);\n      \n      lessonStateHandler.changeRequest({\n        requestType: enums.lessonState.RENDER_SPECIES_LIST,\n        requestArgs: { lesson, container: DOM.rightBody.querySelector('.js-home-scrolling-container .scrollable') }\n      });\n    }\n\n    row.classList.add('lesson-list-selected-lesson');\n  });\n};\n\nconst onLessonTitleClickHandler = (title, lessons) => {\n    title.addEventListener('click', e => {\n          const lesson = lessons.find(lesson => lesson.id === parseInt(title.dataset.lessonId));\n          renderEditLesson(lesson);\n    });\n};\n\nconst onReviewClickHandler = reviewLink => {    \n\n  reviewLink.addEventListener('click', async e => {\n\n    lessonStateHandler.recordUserAction(enums.userEvent.START_LESSON_REVIEW);\n\n    const lessonId = reviewLink.dataset.lessonId;\n    // const loadingMessage = document.querySelector(`.js-loading-review-message[data-lesson-id=\"${lessonId}\"]`);\n    //       loadingMessage.classList.remove('hide');\n\n    //       setTimeout(() => {\n    //         loadingMessage.classList.add('hide');\n    //       }, 2000);\n\n    const { lesson } = store.getState();\n\n    lessonStateHandler.changeRequest({\n      requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n      requestArgs: {\n        id: reviewLink.dataset.lessonId\n      }\n    });\n  });\n};\n\nconst hideOtherContentAndRevertChevrons = selectedLessonId => {\n\n  const upChevrons = Array.from(document.querySelectorAll('.js-lesson-list-chevron .fa-chevron-up'));\n\n  upChevrons.forEach(chevron => {\n    \n    const chevronLessonId = parseInt(chevron.dataset.lessonId);\n\n    if(chevronLessonId !== selectedLessonId) {\n      \n      chevron.click();\n        \n      const lesson = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${chevronLessonId}\"]`);\n            lesson.classList.remove('highlighted-for-review-row');\n    }\n  });\n};\n\nconst loadAndDisplaySpeciesList = async(icon, lesson, container) => {\n\n  Array.from(icon.parentElement.children).forEach(child => child.dataset.selected = true);\n\n  if(userAction && userAction.name === enums.userEvent.START_LESSON.name) { return; }\n\n  const { userAction, config } = store.getState();\n\n  await lessonStateHandler.changeRequest({\n    requestType: enums.lessonState.RENDER_SPECIES_LIST,\n    requestArgs: { lesson, container }\n  });\n\n  lessonListScrollHandler.scrollToTitle(lesson.id);\n};\n\nexport const lessonListEventHandler = {\n  onLoadLessonViewState,\n  onLoadLessonsViewState,\n  onLessonIconClickHandler,\n  onReviewClickHandler,\n  onLessonTitleClickHandler,\n  hideOtherContentAndRevertChevrons\n};","import { onCreateCustomLesson } from 'ui/create-guide-modal/create-guide';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonListEventHandler } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderCustomLesson = (lessons, savedLessons, videoPlayer, score, config) => {\n\n    onCreateCustomLesson(collection => {\n\n        const parent = document.querySelector('.lesson-list > .scrollable');\n        const template = document.createElement('template');\n              template.innerHTML = lessonTemplate;\n        \n        const lesson = lessonListEventHandler.onLoadLessonViewState(collection, savedLessons, videoPlayer, score, config);\n              lesson.hideVideoClass = 'hide-important';\n              lesson.hideTextIntroClass = '';\n        \n        lessons.push(lesson);\n        \n        lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n        renderTemplate({ lesson }, template.content, parent);\n        \n        const title = document.querySelector(`.js-lesson-title[data-lesson-id=\"${lesson.id}\"]`);\n        lessonListEventHandler.onLessonTitleClickHandler(title, lessons);\n\n        const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n        lessonListEventHandler.onReviewClickHandler(reviewLink, lessons);\n\n        const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${lesson.id}\"]`);\n\n        if(chevron) {\n          chevron.classList.remove('landscape');\n          lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false);\n        }\n\n        const youtubeLessonIcon = document.querySelector(`.js-lesson-list-youtube[data-lesson-id=\"${lesson.id}\"]`);\n        if(youtubeLessonIcon) {\n          youtubeLessonIcon.classList.add('hide-important');\n        }\n\n        const scrollOptions = {\n          left: 0,\n          top: 1000,\n          behavior: 'smooth'\n        }\n            \n        document.querySelector('.js-lesson-container').scrollTo(scrollOptions);\n    });\n};","import { contains } from 'ramda';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { createGuideHandler } from 'ui/create-guide-modal/create-guide';\nimport { quickFireHandlers } from 'ui/quick-fire-modal/quick-fire';\nimport { renderLessonListHeader } from 'ui/screens/lists/lesson-list-header';\nimport { renderLesson } from 'ui/screens/lists/lesson';\nimport { renderCustomLesson } from 'ui/screens/lists/lesson-custom';\nimport { lessonListEventHandler } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonListTemplate from 'ui/screens/lists/lesson-list-template.html';\n\nexport const renderLessons = () => {\n\n    let { config, collections, lessons: savedLessons, videoPlayer, score } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonListTemplate;\n\n    let lessons = lessonListEventHandler.onLoadLessonsViewState(collections.filter(collection => (collection.isActive === undefined || collection.isActive)), videoPlayer, score, config);\n\n    lessons = lessons.sort(function(a,b){\n          const tsa = a.create ? a.create.seconds : 0;\n          const tsb = b.create ? b.create.seconds : 0;\n        return tsb - tsa;\n    });\n\n    let parent = config.isPortraitMode ? DOM.rightBody : DOM.leftBody;\n        parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n      lessons.forEach(lesson => renderLesson(lesson));\n\n      renderLessonListHeader(parent);\n\n      const createCustomLessonBtn = parent.querySelector('.js-create-custom-lesson');          \n            createCustomLessonBtn.addEventListener('click', e => {\n                  createGuideHandler(1);\n                  lessonListEventHandler.hideOtherContentAndRevertChevrons(0);\n            });    \n\n      const lessonTitles = document.querySelectorAll('.js-lesson-title');\n            lessonTitles.forEach(title => lessonListEventHandler.onLessonTitleClickHandler(title, lessons));\n\n      const youtubeLessonIcons = document.querySelectorAll('.js-lesson-list-youtube');\n            youtubeLessonIcons.forEach(youtube => lessonListEventHandler.onLessonIconClickHandler(youtube, lessons, config, true));\n      highlightActiveLesson(youtubeLessonIcons);\n\n      const chevrons = document.querySelectorAll('.js-lesson-list-chevron');\n            chevrons.forEach(chevron => lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false));\n      highlightActiveLesson(chevrons);\n\n      const reviews = document.querySelectorAll('.js-review-link');\n            reviews.forEach(reviewLink => lessonListEventHandler.onReviewClickHandler(reviewLink));\n      highlightActiveLesson(reviews);\n\n      setTimeout(() => {      \n\n            let terms = document.querySelectorAll('.js-terms-review-link');\n                terms.forEach(term => {\n                  let termsReviewLink = term.querySelector('button');\n                  termsReviewLink.addEventListener('click', e => {                         \n                        const lesson = lessons.find(lesson => lesson.id === parseInt(termsReviewLink.dataset.lessonId));\n                        if(lesson.terms) {\n                              const { glossary } = store.getState();\n                              setTimeout(() => {\n                                    const { quickFire } = store.getState();\n                                    if(quickFire && quickFire.lessonId === lesson.id) {\n                                          quickFireHandlers.questions(quickFire);\n                                    } else {\n                                          quickFireHandlers.questions({ ...quickFireHandlers.init(glossary, enums.quickFireType.DEFINITION, lesson), linkFromLesson: true });\n                                    }\n                              },150);\n                        }\n                });\n            });\n            highlightActiveLesson(terms);\n\n      },100);\n\n      renderCustomLesson(lessons, savedLessons, videoPlayer, score, config);      \n};\n\nconst highlightActiveLesson = lessons => {\n      lessons.forEach(lesson => lesson.addEventListener('click', e => {\n            \n            const rows = document.querySelectorAll('.js-lesson-list-carousel-item');\n                  rows.forEach(row => row.classList.remove('highlighted-for-review-row'));\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.dataset.lessonId}\"]`);\n            if (row)\n                  row.classList.add('highlighted-for-review-row');\n\n            // lessonListScrollHandler.scrollToTitle(lesson.dataset.lessonId);\n      }));\n};\n\n","// https://github.com/GoogleChromeLabs/samesite-examples/blob/master/javascript.md\n\nconst FIRST_TIME = 'first_time';\nconst LAST_VISITED = 'last_visited';\nconst TOO_MANY_DAYS = 5;\nconst SECURE = 'SameSite=Lax;';\n\nlet cookie;\n\nconst setFirstTimeVisitorCookie = () =>  {\n    let isFirstVisit = true;\n    if (document.cookie.indexOf(FIRST_TIME) < 0) {\n      cookie = `${FIRST_TIME}=false; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        isFirstVisit = false;\n    }\n    return isFirstVisit;\n};\n\nconst setLastVisitedCookie = date => {    \n    if (document.cookie.indexOf(LAST_VISITED) < 0) {\n      cookie = `${LAST_VISITED}=${date}; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        setLastVisited(date);\n    }    \n};\n\nconst hasUserBeenAwayTooLong = () => {\n    const lastVisited = readCookie(LAST_VISITED);\n\n    if(!lastVisited) return false;\n\n    const timeDiff = Math.abs(new Date() - new Date(lastVisited));\n    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)); \n    const beenGoneTooLong = daysDiff > TOO_MANY_DAYS;\n    if(beenGoneTooLong) {\n        setLastVisited(Date());\n    }\n    return beenGoneTooLong;\n};\n\nconst isFirstTimeVisitor = () => {\n    return readCookie(FIRST_TIME) === null;\n};\n\nconst removeFirstTimeVisitorCookie = () => {\n  cookie = `${FIRST_TIME}= ; expires = Thu, 01 Jan 1970 00:00:00 GMT; ${SECURE}`;\n  document.cookie = cookie; \n};\n\nexport const cookieHandler = {\n    setFirstTimeVisitorCookie,\n    isFirstTimeVisitor,\n    removeFirstTimeVisitorCookie,\n    setLastVisitedCookie,\n    hasUserBeenAwayTooLong\n};\n\nconst readCookie = name => {\n\tvar nameEQ = name + \"=\";\n\tvar ca = document.cookie.split(';');\n\tfor(var i=0;i < ca.length;i++) {\n\t\tvar c = ca[i];\n\t\twhile (c.charAt(0)==' ') c = c.substring(1,c.length);\n\t\tif (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n\t}\n\treturn null;\n}\n\nconst setLastVisited = date => {\n    const cookieValue = document.cookie.replace(/(?:(?:^|.*;\\s*)last_time\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n    const cookieToAdd = cookieValue + `${LAST_VISITED}=${date};`;\n    cookie = `${cookieToAdd}; ${SECURE}`;\n    document.cookie = cookie;\n};\n","import lessonListHeaderTemplate from 'ui/screens/lists/lesson-list-header-template.html';\n\nexport const renderLessonListHeader = parent => {\n\n    const header = document.createElement(\"div\");\n          header.innerHTML = lessonListHeaderTemplate;\n\n    const sibling = document.querySelector('.lesson-list .scrollable');\n\n    parent = document.querySelector('.lesson-list');\n    parent.insertBefore(header, sibling);\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport settingsTemplate from 'ui/fixtures/settings-template.html';\n\nexport const settingsHandler = () => {\n    \n  document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n    \n    template.innerHTML = settingsTemplate;\n    \n    document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon settings';\n\n    const { config } = store.getState();\n\n    const delay = config.callbackTime/1000;\n\n    const languages = config.languages;\n\n    renderTemplate({ delay, languages }, template.content, document.querySelector('#basicModal .js-modal-text'));\n    \n    const clearCacheBtn = document.querySelector('.js-clear-cache-btn');\n    const setDelayBtn = document.querySelector('.js-set-delay-btn');\n    const setDelayInput = document.querySelector('.js-set-delay-input');\n    const delayTxt = document.querySelector('.js-delay-text');\n\n    document.querySelector('#basicModal .modal-body').classList.remove('bird-song-bg');\n\n    delayTxt.innerHTML = delay === 1\n    ? `The current delay is ${delay} second.`\n    : `The current delay is ${delay} seconds.`;\n\n    clearCacheBtn.addEventListener('click', () => { \n        clearCacheBtn.innerText = 'Clearing cache…';\n        setTimeout(() => {\n            persistor.purge();\n            clearCacheBtn.innerText = 'Cache cleared';\n            cookieHandler.removeFirstTimeVisitorCookie();\n            setTimeout(() => {                                \n                setTimeout(() => {                    \n                    window.location.reload(true);\n                }, 500);\n            }, 500);\n        }, 1000);\n    });\n\n    setDelayBtn.addEventListener('click', () => {\n        setDelayBtn.innerHTML = 'Setting delay…';\n        setTimeout(() => {\n            const delay = setDelayInput.value;\n            config.callbackTime = delay * 1000;\n            actions.boundUpdateConfig(config);\n            setDelayBtn.innerHTML = 'Set delay';\n            delayTxt.innerHTML = delay === '1'\n                ? `Delay updated to ${delay} second.`\n                : `Delay updated to ${delay} seconds.`;\n        }, 500);        \n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        actions.boundUpdateConfig(config);\n    });\n};","import { DOM } from 'ui/dom';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport loginTemplate from 'ui/fixtures/login-template.html';\nimport logoutTemplate from 'ui/fixtures/logout-template.html';\n\nexport const renderLogin = user => {\n\n    const auth = firebase.auth();\n    \n    document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n        \n    if(user) {\n\n        template.innerHTML = logoutTemplate\n\n        renderTemplate({ email: user.email }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon logout';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        setTimeout(() => {\n            \n            const form = document.querySelector('#logout-form');\n                  form.addEventListener('submit', e => {\n\n                e.preventDefault();\n\n                const logOut = document.querySelector('#js-logout-btn');\n                      logOut.setAttribute('disabled', 'disabled');\n\n                  auth.signOut()\n                  .then(() => {\n                    actions.boundUpdateUser(null);\n                    logOut.innerHTML = 'Success';\n                    setTimeout(() => {\n                        footer.click();\n                    }, 2500);\n                  });\n          });\n\n        }, 500);\n\n\n    } else {\n\n        template.innerHTML = loginTemplate;\n\n        renderTemplate({ }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon login';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        setTimeout(() => {\n\n            const email = document.querySelector('#login-email');\n                  email.focus();\n            \n            const password = document.querySelector('#login-password');   \n\n            const form = document.querySelector('#login-form');\n                  form.addEventListener('submit', e => {\n\n                    e.preventDefault();\n\n                    const logIn = document.querySelector('#js-login-btn');\n                          logIn.setAttribute('disabled', 'disabled');              \n                    \n                    auth.signInWithEmailAndPassword(email.value, password.value)\n                    .then((credentials) => {\n                        actions.boundUpdateUser({\n                            email: email.value,\n                            password: password.value\n                        });\n                        logIn.innerHTML = 'Success';\n                        setTimeout(() => {\n                            footer.click();\n                        }, 2500);\n                    })\n                    .catch( error => {\n                        const notLoggedIn = document.querySelector('.js-not-logged-in');\n                              if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n                              if(notLoggedIn) notLoggedIn.querySelector('.js-message').innerHTML = error.message;\n                    });\n                });\n\n        }, 500);\n\n    }\n};\n\nexport const renderLoggedIn = user => {\n\n    if(user) {\n        const loggedIn = document.querySelector('.js-logged-in');\n              if(loggedIn) loggedIn.classList.remove('hide-important');\n    } else {\n        const notLoggedIn = document.querySelector('.js-not-logged-in');\n              if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n        const loggedOut = document.querySelector('.js-logged-out');\n              if(loggedOut) loggedOut.classList.remove('hide-important');\n    }\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport languageTemplate from 'ui/fixtures/language-template.html';\n\nexport const renderLanguagePicker = () => {\n\n    const { config } = store.getState();\n\n    const parent = document.querySelector('#basicModal .js-modal-text');\n          parent.innerHTML = '';\n\n    const template = document.createElement('template');    \n          template.innerHTML = languageTemplate;\n\n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Vernacular language';\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        actions.boundUpdateConfig(config);\n    });\n};","import * as R from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { subscription } from 'redux/subscriptions';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { settingsHandler } from 'ui/fixtures/settings';\nimport { renderLogin } from 'ui/fixtures/login';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { quickFireHandlers } from 'ui/quick-fire-modal/quick-fire';\nimport { renderLanguagePicker } from 'ui/fixtures/language';\n\nimport navigationPortraitTemplate from 'ui/fixtures/navigation-portrait-template.html';\nimport navigationLeftTemplate from 'ui/fixtures/navigation-left-template.html';\nimport navigationRightTemplate from 'ui/fixtures/navigation-right-template.html';\n\nconst onLoseFocusListeners = [];\n\nexport const onAddLoseFocusListener = listener => {\n    onLoseFocusListeners.pop();\n    onLoseFocusListeners.push(listener);\n}\n\nexport const renderNavigation = collection => {\n\n    const { config, counter } = store.getState();\n\n    const template = document.createElement('template');\n\n    let parent;\n    \n    if(config.isPortraitMode) {\n        template.innerHTML = navigationPortraitTemplate;\n        parent = document.querySelector('.js-main-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    } else {\n        template.innerHTML = navigationLeftTemplate;\n        parent = document.querySelector('.js-left-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n        template.innerHTML = navigationRightTemplate;\n        parent = document.querySelector('.js-right-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    }\n\n    const navIcons =  document.querySelectorAll('.js-nav-icons .icon');\n\n    navIcons.forEach(icon => {\n\n        icon.addEventListener('click', async event => {\n            \n                const clickedIcon = event.currentTarget;\n                \n                const { collection, config } = store.getState();\n\n                const toggleIconOnOff = clickedIcon => {\n                    clickedIcon.classList.add('active-icon');\n                    setTimeout(() => {\n                        clickedIcon.classList.remove('active-icon');\n                    }, 1000);\n                };\n\n                let lesson;\n\n                switch(enums.navigation.enumValueOf(clickedIcon.id)) {\n                    case enums.navigation.LANDSCAPE_HOME:\n                        const isIconActive = R.contains('active-icon', clickedIcon.classList);\n                        if(!isIconActive) {\n                            clickedIcon.classList.add('active-icon');\n                        }\n                        break;\n                    case enums.navigation.SETTINGS:\n                        toggleIconOnOff(clickedIcon);\n                        settingsHandler();\n                        break;\n                    case enums.navigation.PORTRAIT_HOME:\n                        onLoseFocusListeners.forEach(listener => listener());\n                        const activeInfoIcon = document.querySelector('.js-info.active-icon');\n                        if(activeInfoIcon) activeInfoIcon.classList.remove('active-icon');\n                        clickedIcon.classList.add('active-icon');\n                        subscription.getByRole('screen').forEach(sub => subscription.remove(sub));\n                        lesson = await lessonStateHandler.changeRequest({ requestType: enums.lessonState.PAUSE_LESSON });\n                        renderLessons();\n                        DOM.rightHeaderTxt.innerHTML = 'Learn the planet';\n                        DOM.rightHeaderScoreTxt.innerHTML = '';\n                        break;\n                    case enums.navigation.GLOSSARY:   \n                        toggleIconOnOff(clickedIcon);\n                        const { glossary } = store.getState();\n                        const definitions = !!collection.glossary\n                            ? glossary.filter(definition => R.contains(definition.taxon, collection.glossary))\n                            : glossary;\n                        quickFireHandlers.definitions(definitions);\n                        break;\n                    case enums.navigation.EMAIL:\n                        toggleIconOnOff(clickedIcon);\n                        break;\n                    case enums.navigation.LOGIN:\n                        renderLogin(store.getState().user);\n                        break;\n                    case enums.navigation.LANGUAGE:\n                        renderLanguagePicker();\n                    default:\n                        return;\n                }\n        });        \n    });\n\n    const onLoadState = (config, counter) => {\n        \n        if(config.isPortraitMode && config.collection.id !== 0 && !counter.isLessonRehydrated) {\n            navIcons.forEach(icon => icon.classList.remove('active-icon'));\n            return;\n        }\n\n        if(counter.isLessonPaused) {\n\n            if(config.isPortraitMode) {\n                const id = enums.navigation.PORTRAIT_HOME.name;\n                let icon = document.getElementById(id);\n                const returningUser = !cookieHandler.isFirstTimeVisitor();\n\n                if(id === enums.navigation.LANDSCAPE_HOME.name || (id === enums.navigation.PORTRAIT_HOME.name && returningUser)) {\n                    icon.classList.add('active-icon');\n                }\n            }\n        } else {\n            navIcons.forEach(icon => icon.classList.remove('active-icon'));\n        }\n    };\n\n    onLoadState(config, counter);\n};\n\nexport const renderLoginChanges = user => {\n};\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport { onAddLoseFocusListener } from 'ui/fixtures/navigation';\n\nimport textEntryTemplate from 'ui/screens/text-entry/text-entry-templates.html';\nimport textEntryPortraitTemplate from 'ui/screens/text-entry/text-entry-portrait-templates.html';\n\nexport const renderInput = (screen, question) => {\n\n    const { lessonPlan, collection, config, layout } = store.getState();\n\n    const item = collection.nextItem;\n\n    let vernacularName, binomial, questionTxt;\n\n    questionTxt = 'Complete the latin name';\n\n    switch(question.taxon) {\n        case 'genus': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ${question.species}`;\n            questionTxt = 'Enter the genus name';\n            break;\n        case 'species': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `${question.genus} ---`;\n            questionTxt = 'Enter the species name';\n            break;\n        case 'name': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ---`;\n            questionTxt = 'Enter full latin name';\n            break;\n        case 'vernacular':\n            vernacularName = '--- ---';\n            binomial = item.name;\n            questionTxt = 'Enter the common name';\n            break;\n    }\n\n    const help = config.isLandscapeMode ? '(Complete the name below.)' : '(Scroll to see more images.)';\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help, term: '' });\n\n    const template = document.createElement('template');\n          template.innerHTML = config.isLandscapeMode ? textEntryTemplate : textEntryPortraitTemplate;\n    \n    renderTemplate({ }, template.content, parent);\n\n    const inputTxt = document.querySelector('.js-txt-input');\n    const helpTxt = document.querySelector('.js-help-txt');\n\n    switch(question.taxon) {\n        case 'genus': \n            inputTxt.setAttribute('placeholder', 'Enter genus name');\n            helpTxt.innerHTML = `--- ${question.species}`;\n            break;\n        case 'species': \n            inputTxt.setAttribute('placeholder', 'Enter species name');\n            helpTxt.innerHTML = `${utils.capitaliseFirst(question.genus)} ---`;\n            break;\n        case 'name': \n            inputTxt.setAttribute('placeholder', 'Enter latin name');\n            helpTxt.innerHTML = `--- ---`;\n            break;\n        case 'vernacular':\n            inputTxt.setAttribute('placeholder', 'Enter common name');\n            helpTxt.innerHTML = `-----`;\n            break;\n    }\n\n    const boundScore = {};\n\n    const answerBtn = document.querySelector('.js-check-answer');\n\n    const callback = (score, scoreUpdateTimer) => {        \n        boundScore.scoreUpdateTimer = scoreUpdateTimer;\n        boundScore.score = score;\n    };\n\n    const scoreEventHandler = e => {\n        e.preventDefault();\n        const answer = document.querySelector('.js-txt-input').value;\n        const score = { \n            itemId: item.id, question, answer, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt, \n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        if(answerBtn) answerBtn.disabled = true;\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n        if(helpTxt) helpTxt.innerHTML = question.taxon === 'vernacular' ? item.vernacularName : item.name;\n    };\n\n    const loseFocusMobileHandler = e => {\n        document.removeEventListener('focusout', loseFocusMobileHandler);\n        const answer = document.querySelector('.js-txt-input').value;\n        const score = { \n            itemId: item.id, question, answer: document.querySelector('.js-txt-input').value, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt,\n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n    };\n\n    if(config.isLandscapeMode) {\n        answerBtn.addEventListener('click', scoreEventHandler, { once: true });\n    }\n    \n    if(config.isPortraitMode) renderPortrait(item, config);\n    else renderLandscape(item, config, question);\n\n    document.querySelector('.js-continue-lesson-btn').addEventListener('click', e => {\n        window.clearTimeout(boundScore.scoreUpdateTimer);\n        bindScore(boundScore.score);\n    }, { once: true });\n\n    if(config.isPortraitMode) {\n\n        // hide attribution for now - space issue various across devices\n        const attribution = document.querySelector('.js-attribution-layer');\n              attribution.classList.add('hide-important');\n        const indicators = document.querySelector('.js-carousel-indicators');\n              indicators.classList.add('hide-important');\n    }\n};\n\nconst renderPortrait = (item, config) => {\n    \n    const images = prepImagesForCarousel(item, config, imageUseCases.TEXT_ENTRY);\n\n    const parent = document.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent });\n};\n\nconst renderLandscape = (item, config, question) => {\n    \n    let answer = question[question.taxon];\n    \n    let pool;\n\n    switch(question.taxon) {\n        case 'vernacular':\n            pool = item.vernacularName.toLowerCase();\n            answer = question.common;\n            break;\n        case 'genus':\n            pool = item.taxonomy.genus.toLowerCase();\n            break;\n        case 'species':\n            pool = item.taxonomy.species.toLowerCase();\n            break;\n        case 'binomial':\n        case 'name':\n            pool = item.name.toLowerCase();\n            answer = question.binomial;\n            break;\n    }\n\n    let letterBlocks = '';\n\n    utils.shuffleArray(Array.from(pool)).forEach( (letter, index) => {\n        if(letter === ' ') letter = '&nbsp;';\n        letterBlocks += `<span id=\"${index}\" class=\"block\">${letter}</span>`\n    });\n\n    document.querySelector('.js-pool-letters').innerHTML = letterBlocks;\n\n    const input = document.querySelector('.js-txt-input');\n\n    const letters = [];\n\n    const deleteLetter = letter => {\n        let value = document.querySelector('.js-txt-input').value;\n        let activeBlocks = Array.from(document.querySelectorAll('.block.active'));\n        let activeLetters = Array.from(value);\n        let activeBlock = activeBlocks.find(block => block.innerText.trim() === activeLetters[activeLetters.length-1].trim());\n        let lastLetter = letter || activeBlock;\n        if(value.length > 0){\n            let indexInInput = value.lastIndexOf(lastLetter.innerHTML);            \n            let newValue = '';\n            let letters = Array.from(value);\n            letters.splice(indexInInput,1);\n            letters.forEach(letter => newValue += letter);            \n            input.value = newValue;\n        }\n        let correctBlocks = Array.from(document.querySelectorAll('.correct'));\n            correctBlocks.forEach(b => b.classList.remove('correct'));\n            correctBlocks.forEach(b => b.classList.add('active'));\n        if(lastLetter) {\n          lastLetter.classList.remove('active');\n          letters.forEach(l => {            \n              if(l.id === lastLetter.id) {\n                  const letterIndex = letters.indexOf(l);\n                  if(letterIndex > -1)\n                      letters.splice(letterIndex,1);\n              }\n          });        \n        }\n    };\n\n    const blocks = document.querySelectorAll('.block');\n\n    blocks.forEach(block => {\n        block.addEventListener('click', e => {\n          e.preventDefault();\n          const letter = e.target;\n          if(letter.classList.contains('active')) {\n              deleteLetter(letter);\n          } else {\n              letter.classList.add('active');\n              letters.push(letter);\n              if(letter.innerHTML === '&nbsp;')\n                  input.value += ' ';\n              else\n                  input.value += letter.innerHTML;\n          }\n          if(input.value === answer.toLowerCase()) {\n              blocks.forEach(block => block.classList.add('correct'));\n          }\n        });\n    });\n\n    document.querySelector('.js-delete-letter').addEventListener('click', e => {\n      e.preventDefault();\n      deleteLetter();\n    });\n\n    const keyboardBtn = document.querySelector('.js-toggle-keyboard');          \n          keyboardBtn.addEventListener('click', e =>{\n            e.preventDefault();\n            const disabled = input.hasAttribute('disabled');\n            if(disabled) {\n                keyboardBtn.innerHTML = 'Enable letters';\n                input.removeAttribute('disabled');\n                input.focus();\n            } else {\n                keyboardBtn.innerHTML = 'Enable keyboard'\n                input.setAttribute('disabled', 'disabled');\n            }\n          });\n\n    setTimeout(() => {\n      keyboardBtn.focus();\n    }, 500);\n\n    const blockArray = [ ...blocks ];    \n    const entries = [];\n    let selectedBlock;\n\n    input.addEventListener('input', e => {\n        e.preventDefault();\n        if(!e.data) return;\n        let entry = e.data.toLowerCase();\n        entry = entry === ' ' ? '&nbsp;' : entry;\n        entries.push(entry);\n        selectedBlock = blockArray.find(block => block.innerHTML === entry);\n        if(selectedBlock) selectedBlock.classList.add('active');\n        if(input.value === answer.toLowerCase()) {\n            blockArray.forEach(block => block.classList.add('correct'));\n        }\n    });\n\n    input.addEventListener('keyup', e => {\n        e.preventDefault();\n        if(e.keyCode === 8) { // Backspace\n          const entry = entries.pop();\n          selectedBlock = blockArray.find(block => block.innerHTML === entry);\n          if(selectedBlock) selectedBlock.classList.remove('active');\n        }            \n    });\n};\n","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils'; \nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { imageUseCases, prepImagesForCarousel, prepImageForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderSpecimenTiles = collection => {\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    renderItemSpecimenTiles(item);\n};\n\nconst renderItemSpecimenTiles = item => {\n    \n    const { config, collection, layout } = store.getState();\n\n    const hasTiles = layout.itemIndex === layout.prevItemIndex && !!document.querySelector('.js-tiles');\n\n    if(hasTiles) return;\n\n    const familes = [ 'family-strips', 'family', 'taxon-card' ];\n\n    const collectionItems = collection.allItems || collection.items;\n\n    let images, items;\n    \n    if (R.contains(layout.screens[1].name, familes)) {        \n        const family = collectionItems.filter(i => i.family.name.toLowerCase() === item.taxonomy.family.toLowerCase());\n        images = R.take(6, utils.shuffleArray(getImagesFromItemFamily(family, config, imageUseCases.SPECIES_CARD)));\n        items = images.map(image => collectionItems.find(item => item.name === image.itemName));\n    } else {\n        images = R.take(6, utils.shuffleArray(R.clone(item.images)));\n        images = prepImagesForCarousel({ name: item.name, itemCommon: item.itemCommon, images }, config, imageUseCases.SPECIES_CARD);\n        items = [item];\n    }\n\n    images = images.map(image => {\n        return scaleImage(image, imageUseCases.VISUAL_MATCH, config);\n    });\n\n    renderSpecimenImageTiles({ items: items }, images, item);\n};\n\nconst renderSpecimenImageTiles = (collection, images, item) => {\n\n    const { layout, config } = store.getState();\n\n    const acceptableScreens = [ 'specimen-images', 'trait-images' ]; // lookalike options?\n\n    let screen = layout.screens.find(screen => R.contains(screen.name, acceptableScreens));\n\n    if(!screen) return;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = specimensTemplate;    \n\n    const parent = DOM.leftBody;\n          parent.innerHTML = '';\n\n    snapLog('renderSpecimenImageTiles, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images }, template.content, parent);\n\n    modalImagesHandler(document.querySelectorAll('.js-tiles .square'), item, collection, config);\n};\n\nconst getImagesFromItemFamily = (family, config, useCase) => {\n\n    let itemImages, items;\n\n    itemImages = R.flatten(family.map(i => {\n        return { images: i.images, item: { name: i.name, itemCommon: i.names[0].vernacularName, vernacularName: i.names[0].vernacularName, names: i.names } };\n    }));\n\n    if (itemImages.length < 6) {\n        \n        let pool = itemImages.map(image => {\n            const item = family.find(i => i.name === image.item.name);\n            return {\n                images: item.images,\n                item: {\n                    name: item.name,\n                    itemCommon: item.names[0].vernacularName,\n                    vernacularName: item.names[0].vernacularName,\n                    names: item.names\n                }\n            };\n        });\n        let pooledImages = R.flatten(pool);\n            pooledImages.forEach(pooledImage => {\n                pooledImage.images.forEach(image => {\n                    itemImages.push({ images: pooledImage.images, item: pooledImage.item });\n                });\n            });\n    }\n\n    items = itemImages.map(image => image.item);\n    \n    items.forEach(i => {\n        const itemName = i.name;\n        i.images = family.find(i => i.name === itemName).images;\n    });\n\n    const uniqueImages = [];\n\n    const getUniqueImage = (image, index, uniqueImages) => {\n        let uniqueImage = image.images.find(i => i.starred);\n        if(uniqueImage) {\n            uniqueImage = R.contains(uniqueImage.title, uniqueImages.map(i => i.title)) ? null : uniqueImage;\n        }\n        if(uniqueImage) {\n            uniqueImages.push(uniqueImage);\n            return uniqueImage;\n        }\n        else {\n            uniqueImage = image.images[index];\n            if(uniqueImage && !R.contains(uniqueImage.title, uniqueImages.map(i => i.title))) {\n                uniqueImages.push(uniqueImage);\n                return uniqueImage;\n            }\n        }\n    }; \n\n    const familyImages = [];\n\n    itemImages.forEach((image, index) => {\n        let imageToPrep = getUniqueImage(image, index, uniqueImages);\n        if(imageToPrep) {\n            familyImages.push(prepImageForCarousel(imageToPrep, index, image.item, config, useCase));\n        }\n    });\n\n    return familyImages;\n}\n","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { findRankByIconicTaxon } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\n\nexport const getPoolItems = async (collection, poolSize = 5) => {\n  \n  try {\n    \n    const item = collection.nextItem;\n\n    if(collection.behaviour === 'static') {\n      const otherItems = collection.items.filter(i => i.name !== item.name);\n      if(otherItems && otherItems.length > 0) {\n        return getItemsFromCollection(otherItems, item, poolSize);\n      }\n    }\n\n    const rank = findRankByIconicTaxon(item.taxonomy, item.iconicTaxon);\n\n    let taxonicMatches = await firestore.getSpeciesByIconicTaxon(item);\n\n    if(item.iconicTaxon.toLowerCase() === 'fungi') {\n        const isLichen = item.lichen;\n        taxonicMatches = isLichen ? taxonicMatches.filter(item => item.lichen) : taxonicMatches.filter(item => !item.lichen);\n    }\n\n    const speciesPool = utils.shuffleArray(taxonicMatches.filter(ci => ci.name.toLowerCase() !== item.name.toLowerCase()));\n\n    // temporary exceptions because there are so few (6 and 3) members of these taxa\n\n    const isException = item.iconicTaxon.toLowerCase() === 'reptilia' || item.iconicTaxon.toLowerCase() === 'amphibia';\n    \n    if(!speciesPool) {\n      getPoolItems(collection);\n    }\n\n    // if not enough, only get the additional necessary number (but duplicates???)\n\n    else if(speciesPool.length < poolSize && !isException) {\n      getPoolItems(collection);\n    } \n    else {\n\n      const items = R.take(poolSize, speciesPool);\n      \n      items.push(item);\n    \n      return await items;\n    }\n  } catch(e) {\n    logError('renderMixedSpecimenImagesAndQuestion init', e);\n  }\n};\n\n  const getItemsFromCollection = (otherItems, item, poolSize) => {\n    const items = R.take(poolSize, utils.shuffleArray(otherItems));\n    return utils.shuffleArray([ ...items, item]);\n  };","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { epithets } from 'api/botanical-latin';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nimport stripTemplate from 'ui/screens/multichoice/multi-strips-template.html';\nimport stripWithImageTemplate from 'ui/screens/multichoice/multi-strips-with-images.html';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\n\nexport const renderMultiStrips = (collection, bonus, args) => {\n\n    try {\n\n        const { config, lesson, layout, userAction } = store.getState();\n\n        if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n\n        const item = collection.nextItem || collection.items[collection.itemIndex];\n\n        const taxon = matchTaxon(item.taxonomy, iconicTaxa);                        \n    \n        const screen = bonus ? bonus.screen || layout.screens[1] : layout.screens[1];\n\n        let defaultQueryLimit = 6, defaultLanguage = 'en';\n\n        defaultLanguage = config.language;\n\n        const init = async () => {\n\n            const render = (answer, answers, overrides) => {\n\n                const vernacularName = (overrides && overrides.vernacularName !== undefined) ? overrides.vernacularName : item.vernacularName;\n                const binomial = (overrides && overrides.binomial !== undefined) ? overrides.binomial : item.name;\n                const question = (overrides && overrides.question) ? overrides.question : 'Match the name';\n                const helpDefault = config.isLandscapeMode ? '(Select the name below.)' : '(Tap on the name below.)';\n                const help = (overrides && overrides.help !== undefined) ? overrides.help : helpDefault;\n                const term = (overrides && overrides.term !== undefined) ? overrides.term : '';\n                const className = (overrides && overrides.className !== undefined) ? overrides.className : '';\n                const headerClassName = (overrides && overrides.headerClassName !== undefined) ? overrides.headerClassName : '';\n                const clue = (overrides && overrides.clue !== undefined) ? overrides.clue : null;\n                \n                const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question, help, term, className, headerClassName, bonus });\n\n                const template = document.createElement('template');\n                      template.innerHTML = answer.img ? stripWithImageTemplate : stripTemplate;\n\n                answers.forEach((answer, index) => {\n                    answer.index = index;\n                    answer.name = answer.name || '';\n                    answer.names = answer.names ? answer.names.join(', ') : '';\n                });\n\n                renderTemplate({ answers }, template.content, parent);\n\n                const strips = document.querySelectorAll('.js-rptr-strips .strip');\n\n                if(overrides.italicise) strips.forEach(strip => strip.classList.add('binomial'));\n\n                const taxon = { name: item.taxonomy.family, binomial: item.name, question: answer.term };\n\n                const test = { \n                    itemId: item.id, \n                    items: strips, \n                    taxon, binomial: \n                    item.name, \n                    questionCount: lesson.questionCount, \n                    layoutCount: lesson.layoutCount, \n                    points: layout.points, \n                    clue, \n                    answerIndex: answers.findIndex(a => a.term === answer.term),\n                    questionText: question\n                };\n                        \n                scoreHandler('strip', test, null, config);\n            }\n\n            if(screen.name === 'species-scientifics') {\n\n                const renderBinomialQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.name };\n                        answers = await getPoolItems(collection, 6);\n                        answers = R.take(8, answers).filter(s => s.name.toLowerCase() !== item.name.toLowerCase()).map(s => s.name);\n                        answers = R.take(5, answers);\n                        answers.push(item.name);\n                        answers = answers.map(a => { return { term: a } });\n                        answers = utils.shuffleArray(answers);\n                        \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    }\n\n                    await buildQuestion();\n\n                    render( answer, answers, { binomial: 'Latin name', question: 'What\\'s the latin name?', help, italicise: true });\n                };\n\n                renderBinomialQuestions();\n            }\n\n            if(screen.name === 'species-vernaculars') {\n\n                const renderVernacularQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.vernacularName };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => itemProperties.getVernacularName(a, config, false, 'vernacularName', defaultLanguage));\n                        answers = R.take(5, answers.filter(a => a !== item.vernacularName));\n                        answers = utils.shuffleArray([item.vernacularName, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: 'Common name', question: `What's the common name?`, help });\n                };\n\n                renderVernacularQuestions();\n            }\n\n            if(screen.name === 'species-identification') {\n\n                const renderIdQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.quickId };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => a.quickId);\n                        answers = R.take(5, answers.filter(a => a !== item.quickId));\n                        answers = utils.shuffleArray([item.quickId, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: item.vernacularName, question: 'Which description fits?', help });\n                };\n\n                renderIdQuestions();\n            }\n\n            if(screen.name === 'family-strips') {\n\n                const random = utils.getRandomInt(2);\n\n                const type = random === 0 ? 'identification' : 'summary';\n\n                const number = config.isPortraitMode ? 4 : 4;\n\n                const families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                const answer = { term: item.family[type], name: item.family.name } || { type: { term: `Missing ${type}`}, name: item.family.name };\n                const alternativeFamilies = R.take(number-1, R.take(number, utils.shuffleArray(families))).filter(f => f.name.toLowerCase() !== item.taxonomy.family.toLowerCase());\n                let alternatives = alternativeFamilies.filter(f => f[type] && f[type] !== undefined && f[type] !== '').map(f => { return { type: f[type], name: f.name, names: f.names } });\n                    alternatives = alternatives.map(a => { return { term: a.type, name: a.name, names: a.names } });\n                let answers = utils.shuffleArray([answer, ...alternatives]);                    \n                \n                const help = config.isLandscapeMode ? '(Select the description below.)' : '(Tap on the description.)';\n\n                render(answer, answers, { question: 'Match species family', help, clue: item.taxonomy.family });\n            }\n\n            if(screen.name === 'epithet') {\n                \n                const epithet = layout.epithet.latin.join(', ');\n                const number = config.isPortraitMode ? 6 : 6;\n                \n                let alternatives = R.take(number-1, utils.shuffleArray(epithets)).filter(e => !R.contains(e.latin, epithet));\n                    alternatives = alternatives.map(e => e.en.join(', '));\n                    alternatives = alternatives.map(a => { return { term: a } });\n                let answer = epithets.find(e => e.latin.join(', ').toUpperCase() === epithet.toUpperCase());\n                    answer = answer ? answer[config.language][0] : epithet;\n                    answer = { term: answer };\n                \n                const answers = utils.shuffleArray([answer, ...alternatives]);\n                \n                if(config.isLandscapeMode) {            \n                    render(answer, answers, { question: layout.epithet.latin.join(', '), help: '(Match the latin term)' });\n                } else {\n                    render(answer, answers, { question: 'Match latin word', help: '', vernacularName: '', binomial: '', term: layout.epithet.latin.join(', ') });\n                }\n            }\n\n            if(screen.name === 'definition') {\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n            }\n\n            if(screen.name === 'family') {\n\n                const indices = config.isPortraitMode ? [5,6] : [5,6];\n\n                let families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                let family = item.taxonomy.family;\n                let otherFamilies = R.take(indices[0], R.take(indices[1], utils.shuffleArray(families)).filter(family => family.name.toLowerCase() !== item.taxonomy.family.toLowerCase()));\n                let otherFamiliesLatinNames = otherFamilies.map(family => family.name);\n                let otherFamiliesCommonNames = otherFamilies.map(of => of.names[0]);\n                \n                let answer, answers;\n\n                const random = utils.getRandomInt(2);\n\n                switch(random) {            \n                    case 0:\n                        answer = { term: item.family.vernacularName };\n                        otherFamiliesCommonNames = otherFamiliesCommonNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesCommonNames]);\n                        if(answer === undefined) console.log('Missing question - case 0 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name' });\n                    break;\n                    case 1:\n                        answer = { term: family };\n                        otherFamiliesLatinNames = otherFamiliesLatinNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesLatinNames]);\n                        if(answer === undefined) console.log('Missing question - case 1 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name', italicise: true });\n                    break;\n                } \n            }\n\n            if(screen.name === 'trait-property') {\n\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n\n                if(bonus.overrides.trait && bonus.overrides.trait.name === 'song') {\n\n                        const renderBirdsong = async () => {\n\n                            const parent = document.querySelector('.js-question-help');\n                                  parent.innerHTML = '';\n\n                            const template = document.createElement('template');\n                                  template.innerHTML = audioMediaTemplate;\n\n                            const xcID = bonus.overrides.trait.value[0];\n\n                            const mp3 = await firestore.getBirdsong(xcID);\n                            \n                            renderTemplate({ mp3, title: item.name }, template.content, parent);\n\n                            const header = document.querySelector('.js-test-card-question');\n                                  header.classList.remove('standard-block');\n                                  header.classList.add('double-standard-block');\n\n                            const content = document.querySelector('.js-test-card-content');\n                                  content.classList.add('test-card-content-less-standard-block');\n                        };\n\n                        renderBirdsong();\n                }\n            }\n\n            if(layout.name === 'mixed-trait-images') {\n\n                // portrait only - redirect from renderMixedTraitImages\n\n                const { traits, requiredTraits, item, question, help } = args;\n\n                const answers = R.flatten(traits);\n                const answer = requiredTraits[0];\n\n                render(answer, answers, { binomial: item.name, question, help, italicise: true});\n\n            }\n        }\n\n        init();\n\n    } catch(e) {\n        console.error('Crashed out somwhere on multi-strips with this error: ', e);        \n    }\n};","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\n\nimport mixedSpecimenTemplate from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html';\n\nexport const renderMixedSpecimenImagesAndQuestion = collection => {\n\n    const { config, lesson, layout, score } = store.getState();\n\n    const item = R.clone(collection.nextItem);\n\n    if(!item) return;\n\n    const init = async () => {\n\n        const getPortraitImages = images => {\n            const multiImages = utils.flatten(images.map(image => { \n                const images = image.srcs.filter(i => i.starred).length === 0 ? R.take(1, utils.shuffleArray(image.srcs)) : image.srcs.filter(i => i.starred);\n                const item = { name: image.itemName, images };\n                return prepImagesForCarousel(item, config, imageUseCases.MIXED_SPECIMENS);\n            }));\n            return multiImages;\n        }\n\n        const items = await getPoolItems(collection);\n\n        let images = items.map((item, index) => { \n            return { index: index + 1, srcs: item.images, itemName: item.name };\n        });\n\n        images = getPortraitImages(images);\n\n        let question = config.islandscapeMode ? 'Find then click to ID' : 'Swipe and tap to ID';\n\n        let parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help: '(Click on the matching photo.)', term: '' });\n            parent.innerHTML = '';\n            \n        const template = document.createElement('template');\n              template.innerHTML = mixedSpecimenTemplate;\n        \n        renderTemplate({}, template.content, parent);\n\n        parent = document.querySelector('.js-test-card-container-images');\n\n        imageSlider({ config, images: utils.shuffleArray(images), parent, identifier: 'mixed-specimens' });\n\n        const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n        const boundScore = {};\n\n        const answers = [];\n\n        images.forEach(image => {\n            answers.push({ value: image.itemName, url: scaleImage({ url:image.url }).small });\n        });\n\n        document.querySelectorAll('#imageSlider_mixed-specimens .carousel-item img').forEach(img => {\n            \n            img.addEventListener('click', event => {\n\n                const layer = event.target;\n                const selectedName = layer.dataset.itemName;\n                const question = item.name;\n                const answer = selectedName || 'incorrect';\n                const isCorrect = answer === question;\n                const answerIcon = document.createElement('span');\n                      answerIcon.innerHTML = isCorrect \n                            ? '<span class=\"icon\"><i class=\"fas fa-check-circle\"></i></span>'\n                            : '<span class=\"icon\"><i class=\"fas fa-times-circle\"></i></span>';\n\n                const test = { ...score, itemId: item.id, \n                    question, answer, binomial: item.name, \n                    questionCount: lesson.questionCount, layoutCount: lesson.layoutCount, \n                    points: layout.points,\n                    answers,\n                    questionText: config.isPortraitMode ? 'Swipe and tap to ID' : 'Identify this species',\n                    vernacularName: itemProperties.getVernacularName(item, config),\n                };\n\n                const callback = (score, scoreUpdateTimer) => {\n                    boundScore.score = score;\n                    boundScore.scoreUpdateTimer = scoreUpdateTimer;\n                    continueLessonBtn.disabled = false;          \n                    if(!score.success) {\n                        const wrongItem = items.find(item => item.name === score.answer);\n                        const vernacularName = itemProperties.getVernacularName(wrongItem, config);\n                        const name = vernacularName || score.answer;\n                    }\n                };\n\n                scoreHandler('image-match', test, callback, config);  \n            });\n        });\n\n        continueLessonBtn.addEventListener('click', event => {\n\n            if(!score.success) {            \n                setTimeout(() => {\n                    window.clearTimeout(boundScore.scoreUpdateTimer);\n                    bindScore(boundScore.score);\n                });\n            } else {\n                window.clearTimeout(boundScore.scoreUpdateTimer);\n                bindScore(boundScore.score);\n            }\n\n        });\n    };\n\n    try {\n      init();\n    } catch(e) {\n      logError('renderMixedSpecimenImagesAndQuestion init', e);\n    }\n};\n","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { returnIcon } from 'ui/helpers/icon-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { bindScore } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { listenToImageSelection, listenToUserAnswer, renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\nimport { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport mixedSpecimenQuestionTemplate from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question-template.html';\n\nexport const renderMixedSpecimenQuestion = (collection, bonusLayout) => {\n\n    const { config, layout } = store.getState();\n\n    renderMixedSpecimenImagesAndQuestion(collection);\n    \n    return;\n\n    const item = R.clone(collection.nextItem);\n\n    let question = config.isPortraitMode ? 'Slide to ID this species' : 'Identify this species';\n    let help = '(Click on the matching photo.)';\n\n    if(bonusLayout) {\n        question = bonusLayout.overrides.question || question;\n        help = bonusLayout.overrides.help || help;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });\n    \n    const template = document.createElement('template');\n          template.innerHTML = mixedSpecimenQuestionTemplate;\n\n    const instructions = `Identify & Select`;\n    const binomial = item.name;\n\n    renderTemplate({ instructions, binomial }, template.content, parent);\n\n    const subheader = document.querySelector('.mixed-specimen-container > div > span:nth-child(1)');\n          subheader.innerHTML = `Click the picture of <span>${item.vernacularName} </span> from among those on the left.`;\n\n    const listenToImageChangeHandler = async images => {        \n\n        const uniqueSpecies = [ ...new Set(utils.shuffleArray(images).map(i => i.itemName)) ];\n\n        const speciesList = document.querySelector('.js-images-names-txt');\n\n        if(!speciesList) return;\n\n        speciesList.innerHTML = \"\";\n\n        const speciesItems = await Promise.all(uniqueSpecies.map(async species => {\n\n            const imageItem = await firestore.getSpeciesByName(species);\n            const vernacularName = itemProperties.getVernacularName(imageItem, config);\n            const taxonIcon = returnIcon(imageItem);\n\n            return `<li id=\"${species}\">${taxonIcon}<span>${vernacularName}</span><span class=\"binomial margin-left\">${imageItem.name}</li>`;\n        }));\n\n        speciesList.innerHTML = speciesItems.join('');\n    };\n\n    listenToImageSelection(listenToImageChangeHandler);\n\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n\n    const pendingScore = {};\n\n    listenToUserAnswer((score, scoreUpdateTimer) => {\n        \n        continueLessonBtn.disabled = false;\n        pendingScore.score = score;\n        pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    });\n\n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n\n    document.querySelector('.js-help-txt').addEventListener('click', () => {\n        const noOfImagesPerItem = layout.bonus ? 6 / collection.items.length : 1;\n        const preselectedItems = layout.bonus ? collection.items : null;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, preselectedItems, true);\n    });    \n};\n","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\n\nexport const renderBonusTest = bonusLayout => {\n\n    const collection = R.clone(store.getState().collection);\n\n    collection.nextItem = bonusLayout.item;\n\n    if(bonusLayout.overrides && bonusLayout.overrides.trait && bonusLayout.overrides.trait.name === 'lookalikes') {\n        collection.items = [ ...bonusLayout.overrides.trait.lookalikes, collection.nextItem ];\n        renderMixedSpecimenQuestion(collection, bonusLayout);\n    } else {        \n        renderMultiStrips(collection, bonusLayout);\n    }\n\n};\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\n\nimport questionTemplate from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html';\n\nexport const renderMixedTraitQuestion = collection => {\n\n    const init = async () => {\n\n        const { layout, collection, config } = store.getState();\n\n        const template = document.createElement('template');\n              template.innerHTML = questionTemplate;\n        \n        const item = collection.nextItem;\n        const question = 'Match the trait';\n        const help = `Select the correct ${utils.fromCamelCase(layout.trait)}`;\n    \n        const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });              \n\n        renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n\n        // if(config.isPortraitMode) {\n        //     renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n        //     return;\n        // }\n\n        // parent.innerHTML = '';\n        // renderTemplate({ traits: Array.from(new Set(layout.traits.flat())), help }, template.content, parent);\n        // document.querySelectorAll('.js-traits-names-txt img').forEach(img => {\n        //     if(img.src.indexOf('png') > -1) {\n        //         img.classList.add('png');\n        //     }\n        // });\n    };\n\n    init();\n};","import { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport stripTemplate from 'ui/screens/multichoice/horizontal-strips.html';\n\nexport const renderHorizontalStrips = collection => {\n\n    const { config, lesson, layout } = store.getState();\n\n    const item = collection.nextItem || collection.items[collection.itemIndex];\n\n    const binomial = layout.provider.name || layout.provider.taxon;\n    const statement = layout.provider.statement;\n    const providerQuestion = layout.provider.question;\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial, question: '', help: '', term: '', className: '', headerClassName: '', bonus: undefined, statement, providerQuestion });\n\n    const template = document.createElement('template');\n          template.innerHTML = stripTemplate;\n\n    let answers = utils.shuffleArray([ ...layout.provider.answers, layout.provider.answer ]);\n\n    answers = answers.map((answer, index) => {\n        return {\n            term: answer,\n            index\n        }\n    });\n\n    renderTemplate({ answers }, template.content, parent);\n\n    document.querySelector('.js-test-card-question').classList.add('calendar-block');\n    document.querySelector('.js-test-card-question').classList.remove('standard-block');\n\n    const strips = document.querySelectorAll('.js-rptr-strips .strip');\n    const taxon = { name: item.taxonomy.family, binomial: item.name, question: layout.provider.answer.term };\n\n    const test = { itemId: item.id, items: strips, taxon, binomial: item.name, \n        questionCount: lesson.questionCount, vernacularName: item.vernacularName,\n        layoutCount: lesson.layoutCount, points: layout.points, clue: '', \n        answerIndex: answers.findIndex(a => a.term === layout.provider.answer), answers, \n        questionText: providerQuestion, statement };\n\n    scoreHandler('strip', test, null, config);\n};","import { renderTextEntry } from 'ui/screens/text-entry/species-text-entry';\nimport { renderSpecimenTiles } from 'ui/screens/landscape/specimen-tiles';\nimport { renderHistory } from 'ui/screens/progress/history';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderSummary } from 'ui/screens/progress/summary';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderCompleteText } from 'ui/screens/text-entry/text-complete';\nimport { renderCultivarCard } from 'ui/screens/cards/cultivar-card';\nimport { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\nimport { renderNonTaxonCardSpecimenTiles } from 'ui/screens/cards/non-taxon-card-specimen-tiles';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\nimport { renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\nimport { renderMediaPlayers } from 'ui/screens/media/landscape/media-players';\nimport { renderBonusTest } from 'ui/screens/bonus/bonus-test';\nimport { renderBonusSpecimenTiles } from 'ui/screens/bonus/bonus-specimen-tiles';\nimport { renderMixedTraitImages } from 'ui/screens/multichoice/landscape/mixed-trait/left/mixed-trait-images';\nimport { renderMixedTraitQuestion } from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question';\nimport { renderHorizontalStrips } from 'ui/screens/multichoice/horizontal-strips.js';\n\nconst functions = [\n    { name: 'mixed-specimen-questions', func: renderMixedSpecimenImagesAndQuestion },\n    { name: 'non-taxon-specimen-tiles', func: renderNonTaxonCardSpecimenTiles },\n    { name: 'text-entry', func: renderTextEntry },\n    // { name: 'specimen-images', func: renderSpecimenTiles },\n    { name: 'species-card', func: renderCard },\n    { name: 'species-scientifics', func: renderMultiStrips },\n    { name: 'species-vernaculars', func: renderMultiStrips },\n    { name: 'species-identification', func: renderMultiStrips },\n    { name: 'summary', func: renderSummary },\n    { name: 'history', func: renderHistory },\n    { name: 'epithet', func: renderMultiStrips },\n    { name: 'definition', func: renderBonusTest },\n    { name: 'family', func: renderMultiStrips },\n    { name: 'family-strips', func: renderMultiStrips },\n    { name: 'taxon-card', func: renderTaxonCard },\n    { name: 'non-taxon-card', func: renderNonTaxonCard },\n    { name: 'text-complete', func: renderCompleteText },\n    { name: 'cultivar-card', func: renderCultivarCard },\n    { name: 'visual-match', func: renderMultiStrips },\n    { name: 'trait-images', func: renderBonusSpecimenTiles },\n    { name: 'trait-property', func: renderBonusTest },\n    { name: 'lookalike-property', func: renderBonusTest },\n    { name: 'symbiotic-property', func: renderMultiStrips },\n        \n    { name: 'mixed-specimen-question', func: renderMixedSpecimenQuestion },\n    { name: 'mixed-specimen-images', func: renderMixedSpecimenQuestion },\n    // { name: 'mixed-specimen-images', func: renderMixedSpecimenImages },\n    \n    { name: 'birdsong', func: renderBonusTest },\n    { name: 'media-players', func: renderMediaPlayers },    \n\n    // { name: 'mixed-trait-images', func: renderMixedTraitImages },\n    { name: 'mixed-trait-question', func: renderMixedTraitQuestion },\n    \n    { name: 'provider-horizontal-strip-questions', func: renderHorizontalStrips },\n];\n\nexport const funcByName = name => {\n    const match = functions.find(func => func.name === name);\n    const func = match ? match.func : null;\n    return func;\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { subscribeToNonTaxaSelection } from 'ui/screens/cards/non-taxon-card';\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderNonTaxonCardSpecimenTiles = collection => {\n\n    const { config } = store.getState(); \n\n    const callback = images => {\n\n        const template = document.createElement('template');\n\n        template.innerHTML = specimensTemplate;\n\n        const parent = DOM.leftBody;\n        parent.innerHTML = '';\n\n        renderTemplate({images}, template.content, parent);\n\n        modalImagesHandler(document.querySelectorAll('.js-tiles .square'), null, collection, config);\n    };\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    subscribeToNonTaxaSelection(callback);    \n};","import { store } from 'redux/store';\nimport { renderInput } from 'ui/screens/text-entry/text-entry';\n\nexport const renderTextEntry = (collection) => {\n\n    const { layout } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-entry')[0];\n    const item = collection.nextItem;\n    \n    if(!screen) return;\n\n    item.vernacular = item.vernacularName;\n\n    const q = screen.taxon === 'name' ? item.name : \n                    screen.taxon === 'vernacular' \n                        ? item.vernacularName\n                        : item.taxonomy[screen.taxon];\n\n    const question = { binomial: item.name, species: item.taxonomy.species, genus: item.taxonomy.genus, taxon: screen.taxon, question: q, common: item.vernacularName };\n\n    renderInput(screen, question);\n};","import { subscription } from 'redux/subscriptions';\nimport { store } from 'redux/store';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nexport const renderSummary = history => {\n\n    subscription.remove(subscription.getByName('renderSummary'));\n\n    const { collection } = store.getState();\n\n    renderScoreSummary(collection.id);\n\n    return;\n};\n\n","import { store } from 'redux/store';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nexport const renderHistory = history => {\n            \n    const { collection} = store.getState();\n\n    renderLessons();\n}    ","import * as R from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, continueLessonHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport completeTemplate from 'ui/screens/text-entry/text-complete-template.html';\n\nexport const renderCompleteText = (collection) => {\n\n    const item = collection.nextItem;\n\n    const { layout, config, lessonPlan } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-complete')[0];\n    \n    if(!screen) return;\n\n    let question, genus, species, givenTaxon, vernacularName, binomial, questionTxt;\n\n    vernacularName = item.vernacularName;\n    binomial = item.name;\n    questionTxt = 'Complete the latin name';\n\n    switch(screen.type) {\n        case 'text-complete-genus':\n            question = item.taxonomy.genus;\n            genus = '---';\n            species = item.taxonomy.species;\n            binomial = `--- ${item.taxonomy.species}`;\n            givenTaxon = 'genus';\n            questionTxt = 'Select genus name';\n            break;\n        case 'text-complete-species':\n            question = item.taxonomy.species;\n            genus = item.taxonomy.genus;\n            species = '---';\n            binomial = `${item.taxonomy.genus} ---`;\n            givenTaxon = 'species';\n            questionTxt = 'Select species name';\n            break;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help: '(Select the name below.)', term: '' });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = completeTemplate;\n\n    const numerOfItems = config.isPortraitMode ? 4 : 5;\n\n    // broaden pool to species matching iconic taxon\n    const itemTaxons = collection.items.map(item => {\n        switch(givenTaxon) {\n            case 'genus':\n                return item.taxonomy.genus;\n            case 'species':\n                return item.taxonomy.species;\n            default:\n                return item.name;\n        }\n    });\n    const pool = R.take(numerOfItems, utils.shuffleArray(itemTaxons).filter(utils.onlyUnique).filter(itemTaxon => itemTaxon !== item.taxonomy[givenTaxon])).filter(item => item !== undefined);\n    pool.push(item.taxonomy[givenTaxon]);\n\n    let answers = utils.shuffleArray(pool);\n\n    answers = answers.map((answer, index) => {\n      return {\n        index,\n        value: answer\n      }\n    });\n\n    renderTemplate({ genus, species, answers }, template.content, parent);\n\n    setTimeout(() => {\n      const block = document.querySelectorAll('.pool .block')[0];\n            block.focus(); \n    },1000);\n\n    const score = { itemId: item.id, binomial: item.name, question: item.taxonomy[givenTaxon], callbackTime: config.callbackTime, layoutCount: lessonPlan.layouts.length, points: layout.points };\n\n    const callback = (score, scoreUpdateTimer, config) => {\n\n        const iconColour  = score.success ? 'answer-box-success' : 'answer-box-alert';\n\n        const answerIcon = score.success\n            ? `<span class=\"icon\"><i class=\"fas fa-check\"></i></span>`\n            : `<span class=\"icon\"><i class=\"fas fa-times\"></i></span>`;\n\n        const response = score.success ? `Correct` : `Incorrect`;\n        \n        document.querySelector('.js-txt-question').innerHTML = `<div class=\"${iconColour}\"><span>${answerIcon}</span><span>${ response }</span</div>`;        \n\n        document.querySelectorAll('.block span').forEach(block => {\n            if(block.innerText === score.answer) {\n                score.success\n                    ? block.parentElement.classList.add('snap-success')\n                    : block.parentElement.classList.add('snap-alert');\n            }\n            if(block.innerText === score.question) {\n                block.parentElement.classList.add('snap-success');\n            }\n        });\n\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    };\n\n    document.querySelectorAll('.js-pool button').forEach(answer => {\n        answer.addEventListener('click', e => {\n          e.preventDefault();\n          const button = e.target;\n          const answer = button.innerText;\n          if(question === item.taxonomy.species) {\n              document.querySelector('.species').innerText = answer;                \n          } else {\n              document.querySelector('.genus').innerText = answer;\n          }\n          score.answer = answer;\n          score.answers = answers;\n          score.questionText = questionTxt;\n          scoreHandler('block', score, callback, config);\n        });\n    });    \n};\n","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport cultivarTemplate from 'ui/screens/cards/cultivar-card-template.html';\n\nexport const renderCultivarCard = collection => {\n\n    const item = collection.nextItem;\n    const { lessonPlan, layout, config } = store.getState();\n\n    const cultivarCollection = lessonPlan.layouts.find(layout => layout.name === 'screen-cultivar-card').cultivars;\n\n    const cultivars = cultivarCollection.subspecies.map(sub => {\n        let locale = sub.names.find(n => n.language === config.language);\n        locale = locale || sub.names.find(n => n.language === 'en');\n        return {\n            vernacular: locale.vernacularName || '',\n            variety: sub.variety || '',\n            form: sub.form || '',\n            eol: locale.eol || '',\n            eolAlt: locale.eol || 'N/A',\n            wiki: locale.wiki || '',\n            wikiAlt: locale.wiki || 'N/A'\n        }\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cultivarTemplate;\n\n    const parent = DOM.rightBody;\n    parent.innerHTML = '';\n\n    const context = {\n        rank: 'cultivar',\n        item: item,\n        cultivars: cultivars\n    }\n\n    renderTemplate(context, template.content, parent);\n\n    document.querySelectorAll('[title=\"N/A\"]').forEach(a => a.style.display = 'none');\n};","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderSpecimenTiles } from 'ui/screens/landscape/specimen-tiles';\nimport { renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\n\nexport const renderBonusSpecimenTiles = bonusLayout => {\n\n    const collection = R.clone(store.getState().collection);\n          collection.nextItem = bonusLayout.item;\n          collection.nextItem = collection.nextItem || collection.items[collection.itemIndex];\n    \n    const lookalikesCount = bonusLayout.item \n            ? bonusLayout.overrides.trait.lookalikes ? bonusLayout.overrides.trait.lookalikes.length + 1 : 0 // lookalikes + item itself\n            : 0;\n\n    if(lookalikesCount > 0) {\n        let noOfImagesPerItem = 6 / lookalikesCount;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, [ collection.nextItem, ...bonusLayout.overrides.trait.lookalikes]);\n    } else {\n        renderSpecimenTiles(collection);\n    }\n\n};","export const renderMediaPlayers = collection => {\n\n    let isAudio = true;\n\n    const mediaPlayers = isAudio \n                ? document.querySelectorAll('.media-audio-players')\n                : document.querySelectorAll('.media-video-players');\n};","import * as R from 'ramda';\n\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { store } from 'redux/store';\nimport { observeStore } from 'redux/observe-store';\nimport { funcByName } from 'ui/helpers/function-lookups';\n\nlet subscriptions = [];\n\nconst add = (subscription, domain, role, layout) => {\n\n    const select = store => store[domain];\n    const onChange = subscription;    \n\n    const sub = observeStore(store, select, onChange, domain, layout);\n\n    const existingSub = getByName(sub.name);\n\n    if(existingSub) return;\n\n    subscriptions.push({ ...sub, role});\n    return sub;\n};\n\nconst remove = subscription => {\n\n    if(subscription) {\n\n        subscription.unsubscribe();\n        subscriptions = subscriptions.filter(sub => sub.name !== subscription.name);\n    }\n    return subscriptions;\n};\n\nconst removeByName = name => {\n    const subscription = getByName(name);\n    if(subscription) {\n        return remove(subscription);\n    }\n};\n\nconst getByName = name => {\n    return subscriptions.find(sub => sub.name === name);\n};\n\nconst getByRole = role => {\n    return subscriptions.filter(sub => sub.role === role);\n};\n\nconst getAll = () => {\n    return subscriptions;\n};\n\nconst removeSubs = () => {\n\n    let screens = getByRole('screen');\n\n    screens.forEach(sub => subscription.remove(sub));\n};\n\nconst checkRequired = (state, layout) => {\n\n    const { userAction, config } = state;\n\n    let isRequired = true, isReviewingLesson = true;\n\n    isReviewingLesson = lessonStateHelper.getIsReviewingLesson(userAction, config, isReviewingLesson); \n        \n    const reviewLayouts = [\n        'screen-species-card',\n        'screen-taxon-card',\n        'screen-non-taxon-card',\n        'species-vernaculars',\n        'mixed-specimen-images',\n        'mixed-specimen-question',\n        'screen-common-to-latin',\n        'screen-genus-completion',\n        'screen-latin-to-common',\n        'media-match'\n    ];\n\n    isRequired = isReviewingLesson ? true : !R.contains(layout.name, reviewLayouts);\n\n    return isRequired;\n};\n\nconst addSubs = (layout, config) => {\n\n    if(!layout) return;\n    \n    layout.screens.forEach( (screen, index) => {\n\n        const func = funcByName(screen.name);\n\n        const isSubscriptionRequired = checkRequired(store.getState(), layout);\n\n        if(func && isSubscriptionRequired) {\n            if(config.isPortraitMode) {\n                if(index === 1 || screen.name === 'summary') subscription.add(func, screen.domain, 'screen', layout ? layout.name : '');\n            } else {\n                subscription.add(func, screen.domain, 'screen', layout ? layout.name : '');\n            }                           \n        } else {\n            subscription.remove(subscription.getByName('nextItem'));\n            subscription.remove(subscription.getByName('traitValuesHandler'));\n        }\n    });\n};\n\n\n\nexport const subscription = {\n    add,\n    remove,\n    removeByName,\n    getByName,\n    getByRole,\n    getAll,\n    removeSubs,\n    addSubs\n};\n\n","export const observeStore = (store, select, onChange, domain, layout) => {\n    let currentState = null;\n    let hasStateSignificantlyChanged = false;\n\n    function handleChange() {      \n      let nextState = select(store.getState());\n\n      // let hasStateSignificantlyChanged = false;\n          hasStateSignificantlyChanged = nextState !== currentState;\n\n          if(currentState && Object.is(currentState.index,0)) {            \n            let areEqual = true;\n                areEqual = areEqual && Object.is(nextState.index, currentState.index);\n                areEqual = areEqual && Object.is(nextState.isLessonPaused, currentState.isLessonPaused);\n            hasStateSignificantlyChanged = !areEqual;\n          }\n\n      if(currentState && nextState) {\n        switch(layout) {\n          case 'screen-species-card':\n          case 'screen-taxon-card':\n          case 'screen-non-taxon-card':\n          case 'species-vernaculars':\n          case 'mixed-specimen-images':\n          case 'mixed-specimen-question':\n          case 'screen-common-to-latin':\n          case 'screen-genus-completion':\n          case 'screen-latin-to-common':\n          case 'media-match':\n            hasStateSignificantlyChanged = (nextState.nextItem && nextState.nextItem.name) !== (currentState.nextItem && currentState.nextItem.name);\n            break;\n        }\n      }\n\n      if(hasStateSignificantlyChanged) {\n        currentState = nextState;\n        onChange(currentState);\n      }\n    }\n  \n    handleChange.domain = domain;\n    handleChange.calledBy = onChange.name;\n    let unsubscribe = store.subscribe(handleChange);\n    if(hasStateSignificantlyChanged) {\n      handleChange();\n    }\n    return { unsubscribe, name: onChange.name };\n  };","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { markTest} from 'ui/helpers/test-handler';\nimport { subscription } from 'redux/subscriptions';\n\nexport const scoreHandler = (type, test, callback, config) => {\n    \n    switch(type) {\n        case 'radio':\n        case 'text':\n            return genericScoreHandler(test, callback, config);\n        case 'block':\n            blockScoreHander(test, callback, config);\n            break;\n        case 'strip':   \n            stripScoreHandler(test, callback, config);\n            break;\n        case 'image':\n            imageScoreHandler(test, callback, config);\n            break;\n        case 'image-match':\n            simpleScoreHandler(test, callback, config);\n            break;\n    }\n};\n\nexport const renderScoreHTMLResponse = response => {\n    const html = response.success\n            ? `<div class=\"answer-box-success\">\n                <span class=\"icon\"><i class=\"fas fa-check\"></i></span><span class=\"answer-response\">${ response.correct }</span>\n                </div>`\n            : `<div class=\"answer-box-alert\">\n                <span class=\"icon\"><i class=\"fas fa-times\"></i></span><span class=\"answer-response\">${response.answer || response.incorrect}</span>\n            </div>`;\n    return html;\n};\n\nconst showResponseToAnswerHandler = response => {\n    const questionText = document.querySelector(response.container) || document.querySelector('.js-txt-question');\n    if(questionText) {\n          questionText.innerHTML = renderScoreHTMLResponse(response);\n    }\n}\n\nexport const continueLessonHandler = (btn, score, timer) => {\n        \n    btn.disabled = false;\n    btn.style.cursor = 'pointer';\n\n    btn.addEventListener('click', event => {\n        btn.disabled = true;\n        window.clearTimeout(timer);\n        subscription.removeSubs();\n        bindScore(score);\n    });\n};\n\nconst simpleScoreHandler = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);      \n    }, delay);\n\n    if(callback) {\n        callback(score, scoreUpdateTimer);\n    } else {\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n}\n\nconst genericScoreHandler = (_score, callback, config) => {\n    \n    const { itemId, question, answer, target, layoutCount, points, names, questionText, answers } = _score;\n    const test = { itemId, ...question, answer, points, names, questionText, answers };\n\n    const score = markTest(test);\n\n    let responseTxt = (test.names && test.names.length > 0) ? test.names[0] : test.binomial;\t\n    let labelTxt = 'Species';\t\n\n    if(score.taxon === 'genus') {\n        responseTxt = score.genus;\n        labelTxt = 'Genus name';\n    }\n\n    if(score.taxon === 'species') {\n        responseTxt = score.species;\n        labelTxt = 'Species name';\n    }\n    if(score.taxon === 'name') {\n        responseTxt = score.binomial;\n        labelTxt = 'Latin name';\n    }\n\n    if(score.taxon === 'family') {\n        responseTxt = score.question;\n        labelTxt = 'Family name';\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    const container = window.matchMedia(\"(max-height: 568px)\").matches ? '.js-check-answer' : '.js-txt-question';\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect,  container, answer: score.question });\n\n    score.layoutCount = layoutCount;\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs(); \n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);               \n    }, delay);\n\n    if(callback) callback(score, scoreUpdateTimer);\n\n    return { score, scoreUpdateTimer };\n};\n\nconst blockScoreHander = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);        \n    }, delay);\n\n    callback(score, scoreUpdateTimer, config);\n};\n\nconst stripScoreHandler = (test, callback, config) => {    \n\n    const { items, taxon } = test;\n\n    const handleClickEvent = e => {\n      \n        e.preventDefault();\n\n        const target = e.target;\n\n        if(elem.hasClass(target, 'disabled')) return;\n\n        const answerNode = target;\n        const answer = answerNode.innerText.trim();\n        const answerIndex = answerNode.dataset.answerIndex;\n        const name = answerNode.dataset.name;\n        const vernacular = target.dataset.vernacular;\n\n        test.taxon = 'name';\n        test.vernacular = vernacular;\n        test.question = taxon.question;\n        test.answer = (name && name !== '') ? { term: answer, name } : answer;\n            \n        const score = markTest({...test, answeredIndex: parseInt(answerIndex), answers: [] });\n\n        target.classList.add(score.colour);\n\n        items.forEach(strip => {   \n            const stripAnswer = strip.querySelector('button');\n            const stripAnswerIndex = parseInt(stripAnswer.dataset.answerIndex);\n            const stripAnswerName = stripAnswer.dataset.name || '';\n            \n            stripAnswer === '' \n                ? score.answers.push(stripAnswer.innerText) \n                : score.answers.push({\n                    term: stripAnswer.innerText,\n                    name: stripAnswerName\n                });\n            \n            if(stripAnswerIndex === score.answerIndex) {\n                strip.classList.add('snap-success');\n            } else if(stripAnswerIndex === score.answeredIndex) {\n              strip.classList.add('snap-alert');\n            }\n        });     \n        \n        if(callback) {\n            callback(score);\n        } else {\n            const _callback = (score) => {\n\n                const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n                const scoreUpdateTimer = setTimeout(()=>{\n                    subscription.removeSubs();\n                    bindScore(score);\n                }, delay);\n            \n                continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n\n                // screen is always null\n                if(screen.name === 'family-strips') {\n                    document.querySelector('.js-question-question').innerHTML = item.taxonomy.family;\n                    document.querySelector('.js-question-help').classList.add('hide');\n                }\n            };\n            _callback(score);\n        }\n            \n        let correct = `Correct`;\n        let incorrect = `Incorrect`;\n\n        showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n\n        items.forEach(item => item.classList.add('disabled'));\n    };\n\n    items.forEach(selected => {        \n        selected.addEventListener('click', handleClickEvent);\n    });\n\n    window.addEventListener('keydown', e => {\n      if(e.key === 'Enter') {\n        handleClickEvent(e);\n      }                  \n    }, { once: true });\n};\n\nconst imageScoreHandler = (test, callback, config) => {\n\n    const { items, taxon } = test;\n\n    items.forEach(tile => {\n        tile.addEventListener('click', event => {\n\n            const img = event.target;\n            const answer = img.dataset.answer;\n\n            if(!answer) return;\n\n            test.taxon = 'name';\n            test.question = taxon.name\n            test.answer = answer;\n            const score = markTest(test);\n\n            tile.style.filter = 'saturate(100%)';\n\n            img.parentNode.style.filter = 'saturate(100%)';\n\n            items.forEach(tile => {\n                tile.style.filter = 'saturate(10%)';\n                tile.style.opacity = .3;\n                if(tile.dataset.answer.trim().toLowerCase() === taxon.name.trim().toLowerCase()) {\n                    tile.style.filter = 'saturate(100%)';\n                    tile.style.opacity = 1;\n                }\n            });\n\n            const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n            subscription.removeSubs();\n\n            const scoreUpdateTimer = setTimeout(() => {\n                bindScore(score);\n            }, delay);\n                \n            if(callback) callback(score, scoreUpdateTimer);\n        });\n    });\n};\n\nexport const bindScore = score => {\n\n    const { collection } = store.getState();\n\n    score.collectionId = collection.id;\n\n    actions.boundUpdateScore(score);\n};","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nconst onTraitsReadyListeners = [];\nconst onTraitsReady = listener => {\n    onTraitsReadyListeners.push(listener);\n};\n\nconst onTraitClickedListeners = [];\nconst onTraitClicked = listener => {\n    onTraitClickedListeners.push(listener);\n};\n\nconst getMatchingTrait = (layoutTraits, traitValues) => {\n\n    try {\n        let requiredTraitValues, trait;\n\n        for (let [key, obj] of Object.entries(traitValues)) {\n            let t;\n            layoutTraits.map(t => { \n                if(t.toLowerCase() === utils.toCamelCase(key).toLowerCase()) {\n                    requiredTraitValues = obj.value.map(v => v.toLowerCase());\n                    trait = t;\n                }\n            }) \n        };\n    \n        return { requiredTraitValues, trait };\n    } catch (e) {\n      logError(getMatchingTrait, e);\n      return { requiredTraitValues: [], trait: {}};\n    }\n\n};\n\nconst fetchTraits = async (trait, requiredTraitValues, required) => {\n\n    const glossary = store.getState().glossary;\n\n    let traits = await firestore.getTraitDefinitions(glossary, required, trait);\n        traits.forEach(t => {\n            t.term = t.term.toLowerCase();\n            if(t.alt) t.alt = t.alt.toLowerCase();\n            return t;\n        });\n\n    if(!requiredTraitValues) return { traits: null, requiredTraits: null};\n\n    let multiples = traitsHandler.getNMultiplesFromArray(traits.map(t => t.term), requiredTraitValues.length);\n\n        multiples = multiples.filter(multiple => {\n            return !traitsHandler.doArraysHaveSameValues(multiple, requiredTraitValues);\n        });\n        \n        let requiredTraits = traits.filter(t => R.contains(t.term, requiredTraitValues));\n        \n        multiples = utils.shuffleArray([ ...R.take(5, multiples), requiredTraitValues ]);\n\n        traits = multiples.map(multiple => {\n            return multiple.map(term => traits.find(trait => trait.term === term));\n        });\n\n    onTraitsReadyListeners.forEach(listener => listener(traits, requiredTraits));\n\n    return { traits, requiredTraits };\n};\n\nconst pendingScore = {};\n\nconst callback = (score, scoreUpdateTimer) => {\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n          continueLessonBtn.disabled = false;\n    pendingScore.score = score;\n    pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    \n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n};\n\nconst onClickTileHandler = (tile, requiredTraits, tiles) => {\n\n    const { config, lesson, collection } = store.getState();\n\n    const item = collection.nextItem;\n\n    tile.addEventListener('click', e => {\n        \n        const tile = e.currentTarget;\n        const traits = Array.from(tile.querySelectorAll('img')).map(t => t.dataset.term);\n        const images = Array.from(tiles).map(t => t.querySelector('img').dataset);\n        const answers = images.map(i => { return { value: i.term, url: i.url } })\n        const test = {\n            points: 0,\n            binomial: item.name, \n            trait: true,\n            question: requiredTraits.map(trait => trait.term),\n            answer: traits,\n            questionCount: lesson.questionCount, \n            layoutCount: lesson.layoutCount,\n            answers,\n            questionText: 'Match the trait'\n        }\n        scoreHandler('image-match', test, callback, config);\n\n        tiles.forEach(tile => {\n            if(!traitsHandler.doArraysHaveSameValues(Array.from(tile.querySelectorAll('img')).map(img => img.dataset.term), requiredTraits.map(trait => trait.term))) {\n                tile.querySelectorAll('img').forEach(img => img.classList.add('desaturate'));\n            }\n        });\n})};\n\nexport const mixedTraitHandler = {\n    getMatchingTrait,\n    fetchTraits,\n    onTraitsReady,\n    onTraitClicked,\n    onClickTileHandler\n};","import * as R from 'ramda';\n\nimport { panels } from 'snapdragon-config/screen-panels';\n\nconst { \n    specimenImages, speciesCard, vernaculars, scientifics, text, \n    leaf, leafName, \n    family, familyStrips, taxon, nonTaxon, textComplete, cultivar, cultivarCard, \n    epithets, definitions, \n    specimenCommonMatch, specimenLatinMatch,\n    definitionCard, \n    traitProperty, symbioticProperty\n    , lookalikeProperty\n    , traitImages,\n    nonTaxonSpecimenTiles,\n    mixedSpecimenQuestions,\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n    history, summary, \n    birdsong, mediaPlayers,\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification } = panels;\n\nconst mixedSpeciesMatch = {\n    name: 'screen-mixed-species-match',\n    type: 'test',\n    score: 1,\n    kind: 'VMC',\n    points: 3,\n    given: 'Given species name',    \n    requirement: 'Select species image',\n    screens: [\n        { ...specimenImages },\n        { ...mixedSpecimenQuestions }\n    ]\n};\n\nconst speciesRevision = {\n    name: 'screen-species-card',\n    type: 'revision',\n    score: 0,\n    kind: 'S',\n    points: 0,\n    given: 'Given species summary',\n    requirement: 'Study species',\n    screens: [\n        { ...specimenImages },\n        { ...speciesCard }\n    ]\n};\n\nconst taxonRevision = {\n    name: 'screen-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'F',\n    points: 0,\n    given: 'Study',\n    requirement: 'Family summary',\n    screens: [\n        { ...specimenImages },\n        { ...taxon }\n    ]\n};\n\nconst nonTaxonRevision = {\n    name: 'screen-non-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'GR',\n    points: 0,\n    given: 'Group summary',\n    requirement: 'Study',\n    screens: [\n        { ...nonTaxonSpecimenTiles },\n        { ...nonTaxon }\n    ]\n};\n\nconst definitionRevision = {\n    name: 'screen-definition-card',\n    type:'revision',\n    score: 0,\n    kind: 'G',\n    points: 0,\n    given: 'Given glossary',\n    requirement: 'Study definitions',\n    screens: [\n        { ...specimenImages },\n        { ...definitionCard }\n    ]\n};\n\nconst latinToCommonMatch = {\n    name: 'screen-latin-to-common',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given latin name',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...vernaculars }\n    ]\n};\n\nconst commonToLatinMatch = {\n    name: 'screen-common-to-latin',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given common name',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...scientifics }\n    ]\n};\n\nconst speciesIdentificationMatch = {\n    name: 'screen-species-identification',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select identification',\n    screens: [\n        { ...specimenImages },\n        { ...speciesIdentification }\n    ]\n};\n\nconst textCompleteGenus = {\n    name: 'screen-genus-completion',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select genus name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-genus'  }\n    ]\n};\n\nconst multiSpecimenCommonMatch = {\n    name: 'screen-specimens-common-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenCommonMatch }\n    ]\n};\n\nconst multiSpecimenLatinMatch = {\n    name: 'screen-specimens-latin-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenLatinMatch }\n    ]\n};\n\nconst traitPropertyMatch = {\n    name: 'trait-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...traitProperty }\n    ]\n};\n\nconst lookalikePropertyMatch = {\n    name: 'lookalike-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...lookalikeProperty }\n    ]\n};\n\nconst symbioticPropertyMatch = {\n    name: 'symbiotic-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given specimenImages images',\n    requirement: 'Select symbiotic match',\n    screens: [\n        { ...specimenImages },\n        { ...symbioticProperty }\n    ]\n};\n\nconst familyMatch = {\n    name: 'screen-species-to-family',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Species name',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...family }\n    ]\n};\n\nconst cultivarMatch = {\n    name: 'screen-cultivar-to-species',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Cultivar name',\n    requirement: 'List species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivar }\n    ]\n};\n\nconst familyStripsMatch = {\n    name: 'screen-family-to-description',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Family description',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...familyStrips }\n    ]\n};\n\nconst genusEntry = {\n    name: 'screen-genus-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given species name',\n    requirement: 'Enter genus name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'genus'}\n    ]\n};\n\nconst speciesEntry = {\n    name: 'screen-species-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given genus name',\n    requirement: 'Enter species name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'species'}\n    ]\n};\n\nconst speciesGenusEntry = {\n    name: 'screen-binomial-entry',\n    type:'test',\n    score: 1,\n    points: 4,\n    kind: 'T',\n    given: 'Given common name',\n    requirement: 'Enter latin name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'name'}\n    ]\n};\n\nconst leafEntry = {\n    type:'test',\n    score: 1,\n    points: 3,\n    kind: 'T',\n    screens: [\n        { ...leaf },\n        { ...leafName }\n        // { ...leafName, template: 'js-text-entry-template' }\n    ]\n};\n\nconst textCompleteSpecies = {\n    name: 'screen-species-completion',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Given genus name',\n    requirement: 'Select species name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-species' }\n    ]\n};\n\nconst commonEntry = {\n    name: 'screen-common-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species latin name',\n    requirement: 'Enter common name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'vernacular'  }\n        // { ...text, template: 'js-vernacular-entry-template', taxon: 'vernacular', headers: { long: 'Enter the common name', short: 'Enter the common name'}}\n    ]\n};\n\nconst latinEpithets = {\n    name: 'screen-epithets',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Epithet',\n    requirement: 'List epithet definitions',\n    screens: [\n        { ...specimenImages },\n        { ...epithets }\n    ]\n};\n\nconst glossaryTerms = {\n    name: 'screen-definitions',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'Given glossary term',\n    requirement: 'Select definition',\n    screens: [\n        { ...specimenImages },\n        { ...definitions }\n    ]\n};\n\nconst cultivars = {\n    name: 'screen-cultivars',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'List of cultivars',\n    requirement: 'List of species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivarCard },\n        { ...cultivar }\n    ]\n};\n\nconst mixedSpecimenImages = {\n  name: 'mixed-specimen-images',\n  type:'test',\n  score: 1,\n  points: 2,\n  kind: 'T',\n  given: 'Specimen images',\n  requirement: 'Select species image',\n  screens: [\n      { ...mixedSpecimensLeft },\n      { ...mixedSpecimensRight }\n  ]\n};\n\nconst mediaMatch = {\n    name: 'media-match',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species song',\n    requirement: 'Select species',\n    screens: [\n        { ...specimenImages },\n        // { ...mediaPlayers },\n        { ...birdsong }\n    ]\n};\n\nconst mixedTraitImages = {\n    name: 'mixed-trait-images',\n    type:'test',\n    kind: 'T',\n    score: 1,\n    points: 2,\n    given: 'Trait images',\n    requirement: 'Select trait image',\n    screens: [\n        { ...mixedTraitLeft },\n        { ...mixedTraitRight }\n    ]\n  };  \n\nconst providerHorizontalStrip = {\n    name: 'provider-horizontal-strip',\n    type: 'test',\n    score: 1,\n    screens: [\n        { ...specimenImages },\n        { ...providerHorizontalStripQuestions }\n    ]\n};\n\nconst propertyTrait = (traitPropertyMatch, traits) => {\n    const layout = R.clone(traitPropertyMatch);\n    layout.screens[0].traits = traits;\n    layout.screens[1].traits = traits;\n    return layout;\n};\n\nexport const layouts = {\n  mixedSpeciesMatch,\n  speciesRevision,\n  taxonRevision,\n  nonTaxonRevision,\n  definitionRevision,\n  \n  latinToCommonMatch,\n  commonToLatinMatch,\n  textCompleteGenus,\n  multiSpecimenCommonMatch,\n  multiSpecimenLatinMatch,\n  traitPropertyMatch,\n  lookalikePropertyMatch,\n  symbioticPropertyMatch,\n  familyMatch,\n  cultivarMatch,\n  familyStripsMatch,\n  genusEntry,\n  speciesEntry,\n  speciesGenusEntry,\n  textCompleteSpecies,\n  commonEntry,\n  leafEntry,\n  glossaryTerms,\n  latinEpithets,\n  cultivars,\n  mixedSpecimenImages,\n  history,\n  summary,\n  mediaMatch,\n  mixedTraitImages,\n  providerHorizontalStrip,\n  speciesIdentificationMatch,\n  propertyTrait\n}","const specimenImages = {\n    name: 'specimen-images',\n    domain: 'collection',\n  };\n  \nconst traitImages = {\n    name: 'trait-images',\n    domain: 'bonusLayout',\n  };\n  \n  const history = { \n    name: 'history', \n    domain: 'history'\n  };\n  \n  const speciesCard = {\n    name: 'species-card',\n    domain: 'collection',\n  };\n  \n  const definitionCard = {\n    name: 'definition-card',\n    domain: 'collection'\n  };\n  \n  const scientifics = {\n    name: 'species-scientifics',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  const birdsong = {\n    name: 'birdsong',\n    domain: 'bonusLayout',\n  }\n\n  const mediaPlayers = {\n    name: 'media-players',\n    domain: 'collection',    \n  }\n  \n  const vernaculars = {\n    name: 'species-vernaculars',\n    domain: 'collection',\n    taxon: 'name'\n  };\n  \n  const text = {\n    name: 'text-entry',\n    domain: 'collection'\n  };\n  \n  const textComplete = {\n    name: 'text-complete',\n    domain: 'collection',\n    question: 'Complete the latin name',\n  };\n  \n  const summary = { \n    name: 'summary', \n    domain: 'history' \n  };\n  \n  const mixedSpecimenQuestions = {\n    name: 'mixed-specimen-questions',\n    domain: 'collection'\n  };\n\n  const leaf = {\n    name: 'leaf-image',\n    domain: 'collection'\n  };\n  \n  const leafName = {\n    name: 'leaf-text',\n    domain: 'collection'\n  };\n  \n  const epithets = {\n    name: 'epithet',\n    domain: 'collection'\n  };\n  \n  const definitions = {\n    name: 'definition',\n    domain: 'bonusLayout'\n  };\n  \n  const family = {\n    name: 'family',\n    domain: 'collection'\n  };\n  \n  const familyStrips = {\n    name: 'family-strips',\n    domain: 'collection'\n  };\n  \n  const taxon = {\n    name: 'taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxon = {\n    name: 'non-taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxonSpecimenTiles = {\n    name: 'non-taxon-specimen-tiles',\n    domain: 'collection'\n  };\n  \n  const cultivarCard = {\n    name: 'cultivar-card',\n    domain: 'collection'\n  };\n  \n  const cultivar = {\n    name: 'cultivar-match',\n    domain: 'collection'\n  };\n\n  const specimenCommonMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'vernacular'\n  };\n  \n  const specimenLatinMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'binomial'\n  };\n  \n  const traitProperty = {\n    name: 'trait-property',\n    domain: 'bonusLayout'\n  };\n  \n  const lookalikeProperty = {\n    name: 'lookalike-property',\n    domain: 'bonusLayout'\n  };\n  \n  const symbioticProperty = {\n    name: 'symbiotic-property',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensLeft = {\n    name: 'mixed-specimen-images',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensRight = {\n    name: 'mixed-specimen-question',\n    domain: 'collection'\n  };\n  \n  const mixedTraitLeft = {\n    name: 'mixed-trait-images',\n    domain: 'collection'\n  };\n\n  const mixedTraitRight = {\n    name: 'mixed-trait-question',\n    domain: 'collection'\n  };\n\n  const providerHorizontalStripQuestions = {\n    name: 'provider-horizontal-strip-questions',\n    domain: 'collection'\n  };\n\n    \n  const speciesIdentification = {\n    name: 'species-identification',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  \n  export const panels = {\n    specimenImages,\n    history,\n  \n    speciesCard,\n    definitionCard,\n    scientifics,\n    vernaculars,\n    text,\n    summary,\n\n    leaf,\n    leafName,\n  \n    epithets,\n    definitions,\n    family,\n    familyStrips,\n    \n    taxon,\n    nonTaxon,\n    nonTaxonSpecimenTiles,\n    textComplete,\n    cultivarCard,\n    cultivar,\n  \n    specimenCommonMatch,\n    specimenLatinMatch,\n    traitProperty,\n    lookalikeProperty,\n    symbioticProperty,\n    \n    mixedSpecimenQuestions,\n\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n\n    birdsong,\n    mediaPlayers,\n    traitImages,\n\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification\n  };","import * as R from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { utils } from 'utils/utils';\n\nimport { roundHandler } from \"snapdragon-engine/round-plan-handler\";\nimport { bonusHandler } from 'snapdragon-engine/bonus/bonus-test-handler';\nimport { providerHandler } from 'snapdragon-engine/provider/provider-test-handler';\nimport { mixedTraitHandler } from 'ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const createNextRound = (lessonPlan, nextRoundLayoutTemplates, progressScreens, collection, lesson) => {\n\n    const init = async () => {\n    \n        lessonPlan.layouts = [];\n\n        const moduleSize = lesson.moduleSize;\n        const lessonName = lesson.name;\n        const levelName = lesson.level.name;\n        const itemsCountToDate = (lesson.currentRound - 1) * moduleSize;\n        const itemsLeft = collection.items.length - itemsCountToDate;\n\n        const layoutsToAdd = moduleSize > itemsLeft ? itemsLeft : moduleSize;\n        const roundItemNames = roundHandler.getRoundItems(lesson.currentRound, moduleSize, collection.items.map(i => i.name));\n\n        nextRoundLayoutTemplates.forEach( async (layout, index) => {\n            let itemIndex = 0;\n            do {\n                if(layout.name === 'mixed-trait-images') {\n                    \n                    const item = collection.items.find(i => i.name === roundItemNames[itemIndex]);\n\n                    const { requiredTraitValues, trait } = mixedTraitHandler.getMatchingTrait(utils.shuffleArray(layout.screens[1].traits), item.traits);\n\n                    if(!trait) return;\n\n                    const { traits, requiredTraits } = await mixedTraitHandler.fetchTraits(trait, requiredTraitValues, collection.glossary);\n\n                    if(!requiredTraits || !traits) return;\n\n                    layout.trait = trait;\n                    layout.traits = traits;\n                    layout.requiredTraits = requiredTraits;\n\n                    const traitsToIgnore = [ 'n/a', 'none' ];\n                    const addLayout = !!requiredTraits.find(t => !R.contains(t.term.toLowerCase(), traitsToIgnore));\n\n                    if(addLayout) {\n                        lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                    }\n        \n                } else {\n                    lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                }\n\n                itemIndex++;\n                \n            } while (itemIndex < layoutsToAdd);\n        });\n\n        if(lesson.level.id === 1) {\n            let providerQuestions = await providerHandler.getLayouts(collection, roundItemNames);\n                providerQuestions = R.flatten(providerQuestions).filter(layout => layout);\n\n            let providerLayouts = providerQuestions.map(provider => {\n                return { ...L.providerHorizontalStrip, lessonName:\"Lesson 1\", levelName:\"Level 1\", speciesName: provider.name || provider.taxon, provider };\n            });\n\n            if(providerLayouts) {\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...providerLayouts ];\n            }\n        }\n\n        const bonusLayouts = lessonPlan.layouts.filter(layout => layout.bonus);\n\n        let lessonLayouts = lessonPlan.layouts.filter(layout => !layout.bonus).map((layout, i) => {\n            layout.itemIndex = layout.itemIndex === undefined ? utils.calcItemIndex(itemsCountToDate, layoutsToAdd, i) : layout.itemIndex;\n            return { ...layout };\n        });\n\n        const itemIndices = [ ...new Set(lessonPlan.layouts.map(layout => layout.itemIndex).filter(i => i !== undefined)) ];\n        \n        lessonPlan.layouts = lessonLayouts;\n\n        if(lesson.level.id === 1) {\n\n            if(bonusLayouts) {\n                const bonusTests = await bonusHandler.getTests(collection, itemIndices, bonusLayouts, lessonName, levelName);\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...bonusTests ];\n            }\n        }\n\n        lessonLayouts = lessonPlan.layouts.map((layout, i) => {\n            layout.roundProgressIndex = i + 1;\n            return { ...layout };\n        });\n\n        const summaryLayout = lessonPlan.portrait \n            ? {\n                name: 'summary',\n                screens: [{ \n                    name: 'summary', \n                    domain: 'history', \n                    parent: DOM.rightBody\n                }],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            }\n            : {\n                name: 'summary',\n                screens: [...progressScreens],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            };\n\n        // lessonPlan.layouts.push(summaryLayout);\n\n        lessonPlan.layouts.push({\n            name: 'summary',\n            screens: [{ \n                name: 'summary', \n                domain: 'history', \n                parent: DOM.rightBody\n            }],\n            lessonName,\n            levelName,\n            layoutIndex: lessonPlan.layouts.length,\n            itemIndex: 0\n        });\n\n        const scores = lessonPlan.layouts.map(layout => layout.score || 0);\n        const roundScoreCount = scores.reduce((accumulator, currentValue) => accumulator + currentValue);\n\n        lessonPlan.layouts.map(layout => layout.roundScoreCount = roundScoreCount);\n\n        lesson.questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n        lesson.layoutCount = lessonPlan.layouts.length;\n        lesson.layoutNames = lessonPlan.layouts.map(layout => layout.name);\n\n        return { updatedLessonPlan: lessonPlan, updatedCollection: collection, updatedLesson: lesson };\n    }\n\n    return init();\n};\n","export const getNextRoundLayouts = (lessonPlan, config, lesson) => {\n\n    // All layouts are currently activated because the lesson edit function is not in use.\n\n    lesson.activeLevelCount = lessonPlan.levels.filter(level => level.layouts.length > 0).length;\n\n    const getCurrentLevelFromLessonPlan = (lessonPlan, levelId) => {\n        return lessonPlan.levels.find(level => level.id === levelId);\n    }\n    \n    const getLayouts = (currentLevel, mode) => {    \n        switch(mode) {\n            case 'learn':\n                currentLevel.bonusLayouts = currentLevel.bonusLayouts || [];\n                return [ ...currentLevel.layouts.filter(l => l), ...currentLevel.bonusLayouts ];\n            case 'review':\n                return currentLevel.reviewLayouts || [];\n            default:\n                return currentLevel.layouts;\n        }\n    };\n\n    const goToNextLevelThatHasLayouts = (lessonPlan, levelId) => {\n\n        let layouts = [], lessonName = '', levelName = '';        \n        \n        const iterateOverLevelsCheckingForAvailableLayouts = (intialValue, levelId) => {\n            \n            let increment = intialValue;\n\n            if(layouts.length > 0) return;\n\n            const level = lessonPlan.levels.find(level => level.id === levelId + increment);\n\n            if(!level) return;\n            \n            lesson.level = level;\n\n            lesson.level = level;\n            lessonName = lesson.name;\n            levelName = lesson.level.name; // sometimes returns null (when at final level, looking for next?)\n            layouts = getLayouts(getCurrentLevelFromLessonPlan(lessonPlan, levelId + increment), config.mode);\n\n            increment++;\n\n            iterateOverLevelsCheckingForAvailableLayouts(increment, levelId);\n        }     \n        \n        iterateOverLevelsCheckingForAvailableLayouts(0, levelId);\n\n        return { lessonName, levelName, layouts };\n    }\n\n    let levelId = lesson.level.id;\n\n    if(lesson.isLevelComplete) {\n        levelId++;\n        lesson.level = lessonPlan.levels.find(level => level.id === levelId);\n    }\n\n    const { layouts } = goToNextLevelThatHasLayouts(lessonPlan, levelId);\n\n    return layouts;\n};","import { createNextRound } from 'snapdragon-engine/round-planner';\nimport { layouts } from 'snapdragon-config/screen-layouts';\nimport { getNextRoundLayouts } from 'snapdragon-engine/lesson-plan-handler';\n\nconst { summary, history } = layouts;\n\nconst createLessonPlan = async (lessonPlan, config, collection, lesson) => {\n\n    lesson.moduleSize = lesson.moduleSize || collection.moduleSize || config.moduleSize;\n    lesson.currentRound = lesson.currentRound || 1;\n\n    let rounds = collection.items.length / lesson.moduleSize;            \n        rounds = collection.items.length % lesson.moduleSize === 0 ? rounds : rounds === 1 ? 1 : Math.floor(rounds) + 1;\n\n    lesson = lesson.level === undefined \n            ? { ...lesson, ...lessonPlan, level: { id: 1 }, rounds } \n            : lesson;\n\n    const nextRoundLayoutTemplates = getNextRoundLayouts(lessonPlan, config, lesson);\n\n    if(lesson.level === undefined) {\n        return new Promise(resolve => resolve(null));\n    }\n\n    return await createNextRound(\n        lessonPlan,\n        nextRoundLayoutTemplates, \n        [ summary, history ],\n        collection,\n        lesson\n    );        \n};\n\nexport const lessonPlanner = {\n    createLessonPlan\n}","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeCustom = {\n    id: 1,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeCustom2 = {\n    id: 2,\n    name:'Lesson 2',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};","import * as R from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeFungi = {\n    id: 3,\n    name:'Lesson 3',\n    portrait: false,\n    default: false,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape']),\n                        L.propertyTrait(L.mixedTraitImages, ['gillAttachment']),\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        },\n    ]\n};\n\nexport const landscapeLichens = { ...R.clone(landscapeFungi), id: 4 };\nlandscapeLichens.levels[0] = { \n    id: 1,\n    name:'Level 1',\n    description: 'Species recognition',\n    layouts: [                          \n        L.mixedSpecimenImages\n    ],\n    // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n    // reviewLayouts: [ L.multiSpecimenCommonMatch, L.mixedSpecimensRight ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeStatic = {\n    id: 10,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticTaxonGroup = {\n    id: 11,\n    name:'Lesson 11',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages,\n                        L.speciesIdentificationMatch,\n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, \n                        L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                    ],\n            // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticProviderQuestionsOnly = {\n    id: 12,\n    name:'Lesson 12',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [],\n            bonusLayouts: []\n        }\n    ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const portraitStatic = {\n    id: 110,\n    name:'Lesson 110',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const portraitStaticTaxonGroup = {\n    id: 111,\n    name:'Lesson 111',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n","import * as R from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nimport { landscapeCustom } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeCustom2 } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeFungi, landscapeLichens } from 'snapdragon-config/plans/landscape/landscape-fungi';\n\nimport { landscapeStatic, landscapeStaticTaxonGroup, landscapeStaticProviderQuestionsOnly } from 'snapdragon-config/plans/landscape/landscape-static';\nimport { portraitStatic, portraitStaticTaxonGroup } from 'snapdragon-config/plans/portrait/portrait-static';\n\nconst landscapeBirds = { ...R.clone(landscapeStatic), id: 5 };\n      if(landscapeBirds.levels[0].bonusLayouts) landscapeBirds.levels[0].bonusLayouts[0].types.push('song');\n\nconst portraitBirds = { ...R.clone(portraitStatic), id: 105 };\n      portraitBirds.levels[0].layouts.push(L.mediaMatch); \n\nconst portraitFungi = { ...R.clone(landscapeFungi), id: 103, portrait: true };\n      portraitFungi.levels[0].bonusLayouts = [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ];\n\nconst portraitLichens = { ...R.clone(landscapeLichens), id: 104, portrait: true };\nconst portraitCustom = { ...R.clone(landscapeCustom), id: 101, portrait: true };\nconst portraitCustom2 = { ...R.clone(landscapeCustom2), id: 102, portrait: true };\n\nexport const lessonPlans = [\n\n    landscapeCustom,\n    landscapeCustom2,\n    landscapeStatic,\n    landscapeStaticTaxonGroup,\n    landscapeStaticProviderQuestionsOnly,\n    landscapeFungi,    \n    landscapeLichens,\n    landscapeBirds,\n    \n    portraitCustom,\n    portraitCustom2,\n    portraitStatic,\n    portraitStaticTaxonGroup,    \n    portraitFungi,    \n    portraitLichens,\n    portraitBirds,\n    \n];","import { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nconst isRequired = (step, args) => {\n\n    const { layout, counter, lessonPlan, config, lesson, collection } = args;\n\n    let required = false;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            required = layout && !layout.bonus;\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            if(counter.isLessonPaused) {\n                required = false;\n            } else {\n                required = lessonPlan && lessonPlan.layouts;\n                required = required && lessonPlan.layouts[counter.index] !== null;\n            }\n            break;\n        case enums.nextStep.NEXT_LESSON:\n            required =      (config.collection.id > 0 && !counter.isLessonPaused) // new lesson\n                        ||  (config.collection.id > 0 && config.collection.id !== collection.id); // new lesson from new collection\n            break;\n        case enums.nextStep.NEXT_ROUND:\n            required = counter.index === 0 && lesson.isNextRound && collection.items && collection.items.length > 0;\n            break;\n    }\n\n    return required;\n};\n\nconst actionUpdate = (step, args) => {\n\n    const { layout, config, asyncFunc } = args;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            actions.boundNextItem(layout.itemIndex);\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            actions.boundNextLayout(layout);\n            subscription.addSubs(layout, config);\n            lessonStateHandler.changeRequest({\n                requestType: enums.lessonState.SAVE_LESSON_PROGRESS,\n            });\n            break;\n        case enums.nextStep.NEXT_LESSON:\n            actions.boundNextLesson(asyncFunc);\n            break;\n    }\n}\n\nexport const setupHandler = {\n    isRequired,\n    actionUpdate\n}","import * as R from 'ramda';\n\nimport { store } from 'redux/store';\nimport { lessonPlanner } from 'snapdragon-engine/lesson-planner';\nimport { lessonPlans } from 'snapdragon-config/lesson-plans';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\n\nexport const nextLesson = counter => {\n\n    const { layout, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, config, lesson, collection };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_LESSON, args)) {\n\n        const planId = config.isPortraitMode ? collection.lessonPlanPortrait : collection.lessonPlanLandscape;    \n        const lessonPlan = R.clone(lessonPlans.find(plan => plan.id === planId && plan.portrait === config.isPortraitMode));\n\n        args.lessonPlan = lessonPlan;\n\n        if(setupHandler.isRequired(enums.nextStep.NEXT_ROUND, args)) {\n\n            // asyncFunc will return collection, lessonPlan and lesson\n\n            const asyncFunc = lessonPlanner.createLessonPlan(lessonPlan, config, R.clone(collection), R.clone(lesson)).then(props => {\n                if(!props) return;\n                return { lessonPlan: props.updatedLessonPlan, collection: props.updatedCollection, lesson: props.updatedLesson };\n            });\n\n            if(asyncFunc === null) return;\n\n            setupHandler.actionUpdate(enums.nextStep.NEXT_LESSON, { asyncFunc });\n        }\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextLayout = counter => {\n\n    const { layout, lessonPlan, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection };\n\n    const isRequired = setupHandler.isRequired(enums.nextStep.NEXT_LAYOUT, args);\n\n    if(isRequired) {\n        const nextLayout = lessonPlan.layouts[counter.index];\n        setupHandler.actionUpdate(enums.nextStep.NEXT_LAYOUT, { layout: nextLayout, config });\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextItem = layout => {\n\n    const { counter, lessonPlan, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_ITEM, args)) {\n        setupHandler.actionUpdate(enums.nextStep.NEXT_ITEM, { layout });\n    }\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\n\nexport const renderHeaders = collection => {\n\n    DOM.leftHeaderTxt.innerHTML = 'Learn the planet';\n    DOM.rightHeaderTxt.innerHTML = 'Learn the planet';\n\n    setTimeout(() => {\n        \n        const { layout, lessonPlan } = store.getState();\n        const progressBar = document.querySelector('.js-right-grid progress');\n\n        if(lessonPlan) {\n\n            const questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n            progressBar.max = questionCount;\n            progressBar.value = layout.roundProgressIndex || progressBar.value;\n        }\n    });\n\n    // return;\n    \n    // let lessonPlan, config, counter, layout;\n\n    // setTimeout(() => {\n    //     lessonPlan = store.getState().lessonPlan;\n    //     config = store.getState().config;\n    //     counter = store.getState().counter;\n    //     collection = store.getState().collection;\n    //     layout = store.getState().layout;\n    //     render();\n    // });\n    \n    // let PORTRAIT = false, LANDSCAPE = false, LANDSCAPE_HOME = false, COLLECTION = false, SPECIES_LIST = false;\n    // let leftHeaderText = '', rightHeaderText = '';\n\n    // const render = () => {\n\n    //     layout = layout ? layout : (lessonPlan && lessonPlan.layouts) ? lessonPlan.layouts[counter.index] : null;\n\n    //     const title = `learn the planet`;\n    \n    //     leftHeaderText = title; \n    //     rightHeaderText = config.isLandscapeMode ? 'Save the planet' : title;\n        \n    //     PORTRAIT = config.isPortraitMode;\n    //     LANDSCAPE = config.isLandscapeMode;\n    \n    //     if(collection.name) {        \n    //         COLLECTION = !!collection;\n    //         if(COLLECTION) collection.name ? leftHeaderText = collection.name : title;\n    //         if(SPECIES_LIST && PORTRAIT) rightHeaderText = collection.name;\n    //         if(LANDSCAPE_HOME) {\n    //             leftHeaderText = collection.name;\n    //             rightHeaderText = title;\n    //         }\n    //     }\n    \n    //     if(layout) {\n    \n    //         const item = collection.nextItem;\n    //         const progressBar = document.querySelector('.js-right-grid progress');\n    //         const questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n    //         const questionFormat = `Question ${ layout.roundProgressIndex } of ${questionCount}`;\n    \n    //         progressBar.max = questionCount;\n    //         progressBar.value = layout.roundProgressIndex || progressBar.value;\n            \n    //         let specimensHeaderText = '';\n    //         let lessonHeaderText = document.querySelector('.js-right-header > div:nth-child(2)');\n    \n    //         switch(layout.name) {\n    //             case 'screen-latin-to-common':\n    //                 specimensHeaderText = `${item.name} specimens`;\n    //                 break;\n    //             case 'screen-common-to-latin':\n    //             case 'specimen-images':\n    //             case 'screen-image-to-image':\n    //             case 'screen-species-card':\n    //                 specimensHeaderText = `${item.vernacularName} specimens`;\n    //                 break;\n    //             case 'history':\n    //                 if(PORTRAIT) rightHeaderText = 'Snapdragon';\n    //                 break;\n    //             default:\n    //                 specimensHeaderText = 'Species specimens';\n    //                 break;\n    //         }\n                \n    //         let SPECIMENS = false;\n    \n    //         SPECIMENS = layout.screens.find(screen => screen.name === 'specimen-images');\n    \n    //         if(SPECIMENS && !LANDSCAPE_HOME) leftHeaderText = specimensHeaderText;\n    \n    //         let TEST = false, GLOSSARY = false, SUMMARY = false, SPECIES_CARD = false, FAMILY_CARD = false;\n                              \n    //         TEST = layout.type === 'test';\n    //         GLOSSARY = layout.name === 'screen-definition-card';\n    //         SPECIES_CARD = layout.name === 'screen-species-card';\n    //         FAMILY_CARD = layout.name === 'screen-taxon-card';\n    //         SUMMARY = layout.screens.find(el => el.name === 'summary');\n            \n    //         if(GLOSSARY) rightHeaderText = 'Glossary';\n    //         if(TEST) rightHeaderText = questionFormat || '';\n    //         if(SPECIES_CARD) rightHeaderText = 'Species summary';\n    //         if(FAMILY_CARD) rightHeaderText = 'Family summary & Quick ID'\n    //         if(SUMMARY) rightHeaderText = 'Lesson progress';\n    //         if(SPECIES_LIST && PORTRAIT) rightHeaderText = collection.name;\n    //         if(LANDSCAPE_HOME) rightHeaderText = title;\n\n    //         if(LANDSCAPE) lessonHeaderText.innerHTML = `${collection.name} (${collection.items.length})`;\n    //     }\n    \n    //     DOM.leftHeaderTxt.innerHTML = leftHeaderText;\n    //     DOM.rightHeaderTxt.innerHTML = rightHeaderText;\n    // };\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport scoreTemplate from 'ui/fixtures/score-template.html';\n\nexport const renderScore = score => {\n    \n    const { history, collection, config, layout, lesson, lessonPlan } = store.getState();\n\n    score.mode = config.mode;\n\n    if(!layout) return;\n\n    if(score.total === layout.roundScoreCount) {\n        actions.boundUpdateHistory(score);\n    }\n\n    return;\n\n    const template = document.createElement('template');\n\n    const scoreText = config.isLandscape \n                        ? score.correct === 1 ? 'correct answer' : 'correct answers'\n                        : score.correct === 'correct';\n\n    template.innerHTML = config.isPortraitMode\n            ?   layout \n                    ? ''\n                    // ? `<div><span>{{ score.correct }} / {{ score.total }}</span></div>`\n                    : ''\n            :   layout \n                    ? scoreTemplate\n                    : '';\n\n    const runningTotal = history ? { ...history } : { correct: 0, total: 0 };\n\n    runningTotal.correct = runningTotal.correct + score.correct;\n    runningTotal.total = runningTotal.total + score.total;\n\n    const parent = config.isPortraitMode ? DOM.rightFooter.querySelector('.js-footer-score') : DOM.rightFooter;\n          parent.innerHTML = '';\n\n    let questionCount, questionFormat = '';\n\n    if(lessonPlan) {\n        questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        questionFormat = `Question ${ layout.roundProgressIndex } of ${questionCount}`;\n    }\n\n    if(config.isPortraitMode) {\n        DOM.rightHeaderTxt.innerHTML = score.total === 0\n            ? 'Learn the planet'\n            : questionFormat;\n\n        DOM.rightHeaderScoreTxt.innerHTML = score.total === 0\n            ? config.isLandscapeMode\n                    ? '<span class=\"margin-right\">Learn the planet</span>'\n                    : '<span class=\"margin-right\"></span>'\n            : `<span class=\"margin-left\">${score.correct}/${score.total}</span>`;\n    }    \n\n    renderTemplate({ score, history: runningTotal, collection, config, layout, scoreText, currentRound: lesson.currentRound, questionFormat }, template.content, parent);\n\n    // score.mode = config.mode;\n\n    // if(!layout) return;\n\n    // if(score.total === layout.roundScoreCount) {\n    //     actions.boundUpdateHistory(score);\n    // }\n};","import { subscription } from 'redux/subscriptions';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\n\nimport homeTemplate from 'ui/screens/home/home-template.html';\n\nexport const renderHome = (counter, forceIntroDisplay = false) => {\n    \n    subscription.remove(subscription.getByName('renderHome'));\n    \n    const isFirstTimeVisitor = cookieHandler.setFirstTimeVisitorCookie();\n\n    if(counter.index > 0 && !counter.isLessonPaused) return;\n\n    let { config } = store.getState();\n\n    if(config.isLandscapeMode || forceIntroDisplay) {\n        renderLessons();\n    }\n\n    // if(config.isLandscapeMode || isFirstTimeVisitor || forceIntroDisplay) {\n    //     renderSnapdragonIntro();\n    // }\n\n    if(config.isPortraitMode && !isFirstTimeVisitor) {\n        renderLessons();\n    }\n};\n\nconst renderSnapdragonIntro = () => {\n    \n    const template = document.createElement('template');\n          template.innerHTML = homeTemplate;\n\n    DOM.rightBody.innerHTML = '';\n\n    renderTemplate({}, template.content, DOM.rightBody);\n}\n","import { clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { getIPLocation } from 'geo/geo';\n\nexport const initialiseConfig = async originalConfig => {\n\n    const config = clone(originalConfig);\n\n    const observableMonths = utils.getObservableMonths(new Date(), 3);\n\n    config.season = { observableMonths };\n    config.guide.season.observableMonths = observableMonths;\n    config.guide.season.type = config.guide.season.type || 'all_year';\n\n    config.collection.id = config.collection.id || 0; \n    config.guide.locationPlace = '';\n    config.guide.place.type = '';\n    \n    try {\n        \n        const ipLocation = await getIPLocation(config);\n        \n        if(ipLocation) {\n            const location = ipLocation.city ? `${ipLocation.city}, ${ipLocation.country_name}` : ipLocation;\n            config.ipLocation = location;\n            config.guide.locationType = 'longLat';\n            config.guide.locationLongLat = location;\n            config.guide.place.name = location;\n            config.guide.coordinates = {\n                lat: ipLocation.latitude,\n                long: ipLocation.longitude\n            }; \n        }\n        else {\n            config.guide.locationPlace = 'Earth';\n            config.guide.locationType = 'place';\n            config.guide.place = { id: 'any', name: 'Earth' };\n        }\n\n    } catch(e) {            \n        config.guide.locationPlace = 'Earth';\n        config.guide.locationType = 'place';\n        config.guide.place = { id: 'any', name: 'Earth' };\n    }    \n\n    return config;\n}","import { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nconst onCloseModal = () => {\n\n    const modal = document.querySelector('#lessonModal');\n    const closer = modal.querySelector('.js-modal-footer');\n          closer.addEventListener('click', e => {\n            const contents = modal.querySelector('.js-modal-text');\n                  contents.innerHTML = `\n                    <div class=\"lesson-spinner double-centred-block\">\n                        <div class=\"icon\"><i class=\"fas fa-sun slow-spin\"></i></div>\n                    </div>\n                  `;\n            // renderLessons();\n            // const activeLesson = document.querySelector('.highlighted-for-review-row');\n            // lessonListScrollHandler.scrollToTitle(activeLesson.dataset.lessonId);\n          });\n\n      // remove subscriptions? e.g. renderScoreSummary\n\n};\n\nexport const lessonModalHandler = {\n    onCloseModal\n};","import { renderTemplate } from 'ui/helpers/templating';\n\nimport modalsTemplate from 'modals.html';\n\nexport const handleWindowResize = () => {\n\n  const setWindowHeight = () => {\n\n      const iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream; \n      const iw = (iOS) ? screen.width : window.innerWidth; \n      const ih = (iOS) ? screen.height : window.innerHeight;\n\n      const verticalHeight = window.innerHeight * 0.01;                \n\n      document.documentElement.style.setProperty('--vh', verticalHeight + 'px');\n      document.documentElement.style.setProperty('--vhGrid', verticalHeight * 100  + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlock', (verticalHeight * 7.5) + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlocks', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhStandardBlock', (verticalHeight * 10) + 'px');\n      document.documentElement.style.setProperty('--vhHalfStandardBlock', (verticalHeight * 5) + 'px');\n      document.documentElement.style.setProperty('--vhOneAndHalfStandardBlock', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhDoubleStandardBlock', (verticalHeight * 20) + 'px');\n      document.documentElement.style.setProperty('--vhCarousel', (verticalHeight * 30) + 'px');\n      document.documentElement.style.setProperty('--vhButtonBlock', (verticalHeight * 9) + 'px');\n      document.documentElement.style.setProperty('--vhRow', (verticalHeight * 11) + 'px');\n      document.documentElement.style.setProperty('--vhFixtures', (verticalHeight * 15) + 5 + 'px');\n      document.documentElement.style.setProperty('--vhCalendar', (verticalHeight * 11) + 'px');                \n\n      const fixtures = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhFixtures').replace('px', ''));\n      const largeImage = ((verticalHeight * 100) - fixtures) / 3;\n\n      document.documentElement.style.setProperty('--vhLargeImage', largeImage + 'px');\n      document.documentElement.style.setProperty('--vhSmallImageCarousel', verticalHeight * 36 + 'px');           \n      document.documentElement.style.setProperty('--vhExtraSmallImageCarousel', verticalHeight * 36    + 'px');           \n\n      const horizontalWidth = window.innerWidth * 0.01;\n\n      document.documentElement.style.setProperty('--vw', horizontalWidth + 'px');\n\n      document.documentElement.style.setProperty('--vwGrid', horizontalWidth * 100  + 'px');\n      document.documentElement.style.setProperty('--vwGridNegative', (horizontalWidth * -100) + 52  + 'px');\n      document.documentElement.style.setProperty('--vhScrollingTop', (horizontalWidth * 56.25) + (verticalHeight * 10) + 'px');\n  };\n\n  setWindowHeight();\n\n  window.addEventListener('resize', () => {\n      setWindowHeight();\n  });\n\n  snapLog('*** Global test ***');\n\n  if(window.location.origin.indexOf('learn-the-planet') > -1) {\n     snapLog('*** Live site detected ***');\n      if(window.location.protocol != 'https:') {\n          location.href =  location.href.replace(\"http://\", \"https://\");\n         snapLog(' *** Site secured ***');\n      }\n  }\n\n};\n\nexport const loadModalHTML = () => {\n\n  const template = document.createElement('template');\n        template.innerHTML = modalsTemplate;\n\n  const parent = document.querySelector('body');\n\n  renderTemplate({}, template.content, parent);\n};","import \"babel-polyfill\";\n\nimport 'bootstrap/js/dist/carousel';\nimport 'bootstrap/js/dist/modal';\nimport 'bootstrap/js/dist/dropdown';\nimport 'bootstrap/js/dist/collapse';\n\nimport 'ui/css/snapdragon-colours.css';\nimport 'ui/css/snapdragon.css';\nimport 'ui/css/common.css';\nimport 'ui/css/species-list.css';\nimport 'ui/css/snapdragon-media.css';\n// import 'ui/css/groups/modal.css';\n// import 'ui/css/groups/create-guide.css';\n// import 'ui/css/groups/test-card.css';\n// import 'ui/css/groups/species-card.css';\n\nimport { utils } from 'utils/utils';\nimport { store, persistor } from 'redux/store';\nimport { nextLesson } from 'ui/setup/next-lesson';\nimport { nextLayout } from 'ui/setup/next-layout';\nimport { nextItem } from 'ui/setup/next-item';\nimport { renderHeaders } from 'ui/fixtures/headers';\nimport { renderScore } from 'ui/fixtures/score';\nimport { renderHome } from 'ui/screens/home/home';\nimport { renderNavigation, renderLoginChanges } from 'ui/fixtures/navigation';\nimport { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { traitValuesHandler } from 'api/traits/trait-types';\nimport { initialiseConfig } from 'ui/helpers/location-helper';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderLoggedIn } from 'ui/fixtures/login';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { lessonModalHandler } from 'ui/screens/cards/test-card-modal-handler';\nimport { handleWindowResize, loadModalHTML } from 'media-helper';\nimport { snapLog, logError } from 'ui/helpers/logging-handler';\nimport * as Sentry from '@sentry/browser';\n\nconst onLoadHandler = () => {\n\n    setTimeout( async () => {\n\n      Sentry.init({ dsn: 'https://9d9d8654a6a345a3af09df89cb615bde@o136894.ingest.sentry.io/302756' });\n\n      handleWindowResize();      \n\n      const purgeData = cookieHandler.hasUserBeenAwayTooLong();\n\n      if(purgeData) {\n          persistor.purge();\n          window.location.reload(true);\n      } else {\n        const lastVisitedCookie = cookieHandler.setLastVisitedCookie(Date());\n      }\n\n      let lessonPlan;\n\n      try {\n\n          const auth = firebase.auth();\n\n          const email = 'danhartleybcn@gmail.com';\n          const password = 'sarcarsnap1929';\n\n          // auth.signInWithEmailAndPassword(email, password).then((cred) => {\n          //     console.log('login credentials: ', cred);\n          // });\n\n          const { config, counter: currentCounter, lessonPlan: statePlans, collections } = store.getState();\n\n          lessonPlan = statePlans;\n\n          config.isPortraitMode = window.matchMedia(\"(max-width: 767px)\").matches;\n          config.isLandscapeMode = !config.isPortraitMode;\n\n          const counter = currentCounter ? { ...currentCounter } : { index: null, isLessonPaused: true };\n\n          actions.boundUpdateConfig(config);\n          actions.boundStopStartLesson(counter);\n\n          if(collections && collections.length === 0) {\n              const cloudCollections = await firestore.getCollections();\n              actions.boundUpdateCollections(cloudCollections);\n          }\n\n          subscription.add(renderHeaders, 'collection', 'flow');\n          renderNavigation();\n          subscription.add(renderNavigation, 'collection', 'flow');\n          renderLoginChanges();\n          subscription.add(renderLoginChanges, 'user', 'flow');\n          subscription.add(renderLoggedIn, 'user', 'flow');\n\n          subscription.add(renderHome, 'counter', 'flow'); // avoid adding as listener on page refresh\n                  \n          subscription.add(nextItem, 'layout', 'flow');\n          subscription.add(nextLesson, 'counter', 'flow');\n          subscription.add(nextLayout, 'counter', 'flow');\n          subscription.add(renderScore, 'score', 'flow');\n          subscription.add(traitValuesHandler, 'config', 'localisation');\n\n          const updateConfig = async () => {\n              const initialisedConfig = await initialiseConfig(config);\n              actions.boundUpdateConfig(initialisedConfig);\n          };\n\n          if(!config.guide.locationType) {\n              updateConfig();\n          }\n\n          let glossary = await firestore.getDefinitionsByTaxa(['common', 'plantae', 'aves', 'fungi', 'insecta']);\n              glossary = utils.sortAlphabeticallyBy(glossary, 'term');\n          actions.boundCreateGlossary(glossary);\n\n          loadModalHTML();\n          lessonModalHandler.onCloseModal();\n\n      }\n      catch(e) {\n          console.log('home page error: ', e)\n          // persistor.purge();\n          // window.location.reload(true);        \n      }\n    });\n\n    window.snapLog = snapLog;\n    window.logError = logError;\n};\n\nonLoadHandler();","import * as R from 'ramda';\nimport { utils } from 'utils/utils';\n\nlet root = '';\n\nconst formatUrl = (name, root, encode) => {\n    let binomial = name;\n    if(name.indexOf(' ') > 0) {\n        let ranks = name.split(' ');\n        binomial = ranks[0] + ' ' + ranks[1];\n        if(binomial.indexOf('Speckled wood') > -1) {\n            binomial += ' ' + ranks[2];\n        }\n    }    \n    return root + encode(binomial);\n};\n\nasync function fetchWiki(name, missingMessage) {\n    \n    if(name === undefined) {\n        return missingMessage;  \n    }\n\n    const url = formatUrl(name, root, utils.encodeQuery);\n    const config = { \n        method: 'GET'\n    };\n    \n    try { \n        const response = await fetch(url, config);\n        const data = await response.json();        \n        return R.flatten(data);        \n    } catch (e) {\n        const errorPromise = new Promise((resolve, reject) => {\n            resolve(missingMessage)\n        });\n        return errorPromise;\n    }    \n};\n\nconst cleanEntry = str => {\n    let cleaned = str;\n    cleaned = cleaned.replace('( or UK: , US: )', '');\n    cleaned = cleaned.replace('(;', '(');\n    cleaned = cleaned.replace('()', '');\n    cleaned = cleaned.replace('( ', '(');\n    cleaned = cleaned.replace('  ', ' ');\n    return cleaned;\n};\n\nconst wikiLink = entry => {\n    const src = cleanEntry(entry).replace('.wikipedia', '.m.wikipedia');\n    return `<span data-toggle=\"modal\" data-target=\"#wikiModal\" data-src=\"${src}\" class=\"underline-link\">Wiki modal</span>`;    \n};\n\nconst formatWiki = (entry) => {\n\n    const exceptions = ['Tarragon', 'Apple'];\n\n    if(R.contains(entry[0], exceptions)) {\n        return `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    }\n\n    if(!entry) return '';\n    let html = '';\n    if(entry.length === 1) {\n        html += wikiLink(entry[0]);\n    }\n    if(entry[1]) html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[1])}'</li>`;\n    if(entry[2])\n        if(entry[2].indexOf('https')!== -1) html += wikiLink(entry[2]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    if(entry[3]) \n        if(entry[3].indexOf('https')!== -1)\n        html += wikiLink(entry[3]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[3])}'</li>`;\n    return html;\n};\n\nasync function renderWiki(wikiNode, item, language) {\n    const binomial = item.name;\n    const wikiSearchTerm = item.names ? item.names.filter(name => name.language === language).find(name => name.wikiSearchTerm) : null;\n    const searchTerm = wikiSearchTerm ? wikiSearchTerm.vernacularName : (item.searchTerms \n                            ? item.searchTerms.filter(term => term.language === language)[0].searchTerm \n                            : binomial);\n    root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=1&search=`;\n    const exceptions = [ 'Artemisia dracunculus', 'Malus domestica', 'Zingiber officinale'];\n    if(R.contains(item.name, exceptions)) {\n        root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=2&redirects=resolve&search=`;\n    }    \n    wikiNode.innerHTML = \"\";\n\n    const entry = await fetchWiki(searchTerm);\n\n    if(entry && entry[2]) {\n        wikiNode.innerHTML = formatWiki(entry.slice(1));\n    } else {\n        if(!binomial) return '';\n        const genus = binomial.split(' ')[0];\n        const genusEntry = await fetchWiki(genus);\n        if(genusEntry[2] !== '')\n            wikiNode.innerHTML = formatWiki(genusEntry.slice(1));\n        else if (language !== 'en') {\n            renderWiki(wikiNode, binomial, 'en');\n        }\n    }\n}\n\nexport {\n    formatUrl, \n    formatWiki,\n    renderWiki\n};"],"sourceRoot":""}