{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/utils.js","webpack:///./src/ui/screens/common/audio-media-template.html","webpack:///./src/ui/screens/lists/lesson-template.html","webpack:///./src/ui/screens/landscape/specimen-tiles-template.html","webpack:///./src/ui/screens/common/image-slider-template.html","webpack:///./src/ui/screens/common/rights-attribution-template.html","webpack:///./src/ui/screens/common/look-alikes-link-template.html","webpack:///./src/ui/screens/common/linked-taxa-lookalike-template.html","webpack:///./src/ui/screens/common/linked-taxa-relationship-template.html","webpack:///./src/ui/screens/common/id-box-template.html","webpack:///./src/ui/screens/common/info-detail-slider-template.html","webpack:///./src/ui/screens/common/info-slider-template.html","webpack:///./src/ui/screens/common/inat-box-template.html","webpack:///./src/ui/screens/common/calendar-template.html","webpack:///./src/ui/screens/common/taxa-box-template.html","webpack:///./src/ui/screens/common/badge-template.html","webpack:///./src/ui/screens/cards/card-template.html","webpack:///./src/ui/screens/cards/taxon-card-template.html","webpack:///./src/ui/screens/cards/non-taxon-card-template.html","webpack:///./src/ui/screens/lists/species-table-template.html","webpack:///./src/ui/screens/home/home-lesson-intro-video-template.html","webpack:///./src/ui/screens/lists/species-list-definition-insert.html","webpack:///./src/ui/screens/progress/score-summary-template.html","webpack:///./src/ui/screens/progress/score-summary-row-template.html","webpack:///./src/ui/screens/progress/score-summary-no-row-template.html","webpack:///./src/ui/screens/cards/test-card-template.html","webpack:///./src/ui/screens/common/language-selection-template.html","webpack:///./src/ui/create-guide-modal/species-search-options-template.html","webpack:///./src/ui/create-guide-modal/location-template.html","webpack:///./src/ui/create-guide-modal/inat-user-template.html","webpack:///./src/ui/create-guide-modal/categories-template.html","webpack:///./src/ui/create-guide-modal/species-in-guide-editor-template.html","webpack:///./src/ui/create-guide-modal/species-editor-template.html","webpack:///./src/ui/create-guide-modal/species-picker-template.html","webpack:///./src/ui/create-guide-modal/species-search-template.html","webpack:///./src/ui/create-guide-modal/species-summary-template.html","webpack:///./src/ui/create-guide-modal/common/actions-template.html","webpack:///./src/ui/fixtures/glossary-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-filters-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-questions-template.html","webpack:///./src/ui/quick-fire-modal/quick-fire-summary-template.html","webpack:///./src/ui/screens/lists/lesson-list-header-template.html","webpack:///./src/ui/screens/home/home-lesson-intro-text-template.html","webpack:///./src/ui/screens/lists/lesson-edit-template.html","webpack:///./src/ui/screens/lists/lesson-list-template.html","webpack:///./src/ui/fixtures/settings-template.html","webpack:///./src/ui/fixtures/login-template.html","webpack:///./src/ui/fixtures/logout-template.html","webpack:///./src/ui/fixtures/language-template.html","webpack:///./src/ui/fixtures/navigation-portrait-template.html","webpack:///./src/ui/fixtures/navigation-left-template.html","webpack:///./src/ui/fixtures/navigation-right-template.html","webpack:///./src/ui/screens/text-entry/text-entry-templates.html","webpack:///./src/ui/screens/text-entry/text-entry-portrait-templates.html","webpack:///./src/ui/screens/multichoice/multi-strips-template.html","webpack:///./src/ui/screens/multichoice/multi-strips-with-images.html","webpack:///./src/ui/screens/text-entry/text-complete-template.html","webpack:///./src/ui/screens/cards/cultivar-card-template.html","webpack:///./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question-template.html","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html","webpack:///./src/ui/screens/multichoice/horizontal-strips.html","webpack:///./src/ui/screens/home/home-template.html","webpack:///./src/modals.html","webpack:///./src/ui/css/snapdragon-colours.css?5b4a","webpack:///./src/ui/css/snapdragon-colours.css","webpack:///./src/ui/css/snapdragon.css?662e","webpack:///./src/ui/css/snapdragon.css","webpack:///./src/ui/css/common.css?6547","webpack:///./src/ui/css/common.css","webpack:///./src/ui/css/species-list.css?1eb5","webpack:///./src/ui/css/species-list.css","webpack:///./src/ui/css/snapdragon-media.css?6f1e","webpack:///./src/ui/css/snapdragon-media.css","webpack:///./src/ui/css/groups/create-guide.css?c551","webpack:///./src/ui/css/groups/create-guide.css","webpack:///./src/redux/actions/action-types.js","webpack:///./src/snapdragon-config/lesson-config.js","webpack:///./src/redux/reducers/config-reducer.js","webpack:///./src/redux/reducers/species-reducers.js","webpack:///./src/redux/reducers/initial-state/initial-progress-state.js","webpack:///./src/redux/reducers/lesson-reducers.js","webpack:///./src/redux/reducers/quick-fire-reducers.js","webpack:///./src/redux/store.js","webpack:///./src/redux/reducers/progress-reducers.js","webpack:///./src/redux/reducers/layout-reducers.js","webpack:///./src/redux/middleware/logger.js","webpack:///./src/ui/dom.js","webpack:///./src/snapdragon-engine/round-plan-handler.js","webpack:///./src/api/botanical-latin.js","webpack:///./src/ui/helpers/data-checking.js","webpack:///./src/ui/helpers/traits-handler.js","webpack:///./src/api/traits/traits-for-tests.js","webpack:///./src/snapdragon-engine/bonus/tests/trait-test.js","webpack:///./src/snapdragon-engine/bonus/tests/birdsong-test.js","webpack:///./src/admin/api/enums.js","webpack:///./src/api/firebase/firestore.js","webpack:///./src/api/firebase/credentials.js","webpack:///./src/snapdragon-engine/bonus/tests/lookalike-test.js","webpack:///./src/api/snapdragon/iconic-taxa.js","webpack:///./src/snapdragon-engine/bonus/tests/definition-test.js","webpack:///./src/snapdragon-engine/bonus/bonus-test-handler.js","webpack:///./src/snapdragon-engine/provider/provider-test-handler.js","webpack:///./src/redux/actions/action-creators.js","webpack:///./src/ui/helpers/class-behaviour.js","webpack:///./src/ui/helpers/test-handler.js","webpack:///./src/ui/helpers/enum-helper.js","webpack:///./src/ui/screens/lists/lesson-state-helper.js","webpack:///./src/ui/helpers/templating.js","webpack:///./src/ui/screens/common/rights-attribution.js","webpack:///./src/ui/screens/common/image-slider.js","webpack:///./src/ui/helpers/image-handler.js","webpack:///./src/ui/helpers/icon-handler.js","webpack:///./src/xeno-canto/birdsong.js","webpack:///./src/ui/screens/common/look-alikes.js","webpack:///./src/ui/screens/common/linked-taxa.js","webpack:///./src/ui/screens/common/info-detail-slider.js","webpack:///./src/ui/screens/common/info-slider.js","webpack:///./src/geo/geo.js","webpack:///./src/api/inat/inat.js","webpack:///./src/wikipedia/wiki-modal.js","webpack:///./src/ui/screens/common/inat-box.js","webpack:///./src/ui/screens/common/calendar.js","webpack:///./src/api/snapdragon/infraspecifics.js","webpack:///./src/ui/screens/common/taxa-box.js","webpack:///./src/ui/screens/common/badge.js","webpack:///./src/ui/screens/cards/card.js","webpack:///./src/ui/screens/cards/taxon-card.js","webpack:///./src/api/traits/trait-types.js","webpack:///./src/api/glossary/lichen.js","webpack:///./src/api/snapdragon/non-taxa.js","webpack:///./src/ui/screens/cards/non-taxon-card.js","webpack:///./src/ui/screens/lists/species-table.js","webpack:///./src/ui/screens/lists/video-handler.js","webpack:///./src/ui/screens/home/home-lesson-intro-video.js","webpack:///./src/ui/screens/lists/species-list-definition-insert.js","webpack:///./src/ui/screens/lists/species-list.js","webpack:///./src/ui/helpers/collection-handler.js","webpack:///./src/ui/screens/lists/lesson-state-handler.js","webpack:///./src/ui/screens/progress/score-summary-handler.js","webpack:///./src/ui/screens/progress/score-summary.js","webpack:///./src/ui/screens/cards/test-card.js","webpack:///./src/ui/screens/common/language-selection.js","webpack:///./src/ui/helpers/inat-autocomplete.js","webpack:///./src/ui/create-guide-modal/common/snapdragon-switch.js","webpack:///./src/ui/create-guide-modal/location.js","webpack:///./src/ui/create-guide-modal/inat-user.js","webpack:///./src/snapdragon-config/snapdragon-iconic-taxa.js","webpack:///./src/ui/create-guide-modal/species-in-guide-editor.js","webpack:///./src/ui/create-guide-modal/species-editor.js","webpack:///./src/ui/create-guide-modal/species-search.js","webpack:///./src/ui/create-guide-modal/create-guide.js","webpack:///./src/ui/create-guide-modal/species-search-options.js","webpack:///./src/ui/create-guide-modal/species-picker.js","webpack:///./src/ui/create-guide-modal/categories.js","webpack:///./src/ui/create-guide-modal/common/save-guide.js","webpack:///./src/ui/quick-fire-modal/quick-fire-api.js","webpack:///./src/ui/quick-fire-modal/quick-fire-ui.js","webpack:///./src/ui/quick-fire-modal/quick-fire-logic.js","webpack:///./src/ui/quick-fire-modal/quick-fire.js","webpack:///./src/ui/screens/lists/lesson.js","webpack:///./src/ui/screens/home/home-lesson-intro-text.js","webpack:///./src/ui/screens/home/home-lesson-intro.js","webpack:///./src/ui/screens/lists/lesson-edit.js","webpack:///./src/ui/screens/lists/lesson-list-scroll-handler.js","webpack:///./src/ui/screens/lists/lesson-list-event-handler.js","webpack:///./src/ui/screens/lists/lesson-custom.js","webpack:///./src/ui/screens/lists/lesson-list.js","webpack:///./src/ui/helpers/cookie-handler.js","webpack:///./src/ui/screens/lists/lesson-list-header.js","webpack:///./src/ui/fixtures/settings.js","webpack:///./src/ui/fixtures/login.js","webpack:///./src/ui/fixtures/language.js","webpack:///./src/ui/fixtures/navigation.js","webpack:///./src/ui/screens/text-entry/text-entry.js","webpack:///./src/snapdragon-engine/pool-handler.js","webpack:///./src/ui/screens/multichoice/multi-strips.js","webpack:///./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question.js","webpack:///./src/ui/screens/bonus/bonus-test.js","webpack:///./src/ui/screens/landscape/specimen-tiles.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question.js","webpack:///./src/ui/screens/multichoice/horizontal-strips.js","webpack:///./src/ui/helpers/function-lookups.js","webpack:///./src/ui/screens/cards/non-taxon-card-specimen-tiles.js","webpack:///./src/ui/screens/text-entry/species-text-entry.js","webpack:///./src/ui/screens/progress/summary.js","webpack:///./src/ui/screens/progress/history.js","webpack:///./src/ui/screens/text-entry/text-complete.js","webpack:///./src/ui/screens/cards/cultivar-card.js","webpack:///./src/ui/screens/bonus/bonus-specimen-tiles.js","webpack:///./src/ui/screens/media/landscape/media-players.js","webpack:///./src/redux/subscriptions.js","webpack:///./src/redux/observe-store.js","webpack:///./src/ui/helpers/score-handler.js","webpack:///./src/ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler.js","webpack:///./src/snapdragon-config/screen-layouts.js","webpack:///./src/snapdragon-config/screen-panels.js","webpack:///./src/snapdragon-engine/round-planner.js","webpack:///./src/snapdragon-engine/lesson-plan-handler.js","webpack:///./src/snapdragon-engine/lesson-planner.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-custom.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-fungi.js","webpack:///./src/snapdragon-config/plans/landscape/landscape-static.js","webpack:///./src/snapdragon-config/plans/portrait/portrait-static.js","webpack:///./src/snapdragon-config/lesson-plans.js","webpack:///./src/ui/setup/setup-handler.js","webpack:///./src/ui/setup/next-lesson.js","webpack:///./src/ui/setup/next-layout.js","webpack:///./src/ui/setup/next-item.js","webpack:///./src/ui/fixtures/headers.js","webpack:///./src/ui/fixtures/score.js","webpack:///./src/ui/screens/home/home.js","webpack:///./src/ui/helpers/location-helper.js","webpack:///./src/ui/screens/cards/test-card-modal-handler.js","webpack:///./src/media-helper.js","webpack:///./src/ui/helpers/logging-handler.js","webpack:///./src/index.js","webpack:///./src/wikipedia/wiki.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Array","concatAll","results","this","forEach","subArray","element","timer","sink","delay","id","Bacon","fromBinder","setInterval","onValue","shuffleArray","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","getCellValue","tr","idx","headerSortIndex","wide","children","filter","child","classList","join","indexOf","dataset","snapIndex","querySelector","vernacularName","innerText","textContent","utils","encodeQuery","q","undefined","Number","isInteger","encodeURIComponent","trim","randomiseSelection","source","required","zeroBased","selection","arr","concat","map","item","index","onlyUnique","self","sortBy","prop","dir","sort","a","b","parseFloat","sortAlphabeticallyBy","calcItemIndex","offSet","moduleSize","capitaliseFirst","str","substr","toUpperCase","toLowerCase","capitaliseAll","split","charAt","substring","makeSortable","document","callback","from","querySelectorAll","sp","addEventListener","names","th","parentElement","table","closest","tbody","footer","snapLog","comparer","asc","v1","v2","isNaN","toString","localeCompare","parentNode","appendChild","cells","flatten","reduce","accumulator","currentValue","getObservableMonths","date","daysAway","when","days","dateFromDays","direction","setDate","getDate","startMonth","getMonth","thisMonth","endMonth","getMonthName","month","Date","toLocaleString","months","getRandomInt","max","createSessionToken","replace","getRandomObjectProperty","obj","keys","constructor","toCamelCase","sentenceCase","out","el","add","fromCamelCase","parseToLowerCase","content","options","transform","locals","___CSS_LOADER_API_IMPORT___","types","config","language","callbackTime","callbackDelay","excludeRevision","isPortraitMode","isLandscapeMode","collection","languages","lang","guide","iconicTaxa","locationLongLat","locationPlace","locationType","place","speciesRange","inatId","type","param","season","perPage","noOfRecords","resetScore","total","correct","taxon","binomial","answer","success","incorrect","question","fails","passes","answers","statement","totalPassPoints","totalPoints","progressState","score","initialState","currentRound","rounds","isNextRound","cleanAndReturnIncomingState","state","quickFire","onClickFiltersLinkListeners","onClickGlossaryLinkListeners","reducer","combineReducers","counter","action","payload","isLessonRehydrated","isLessonPaused","isLessonSelected","layoutCount","lesson","isCustomLessonPausedOverride","lessonPlans","lessonPlan","layout","screens","prevItemIndex","itemIndex","initialConfig","coordinates","lessons","savedLessonNames","R","layoutName","layoutCounter","isLevelComplete","isLessonComplete","level","levels","getNextRound","nextItem","items","updateCollection","allItems","isDeselected","bonus","totalFailPoints","points","itemId","questionText","questionTotal","passesTotals","failsTotals","bonusScores","guid","collections","cols","col","selected","isActive","isCollectionUpdate","history","scores","historyCorrect","historyTotal","videoPlayer","enums","bonusLayout","user","glossary","userAction","persistConfig","storage","persistedReducer","persistReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","logger","next","thunk","persistor","persistStore","DOM","leftGrid","getElementsByClassName","leftHeader","leftBody","leftFooter","leftHeaderTxt","specimenRptr","rightGrid","rightHeader","rightHeaderTxt","rightHeaderScoreTxt","rightBody","rightRptrSummary","rightBodyBottom","rightFooter","roundHandler","getRoundItems","start","end","epithets","species","genus","getTrait","formatter","traits","trait","entries","acc","curr","statsReducer","elem","itemProperties","getVernacularName","useShortForm","namePart","shortForm","englishShortForm","find","languageSortForm","englishNames","english","capitalisedNames","e","console","error","message","getSpeciesName","getNestedTaxonProp","prop1","prop2","prop1Value","prop2Value","trimLatinName","getActiveTrait","option","traitName","getVernacularNames","getFamilyStats","taxonomy","family","getRootTraitValue","traitValue","drop","pattern","parts","match","dropStarters","starter","rootTraitValue","part","getTraitValues","enumKey","getTraitByKey","traitKey","hasTraitPropeties","handleUnit","unit","doArraysHaveSameValues","isEmpty","symmetricDifference","traitsHandler","getRandomTrait","traitsToIgnore","allowedTraits","contains","getTraitsPoolForUnits","traitsPool","help","getTraitsPoolForRoles","role","getTraitsPool","traitValues","getSetOfTraitAnswers","pool","traitSet","take","sets","set","getTraitValueByKey","getLinkedTaxaTraits","taxaTraits","getTraitsToExclude","convertTraitsToNameValuePairsArray","traitsToExclude","includedTraits","lookalike","description","symbiont","getNMultiplesFromArray","arra","arra_size","result_set","x","pow","getTraitTests","itemsInThisRound","getTraitsForTests","alreadyTestedTraits","excludedTraits","et","overrides","typedItemTraits","getState","getBirdsongTests","getBirdsongTest","birdsong","birds","bird","birdNames","DESCRIPTION","CIRCUMFERENCE","EXPOSURE","CAP_SHAPE","CAP_COLOUR","CAP_DIAMETER","CAP_WIDTH","CAP_HEIGHT","SHELF_WIDTH","SHELF_THICKNESS","ECO_TYPE","HOW_EDIBLE","HYMENIUM_TYPE","SPORE_PRINT_COLOUR","STIPE_CHARACTER","STIPE_LENGTH","STIPE_WIDTH","STIPE_COLOUR","GILL_ATTACHMENT","FLESH","STEM_CHARACTER","GILL_COLOUR","TRUNK_COLOUR","SUBSTRATE","THALLUS_TYPE","RHIZINE_TYPE","DISC_WIDTH","LOBE_WIDTH","LOBE_LENGTH","LOBE_DIAMETER","ROLE","NATIVE","NATIVE_TO","SYMBIOSIS","ASSOCIATE","SYMBIONTS","LOOKALIKES","ECOLOGY","HABITAT","TROPHIC_LEVEL","ORGANISATION","SMELL","FRUIT_TYPE","FRUIT_WIDTH","FRUIT_HEIGHT","FRUIT_DIAMETER","FRUIT_LENGTH","FRUIT_COLOUR","FRUIT_TEXTURE","BRANCH_TEXTURE","FRUIT_SURFACE","SEED_DISPERSAL","VITAMINS","STAMEN_COUNT","STYLE_COUNT","LEAFLET_COUNT","LOBE_COUNT","LEAFLET_LENGTH","LEAFLET_WIDTH","GROUPING","MEDICINAL_PROPERTIES","COLOUR","USAGE","FORM","LIFE_SPAN","GERMINATION","ACTIVE","SUBSTRATE_ADHERANCE","RANK","SIZE","LENGTH","VOICE","HEIGHT","WEIGHT","REPRODUCTION","ASEXUAL_REPRODUCTION","DISPLAY","BEHAVIOUR","CHARACTERISTIC","COMMUNICATION","SHELTER","DISEASE","THREAT","FOOD","SEXUAL_DIMORPHISM","WING_SPAN","TREE_SHAPE","CROWN_SHAPE","LEAF_DIVISION","LEAFLET_DIVISION","LEAF_BLADE","LEAF_VARIATION","LEAF_SHAPE","JUVENILE_LEAF_SHAPE","LEAF_MARGIN","LEAF_ARRANGEMENT","LEAF_ATTACHMENT","LEAF_LENGTH","AWN_LENGTH","JUVENILE_LEAF_LENGTH","LEAF_WIDTH","LEAF_COLOUR","LEAF_SURFACE","LEAF_ABOVE_SURFACE","LEAF_BELOW_SURFACE","LEAF_TEXTURE","JUVENILE_TEXTURE","howEdible","CHOICE","EDIBLE","INEDIBLE","POISONOUS","DEADLY","TOXIC","habitat","WOOD","WOODLAND","WOODLAND_LITTER","GRASSLAND","SOIL","VEGETATION","DUNG","DUNES","WIDESPREAD","DEAD_WOOD","WASTELAND","MEADOW","FIELDS","MOSS","PASTURE","BARK","SHOOTS","COMMONS","HEATH","ORCHARDS","HEDGEROWS","LAWNS","RINGS","DAMP","TREE_BASE","FOREST_EDGE","PARKS","TRUNKS","STUMPS","ROCKS","FENCES","TREES","SHRUBS","SHRUBLAND","MARSHLAND","EXPOSED_WOOD","BRANCHES","HILLS","URBAN","VALLEYS","MAQUIS","SAVANNA","FOREST_STEPPE","MEADOW_STEPPE","BOREAL","SCRUB","WALLS","MOORLAND","COAST","BRUSH","WATER","SNOW","NO_SNOW","CONIFERS","BROAD_LEAF","PINE","BEECH","OAK","DITCH","WET_MEADOW","LAKESIDE","RIPERIAN","WETLANDS","ecologicalType","SAPROTROPHIC","PARASITIC","MYCORRHIZAL","PLANT_PATHOGEN","capShape","CAMPANULATE","CONICAL","CONVEX","DEPRESSED","FLAT","INFUNDIBULIFORM","OFFSET","OVATE","UMBILLICATE","UMBONATE","POTATO_SHAPED","NA","SPHERICAL","PEAR_SHAPED","BRAIN_LIKE","HONEYCOMB","HEMI_SPHERICAL","treeEcology","BIRCH","DECIDUOUS","SOFTWOOD","HARDWOOD","MIXED_WOODLAND","CONIFEROUS","ELM","ASH","SYCAMORE","ASPEN","ELDER","CHESTNUT","HARDWOODS","PRUNUS","PYRUS","SALIX","ROBINIA","CERATONIA","EUCALYPTUS","SWEET_CHESTNUT","POPLAR","CORK","FIR","SPRUCE","PLANE","WILLOW","MAPLE","LARCH","CEDAR","YEW","TURKEY_OAK","HAWTHORN","BUSH","SHRUB","hymeniumType","GILLS","PORES","GLEBA","SMOOTH","TEETH","RIDGES","FALSE_GILLS","associate","ALGA","CYNOBACTERIUM","FUNGUS","thallusType","FOLIOSE","FRUTICOSE","CRUSTOSE","SQUAMULOSE","LEPROSE","EPIPHYTE","rhizineType","SPARSE","HAPTER","substrate","HIGH","MEDIUM","LOW","VARIABLE","medicinalProperties","ANTIVIRAL","ANTISEPTIC","ANTI_INFLAMMATORY","ANTIBIOTIC","ANLAGESIC","ANTIBACTERIAL","ANTICOAGULANT","ANTIFUNGAL","ph","ACIDIC","ALKALINE","NEUTRAL","colour","LILAC","BUFF","WHITE","YELLOW","DARK_GREEN","GREEN","WHITE_GREEN","BRIGHT_GREEN","OLIVE_GREEN","BRIGHT_YELLOW_GREEN","YELLOW_GREEN","YELLOW_BROWN","PURPLE_BROWN","GREY_BROWN","DARK_YELLOW","DARK_RED","DARK_PINK","ORANGE","SCARLET","BLOOD_RANGE","RED","RED_BROWN","ORANGE_RED","GREY","PALE_GREY","PALE_BROWN","GREY_GREEN","GREY_WHITE","BROWN","CHESTNUT_BROWN","PAPER_BROWN","BLACK","BLUE","PALE_BLUE","BLUE_BLACK","JET_BLACK","BLUE_GREEN","VIOLET","BURGUNDY","PALE_VIOLET","VIOLET_PURPLE","PALE_GREEN","PALE_YELLOW","PALE_YELLOW_GREEN","PALE_GREY_GREEN","GLAUCOUS","GREY_YELLOW","ORANGE_YELLOW","CREAM","CHALKY","PINK","PALE_PINK","PURPLE","PALE_PURPLE","DARK_PURPLE","TAN","DARK_BROWN","HONEY","RED_PURPLE","usage","PERFUMERY","TANNING","DYING","BREWING","WINE","COFFEE","TEA","BIRDS_NEST","POISON","FODDER","FORAGE","GREEN_MANURE","MEDICINE","FUR","TIMBER","PEST_CONTROL","HERB","SPICE","ESSENTIAL_OIL","MORDANT","ASTRINGENT","nonTaxaType","NITROGEN","SULPUR_DIOXIDE","leafBlade","SIMPLE","COMPOUND","leafDivision","PALMATE","COMPOUND_PALMATE","PALMATELY_LOBED","PINNATE","COMPOUND_PINNATE","ODD_PINNATE","EVEN_PINNATE","BIPINNATE","COMPOUND_BIPINNATE","TRIFOLIATE","PINNATIFID","TRIPINNATE","IMPARIPINNATE","PARIPINNATE","leafletDivision","leafVariation","HOMOBLASTIC","HETEROBLASTIC","shape","LINEAR","OBLANCEOLATE","OBOVATE","ACICULAR","ACUMINATE","ACUTE","APICULATE","ATTENUATE","AURICULATE","ASYMMETRICAL","CAUDATE","CORDATE","CUNEATE","CUSPIDATE","DELTOID","DIGITATE","ELLIPTIC","ENSIFORM","EMARGINATE","FALCATE","FENESTRATE","FILIFORM","FLABELLATE","HASTATE","LACINIATE","LANCEOLATE","LAMINAR","reproduction","SELF_POLLINATION","CROSS_POLLINATION","asexualReproduction","BUDDING","FRAGMENTATION","FISSION","SPORE_FORMATION","VEGETATIVE_PROPAGATION","leafArrangement","ALTERNATE","BASAL","CAULINE","OPPOSITE","WHORLED","ROWS","SPIRAL","OVERLAPPING","INCURVED","DECUSSATE","leafAttachment","SESSILE","SUBSESSILE","PEDICELLATE","leafMargin","ENTIRE","CILIATE","CRENATE","DENTATE","DENTICULATE","DOUBLY_SERRATE","SERRATE","SERRULATE","SINUATE","LOBATE","UNDULATE","SPINY","food","GRASS","ROTTEN_FRUIT","NECTAR","HONEYDEW","SEEDS","NUTS","GRAINS","BERRIES","HERBAGE","SWARD","LEAVES","ROOTS","TUBERS","RHIZOMES","BULBS","hibernatingStage","ADULT","CATERPILLAR","PUPA","symbiosis","MUTUALISM","COMMENSALISM","PREDATION","PARASITISM","HERBIVORY","COMPETITION","ECTOMYCORRHIZAL","COMPANION","POLLINATION","SEED_PREDATION","trophicLevel","PRIMARY_PRODUCER","PRIMARY_CONSUMER","SECONDARY_CONSUMER","OMNIVORE","TERTIARY_CONSUMER","APEX_PREDATOR","shelter","DREY","BURROW","DEN","WARREN","SETT","ROOKERY","LODGE","DAM","NEST","active","CREPUSCULAR","DIURNAL","NOCTURNAL","MATUTINAL","VESPERTINE","juvenile","KIT","SQUEAKER","CUB","KITTEN","CHICK","PUP","CALF","DUCKLING","EYAS","MAGGOT","KID","GOSLING","LEVERET","NYMPH","LARVA","SALAMANQUESA","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER","female","VIXEN","DOE","JILL","BITCH","SOW","HEN","DUCK","GOOSE","PEN","male","BUCK","DOG","BOAR","TOM","JACK","COCK","DRAKE","REYNARD","TOD","TERCEL","GANDER","COB","diet","HERBIVORE","CARNIVORE","XYLOPHAGOUS","POLYPHAGOUS","fungusMarginType","APPENDICULATE","STRIATE","PLICATE","RIMMOSE","ERODED","INROLLED","soilType","SILICEOUS","CALCAREOUS","NITROGENOUS","NUTRIENT_POOR","WELL_DRAINED","WELL_WATERED","LOAM","CHALK","SAND","RICH","MOIST","organisation","EUSOCIAL","SOCIAL","SOLITARY","MATRIARCHY","INDICATOR","KEYSTONE","FOUNDATION","SPECIALIST","GENERALIST","PIONEER","INVASIVE","DOMINANT","POLLINATOR","PREDATOR","GRANIVORE","MUCIVORE","PREY","COMPETITOR","HOST","CARRIER","RUDERAL","SUPERTRAMP","SYMBIONT","OCCUPANT","PARASITE","COLONISER","EARLY_SUCCESSION","FERTILISATION","PROPAGATION","BIOINDICATOR","STRANGLER","FOOD_SOURCE","EPIPHYTIC","EPIPHYTIC_STRANGLER","NUTRIENT_CYCLING","CARBON_DIOXIDE_PRODUCTION","MYCOREMEDIATION","fruitType","DRUPE","POME","BERRY","AGGREGATE_FRUIT","LEGUME","CAPSULE","NUT","GRAIN","MULTIPLE_FRUIT","SAMARA","ACHENE","POD","ARIL","SYCONIUM","FOLLICLE","SILIQUE","inflorescence","CATKIN","UMBEL","RACEME","CORYMB","SPIKE","SPADEX","SINGLE","PANICLE","CYMOSE","BRANCHED_SPIKE","umbelType","TERMINAL","display","DIEMATIC","SEXUAL_COLOUR_DIMORPHISM","NO_SEXUAL_COLOUR_DIMORPHISM","NO_SEXUAL_DIMORPHISM","MELANISTIC","behaviour","SEXUAL_CANNIBALISM","MONANDROUS","VOCALISATION","CRYPSIS","HOARDING","HIBERNATION","GAME_PLAYING","PLAYFUL","TERRITORIAL","NON_TERRITORIAL","BIPARENTAL_CARE","COOPERATIVE_BREEDING","TOOL_MAKING","PROBLEM_SOLVING","DIVISION_OF_LABOUR","SUPERORGANISM","ANAUTOGENY","MASS_PROVISIONING","PRECOCIAL","ALTRICIAL","AUTOTOMIC","ECTOTHERMIC","ADHESION","POLYPHYODONT","VIVIPAROUS","REGURGITATION","MULTIVOLTINE","BIVOLTINE","UNIVOLTINE","SEMIVOLTINE","METAMORPHOSIS","RUTTING","WHELPING","FARROWING","SWIMMING","DECUMBENT","ETHYLENE_RIPENING","MIGRATORY","sense","SIGHT","MOVEMENT","SPATIAL","MEMORY","ECHOLOCATION","crypsis","CAMOUFLAGE","NOCTURNALITY","SUBTERRANEAN","MIMICRY","VISUAL","OLFACTORY","AUDITORY","allochory","ANEMOCHORY","HYDROCHORY","ZOOCHORY","ANTHROPOCHORY","reproductiveContainer","CONE","communication","POSTURING","matingSystem","POLYGYNOUS","MONOGAMOUS","physiology","NEGATIVE_ALLELOPATHY","POSITIVE_ALLELOPATHY","C3_CARBON_FIXATION","NITROGEN_FIXING","DORMANCY","EVERGREEN","ADVENTITIOUS","NYCTINASTY","XEROMORPHIC","SUCCULENT","DROUGHT_TOLERANT","FIRE_TOLERANT","FIRE_RESISTANT","POLLUTION_TOLERANT","PH_TOLERANT","SALT_TOLERANT","FROST_TOLERANT","HEAT_TOLERANT","NITROGEN_TOLERANT","HEAVY_METAL_TOLERANT","ACID_RAIN_TOLERANT","COMPACT_SOIL_TOLERANT","FLORAL_SCENT","AROMATIC","MONOCARPIC","POLYCARPIC","PYROPHYTIC","SEROTINOUS","STYPTIC","BIOLUMINESCENCE","collective","SOUNDER","SLOTH","MURMURATION","PACK","ecology","DIGGING","SCRAPING","ROOTING","SCAVENGING","characteristic","PERENNIAL","ANNUAL","BIENNIAL","HERBACEOUS","DIOECIOUS","MONOECIOUS","SYNOECIOUS","PERFECT","COMPLETE","DICOTYLEDON","MONOCOTYLEDON","CAULIFLORY","RAMIFLORY","PUBESCENT","CHAMAEPHYTE","FIBROUS_ROOT_SYSTEM","TAPROOT_SYSTEM","KIN_SELECTION","BROADLEAF","AERIAL_ROOTS","EPICORMIC_ROOTS","BASAL_ROOTS","RUNNER","CLIMBER","BUTTRESS_ROOT","MONOPODIAL","APICAL_DOMINANCE","POLYMORPHIC","CRYPTIC_SPECIES_COMPLEX","RHIZOMORPHS","GEOPHYTE","RICTAL_BRISTLES","DEHISCENCE","EXPLOSIVE_DEHISCENCE","RESIN_CANAL","APOSEMATIC","climate","HOT","DRY","TEMPERATE","COOL","TROPICAL","CONTINENTAL","pollination","ALLOGAMY","ANEMOPHILY","HYDROPHILY","ENTOMOPHILY","AMBOPHILY","MELITTOPHILY","PSYCHOPHILY","PHALAENOPHILY","SONICATION","GENERALISED_SYNDROME","CLEISTOGAMY","stipeCharacter","RING","RING_AND_VOLVA","BARE","SHORT","STUMPY","CLUB_LIKE","WARTS","HOLLOW","PRUINOSE","PARTIAL_VEIL","stemCharacter","TERETE","HAIRY","FARINOSE","SCURFY","VISCOUS","PUNCTATE","PAPILLATE","TUBERCULATE","RUGOSE","GLABROUS","gillAttachment","ADNATE","ADNEXED","DECURRENT","FREE","Seceding","SUBDECURRENT","grouping","LARGE_GROUPS","CLUSTERS","LARGE_CLUSTERS","SCATTERED_CLUSTERS","FAIRY_RINGS","GREGARIOUS","NUMEROUS","propagation","SUCKERS","STOLONS","CORMS","PLANTLETS","KEIKIS","APOMIXIS","seedDispersal","AUTOCHORY","exposure","FULL_SUN","PARTIAL_SUN","PARTIAL_SHADE","SHADE","nutType","ACORN","HAZELNUT","surface","TOMENTOSE","texture","LEATHERY","FLESHY","GLOSSY","WOOLY","SCALY","ROUGH","VELVETY","treeShape","COLUMNAR","OPEN_HEAD_IRREGULAR","WEEPING","PYRAMIDAL","GLOBE","FASTIGIATE","VASE","HORIZONTAL_SPREADING","NARROW_DOMED","crownShape","OVOID_CONIC","CONIC","DOMED","SPIRE_LIKE","SLENDER","barkType","LENTICELS","PEELING_STRIPS","VERTICAL_CRACK","VERTICAL_STRIPS","SCALES","PLATES","INTERSECTING_RIDGES","UNINTERRUPTED_RIDGES","RIDGES_BROKEN_HORIZONTALLY","PAPER_LIKE","SQUARE_CRACKED","RESINOUS","THICK","coneShape","BARREL_SHAPED","GLOBULAR","leafVenation","ARCUATE","DICHOTOMOUS","LONGITUDINAL","PARALLEL","RETICULATE","ROTATE","TRANSVERSE","flowerShape","TRUMPET_SHAPED","BILABIATE","REGULAR","ACTINOMORPHIC","ZYGOMORPHIC","branchArrangement","HORIZONTAL","WHORLS","leafFeatures","BLUNT_TIPS","STOMATAL_LINES","DROOPING","leafFolding","CARINATE","CONDUPLICATE","CUCULLATE","INVOLUTE","REDUPLICATE","REVOLUTE","SUPERVOLUTE","mushroomGroup","MYCOTROPHS","POLYPORES","BOLETES","PUFFBALLS","GILLED_MUSHROOMS","CHANTERELLES_AND_TRUMPETS","TOOTHED_MUSHROOMS","STINKHORNS","CUP_FUNGI","BIRDS_NEST_FUNGI","TRUE_MORELS_AND_VERPAS","FALSE_MORELS","SADDLES","JELLY_FUNGI","CLUBS_AND_CORALS","CRUST_FUNGI","units","lifeSpan","gestation","weaning","germination","height","diameter","circumference","trunkDiameter","capDiameter","umbelDiameter","capWidth","infructescenceWidth","width","breadth","capHeight","shelfWidth","shelfThickness","leafLength","awnLength","infructescenceLength","juvenileLeafLength","leafWidth","petalLength","petalWidth","petioleLength","bractLength","fruitWidth","fruitLength","fruitDiameter","fruitHeight","flowerDiameter","flowerLength","coneDiameter","coneLength","maleConeLength","femaleConeLength","bulbWidth","coneWidth","maleConeWidth","femaleConeWidth","stalkHeight","stemHeight","scapeHeight","stemDiameter","stipeLength","tailLength","leafletLength","leafletWidth","queenLength","queenWingspan","workerLength","workerWingspan","maleLength","maleWingspan","stipeWidth","wingSpan","tongueLength","phValue","weight","queenWeight","workerWeight","maleWeight","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","firestore","getSpeciesWhere","props","operator","limit","speciesRef","where","querySnapshot","docs","doc","getSpecies","getSpeciesNames","speciesPropertiesRef","getTaxaNames","taxaPropertiesRef","getSpeciesByIconicTaxon","number","iconicTaxon","isLichen","lichen","eolId","randomId","getRandomId","FieldPath","documentId","getSpeciesByName","itemName","getTaxaWhere","taxaRef","getFamiliesByIconicTaxon","iconicTaxonRank","iconicTaxonValue","getTaxonByName","getAsyncTraitsByNameAndCollection","languageTraits","getTraitsBySpeciesName","Promise","resolve","getTraitsByTaxonName","getBirdsong","xcID","storageRef","ref","getDownloadURL","url","addSpecies","images","image","license","photographer","rightsHolder","title","docRef","updateSpecies","updatedSpecies","starred","provider","speciesDocRef","update","updateSpeciesNames","deleteSpeciesByName","then","addTraits","empty","speciesTraitsRef","addSpeciesRelationship","batch","readyBatch","all","FieldValue","arrayUnion","commit","addPhotos","photos","deleteSpeciesTraitField","field","removeField","getRandomSpecies","addTaxon","getSpeciesInParallel","time","questionIds","quickId","getSpeciesByNameInParallel","itemNames","addCollection","details","getCollectionsWhere","collectionRef","addQuestion","getQuestionsWhere","addDefinition","definition","term","getDefinitionsWhere","getDefinitionById","getBatchDefinitionsById","ids","terms","getDefinition","definitions","alt","getCollections","async","updateDefinition","getTraitDefinitions","entry","getDefinitionsByTaxa","taxa","chars","autoId","getLookalikeTests","init","getLookalikeTest","tests","getItemLookalikes","lookaliketraits","lookalikes","getLookalikes","FUNGI","PLANTAE","AVES","AMPHIBIA","REPTILIA","MAMMALIA","INSECTA","ARACHNIDA","LEPIDOPTERA","matchTaxon","matchTaxonKey","iconicTaxaKeys","rank","order","kingdom","findRankByIconicTaxon","matchIcon","matchRank","icon","getDefinitionTests","getDefinitionTest","alternatives","bonusHandler","getTests","itemIndices","bonusLayouts","lessonName","levelName","addLayoutToTest","traitTests","traitTest","getTraitTypeTests","getTraitTypeBirdsongTests","getTraitTypeLookalikeTests","getDefinitionTypeTests","getResolvedPromises","promises","testGroups","group","g","getItemLayouts","itemQuestions","providerHandler","getLayouts","roundItemNames","speciesQuestions","questions","sq","itemsQuestions","makeActionCreator","meta","nextLesson","updateScore","nextLayout","nexItem","updateHistory","newCollection","updateCollections","nextRound","nextLevel","updateConfig","stopStartLesson","updateEnums","updateUser","saveLesson","updateVideoPlayer","createQuickFire","updateQuickFire","createGlossary","clickEvent","boundAsyncNextLesson","func","dispatch","response","actions","boundNextLesson","boundUpdateScore","boundNextItem","boundNextLayout","boundUpdateHistory","boundSetActiveCollection","boundUpdateCollection","boundUpdateCollections","boundNextRound","boundNextLevel","boundUpdateConfig","boundStopStartLesson","boundUpdateEnums","boundSaveLesson","boundUpdateVideoPlayer","boundUpdateUser","boundCreateQuickFire","boundUpdateQuickFire","boundCreateGlossary","boundClickEvent","hasClass","className","classArray","cleanText","text","isAnswerCorrect","isCorrect","answeredIndex","parseInt","answerIndex","isAnswerEqualToQuestion","eqValues","alternativeIsCorrect","alternativeAccepted","markTest","test","clone","isTraitAnswerCorrect","lessonState","Enum","initEnum","navigation","guideOption","nextStep","quickFireType","quickFireStep","userEvent","getIsReviewingLesson","isNotReviewingLesson","START_LESSON","TOGGLE_SPECIES_LIST","lessonStateHelper","overrideLesson","purgeLesson","purge","location","reload","clearGuide","getCollectionToLoad","currentCollection","selectedLessonCollectionId","resume","getLatestCounter","log","getUserLessonState","collectionToLoad","savedLesson","newLessonCounter","restoredLesson","Stamp","Context","importNode","re","filterState","address","mystate","len","hasAttribute","JSON","stringify","getAttribute","expandString","count","matches","exec","cloneAllNodes","clones","nodeName","cloneNode","appendChildren","ele","nodes","expand","isArray","processChildren","attributes","attr","iterName","tpl","firstChild","removeChild","childState","instanceState","k","cl","removeAttribute","setAttribute","childEle","nextSibling","replacement","childNodes","insertBefore","expandInto","target","replaceChildren","innerHTML","renderTemplate","context","parent","contentClone","expanded","handleRightsAttribution","template","createElement","rightsAttributionTemplate","licence","medium","author","rightsholder","identifier","large","scaleImage","rightsAttribution","rightsLink","indicators","showAttribution","event","remove","removeEventListener","showLink","carouselControlHandler","parentScreen","setTimeout","slider","imageSlider","sliderArgs","imageSliderTemplate","img","prev","selectActiveImage","elemSrc","imageMatch","activeNode","slideTo","click","imageSideBySlider","slides","sideBySlider","slide","itemCommon","prepImagesForCarousel","imageUseCases","CAROUSEL","originalImageLink","stripImageUrlOfScaleAndPrefix","prefix","SPECIES_LIST","SPECIES_CARD","TAXON_CARD","SPECIES_SPECIMENS","NON_TAXON_CARD","VISUAL_MATCH","MIXED_SPECIMENS","TEXT_ENTRY","ACTUAL_SIZE","SPECIES_GRID","denormaliseImages","photographersName","full_name","src1","src2","prepImageForCarousel","useCase","src","small","modalImagesHandler","displayNameType","modalImageHandler","handleImageSelectionFromList","selectedItem","selectedItemImage","selectedImage","displayName","mushroomIcon","renderIcon","rootNode","iconicIcon","returnTaxonIcon","getBirdSong","node","portrait","fetchAsync","endpoint","fetch","json","loadPlayer","playerId","song","recording","recordings","style","renderInfoDetails","activeTraitKey","activeTraitValue","idBoxTemplate","linkedTaxa","isInCarousel","addLinksToSpeciesCards","link","renderCard","taxonName","isSpecies","addVernacularName","relationshipTraits","relationships","convertTraitsForDisplay","speciesA","speciesARole","speciesB","speciesBRole","lookalikeTraits","convertLookalikesForDisplay","speciesDescription","lookalikeDescription","addDisplayRules","relationship","modal","linkedTaxaRelationshipTemplate","linkedTaxaLookalikeTemplate","getLinkedTaxa","detail","detailsTemplate","imgClassName","renderInfoSlider","infoSliderTemplate","activeTrait","control","changeTraitHandler","taxonInfoSlider","convertedTraits","service","getLocation","lat","getHTML5Location","reject","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","logError","listeners","parseMapBoxPlace","locality","features","f","place_type","region","country","area","shortLocation","longLocation","summary","placePromise","updatedPlace","getMapBoxPlace","long","listener","getPlace","force","LocationLookup","ip","city","state_prov","country_name","IPLookup","getIPLocation","ipLocation","requireNewSession","current_term","inatListeners","unsubscribe","listenToInatRequests","getBasePath","observableMonths","getInatSpecies","speciesNames","snapdragonSpeciesNames","getIconicTaxa","getUserOrProjectKeyValuePair","parameter","getAllInatObservations","snapdragonSpecies","records","keepGoing","page","getInatObservations","recordsFromThisRequest","record","noMoreRecords","recordsCountReached","loadSpeciesInParallel","observations","observation","observationCount","observations_count","iconic_taxon_name","lng","placeId","radius","inat","params","guideTpe","numberOfRequests","ceil","total_results","RECORDS_per_page","getInatPlaceId","getInatTaxonStats","getHistogram","getAutocompleteBy","by","renderWikiModal","wikiLink","wiki","focus","inatBoxTemplate","eolPage","wikiNode","renderWiki","stats","taxonId","stat","taxonCount","taxonLink","place_name_en","places","display_name","itemStats","placeTaxonCount","establishment","preferred_establishment_means","renderCalendar","calendarTemplate","getENShortMonth","ordinal","histogram","monthlyStats","month_of_year","currentMonthIndex","infraspecifics","subspecies","variety","eol","form","renderTaxaBox","taxaBoxArgs","familyName","familyVernacularName","specific","subSpeciesCount","taxaBoxTemplate","subspeciesBadge","members","list","html","member","transition","getItemWithProps","getItem","itemWithProps","FAMILY","ORDER","cardTemplate","renderCommonParts","renderPortrait","renderLandscape","renderInatDataBox","lookalikeSpecies","renderLookalikes","readyLookalikesForRendering","lookalikeItem","scientificNames","lookalikeParent","matchTemplate","speciesComparisonLink","mp3","audioMediaTemplate","visualComparisonTemplate","player","iframe","border","elm","infoSlider","renderBadge","badge","Set","common","languageNames","occurrences","badgeTemplate","lines","getElementsByTagName","hr","attribution","indicator","modalCarousel","renderTaxonCard","taxonTemplate","familyStats","identification","descriptions","genera","families","toxic","notableMembers","membersCount","traitValuesHandler","branch","technical","nonTaxaGroup","LICHEN_FORM","getNonTaxa","SD","examples","subscriptions","renderNonTaxonCard","keyTrait","nonTaxa","nt","onChange","sub","prepImages","itemImagesArray","itemImages","nonTaxon","portraitImagesNode","lookup","getElementById","buildTable","args","overrideParent","matchMedia","getTraitName","keyTratLinkClass","phylum","getIconicTaxonIcon","iconicTaxonIcon","hideFungiIcon","genusLinkClass","shortName","getOrderLinkClass","hasVideo","speciesTemplate","vn","span","append","caption","thead","headerRow","imageHeader","speciesHeader","familyHeader","traitNameHeader","iconicTaxonHeader","accordionHeader","sortableCalback","isReady","onSpeciesTimeMatchListeners","onNoteTimeMatchListeners","onSpeciesPlayRequestListeners","onPlayerStateChangeListeners","isPlayerReady","states","videoHandler","readyPlayer","YT","Player","playerVars","events","onPlayerReady","onPlayerStateChange","onSpeciesTimeMatch","pop","onNoteTimeMatch","onSpeciesPlayRequest","onPlayerReadyListeners","subscribeToPlayerStateChange","playVideoFrom","getPlayerState","seekTo","playVideo","setVideoState","activeLesson","collectionId","pausedAt","speciesName","destroyPlayer","stopVideo","destroy","saveVideoState","isVideoPlayerReady","videoId","doIdsMatch","getVideoData","video_id","getPlayerTime","getCurrentTime","videoSetup","startTime","videoTemplate","video","webLabel","links","label","webUrl","startAt","playAt","checkInt","checkCurrentTime","matchSpeciesTime","notes","noteMatch","note","onPlayerStateChangeCallback","clearInterval","videoWidth","offsetWidth","currentlyActiveRow","onSpeciesChangeHandler","openNoteHandler","definitionTemplate","insert","colCount","noteText","renderSpeciesList","callingParentContainer","traitEnums","openAccordionHandler","accordion","openSpeciesDescriptionHandler","closeAccordionHandler","userClickHandlers","itemImage","accordionHandler","currentTarget","stopPropagation","activeIcon","cardModal","card","nthChild","taxonIcons","noWrongAnswersForThisSpecies","totals","firstTime","lessonStateHandler","changeRequest","requestType","BEGIN_OR_RESUME_LESSON","requestArgs","enableScroll","activateYoutubeIcon","closeOpenAccordions","accordions","activeAccordion","activeYouTubeIcon","td","scrollIntoView","rowHeight","noOfRows","scroll","top","getComputedStyle","documentElement","getPropertyValue","scrollTop","previousElementSibling","offsetHeight","prevTaxon","nextTaxon","playerRecords","inactiveAccordion","getItems","guideType","query","logErrorg","getSnapdragonSpeciesData","loadCollection","insecta","lepidoptera","noninsecta","loadCollectionItemProperties","itemReadyCollection","orders","familyTaxa","orderTaxa","genusTaxa","getGenusTaxa","genusTaxon","getFamilyTaxa","familyTaxon","getOrderTaxa","orderTaxon","getFamilyNames","findRank","taxonRank","GENUS","vernacularNames","loadTraitsInParallel","itemTraits","collectionHandler","PAUSE_LESSON","UPDATE_COLLECTION","SAVE_LESSON_PROGRESS","GET_LESSON_PROGRESS","ADD_SPECIES_TO_COLLECTION","RENDER_SPECIES_LIST","NEXT_ROUND","isLandcapeMode","changeLessonState","saveCurrentLesson","updatedCounter","getUserLessonProgressState","addExtraSpeciesSelection","renderLessonSpeciesList","beginOrResumeLesson","requestedlessonState","RESUME_LESSON","BEGIN_LESSON","container","stateCounter","userLessonState","setActiveCollection","extraSpecies","collectionExtension","recordUserAction","scoreSummaryHandler","getLessonScores","stateScore","savedScore","historyIsUpToDate","getSummaryRows","rows","getAnswer","isObj","hasImage","isTrue","isWrongAnswer","renderScoreSummary","lessonId","summaryContainer","summaryTemplate","actionLinks","reverse","renderScoreSummaryRow","handleContinueLesson","preventDefault","handleNewLesson","actionLink","once","summaryRowTemplate","summaryNoRowTemplate","noQuestionsText","renderTestCardTemplate","testCardTemplate","headerClassName","providerQuestion","progressLink","renderSummaryCard","toggleScreens","screenOne","screenTwo","hideCurrentCard","testCardContainer","toggleStatementAndQuestion","testCard","testCardIcon","showNextCard","selector","speciesContainer","taxonContainer","renderSpeciesCard","speciesCard","taxonCard","interval","languagePicker","languageSelectionTemplate","taxonLanguageBtn","taxonLanguageTxt","inatAutocomplete","input","rb","users","login_autocomplete","photo","getPlaceSuggestions","GoogleAutocomplete","getPredictions","SESSION_TOKEN","google","maps","AutocompleteService","getPlacePredictions","AutocompleteSessionToken","predictions","prediction","place_id","projects","autocomplete","getUserSuggestions","getProjectSuggestions","onSelect","minLength","debounceWaitMs","switchHandler","idSwitch","startingPosition","switchControl","leftText","rightText","switcher","saveLocation","locationPlaceInput","createGuide","selectedText","selectedId","GooglePlaceDetails","request","Geocoder","geocode","geocoderResult","geometry","setConfig","saveStep","saveInatId","autocompleteRef","isLandsapeMode","speciesInGuideEditor","selectedSpeciesDisplay","selectedSpecies","savedSpeciesNames","spinner","editorTemplate","speciesCount","getTaxa","ss","addSpeciesToList","updatedConfig","updatedCollection","startsWith","highlightedText","checkBox","removedSpecies","listenersToAddedSpecies","speciesEditor","addedSpecies","CreateGuide","step","steps","disabled","nextSteps","LOCATION","INAT","PICKER","prevStep","currentStep","modalTitle","navigationContainer","progressSteps","previousStepActionArrow","previousStepActionTxt","optionsTxt","nextStepActionArrow","nextStepActionTxt","ps","getConfig","getCurrentStep","setCurrentStep","actionsTemplate","renderSpeciesSearchOptions","handleNextStepAction","nextStepName","startLesson","goToNextStep","handler","warning","renderLocation","locationTemplate","defaultNoOfRecords","setLocationLongLatBtn","handleSetLocationLongLat","placeholder","handleLocationPlaceInput","keyCode","range","rangeTxt","updateSlider","switchCallback","currentType","renderInatUser","inatTemplate","byType","inatIdentityInput","handlerInatIdentityInput","renderSpeciesPicker","speciesPickerTemplate","renderCategories","categoriesTemplate","icons","filterId","fungiIcon","hasChanged","category","commonName","speciesSearch","spinnerTemplate","feedback","viewGuideIcon","viewTaxaIcon","renderLessonSummary","clearTimeout","speciesSummaryTemplate","callOnCreateCustomListeners","editSpecies","editableCollectionName","initLesson","isPrivate","OrdinalSuffixOf","addingExtraSpecies","every","val","includes","initPicker","addStepActions","previousStepProperties","stepDescription","saveGuide","chosen","handleSaveEvent","onCloseModalListeners","quickFireAPI","includeTechnicalTerms","getBranches","branches","getQuickFire","isComplete","termScore","isIncorrect","poolSize","renderResponse","updateBranchCounts","branchOptions","branchBadge","updateTaxonCounters","taxonCounters","taxonBadge","quickFireUI","updateTotalCounts","counters","branchCounters","updateHeaders","screen","quickFireActions","filters","hide","loadGlossary","quickFireGlossary","linkFromLesson","loadFilters","quickFireFilters","handleGlossaryLink","handleFiltersLink","FILTERS","QUESTIONS","GLOSSARY","scoreMultipleChoice","quickFireMessage","scoreTextEntry","quickFireInput","continueQuickFireBtn","brackets","acceptableAnswers","acceptable","readyTemplate","headerTemplate","quickFireLogic","selectAnswers","quickFireItems","spareItems","itemCount","headers","templateCreateQuickFire","resetQuickFire","DEFINITION","updateArray","getFilterTaxa","chkBox","selectedTaxon","updatedTaxa","getIncludeTechnicalTerms","createQuickFireBtn","quickFireOptions","checkedBranches","checked","templateQuestionQuickFire","answered","quickFireInputContainer","subscription","quickFireQuestions","check","review","getTermsGlossary","def","glossaryTemplate","templateSummaryQuickFire","pass","showWikiClass","fail","tab","summaryText","scoreSummary","continueReview","quickFireRevision","quickFireHandlers","renderReview","progressBar","roundProgressIndex","roundScoreCount","handleSpeciesUpdate","speciesSummary","getSpeciesCount","getSpeciesSummary","renderLessonIntro","textSetup","textIntroTemplate","lessonIntro","intro","renderEditLesson","lessonEditTemplate","lessonListScrollHandler","scrollToTitle","siblingsBefore","siblings","sibling","before","onLoadLessonViewState","showVideoIconClass","videoState","reviewState","hasTermsClass","isCollectionEditableClass","onClickViewState","isYoutubeIcon","isChevronIcon","row","speciesList","reviewLink","DEFAULT","hideOtherContentAndRevertChevrons","isSpeciesListAvailable","isSpeciesListHidden","lessonVideoState","iconIsChevron","lessonIsYoutubeIcon","requiresSpeciesList","revealSpeciesList","hideSpeciesList","selectedLessonId","chevron","chevronLessonId","loadAndDisplaySpeciesList","lessonListEventHandler","onLoadLessonsViewState","onLessonIconClickHandler","isItemActive","siblingChevron","onReviewClickHandler","START_LESSON_REVIEW","onLessonTitleClickHandler","renderCustomLesson","savedLessons","onCreateCustomLesson","lessonTemplate","hideVideoClass","hideTextIntroClass","youtubeLessonIcon","scrollTo","left","behavior","cookie","renderLessons","lessonListTemplate","tsa","seconds","renderLesson","saved","isPaused","renderLessonListHeader","header","lessonListHeaderTemplate","createGuideHandler","handlePreviousStepAction","youtubeLessonIcons","youtube","highlightActiveLesson","chevrons","reviews","SECURE","cookieHandler","setFirstTimeVisitorCookie","isFirstVisit","isFirstTimeVisitor","readCookie","removeFirstTimeVisitorCookie","setLastVisitedCookie","setLastVisited","hasUserBeenAwayTooLong","lastVisited","timeDiff","abs","beenGoneTooLong","nameEQ","ca","cookieToAdd","settingsHandler","settingsTemplate","clearCacheBtn","setDelayBtn","setDelayInput","delayTxt","renderLogin","logoutTemplate","email","auth","logOut","signOut","loginTemplate","password","logIn","signInWithEmailAndPassword","credentials","notLoggedIn","renderLoggedIn","loggedIn","loggedOut","renderLanguagePicker","languageTemplate","onLoseFocusListeners","renderNavigation","navigationPortraitTemplate","navigationLeftTemplate","navigationRightTemplate","navIcons","clickedIcon","toggleIconOnOff","enumValueOf","LANDSCAPE_HOME","SETTINGS","PORTRAIT_HOME","EMAIL","LOGIN","LANGUAGE","activeInfoIcon","getByRole","onLoadState","returningUser","renderLoginChanges","letterBlocks","letter","letters","deleteLetter","activeBlocks","activeLetters","activeBlock","block","lastLetter","indexInInput","lastIndexOf","newValue","correctBlocks","letterIndex","blocks","keyboardBtn","selectedBlock","blockArray","getPoolItems","otherItems","getItemsFromCollection","taxonicMatches","speciesPool","ci","isException","renderMultiStrips","defaultLanguage","render","helpDefault","clue","stripWithImageTemplate","stripTemplate","strips","italicise","strip","questionCount","findIndex","scoreHandler","buildQuestion","renderBinomialQuestions","renderVernacularQuestions","renderIdQuestions","alternativeFamilies","epithet","latin","en","indices","otherFamilies","otherFamiliesLatinNames","otherFamiliesCommonNames","of","renderBirdsong","requiredTraits","renderMixedSpecimenImagesAndQuestion","getPortraitImages","srcs","islandscapeMode","mixedSpecimenTemplate","continueLessonBtn","boundScore","selectedName","scoreUpdateTimer","wrongItem","bindScore","renderMixedSpecimenQuestion","renderBonusTest","renderItemSpecimenTiles","collectionItems","getImagesFromItemFamily","renderSpecimenImageTiles","acceptableScreens","specimensTemplate","pooledImage","uniqueImages","familyImages","imageToPrep","getUniqueImage","uniqueImage","functions","renderNonTaxonCardSpecimenTiles","subscribeToNonTaxaSelection","renderTextEntry","vernacular","renderInput","questionTxt","textEntryTemplate","textEntryPortraitTemplate","inputTxt","helpTxt","answerBtn","scoreEventHandler","layouts","renderSummary","getByName","renderHistory","renderCompleteText","givenTaxon","completeTemplate","numerOfItems","itemTaxons","itemTaxon","iconColour","answerIcon","continueLessonHandler","renderCultivarCard","cultivars","locale","eolAlt","wikiAlt","cultivarTemplate","renderBonusSpecimenTiles","lookalikesCount","renderSpecimenTiles","renderMediaPlayers","renderMixedTraitQuestion","questionTemplate","renderHorizontalStrips","domain","observeStore","select","currentState","hasStateSignificantlyChanged","handleChange","nextState","is","areEqual","calledBy","subscribe","removeByName","getAll","removeSubs","addSubs","funcByName","isSubscriptionRequired","checkRequired","isReviewingLesson","genericScoreHandler","blockScoreHander","stripScoreHandler","imageScoreHandler","simpleScoreHandler","showResponseToAnswerHandler","renderScoreHTMLResponse","btn","cursor","_score","handleClickEvent","answerNode","stripAnswer","stripAnswerIndex","stripAnswerName","_callback","tile","opacity","onTraitsReadyListeners","onTraitClickedListeners","pendingScore","mixedTraitHandler","getMatchingTrait","layoutTraits","requiredTraitValues","v","fetchTraits","multiples","multiple","onTraitsReady","onTraitClicked","onClickTileHandler","tiles","specimenImages","vernaculars","scientifics","leaf","leafName","familyStrips","textComplete","cultivar","cultivarCard","specimenCommonMatch","specimenLatinMatch","definitionCard","traitProperty","symbioticProperty","lookalikeProperty","traitImages","nonTaxonSpecimenTiles","mixedSpecimenQuestions","mixedSpecimensLeft","mixedSpecimensRight","mixedTraitLeft","mixedTraitRight","providerHorizontalStripQuestions","speciesIdentification","mixedSpeciesMatch","kind","given","requirement","speciesRevision","taxonRevision","nonTaxonRevision","definitionRevision","latinToCommonMatch","commonToLatinMatch","speciesIdentificationMatch","textCompleteGenus","multiSpecimenCommonMatch","multiSpecimenLatinMatch","traitPropertyMatch","lookalikePropertyMatch","symbioticPropertyMatch","familyMatch","cultivarMatch","familyStripsMatch","genusEntry","speciesEntry","speciesGenusEntry","leafEntry","textCompleteSpecies","commonEntry","latinEpithets","glossaryTerms","mixedSpecimenImages","mediaMatch","mixedTraitImages","providerHorizontalStrip","propertyTrait","createNextRound","nextRoundLayoutTemplates","progressScreens","itemsCountToDate","itemsLeft","layoutsToAdd","providerQuestions","providerLayouts","L","lessonLayouts","bonusTests","layoutIndex","layoutNames","updatedLessonPlan","updatedLesson","getNextRoundLayouts","activeLevelCount","levelId","goToNextLevelThatHasLayouts","iterateOverLevelsCheckingForAvailableLayouts","intialValue","increment","currentLevel","reviewLayouts","getCurrentLevelFromLessonPlan","lessonPlanner","createLessonPlan","landscapeCustom","default","landscapeCustom2","landscapeFungi","landscapeLichens","landscapeStatic","landscapeStaticTaxonGroup","portraitStatic","portraitStaticTaxonGroup","landscapeBirds","portraitBirds","portraitFungi","portraitLichens","setupHandler","isRequired","NEXT_ITEM","NEXT_LAYOUT","NEXT_LESSON","actionUpdate","asyncFunc","planId","lessonPlanPortrait","lessonPlanLandscape","plan","renderHeaders","renderScore","renderHome","forceIntroDisplay","initialiseConfig","originalConfig","lessonModalHandler","onCloseModal","library","faBookOpen","faLanguage","faEnvelope","faUserSlash","faUserCheck","faCog","faChevronDown","faGlasses","faDove","faFrog","faPaw","faBug","faLeaf","faRegistered","faBarcode","faSun","faChevronUp","faChalkboard","faTimes","faTimesCircle","faCheck","faExternalLinkAlt","faExclamation","faClone","faCopyright","faSlidersH","faUndo","faArrowAltCircleLeft","faArrowAltCircleRight","faRegisteredFar","faYoutube","dom","watch","handleWindowResize","setWindowHeight","iOS","userAgent","MSStream","verticalHeight","innerWidth","innerHeight","setProperty","largeImage","horizontalWidth","origin","protocol","href","loadModalHTML","modalsTemplate","msg","process","css","logAPIError","onLoadHandler","Sentry","dsn","currentCounter","statePlans","cloudCollections","initialisedConfig","root","formatUrl","encode","ranks","fetchWiki","missingMessage","method","errorPromise","cleanEntry","cleaned","formatWiki","wikiSearchTerm","searchTerm","searchTerms","exceptions"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0,\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([474,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","Array.prototype.concatAll = function() {\n    const results = [];\n  \n    this.forEach(function(subArray) {\n      subArray.forEach(function(element) {\n        results.push(element);\n      });\n    });\n  \n    return results;\n  };\n  \n  const encodeQuery = q => { \n    if(q === undefined) return q;\n    if(Number.isInteger(q)) return q;\n    return encodeURIComponent(q.trim()) \n  };\n  \n  const timer = function (sink, delay) {\n    let id = null;\n    Bacon.fromBinder(function() {\n      id = setInterval(function() {\n          sink();\n        }, delay);    \n      })\n    .onValue(function(element) { \n      //\n     });\n    return id;\n  };\n  \n  function intervalTimer (sink, delay) {\n    var timerId;\n  \n    this.pause = function() {\n        window.clearInterval(timerId);\n    };\n  \n    this.resume = function() {\n        window.clearInterval(timerId);\n        timerId = timer(sink, delay);\n    };\n  \n    this.getId = function (){\n      return timerId;\n    }\n  \n    this.resume();\n  \n    return this;\n  };\n  \n  const shuffleArray = array => {\n\n    // Check against https://bost.ocks.org/mike/shuffle/ Fisher–Yates Shuffle\n\n    if(!array || array.length === 0) return;\n\n    var currentIndex = array.length, temporaryValue, randomIndex;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return [ ...array ];\n\n    // return (arr\n    //   .map(a => [Math.random(), a])\n    //   .sort((a, b) => a[0] - b[0])\n    //   .map(a => a[1]))\n  };\n  \n  const randomiseSelection = (source, required, zeroBased = false) => {\n    const r = selection => {\n      const arr = shuffleArray(source);\n      selection = selection.concat(arr.map((item, index) => {\n        if(index + selection.length < required) {\n          return zeroBased ? --item : item;\n        }      \n      })).filter(item => item !== undefined);\n      return selection.length < required ? r(selection) : selection;\n    }\n    return r([]);\n  };\n\n const onlyUnique = (value, index, self) => { \n    return self.indexOf(value) === index;\n};\n\nconst sortBy = (arr, prop, dir = 'asc') => {\n  return dir === 'asc' \n    ? arr.sort((a, b) => parseFloat(a[prop]) - parseFloat(b[prop]))\n    : arr.sort((a, b) => parseFloat(b[prop]) - parseFloat(a[prop]));  \n};\n\nconst sortAlphabeticallyBy = (arr, prop) => {\n  arr.sort(function(a, b){\n    if(a[prop] < b[prop]) return -1;\n    if(a[prop] > b[prop]) return 1;\n    return 0;\n  });\n  return arr;\n};\n\nconst calcItemIndex = (offSet, moduleSize, index) => {\n  const itemIndex = \n        (offSet + index) % moduleSize === 0 \n          ? offSet\n          : offSet + (offSet + index) % moduleSize;\n  return itemIndex;\n};\n\nconst capitaliseFirst = str => {\n  const text = str.substr(0, 1).toUpperCase() + str.substr(1).toLowerCase();\n  return text;\n};\n\nconst capitaliseAll = str => {\n  const text = str.toLowerCase()\n    .split(' ')\n    .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n    .join(' ');\n  return text;\n};\n\nconst getCellValue = function(tr, idx, headerSortIndex, wide){\n  let children = tr.children;\n  if(!wide) {\n    children = [...tr.children].filter(child => [...child.classList].join('').indexOf('wide-screen') === -1);\n  }\n  const valueToSortOn = \n    children[idx].dataset.snapIndex ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.vernacularName) ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.name) ||\n    children[idx].children[headerSortIndex].innerText ||\n    children[idx].innerText || \n    children[idx].classList[0] || \n    children[idx].textContent;\n  return valueToSortOn;\n}\n\nconst comparer = function(idx, asc, headerSortIndex, wide) { return function(a, b) { return function(v1, v2) {\n      const isNumericallyComparible = v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2);\n      return isNumericallyComparible ? v1 - v2 : v1.toString().localeCompare(v2.toString());\n    }(getCellValue(asc ? a : b, idx, headerSortIndex, wide), getCellValue(asc ? b : a, idx, headerSortIndex, wide));\n}};\n\n// https://stackoverflow.com/questions/14267781/sorting-html-table-with-javascript/14268260\n\nconst makeSortable = (document, callback, wide) => {\n\n  Array.from(document.querySelectorAll('th > span')).forEach(function(sp) { sp.addEventListener('click', function() {\n\n          const headerSortIndex = this.innerText.toUpperCase() === 'ORDER' ? 1 : 0;\n\n          const names = [];\n          var th = this.parentElement;\n          if(th.classList[0] === 'not-sortable') return;\n          var table = th.closest('table');\n          var tbody = table.querySelector('tbody');\n          var footer = table.querySelector('tfoot');          \n\n          snapLog('Array.from(tbody.querySelectorAll(\"tr\")): ', Array.from(tbody.querySelectorAll('tr')));\n\n          Array.from(tbody.querySelectorAll('tr'))\n              .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc, headerSortIndex, wide))\n              .forEach(function(tr) { \n                if(tr !== footer) {\n                  tbody.appendChild(tr);\n                  names.push(tr.cells[0].id);\n                }\n              });        \n\n            callback(names);\n      })\n  });\n};\n\nconst flatten = array => {\n  const flattenedArray = array.reduce(\n    function(accumulator, currentValue) {\n      return accumulator.concat(currentValue);\n    },\n    []\n  );\n  return flattenedArray;\n}\n\nconst getObservableMonths = (date, span = 3) => {\n\n  const daysAway = (when, days) => {\n      let dateFromDays = date;\n      const direction = when === 'future' ? 1 : -1;\n      dateFromDays.setDate(dateFromDays.getDate() + direction * days);\n      return dateFromDays;\n  };\n\n  const startMonth = daysAway('past', 30).getMonth();\n  const thisMonth = date.getMonth() + 1;\n  const endMonth = daysAway('future', 30).getMonth() + 1;\n\n  const getMonthName = month => {    \n    const exampleDate = new Date(2000, month, 1);\n    const name = exampleDate.toLocaleString('en-uk', { month: 'long' });\n    return name;\n  }\n\n  const months = [ \n      { index: startMonth, name: getMonthName(startMonth)}, \n      { index: thisMonth, name: getMonthName(thisMonth)}, \n      { index: endMonth, name: getMonthName(endMonth)}\n    ];\n\n  return months;\n};\n\nconst getRandomInt = max => {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nconst createSessionToken = () => {\n\n  // uuidv4\n\n  // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript#answer-2117523\n\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nconst getRandomObjectProperty = obj => {\n  if(Object.keys(obj).length === 0 && obj.constructor === Object) return {};\n  const keys = Object.keys(obj);\n  const index = Math.floor(Math.random() * keys.length);\n  const key = keys[index];\n\treturn { key, value: obj[key] };\n};\n\nconst toCamelCase = sentenceCase => {\n  if(sentenceCase === undefined) return '';\n  var out = \"\";\n  sentenceCase.split(\" \").forEach(function (el, idx) {\n      var add = el.toLowerCase();\n      out += (idx === 0 ? add : add[0].toUpperCase() + add.slice(1));\n  });\n  return out;\n};\n\nconst fromCamelCase = str => {\n  if(str === undefined) return '';\n  return str.replace(/([a-z])([A-Z])/g, '$1 $2').toLowerCase();\n};\n\nconst parseToLowerCase = value => {\n  if(value === undefined || value === null) return '';\n  else if(typeof value === 'object') return value;\n  else return !!value ? value.toLowerCase() : '';\n};\n\nexport const utils = {\n  encodeQuery,\n  timer, \n  shuffleArray,\n  randomiseSelection,\n  onlyUnique,\n  sortBy,\n  sortAlphabeticallyBy,\n  calcItemIndex,\n  capitaliseFirst,\n  capitaliseAll,\n  makeSortable,\n  flatten,\n  getObservableMonths,\n  getRandomInt,\n  createSessionToken,\n  getRandomObjectProperty,\n  toCamelCase,\n  fromCamelCase,\n  parseToLowerCase\n};","// Module\nvar code = \"<figure> <figcaption class=hide>{{ title }}</figcaption> <audio controls src=\\\"{{ mp3 }}\\\"> Your browser does not support the <code>audio</code> element. </audio> </figure>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"relative lesson-list-carousel-item js-lesson-list-carousel-item\\\"> <div class=\\\"landscape double-centred-block\\\"> <img class=lesson-icon src=\\\"{{ lesson.icon }}\\\" alt=\\\"{{ lesson.name }}\\\"> </div> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-list-item js-lesson-list-item\\\" data-has-video=\\\"{{ lesson.hasVideo }}\\\"> <div> <div class=\\\"lesson-name js-lesson-title\\\" data-lesson-id=\\\"{{ lesson.id }}\\\"> <span id=\\\"lesson_{{ lesson.id }}\\\" class=\\\"lesson-title margin-right {{ lesson.isCollectionEditableClass }}\\\">{{ lesson.name }}</span> </div> <div class=lesson-taxa data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.taxa }}</div> <div class=\\\"latin hide-empty js-lesson-video-state\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.videoState }}</div> </div> <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-review js-lesson-review\\\"> <div class=flex> <div class=\\\"centred-block fit-width margin-top\\\"> <button data-toggle=modal data-target=#glossaryModal data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"vocab test for {{ lesson.name }} lesson\\\" class=\\\"lesson-terms-review {{ lesson.hasTermsClass }} margin-right fit-width js-terms-review-link btn snap-btn smaller-text\\\" data-toggle=modal data-target=#glossaryModal>Vocab test</button> </div> <div class=\\\"vertical-centred-block relative margin-top\\\"> <button data-toggle=modal data-target=#lessonModal data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"landscape btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button> <button data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"portrait btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button> <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide-important inline-progress-container js-review\\\"> <span class=absolute>&nbsp;</span> </span> <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide margin-right js-loading-review-message\\\"> <span><i class=\\\"fas fa-sync slow-spin\\\"></i></span> </span> </div> </div> </div> </div> <div class=\\\"lesson-list-action-icons js-lesson-list-action-icons\\\"> <div class=\\\"\\\"> <button data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-is-youtube-icon=true class=\\\"snap-icon-btn fit-width js-lesson-list-youtube\\\" aria-label=\\\"play video for the lesson {{ lesson.name }}\\\"> <i class=\\\"fab fa-youtube youtube-icon {{ lesson.hideVideoClass }}\\\"></i> <i class=\\\"fas fa-glasses youtube-icon {{ lesson.hideTextIntroClass }}\\\"></i> </button> <button data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"landscape snap-icon-btn fit-width js-lesson-list-chevron\\\" aria-label=\\\"species list for the lesson {{ lesson.name }}\\\"> <i class=\\\"fas fa-chevron-down\\\"></i> </button> </div> </div> </div> <div data-container-id=\\\"{{ lesson.id }}\\\" class=\\\"species-container js-species-container\\\"></div> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"standard-block border-bottom double-centred-block\\\"></div> <div class=tiles-container> <div class=\\\"squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\"> <div> <img class=square src=\\\"{{ image.medium }}\\\" data-toggle=modal data-target=#imageModal data-item-name=\\\"{{ image.itemName }}\\\" data-url=\\\"{{ image.url }}\\\"/> </div> </div> </div> <div class=lesson-companion> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"imageSlider_{{ identifier }}\\\" class=\\\"imageSlider carousel slide\\\" data-ride=carousel data-interval=false> <div class=\\\"carousel-inner js-carousel-inner\\\"> <div data-repeat-image=\\\"{{ images }}\\\"> <div class=\\\"carousel-item image-slider-190\\\"> <img role=button src=\\\"{{ image.medium }}\\\" data-title=\\\"{{ image.itemName }}\\\" data-source=\\\"{{ image.source }}\\\" data-license=\\\"{{ image.license }}\\\" data-rights-holder=\\\"{{ image.rightsHolder }}\\\" data-photographers-name=\\\"{{ image.photographersName }}\\\" data-url=\\\"{{ image.url }}\\\" data-provider=\\\"{{ image.provider }}\\\" data-item-name=\\\"{{ image.itemName }}\\\" data-index=\\\"{{ image.index }}\\\" alt=\\\"Give {{ image.itemName }} as your answer\\\"> </div> </div> <div> <div class=\\\"attribution-layer js-attribution-layer {{ identifier }}\\\"></div> <ol class=\\\"carousel-indicators js-carousel-indicators\\\" data-repeat-image=\\\"{{ images }}\\\"> <li data-target=#carouselExampleIndicators data-slide-to=\\\"{{ image.index }}\\\"></li> </ol> </div> </div> <a class=carousel-control-prev href=\\\"#imageSlider_{{ identifier }}\\\" role=button data-slide=prev data-slider=\\\"#imageSlider_{{ identifier }}\\\"> <button class=\\\"btn snap-icon-btn carousel-control-prev-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button> <button class=sr-only>Previous</button> </a> <div class=carousel-control-next href=\\\"#imageSlider_{{ identifier }}\\\" role=button data-slide=next data-slider=\\\"#imageSlider_{{ identifier }}\\\"> <button class=\\\"btn snap-icon-btn carousel-control-next-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button> <button class=sr-only>Next</button> </div> <div class=\\\"description_{{ identifier }} image-description\\\"></div> <div class=double-centred-block></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=attribution-layer> <div class=\\\"rights-link js-rights-link\\\"> <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\"> <i class=\\\"fas fa-copyright\\\"></i> </div> <div></div> <div class=\\\"rights-link-copyright double-centred-block\\\"> <a href=\\\"{{ large }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <i class=\\\"fas fa-external-link-alt\\\"></i> </a> </div> </div> <div class=\\\"rights-attribution hide-important js-rights-attribution\\\"> <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\"> <i class=\\\"fas fa-copyright\\\"></i> </div> <div class=double-centred-block> <a href=\\\"{{ source }}\\\" target=_blank> <span class=centred-block> <span class=sr-only>Opens in new window</span> <span class=\\\"underline-link half-margin-right\\\">{{ author }}</span> <i class=\\\"super active-icon fas fa-external-link-alt\\\"></i> </span> </a> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span class=\\\"feature-label js-compare-species-label\\\"></span> <span title=\\\"Lookalike species\\\" class=\\\"landscape compare-species-link js-compare-species-link\\\" data-toggle=modal data-target=#imageComparisonModal data-slides=\\\"{{ slides }}\\\"> <i class=\\\"fas fa-clone\\\"></i> </span> <span title=\\\"Lookalike species\\\" class=\\\"portrait compare-species-link js-compare-species-link\\\"> <i class=\\\"fas fa-clone\\\"></i> </span>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=js-relationship-card-list data-repeat-lookalike=\\\"{{ lookalikes }}\\\"> <div class=lookalike-card> <div>{{ lookalike.species }}</div> <div>{{ lookalike.speciesDescription }}</div> <div class=js-test-card-container-link> <span data-toggle=\\\"{{ lookalike.modal }}\\\" data-target=#cardModal class=\\\"{{ lookalike.className }}\\\" id=\\\"{{ lookalike.lookalike }}\\\">{{ lookalike.lookalike }}</span> </div> <div>{{ lookalike.lookalikeDescription }}</div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div class=js-relationship-card-list data-repeat-relationship=\\\"{{ relationships }}\\\"> <div class=relationship-card> <div class=cols> <div>Relationship</div><div>{{ relationship.type }}</div> </div> <div class=cols> <div class=js-test-card-container-link> <span data-toggle=\\\"{{ relationship.modal }}\\\" data-target=#cardModal class=\\\"{{ relationship.className }}\\\" id=\\\"{{ relationship.speciesA }}\\\">{{ relationship.speciesA }}</span> </div> <div class=capitalise>{{ relationship.speciesARole }}</div> </div> <div class=cols> <div>{{ relationship.speciesB }}</div><div class=capitalise>{{ relationship.speciesBRole }}</div> </div> <div>{{ relationship.description }}</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=id-box> <div>{{ id }}</div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div data-repeat-detail=\\\"{{ details }}\\\"> <dl class=info_detail> <dt>{{ detail.term }}</dt> <dd><img class=\\\"{{ detail.imgClassName }}\\\" src=\\\"{{ detail.img.url }}\\\" alt=\\\"\\\"></dd> <dd>{{ detail.definition }}</dd> </dl> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"traitSlider{{ id }}\\\" class=\\\"info carousel slide\\\" data-ride=false data-interval=false> <div class=carousel-inner data-repeat-trait=\\\"{{ traits }}\\\"> <dl class=carousel-item> <div> <dt>{{ trait.name }}</dt> <dd>{{ trait.value }} {{ trait.unit }}</dd> </div> <div class=hide-important>{{ trait.description }}</div> </dl> </div> <a class=\\\"carousel-control carousel-control-prev\\\" href=\\\"#traitSlider{{ id }}\\\" role=button data-slide=prev> <button class=carousel-control-prev-icon aria-hidden=true></button> <button class=sr-only>Previous</button> </a> <a class=\\\"carousel-control carousel-control-next\\\" href=\\\"#traitSlider{{ id }}\\\" role=button data-slide=next> <button class=carousel-control-next-icon aria-hidden=true></button> <button class=sr-only>Next </button></a> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=data-box> <div> <span class=js-world>Worldwide</span><span class=js-taxon-count>---</span> </div> <div> <span class=js-place>Location</span><span class=js-place-taxon-count>---</span> </div> <div> <span><a target=_blank href=\\\"\\\" class=\\\"underline-link js-taxon-link underline-link-left-margin\\\">iNat</a></span> <span class=js-test-card-container-wiki></span> <span><a class=\\\"species-card-eol-link js-test-card-container-eol-link underline-link\\\">EOL</a></span> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=calendar-box> <div data-repeat-row=\\\"{{ data }}\\\" class=\\\"\\\"> <div class=col data-repeat-value=\\\"{{ row }}\\\"> <div title=\\\"{{ value.count }}\\\" class=\\\"{{ value.class }}\\\">{{ value.month }}</div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span> <span class=\\\"uppercase small-text js-native-container\\\"></span> <span class=rank>{{ trait }}</span> <span class=\\\"lookalikes js-lookalikes\\\"></span> <span class=\\\"badge badge-light js-subspecies-badge\\\" data-toggle=modal data-target=#badgeListModal>{{ subSpeciesCount }}</span> <span class=sr-only>species of this family in the collection</span> </span> <span class=hide-empty>{{ familyVernacularName }}</span> <span class=\\\"latin hide-empty\\\">{{ familyName }}</span> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul data-repeat-language=\\\"{{ languageNames }}\\\" class=\\\"scrollable badge-list\\\"> <li class=capitalise> <div class=\\\"margin-top uppercase\\\">{{ language.name }}</div> <ul data-repeat-common=\\\"{{ language.names }}\\\"> <li>{{ common }}</li> </ul> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=\\\"card-card js-species-card\\\"> <div id=card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container vernacular-name-badge js-names-container\\\"> <div> <span class=vernacular-name>{{ vernacularName }}</span> </div> <div> <span class=binomial>{{ name }}</span> <span class=js-names-badge></span> <span class=\\\"portrait bird-song-icon-disabled js-bird-song-player\\\" data-src=player data-toggle=modal data-target=#basicModal> <i class=\\\"fas fa-music\\\"></i> </span> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"data-box-container landscape\\\"> <div class=\\\"calendar-container landscape\\\"> <div class=js-calendar-box></div> </div> <div class=\\\"inat-box js-inat-box\\\"></div> <div class=\\\"taxa-container landscape js-taxa-box\\\"></div> </div> <div class=\\\"portrait-grid species-card-images carousel js-test-card-container-images\\\"></div> <div class=\\\"mixed-content-container scrollable\\\"> <div class=\\\"landscape bird-song\\\"> <div class=hide-empty> <iframe class=js-bird-song src=\\\"\\\" scrolling=no frameborder=0 width=80vw height=115> </iframe> </div> </div> <div class=\\\"card-txt-block lookalikes js-lookalikes\\\"></div> <div class=\\\"js-info-box-details info-details\\\"></div> </div> <div class=\\\"info-box js-info-box\\\"></div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container\\\"> <div class=\\\"taxon card-card js-taxon-card\\\"> <div id=taxon-card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container vernacular-name-badge js-names-container\\\"> <div> <span>{{ vernacularName }}</span> </div> <div> <span class=binomial>{{ name }}</span> <span class=\\\"names-badge js-names-badge\\\" data-toggle=modal data-target=#badgeListModal>{{ occurrences }}</span> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"data-box-container sub-header\\\"> <div class=data-box> <div class=\\\"taxon-data js-taxon-rank\\\"><span>Rank</span> <span>{{ rank }}</span></div> <div class=taxon-data><span>Species</span> <span>{{ species }}</span></div> <div class=\\\"taxon-data js-taxon-genus\\\"><span>Genera</span> <span>{{ genera }}</span></div> <div class=\\\"taxon-data js-taxon-family\\\"><span>Families</span> <span>{{ families }}</span></div> </div> <div class=\\\"landscape external-links js-external-links\\\"> <div><a href=\\\"{{ eol }}\\\" target=_blank class=underline-link>EOL</a><span> taxon home page</span> <span class=names-badge> <i class=\\\"super fas fa-external-link-alt\\\"></i></span></div> <div><a href=\\\"{{ wiki }}\\\" class=underline-link data-toggle=modal data-target=#wikiModal>Wikipedia page</a></div> </div> </div> <div class=mixed-content-container> <div class=centred-block> <div class=id-box-container> <div class=id-box> <div> </div> <div> <div class=taxon-identification>{{ identification }}</div> </div> </div> </div> <div class=taxon-summary> <div>{{ summary }}</div> </div> </div> </div> <div class=\\\"info-box js-taxon-info-box\\\"></div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=\\\"portrait-grid non-taxon-card-images carousel js-non-taxon-card-images\\\"></div> <div class=\\\"card-card card non-taxon js-non-taxon-card\\\"> <div id=taxon-card-header class=question-container> <div class=\\\"species-header js-species-header\\\"> <img src=\\\"{{ image.small }}\\\" alt=\\\"\\\"> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container js-names-container\\\"> <div> Foliose </div> <div> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <div class=\\\"non-taxa js-non-taxa\\\"> <div class=\\\"btn-group btn-group-toggle\\\" data-toggle=buttons data-repeat-taxon=\\\"{{ group }}\\\"> <label class=\\\"btn btn-secondary\\\" id=\\\"{{ taxon.id }}\\\"> <input type=radio name=options id=\\\"{{ taxon.id }}\\\" autocomplete=off checked=checked> {{ taxon.id }} </label> </div> </div> <div class=definitions> <div class=\\\"non-taxa-definition js-non-taxa-definition\\\"> <div></div> </div> <div class=non-taxa-definition> <div class=id-box> <div> <div class=landscape></div> <div class=portrait></div> </div> <div> <div></div> </div> </div> </div> <div class=\\\"landscape species-card-wiki\\\"> <span class=\\\"non-taxon-card-wiki js-non-taxon-card-wiki\\\"></span> </div> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<table id=\\\"species_list_id_{{ id }}\\\" class=\\\"species-table js-species-list\\\" style=width:100%> <tbody data-repeat-item=\\\"{{ itemImages }}\\\"> <tr class=\\\"table-row master js-list-item\\\" id=\\\"id_{{ item.id }}\\\"> <td id=\\\"{{ item.name }}\\\" data-snap-index=\\\"{{ item.snapIndex }}\\\"> <button class=\\\"btn snap-icon-btn double-centred-block\\\"> <img id=\\\"{{ item.name }}\\\" src=\\\"{{ item.small }}\\\" alt=\\\"Open gallery to more photos of {{ item.name }}\\\" data-toggle=modal data-item-name=\\\"{{ item.name }}\\\" data-target=#imageModal data-id=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rights-holder=\\\"{{ item.rightsHolder }}\\\" data-title=\\\"{{ item.name }}\\\" data-license=\\\"{{ item.license }}\\\" data-source=\\\"{{ item.source }}\\\" data-provider=\\\"{{ item.provider }}\\\"> </button> </td> <td> <button data-toggle=modal data-name=\\\"{{ item.name }}\\\" data-vernacular-name=\\\"{{ item.vernacularName }}\\\" data-id=\\\"{{ item.id }}\\\" data-type=speciesCardLink data-target=#cardModal class=\\\"snap-link-btn underline-link js-test-card-container-link\\\">{{ item.vernacularName }}</button> <span class=\\\"no-underline-link latin-name\\\"> <button data-toggle=modal data-name=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=genus data-genus=\\\"{{ item.genus }}\\\" data-target=#cardModal class=\\\"{{ item.genusLinkClass }}\\\">{{ item.genus }}</button> <span>{{ item.species }}</span> </span> </td> <td class=wide-screen> <button data-toggle=modal data-name=\\\"{{ item.taxonomy.family }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=family data-family=\\\"{{ item.taxonomy.family }}\\\" data-target=#cardModal class=\\\"no-underline-link {{ item.familyLinkClass }}\\\">{{ item.taxonomy.family }}</button> <button data-toggle=modal data-name=\\\"{{ item.taxonomy.order }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=order data-order=\\\"{{ item.taxonomy.order }}\\\" data-target=#cardModal class=\\\"no-underline-link {{ item.orderLinkClass }} js-order-link\\\">{{ item.taxonomy.order }}</button> </td> <td class=\\\"{{ item.iconicTaxon }} {{ item.hasTaxonClassName }}\\\"> <span id=\\\"{{ item.id }}\\\" name=\\\"{{ item.name }}\\\"><i class=\\\"{{ item.iconicTaxonIcon }}\\\"></i></span> <span class=\\\"mushroom-icon {{ item.hideFungiIcon }}\\\"></span> </td> <td class=\\\"{{ item.hasVideoClassName }}\\\"> <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width js-youtube\\\" aria-label=\\\"start video from the species {{ item.name }}\\\"> <i class=\\\"fab fa-youtube youtube-icon\\\" data-name=\\\"{{ item.name }}\\\"></i> </button> </td> <td class=\\\"{{ item.hasVideoClassName }}\\\"> <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width accordion-icon js-accordion\\\" aria-label=\\\"video commentary for the species {{ item.name }}\\\"> <i data-name=\\\"{{ item.name }}\\\" class=\\\"fas fa-chevron-down\\\"></i> </button> </td> </tr> </tbody> </table> <button class=\\\"btn snap-action-btn portrait btn-current-lesson-begin js-btn-current-lesson-begin\\\">Quiz</button>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<script>var tag=document.createElement(\\\"script\\\");tag.src=\\\"https://www.youtube.com/iframe_api\\\";var firstScriptTag=document.getElementsByTagName(\\\"script\\\")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),window.onYouTubeIframeAPIReady=function(){window.YT=YT}</script> <div class=\\\"home-scrolling-container js-home-scrolling-container\\\"> <div class=\\\"title standard-block double-centred-block\\\">{{ video.title }}</div> <div class=video> <div style=min-height:1px></div> <iframe type=text/html id=embedded-video width=100% src=\\\"https://www.youtube.com/embed/{{ video.id }}?enablejsapi=1&playsinline=1&start={{ video.playAt }}\\\" frameborder=0 allowfullscreen> </iframe> </div> <div class=scrollable> <div class=\\\"one-and-half-standard-block centred-block justify-space-between padding-left\\\"> <div class=centred-block> <div class=margin-right> <img width=48px height=48px src=\\\"{{ video.src }}\\\" alt=\\\"\\\"> </div> <div class=vertical-centred-block> <div><span class=\\\"hide margin-right\\\">Created by:</span><span class=emphasis>{{ video.presenter }}</span></div> <div><span class=\\\"hide margin-right\\\">Location:</span><span class=font-size-small>{{ video.location }}</span></div> </div> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div>{{ note.tag }}</div> <div>{{ note.description }}</div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container score-summary-container js-test-card-container\\\"> <div class=js-summary-card> <div class=\\\"test-card-question standard-block centred-block js-test-card-question\\\"> <div class=\\\"question question-txt\\\"> <div> <span class=\\\"hide-empty question-question js-question-question\\\">Quiz progress</span> <span class=\\\"hide-empty question-statement\\\"></span> </div> </div> </div> <div id=accordion class=\\\"score-summary scrollable review-summary\\\"> <div class=score-summary-row-title> <div> <div class=double-centred-block> <span class=uppercase>{{ collection.name }}</span> </div> <div class=double-centred-block> <span>Round {{ lesson.currentRound }} of {{ lesson.rounds }}</span> </div> </div> </div> <div class=\\\"score-summary-footer running-block centred-block\\\"> <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button> </div> <div class=js-score-summary-rows></div> <div class=\\\"score-summary-footer running-block centred-block\\\"> <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button> </div> </div> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"score-summary-row species\\\"> <div></div> <div> <div></div> <div> <span>{{ vernacularName }}</span> <span class=latin>{{ binomial }}</span> </div> </div> <div>{{ score }}</div> </div> <div data-repeat-row=\\\"{{ rows }}\\\"> <button class=\\\"btn snap-icon-btn collapsed score-summary-row header\\\" type=button data-toggle=collapse data-target=\\\"#{{ row.id }}\\\" aria-expanded=false aria-controls=\\\"{{ row.id }}\\\"> <div data-is-true=\\\"{{ row.success }}\\\"> <i class=\\\"fas fa-check\\\"></i> <i class=\\\"fas fa-times\\\"></i> </div> <div> <div class=binomial>{{ row.statement }}</div> <div>{{ row.questionText }}</div> </div> <div> <i class=\\\"fas fa-chevron-down\\\"></i> </div> </button> <div id=\\\"{{ row.id }}\\\" class=\\\"collapse score-summary-row in-columns\\\" data-repeat-answer=\\\"{{ row.answers }}\\\" data-parent=#accordion> <div data-question=\\\"{{ ^.row.question }}\\\"> <div> </div> <div data-is-true=\\\"{{ answer.isTrue }}\\\" data-is-wrong-answer=\\\"{{ answer.isWrongAnswer }}\\\"> <div> <img data-has-image=\\\"{{ answer.hasImage }}\\\" src=\\\"{{ answer.url }}\\\" alt=\\\"{{ answer.value }}\\\"> </div> <div> <span>{{ answer.value }}</span><span class=\\\"hide-empty margin-left\\\">{{ answer.name }}</span> </div> <div></div> </div> <div></div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"horizontal-evenly-spaced-block js-no-questions\\\"> <span>You haven't answered any questions yet.</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\"> <div class=js-test-card> <div id=test-card-header class=question-container> <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\"> <i class=\\\"\\\"></i> </div> <div class=\\\"hide-empty question-header\\\"> <div> <div class=\\\"names-container {{ headerClassName }}\\\"> <div> <h2 class=vernacular-name>{{ vernacularName }}</h2> <span class=\\\"hide-empty names-badge\\\"></span> </div> <div> <h2 class=binomial>{{ binomial }}</h2> <span class=\\\"names-badge traits-count-badge js-traits-count-badge\\\"></span> <h2 class=\\\"term-header hide-empty js-term-header\\\">{{ term }}</h2> </div> </div> </div> </div> <div class=card-link-container> <i class=\\\"far fa-arrow-alt-circle-right js-card-link\\\"></i> </div> </div> <form action=\\\"\\\"> <fieldset> <div class=\\\"test-card-question standard-block centred-block js-test-card-question border-bottom\\\"> <div class=\\\"question question-txt {{ className }}\\\"> <div> <legend class=\\\"hide-empty question-question js-question-question\\\">{{ question }}</legend> <legend class=\\\"hide-empty question-help js-question-help\\\">{{ help }}</legend> <legend class=\\\"hide-empty question-statement js-statement-para\\\">{{ statement }}</legend> <legend class=\\\"hide-empty margin-top question-provider-question js-question-para\\\">{{ providerQuestion }}</legend> </div> </div> </div> <div class=\\\"test-card-content js-test-card-content scrollable\\\"> </div> </fieldset> </form> <div class=\\\"text-question js-txt-question\\\"></div> <div class=action-update-container> <div class=action-update> <button disabled=disabled class=\\\"btn snap-action-btn js-continue-lesson-btn\\\">Continue lesson</button> </div> </div> </div> </div> <div class=\\\"swap-out-card js-species-container\\\"></div> <div class=\\\"swap-out-card js-taxon-container\\\"></div> <div class=\\\"swap-out-card js-summary-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=filter-language-option-block> <div class=filter-options> <div class=language-options> <div class=dropdown> <button class=\\\"btn smaller-text snap-btn dropdown-toggle\\\" type=button id=taxonLanguageBtn data-toggle=dropdown aria-haspopup=true aria-expanded=false> Taxon language </button> <div class=dropdown-menu aria-labelledby=dropdownMenuButton data-repeat-language=\\\"{{ languages }}\\\"> <a id=\\\"{{ language.lang }}\\\" class=dropdown-item href=#>{{ language.name }}</a> </div> </div> </div> </div> <h2 class=\\\"half-standard-block centred-block\\\">Common names will be shown in<span id=taxonLanguageTxt>English</span>.</h2> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<menu> <ul class=custom-lesson-menu-options data-repeat-option=\\\"{{ options }}\\\"> <li data-option=\\\"{{ option.id }}\\\"> <button class=\\\"icon snap-icon-btn arrow-wrapper\\\"><span class=small-text>{{ option.text }}</span><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></button> </li> </ul> </menu> <div class=js-language-selection-container></div> <h3 class=\\\"standard-block centred-block js-persistence-warning\\\"> <span><i class=\\\"fas fa-exclamation\\\"></i> You are not currently logged in. Your collection will not be availble outside this browser.</span> </h3>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=border-bottom> <div class=\\\"running-block vertical-centred-block location-option html5-location\\\"> <div class=html5-location-place><button class=\\\"btn snap-action-btn js-set-location-btn\\\"></button><span class=landscape></span></div> </div> <div class=\\\"standard-block location-option place bottom-aligned\\\"> <form id=locationForm action=#> <div class=standard-block> <label for=#inat-place class=extra-small-text>Location</label> <input id=inat-place type=text placeholder=\\\"Or start typing the name of a place.\\\"> <input class=hide type=submit value=\\\"\\\"> </div> </form> </div> <div class=\\\"location-option margin-top range\\\"> <div class=range-slider> <div class=js-range></div> <div> <span class=range-limits>0km</span> <span class=margin-right style=width:100%><input class=\\\"set-range-input js-set-range-input\\\" type=range min=0 max=250 value=10></span> <span class=range-limits> 250km</span> <span class=\\\"saved js-range-saved\\\"></span> </div> </div> </div> </div> <div class=location-filter-options> <div> <div class=black-text>Species by season</div> <div class=\\\"season snap-switch margin-top margin-bottom\\\"> <div class=embedded-switch> <div class=txt-left><span>{{ observableMonths }}</span></div> <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\"> <div></div> </div> <div class=txt-right><span>All Year</span></div> </div> </div> </div> <div> <div class=black-text>Species by observation count</div> <div class=\\\"margin-top margin-bottom\\\"> <span> Top <input min=1 max=500 required class=\\\"medium half-margin-right js-location-no-of-records\\\" type=number value=\\\"{{ noOfRecords }}\\\"> most observed. </span> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div class=\\\"inat snap-switch running-block\\\"> <div class=embedded-switch> <div class=txt-left><span>iNaturalist User</span></div> <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\"> <div></div> </div> <div class=txt-right><span>Project</span></div> </div> </div> <div class=\\\"location-option inat-entry\\\"> <div class=\\\"input-container standard-block bottom-aligned\\\"> <form id=inatForm action=#> <input id=inat-identity type=text placeholder=\\\"Start typing a user or project Id.\\\"> </form> </div> </div> <div class=\\\"location-option chosen-guide-filter js-chosen-inat standard-block\\\"> <div>Learn more about <a href=https://www.inaturalist.org/ target=_blank class=underline-link>iNaturalist</a>.</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"iconic-taxa-categories js-iconic-taxa-categories\\\"> <div class=double-centred-block id=aves><div> <button class=snap-icon-btn aria-label=birds><i class=\\\"fas fa-dove\\\" aria-hidden=true></i></button> <div>Birds</div></div> </div> <div class=double-centred-block id=amphibia><div> <button class=snap-icon-btn aria-label=amphibians><i class=\\\"fas fa-frog\\\" aria-hidden=true></i></button> <div>Amphibians</div></div> </div> <div class=double-centred-block id=mammalia><div> <button class=snap-icon-btn aria-label=mammals><i class=\\\"fas fa-paw\\\" aria-hidden=true></i></button> <div>Mammals</div></div> </div> <div class=double-centred-block id=insecta><div> <button class=snap-icon-btn aria-label=insects><i class=\\\"fas fa-bug\\\" aria-hidden=true></i></button> <div>Insects</div></div> </div> <div class=double-centred-block id=fungi><div> <button class=snap-icon-btn aria-label=\\\"fungi and lichens\\\"><svg-icon class=si-glyph-mushrooms><src href=./static/icons/si-glyph-mushrooms.svg /></svg-icon></button> <div class=small-text>Fungi & Lichens</div></div> </div> <div class=double-centred-block id=plantae><div> <button class=snap-icon-btn aria-label=plants><i class=\\\"fas fa-leaf\\\" aria-hidden=true></i></button> <div>Plants</div></div> </div> <div class=double-centred-block id=reptilia><div> <button class=snap-icon-btn aria-label=reptiles><i class=\\\"far fa-registered\\\" aria-hidden=true></i></button> <div>Reptiles</div></div> </div> <div class=double-centred-block id=lepidoptera><div> <button class=snap-icon-btn aria-label=\\\"butterflies and moths\\\"><i class=\\\"fas fa-barcode\\\" aria-hidden=true></i></button> <div class=small-text>Butterflies & Moths</div></div> </div> </div> <div class=\\\"hide-important guide-bottom-actions\\\"> <span>Know what you want?</span> <span class=\\\"underline-link species-picker-link js-species-picker-link\\\">Species picker</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"guide-text-container hide-empty\\\"> <input id=input-species type=text placeholder=\\\"Start typing a latin species name\\\" autofocus> </div> <div class=\\\"autocomplete-options-container hide-important\\\" id=snapdragon-species-autocomplete style=width:unset></div> <ul class=\\\"selected-species js-selected-species\\\" data-repeat-species=\\\"{{ selectedSpecies }}\\\"> <li class=\\\"custom-control custom-checkbox\\\"> <input type=checkbox class=custom-control-input id=\\\"{{ species.name }}\\\" checked=checked> <label class=custom-control-label for=\\\"{{ species.name }}\\\">{{ species.name }}</label> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <input id=input-species type=text placeholder=\\\"Start typing a latin species name\\\" autofocus> </div> <div class=\\\"autocomplete-options-container hide-important\\\" id=snapdragon-species-autocomplete style=width:unset></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=selected-species-container> <div class=\\\"scrollable open js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div> <div class=\\\"species-search js-species-search\\\"> <div><div class=icon><i class=\\\"fas fa-sun slow-spin\\\"></i></div></div> <h2 class=standard-block>This search is based on observations recorded by the public on <a class=underline-link target=_blank href=https://www.inaturalist.org/ >iNaturalist</a>.</h2> </div> <div> <div class=\\\"hide-empty request-feedback js-request-feedback\\\">Contacting iNaturalist…</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\"> <div class=\\\"lesson-name hide-important\\\" id=js-input-collection-name> <label for=#new-collection-name class=extra-small-text>lesson name</label> <input id=new-collection-name type=text value=\\\"{{ collection.name }}\\\"> </div> <div class=lesson-taxa><span class=js-lesson-taxa-count>{{ collection.items.length }}</span> <span class=js-lesson-taxa>{{ collection.taxa }}</span></div> </div> <div class=\\\"edit-species centred-block half-standard-block js-edit-species\\\"> <button class=\\\"snap-btn fit-width\\\">Edit lesson</button> </div> <div class=selected-species-container> <div class=\\\"scrollable js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"{{ className }}\\\"> <div class=\\\"actions js-actions\\\"></div> <div class=\\\"save-your-changes js-save-your-changes\\\"></div> </div> <div class=\\\"chosen js-chosen\\\"> <div class=prop-value-block><span></span><span class=selected-text></span></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=snapdragon-container> <dl data-repeat-item=\\\"{{ glossary }}\\\" class=\\\"definition card scrollable\\\"> <dt>{{ item.term }}</dt><dd>{{ item.definition }}</dd> </dl> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"margin-left centred-block standard-block padding-top\\\"> Answer <input min=1 max=\\\"{{ quickFire.count }}\\\" required class=\\\"big half-margin-left half-margin-right js-input-quick-fire\\\" type=number value=\\\"{{ quickFire.count }}\\\"> <span class=landscape>questions selected at random from <span class=js-quick-fire-count>{{ quickFire.count }}</span> terms.</span> <span class=portrait>from <span class=js-quick-fire-count>{{ quickFire.count }}</span> terms.</span> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait padding\\\"></div> <ul class=\\\"quick-fire-taxa margin-left js-quick-fire-taxa\\\" data-repeat-taxon=\\\"{{ quickFire.filter.taxa }}\\\"> <li class=\\\"custom-control custom-checkbox\\\" data-name=\\\"{{ taxon.name }}\\\"> <input type=checkbox class=custom-control-input id=\\\"{{ taxon.name }}\\\" checked=checked> <label class=custom-control-label for=\\\"{{ taxon.name }}\\\">{{ taxon.name }}</label> <span data-taxon=\\\"{{ taxon.name }}\\\" class=\\\"\\\">{{ taxon.count }}</span> </li> </ul> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait padding\\\"></div> <div class=\\\"btn-group btn-group-toggle quick-fire-branches js-quick-fire-branches\\\" data-toggle=buttons data-repeat-branch=\\\"{{ branches }}\\\"> <label data-key=\\\"{{ branch.name }}\\\" class=\\\"btn btn-secondary margin-left active\\\" data-value=\\\"{{ branch.name }}\\\"> <input type=checkbox name=branches id=\\\"{{ branch.name }}\\\" autocomplete=off> {{ branch.name }} <span data-name=\\\"{{ branch.name }}\\\">{{ branch.count }}</span> </label> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"portrait half-padding\\\"></div> <div class=\\\"btn-group btn-group-toggle margin-left quick-fire-options margin-bottom js-quick-fire-filter-options\\\" data-toggle=buttons data-repeat-option=\\\"{{ options }}\\\"> <label data-key=\\\"{{ option.key }}\\\" class=\\\"btn btn-secondary margin-right\\\" data-value=\\\"{{ option.value }}\\\"> <input type=radio name=options id=\\\"{{ option.key }}\\\" autocomplete=off> {{ option.value }} </label> </div> <div class=\\\"landscape half-standard-block\\\"></div> <div class=\\\"low-relief-block standard-block centred-block horizontal-evenly-spaced-block\\\"> <div class=\\\"custom-control custom-checkbox\\\"> <input type=checkbox class=\\\"custom-control-input js-quick-fire-technical\\\" id=technical> <label class=custom-control-label for=technical>Include technical (advanced)</label> </div> <div> <div class=\\\"btn snap-action-btn js-quick-fire-reset\\\">Reset filters</div> </div> </div> <div class=\\\"centred-block absolute-bottom\\\"> <button class=\\\"btn snap-action-btn js-create-quick-fire\\\">Start quick-fire review</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"margin-left centred-block standard-block justify-space-between\\\"> <h2> <span>Question {{ total }} of {{ count }}</span> </h2> <div class=margin-right> <button class=\\\"btn snap-btn small-text js-quick-review-progress\\\">Progress</button> </div> </div> <div class=\\\"centred-block double-standard-block modal-background-relief border-light js-quick-fire-definition\\\"> <span class=padding>{{ question.definition }}</span> </div> <ul id=0 class=\\\"strips description margin-top js-quick-layouts js-quick-fire-options\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <li class=strip id=\\\"{{ answer.term }}\\\" role=group aria-label=\\\"answers to the question\\\"> <button class=snap-icon-btn data-answer-index=\\\"{{ answer.index }}\\\"> <span>{{ answer.term }}</span> </button> </li> </ul> <div id=1 class=\\\"hide vertical-block centred-block margin-top js-quick-layouts quick-fire-text-entry js-quick-fire-text-entry\\\"> <div class=\\\"centred-block standard-block\\\"> <input type=text placeholder=\\\"Enter the term that fits this description\\\"> </div> <div class=half-standard-block> <div class=\\\"hide centered-block js-quick-fire-hint\\\"> <span class=\\\"margin-left latin\\\">Hint: </span><span>The answer has two words.</span> </div> </div> </div> <div class=\\\"vertical-centred-block centred-block absolute-bottom\\\"> <div class=\\\"margin-left centred-block standard-block js-quick-fire-message\\\"></div> <div class=half-standard-block> Score {{ correct }} of {{ answered }} </div> <div class=action-update> <button disabled=disabled class=\\\"btn snap-action-btn js-continue-quick-fire-btn\\\">Continue lesson</button> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=quick-fire> <div class=\\\"justify-space-between centred-block margin-left standard-block js-quick-fire-summary\\\"> <div> <span>You have answered all of the questions.</span> </div> <div class=\\\"margin-right padding-left nowrap\\\"> <button class=\\\"btn snap-btn small-text js-quick-review-continue-review\\\">Vocab</button> </div> </div> <div class=\\\"border-light standard-block padding-left centred-block modal-background-relief js-score-text-summary\\\"> You have scored {{ score.correct }} out of {{ score.total }} so far. </div> <ul class=\\\"margin-top nav nav-pills nav-fill quick-review-tabs js-quick-review-tabs mb-3\\\" role=tablist> <li class=nav-item> <a class=nav-link href=# id=js-quick-review-correct data-toggle=pill role=tab> <span class=landscape>Correct answers</span> <span class=portrait>Correct</span> </a> </li> <li class=nav-item> <a class=\\\"nav-link active\\\" href=# id=js-quick-review-incorrect data-toggle=pill role=tab> <span class=landscape>Incorrect answers</span> <span class=portrait>Incorrect</span> </a> </li> </ul> <div class=\\\"scrollable accordions-container\\\"> <div id=accordion-correct data-type=js-quick-review-correct class=\\\"hide-important quick-review-answers js-quick-review-answers\\\" data-repeat-pass=\\\"{{ passes }}\\\"> <div class=\\\"card quick-fire-summary-row margin-bottom\\\"> <div class=\\\"card-header capitalise\\\" id=\\\"pass_header_{{ pass.index }}\\\"> <div data-toggle=collapse data-target=\\\"#pass_target_{{ pass.index }}\\\" aria-expanded=true aria-controls=\\\"pass_target_{{ pass.index }}\\\"> <div>{{ pass.term }}</div> </div> </div> </div> <div id=\\\"pass_target_{{ pass.index }}\\\" class=collapse aria-labelledby=\\\"pass_header_{{ pass.index }}\\\" data-parent=#accordion-correct> <div class=card-body> <div>{{ pass.definition }}</div> <div class=\\\"centred-block half-standard-block\\\"> <span class=sr-only>Opens in new window</span> <a class=\\\"small-text underline-link {{ pass.showWikiClass }}\\\" href=\\\"{{ pass.wiki }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <span>View Wikipedia page for {{ pass.term }} in a new window</span> <i aria-hidden=true class=\\\"super fas fa-external-link-alt\\\"></i> </a> </div> </div> </div> </div> <div id=accordion-incorrect data-type=js-quick-review-incorrect class=\\\"quick-review-answers js-quick-review-answers\\\" data-repeat-fail=\\\"{{ fails }}\\\"> <div class=\\\"card quick-fire-summary-row margin-bottom\\\"> <div class=\\\"card-header capitalise\\\" id=\\\"fail_header_{{ fail.index }}\\\"> <div data-toggle=collapse data-target=\\\"#fail_target_{{ fail.index }}\\\" aria-expanded=true aria-controls=\\\"fail_target_{{ fail.index }}\\\"> <div>{{ fail.term }}</div> </div> </div> </div> <div id=\\\"fail_target_{{ fail.index }}\\\" class=collapse aria-labelledby=\\\"fail_header_{{ fail.index }}\\\" data-parent=#accordion-incorrect> <div class=card-body> <div>{{ fail.definition }}</div> <div class=\\\"centred-block half-standard-block\\\"> <a class=\\\"small-text underline-link {{ fail.showWikiClass }}\\\" href=\\\"{{ fail.wiki }}\\\" target=_blank> <span class=sr-only>Opens in new window</span> <span>View Wikipedia page for {{ fail.term }} in a new window</span> <i aria-hidden=true class=\\\"super fas fa-external-link-alt\\\"></i> </a> </div> <div class=\\\"small-text margin-top\\\"><span>You answered: </span><span>{{ fail.answer }}</span></div> </div> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-header centred-block btn standard-block\\\"> <div class=\\\"standard-block js-toggle-element\\\"> <div> <div class=main-header> <h2>Lessons</h2> </div> </div> </div> <div class=\\\"margin-right standard-block js-toggle-control\\\"> <button data-toggle=modal data-target=#createGuide class=\\\"btn snap-btn margin-right small-text js-create-custom-lesson\\\">Create lesson</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container js-home-scrolling-container\\\"> <div class=\\\"title standard-block double-centred-block border-bottom\\\">{{ title }}</div> <div class=\\\"snapdragon-intro padding\\\"> <div class=half-standard-block> <span class=js-species-summary>{{ speciesSummary }}</span> </div> <div class=half-standard-block> <span>{{ season }}</span> </div> <div class=\\\"centred-block standard-block landscape js-intro-text\\\">{{ lessonIntro }}</div> </div> <div class=scrollable></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\"> <div class=lesson-name id=js-input-collection-name> <input type=text value=\\\"{{ collection.name }}\\\"> </div> <div class=\\\"margin-left lesson-taxa\\\"><span class=js-lesson-taxa-count>{{ collection.items.length }}</span> <span class=js-lesson-taxa>{{ collection.taxa }}</span></div> </div> <div class=selected-species-container> <div class=\\\"open scrollable js-selected-species-container\\\"></div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list js-lesson-list\\\"> <ul class=\\\"scrollable js-lesson-container\\\" data-toggle=buttons> </ul> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"double-standard-block vertical-centred-block\\\"> <p class=portrait>Clear all data (and delete your score).</p> <p class=\\\"landscape centred-block standard-block\\\">Clear all data (and delete your score).</p> <button class=\\\"btn snap-action-btn js-clear-cache-btn\\\">Clear all data</button> </div> <hr> <div class=\\\"half-standard-block centred-block\\\">Time for answer to remain visible:</div> <div class=delay-slider> <div class=\\\"standard-block double-centred-block\\\"> <span>0 secs</span> <input class=js-set-delay-input type=range min=0 max=5 value=\\\"{{ delay }}\\\"><span> 5 secs</span> </div> <button class=\\\"btn snap-action-btn js-set-delay-btn\\\">Set delay</button> <div class=\\\"half-standard-block centred-block js-delay-text\\\"></div> </div> <hr class=portrait> <div class=\\\"portrait js-language-selection-container\\\"></div> <hr class=portrait> <div class=\\\"portrait email centred-block\\\"> <a target=_blank href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\"> <i class=\\\"fas fa-envelope\\\"></i> </a> <span class=margin-left>Contact Snapdragon</span> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=modal-content> <div class=snapdragon-container> <div class=\\\"large-text centred-block standard-block\\\">User access</div> <form id=login-form> <div class=\\\"standard-block centred-block\\\"> <input id=login-email type=text placeholder=Email> </div> <div class=\\\"standard-block centred-block\\\"> <input id=login-password type=text placeholder=Password> </div> <button id=js-login-btn class=\\\"btn snap-action-btn\\\">Log in</button> </form> <div class=\\\"standard-block centred-block hide-important js-logged-in\\\">You are now logged in.</div> <div class=\\\"standard-block vertical-centred-block hide-important js-not-logged-in\\\"> <span class=\\\"standard-block centred-block\\\">Please check your email and password.</span> <span class=\\\"standard-block centred-block js-message\\\"></span> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=modal-content> <div class=snapdragon-container> <form id=logout-form> <div class=\\\"vertical-centred-block double-standard-block\\\"> <span>You are logged in with the account:</span> <span>{{ email }}</span> </div> <div> <button id=js-logout-btn class=\\\"btn snap-action-btn\\\">Log out</button> </div> </form> <div class=\\\"standard-block centred-block hide-important js-logged-out\\\">You are now logged out.</div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"large-text centred-block standard-block\\\">Language preference</div> <div class=standard-block> <div>Your selection will affect the vernacular names of species only.</div> <br> <div>It will not apply to lessons in progress.</div> <br> </div> <div class=\\\"double-standard-block js-language-selection-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=PORTRAIT_HOME class=\\\"snap-icon-btn portrait icon list js-list\\\" aria-label=home> <i aria-hidden=true focusable=false class=\\\"fas fa-chalkboard\\\"></i> <span class=visually-hidden>Lesson home</span> </button> </li> <li> <button id=SETTINGS class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=modal data-target=#basicModal aria-label=settings> <i aria-hidden=true focusable=false class=\\\"fas fa-cog\\\"></i> <span class=visually-hidden>Settings</span> </button> </li> <li> <button id=LOGIN class=\\\"snap-icon-btn icon login js-login\\\" data-toggle=modal data-target=#basicModal data-is-logged-in=false aria-label=login> <i aria-hidden=true focusable=false class=\\\"fas fa-user-slash\\\"></i> <i aria-hidden=true focusable=false class=\\\"fas fa-user-check\\\"></i> <span class=visually-hidden>Login or logout</span> </button> </li> <li> <button id=GLOSSARY class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=modal data-target=#glossaryModal aria-label=glossary> <i aria-hidden=true focusable=false class=\\\"fas fa-book-open\\\"></i> <span class=visually-hidden>Glossary</span> </button> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=GLOSSARY class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=modal data-target=#glossaryModal aria-label=glossary> <i aria-hidden=true focusable=false class=\\\"fas fa-book-open\\\"></i> <span class=visually-hidden>Glossary</span> </button> </li> <li> <button id=LANGUAGE class=\\\"snap-icon-btn icon language js-language\\\" data-toggle=modal data-target=#basicModal aria-label=\\\"language settings\\\"> <i aria-hidden=true focusable=false class=\\\"fas fa-language\\\"></i> <span class=visually-hidden>Language</span> </button> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li> <button id=SETTINGS class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=modal data-target=#basicModal aria-label=settings> <i aria-hidden=true focusable=false class=\\\"fas fa-cog\\\"></i> <span class=visually-hidden>Settings</span> </button> </li> <li> <button id=LOGIN class=\\\"snap-icon-btn icon login js-login\\\" data-toggle=modal data-target=#basicModal data-is-logged-in=false aria-label=login> <i aria-hidden=true focusable=false class=\\\"fas fa-user-slash\\\"></i> <i aria-hidden=true focusable=false class=\\\"fas fa-user-check\\\"></i> <span class=visually-hidden>Login or logout</span> </button> </li> <li> <a id=EMAIL class=\\\"landscape icon email js-email\\\" target=_blank href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\"> <i aria-hidden=true focusable=false class=\\\"fas fa-envelope\\\"></i> <span class=visually-hidden>Open email link</span> </a> </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\"> <input disabled=disabled class=js-txt-input type=text placeholder=Genus autocomplete=off autocorrect=off autocapitalize=off spellcheck=false> </div> <div> <div class=\\\"help-txt binomial margin-left js-help-txt\\\"></div> </div> <div class=text-entry-container> <div class=\\\"js-pool-letters pool margin-left margin-top margin-bottom\\\"></div> <div class=horizontal-buttons> <button class=\\\"btn btn-tertiary js-toggle-keyboard\\\">Enable keyboard</button> <button class=\\\"btn btn-tertiary js-delete-letter\\\">Delete last letter</button> <button class=\\\"btn snap-action-btn js-check-answer\\\">Check answer</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"js-test-card-container-images species-card-images\\\"></div> <div class=text-entry> <input class=js-txt-input type=text placeholder=Genus> </div> <div class=\\\"landscape help-txt binomial js-help-txt\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <li class=strip> <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\" data-name=\\\"{{ answer.name }}\\\" data-names=\\\"{{ answer.names }}\\\"> <span>{{ answer.term }}</span> </button> </li> </ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <div class=strip> <button class=\\\"double-centred-block btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\"> <img width=25px height=25px src=\\\"{{ answer.img.url }}\\\" alt=\\\"\\\"> <span>{{ answer.term }}</span> </button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\"> <button class=\\\"btn snap-icon-btn block\\\"> <span class=\\\"given genus\\\">{{ genus }}</span> </button> <button class=\\\"btn snap-icon-btn block\\\"> <span class=species>{{ species }}</span> </button> </div> <div class=text-complete-container> <div class=\\\"margin-bottom landscape\\\">Click to select the correct name:</div> <div class=\\\"margin-bottom portrait\\\">Tap to select the correct name:</div> <div class=\\\"pool js-pool\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <button type=submit class=\\\"btn snap-icon-btn block\\\"> <span>{{ answer.value }}</span> </button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=snapdragon-container> <div class=\\\"cultivar revision card\\\"> <div class=taxon-highlight><span>{{ item.name }}</span><hr></div> <div class=title>The following cultivars are all derived from the single species {{ item.name }}:</div> <div> <div class=list-group-headers> <span>Name</span><span>Variety</span><span class=landscape>Form</span><span class=landscape>More</span> </div> <div class=scrollable> <ul class=\\\"list-group list-group-flush\\\" data-repeat-cultivar=\\\"{{ cultivars }}\\\"> <li class=list-group-item> <span>{{ cultivar.vernacular }}</span> <span>{{ cultivar.variety }}</span> <span class=landscape>{{ cultivar.form }}</span> <span class=landscape><a class=underline-link href=\\\"{{ cultivar.wiki }}\\\" title=\\\"{{ cultivar.wikiAlt }}\\\">WIKI</a> <a class=underline-link href=\\\"{{ cultivar.eol }}\\\" target=_blank title=\\\"{{ cultivar.eolAlt }}\\\">EOL</a></span> </li> </ul> </div> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"species-card-images carousel js-test-card-container-images\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=hide-important>mixed-specimen-images-template.html</div> <div class=\\\"standard-block border-bottom double-centred-block\\\"></div> <div> <div class=\\\"tiles-container squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\"> <div> <img class=square src=\\\"{{ image.medium }}\\\" data-item-name=\\\"{{ image.itemName }}\\\" data-url=\\\"{{ image.url }}\\\"/> </div> </div> </div> <div class=lesson-companion> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=mixed-specimen-container> <div class=margin-bottom> <span>You are choosing from</span> <br> <br> <span> Species shown (in no particular order): </span> </div> <ul class=\\\"images-names-txt js-images-names-txt\\\"></ul> <div class=vertical-evenly-spaced-block> <button class=\\\"btn snap-action-btn btn-auxiliary js-help-txt\\\">Click to refresh selection</button> </div> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=mixed-specimen-container> <div class=margin-bottom><span>{{ help }}</span></div> <ul class=\\\"traits-names-txt js-traits-names-txt\\\" data-repeat-trait=\\\"{{ traits }}\\\"> <li> <img src=\\\"{{ trait.img.url }}\\\" alt=\\\"{{ trait.term }}\\\"> <span>{{ trait.term }}</span> </li> </ul> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\"> <div class=strip> <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\"> <span>{{ answer.term }}</span> </button> </div> </div> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=home-container> <div class=\\\"snapdragon-header double-centred-block\\\"> <h1> <a href=\\\"\\\">Welcome</a> </h1> </div> <main id=main class=\\\"snapdragon-intro scrollable js-snapdragon-intro\\\"> <h3>Learn The Planet is a collection of a video lessons about the natural world.</h3> <h4 class=\\\"centred-block landscape\\\"> <i class=\\\"margin-left extra-large-text fab fa-youtube youtube-icon\\\"></i><span class=margin-left>Click to watch a lesson video.</span> </h4> <h4 class=\\\"centred-block landscape\\\"> <i class=\\\"margin-left extra-large-text fas fa-glasses youtube-icon\\\"></i><span class=margin-left>Click to see lesson species.</span> </h4> <h4 class=landscape> <button class=\\\"btn snap-btn extra-small-text fit-width\\\" disabled=disabled style=opacity:1>Vocab test</button> <span class=margin-left>Brush up on terms and definitions.</span> </h4> <h4 class=landscape> <button class=\\\"btn snap-btn extra-small-text fit-width\\\" disabled=disabled style=opacity:1>Lesson Quiz</button> <span class=margin-left>Test yourself on the contents of a lesson.</span> </h4> <br class=landscape> <br class=landscape> <h4 class=portrait> Tap on the home icon <span><i class=\\\"fas fa-chalkboard\\\"></i></span> below to get started, then select an <span><i class=\\\"fab fa-youtube youtube-icon\\\"></i></span> icon to begin a lesson. </h4> <h5>These lessons took time and effort to make; Learn The Planet would like to thank the people who created them.</h5> </main> </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \" <div class=\\\"modal fade\\\" id=imageModal role=dialog aria-labelledby=imageModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-image-title\\\"> <span></span><span></span> </div> <button type=button class=close data-dismiss=modal aria-label=Close> <span aria-hidden=true>&times;</span> </button> </div> </header> <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div> <div class=\\\"modal-body centred-block\\\"> <div class=\\\"modal-image js-modal-image\\\" style=flex:auto></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade\\\" id=imageComparisonModal tabindex=-1 role=dialog aria-labelledby=imageModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-image-title\\\"> <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div> <span></span><span></span><span class=hide-empty></span><span class=hide-empty></span> </div> </div></header> </div> <div class=modal-body> <div class=\\\"modal-image js-modal-image\\\"></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div>  <div class=\\\"modal fade\\\" id=wikiModal tabindex=-1 role=dialog aria-labelledby=exampleModalLongTitle aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-external-page-title\\\"></div> </div> </header> <div class=\\\"modal-body js-external-page-body\\\"> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=basicModal tabindex=-1 role=dialog aria-labelledby=basicModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <div class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div> <div></div> </div> </div> </div> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=glossaryModal tabindex=-1 role=dialog aria-labelledby=glossaryModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><h1>Glossary</h1></div> <button class=\\\"btn fit-width snap-btn double-margin-right small-text js-quick-fire-filters\\\">Glossary</button> <button class=\\\"btn hide-important fit-width snap-btn double-margin-right small-text js-quick-fire-questions\\\">Quick-fire questions</button> </div> </div> </header> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div> <div class=\\\"modal fade\\\" id=cardModal tabindex=-1 role=dialog aria-labelledby=speciesCardLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-text-title\\\"></div> </div> </header> <div class=\\\"carousel slide\\\"> <div class=carousel-inner> <div class=\\\"prev landscape js-prev\\\" role=button> <span class=carousel-control-prev-icon data-direction=prev aria-hidden=true></span> <span class=sr-only>Previous</span> </div> <div class=\\\"modal-body js-modal-body\\\"> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <div class=\\\"next landscape js-next\\\" role=button> <span class=carousel-control-next-icon data-direction=next aria-hidden=true></span> <span class=sr-only>Next</span> </div> </div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div>  <div class=\\\"modal fade\\\" id=badgeListModal tabindex=-1 role=dialog aria-labelledby=badgeListModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-text-title\\\"></div> </div> </header> <div class=\\\"modal-body js-modal-body\\\"> <div class=\\\"modal-text js-modal-text\\\"></div> </div> <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade modal-guide-wrapper\\\" id=createGuide tabindex=-1 role=dialog aria-labelledby=createGuideModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"modal-title js-modal-title\\\"> <header class=header></header> </div> </div> </header> <div class=\\\"modal-body modal-guide-body\\\"> <div class=\\\"modal-guide-progress standard-block js-modal-guide-progress\\\"> <div class=\\\"modal-subheader js-options\\\"> <h1>Select species</h1> </div> <div class=\\\"hide-important steps js-steps\\\"> <div class=completed>Step 1</div> <div>Step 2</div> <div>Step 3</div> </div> </div> <div class=\\\"step-action-content js-step-action-content\\\">Step action</div> <nav aria-label=\\\"navigation for creating new lesson\\\" class=\\\"modal-guide-navigation js-modal-guide-navigation\\\"> <button class=\\\"snap-icon-btn js-left\\\"> <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-left\\\"></i></span> <span class=title></span> </button> <div class=\\\"centred-block js-centre\\\"><span class=title>Provenance</span></div> <button class=\\\"snap-icon-btn right-justify js-right\\\"> <span class=title></span> <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span> </button> </nav> </div> <div class=\\\"modal-footer double-centred-block js-create-guide-close-btn\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </div> </div> </div> </div> <div class=\\\"modal fade basic-modal\\\" id=lessonModal data-backdrop=static data-keyboard=false tabindex=-1 role=dialog aria-labelledby=lessonModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <header class=modal-header-container> <div class=modal-header> <div class=\\\"centred-block justify-space-between js-modal-header-block margin-right\\\"> <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div> <button class=\\\"btn small-text fit-width snap-btn margin-right js-review-progress\\\">Progress</button> </div> </div> </header> <div class=modal-body> <div class=\\\"modal-text js-modal-text\\\"> <div class=\\\"lesson-spinner double-centred-block\\\"> <div class=icon><i class=\\\"fas fa-sun slow-spin\\\"></i></div> </div> </div> </div> <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=modal aria-label=Close> <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button> </footer> </div> </div> </div>\";\n// Exports\nmodule.exports = code;","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-colours.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":root {\\n\\n    --snap-lesson-row-blue: rgb(218, 230, 237);\\n    --snap-lesson-row-green: rgb(216, 223, 210);\\n\\n    --snap-dd-non-taxa-bg-intial: rgb(197, 193, 175);\\n    --snap-dd-non-taxa-bg-hover: rgb(229, 227, 220);\\n    --snap-dd-non-taxa-bg-active: rgb(229, 227, 220);\\n\\n    --snap-text-black: rgb(30,30,30);\\n    --snap-text-dark: rgb(60, 60, 60);\\n    --snap-text-dark-medium-dark: rgb(50, 50, 50);\\n    --snap-text-medium-dark: rgb(65, 65, 65);\\n    --snap-text-medium-dark-hover: rgb(108, 114, 120);\\n    --snap-text-medium-light:rgb(73, 80, 87);\\n    --snap-text-light:rgb(245, 245, 245);\\n    --snap-text-green: rgb(16, 66, 28);\\n    \\n    --snap-portrait: rgb(179, 197, 174);\\n    --snap-landscape: rgb(185, 200, 204);\\n    \\n    --snap-collection: rgb(87, 97, 99);\\n    --snap-collection-active: rgb(95, 125, 89);    \\n    --snap-collection-light: rgb(117, 126, 126);\\n    --snap-collection-faint: rgb(240, 242, 235);\\n    --snap-non-taxa: rgb(165, 159, 131);\\n\\n    --snap-active: rgb(246, 157, 53);\\n    --snap-alert: rgb(197, 59, 67);\\n    --snap-alert-medium: rgb(225, 155, 155);\\n    --snap-alert-light: rgb(241, 229, 225);\\n    --snap-inactive: rgba(7, 2, 2, 0.4);\\n    --snap-success: rgb(84, 137, 84);\\n    --snap-success-medium: rgb(169, 196, 163);\\n    --snap-success-light: rgb(216, 225, 208);\\n    \\n    --snap-link: rgb(54, 69, 82);\\n\\n    --snap-progress-bg: rgb(168, 168, 168);\\n    --snap-progress-bar: rgb(255, 255, 255);\\n  \\n    --snap-block-light: rgb(245, 245, 245);\\n\\n    --snap-main-background: rgb(244, 244, 244);\\n    --snap-content-background: rgb(255, 255, 243);\\n    --snap-content-background-relief: rgb(251, 251, 247);\\n    --snap-header-background: rgb(213, 213, 210);\\n    --snap-list-header-background: rgb(252, 251, 246);\\n    --snap-row-background: rgb(240, 239, 233);\\n    \\n    --snap-taxon-card-background: rgba(52, 105, 23,.1);\\n    --snap-species-highlight-background: rgb(249, 248, 238);\\n    --snap-species-header-background: rgb(226, 222, 180);\\n    --snap-species-header-dark-background: rgb(146, 139, 56);\\n    \\n    --snap-btn-auxillary: rgb(96, 117, 90);\\n    --snap-btn-hover: rgb(240, 240, 240);\\n    \\n    --snap-btn-dropdown: rgb(252, 193, 186);\\n    --snap-btn-dropdown-options: rgb(254, 240, 229);\\n\\n    --snap-btn-blue: rgb(54, 69, 82);\\n    --snap-snap-action-btn: rgb(245, 245, 245);\\n\\n    --snap-tertiary-background: rgb(95, 125, 89);\\n\\n    --snap-btn-filter-on: rgb(214, 208, 213);\\n    --snap-btn-filter-off: rgb(235, 231, 228);\\n\\n    --snap-border-light: rgb(175,175,175);\\n    --snap-border-medium: rgb(211, 211, 211);\\n    --snap-border-lightest: rgb(225,225,225);\\n\\n    --snap-iconic-icon-header: rgb(193, 186, 112);\\n\\n    --snap-inat: rgb(127, 151, 122);\\n\\n    --snap-youtube-green: rgb(52, 105, 23);\\n\\n    --snap-button-light: #576163; \\n    --snap-button-main: #3c4345; \\n    --snap-button-dark: #788082; \\n  }\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"* {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nhtml {\\n  height: var(--vhGrid, 100vh);\\n}\\n\\nbody {\\n  /* width: var(--vwGrid, 100vh);\\n  max-width: var(--vwGrid, 100vh); */\\n  height: var(--vhGrid, 100vh);\\n  /* font-size: .8em; */\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-family: 'Open Sans', sans-serif;\\n  color: var(--snap-text-dark);\\n  margin: auto;\\n  background-color: var(--snap-main-background);\\n}\\n\\nbutton {\\n  width: 100%;\\n  letter-spacing: .03rem;\\n}\\n\\nbutton[disabled] {\\n  opacity: .38; /* why  38%? google material design */\\n  pointer-events: none;\\n}\\n\\ninput[type=\\\"text\\\"] {\\n  padding: .5rem;\\n  width: 100%;\\n  border-color: var(--snap-border-lightest);\\n  border-style: solid;\\n}\\n\\nfigure {\\n  margin: .5rem 0 0;\\n}\\n\\na:hover {\\n  text-decoration: none;\\n}\\n\\nul {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nli {\\n  list-style-type: none;\\n  margin: 0 0 .5rem 0;\\n}\\n\\nprogress {\\n  margin: 0 !important;\\n  width: 100%;\\n  border: 0;\\n  background: var(--snap-progress-bg);\\n  max-height: 5px;\\n}\\n\\nprogress::-webkit-progress-bar {\\n  background-color: var(--snap-progress-bg);\\n}\\nprogress::-webkit-progress-value {\\n  background-color: var(--snap-text-black);\\n}\\nprogress::-moz-progress-bar {\\n  background-color: var(--snap-progress-bar);\\n}\\n\\n.progress-icon {\\n  color: var(--snap-progress-bar) !important;\\n  cursor: pointer;\\n}\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg);\\n}\\n\\n.inline-progress-container progress {\\n  width: 95px;\\n  height: 3px;\\n  left: 0;\\n  top: 2.5rem;\\n}\\n\\nhr {\\n  margin: 0;\\n}\\n\\n.font-size-small {\\n  font-size: .7rem;\\n}\\n\\n.desaturate {\\n  opacity: .6;\\n  filter: grayscale(80%);\\n}\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg);\\n}\\n\\n\\n\\n.btn-collection {\\n  background-color: var(--snap-portrait);\\n  color: var(--snap-text-dark);\\n}\\n\\n.btn-language {\\n  background-color: var(--snap-landscape);\\n  color: var(--snap-text-medium-dark);\\n}\\n\\n.btn.btn-non-taxa {\\n  width: 15rem;\\n  background-color: var(--snap-non-taxa);\\n  float: left;\\n}\\n\\n.non-taxa-definition {\\n  padding: 0 0.5rem;\\n}\\n\\n.icon::after\\n{\\n  display: inline-block;\\n  font-style: normal;\\n  font-variant: normal;\\n  text-rendering: auto;\\n  -webkit-font-smoothing: antialiased;\\n  font-family: \\\"Font Awesome 5 Free\\\";\\n}\\n\\n.icon.active::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f00c\\\";\\n  padding: 0 0.5rem 0 0;\\n  margin: 0 0 0 -1.5rem;\\n  color: rgb(99, 127, 91);\\n}\\n\\n.icon.choice::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: rgb(99, 127, 91);\\n}\\n\\n.icon.edible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive);\\n}\\n\\n.icon.inedible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f056\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive);\\n}\\n\\n.icon.toxic::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f071\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-alert);\\n}\\n\\n.dropdown-menu {\\n  margin: 0.15rem 0 0 0;\\n  padding: 0;\\n  color: var(--snap-text-dark);\\n  border: .05rem solid var(--snap-border-light);\\n  /* left: inherit !important; */\\n}\\n\\n.non-taxa .dropdown-menu {\\n  width: 15rem !important;\\n  background-color: var(--snap-dd-non-taxa-bg-intial);\\n}\\n\\n.non-taxa a.dropdown-item.active {\\n  background-color: var(--snap-dd-non-taxa-bg-active);\\n}\\n\\na.dropdown-item {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.5rem 0 0.5rem 1rem;\\n  cursor: pointer;\\n}\\n\\n.non-taxa a.dropdown-item:hover {\\n  background-color: var(--snap-dd-non-taxa-bg-hover);\\n}\\n\\n.underline-external-link {\\n  color: var(--snap-link) !important;\\n  text-decoration: none;\\n  border-bottom: solid .05rem !important;\\n  color: inherit;\\n  cursor: pointer;\\n}\\n\\n.lesson-title {\\n  line-height: 1.6;\\n}\\n\\n.toUpperCase {\\n  text-transform: uppercase;\\n}\\n\\n.home, .settings, .nav-info, .list, .glossary, .email, .login, .email > a, .language {\\n  cursor: pointer;\\n  color: var(--snap-text-dark);\\n  font-size: 1.4rem;\\n}\\n\\na.icon:hover {\\n  color: var(--snap-text-light);\\n}\\n\\n.email span {\\n  font-size: .8rem;\\n}\\n\\n.glossary svg {\\n  vertical-align: middle;\\n}\\n\\n.grid-header {\\n  background-color: rgb(153, 172, 149);\\n  background-color: var(--snap-portrait);\\n  display: flex;\\n  align-items: center;\\n  color: var(--snap-text-dark);\\n  width: 100%;\\n  border-radius: 0.25rem 0.25rem 0 0;\\n  letter-spacing: 0.07rem;\\n  text-transform: uppercase;\\n}\\n\\n.grid-header > div {\\n  padding: 0 0.5rem;\\n}\\n\\n.hover-box {\\n  border: .05rem solid rgba(48, 94, 37,.8);\\n  padding: .25rem;\\n  margin: 0 0 0 -.25rem;\\n  border-radius: 0.25rem;\\n}\\n\\n.nav-icons .active-icon, .active-icon {\\n  color: white;\\n}\\n\\n.nav-icons .inactive-icon {\\n  color: var(--snap-inactive);\\n  cursor: not-allowed;\\n}\\n\\n.info-box .inactive-icon {\\n  display: none;\\n}\\n\\n.disabled-icon {\\n  cursor: initial;\\n  opacity: .38; /* why  38%? google material design */\\n  pointer-events: none;\\n}\\n\\n.scrollable.card {\\n  text-align: left;\\n}\\n\\n.score-summary-container {\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));\\n}\\n\\n.snapdragon-container {\\n  justify-content: flex-start;\\n  position: relative;\\n}\\n\\n.test-card-question.standard-block, .lesson-list-header.centred-block {\\n  border-bottom: .03rem solid var(--snap-border-medium);\\n}\\n\\n.home-container {\\n  position: relative;\\n  display: grid;\\n  grid-template-rows: var(--vhStandardBlock) auto;\\n}\\n\\n.feature-types {\\n  background-color: var(--snap-content-background);\\n}\\n\\n.species.card {\\n  margin: 0;\\n}\\n\\n.non-taxa {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-top: 1rem;\\n}\\n\\n.non-taxa .btn-group {\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  flex-direction: column;\\n  margin: 0 .5rem;\\n  justify-content: space-evenly;\\n  background-color: var(--snap-landscape);\\n}\\n\\n.non-taxa .btn.btn-secondary {\\n  height: initial;\\n}\\n\\n.non-taxa .species-header {\\n  padding: 0 1.25rem 0 0;\\n}\\n\\n.non-taxon.card img {\\n  height: 4rem;\\n  width: 4rem;\\n}\\n\\n.non-taxon .btn.btn-secondary {\\n  width: 100%;\\n  background-color: var(--snap-landscape);\\n  border-radius: unset;\\n}\\n\\n.non-taxa-definition {\\n  display: flex;\\n  align-items: center;\\n  padding: 0 2rem;\\n}\\n\\n.non-taxon .definitions {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n  height: 100%;\\n  text-align: left;\\n}\\n\\n.species.card-small {\\n  padding: 0.5rem;\\n}\\n\\n.card.radio-buttons-container {\\n  margin: 0 0 0.5rem 0;\\n}\\n\\n.binomial {\\n  font-style: italic;\\n  text-transform: initial;\\n}\\n\\n.lesson-plans .table-row.species-background:nth-child(n) {\\n  background-color: var(--snap-species-highlight-background);\\n}\\n\\n.lesson-plans .table-row.taxon-background:nth-child(n) {\\n  background-color: var(--snap-taxon-card-background);\\n}\\n\\n.snapdragon-options {\\n  padding: 0 .5rem;\\n}\\n\\n.grid {\\n  display: grid;\\n  grid-auto-flow: column;\\n  width: 100%;\\n  height: var(--vhGrid, 100vh);\\n  font-size: .8rem;\\n}\\n\\n.left-grid, .right-grid {\\n  display: grid;\\n  grid-template-columns: 100%;\\n  grid-auto-flow: column;\\n  grid-template-rows: var(--vhRunningBlock, 7.5vh) 5px auto var(--vhRunningBlock, 7.5vh);\\n}\\n\\n.left-body, .right-body {\\n  display: grid;\\n  grid-auto-flow: row;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));  \\n  background-color: var(--snap-content-background);\\n}\\n\\n.header, .footer {\\n  display: flex;\\n  align-items: center;\\n  padding: 0 0.5rem;\\n  letter-spacing: 0.1rem;\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-dark);\\n}\\n\\n.header > div:nth-child(2) {\\n  max-width: 50%;\\n  font-size: .9rem;  \\n}\\n\\n.footer {\\n  bottom: 0;\\n}\\n\\n.left-grid .footer .nav-icons, .right-grid .footer .nav-icons {\\n  flex: auto;\\n  justify-content: space-evenly;\\n}\\n\\n.left-grid .footer .nav-icons li, .right-grid .footer .nav-icons li {\\n  margin: 0 !important;\\n}\\n\\n.footer-round, .footer-score span {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.75rem;\\n}\\n\\n.left-grid .header, .left-grid .footer {\\n  justify-content: flex-end;\\n  background-color: var(--snap-portrait);\\n}\\n\\n.right-grid .header, .right-grid .footer {\\n  justify-content: center;\\n  background-color: var(--snap-landscape);\\n}\\n\\n.header-text {\\n  color: var(--snap-text-dark-medium-dark);\\n}\\n\\n.scrollable {\\n  overflow-y: auto;\\n  -webkit-overflow-scrolling: touch;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;  \\n}\\n\\n/* .txt-specimen-species {\\n  margin: 0 0 0 1rem;\\n} */\\n\\n.answer {\\n  padding: 1rem;\\n  text-transform: capitalize;\\n  cursor: pointer;\\n}\\n\\n.answer button {\\n  width: 10rem;\\n}\\n\\n.squares {\\n  display: grid;\\n  grid-auto-flow: row;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr 1fr 1fr;\\n}\\n\\n.tiles {\\n  display: grid;\\n  height: 50%;\\n  grid-auto-flow: column;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1fr 1fr;\\n}\\n\\n.squares > div {\\n  display: grid;\\n  justify-self: center;\\n  height: 140px;\\n  width: 224px;\\n}\\n\\n.squares img, .tiles img {\\n  cursor: pointer;\\n  height: inherit;\\n  width: inherit;\\n  object-fit: cover;\\n}\\n\\n.traits.squares img {\\n  object-fit: scale-down;\\n}\\n\\n.traits.squares > div.multiple {\\n  grid-template-columns: 1fr 1fr;\\n  cursor: pointer;\\n  width: 80%;\\n}\\n\\n.square, .tile {\\n  border-radius: 0.2rem;\\n  cursor: pointer;\\n}\\n\\n.strips {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  cursor: pointer;\\n  height: calc( (var(--vh, 1vh) * 100) \\n    - var(--vhFixtures, 15vh) \\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhStandardBlock, 10vh)\\n    - var(--vhButtonBlock, 9vh)\\n    );\\n}\\n\\n.strip {\\n  background: #fff;\\n  border: 1px solid transparent;\\n  border-radius: 2px;\\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\\n  margin: .5rem .25rem;\\n  padding: .75rem;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.strip > div::first-letter {\\n  text-transform: capitalize;\\n}\\n\\n  .strip > * {\\n    pointer-events: none;\\n  }\\n\\n  .pointer-events-none {\\n    pointer-events: none !important;\\n  }\\n  \\n  .pointer-events-initial {\\n    pointer-events: initial !important;\\n  }\\n\\n.strips .strip.snap-success {\\n  background-color: var(--snap-success-medium);\\n  box-shadow: 0 2px 8px rgba(0,0,0,.8);\\n}\\n\\n.strips .strip.snap-alert {\\n  background-color: var(--snap-alert-medium);\\n  box-shadow: 0 2px 8px rgba(0,0,0,.8);\\n  border: none;\\n}\\n\\n.strip.snap-success > div.disabled {\\n  color: var(--gray-dark) !important;\\n}\\n\\n.strip div {\\n  text-align: center;\\n}\\n\\n.names-container .vernacular-name {\\n  max-width: 12rem;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  display: inline-block;\\n}\\n\\n.names-container.definition .vernacular-name {\\n  margin-top: 1.25rem;\\n}\\n\\n.align-left {\\n  text-align: left;\\n}\\n\\n.snapdragon.card {\\n  border: 0;\\n}\\n\\n.snapdragon.card.align-left {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.5rem;\\n}\\n\\n.snapdragon.card.align-left .feature-label {\\n  letter-spacing: 0.03rem;\\n  width: fit-content;\\n  display: inline-table;\\n}\\n\\n.taxon-highlight {\\n  background-color: var(--snap-taxon-card-background);\\n  padding: 0.5rem;\\n  margin: -0.5rem -0.5rem 0 -0.5rem;\\n  display: flex;\\n  justify-content: right;\\n}\\n\\n.taxon-highlight > div:nth-child(1) {\\n  flex: 1;\\n  align-self: center;\\n}\\n\\n.taxon-highlight > div:nth-child(2) {\\n  align-self: center;\\n}\\n\\n.taxon-highlight img {\\n  height: 5.5rem;\\n  width: 5.5rem;\\n  margin: 0 0 0 1rem;\\n  object-fit: cover;\\n}\\n\\n.latin-name {\\n  font-style: italic;\\n  font-family: serif;\\n  text-transform: initial;\\n}\\n\\n.common-name {\\n  font-style: normal;\\n  text-transform: capitalize;\\n}\\n\\n.taxon-header {\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  text-align: left;\\n}\\n\\n.species-header img {\\n  filter: grayscale(80%);\\n  object-fit: scale-down;\\n  max-height: var(--vhStandardBlock, 10vh);\\n}\\n\\n.species-header > div:nth-child(1) {\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0.25rem 1rem 0 0;\\n}\\n\\n.card-link-container {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.card-link-container i {\\n  font-size: 2rem;\\n  cursor: pointer;\\n  color: var(--snap-iconic-icon-header);\\n}\\n\\n.card-link-container i:hover {\\n  color: var(--snap-text-medium-light);\\n}\\n\\n.block-container {\\n  position: relative;\\n  justify-content: flex-start;\\n}\\n\\n.species-common-name {  \\n  text-transform: capitalize;\\n}\\n\\n.data-box-container {\\n  height: var(--vhCalendar, 11vh);\\n  display: grid;\\n  grid-template-columns: 2fr 2fr 3fr;\\n  grid-gap: .5rem;\\n  border-bottom: .03rem solid var(--snap-dd-non-taxa-bg-hover);\\n  font-size: .8rem;\\n}\\n\\n.mixed-content-container {\\n  top: calc(\\n      var(--vhStandardBlock, 10vh)\\n    + var(--vhSmallImageCarousel,23vh));\\n  height: calc(\\n        var(--vh, 1vh) * 100\\n      - var(--vhFixtures,15vh)\\n      - var(--vhSmallImageCarousel,23vh)\\n      - var(--vhDoubleStandardBlock,20vh)      \\n      - .5rem);\\n}\\n\\n.taxon.card-card .mixed-content-container {\\n  height: calc(\\n        var(--vh, 1vh) * 100\\n      - var(--vhFixtures,15vh)\\n      - var(--vhDoubleStandardBlock,20vh) \\n      - var(--vhCalendar)\\n      - 5px);\\n      padding: .5rem;\\n}\\n\\n.taxon.card-card .mixed-content-container .centred-block {\\n  flex-direction: column;\\n  height: 100%;\\n  align-items: flex-start;\\n  justify-content: space-evenly;\\n}\\n\\n.taxon.card-card .data-box-container {\\n  grid-template-columns: 1fr 2fr;\\n  padding: 0 .5rem;\\n}\\n\\n.inat-box .data-box {\\n  color: var(--snap-text-medium-light);\\n  height: 100%;\\n  border-left: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  border-right: 1px solid var(--snap-border-lightest);\\n  font-size: .8rem\\n}\\n\\n.inat-box .data-box > div:nth-child(1), .inat-box .data-box > div:nth-child(2) {\\n  display: grid;\\n  grid-template-columns: 2fr 1fr;\\n  grid-gap: .25rem;\\n}\\n\\n.inat-box .data-box > div:nth-child(2) > div:nth-child(1) {\\n  padding: 0 0.5rem 0 0;\\n}\\n\\n.inat-box .data-box > div > div:nth-child(2) > div {\\n  text-align: center;\\n}\\n\\n.taxon-data > span:nth-child(1) {\\n  min-width: 50%;\\n}\\n\\n.data-box .taxon-data:nth-child(1) > span {\\n  text-transform: uppercase;\\n} \\n\\n.taxon-data {\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.latin {\\n  font-style: italic;\\n  font-family: serif;\\n}\\n\\n.taxon-members {\\n  font-style: italic;\\n}\\n\\n.family-img {\\n  filter: grayscale(80%);\\n}\\n\\n.family-name {\\n  text-transform: uppercase;\\n}\\n\\n.history div {\\n  margin: 0 0 1rem 0;\\n}\\n\\n.clickable {\\n  cursor: pointer;\\n}\\n\\n.btn {\\n  font-size: inherit;\\n  padding: .5rem;\\n  border: none;\\n}\\n\\n.btn:hover {\\n  opacity: .8;  \\n}\\n\\n.btn.focus, .btn:focus {\\n  box-shadow: none;\\n}\\n\\nbtn:disabled {\\n  pointer-events: none;\\n}\\n\\n.btn-placeholder.btn {\\n  color: var(--snap-text-dark);\\n}\\n\\n.snap-btn {\\n  background-color: var(--snap-list-header-background);\\n  color: var(--snap-text-black);\\n  letter-spacing: .05rem;\\n  border: 1px solid var(--snap-border-light);\\n  padding: .25rem .75rem;\\n}\\n\\n.snap-btn:hover, .snap-btn:focus {\\n  /* outline: 1px solid var(--snap-border-medium); */\\n  opacity: 1;\\n  border: 1px solid var(--snap-youtube-green);\\n  outline: none;\\n}\\n\\n/* .snap-btn:active {\\n  color: green !important;\\n} */\\n\\n.snap-btn:focus:not(:focus-visible), .snap-icon-btn:focus:not(:focus-visible) {\\n  /* color: var(--snap-youtube-green) !important; */\\n  /* outline: 1px solid var(--snap-border-medium);\\n  border: 1px solid var(--snap-youtube-green); */\\n  /* outline: 1px solid var(--snap-active); */\\n  border: 1px solid var(--snap-active);\\n  outline: none;\\n}\\n\\n.dropdown .snap-btn:hover, .dropdown .snap-btn:focus {\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.snap-icon-btn {\\n  color: var(--snap-text-dark);\\n  background-color: transparent;\\n  border: 1px solid transparent;\\n  padding: 0 .5rem;\\n}\\n\\n.snap-icon-btn:focus, .snap-icon-btn:hover {\\n  color: var(--snap-youtube-green);\\n  outline: 1px solid var(--snap-border-medium);\\n  opacity: 1;\\n}\\n\\n.snap-link-btn, .snap-no-link-btn {\\n  color: var(--snap-text-dark);\\n  background-color: transparent;\\n  border: none;\\n  font-size: .7rem;\\n  width: intrinsic;           /* Safari/WebKit uses a non-standard name */\\n  width: -moz-max-content;    /* Firefox/Gecko */\\n  width: -webkit-max-content; /* Chrome */\\n}\\n\\n.snap-no-link-btn {\\n  pointer-events: none;\\n}\\n\\n.snap-action-btn {\\n  background-color: var(--snap-tertiary-background);\\n  color: var(--snap-text-light);\\n  letter-spacing: .05rem;\\n  border: 1px solid var(--snap-non-taxa) !important;\\n  padding: .5rem .75rem;\\n}\\n\\n.snap-action-btn:focus {\\n  outline: 1px solid var(--snap-border-medium);\\n  color: var(--snap-text-black);\\n}\\n\\n.snap-action-btn.snap-success {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-success) !important;\\n  border: 0.05rem solid var(--snap-success);\\n}\\n\\n.snap-action-btn.snap-alert {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-alert) !important;\\n  border: 0.05rem solid var(--snap-alert);\\n}\\n\\n.btn-tertiary {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-tertiary-background) !important;\\n  border: 1px solid var(--snap-border-light);\\n  cursor: pointer !important;\\n}\\n\\n.btn-tertiary:focus {\\n  outline: 1px solid var(--snap-border-medium);\\n  color: var(--snap-text-black);\\n}\\n\\n.dropdown-toggle::after {\\n  vertical-align: 0.2rem;\\n  margin-left: 0.2rem;\\n}\\n\\n.course-description {\\n  margin: 1rem 0;\\n}\\n\\n.course-description span {\\n  margin: 0 0 0.5rem 0;\\n}\\n\\n.course-description span:nth-child(1) {\\n  background-color: lightblue;\\n  padding: 0.25rem;\\n}\\n\\n.course-description .snap-alert {\\n  width: 50%;\\n}\\n\\n.species-count {\\n  vertical-align: super;\\n}\\n\\n.clear-lesson button {\\n  float: left;\\n}\\n\\n.collection span {\\n  padding: 0 0.5rem;\\n  cursor: pointer;\\n}\\n\\n.dropdown div {\\n  white-space: nowrap;\\n}\\n\\n.single-tile {\\n  display: flex;\\n  flex-direction: column;\\n  margin: 2rem 1rem;\\n}\\n\\n.image-border {\\n  text-align: center;\\n  margin: 0 0 2rem 0;\\n  border: .05rem solid;\\n  border-radius: .2rem;\\n  padding: 1rem;\\n}\\n\\n.blocks {\\n  flex: auto;\\n  flex-direction: column;\\n  padding: 2rem;\\n}\\n\\n.block {\\n  font-size: 1rem;\\n  display: inline-block;\\n  cursor: pointer;\\n  width: fit-content;\\n  background-color: var(--snap-block-light);\\n  color: var(--snap-text-dark);\\n  margin: 0 .5rem 0 0;\\n  padding: .25rem .5rem;\\n  letter-spacing: .1rem;\\n  border-radius: .2rem;\\n  border: .05rem solid var(--snap-text-dark);\\n}\\n\\n.pool .block {\\n  margin: 0 .5rem .5rem 0;\\n}\\n\\n.block + hr {\\n  margin: .5rem 0 0 0;\\n}\\n\\n.pool {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.pool .block.active {\\n  color: var(--snap-text-light);\\n  background-color: rgb(128, 128, 128);\\n}\\n\\n.pool .block.correct {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-success);\\n}\\n\\nspan.correct {\\n  color: rgb(2, 107, 26);\\n}\\n\\n.block.snap-success, .block.snap-alert {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-success) !important;\\n  border: none;\\n}\\n\\n.block.snap-alert {\\n  background-color: var(--snap-alert) !important;\\n}\\n\\n.snap-alert-fg {\\n  color: var(--snap-alert);\\n}\\n\\n.btn.snap-alert {\\n  padding: 0.175rem 0.75rem;\\n}\\n\\n.block.white {\\n  color: var(--snap-text-dark);\\n}\\n\\n.blocks button {\\n  margin: 2rem 0 0 0;\\n}\\n\\n.delay-slider {\\n  margin: 1rem 0;\\n}\\n\\n.delay-slider > div input {\\n  flex: auto;\\n  margin: 0 .5rem;\\n}\\n\\n.response-update {\\n  flex: initial;\\n  display: flex;\\n  flex-direction: row;\\n  position: absolute;\\n  bottom: 0.5rem;\\n  right: .5rem;\\n  left: .5rem;\\n}\\n\\n.action-update {\\n  width: 100%;\\n}\\n\\n.action-update button {\\n  width: 100%;\\n}\\n\\n.answer-container .icon-container {\\n  position: relative;\\n  display: inline-block;\\n}\\n\\n.answer-container .icon {\\n  font-size: 1.5rem;\\n  position: absolute;\\n  top: -0.9rem;\\n}\\n\\n.taxa svg {\\n  margin: 0 .25rem 0 0;\\n}\\n\\n.taxa .si-glyph-mushrooms svg {\\n  margin: 0;\\n}\\n\\n.species-answer {\\n  display: none;\\n}\\n\\n.species-question,\\n.species-answer,\\n.btn-placeholder {\\n  text-align: center;\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.species-question.btn,\\n.btn-placeholder.btn {\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-block-light);\\n}\\n\\nbutton:disabled {\\n  cursor: initial !important;\\n}\\n\\n.species-answer {\\n  text-align: center;\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-block-light);\\n  border-left: 1px solid var(--snap-border-light);\\n  border-right: 1px solid var(--snap-border-light);\\n  border-bottom: 1px solid var(--snap-border-light);\\n}\\n\\n.answer-box-success .icon {\\n  color: var(--snap-success);\\n}\\n\\n.answer-box-alert .icon {\\n  color: var(--snap-alert);\\n}\\n\\n.species-card-images,\\n.non-taxon-card-images {\\n  /* height: initial; */\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  cursor: pointer;\\n}\\n\\n.non-taxon-card-images {\\n  margin: 0;\\n}\\n\\n.trait.card li span:nth-child(1) {\\n  width: 25%;\\n  text-align: left;\\n}\\n\\n.trait.card li span:nth-child(2) {\\n  width: 75%;\\n  text-align: left;\\n}\\n\\n.toggle-content,\\n.toggle-content * {\\n  display: none;\\n}\\n\\n.toggle-content.is-visible,\\n.toggle-content.is-visible * {\\n  display: initial;\\n}\\n\\n.btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-text-light);\\n  color: var(--snap-text-dark);\\n}\\n\\n.non-taxon .btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-species-header-background);\\n}\\n\\n.rb.btn-group {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.rb.btn-group .btn.btn-secondary.active {\\n  color: var(--snap-success);\\n  background-color: inherit;\\n  border: none;\\n}\\n\\n.btn-secondary:not(:disabled):not(.disabled):active {\\n  color: var(--snap-text-medium-dark);\\n  background-color: initial;\\n  border: none;\\n}\\n\\n.rb.btn-group .btn:hover {\\n  color: rgb(100, 100, 100);\\n}\\n\\n.btn.btn-secondary.disabled.active {\\n  opacity: 1;\\n}\\n\\n.rb.btn-group label {\\n  margin: 0 0 .5rem 0;\\n}\\n\\n.rb.btn-group input[type=radio] {\\n  box-sizing: border-box;\\n  padding: 0;\\n  position: absolute;\\n  clip: rect(0,0,0,0);\\n  pointer-events: none;\\n}\\n\\n.btn.btn-secondary {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--white);\\n  border: 0;\\n  width: fit-content;\\n  border: none;\\n}\\n\\n.btn.btn-secondary:hover {\\n  transition: none;\\n}\\n\\n.btn.btn-secondary.disabled .collectionName, .btn.btn-secondary.active .guideName {\\n  border: none;  \\n}\\n\\n.left-grid,\\n.species-card-wiki-entry,\\n.collection-preview,\\n.collection button,\\n.collections-skills {\\n  display: none;\\n}\\n\\n.species-table td .portrait input {\\n  height: 1.15rem;\\n  width: 1.15rem;\\n}\\n\\n.badge {\\n  vertical-align: text-top;\\n  cursor: pointer;\\n}\\n\\n.badge-light {\\n  color: inherit;\\n  background-color: transparent;\\n  margin: -0.25rem 0 0 0.25rem;\\n  padding: 0.4rem 0.4rem 0.3rem 0.4rem;\\n}\\n\\n.badge-list {\\n  height: 100%;\\n  padding: 1rem;\\n  background-color: var(--snap-snap-action-btn);\\n}\\n\\n.question-images {\\n  display: grid;\\n  height: 8rem;\\n  grid-template-columns: 1fr 1fr 1fr 1fr;\\n  grid-gap: 0.5rem;\\n}\\n\\n.layer-container {\\n  cursor: pointer;\\n  background-size: cover;\\n  background-position: center;\\n}\\n\\n.layer {\\n  height: 100%;\\n  width: 100%;\\n  color: rgb(101, 132, 37, 0);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.layer > div {\\n  text-align: center;\\n}\\n\\n.feature-label {\\n  color: var(--snap-text-green);\\n}\\n\\n.lesson-option-headers {\\n    height: 2.5rem;\\n    display: flex;\\n    align-items: center;\\n    color: var(--snap-text-dark);\\n    letter-spacing: 0.03rem;\\n    padding: 0;\\n    width: fit-content;\\n}\\n\\n.faded {\\n  color: var(--snap-border-lightest);\\n}\\n\\n.compare-species-link {\\n  cursor: pointer;\\n}\\n\\n.imageSlider .carousel-inner {\\n  display: flex;\\n  flex-direction: column;\\n  background-color: rgba(211, 214, 173, 0.4);\\n}\\n\\n.imageSlider .carousel-inner > div {\\n  width: inherit;\\n}\\n\\n.imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n  top: 40%;\\n  height: 20%;\\n  width: 10%;\\n  background-color: rgba(211, 214, 173, 0.2);\\n  opacity: 0.5;\\n}\\n\\n.carousel-control-next button, .carousel-control-prev button {\\n  background-color: transparent !important;\\n  border: none !important;\\n}\\n\\n.carousel-control-next[disabled=\\\"disabled\\\"],\\n.carousel-control-prev[disabled=\\\"disabled\\\"] {\\n  pointer-events: none;\\n}\\n\\n.imageSlider .carousel.slide {\\n  background-color: var(--snap-text-dark-medium-dark);\\n}\\n\\n.imageSlider .carousel-inner > div:nth-child(1), .imageSlider .carousel-item {\\n  height: var(--vhExtraSmallImageCarousel);\\n  min-height: var(--vhExtraSmallImageCarousel);\\n}\\n\\n.species-card-images .carousel-item-next, .species-card-images .carousel-item-prev, .species-card-images .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.imageSlider .carousel-item-next, .imageSlider .carousel-item-prev, .imageSlider .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  pointer-events: all;\\n}\\n\\n.info-box .carousel-item-next, .info-box .carousel-item-prev, .info-box .carousel-item.active {\\n  display: grid;\\n}\\n\\n.carousel-item.active button {\\n  width: initial;\\n}\\n\\n.imageSlider .carousel-item > div {\\n  height: 90%;\\n  background-size: inherit;\\n  background-repeat: no-repeat;\\n  background-position: center;  \\n}\\n\\n#imageSlider_card-card .carousel-item > div, #imageSlider_card-card .carousel-item > div {\\n  pointer-events: none;\\n}\\n\\n.imageSlider .carousel-item > div.contain-image {\\n  background-size: contain;\\n}\\n\\n.imageSlider .carousel-control-next-icon,\\n.imageSlider .carousel-control-prev-icon {\\n  width: 1.5rem;\\n  height: 1.5rem;\\n  background-color: transparent;\\n  border: none;\\n}\\n\\n#imageSlider1 {\\n  flex: 1;\\n}\\n\\n#imageSlider2 {\\n  flex: 1;\\n}\\n\\n#imageSlider3 {\\n  flex: 1;\\n}\\n\\n.info-box .carousel.slide {\\n  float: right;\\n  width: 100%;\\n  background-color: var(--snap-species-header-background);\\n}\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  padding: .25rem 0;\\n  text-align: center;\\n  margin: 0 15%;\\n  height: var(--vhHalfStandardBlock, 5vh);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.3);\\n}\\n\\n.info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.1);\\n  text-transform: lowercase;\\n}\\n\\n.info.carousel-control .carousel-control-next-icon {\\n  color: black;\\n}\\n\\n.carousel-control-prev-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\\\");\\n}\\n\\n.carousel-control-next-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\\\");\\n}\\n\\n.bird-song div:nth-child(2) {\\n  background-color: rgb(142, 160, 119);\\n}\\n\\n.bird-song-bg {\\n  background-color: var(--snap-collection-active);\\n}\\n\\n.bird-song-icon {\\n  color: rgba(0, 0, 0, 1);\\n  margin-left: -.5rem;\\n}\\n\\n.bird-song-icon-disabled {\\n  color: rgba(0, 0, 0, 0.2);\\n  pointer-events: none;\\n  margin-left: -.5rem;\\n}\\n\\niframe#birdsong {\\n  width: 1px;\\n  min-width: 260px;\\n}\\n\\n.rank {\\n  border-radius: 0.24rem;\\n  display: inline-block;\\n  vertical-align: text-top;\\n}\\n\\n.radio-buttons.disabled label {\\n  color: rgb(100,100,100);\\n}\\n\\n.visual-match .description div:empty,\\n.visual-match .description span:empty {\\n  display: none;\\n}\\n\\ndiv.hide-empty:empty,\\nspan.hide-empty:empty {\\n  display: none !important;\\n}\\n\\n.visual-match .description {\\n  background-color: rgb(200, 197, 172);\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0.5rem;\\n}\\n\\n.visual-match .description span {\\n  flex: 1;\\n  padding: 0.5rem;\\n}\\n\\n.comparison-description {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  padding: 0 0.5rem;\\n}\\n\\n.species-search .icon {\\n  font-size: 2.5rem;\\n  height: calc(var(--vhStandardBlock, 30vh) * 1.5);\\n  color: rgb(90, 147, 252);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.species-search .icon i:not(.slow-spin) {\\n  color: var(--snap-active);\\n}\\n\\n.question-container .icon {\\n  color: rgb(90, 147, 252);\\n  font-size: 1.8rem;\\n}\\n\\n.slow-spin {\\n  -webkit-animation: fa-spin 6s infinite linear;\\n  animation: fa-spin 6s infinite linear;\\n}\\n\\na.collection-disabled {\\n  color: grey;\\n  pointer-events: none;\\n}\\n\\n.attribution-layer {\\n  color: var(--snap-text-light);\\n}\\n\\n.rights-attribution {\\n  display: grid;\\n  grid-template-columns: 2rem auto;\\n  height: var(--vhRunningBlock);\\n  background-color: rgb(166, 177, 155);\\n  font-size: .7rem;\\n}\\n\\n.rights-attribution .underline-link {\\n  color: white !important;\\n}\\n\\n.rights-link-copyright {\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  z-index: 25;\\n}\\n\\n.rights-link-copyright .underline-link {\\n  line-height: 1.5;\\n}\\n\\n.rights-link-copyright i {\\n  color: white;\\n  font-size: 1.1rem;\\n}\\n\\n.rights-link-copyright i.fas.fa-copyright {\\n  font-size: 1.3rem;\\n}\\n\\n.rights-link {\\n  height: var(--vhRunningBlock);\\n  grid-template-columns: 2rem auto 2rem;\\n  background-color: rgb(166, 177, 155);\\n  display: grid;\\n}\\n\\n.rights-link > div:nth-child(1), .rights-link > div:nth-child(3) {\\n  cursor: pointer;\\n}\\n\\n.rights-attribution > div > div:nth-child(1) {\\n  margin: 0 0.5rem 0 0;\\n}\\n\\n.rights-attribution > div > div:nth-child(2) {\\n  flex: 1;\\n}\\n\\n.rights-attribution span {\\n  vertical-align: baseline;\\n  margin: 0 0 0 0.25rem;\\n}\\n\\n.greek {\\n  vertical-align: super;\\n}\\n\\n.dropdown.collections {\\n  display: flex;\\n}\\n\\n.range-slider-control {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.carousel-indicators {\\n  height: var(--vhRunningBlock);\\n  bottom: 0;\\n  margin: 0 !important;\\n  margin-left: 2.5rem !important;\\n  margin-right: 2.5rem !important;\\n  align-items: center;\\n}\\n\\n.carousel-indicators li {\\n  background-color: var(--snap-text-medium-dark);\\n  width: 1rem;\\n  height: 0.25rem;\\n  margin-bottom: 0;\\n}\\n\\n.carousel-indicators .active {\\n  background-color: white;\\n}\\n\\n.question-header {\\n  display: flex;\\n  background-color: var(--snap-species-header-background);\\n  color: var(--snap-dark);\\n  justify-content: center;\\n}\\n\\n.card-link {\\n  cursor: pointer;\\n  color: rgb(128, 121, 49);\\n}\\n\\n.calendar-container {\\n  display: flex;\\n  align-items: center;\\n  border-right: 1px solid var(--snap-border-lightest);\\n  justify-content: center;\\n}\\n\\n.calendar-box .row {\\n  display: grid;\\n  grid-auto-flow: row;\\n}\\n\\n.calendar-box .col {\\n  display: grid;\\n  grid-auto-flow: column;\\n}\\n\\n.calendar-box .col div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: 1.4rem;\\n  height: 1.4rem;\\n}\\n\\n.most-observations {\\n  color: var(--orange);\\n}\\n\\n.current-month {\\n  border: 0.05rem solid rgba(108, 117, 125,.8);\\n}\\n\\n.floating-card > span:nth-child(1) {\\n  background: #fff;\\n  border: none;\\n  border-radius: 2px;\\n  box-shadow: 0 2px 8px rgba(0,0,0,.2);\\n  display: inline-block;\\n  font-weight: 300;\\n  margin: .5rem;\\n  padding: .8rem 1.1rem;\\n}\\n\\n.home-container .snapdragon-header {\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-light);\\n  font-size: 1.6rem;\\n  letter-spacing: .25rem;\\n  border-bottom: 1px solid var(--snap-border-lightest);\\n}\\n\\n.home-container .snapdragon-header a, .home-container .snapdragon-header a:visited {\\n  color: var(--snap-text-medium-light);\\n}\\n\\n.home-container .snapdragon-tag, .home-container .summary-scores, .trait-card-summary-container .summary-scores {\\n  justify-content: center;\\n  font-style: italic;\\n  display: flex;\\n  color: var(--snap-link);\\n  letter-spacing: .03rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n}\\n\\n.trait-card-summary-container .summary-scores {\\n  padding: 0 1rem;\\n}\\n\\n.home-guide .taxa {\\n  color: var(--snap-collection-active);\\n}\\n\\n.home-guide .taxa > span {\\n  margin-right: .25rem;\\n}\\n\\n.summary-scores .summary-progress {\\n  margin: 1rem 0 0 0;\\n  position: relative;\\n}\\n\\n.summary-scores .summary-progress span {\\n  margin: 0 0 0 .5rem;\\n}\\n\\n.summary-scores .summary-progress span.above {\\n  position: relative;\\n  bottom: .5rem;\\n}\\n\\n.summary-scores .summary-progress span.below {\\n  position: relative;\\n  top: .5rem;\\n}\\n\\n.summary-scores span {\\n  margin: 0 .25rem 0 0;\\n}\\n\\n.summary-scores span:nth-child(2) {\\n  vertical-align: super;\\n}\\n\\n.trait-line {\\n  margin-top: 2rem;\\n}\\n\\n.trait-line .small-icon {\\n  font-size: 1rem !important;\\n  margin: 0 !important;\\n}\\n\\n.trait-icon, .trait-icon > span {\\n  margin: 0 !important;\\n}\\n\\n.trait-icon svg g g {\\n  fill: var(--snap-link);\\n}\\n\\n.home-container .snapdragon-tag .inat-widget span:nth-child(1) {\\n  font-style: initial;\\n}\\n\\n.home-container .vernacular-language {\\n  font-size: 1rem;\\n}\\n\\n.delete-guide-link > span.active {\\n  color: var(--snap-alert) !important; \\n  pointer-events: initial;\\n}\\n\\n.delete-guide-link > span.disabled {\\n  color: var(--secondary) !important;\\n  pointer-events: none;\\n}\\n\\n.delete-guide-link input {\\n  cursor: pointer;\\n  width: 1rem;\\n  height: 1rem;\\n  vertical-align: text-bottom;\\n}\\n\\n.home-container .snapdragon-tag > div .underline-link {\\n  text-transform: initial;\\n}\\n\\n.home-container .snapdragon-tag > div .super-text {\\n  display: inline-block;\\n  margin: .5rem 0 0 .25rem;\\n  vertical-align: top;\\n  color: var(--secondary);\\n  font-style: italic;\\n}\\n\\n.snapdragon-create-guide {  \\n  position: absolute;\\n  bottom: 1rem;\\n  right: 1rem;\\n  color: var(--snap-link);\\n}\\n\\n.snapdragon-create-guide > div:nth-child(1) {\\n  letter-spacing: .05rem;\\n  text-transform: uppercase;\\n}\\n\\n.snapdragon-create-guide .for-text {\\n  vertical-align: middle;\\n}\\n\\n.snapdragon-create-guide .toggle-links {\\n  display: flex;\\n  justify-content: flex-end;\\n  margin: .5rem .25rem 0 0;\\n}\\n\\n.edit-guide-link, .save-guide-link, .margin-right {\\n  margin: 0 .5rem 0 0;\\n}\\n\\n.swap-in-card {\\n  display: initial;\\n}\\n\\n.swap-out-card {\\n  display: none !important;\\n}\\n\\n.no-pointer-events {\\n  pointer-events: none;\\n}\\n\\n.snapdragon-intro {\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock));\\n  top: calc(var(--vhStandardBlock));  \\n}\\n\\n.snapdragon-intro > h3, .snapdragon-intro > h4, .snapdragon-intro > h5 {\\n  line-height: 2;\\n  font-size: 1rem;\\n  margin: 1.2rem 2.4rem 0 2.4rem !important;\\n}\\n\\n.snapdragon-intro .youtube-icon {\\n  font-size: 1rem;\\n}\\n\\n.lesson-list {\\n  position: relative;\\n  background-color: var(--snap-block-light);\\n}\\n\\n.lesson-list-header {\\n  padding: 0 !important;\\n  background-color: var(--snap-list-header-background);\\n  justify-content: space-between;\\n}\\n\\n.lesson-list-header > div:nth-child(1) {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.lesson-list-header > div:nth-child(1) > div {\\n  color: var(--snap-text-medium-light);\\n  display: flex;\\n  align-items: center;\\n  width: 100%;\\n  justify-content: space-between;\\n  padding-right: 1rem;\\n}\\n\\n.lesson-list-header > div:nth-child(2) {  \\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer;\\n}\\n\\n.lesson-list-header > div:nth-child(2) > div {  \\n  height: calc( var(--vh) * 5);\\n  width: calc( var(--vh) * 5);\\n}\\n\\n.lesson-list-header > div:nth-child(1) {\\n  padding-left: .5rem !important;\\n}\\n\\n.lesson-list-header > div[data-toggle-state=\\\"off\\\"]:nth-child(1) > div:nth-child(1) {\\n  display: none;\\n}\\n\\n.lesson-list-header > div[data-toggle-state=\\\"on\\\"]:nth-child(1) > div:nth-child(2) {\\n  display: none;\\n}\\n\\n.lesson-list-header i {\\n  font-size: 1rem;\\n  vertical-align: super;\\n  color: var(--snap-text-medium-light);\\n  cursor: pointer;\\n}\\n\\n.lesson-list-carousel-item {\\n  display: flex;\\n  margin: .25rem 0;\\n}\\n\\n.lesson-list-carousel-item > div:nth-child(3) {\\n  font-size: 1.3rem;\\n  cursor: pointer;\\n  align-items: center;\\n  display: flex;\\n  position: absolute;\\n  right: .5rem;\\n}\\n\\n.lesson-list-item {\\n  padding: 1rem .5rem;\\n  pointer-events: none;\\n}\\n\\n.lesson-review, .lesson-terms-review {\\n  pointer-events: initial;  \\n  /* line-height: 3; */\\n}\\n\\n.lesson-review i {\\n  font-size: .9rem;\\n  color: var(--snap-collection);\\n}\\n\\n.lesson-review i.fa-sync, .lesson-list-item i.fa-sync {\\n  font-size: 1rem;\\n  color: var(--snap-active);\\n}\\n\\n.lesson-list > div > div:nth-child(1) {\\n  justify-content: space-between;\\n  /* top: 0; */\\n  /* z-index: 30;\\n  width: 100%; */\\n}\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n) {\\n  background-color: var(--snap-lesson-row-green);\\n}\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n+1) {\\n  background-color: var(--snap-lesson-row-green);\\n}\\n\\n.lesson-list .scrollable {\\n  width: 100%;  \\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock, 10vh));\\n  flex-direction: column;\\n  top: var(--vhStandardBlock, 10vh);\\n  border-top: 1px solid var(--snap-border-lightest);\\n}\\n\\n.lesson-list .scrollable .btn input[type=radio] {\\n  position: absolute;\\n  clip: rect(0,0,0,0);\\n}\\n\\n.youtube-green-fg {\\n  color: var(--snap-youtube-green);\\n}\\n\\n.button-block {\\n  height: var(--vhButtonBlock, 9vh);\\n  margin: 0 !important;\\n}\\n\\n.running-block {\\n  height: var(--vhRunningBlock, 9vh);\\n}\\n\\n.calendar-block {\\n  height: var(--vhCalendar, 11vh);\\n}\\n\\n.modal-footer.double-centred-block {\\n  background-color: var(--snap-portrait);\\n  text-transform: uppercase;\\n  cursor: pointer;\\n}\\n\\n.video {\\n  position: sticky;\\n  position: -webkit-sticky; \\n  top: 0; \\n  margin: 0;\\n  padding: 0;\\n  padding-top: .4rem;\\n  border-top: 1px solid var(--snap-border-light);\\n  position: relative;\\n  height: 0;\\n  padding-top: 56.25%;\\n  width:100%;\\n}\\n\\n.video iframe {\\n  position: absolute;\\n  top: 0; left: 0;\\n  border: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.home-scrolling-container {\\n  position: relative;\\n}\\n\\n.home-scrolling-container .scrollable {\\n  top: calc( var(--vhScrollingTop));\\n}\\n\\n.form-check {\\n  pointer-events: initial !important;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.form-check-input {\\n  margin-top: 0;\\n}\\n\\n.lesson-list .btn-group label.form-check-label {\\n  background-color: initial;\\n  cursor: pointer;\\n}\\n\\n.main-header {\\n  font-size: 1.4rem;\\n  text-transform: uppercase;\\n  letter-spacing: .25rem;\\n}\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5;\\n}\\n\\n#insertParent {\\n  font-size: .8rem;\\n  padding: 1rem;\\n}\\n\\n.col-count-2 {\\n  column-count: 2;\\n}\\n\\n.col-count-3 {\\n  column-count: 3;\\n}\\n\\n#insertParent > div > div:nth-child(1) {\\n  font-style: italic;\\n  font-size: .9rem;\\n}\\n\\n.border-bottom {\\n  border-bottom: .03rem solid var(--snap-border-medium);\\n}\\n\\n.lesson-companion {\\n  display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    font-style: italic;\\n    font-size: 1.1em;\\n    height: var(--vhStandardBlock, 10vh);\\n}\\n\\n.score-summary {\\n  top: calc(var(--vhStandardBlock));\\n  padding: .5rem 1.5rem;\\n}\\n\\n.score-summary.scrollable.review-summary {\\n  bottom: 1rem;\\n}\\n\\n.continue-link {\\n  margin-top: .5rem;  \\n}\\n\\n.highlighted-for-review-row {\\n  background-color: var(--snap-content-background) !important;\\n  border-top: 1px solid var(--snap-btn-auxillary);\\n  border-right: 1px solid var(--snap-btn-auxillary);\\n  border-bottom: 1px solid var(--snap-btn-auxillary);\\n  border-left: 1px solid var(--snap-btn-auxillary);\\n}\\n\\n.score-summary-row {\\n  border-bottom: .3rem solid var(--snap-content-background);\\n  padding: 1rem 0;\\n}\\n\\n.score-summary-row-title {\\n  padding: .5rem 0 0 0;\\n}\\n\\n.score-summary-row.species {\\n  background-color: var(--snap-header-background);\\n  border: none;\\n  display: flex;\\n  width: 100%;\\n}\\n\\n.score-summary-row.header {\\n  cursor: pointer;\\n  background-color: initial;\\n  font-size: initial;\\n  letter-spacing: initial;\\n  background-color: var(--snap-row-background);\\n}\\n\\n.score-summary-row > div:nth-child(1), .score-summary-row > div:nth-child(3) {\\n  width: 5rem;\\n  min-width: 5rem;\\n}\\n\\n.score-summary-row > div:nth-child(1) i, .score-summary-row > div:nth-child(3) i {\\n  font-size: 1.2rem;\\n}\\n\\n.score-summary-row > div {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n\\n.score-summary-row > div:nth-child(2) {\\n  flex: auto;\\n  align-items: flex-start;\\n  max-width: 100%;\\n}\\n\\n.score-summary-row.in-columns {\\n  flex-direction: column;\\n  padding: 0;\\n}\\n\\n.score-summary-row.in-columns > div {  \\n  display: flex;\\n  flex-direction: row;\\n  width: 100%;\\n}\\n\\n.score-summary-row.in-columns > div > div {\\n  padding: 1rem 0;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(1), .score-summary-row.in-columns > div > div:nth-child(3) {\\n  width: 6rem;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) {\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  width: 100%;\\n  border-bottom: .03rem solid var(--snap-dd-non-taxa-bg-hover);\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) > div {\\n  font-size: .8rem;\\n}\\n\\n.score-summary-row.in-columns > div > div:nth-child(2) > div:nth-child(1) {\\n  padding: .5rem;\\n}\\n\\n.score-summary-row.in-columns div[data-is-true=\\\"true\\\"] > div:nth-child(2) {\\n  color: var(--snap-success);\\n}\\n\\n.score-summary-row.in-columns div[data-is-true=\\\"true\\\"] > div:nth-child(2) {\\n  border: solid 1px var(--snap-progress-bar);\\n  padding: .3rem;\\n  display: inline-block;\\n}\\n\\n.score-summary-row.in-columns div[data-is-wrong-answer=\\\"true\\\"] {\\n  color: var(--snap-alert); \\n}\\n\\nimg[data-has-image=\\\"false\\\"] {\\n  display: none;\\n}\\n\\n.score-summary-row > div:nth-child(1) i {\\n  display: none;\\n}\\n\\n.score-summary-row > div[data-is-true=\\\"true\\\"]:nth-child(1) i:nth-child(1) {\\n  display: initial;\\n  color: rgb(52, 105, 23,.5);\\n  font-size: .8rem;\\n  font-size: 1.5rem;\\n}\\n\\n.score-summary-row > div:nth-child(1)[data-is-true=\\\"false\\\"] i:nth-child(2) {\\n  display: initial;\\n  color: var(--snap-alert);\\n  color: rgba(183, 12, 21,.5);\\n  font-size: 1.5rem;\\n}\\n\\n.score-summary-row img {\\n  width: 98px;\\n  height: 68px;\\n}\\n\\n.score-summary-row.title > span {\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n\\n.score-summary-footer {\\n  justify-content: flex-end;\\n  align-items: flex-start;\\n}\\n\\n.concealed {\\n  opacity: 0;\\n}\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5 !important;\\n}\\n\\n.autocomplete {\\n  height: 5rem !important;\\n  position: absolute !important;\\n}\\n\\n.login.icon > i:nth-child(2) {\\n  color: var(--snap-text-light);\\n}\\n\\n.login.icon[data-is-logged-in=\\\"true\\\"] > .fa-user-slash {\\n  display: none;\\n}\\n\\n.login.icon[data-is-logged-in=\\\"false\\\"] > .fa-user-check {\\n  display: none;\\n}\\n\\n.quick-fire {\\n  position: relative;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.quick-fire .strips {\\n  height: initial;\\n}\\n\\ninput[type=\\\"number\\\"].big {\\n  width: 4rem;\\n  padding: .5rem;\\n}\\n\\ninput[type=\\\"number\\\"].medium {\\n  width: 3rem;\\n  padding: .25rem;\\n  font-size: .8rem;\\n}\\n\\n.quick-fire-taxa {\\n  column-count: 2;\\n}\\n\\n.quick-fire label, .quick-fire-taxa label {\\n  cursor: pointer;\\n}\\n\\n.quick-fire-taxa span, .quick-fire-branches span {\\n  font-size: .6rem;\\n  vertical-align: super;\\n  display: inline-block;\\n  padding: 0 .125rem;\\n  min-width: 1.5rem;\\n  text-align: left;\\n}\\n\\n.quick-fire-branches span {\\n  font-size: .6rem;\\n}\\n\\n.quick-fire .btn-group {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.quick-fire .btn-group >.btn {\\n  background-color: var(--snap-snap-action-btn);\\n  margin: 0 0 .5rem 0;\\n  border-radius: .25rem !important;\\n  letter-spacing: .03rem;\\n  width: fit-content;\\n  width: max-content;\\n  cursor: pointer !important;  \\n}\\n\\n.quick-fire .btn-group >.btn.active {\\n  background-color: var(--snap-text-medium-dark-hover);\\n  color: var(--snap-text-light);\\n}\\n\\n.quick-fire .quick-fire-branches.btn-group >.btn {\\n  background-color: var(--snap-btn-filter-off);\\n  border: 1px solid var(--snap-border-lightest);\\n}\\n\\n.quick-fire .quick-fire-options .btn-secondary {\\n  border: 1px solid var(--snap-collection-active);\\n}\\n\\n.quick-fire .quick-fire-options .btn-secondary:not(:disabled):not(.disabled).active {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-tertiary-background);\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.quick-fire .quick-fire-branches .btn-secondary {\\n  font-size: .7rem;\\n}\\n\\n.quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n  font-size: .7rem;\\n  background-color: var(--snap-btn-filter-on);\\n  color: var(--snap-text-dark-medium-dark);\\n  border: 1px solid var(--snap-border-light);\\n}\\n\\n.quick-fire .btn {  \\n  cursor: pointer !important;\\n}\\n\\n.quick-fire-text-entry > div{\\n  width: 100%;\\n}\\n\\n.quick-fire .custom-checkbox .custom-control-input:checked ~ .custom-control-label::before {\\n  background-color: var(--snap-btn-blue);\\n}\\n\\n.quick-fire-summary-row.card {\\n  background-color: var(--snap-row-background);\\n  text-align: left;\\n  cursor: pointer;\\n}\\n\\n.quick-fire-summary-row .card-header {\\n  border-bottom: 0;\\n}\\n\\n.quick-review-tabs span {\\n  pointer-events: none;\\n}\\n\\n.nav-link {\\n  color: var(--snap-text-medium-dark);\\n  letter-spacing: .03rem;\\n}\\n\\n.nav-pills .nav-link.active, .nav-pills .show>.nav-link {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--snap-collection-light);\\n}\\n\\n.nav-pills .nav-item:nth-child(1) .nav-link.active, .nav-pills .nav-item:nth-child(1) .show>.nav-link {\\n  background-color: var(--snap-success-medium);\\n}\\n\\n.nav-pills .nav-item:nth-child(2) .nav-link.active, .nav-pills .nav-item:nth-child(2) .show>.nav-link {\\n  background-color: var(--snap-alert-medium);\\n}\\n\\n.nav-pills .nav-link {\\n  border-radius: 0;\\n  position: relative;\\n}\\n\\n.quick-fire .nav-link.active.show {\\n  display: block;\\n}\\n\\n.quick-fire .nav-item a:hover {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--snap-btn-hover);\\n}\\n\\n.quick-fire .nav-item:nth-child(1) a:hover {\\n  background-color: var(--snap-success-light);\\n}\\n\\n.quick-fire .nav-item:nth-child(2) a:hover {\\n  background-color: var(--snap-alert-light);\\n}\\n\\n.quick-fire .accordions-container {\\n  height: calc(\\n     (var(--vh, 1vh) * 100) \\n    - var(--vhFixtures, 15vh)\\n    - var(--vhDoubleStandardBlock,20vh)\\n    - var(--vhStandardBlock,10vh) \\n    - 1rem\\n    );\\n    top: calc(\\n        var(--vhDoubleStandardBlock,20vh)\\n      + var(--vhStandardBlock,10vh) \\n    );\\n}\\n\\n.correct-answer-color {\\n  color: var(--snap-success); \\n}\\n\\n.incorrect-answer-color {\\n  color: var(--snap-alert);\\n}\\n\\n.low-relief-block {\\n  border: 1px solid var(--snap-success-light) !important;\\n  background-color: var(--snap-species-highlight-background);\\n}\\n\\n.horizontal-buttons {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr;\\n  grid-gap: .5rem;\\n}\\n\\n.lesson-spinner {\\n  font-size: 5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh)); \\n}\\n\\n.image-slider-190 img {\\n  height: 190px;\\n  min-height: 190px;\\n}\\n\\n.lesson-icon{\\n  width: 98px;\\n  height: 68px;\\n  object-fit: none;\\n}\\n\\n.location-filter-options {\\n  padding: .5rem;\\n  grid-template-rows: 1fr 1fr;\\n  display: grid;\\n}\\n\\n.skip-link {\\n  position: absolute;\\n  top: -40px;\\n  left: 0;\\n  background: #000000;\\n  color: white;\\n  padding: 8px;\\n  z-index: 100;\\n}\\n\\n.skip-link:focus {\\n  top: 0;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./common.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  a {\\n    color: var(--snap-youtube-green);\\n  }\\n\\n  h1 {\\n    font-size: .9rem;\\n  }\\n\\n  h2 {\\n    font-size: .8rem;\\n  }\\n\\n  h3 {\\n    font-size: .7rem;\\n  }\\n\\n  img {\\n    max-width: 100%;\\n    display: block;\\n  }\\n\\n  h1, h2, h3 {\\n    font-weight: unset;\\n    margin: 0 !important;\\n  }\\n\\n  fieldset {\\n    border: none;\\n  }\\n\\n  label {\\n    margin: 0;\\n  }\\n\\n  legend {\\n    margin-bottom: 0 !important;\\n    width: initial !important;\\n  }\\n\\n  caption {\\n    padding: 0;\\n    height: 0;\\n  }\\n\\n  dt {\\n    font-weight: 500;\\n  }\\n\\n  .flex {\\n    display: flex;\\n  }\\n\\n  .flexnowrap {\\n    flex-wrap: nowrap;\\n  }\\n\\n  .relative {\\n    position: relative;\\n  }\\n\\n  .absolute {\\n    position: absolute;\\n  }\\n\\n  .standard-block {\\n    height: var(--vhStandardBlock, 10vh);\\n  }\\n  \\n  .double-standard-block {\\n    height: var(--vhDoubleStandardBlock, 20vh);\\n  }\\n  \\n  .half-standard-block {\\n    height: var(--vhHalfStandardBlock, 5vh);\\n  }\\n  \\n  .one-and-half-standard-block {\\n    height: var(--vhOneAndHalfStandardBlock, 15vh);\\n  }\\n\\n .centred-block {\\n    display: flex;\\n    align-items: center;\\n    width: -moz-available;\\n    width: -webkit-fill-available;\\n  }\\n  \\n  .bottom-aligned {\\n    display: flex;\\n    align-items: flex-end;\\n  }\\n  \\n  .double-centred-block {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  \\n  .vertical-centred-block {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n  }\\n  \\n  .vertical-evenly-spaced-block {\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-evenly;\\n  }\\n  \\n  .horizontal-evenly-spaced-block {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: space-evenly;\\n  }\\n\\n  .margin-all {\\n    margin: .5rem !important;\\n  }\\n  \\n  .margin-top {\\n    margin-top: .5rem !important;\\n  }\\n  \\n  .margin-right {\\n    margin-right: .5rem !important;\\n  }\\n  \\n  .half-margin-right {\\n    margin-right: .25rem !important;\\n  }\\n  \\n  .double-margin-right {\\n    margin-right: 1rem !important;\\n  }\\n  \\n  .margin-bottom {\\n    margin-bottom: .5rem !important;\\n  }\\n  \\n  .margin-left {\\n    margin-left: .5rem !important;\\n  }\\n  \\n  .half-margin-left {\\n    margin-left: .25rem !important;\\n  }\\n  \\n  .padding {\\n    padding: .5rem;\\n  }\\n  \\n  \\n  .half-padding {\\n    padding: .25rem;\\n  }\\n  \\n  .padding-top {\\n    padding-top: .5rem;\\n  }\\n  \\n  .padding-right {\\n    padding-right: .5rem;\\n  }\\n  \\n  .padding-bottom {\\n    padding-bottom: .5rem;\\n  }\\n  \\n  .padding-left {\\n    padding-left: .5rem;\\n  }\\n\\n  .custom-control {\\n    display: flex;\\n    align-items: center;\\n  }\\n  \\n  .custom-checkbox .custom-control-input:checked ~ .custom-control-label::before {\\n    background-color: rgb(98, 127, 134);\\n  }\\n  \\n  .custom-checkbox\\n    .custom-control-input:disabled:checked\\n    ~ .custom-control-label::before {\\n    background-color: rgba(41, 108, 44, 0.3);\\n    pointer-events: none;\\n  }\\n  \\n  .custom-checkbox input {\\n    margin: 0 0.5rem 0 0;\\n  }\\n\\n  .show {\\n    display: inline;\\n  }\\n  \\n  .hide {\\n    display: none;\\n  }\\n  \\n  .hide-important {\\n    display: none !important;\\n  }\\n\\n\\n  .visually-hidden:not(:focus):not(:active) {\\n    position: absolute !important;\\n    height: 1px; \\n    width: 1px;\\n    overflow: hidden;\\n    clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\\n    clip: rect(1px, 1px, 1px, 1px);\\n    white-space: nowrap; /* added line */\\n}\\n  \\n  .underline-link {\\n    color: var(--snap-youtube-green);\\n    cursor: pointer;\\n    display: inline-block;\\n    line-height: 1.8;\\n    pointer-events: initial;\\n  }\\n\\n  .underline-link:hover, .underline-link:focus {\\n    color: var(--snap-text-black);\\n  }\\n\\n  .underline-link:focus {\\n    outline: 1px solid var(--snap-border-medium)\\n  }\\n\\n  .underline-link-left-margin {\\n    margin-left: -.25rem;\\n  }\\n\\n  a.underline-link, a.underline-link:hover, a.underline-link:active, a.underline-link:focus {\\n    color: var(--blue) !important;\\n    border-color: transparent;\\n  }\\n\\n  a.underline-link:hover, a.underline-link:active, a.underline-link:focus {\\n    border-color: var(--blue) !important;\\n  }\\n\\n  .full-width {\\n    width: 100%;\\n  }\\n\\n  .cursor-pointer {\\n    cursor: pointer;\\n  }\\n\\n  .border-top {\\n    border-bottom: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-right {\\n    border-right: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-bottom {\\n    border-bottom: 1px solid var(--snap-border-light);\\n  }\\n\\n  .border-left {\\n    border-left: 1px solid var(--snap-border-light);\\n  }\\n\\n  .justify-space-between {\\n    justify-content: space-between;\\n  }\\n\\n  .justify-end {\\n    justify-content: flex-end;\\n  }\\n\\n  .small-text {\\n    font-size: .8rem !important;\\n  }\\n\\n  .smaller-text {\\n    font-size: .7rem !important;\\n  }\\n\\n  .extra-small-text {\\n    font-size: .6rem !important;\\n  }\\n\\n  .large-text {\\n    font-size: 1.2rem !important;\\n  }\\n\\n  .extra-large-text {\\n    font-size: 1.5rem !important;\\n  }\\n\\n  .capitalise {\\n    text-transform: capitalize;\\n  }\\n  \\n  .uppercase {\\n    text-transform: uppercase;\\n  }\\n  \\n  .line-through {\\n    text-decoration: line-through;\\n  }\\n\\n  .modal-background-relief {\\n    background-color: var(--snap-species-highlight-background);\\n  }\\n\\n  .modal-background-relief-emphasis {\\n    border: 1px solid var(--snap-success) !important;\\n  }\\n\\n  .border-light {\\n    border: 1px solid var(--snap-success-light) !important;\\n  }\\n\\n  .border-medium {\\n    border: 1px solid var(--snap-border-medium);\\n  }\\n\\n  .vertical-block {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\\n  .emphasis {\\n    font-weight: bold;\\n    letter-spacing: .03rem;\\n  }\\n  \\n  .absolute-bottom {\\n    position: absolute;\\n    bottom: .5rem;\\n  }\\n\\n  .answer-response {\\n    margin: 0 0 0 .25rem;\\n  }\\n\\n  .col-count-2 {\\n    column-count: 2;\\n  }\\n\\n  .col-count-3 {\\n    column-count: 3;\\n  }\\n\\n  .col-count-4 {\\n    column-count: 4;\\n  }\\n\\n  .col-count-5 {\\n    column-count: 5;\\n  }\\n\\n  .col-count-6 {\\n    column-count: 6;\\n  }\\n\\n  .nowrap {\\n    white-space: nowrap;\\n  }\\n  \\n  .snap-inactive {\\n    color: var(--snap-inactive) !important;\\n    pointer-events: none !important;\\n  }\\n\\n  .black-text {\\n    color: var(--snap-text-black);\\n  }\\n\\n  /* If set to display inline, would width automatically be determined by the text they contain? each span vs div */\\n  .fit-width {\\n    width: intrinsic;           /* Safari/WebKit uses a non-standard name */\\n    width: -moz-max-content;    /* Firefox/Gecko */\\n    width: -webkit-max-content; /* Chrome */\\n  }\\n\\n  .sr-only {\\n    position: absolute;\\n    width: 1px;\\n    height: 1px;\\n    padding: 0;\\n    margin: -1px;\\n    overflow: hidden;\\n    clip: rect(0, 0, 0, 0);\\n    border: 0;\\n  }  \\n\\n  .super {\\n    vertical-align: super;\\n    font-size: .8em;\\n  }  \\n\\n/* https://css-tricks.com/styling-cross-browser-compatible-range-inputs-css/ */\\n\\n/* \\n  input[type=range] {\\n    -webkit-appearance: none;\\n    margin: 18px 0;\\n    width: 100%;\\n  }\\n  input[type=range]:focus {\\n    outline: none;\\n  }\\n  input[type=range]::-webkit-slider-runnable-track {\\n    width: 100%;\\n    height: 8.4px;\\n    cursor: pointer;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    background: #3071a9;\\n    border-radius: 1.3px;\\n    border: 0.2px solid #010101;\\n  }\\n  input[type=range]::-webkit-slider-thumb {\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    border: 1px solid #000000;\\n    height: 36px;\\n    width: 16px;\\n    border-radius: 3px;\\n    background: #ffffff;\\n    cursor: pointer;\\n    -webkit-appearance: none;\\n    margin-top: -14px;\\n  }\\n  input[type=range]:focus::-webkit-slider-runnable-track {\\n    background: #367ebd;\\n  }\\n  input[type=range]::-moz-range-track {\\n    width: 100%;\\n    height: 8.4px;\\n    cursor: pointer;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    background: #3071a9;\\n    border-radius: 1.3px;\\n    border: 0.2px solid #010101;\\n  }\\n  input[type=range]::-moz-range-thumb {\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    border: 1px solid #000000;\\n    height: 36px;\\n    width: 16px;\\n    border-radius: 3px;\\n    background: #ffffff;\\n    cursor: pointer;\\n  }\\n  input[type=range]::-ms-track {\\n    width: 100%;\\n    height: 8.4px;\\n    cursor: pointer;\\n    background: transparent;\\n    border-color: transparent;\\n    border-width: 16px 0;\\n    color: transparent;\\n  }\\n  input[type=range]::-ms-fill-lower {\\n    background: #2a6495;\\n    border: 0.2px solid #010101;\\n    border-radius: 2.6px;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n  }\\n  input[type=range]::-ms-fill-upper {\\n    background: #3071a9;\\n    border: 0.2px solid #010101;\\n    border-radius: 2.6px;\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n  }\\n  input[type=range]::-ms-thumb {\\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\\n    border: 1px solid #000000;\\n    height: 36px;\\n    width: 16px;\\n    border-radius: 3px;\\n    background: #ffffff;\\n    cursor: pointer;\\n  }\\n  input[type=range]:focus::-ms-fill-lower {\\n    background: #3071a9;\\n  }\\n  input[type=range]:focus::-ms-fill-upper {\\n    background: #367ebd;\\n  } */\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./species-list.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".species-table {\\n  border-right: 1px solid var(--snap-btn-auxillary);\\n  border-left: 1px solid var(--snap-btn-auxillary);\\n  border-bottom: 1px solid var(--snap-btn-auxillary);\\n}\\n\\n.table-header {\\n  cursor: pointer;\\n  display: flex;\\n  flex-direction: row;\\n  border: 0;\\n  height: var(--vhRunningBlock,7.5vh);\\n  z-index: 10;\\n  align-items: center;\\n  top: 0;\\n  background-color: var(--snap-btn-auxillary);\\n  color: var(--snap-text-light);\\n  font-size: 1.1em;\\n  letter-spacing: .01rem;\\n}\\n\\n.table-header th {\\n  cursor: pointer;\\n  font-weight: initial;\\n}\\n\\n.table-row {\\n    display: flex;\\n    flex-direction: row;\\n    height: var(--vhRow, 12.5vh);\\n    font-size: .9em;\\n  }\\n  \\n  .table-row-chevron {\\n    display: flex;\\n    justify-content: center;\\n    width: 100%;\\n  }\\n\\n  tr.master:nth-child(2n + 1) {\\n    background-color: var(--snap-content-background);\\n  }\\n \\n  .table-row img, table input {\\n    cursor: pointer;\\n  }\\n\\n  .table-row td button i {\\n    min-width: 2.5rem;\\n  }\\n  \\n  .table-row img {\\n    width: 64px;\\n    height: 64px;\\n    object-fit: none;\\n    padding: .5rem;\\n  }\\n\\n  .table-row img:hover {\\n    opacity: .8;\\n  }\\n  \\n  .table-row img:focus {\\n    border: 1px solid black;\\n  }\\n  \\n  .table-row .lp-level {\\n    padding: 0 0 0 0.5rem;\\n  }\\n\\n  .inserted-td {\\n    font-size: .9rem;\\n    white-space: normal;\\n    text-align: left;\\n    padding: .5rem;\\n  }\\n\\n  th {\\n    text-align: initial;\\n  }\\n\\n\\n  .table-header th:nth-child(1) {\\n    min-width: 80px;\\n  }\\n\\n  .species-list .table-header th:nth-child(2):after,\\n  .species-list .table-header th:nth-child(3):after {\\n    display: inline-block;\\n    width: 0;\\n    height: 0;\\n    margin-left: 0.255rem;\\n    vertical-align: middle;\\n    content: \\\"\\\";\\n    border-top: 0.3rem solid;\\n    border-right: 0.3rem solid transparent;\\n    border-bottom: 0;\\n    border-left: 0.3rem solid transparent;\\n    cursor: default;\\n  }\\n  \\n  .table-header th:nth-child(1) > span,\\n  .table-footer td:nth-child(1) > span {\\n    height: 1px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  \\n  .table-header th:nth-child(2) {\\n    flex: 3;\\n    align-items: flex-start;\\n  }\\n  \\n  .master.table-row td:nth-child(1) {\\n    width: 80px;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .species-description > td:nth-child(1) {\\n    width: 100%;\\n  }\\n\\n  .table-row td:nth-child(2) {\\n    flex: 3;\\n    display: flex;\\n    align-items: flex-start;\\n    flex-direction: column;\\n    justify-content: center;\\n  }\\n\\n  .table-header th:nth-child(3), .table-row td:nth-child(3), .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n    flex: 1;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .table-header th:nth-child(5), .table-row td:nth-child(5) {\\n    flex: 1;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) {\\n      flex: 1;\\n      display: flex;\\n      align-items: center;\\n  }\\n\\n  .table-header th:nth-child(5), .table-row td:nth-child(5) button {\\n    position: absolute;\\n    right: 2.5rem;\\n  }\\n\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) button {\\n    position: absolute;\\n    right: .5rem;\\n  }\\n\\n  .hide-column {\\n    flex: 0 !important;\\n    display: none !important;\\n  }\\n\\n .species-table .mushroom-icon svg {\\n  width: 1rem;\\n  height: 1rem;\\n  margin-top: .3rem;\\n }\\n\\ndiv.species-description {\\n  background-color: var(--snap-species-highlight-background);\\n  border-top: .5px solid var(--snap-youtube-green);\\n  border-bottom: .5px solid var(--snap-youtube-green);\\n  padding: 1rem;\\n  color: rgba(0, 0, 0, .85);\\n  height: initial;\\n}\\n\\n.species-description > td {\\n  width: 100%;\\n}\\n\\n.youtube-icon, .accordion-icon {\\n  font-size: 1.8rem;\\n  cursor: pointer;\\n}\\n\\ntable .youtube-icon, .accordion-icon {\\n  font-size: 1.2rem;\\n}\\n\\n.species-container {\\n  position: relative;\\n  width: 100%;\\n}\\n\\n.lesson-list-action-icons {\\n  right: .5rem;\\n  bottom: 1.5rem;\\n}\\n \\n.species-table .underline-link {\\n    text-transform: initial;\\n    display: initial;\\n}  \\n\\n.btn-current-lesson-begin {\\n  width: calc(var(--vwGrid) - 1rem);\\n  margin: .5rem;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./snapdragon-media.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* iPhone 5, ?? */\\n\\n@media (max-width: 320px) and (max-height: 568px) {\\n    .imageSlider .active.carousel-item {\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n    }\\n}\\n\\n@media (min-width: 320px) {\\n}\\n@media (min-width: 414px) {\\n    .test-card-question .question-question {\\n        font-size: 1.2rem;\\n    }\\n    .rights-link, .rights-attribution {\\n        grid-template-columns: 4rem auto 4rem;\\n    }\\n}\\n\\n/* iPHONE 6,7,8 */\\n\\n@media (max-width:375px) and (min-height:667px) {\\n    .autocomplete {\\n        height: 8rem !important;\\n    }\\n}\\n\\n/* Galaxy S5 */\\n\\n@media (min-width:360px) {\\n    .names-container .vernacular-name {\\n        max-width: 13.5rem;\\n    }\\n}\\n\\n/* @media (min-width:414px) {\\n    .youtube-icon, .accordion-icon {\\n        font-size: 1.4rem;\\n    }\\n    .species-table .youtube-icon, .accordion-icon {\\n        font-size: 1.2rem;\\n    }\\n} */\\n\\n/* iPHONE 6,7,8 PLUS, iPHONE X, GALAXY S9/S9+ */\\n\\n/* @media  (max-width:414px) and (min-height:736px),\\n        (max-width:375px) and (min-height:812px),\\n        (max-width:360px) and (min-height:740px) {\\n            body {\\n                font-size: 1em;\\n            }\\n} */\\n\\n@media (max-height:568px) {\\n    .test-card .help-txt {\\n        display: none;\\n    }\\n}\\n\\n@media (min-height: 667px) {\\n    .quick-fire .quick-fire-branches .btn-secondary, .quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n        font-size: .9rem;\\n        padding: .5rem;\\n    }\\n}\\n\\n@media (min-width: 576px) {\\n}\\n\\n@media (min-width: 600px) {\\n    .test-card-question .question-question {\\n        font-size: 1.4rem;\\n    }\\n    .modal-subheader {\\n        font-size: 1.2em;\\n    }\\n    .table-header th:nth-child(1) {\\n        min-width: 105px;\\n    }\\n    \\n    .master.table-row td:nth-child(1) {\\n        width: 105px;\\n    }\\n    \\n    .table-row img {\\n        width: 98px;\\n        height: 69px;\\n    }\\n}\\n\\n/* NEXUS 6 */\\n\\n@media (width: 412px) and (max-height: 732px) {\\n    .youtube-icon {\\n        font-size: 1.5rem !important;\\n    }\\n}\\n\\n/* NEXUS 7 */\\n\\n@media (width: 600px) and (max-height: 960px) {\\n    \\n    .block {\\n        font-size: 1.3rem;\\n    }    \\n    .test-card-question .question-statement, .test-card-question .question-provider-question {\\n        font-size: 1rem;\\n    }\\n    body {\\n        font-size: 1.2em;\\n    }\\n    .snapdragon-intro > div {\\n        font-size: 1.2rem;\\n    }\\n    .youtube-icon {\\n        font-size: 1.8rem !important;\\n    }\\n    .lesson-name, .lesson-name .underline-link {\\n        font-size: 1rem;\\n    }\\n}\\n\\n@media (min-height:812px) {\\n}\\n\\n@media (max-width: 768px) {\\n    .landscape {\\n        display: none !important;\\n    }\\n    .portrait-grid {\\n        display: grid;        \\n    }\\n}\\n\\n@media (min-height: 640px) {   \\n    .modal-title {\\n        line-height: 1.5;\\n    } \\n}\\n\\n@media (min-width: 768px) {\\n\\n  h1 {\\n    font-size: 1.6rem;\\n  }\\n\\n  h2 {\\n    font-size: 1.3rem;\\n  }\\n\\n  h3 {\\n    font-size: 1rem;\\n  }\\n\\n  .modal h1 {\\n    font-size: 1.2rem;\\n  }\\n\\n  h2 {\\n    font-size: 1rem;\\n  }\\n\\n  h3 {\\n    font-size: .8rem;\\n  }\\n\\n    .quick-fire .quick-fire-branches .btn-secondary, .quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n        font-size: .9rem;\\n        padding: .5rem;\\n    }\\n\\n    .quick-fire-branches span {\\n        font-size: .6rem;\\n    }\\n    \\n    .autocomplete-options-container{\\n        top: calc(\\n            var(--vhRunningBlock, 7.5vh) + \\n            5px +\\n            var(--vhStandardBlock, 10vh) +\\n            var(--vhStandardBlock, 10vh)\\n            + .25rem\\n        ) !important;\\n    }\\n\\n    .species-search .icon {\\n        font-size: 5.5rem;\\n        height: calc(var(--vhStandardBlock, 30vh) * 2);\\n    }\\n\\n    .autocomplete-options-container.autocomplete {\\n        height: 15rem !important;\\n    }\\n\\n    .squares {\\n        height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh));\\n    }\\n\\n    .imageSlider .carousel-item {\\n        height: var(--vhSmallImageCarousel);\\n        min-height: var(--vhSmallImageCarousel);\\n    }\\n\\n    .score-summary-row {\\n        display: flex;\\n    }\\n\\n    #imageModal .imageSlider .carousel-item, #imageComparisonModal .imageSlider .carousel-item {        \\n        height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - 300px ); /* see below (hack) */\\n    }\\n\\n    .image-description {\\n        padding: 1rem 4rem;\\n        margin-top: -300px; /* see above (hack) */\\n        color: black; /* to compensate for layer above (hack) */\\n    }\\n\\n    .imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n        top: 15%;\\n        top: calc(\\n            (var(--vh, 1vh) * 75 * .5) -\\n            (var(--vh, 1vh) * 7.5) -\\n            .5rem\\n            - 100px /* see above (hack) */\\n        );\\n    }\\n\\n    .modal-image .carousel-inner > div:nth-child(1) {\\n        height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhRunningBlock));\\n    }\\n\\n    .carousel-indicators {\\n        position: absolute;\\n        left: .5rem;\\n        right: .5rem;\\n        padding: .5rem;\\n        text-align: left;\\n        margin-left: 4rem !important;\\n        margin-right: 4rem !important;\\n    }\\n\\n    .carousel-indicators li {\\n        margin-bottom: 0;\\n    }\\n\\n    .test-card-question .question-statement, .test-card-question .question-provider-question {\\n        font-size: .9rem;\\n    }\\n\\n    .species-picker-actions ul {\\n        column-count: 2;\\n    }  \\n\\n    .guide-header-container > div:nth-child(2) {\\n        flex-direction: row;\\n    }\\n\\n    .iconic-taxa-categories svg {\\n        height: 2rem;\\n        font-size: 2rem;\\n    }\\n\\n    .iconic-taxa-categories-selected svg {\\n        height: 1rem;\\n        font-size: 1rem;\\n    }\\n\\n    .iconic-taxa-categories i {\\n        font-size: 1.5rem;\\n    }\\n\\n    .inat.snap-switch .inat-entry {\\n        display: flex;\\n        align-items: center;\\n        margin: 0 0 0 1rem;\\n    }\\n\\n    .inat.snap-switch input[type=\\\"text\\\"] {\\n        margin: 0 .5rem 0 0;\\n        color: var(--snap-text-medium-dark);\\n        padding: 0 .1rem;\\n    }\\n\\n    .modal-guide-wrapper .location.snap-switch {\\n        width: 100%;\\n        margin-top: 2rem;\\n    }\\n\\n    .location-option.place > button {\\n        margin-left: .25rem;\\n    }\\n\\n    #inat-place::placeholder {\\n        color: var(--gray);\\n        font-size: 1rem;\\n    }\\n\\n    .inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n        width: 12rem;\\n        width: fit-content;\\n        padding: 0 .25rem;\\n    }  \\n\\n    .range-slider {\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n    }\\n\\n    .range-slider > span:nth-child(2) {\\n        width: fit-content;\\n        border: .05rem solid var(--snap-border-lightest);\\n        padding: .5rem;\\n    }\\n\\n    .range-limits {\\n        display: initial;\\n    }\\n\\n    .inat-location-elsewhere {\\n        display: grid;\\n        grid-template-columns: 1fr .25rem 1fr;\\n    }\\n\\n    .location-filter-options {\\n      padding: 2rem;\\n      grid-template-columns: 1fr 1fr;\\n    }\\n    \\n    .traits-names-txt {\\n        display: grid;\\n        grid-template-columns: 1fr 1fr;\\n        padding: 1rem;\\n        border-bottom: 1px solid var(--snap-border-lightest);\\n    }\\n\\n    .iconic-icon {\\n        font-size: 2rem;\\n    }\\n\\n    .question-container .mushroom-icon-header svg {\\n        width: 1.8rem;\\n        height: 1.8rem;\\n        fill: var(--snap-iconic-icon-header);\\n    }\\n\\n    .species-header {\\n        text-align: right;\\n    }\\n\\n    .test-card-question .help-txt {\\n        margin: 1rem .5rem;\\n        font-family: serif;\\n        font-weight: bold;\\n        letter-spacing: .05rem;\\n    }\\n\\n    div.text-entry {\\n        margin: 1rem 0;\\n        padding: 0.5rem;\\n    }\\n\\n    .text-entry input {\\n        width: 75%;\\n        padding: 0.5rem;\\n        border: 0.05rem solid var(--snap-border-light);\\n    }\\n\\n    .video {\\n        top: -2px;\\n    }\\n\\n    .table-row {\\n        font-size: .8rem;\\n    }\\n\\n    .table-row td:nth-child(3) {\\n        display: flex;\\n        flex-direction: column;\\n        align-items: flex-start;\\n        justify-content: center;\\n    }\\n\\n    .species-list .scrollable {\\n        bottom: 0;\\n        top: 0;      \\n    }\\n        \\n    .right-grid .header, .right-grid .footer {\\n        justify-content: flex-start;\\n        padding-right: 1rem;\\n    }\\n\\n    .right-grid .footer > ul, .left-grid .footer > ul {\\n        max-width: 50%;\\n        text-transform: none;\\n        justify-content: space-between;\\n    }\\n\\n    .snapdragon-intro > div:nth-child(1) {\\n        margin: 0rem 2.4rem 0 2.4rem !important;\\n    }\\n\\n    .snapdragon-intro {\\n        height: initial;  \\n        padding: 2rem;\\n    }\\n\\n    .lesson-icon {\\n        width: 80px;\\n        height: 80px;\\n        object-fit: none;\\n    }\\n\\n    .lesson-list-carousel-item {\\n        align-items: center;\\n        display: grid;\\n        grid-template-columns: 1fr 3fr 1fr;\\n    }\\n\\n    .lesson-list-carousel-item > div:nth-child(3) {\\n        justify-content: center;\\n        margin: 0;\\n    }\\n\\n    .lesson-list-carousel-item > div:nth-child(3) > div {\\n        display: flex;\\n    }\\n\\n    body {\\n        max-width: 1200px;\\n    }\\n\\n    .left-grid {\\n        width: 458px;\\n        grid-area: left;\\n    }\\n\\n    .right-grid {\\n        width: 742px;\\n        grid-area: right;\\n    }\\n\\n    .grid {\\n        grid-template-columns: 1fr 1fr;\\n        grid-template-areas: \\\"right left\\\";\\n    }\\n\\n    .left-grid {\\n        display: grid;\\n    }  \\n\\n    .pool {\\n        max-width: 70%;\\n    }\\n\\n    .bird-song, .taxon-identification, .taxon-summary {\\n        margin: 1rem 4rem 0 4rem;\\n    }\\n\\n    .strips {\\n        cursor: pointer;\\n        width: initial;\\n        overflow-y: auto;\\n        padding: .5rem;\\n    }\\n\\n    .strip {\\n        min-width: initial;\\n        margin: .75rem .5rem .75rem 0;\\n        padding: .75rem;\\n    }\\n\\n    body {\\n        font-size: .9em;\\n    }\\n\\n    .home-scrolling-container .scrollable {\\n        position: relative; \\n        top: 0;\\n    }\\n\\n    .mixed-content-container {\\n        top: calc(\\n              var(--vhStandardBlock, 10vh)\\n            + var(--vhCalendar,11vh));\\n        height: calc(\\n              var(--vh, 1vh) * 100\\n            - var(--vhRunningBlocks,15vh)\\n            - var(--vhDoubleStandardBlock,20vh) \\n            - var(--vhCalendar,11vh) \\n            - 1.5rem);\\n      }\\n\\n      .modal-header {\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n      }\\n    \\n      iframe {\\n          width: 100%;\\n          border: 0;\\n      }\\n\\n      #badgeListModal .modal-dialog {\\n        width: 30vw;\\n        margin: calc( var(--vhRunningBlock) + var(--vhStandardBlock) + 5px + .5rem ) auto auto auto;\\n      }\\n\\n      #badgeListModal .modal-body {\\n        height: calc(var(--vhDoubleStandardBlock, 20vh) * 2);\\n      }\\n\\n      #wikiModal .modal-dialog {\\n        max-width: 900px;\\n        margin: auto;\\n      }\\n\\n      #wikiModal iframe {\\n          height: 100%;\\n      }\\n    \\n      #imageModal .modal-dialog {\\n        max-width: 600px;\\n        margin: auto;\\n      }\\n        \\n      #imageModal .modal-title span {\\n          display: flex;\\n          flex-direction: row;\\n      }\\n    \\n      #imageModal .modal-title span > span:nth-child(1) {\\n          margin: 0 .5rem 0 0;\\n      }\\n    \\n      #iNatWidgetModal .modal-dialog {\\n          max-width: 45vw;\\n      }\\n      \\n      #iNatWidgetModal .modal-header {\\n          display: inline;\\n      }\\n    \\n      #cardModal .feature-types {\\n          width: 100%;\\n          margin: 0;\\n      }\\n\\n      .info-details {\\n        padding: 1rem 4rem;\\n      }\\n\\n      .info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n          padding: .5rem;\\n      }\\n\\n    .non-taxon.card img {\\n        height: 5.5rem;\\n        width: 5.5rem;\\n      }\\n\\n    .response-update {\\n        left: 0;\\n        right: 0;\\n        justify-content: flex-end;\\n    }\\n\\n    .strip:hover, .strip:focus, .strip:focus-within {\\n        box-shadow: 0 2px 8px transparent;\\n        border: 1px solid var(--snap-border-light);\\n    }\\n\\n    .strip:hover button, .strip:focus button, .strip:focus-within button {\\n      color: var(--snap-text-medium-dark);\\n    }\\n\\n    .strip {\\n        display: flex;\\n        flex-direction: column;\\n    }\\n\\n    .strip > div:nth-child(2) {\\n        margin-top: .5rem;\\n    }\\n\\n    .strip-single-line {\\n        padding: 1.5rem;\\n    }\\n\\n    .portrait, .portrait-grid {\\n        display: none !important;\\n    }  \\n\\n    .header > div:nth-child(2) {\\n        max-width: initial;\\n        text-transform: initial;\\n    }\\n\\n    .non-taxa {\\n        display: flex;\\n        flex-direction: column;\\n        align-items: flex-end;\\n    }\\n\\n    .non-taxa .btn-group {\\n        width: 12rem;\\n        flex-direction: column;\\n        margin: 0 .5rem;\\n    }\\n\\n    .non-taxa .btn.btn-secondary {\\n        height: 3rem;\\n        cursor: pointer !important;\\n    }\\n\\n    .non-taxon-card-wiki {\\n        margin: 0 .5rem 0 0;\\n    }\\n\\n    .modal-header-container {\\n        padding-bottom: 4px;\\n        border-bottom: 1px solid var(--snap-border-light);\\n    }\\n}\\n\\n@media (min-width: 1024px) {\\n\\n    .left-grid {\\n        width: 391px;\\n    }\\n\\n    .right-grid {\\n        width: 633px;\\n    }\\n\\n    .squares {\\n        padding-top: 2rem;\\n    }\\n\\n    .squares > div {\\n        width: 190px;\\n        height: 150px;\\n    }\\n\\n    .table-header th:nth-child(2), .table-row td:nth-child(2) {\\n        flex: 5;\\n    }\\n    \\n    .table-header th:nth-child(3), .table-row td:nth-child(3) {\\n        flex: 5;\\n        font-size: .8rem;\\n        line-height: 2;\\n    }\\n    \\n    .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n        flex: 2 !important;\\n    }\\n\\n    .table-header th:nth-child(3) span:nth-child(2):after {\\n        margin-left: .355rem;\\n    }\\n\\n    .table-header th:nth-child(3):after {\\n        display: none;\\n    }\\n\\n    .species-list .table-header th:nth-child(3) span:after {\\n        display: inline-block;\\n        width: 0;\\n        height: 0;\\n        margin-left: .255rem;\\n        vertical-align: middle;\\n        content: \\\"\\\";\\n        border-top: .3rem solid;\\n        border-right: .3rem solid transparent;\\n        border-bottom: 0;\\n        border-left: .3rem solid transparent;\\n        cursor: default;\\n    }\\n\\n    .species-list .table-header th:nth-child(4):after, .species-list .table-header th:nth-child(5):after {\\n        display: inline-block;\\n        width: 0;\\n        height: 0;\\n        margin-left: .255rem;\\n        vertical-align: middle;\\n        content: \\\"\\\";\\n        border-top: .3rem solid;\\n        border-right: .3rem solid transparent;\\n        border-bottom: 0;\\n        border-left: .3rem solid transparent;\\n        cursor: default;\\n    }\\n\\n    .table-header th:nth-child(3) {\\n        flex-direction: column;\\n        display: flex;\\n        align-items: start;\\n    }\\n\\n    .table-header th:nth-child(3) span {\\n        flex: 1;\\n        line-height: initial;\\n    }\\n\\n    .table-header th:nth-child(5), .table-row td:nth-child(5),\\n    .table-header th:nth-child(6), .table-row td:nth-child(6) {\\n        flex: 1;\\n    }\\n\\n    .narrow-screen {\\n        display: none !important;\\n    }\\n\\n    .names-container .vernacular-name {\\n        max-width: none;\\n      }\\n}\\n\\n@media (max-width: 1024px) {    \\n    .wide-screen {\\n      display: none !important;\\n    }\\n}\\n\\n@media (min-width: 1112px) {\\n\\n    .left-grid, .tiles-container {\\n        width: 450px;\\n    }\\n\\n    .squares > div {\\n        height: calc( ((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh)) / 3);\\n        width: 225px; \\n    }\\n\\n    .squares {\\n        padding-top: 1rem;\\n    }\\n    \\n    .squares > div img {\\n        padding: .5rem;\\n    }\\n\\n    .right-grid {\\n        width: 662px;\\n    }\\n}\\n\\n@media (min-width: 1200px) {\\n    \\n    .left-grid, .tiles-container {\\n        width: 458px;\\n    }\\n\\n    .right-grid {\\n        width: 742px;\\n    }\\n\\n    .squares > div {\\n        width: 229px;\\n    }\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!./create-guide.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!./create-guide.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!./create-guide.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#createGuide .modal-dialog {\\n  max-width: 600px;\\n  margin: auto;\\n}\\n\\n.step-action-content {\\n  padding: 0 .5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock) - .5rem);  \\n}\\n  \\n  .species-picker-link {\\n    font-size: .8rem !important;\\n    font-style: initial;\\n  }\\n\\n  .modal-guide-progress > div {\\n    display: flex;\\n    align-items: center;\\n    padding: .5rem;    \\n    height: inherit;    \\n  }\\n\\n  .modal-subheader {\\n    font-size: 1.1em;\\n  }\\n\\n  .modal-guide-progress .steps {\\n    text-transform: uppercase;\\n  }\\n\\n  .modal-body .modal-guide-progress > div div {\\n    flex: 1;\\n    text-align: center;\\n    padding: .5rem 0;\\n  }\\n  \\n  .modal-body .modal-guide-progress > div > div {\\n    border-right: .005rem solid var(--snap-border-lightest);\\n  }\\n  \\n  .modal-body .modal-guide-progress > div > div:last-child {\\n    border-right: none;\\n  }\\n\\n  .modal-body .modal-guide-progress .active {\\n    color: var(--snap-text-dark);\\n    background-color: var(--snap-active);\\n  }\\n  \\n  .modal-guide-navigation {\\n    display: grid;\\n    grid-template-columns: 4fr auto 4fr;\\n    margin: 0 .5rem;\\n    height: var(--vhRunningBlock, 10vh);\\n    border: 1px solid var(--snap-border-light);\\n  }\\n\\n  .modal-guide-navigation > button {\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .custom-lesson-menu-options .snap-icon-btn:hover, .modal-guide-navigation .snap-icon-btn:hover {\\n    color: var(--snap-collection-active);\\n  }\\n\\n  .right-justify {\\n    justify-content: flex-end;\\n  }\\n\\n  .arrow-wrapper {\\n    padding: 0 .5rem;\\n    font-size: 1.6rem;\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-end;    \\n  }\\n  \\n  .arrow-wrapper-hidden > span {\\n    display: none;\\n  }\\n\\n  .arrow-wrapper i {\\n    pointer-events: initial;\\n    cursor: pointer;\\n  }\\n  \\n  .modal-guide-wrapper .modal-body .location .current {\\n    display: flex;\\n    align-items: center;\\n    margin: 1rem 0;\\n  }\\n\\n  #set-inat-location-btn {\\n    width: 100%;\\n  }\\n\\n  .species-picker-container {\\n    position: relative;\\n  }\\n\\n  .species-picker-container > div {\\n    position: absolute;\\n    top: -5rem;\\n    width: 100%;\\n    display: flex;\\n  }\\n\\n  .chosen-guide-filter {\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .chosen {\\n    position: absolute;\\n    left: .5rem;\\n    right: .5rem;\\n    bottom: calc(var(--vhStandardBlock));  \\n    height: var(--vhHalfStandardBlock, 5vh);\\n  }\\n  \\n  .chosen > div span:nth-child(2) > span {\\n    margin: 0 .25rem;\\n  }\\n  \\n  .save-your-changes {\\n    display: flex;\\n    align-items: center;\\n    position: absolute;\\n    bottom: 1.5rem;\\n    width: 100%;\\n  }\\n  \\n  .modal-body .save-your-changes button {\\n    margin: 0 1rem 0 0;\\n  }\\n  \\n  .modal-body .inat-location-location button {\\n    width: 100%;  \\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .html5-location-place {\\n    width: 100%;\\n  }\\n\\n  #set-inat-identity-btn {\\n    color: var(--snap-text-light);        \\n    background-color: rgb(127, 151, 122);\\n    width: 100%;\\n  }\\n\\n  .modal-guide-wrapper .modal-body .inat button.js-set-inat-identity-btn {\\n    color: var(--snap-text-light);        \\n    background-color: rgb(127, 151, 122);\\n  }\\n\\n  #inat-place, #input-species, #inat-identity {\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    width: 100%;\\n  }\\n\\n  #inat-place::placeholder {\\n    display: inline;\\n  }\\n  \\n  .inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n    width: 100%;\\n    margin: 0;\\n    padding: 0;\\n  }\\n\\n  /* SLIDER */\\n\\n.modal-guide-body .range-slider {\\n    font-size: .9em;\\n    height: var(--vhStandardBlock);\\n    display: flex;\\n    flex-direction: column;\\n    align-items: normal;\\n    justify-content: space-evenly;\\n  }\\n  \\n  .modal-guide-body .range-slider > div:nth-child(2) {\\n    display: flex;\\n  }\\n\\n  .range-limits {\\n    display: none;\\n  }\\n  \\n  .modal-guide-body .set-range-input {\\n    cursor: pointer;\\n    width: 100%;\\n    margin: 0 .25rem;\\n  }\\n\\n  .set-range-input:focus {\\n    outline: 1px solid var(--snap-border-medium);\\n  }\\n  \\n  .modal-guide-body .range-slider.disabled .set-range-input {\\n    pointer-events: none;\\n  }\\n  \\n  /* SNAPDRAGON SWITCH */\\n\\n  .snap-switch {\\n    display: flex;\\n    align-items: center;\\n  }\\n  \\n  .snap-switch-slider {\\n    cursor: pointer;\\n    background-color: rgb(197, 203, 204);\\n  }\\n  \\n  .snap-switch-slider div {\\n    height: 1.6rem;\\n    width: 1.6rem;\\n    border-radius: .2rem;\\n    background-color: var(--snap-collection);\\n    transition-property: all;\\n    transition-duration: .4s;\\n    transition-timing-function: cubic-bezier(0.4, 0, 1, 1);\\n    transition-delay: 0s;\\n    position: absolute;\\n  }\\n\\n  .inat .snap-switch-slider div {\\n    background-color: var(--snap-inat);\\n  }\\n  \\n.embedded-switch {\\n  display: grid;\\n  grid-template-columns: auto 3.2rem 1fr;\\n  height: 1.6rem;\\n}\\n\\n  .snap-switch-slider.left div {\\n    transform: translateX(0);\\n  }\\n  \\n  .snap-switch .txt-left {\\n    align-self: center;\\n    padding: 0 .5rem 0 0;\\n    font-size: .9em;\\n  }\\n\\n  .snap-switch .txt-right {\\n    align-self: center;\\n    padding: 0 0 0 .5rem;\\n  }\\n\\n  .snap-switch-slider.right div {\\n    transform: translateX(1.6rem);\\n  }\\n\\n  .guides .inat .snap-switch {\\n    flex-direction: column;\\n  }\\n   \\n  /* AUTOCOMPLETE */\\n  \\n  #inat-place.active, #input-species.active {\\n    border: .1rem solid var(--snap-text-medium-dark);\\n  }\\n  \\n  .autocomplete-options-container, .inat-autocomplete-options-container {\\n    z-index: 9999;\\n    color: var(--snap-text-dark-medium-dark);\\n    background-color: rgb(250, 250, 250);\\n    border: .05rem solid var(--snap-border-lightest);\\n    text-align: left;\\n    overflow-y: auto;\\n    -webkit-overflow-scrolling: touch;\\n    top: calc(\\n      var(--vhRunningBlock, 7.5vh) + \\n      5px +\\n      var(--vhStandardBlock, 10vh) +\\n      var(--vhRunningBlock, 7.5vh)       \\n      + .25rem\\n      ) !important;\\n      left: .5rem;\\n      right: .5rem;\\n  }\\n\\n  .autocomplete-options-container.autocomplete {\\n    height: 10rem !important;\\n  }\\n\\n  .inat-autocomplete-options-container {\\n    top: calc(\\n      var(--vhRunningBlock, 7.5vh) + \\n      5px\\n      + var(--vhStandardBlock, 10vh)\\n      + var(--vhRunningBlock, 7.5vh)\\n      + var(--vhStandardBlock, 10vh)\\n      + .5rem\\n      ) !important;\\n  }\\n\\n  .autocomplete-options-container > div, .inat-autocomplete-options-container > div {\\n    padding: .25rem;\\n  }\\n  \\n  .autocomplete-options-container .selected, .inat-autocomplete-options-container .selected {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .inat-autocomplete-options-container .selected {\\n    background-color: var(--snap-inat);\\n  }\\n\\n  .autocomplete-options-container .selected {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .autocomplete-options-container > div:hover:not(.group) {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark-hover);\\n    cursor: pointer;    \\n  }\\n\\n.autocomplete-options-container > div.selected {\\n    color: var(--snap-dd-non-taxa-bg-hover);\\n    background-color: var(--snap-text-medium-dark);\\n    cursor: pointer;\\n  }\\n  \\n  #place span {\\n    margin: 0 .25rem 0 0;\\n  }\\n\\n  /* CATEGORIES */\\n\\n  .iconic-taxa-categories {\\n    display: grid;\\n    grid-template-columns: 1fr 1fr;\\n    height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh) - var(--vhHalfStandardBlock) );\\n    padding: 0 1rem 1rem 1rem;\\n  }\\n\\n  .iconic-taxa-categories > div > div {\\n    cursor: pointer;\\n  }\\n  \\n  /* Icon categories list, icon container and size */\\n\\n  .iconic-taxa-categories > div > div > div:nth-child(1), .iconic-taxa-categories button {    \\n    display: flex;\\n    align-items: center;\\n    justify-content: center;  \\n    cursor: pointer;\\n  }\\n\\n  .iconic-taxa-categories > div > div > div:nth-child(1) svg {\\n    color: var(--snap-collection);\\n  }\\n\\n  .iconic-taxa-categories g {\\n    fill: var(--snap-collection);\\n  }\\n\\n  .iconic-taxa-categories i {\\n    font-size: 1rem;\\n    color: var(--snap-collection);\\n  }\\n\\n  .iconic-taxa-selected svg {\\n    color: var(--snap-collection-active) !important;\\n  }\\n\\n  .iconic-taxa-selected svg g {\\n    fill: var(--snap-collection-active) !important;\\n  }\\n\\n  .prop-value-block {\\n    display: flex;\\n    justify-content: flex-end;\\n    align-items: center;\\n  }\\n\\n  .prop-value-block > span:nth-child(2) {\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    display: inline-block;\\n    width: inherit;\\n    /* font-size: 1.1rem; */\\n  }\\n\\n  /* Mushroom icon sizes */\\n\\n  .iconic-taxa-categories svg, .iconic-taxa-categories-selected svg {\\n    width: 1rem;\\n    height: 1rem;\\n    font-size: 1rem;\\n  }\\n\\n  .selected-text svg, .selected-text i, .iconic-taxa-selected i {\\n    color: var(--snap-collection-active);\\n  }\\n\\n  .lesson-taxa .iconic-taxa-categories-selected svg g {\\n    fill: var(--snap-text-medium-dark);\\n  }\\n  \\n  .iconic-taxa-categories-selected svg {\\n    vertical-align: -.125em;\\n  }\\n  \\n  .lesson-taxa .iconic-taxa-categories-selected svg {\\n    width: 1rem;\\n    height: 1rem;\\n  }\\n  \\n  .home-guide .iconic-taxa-categories-selected svg {\\n    width: 2rem;\\n    height: 2rem;\\n  }\\n\\n  .iconic-taxa-categories-selected svg g {\\n    fill: var(--snap-collection-active);\\n  }\\n\\n  .svg-icon {\\n    margin: 0.25rem 0 0;\\n  }\\n  \\n  .svg-icon-selected {\\n    fill: var(--snap-success);\\n    color: var(--snap-success);\\n  }  \\n\\n  /* EXAMPLE LESSONS INC. RB LIST */\\n\\n  .btn.btn-secondary {\\n    flex-direction: row;\\n    align-items: center;\\n  }\\n\\n  .lesson-taxa {\\n    overflow-wrap: break-word;\\n    white-space: initial;\\n    font-size: .8em;\\n  }\\n\\n  .locations .btn.btn-secondary > * {\\n    pointer-events: all;\\n  }\\n\\n  .non-taxon .btn.btn-secondary input {\\n    pointer-events: none;\\n  }\\n\\n  .lesson-name {\\n    line-height: initial !important;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    height: 1.5rem;\\n    display: flex;\\n    align-items: center;\\n    font-size: .8rem;\\n    color: var(--snap-text-black);\\n}\\n\\n  .lesson-name .underline-link {\\n    text-transform: initial;\\n    font-size: .8rem;\\n  }\\n\\n  .lesson-name input {\\n    pointer-events: initial;\\n  }\\n\\n  .lesson-taxa span:nth-child(1) {\\n    margin: 0 .15rem 0 0;\\n  }\\n\\n  .btn.btn-secondary.active .lesson-taxa .iconic-taxa-categories-selected svg g {\\n    fill: white;\\n  }\\n\\n  #confirm-lesson-btn {\\n    margin: 1.5rem 0;\\n    width: 9rem;\\n    background-color: var(--snap-text-medium-dark);\\n  }\\n\\n  .lesson-radio-button {\\n    margin-right: .5rem;\\n  }\\n\\n  /* PORTRAIT & LANDSCAPE EXAMPLE GUIDE */\\n\\n  .btn.btn-secondary {\\n    width: 100%;\\n  }\\n\\n  .start-lesson-wrapper.disabled {\\n    pointer-events: none;\\n  }    \\n\\n  .modal-guide-progress {\\n    cursor: pointer;\\n  }\\n\\n  .modal-guide-progress span {\\n    pointer-events: none;\\n  }\\n\\n  .location-checkbox {\\n    line-height: 3rem;\\n  }\\n\\n  .guide-bottom-actions {\\n    display: flex;\\n    position: absolute;\\n  }\\n\\n  .guide-bottom-actions span:nth-child(1) {\\n    font-size: .8rem;\\n  }\\n\\n  .guide-bottom-actions span:nth-child(2) {\\n    margin-left: .25rem;\\n  }\\n\\n  .location-option > div {\\n    width: 100%;\\n  }\\n\\n  .location-option.inat-entry {\\n    position: relative;\\n  }\\n\\n  .location-option.or-options {\\n    text-align: center;\\n    font-style: italic;\\n  }\\n\\n  .location-option.range {\\n    border: none;\\n  }\\n\\n  .location-option button {\\n    width: 100%;\\n  }\\n  \\n  .location-option:nth-child(3) > div:nth-child(2) {\\n    flex: auto;\\n    position: relative;\\n  }\\n\\n  #googleLogo {\\n    width:  auto;\\n    height: 1rem\\n  }\\n\\n  .location-actions {\\n    height: 100%;\\n  }\\n\\n  .location-actions .actions {\\n    display: grid;\\n    grid-template-rows: 1fr 2rem 1fr;\\n    height: 100%;\\n  }\\n\\n  .species-picker-actions {\\n    height: initial;\\n  }\\n\\n  .filter-option {\\n    color: black;\\n  }\\n\\n  .taxa-actions .actions {\\n    grid-template-rows: 1fr;\\n  }\\n\\n  .filter-actions .actions {\\n    grid-template-rows: auto;\\n  }\\n\\n  .filter-actions .actions {\\n    justify-content: space-between; \\n  }\\n\\n  .filter-actions + div {\\n    display: none !important;\\n  }\\n\\n  .filter-language-option-block {\\n    width: 100%;\\n  }\\n  \\n  .filter-language-option-block span {\\n    text-transform: uppercase;\\n    margin-left: .15rem;\\n  }\\n\\n  .custom-lesson-menu-options {\\n    display: flex;\\n    flex-direction: column;\\n    pointer-events: initial;\\n    cursor: pointer;\\n  }\\n\\n  .custom-lesson-menu-options li {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n    border: 1px solid var(--snap-border-light);\\n  }\\n\\n  .custom-lesson-menu-options li span {\\n    padding: .5rem;\\n  }\\n\\n  .species-actions + div {\\n    display: none !important;\\n  }\\n\\n  .request-feedback .edit-species {\\n    margin: .5rem;\\n    height: var(--vhHalfStandardBlock, 10vh);\\n  }\\n\\n  .request-feedback .lesson-list-item {\\n    padding: .5rem;\\n    background-color: var(--snap-lesson-row-green);\\n    pointer-events: all;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: space-evenly;\\n  }\\n\\n  .request-feedback .lesson-list-item {\\n    line-height: initial !important ;\\n  }\\n\\n  .request-feedback .lesson-name {\\n    line-height: initial;\\n  }\\n\\n  .selected-species-container {\\n    position: relative;    \\n  }\\n\\n  .selected-species-container > div.scrollable {\\n    height: 0;\\n    margin: .5rem;\\n  }\\n\\n  .selected-species-container > div.scrollable.open {\\n    height: calc( (var(--vh, 1vh) * 100) \\n                 - var(--vhFixtures, 15vh) \\n                 - var(--vhStandardBlock,10vh)\\n                 - var(--vhOneHalfStandardBlock,20vh)\\n                 - var(--vhHalfStandardBlock,5vh)\\n                 - var(--vhRunningBlock)\\n                 - .5px\\n      );\\n    top: .5rem;\\n  }\\n\\n  .selected-species {\\n    margin: 1rem;\\n  }\\n\\n  .selected-species-container ul {\\n    columns: 2 200px;\\n    column-gap: 2rem;\\n  }\\n  \\n  #locationForm, #inatForm {\\n    width: 100%;\\n  }\\n\\n@media (min-height: 640px) {  \\n  .modal-guide-wrapper .modal-body .modal-guide-navigation > div:nth-child(1) > div svg {\\n      font-size: 2rem;\\n  }\\n}\\n\\n@media (min-height: 667px) {\\n\\n  .iconic-taxa-categories svg, .iconic-taxa-categories i {\\n    font-size: 1.6rem;\\n    height: 1.6rem;\\n  }\\n\\n  .taxa-actions svg-icon.si-glyph-mushrooms svg {\\n    height: 2rem;\\n  }\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","const UPDATE_CONFIG = '[UPDATE_CONFIG] change to config';\nconst STOP_START_LESSON = '[STOP_START_LESSON] Pause or play current lesson';\nconst CHANGE_LESSON_PLANS = '[CHANGE_LESSON_PLANS] Edit the set of lesson plans';\nconst CHANGE_LESSON_PLAN = '[CHANGE_LESSON_PLAN] Edit the original lesson plan';\nconst SELECT_COLLECTION = '[SELECT_COLLECTION] Update the current selected collection';\nconst NEXT_ROUND = '[NEXT_ROUND] Go to next round';\nconst NEXT_LESSON = '[NEXT_LESSON] Get (new) lesson plan';\nconst NEXT_LAYOUT = '[NEXT_LAYOUT] Render next layout';\nconst NEXT_ITEM = '[NEXT_ITEM] Get next item';\n\nconst SET_ACTIVE_COLLECTION = '[SET_ACTIVE_COLLECTION] New collection';\nconst UPDATE_COLLECTION = '[UPDATE_COLLECTION] Change collection';\nconst UPDATE_COLLECTIONS = '[UPDATE_COLLECTIONS] Update collections list';\nconst RESET_COLLECTION = '[RESET_COLLECTION] Reset collection to initial state';\n\nconst UPDATE_SCORE = '[UPDATE_SCORE] Check user answer and update running score';\nconst UPDATE_TRAIT_SCORE = '[UPDATE_TRAIT_SCORE] Check user answer and update running score';\nconst END_REVISION = '[END_REVISION] Revision complete';\nconst UPDATE_HISTORY = '[UPDATE_HISTORY] Copy round score to history';\nconst UPDATE_COLLECTION_ITEMS = '[UPDATE_COLLECTION_ITEMS] Change collection items';\nconst NEXT_LEVEL = '[NEXT_LEVEL] Go to next level';\nconst UPDATE_LANGUAGE = '[UPDATE_LANGUAGE] Update the current language';\n\nconst UPDATE_ENUMS = '[UPDATE_ENUMS] Update enums by config language';\nconst UPDATE_USER = '[UPDATE_USER] Update user';\nconst UPDATE_LESSON = '[UPDATE_LESSON] Create new lesson';\n\nconst SAVE_LESSON = '[SAVE_LESSON] Add lesson to saved lessons';\nconst REMOVE_LESSON = '[REMOVE_LESSON] Remove lesson from saved lessons on restarting lesson';\n\nconst UPDATE_VIDEO_PLAYER = '[UPDATE_VIDEO_PLAYER] Update video player state';\n\nconst UPDATE_QUICKFIRE = '[UPDATE_QUICKFIRE] Update quick-fire';\nconst CREATE_QUICKFIRE = '[CREATE_QUICKFIRE] Add quick-fire';\nconst CREATE_GLOSSARY = '[CREATE_GLOSSARY] Add glossary';\n\nconst CLICK_EVENT = '[CLICK_EVENT] User triggered event';\n\nexport const types = {\n    CHANGE_LESSON_PLANS,\n    CHANGE_LESSON_PLAN,\n    NEXT_LESSON,\n    NEXT_LAYOUT,\n    NEXT_ITEM,\n    UPDATE_SCORE,\n    UPDATE_TRAIT_SCORE,\n    END_REVISION,\n    UPDATE_HISTORY,\n    SET_ACTIVE_COLLECTION,\n    UPDATE_COLLECTION,\n    UPDATE_COLLECTION_ITEMS,\n    UPDATE_COLLECTIONS,\n    RESET_COLLECTION,\n    NEXT_ROUND,\n    NEXT_LEVEL,\n    UPDATE_CONFIG,\n    STOP_START_LESSON,\n    SELECT_COLLECTION,\n    UPDATE_LANGUAGE,\n    UPDATE_ENUMS,\n    UPDATE_LESSON,\n    SAVE_LESSON,\n    REMOVE_LESSON,\n    UPDATE_VIDEO_PLAYER,\n    UPDATE_USER,\n    CREATE_QUICKFIRE,\n    UPDATE_QUICKFIRE,\n    CREATE_GLOSSARY,\n    CLICK_EVENT\n};","export const config = {\n    language: 'en',\n    moduleSize: 4,\n    callbackTime: 1500,\n    callbackDelay: 1500,\n    excludeRevision: false,\n    isPortraitMode: false,\n    isLandscapeMode: true,\n    collection: {\n        id: 0\n    },\n    mode: 'learn',\n    languages : [\n        { name: 'Deutsche', lang: 'de' },\n        { name: 'English', lang: 'en' },\n        { name: 'Español', lang: 'es' },\n        { name: 'Français', lang: 'fr' },\n        { name: 'Italiano', lang: 'it' },\n        { name: 'Português', lang: 'pt' }\n    ],\n    guide: {\n        iconicTaxa: null,\n        locationLongLat: '',\n        locationPlace: '',\n        locationType: null,\n        place: {\n            id: 1,\n            name: ''\n        },\n        speciesRange: 10,\n        inatId: { key: '', type: '', param: 'user_id' },\n        season: {},\n        perPage: 200,\n        noOfRecords: 50\n    },    \n};","import { types } from 'redux/actions/action-types';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nexport const config = (state = initialConfig, action) => {\n    switch(action.type) {\n        case types.UPDATE_COLLECTION:        \n            return { ...action.data.config, ...{ coordinates: state.coordinates }, ...{ place: state.place } };    \n        case types.UPDATE_CONFIG:\n            return { ...state, ...action.data };\n        case types.UPDATE_LANGUAGE:\n            return { ...state, ...{ language: action.data.lang } };\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.config };\n        default: \n            return state;\n    }\n};\n\nexport const enums = (state = {}, action) => {\n    switch(action.type) {\n        case types.UPDATE_ENUMS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const user = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_USER:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const userAction = (state = null, action) => {\n    switch(action.type) {\n        case types.CLICK_EVENT:\n            return action.data;\n        default:\n            return state;\n    }\n};","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nexport const collections = (state = [], action) => {\n    switch(action.type) {\n        case types.SELECT_COLLECTION:\n            const cols = [ ...state ];\n            cols.forEach(col => {\n                if(col.id === action.data.id) {\n                    col.selected = true;\n                } else {\n                    col.selected = false;\n                }\n            });\n            return cols;\n        case types.UPDATE_COLLECTIONS: {            \n            return state ? [ ...state, ...action.data ] : action.data;\n        }\n        case types.UPDATE_COLLECTION: {\n\n            const collections = [ ...state ];\n\n            collections.forEach(collection => {\n                if(collection.id === action.data.collection.id) {\n                    collection = action.data.collection;\n                }\n            });\n\n            return collections;\n        }\n        case types.SET_ACTIVE_COLLECTION: {\n\n            action.data.lesson.collection.isActive = true;\n\n            const isCollectionUpdate = R.contains(action.data.lesson.collection.id, state.map(collection => collection.id));\n            if(isCollectionUpdate) {\n                return [ ...state.filter(collection => collection.id !== action.data.lesson.collection.id), action.data.lesson.collection ];\n            } else {\n                return [ ...state, action.data.lesson.collection ];\n            }\n        }\n        default:\n            return state;\n    }\n};\n\nexport const collection = (state = { id: 0 }, action) => {\n\n    const getNextRound = (action, state) => {        \n\n        let lesson = action.data.lesson;\n        let itemIndex = (lesson.moduleSize * (lesson.currentRound - 1));\n        let nextItem = state.items[itemIndex];\n        \n        if(lesson.isLevelComplete) {\n            itemIndex = 0;\n            nextItem = state.items[itemIndex];\n        }        \n        return { itemIndex, nextItem };\n    };\n\n    const updateCollection = (state, action) => {\n        \n        let collection = { ...state, ...action.data.collection };\n        if(state.id && state.id === action.data.collection.id ) {\n            collection.itemIndex = state.itemIndex;\n        }\n        let nextItem = collection.items[collection.itemIndex];\n        \n        if(action.data.config.mode === 'review') {\n            collection.allItems = action.data.collection.allItems;\n        }\n\n        if(action.data.config.mode === 'learn-again') {\n            collection.itemIndex = 0;\n            collection.nextItem = collection.items[collection.itemIndex];            \n        }\n\n        return { collection, nextItem };\n    };\n    \n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.SELECT_COLLECTION: {\n            return action.data;\n        }\n        case types.UPDATE_COLLECTION_ITEMS: {\n            const collection = R.clone(state);\n            collection.items = action.data.filter(item => !item.isDeselected);\n            return collection;\n        }\n\n        case types.SET_ACTIVE_COLLECTION: {\n            return { \n                ...action.data.lesson.collection, \n                nextItem: action.data.lesson.collection.items[action.data.lesson.collection.itemIndex] };\n        }\n\n        case types.RESET_COLLECTION: {\n            return action.data.collection;\n        }\n\n        case types.UPDATE_COLLECTION: {            \n            const { collection, nextItem } = updateCollection(state, action);\n            return { ...state, ...collection, nextItem };\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n            return layout.bonus ? state : state;\n        }            \n\n        case types.NEXT_ITEM: {\n            let itemIndex = action.data;\n            let nextItem = state.items[itemIndex];\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_ROUND: {\n            const { itemIndex, nextItem } = getNextRound(action, state);\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_LESSON: {\n            const collection = { ...state, ...action.data.collection };\n            return { ...state, ...collection };\n        }\n\n        case types.NEXT_LEVEL: {\n            return state;\n        }\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const bonusLayout = (state = null, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n\n            if(layout.bonus) {\n                state = layout;\n            }\n            return state;\n        }\n\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.bonusLayout };\n\n        default: {\n            return state; \n        }\n    }\n};","const resetScore = ({\n    total = 0,\n    correct = 0,\n    taxon = '',\n    binomial = '',\n    answer = '',\n    success = false,\n    incorrect = 0,\n    question = '',\n    fails = [],\n    passes = [],\n    answers = [],\n    statement = '',\n    mode = '',\n    totalPassPoints = 0,\n    totalPoints = 0\n  } = {}) => ({\n    total, correct, taxon, binomial, answer, success, incorrect, question, fails, passes, answers, statement, mode, totalPassPoints, totalPoints\n  });\n\nexport const progressState = {\n    score: resetScore(),\n    resetScore\n}","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nconst initialState = { currentRound: 1, rounds: 0, isNextRound: true };\n\nexport const lesson = (state = initialState, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE':\n            return state;\n        \n        case types.UPDATE_LESSON: {\n            return { ...state, ...action.data };\n        }\n\n        case types.NEXT_LAYOUT: {\n            return { ...state, layoutName: action.data.name };\n        }\n\n        case types.NEXT_ITEM: {\n\n            let layoutCounter, isNextRound, isLevelComplete, isLessonComplete = false;;\n\n            layoutCounter = state.layoutCounter ? state.layoutCounter + 1 : 1; \n            \n            layoutCounter = layoutCounter > state.layoutCount ? state.layoutCount : layoutCounter;\n            isNextRound = layoutCounter === state.layoutCount;\n            \n            if(state.layoutName && state.layoutName === 'summary') {\n                isNextRound = true;\n            }\n            isLevelComplete = state.rounds === 0 ? false : state.currentRound === state.rounds;\n    \n            if(state.level && state.level.id && state.levels) {\n                isLessonComplete = isLevelComplete && (state.levels[state.levels.length -1].id === state.level.id);\n            }\n\n            return { ...state, layoutCounter, isNextRound, isLevelComplete, isLessonComplete };\n        }\n\n        case types.NEXT_ROUND: {\n\n            let currentRound = action.data.lesson.currentRound;\n\n            let isLessonComplete = state.rounds === 0 ? false : currentRound === state.rounds;\n\n            let layoutCounter = state.layoutCounter;\n\n            let level = state.level;\n\n            return { ...state, currentRound, layoutCounter, level, isLessonComplete };\n        }\n\n        case types.NEXT_LESSON: {\n\n            let isNextRound = !!state.layoutCount ? state.layoutCounter === state.layoutCount : false;\n            let layoutCounter = 0;\n            let layoutCount = action.data.lesson.layoutCount;\n            \n            return { ...state, ...action.data.lesson, isNextRound, layoutCounter, layoutCount };\n        }\n\n        case types.NEXT_LEVEL: {\n         \n            return { ...state, currentRound: 1 };\n        }\n\n        case types.UPDATE_COLLECTION: {\n\n            if(action.data.config.mode === 'learn-again') {\n                const isNextRound = true;\n                const isLevelComplete = true;\n                return { ...state, currentRound: 1, isNextRound, isLevelComplete };\n\n            } else {\n                return state;\n            }\n        }\n\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.lesson, isNextRound: true };\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const lessons = (state = [], action) => {\n\n    switch(action.type) {\n        case types.SAVE_LESSON:\n            const savedLessonNames = state.map(lesson => lesson.name);\n            if(R.contains(action.data.collection.name, savedLessonNames)) {\n                const lessons = state.filter(lesson => lesson.name !== action.data.collection.name);\n                      lessons.push(action.data);\n                return lessons;\n            } else {\n                return [ ...state, action.data ];\n            }\n            case types.REMOVE_LESSON: {\n                return state.filter(lesson => lesson.name !== action.data.name); \n            }\n        default:\n            return state;\n    }\n};","import { types } from 'redux/actions/action-types';\n\n\nconst cleanAndReturnIncomingState = state => {\n    const quickFire = state;\n    if(quickFire.onClickFiltersLinkListeners) delete quickFire.onClickFiltersLinkListeners;\n    if(quickFire.onClickGlossaryLinkListeners) delete quickFire.onClickGlossaryLinkListeners;\n    return quickFire;\n};\n\nexport const quickFire = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        case types.UPDATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        default:\n            return state;\n    }\n}\n\nexport const glossary = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_GLOSSARY:\n            return action.data;\n        default:\n            return state;\n    }\n}","import { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport thunk from 'redux-thunk';\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web and AsyncStorage for react-native\n\nimport { logger } from 'redux/middleware/logger';\nimport { timeoutScheduler } from 'redux/middleware/timeoutScheduler';\n\nimport { config, enums, user, userAction } from 'redux/reducers/config-reducer';\nimport { collections, collection, bonusLayout } from 'redux/reducers/species-reducers';\nimport { counter, score, history, videoPlayer } from 'redux/reducers/progress-reducers';\nimport { lessonPlans, lessonPlan, layout } from 'redux/reducers/layout-reducers';\nimport { lesson, lessons } from 'redux/reducers/lesson-reducers';\nimport { quickFire, glossary } from 'redux/reducers/quick-fire-reducers';\n\nimport hardSet from 'redux-persist/lib/stateReconciler/hardSet'\n\nconst reducer = combineReducers({\n    counter,\n    lessonPlans,\n    lessonPlan,\n    layout,\n    config,\n    lessons,\n    lesson,\n    collection,\n    score,\n    collections,\n    history, \n    videoPlayer,\n    enums,\n    bonusLayout,\n    user,\n    quickFire,\n    glossary,\n    userAction\n});\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n//   stateReconciler: hardSet\n//   blacklist: ['config']\n}\n\nconst persistedReducer = persistReducer(persistConfig, reducer)\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const store = createStore(\n    persistedReducer, \n    composeEnhancers(applyMiddleware(\n        logger,\n        thunk\n    ))\n);\n\nexport const persistor = persistStore(store);\n\nexport const rootReducer = (state, action) => {\n\n    // For this use case we can use purge instead:\n\n    // https://stackoverflow.com/questions/35622588/how-to-reset-the-state-of-a-redux-store/35641992#35641992\n\n    if(action.type === 'INITIALISE_STATE') {\n        state = undefined;\n    }\n\n    return reducer(state, action);\n  }","import * as R from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\n\nexport const counter = (state = null, action) => {\n    switch(action.type) {\n        case 'persist/REHYDRATE':\n            return action.payload ? { ...action.payload.counter, isLessonRehydrated: true, isLessonPaused: true } : state;\n        case types.RESET_COLLECTION:\n            return { ...state, isLessonSelected: false, isLessonPaused: false };\n        case types.UPDATE_COLLECTION:    \n            return { ...state, isLessonRehydrated: false };\n        case types.NEXT_ROUND:\n            return { index: 0 };\n        case types.NEXT_LESSON:\n            return { index: 0 };\n        case types.NEXT_LEVEL:\n            return { ...state, index: action.data.index };\n        case types.STOP_START_LESSON:\n            const index = (state && state.index) || 0;\n            return { ...action.data, index };\n        case types.UPDATE_SCORE:\n        case types.END_REVISION:\n            let i = (state.index + 1) <= action.data.layoutCount ? (state.index + 1) : state.index;\n            return { index: i };\n        case types.SET_ACTIVE_COLLECTION:\n            return { ...state, ...action.data.lesson.counter, isLessonPaused: !!action.data.lesson.counter.isCustomLessonPausedOverride };\n        default:\n            return state;\n    }\n};\n\nexport const score = (state = progressState.score, action) => {\n    switch(action.type) {\n        case types.UPDATE_SCORE: {\n        \n            const score = { ...state, ...action.data, statement: action.data.statement || '' };\n\n            score.totalPoints = score.totalPoints || 0;\n            score.totalPassPoints = score.totalPassPoints || 0;\n            score.totalFailPoints = score.totalFailPoints || 0;\n\n            score.totalPoints += score.points ? score.points : 0;\n\n            score.total++;\n            if(score.success) {\n                score.totalPassPoints += score.points ? score.points : 0;\n                score.correct++;\n                score.passes.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question, \n                    statement: score.statement || '',\n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            else {\n                score.incorrect++;\n                score.totalFailPoints += score.points ? score.points : 0;\n                score.fails.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question,\n                    statement: score.statement || '', \n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            score.questionTotal = score.passes.length + score.fails.length;\n            \n            score.passesTotals = R.clone(state.passesTotals) || {};\n            score.failsTotals = R.clone(state.failsTotals) || {};\n\n            if(score.success) {\n                score.passesTotals[score.itemId] = score.passesTotals[score.itemId] ? score.passesTotals[score.itemId] + 1 : 1;\n                if(!score.failsTotals[score.itemId]) {\n                    score.failsTotals[score.itemId] = 0;\n                }\n            } else {\n                score.failsTotals[score.itemId] = score.failsTotals[score.itemId] ? score.failsTotals[score.itemId] + 1 : 1;\n                if(!score.passesTotals[score.itemId]) {\n                    score.passesTotals[score.itemId] = 0;\n                }\n            }\n            \n            return { ...state, ...score};\n        }\n        case types.SELECT_COLLECTION:\n            return R.clone(progressState.score);\n        case types.NEXT_ROUND:\n        case types.NEXT_LEVEL:\n        case types.UPDATE_COLLECTION:\n            return { ...progressState.score, ...{ fails: [], passes: []} };\n        case types.UPDATE_TRAIT_SCORE: {\n            const bonusScores = state.bonusScores || [];\n            bonusScores.push(\n                {\n                    id: action.data.itemId,\n                    name: action.data.binomial,\n                    success: action.data.success,\n                    guid: action.data.guid\n                }\n            );\n            return { ...state, bonusScores: bonusScores };\n        }\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.score;\n        case types.NEXT_LESSON: {\n            return { ...state, mode: 'learn'};\n            }\n        default:\n            return state;\n    }       \n};\n\nexport const history = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_HISTORY: {\n          \n            const history = { scores: [] };\n\n            history.scores = state === null \n                ? [action.data] \n                : state.scores[state.scores.length-1].question === action.data.question\n                    ? [...state.scores]\n                    : [...state.scores, action.data];\n\n            let historyCorrect = 0;\n            let historyTotal = 0;\n        \n            history.scores.forEach(score => {\n                historyCorrect += score.correct;\n                historyTotal += score.total;\n            });\n\n            history.correct = historyCorrect;\n            history.total = historyTotal;\n            history.incorrect = history.total - history.correct;\n\n            return history;\n        }\n        case types.SELECT_COLLECTION:\n            return null;   \n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.history;\n        default:\n            return state;\n    }\n};\n\nexport const videoPlayer = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_VIDEO_PLAYER:\n            return action.data;\n        default:\n            return state;\n    }\n};","import { types } from 'redux/actions/action-types';\n\nexport const lessonPlans = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLANS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const lessonPlan = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLAN:\n            return action.data || state;\n        case types.NEXT_LESSON:\n            return action.data.lessonPlan || state;\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.lessonPlan || state;\n        default:\n            return state;\n    }\n};\n\nexport const layout = (state = null, action) => { \n    switch(action.type) {\n        case types.NEXT_LAYOUT:\n            if(state) {\n                if(action.data.screens.length > 1) { // sometimes BUG here\n                    const prevItemIndex = state.screens[0].name === action.data.screens[0].name ? state.itemIndex : null;                \n                    return { ...action.data, prevItemIndex }\n                } else {\n                    return action.data;\n                }\n            } else {\n                return action.data;\n            }\n        case types.SET_ACTIVE_COLLECTION:\n            return action.data.lesson.layout || state;\n        default: \n            return state;\n    }\n};\n","export const logger = store => next => action => {\n    \n    // console.log('NEXT: ', next);\n    // console.group(action.type)\n    // console.info('dispatching', action)\n    let result = next(action)\n    // console.log('next state', store.getState())\n    // console.groupEnd(action.type)\n\n    // console.clear();\n    // console.log(`^^^ ${action.type}`);\n  \n    return result;\n};","export const DOM = {\n  \n    leftGrid : document.getElementsByClassName('js-left-grid')[0],\n    leftHeader : document.getElementsByClassName('js-left-header')[0],\n    leftBody : document.getElementsByClassName('js-left-body')[0],\n    leftFooter : document.getElementsByClassName('js-left-footer')[0],\n\n    leftHeaderTxt : document.getElementsByClassName('js-left-txt-header')[0],\n    specimenRptr : document.getElementsByClassName('js-rptr-specimen')[0],\n    \n    rightGrid : document.getElementsByClassName('js-right-grid')[0],\n    rightHeader : document.getElementsByClassName('js-right-header')[0],\n    rightHeaderTxt : document.getElementsByClassName('js-right-txt-header')[0],\n    rightHeaderScoreTxt : document.getElementsByClassName('js-right-txt-score')[0],\n    rightBody : document.getElementsByClassName('js-right-body')[0],\n    rightRptrSummary : document.getElementsByClassName('js-summary')[0],\n    rightBodyBottom : document.getElementsByClassName('js-right-body-bottom')[0],\n    rightFooter : document.getElementsByClassName('js-right-footer')[0]    \n};\n","const getRoundItems = (currentRound, moduleSize, items) => {\n\n    const start = (currentRound - 1) * moduleSize;\n    const end = start + moduleSize;\n    return items.slice(start, end);\n}\n\nexport const roundHandler = {\n    getRoundItems\n};","export const epithets = [\n    {\n        \"latin\": ['armeniaca'],\n        \"en\": ['from Armenia']\n    },\n    {\n        \"latin\": ['agastache'],\n        \"en\": ['many spikes']\n    },\n    {\n        \"latin\": [\"aster\"],\n        \"en\" : [\"star\"]\n    },\n    {\n        \"latin\" : [\"alba\"],\n        \"en\" : [\"white\"]\n    },\n    {\n        \"latin\" : [\"avium\"],\n        \"en\" : [\"bird\"]\n    },\n    {\n        \"latin\" : [\"nigrum\"],\n        \"en\" : [\"black\"]\n    },\n    {\n        \"latin\" : [\"ater\"],\n        \"en\" : [\"black\"]\n    },\n    {\n        \"latin\": [\"botanikos\"],\n        \"en\" : [\"plant\"]\n    },\n    {\n        \"latin\": [\"capitata\"],\n        \"en\" : [\"having a head\"]\n    },\n    {\n        \"latin\" : [\"chrysus\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\" : [\"erythro\"],\n        \"en\" : [\"red\"]\n    },\n    {\n        \"latin\" : [\"lactuca\"],\n        \"en\" : [\"milky\"]\n    },\n    {\n        \"latin\" : [\"sylvestris\"],\n        \"en\" : [\"woodland\"]\n    },\n    {\n        \"latin\" : [\"contorta\"],\n        \"en\" : [\"twisted\"]\n    },\n    {\n        \"latin\" : [\"globosa\"],\n        \"en\" : [\"rounded\"]\n    },\n    {\n        \"latin\" : [\"maculata\"],\n        \"en\" : [\"spotted\"]\n    },\n    {\n        \"latin\" : [\"pendula\"],\n        \"en\" : [\"weeping\"]\n    },\n    {\n        \"latin\": [\"pratense\"],\n        \"en\" : [\"of meadows\"]\n    },\n    {\n        \"latin\" : [\"prostrata\"],\n        \"en\" : [\"creeping\"]\n    },\n    {\n        \"latin\" : [\"phyllos\"],\n        \"en\" : [\"leaf\", \"foliage\"]\n    },\n    {\n        \"latin\" : [\"platy\"],\n        \"en\" : [\"broad\", \"flat\"]\n    },\n    {\n        \"latin\" : [\"angustus\"],\n        \"en\" : [\"narrow\"]\n    },\n    {\n        \"latin\" : [\"arena\"],\n        \"en\" : [\"sand\"]\n    },\n    {\n        \"latin\" : [\"argentum\"],\n        \"en\" : [\"silver\"]\n    },\n    {\n        \"latin\" : [\"arvensis\"],\n        \"en\" : [\"in the field\"]\n    },\n    {\n        \"latin\" : [\"brachy-\"],\n        \"en\" : [\"short\"]\n    },\n    {\n        \"latin\" : [\"brachyphyllus\"],\n        \"en\" : [\"short leaved\"]\n    },\n    {\n        \"latin\" : [\"caprae\"],\n        \"en\" : [\"goat\"]\n    },\n    {\n        \"latin\" : [\"chroma\"],\n        \"en\" : [\"colour\"]\n    },\n    {\n        \"latin\" : [\"cilium\"],\n        \"en\" : [\"eyelash\"]\n    },\n    {\n        \"latin\" : [\"coccineus\"],\n        \"en\" : [\"scarlet\"]\n    },\n    {\n        \"latin\" : [\"cordifolius\"],\n        \"en\" : [\"heart-shaped\"]\n    },\n    {\n        \"latin\" : [\"coronatus\"],\n        \"en\" : [\"crowned\"]\n    },\n    {\n        \"latin\" : [\"crassus\"],\n        \"en\" : [\"thick\", \"fat\"]\n    },\n    {\n        \"latin\" : [\"crocos\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\": [\"cruciferae\"],\n        \"en\" : [\"cross-bearing\"]\n    },\n    {\n        \"latin\" : [\"derma\"],\n        \"en\" : [\"skin\"]\n    },\n    {\n        \"latin\" : [\"digitalis\"],\n        \"en\" : [\"having fingers\"]\n    },\n    {\n        \"latin\" : [\"domus\"],\n        \"en\" : [\"home\"]\n    },\n    {\n        \"latin\" : [\"domestica\"],\n        \"en\" : [\"which lives in the house\"]\n    },\n    {\n        \"latin\" : [\"echinatus\"],\n        \"en\" : [\"prickly\", \"spiny\"]\n    },\n    {\n        \"latin\" : [\"edulis\"],\n        \"en\" : [\"edible\"]\n    },\n    {\n        \"latin\" : [\"elatior\"],\n        \"en\" : [\"taller\"]\n    },\n    {\n        \"latin\" : [\"electro-\"],\n        \"en\" : [\"amber\"]\n    },\n    {\n        \"latin\" : [\"emarginatus\"],\n        \"en\" : [\"having no edges\"]\n    },\n    {\n        \"latin\" : [\"enanti-\"],\n        \"en\" : [\"opposite\", \"against\"]\n    },\n    {\n        \"latin\": [\"endemos\"],\n        \"en\" : [\"native\"]\n    },\n    {\n        \"latin\" : [\"ensatus\"],\n        \"en\" : [\"sword-like\"]\n    },\n    {\n        \"latin\" : [\"erectus\"],\n        \"en\" : [\"upright\"]\n    },\n    {\n        \"latin\" : [\"erica\"],\n        \"en\" : [\"heath\", \"broom\"]\n    },\n    {\n        \"latin\" : [\"erio-\"],\n        \"en\" : [\"wool\", \"woolly\"]\n    },\n    {\n        \"latin\" : [\"erosus\"],\n        \"en\" : [\"indented\", \"jagged\", \"serrated\"]\n    },\n    {\n        \"latin\" : [\"fallax\"],\n        \"en\" : [\"false\"]\n    },\n    {\n        \"latin\" : [\"foeniculum\"],\n        \"en\" : [\"hay\"]\n    },\n    {\n        \"latin\" : [\"filium\"],\n        \"en\" : [\"thread\"]\n    },\n    {\n        \"latin\" : [\"flavus\"],\n        \"en\" : [\"golden yellow\", \"light yellow\"],\n    },\n    {\n        \"latin\" : [\"floridus\"],\n        \"en\" : [\"flowery\"]\n    },\n    {\n        \"latin\" : [\"furcatus\"],\n        \"en\" : [\"forked\"]\n    },\n    {\n        \"latin\" : [\"fuscus\"],\n        \"en\" : [\"dark\", \"dark brown\"]\n    },\n    {\n        \"latin\" : [\"gala\"],\n        \"en\" : [\"milk\"]\n    },\n    {\n        \"latin\" : [\"galum\"],\n        \"en\" : [\"milk\"]\n    },\n    {\n        \"latin\" : [\"glaber\"],\n        \"en\" : [\"smooth; hairless\"]\n    },\n    {\n        \"latin\" : [\"glaucus\"],\n        \"en\" : [\"blue-green\", \"blue-gray\"]\n    },\n    {\n        \"latin\" : [\"glycy-\"],\n        \"en\" : [\"sweet\"]\n    },\n    {\n        \"latin\" : [\"perennis\"],\n        \"en\" : [\"perennial, lasting, yearlong\"]\n    },\n    {\n        \"latin\" : [\"gracile\"],\n        \"en\" : [\"slender\", \"graceful\"]\n    },\n    {\n        \"latin\" : [\"gravis\"],\n        \"en\" : [\"heavy\"]\n    },\n    {\n        \"latin\" : [\"hali-\"],\n        \"en\" : [\"of the sea\", \"salt\"]\n    },\n    {\n        \"latin\" : [\"hetero-\"],\n        \"en\" : [\"diversely or different\"]\n    },\n    {\n        \"latin\" : [\"hirsutus\"],\n        \"en\" : [\"hairy\"]\n    },\n    {\n        \"latin\" : [\"hirsuta\"],\n        \"en\" : [\"hairy\"]\n    },\n    {\n        \"latin\" : [\"hortensis\"],\n        \"en\" : [\"from the garden\"]\n    },\n    {\n        \"latin\" : [\"hydro-\"],\n        \"en\" : [\"water\"]\n    },\n    {\n        \"latin\": [\"hymen\"],\n        \"en\": [\"membrane\"]\n    },\n    {\n        \"latin\" : [\"hypo-\", \"hyp-\"],\n        \"en\" : [\"under\", \"beneath\"]\n    },\n    {\n        \"latin\" : [\"hyper-\"],\n        \"en\" : [\"over\", \"above\"]\n    },\n    {\n        \"latin\" : [\"laevis\"],\n        \"en\" : [\"smooth\"]\n    },\n    {\n        \"latin\" : [\"lateralis\"],\n        \"en\" : [\"side\"]\n    },\n    {\n        \"latin\" : [\"lepis\", \"lepido-\"],\n        \"en\" : [\"scale\", \"rind\", \"husk\", \"flake\"]\n    },\n    {\n        \"latin\" : [\"lepto-\", \"lepti-\"],\n        \"en\" : [\"light\"]\n    },\n    {\n        \"latin\" : [\"mel\"],\n        \"en\" : [\"honey\"]\n    },\n    {\n        \"latin\" : [\"muralis\"],\n        \"en\" : [\"growing on the wall\"]\n    },\n    {\n        \"latin\" : [\"nobilis\"],\n        \"en\" : [\"noble\"]\n    },\n    {\n        \"latin\" : [\"nix\"],\n        \"en\" : [\"snow\"]\n    },\n    {\n        \"latin\" : [\"nucifer\"],\n        \"en\" : [\"bearing nuts\"]\n    },\n    {\n        \"latin\" : [\"officinale\"],\n        \"en\" : [\"of or belonging to the officina (storeroom for medicines)\"],\n        \"wiki\": \"https://en.wikipedia.org/wiki/Officinalis\"\n    },\n    {\n        \"latin\" : [\"officinalis\"],\n        \"en\" : [\"of or belonging to the officina (storeroom for medicines)\"],\n        \"wiki\": \"https://en.wikipedia.org/wiki/Officinalis\"\n    },\n    {\n        \"latin\": [\"oleo\"],\n        \"en\" : [\"oily\"]\n    },\n    {\n        \"latin\" : [\"palustris\"],\n        \"en\" : [\"of the marsh\"]\n    },\n    {\n        \"latin\" : [\"parviflorus\"],\n        \"en\" : [\"small-flowered\"]\n    },\n    {\n        \"latin\" : [\"parvifolius\"],\n        \"en\" : [\"small-leaved\"]\n    },\n    {\n        \"latin\" : [\"pelagicus\"],\n        \"en\" : [\"of the open sea\"]\n    },\n    {\n        \"latin\": [\"persica\"],\n        \"en\" : [\"from Persia\"],\n        \"examples\": [\"Prunus persica\"]\n    },\n    {\n        \"latin\" : [\"petro-\"],\n        \"en\" : [\"rock\", \"stone\"]\n    },\n    {\n        \"latin\" : [\"phyto-\"],\n        \"en\" : [\"plant\"]\n    },\n    {\n        \"latin\" : [\"pomum\"],\n        \"en\" : [\"fruit\"]\n    },\n    {\n        \"latin\" : [\"pratum\"],\n        \"en\" : [\"meadow\"]\n    },\n    {\n        \"latin\" : [\"proto-\"],\n        \"en\" : [\"first\"]\n    },\n    {\n        \"latin\": [\"pteron\"],\n        \"en\" : [\"feather\", \"wing\"]\n    },\n    {\n        \"latin\" : [\"radix\"],\n        \"en\" : [\"root or radish\"]\n    },\n    {\n        \"latin\" : [\"ramus\"],\n        \"en\" : [\"branch\"]\n    },\n    {\n        \"latin\": [\"rapum\"],\n        \"en\" : [\"turnip\"]\n    },\n    {\n        \"latin\" : [\"repandus\"],\n        \"en\" : [\"curved upwards\", \"turned up\"]\n    },\n    {\n        \"latin\" : [\"rhiza\"],\n        \"en\" : [\"root\"]\n    },\n    {\n        \"latin\" : [\"sativus\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"sativum\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"sativa\"],\n        \"en\" : [\"sown\", \"cultivated\"]\n    },\n    {\n        \"latin\" : [\"setosus\"],\n        \"en\" : [\"bristly or shaggy\"]\n    },\n    {\n        \"latin\" : [\"silvestris\"],\n        \"en\" : [\"from woodland or forest; wild\"]\n    },\n    {\n        \"latin\" : [\"sylvestris\"],\n        \"en\" : [\"from woodland or forest; wild\"]\n    },\n    {\n        \"latin\" : [\"speciosus\"],\n        \"en\" : [\"showy\"]\n    },\n    {\n        \"latin\" : [\"sperma\"],\n        \"en\" : [\"seed\"]\n    },\n    {\n        \"latin\" : [\"striatus\"],\n        \"en\" : [\"striped\"]\n    },\n    {\n        \"latin\" : [\"strictus\"] ,\n        \"en\" : [\"straight\", \"narrow\", \"erect\"]\n    },\n    {\n        \"latin\" : [\"suber\"],\n        \"en\" : [\"cork\"]\n    },\n    {\n        \"latin\" : [\"sucus\"],\n        \"en\" : [\"juice\"]\n    },\n    {\n        \"latin\" : [\"sulcatus\"],\n        \"en\" : [\"furrowed\"]\n    },\n    {\n        \"latin\" : [\"tenuis\"],\n        \"en\" : [\"thin\", \"slender\", \"fine\"]\n    },\n    {\n        \"latin\" : [\"tinctorius\"],\n        \"en\" : [\"or dyeing\"]\n    },\n    {\n        \"latin\" : [\"tomentosus\"],\n        \"en\" : [\"furry\", \"hairy\"]\n    },\n    {\n        \"latin\" : [\"ulmus\"],\n        \"en\" : [\"elm\"]\n    },\n    {\n        \"latin\" : [\"vernus\"],\n        \"en\" : [\"spring\"]\n    },\n    {\n        \"latin\" : [\"vernalis\"],\n        \"en\" : [\"spring\"]\n    },\n    {\n        \"latin\" : [\"verus\"],\n        \"en\" : [\"true\", \"genuine\"]\n    },\n    {\n        \"latin\" : [\"villosus\"],\n        \"en\" : [\"hairy\", \"shaggy\"]\n    },\n    {\n        \"latin\" : [\"viridis\"],\n        \"en\" : [\"green\"]\n    },\n    {\n        \"latin\" : [\"vulgaris\"],\n        \"en\" : [\"common\"]\n    },\n    {\n        \"latin\" : [\"vulgare\"],\n        \"en\" : [\"common\"]\n    },\n    {\n        \"latin\" : [\"xanthos\"],\n        \"en\" : [\"yellow\"]\n    },\n    {\n        \"latin\" : [\"zygos\"],\n        \"en\" : [\"joined\"]\n    },\n    {\n        \"latin\" : [\"stipula\"],\n        \"en\" : [\"straw, stalk\"]\n    },\n    {\n        \"latin\" : [\"convolvulus\"],\n        \"en\" : [\"wound\"]\n    },\n    {\n        \"latin\" : [\"ranunculus\"],\n        \"en\" : [\"little frog\"]\n    },\n    {\n        \"latin\" : [\"esculenta\"],\n        \"en\" : [\"edible\"]\n    },\n    {\n        \"latin\" : [\"ascus\"],\n        \"en\" : [\"sack, wineskin\"]\n    },\n    {\n        \"latin\" : [\"sclero\"],\n        \"en\" : [\"hard\"]\n    },\n    {\n        \"latin\" : [\"derma\"],\n        \"en\" : [\"skin\"]\n    },\n    {\n        \"latin\" : [\"odora\"],\n        \"en\" : [\"perfumed\"]\n    },\n    {\n        \"latin\" : [\"kantharos\"],\n        \"en\" : [\"tankard\", \"cup\"]\n    },\n    {\n        \"latin\" : [\"pyriforme\"],\n        \"en\" : [\"pear-shaped\"]\n    },\n    {\n        \"latin\" : [\"Lycoperdon\"],\n        \"en\" : [\"wolf's fart\"]\n    },\n    {\n        \"latin\" : [\"Lycopersicon\"],\n        \"en\" : [\"wolf's peach\"]\n    },\n    {\n        \"latin\" : [\"Grifola\"],\n        \"en\" : [\"Something intricate or braided\"]\n    },\n    {\n        \"latin\" : [\"Frondosa\"],\n        \"en\" : [\"Full of leaves\"]\n    },\n    {\n        \"latin\" : [\"calvus\"],\n        \"en\" : [\"bald, without hair\"]\n    },\n    {\n        \"latin\" : [\"thallus\"],\n        \"en\" : [\"a green shoot or twig\"]\n    },\n    {\n        \"latin\" : [\"vasculum\"],\n        \"en\" : [\"duct\"]\n    },\n    {\n        \"latin\" : [\"xylem\"],\n        \"en\" : [\"wood\"]\n    },\n    {\n        \"latin\" : [\"phloios\"],\n        \"en\" : [\"bark\"]\n    },\n    {\n        \"latin\" : [\"parietina\"],\n        \"en\" : [\"on walls\"]\n    },\n    {\n        \"latin\" : [\"eutrophos\"],\n        \"en\" : [\"well nourished\"]\n    },\n    {\n        \"latin\" : [\"askos\"],\n        \"en\" : [\"sac, wineskin\"]\n    },\n    {\n        \"latin\" : [\"Suillus\"],\n        \"en\" : [\"of pigs\"]\n    },\n    {\n        \"latin\" : [\"sus\"],\n        \"en\" : [\"pig\"]\n    },\n    {\n        \"latin\" : [\"collinitus\"],\n        \"en\" : [\"smeared\", \"greased\"]\n    },\n    {\n        \"latin\" : [\"pyrrho\"],\n        \"en\" : [\"fire\"]\n    },\n    {\n        \"latin\" : [\"coris\"],\n        \"en\" : [\"bug\"]\n    },\n    {\n        \"latin\" : [\"boreal\"],\n        \"en\" : [\"(far) northern\"]\n    },\n    {\n        \"latin\" : [\"physcia\"],\n        \"en\" : [\"inflated, sausage-like\"]\n    },\n    {\n        \"latin\" : [\"apis\"],\n        \"en\" : [\"bee\"],\n        species: [ 'Apis mellifera' ]\n    },\n    {\n        \"latin\" : [\"mellifera\"],\n        \"en\" : [\"honey-bearing\"],\n        species: [ 'Apis mellifera' ]\n    },\n    {\n        \"latin\" : [\"instar\"],\n        \"en\" : [\"likeness, form\"]\n    },\n    {\n        \"latin\" : [\"skia\"],\n        \"en\" : [\"shadow\"]\n    },\n    {\n        \"latin\" : [\"oura\"],\n        \"en\" : [\"tail\"]\n    },\n    {\n        \"latin\" : [\"geo\"],\n        \"en\" : [\"earth\"]\n    },\n    {\n        \"latin\" : [\"metron\"],\n        \"en\" : [\"measure\"]\n    },\n    {\n        \"latin\" : [\"pente\"],\n        \"en\" : [\"five\"]\n    },\n    {\n        \"latin\" : [\"tomos\"],\n        \"en\" : [\"section\"]\n    },\n    {\n        \"latin\" : [\"praecox\"],\n        \"en\" : [\"before its time\"]\n    },\n    {\n        \"latin\" : [\"rudus\"],\n        \"en\" : [\"rubble\"]\n    },\n    {\n        \"latin\" : [\"phoinix\"],\n        \"en\" : [\"red\"]\n    },\n    {\n        \"latin\" : [\"ouros\"],\n        \"en\" : [\"tailed\"]\n    },\n    {\n        \"latin\" : [\"coluber\"],\n        \"en\" : [\"snake\"]\n    },\n    {\n        \"latin\" : [\"noctua\"],\n        \"en\" : [\"little owl\"]\n    },\n    {\n        \"latin\" : [\"epidermis\"],\n        \"en\" : [\"over-skin\"]\n    },\n    {\n        \"latin\" : [\"septem\"],\n        \"en\" : [\"seven\"],\n        species: [ 'Coccinella septempunctata' ]      \n    },\n    {\n        \"latin\" : [\"punctus\"],\n        \"en\" : [\"spot\"],\n        species: [ 'Coccinella septempunctata' ]      \n    },\n    {\n        \"latin\" : [\"tussis\"],\n        \"en\" : [\"cough\"],\n        species: [ 'Tussilago farfara' ]      \n    },\n    {\n        \"latin\" : [\"stoechas\"],\n        \"en\" : [\"in rows\"],\n        species: [ 'Lavandula stoechas' ]      \n    },\n    {\n        \"latin\" : [\"ros marinus\"],\n        \"en\" : [\"dew of the sea\"],\n        species: [ 'Rosmarinus officinalis' ]      \n    },\n    {\n        \"latin\" : [\"auriculata\"],\n        \"en\" : [\"with ears\"],\n        species: [ 'Plumbago auriculata' ]      \n    },\n    {\n        \"latin\" : [\"baccata\"],\n        \"en\" : [\"bearing red berries\"],\n        species: [ 'Taxus baccata' ]      \n    },\n    {\n        \"latin\" : [\"pleurotus\"],\n        \"en\" : [\"sideways\"],\n        species: [ 'Pleurotus ostreatus' ]      \n    },\n    {\n        \"latin\" : [\"sema\"],\n        \"en\" : [\"sign\"],\n        genus: [ 'Bombus' ]      \n    },\n];","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { epithets } from 'api/botanical-latin';\n\nconst getVernacularName = (item, config, useShortForm = false, namePart = 'vernacularName') => {\n    try {\n        let shortForm;\n        if(useShortForm) {\n            let englishShortForm = item.names.find(name => name.language === 'en' && name.shortForm);\n            englishShortForm = englishShortForm ? englishShortForm.shortForm : undefined;\n            let languageSortForm = item.names.find(name => name.language === config.language && name.shortForm);\n            languageSortForm = languageSortForm ? languageSortForm.shortForm : undefined;\n            shortForm = languageSortForm || englishShortForm;\n        }\n        if(shortForm) return shortForm;    \n        const englishNames = item.names.filter(name => name.language === 'en');\n        const english = englishNames.length > 0 ? englishNames[0][namePart] : 'Unknown';\n        const names = item.names.filter(name => name.language === config.language);\n        const name = names.length > 0 ? names[0][namePart] : english;\n        const capitalisedNames = name.split(' ');\n        let capitalisedName;\n        if(config.language === 'fr') {        \n            capitalisedName = utils.capitaliseFirst(capitalisedNames.join(' '));\n        } else {\n            capitalisedName = capitalisedNames.map(name => utils.capitaliseFirst(name)).join(' ');\n        }\n        return capitalisedName;\n    } catch(e) {\n        console.error('Failing getting vernacular name for: ', item, 'error: ', e.message);\n        return '';\n    }\n};\n\nconst getGenusName = binomial => {\n    return binomial.split(' ')[0];\n};\n\nconst getSpeciesName = binomial => {\n    return binomial.split(' ')[1];\n};\n\nconst latin = species => {\n    let epithet = epithets.find(e => {        \n        const match = e.latin.find(part => part.toUpperCase() === species.toUpperCase());\n        return match || '';\n    });\n    return epithet ? { ...epithet } : '';\n};\n\nconst getTaxonProp = (taxon, language, prop) => {\n\n    if(!taxon[prop]) return '';\n\n    const propValue = taxon[prop].find(p => p.language === language) ? taxon[prop].find(p => p.language === language) : taxon[prop].find(p => p.language === 'en');\n\n    return propValue || '';\n};\n\nconst getNestedTaxonProp = (taxon, language, prop1, prop2, index) => {\n\n    if(!taxon || !taxon[prop1]) return '';\n\n    const prop1Value = taxon[prop1].find(name => name.language === language) ? taxon[prop1].find(name => name.language === language) : taxon[prop1].find(name => name.language === 'en');\n\n    if(!prop1Value) return '';\n\n    const prop2Value = prop1Value[prop2];\n\n    if(!prop2Value) return '';\n\n    const output = index ? prop2Value[index] : prop2Value;\n\n    return output;\n}\n\nconst trimLatinName = name => {\n\n    let binomial = name;\n\n    if(name.indexOf('.') < 0) {\n        binomial = name.split(' ').map((n,i) => {\n            return i === 0 ? n.slice(0,1).trim() + '.' : n.trim()\n          }).join(' ')\n    }\n    \n    return binomial;\n};\n\nconst familyVernacularNames = (name, language, taxa) => {\n    if(name === '') return;\n    const taxon = taxa.find(taxon => taxon.name.toUpperCase() === name.toUpperCase());\n    if(!taxon) return;\n    return taxon.names.find(name => name.language === language).names;\n};\n\nconst getTrait = (item, name, formatter) => {\n    \n    if(!item.traits) return '';\n\n    let trait;\n\n    for (let [key, obj] of Object.entries(item.traits)) {\n        if(key === name) {\n            trait = obj.value;\n        }\n    }\n\n    if(!trait) return '';\n    if(!formatter) return trait;\n    return formatter(trait);\n}\n\nconst reducer = (acc, curr) => {\n    return acc + curr;\n}\n\nconst getActiveTrait = (item, options) => {\n    const traitValues = options.map(option => { \n        const traitName = option.name;\n        const formatter = option.formatter;\n        return getTrait(item, traitName, formatter);\n    });\n    return traitValues.reduce(reducer, '');\n}\n\nconst vernacularNamesForItems = (items, config) => {\n    let itemNames = items.map(item => item.names);\n    let vernaculars = itemNames.map(itemNames => itemNames.filter(name => \n        { return name.language === config.language || name.language === 'en' }));\n    if(vernaculars.length === 0) return [];\n    vernaculars = vernaculars.map(vernacular => {\n        let name = vernacular.find(v => v.language === config.language);\n        if(!name) name = vernacular.find(v => v.language === 'en');\n        if(!name) return '';\n        return utils.capitaliseFirst(name.vernacularName);\n    }).filter(v => v !== '');\n    return vernaculars;\n};\n\nconst getVernacularNames = (item, config) => {\n    try {\n        const names = item.names.filter(name => name.language === config.language).map(name => utils.capitaliseFirst(name.vernacularName));\n        return names;\n    } catch(e) {\n        console.error('Failing getting vernacular names for: ', item);\n        return '';\n    }\n};\n\nconst answersFromList = (list, toInclude, number) => {\n    const answers = take(number - 1, list.filter(item => item !== toInclude));\n    answers.push(toInclude);\n    return utils.shuffleArray(answers);\n};\n\nconst statsReducer = function(obj,elem){\n    obj[elem]=obj[elem] || 0;\n    obj[elem]++;\n    return obj;\n};\n\nconst getFamilyStats = items => {\n    return items.map(item => item.taxonomy.family).reduce(statsReducer,{});\n};\n\nconst getFileNameFromImageUrl = url => {\n\n    const pattern = /[\\w:]+\\.(jpe?g|png|gif|svg)/i;\n\n    var filename = pattern.exec(url)[0];\n\n    return filename;    \n};\n\nconst getRootTraitValue = (traitValue, drop = 'end') => {\n\n    const pattern = /[A-Z]+[^A-Z]*|[^A-Z]+/g;\n\n    const parts = traitValue.match(pattern);\n\n    const dropStarters = ['colour', 'shape'];\n\n    dropStarters.forEach(starter => {\n        if(traitValue.toLowerCase().indexOf(starter) > -1) {\n            drop = 'start';\n        }\n    });\n\n    let rootTraitValue = '';\n\n    if(drop === 'start') {\n        parts.forEach((part,index) => {\n            if(index === parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n        rootTraitValue = rootTraitValue.charAt(0).toLowerCase() + rootTraitValue.slice(1);\n    } else {\n        parts.forEach((part,index) => {\n            if(index < parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n    }\n    \n    return rootTraitValue;\n};\n\nconst getImageRightsUrl = url => {\n\n    const filename = getFileNameFromImageUrl(url);\n\n    const template = `https://en.wikipedia.org/w/api.php?action=query&prop=imageinfo&iiprop=extmetadata&titles=File:${filename}&format=json`;\n\n    return template;\n}\n\nexport const itemProperties = {\n    getVernacularName,\n    getGenusName,\n    getSpeciesName,\n    latin,\n    getTaxonProp,\n    getNestedTaxonProp,\n    trimLatinName,\n    familyVernacularNames,\n    getTrait,\n    getActiveTrait,\n    vernacularNamesForItems,\n    getVernacularNames,\n    answersFromList,\n    getFamilyStats,\n    getFileNameFromImageUrl,\n    getImageRightsUrl,\n    getRootTraitValue\n};","import{ isEmpty, compose, symmetricDifference, contains, take } from 'ramda';\n\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { utils } from 'utils/utils';\n\nconst getRandomTrait = (traits, traitsToIgnore) => {    \n\n    const allowedTraits = {};\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key.toLowerCase(), traitsToIgnore)) {\n            allowedTraits[key] = obj.unit ? [`${obj.value}${obj.unit}`] : obj.value;\n        }\n    }\n\n    let trait = utils.getRandomObjectProperty(allowedTraits);\n    return trait;\n};\n\nconst getTraitsPoolForUnits = trait => {\n    // create set of numeric answers based on the value\n\n    const traitsPool = [1,2,3,4,5,6,7,8,9];\n\n    if(trait.unit === 'MM'){\n        // months\n        // find distance between first and second and add answers with similar gap\n        // e.g. jan-feb produces aug-sep, nov-dec, etc.\n    }\n\n    return { traitsPool, help: 'Pick the best range'};\n};\n\nconst getTraitsPoolForRoles = trait => {    \n    enumKey = trait.role; // e.g. name of role, but role of predator; (and possibly need to apply logic as below)\n    const traitsPool = ['role1', 'role2', 'role3', 'role4', 'role5', 'role6', 'role7', 'role8', 'role9', 'role10'];\n    return { traitsPool, help: 'symbiosis'};\n};\n\nconst getTraitValues = (trait, traits) => {\n\n    let traitKeyParts = trait.key.split(' ');\n    let enumKey; // e.g map 'leaf variation' to leafVariation\n    \n    traitKeyParts.forEach((part, index) => {\n        if(index === 0) {\n            enumKey = part.toLowerCase();\n        } else {\n            enumKey += utils.capitaliseFirst(part);\n        }\n    });\n\n    const traitValues = traits[enumKey];\n\n    return traitValues;\n};\n\nconst getTraitsPool = (trait, traits) => {\n\n    let traitsPool = [];\n\n    let traitValues = getTraitValues(trait, traits);\n\n    if(!traitValues) {\n        traitValues = traits[itemProperties.getRootTraitValue(utils.toCamelCase(trait.key))];\n        if(traitValues) traitValues.help = trait.key;\n    }\n\n    if(traitValues) {        \n        for (let [key, obj] of Object.entries(traitValues)) {\n            if(!contains(key, [ 'type', 'name', 'help'])) {\n                if(key !== trait.key) {\n                    traitsPool.push(obj);\n                }\n            }\n        }\n    }\n\n    let help = traitValues \n            ? traitValues.help || traitValues.name\n            : trait.key;\n\n    return { traitsPool, help };\n};\n\nconst getSetOfTraitAnswers = (pool, trait) => {\n\n    let traitSet = trait.value;\n        traitSet = traitSet.map(t => t.trim());\n        traitSet = utils.shuffleArray(traitSet);\n\n    // take maximum of 2 values from the trait values array\n\n    let traitValues = take(2, traitSet);\n\n    let sets = [];\n  \n    if(traitValues.length === 1) {\n        \n        sets = [ ...take(5, pool.filter(value => value !== trait.value[0])), trait.value[0] ];\n\n    } else {\n\n        // create a 'set' of all possible unique 2-value combinations\n        \n        pool.forEach(a => {\n            pool.forEach( b => {\n                if(a !== b) {\n                    const exists = sets.filter(s => s === [a,b] || s === [b,a]).length > 0;\n                    if(!exists) { \n                        sets.push([a,b]);\n                    }\n                }\n            })\n        });\n\n        sets = take(6, utils.shuffleArray(sets));\n\n        // remove any combination that matches the trait value set (in either order) \n\n        sets = sets.map(set => {\n            if(set[0] !== traitSet[0] && set[1] !== traitSet[1] || set[0] !== traitSet[1] && set[1] !== traitSet[0]) {\n                return set;\n            }\n        }).filter(s => s);\n\n        sets = take(5, sets);\n        sets = [ ...sets, traitSet ];\n\n        if(sets.length === 0) {\n            sets = ['a', 'b', trait.value];\n        }\n        \n        sets = sets.map(set => set.join(', '));\n    }\n  \n    return utils.shuffleArray(sets);\n};\n\nconst getTraitByKey = (traits, traitKey) => {\n    return traits[Object.keys(traits).find(key => key === traitKey)];\n}\n\nconst getTraitValueByKey = (traits, traitKey) => {\n    const trait = getTraitByKey(traits, traitKey);\n    if(trait) return trait.value;\n}\n\nconst hasTraitPropeties = traits => {\n    for(var prop in traits) {\n        if (traits.hasOwnProperty(prop)) {\n            return true;\n        }\n    }\n};\n\nconst getLinkedTaxaTraits = traits => {\n    \n    const taxaTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(obj.type) {\n            taxaTraits.push({ name: key, value: obj.value, type: obj.type });\n        } else if(key === 'lookalikes') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'lookalike' });\n        } else if(key === 'symbionts') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'symbionts' });\n        }\n    }\n\n    return taxaTraits;\n};\n\nconst getTraitsToExclude = () => {\n    return [ \n        'symbionts', 'voice', 'pollination', 'name', \n        'units', 'song', 'uk rank',\n        'colour', 'bark colour', 'height',\n        'physiology', 'description',\n        'usage', 'habitat',\n        'symbiont'\n        //'characteristic'\n    ];\n};\n\nconst handleUnit = unit => {\n\n    unit = unit || '';\n\n    switch(unit) {\n        case 'DD':\n            return ' days';\n        case 'MM':\n            return '';\n        case 'YY':\n            return ' years';\n     default:\n        return unit;   \n    }    \n};\n\nconst convertTraitsToNameValuePairsArray = (traits, traitsToExclude, item) => {\n\n    if(!hasTraitPropeties(traits)) return {};\n    \n    const includedTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key, traitsToExclude)) {\n            if(key === 'lookalikes') {\n                obj.forEach(species => {\n                    includedTraits.push({\n                        name: key, \n                        value: [species.lookalike.name],\n                        description: species.description, lookalike: { name: species.lookalike.name, description: species.lookalike.description } \n                    }); \n                });\n            } else if(key === 'relationships') {\n                obj.forEach(species => {\n                    includedTraits.push({ \n                        name: key, value: [species.symbiont.name],\n                    }); \n                });\n            } else {\n                includedTraits.push({ name: key, value: obj.value, unit: handleUnit(obj.unit), type: obj.type || '' });\n            }\n        }\n    }\n    \n    return includedTraits;\n};\n\nconst getNMultiplesFromArray = (arra, arra_size) => {\n\n    if(arra.length === 0) return [];\n\n    var result_set = [], \n        result;\n    \n   \n    for(var x = 0; x < Math.pow(2, arra.length); x++) {\n        result = [];\n        var i = arra.length - 1; \n        do {\n            if((x & (1 << i)) !== 0) {\n                result.push(arra[i]);\n            }\n        } \n        \n        while(i--);\n\n        if(result.length >= arra_size) {\n            result_set.push(result);\n        }\n    }\n\n    return result_set.filter(set => set.length === arra_size);\n};\n\nconst doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n\nexport const traitsHandler = {\n    getRandomTrait,\n    getTraitsPoolForUnits,  \n    getTraitsPoolForRoles,\n    getTraitValues,\n    getTraitsPool,\n    getSetOfTraitAnswers,\n    getTraitByKey,\n    getTraitValueByKey,\n    getLinkedTaxaTraits,\n    getTraitsToExclude,\n    convertTraitsToNameValuePairsArray,\n    getNMultiplesFromArray,\n\n    doArraysHaveSameValues,\n    hasTraitPropeties,\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nexport const getTraitsForTests = (enums, item, alreadyTestedTraits = []) => {\n\n    if(item.traits === undefined || (Object.keys(item.traits).length === 0 && item.traits.constructor === Object)) return {};\n\n    const excludedTraits = [ ...traitsHandler.getTraitsToExclude(), ...alreadyTestedTraits, 'lookalikes', 'relationships' ].filter(et => et);\n\n    const trait = traitsHandler.getRandomTrait(item.traits, excludedTraits);\n\n    if((Object.keys(trait).length === 0 && trait.constructor === Object)) return {};\n \n    let { traitsPool, help } = \n        trait.unit \n            ? traitsHandler.getTraitsPoolForUnits(trait)\n            : trait.role\n                ? traitsHandler.getTraitsPoolForRoles(trait)\n                : traitsHandler.getTraitsPool(trait, enums);\n\n    const question = trait.unit\n                        ? trait.value.join('-')\n                        : trait.value.join(',');\n                           \n    trait.value = trait.value.map(t => utils.capitaliseFirst(t));\n\n    const answers = traitsHandler.getSetOfTraitAnswers(traitsPool, trait);        \n\n    help = help || trait.key;\n\n    const overrides = { question: 'Match the trait', help, trait };\n\n    return { question, answers, overrides, typedItemTraits: item.traits };\n};  ","import { store } from 'redux/store';\nimport { getTraitsForTests } from 'api/traits/traits-for-tests';\n\nexport const getTraitTests = itemsInThisRound => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        const { enums } = store.getState();\n\n        const { question, answers, overrides } = getTraitsForTests(enums, item);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getBirdsongTests = (itemsInThisRound, collection) => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n        \n        if(item.taxonomy.class && item.taxonomy.class.toLowerCase() !== 'aves') return [];\n        \n        const { question, answers, overrides } = getBirdsongTest(item, itemsInThisRound, collection);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n}\n\nconst getBirdsongTest = (item, itemsInThisRound, collection) => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return;\n\n    const name = 'song';\n    const birdsong = { name, ...item.traits[name] };\n    \n    // require other birds, which may not be in this collection…\n\n    let birds = take(3, collection.items.filter(bird => bird.name.toLowerCase() !== item.name.toLowerCase()));\n        birds.push(item);\n\n    const birdNames = utils.shuffleArray(birds.map(bird => bird.name));\n\n    const question = item.name;\n    const answers = birdNames;\n    const overrides = { question: 'Match the birdsong', vernacularName: 'Common name', binomial: 'Latin name', trait: birdsong };\n\n    return { question, answers, overrides };\n};","export const enums = {\n  name: {\n  DESCRIPTION: 'description',\n  CIRCUMFERENCE: 'circumference',\n  EXPOSURE: 'exposure',\n  CAP_SHAPE: 'cap shape',\n  CAP_COLOUR: 'cap colour',\n  CAP_DIAMETER: 'cap diameter',\n  CAP_WIDTH: 'cap width',\n  CAP_HEIGHT: 'cap height',\n  SHELF_WIDTH: 'shelf width',\n  SHELF_THICKNESS: 'shelf thickness',\n  ECO_TYPE: 'ecological type',\n  HOW_EDIBLE: 'how edible',\n  HYMENIUM_TYPE: 'hymenium type',\n  SPORE_PRINT_COLOUR: 'spore print colour',\n  STIPE_CHARACTER: 'stipe character',\n  STIPE_LENGTH: 'stipe length',\n  STIPE_WIDTH: 'stipe width',\n  STIPE_COLOUR: 'stipe colour',\n  GILL_ATTACHMENT: 'gill attachment',\n  FLESH: 'flesh',\n  STEM_CHARACTER: 'stem character',\n  GILL_COLOUR: 'gill colour',\n  TRUNK_COLOUR: 'trunk colour',\n  SUBSTRATE: 'substrate',\n  THALLUS_TYPE: 'thallus type',\n  RHIZINE_TYPE: 'rhizine type',\n  DISC_WIDTH: 'Width',\n  LOBE_WIDTH: 'Lobe width',\n  LOBE_LENGTH: 'Lobe length',\n  LOBE_DIAMETER: 'Lobe diameter',\n  ROLE: 'Role',\n  NATIVE: 'Native',\n  NATIVE_TO: 'Native to',\n  SYMBIOSIS: 'Symbiosis',\n  ASSOCIATE: 'associate',\n  SYMBIONTS: 'symbionts',\n  LOOKALIKES: 'look alikes',\n  ECOLOGY: 'ecology',\n  HABITAT: 'habitat',\n  TROPHIC_LEVEL: 'Trophic level',\n  ORGANISATION: 'Organisation',\n  SMELL: 'smell',\n  FRUIT_TYPE: 'Fruit type',\n  FRUIT_WIDTH: 'Fruit width',\n  FRUIT_HEIGHT: 'Fruit height',\n  FRUIT_DIAMETER: 'Fruit diameter',\n  FRUIT_LENGTH: 'Fruit length',\n  FRUIT_COLOUR: 'Fruit colour',\n  FRUIT_TEXTURE: 'Fruit texture',\n  BRANCH_TEXTURE: 'Branch texture',\n  FRUIT_SURFACE: 'Fruit surface',\n  SEED_DISPERSAL: 'Seed dispersal',\n  VITAMINS: 'vitamins',\n  STAMEN_COUNT: 'Stamen count',\n  STYLE_COUNT: 'Style count',\n  LEAFLET_COUNT: 'Leaflet count',\n  LOBE_COUNT: 'Lobe count',\n  LEAFLET_LENGTH: 'Leaflet length',\n  LEAFLET_WIDTH: 'Leaflet width',\n  GROUPING: 'grouping',\n  MEDICINAL_PROPERTIES: 'Medicinal properties',\n  COLOUR: 'Colour',\n  USAGE: 'Usage',\n  FORM: 'Form',\n  LIFE_SPAN: 'Life span',\n  GERMINATION: 'Germination',\n  ACTIVE: 'Active',\n  SUBSTRATE_ADHERANCE: 'Substrate adherance',\n  RANK: 'UK Rank',\n  SIZE: 'Size',\n  LENGTH: 'Length',\n  VOICE: 'Voice',\n  HEIGHT: 'Height',\n  WEIGHT: 'Weight',\n  REPRODUCTION: 'Reproduction',\n  ASEXUAL_REPRODUCTION: 'Asexual reproduction',\n  DISPLAY: 'Display',\n  BEHAVIOUR: 'behaviour',\n  CHARACTERISTIC: 'Characteristic',\n  COMMUNICATION: 'Communication',\n  SHELTER: 'Shelter',\n  DISEASE: 'Disease',\n  THREAT: 'Threat',\n  FOOD: 'Food',\n  SEXUAL_DIMORPHISM: 'Sexual dimorphism',\n  WING_SPAN: 'Wing span',\n  TREE_SHAPE: 'Tree shape',\n  CROWN_SHAPE: 'Crown shape',\n  LEAF_DIVISION: 'Leaf division',\n  LEAFLET_DIVISION: 'Leaflet division',\n  LEAF_BLADE: 'Leaf blade',\n  LEAF_VARIATION: 'Leaf variation',\n  LEAF_SHAPE: 'Leaf shape',\n  JUVENILE_LEAF_SHAPE: 'Juvenile leaf shape',\n  LEAF_MARGIN: 'Leaf margin',\n  LEAF_ARRANGEMENT: 'Leaf arrangement',\n  LEAF_ATTACHMENT: 'Leaf attachment',\n  LEAF_LENGTH: 'Leaf length',\n  AWN_LENGTH: 'Awn length',\n  JUVENILE_LEAF_LENGTH: 'Juvenile leaf length',\n  LEAF_WIDTH: 'Leaf width',\n  LEAF_COLOUR: 'Leaf colour',\n  LEAF_SURFACE: 'Leaf surface',\n  LEAF_ABOVE_SURFACE: 'Leaf above surface',\n  LEAF_BELOW_SURFACE: 'Leaf below surface',\n  LEAF_TEXTURE: 'Leaf texture',\n  JUVENILE_TEXTURE: 'Juvenile leaf texture',\n  LEAF_SHAPE: 'Leaf shape',\n  LEAFLET_SHAPE: 'Leaflet shape',\n  LEAF_BELOW_COLOUR: 'Leaf below colour',\n  LEAF_ABOVE_COLOUR: 'Leaf above colour',\n  LEAF_VENATION: 'Leaf venation',\n  LEAF_BUNDLE_COUNT: 'Leaf bundle count',\n  LEAF_FEATURES: 'Leaf features',\n  LEAF_FOLDING: 'Leaf folding',\n  BRANCH_ARRANGEMENT: 'Branch arrangement',\n  STALK_HEIGHT: 'Stalk height',\n  STEM_HEIGHT: 'Stem height',\n  SCAPE_HEIGHT: 'Scape height',\n  STEM_DIAMETER: 'Stem diameter',\n  TRUNK_DIAMETER: 'Trunk diameter',\n  BRACT_COLOUR: 'Bract colour',\n  BRACT_LENGTH: 'Bract length',\n  PETIOLE_LENGTH: 'Petiole length',\n  FLOWER_DIAMETER: 'Flower diameter',\n  FLOWER_LENGTH: 'Flower length',\n  FLOWER_COLOUR: 'Flower colour',\n  FLOWER_SHAPE: 'Flower shape',\n  PETAL_COUNT: 'Petal count',\n  LEAFLET_COUNT: 'Leaflet count',\n  PETAL_LENGTH: 'Petal length',\n  PETAL_WIDTH: 'Petal width',\n  PETAL_COLOUR: 'Petal colour',\n  SEPAL_COUNT: 'Sepal count',\n  INFLORESCENCE: 'Inflorescence',\n  FEMALE_CONE_LENGTH: 'Female cone length',\n  MALE_CONE_LENGTH: 'Male cone length',\n  CONE_LENGTH: 'Cone length',\n  FEMALE_CONE_WIDTH: 'Female cone width',\n  MALE_CONE_WIDTH: 'Male cone width',\n  BULB_WIDTH: 'Bulb width',\n  CONE_WIDTH: 'Cone width',\n  CONE_DIAMETER: 'Cone diameter',\n  CONE_COLOUR: 'Cone colour',\n  CONE_SHAPE: 'Cone shape',\n  MALE_CONE_COLOUR: 'Male cone colour',\n  FEMALE_CONE_COLOUR: 'Female cone colour',\n  CONE_SCALE_COUNT: 'Cone scale count',\n  BARK_TYPE: 'Bark type',\n  BARK_TEXTURE: 'Bark texture',\n  CAP_TEXTURE: 'Cap texture',\n  BARK_COLOUR: 'Bark colour',\n  ALLOCHORY: 'Allochory',\n  REPRODUCTIVE_CONTAINER: 'Reproductive container',\n  CATERPILLAR_FOOD: 'Caterpillar food',\n  CATERPILLAR_LENGTH: 'Caterpillar length',\n  CATERPILLAR_COLOUR: 'Caterpillar colour',\n  HIBERNATING_STAGE: 'Hibernating stage',\n  PHYSIOLOGY: 'Physiology',\n  MATING: 'Mating season',\n  MATING_SYSTEM: 'mating system',\n  PREGNANCY: 'Pregnancy',\n  LITTER_SIZE: 'Litter size',\n  JUVENILE: 'Juvenile',\n  GESTATION: 'Gestation',\n  WEANING: 'Weaning',\n  LACTATION: 'Lactation',\n  SENSORY_ACUITY: 'Sensory acuity',\n  CRYPSIS: 'Crypsis',\n  CACHE_SIZE: 'Number of caches',\n  COLLECTIVE: 'Collective',\n  FEMALE: 'Female',\n  MALE: 'Male',\n  TAIL_LENGTH: 'Tail length',\n  MAX_SPEED: 'Maximum speed',\n  DIET: 'Diet',\n  ALTRICIAL: 'Altricial',\n  MOULTING: 'Moulting',\n  MATURITY: 'Maturity',\n  FUNGUS_MARGIN_TYPE: 'Fungus margin type',\n  SOIL_TYPE: 'Soil type',\n  PH: 'pH',\n  PH_VALUE: 'pH value',\n  LICEN_CUP_COLOUR: 'Licen cup colour',\n  RIM: 'Rim',\n  CENTRE: 'Centre',\n  POLLINATION: 'Pollination',\n  PROPAGATION: 'Propagation',\n  CLIMATE: 'Climate',\n  SONG: 'Song',\n  DIAMETER: 'diameter',\n  NUT_TYPE: 'nut type',\n  TREE_ECOLOGY: 'Tree ecology',\n  KEY_FEATURE: 'Key feature', \n  GILL_ATTACHMENT : 'gill attachment',\n  MUSHROOM_GROUP : 'Mushroom group',\n  QUEEN_LENGTH: 'Queen length',\n  QUEEN_WINGSPAN: 'Queen wingspan',\n  QUEEN_WEIGHT: 'Queen weight',\n  WORKER_LENGTH: 'Worker length',\n  WORKER_WINGSPAN: 'Worker wingspan',\n  WORKER_WEIGHT: 'Worker weight',\n  MALE_LENGTH: 'Male length',\n  MALE_WINGSPAN: 'Male wingspan',\n  MALE_WEIGHT: 'Male weight',\n  COLONY_SIZE: 'colony size',\n  TONGUE_LENGTH: 'Tongue length',\n  INFRUCTESCENCE_LENGTH: 'Infructescence length',\n  INFRUCTESCENCE_WIDTH: 'Infructescence width',\n  UMBEL_DIAMETER: 'Umbel diameter',\n  WIDTH: 'Width',\n  BREADTH: 'Breadth',\n  UMBEL_TYPE: 'Umbel type',\n  },\n  howEdible: {\n  help: 'How edible is this species?',\n  CHOICE: 'Choice',\n  EDIBLE: 'Edible',\n  INEDIBLE: 'Inedible',\n  POISONOUS: 'Poisonous',\n  DEADLY: 'Deadly',\n  TOXIC: 'Toxic',\n  type: 'howEdible',\n  name: 'how edible'\n  },\n  habitat: {\n  help: 'What is the habitat of this species?',\n  WOOD: 'Wood',\n  WOODLAND: 'Woodland',\n  WOODLAND_LITTER: 'Woodland litter',\n  GRASSLAND: 'Grassland',\n  SOIL: 'Soil',\n  VEGETATION: 'Vegetation',\n  DUNG: 'Dung',\n  DUNES: 'Dunes',\n  WIDESPREAD: 'Widespread',\n  DEAD_WOOD: 'Dead wood',\n  WASTELAND: 'Wasteland',\n  MEADOW: 'Meadow',\n  FIELDS: 'Fields',\n  MOSS: 'Moss',\n  PASTURE: 'Pasture',\n  BARK: 'Bark',\n  SHOOTS: 'Shoots',\n  COMMONS: 'Common',\n  HEATH: 'Heath',\n  ORCHARDS: 'Orchards',\n  HEDGEROWS: 'Hedgerows',\n  LAWNS: 'Lawns',\n  RINGS: 'Rings',\n  DAMP: 'Damp',\n  TREE_BASE: 'Tree base',\n  FOREST_EDGE: 'Forest edge',\n  PARKS: 'Parks',\n  TRUNKS: 'Trunks',\n  STUMPS: 'Stumps',\n  ROCKS: 'Rocks',\n  FENCES: 'Fences',\n  TREES: 'Trees',\n  SHRUBS: 'Shrubs',\n  SHRUBLAND: 'Shrubland',\n  MARSHLAND: 'Marshland',\n  EXPOSED_WOOD: 'Exposed wood',\n  BRANCHES: 'Branches',\n  HILLS: 'Hills',\n  URBAN: 'Urban',\n  VALLEYS: 'Valleys',\n  MAQUIS: 'Maquis',\n  SAVANNA: 'Savanna',\n  FOREST_STEPPE: 'Forest steppe',\n  MEADOW_STEPPE: 'meadow steppe',\n  BOREAL: 'Boreal',\n  SCRUB: 'Scrub',\n  WALLS: 'Walls',\n  MOORLAND: 'Moorland',\n  COAST: 'Coast',\n  BRUSH: 'Brush',\n  WATER: 'Water',\n  SNOW: 'Snow',\n  NO_SNOW: 'No snow',\n  CONIFERS: 'conifers',\n  BROAD_LEAF: 'broad-leaf',\n  PINE: 'pine',\n  BEECH: 'beech',\n  OAK: 'oak',\n  DITCH: 'Ditch',\n  WET_MEADOW: 'Wet meadow',\n  LAKESIDE: 'Lakeside',\n  RIPERIAN: 'Riperian',\n  WETLANDS: 'Wetlands'\n  },\n  ecologicalType: {\n  help: 'What is the ecological type of this mushroom?',\n  SAPROTROPHIC: 'Saprotrophic',\n  PARASITIC: 'Parasitic',\n  MYCORRHIZAL: 'Mycorrhizal',\n  PLANT_PATHOGEN: 'Plant pathogen',  \n  },\n  capShape: {\n  help: 'How would you describe the pileus?',\n  \n  CAMPANULATE: 'Campanulate',\n  CONICAL: 'Conical',\n  CONVEX: 'Convex',\n  DEPRESSED: 'Depressed',\n  FLAT: 'Flat',\n  INFUNDIBULIFORM: 'Infundibuliform',\n  OFFSET: 'Offset',\n  OVATE: 'Ovate',\n  UMBILLICATE: 'Umbillicate',\n  UMBONATE: 'Umbonate',\n  \n  POTATO_SHAPED: 'Potato shaped',\n  NA: 'N/A',\n  SPHERICAL: 'Spherical',\n  PEAR_SHAPED: 'Pear shaped',\n  BRAIN_LIKE: 'Brain-like',\n  HONEYCOMB: 'Honeycomb',\n  HEMI_SPHERICAL: 'Hemispherical',\n  type: 'capShape',\n  name: 'cap shape'\n  },\n  treeEcology: {\n  OAK: 'Oak',\n  BEECH: 'Beech',\n  BIRCH: 'Birch',\n  DECIDUOUS: 'Deciduous',\n  SOFTWOOD: 'Softwood',\n  HARDWOOD: 'Hardwood',\n  MIXED_WOODLAND: 'Mixed woodland',\n  CONIFEROUS: 'Coniferous',\n  PINE: 'Pine',\n  ELM: 'Elm',\n  ASH: 'Ash',\n  SYCAMORE: 'Sycamore',\n  ASPEN: 'Aspen',\n  ELDER: 'Elder',\n  CHESTNUT: 'Chestnut',\n  HARDWOODS: 'Hardwoods',\n  PRUNUS: 'Prunus',\n  PYRUS: 'Pyrus',\n  SALIX: 'Salix',\n  ROBINIA: 'Robinia',\n  CERATONIA: 'Ceratonia',\n  EUCALYPTUS: 'Eucalyptus',\n  BROAD_LEAF: 'Broad-leaf',\n  SWEET_CHESTNUT: 'Sweet chestnut',\n  POPLAR: 'Poplar',\n  CORK: 'Cork',\n  FIR: 'Fir',\n  SPRUCE: 'Spruce',\n  PLANE: 'Plane',\n  WILLOW: 'Willow',\n  MAPLE: 'Maple',\n  LARCH: 'Larch',\n  CEDAR: 'Cedar',\n  YEW: 'Yew',\n  TURKEY_OAK: 'Turkey oak',\n  HAWTHORN: 'Hawthorn',\n  BUSH: 'Bush',\n  SHRUB: 'Shrub',\n  },\n  hymeniumType: {\n  help: 'What is the hymenium type?',\n  GILLS: 'Gills',\n  PORES: 'Pores',\n  GLEBA: 'Gleba',\n  SMOOTH: 'Smooth',\n  TEETH: 'Teeth',\n  RIDGES: 'Ridges',\n  FALSE_GILLS: 'False gills',\n  },\n  associate: {\n  ALGA: 'Alga',\n  CYNOBACTERIUM: 'Cyanobacterium',\n  FUNGUS: 'Fungus',\n  type: 'associate',\n  name: 'associate'\n  },\n  thallusType: {\n  help: 'What is this lichen\\'s thallus type?',\n  FOLIOSE: 'Foliose',\n  FRUTICOSE: 'Fruticose',\n  CRUSTOSE: 'Crustose',\n  SQUAMULOSE: 'Squamulose',\n  LEPROSE: 'Leprose',\n  EPIPHYTE: 'Epiphyte',\n  type: 'thallusType',\n  name: 'thallus type'\n  },\n  rhizineType: {\n  SPARSE: 'Sparse',\n  HAPTER: 'Hapter',\n  type: 'rhizineType',\n  name: 'rhizine type'\n  },\n  substrate: {\n  WOOD: 'Wood',\n  BARK: 'Bark',\n  ROCKS: 'Rocks',\n  SOIL: 'Soil',\n  type: 'substrate',\n  name: 'substrate'\n  },\n  level: {\n  HIGH: 'High',\n  MEDIUM: 'Medium',\n  LOW: 'Low',\n  VARIABLE: 'Variable',\n  type: 'level',\n  name: 'level'\n  },\n  medicinalProperties: {\n  ANTIVIRAL: 'Antiviral',\n  ANTISEPTIC: 'Antiseptic',\n  ANTI_INFLAMMATORY: 'Anti-inflammatory',\n  ANTIBIOTIC: 'Antibiotic',\n  ANLAGESIC: 'Analgesic',\n  ANTIBACTERIAL: 'Antibacterial',\n  ANTICOAGULANT: 'Anticoagulant',\n  ANTIFUNGAL: 'Antifungal',\n  type: 'medicinalProperties',\n  name: 'medicinal properties'\n  },\n  ph: {\n  ACIDIC: 'Acidic',\n  ALKALINE: 'Alkaline',\n  NEUTRAL: 'Neutral',\n  type: 'pHLevel',\n  name: 'ph level'\n  },\n  colour: {\n  LILAC: 'Lilac',\n  BUFF: 'Buff',\n  WHITE: 'White',\n  YELLOW: 'Yellow',\n  DARK_GREEN: 'Dark green',\n  GREEN: 'Green',\n  WHITE_GREEN: 'White-green',\n  BRIGHT_GREEN: 'Bright green',\n  OLIVE_GREEN: 'Olive-green',\n  BRIGHT_YELLOW_GREEN: 'Bright yellow-green',\n  YELLOW_GREEN: 'Yellow-green',\n  YELLOW_BROWN: 'Yellow-brown',\n  PURPLE_BROWN: 'Purple-brown',\n  GREY_BROWN: 'Grey-brown',\n  DARK_YELLOW: 'Dark yellow',\n  DARK_RED: 'Dark red',\n  DARK_PINK: 'Dark pink',\n  ORANGE: 'Orange',\n  SCARLET: 'scarlet',\n  BLOOD_RANGE: 'Blood orange',\n  RED: 'Red',\n  RED_BROWN: 'Red-brown',\n  ORANGE_RED: 'Orange-red',\n  GREY: 'Grey',\n  PALE_GREY: 'Pale grey',\n  PALE_BROWN: 'Pale brown',\n  GREY_GREEN: 'Grey-green',\n  GREY_WHITE: 'Grey-white',\n  BROWN: 'Brown',\n  CHESTNUT_BROWN: 'Chestnut brown',\n  PAPER_BROWN: 'Paper brown',\n  BLACK: 'Black',\n  BLUE: 'Blue',\n  PALE_BLUE: 'Pale blue',\n  BLUE_BLACK: 'Blue-black',\n  JET_BLACK: 'Jet-black',\n  BLUE_GREEN: 'Blue-green',\n  VIOLET: 'Violet',\n  BURGUNDY: 'Burgundy',\n  PALE_VIOLET: 'Pale violet',\n  VIOLET_PURPLE: 'Violet purple',\n  PALE_GREEN: 'Pale green',\n  PALE_YELLOW: 'Pale yellow',\n  PALE_YELLOW_GREEN: 'Pale yellow-green',\n  PALE_GREY_GREEN: 'Pale yellow-green',\n  GLAUCOUS: 'Glaucous',\n  GREY_YELLOW: 'Grey-yellow',\n  ORANGE_YELLOW: 'Orange-yellow',\n  CREAM: 'Cream',\n  CHALKY: 'Chalky',\n  PINK: 'Pink',\n  PALE_PINK: 'Pale pink',\n  PURPLE: 'Purple',\n  PALE_PURPLE: 'Pale purple',\n  DARK_PURPLE: 'Dark purple',\n  TAN: 'Tan',\n  DARK_BROWN: 'Dark brown',\n  HONEY: 'Honey',\n  RED_PURPLE: 'Red-purple',\n  type: 'colour',\n  name: 'colour'\n  },\n  usage: {\n  help: 'To what use do humans put this species?',\n  PERFUMERY: 'Perfumery',\n  TANNING: 'Tanning',\n  DYING: 'Dying',\n  BREWING: 'Brewing',\n  FOOD: 'Food',\n  WINE: 'Wine',\n  COFFEE: 'Coffee',\n  TEA: 'Tea',\n  BIRDS_NEST: 'Bird\\'s nest',\n  POISON: 'Poison',\n  FODDER: 'Fodder',\n  FORAGE: 'Forage',\n  GREEN_MANURE: 'Green manure',\n  MEDICINE: 'Medicine',\n  FUR: 'Fur',\n  TIMBER: 'Timber',\n  PEST_CONTROL: 'Pest control',\n  HERB: 'Herb',\n  SPICE: 'Spice',\n  ESSENTIAL_OIL: 'Essential oil',\n  MORDANT: 'Mordant',\n  ASTRINGENT: 'Astringent'\n  },\n  nonTaxaType: {\n  FORM: 'Form',\n  type: 'nonTaxaType',\n  name: 'non taxa type'\n  },\n  element: {\n  NITROGEN: 'Nitrogen',\n  SULPUR_DIOXIDE: 'Sulpur dioxide',\n  type: 'element',\n  name: 'element'\n  },\n  leafBlade: {\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  type: 'leaf blade',\n  name: 'leaf blade'\n  },\n  leafDivision: {\n  PALMATE: 'Palmate',\n  COMPOUND_PALMATE: 'Compound Palmate',\n  PALMATELY_LOBED: 'Palmately lobed',\n  PINNATE: 'Pinnate',\n  COMPOUND_PINNATE: 'Compound Pinnate',\n  ODD_PINNATE: 'Odd pinnate',\n  EVEN_PINNATE: 'Even pinnate',\n  BIPINNATE: 'Bipinnate',\n  COMPOUND_BIPINNATE: 'Compound Bipinnate',\n  TRIFOLIATE: 'Trifoliate',\n  PINNATIFID: 'Pinnatifid',\n  TRIPINNATE: 'Tripinnate',\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  IMPARIPINNATE: 'Imparipinnate',\n  PARIPINNATE: 'Paripinnate',\n  },\n  leafletDivision: {\n  PALMATE: 'Palmate',\n  COMPOUND_PALMATE: 'Compound Palmate',\n  PALMATELY_LOBED: 'Palmately lobed',\n  PINNATE: 'Pinnate',\n  COMPOUND_PINNATE: 'Compound Pinnate',\n  ODD_PINNATE: 'Odd pinnate',\n  EVEN_PINNATE: 'Even pinnate',\n  BIPINNATE: 'Bipinnate',\n  COMPOUND_BIPINNATE: 'Compound Bipinnate',\n  TRIFOLIATE: 'Trifoliate',\n  PINNATIFID: 'Pinnatifid',\n  TRIPINNATE: 'Tripinnate',\n  SIMPLE: 'Simple ',\n  COMPOUND: 'Compound',\n  },\n  leafVariation: {\n  HOMOBLASTIC: 'Homoblastic',\n  HETEROBLASTIC: 'Heteroblastic',\n  type: 'leafVariation',\n  name: 'leaf variation'\n  },\n  shape: {\n  LINEAR: 'Linear',\n  OVATE: 'Ovate',\n  OBLANCEOLATE: 'Oblanceolate',\n  OBOVATE: 'Obovate',\n\n  ACICULAR: 'Acicular',\n  ACUMINATE: 'acuminate',\n  ACUTE: 'acute',\n  APICULATE: 'apiculate',\n  ATTENUATE: 'attenuate',\n  AURICULATE: 'auriculate',\n  ASYMMETRICAL: 'asymmetrical',\n  CAUDATE: 'caudate',\n  CORDATE: 'cordate',\n  CUNEATE: 'cuneate',\n  CUSPIDATE: 'cuspidate',\n  DELTOID: 'deltoid',\n  DIGITATE: 'digitate',\n  ELLIPTIC: 'elliptic',\n  ENSIFORM: 'ensiform',\n  EMARGINATE: 'emarginate',\n  FALCATE: 'falcate',\n  FENESTRATE: 'fenestrate',\n  FILIFORM: 'filiform',\n  FLABELLATE: 'flabellate',\n  HASTATE: 'hastate',\n  LACINIATE: 'laciniate',\n  LANCEOLATE: 'lanceolate',\n  LAMINAR: 'laminar',\n  LINEAR: 'linear',\n  LOBED: 'lobed',\n  LORATE: 'lorate',\n  LYRATE: 'lyrate',\n  MUCRONATE: 'mucronate',\n  MULTIFID: 'multifid',\n  OBCORDATE: 'obcordate',\n  OBLANCEOLATE: 'oblanceolate',\n  OBLIQUE: 'oblique',\n  OBLONG: 'oblong',\n  OBOVATE: 'obovate',\n  OBTRULLATE: 'obtrullate',\n  OBTUSE: 'obtuse',\n  ORBICULAR: 'orbicular',\n  OVATE: 'ovate',\n  PALMATE: 'palmate',\n  PALMATELY_LOBED: 'palmately lobed',\n  PALMATIFID: 'palmatifid',\n  PALMATIPARTITE: 'palmatipartite',\n  PALMATISECT: 'palmatisect',\n  PANDURATE: 'pandurate',\n  PEDATE: 'pedate',\n  PELTATE: 'peltate',\n  PERFOLIATE: 'perfoliate',\n  PERFORATE: 'perforate',\n  PINNATELY_LOBED: 'pinnately lobed',\n  PINNATIFID: 'pinnatifid',\n  PINNATIPARTITE: 'pinnatipartite',\n  PINNATISECT: 'pinnatisect',\n  PLICATE: 'plicate',\n  RENIFORM: 'reniform',\n  RETUSE: 'retuse',\n  RHOMBOID: 'rhomboid',\n  ROUNDED: 'rounded',\n  TRIANGULAR: 'Triangular',\n  QUADRANGULAR: 'Quadrangular',\n  SEMITERETE: 'semiterete',\n  SINUATE: 'sinuate',\n  SAGITTATE: 'sagittate',\n  SPATULATE: 'spatulate',\n  SPEAR_SHAPED: 'spear-shaped',\n  SUBOBTUSE: 'subobtuse',\n  SUBULATE: 'subulate',\n  TERETE: 'terete',\n  TRULLATE: 'trullate',\n  TRUNCATE: 'truncate',\n  UNDULATE: 'undulate',\n  UNIFOLIATE: 'unifoliate',\n  FLAT: 'Flat',\n  NEEDLE: 'Needle',\n  },\n  reproduction: {\n  SELF_POLLINATION: 'Self-pollination',\n  CROSS_POLLINATION: 'Cross-pollination',\n  type: 'reproduction',\n  name: 'reproduction'\n  },\n  asexualReproduction: {\n  BUDDING: 'budding',\n  FRAGMENTATION: 'fragmentation',\n  FISSION: 'fission',\n  SPORE_FORMATION: 'spore formation',\n  VEGETATIVE_PROPAGATION: 'vegetative propagation',\n  type: 'asexualReproduction',\n  name: 'asexual reproduction'\n  },\n  leafArrangement: {\n  ALTERNATE: 'Alternate',\n  BASAL: 'Basal',\n  CAULINE: 'Rosulate',\n  OPPOSITE: 'Opposite',\n  WHORLED: 'Whorled',\n  ROWS: 'Rows',\n  SPIRAL: 'Spiral',\n  OVERLAPPING: 'Overlapping',\n  INCURVED: 'Incurved',\n  DECUSSATE: 'Decussate',\n  type: 'leafArrangement',\n  name: 'leaf arrangement'\n  },\n  leafAttachment: {\n    SESSILE: 'Sessile',\n    SUBSESSILE: 'Subsessile',\n    PEDICELLATE: 'Pedicellate',\n  },\n  leafMargin: {\n  ENTIRE: 'Entire',\n  CILIATE: 'Ciliate',\n  CRENATE: 'Crenate',\n  DENTATE: 'Dentate',\n  DENTICULATE: 'Denticulate',\n  DOUBLY_SERRATE: 'Doubly serrate',\n  SERRATE: 'Serrate',  \n  SERRULATE: 'Serrulate',  \n  SINUATE: 'Sinuate',  \n  LOBATE: 'Lobate',  \n  UNDULATE: 'Undulate',  \n  SPINY: 'Spiny',  \n  SMOOTH: 'Smooth',\n  type: 'leafMargin',\n  name: 'leaf margin'\n  },\n  food: {\n  GRASS: 'Grass',\n  ROTTEN_FRUIT: 'Rotten fruit',\n  NECTAR: 'Nectar',\n  HONEYDEW: 'Honeydew',\n  SEEDS: 'Seeds',\n  NUTS: 'Nuts',\n  GRAINS: 'Grains',\n  BERRIES: 'Berries',\n  HERBAGE: 'Herbage',\n  SWARD: 'Sward',\n  LEAVES: 'Leaves',\n  WOOD: 'Wood',\n  ROOTS: 'Roots',\n  TUBERS: 'Tubers',\n  RHIZOMES: 'Rhizomes',\n  BULBS: 'Bulbs',\n  BARK: 'Bark',\n  SHOOTS: 'Shoots',\n  type: 'food',\n  name: 'food'\n  },\n  hibernatingStage: {\n  ADULT: 'Adult',\n  CATERPILLAR: 'Caterpillar',\n  PUPA: 'Pupa',\n  type: 'hibernatingStage',\n  name: 'hibernating stage'\n  },\n  symbiosis: {\n  MUTUALISM: 'Mutualism',\n  COMMENSALISM: 'Commensalism',\n  PREDATION: 'Predation',\n  PARASITISM: 'Parasitism',\n  HERBIVORY: 'Herbivory',\n  COMPETITION: 'Competition',\n  MYCORRHIZAL: 'Mycorrhizal',\n  ECTOMYCORRHIZAL: 'Ectomycorrhizal',\n  COMPANION: 'Companion planting',\n  POLLINATION: 'Pollination',\n  SEED_PREDATION: 'Seed predation',\n  type: 'symbiosis',\n  name: 'symbiosis'\n  },\n  trophicLevel: {\n  help: 'What is the trophic level or this species?',\n  PRIMARY_PRODUCER: 'Primary producer',\n  PRIMARY_CONSUMER: 'Primary consumer',\n  SECONDARY_CONSUMER: 'Secondary consumer',\n  OMNIVORE: 'Omnivore',\n  TERTIARY_CONSUMER: 'Tertiary consumer',\n  APEX_PREDATOR: 'Apex predator',\n  type: 'trophicLevel',\n  name: 'trophic level'\n  },\n  shelter: {\n  help: 'What is the name of this species`s shelter?',\n  DREY: 'Drey',\n  BURROW: 'Burrow',\n  DEN: 'Den',\n  WARREN: 'Warren',\n  SETT: 'Sett',\n  ROOKERY: 'Rookery',\n  LODGE: 'Lodge',\n  DAM: 'Dam',\n  NEST: 'Nest',\n  SHELTER: 'Shelter',\n  VEGETATION: 'vegetation',\n  type: 'shelter',\n  name: 'shelter'\n  },\n  active: {\n  help: 'When is this species most active?',\n  CREPUSCULAR: 'Crepuscular',\n  DIURNAL: 'Diurnal',\n  NOCTURNAL: 'Nocturnal',\n  MATUTINAL: 'Matutinal',\n  VESPERTINE: 'Vespertine',\n  type: 'active',\n  name: 'active'\n  },\n  juvenile: {\n  help: 'What is the name for the juvenile of this species?',\n  KIT: 'Kit',\n  SQUEAKER: 'Squeaker',\n  CUB: 'Cub',\n  KITTEN: 'Kitten',\n  CHICK: 'Chick',\n  PUP: 'Pup',\n  CALF: 'Calf',\n  DUCKLING: 'Duckling',\n  EYAS: 'Eyas',\n  MAGGOT: 'Maggot',\n  KID: 'Kid',\n  GOSLING: 'Gosling',\n  LEVERET: 'Leveret',\n  NYMPH: 'Nymph',\n  CATERPILLAR: 'Caterpillar',\n  LARVA: 'Larva',\n  SALAMANQUESA: 'Salamanquesa',\n  type: 'juvenile',\n  name: 'juvenile'\n  },\n  month: {\n  JANUARY: 'January',\n  FEBRUARY: 'February',\n  MARCH: 'March',\n  APRIL: 'April',\n  MAY: 'May',\n  JUNE: 'June',\n  JULY: 'July',\n  AUGUST: 'August',\n  SEPTEMBER: 'September',\n  OCTOBER: 'October',\n  NOVEMBER: 'November',\n  DECEMBER: 'December',\n  type: 'month',\n  name: 'month'\n  },\n  female: {\n  help: 'What is the name for a female of this species?',\n  VIXEN: 'Vixen',\n  DOE: 'Doe',\n  JILL: 'Jill',\n  BITCH: 'Bitch',\n  SOW: 'Sow',\n  HEN: 'Hen',\n  DUCK: 'Duck',\n  GOOSE: 'Goose',\n  PEN: 'Pen',\n  type: 'female',\n  name: 'female'\n  },\n  male: {\n  help: 'What is the name for a male of this species?',\n  BUCK: 'Buck',\n  DOG: 'Dog',\n  BOAR: 'Boar',\n  TOM: 'Tom',\n  JACK: 'Jack',\n  COCK: 'Cock',\n  DRAKE: 'Drake',\n  REYNARD: 'Reynard',\n  TOD: 'Tod',\n  TERCEL: 'Tercel',\n  GANDER: 'Gander',\n  COB: 'Cob',\n  type: 'male',\n  name: 'male'\n  },\n  diet: {\n  help: 'How is the diet of this species best described?',\n  HERBIVORE: 'Herbivore',\n  OMNIVORE: 'Omnivore',\n  CARNIVORE: 'Carnivore',\n  XYLOPHAGOUS: 'Xylophagous',\n  POLYPHAGOUS: 'Polyphagous',\n  type: 'diet',\n  name: 'diet'\n  },\n  fungusMarginType: {\n  ENTIRE: 'Smooth entire',\n  APPENDICULATE: 'Appendiculate',\n  UNDULATE: 'Undulate',\n  STRIATE: 'Striate',\n  PLICATE: 'Plicate',\n  RIMMOSE: 'Rimmose',\n  ERODED: 'Eroded',\n  INROLLED: 'Inrolled',\n  type: 'marginType',  \n  name: 'fungus margin type'\n  },\n  soilType: {\n  SILICEOUS: 'Siliceous',\n  CALCAREOUS: 'Calcareous',\n  NITROGENOUS: 'Nitrogenous',\n  NUTRIENT_POOR: 'Nutrient poor',\n  WELL_DRAINED: 'Well-drained',\n  WELL_WATERED: 'Well-watered',\n  LOAM: 'Loam',\n  CHALK: 'Chalk',\n  SAND: 'Sand',\n  RICH: 'Rich',\n  MOIST: 'Moist'\n  },\n  organisation: {\n  help: 'How is this species organised?',\n  EUSOCIAL: 'Eusocial',\n  SOCIAL: 'Social',\n  SOLITARY: 'Solitary',\n  MATRIARCHY: 'Matriarchy',\n  type: 'organisation',\n  name: 'organisation'\n  },\n  role: {\n  INDICATOR: 'Indicator',\n  KEYSTONE: 'Keystone',\n  FOUNDATION: 'Foundation',\n  SPECIALIST: 'Specialist',\n  GENERALIST: 'Generalist',\n  PIONEER: 'Pioneer',\n  INVASIVE: 'Invasive',\n  DOMINANT: 'Dominant',\n  POLLINATOR: 'Pollinator',\n  PREDATOR: 'Predator',\n  HERBIVORE: 'Herbivore',\n  OMNIVORE: 'Omnivore',\n  CARNIVORE: 'Carnivore',\n  GRANIVORE: 'Granivore',\n  MUCIVORE: 'Mucivore',\n  PREY: 'Prey',\n  COMPETITOR: 'Competitor',\n  HOST: 'Host',\n  CARRIER: 'Carrier',\n  RUDERAL: 'Ruderal',\n  SUPERTRAMP: 'Supertramp',\n  SYMBIONT: 'Symbiont',\n  OCCUPANT: 'Lives in',\n  PARASITE: 'Parasite',\n  COLONISER: 'Coloniser',\n  EARLY_SUCCESSION: 'early-succession',\n  SEED_DISPERSAL: 'Seed dispersal',\n  FERTILISATION: 'Fertilisation',\n  PROPAGATION: 'propagation',\n  REPRODUCTION: 'reproduction',\n  BIOINDICATOR: 'Bioindicator',\n  STRANGLER: 'Strangler',\n  FOOD_SOURCE: 'Food source',\n  EPIPHYTIC: 'Epiphytic',\n  EPIPHYTIC_STRANGLER: 'Epiphytic strangler',\n  NUTRIENT_CYCLING: 'Nutrient cycling',\n  CARBON_DIOXIDE_PRODUCTION:'Carbon dioxide production',\n  MYCOREMEDIATION: 'Mycoremediation',\n  type: 'role',\n  name: 'role'\n  },\n  fruitType: {\n  help: 'What fruit type does this plant have?',\n  DRUPE: 'Drupe',\n  POME: 'Pome',\n  BERRY: 'Berry',\n  AGGREGATE_FRUIT: 'Aggregate fruit',\n  LEGUME: 'Legume',\n  CAPSULE: 'Capsule',\n  NUT: 'Nut',\n  GRAIN: 'Grain',\n  MULTIPLE_FRUIT: 'Multiple fruit',\n  SAMARA: 'Samara',\n  ACHENE: 'Achene',\n  POD: 'Pod',\n  ARIL: 'Aril',\n  SYCONIUM: 'syconium',\n  FOLLICLE: 'Follicle',\n  SILIQUE: 'Silique',\n  type: 'fruitType',\n  name: 'fruit type'\n  },\n  inflorescence: {\n  help: 'What type of inflorescence does this plant have?',\n  CATKIN: 'catkin',\n  UMBEL: 'umbel',\n  RACEME: 'raceme',\n  CORYMB: 'corymb',\n  SPIKE: 'Spike',\n  SPADEX: 'Spadex',\n  SINGLE: 'Single',\n  PANICLE: 'Panicle',\n  CYMOSE: 'Cymose',\n  BRANCHED_SPIKE: 'Branched spike',\n  },\n  umbelType: {\n    FLAT: 'Flat',\n    SPHERICAL: 'Spherical',\n    SIMPLE: 'Simple',\n    COMPOUND: 'Compound',\n    TERMINAL: 'Terminal',\n  },\n  display: {\n  help: 'Which form of display does this species exhibit?',\n  DIEMATIC: 'Diematic',\n  SEXUAL_COLOUR_DIMORPHISM: 'Sexual colour dimorphism',\n  NO_SEXUAL_COLOUR_DIMORPHISM: 'No sexual colour dimorphism',\n  SEXUAL_DIMORPHISM: 'Sexual dimorphism',\n  NO_SEXUAL_DIMORPHISM: 'No sexual dimorphism',\n  MELANISTIC: 'Melanistic',\n  type: 'display',\n  name: 'display'\n  },\n  behaviour: {\n  help: 'This species exhibits which form of behaviour?',\n  SEXUAL_CANNIBALISM: 'Sexual cannibalism',\n  MONANDROUS: 'Monandrous',\n  VOCALISATION: 'Vocalisation',\n  CRYPSIS: 'Crypsis',\n  HOARDING: 'Hoarding',\n  HIBERNATION: 'Hibernation',\n  GAME_PLAYING: 'Game playing',\n  PLAYFUL: 'Playful',\n  TERRITORIAL: 'Territorial',\n  NON_TERRITORIAL: 'Non territorial',\n  BIPARENTAL_CARE: 'Biparental care',\n  COOPERATIVE_BREEDING: 'Cooperative breeding',\n  TOOL_MAKING: 'Tool making',\n  PROBLEM_SOLVING: 'Problem solving',\n  DIVISION_OF_LABOUR: 'Division of labour',\n  SUPERORGANISM: 'Superorganism',\n  ANAUTOGENY: 'Anautogeny',\n  MASS_PROVISIONING: 'Mass provisioning',\n  PRECOCIAL: 'Precocial',\n  ALTRICIAL: 'Altricial',\n  AUTOTOMIC: 'Autotomic',\n  ECTOTHERMIC: 'Ectothermic',\n  ADHESION: 'Adhesion',\n  POLYPHYODONT: 'Polyphyodont',\n  VIVIPAROUS: 'Viviparous',\n  REGURGITATION: 'Feeding through regurgitation',\n  MULTIVOLTINE: 'Multivoltine',\n  BIVOLTINE: 'Bivoltine',\n  UNIVOLTINE: 'Univoltine',\n  SEMIVOLTINE: 'Semivoltine',\n  METAMORPHOSIS: 'Metamorphosis',\n  RUTTING: 'Rutting',\n  WHELPING: 'Whelping',\n  FARROWING: 'Farrowing',\n  SWIMMING: 'Swimming',\n  DECUMBENT: 'Decumbent',\n  ETHYLENE_RIPENING: 'Ethylene ripening',\n  MIGRATORY: 'Migratory',\n  type: 'behaviour',\n  name: 'behaviour'\n  },\n  sense: {\n  help: 'Which sense does this species favour?',\n  SIGHT: 'Sight',\n  MOVEMENT: 'Movement',\n  SMELL: 'Smell',\n  SPATIAL: 'Spatial',\n  MEMORY: 'Memory',\n  ECHOLOCATION: 'Echolocation',\n  type: 'sense',\n  name: 'sense'\n  },\n  crypsis: {\n  CAMOUFLAGE: 'Camouflage',\n  NOCTURNALITY: 'Nocturnality',\n  SUBTERRANEAN: 'Subterranean',\n  MIMICRY: 'Mimicry',\n  VISUAL: 'Visual',\n  OLFACTORY: 'Olfactory',\n  AUDITORY: 'Auditory',\n  },\n  allochory: {\n  ANEMOCHORY: 'Anemochory',\n  HYDROCHORY: 'Hydrochory',\n  ZOOCHORY: 'Zoochory',\n  ANTHROPOCHORY: 'Anthropochory',\n  type: 'allochory',\n  name: 'allochory'\n  },\n  reproductiveContainer: {\n  CONE: 'Cone',\n  type: 'reproductiveContainer',\n  name: 'reproductive container'\n  },\n  communication: {\n  VOCALISATION: 'Vocalisation',\n  POSTURING: 'Posturing',\n  type: 'communication',\n  name: 'communication'\n  },\n  matingSystem: {\n  POLYGYNOUS: 'Polygynous',\n  MONOGAMOUS: 'Monogamous',\n  type: 'matingSystem',\n  name: 'mating system'\n  },\n  physiology: {\n  NEGATIVE_ALLELOPATHY: 'Negative allelopathy',\n  POSITIVE_ALLELOPATHY: 'Positive allelopathy',\n  C3_CARBON_FIXATION: 'C3 carbon fixation',\n  NITROGEN_FIXING: 'Nitrogen fixing',\n  MYCORRHIZAL: 'Mycorrhizal',\n  ECTOMYCORRHIZAL: 'Ectomycorrhizal',\n  DORMANCY: 'Dormancy',\n  EVERGREEN: 'Evergreen',\n  DECIDUOUS: 'Deciduous',\n  CONIFEROUS: 'Coniferous',\n  ADVENTITIOUS:'Adventitious',\n  NYCTINASTY:'Nyctinasty',\n  XEROMORPHIC: 'Xeromorphic',\n  SUCCULENT: 'Succulent',\n  DROUGHT_TOLERANT: 'Drought tolerant',\n  FIRE_TOLERANT: 'Fire tolerant',\n  FIRE_RESISTANT: 'Fire resistant',\n  POLLUTION_TOLERANT: 'Pollution tolerant',\n  PH_TOLERANT: 'pH tolerant',\n  SALT_TOLERANT: 'Salt tolerant',\n  FROST_TOLERANT: 'Frost tolerant',\n  HEAT_TOLERANT: 'Heat tolerant',\n  NITROGEN_TOLERANT: 'Nitrogen tolerant',\n  HEAVY_METAL_TOLERANT: 'heavy metal tolerant',\n  ACID_RAIN_TOLERANT: 'Acid rain tolerant',\n  COMPACT_SOIL_TOLERANT: 'Compact soil tolerant',\n  FLORAL_SCENT: 'Floral scent',\n  AROMATIC: 'Aromatic',\n  MONOCARPIC: 'Monocarpic',\n  POLYCARPIC: 'Polycarpic',\n  PYROPHYTIC: 'Pyrophytic',\n  SEROTINOUS: 'Serotinous',\n  STYPTIC: 'Styptic',\n  BIOLUMINESCENCE: 'Bioluminescence',\n  type: 'physiology',\n  name: 'physiology'\n  },\n  collective: {\n  help: 'What is the term for a collective of this species?',\n  SOUNDER: 'Sounder',\n  SLOTH: 'Sloth',\n  MURMURATION: 'Murmuration',\n  PACK: 'Pack',\n  type: 'collective',\n  name: 'collective'\n  },\n  ecology: {\n  DIGGING: 'Digging',\n  SCRAPING: 'Scraping',\n  ROOTING: 'Rooting',\n  SCAVENGING: 'Scavenging',\n  type: 'ecology',\n  name: 'ecology'\n  },\n  characteristic: {\n  help: 'Which characteristic/s does this species display?',\n  PERENNIAL: 'Perennial',\n  ANNUAL: 'Annual',\n  BIENNIAL: 'Biennial',\n  HERBACEOUS: 'Herbaceous',\n  DIOECIOUS: 'Dioecious',\n  MONOECIOUS: 'Monoecious',\n  SYNOECIOUS: 'Synoecious',\n  PERFECT: 'Perfect',\n  COMPLETE: 'Complete',\n  DICOTYLEDON: 'Dicot',\n  MONOCOTYLEDON: 'Monocot',\n  CAULIFLORY: 'Cauliflory',\n  RAMIFLORY: 'Ramiflory',\n  PUBESCENT: 'Pubescent',\n  CHAMAEPHYTE: 'Chamaephyte',\n  FIBROUS_ROOT_SYSTEM: 'Fibrous root system',\n  TAPROOT_SYSTEM: 'Taproot system',\n  KIN_SELECTION: 'Kin selection',  \n  BROADLEAF: 'Broadleaf',\n  AERIAL_ROOTS: 'Aerial roots',\n  EPICORMIC_ROOTS: 'Epicormic shoots',\n  BASAL_ROOTS: 'Basal shoots',\n  RUNNER: 'Runner',\n  CLIMBER: 'Climber',\n  BUTTRESS_ROOT: 'Buttress root',\n  MONOPODIAL: 'Monopodial',\n  APICAL_DOMINANCE: 'Apical dominance',\n  POLYMORPHIC: 'Polymorphic',\n  CRYPTIC_SPECIES_COMPLEX: 'Cryptic species complex',  \n  RHIZOMORPHS: 'Rhizomorphs',\n  GEOPHYTE: 'Geophyte',\n  RICTAL_BRISTLES: 'Rictal bristles',\n  DEHISCENCE: 'Dehiscence',\n  EXPLOSIVE_DEHISCENCE: 'Explosive dehiscence',\n  RESIN_CANAL: 'Resin canal',\n  APOSEMATIC: 'Aposematic'\n  },\n  climate: {\n  HOT: 'Hot',\n  DRY: 'Dry',\n  TEMPERATE: 'Temperate',\n  COOL: 'Cool',\n  TROPICAL: 'Tropical',\n  CONTINENTAL: 'Continental',\n  DROUGHT_TOLERANT: 'Drought-tolerant',\n  type: 'climate',\n  name: 'climate'\n  },\n  pollination: {\n  ALLOGAMY: 'Allogamy',\n  ANEMOPHILY: 'Anemophily',\n  HYDROPHILY: 'Hydrophily',\n  ENTOMOPHILY: 'Entomophily',\n  AMBOPHILY: 'Ambophily',\n  MELITTOPHILY: 'Melittophily',\n  PSYCHOPHILY: 'Psychophily',\n  PHALAENOPHILY: 'Phalaenophily',\n  SONICATION: 'Sonication',\n  GENERALISED_SYNDROME: 'Generalised syndrome',\n  CLEISTOGAMY: 'Cleistogamy'\n  },\n  stipeCharacter: {\n  RING: 'Ring',\n  RING_AND_VOLVA: 'ring and volva',\n  BARE: 'Bare',\n  NA: 'N/A',\n  SHORT: 'short',\n  STUMPY: 'stumpy',\n  CLUB_LIKE: 'Club-like',\n  WARTS: 'warts',\n  HOLLOW: 'hollow',\n  PRUINOSE: 'pruinose',\n  PARTIAL_VEIL: 'Partial veil',\n  type: 'stipeCharacter',\n  name: 'stipe character'\n  },\n  stemCharacter: {\n    HOLLOW: 'hollow',\n    TERETE: 'terete',\n    HAIRY: 'Hairy',\n    GLAUCOUS: 'Glaucous',\n    FARINOSE: 'Farinose',\n    SCURFY: 'Scurfy',\n    VISCOUS: 'Viscous',\n    PUNCTATE: 'Punctate',\n    PAPILLATE: 'Papillate',\n    TUBERCULATE: 'Tuberculate',\n    RUGOSE: 'Rugose',\n    GLABROUS: 'Glabrous',\n    PUBESCENT: 'Pubescent',\n  },\n  gillAttachment: {\n    ADNATE: 'Adnate',\n    ADNEXED: 'Adnexed',\n    DECURRENT: 'Decurrent',\n    EMARGINATE: 'Emarginate',\n    FREE: 'Free',\n    Seceding: 'Seceding',\n    SINUATE: 'Sinuate',\n    SUBDECURRENT: 'Subdecurrent',\n    NA: 'N/A',\n    type: 'gillAttachment',\n    name: 'gill attachment'\n  },\n  grouping: {\n    LARGE_GROUPS: 'large groups',\n    CLUSTERS: 'clusters',\n    LARGE_CLUSTERS: 'large clusters',\n    SCATTERED_CLUSTERS: 'scattered clusters',\n    FAIRY_RINGS: 'fairy rings',\n    GREGARIOUS: 'gregarious',\n    NUMEROUS: 'numerous',\n    type: 'grouping',\n    name: 'grouping'\n  },\n  propagation: {\n    RHIZOMES: 'Rhizomes',\n    SEEDS: 'Seeds',\n    SUCKERS: 'Suckers',\n    STOLONS: 'Stolons',\n    BULBS: 'Bulbs',\n    TUBERS: 'Tubers',\n    CORMS: 'Corms',\n    PLANTLETS: 'Plantlets',\n    KEIKIS: 'Keikis',\n    APOMIXIS: 'Apomixis',\n    type: 'propagation',\n    name: 'propagation'\n  },\n  seedDispersal: {\n    AUTOCHORY: 'autochory',\n    ANEMOCHORY: 'anemochory',\n    HYDROCHORY: 'Hydrochory',\n    ZOOCHORY: 'Zoochory',\n    ANTHROPOCHORY: 'Anthropochory',\n  },\n  exposure: {\n    FULL_SUN: 'Full sun',\n    PARTIAL_SUN: 'Partial Sun',\n    PARTIAL_SHADE: 'Partial Shade',\n    SHADE: 'shade'\n  },\n  nutType: {\n    ACORN: 'acorn',\n    HAZELNUT: 'hazelnut',\n    CHESTNUT: 'chestnut',\n  },\n  surface: {\n    GLAUCOUS: 'Glaucous',\n    FARINOSE: 'Farinose',\n    SCURFY: 'Scurfy',\n    VISCOUS: 'Viscous',\n    PUNCTATE: 'Punctate',\n    PAPILLATE: 'Papillate',\n    TUBERCULATE: 'Tuberculate',\n    RUGOSE: 'Rugose',\n    GLABROUS: 'Glabrous',\n    PUBESCENT: 'Pubescent',\n    TOMENTOSE: 'tomentose',\n  },\n  texture: {\n    LEATHERY: 'Leathery',\n    FLESHY: 'Fleshy',\n    GLOSSY: 'Glossy',\n    WOOLY: 'Wooly',\n    TOMENTOSE: 'tomentose',\n    SCALY: 'Scaly',\n    ROUGH: 'Rough',\n    SMOOTH: 'Smooth',\n    VELVETY: 'Velvety',\n    HAIRY: 'Hairy',\n    PUBESCENT: 'Pubescent',\n  },\n  treeShape: {\n    help: \"Which descrption is the best match for this tree?\",\n    COLUMNAR: 'Columnar',\n    OPEN_HEAD_IRREGULAR: 'Open head irregular',\n    WEEPING: 'Weeping',\n    PYRAMIDAL: 'Pyramidal',\n    GLOBE: 'Globe',\n    FASTIGIATE: 'Fastigiate',\n    VASE: 'Vase',\n    HORIZONTAL_SPREADING: 'Horizontal spreading',\n    NARROW_DOMED: 'Narrow domed'\n  },\n  crownShape: {\n    OVOID_CONIC: 'Ovoid-conic',\n    CONIC: 'Conic',\n    DOMED: 'Domed',\n    SPIRE_LIKE: 'Spire-like',\n    SLENDER: 'Slender'\n  },\n  barkType: {\n    SMOOTH: 'Smooth',\n    LENTICELS: 'Lenticels',\n    PEELING_STRIPS: 'Peeling strips',\n    VERTICAL_CRACK: 'Vertical cracks',\n    VERTICAL_STRIPS: 'Vertical strips',\n    SCALES: 'Scales',\n    PLATES: 'Plates',\n    INTERSECTING_RIDGES: 'Intersecting ridges',\n    UNINTERRUPTED_RIDGES: 'Uninterrupted ridges',\n    RIDGES_BROKEN_HORIZONTALLY: 'Ridges broken horizontally',\n    PAPER_LIKE: 'Paper-like',\n    SQUARE_CRACKED: 'Square-cracked',\n    RESINOUS: 'Resinous',\n    THICK: 'Thick'\n  },\n  coneShape: {\n    BARREL_SHAPED: 'Barrel-shaped',\n    GLOBULAR: 'Globular'\n  },\n  leafVenation: {\n    ARCUATE: 'Arcuate',\n    DICHOTOMOUS: 'Dichotomous',\n    LONGITUDINAL: 'Longitudinal',\n    PARALLEL: 'Parallel',\n    PINNATE: 'Pinnate',\n    RETICULATE: 'Reticulate',\n    ROTATE: 'Rotate',\n    TRANSVERSE: 'Transverse',\n  },\n  flowerShape: {\n    TRUMPET_SHAPED: 'Trumpet-shaped',\n    BILABIATE: 'Bilabiate',\n    REGULAR: 'Regular',\n    ACTINOMORPHIC: 'Actinomorphic',\n    ZYGOMORPHIC: 'Zygomorphic'\n  },\n  branchArrangement: {\n    HORIZONTAL: 'Horizontal',\n    WHORLS: 'Whorls'\n  },\n  leafFeatures: {\n    BLUNT_TIPS: 'Blunt tips',\n    STOMATAL_LINES: 'Stomatal lines',\n    DROOPING: 'Drooping'\n  },\n  leafFolding: {\n    CARINATE: 'Carinate',\n    CONDUPLICATE: 'Conduplicate',\n    CUCULLATE: 'Cucullate',\n    INVOLUTE: 'Involute',\n    PLICATE: 'Plicate',\n    REDUPLICATE: 'Reduplicate',\n    REVOLUTE: 'Revolute',\n    SUPERVOLUTE: 'Supervolute',\n  },\n  mushroomGroup: {    \n    MYCOTROPHS: 'Mycotrophs',\n    POLYPORES: 'Polypores',\n    BOLETES: 'Boletes',\n    PUFFBALLS: 'Puffballs',\n    GILLED_MUSHROOMS: 'Gilled Mushrooms',\n    CHANTERELLES_AND_TRUMPETS: 'Chanterelles and Trumpets',\n    TOOTHED_MUSHROOMS: 'Toothed Mushrooms',\n    STINKHORNS: 'Stinkhorns',\n    CUP_FUNGI: 'Cup Fungi',\n    BIRDS_NEST_FUNGI:'Bird\\'s Nest Fungi',\n    TRUE_MORELS_AND_VERPAS: 'True Morels and Verpas',\n    FALSE_MORELS: 'False Morels',\n    SADDLES: 'Saddles',\n    JELLY_FUNGI: 'Jelly Fungi',\n    CLUBS_AND_CORALS: 'Clubs and Corals',\n    CRUST_FUNGI: 'Crust Fungi'\n  },\n  units: [\n    { lifeSpan: [ 'DD', 'MM', 'YY'] },\n    { gestation: [ 'DD', 'MM', 'YY'] },\n    { weaning: [ 'DD', 'MM', 'YY'] },\n    { germination: [ 'DD', 'WW', 'MM', 'YY'] },\n    { height: [ 'm', 'cm', 'mm'] },\n    { diameter: [ 'm', 'cm', 'mm'] },\n    { circumference: [ 'm', 'cm', 'mm'] },\n    { trunkDiameter: [ 'm', 'cm', 'mm'] },\n    { capDiameter: [ 'm', 'cm', 'mm'] },\n    { umbelDiameter: [ 'cm', 'mm'] },\n    { capWidth: [ 'm', 'cm', 'mm'] },\n    { infructescenceWidth: [ 'm', 'cm', 'mm'] },\n    { width: [ 'm', 'cm', 'mm'] },\n    { breadth: [ 'm', 'cm', 'mm'] },\n    { capHeight: [ 'm', 'cm', 'mm'] },\n    { shelfWidth: [ 'm', 'cm', 'mm'] },\n    { shelfThickness: [ 'm', 'cm', 'mm'] },\n    { length: [ 'm', 'cm', 'mm'] },\n    { leafLength: [ 'm', 'cm', 'mm'] },\n    { awnLength: [ 'cm', 'mm'] },\n    { infructescenceLength: [ 'm', 'cm', 'mm'] },\n    { juvenileLeafLength: [ 'm', 'cm', 'mm'] },\n    { leafWidth: [ 'm', 'cm', 'mm'] },\n    { petalLength: [ 'cm', 'mm'] },\n    { petalWidth: [ 'cm', 'mm'] },\n    { petioleLength: [ 'cm', 'mm'] },\n    { bractLength: [ 'cm', 'mm'] },\n    { fruitWidth: [ 'cm', 'mm'] },\n    { fruitLength: [ 'cm', 'mm'] },\n    { fruitDiameter: [ 'cm', 'mm'] },\n    { fruitHeight: [ 'cm', 'mm'] },\n    { flowerDiameter: [ 'cm', 'mm'] },\n    { flowerLength: [ 'cm', 'mm'] },\n    { coneDiameter: [ 'cm', 'mm'] },\n    { coneLength: [ 'cm', 'mm'] },\n    { maleConeLength: [ 'cm', 'mm'] },\n    { femaleConeLength: [ 'cm', 'mm'] },\n    { bulbWidth: [ 'cm', 'mm'] },\n    { coneWidth: [ 'cm', 'mm'] },\n    { maleConeWidth: [ 'cm', 'mm'] },\n    { femaleConeWidth: [ 'cm', 'mm'] },\n    { stalkHeight: [ 'm', 'cm', 'mm'] },\n    { stemHeight: [ 'm', 'cm', 'mm'] },\n    { scapeHeight: [ 'm', 'cm', 'mm'] },\n    { stemDiameter: [ 'm', 'cm', 'mm'] },\n    { stipeLength: [ 'm', 'cm', 'mm'] },\n    { tailLength: [ 'm', 'cm', 'mm'] },\n    { leafletLength: [ 'cm', 'mm'] },\n    { leafletWidth: [ 'cm', 'mm'] },\n    { queenLength: [ 'cm', 'mm'] },\n    { queenWingspan: [ 'cm', 'mm'] },\n    { workerLength: [ 'cm', 'mm'] },\n    { workerWingspan: [ 'cm', 'mm'] },\n    { maleLength: [ 'cm', 'mm'] },\n    { maleWingspan: [ 'cm', 'mm'] },\n    { stipeWidth: [ 'm', 'cm', 'mm'] },\n    { wingSpan: [ 'm', 'cm', 'mm'] },\n    { tongueLength: [ 'cm', 'mm'] },\n    { phValue: ['pH']},\n    { weight: [ 'g', 'kg']},\n    { queenWeight: [ 'g']},\n    { workerWeight: [ 'g']},\n    { maleWeight: [ 'g']},\n  ],\n};","import { utils } from 'utils/utils';\nimport { enums } from 'admin/api/enums';\nimport { firebaseConfig } from 'api/firebase/credentials';\nimport { questions } from 'api/firebase/questions';\n\nfirebase.initializeApp(firebaseConfig);\n\nconst storage = firebase.storage();\n\nconst db = firebase.firestore();\n\nconst getSpeciesWhere = async props => {\n\n    try {\n        const { key, operator, value, limit } = props;\n\n        let speciesRef = limit\n                        ? db.collection(`species`).where(key, operator, value).limit(limit)\n                        : db.collection(`species`).where(key, operator, value);\n\n        const querySnapshot = await speciesRef.get();\n\n        const docs = [];\n\n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n\n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesWhere');\n    }\n};\n  \nconst getSpecies = async props => {\n    const item = await getSpeciesWhere(props);\n    return item;\n};\n\nconst getSpeciesNames = async () => {\n\n    try {\n        const speciesPropertiesRef = db.collection(`species`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await speciesPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesNames');\n    }\n};\n\nconst getTaxaNames = async () => {\n\n    try {\n        const taxaPropertiesRef = db.collection(`taxa`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await taxaPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n    } catch(e) {\n      // logAPIError(e, 'getTaxaNames');\n    }\n};\n\nconst getSpeciesByIconicTaxon = async (item, number = 6) => {\n\n    const { iconicTaxon, lichen: isLichen, eolId } = item;\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    const randomId = getRandomId();\n    \n    if(isLichen) {\n        querySnapshot = await species.where('lichen', '==', true).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    } else {\n        querySnapshot = await species.where('iconicTaxon', '==', iconicTaxon.toLowerCase()).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    }\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getSpeciesByName = async (itemName, force = false) => {\n\n    if(!itemName) return '';\n\n    const items = await getSpecies({ key:'name', operator:'==', value:itemName });\n    \n    return items[0];\n};\n\nconst getTaxaWhere = async props => {\n\n    const { language, key, operator, value, limit } = props;\n  \n    const taxaRef = limit\n                        ? db.collection(`taxa_en`).where(key, operator, value).limit(limit)\n                        : db.collection(`taxa_en`).where(key, operator, value);\n  \n    const querySnapshot = await taxaRef.get();\n  \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return await docs;\n};\n  \nconst getFamiliesByIconicTaxon = async (iconicTaxonRank, iconicTaxonValue, isLichen, config) => {\n    return await getTaxaWhere({ language: config.language, key: 'iconicTaxon', operator: '==', value: iconicTaxonValue, limit: 7 });\n};\n\nconst getTaxonByName = async (config, name) => {\n\n    try {\n                \n        let taxon = {};\n\n        const taxaRef = db.collection(`taxa_en`).where('name', '==', name);\n\n        const querySnapshot = await taxaRef.get();\n        \n        if(querySnapshot.docs.length > 0) {\n            querySnapshot.forEach(doc => {\n                taxon = doc.data();                                \n          });          \n        }\n\n        return taxon;\n\n    } catch (e) {\n      // logAPIError(e, 'getTaxonByName');\n      return e;\n    }\n};\n\nconst getAsyncTraitsByNameAndCollection = async (name, collection = 'traits_en', language) => {\n\n    try {\n    \n    const languageTraits = db.collection(collection).where(\"name\", \"==\", name);\n  \n    const traits = await languageTraits.get();\n  \n    return await traits;\n    \n    } catch(e) {\n      // logAPIError(e, 'getAsyncTraitsByNameAndCollection');\n    }\n};\n\nconst getTraitsBySpeciesName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'traits_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getTraitsByTaxonName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'taxa_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getBirdsong = async xcID => {\n\n    const storageRef = storage.ref();\n    const url = await storageRef.child(`birdsong/${xcID}.mp3`).getDownloadURL();\n    return url;\n};\n\n// const getImage = async image => {\n\n//   const storageRef = storage.ref();\n//   const url = await storageRef.child(`images/${image}`).getDownloadURL();\n//   return url;\n// };\n\nconst addSpecies = async species => {\n\n    let docRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            return {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || ''\n            }\n        });\n    }\n\n    try {\n        docRef = await db.collection('species').add(species);\n    } catch(e) {\n      // logAPIError(e, 'addSpecies');\n    }\n\n    return docRef;\n};\n\nconst updateSpecies = async species => {\n\n    let speciesDocRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            const updatedSpecies = {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || '',\n            };\n            if(image.starred) {\n                updatedSpecies.starred = image.starred;\n            }\n            if(image.provider) {\n                updatedSpecies.provider = image.provider;\n            }\n            return updatedSpecies;\n        });\n    }\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update(species); \n\n};\n\nconst updateSpeciesNames = async (species, names) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update({names}); \n\n};\n\nconst getTraitValues = async () => {\n\n    const traits = enums;\n\n    return new Promise(resolve => resolve(enums));\n};\n\nconst deleteSpeciesByName = async name => {\n\n    const speciesRef = db.collection(`species`).where('name', '==', name);\n\n    speciesRef.get().then(function(querySnapshot) {\n        querySnapshot.forEach(function(doc) {\n        doc.ref.delete();\n        });\n    });\n};\n\nconst addTraits = async (name, trait, collection = 'traits_en') => {\n\n    let speciesTraitsRef;\n\n    try {\n\n        const querySnapshot = await db.collection(collection).where(\"name\", \"==\", name).get();\n        \n        if(querySnapshot.empty) {\n            trait.name = name;\n            return await db.collection(collection).add(trait);\n        } else {\n            querySnapshot.forEach(function(doc) {\n                speciesTraitsRef = doc.ref;\n            });\n\n            await speciesTraitsRef.update(trait); \n\n            return 'Update successful';\n        }\n    } catch(e) {\n      // logAPIError(e, 'addTraits');\n      return `Update failed. Error ${e.message}.`;\n    }\n};\n\nconst addSpeciesRelationship = async (type, traits) => {\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(traits.map(async trait => {\n\n                let speciesTraitsRef;\n        \n                const querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", trait.name).get();\n\n                if(querySnapshot.empty) {\n                    trait.name = name;\n                    speciesTraitsRef = await db.collection(`traits_en`).add(trait);\n                } else {\n                    querySnapshot.forEach(function(doc) {\n                        speciesTraitsRef = doc.ref;\n                    });\n                }\n\n                speciesTraitsRef.update({\n                    [type]: firebase.firestore.FieldValue.arrayUnion(trait.update)\n                });\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return 'Relationship added.';\n\n    } catch (e) {\n      // logAPIError(e, 'addSpeciesRelationship');\n      return e.message;\n    }\n\n};\n\nconst addPhotos = async (name, photos) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    try {\n        return speciesDocRef.update({\n            images: firebase.firestore.FieldValue.arrayUnion(...photos)\n        });\n    } catch (e) {\n      // logAPIError(e, 'addPhotos');\n      return e.message;\n    }\n\n};\n\nconst deleteSpeciesTraitField = async (name, field) => {\n\n    let querySnapshot, speciesTraitsRef;\n  \n    try {\n        try {\n          querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", name).get();\n      \n          querySnapshot.forEach(function(doc) {\n              speciesTraitsRef = doc.ref;\n          });\n        } catch(e) {\n          // logAPIError(e, 'deleteSpeciesTraitField unable to obtain reference to species trait');\n        }\n      \n        var removeField = speciesTraitsRef.update({\n            [field] : firebase.firestore.FieldValue.delete()\n        });\n  \n        return removeField;\n\n      } catch(e) {\n        // logAPIError(e, 'deleteSpeciesTraitField');\n    }    \n  };\n\nconst getRandomSpecies = async number => {\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    querySnapshot = await species.where(firebase.firestore.FieldPath.documentId(), operator, getRandomId()).limit(number).get();\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getDefinition = (term, glossary, required) => {\n\n    const terms = term.split(',');\n\n    let definitions = [];\n\n    for(let term of terms) {        \n        const definition = glossary.find(definition => definition.term.toLowerCase() === term.trim().toLowerCase() || definition.alt && definition.alt.toLowerCase() === term.trim().toLowerCase());\n        definitions.push(definition);\n    };\n    \n    return definitions.filter(definition => definition);\n};\n\nconst getTraitDefinitions = (glossary, required, trait) => {\n    \n    const traits = glossary.filter(entry => entry.trait).filter(entry => entry.trait.toLowerCase() === trait.toLowerCase());\n\n    return new Promise(resolve => resolve(traits));\n};\n\nconst addTaxon = async props => {\n\n    const { language, taxon } = props;\n  \n    let docRef;\n  \n    try {\n        docRef = await db.collection(`taxa_en`).add(taxon);\n        return 'Taxon saved.';\n    } catch(e) {\n      // logAPIError(e, 'addTaxon');\n    }\n  \n    return docRef;\n};\n\nconst getSpeciesInParallel = async species => {\n\n    try {\n        return Promise.all(species.map(sp => {                    \n            return firestore.getSpeciesByName(sp.name).then(async item => {\n                return await {                         \n                    ...item, description: sp.description || '', time: sp.time || 0, questionIds: sp.questionIds, quickId: sp.quickId || ''\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      // logAPIError(e, 'getSpeciesInParallel');\n    }\n};\n\nconst getSpeciesByNameInParallel = async itemNames => {\n    try {\n        return Promise.all(itemNames.map(name => {                    \n            return firestore.getSpeciesByName(name).then(async item => {\n                return await {                         \n                    ...item\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      // logAPIError(e, 'getSpeciesByNameInParallel');\n    }\n};\n\n// const getQuestionById = (id, name) => {\n\n//     return new Promise(resolve => resolve(questions.map(q => {\n//         if(parseInt(q.id) === parseInt(id)) {\n//             return {\n//                 ...q,\n//                 name: name\n//             }\n//         }\n//     })));\n// };\n\n\nconst addCollection = async (collection, user) => {\n\n    if(!user) return;\n\n    const collectionRef = await updateCollection(collection);\n\n    if(collectionRef) return;\n    \n    collection.user = user;\n\n    let docRef = null;\n  \n    try {\n        docRef = await db.collection('collections').add(collection);\n    } catch(e) {\n      // logAPIError(e, 'addCollection');\n    }\n  \n    return docRef;\n  };\n\n  const updateCollection = async collection => {\n\n    try {\n        collection.items = []; // we don't want to update items as we have the info we need in species; the rest we get at runtime\n\n        let docRef = null;\n\n        const querySnapshot = await db.collection(\"collections\").where(\"name\", \"==\", collection.name).get();\n        \n        querySnapshot.forEach(function(doc) {\n            docRef = doc.ref;\n        });\n\n        if(docRef) {\n            await docRef.update(collection);\n        }\n\n        return { message: 'Success', success : true };\n\n    } catch(e) {\n      // logAPIError(e, 'updateCollection');\n      return { message: 'Failure', details: e.message, success : false };\n    }\n\n};\n  \n  const getCollectionsWhere = async props => {\n  \n    const { key, operator, value, limit } = props;\n  \n    const collectionRef = limit\n      ? db.collection('collections').where(key, operator, value).limit(limit)\n        : key\n            ? db.collection('collections').where(key, operator, value)\n            : db.collection('collections');\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const getCollections = async => {\n    return getCollectionsWhere({});\n  };\n\n  const addQuestion = async question => {\n\n    let docRef;\n  \n    try {\n        docRef = await db.collection('questions').add(question);\n    } catch(e) {\n      // logAPIError(e, 'getCollectionsWhere');\n    }\n  \n    return docRef;\n  };\n  \n  const getQuestionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`questions`).where(key, operator, value)\n            : db.collection(`questions`);\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const addDefinition = async definition => {\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n\n    let docRef;\n\n    if(querySnapshot.empty) {\n\n        try {\n            docRef = await db.collection('glossary').add(definition);\n        } catch(e) {\n          // logAPIError(e, 'getQuestionsWhere');\n        }\n      \n        return docRef;        \n\n    } else {\n        throw 'That definition already exists!';\n    }\n\n  };\n  \n  const getDefinitionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`glossary`).where(key, operator, value)\n            : db.collection(`glossary`);\n\n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push({ ...doc.data(), id: doc.id });\n    });\n  \n    return docs;\n  };\n\n  const getDefinitionById = async id => {\n    return db.collection('glossary').doc(id).get().then(data => {\n        return { ...data.data(), id: data.id };\n    });\n  };\n\n  const getBatchDefinitionsById = async ids => {\n\n    const terms = [];\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(ids.map(async id => {\n\n                const term = await getDefinitionById(id);\n\n                terms.push(term);\n\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return terms;\n\n    } catch (e) {\n      // logAPIError(e, 'getBatchDefinitionsById');\n    }\n  }\n\n  const getDefinitionsByTaxa = taxa => {\n      return getDefinitionsWhere({\n        key: 'taxon',\n        operator: 'in', \n        value: taxa\n    });\n  };\n\n  const updateDefinition = async definition => {\n\n    let docRef;\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n    \n    querySnapshot.forEach(function(doc) {\n        docRef = doc.ref;\n    });\n\n    return await docRef.update(definition);\n  };\n\nexport const firestore = {\n\n    getSpecies,\n    getSpeciesNames,\n    getTaxaNames,\n    getSpeciesByName,\n    getSpeciesByIconicTaxon,\n    getFamiliesByIconicTaxon,\n    getTaxonByName,\n    getTraitsBySpeciesName,\n    getTraitsByTaxonName,\n    getBirdsong,\n    // getImage,\n    getTraitValues,\n    getRandomSpecies,\n    getDefinition,\n    getSpeciesInParallel,\n    getSpeciesByNameInParallel,\n    getCollections,\n    getCollectionsWhere,\n    getQuestionsWhere,\n    \n    addSpecies,\n    addTraits,\n    addSpeciesRelationship,\n    addPhotos,\n    addTaxon,\n    addCollection,\n    addQuestion,\n    addDefinition,\n    \n    updateSpecies,\n    updateSpeciesNames,\n    updateCollection,\n    updateDefinition,\n  \n    deleteSpeciesByName,\n    deleteSpeciesTraitField,\n\n    getTraitDefinitions,\n    // getQuestionById,\n    getDefinitionsWhere,\n    getDefinitionsByTaxa,\n    getDefinitionById,\n    getBatchDefinitionsById\n};\n\nconst getRandomId = () => {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let autoId = '';\n    for (let i = 0; i < 20; i++) {\n        autoId += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return autoId;\n};","export const firebaseConfig = {\n    apiKey: \"AIzaSyCA5oDmWevmZy2Ginb9eKcIe72Titk7szM\",\n    authDomain: \"snapdragon-222014.firebaseapp.com\",\n    databaseURL: \"https://snapdragon-222014.firebaseio.com\",\n    projectId: \"snapdragon-222014\",\n    storageBucket: \"snapdragon-222014.appspot.com\",\n    messagingSenderId: \"947213844747\",\n    appId: \"1:947213844747:web:97c1a5e664a670de\"\n};\n","import { firestore } from 'api/firebase/firestore';\n\nexport const getLookalikeTests = async itemsInThisRound => {\n\n    const init = async () => {\n\n        if(itemsInThisRound === undefined) return new Promise(resolve => resolve([]));\n\n        return Promise.all(itemsInThisRound.map(async item => {\n            \n            const { question, answers, overrides } = await getLookalikeTest(item);\n\n            if(!question) return new Promise(resolve => resolve({}));\n\n            return {\n                item,\n                question,\n                answers,\n                overrides\n            }\n        }));\n    }\n\n    const tests = await init();\n\n    return tests;\n}\n\nexport const getItemLookalikes = async item => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return {};\n\n    const lookaliketraits = item.traits['lookalikes'];\n\n    if(!lookaliketraits) return new Promise(resolve => resolve([]));\n\n    let lookalikes = lookaliketraits.map(trait => trait.lookalike.name);\n\n    if(lookalikes.length === 0) return {};\n\n    // check current collection first?\n\n    const getLookalikes = async () => {\n        return Promise.all(lookalikes.map(async name => {\n            return await firestore.getSpeciesByName(name);\n        })\n    )};\n    \n    lookalikes = await getLookalikes();\n    lookalikes = lookalikes.filter(lookalike => lookalike);\n\n    return lookalikes;\n};\n\nconst getLookalikeTest = item => {\n\n    const init = async () => {\n\n        const lookalikes = await getItemLookalikes(item);\n\n        const question = lookalikes.length > 0 ? item.name : null;\n        const answers = [ question, ...lookalikes.map(item => item.name) ];\n\n\n        return { question, answers, overrides : { question: 'Avoid look-alikes', help: '(Pick one correct image)', binomial: 'Latin name', vernacularName: 'Common name', trait: { name: 'lookalikes', lookalikes } } };\n    };\n\n    return init();\n};\n","import { contains } from 'ramda';\n\nexport const iconicTaxa = {\n\n    // kingdom\n    FUNGI: 'Fungi',\n    PLANTAE: 'Plants',\n\n    // phlyum\n    // MOLLUSCA: 'Mollusks',\n\n    // class\n    AVES: 'Birds',\n    AMPHIBIA: 'Amphibians',\n    REPTILIA: 'Reptilians',\n    MAMMALIA: 'Mammals',\n    INSECTA: 'Insects',\n    // ACTINOPTERYGII: 'Ray-finned fishes',\n    ARACHNIDA: 'Arachnids',\n\n    //order\n    LEPIDOPTERA: 'Lepidoptera'\n};\n\nexport const matchTaxonKey = (taxonomy, iconicTaxaKeys) => {\n    let taxon = { rank: '', value: '' };\n    if(!taxonomy) return taxon;\n    if(taxonomy.order && contains(taxonomy.order.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'order', value: taxonomy.order.toLowerCase() };\n    if(taxon.value === '' && taxonomy.class && contains(taxonomy.class.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'class', value: taxonomy.class.toLowerCase() };\n    if(taxon.value === '' && taxonomy.kingdom && contains(taxonomy.kingdom.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'kingdom', value: taxonomy.kingdom.toLowerCase() };\n\n    return taxon;\n}\n\nexport const matchTaxon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return false;\n    let iconicTaxaKeys = Object.keys(iconicTaxa).map(key => key.toLowerCase());\n    const taxon = matchTaxonKey(taxonomy, iconicTaxaKeys);\n    return taxon;\n};\n\nexport const findRankByIconicTaxon = (taxonomy, iconicTaxon) => {\n    return Object.keys(taxonomy).find(key => taxonomy[key].toLowerCase() === iconicTaxon.toLowerCase());\n};\n\nexport const matchIcon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return '';\n    const rank = matchTaxon(taxonomy, iconicTaxa).value;\n    if(!rank) return ''\n    return matchRank(rank);\n}\n\nexport const matchRank = rank => {\n    let icon;\n    switch(rank.toLowerCase()) {\n        case 'aves':\n            icon = 'fas fa-dove';\n            break;\n        case 'lepidoptera':\n            icon = 'fas fa-barcode';\n            break;\n        case 'amphibia':\n            icon = 'fas fa-frog';\n            break;\n        case 'mammalia':        \n        case 'actinopterygii':\n            icon = 'fas fa-paw';\n            break;\n        case 'reptilia':\n            icon = 'fas fa-registered';\n            break;\n        case 'insecta':\n        case 'arachnida':\n            icon = 'fas fa-bug';\n            break;\n        case 'fungi':\n            icon = './static/icons/mushroom.svg';\n            break;\n        case 'plantae':\n            icon = 'fas fa-leaf';\n            break;\n    }\n    return icon;\n}","import { contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nexport const getDefinitionTests = itemsInThisRound => {\n    \n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        return getDefinitionTest(item);\n\n    });\n\n    return tests;\n};\n\nconst getDefinitionTest = async item => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const number = config.isPortraitMode ? 4 : 4;\n\n    const taxon = matchTaxon(item.taxonomy, iconicTaxa).value;\n\n    let definitions = glossary.filter(definition => contains(definition.taxon, [ taxon, 'common' ]));\n\n    definitions = utils.shuffleArray(definitions);\n\n    const term = item.terms \n                    ? utils.shuffleArray(item.terms)[0] \n                    : item.genus\n                        ? item.genus.terms\n                            ? item.genus.terms[collection.itemIndex] \n                                ? item.genus.terms[collection.itemIndex] \n                                    : item.family\n                                    ? item.family.terms\n                                        ? utils.shuffleArray(item.family.terms)[0]\n                                        : null\n                                    : null\n                            : null\n                        : null;\n                    \n\n    const definition = !!term \n        ? definitions.find(definition => definition.term.toLowerCase() === term.toLowerCase())\n        : definitions[0];\n\n    const alternatives = take(number-1, take(number, utils.shuffleArray(definitions)).filter(d => d.term.toLowerCase() !== definition.term.toLowerCase())).map(d => utils.capitaliseFirst(d.definition));\n    \n    const question = definition.definition;\n    const answers = utils.shuffleArray([question, ...alternatives]);\n    const help = config.isLandscapeMode ? 'Select the correct answer' : 'Select correct answer';\n\n    return { question, answers, overrides : { question: definition.term, help, binomial: item.name, vernacularName: item.vernacularName } };\n};","import { contains, flatten } from 'ramda';\n\nimport { getTraitTests } from 'snapdragon-engine/bonus/tests/trait-test';\nimport { getBirdsongTests } from 'snapdragon-engine/bonus/tests/birdsong-test';\nimport { getLookalikeTests } from 'snapdragon-engine/bonus/tests/lookalike-test';\nimport { getDefinitionTests } from 'snapdragon-engine/bonus/tests/definition-test';\n\nconst getTests = async (collection, itemIndices, bonusLayouts, lessonName, levelName) => {\n\n    const itemsInThisRound = collection.items.map((item, index) => {\n        if(contains(index, itemIndices)) {\n            return { ...item, itemIndex: index }\n        } else return null;        \n    }).filter(item => item);\n\n    const addLayoutToTest = traitTests => {\n        const lessonReadyTests = traitTests.map(traitTest => {             \n            traitTest.itemIndex = traitTest.item ? traitTest.item.itemIndex : 0; \n            traitTest = { ...traitTest, ...layout, lessonName, levelName };            \n            return traitTest;\n        });\n        return lessonReadyTests;\n    };\n\n    const getTraitTypeTests = itemsInThisRound => {\n        return new Promise(resolve => resolve(getTraitTests(itemsInThisRound)));\n    };\n\n    const getTraitTypeBirdsongTests = (itemsInThisRound, collection) => {\n        return new Promise(resolve => resolve(getBirdsongTests(itemsInThisRound, collection)));\n    };\n\n    const getTraitTypeLookalikeTests = itemsInThisRound => {\n        return getLookalikeTests(itemsInThisRound);     \n    };\n\n    const getDefinitionTypeTests = itemsInThisRound => {\n        return getDefinitionTests(itemsInThisRound);\n    };\n\n    let traitTests = [], birdsongTests = [], lookalikeTests = [], definitionTests = [];\n\n    let layout = bonusLayouts.find(layout => layout.name === \"trait-property-match\");\n\n    if(layout) {\n\n        if(layout.types) {\n\n            const getResolvedPromises = async () => {\n            const promises = await layout.types.map(async type => {\n                switch(type) {\n                    case 'traits':\n                        return getTraitTypeTests(itemsInThisRound);\n                    case 'song':\n                        return getTraitTypeBirdsongTests(itemsInThisRound, collection);\n                    case 'lookalikes':\n                        return getTraitTypeLookalikeTests(itemsInThisRound);\n                    case 'definition':                        \n                        return getDefinitionTypeTests(itemsInThisRound);\n                }\n            });\n\n            const testGroups = await Promise.all(promises);\n\n            const tests = testGroups.map(group => {\n                group = group.filter(g => g.question);\n                return addLayoutToTest(group);\n            });\n\n            return tests;\n        };\n\n        traitTests = await getResolvedPromises();\n\n        } else {\n            traitTests = getTraitTypeTests(itemsInThisRound);\n            birdsongTests = getTraitTypeBirdsongTests(itemsInThisRound, collection);            \n            lookalikeTests = getTraitTypeLookalikeTests(itemsInThisRound);\n            definitionTests = getDefinitionTypeTests(itemsInThisRound);\n        }\n    }\n\n    return flatten(traitTests);\n};\n\nexport const bonusHandler = {\n    getTests\n};","import{ contains } from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\n\nconst getItemLayouts = async itemQuestions => {\n    if(!itemQuestions.questionIds) return new Promise(resolve => resolve(null));\n    // return Promise.all(itemQuestions.questionIds.map(async id => await firestore.getQuestionById(id, itemQuestions.name)));\n};\n\nconst getLayouts = async (collection, roundItemNames) => {\n\n    if(collection.species) {\n    \n        const species = collection.species.filter(sp => contains(sp.name, roundItemNames));\n        const speciesQuestions = species.filter(sp => sp.questions);\n\n        if(speciesQuestions.length > 0) {\n            return Promise.all(speciesQuestions.map(sq => sq.questions));\n        }\n\n        const itemsQuestions = collection.items.filter(i => contains(i.name, roundItemNames)).map(i => { return { name: i.name, questionIds: i.questionIds }});\n        \n        if(itemsQuestions) {\n            const promises = itemsQuestions.map(async (itemQuestions) => {\n                if(itemQuestions.questionIds) return await getItemLayouts(itemQuestions);\n            });\n            return await Promise.all(promises);\n        } else {\n            return new Promise(resolve => resolve(null));\n        }\n    } else {\n        return [];\n    }\n}\n\nexport const providerHandler = {\n    getLayouts\n};","import { store } from 'redux/store';\nimport { types } from 'redux/actions/action-types';\n\nconst makeActionCreator = action => {\n    return function (value, meta) {\n      return { \n        type: action,\n        data: value,\n        meta: meta\n      }\n    }\n  }\n\nconst changeLessonPlans = makeActionCreator(types.CHANGE_LESSON_PLANS);\nconst changeLessonPlan = makeActionCreator(types.CHANGE_LESSON_PLAN);\nconst nextLesson = makeActionCreator(types.NEXT_LESSON);\nconst updateScore = makeActionCreator(types.UPDATE_SCORE);\nconst updateTraitScore = makeActionCreator(types.UPDATE_TRAIT_SCORE);\nconst nextLayout = makeActionCreator(types.NEXT_LAYOUT);\nconst nexItem = makeActionCreator(types.NEXT_ITEM);\nconst endRevision = makeActionCreator(types.END_REVISION);\nconst updateHistory = makeActionCreator(types.UPDATE_HISTORY)\nconst newCollection = makeActionCreator(types.SET_ACTIVE_COLLECTION);\nconst updateCollection = makeActionCreator(types.UPDATE_COLLECTION);\nconst resetCollection = makeActionCreator(types.RESET_COLLECTION);\nconst updateCollections = makeActionCreator(types.UPDATE_COLLECTIONS);\nconst changeCollectionItems = makeActionCreator(types.UPDATE_COLLECTION_ITEMS);\nconst nextRound = makeActionCreator(types.NEXT_ROUND);\nconst nextLevel = makeActionCreator(types.NEXT_LEVEL);\nconst updateConfig = makeActionCreator(types.UPDATE_CONFIG);\nconst stopStartLesson = makeActionCreator(types.STOP_START_LESSON);\nconst selectCollection = makeActionCreator(types.SELECT_COLLECTION);\nconst traitValuesHandler = makeActionCreator(types.UPDATE_LANGUAGE);\nconst updateEnums = makeActionCreator(types.UPDATE_ENUMS);\nconst updateUser = makeActionCreator(types.UPDATE_USER);\nconst updateLesson = makeActionCreator(types.UPDATE_LESSON);\nconst saveLesson = makeActionCreator(types.SAVE_LESSON);\nconst removeSavedLesson = makeActionCreator(types.REMOVE_LESSON);\nconst updateVideoPlayer = makeActionCreator(types.UPDATE_VIDEO_PLAYER);\nconst createQuickFire = makeActionCreator(types.CREATE_QUICKFIRE);\nconst updateQuickFire = makeActionCreator(types.UPDATE_QUICKFIRE);\nconst createGlossary = makeActionCreator(types.CREATE_GLOSSARY);\nconst clickEvent = makeActionCreator(types.CLICK_EVENT);\n\nconst boundchangeLessonPlan = data => store.dispatch(changeLessonPlan(data));\nconst boundchangeLessonPlans = data => store.dispatch(changeLessonPlans(data));\nconst boundNextLesson = data => store.dispatch(boundAsyncNextLesson(data));\n\nconst boundAsyncNextLesson = func => {\n  return function(dispatch) {\n    return func.then(response => {\n      return dispatch(nextLesson(response));\n    })\n  }  \n};\n\nconst boundUpdateScore = data => store.dispatch(updateScore(data));\nconst boundUpdateTraitScore = data => store.dispatch(updateTraitScore(data));\nconst boundNextLayout = data => store.dispatch(nextLayout(data));\nconst boundNextItem = data => store.dispatch(nexItem(data,{delay:500}));\nconst boundEndRevision = data => store.dispatch(endRevision(data));\nconst boundUpdateHistory = data => store.dispatch(updateHistory(data));\nconst boundSetActiveCollection = data => store.dispatch(newCollection(data));\nconst boundUpdateCollection = data => store.dispatch(updateCollection(data));\nconst boundResetCollection = data => store.dispatch(resetCollection(data));\nconst boundUpdateCollections = data => store.dispatch(updateCollections(data));\nconst boundUpdateCollectionItems = data => store.dispatch(changeCollectionItems(data));\nconst boundNextRound = data => store.dispatch(nextRound(data));\nconst boundNextLevel = data => store.dispatch(nextLevel(data));\nconst boundUpdateConfig = data => store.dispatch(updateConfig(data));\nconst boundStopStartLesson = data => store.dispatch(stopStartLesson(data));\nconst boundSelectCollection = data => store.dispatch(selectCollection(data));\nconst boundUpdateLanguage = data => store.dispatch(traitValuesHandler(data));\nconst boundUpdateEnums = data => store.dispatch(updateEnums(data));\nconst boundUpdateUser = data => store.dispatch(updateUser(data));\nconst boundUpdateLesson = data => store.dispatch(updateLesson(data));\nconst boundSaveLesson = data => store.dispatch(saveLesson(data));\nconst boundRemoveSavedLesson = data => store.dispatch(removeSavedLesson(data));\nconst boundUpdateVideoPlayer = data => store.dispatch(updateVideoPlayer(data));\nconst boundCreateQuickFire = data => store.dispatch(createQuickFire(data));\nconst boundUpdateQuickFire = data => store.dispatch(updateQuickFire(data));\nconst boundCreateGlossary = data => store.dispatch(createGlossary(data));\nconst boundClickEvent = data => store.dispatch(clickEvent(data));\n\nexport const actions = {\n    boundchangeLessonPlans,\n    boundchangeLessonPlan,\n    boundNextLesson,\n    boundUpdateScore,\n    boundUpdateTraitScore,\n    boundNextItem,\n    boundNextLayout,\n    boundEndRevision,\n    boundUpdateHistory,\n    boundSetActiveCollection,\n    boundUpdateCollection,\n    boundResetCollection,\n    boundUpdateCollections,\n    boundUpdateCollectionItems,\n    boundNextRound,\n    boundNextLevel,\n    boundUpdateConfig,\n    boundStopStartLesson,\n    boundSelectCollection,\n    boundUpdateLanguage,\n    boundUpdateEnums,\n    boundUpdateLesson,\n    boundSaveLesson,\n    boundRemoveSavedLesson,\n    boundUpdateVideoPlayer,\n    boundUpdateUser,\n    boundCreateQuickFire,\n    boundUpdateQuickFire,\n    boundCreateGlossary,\n    boundClickEvent\n};","import{ contains } from 'ramda';\n\nconst show = (elem) => {\n    if(!elem) return;\n\telem.classList.add('is-visible');\n};\n\nconst hide = (elem) => {\n    if(!elem) return;\n\telem.classList.remove('is-visible');\n};\n\nconst toggle = (elem) => {\n    if(!elem) return;\n\telem.classList.toggle('is-visible');\n};\n\nconst hasClass = (elem, className) => {\n    if(!elem) return false;\n    const classArray = [ ...elem.classList ];\n    return contains(className, classArray);\n};\n\nconst removeClass = (elem, className) => {\n    if(hasClass(elem, className)) {\n        elem.classList.forEach(c => {\n            if(c === className) {\n                elem.classList.remove(c);\n            }\n        });\n    }\n};\n\nexport const elem = {\n    show, hide, toggle, hasClass, removeClass\n};","import{ isEmpty, compose, symmetricDifference, contains, clone } from 'ramda';\n\nexport const cleanText = text => {\n    return text.term ? text.term.toLowerCase() : text.toLowerCase().replace(/ /g,'');\n};\n\nexport const isAnswerEqualToQuestion = (question, answer) => {\n\n\n    const eqValues = compose(isEmpty, symmetricDifference);\n\n    return eqValues(cleanText(question), cleanText(answer));\n};\n\nconst isAnswerCorrect = score => {\n\n    let isCorrect;\n\n    if(score.answeredIndex) {\n        return parseInt(score.answeredIndex) === score.answerIndex;\n    }\n\n    score.answer = score.answer.trim();\n\n    isCorrect = isAnswerEqualToQuestion(score.question, score.answer);\n\n    // score.clue = score.clue ? score.clue.toLowerCase().replace(/ /g,'') : null;\n\n    // isCorrect = score.clue ? score.answer.indexOf(score.clue) > -1 : isCorrect;\n\n    switch(score.taxon) {\n        case 'vernacular':\n            score.names = score.names.map(name => name.toLowerCase());\n            if(score.names && score.names.length > 0) {\n                const alternativeIsCorrect = contains(score.answer, score.names);                \n                if(!isCorrect && alternativeIsCorrect) score.alternativeAccepted = true;\n                isCorrect = isCorrect || alternativeIsCorrect;\n            }\n        break;\n    }\n    return isCorrect;\n};\n\nconst isTraitAnswerCorrect = score => {\n    const doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n    return doArraysHaveSameValues(score.answer, score.question);\n};\n\nexport const markTest = test => {\n\n    const score = clone(test);\n\n    score.success = score.trait ? isTraitAnswerCorrect(score) : isAnswerCorrect(score);\n    score.colour  = score.success ? 'snap-success' : 'snap-alert';\n    \n    return score;\n};","import { Enum } from 'enumify';\n\nclass lessonState extends Enum {};\nlessonState.initEnum([\n    'CREATE_LESSON',\n    'BEGIN_LESSON',\n    'BEGIN_OR_RESUME_LESSON',\n    'PAUSE_LESSON', \n    'RESUME_LESSON',\n    'NEXT_ROUND',\n    'BEGIN_INTRO',\n    'REVIEW_SUMMARY',\n    'UPDATE_COLLECTION', // required? use set active collection\n    'GET_LESSON_PROGRESS',\n    'ADD_SPECIES_TO_COLLECTION',\n    'SAVE_LESSON_PROGRESS',\n    'RENDER_SPECIES_LIST',    \n]);\n\nclass navigation extends Enum {};\nnavigation.initEnum([\n    'LANDSCAPE_HOME', \n    'SETTINGS', \n    'PORTRAIT_HOME',\n    'GLOSSARY', \n    'EMAIL',\n    'INFO',\n    'LOGIN',\n    'LANGUAGE'\n]);\n\nclass taxon extends Enum {};\ntaxon.initEnum([\n    'KINGDOM',\n    'PHYLUM',\n    'ORDER',\n    'FAMILY',\n    'GENUS',\n    'SPECIES',\n]);\n\nclass guideOption extends Enum {};\nguideOption.initEnum([\n    'LOCATION',\n    'INAT',\n    'PICKER'\n]);\n\nclass nextStep extends Enum {};\nnextStep.initEnum([\n    'NEXT_ITEM',\n    'NEXT_LAYOUT',\n    'NEXT_LESSON',\n    'NEXT_ROUND',\n]);\n\nclass quickFireType extends Enum {};\nquickFireType.initEnum([\n    'DEFINITION',\n    'REVERSE_DEFINITION',\n    'TEXT_ENTRY'\n]);\n\nclass quickFireStep extends Enum {};\nquickFireStep.initEnum([\n    'GLOSSARY',\n    'FILTERS',\n    'QUESTIONS'\n]);\n\nclass userEvent extends Enum {};\nuserEvent.initEnum([\n    'DEFAULT',\n    'START_LESSON',\n    'START_LESSON_REVIEW',\n    'START_TERM_REVIEW',\n    'NAVIGATE_HOME',\n    'EDIT_LESSON',\n    'TOGGLE_SPECIES_LIST'\n]);\n\nexport const enums = {\n    lessonState,\n    navigation,\n    taxon,\n    guideOption,\n    nextStep,\n    quickFireType,\n    quickFireStep,\n    userEvent\n};","import{ clone } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nconst getIsReviewingLesson = (userAction, config) => {\n\n    let isNotReviewingLesson = true;\n  \n    if (userAction) {\n        if (config.isLandscapeMode) {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name || userAction.name === enums.userEvent.TOGGLE_SPECIES_LIST.name);\n        }\n        else {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name);\n        }\n    }\n  \n    return !isNotReviewingLesson;\n};\n\nconst overrideLesson = (userAction, config) => {\n    return !getIsReviewingLesson(userAction, config);\n};\n\nconst purgeLesson = () => {\n    persistor.purge();\n    window.location.reload(true);\n};\n\nconst clearGuide = () => {\n    const config = store.getState().config;\n    config.guide = initialConfig.guide;\n    actions.boundUpdateConfig(config);\n};\n\nconst getCollectionToLoad = (currentCollection, collections, selectedLessonCollectionId)  => {\n\n    const id = parseInt(selectedLessonCollectionId);\n  \n    let resume = true;\n        resume = resume && currentCollection.id > 0;\n        resume = resume && currentCollection.id === id;\n  \n    const collection = resume ? currentCollection : collections.find(c => c.id === id);\n  \n    return collection;\n};\n\nconst getLatestCounter = collection => { \n    const { counter, lessons } = store.getState();\n    const log = counter.log;\n    const index = log ? log.index : \n                lessons.find(l => l.collection.id === collection.id)\n                    ? lessons.find(l => l.collection.id === collection.id).counter.index\n                    : counter.index;\n  \n    return { index };\n};\n\nconst getUserLessonState = (lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter) => {\n\n    let restoredLesson = lessons.find(l => l.name === collectionToLoad.name);\n\n    let lesson;\n  \n    if(restoredLesson) {\n      lesson = restoredLesson;\n      if(lesson.lesson.isNextRound) {\n        lesson.score = clone(progressState.score);\n      }\n    } else {\n      lesson = { \n        collection: collectionToLoad, \n        counter: { ...counter, index: 0 },\n        lesson: savedLesson || { currentRound: 1, rounds: 0, isNextRound: true },\n        layout: null,\n        history: null,\n        score: clone(progressState.score)\n      };\n    }\n\n    if(newLessonCounter) {\n        lesson.counter.isCustomLessonPausedOverride = true;\n    }\n\n    return lesson;\n};\n  \nexport const lessonStateHelper = {\n    getIsReviewingLesson,\n    overrideLesson,\n    purgeLesson,\n    clearGuide,\n    getCollectionToLoad,\n    getLatestCounter,\n    getUserLessonState\n};","// https://github.com/jcgregorio/stamp/wiki\n\nvar Stamp = Stamp || {};\n\n(function(ns) {\n\n  ns.Context = function() {\n  };\n\n  ns.Context.prototype.import = function(id) {\n    return document.importNode(this.doc.querySelector('#'+id).content, true);\n  };\n\n  var re = /{{\\s([\\w\\.\\^]+)\\s}}/g;\n\n  function filterState(address, state) {\n    var mystate = state;\n    for (var i = 0, len = address.length; i < len; i++) {\n      var a = address[i];\n      if (a in mystate) {\n        mystate = mystate[a];\n      } else if (mystate.hasAttribute && mystate.hasAttribute(a)) {\n        mystate = mystate.getAttribute(a);\n      } else {\n        throw a + \" is not a valid property of \" + JSON.stringify(mystate);\n      }\n    }\n    return mystate;\n  }\n\n  function ssplice(str, index, count, add) {\n    return str.slice(0, index) + add + str.slice(index + count);\n  }\n\n  let match;\n  function addressOf(s) {\n    if ((match = re.exec(s)) != null) {\n      return match[1].split(\".\");\n    } else {\n      return null;\n    }\n  }\n\n  function expandString(s, state) {\n    var match;\n    var matches = [];\n    re.exec(\"\");\n    while ((match = re.exec(s)) != null) {\n      matches.push(match);\n    }\n\n    for (var i = matches.length - 1; i >= 0; i--) {\n      match = matches[i];\n      var address = match[1].split(\".\");\n      var m = filterState(address, state);\n      s = ssplice(s, match.index, match[0].length, m);\n    }\n    if (matches.length) {\n      return s;\n    }\n    return null;\n  }\n\n  function cloneAllNodes(a) {\n    var clones = [];\n    for (var i = 0, len = a.length; i < len; i++) {\n      if (a[i].nodeName == \"TEMPLATE\") {\n        clones.push(a[i].content.cloneNode(true));\n      } else {\n        clones.push(a[i].cloneNode(true));\n      }\n    }\n    return clones;\n  }\n\n  function appendChildren(ele, nodes) {\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      ele.appendChild(nodes[i]);\n    }\n  }\n\n  function removeChildren(ele) {\n    ele.innerHTML = \"\";\n  }\n\n  function replaceChildren(ele, nodes) {\n    ele.innerHTML = \"\";\n    appendChildren(ele, nodes);\n  }\n\n  function expand(ele, state) {\n    if (ele.nodeName === \"#text\") {\n      m = expandString(ele.textContent, state);\n      if (m != null) {\n        ele.textContent = m;\n      }\n      return ele;\n    }\n    if (!Array.isArray(ele)) {\n      ele = [ele];\n    }\n    for (var j = 0, len = ele.length; j < len; j++) {\n      var e = ele[j];\n      var processChildren = true;\n      if (e.nodeName === \"#text\") {\n        m = expandString(e.textContent, state);\n        if (m != null) {\n          e.textContent = m;\n        }\n      } else {\n        if (e.attributes != undefined) {\n          for (var i = e.attributes.length-1; i >= 0; i--) {\n            var attr = e.attributes[i];\n            if (attr.name.indexOf('data-repeat') === 0) {\n              processChildren = false;\n              var parts = attr.name.split('-');\n              if (parts.length !== 3 && parts.length !== 4) {\n                throw \"Repeat format is data-repeat-<name>[-<iterName>]. Got \" + attr.name;\n              }\n              var name = parts[2];\n              var iterName = parts[3];\n              var tpl = [];\n              while (e.firstChild) {\n                tpl.push(e.removeChild(e.firstChild));\n              }\n              var address = [attr.value];\n              if (attr.value.indexOf(\"}}\") !== -1) {\n                address = addressOf(attr.value);\n              }\n              if (address === null) {\n                throw attr.value + \" doesn't contain an address.\";\n              }\n              var childState = filterState(address, state);\n              var instanceState = {\n                \"^\": state,\n              };\n              if (Object.prototype.toString.call( childState) === '[object Array]') {\n                iterName = iterName || \"i\";\n                for (var k = 0; k < childState.length; k++) {\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] =  childState[k];\n                  instanceState[iterName] = k;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              } else {\n                iterName = iterName || \"key\";\n                var keys = Object.keys(childState).sort();\n                for (var m = 0; m < keys.length; m++) {\n                  var key = keys[m];\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] = childState[key];\n                  instanceState[iterName] = key;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              }\n              e.removeAttribute(attr.name);\n            } else {\n              m = expandString(attr.value, state);\n              if (m != null) {\n                var name = attr.name;\n                if (name.charAt(name.length-1) == \"-\") {\n                  e.removeAttribute(attr.name);\n                  e.setAttribute(attr.name.slice(0, -1), m);\n                } else {\n                  attr.value = m;\n                }\n              }\n            }\n          }\n        }\n      }\n      if (processChildren) {\n        var childEle = e.firstChild;\n        while (childEle != null) {\n          var nextSibling = childEle.nextSibling;\n          if (childEle.nodeName == \"TEMPLATE\") {\n            var replacement = expand(childEle.content.cloneNode(true), state);\n            while (replacement[0].childNodes.length > 0) {\n              e.insertBefore(replacement[0].firstChild, childEle);\n            }\n            e.removeChild(childEle);\n          } else {\n            expand(childEle, state);\n          }\n          childEle = nextSibling;\n        }\n      }\n    }\n    return ele;\n  };\n\n  function expandInto(target, ele, state) {\n    replaceChildren(target, expand(ele, state));\n  }\n\n  ns.appendChildren = appendChildren;\n  ns.expand = expand;\n  ns.expandInto = expandInto;\n})(Stamp);\n\nexport const renderTemplate = (context, content, parent, clone) => {\n    const contentClone = clone || document.importNode(content, true);    \n    var ctx = new Stamp.Context();\n    var expanded = Stamp.expand(contentClone, context);\n    Stamp.appendChildren(parent, expanded);\n};","import { scaleImage } from 'ui/helpers/image-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport rightsAttributionTemplate from 'ui/screens/common/rights-attribution-template.html';\n\nexport const handleRightsAttribution = image => {\n\n    const template = document.createElement('template');\n          template.innerHTML = rightsAttributionTemplate;\n\n    let text;\n\n    switch(image.license) {\n        case 'http://creativecommons.org/licenses/publicdomain/':\n            text = 'CC PD';\n            break;\n        case 'http://creativecommons.org/licenses/by/2.0/':        \n            text = 'CC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/2.0/':\n            text = 'CC BY SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/2.0/':\n            text = 'CC BY NC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/2.0/':\n            text = 'CC BY NC-SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by/3.0/':        \n            text = 'CC 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/3.0/':\n            text = 'CC BY SA 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/3.0/':\n            text = 'CC BY NC-SA 3.0';\n            break;        \n        case 'http://creativecommons.org/licenses/by/4.0/':        \n            text = 'CC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/4.0/':\n            text = 'CC BY NC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/4.0/':\n            text = 'CC BY NC-SA 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/4.0/':\n            text = 'CC BY SA 4.0';\n            break;\n        default: \n            text = image.license || '';\n            break;\n    };\n\n    const licence = { text, url: image.medium };\n    const title = image.title;\n    const author = image.rightsholder || image.rightsHolder || 'Public domain';\n    const source = image.source || '';\n    const identifier = `${image.itemName.replace(' ', '_')}`;\n    const large = image.large || scaleImage(image).large;\n    \n    let parent = document.querySelector(`.js-attribution-layer.${identifier}`);\n        parent = parent || document.querySelector(`.js-attribution-layer`);\n        parent.innerHTML = '';\n\n    renderTemplate({title,author,source,licence,large}, template.content, parent);\n\n    const rightsAttribution = parent.querySelector('.js-rights-attribution .js-copyright');\n    const rightsLink = parent.querySelector('.js-rights-link .js-copyright');\n    const indicators = document.querySelector(`.carousel-indicators`);\n\n    const showAttribution = event => {\n        rightsAttribution.parentElement.classList.add('hide-important');\n        rightsLink.parentElement.classList.remove('hide-important');\n        indicators.classList.remove('hide-important');\n        rightsLink.removeEventListener('click', showLink), true;\n        rightsLink.addEventListener('click', showLink, true);\n    };\n\n    rightsAttribution.removeEventListener('click', showAttribution, true);\n    rightsAttribution.addEventListener('click', showAttribution, true);\n\n    const showLink = event => {\n        rightsAttribution.parentElement.classList.remove('hide-important');\n        rightsLink.parentElement.classList.add('hide-important');\n        indicators.classList.add('hide-important');\n        rightsAttribution.removeEventListener('click', showAttribution, true);\n        rightsAttribution.addEventListener('click', showAttribution, true);\n    };\n\n    rightsLink.removeEventListener('click', showLink), true;\n    rightsLink.addEventListener('click', showLink, true);\n\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { scaleImage, imageMatch, imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { handleRightsAttribution } from 'ui/screens/common/rights-attribution';\n\nimport imageSliderTemplate from 'ui/screens/common/image-slider-template.html';\n\nconst selectActiveImage = (image, parent, config) => {\n    parent.querySelectorAll('.carousel-item').forEach(i => {\n        const elemSrc = i.querySelector('img').dataset;\n        if(imageMatch(elemSrc, image.dataset || image)) {\n            i.classList.add('active');\n            return;\n        }\n    });    \n    \n    const activeNode = parent.querySelector('.imageSlider.carousel .carousel-item.active img'); \n    \n    const indicators = document.querySelectorAll('.carousel-indicators li');\n          indicators.forEach(i => {\n              if(i.dataset && activeNode.dataset && i.dataset.slideTo === activeNode.dataset.index) {\n                  i.classList.add('active');\n              }\n          });\n\n    let img = image.dataset || image;\n    img.title = img.title || img.itemName;\n    img = scaleImage(img);\n    handleRightsAttribution(img);\n\n    return img;\n};\n\nconst carouselControlHandler = (event, parentScreen = document) => {\n\n    setTimeout(() => {\n\n        const activeNode = parentScreen.querySelector(`${event.target.dataset.slider} .carousel-item.active img`);\n        const image = activeNode.dataset;   \n        \n        handleRightsAttribution(image);    \n\n    }, 750);\n};\n\nexport const imageSlider = sliderArgs => {\n\n    const { config, images, parent, image, parentScreen = document, identifier = '' } = sliderArgs;\n\n    const slider = document.createElement('template');\n          slider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n\n    images.forEach((img, i) => {\n        img.index = i;\n        img.rightsHolder = img.rightsHolder || 'Public domain';\n        img.provider = img.provider || 'eol';\n        img = scaleImage(img);\n    });\n\n    snapLog('imageSlider, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images, identifier }, slider.content, parent);\n\n    let next = document.querySelector(`#imageSlider_${identifier} .carousel-control-next-icon`);\n    let prev = document.querySelector(`#imageSlider_${identifier} .carousel-control-prev-icon`);\n\n    if(config.isPortraitMode) {        \n        next.classList.add('concealed');\n        prev.classList.add('concealed');\n    }\n\n    setTimeout(() => {\n        selectActiveImage(image || images[0], parent, config);        \n    },250);\n\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-prev`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-next`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n\n    document.addEventListener('swiped-left', function(e) {\n        next.click();\n    });\n\n    document.addEventListener('swiped-right', function(e) {\n        prev.click();\n    });\n};\n\nexport const imageSideBySlider = (slides, parent, config) => {\n\n    const sideBySlider = document.createElement('template');\n          sideBySlider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n    parent.classList.add('slideBySliderContainer');\n\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(3)`).innerHTML = '';\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(4)`).innerHTML = '';\n\n    slides.forEach((slide, index) => {\n\n        const identifier = slide.id.replace(' ', '_') || index + 1;\n\n        const header = document.querySelectorAll(`#imageComparisonModal .js-modal-image-title > span`)[index];\n              header.innerHTML = `<span class=\"common-name\">${slide.images[0].itemCommon}</span><span class=\"latin-name\">${slide.images[0].itemName}</span>`;\n        const item = { name: slide.images[0].itemName, itemCommon: slide.images[0].itemCommon, images: slide.images };\n        const images = prepImagesForCarousel(item, config, imageUseCases.CAROUSEL);\n        \n        snapLog('imageSideBySlider, image medium values:', images.map(i => i.medium));\n\n        renderTemplate({ images, identifier }, sideBySlider.content, parent);\n        \n        const activeNode = document.querySelector(`#imageSlider_${identifier} .carousel-item`);\n              activeNode.classList.add('active');\n        handleRightsAttribution(images[0]);\n\n        const originalImageLink = document.querySelector(`#imageSlider_${identifier} .js-expand`);\n        if(originalImageLink) originalImageLink.classList.add('hide-important');\n    });\n};","import{ clone } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\n\nconst stripImageUrlOfScaleAndPrefix = img => {  \n    const prefix = img.provider === 'inat' ? 'https://static.inaturalist.org/photos/' : 'https://content.eol.org/data/media/';\n    if(!img.url || typeof img.url === 'object') return '';\n    let part = img.url.replace('.260x190.jpg', '');\n        part = part.replace('.98x68.jpg', '');\n        part = part.replace('.jpg', '');\n        part = part.replace(prefix, '');\n\n    if(img.provider === 'inat') {\n      part = part.split('?')[0];\n    }\n\n    return part;\n};\n\nexport const imageUseCases = {\n    SPECIES_LIST: 'Species list',\n    SPECIES_CARD: 'Species card',\n    TAXON_CARD: 'Taxon card',\n    SPECIES_SPECIMENS: 'Species specimens',\n    NON_TAXON_CARD: 'Non-taxon card',\n    VISUAL_MATCH: 'Visual match',\n    MIXED_SPECIMENS: 'Mixed specimens',\n    CAROUSEL: 'Carousel',\n    TEXT_ENTRY: 'Text entry',\n    ACTUAL_SIZE: 'Actual size',\n    SPECIES_GRID: 'Species grid'\n}\n\nexport const denormaliseImages = images => {\n    const denormalisedImages = images.map(image => {\n        image.photographersName = image.photographer ? image.photographer.full_name || '' : '';\n        return image;\n    });\n    return denormalisedImages;\n};\n\nexport const imageMatch = (src1, src2) => {\n    if(!src2) return false;\n    src1 = stripImageUrlOfScaleAndPrefix(src1);\n    src2 = stripImageUrlOfScaleAndPrefix(src2);\n    const isActiveImage = src1 === src2;\n    return isActiveImage;\n};\n\nexport const prepImageForCarousel = (image, index, item, config, useCase) => {\n    let img = { \n        index: index + 1, \n        ...image,\n        url: scaleImage(image, useCase, config).medium,\n        // large: scaleImage({ url:image.src }).large,\n        itemName: item.name,\n        itemCommon: item.itemCommon,\n        rightsHolder: image.rightsHolder || '',\n        photographersName : image.photographer ? image.photographer.full_name || '' : '',\n        provider: image.provider || ''       \n    };\n    if(image.src) {\n        img = { ...img, ...image.src, medium: image.medium };\n    }\n    return img;\n};\n\nexport const prepImagesForCarousel = (item, config, useCase) => {\n    const images = item.images.map((image, index) => { \n        return prepImageForCarousel(image, index, item, config, useCase);\n    });\n    return images;\n};\n\nexport const scaleImage = image => {\n\n    if(!image.url) {\n        return image;\n    }\n\n    image.part = stripImageUrlOfScaleAndPrefix(image);\n\n    if(image.provider === 'inat') {\n        image.small = `https://static.inaturalist.org/photos/${image.part}`;\n        image.medium = image.part.replace('small', 'medium');\n        image.medium = `https://static.inaturalist.org/photos/${image.medium}`;\n        image.large = image.part.replace('small', 'large');\n        image.large = `https://static.inaturalist.org/photos/${image.large}`;\n        return image;\n    } else {\n        image.small = `https://content.eol.org/data/media/${image.part}.98x68.jpg`;\n        image.medium = `https://content.eol.org/data/media/${image.part}.260x190.jpg`;\n        image.large = `https://content.eol.org/data/media/${image.part}.jpg`;\n        return image;\n    }\n    \n};\n\nexport const modalImagesHandler = (images, item, collection, config, displayNameType) => {\n    images.forEach(image => {\n        modalImageHandler(image, item, collection, config, displayNameType);\n    });\n};\n\nconst handleImageSelectionFromList = (image, item, collection, config, displayNameType = 'binomial') => {\n\n    const parent = document.querySelector('#imageModal .js-modal-image');\n    const selectedItem = item || collection.items.find(item => item.name === image.dataset.itemName);\n    let images = clone(selectedItem.images.map((image, index) => {\n        selectedItem.vernacularName = itemProperties.getVernacularName(selectedItem, config);\n        image = scaleImage(image, imageUseCases.CAROUSEL, config);\n        return { ...image, itemName: selectedItem.name, itemCommon: selectedItem.vernacularName };\n    }));\n    images = denormaliseImages(images);\n    const selectedItemImage = selectedItem.images.find(i => imageMatch(i,image.dataset));\n    const selectedImage = { dataset: { ...image.dataset, ...selectedItemImage } };\n    imageSlider({ config, images, parent, image: selectedImage, identifier: selectedImage.dataset.itemName.replace(' ', '_') });\n    let displayName = '';\n    switch(displayNameType) {\n        case 'biomial':\n            displayName = selectedItem.name;\n            break;\n        case 'vernacular':\n            displayName = selectedItem.vernacularName;\n            break;\n        case 'withheld':\n            displayName = 'Species name withheld';\n            break;\n        default:\n            displayName = `<span>${selectedItem.vernacularName}</span> <span class=\"latin-name\">${selectedItem.name}</span>`;\n    }\n\n    document.querySelector('#imageModal .js-modal-image-title span:nth-child(1)').innerHTML = displayName;\n};\n\nexport const modalImageHandler = (image, item, collection, config, displayNameType = 'binomial') => {\n    image.addEventListener('click', e => {\n        if(!item) return;\n        handleImageSelectionFromList(image, item, collection, config, displayNameType);        \n    }, true);\n};\n","import { iconicTaxa, matchIcon, matchRank } from 'api/snapdragon/iconic-taxa';\n\nconst mushroomIcon = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg-icon>';\n\nexport const renderIcon = (taxonomy, rootNode) => {\n\n    if(taxonomy.kingdom.toLowerCase() === 'fungi') {\n\n        const iconicIconContainer = rootNode.querySelector('.js-iconic-icon');\n\n        iconicIconContainer.innerHTML = `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n\n    } else {\n\n        const iconicIcon = rootNode.querySelector('.js-iconic-icon i');\n\n        const classes = matchIcon(taxonomy, iconicTaxa).split(' ');\n\n        classes.forEach(c => iconicIcon.classList.add(c));   \n    }\n\n    return rootNode.querySelector('.js-iconic-icon');\n};\n\nexport const returnIcon = item => {\n\n    if(!item.taxonomy) return '';\n\n    if(item.taxonomy.kingdom.toLowerCase() === 'fungi') {\n        return `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n    } else {\n        return `<i class=\"small-icon ${matchIcon(item.taxonomy, iconicTaxa)}\"></i>`;\n    }\n};\n\nexport const returnTaxonIcon = taxon => {\n\n    if(taxon.toLowerCase() === 'fungi') {\n        return `<span class=\"iconic-taxa-categories-selected\">${mushroomIcon}</span>`;\n\n    } else {\n        return `<span><i class=\"small-icon ${matchRank(taxon)}\"></i></span>`;\n    }\n};","export const getBirdSong = (item, node, portrait) => {\n\n    if(item.taxonomy.class.toUpperCase() === 'AVES') {\n\n        const endpoint = `https://cors-anywhere.herokuapp.com/http://www.xeno-canto.org/api/2/recordings?query=${item.name} q:A`;\n\n        async function fetchAsync (endpoint) {\n\n            let response = await fetch(endpoint);\n            \n            let data = await response.json();\n            \n            return data;\n        }\n\n        const loadPlayer = id => {\n            const url = `https://www.xeno-canto.org/${id}/embed?simple=1`;\n            portrait ? node.dataset.src = url : node.src = url;\n            if(portrait) {\n                node.classList.remove('bird-song-icon-disabled');\n                node.classList.add('bird-song-icon');\n            } else {\n                node.parentElement.classList.add('bird-song-spacing');\n            }\n        };\n\n        const playerId = item.traits.song.value[0];\n            \n        if(playerId) {\n            loadPlayer(playerId);\n        } else {\n            fetchAsync(endpoint).then(data => {        \n                const recording = data.recordings[0];\n                loadPlayer(recording.id);\n            });\n        }\n    } else {\n        node.style.display = 'none';\n        document.querySelector('.bird-song').style.display = 'none';\n    }\n}","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageSideBySlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { firestore } from 'api/firebase/firestore';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\nimport visualComparisonTemplate from 'ui/screens/common/look-alikes-link-template.html';\n\nexport const lookalikeSpecies = (item, config, rootNode = document) => {\n    \n    const lookalikes = item.traits.lookalikes || item.traits['look-alikes'];\n\n    if(lookalikes) {\n        \n        const matchTemplate = document.createElement('template');\n              matchTemplate.innerHTML = visualComparisonTemplate;\n        const lookalikeParent = rootNode.querySelector('.js-lookalikes');\n\n        const slides = [];\n        const names = [];\n        const scientificNames = [];\n\n        let species;\n\n        async function renderLookalikes() {\n\n            const readyLookalikesForRendering = async () => {\n\n                species = [ ...lookalikes.map(lookalike => lookalike.lookalike), { name: item.name, description: lookalikes[0].description } ];\n\n                for (let lookalike of species) {\n\n                    const lookalikeItem = await firestore.getSpeciesByName(lookalike.name);\n\n                    if(!lookalikeItem) return;\n                    \n                    lookalikeItem.vernacularName = itemProperties.getVernacularName(lookalikeItem, config);\n                    names.push(lookalikeItem.vernacularName);\n                    scientificNames.push(lookalikeItem.name);\n    \n                    const images = lookalikeItem.images.map((img, index) => { \n\n                        const url = scaleImage({ url: img.url }, imageUseCases.CAROUSEL, config);\n\n                        return { \n                                index: index + 1, \n                                src: { ...img, url: url.medium },\n                                url: url.medium,\n                                itemName: lookalikeItem.name, \n                                itemCommon: lookalikeItem.vernacularName };\n                    });\n    \n                    slides.push({ id: lookalikeItem.name, images });\n                };\n            };\n\n            await readyLookalikesForRendering();\n\n            if(slides.length === 0) return;\n\n            lookalikeParent.innerHTML = '';\n\n            renderTemplate({slides, names: names.join(', ')}, matchTemplate.content, lookalikeParent);\n\n            const speciesComparisonLink = rootNode.querySelector('.js-compare-species-link');\n\n            speciesComparisonLink.classList.remove('hide');\n\n            const getTrait = async (itemName, parent) => {\n    \n                const item = await firestore.getSpeciesByName(itemName);\n                item.traits = await firestore.getTraitsBySpeciesName(item.name);\n                    \n                if(item.taxonomy.class.toLowerCase() === 'aves') {\n    \n                    if(item.traits && Object.keys(item.traits).length === 0) return;\n    \n                    const xcID = item.traits['song'].value;\n    \n                    if(!xcID) return;\n        \n                    const mp3 = await firestore.getBirdsong(xcID);\n    \n                    const template = document.createElement('template');\n                          template.innerHTML = audioMediaTemplate;\n                    \n                    renderTemplate({ mp3, title: item.name }, template.content, parent);\n                }\n            }\n    \n            speciesComparisonLink.addEventListener('click', () => {\n    \n                const parent = document.querySelector('#imageComparisonModal .js-modal-image');\n                            \n                imageSideBySlider(slides, parent, true, config);\n                    \n                species.forEach(lookalike => {\n                    const identifier = `.description_${lookalike.name.replace(' ', '_')}`;\n                    const description = document.querySelector(identifier);\n                          description.innerHTML = lookalike.description;                    \n                    getTrait(lookalike.name, document.querySelector(`${identifier} + div`));\n                });\n                \n            });\n        }\n\n        renderLookalikes();   \n    }\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { firestore } from 'api/firebase/firestore';\n\nimport linkedTaxaLookalikeTemplate from 'ui/screens/common/linked-taxa-lookalike-template.html';\nimport linkedTaxaRelationshipTemplate from 'ui/screens/common/linked-taxa-relationship-template.html';\n\nexport const linkedTaxa = (item, config, parent, mode, isInCarousel, collection, activeTraitValue) => {\n\n    parent.innerHTML = '';\n    const template = document.createElement('template');\n\n    const addLinksToSpeciesCards = async mode => {        \n        \n        if(!isInCarousel) {            \n            const speciesCardLinks = mode === 'MODAL'\n                    ? document.querySelectorAll('#cardModal .js-test-card-container-link')\n                    : document.querySelectorAll('.js-test-card-container-link');\n            \n            speciesCardLinks.forEach(async link => {\n                link.addEventListener('click', async event => {\n                    const name = event.target.id || event.target.dataset.name;\n                    const selectedItem = await firestore.getSpeciesByName(name);\n                    selectedItem.species = itemProperties.getSpeciesName(item.name);\n                    renderCard({ name: 'Local species', items: [ selectedItem ] }, 'MODAL', selectedItem, document.querySelector('#cardModal .js-modal-body'), false);\n                });\n            });\n        }\n    };\n\n    const getLinkedTaxa = async () => {\n\n        const addVernacularName = async taxonName => {\n            const item = await firestore.getSpeciesByName(taxonName);\n            if(!item) return { name: taxonName, display: taxonName, isSpecies: false };\n            const vernacularName = itemProperties.getVernacularName(item, config);\n            return vernacularName ? { name: taxonName, display: taxonName, isSpecies: true } : { name: taxonName, display: taxonName, isSpecies: true };\n        };\n    \n        let relationshipTraits = item.traits ? item.traits.relationships : null;\n\n        let relationships = [];\n\n        if(relationshipTraits) {\n\n            const convertTraitsForDisplay = async () => {\n                return Promise.all(relationshipTraits.map(trait => {\n                    return  {\n                        type: trait.value[0],\n                        speciesA: trait.symbiont.name,\n                        speciesARole: trait.symbiont.role,\n                        speciesB: item.name,\n                        speciesBRole: trait.type,\n                        description: trait.description\n                    };\n                }));\n            };\n\n            relationships = await convertTraitsForDisplay();\n        }\n\n        let lookalikeTraits = item.traits ? item.traits.lookalikes : null;\n\n        let lookalikes = [];\n\n        if(lookalikeTraits) {\n\n            lookalikeTraits = lookalikeTraits.filter(species => species.lookalike.name === activeTraitValue);\n\n            const convertLookalikesForDisplay = async () => {\n                return Promise.all(lookalikeTraits.map(trait => {\n                    return  {\n                        species: item.name,\n                        speciesDescription: trait.description,\n                        lookalike: trait.lookalike.name,\n                        lookalikeDescription: trait.lookalike.description\n                    };\n                }));\n            };\n\n            lookalikes = await convertLookalikesForDisplay();\n        }\n\n        const addDisplayRules = relationships => {\n            for(const relationship of relationships) {\n                if(mode !== 'MODAL') {\n                    relationship.className = 'underline-link';\n                    relationship.modal = 'modal';\n                } else {\n                    relationship.className = '';\n                    relationship.modal = '';\n                }\n            };\n\n            return relationships;\n        };\n\n        if(relationships) {\n            relationships = addDisplayRules(relationships);\n            template.innerHTML = linkedTaxaRelationshipTemplate;\n            renderTemplate({ relationships }, template.content, parent);\n        }\n\n        if(lookalikes) {\n            lookalikes = addDisplayRules(lookalikes);        \n            template.innerHTML = linkedTaxaLookalikeTemplate;\n            renderTemplate({ lookalikes }, template.content, parent);\n        }\n        addLinksToSpeciesCards(mode);\n    }; \n\n    getLinkedTaxa();\n};","import { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { linkedTaxa } from 'ui/screens/common/linked-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport idBoxTemplate from 'ui/screens/common/id-box-template.html';\nimport detailsTemplate from 'ui/screens/common/info-detail-slider-template.html';\n\nexport const renderInfoDetails = (item, activeTraitKey, activeTraitValue, description) => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const template = document.createElement('template');\n    const parent = document.querySelector('.js-info-box-details');\n\n\n    if(!parent) return; // hack! currently the case with (non-species) taxon cards (see same below)\n\n    parent.innerHTML = '';\n\n    if(activeTraitKey.toLowerCase().indexOf('description') > -1) {        \n        template.innerHTML = idBoxTemplate;\n        renderTemplate({ id: description }, template.content, parent);\n        const text = document.querySelector('.id-box > div');\n              text.innerHTML = text.innerHTML.replace(/\\r?\\n/g, '<br />');        \n    }\n    else if(activeTraitKey.toLowerCase() === 'relationships' || activeTraitKey.toLowerCase() === 'lookalikes') {\n        const mode = 'MODAL';\n        const isInCarousel = true;\n        linkedTaxa(item, config, parent, mode, isInCarousel, collection, activeTraitValue);\n    } else {\n\n        const details = firestore.getDefinition(activeTraitValue, glossary, collection.glossary); // make dependent on a promise\n\n        if(!parent) return; // hack! taxon info sliders\n\n        if(details && details.length > 0) {            \n            details.forEach(detail => {\n                template.innerHTML = detailsTemplate;\n                detail.imgClassName = detail.img ? detail.img.url === '' ? 'hide-important' : '' : 'hide-important';\n                detail.img = detail.img || { url: '' }; \n            });\n            renderTemplate({ details }, template.content, parent);\n        }\n    }\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderInfoDetails } from 'ui/screens/common/info-detail-slider';\n\nimport infoSliderTemplate from 'ui/screens/common/info-slider-template.html';\n\nconst renderInfoSlider = (item, traits, parent, id) => {\n\n    const slider = document.createElement('template');\n          slider.innerHTML = infoSliderTemplate;\n\n    parent.innerHTML = '';\n\n    traits = traits.filter(t => t.value);\n\n    traits.forEach(trait => {        \n        trait.name = trait.name ? trait.name === 'ph' ? 'pH' : utils.capitaliseFirst(trait.name) : '';\n        if(trait.name.toLowerCase() === 'role') trait.name = trait.type || 'role';\n        trait.name = trait.name === 'Ph value' ? 'pH value' : trait.name; \n        trait.unit = trait.unit ? trait.unit.toLowerCase() === 'colour' ? '' : trait.unit : '';\n        trait.description = trait.value;\n        trait.value = trait.name.toLowerCase() === 'description' ? '< traits >' : trait.value.join(', ');\n    });\n    \n    let description = traits.find(trait => trait.name.toLowerCase() === 'description');\n        description = description ? description.description[0] : '';\n\n    renderTemplate({ id, traits }, slider.content, parent);\n\n    let activeTrait, activeTraitKey, activeTraitValue;\n    \n    activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item:nth-child(1)`);\n    activeTrait.classList.add('active');\n\n    const traitCount = traits.length;\n\n    if(traitCount === 1) {\n        parent.querySelectorAll('.carousel.slide a').forEach(control => {\n            control.setAttribute('disabled', 'disabled');\n            control.classList.add('inactive-icon');\n        });\n    }\n\n    const changeTraitHandler = event => {\n        setTimeout(() => {\n            activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item.active`);\n            activeTraitKey = activeTrait.querySelector('dt').innerHTML;\n            activeTraitValue = activeTrait.querySelector('dd').innerHTML;\n            renderInfoDetails(item, activeTraitKey, activeTraitValue, description);\n        }, 1000);\n    };\n\n    changeTraitHandler();\n\n    parent.querySelector(`#traitSlider${id} .carousel-control-prev`).addEventListener('click', changeTraitHandler);\n    parent.querySelector(`#traitSlider${id} .carousel-control-next`).addEventListener('click', changeTraitHandler);\n}\n\nexport const taxonInfoSlider = (item, traits, parent, mode) => {\n\n    const id = mode === 'MODAL' ? 'taxon_1' : 'taxon_0';\n\n    const convertedTraits = traitsHandler.convertTraitsToNameValuePairsArray(traits, traitsHandler.getTraitsToExclude());\n\n    if(convertedTraits.length > 0) {\n        renderInfoSlider(item, convertedTraits, parent, id);\n    }    \n};\n\nexport const infoSlider = (item, parent, mode) => {\n    \n    if(!traitsHandler.hasTraitPropeties(item.traits)) return;\n\n    let traits = traitsHandler.convertTraitsToNameValuePairsArray(item.traits, traitsHandler.getTraitsToExclude(), item);\n\n    if(item.traits.description) {\n        const description = {\n            name: 'description',\n            value: item.traits.description.value\n        }\n        traits = [ description, ...traits ];\n    }\n    \n    if(traits.length === 0) return;\n    \n    const id = mode === 'MODAL' ? 1 : 0;\n\n    renderInfoSlider(item, traits, parent, id);\n};","import { utils } from 'utils/utils';\n\nconst getHTML5Location = () => {\n\n  return new Promise(function (resolve, reject) {\n    function success(position) {\n      resolve([position.coords.latitude, position.coords.longitude]);\n    }\n\n    function error(e) {\n      logError('getHTML5Location', e);\n      resolve({\n        '0': 0,\n        '1': 0,\n      });\n    }\n\n    navigator.geolocation.getCurrentPosition(success, error);\n  });\n};\n\nexport const getLocation = (config) => {\n  if(!!config.coordinates && config.coordinates.lat && config.coordinates.long) {\n   snapLog('geolocation config',config);\n    return new Promise(resolve => {\n        resolve(config.coordinates);\n    });\n  } else {\n   snapLog('geolocation config', config);\n    return getHTML5Location();\n  }  \n};\n\nconst listeners = [];\n\nconst parseMapBoxPlace = async (json, config) => {\n  const place = await json;\n  const locality = place.features.find(f => f.place_type[0] === 'locality');\n  const region = place.features.find(f => f.place_type[0] === 'region');\n  const country = place.features.find(f => f.place_type[0] === 'country');\n\n  place.locality = locality ? locality.text : '';\n  place.region = region ? region.text : '';\n  place.country = country ? country.text : '';\n  place.area = place.region || place.country;\n  \n  place.shortLocation = `${place.locality}, ${place.country}`;\n  place.longLocation = `${place.locality}, ${place.region}, ${place.country}`;\n \n  place.summary = config.isLandscapeMode ? `Species from ${place.longLocation}` : `Species from ${place.shortLocation}`;\n  const placePromise = new Promise(resolve => {\n    resolve(place);\n  });\n  const updatedPlace = await placePromise;\n  return await updatedPlace;\n}\n\nconst getMapBoxPlace = async (long, lat, config) => {\n  const token = 'pk.eyJ1IjoiZGFuaGFydGxleSIsImEiOiJjam84Zjd3aGowMDdoM2ttaDAzeDk4bHJ6In0.oEcO6w3DhHUv_mXrFW1clg';  \n  const longitude = long;// || '-9.163009899999999';\n  const latitude = lat;// || '38.7155762';  \n  const language = config.language || 'en';\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${longitude},${latitude}.json?language=${language}&access_token=${token}`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const place = await parseMapBoxPlace(json, config);\n  listeners.forEach(listener => listener(place));\n  return await place;\n}\n\nexport const getPlace = async (config, force = false) => {\n  if(!!config.place && !force) {\n    const response = new Promise(resolve => {\n      resolve(config.place);\n    });\n    const json = await response;    \n    return await json;\n  } else {    \n   snapLog('getPlace config', config);\n    const coordinates = await getLocation(config);        \n    const latitude = coordinates['0'] || coordinates.lat;\n    const longitude = coordinates['1'] || coordinates.long;\n    config.coordinates = { lat: latitude, long: longitude };\n\n    return getMapBoxPlace(longitude, latitude, config);\n  }\n};\n\nexport const listenToPlaceChange = listener => { \n  listeners.push(listener);\n};\n\nconst IPCountryLookup = async () => {\n  const ACCESS_KEY = '69402a39530c7ae8218dfaf69ef78337';  \n  const url = `http://api.ipstack.com/check?access_key=${ACCESS_KEY}`;\n  try {\n    const response = await fetch(url);\n    const json = await response.json();\n    const { country_code, country_name } = await json;\n    return { country_code, country_name };\n  } catch (error) {\n    console.warn(`ERROR(${err.code}): ${err.message}`);\n  }  \n}\n\nconst LocationLookup = async ip => {\n  const ACCESS_KEY = 'a8563e7b75654ae8b016dc52719dee3b';\n  const url = `https://api.ipgeolocation.io/ipgeo?apiKey=${ACCESS_KEY}&ip=${ip}&fields=city,state_prov,country_name,latitude,longitude&output=json`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const { city, state_prov, country_name, latitude, longitude } = await json; \n  return { city, state_prov, country_name, latitude, longitude };\n}\n\nconst IPLookup = async () => {  \n  const url = 'https://api.ipgeolocation.io/getip';\n  const response = await fetch(url);\n  const json = await response.json();\n  const { ip } = await json; \n  return ip;\n}\n\nexport const getIPLocation = async (config, force = false) => {\n\n     if(!!config.ipLocation && !force) {\n      const response = new Promise(resolve => {\n        resolve(config.ipLocation);\n      });\n      const json = await response;    \n      return await json;\n     } else {\n      const ip = await IPLookup();\n      const { city, state_prov, country_name, latitude, longitude } = await LocationLookup(ip);\n      return { city, state_prov, country_name, latitude, longitude };\n     }\n};\n\nexport async function GoogleFindPlace(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n\n  const url = `https://maps.googleapis.com/maps/api/place/findplacefromtext/json?input=${place}&inputtype=textquery&key=${ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { candidates } = await json; \n  return candidates;\n}\n\nlet service;\nlet requireNewSession = true;\nlet isScriptReady = false;\nlet SESSION_TOKEN;\nlet current_term = '';\n\nexport async function GoogleAutocompleteServerSide(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n\n  const url = `https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${place}&inputtype=textquery&key=${ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { predictions } = await json; \n  return predictions;\n}\n\nconst createScriptRequest = (src, callback) => {\n  requireNewSession = false;\n  const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = src;\n    document.body.appendChild(script);\n    script.addEventListener(\"load\", () => {\n      isScriptReady = true;\n      callback();\n    });\n}\n\nexport const GoogleAutocomplete_Original = (place, callback) => {\n\n  const getPredictions = () => {\n    \n    if(!isScriptReady) return;\n\n    const displaySuggestions = function(predictions, status) {\n      if (status != google.maps.places.PlacesServiceStatus.OK) {\n        alert(status);\n        return;\n      }\n  \n      callback(predictions);\n    };\n    if(!service) {\n      service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions({ input: place }, displaySuggestions);\n  };\n\n  if(requireNewSession) {\n    const ACCESS_KEY = 'AIzaSyD1osYKD1sRb5Bzqq-OzJ6PgXqLtDt9YvU';\n    const SESSION_TOKEN = utils.createSessionToken();\n\n    const src = `https://maps.googleapis.com/maps/api/js?key=${ACCESS_KEY}&sessiontoken=${SESSION_TOKEN}&libraries=places`;\n\n    createScriptRequest(src, () => {\n      getPredictions();\n    });\n  } else {\n    getPredictions();\n  }\n}\n\nexport const GoogleAutocomplete = (place, callback) => {\n\n  const getPredictions = SESSION_TOKEN => {\n\n    if(!service) {\n        service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions(\n      { \n        input: place,\n        // sessionToken: SESSION_TOKEN\n      }, \n      callback);\n  };\n\n  if(requireNewSession) {\n    SESSION_TOKEN = new google.maps.places.AutocompleteSessionToken();\n    getPredictions(SESSION_TOKEN);\n    current_term = place;\n    requireNewSession = false; //or on expires/error, get a new one\n  } else {\n    if(place !== current_term) {\n      getPredictions(SESSION_TOKEN);\n    }\n    current_term = place;\n  }\n}\n\nexport const GooglePlaceDetails = (placeId, callback) => {\n  \n  var request = {\n    placeId: placeId,\n    // sessionToken: SESSION_TOKEN\n  };\n\n  var service = new google.maps.Geocoder();\n      service.geocode(request, callback);  \n\n  requireNewSession = true;\n}","import { contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nlet inatListeners = [];\nlet RECORDS_PER_PAGE = 200;\n\nconst unsubscribe = listener => {\n    inatListeners = inatListeners.filter(l => l !== listener);\n};\n\nexport const listenToInatRequests = listener => {\n    inatListeners.push(listener);\n    return unsubscribe;\n};\n\nconst getBasePath = config => {\n    \n    const month = config.guide.season.type === 'all_year' \n            ? ''\n            : config.guide.season.observableMonths.map(month => month.index).join(',');\n\n    const perPage = config.guide.perPage || RECORDS_PER_PAGE;\n\n    const basePath = `https://api.inaturalist.org/v1/observations/species_counts?captive=false&rank=species&per_page=${perPage}&month=${month}`;\n\n    return basePath;\n};\n\nexport const getInatSpecies = async config => {\n\n    const speciesNames = await firestore.getSpeciesNames();\n\n    const snapdragonSpeciesNames = speciesNames[0].value;\n\n   snapLog('snapdragon species', snapdragonSpeciesNames);\n\n    const iconicTaxaKeys = Object.keys(iconicTaxa).join(',');\n\n    const getIconicTaxa = config => {\n      \n      try {\n\n          const iconicTaxa = config.guide.iconicTaxa.map(taxon => taxon.id) || iconicTaxaKeys;\n\n          // Create new taxonic group for reptilia, etc?\n\n          if(iconicTaxa.find(taxon => taxon === 'mammalia')) {\n              iconicTaxa.push('reptilia');\n          }\n\n          const taxa = iconicTaxa.map(taxon => {\n              if(taxon === 'lepidoptera') taxon = 'insecta';            \n              return taxon;\n          });\n\n          return taxa;\n\n      } catch (e) {\n        logError('Error for getIconicTaxa: ', e);\n    }\n    };\n\n    const getUserOrProjectKeyValuePair = config => {\n        if(!config.guide.inatId) return '';\n        const param = config.guide.inatId.param;    \n        const id = config.guide.inatId.id;\n        const parameter = `&${param}=${id}`;\n        return id ? parameter : '';\n    };\n\n    const getAllInatObservations = async (config, snapdragonSpeciesNames) => {\n        let snapdragonSpecies = [];\n        let records = [];\n        let keepGoing = true;\n        let page = 1;\n        while (keepGoing) {\n          try {\n            let recordsFromThisRequest = await getInatObservations(config, page);\n            await records.push.apply(records, recordsFromThisRequest);\n            let matches = recordsFromThisRequest.filter(record => contains(record.taxon.name, snapdragonSpeciesNames));\n            await snapdragonSpecies.push.apply(snapdragonSpecies, matches);\n            page = page + 1;\n            let noMoreRecords = recordsFromThisRequest.length < RECORDS_PER_PAGE;\n            let recordsCountReached = snapdragonSpecies.length >= config.guide.noOfRecords;\n           snapLog('snapdragonSpecies', snapdragonSpecies);\n           snapLog('records', records);\n            if (noMoreRecords || recordsCountReached) {\n                keepGoing = false;\n                return snapdragonSpecies;\n            }\n          } catch(e) {\n            logError('getInatObservations', e);\n            return snapdragonSpecies;\n          }\n        }\n    }\n\n    const loadSpeciesInParallel = async observations => {\n        try {\n            return Promise.all(observations.map(observation => {\n                return firestore.getSpeciesByName(observation.taxon.name).then(async item => {\n                    return await {                         \n                        ...item, \n                        observationCount: observation.taxon.observations_count, \n                        iconicTaxon: observation.taxon.iconic_taxon_name\n                    };\n                })                    \n            }));\n\n        } catch (e) {\n          logError('loadSpeciesInParallel: ', e);\n        }\n    };\n\n    const getInatObservations = async (config, page) => {\n\n      try {\n\n        let lat = '', lng = '', placeId = '';\n\n        let radius = config.guide.speciesRange ? parseInt(config.guide.speciesRange) : 10;\n        let inat = '';\n        \n        switch(config.guide.locationType) {\n            case 'place':\n                placeId = config.guide.place.id;\n                break;\n            case 'longLat':\n                lat = config.guide.coordinates.lat;\n                lng = config.guide.coordinates.long;\n                break;\n            case 'inat':\n                lat = '';\n                lng = '';\n                placeId = '';\n                radius = '';\n                inat = `&${config.guide.inatId.param}=${config.guide.inatId.key}`;\n                break;\n        }\n\n        const iconicTaxa = getIconicTaxa(config);\n        const params = config.guide.guideTpe === 'INAT' ? getUserOrProjectKeyValuePair(config) : '';\n        const url = getBasePath(config) + `&page=${page}&iconic_taxa=${iconicTaxa}&place_id=${placeId}&lat=${lat}&lng=${lng}&radius=${radius}${inat}${params}`;\n\n       snapLog('inat species request url', url);\n\n        const recordsFromThisRequest = await fetch(url);\n\n       snapLog('inat recordsFromThisRequest', recordsFromThisRequest);\n\n        const json = await recordsFromThisRequest.json();\n        inatListeners.forEach(listener => listener(\n            { page: json.page, numberOfRequests: Math.ceil(json.total_results/json.RECORDS_per_page) }\n        ));\n        return json ? await json.results : [];\n      } catch(e) {\n        logError('getInatObservations', e);\n        return [];\n      }\n    }\n    \n    let observations;\n\n    try {\n      observations = await getAllInatObservations(config, snapdragonSpeciesNames);\n      observations = observations.filter(observation => contains(observation.taxon.name, snapdragonSpeciesNames));\n      observations = take(config.guide.noOfRecords, utils.sortBy(observations.filter(item => item), 'observationCount', 'desc'));\n    } catch(e) {\n      logError('getAllInatObservations', e);\n    }\n\n   snapLog('observations', observations);\n\n    if(!observations) return [];\n\n    return await loadSpeciesInParallel(observations);\n}\n\nexport async function getInatPlaceId(place) {\n    \n    const url = `https://api.inaturalist.org/v1/places/autocomplete?q=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json  = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getInatTaxonStats(item, config, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/species_counts?&verifiable=true&taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getHistogram(item, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/histogram?taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getAutocompleteBy(q, by) {\n\n    // currently set up for USERS and PROJECTS but PLACES? Not sure\n    // https://api.inaturalist.org/v1/places/autocomplete?q=O%20Parque%20Natural%20da%20Arr%C3%A1bida\n\n    const url = `https://api.inaturalist.org/v1/${by}/autocomplete?q=${q}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\n// https://www.inaturalist.org/observations/danielhartley.json?m1=1&m2=11&iconic_taxa[]=Fungi","export const renderWikiModal = (item, wikiLink, config) => {\n    if(wikiLink) {\n        wikiLink.addEventListener('click', event => {\n            document.querySelector('.js-external-page-title').innerHTML = `${item.name}`;\n            const entry = document.querySelector('.species-card-wiki-entry').innerText;\n            const style = `\n                <style type='text/css'>\n                body {\n                    font-family: PT Sans', 'Roboto', arial,sans-serif;\n                }\n                a {\n                    text-decoration: none;\n                    border: solid 1px;\n                    border-top: none;\n                    border-left: none;\n                    border-right: none;\n                    color: black;\n                    cursor: pointer;\n                }\n            </style>`;\n            const wiki = `<header>${style}</header><p>${entry}</p><p><a href='https://en.wikipedia.org/wiki/Salvia_officinalis' target='_blank'>Wikipedia page</a></p>`;\n\n            document.querySelector('.js-external-page-body').innerHTML = config.isPortraitMode\n                ? `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"data:text/html,${wiki}\"></iframe>`          \n                : `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"${wikiLink.querySelector('span').dataset.src}\"></iframe>`;\n                \n            document.querySelector('#wikiModal').focus();\n        });\n    }\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace } from 'geo/geo';\nimport { getInatTaxonStats, getInatPlaceId } from 'api/inat/inat';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\n\nimport inatBoxTemplate from 'ui/screens/common/inat-box-template.html';\n\nexport async function renderInatDataBox(parent, item, config, mode) {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatBoxTemplate;\n\n    parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n    const eolPage = document.querySelector('.js-test-card-container-eol-link');\n    \n    eolPage.setAttribute('href', `http://eol.org/pages/${item.id}/overview`);\n    eolPage.setAttribute('target', '_blank');\n    eolPage.setAttribute('style', 'text-decoration: none');\n\n    setTimeout(()=>{\n        const wikiLink = document.querySelector('.js-test-card-container-wiki');            \n        renderWikiModal(item, wikiLink, config);\n    });    \n\n    const wikiNode = document.querySelector('.js-test-card-container-wiki');\n          wikiNode.innerHTML = '';\n\n    renderWiki(wikiNode, item, config.language);\n    \n    getInatTaxonStats(item, config).then(stats => {\n\n        if(!stats.results) return;\n\n        const taxonId = stats.results.find(stat => stat.taxon.name === item.name).taxon.id;\n        const taxonCount = stats.results.find(stat => stat.taxon.name === item.name).count;\n\n        const taxonLink = `https://www.inaturalist.org/taxa/${taxonId}`;\n\n        parent.querySelector('.js-taxon-count').innerHTML = taxonCount.toLocaleString();\n        parent.querySelector('.js-taxon-link').setAttribute('href', taxonLink);\n    });\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n    \n    getInatTaxonStats(item, config, placeId).then(stats => {\n\n        if(stats.results.length === 0) return;\n\n        const itemStats = stats.results.find(stat => stat.taxon.name === item.name);\n\n        if(!itemStats) return;\n\n        const placeTaxonCount = itemStats.count;\n        const establishment = itemStats.taxon.preferred_establishment_means;\n\n        document.querySelector('.js-native-container').innerHTML = establishment || '';\n\n        parent.querySelector('.js-world').innerHTML = mode === 'MODAL' ? 'Worldwide' : 'Worldwide sightings';\n        parent.querySelector('.js-place').innerHTML = mode === 'MODAL' ? country : `${country} sightings`;\n        parent.querySelector('.js-place-taxon-count').innerHTML = placeTaxonCount.toLocaleString();\n    });\n}","import { utils } from 'utils/utils';\nimport { getLocation, getPlace } from 'geo/geo';\nimport { getHistogram, getInatPlaceId } from 'api/inat/inat';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport calendarTemplate from 'ui/screens/common/calendar-template.html';\n\nexport const renderCalendar = async (parent, item, config) => {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = calendarTemplate;\n\n    parent.innerHTML = '';\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n\n    let months = [];\n\n    const getENShortMonth = (ordinal) => {\n        let month;\n        switch(ordinal) {\n            case 1:\n                month = 'J';\n                break;\n            case 2:\n                month = 'F';\n                break;\n            case 3:\n                month = 'M';\n                break;\n            case 4:\n                month = 'A';\n                break;\n            case 5:\n                month = 'M';\n                break;\n            case 6:\n                month = 'J';\n                break;\n            case 7:\n                month = 'J';\n                break;\n            case 8:\n                month = 'A';\n                break;\n            case 9:\n                month = 'S';\n                break;\n            case 10:\n                month = 'O';\n                break;\n            case 11:\n                month = 'N';\n                break;\n            case 12:\n                month = 'D';\n                break;\n        }\n        return month;\n    }\n\n    const getMonth = (ordinal, config) => {\n        let month;\n        switch(config.language) {\n            case 'en':\n                month = getENShortMonth(ordinal);\n                break;\n            default:\n                month = getENShortMonth(ordinal);\n        }\n        return month;\n    }\n\n    getHistogram(item, placeId).then(histogram => {\n        const monthlyStats = histogram.results.month_of_year;\n        for (var month in monthlyStats) {\n            months.push({\n                month: getMonth(parseInt(month), config),\n                index: parseInt(month),\n                count: monthlyStats[month]\n            });\n        }\n\n        utils.sortBy(months, 'count', 'desc').forEach( (month, index) => {\n            if(index < 4 && month.count !== 0) {\n                month.class = 'most-observations';\n            } else {\n                month.class = '';\n            }\n        });\n\n        utils.sortBy(months, 'index', 'asc');\n\n        const data = [];\n        let season = [];\n\n        months.map((month,index) => {\n            if(index < 4) {\n                season.push(month);                \n            }\n            if(index === 3) {\n                data.push(season);\n                season = [];\n            }\n            if(3 < index && index < 8) {\n                season.push(month);                \n            }\n            if(index === 7) {\n                data.push(season);\n                season = [];\n            }\n            if(7 < index && index < 12) {\n                season.push(month);                \n            }\n            if(index === 11) {\n                data.push(season);\n                season = [];\n            }\n        });\n\n        renderTemplate({ data }, template.content, parent);\n\n        const currentMonthIndex = new Date().getMonth();\n\n        const monthNodes = document.querySelectorAll('.calendar-box .col > div');\n    \n        monthNodes.forEach((node, index) => {\n            if(index === currentMonthIndex) {\n                node.classList.add('current-month');\n            }\n        });\n    });\n    \n};","export const infraspecifics = [\n    {\n        name: 'Brassica rapa',\n        subspecies: [\n            {\n                variety: 'chinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Bok choy\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Pak choi\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'rapa',\n                names: [\n                    {\n                        \"vernacularName\": \"Turnip\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'oleifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Field mustard\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'pekinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Chinese cabbage\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Wombok\",\n                        \"language\": \"en\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        name: 'Brassica oleracea',\n        variety: 'oleracea',\n        subspecies: [\n            {\n                variety: 'oleracea',\n                names: [\n                    {\n                        \"vernacularName\": \"Wild cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Brassica_oleracea',\n                        eol: 'http://eol.org/pages/1283630/overview'              \n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'alba',\n                names: [\n                    {\n                        \"vernacularName\": \"Cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Cabbage',\n                        eol: 'http://eol.org/pages/38390/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'sabauda',\n                names: [\n                    {\n                        \"vernacularName\": \"Savoy cabbage\",\n                        \"language\": \"en\",\n                        \"wiki\": 'https://en.wikipedia.org/wiki/Savoy_cabbage',\n                        eol: 'http://eol.org/pages/5148887/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'rubra',\n                names: [\n                    {\n                        \"vernacularName\": \"Red cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Red_cabbage'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'acuta',\n                names: [\n                    {\n                        \"vernacularName\": \"Cone cabbage\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Collards\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'Acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Kale\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gemmifera',\n                group: 'Gemmifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Brussels sprouts\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gongylodes',\n                group: 'Gongylodes',\n                names: [\n                    {\n                        \"vernacularName\": \"Kohlrabi\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'italica',\n                group: 'Italica',\n                names: [\n                    {\n                        \"vernacularName\": \"Broccoli\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'botrytis',\n                group: 'Botrytis',\n                names: [\n                    {\n                        \"vernacularName\": \"Cauliflower\",\n                        \"language\": \"en\"\n                    },\n                ]\n            }\n        ]\n    }\n];","import { itemProperties } from 'ui/helpers/data-checking';\nimport { infraspecifics } from 'api/snapdragon/infraspecifics';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport taxaBoxTemplate from 'ui/screens/common/taxa-box-template.html';\n\nexport const renderTaxaBox = async (parent, taxaBoxArgs) => {\n\n    const enums = store.getState().enums;\n\n    parent.innerHTML = '';\n\n    let { item, familyName, familyVernacularName } = taxaBoxArgs;\n\n    const options = [\n        { name: enums.name.RANK, formatter: trait => `UK # ${trait[0]}` },\n        { name: enums.name.HOW_EDIBLE, formatter: trait => trait[0] }\n    ];\n\n    let trait = itemProperties.getActiveTrait(item, options);\n    \n    const specific = infraspecifics.find(specific => specific.name === item.name);\n    const subSpeciesCount = specific ? specific.subspecies.length : 0;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = taxaBoxTemplate;\n\n    renderTemplate({ subSpeciesCount, familyName, familyVernacularName, trait }, template.content, parent);\n\n    const subspeciesBadge = parent.querySelector('.js-subspecies-badge');\n\n    if(subSpeciesCount === 0) {\n\n        subspeciesBadge.classList.add('hide');\n        \n    } else {\n\n        const members = specific.subspecies;\n\n        subspeciesBadge.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Cultivars of ${item.name}`;            \n            const list = rootNode.querySelector('#badgeListModal .js-modal-text');\n            let html = '<div class=\"modal-list scrollable\">';\n            members.forEach(member => {\n                html += `<div><span>subspecies: ${member.name}</span>`;\n                html += `<ul>`;\n                member.names.forEach(name => {\n                    if(name.language === config.language)\n                        html += `<li>name: ${name.vernacularName}</li>`;\n                });\n                html += `</ul></div>`;\n            });\n            html += '</div>';\n            list.innerHTML = html;\n        });\n    }\n}","import { renderTemplate } from 'ui/helpers/templating';\n\nimport badgeTemplate from 'ui/screens/common/badge-template.html';\n\nexport const renderBadge = (badge, item, config) => {\n\n    let names = [ ...new Set(item.names.map(name => {\n        return {\n            common: name.vernacularName.toLowerCase(),\n            language: name.language\n        }\n    })) ];\n\n    const languageNames = names.reduce(function (r, a) {\n        r[a.language] = r[a.language] || {};\n        r[a.language].name = config.languages.find(language => language.lang === a.language).name;\n        r[a.language].names = r[a.language].names || [];\n        r[a.language].names.push(a.common);\n        return r;\n    }, Object.create(null));\n\n    const occurrences = names.length;\n\n    const template = document.createElement('template');\n\n    if(occurrences === 0) {\n\n        badge.classList.add('hide');\n        \n    } else {\n\n        badge.innerHTML = '';\n\n        template.innerHTML = `<span class=\"names-badge js-names-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">${occurrences}</span>`;\n\n        renderTemplate({}, template.content, badge);\n\n        badge.addEventListener('click', event => {\n            \n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = 'Common species names';\n\n            const parent = document.querySelector('#badgeListModal .js-modal-text');\n\n            parent.innerHTML = '';\n\n            template.innerHTML = badgeTemplate;\n\n            renderTemplate({ languageNames }, template.content, parent);\n        });\n    }\n}","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { getBirdSong } from 'xeno-canto/birdsong';\nimport { lookalikeSpecies } from 'ui/screens/common/look-alikes';\nimport { infoSlider } from 'ui/screens/common/info-slider';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { renderInatDataBox } from 'ui/screens/common/inat-box';\nimport { renderCalendar } from 'ui/screens/common/calendar';\nimport { renderTaxaBox } from 'ui/screens/common/taxa-box';\nimport { renderBadge } from 'ui/screens/common/badge';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { firestore } from 'api/firebase/firestore';\n\nimport cardTemplate from 'ui/screens/cards/card-template.html';\n\nexport const renderCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, isInCarousel = true) => {\n\n    if(!selectedItem) return;\n\n    const { layout, config } = store.getState();\n\n    let item;\n\n    const init = async () => {\n\n            const getItemWithProps = async item => {\n\n            if(item.eolId) return new Promise(resolve => resolve(item));\n            \n            const getItem = async item => {\n                return item.family\n                            ? new Promise(resolve => resolve(item))\n                            : await firestore.getSpeciesByName(item.name);\n            };\n\n            const itemWithProps = await getItem(item);\n            \n            itemWithProps.family = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.FAMILY.name.toLowerCase()]) || { names: [ itemWithProps.taxonomy.family ]};\n            itemWithProps.order = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.ORDER.name.toLowerCase()]);\n            itemWithProps.traits = await firestore.getTraitsBySpeciesName(item.name);\n            itemWithProps.vernacularName = itemWithProps.vernacularName || itemProperties.getVernacularName(item, config);\n\n            const names = item.name.split(' ');\n\n            itemWithProps.taxonomy.genus = names[0];                \n            itemWithProps.taxonomy.species = names[1];\n\n            return itemWithProps;\n        };\n    \n        item = selectedItem || collection.nextItem;\n\n        item = await getItemWithProps(item);\n\n        let rootNode;\n    \n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = config.isLandscapeMode ? modal.querySelector('.js-modal-text') : document.querySelector('.right-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = config.isLandscapeMode ? parent : document.querySelector('.js-species-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n    \n        if(mode === 'STAND-ALONE') {        \n            const screen = layout.screens.filter(el => el.name === 'species-card')[0];\n            if(!screen) return;\n        }\n    \n        const prev = document.querySelector('#cardModal .js-prev');\n        const next = document.querySelector('#cardModal .js-next');\n    \n        if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n        if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n        \n        const template = document.createElement('template');\n    \n        template.innerHTML = cardTemplate;\n    \n        renderCommonParts(template, config, item, collection, mode, parent, rootNode, isInCarousel);\n    \n        config.isPortraitMode\n            ? renderPortrait(item, config, mode, rootNode)\n            : renderLandscape(item, config, mode, rootNode);\n    };\n\n    init();\n};\n\nconst renderLandscape = (item, config, mode, rootNode) => {\n\n    const src = rootNode.querySelector('.js-bird-song');\n    \n    getBirdSong(item, src, config.isPortraitMode);\n\n    const inatNode = rootNode.querySelector('.js-inat-box');\n\n    renderInatDataBox(inatNode, item, config, mode);\n    \n    renderCalendar(rootNode.querySelector('.js-calendar-box'), item, config);\n\n    lookalikeSpecies(item, config, rootNode);\n};\n\nconst renderPortrait = (item, config, mode, rootNode) => {\n\n    const images = prepImagesForCarousel(item, config, imageUseCases.SPECIES_CARD);\n\n    const parent = rootNode.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent, parentScreen: rootNode.querySelector('.card-card'), identifier: item.name.replace(' ', '_') });\n\n    const player = rootNode.querySelector('.js-bird-song-player');\n\n    if(mode =='MODAL') {\n        player.style.display = 'none';\n        return;\n    };\n\n    getBirdSong(item, player, config.isPortraitMode);\n\n    player.addEventListener('click', () => {\n        const iframe = document.createElement('iframe');\n        iframe.id = 'birdsong';\n        iframe.style.border = 0;\n        iframe.src = player.dataset.src;\n        document.querySelector('#basicModal .modal-body').classList.add('bird-song-bg');\n        document.querySelector('#basicModal .js-modal-text-title').innerHTML = `${item.name}`;\n        const elm = document.querySelector('#basicModal .js-modal-text');\n        while (elm.firstChild) {\n            elm.removeChild(elm.firstChild);\n         }\n        elm.appendChild(iframe);\n    });\n};\n\nconst renderCommonParts = (template, config, item, collection, mode, parent, rootNode, isInCarousel) => {\n\n    const image = scaleImage({ url: item.starred || item.images[0].url }, imageUseCases.SPECIES_CARD, config);\n    \n    const clone = document.importNode(template.content, true);\n    \n    parent.innerHTML = '';\n    \n    renderTemplate({ name: item.name, vernacularName: item.vernacularName, image, iconicTaxon: item.iconicTaxon }, template.content, parent, clone);\n    \n    renderTaxaBox(rootNode.querySelector('.js-taxa-box'), { item, familyName: item.taxonomy.family, familyVernacularName: item.family.vernacularName || '' });\n\n    infoSlider(item, rootNode.querySelector('.js-info-box'), mode);\n\n    renderBadge(rootNode.querySelector('.js-names-badge'), item, config);    \n\n    renderIcon(item.taxonomy, rootNode);\n\n    if(mode === 'MODAL') {      \n          \n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n        const prev = rootNode.querySelector('#cardModal .js-prev > span');\n        prev.dataset.id = item.id;\n        prev.dataset.transition = 'prev';\n        prev.dataset.modal = 'cardModal';\n\n        const next = rootNode.querySelector('#cardModal .js-next > span');\n        next.dataset.id = item.id;\n        next.dataset.transition = 'next';\n        next.dataset.modal = 'cardModal';\n        \n        const lines = document.getElementsByTagName('hr');\n\n        Array.from(lines).forEach(hr => hr.style.display = 'none');\n    }\n\n    setTimeout(() => {\n        \n        if(config.isPortraitMode) {\n            // hide attribution for now - space issue various across devices\n            const attributions = document.querySelectorAll('.js-attribution-layer');\n                    attributions.forEach(attribution => attribution.classList.add('hide-important'));\n            const indicators = document.querySelectorAll('.js-carousel-indicators');\n                    indicators.forEach(indicator => indicator.classList.add('hide-important'));\n        }\n    });\n};","import{ take } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { taxonInfoSlider } from 'ui/screens/common/info-slider';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\n\nimport taxonTemplate from 'ui/screens/cards/taxon-card-template.html';\n\nlet transition;\n\nconst modalCarousel = document.querySelector('#cardModal .carousel');\n\nif(modalCarousel) {\n    modalCarousel.addEventListener('click', event => {    \n        transition = event.target.dataset.transition;\n    });\n}\n\nexport const renderTaxonCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, speciesTaxon, rank, isInCarousel = true) => {\n  \n    try {\n\n        const item = selectedItem || collection.nextItem;\n\n        if(!item) {\n            document.querySelector('#cardModal .close').click();\n        }\n\n        const { config } = store.getState();\n\n        let rootNode;\n\n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = document.querySelector('.right-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = document.querySelector('.js-taxon-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n\n        const template = document.createElement('template');\n              template.innerHTML = taxonTemplate;\n        \n        const clone = document.importNode(template.content, true);\n\n        parent.innerHTML = '';\n\n        rank = rank ? rank.toUpperCase() : 'FAMILY';\n\n        let taxon;\n\n        switch(rank) {\n            case 'ORDER':\n                taxon = item.order;\n                break;\n            case 'FAMILY':\n                taxon = item.family;\n                break;\n            case 'GENUS':\n                taxon  = item.genus;\n                break;\n            default:\n                taxon = item.family;\n                break;\n        };\n\n        const familyStats = itemProperties.getFamilyStats(collection.items);\n        const occurrences = familyStats ? familyStats[taxon.name] : 0;\n        const url = item.images ? item.starred ? item.images[0].url : '' : '';\n        const image = scaleImage({ url }, imageUseCases.TAXON_CARD, config);\n        const vernacularName = taxon.vernacularName || itemProperties.getNestedTaxonProp(taxon, config.language, 'names', 'names', '0').split(',')[0];\n        const identification = taxon.identification ? taxon.identification : taxon.descriptions ? taxon.descriptions[0].identification : '';\n        const summary = taxon.summary ? taxon.summary : taxon.descriptions ? taxon.descriptions[0].summary : '';\n                \n        const context = {\n            rank: rank,\n            name: taxon.name,\n            image,\n            alt: taxon ? taxon.alt : '',\n            vernacularName,\n            species: taxon.species || '--',\n            genera: taxon.genera || '--',\n            families: taxon.families || '--',\n            identification,\n            summary,\n            eol: taxon.eol ? taxon.eol.replace('en', config.language) : '',\n            wiki: taxon.wiki ? taxon.wiki.replace('en', config.language) : '',\n            occurrences: occurrences,\n            toxic: taxon.toxic ? `Toxic species: ${taxon.toxic.members.join(', ')}` : '',\n            notableMembers: taxon.members ? take(2, taxon.members).join(', ') : ''\n        }\n\n        renderTemplate(context, template.content, parent, clone);\n\n        taxonInfoSlider(item, taxon.traits, rootNode.querySelector('.js-taxon-info-box'), mode);\n\n        switch(rank) {\n            case 'GENUS': \n                rootNode.querySelector('.js-taxon-genus').classList.add('hide-important');\n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'FAMILY': \n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'ORDER':\n                rootNode.querySelector('.js-taxon-rank').classList.add('hide-important');\n                break;\n        }\n\n        renderIcon(item.taxonomy, rootNode);\n\n        if(mode === 'MODAL') {\n\n            rootNode.querySelector('.js-external-links').classList.add('hide');\n\n            rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n            const prev = rootNode.querySelector('#cardModal .js-prev > span');\n            prev.dataset.id = item.id;\n            prev.dataset.transition = 'prev';\n            prev.dataset.modal = 'cardModal';\n\n            const next = rootNode.querySelector('#cardModal .js-next > span');\n            next.dataset.id = item.id;\n            next.dataset.transition = 'next';\n            next.dataset.modal = 'cardModal';\n\n            if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n            if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n\n        }\n        \n        // if(taxon.toxic) {\n        //     document.querySelector('.js-taxon-toxic-warning').innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>';\n        // }\n\n        document.querySelector('.js-external-page-title').innerHTML = `${taxon.name}`;\n        document.querySelector('.js-external-page-body').innerHTML = `<iframe class=\"modal-iframe\" title=\"Wikipedia page for ${taxon.name}\" src=\"${context.wiki}\"></iframe>`;\n\n        const membersCount = document.querySelector('#taxon-card-header .js-names-badge');\n\n        if(!context.occurrences || context.occurrences === 0) membersCount.classList.add('hide-important');\n\n        membersCount.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Members of the ${taxon.name} family`;\n            const members = collection.items.filter(i => i.taxonomy.family.toLowerCase() === taxon.name.toLowerCase());\n            const list = document.querySelector('#badgeListModal .js-modal-text');\n            list.innerHTML = '';\n            members.forEach(member => {\n                list.innerHTML += `<div>${member.name}</div>`;\n            });\n        });\n\n    } catch(e) {\n\n        console.error(e);\n\n        setTimeout(() => {        \n\n            switch(transition) {\n                case 'next':\n                    document.querySelector('#cardModal .carousel-control-next-icon').click();                   \n                    break;\n                case 'prev':\n                    document.querySelector('#cardModal .carousel-control-prev-icon').click();                    \n                    break;\n            }\n        });\n    }\n};","import { isEmpty } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { firestore } from 'api/firebase/firestore';\n\nlet language;\n\nexport const traitValuesHandler = async config => {\n\n    if(language === config.language) return;\n\n    language = config.language;\n\n    if(!isEmpty(store.getState().enums)) return;\n\n    const enums = await firestore.getTraitValues();\n\n    actions.boundUpdateEnums(enums);\n};\n","export const lichen = [\n    {\n        term: \"Lichen\",\n        definition: \"Composite organism of algae or cyanobacteria (or rarely, both), fungi and yeast living in a mutualistic relationship.\",\n        wiki: \"https://en.wikipedia.org/wiki/Lichen\",\n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Fruticose\",\n        definition: \"Growing like tuft or multiple-branched leafless mini-shrub (beardy), upright or hanging down, flat or round 3D branches.\",\n        wiki: \"https://en.wikipedia.org/wiki/Fruticose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Foliose\",\n        definition: \"Having flat, 2D leaf-like structures.\",\n        wiki: \"https://en.wikipedia.org/wiki/Foliose_lichen\",\n        level: 2,\n        image: {\n            url: 'https://content.eol.org/data/media/58/87/e8/509.25630291.260x190.jpg'\n        },\n        branch: 'classification'\n    },\n    {\n        term: \"Crustose\",\n        definition: \"Forming a crust that strongly adheres to a substrate (crusty).\",\n        wiki: \"https://en.wikipedia.org/wiki/Crustose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Leprose\",\n        definition: \"Having a powdery or granular surface.\",\n        wiki: \"https://en.wikipedia.org/wiki/Leprose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Squamulose\",\n        definition: \"Composed of small, often overlapping squamules( scales).\",\n        wiki: \"https://en.wikipedia.org/wiki/Squamulose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Soredium\",\n        definition: \"Common reproductive structures of lichens.\",\n        wiki: \"https://en.wikipedia.org/wiki/Soredium\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Epiphyte\",\n        definition: \"An organism that grows on the surface of a plant and derives its moisture and nutrients from the air, rain, water or surrounding debris.\",\n        wiki: \"https://en.wikipedia.org/wiki/Epiphyte\",\n        branch: 'classification'\n    },\n    {\n        term: \"Gametophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. It is the sexual phase (see Sporophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Gametophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Sporophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. In seed plants it is the roots, stem, leaves, cones and flowers (see Gametophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Sporophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Thallus\",\n        definition: \"Nonreproductive, undifferentiated tissue, or vegetative body part of a lichen. Usually visually prominent.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Thallus type\",\n        definition: \"Means of distinuguishing lichen e.g. foliose, crustose.\", \n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Squamule\",\n        definition: \"One of the scalelike lobes of the thallus of a lichen.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Podetium\",\n        definition: \"The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Apothecium\",\n        definition: \"Wide, open, saucer-shaped or cup-shaped fruit body. Sessile and fleshy.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Rhizine',\n        definition: 'Multiceullar, root-like structures which anchor licen to substrate.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Erhizinate',\n        definition: 'Without rhizines.',\n        technical: 'true',\n        branch: 'general'\n    },\n    {\n        term: 'Hapter',\n        definition: 'Short, peg-like attachments of the lower surface of lichen to the substrate on which they grow.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Common reproductive structures of lichen.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Cortex (lichen)',\n        definition: 'Composed of closely packed fungal hyphae that protects thallus from water loss (evaporation).',\n        branch: 'morphology'\n    },\n    {\n        term: 'Holdfast',\n        definition: 'Means by which a (bushy) lichen is attached to the substrate.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Disc',\n        definition: 'Spore-bearing part of the fruiting body of a lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lobe',\n        definition: 'Leaf-like part of a leafy (foliose) lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Medulla',\n        definition: 'Fungal part of the thallus situated below the skin like upper cortex.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Mycobiont',\n        definition: 'Fungal component of a lichen.',\n        branch: 'general'\n    },\n    {\n        term: 'Photobiont',\n        definition: 'Photosynthetic partner in a lichen (alga or cyanobacterium).',\n        branch: 'general'\n    },\n    {\n        term: 'Cyanobacteria',\n        definition: 'Phylum of bacteria that obtain their energy through photosynthesis. They produce oxygen.',\n        branch: 'classification'\n    },\n    {\n        term: '(Green) Algae',\n        definition: 'Heterogeneous grouping of eukaryotes photosynthesis',\n        branch: 'classification'\n    },\n    {\n        term: 'Placodioid',\n        definition: 'Crustose lichen which radiates out from its centre.',\n        wiki: 'https://en.wikipedia.org/wiki/Placodioid_lichen',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Pruinescence',\n        definition: 'A \"frosted\" or dusty looking coating on top of a surface.',\n        wiki: 'https://en.wikipedia.org/wiki/Pruinescence',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lecanorine',\n        definition: 'Shaped like a plate with a surrounding ring similar tissue to main non-fruiting body (after genus Lecanora).',\n        wiki: 'https://en.wikipedia.org/wiki/Lecanorine_lichen',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Apothecium',\n        definition: 'Wide, open, saucer-shaped or cup-shaped fruit body.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascocarp#Apothecium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascus',\n        definition: 'Spore-bearing cell produced in ascomycete fungi.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascus',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascomycota',\n        definition: '(Ascomycetes or Sac fungi) One of two main fungi divisions (phylum), characterised by spore-containing ascus. Majority of fungal symbionts in lichens are ascomycetes',\n        wiki: 'https://en.wikipedia.org/wiki/Ascomycota',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Basidiomycota',\n        definition: '(Basidiomycetes (Mushrooms)) Reproduce sexually via formation of specialised end cells (basidia) bearing external meiospores.',\n        wiki: 'https://en.wikipedia.org/wiki/Basidiomycota',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Powdery (asexual) reproductive structure (propagule) composed of fungal hyphae wrapped around the photobiont.',\n        wiki: 'https://en.wikipedia.org/wiki/Soredium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Isidium',\n        definition: 'Vegetative (asexual) reproductive structure. Outgrowths from the thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Isidium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Podetium',\n        definition: 'The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Podetium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n];","import * as traitEnums from 'api/traits/trait-types';\nimport { lichen } from 'api/glossary/lichen';\n\nexport const nonTaxaGroup = [\n    { LICHEN_FORM: 'Lichen Form' }     \n];\n\nexport const getNonTaxa = (enums) => {\n    // const SD = Object.keys(enums).length ? enums : traitEnums.enums;\n    const SD = enums;\n    return [\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FRUTICOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Fruticose').definition,\n            quickId: 'Free-standing branching tubes',            \n            names: [ { language: \"en\", name: 'Fruticose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.SOIL}, ${SD.substrate.ROCKS}` },  \n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Letharia vulpina', 'Evernia prunastri', 'Ramalina polymorpha', 'Roccella phycopsis', 'Ramalina farinacea' ],\n            wiki: 'https://en.wikipedia.org/wiki/Fruticose_lichen',\n            url: '81/9d/a2/542.9769039745.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FOLIOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Foliose').definition,\n            quickId: 'Leaflike, with flat sheets of tissue not tightly bound',\n            names: [ { language: \"en\", name: 'Foliose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW },\n                { name: SD.name.USAGE, value: SD.usage.FOOD, examples: [ { language: 'en', value: 'Deer, goats, and caribou' } ] },\n                { name: SD.name.USAGE, value: SD.usage.BIRDS_NEST },\n                { name: SD.name.LIFE_SPAN, value: '30-60a' },\n                { name: SD.name.MEDICINAL_PROPERTIES, value: `${SD.medicinalProperties.ANTIBIOTIC}`},\n                { name: SD.name.CHARACTERISTIC, value: SD.characteristic.BIOINDICATOR},\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Lobaria pulmonaria', 'Xanthoria parietina'  ],\n            genera: [ 'Usnea', 'Cladonia' ],\n            wiki: 'https://en.wikipedia.org/wiki/Foliose_lichen',\n            url: '81/66/25/542.8580717370.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.CRUSTOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Crustose').definition,\n            quickId: 'Crustlike, growing tight against the substrate',\n            names: [ { language: \"en\", name: 'Crustose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.HIGH }\n            ],\n            examples: [ 'Graphis scripta', 'Diploschistes scruposus', 'Caloplaca ochracea', 'Ophioparma ventosa' ],\n            wiki: 'https://en.wikipedia.org/wiki/Crustose',\n            url: '7f/69/15/542.3258067212.260x190.jpg'\n        },\n        // {\n        //     group: nonTaxaGroup[0].LICHEN_FORM,\n        //     id: SD.thallusType.SQUAMULOSE,\n        //     type: SD.nonTaxaType.FORM,\n        //     definition: lichen.find(l => l.term === 'Squamulose').definition,\n        //     quickId: 'Tightly clustered and slightly flattened pebble-like units',\n        //     names: [ { language: \"en\", name: 'Squamulose lichen'}],\n        //     traits: [\n        //         { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n        //         { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.MEDIUM }\n        //     ],\n        //     examples: [ 'Squamarina cartilaginea', 'Vahliella leucophaea', 'Cladonia subcervicornis' ],\n        //     wiki: 'https://en.wikipedia.org/wiki/Squamulose'\n        // },\n    ]\n}","import{ take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport * as group from 'api/snapdragon/non-taxa';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport cardTemplate from 'ui/screens/cards/non-taxon-card-template.html';\n\nconst subscriptions = [];\n\nexport const subscribeToNonTaxaSelection = callback => {\n    subscriptions.push(callback);\n};\n\nexport const renderNonTaxonCard = (mode = 'STAND_ALONE', keyTrait, parent = DOM.rightBody, url, isInCarousel = false) => {\n\n    const prev = document.querySelector('#cardModal .js-prev');\n    const next = document.querySelector('#cardModal .js-next');\n\n    if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n    if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n    \n\n    const { enums, config } = store.getState();\n\n    const nonTaxa = group.getNonTaxa(enums).filter(nt => nt.group === group.nonTaxaGroup[0].LICHEN_FORM);\n\n    nonTaxa.forEach(nt => {\n        nt.name = itemProperties.getVernacularName(nt, config, false, 'name');\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cardTemplate;\n    \n    const onChange = items => {\n        subscriptions.forEach(sub => sub(items));\n    };\n\n    const prepImages = (items) => {\n        const itemImagesArray = items.map(item => {\n            return prepImagesForCarousel(item, config, imageUseCases.NON_TAXON_CARD);\n        });\n        const itemImages = utils.shuffleArray([].concat(...itemImagesArray));\n        return take(9, itemImages);\n    };\n\n    const callback = async id => {\n\n        const nonTaxon = nonTaxa.find(nt => nt.id === id)\n\n        let items = await firestore.getSpeciesByNameInParallel(nonTaxon.examples);\n            items = items.filter(item => item.images);\n\n        const portraitImagesNode = document.querySelector('.js-non-taxon-card-images');\n\n        const images = prepImages(items);\n\n        if(nonTaxon.type) {\n            document.querySelector('.js-species-header img').src = `https://content.eol.org/data/media/${nonTaxon.url}`;\n        } else {\n            config.isPortraitMode ? imageSlider({ config, images, portraitImagesNode }) : onChange(images);\n        }\n\n        const wikiNode = document.querySelector('.js-non-taxon-card-wiki');\n        const lookup = { name: nonTaxon.name };\n\n        const idNode = document.querySelector('.id-box > div:nth-child(2) > div');\n              idNode.innerHTML = nonTaxon.quickId;\n\n        const definitionNode = document.querySelector('.js-non-taxa-definition div');\n              definitionNode.innerHTML = nonTaxon.definition;\n\n        const nameNode = document.querySelector('.js-non-taxon-card .js-names-container > div:nth-child(1)');\n              nameNode.innerHTML = nonTaxon.id;\n\n        if(mode === 'MODAL') {\n        } else {\n            renderWikiModal(lookup, wikiNode, config);    \n            renderWiki(wikiNode, lookup, config.language);\n        }\n    };\n\n    let rootNode;\n\n    switch(mode) {\n        case 'STAND_ALONE':\n            rootNode = document.querySelector('.right-body');\n            break;\n        case 'SWAP_OUT':\n            rootNode = document.querySelector('.js-taxon-container');\n            break;\n        case 'MODAL':\n            rootNode = document.querySelector('#cardModal');\n            break;\n    }\n\n    parent.innerHTML = '';\n\n    renderTemplate({group: nonTaxa, image: scaleImage({ url })}, template.content, parent);\n\n    if(mode === 'MODAL') {\n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = `Lichen Forms`;\n    }\n\n    rootNode.querySelectorAll('.js-non-taxa .btn.btn-secondary').forEach(form => {\n        form.addEventListener('click', event => {\n            const id = event.target.id;\n            callback(id);\n        });\n    });\n\n    const id = keyTrait || nonTaxa[0].id;\n    document.getElementById(id).click();\n};","import { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { iconicTaxa, matchIcon } from 'api/snapdragon/iconic-taxa';\n\nimport speciesTemplate from 'ui/screens/lists/species-table-template.html';\n\nexport const buildTable = (collection, args) => {\n\n  try {\n\n    const { config, enums, overrideParent } = args;\n\n    const template = document.createElement('template');\n\n    const wide = window.matchMedia(\"(min-width: 1024px)\").matches;\n\n    const getTraitName = (item, enums) => {\n        let traitName = '';        \n        let keyTratLinkClass = 'capitalise underline-link js-key-trait-link';\n        item.taxonomy.phylum = item.taxonomy.phylum || '';\n        if(item.taxonomy) {\n            switch(item.taxonomy.phylum.toLowerCase()) {\n                case 'ascomycota':\n                    traitName = item.taxonomy.order.toLowerCase() === 'pezizales'\n                        ? enums.name.HOW_EDIBLE\n                        : enums.name.THALLUS_TYPE;\n                    if(item.taxonomy.order.toLowerCase() === 'pezizales') keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                case 'basidiomycota':\n                    traitName = enums.name.HOW_EDIBLE;\n                    keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                default:\n                    traitName = '-';\n            }        \n        } else {\n            keyTratLinkClass = 'js-key-trait-link';\n        }\n        return { traitName, keyTratLinkClass };\n    }\n\n    const getOrderLinkClass = item => {\n        let orderLinkClass;\n        if(item.taxonomy && item.taxonomy.order) {\n            orderLinkClass = item.order\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link';\n        } else { orderLinkClass = 'snap-no-link-btn no-underline-link js-taxon-card-link'; }\n        return orderLinkClass;\n    };\n\n    const getIconicTaxonIcon = item => {\n        let iconicTaxonIcon, hideFungiIcon;\n        if(item.iconicTaxon.toLowerCase() === 'fungi') {\n            iconicTaxonIcon = 'hide';\n            hideFungiIcon = '';\n        } else {\n            iconicTaxonIcon = matchIcon(item.taxonomy, iconicTaxa);\n            hideFungiIcon = 'hide';\n        }\n        return { iconicTaxonIcon, hideFungiIcon };\n    };\n\n    const itemImages = collection.items.map(item => { \n\n        let image = item.images.find(i => i.starred) || utils.shuffleArray(item.images)[0];\n            image = scaleImage(image, imageUseCases.SPECIES_LIST, config);\n\n        const { traitName, keyTratLinkClass } = getTraitName(item, enums);\n        const { iconicTaxonIcon, hideFungiIcon } = getIconicTaxonIcon(item);\n\n        const itemImage = {\n            id: item.id,\n            name: item.name,\n            itemName: item.name,\n            genus: item.taxonomy.genus,\n            species: item.taxonomy.species,\n            genusLinkClass: item.genus\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            shortName: itemProperties.trimLatinName(item.name),\n            taxonomy: item.taxonomy,\n            iconicTaxon: item.iconicTaxon,\n            vernacularName: item.vernacularName,\n            snapIndex: item.snapIndex,\n            license: image.license,\n            url: image.url,\n            small: image.small,\n            rightsHolder: image.rightsHolder || 'Public domain',\n            source: image.source,\n            shortName: itemProperties.trimLatinName(item.name),\n            keyTrait: utils.capitaliseFirst(itemProperties.getActiveTrait(item, [{ name: traitName, formatter: trait => trait[0] }])) || '',\n            keyTratLinkClass: keyTratLinkClass,\n            familyLinkClass: item.family\n                                ? 'snap-link-btn underline-link js-taxon-card-link' \n                                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            orderLinkClass: getOrderLinkClass(item),\n            taxonomy: item.taxonomy || { family: '', order: ''},\n            iconicTaxonIcon,\n            hideFungiIcon, \n            hasVideoClassName: !collection.hasVideo ? 'hide-column' : '',\n            hasTaxonClassName: collection.hasVideo ? 'hide-column' : '',\n            provider: image.provider || ''\n        };\n\n        return itemImage;\n    });\n\n    template.innerHTML = speciesTemplate;\n\n    let parent = config.isPortraitMode\n            ? overrideParent\n            : document.querySelector(`.js-species-container[data-container-id=\"${collection.id}\"]`);\n        parent.innerHTML = '';\n\n    renderTemplate({ id: collection.id, itemImages }, template.content, parent);\n\n    const table = parent.querySelector(`table#species_list_id_${collection.id}`);\n\n    const keyTraits = table.querySelectorAll('.js-key-trait-link');\n\n    keyTraits.forEach(vn => {\n        const keyTrait = vn.dataset.keyTrait;\n        const span = document.createElement('span');\n        switch(keyTrait) {                \n            case enums.howEdible.CHOICE:\n                span.innerHTML = '<span class=\"icon choice\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.EDIBLE:\n                span.innerHTML = '<span class=\"icon edible\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.INEDIBLE:\n                span.innerHTML = '<span class=\"icon inedible\"></span>';\n                vn.append(span);\n                break;\n            case enums.howEdible.POISONOUS:\n            case enums.howEdible.DEADLY:\n                span.innerHTML = '<span class=\"icon toxic\"></span>';\n                vn.append(span);\n                break;\n        }\n    });\n\n    const tbody = table.querySelector('.species-table tbody');\n\n    if(!tbody) return;\n    \n    const caption = document.createElement('caption');\n          caption.innerHTML = `Species in ${collection.name}`;\n          caption.classList.add('visually-hidden');\n\n    const thead = document.createElement('thead');\n\n    table.insertBefore(thead, tbody);\n    table.insertBefore(caption, thead);\n\n    const headerRow = document.createElement('tr');\n          headerRow.classList.add('table-header');\n    const imageHeader = document.createElement('th');\n    const speciesHeader = document.createElement('th');\n    const familyHeader = document.createElement('th');\n    const traitNameHeader = document.createElement('th');\n    const iconicTaxonHeader = document.createElement('th');\n\n    const accordionHeader = document.createElement('th');\n          accordionHeader.classList.add('not-sortable');\n\n    speciesHeader.innerHTML = '<span>Species</span';\n    familyHeader.innerHTML = '<span>Family</span><span>Order</span>';\n    traitNameHeader.innerHTML = '<span></span>';\n    iconicTaxonHeader.innerHTML = '<span><i class=\"fas fa-sliders-h\"></i></span>';\n    imageHeader.innerHTML = overrideParent ? '' : '<span><i class=\"fas fa-undo\"></i></span>';\n    if(wide) {        \n        headerRow.appendChild(imageHeader);\n        headerRow.appendChild(speciesHeader);    \n        headerRow.appendChild(familyHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    } else {\n        headerRow.appendChild(imageHeader);    \n        headerRow.appendChild(speciesHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    }\n    if(collection.behaviour === 'static') {\n        headerRow.appendChild(accordionHeader);\n    }\n\n    if(!tbody.querySelector('.table-header')) {\n        thead.appendChild(headerRow);\n    }\n\n    const sortableCalback = () => {};\n\n    utils.makeSortable(document, sortableCalback, wide);\n\n    return new Promise(resolve => resolve({isReady: true}));\n\n  } catch(e) {\n    logError('buildTable', e);\n    return new Promise(resolve => resolve({isReady: false}));\n  }\n}\n","import { actions } from 'redux/actions/action-creators';\n\nconst onSpeciesTimeMatchListeners = [];\nconst onNoteTimeMatchListeners = [];\n\nconst onSpeciesTimeMatch = listener => {    \n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n    onSpeciesTimeMatchListeners.push(listener);\n};\n\nconst onNoteTimeMatch = listener => {    \n    while(onNoteTimeMatchListeners.length > 0) {\n        onNoteTimeMatchListeners.pop();\n    }\n    onNoteTimeMatchListeners.push(listener);\n};\n\nconst onSpeciesPlayRequestListeners = [];\n\nconst onSpeciesPlayRequest = listener => {\n    onSpeciesPlayRequestListeners.push(listener);\n};\n\nconst onPlayerReadyListeners = [];\nconst onPlayerStateChangeListeners = [];\n\nconst subscribeToPlayerStateChange = listener => {\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n    onPlayerStateChangeListeners.push(listener);\n};\n\nlet player, isPlayerReady = false;\n\nconst readyPlayer = () => {\n\n    const onPlayerReady = event => {\n        player = event.target;\n        isPlayerReady = true;\n    };\n    \n    const onPlayerStateChange = event => {\n        player = event.target;\n        if(player) {\n            onPlayerStateChangeListeners.forEach(listener => listener(player));\n        }\n     };\n    \n    new YT.Player('embedded-video', {\n        playerVars: { 'autoplay': 1 },\n        events: {\n        'onReady': onPlayerReady,\n        'onStateChange': onPlayerStateChange\n        }\n    });\n};\n\nconst playVideoFrom = time => {\n\n    if(! typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n    if(! typeof player.seekTo === 'function' || player.seekTo === undefined) return;\n\n    player.seekTo(time + 1);\n    const state = player.getPlayerState();\n    if(state === states[0].key || state === states[2].key) {\n        player.playVideo();\n    }\n};\n\n// -1 – unstarted\n//  0 – ended\n//  1 – playing\n//  2 – paused\n//  3 – buffering\n//  5 – video cued\n\nconst states = [ { key: -1, value: 'unstarted' }, { key: 1, value: 'playing' }, { key: 2, value: 'paused' }, { key: 3, value: 'buffering' } ];\n\nconst setVideoState = (videoPlayer, lesson) => {\n\n    let state = '';\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === lesson.id);\n    \n    if(activeLesson) {\n        if(lesson.id === activeLesson.collectionId) {\n        state = activeLesson.pausedAt ? `Video paused at ${activeLesson.speciesName}` : ''; \n        }\n    } else {\n        state = '';\n    }\n\n    return state;\n\n};\n\nconst isVideoPlayerReady = videoId => {\n    if(isPlayerReady) {\n        const doIdsMatch = videoId === player.getVideoData().video_id;\n        return isPlayerReady && doIdsMatch;\n    } else {\n        return false;\n    }\n};\n\nconst destroyPlayer = () => {\n\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n\n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n\n    if (!player) {\n\n      } else {\n        player.stopVideo();\n        player.destroy();\n        player = null;  // Clear out the reference to the destroyed player\n      }\n};\n\nconst saveVideoState = player => {\n    actions.boundUpdateVideoPlayer(player);\n};\n\nconst getPlayerTime = () => {\n    return Math.floor(player.getCurrentTime());\n};\n\nexport const videoHandler = {\n    readyPlayer,\n    onSpeciesTimeMatchListeners,\n    onNoteTimeMatchListeners,\n    onSpeciesTimeMatch,\n    onNoteTimeMatch,\n    onSpeciesPlayRequestListeners,\n    onSpeciesPlayRequest,\n    onPlayerReadyListeners,\n    subscribeToPlayerStateChange,\n    playVideoFrom,\n    states,\n    setVideoState,\n    destroyPlayer,\n    saveVideoState,\n    isVideoPlayerReady,\n    getPlayerTime\n};","import{ contains } from 'ramda';\n\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\n\nimport videoTemplate from 'ui/screens/home/home-lesson-intro-video-template.html';\n\nexport const videoSetup = (collection, videoPlayer, parent, startTime) => {\n\n    parent.innerHTML = '';\n   \n    const template = document.createElement('template');\n          template.innerHTML = videoTemplate;\n\n    collection.video.webLabel = collection.video.links[1].label;\n    collection.video.webUrl = collection.video.links[1].url;\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === collection.id) || { collectionId: collection.id, startAt: collection.video.startAt || 0 };\n          activeLesson.playAt = activeLesson.pausedAt || activeLesson.startAt;\n\n    renderTemplate({ video: { ...collection.video, playAt: activeLesson.playAt, location: collection.video.location || '' } }, template.content, parent);\n\n    const timeBeforeVideoPlayerReady = 1000;\n\n    setTimeout(() => {\n\n        videoHandler.readyPlayer();\n\n        let checkInt;\n\n        const checkCurrentTime = player => {\n\n            checkInt = setInterval(function() {\n               const time = Math.floor(player.getCurrentTime());               \n               const match = matchSpeciesTime(time, collection);\n               if(!!match) {\n                   videoHandler.onSpeciesTimeMatchListeners.map(listener => listener(collection, match));\n               }\n               if(!collection.notes) return;\n               const noteMatch = collection.notes.find(note => contains(time, note.time));\n               if(noteMatch) {\n                   videoHandler.onNoteTimeMatchListeners.map(listener => listener(collection, noteMatch));\n               }\n            }, 1000);\n        };\n\n        const onPlayerStateChangeCallback = player => {\n\n            if(!typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n\n            const playerState = player.getPlayerState();\n\n            switch(playerState) {\n                case videoHandler.states.find(state => state.value === 'playing').key: // 1\n                    checkCurrentTime(player);\n                    break;\n                case videoHandler.states.find(state => state.value === 'paused').key: // 2\n                    clearInterval(checkInt);\n                    checkInt = null;\n                    break;\n                default:\n                    checkCurrentTime(player);\n            }\n        };\n\n        videoHandler.subscribeToPlayerStateChange(onPlayerStateChangeCallback);\n\n        if(startTime) {\n            setTimeout(() => {\n                videoHandler.playVideoFrom(startTime);\n            }, 1000);\n        }        \n\n    }, timeBeforeVideoPlayerReady);\n        \n    const video = document.getElementsByTagName('iframe')[0];\n    const videoWidth = video.offsetWidth;\n          video.height = videoWidth * 9/16;\n  \n};\n\nexport const matchSpeciesTime = (time, collection) => {\n  const species = collection.items ? collection.items.filter(sp => sp.time) : collection.species.filter(sp => sp.time);\n  const match = species.find(sp => contains(time, sp.time));\n  return match;\n}\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport definitionTemplate from 'ui/screens/lists/species-list-definition-insert.html';\n\nlet currentlyActiveRow = null;\nlet currentlyActiveSpecies;\n\nexport const onSpeciesChangeHandler = species => {\n\n    try {\n\n        const id = species.id || species.eolId;\n        const tr = document.querySelector(`#id_${id}`);\n\n        currentlyActiveRow = tr;\n        currentlyActiveSpecies = species;\n        \n    } catch(e) {\n      logError(onSpeciesChangeHandler, e);\n    }\n};\n\nexport const openNoteHandler = (note, time) => {\n\n    if(Math.floor(note.time) !== time) return;\n\n    let parent = document.getElementById('insertParent');\n\n    if(parent) parent.remove();\n\n    const template = document.createElement('template');\n          template.innerHTML = definitionTemplate;\n\n    const insert = document.createElement('div');\n          insert.setAttribute('id', 'insertParent');\n\n    if(note.colCount) {\n        insert.classList.add(`col-count-${note.colCount}`);\n        insert.innerHTML = note.description.replace(/\\r?\\n/g, '<br />');\n    }\n\n    if(!currentlyActiveRow) {\n        // first row, before any species have been matched\n        currentlyActiveRow = document.querySelector('.js-list-item'); // first by default\n    }\n\n    currentlyActiveRow.parentElement.insertBefore(insert, currentlyActiveRow);\n\n    if(!note.colCount) {        \n        parent = document.getElementById('insertParent');\n        parent.innerHTML = '';\n        renderTemplate({ note }, template.content, parent);\n        const noteText = document.querySelector('#insertParent > div:nth-child(1) > div:nth-child(2)');\n              noteText.innerHTML =noteText.innerHTML.replace(/\\r?\\n/g, '<br />');\n    }    \n};\n","import { contains } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { utils } from 'utils/utils';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { modalImageHandler } from 'ui/helpers/image-handler';\nimport { buildTable } from 'ui/screens/lists/species-table';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { onSpeciesChangeHandler, openNoteHandler } from 'ui/screens/lists/species-list-definition-insert';\n\nexport const renderSpeciesList = (lesson, args) => {\n\n  const init = async () => {\n\n    const { callingParentContainer, isInCarousel = false } = args;\n\n    const { config, history, enums: traitEnums, collections  } = store.getState();    \n\n    // to ensure we have latest item list if species has been added\n    const collection = collections.find(c => c.id === lesson.id);\n\n    const openAccordionHandler = (species, accordion) => {\n        \n        accordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n        \n        openSpeciesDescriptionHandler(collection, species, true, false);\n\n        const closeAccordionHandler = event => {\n            // remove current close accordion handler\n            accordion.removeEventListener('click', closeAccordionHandler);\n            // change direction of chevron       \n            accordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${species.name}\"></i>`;\n            // attach new open accordion listener\n            accordion.addEventListener('click', event => {\n                openAccordionHandler(species, accordion);\n            });\n            // remove the species description - handled in group action\n            const description = document.querySelector('.species-description');\n            if(description) {\n                description.parentNode.removeChild(description);\n            }\n        };\n\n        // attach close accordion handler\n        accordion.addEventListener('click', closeAccordionHandler);\n    };\n\n    const userClickHandlers = () => {\n\n        const listItemImages = document.querySelectorAll('.table-row img');\n\n              listItemImages.forEach(itemImage => {                 \n                  const item = collection.items.find(item => item.name === itemImage.dataset.itemName)\n                  modalImageHandler(itemImage, item, collection, config); \n              });\n\n        const accordions = document.querySelectorAll('.js-accordion');\n\n              accordions.forEach(accordion => {\n                  const accordionHandler = event => {\n                      const species = collection.items.find(item => item.name === event.currentTarget.dataset.name);\n                      if(species) {\n                        openAccordionHandler(species, accordion);\n                      }\n                  };\n                  accordion.addEventListener('click', accordionHandler);\n              });\n\n        const youtubeIcons = document.querySelectorAll('.js-youtube');\n              youtubeIcons.forEach(icon => {                  \n                  icon.addEventListener('click', event => {       \n\n                    event.stopPropagation();\n\n                    const activeIcon = event.currentTarget;\n                          activeIcon.classList.add('youtube-green-fg');\n                    const speciesName = activeIcon.dataset.name;\n\n                    const species = { ...collection.items.find(item => item.name == speciesName), ...collection.species.find(item => item.name == speciesName) };\n\n\n                    openSpeciesDescriptionHandler(collection, species, true);\n\n                    if(species && species.time) {\n\n                        videoHandler.isVideoPlayerReady(collection.video.id)\n                            ? videoHandler.playVideoFrom(species.time[0])\n                            : videoSetup(collection, store.getState().videoPlayer || [], DOM.rightBody, species.time[0]);\n                    }\n\n                    updateVideoPlayer(collection, species);\n                  });\n              });\n\n        const cardModal = document.querySelector('#cardModal .js-modal-body');\n\n        setTimeout(() => {\n            \n            const speciesCardLinks = document.querySelectorAll('.js-test-card-container-link');\n                  speciesCardLinks.forEach((link, index) => {                \n                      link.addEventListener('click', event => {                    \n                        const name = event.target.dataset.name;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'species-card';\n                        renderCard(collection, 'MODAL', collection.items.find(i => i.name === name), cardModal, isInCarousel);\n                      });\n                  });\n\n            const traitCardLinks = document.querySelectorAll('.js-key-trait-link');\n                  traitCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const keyTrait = event.target.dataset.keyTrait;\n                        const url = event.target.dataset.url;\n                        renderNonTaxonCard('MODAL', keyTrait, cardModal, url);\n                    });\n                  });\n\n            const taxonCardLinks = document.querySelectorAll('.js-taxon-card-link');\n                  taxonCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const taxon = event.target.dataset.family || event.target.dataset.order;\n                        const name = event.target.dataset.name;\n                        const rank = event.target.dataset.rank;\n                        document.querySelector('#cardModal .prev > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'taxon-card';\n                        document.querySelector('#cardModal .next > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .next > span').dataset.card = 'taxon-card';\n                        renderTaxonCard(collection, 'MODAL', collection.items.find(i => i.taxonomy[rank] === name), cardModal, taxon, rank, isInCarousel);\n                    });\n                  });\n\n            document.querySelectorAll('.mushroom-icon').forEach(icon => {\n                icon.innerHTML = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg>';\n            });\n\n            const nthChild = config.isLandscapeMode ? 5 : 3;\n            const taxonIcons = document.querySelectorAll(`.table-row.js-list-item td:nth-child(${nthChild}) > span`);\n\n            if(!history) return;\n\n            const noWrongAnswersForThisSpecies = [];\n            history.scores.map(score => score.failsTotals).forEach(totals => {\n                for (let [key, anyWrongAnwers] of Object.entries(totals)) {\n                    if(anyWrongAnwers == false) {\n                        noWrongAnswersForThisSpecies.push(parseInt(key));\n                    }\n                }\n            });\n\n            taxonIcons.forEach(icon => {\n                if(contains(parseInt(icon.id), noWrongAnswersForThisSpecies)) {\n                    icon.classList.add('correct');\n                }\n            });\n        });\n    };\n\n    if(!!collection.notes && !!collection.notes.time) {\n        collection.notes.forEach(n => sp.firstTime = n.time[0]);\n        collection.notes = utils.sortBy(collection.notes, 'firstTime', 'asc');\n    }\n\n    const table = await buildTable(collection, { config, enums: traitEnums, overrideParent: callingParentContainer });\n\n    if(!table.isReady) return;\n\n    userClickHandlers();\n\n    const btnBeginLesson = callingParentContainer.querySelector('.js-btn-current-lesson-begin');\n          btnBeginLesson.addEventListener('click', () => {\n            lessonStateHandler.changeRequest({\n                requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n                requestArgs: {\n                  id: collection.id\n                }\n              });\n          });\n\n    const openSpeciesDescriptionHandler = (collection, species, enableScroll = true, activateYoutubeIcon = true) => {\n\n        try {\n\n            const parent = document.getElementById('insertParent');\n            if(parent) parent.remove();\n\n            const { accordions } = closeOpenAccordions(species.name);\n\n            const activeAccordion = accordions.find(accordion => accordion.dataset.name === species.name);\n            \n            if(activeAccordion) {\n                activeAccordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n\n                if(activateYoutubeIcon) {\n                  const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                        activeYouTubeIcon.classList.add('youtube-green-fg');\n              }\n            }\n\n            // if(activateYoutubeIcon) {\n            //     const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n            //           activeYouTubeIcon.classList.add('youtube-green-fg');\n            // }\n\n            let description = species.description;\n                description = !!description ? description : (species.traits.description && species.traits.description.value) ? species.traits.description.value[0] : '';\n\n            if(description) {\n\n                const id = species.id || species.eolId;\n                const tr = document.querySelector(`#id_${id}`);\n                \n                const td = document.createElement('td');\n\n                const text = document.createElement('div');\n                      text.classList.add('inserted-td');\n                      text.innerHTML = description.replace(/\\r?\\n/g, '<br />');\n\n                td.appendChild(text);\n\n                const insert = document.createElement('div');\n                      insert.classList.add('table-row');\n                      insert.classList.add('species-description');\n                      insert.appendChild(td);\n\n                tr.parentElement.insertBefore(insert, tr.nextSibling);\n\n                const scrollIntoView = (rowHeight, noOfRows) => {\n\n                    const scroll = document.querySelector('.scrollable');\n                    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhStandardBlock').replace('px', ''));\n                    const unit = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vh').replace('px', ''));\n                    const top = (standardBlock * 2) + (rowHeight * (noOfRows - 1)) - ( 2 * unit);\n\n                    scroll.scrollTop = top;\n                };\n\n                if(enableScroll) {\n                    config.isLandscapeMode \n                        ? tr.previousElementSibling.scrollIntoView()\n                        : scrollIntoView(tr.offsetHeight, species.snapIndex);\n                }\n            }\n        } catch(e) {\n          logError(openSpeciesDescriptionHandler, e);\n        }\n    };\n\n    videoHandler.onSpeciesTimeMatch((collection, species) => {\n\n        openSpeciesDescriptionHandler(collection, species);\n        updateVideoPlayer(collection, species);\n        onSpeciesChangeHandler(species);\n    });\n\n    videoHandler.onNoteTimeMatch((collection, note) => {        \n        openNoteHandler(note, videoHandler.getPlayerTime());\n    });\n  };\n\n  init();\n};\n\nlet currentIndex = 0;\n\nconst carouselControlHandler = event => {\n\n    const { collection } = store.getState();\n    \n    let transition = event.target.dataset.transition;\n    let modal = event.target.dataset.modal;\n    let card = event.target.dataset.card;\n    let rank =  event.target.dataset.rank;\n\n    switch(transition) {\n        case 'prev':\n            currentIndex--;\n            currentIndex = currentIndex === -1 ? collection.items.length -1 : currentIndex;\n            break;\n        case 'next':\n            currentIndex++;\n            currentIndex = currentIndex === collection.items.length -1 ? 0 : currentIndex;\n            break;\n    }\n\n    let nextItem = collection.items.find((item,index) => index === currentIndex);\n\n    const parent = document.querySelector(`#${modal} .js-modal-body`);\n    \n    switch(card) {\n        case 'species-card':\n            renderCard(collection, 'MODAL', nextItem, parent, isInCarousel);\n            break;\n        case 'taxon-card':\n            renderTaxonCard(collection, 'MODAL', nextItem, parent, null, rank, isInCarousel);\n            break;    \n    }    \n};\n\nconst prev = document.querySelector('#cardModal .js-prev');\nconst next = document.querySelector('#cardModal .js-next');\n\nif(prev) prev.addEventListener('click', carouselControlHandler);\nif(next) next.addEventListener('click', carouselControlHandler);\n\nconst prevTaxon = document.querySelector('#cardModal .js-prev');\nconst nextTaxon = document.querySelector('#cardModal .js-next');\n\nif(prevTaxon) prevTaxon.addEventListener('click', carouselControlHandler);\nif(nextTaxon) nextTaxon.addEventListener('click', carouselControlHandler);\n\nconst updateVideoPlayer = (collection, species) => {\n        \n    const playerRecords = store.getState().videoPlayer || [];\n    \n    let activeLesson = playerRecords.find(p => p.collectionId === collection.id); \n    \n    if(!activeLesson) {\n        activeLesson = { collectionId: collection.id };\n        playerRecords.push(activeLesson);\n    };\n\n    activeLesson.speciesName = species.name;\n    activeLesson.pausedAt = species.time ? species.time[0] : 0;\n\n    videoHandler.saveVideoState(playerRecords);    \n};\n\nconst closeOpenAccordions = speciesName => {\n\n    const accordions = Array.from(document.querySelectorAll('.js-accordion'));\n    const openAccordions = accordions.filter(accordion => accordion.dataset.name !== speciesName);\n        \n    openAccordions.forEach(inactiveAccordion => {\n        \n        if (inactiveAccordion.innerHTML.indexOf('fa-chevron-up') > -1) {\n            \n            inactiveAccordion.click();\n            inactiveAccordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${speciesName}\"></i>`;\n            \n            const inActiveYouTubeIcon = inactiveAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                  inActiveYouTubeIcon.classList.remove('youtube-green-fg');\n        }\n    });\n\n    const parent = document.querySelector('.species-table tbody');\n    const currentDescriptions = document.querySelectorAll('.species-description');\n            currentDescriptions.forEach(tr => parent.removeChild(tr));\n\n    return { accordions };\n};","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getInatSpecies } from 'api/inat/inat';\nimport { getPlace } from 'geo/geo';\nimport { firestore } from 'api/firebase/firestore';\nimport { enums } from 'ui/helpers/enum-helper';\n\nasync function getItems(collection, config) {\n\n  try {\n\n    if(collection.behaviour === 'dynamic') {\n\n        const collectionIsUnchanged = \n            collection.items && collection.items.length > 0 && collection.items[0].collectionId === collection.id && \n            collection.speciesRange === config.guide.speciesRange;\n\n        if(!!collectionIsUnchanged) {\n            return new Promise(resolve => {\n                resolve(collection.items);\n            });\n\n        } else {\n\n            if(config.guide.guideType === 'LOCATION') {\n  \n              try {\n                const place = await getPlace(config, true);\n\n                config.guide.coordinates = {\n                    long: place.query[0],\n                    lat: place.query[1]\n                };\n              } catch (e) {\n                logError('Error for getPlace: ', e);\n              }\n\n              try {\n                return await getInatSpecies(config);\n              } catch(e) {\n                logErrorg('getInatSpecies in getItems: ', e);\n              }\n            }\n            else { // INAT\n                return await getInatSpecies(config);\n            }            \n        }\n    }\n    else if(collection.behaviour === 'static') { // names only available at this point e.g. 'PICKER';\n        return getSnapdragonSpeciesData(collection.species);\n    }\n  } catch (e) {\n    logError('Error for getItems: ', e);\n    return [];\n  }\n};\n\nconst loadCollection = async (collection, config) => {\n    \n    try {\n        \n        config.collection = { id: collection.id };\n        \n        if(collection.items.length > 0) {\n          // this point is often reached…\n         snapLog(`no collection items in loadCollection, collection: ${collection.name}`);\n          return collection;\n        };\n\n        let items = [];\n\n        try {\n          items = await getItems(collection, config);\n        } catch(e) {\n          logError('getItems in loadCollection', e);\n        }\n\n        if(!items) {\n         snapLog('no items from getItems in loadCollection to filter');\n          return collection;\n        };\n\n        collection.items = items.filter(item => item.name);\n\n        if(collection.nextItem) return; // after refreshing or returning to the page (using rehydrated collection)\n\n        if(contains('lepidoptera', collection.iconicTaxa.map(taxon => taxon.id)) && !contains('insecta', collection.iconicTaxa.map(taxon => taxon.id))) {\n            const insecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() === 'insecta');\n            const lepidoptera = insecta.filter(i => i.taxonomy.order.toLowerCase() === 'lepidoptera');\n            const noninsecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() !== 'insecta');\n            collection.items = [ ...lepidoptera, ...noninsecta ];\n        }\n\n        if(collection.behaviour === 'dynamic') {                    \n            collection.speciesRange = config.guide.speciesRange;\n        }\n\n        let itemReadyCollection;\n\n        if(collection.items) {\n\n            itemReadyCollection = await loadCollectionItemProperties(collection, config);\n            \n            try {\n                return itemReadyCollection;\n            } catch (e) {\n              logError('Error for loadCollectionItemProperties: ', e);\n            }\n\n        } else {\n           snapLog('No results for callbackWhenNoResults');\n            return collection;\n        }\n    } catch (e) {\n      logError('Error for loadCollection: ', e);\n    }\n};\n\nconst loadCollectionItemProperties = async (collection, config) => {\n\n    // collection.items = collection.items.filter(i => i);\n\n    if(collection.behaviour === 'dynamic') {\n        collection.items = utils.sortBy(collection.items.filter(item => item), 'observationCount', 'desc');\n    } else {\n        collection.items.forEach(sp => {\n            if(sp.time) {\n                sp.firstTime = sp.time[0];\n            }\n        });\n        collection.items = utils.sortBy(collection.items, 'firstTime', 'asc');\n    }\n\n    const families = [...new Set(collection.items.map(i => i.taxonomy.family))];\n    const orders = [...new Set(collection.items.map(i => i.taxonomy.order))];\n    const genera = [...new Set(collection.items.map(i => i.taxonomy.genus).filter(g => g))];\n    let familyTaxa = [], orderTaxa = [], genusTaxa = [];\n    let taxa = await firestore.getTaxaNames();\n    taxa = taxa[0].value;\n    const getGenusTaxa = async (genera) => {\n        return Promise.all(genera.map(async (genus) => {\n            const genusTaxon = await firestore.getTaxonByName(config, genus);\n            if(Object.entries(genusTaxon).length > 0 && genusTaxon.constructor === Object)\n                genusTaxa.push(genusTaxon);\n            return genusTaxa;\n        }));\n    };\n    await getGenusTaxa(genera);\n    const getFamilyTaxa = async (families) => {\n        return Promise.all(families.map(async (family) => {\n            const familyTaxon = await firestore.getTaxonByName(config, family);\n            if(Object.entries(familyTaxon).length > 0 && familyTaxon.constructor === Object)\n                familyTaxa.push(familyTaxon);\n            return familyTaxa;\n        }));\n    };\n    await getFamilyTaxa(families);\n    const getOrderTaxa = async (orders) => {\n        return Promise.all(orders.map(async (order) => {\n            const orderTaxon = await firestore.getTaxonByName(config, order);\n            if(Object.entries(orderTaxon).length > 0 && orderTaxon.constructor === Object)\n                orderTaxa.push(orderTaxon);\n            return orderTaxa;\n        }));\n    };\n    await getOrderTaxa(orders);\n    const getFamilyNames = item => {\n        if (item.family && item.family.names) {\n            return item.family.names[0].names ? item.family.names[0].names : item.family.names;\n        }\n        else {\n            return '';\n        }\n    };\n\n    const findRank = (taxa, item, rank) => {\n        const taxonRank = item.taxonomy[rank.name.toLowerCase()];\n        const taxon = taxa.length > 0 ? taxa.find(taxon => taxon.name === taxonRank) : null;\n        return taxon || '';\n    };\n\n    collection.items.forEach(async (item, index) => {\n        const names = item.name.split(' ');\n        item.taxonomy.genus = names[0];\n        item.taxonomy.species = names[1];\n        item.genus = findRank(genusTaxa, item, enums.taxon.GENUS);\n        item.family = findRank(familyTaxa, item, enums.taxon.FAMILY);\n        if (item.family) {\n            item.family.names = getFamilyNames(item);\n            item.family.vernacularName = item.family.names[0];\n        }\n        item.order = findRank(orderTaxa, item, enums.taxon.ORDER);\n        item.snapIndex = index + 1;\n        item.id = item.eolId;\n        item.vernacularNames = itemProperties.getVernacularNames(item, config);\n        item.vernacularName = itemProperties.getVernacularName(item, config);\n        item.name = names.slice(0, 2).join(' ');\n        item.questionIds = item.questionIds || [];\n    });\n    const loadTraitsInParallel = items => {\n        return Promise.all(items.map(async (item) => {\n            const itemTraits = await firestore.getTraitsBySpeciesName(item.name);\n            item.traits = itemTraits || {};\n            return item;\n        }));\n    };\n    await loadTraitsInParallel(collection.items);\n    collection.itemIndex = 0;\n    collection.glossary = [...Array.from(new Set(collection.items.map(item => item.iconicTaxon))), 'common'];\n    return collection;\n};\n\nconst getSnapdragonSpeciesData = async species => {\n    return await firestore.getSpeciesInParallel(species);\n}\n\nexport const collectionHandler = {\n    loadCollection,\n    loadCollectionItemProperties,\n    getSnapdragonSpeciesData\n};\n\n","import { contains, clone } from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderSpeciesList } from 'ui/screens/lists/species-list';\nimport { collectionHandler  } from 'ui/helpers/collection-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nconst changeRequest = async args => {\n\n  const { requestType, requestArgs } = args;\n\n  const { config, collection, collections, counter } = store.getState();\n\n  switch(requestType) {\n\n    case enums.lessonState.PAUSE_LESSON:\n      if(config.isLandcapeMode) return;      \n      changeLessonState(requestType, collection, config);\n    break;\n    \n    case enums.lessonState.UPDATE_COLLECTION:\n      updateCollection(requestArgs);\n    break;\n    \n    case enums.lessonState.SAVE_LESSON_PROGRESS:\n      saveCurrentLesson(collection);\n    break;\n    \n    case enums.lessonState.GET_LESSON_PROGRESS:\n      const { collectionToLoad, updatedCounter, guide } = requestArgs;\n      return await getUserLessonProgressState(collectionToLoad, { ...config, guide }, collections, updatedCounter);\n    \n    case enums.lessonState.ADD_SPECIES_TO_COLLECTION:\n      return await addExtraSpeciesSelection(requestArgs);\n    \n    case enums.lessonState.RENDER_SPECIES_LIST:\n      renderLessonSpeciesList(requestArgs);\n    break;\n    \n    case enums.lessonState.BEGIN_OR_RESUME_LESSON:\n      const { id } = requestArgs;\n      beginOrResumeLesson(id);\n    break;\n\n    case enums.lessonState.NEXT_ROUND:\n      const { lesson } = requestArgs; \n      changeLessonState(enums.lessonState.NEXT_ROUND, collection, lesson);\n    break;\n  }\n};\n\nconst beginOrResumeLesson = async (selectedLessonCollectionId, requestedlessonState)  => {\n\n  const { collections, collection: currentCollection, config } = store.getState();\n\n  const collectionToLoad = lessonStateHelper.getCollectionToLoad(currentCollection, collections, selectedLessonCollectionId);\n\n  const { collection, score, lesson } = await getUserLessonProgressState(collectionToLoad, config, collections);\n\n  const lessonState = !!requestedlessonState ? requestedlessonState : (score && score.collectionId === collection.id) \n          ? enums.lessonState.RESUME_LESSON\n          : enums.lessonState.BEGIN_LESSON;\n\n  changeLessonState(lessonState, collection, lesson); \n};\n\nconst renderLessonSpeciesList = async requestArgs => {\n\n  const { lesson: collectionToLoad, container } = requestArgs;\n\n  const { config, collections } = store.getState();\n\n  const { collection } = await getUserLessonProgressState(collectionToLoad, config, collections);\n\n  setTimeout(() => {\n    renderSpeciesList(collection, { callingParentContainer: container });\n  });\n};\n\nconst getUserLessonProgressState = async (collectionToLoad, config, collections, newLessonCounter) => {\n\n  const { counter: stateCounter, lessons, lesson: savedLesson } = store.getState();\n\n  const counter = newLessonCounter || stateCounter;\n\n  const userLessonState = lessonStateHelper.getUserLessonState(lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter);\n\n  await collectionHandler.loadCollection(userLessonState.collection, config, userLessonState.counter, collections);\n\n  setActiveCollection(userLessonState);\n\n  return userLessonState;\n};\n\nconst changeLessonState = async (lessonState, collection, lesson) => {    \n\n  switch(lessonState) {\n      case enums.lessonState.BEGIN_LESSON: {\n            actions.boundStopStartLesson({ index: 0, isLessonPaused: false });\n          break;\n      }\n      case enums.lessonState.PAUSE_LESSON: {\n\n        if(collection.items) {\n          const { index } = lessonStateHelper.getLatestCounter(collection);\n          actions.boundStopStartLesson({ index, isLessonPaused: true, log: { index: index, collection: collection.id  } });\n        }\n\n        break;\n      }\n      case enums.lessonState.RESUME_LESSON: {\n          actions.boundStopStartLesson({ ...lessonStateHelper.getLatestCounter(collection), isLessonPaused: false });\n          break;\n      }\n      case enums.lessonState.NEXT_ROUND: {\n          if(lesson.isLevelComplete) {\n            actions.boundNextLevel({ index: 0, lesson });\n          } else if(lesson.isNextRound) {\n              actions.boundNextRound({ index: 0, lesson: { ...lesson, currentRound: lesson.currentRound + 1 } });\n          };\n          break;      \n      }\n  }\n  return lesson;\n};\n\nconst addExtraSpeciesSelection = async requestArgs => {\n\n  const { config, collection } = requestArgs;\n\n  if(!collection) return;\n\n  if(!collection.items) return;\n\n  const extraSpecies = config.guide.species.filter(s => !contains(s.name, collection.items.map(i => i.name)));\n\n  const items = await collectionHandler.getSnapdragonSpeciesData(extraSpecies);\n\n  const collectionExtension = await collectionHandler.loadCollectionItemProperties({ items }, config);\n  collection.items = [ ...collection.items, ...collectionExtension.items];\n  const lesson = {\n      collection,\n      counter: { ...store.getState().counter, index: 0 },\n      lesson: { currentRound: 1, rounds: 0, isNextRound: true },\n      layout: null,\n      history: null,\n      score: clone(progressState.score)\n  };\n\n  setActiveCollection(lesson);\n};\n\nconst updateCollection = requestArgs => {\n  const { config, collection } = requestArgs;\n  actions.boundUpdateCollection({ config, collection }); // or use setActive-Collection?\n};\n\nconst setActiveCollection = lesson => {\n  lesson.counter = lesson.counter || { };\n  actions.boundSetActiveCollection({ lesson });\n  const { user } = store.getState();\n  firestore.addCollection(lesson.collection, user);\n};\n\nconst recordUserAction = action => {\n  actions.boundClickEvent(action);\n};\n\nconst saveCurrentLesson = async collection => {\n\n  const { counter, lessonPlan, lessonPlans, layout, lesson, score, history, bonusLayout, enums, config } = store.getState();\n  \n  config.collection.id = collection.id;\n\n  const savedLesson = { \n      name: collection.name,\n      config, collection, counter, lessonPlan, lessonPlans, layout, lesson, score: clone(score), history, bonusLayout, enums\n  };\n\n  actions.boundSaveLesson(savedLesson);\n\n  return savedLesson;\n};\n\nexport const lessonStateHandler = {\n  changeRequest,\n  recordUserAction\n};","import{ contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getLessonScores = (history, lesson, stateScore, savedScore) => {\n\n      if(!history) return [ stateScore ];\n\n      const historyIsUpToDate = contains(stateScore.binomial, history.scores.map(s => s.binomial));\n\n      let scores = [];\n\n      if(lesson.isNextRound) {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : stateScore.total === 0\n                        ? history.scores\n                        : [...history.scores, stateScore];\n      } else {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : [...history.scores, stateScore];\n      }\n      \n      return scores;\n};\n\nconst getSummaryRows = (rows) => {\n      rows = rows.map((r, i) => {\n            const _r = {\n                  ...r, id: `${utils.toCamelCase(r.binomial)}_${i}`, question: r.question.term ? r.question.term : r.question, \n                        answers: r.answers.map(a => { return getAnswer(a, r); })\n            };\n            return _r;\n      });\n      return rows;\n};\n\nexport const scoreSummaryHandler = {\n    getLessonScores,\n    getSummaryRows\n}\n\nfunction getAnswer(a, r) {\n      \n      const isObj = typeof a === 'object';\n\n      const value = isObj ? a.value || a.term : a;\n      const hasImage = isObj && !!a.url;\n      const url = isObj ? a.url : '';\n      const question = r.question.term || r.question;\n      const isTrue = \n                  value !== \"\" && \n                          (utils.parseToLowerCase(value) === utils.parseToLowerCase(question))\n                        // || contains(value, r.answer))\n\n      const isWrongAnswer = !isTrue && utils.parseToLowerCase(value) === utils.parseToLowerCase(r.answer);\n      const name = isObj ? a.name || '' : '';\n      \n      const answer = {\n            value,\n            url,\n            hasImage,\n            isTrue,\n            isWrongAnswer,\n            name\n      };\n      return answer;\n}\n","import { enums } from 'ui/helpers/enum-helper';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { scoreSummaryHandler } from 'ui/screens/progress/score-summary-handler';\n\nimport summaryTemplate from 'ui/screens/progress/score-summary-template.html';\nimport summaryRowTemplate from 'ui/screens/progress/score-summary-row-template.html';\nimport summaryNoRowTemplate from 'ui/screens/progress/score-summary-no-row-template.html';\n\nexport const renderScoreSummary = (lessonId, summaryContainer) => {\n\n      const init = () => {\n\n            const { lessons, score: stateScore, userAction } = store.getState();\n\n            const { collection, history, config, score: savedScore } = lessons.length > 0\n                        ? !!lessons.find(l => l.collection.id === parseInt(lessonId))\n                              ? lessons.find(l => l.collection.id === parseInt(lessonId))\n                              : store.getState()\n                        : store.getState();\n      \n            const { lesson } = store.getState();\n      \n            if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n      \n            const template = document.createElement('template');\n                  template.innerHTML = summaryTemplate;\n      \n            const parent = config.isLandscapeMode\n                        ? summaryContainer || document.querySelector('#lessonModal .js-modal-text')\n                        : DOM.rightBody ;\n                  parent.innerHTML = '';\n            \n            renderTemplate({ collection, lesson }, template.content, parent);\n\n            const actionLinks = document.querySelectorAll('.js-continue-link');\n\n            setTimeout(() => {\n              actionLinks[0].focus();\n            }, 250);\n\n            if(summaryContainer) {\n                  actionLinks.forEach(link => link.classList.add('snap-inactive'));\n            }\n\n            if(lesson.layoutName === 'summary') {\n                  const progressLink = document.querySelector('.js-review-progress');\n                        progressLink.innerHTML = '';\n            }\n            \n            let scores = scoreSummaryHandler.getLessonScores(history, lesson, stateScore, savedScore).reverse();\n                scores.forEach(s => renderScoreSummaryRow(scores, s, config));\n      \n            const handleContinueLesson = async e => {\n                e.preventDefault();\n                lessonStateHandler.changeRequest({\n                      requestType: enums.lessonState.NEXT_ROUND,\n                      requestArgs: {\n                        id: lessonId,\n                        lesson: { ...lesson, isNextRound: true }\n                      }\n                    });\n            };\n      \n            const handleNewLesson = async event => {                   \n                  await lessonStateHelper.purgeLesson();\n            };\n      \n            if(lesson.isLessonComplete) {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.innerHTML = 'START NEW LESSON';\n                        actionLink.addEventListener('click', handleNewLesson, { once: true });\n                  });\n            } else {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.addEventListener('click', handleContinueLesson, { once: true });\n                  });\n            }\n\n            window.addEventListener('keydown', e => {\n              if(e.key === 'Enter') {\n                handleContinueLesson(e);\n              }                  \n            }, { once: true });\n      };\n\n      init();\n}\n\nconst renderScoreSummaryRow = (scores, s, config) => {\n    \n      const template = document.createElement('template');\n            template.innerHTML = summaryRowTemplate;\n\n      const parent = document.querySelector('.js-score-summary-rows');\n            \n      if(s.total === 0) {\n            parent.innerHTML = '';\n            template.innerHTML = summaryNoRowTemplate;            \n            renderTemplate({ }, template.content, parent);\n            return;\n      }\n      let rows = [ ...s.passes, ...s.fails ];\n          rows = scoreSummaryHandler.getSummaryRows(rows);          \n\n      const vernacularName = s.vernacularName || itemProperties.getVernacularName(s.binomial, config);\n\n      renderTemplate({ vernacularName, binomial: s.binomial, rows, score: `${s.correct}/${s.total}` }, template.content, parent);\n\n      if(scores.length > 0) {\n            const noQuestionsText = parent.querySelector('.js-no-questions');                  \n            if(noQuestionsText) {\n                  noQuestionsText.innerHTML = '';\n            }\n      }\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nimport testCardTemplate from 'ui/screens/cards/test-card-template.html';\n\nexport const renderTestCardTemplate = (collection, context) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = testCardTemplate;\n\n    const { config } = store.getState();\n\n    const modal = config.isLandscapeMode ? document.querySelector('#lessonModal') : document;\n\n    const parent = config.isLandscapeMode \n                        ? modal.querySelector('.js-modal-text')\n                        : DOM.rightBody ;\n          parent.innerHTML = '';\n\n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = collection.name;\n\n    context.className = context.className || '';\n    context.headerClassName = context.headerClassName || '';\n\n    context.statement = context.statement || '';\n    context.providerQuestion = context.providerQuestion || '';\n\n    renderTemplate(context, template.content, parent);\n\n    const progressLink = modal.querySelector('.js-review-progress');\n\n    if(progressLink) {\n\n        progressLink.innerHTML = 'Progress';\n        progressLink.addEventListener('click', e => {\n\n          const summaryContainer = modal.querySelector('.js-summary-container');\n\n          const renderSummaryCard = () => {\n\n              renderScoreSummary(collection.id, summaryContainer);\n\n              let count = 1;\n\n              const toggleScreens = (screenOne, screenTwo) => {\n                  hideCurrentCard(screenOne);\n                  progressLink.innerHTML = count % 2 === 0 ? 'Progress' : 'Quiz';\n                  count++;\n                  screenTwo.classList.remove('swap-out-card');\n                  progressLink.addEventListener('click', e => {                    \n                      toggleScreens(screenTwo, screenOne);\n                  }, { once: true });\n              };\n\n              toggleScreens(testCardContainer, summaryContainer);\n          };\n\n          renderSummaryCard();\n\n        }, { once: true });\n\n        progressLink.focus();\n    }\n\n    toggleStatementAndQuestion(config);\n\n    const testCardContainer = modal.querySelector('.js-test-card-container');\n    const testCard = modal.querySelector('.js-test-card-container');\n    const testCardIcon = testCard.querySelector('.js-card-link');\n\n    const item = collection.nextItem || collection.items[context.bonus.itemIndex];\n\n    const hideCurrentCard = (container, card) => {\n\n        container.classList.add('swap-out-card');\n        container.classList.remove('swap-in-card');\n\n        if(card) {\n            card.classList.add('swap-out-card');\n            card.classList.remove('swap-in-card');\n        }\n    };\n\n    const showNextCard = (container, selector) => {\n                \n        container.classList.remove('swap-out-card');\n\n        const card = modal.querySelector(selector);\n        const icon = card.querySelector('.js-card-link');\n              icon.classList.remove('disabled-icon');\n\n        return { card, icon };\n    }\n\n    testCardIcon.addEventListener('click', async event => {\n        \n        const speciesContainer = modal.querySelector('.js-species-container');\n        const taxonContainer = modal.querySelector('.js-taxon-container');\n\n        const renderSpeciesCard = async () => {\n\n            renderCard(collection, 'SWAP_OUT', item, speciesContainer, false);\n                    \n            setTimeout(() => {            \n\n                hideCurrentCard(testCardContainer, testCard);\n\n                const { card: speciesCard, icon: speciesIcon } = showNextCard(speciesContainer, '.js-species-card');\n\n                speciesIcon.addEventListener('click', async event => {\n\n                    item.lichen \n                        ? renderNonTaxonCard('SWAP_OUT', item.keyTrait, taxonContainer, item.images.find(i => i.starred) ? item.images.find(i => i.starred).url : item.images[0].url)\n                        : renderTaxonCard(collection, 'SWAP_OUT', item, taxonContainer, false);\n                    \n                    hideCurrentCard(speciesContainer, speciesCard);\n\n                    const { card: taxonCard, icon: taxonIcon } = item.lichen\n                        ? showNextCard(taxonContainer, '.js-non-taxon-card')\n                        : showNextCard(taxonContainer, '.js-taxon-card');\n\n                    taxonIcon.addEventListener('click', event => {\n                        hideCurrentCard(taxonContainer, taxonCard);\n                        showNextCard(testCardContainer, '.js-test-card');\n                    });\n                });\n\n            }, 500);\n        };\n\n        await renderSpeciesCard();\n    });\n\n    renderIcon(item.taxonomy, modal);\n\n    let testContentParent = modal.querySelector('.js-test-card-content');\n\n    return testContentParent;\n};\n\nconst toggleStatementAndQuestion = config => {\n\n    if(config.isLandscapeMode) return;\n    \n    const statement = document.querySelector('.js-statement-para');\n    const question = document.querySelector('.js-question-para');\n\n    question.classList.add('hide');\n\n    var iterations = 20;\n    var i = 0;\n\n    var interval = setInterval(function() { \n            if(i % 2) {\n                question.classList.add('hide');\n                statement.classList.remove('hide');\n            } else {\n                question.classList.remove('hide');\n                statement.classList.add('hide');\n            }\n            i++; \n            if(i >= iterations) clearInterval(interval);\n    }, 5000);\n\n};\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport languageSelectionTemplate from 'ui/screens/common/language-selection-template.html';\n\nexport const languagePicker = (config, parent, listener) => {\n\n    const languages = config.languages;\n\n    const template = document.createElement('template');\n          template.innerHTML = languageSelectionTemplate;\n    \n    parent.innerHTML = '';\n\n    renderTemplate({ languages }, template.content, parent);\n\n    const taxonLanguageBtn = document.querySelector('#taxonLanguageBtn');\n          taxonLanguageBtn.innerHTML = `Taxon language [ ${languages.find(l => l.lang === config.language).name} ] `;\n\n    const taxonLanguageTxt = document.querySelector('#taxonLanguageTxt');\n          taxonLanguageTxt.innerHTML = languages.find(l => l.lang === config.language).name;\n\n    document.querySelectorAll('.dropdown-item').forEach(language => {\n        language.addEventListener('click', event => {\n            config.language = languages.find(l => l.lang === event.target.id).lang;\n            const name = languages.find(l => l.lang === event.target.id).name;\n            taxonLanguageBtn.innerHTML = `Taxon language [ ${name} ]`;\n            taxonLanguageTxt.innerHTML = name;\n            listener(config);\n        });    \n    });\n\n};","import autocomplete from 'autocompleter';\nimport { getAutocompleteBy } from 'api/inat/inat';\nimport { GoogleAutocomplete } from 'geo/geo';\n\n// https://github.com/kraaden/autocomplete\n\nexport const inatAutocomplete = (input, type, className, rb) => {\n\n    const MIN_LENGTH = 3;\n\n    async function getUserSuggestions(text) {\n        const users = await getAutocompleteBy(text, 'users');\n        return users.results.map(user => {\n            return { label: user.login_autocomplete, value: user.id, photo: user.icon, name: user.name };\n        });\n    }\n\n    async function getInatPlaceSuggestions(text) {        \n        const users = await getAutocompleteBy(text, 'places');\n        return users.results.map(place => {\n            return { label: place.display_name, value: place.id };\n        });\n    }    \n\n    function getPlaceSuggestions(text, update) {\n        let callback = null;\n        callback = predictions => {\n            update(predictions.map(prediction => {\n                return { label: prediction.description, value: prediction.place_id };\n            }));\n        } \n        GoogleAutocomplete(text, callback);\n    }\n\n    async function getProjectSuggestions(text) {\n        const projects = await getAutocompleteBy(text, 'projects');\n        return projects.results.map(place => {\n            return { label: place.title, value: place.id };\n        });\n    }\n    \n    const autocompleteRef = autocomplete({\n        input: input,\n        fetch: function(text, update) {\n            switch(type) {\n                case 'users':\n                    getUserSuggestions(text).then(users => {\n                        update(users);\n                    });\n                    break;\n                case 'places':\n                    getPlaceSuggestions(text, update);\n                    break;\n                case 'projects':\n                    getProjectSuggestions(text).then(projects => {\n                            update(projects);\n                        });\n                    break;\n            }           \n\n        },\n        onSelect: function(item) {\n            input.value = item.label;\n            input.name = item.value;\n        },\n        className: className,\n        rb: rb,\n        minLength: MIN_LENGTH,\n        debounceWaitMs: 200\n    });\n\n    return autocompleteRef;\n};","export const switchHandler = (idSwitch, startingPosition, callback) => {\n    \n    if(!idSwitch) return;\n    \n    const state = { position: startingPosition === 'left' ? 'right' : 'left' };\n\n    let switchControl = idSwitch.querySelector('div');\n    let leftText = idSwitch.parentElement.querySelector('.txt-left');\n    let rightText = idSwitch.parentElement.querySelector('.txt-right');\n\n    const switcher = () => {\n        \n        switch(state.position) { \n            case 'left':\n                switchControl.parentElement.classList.add('right');\n                switchControl.parentElement.classList.remove('left');\n                leftText.classList.remove('selected');\n                rightText.classList.add('selected');\n                state.position = 'right';\n                break;\n            case 'right':\n                switchControl.parentElement.classList.add('left');\n                switchControl.parentElement.classList.remove('right');\n                leftText.classList.add('selected');\n                rightText.classList.remove('selected');\n                state.position = 'left';\n                break;\n        }\n        callback(state.position);\n    }\n\n    switcher();\n\n    idSwitch.addEventListener('click', event => {\n        switcher();        \n    });\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace, GooglePlaceDetails } from 'geo/geo';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\n\nimport locationTemplate from 'ui/create-guide-modal/location-template.html';\nimport googleLogoImg from 'img/powered_by_google_on_white_hdpi.png';\n\nexport const renderLocation = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    createGuide.saveStep('LOCATION');\n\n    let locationPlace = config.guide.locationPlace;\n    let autocompleteRef;\n\n    const template = document.createElement('template');\n          template.innerHTML = locationTemplate;\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    config.guide.season.observableMonths = config.guide.season.observableMonths || config.season.observableMonths;\n\n    if(config.guide.season.observableMonths) {\n\n        const months = config.guide.season.observableMonths.map(month => month.name);\n        const observableMonths = `${months[0]}-${months[months.length - 1]}`;\n        const defaultNoOfRecords = config.guide.noOfRecords;\n\n        renderTemplate({ observableMonths, noOfRecords: defaultNoOfRecords }, template.content, parent);\n    }\n\n    const defaultLocationTxt = 'Use your current location';\n\n    const setLocationLongLatBtn = modal.querySelector('.js-set-location-btn');\n          setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n\n    async function handleSetLocationLongLat(event) {\n\n        event.stopPropagation();\n        setLocationLongLatBtn.innerHTML = 'Updating location…'\n        const place = await getPlace(config, true);\n        config.guide.locationType = 'longLat';\n        config.place = place;\n        config.guide.locationLongLat = place.longLocation;\n        setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n        \n        createGuide.setConfig(config);\n        createGuide.saveStep('LOCATION');\n    }\n\n    setLocationLongLatBtn.addEventListener('click', handleSetLocationLongLat);\n\n    const locationPlaceInput = modal.querySelector('#inat-place');\n          locationPlaceInput.placeholder = config.isLandscapeMode\n                                            ? 'Or start typing the name of a place you are interested in.'\n                                            : 'Or start typing the name of a place.';\n          locationPlaceInput.focus();\n\n    // let counter = 0;\n\n    const handleLocationPlaceInput =  e => {\n        locationPlaceInput.removeEventListener('keypress', handleLocationPlaceInput);\n        // counter++;        \n        autocompleteRef = inatAutocomplete(locationPlaceInput, 'places', 'autocomplete-options-container', 'place');\n        // saveLocationBtn.disabled = false;        \n        // setTimeout(() => {\n        //     const googleImageContainer = modal.querySelector('#inat-place-autocomplete #googleLogoContainer');\n        //     if(!googleImageContainer && counter >= 3) {\n        //         const options = modal.querySelector('#inat-place-autocomplete');\n        //         if(options) options.innerHTML += `<div id=\"googleLogoContainer\"><img id=\"googleLogo\" src=\"${googleLogoImg}\" alt=\"\"></div>`;\n        //     }            \n        // },750);  \n    }\n\n    locationPlaceInput.addEventListener('keypress', handleLocationPlaceInput);\n\n    locationPlaceInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    locationPlaceInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('locationForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(locationPlaceInput.value !== '') {\n            saveLocation(config, locationPlaceInput, locationPlace, createGuide);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        locationPlaceInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveLocation(config, locationPlaceInput, locationPlace, createGuide);                   \n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    let range = config.guide.speciesRange;\n    const rangeTxt = modal.querySelector('.js-range');\n          rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n    modal.querySelector('.js-set-range-input').value = range;\n\n    const slider = modal.querySelector('.js-set-range-input');\n    \n    const updateSlider  = event => {\n        range = event.target.value;\n        config.guide.speciesRange = range;\n        rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n        createGuide.setConfig(config);\n    };\n    \n    slider.addEventListener('change', updateSlider);\n\n    createGuide.nextStepActionArrow.addEventListener('click', event => {\n        if(autocompleteRef)\n            autocompleteRef.destroy();\n    });\n\n    const idSwitch = parent.querySelector('.js-snap-switch-slider');\n\n    const switchCallback = position => {\n\n        const config = createGuide.getConfig();\n\n        const currentType = config.guide.season.type;\n\n        if(position === 'right') {\n            config.guide.season.type = 'all_year';\n        } else {\n            config.guide.season.type = 'months';\n        }\n\n        createGuide.setConfig(config);\n        \n        if(config.guide.season.type !== currentType) {\n            createGuide.saveStep('SEASON');\n        }        \n    };\n\n    const position = config.guide.season.type === 'months' ? 'left' : 'right';\n\n    switchHandler(idSwitch, position, switchCallback);\n\n    const noOfRecords = document.querySelector('.js-location-no-of-records');\n          noOfRecords.addEventListener('change', e => {\n            const config = createGuide.getConfig();\n                  config.guide.noOfRecords = parseInt(noOfRecords.value);\n            createGuide.setConfig(config);\n          });\n}\n\nconst saveLocation = (config, locationPlaceInput, locationPlace, createGuide) => {\n\n    let selectedText = locationPlaceInput.value;\n    let selectedId = locationPlaceInput.name;\n\n    config.guide.locationType = 'longLat';\n    config.guide.place.name = selectedText;\n    config.guide.locationLongLat = selectedText;\n\n    config.guide.locationType = 'longLat';\n    config.guide.locationLongLat = selectedText;\n\n    const callback = geocoderResult => {\n        if(geocoderResult && geocoderResult.length > 0) {\n            const lat = geocoderResult[0].geometry.location.lat();\n            const long = geocoderResult[0].geometry.location.lng();\n            config.guide.coordinates = { lat, long };\n            \n            locationPlaceInput.value = '';\n            \n            createGuide.setConfig(config);\n            createGuide.saveStep('LOCATION');\n        }\n    };\n    GooglePlaceDetails(selectedId, callback);\n\n    return locationPlace;\n}\n","import { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport inatTemplate from 'ui/create-guide-modal/inat-user-template.html';\n\nexport const renderInatUser = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatTemplate;\n\n    if(config.guide.inatId.key !== '-----') {\n        if(config.guide.locationType !== 'inat') {\n            config.guide.locationType = 'inat';\n            createGuide.setConfig(config);\n        }\n        createGuide.saveStep('INAT');\n    }\n\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('.js-chosen > div > span:nth-child(2)').innerHTML += '<div class=\"delete-guide-link js-toggle-filter\"><input class=\"hide\" type=\"checkbox\"></div>';\n\n    let autocompleteRef;\n\n    const position = config.guide.inatId.param === 'user_id' ? 'left' : 'right';\n\n    let byType = 'users';\n\n    const inatIdentityInput = parent.querySelector('#inat-identity');\n          inatIdentityInput.focus();\n\n    const handlerInatIdentityInput = e => {\n        inatIdentityInput.removeEventListener('keypress', handlerInatIdentityInput);\n        autocompleteRef = inatAutocomplete(inatIdentityInput, byType, 'inat-autocomplete-options-container', '');\n    }\n\n    inatIdentityInput.addEventListener('keypress', handlerInatIdentityInput);\n\n    inatIdentityInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    inatIdentityInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('inatForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(inatIdentityInput.value !== '') {\n            saveInatId(parent, config, createGuide, autocompleteRef);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        inatIdentityInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.inat-autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveInatId(parent, config, createGuide, autocompleteRef);\n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    const idSwitch = parent.querySelector('.snap-switch-slider');\n\n    const switchCallback = position => {\n        \n        byType = position === 'left' ? 'users' : 'projects';\n\n        const type = position === 'left' ? 'iNat user ID' : 'iNat project ID';\n        const param = position === 'left' ? 'user_id' : 'project_id';\n\n        config.guide.inatId.type = type;\n        config.guide.inatId.param = param;\n\n        createGuide.setConfig(config);\n    };\n\n    switchHandler(idSwitch, position, switchCallback);\n};\n\nconst saveInatId = (parent, config, createGuide, autocompleteRef) => {\n    const input = parent.querySelector('#inat-identity');\n    if (config.isLandsapeMode) {\n        input.value = '';\n        input.focus();\n    }\n    const key = input.value;\n    const id = input.name;\n    config.guide.inatId.key = key;\n    config.guide.inatId.id = id;\n    if (key !== '') {\n        config.guide.locationType = 'inat';\n        createGuide.setConfig(config);\n        createGuide.saveStep('INAT');\n        parent.querySelector('#inat-identity').value = '';\n        if (autocompleteRef) {\n            // autocompleteRef.destroy();\n        }\n    }\n}\n","const all = [\n    {\n      id: 'fungi',\n      common: 'Fungi & Lichens'\n    },\n    {\n      id: 'amphibia',\n      common: 'Amphibians'\n    },\n    {\n      id: 'mammalia',\n      common: 'Mammals'\n    },\n    {\n      id: 'plantae',\n      common: 'Plants'\n    },\n    {\n      id: 'lepidoptera',\n      common: 'Butterflies & Moths'\n    },\n    {\n      id: 'insecta',\n      common: 'Insects'\n    },\n    {\n      id: 'aves',\n      common: 'Birds'\n    },\n    {\n      id: 'reptilia',\n      common: 'Reptiles'\n    }\n];\n\nexport const iconicTaxa = {\n    all\n}","import{ contains } from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nimport editorTemplate from 'ui/create-guide-modal/species-in-guide-editor-template.html';\n\nexport const speciesInGuideEditor = (config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, savedSpeciesNames) => {\n\n    const spinner = modal.querySelector('.js-species-search');\n    if(spinner) spinner.classList.add('hide-important');\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = ''\n\n    renderTemplate({selectedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const getTaxa = (taxa, config, selectedSpecies) => {\n        if(taxa) {           \n            if(config.guide.iconicTaxa) {\n                taxa.innerHTML = config.guide.iconicTaxa.map(i => i.common).join(', ');\n            } else {\n                taxa.innerHTML = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon))].join(', ');\n            }\n        }\n    }\n        \n    const speciesCount = modal.querySelector('.js-lesson-taxa-count');\n\n    if(speciesCount) {\n        speciesCount.innerHTML = speciesCount === 1 \n            ? `There is ${selectedSpecies.length} species in this lesson.`\n            : `There are ${selectedSpecies.length} species in this lesson.`;;\n    }\n\n    const taxa = modal.querySelector('.js-lesson-taxa');\n    getTaxa(taxa, config, selectedSpecies);\n\n    const input = modal.querySelector(\"#input-species\");\n    if(config.isLandscapeMode) {\n        setTimeout(() => {\n            input.focus();\n        }, 500);\n    }\n\n    const addSpeciesToList = async species => {\n        \n        if(contains(species.name, selectedSpecies.map(ss => ss.name))) return;\n\n        selectedSpecies.push(species);\n\n        config.guide.species = selectedSpecies;\n        config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n        createGuide.setConfig(config);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        const { collection } = store.getState();\n\n        lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n            requestArgs: {\n                updatedConfig: config, updatedCollection: collection\n            }\n        });\n\n        setTimeout(() => {            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        }, 250);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !contains(n.value, selectedSpecies.map(ss => ss.name)));\n                update(suggestions);\n            },\n            onSelect: async function(item) {\n                input.value = item.label;\n                const species = await firestore.getSpeciesByName(item.label);\n                addSpeciesToList(species);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(async() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    const species = await firestore.getSpeciesByName(input.value);\n                    addSpeciesToList(species);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    modal.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species.name !== removedSpecies);\n            \n            config.guide.species = selectedSpecies;\n            config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n            createGuide.setConfig(config);\n            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        });\n    })\n};","import{ contains } from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport editorTemplate from 'ui/create-guide-modal/species-editor-template.html';\n\nconst listenersToAddedSpecies = [];\n\nexport const addListenerToAddedSpecies = listener => {\n    listenersToAddedSpecies.pop();  \n    listenersToAddedSpecies.push(listener);\n};\n\nexport const speciesEditor = (container, selectedSpeciesDisplay, selectedSpecies, savedSpeciesNames, addedSpecies) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = '';\n\n    renderTemplate({addedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const input = container.querySelector(\"#input-species\");\n          \n    setTimeout(() => {\n        input.focus();\n    }, 500);\n\n    const addSpeciesToList = species => {\n        \n        if(contains(species, selectedSpecies)) return;\n\n        selectedSpecies.push(species);\n        addedSpecies.push(species);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        listenersToAddedSpecies.forEach(listener => listener(species));\n\n        setTimeout(() => {            \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames, addedSpecies);\n        }, 200);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !contains(n.value, selectedSpecies));\n                update(suggestions);\n            },\n            onSelect: function(item) {\n                input.value = item.label;\n                addSpeciesToList(input.value);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    addSpeciesToList(input.value);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    container.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species !== removedSpecies);\n                        \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames);\n        });\n    })\n};","import{ contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { listenToInatRequests } from 'api/inat/inat';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport spinnerTemplate from 'ui/create-guide-modal/species-search-template.html';\nimport speciesSummaryTemplate from 'ui/create-guide-modal/species-summary-template.html';\n\nexport const speciesSearch = createGuide => {\n\n    const { config, modal, option } = createGuide;\n    const { collections } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = spinnerTemplate;\n\n    const parent = modal.querySelector('.js-step-action-content');\n\n    renderTemplate({ }, template.content, parent);\n\n    const feedback = document.querySelector('.js-request-feedback');\n\n    let count = 0;\n\n    const interval = setInterval(() => {\n      count = count === config.guide.iconicTaxa.length ? 0 : count;\n      feedback.innerHTML = `Fetching ${config.guide.iconicTaxa[count].common} from iNaturalist …`;\n      count++;\n    }, 2000);\n\n    const nextStepActionArrow = modal.querySelector('.js-right');\n    const viewGuideIcon = nextStepActionArrow.querySelector('i');\n          viewGuideIcon.classList.add('snap-inactive');\n\n    const back = modal.querySelector('.js-left .js-arrow-wrapper');\n    const viewTaxaIcon = back.querySelector('i');\n          viewTaxaIcon.classList.add('snap-inactive');\n\n    const renderLessonSummary = collection => {\n\n      try {\n\n        if(collection && collection.items && collection.items.length === 0) {\n            feedback.innerHTML = 'No species were found. Try widening your parameters.';\n            return;\n        }\n\n        clearTimeout(interval);\n\n        template.innerHTML = speciesSummaryTemplate;\n\n        feedback.innerHTML = '';\n\n        collection.taxa = collection.guide.iconicTaxa.map(taxon => taxon.common).join(', ');\n        \n        renderTemplate({ collection }, template.content, feedback);\n\n        const icon = modal.querySelector('.icon i');\n              icon.classList.remove('slow-spin');\n\n        setTimeout(() => {\n          nextStepActionArrow.addEventListener('click', e => {\n                setTimeout( async () => {\n\n                    if(config.guide.species) {\n\n                        collection.items = collection.items.filter(item => {\n                            return contains(item.name, config.guide.species.map(sp => sp.name));\n                        });\n    \n                        await lessonStateHandler.changeRequest({\n                            requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                            requestArgs: {\n                                updatedConfig: config, updatedCollection: collection\n                            }\n                        });\n                    }\n\n                    if(parseInt(nextStepActionArrow.dataset.number) === 4) {\n                        createGuide.callOnCreateCustomListeners(collection);\n                        lessonStateHelper.clearGuide();\n                    }\n                });\n            });   \n        });\n\n        title.innerHTML = 'New collection species';\n\n        const editSpecies = modal.querySelector('.js-edit-species');\n              editSpecies.addEventListener('click', e => {\n                const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n                      selectedSpeciesDisplay.classList.add('open');\n                      selectedSpeciesDisplay.classList.remove('hide-important');\n                      selectedSpeciesDisplay.innerHTML = '';\n                      editSpecies.classList.add('hide-important');\n                      \n                speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n\n                const editableCollectionName = modal.querySelector('#js-input-collection-name');\n                      editableCollectionName.classList.remove('hide-important');\n                      editableCollectionName.addEventListener('focusout', e => {      \n                          const name = e.target.value;\n                          config.guide.name = name;\n                          collection.name =  name;\n                          lessonStateHandler.changeRequest( { requestType: enums.lessonState.UPDATE_COLLECTION, requestArgs: { collection, config } });\n                          \n                      });\n              });\n\n        viewGuideIcon.classList.remove('snap-inactive');\n        viewTaxaIcon.classList.remove('snap-inactive');\n\n        } catch(e) {\n          logError(renderLessonSummary, e);\n        }\n    };\n\n    const initLesson = async collectionToLoad => {\n        \n        const counter = { \n            index: 0,\n            isLessonPaused: true\n        }\n        \n        const lesson = await lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.GET_LESSON_PROGRESS,\n            requestArgs: {\n                collectionToLoad,\n                updatedCounter: counter,\n                guide: createGuide.getConfig().guide\n            }\n        });\n        \n        const collection = lesson.collection;\n              collection.guide = config.guide;\n              collection.isPrivate = true;\n        \n        renderLessonSummary(collection);\n\n        const OrdinalSuffixOf = i => {\n        var j = i % 10,\n            k = i % 100;\n        if (j == 1 && k != 11) {\n            return i + \"st\";\n        }\n        if (j == 2 && k != 12) {\n            return i + \"nd\";\n        }\n        if (j == 3 && k != 13) {\n            return i + \"rd\";\n        }\n        return i + \"th\";\n        }\n\n        let unsubscribe;\n\n        const callback = request => {\n            if(feedback) {\n                feedback.innerHTML = `Making ${OrdinalSuffixOf(request.page)} request of ${request.numberOfRequests}`;\n            } else {\n                unsubscribe(callback);\n            }\n        };\n\n        unsubscribe = listenToInatRequests(callback);\n    };\n    \n    config.guide.guideType = option;\n\n    switch(option) {\n\n        case enums.guideOption.LOCATION.name:\n            initLesson({ \n                ...collections.find(c => c.guideType === option),                \n                name: config.guide.place.name,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                guide: config.guide,\n                language: config.language,\n                id: collections.length + 100010, // hack to avoid clashes with existing lessons\n            });\n            break;\n\n        case enums.guideOption.INAT.name:\n            initLesson({\n                ...collections.find(c => c.guideType === option),  \n                name: `${config.guide.inatId.key}'s observations`,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                iconicTaxa: config.guide.iconicTaxa,\n                id: collections.length + 10000,\n            });        \n            break;\n\n        case enums.guideOption.PICKER.name:\n\n            const initPicker = async () => {\n\n                const { collection } = store.getState();\n\n                let addingExtraSpecies = false;\n                \n                if(collection.items) {\n                    addingExtraSpecies = collection.items.map(i => i.name).every(val => config.guide.species.map(s => s.name).includes(val));\n                }\n    \n                let collectionToLoad;\n    \n                if(addingExtraSpecies) {\n                    collectionToLoad = collection;\n                    await lessonStateHandler.changeRequest({\n                        requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                        requestArgs: {\n                            updatedConfig: config, updatedCollection: collectionToLoad\n                        }\n                    });\n                } else {\n                    collectionToLoad = {\n                        ...collections.find(c => c.guideType === option),\n                        species: config.guide.species,\n                        id: collections.length + 10010,\n                        name: 'Your new lesson',\n                        hasVideo: false,\n                        video: {},\n                        terms: []\n                    };\n                }\n\n                initLesson(collectionToLoad);\n            };\n\n            initPicker();\n\n            break;\n    }\n\n   const title = modal.querySelector('.js-options > h1');\n         title.innerHTML = 'Requesting species images and traits';\n};","import 'ui/css/groups/create-guide.css';\n\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderSpeciesSearchOptions } from 'ui/create-guide-modal/species-search-options';\nimport { renderLocation } from 'ui/create-guide-modal/location';\nimport { renderInatUser } from 'ui/create-guide-modal/inat-user';\nimport { renderCategories } from 'ui/create-guide-modal/categories';\nimport { renderSpeciesPicker } from 'ui/create-guide-modal/species-picker';\nimport { saveGuide } from 'ui/create-guide-modal/common/save-guide';\nimport { speciesSearch } from 'ui/create-guide-modal/species-search';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport actionsTemplate from 'ui/create-guide-modal/common/actions-template.html';\n\nclass CreateGuide {\n\n    constructor(step) {\n        \n        this.listeners = [];\n\n        this.steps = [\n            { number: 1, title: 'Species Picker', description: 'Provenance', nextStep: '', disabled: true, className:'species-actions',\n                nextSteps: [\n                    { id: enums.guideOption.LOCATION.name, step: 'Location' },\n                    { id: enums.guideOption.INAT.name, step: 'Location'},\n                    { id: enums.guideOption.PICKER.name, step: 'Picker'},\n                ] },\n            { number: 2, title: 'Species Picker', description: 'Location', nextStep: 'Taxa', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n            { number: 2, title: 'Species Picker', description: 'Picker', nextStep: 'Species', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n            { number: 3, title: 'Species Picker', description: 'Taxa', nextStep: 'Species', disabled: true, className:'taxa-actions' },\n            { number: 4, title: 'Species Picker', description: 'Species', nextStep: 'View Guide', disabled: true, className:'filter-actions' }\n        ];\n\n        this.currentStep = this.steps.find(s => s.number == step);\n        \n        this.modal = document.getElementById('createGuide');\n\n        if(!this.modal) return;\n\n        this.modalTitle = this.modal.querySelector('.js-modal-title header');\n        this.navigationContainer = this.modal.querySelector('.js-modal-guide-navigation');\n        this.progressSteps = this.modal.querySelectorAll('.js-modal-guide-progress > div > div');\n        \n        this.previousStepActionArrow = this.modal.querySelector('.js-left');\n        this.previousStepActionTxt = this.modal.querySelector('.js-left .title');\n        \n        this.optionsTxt = this.modal.querySelector('.js-centre .title');\n        \n        this.nextStepActionArrow = this.modal.querySelector('.js-right');\n        this.nextStepActionTxt = this.modal.querySelector('.js-right .title');\n\n        this.progressSteps.forEach((ps,index) => {\n            ps.innerHTML = this.steps[index].description;\n        });\n\n        this.config = this.config || store.getState().config;\n\n        this.getConfig = () => {\n            return this.config;\n        }\n    \n        this.setConfig = (config) => {\n            this.config = config;\n            actions.boundUpdateConfig(config);\n        }\n\n        this.getCurrentStep = () => {\n            return this.currentStep;\n        }\n\n        this.setCurrentStep = step => {\n            this.currentStep = this.steps.find(s => s.number === step);\n        }\n\n        this.user = store.getState().user;\n    }\n\n    addStepActions(nextStep) {\n        \n        if(!nextStep) return;\n        \n        const parent = this.modal.querySelector('.js-step-action-content');\n              parent.innerHTML = '';\n        const template = document.createElement('template');\n              template.innerHTML = actionsTemplate;\n        const description = this.steps.find(step => step.number === this.currentStep.number).description;\n\n        renderTemplate({ className: nextStep.className }, template.content, parent);\n\n        const options = this.modal.querySelector('.js-options > h1');\n\n        switch(description) {\n            case 'Provenance':\n                options.innerHTML = 'How do you want to select your species?';\n                renderSpeciesSearchOptions(this);\n                break;\n            case 'Location':                                \n                options.innerHTML = 'Filter species by location and season.'\n                switch(this.option) {\n                    case enums.guideOption.LOCATION.name:\n                        renderLocation(this.modal, this);\n                        break;\n                    case enums.guideOption.INAT.name:\n                        renderInatUser(this.modal, this);\n                        break;\n                    case enums.guideOption.PICKER.name:\n                        const chosenOnes = this.modal.querySelector('.js-chosen');\n                              chosenOnes.classList.add('hide-important');\n                        document.querySelector('.js-step-action-content .location-actions').classList.add('species-picker-actions');\n                        renderSpeciesPicker({\n                            container: this.modal,\n                            config: this.config,\n                            setConfig: this.setConfig\n                        }, this.modal.querySelector('.js-actions'));\n                        const title = this.modal.querySelector('.js-options > h1');\n                              title.innerHTML = 'Add species by name.';            \n                        break;\n                }\n                break;\n            case 'Taxa':\n                options.innerHTML = 'Filter species by taxa.'\n                renderCategories(this.modal, this);\n                break;\n            case 'Species':\n                setTimeout(() => {\n                    speciesSearch(this);\n                });\n                break;\n        }\n    }\n\n    goToNextStep(nextStep, direction, option = null, next = null) {\n\n        this.currentStep = next || this.steps.find(s => s.number === nextStep);\n\n        if(option === enums.guideOption.PICKER.name && direction === 'NEXT') {\n            this.currentStep = this.steps[2];\n        }\n\n        this.direction = direction;\n        this.option = option || this.option;\n\n        if(this.startLesson ) {\n            this.currentStep = { number: 0 };\n        };\n\n        if(!this.modalTitle) return;\n        \n        this.modalTitle.innerText = this.currentStep.title;\n        this.nextStepActionTxt.innerHTML = this.currentStep.nextStep;\n\n        this.progressSteps.forEach((ps,index) => {\n\n            ps.classList.remove('active');\n\n            if(index + 1 === this.currentStep.number) {\n                ps.classList.add('active');\n                for(let i = 0; i < index; i++) {\n                    this.progressSteps[i].classList.add('completed');\n                }\n            }\n        });\n        \n        this.addStepActions(this.steps.find(step => step.number === this.currentStep.number));\n\n        if(this.currentStep.number === 1) {\n            this.navigationContainer.classList.remove('progress-container');\n            this.optionsTxt.classList.remove('hide-important');\n            this.previousStepActionTxt.classList.add('hide-important');\n            this.previousStepActionArrow.classList.add('arrow-wrapper-hidden');\n            this.nextStepActionArrow.classList.add('arrow-wrapper-hidden');            \n        } else {\n            this.navigationContainer.classList.add('progress-container');\n            this.optionsTxt.classList.add('hide-important');\n            this.previousStepActionArrow.classList.remove('arrow-wrapper-hidden');\n            this.nextStepActionArrow.classList.remove('arrow-wrapper-hidden');\n            this.nextStepActionArrow.dataset.number = this.currentStep.number;\n            this.previousStepActionTxt.classList.remove('hide-important');\n            const previousStepProperties = this.currentStep.prevStep\n                                                ? this.steps.find(s => s.description === this.currentStep.prevStep)\n                                                : this.steps.find(s => s.number === (this.currentStep.number - 1));\n            \n\n            if(this.getCurrentStep().number === 4) {\n                this.previousStepActionTxt.innerHTML = this.option === enums.guideOption.PICKER.name \n                    ? this.steps[2].description\n                    : this.steps[3].description;\n            } else {\n                this.previousStepActionTxt.innerHTML = previousStepProperties.description;\n            }\n        }\n    }\n\n    saveStep(stepDescription, config) {\n        saveGuide(config || this.getConfig(), stepDescription)();\n    }\n};\n\nexport const createGuideHandler = step => {\n\n    const guide = new CreateGuide(step);\n    \n    guide.goToNextStep(step, 'NEXT');\n\n    const handleNextStepAction = event => {\n        guide.startLesson = parseInt(guide.nextStepActionArrow.dataset.number) === 4;\n        if(guide.startLesson) { \n            guide.nextStepActionArrow.setAttribute('data-dismiss','modal');\n        } else {\n            guide.nextStepActionArrow.removeAttribute('data-dismiss');\n        }\n        const step = guide.steps.find(step => step.description === guide.getCurrentStep().nextStep);\n        if(step) guide.goToNextStep(step.number, 'NEXT');\n        guide.listeners.push( { element: guide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    guide.nextStepActionArrow.addEventListener('click', handleNextStepAction, true);\n\n    const handlePreviousStepAction = event => {\n\n        let prevStep;\n        \n        if(guide.getCurrentStep() && guide.getCurrentStep().number === 4) {\n            prevStep = guide.option === enums.guideOption.PICKER.name ? 2 : 3;\n        } else {\n            prevStep = guide.getCurrentStep().number - 1;\n        }\n        \n        guide.goToNextStep(prevStep, 'PREVIOUS', guide.option);\n        guide.listeners.push( { element: guide.previousStepActionArrow, handler: handlePreviousStepAction });\n    };\n\n    guide.previousStepActionArrow.addEventListener('click', handlePreviousStepAction, true);\n\n    guide.callOnCreateCustomListeners = collection => {\n        onCloseModalListeners.forEach(listener => listener(collection));\n        onCloseModalListeners.pop();\n    };\n};\n\nconst onCloseModalListeners = [];\n\nexport const onCreateCustomLesson = listener => { \n    onCloseModalListeners.pop();\n    onCloseModalListeners.push(listener);\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport speciesTemplate from 'ui/create-guide-modal/species-search-options-template.html';\n\nexport const renderSpeciesSearchOptions = createGuide => {\n\n    const header = createGuide.modal.querySelector('.js-modal-title > header');\n          header.innerHTML = 'Create your own lesson';\n\n    const options = [\n        {\n            text: 'By location and season',\n            id: enums.guideOption.LOCATION.name\n        },\n        {\n            text: 'From iNaturalist observations',\n            id: enums.guideOption.INAT.name\n        },\n        {\n            text: 'Using a name-based search',\n            id: enums.guideOption.PICKER.name\n        }\n    ];\n\n    const template = document.createElement('template');\n          template.innerHTML = speciesTemplate;\n    const parent = createGuide.modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    const config = createGuide.getConfig();\n\n    renderTemplate({ options }, template.content, parent);\n\n    const handleNextStepAction = event => {\n\n        const option = event.currentTarget.dataset.option;\n        const step = createGuide.steps.find(s => s.number === createGuide.getCurrentStep().number);\n        const nextStepName = step.nextSteps.find(step => step.id === option).step;\n        const nextStep = createGuide.steps.find(s => s.description === nextStepName);\n\n        createGuide.startLesson = false;        \n        createGuide.goToNextStep(createGuide.getCurrentStep().number + 1, 'NEXT', option, nextStep);\n        createGuide.listeners = [];\n        createGuide.listeners.push( { element: createGuide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    const lessonOptions = document.querySelectorAll('.custom-lesson-menu-options li');\n    \n    lessonOptions.forEach((option, index) => {\n        option.addEventListener('click', handleNextStepAction, true);\n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        createGuide.setConfig(config);\n    });\n\n    const warning = createGuide.modal.querySelector('.js-persistence-warning');\n            \n    if(createGuide.user) {\n        warning.classList.add('hide-important');\n    }\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\nimport { speciesEditor } from 'ui/create-guide-modal/species-editor';\n\nimport speciesPickerTemplate from 'ui/create-guide-modal/species-picker-template.html';\n\nexport const renderSpeciesPicker = (props, parent) => {\n\n      const { config, container, selectedSpecies } = props;\n\n      const template = document.createElement('template');\n            template.innerHTML = speciesPickerTemplate;\n\n      parent.innerHTML = '';\n\n      renderTemplate({}, template.content, parent);\n\n      const selectedSpeciesDisplay = parent.querySelector('.js-selected-species-container');\n            selectedSpeciesDisplay.innerHTML = '';\n\n      if(config) {\n            speciesInGuideEditor(config, container, selectedSpeciesDisplay, props, config.guide.species || []);\n      } else {\n            speciesEditor(parent, selectedSpeciesDisplay, selectedSpecies, [], []);\n      }\n};\n","import{ contains } from 'ramda';\n\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { iconicTaxa } from 'snapdragon-config/snapdragon-iconic-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport categoriesTemplate from 'ui/create-guide-modal/categories-template.html';\n\nexport const renderCategories = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n          config.guide.iconicTaxa = config.guide.iconicTaxa || iconicTaxa.all;\n\n    const filterSelectedClass = 'iconic-taxa-selected';\n\n    const template = document.createElement('template');\n          template.innerHTML = categoriesTemplate;\n    \n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({}, template.content, parent);\n\n    const icons = parent.querySelectorAll('.js-iconic-taxa-categories > div > div:nth-child(1)');\n    \n    if(config.guide.iconicTaxa) {\n        icons.forEach(icon => {\n            const filterId = icon.parentElement.id;\n            if(contains(filterId, config.guide.iconicTaxa.map(taxon => taxon.id))) {\n                icon.classList.add(filterSelectedClass);\n            }\n        });\n    }\n\n    setTimeout(() => {\n        const fungiIcon = modal.querySelector('#fungi > div');\n        if(!fungiIcon) return;\n        if(elem.hasClass(fungiIcon, 'iconic-taxa-selected')) {\n            fungiIcon.querySelector('g g').classList.add('svg-icon-selected');\n        }   \n    },250);\n    \n    config.guide.hasChanged = false;\n\n    icons.forEach(category => {\n        category.addEventListener('click', event => {\n\n            config.guide.hasChanged = true;\n            \n            const filter = event.currentTarget;\n            const filterId = filter.parentElement.id;        \n            const commonName = filter.parentElement.innerText;              \n\n            if(config.guide.iconicTaxa.find(taxon => taxon.id === filterId)) {\n                \n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.remove('svg-icon-selected');                    \n                }\n                if(config.guide.iconicTaxa.length > 1) {\n                    filter.classList.remove(filterSelectedClass);\n                    config.guide.iconicTaxa = config.guide.iconicTaxa.filter(taxon => taxon.id !== filterId);\n                }\n\n            } else {\n\n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.add('svg-icon-selected');\n                }\n                filter.classList.add(filterSelectedClass);\n\n                config.guide.iconicTaxa.push(\n                    {\n                        id: filterId,\n                        common: commonName    \n                    }\n                )\n            }\n\n            createGuide.setConfig(config);\n            createGuide.saveStep('TAXA', config);            \n        });\n    });\n\n    createGuide.saveStep('TAXA');\n\n    document.querySelector('.js-right .js-arrow-wrapper').innerHTML = '<i class=\"far fa-arrow-alt-circle-right\"></i>';\n};","import { returnTaxonIcon } from 'ui/helpers/icon-handler';\n\nexport const saveGuide = (config, step, update = true) => {\n\n    const chosen = document.querySelector('.js-chosen span:nth-child(2)');\n\n    const handleSaveEvent = () => {\n\n        switch(step) {\n\n            case 'SPECIES':\n\n            break;\n\n            case 'LOCATION':\n\n                const splitLocation = locationStr => {\n                    return locationStr;\n                };\n\n                if(config.guide.locationType) {\n                    chosen.innerHTML = config.guide.locationType === 'place'\n                        ? config.guide.locationPlace\n                        : config.isLandscapeMode\n                            ? config.guide.locationLongLat\n                            : splitLocation(config.guide.locationLongLat);\n                }\n                break;\n\n            case 'TAXA':\n\n                chosen.innerHTML = '';\n                let icons = '';\n                if(config.guide.iconicTaxa.length > 0) {\n                    config.guide.iconicTaxa.forEach(taxon => {\n                        const icon = returnTaxonIcon(taxon.id);\n                        icons += icon;\n                    })\n                    chosen.innerHTML = icons;\n                } else {\n                    chosen.innerHTML = 'All species';\n                }\n                break;\n\n            case 'INAT':\n                \n                if(config.guide.inatId.key) {\n                    chosen.innerHTML = config.guide.inatId.key || '';\n                } else {\n                    chosen.innerHTML = '';\n                }\n                break;\n        }\n    }\n\n    return handleSaveEvent;\n}","import{ contains } from 'ramda';\n\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\n\nconst getItems = (taxa, includeTechnicalTerms = false) => {\n    \n    const glossary = store.getState().glossary;\n\n    const items = glossary.filter(definition => contains(definition.taxon, taxa));\n\n    let selectedItems = [];\n\n    includeTechnicalTerms\n        ? selectedItems = items\n        : selectedItems = items.filter(item => item.technical !== 'true');\n\n    return selectedItems.filter(item => contains(item.taxon, taxa));\n};\n\nconst getBranches = items => {\n    \n    let branches = [ ...new Set(items.map(item => item.branch)) ];\n        branches = branches.map(branch => {\n            return {\n                name: branch,\n                count: items.filter(item => item.branch == branch).length\n            }\n          });\n    return branches;\n};\n\nconst getQuickFire = (glossary, type, collection) => {\n\n    const items = collection.terms\n            ? glossary.filter(definition => contains(definition.id, collection.terms))\n            : glossary;\n\n    const taxa = [ ...new Set(items.map(definition => definition.taxon))];\n\n    const filter = {\n          iconicTaxa: taxa,\n          option: {\n                key: \"0\",\n                value: \"multiple choice\" // depends on type???\n          }\n    };\n    \n    const quickFire = {\n        index: 0,\n        isComplete: false,\n        items,\n        count: items.length,\n        filter,\n        type,\n        termScore: {\n            total: 0,\n            correct: 0,\n            incorrect: 0,\n            isCorrect: null,\n            isIncorrect: null,\n            rounds: [],\n            passes: [],\n            fails: []\n        },\n        poolSize: items.length,\n        terms: collection.terms,\n        onClickFiltersLinkListeners: [],\n        onClickGlossaryLinkListeners: [],\n        lessonId : collection.id\n    };\n\n    quickFire.filter.taxa = filter.iconicTaxa.map(taxon => {\n        const iconicTaxon = {\n            name: taxon,\n            count: items.filter(item => item.taxon === taxon).length\n        }\n        return iconicTaxon;\n    });\n\n    quickFire.filter.taxa = quickFire.filter.taxa.filter(taxon => taxon.count > 0);\n\n    actions.boundCreateQuickFire(quickFire);\n\n    return quickFire;\n};\n\nexport const quickFireAPI = {\n    getItems,\n    getBranches,\n    getQuickFire\n};","import{ contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\n\nconst renderResponse = (isCorrect, term) => {\n    return isCorrect\n    ? `<span class=\"centred-block icon\"><i class=\"fas fa-check extra-large-text correct-answer-color margin-right\"></i>That is correct.</span>`\n    : `<span class=\"centred-block icon\"><i class=\"fas fa-times extra-large-text incorrect-answer-color margin-right\"></i>The correct answer is <span class=\"answer-response half-margin-left\">'${term}'.</span></span>`;\n\n};\n\nconst updateBranchCounts = (quickFire, branchOptions) => {\n\n    const items = quickFire.terms ? quickFire.items.filter(item => contains(item.id, quickFire.terms)) : quickFire.items;\n\n    branchOptions.forEach(branchBadge => {\n    branchBadge.innerHTML = items.filter(item => item.branch === branchBadge.dataset.name).length;\n    });\n};\n\nconst updateTaxonCounters = (quickFire, taxonCounters, includeTechnicalTerms) => {\n\n    const items = quickFire.terms ? quickFire.items.filter(item => contains(item.id, quickFire.terms)) : quickFire.items;\n\n    taxonCounters.forEach(taxonBadge => {\n        taxonBadge.innerHTML = includeTechnicalTerms\n            ? items.filter(item => item.taxon === taxonBadge.dataset.taxon).length\n            : items.filter(item => item.taxon === taxonBadge.dataset.taxon && !item.technical).length;\n    });\n\n    return includeTechnicalTerms\n        ? items\n        : items.filter(item => !item.technical);\n};\n\nconst updateTotalCounts = (quickFire, input, counters, branchCounters, taxonCounters, includeTechnicalTerms = false) => {\n\n    updateBranchCounts(quickFire, branchCounters);\n    const terms = updateTaxonCounters(quickFire, taxonCounters, includeTechnicalTerms);\n\n    quickFire.count = terms.length;\n\n    counters.forEach(counter => {\n        counter.innerHTML = quickFire.count;\n    });\n    \n    input.value = quickFire.count;\n    quickFire.poolSize = parseInt(input.value);\n};\n\nconst scoreMultipleChoice = (quickFire, answer, quickFireMessage) => {\n\n    const isCorrect = answer === quickFire.question.term;\n\n    quickFire.question.answer = answer;\n        \n    quickFire.termScore.total++;\n\n    if(isCorrect) {\n        quickFire.termScore.correct++;\n        quickFire.termScore.isCorrect = true;\n        quickFire.termScore.isIncorrect = false;\n        quickFire.termScore.passes.push(quickFire.question);\n    } else {\n        quickFire.termScore.incorrect++;\n        quickFire.termScore.isCorrect = false;\n        quickFire.termScore.isIncorrect = true;\n        quickFire.termScore.fails.push(quickFire.question);\n    }\n\n    quickFireMessage.innerHTML = renderResponse(isCorrect, quickFire.question.term.toLowerCase());\n};\n\nconst scoreTextEntry = (quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn) => {\n\n    if (quickFire.filter.option.key === '1') {\n\n        const brackets = /\\(.+?\\)/;\n\n        const term = quickFire.question.term;\n\n        const acceptableAnswers = term.split(',').map(answer => {\n            \n            let acceptable = answer;\n                acceptable = acceptable.replace(brackets, '');\n                acceptable = acceptable.trim();\n                acceptable = acceptable.toLowerCase();\n\n            return acceptable;\n        });\n        \n        const isCorrect = contains(quickFireInput.value.trim().toLowerCase(), acceptableAnswers);\n        \n        quickFire.termScore.total++;\n        \n        if (isCorrect) {\n            quickFire.termScore.correct++;\n            quickFire.termScore.passes.push(quickFire.question);\n        }\n        else {\n            quickFire.termScore.incorrect++;\n            quickFire.termScore.fails.push(quickFire.question);\n        }\n        \n        quickFireMessage.innerHTML = renderResponse(isCorrect, quickFire.question.term.toLowerCase());\n\n        timer = setTimeout(() => {\n            continueQuickFireBtn.click();\n        }, store.getState().config.callbackTime + 500);\n    }\n\n    return timer;\n};\n\nconst readyTemplate = headerTemplate => {\n\n    const template = document.createElement('template');\n          template.innerHTML = headerTemplate;\n\n    const modal = document.querySelector('#glossaryModal');\n\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';   \n\n    return { template, modal, parent };\n};\n\nconst updateHeaders = (screen, links, getQuickFire, quickFireActions) => {\n\n    const { glossary, filters, questions } = links;\n\n    const hide = 'hide-important';\n\n    const quickFire = getQuickFire();\n\n    const loadGlossary = e => {\n        quickFireActions.quickFireGlossary(quickFire.items);\n        if(quickFire.linkFromLesson) {\n            questions.classList.remove(hide);\n            filters.classList.add(hide);\n        } else {\n            filters.classList.remove(hide);\n        }\n    };\n\n    const loadFilters = e => {\n        quickFireActions.quickFireFilters(quickFire.linkFromLesson);\n    };\n\n    const handleGlossaryLink = () => {\n\n        quickFire.onClickGlossaryLinkListeners = quickFire.onClickGlossaryLinkListeners || [];\n\n        if(quickFire.onClickGlossaryLinkListeners.length < 1) {\n            glossary.addEventListener('click', loadGlossary, { once: true });\n            quickFire.onClickGlossaryLinkListeners.push('filters');\n        }\n    };\n\n    const handleFiltersLink = () => {\n\n        quickFire.onClickFiltersLinkListeners = quickFire.onClickFiltersLinkListeners || [];\n\n        if(quickFire.onClickFiltersLinkListeners.length < 1) {\n            filters.addEventListener('click', loadFilters, { once: true }, true);\n            quickFire.onClickFiltersLinkListeners.push('filters');\n        }\n    };\n    \n    switch(screen) {        \n        case enums.quickFireStep.FILTERS:\n            filters.classList.add(hide);\n            glossary.classList.remove(hide);\n            handleGlossaryLink();\n        break;\n            \n        case enums.quickFireStep.QUESTIONS:\n            filters.classList.remove(hide);\n            filters.innerHTML = 'Vocab filter';\n            handleGlossaryLink();\n            handleFiltersLink();\n        break;\n\n        case enums.quickFireStep.GLOSSARY:\n            filters.classList.remove(hide);\n            filters.innerHTML = 'Vocab filter';\n            questions.classList.add(hide);\n            handleFiltersLink();\n        break;\n    }\n};\n\nexport const quickFireUI = {\n    updateTotalCounts,\n    updateHeaders,\n    scoreMultipleChoice,\n    scoreTextEntry,\n    readyTemplate\n};","import{ contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nconst selectAnswers = (quickFire, quickFireItems) => {\n\n    quickFire.spareItems = quickFire.spareItems || take(5, quickFireItems);\n\n    quickFire.question = quickFireItems.splice(0,1)[0];\n\n    let items = quickFireItems.filter(item => item.branch === quickFire.question.branch);\n\n    const itemCount = items ? items.length : 0;\n    const requiredItems = 3;\n\n    if (itemCount <= requiredItems) {\n        const itemsToAdd = take((requiredItems - itemCount), quickFire.spareItems.filter(sp => !contains(sp.term, items.map(i => i.term)) && sp.term !== quickFire.question.term ));\n              itemsToAdd.forEach(item => items.push(item));\n    }\n\n    let answers = take(3, items);\n        answers.push(quickFire.question);\n        answers = utils.shuffleArray(answers);\n        answers = answers.map((item, index) => {\n            return {\n                term: item.term,\n                index\n            };\n        });\n\n    return answers;\n};\n\nexport const quickFireLogic = {\n    selectAnswers\n};","import{ contains, clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { actions } from 'redux/actions/action-creators';\nimport { subscription } from 'redux/subscriptions';\nimport { iconicTaxa  } from 'api/snapdragon/iconic-taxa';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { quickFireAPI } from 'ui/quick-fire-modal/quick-fire-api';\nimport { quickFireUI } from 'ui/quick-fire-modal/quick-fire-ui';\nimport { quickFireLogic } from 'ui/quick-fire-modal/quick-fire-logic';\n\nimport glossaryTemplate from 'ui/fixtures/glossary-template.html';\nimport templateCreateQuickFire from 'ui/quick-fire-modal/quick-fire-filters-template.html';\nimport templateQuestionQuickFire from 'ui/quick-fire-modal/quick-fire-questions-template.html';\nimport templateSummaryQuickFire from 'ui/quick-fire-modal/quick-fire-summary-template.html';\n\nconst headers = (step, quickFire) => {\n\n    const getQuickFire = () => quickFire;\n\n    const modal = document.querySelector('#glossaryModal');\n\n    const links = { \n        glossary: modal.querySelector('.js-modal-text-title'),\n        filters: modal.querySelector('.js-quick-fire-filters'),\n        questions: modal.querySelector('.js-quick-fire-questions')\n    };\n\n    quickFireUI.updateHeaders(step, links, getQuickFire, quickFireActions);\n};\n\nconst filters = async linkFromLesson => {\n\n    const args = await init();\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateCreateQuickFire);\n\n    headers(enums.quickFireStep.FILTERS, { items: args.items, onClickFiltersLinkListeners: [], onClickGlossaryLinkListeners: [] });\n\n    let { items, type, filter } = args;\n\n    const resetQuickFire = () => {\n        actions.boundUpdateQuickFire(quickFireAPI.getQuickFire(store.getState().glossary, enums.quickFireType.DEFINITION, {}));\n        quickFireFilters(quickFire.linkFromLesson);\n    };\n\n    let state = store.getState().quickFire || quickFireAPI.getQuickFire(items, filter, type);\n    let quickFire = clone(state);\n        quickFire = quickFire.isComplete ? resetQuickFire() : quickFire;\n        quickFire.linkFromLesson = linkFromLesson || false;\n        quickFire.onClickFiltersLinkListeners = [];\n        quickFire.onClickGlossaryLinkListeners = [];\n\n    actions.boundUpdateQuickFire(quickFire);\n\n    const options = [\n        { key: 0, value: 'multiple choice' },\n        { key: 1, value: 'text entry' },\n        // { key: 2, value: 'multiple choice followed by text entry' },\n        // { key: 3, value: 'mixed multiple choice and text entry' },\n    ];\n\n    const branches = quickFireAPI.getBranches(items);\n\n    renderTemplate({ quickFire, options, branches }, template.content, parent);\n\n    const counters = document.querySelectorAll('.js-quick-fire-count');\n    const branchCounters = document.querySelectorAll('.js-quick-fire-branches label > span');\n    const taxonCounters = document.querySelectorAll('.js-quick-fire-taxa li > span');\n\n    const input = document.querySelector('.js-input-quick-fire');\n          input.addEventListener('input', e => {\n            quickFire.poolSize = parseInt(e.target.value);          \n          });\n          setTimeout(() => {\n            input.focus();\n          }, 250);\n\n    quickFire.poolSize = parseInt(input.value);\n\n    const updateArray = (arr, elem) => {\n        if(arr.find(e => e === elem)) {\n            return arr.filter(iconicTaxon => iconicTaxon !== elem); \n        } else {\n            arr.push(elem);\n            return arr;\n        }\n    };\n\n    const getFilterTaxa = () => quickFire.filter.iconicTaxa;\n\n    const taxa = document.querySelectorAll('.js-quick-fire-taxa li');\n          taxa.forEach(taxon => {\n\n              const chkBox = taxon.querySelector('input');\n\n              if(!contains(taxon.dataset.name, quickFire.filter.iconicTaxa)) {\n                  chkBox.click();\n              }\n\n              taxon.addEventListener('change', async e => {\n                const selectedTaxon = e.target.id;\n                const updatedTaxa = updateArray(getFilterTaxa(getIncludeTechnicalTerms), selectedTaxon);\n                quickFire.filter.iconicTaxa = updatedTaxa;\n                quickFire.items = quickFireAPI.getItems(updatedTaxa);\n                quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n              });\n          });\n\n    let includeTechnicalTerms = quickFire.lessonId ? true : false;\n\n    const getIncludeTechnicalTerms = () => includeTechnicalTerms;\n      \n    quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n\n    const createQuickFireBtn = document.querySelector('.js-create-quick-fire');\n          createQuickFireBtn.innerHTML = quickFire.termScore.total === 0 ? 'Start vocab review' : 'Continue your vocab review';\n          createQuickFireBtn.addEventListener('click', e => {\n            questions(quickFire);\n          }, { once: true });\n\n    const quickFireOptions = document.querySelectorAll('.js-quick-fire-filter-options .btn');\n    \n    quickFire.filter.option.key === \"0\"\n      ? quickFireOptions[0].click()\n      : quickFireOptions[1].click();\n    \n    quickFireOptions[parseInt(quickFire.filter.option.key)].classList.add('active');\n\n    quickFireOptions[0].addEventListener('click', e => {\n      e.preventDefault();\n      if(!elem.hasClass(e.target, 'active')) {\n        e.target.classList.add('active');\n        quickFire.filter.option = {\n            key: e.target.dataset.key,\n            value: e.target.dataset.value\n        };\n        quickFireOptions[1].classList.remove('active');\n      }\n    });        \n\n    quickFireOptions[1].addEventListener('click', e => {\n      e.preventDefault();\n      if(!elem.hasClass(e.target, 'active')) {\n        e.target.classList.add('active');\n        quickFire.filter.option = {\n            key: e.target.dataset.key,\n            value: e.target.dataset.value\n        };\n        quickFireOptions[0].classList.remove('active');\n      }\n    });        \n\n    const branchOptions = document.querySelectorAll('.js-quick-fire-branches label');\n\n    if(quickFire.filter.branches) {\n\n        branchOptions.forEach(branch => {\n            if(!contains(branch.dataset.key, quickFire.filter.branches)) {\n                branch.click();\n            }\n        });    \n    }\n\n    branchOptions.forEach(branch => {\n        branch.addEventListener('click', e => {\n        setTimeout(async() => {\n                let checkedBranches = Array.from(branchOptions).filter(b => elem.hasClass(b, 'active'));\n                    checkedBranches = checkedBranches.map(b => b.dataset.key);\n                quickFire.filter.branches = checkedBranches;\n                quickFire.items = await quickFireAPI.getItems(quickFire.filter.iconicTaxa);\n                quickFire.items = quickFire.items.filter(item => contains(item.branch, checkedBranches));\n                quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n            });\n        });\n    });\n\n    const technical = document.querySelector('.js-quick-fire-technical');\n          technical.addEventListener('change', async e => {\n            includeTechnicalTerms = e.target.checked;\n            quickFire.filter.includeTechnicalTerms = includeTechnicalTerms;\n            quickFire.items = quickFire.items || await quickFireAPI.getItems(quickFire.filter.iconicTaxa, includeTechnicalTerms);\n            quickFireUI.updateTotalCounts(quickFire, input, counters, branchCounters, taxonCounters, getIncludeTechnicalTerms());\n          });\n\n    if(includeTechnicalTerms) technical.click();\n\n    const reset = document.querySelector('.js-quick-fire-reset');\n          reset.addEventListener('click', e => {\n            resetQuickFire();\n          });\n};\n\nconst questions = state => {\n\n    let quickFire;\n\n    if(!state) return;\n    else quickFire = clone(state);\n\n    quickFire.onClickGlossaryLinkListeners = [];\n\n    headers(enums.quickFireStep.QUESTIONS, quickFire);\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateQuestionQuickFire);\n\n    let timer;    \n\n    if(quickFire.poolSize > quickFire.termScore.total) {\n\n        let answers = quickFireLogic.selectAnswers(quickFire, utils.shuffleArray(quickFire.items));\n\n        renderTemplate({ question: quickFire.question, \n                answers, total: quickFire.termScore.total + 1, \n                count: quickFire.poolSize,\n                correct: quickFire.termScore.correct, \n                answered: quickFire.termScore.total \n        }, template.content, parent);\n\n        const layouts = document.querySelectorAll('.js-quick-layouts');\n              layouts.forEach(layout => {\n                  layout.classList.add('hide-important');\n                  if(layout.id === quickFire.filter.option.key) layout.classList.remove('hide-important');  \n              });\n\n        const quickFireMessage = document.querySelector('.js-quick-fire-message');\n\n        const options = Array.from(document.querySelectorAll('.js-quick-fire-options > li'));\n              options.forEach(option => {\n                option.addEventListener('click', e => {\n                    const button = e.target;\n                    const term = button.querySelector('span').innerHTML;\n                    const answer = term;\n                    quickFireUI.scoreMultipleChoice(quickFire, answer, quickFireMessage);\n                    continueQuickFireBtn.disabled = false;\n                    if(quickFire.termScore.isIncorrect) {\n                        option.classList.add('snap-alert');\n                    }\n                    options.forEach(option => {\n                        if(option.id === quickFire.question.term) {\n                            option.classList.add('snap-success');\n                        }\n                    });\n                    timer = setTimeout(() => {\n                        continueQuickFireBtn.click();\n                    }, store.getState().config.callbackTime);\n                }, { once: true });\n              });\n              setTimeout(() => {\n                options[0].querySelector('button').focus();\n              }, 500);\n\n        const quickFireInputContainer = modal.querySelector('.js-quick-fire-text-entry');\n        const quickFireInput = modal.querySelector('.js-quick-fire-text-entry input');\n        \n        if(quickFire.filter.option.key === '1') {\n            quickFireInputContainer.classList.remove('hide-important');\n            quickFireInput.focus();\n        }\n        \n        const continueQuickFireBtn = document.querySelector('.js-continue-quick-fire-btn');\n              continueQuickFireBtn.addEventListener('click', e => {\n                continueQuickFireBtn.setAttribute(\"disabled\", true);\n                quickFire.items = quickFire.items.filter(item => item.term !== quickFire.question.term);\n                subscription.add(quickFireQuestions, 'quickFire', 'modal');\n                actions.boundUpdateQuickFire(quickFire);\n                clearTimeout(timer);        \n              }, { once: true });\n\n        let check = true;\n\n        quickFireInput.addEventListener('keydown', event => {\n            if (event.keyCode == 9 && check) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }\n        });\n\n        quickFireInput.addEventListener('keypress', event => {\n            if (event.keyCode == 13 && check) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }            \n        });\n\n        quickFireInput.addEventListener('blur', e => {\n            if(check && e.target.value.length > 2) {\n                check = false;\n                timer = quickFireUI.scoreTextEntry(quickFire, quickFireInput, quickFireMessage, timer, continueQuickFireBtn);\n                continueQuickFireBtn.disabled = false;\n            }\n        });\n\n        if((quickFire.question.term.split(' ').length > 1 || quickFire.question.term.indexOf('(') === 0) && quickFire.filter.option.key === '1') {\n            const hint = modal.querySelector('.js-quick-fire-hint');\n                  hint.classList.remove('hide');\n        }\n\n    } else {\n        summary(quickFire);        \n    }\n    \n    const review = modal.querySelector('.js-quick-review-progress');\n    if(review) {\n          review.addEventListener('click', e => {\n            summary(quickFire);\n          }, { once: true });\n    }\n};\n\nconst getTermsGlossary = (glossary, terms) => {\n\n    if(!terms || terms.length === 0) return glossary;\n\n    const definitions = [];\n\n    terms.forEach(term => {\n        const definition = glossary.find(def => def.id === term);\n        definitions.push(definition);\n    });\n\n    return definitions.filter(term => term);\n}\n\nconst definitions = async terms => {\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(glossaryTemplate);\n\n    const quickFire = store.getState().quickFire || quickFireAPI.getQuickFire(terms, enums.quickFireType.DEFINITION, { collection: {} });\n\n    headers(enums.quickFireStep.GLOSSARY, quickFire);\n\n    parent.innerHTML = '';\n\n    const glossary = getTermsGlossary(terms, quickFire.terms);\n\n    renderTemplate({ glossary }, template.content, parent);\n};\n\nconst init = async () => {\n\n    let taxa = [];\n    let iconicTaxaKeys = Object.keys(iconicTaxa).map(key => key.toLowerCase());\n        iconicTaxaKeys.push('common');\n        iconicTaxaKeys.forEach(taxon => {\n            taxa.push(taxon);\n        });\n\n    const { quickFire } = store.getState();\n\n    const items = quickFire.items || await quickFireAPI.getItems(taxa);\n        \n    const args = {\n        items,\n        type: enums.quickFireType.DEFINITION,\n        filter: {\n            iconicTaxa: taxa\n        }\n    };\n    return args;\n};\n\nconst summary = quickFire => {\n\n    const { template, modal, parent } = quickFireUI.readyTemplate(templateSummaryQuickFire);\n\n    const passes = quickFire.termScore.passes;\n          passes.forEach((pass, i) => {\n            pass.index = i;\n            pass.wiki = pass.wiki || '';\n            pass.showWikiClass = pass.wiki.length > 0 ? '' : 'hide-important'\n          });\n    const fails = quickFire.termScore.fails;\n          fails.forEach((fail, i) => {\n            fail.index = i;\n            fail.wiki = fail.wiki || '';\n            fail.showWikiClass = fail.wiki.length > 0 ? '' : 'hide-important';\n          });\n\n    renderTemplate({ score: quickFire.termScore, passes, fails }, template.content, parent);\n\n    const answers = modal.querySelectorAll('.js-quick-review-answers');\n    const tabs = modal.querySelectorAll('.js-quick-review-tabs a');\n    \n    tabs.forEach(tab => {\n        tab.addEventListener('click', e => {\n            const type = e.target.id;\n            answers.forEach(t => {\n                t.dataset.type === type\n                    ? t.classList.remove('hide-important')\n                    : t.classList.add('hide-important');\n            });\n        });\n    });\n\n    const summaryText = modal.querySelector('.js-quick-fire-summary div:nth-child(1) > span');\n    const scoreSummary = modal.querySelector('.js-score-text-summary');\n    const continueReview = modal.querySelector('.js-quick-review-continue-review');\n\n    quickFire.isComplete = quickFire.poolSize === quickFire.termScore.total;\n\n    if(quickFire.isComplete) {\n        summaryText.innerHTML = '<span class=\"emphasis\">You have answered all of the questions correctly.</span>';\n        scoreSummary.classList.add('modal-background-relief-emphasis');\n        scoreSummary.innerHTML = `You scored ${quickFire.termScore.correct} out of ${quickFire.termScore.total}.`;        \n        if(quickFire.termScore.incorrect > 0) {\n            summaryText.innerHTML = `<span class=\"emphasis\">You've answered the questions, but not all correctly.</span>`;\n            continueReview.innerHTML = `<span>Continue</span>`;            \n            continueReview.addEventListener('click', e => {\n                const quickFireRevision = quickFireAPI.getQuickFire(quickFire.termScore.fails, enums.quickFireType.DEFINITION, {});\n                quickFireQuestions(quickFireRevision);\n            }, { once: true });            \n        } else {\n            continueReview.classList.add('hide-important');\n            continueReview.addEventListener('click', e => {\n                questions(quickFire);\n            }, { once: true });\n        }\n    } else {\n        summaryText.innerHTML = `<span>You have answered ${quickFire.termScore.total} of ${quickFire.poolSize} questions.</span>`;\n        continueReview.addEventListener('click', e => {\n            questions(quickFire);\n        }, { once: true });\n    }\n};\n\nexport const quickFireHandlers = {\n    filters,\n    questions,\n    headers,\n    init: quickFireAPI.getQuickFire,\n    definitions\n};\n\nconst quickFireFilters = linkFromLesson => {\n    quickFireHandlers.filters(linkFromLesson);\n};\n\nconst quickFireQuestions = quickFire => {\n    quickFireHandlers.questions(quickFire);\n};\n\nconst quickFireGlossary = glossary => {\n    quickFireHandlers.definitions(glossary);\n};\n\nconst quickFireActions = {\n    quickFireFilters,\n    quickFireQuestions,\n    quickFireGlossary\n};","import { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderLesson = (lesson) => {\n\n      const { config, lessons, layout } = store.getState();\n\n      const template = document.createElement('template');\n            template.innerHTML = lessonTemplate;\n\n      lesson.hideVideoClass = lesson.hasVideo ? '' : 'hide-important';\n      lesson.hideTextIntroClass = lesson.hasVideo ? 'hide-important' : '';\n\n      const savedLesson = lessons.find(saved => saved.collection.id === lesson.id);\n\n      lesson.isPaused = !!savedLesson || config.collection.id === lesson.id;\n      lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n      renderTemplate({ lesson }, template.content, document.querySelector('.js-lesson-container'));\n\n      if(savedLesson) {\n            renderReview(savedLesson.layout, savedLesson.collection, null, config);\n      } \n      \n      if(config.collection.id === lesson.id) {\n\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.id}\"]`)\n                  if(row) row.classList.add('highlighted-for-review-row');\n\n            if(config.isLandscapeMode) {\n                  setTimeout(() => {\n                        const reviewLink = row.querySelector('.js-review-summary');                  \n                        if(reviewLink) reviewLink.click();\n                  });\n            }\n\n            // current lesson whose current state is not yet saved\n            if(layout && layout.roundScoreCount) {\n                  renderReview(layout, lesson, 'progress-icon', config);\n            }\n      }\n}; \n\nconst renderReview = (layout, lesson, className, config) => {\n      const progressBar = document.querySelector('.js-right-grid progress');\n      const value = !!layout.roundProgressIndex ? layout.roundProgressIndex : progressBar ? progressBar.value : 0;\n      const review = `<progress aria-label=\"lesson quiz progress\" title=\"lesson quiz progress\" class=\"absolute\" value=\"${ value }\" max=\"${layout.roundScoreCount}\"></progress>`;\n      const parent = document.querySelector(`.js-review[data-lesson-id=\"${lesson.id}\"]`);\n            parent.innerHTML = review;\n\n      const reviewLinkBtn = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n            reviewLinkBtn.innerText = 'Resume Quiz';\n};\n","import { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport textIntroTemplate from 'ui/screens/home/home-lesson-intro-text-template.html';\n\nexport const textSetup = (collection, config) => {\n\n    let speciesCount = getSpeciesCount(collection);\n\n    const iconicTaxa = collection.guide\n                            ? collection.guide.iconicTaxa\n                            : collection.iconicTaxa || [ ...new Set(collection.items.map(i => i.iconicTaxon)) ];\n\n    const language = config.languages.find(l => l.lang === config.language).name; // place in guide, and copy to collection\n\n    const template = document.createElement('template');\n          template.innerHTML = textIntroTemplate;\n\n    const months = collection.guide ? collection.guide.season.observableMonths.map(month => month.name) : [];\n    const observableMonths = months.length > 0 ? `${months[0]}-${months[months.length - 1]}` : '';\n    const season = months.length === 0\n                    ? 'Species observations are drawn from the whole year.'\n                    : collection.guide.season === 'all_year'\n                        ? 'Species observations are drawn from the whole year.'\n                        : `Species observations are from ${observableMonths}.`;\n\n    let speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n\n    let lessonIntro = collection.intro || '';\n\n    const summary = {\n        speciesCount,\n        iconicTaxa,\n        title: collection.name,\n        language,\n        observableMonths,\n        season,\n        speciesSummary,\n        lessonIntro\n    };\n\n    DOM.rightBody.innerHTML = '';\n\n    renderTemplate(summary, template.content, DOM.rightBody);\n\n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 500);\n    \n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 1500);\n};\n\nconst handleSpeciesUpdate = (speciesCount, collection, speciesSummary, iconicTaxa) => {\n    if (speciesCount === '--') {\n        speciesCount = getSpeciesCount(collection);\n        document.querySelector('.js-species-summary').innerHTML = speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n    }\n    return { speciesCount, speciesSummary };\n};\n\nconst getSpeciesSummary = (iconicTaxa, speciesCount) => {\n    return iconicTaxa.length === 1\n        ? `${speciesCount} species in ${iconicTaxa.length} taxon.`\n        : `${speciesCount} species in ${iconicTaxa.length} taxa.`;\n};\n\nconst getSpeciesCount = collection => {\n    let count = (collection.itemNames && collection.itemNames.length > 0)\n        ? collection.itemNames.length\n        : collection.items ? collection.items.length : 0;\n    return count === 0 ? '--' : count;\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { textSetup } from 'ui/screens/home/home-lesson-intro-text';\n\nexport const renderLessonIntro = collection => {\n\n    const { config, videoPlayer, collection: lesson } = store.getState();\n\n    collection = { ...collection, items: lesson.items };\n\n    collection.hasVideo ? videoSetup(collection, videoPlayer || [], DOM.rightBody) : textSetup(collection, config);\n    \n}","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport lessonEditTemplate from 'ui/screens/lists/lesson-edit-template.html';\n\nexport const renderEditLesson = collection => {\n\nconst init = async () => {\n\n    const { config } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonEditTemplate;\n\n    const modal = document.querySelector('#basicModal');\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';\n\n    renderTemplate({ collection }, template.content, parent);\n    \n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = 'Edit lesson';\n\n    const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n          selectedSpeciesDisplay.innerHTML = '';\n    \n    const createGuide = {\n        setConfig: config => {\n        actions.boundUpdateConfig(config);\n        }\n    };\n\n    speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n};\n\ninit();\n\n};","const siblingsBefore = lessonId => {\n        \n    let siblings = document.querySelectorAll('.js-lesson-list-item:not(.hide-important)');\n    let sibling = siblings[0];\n    let index = 0;\n\n    const before = [];\n    \n    while(sibling) {\n      index++;\n      if(parseInt(sibling.dataset.lessonId) !== lessonId) {\n        before.push(sibling);\n        sibling = siblings[index];\n      } else {\n        sibling = null;\n      }\n    }\n\n    return before.length;\n  };\n\nconst scrollToTitle = lessonId => {\n  setTimeout(() => {\n    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhRow').replace('px', ''));\n    const rows = siblingsBefore(lessonId);\n    const top = standardBlock * (rows);\n\n    const scroll = document.querySelector('.lesson-list .scrollable');\n    if(scroll) scroll.scrollTop = top;\n  });\n};\n\nexport const lessonListScrollHandler = {\n  scrollToTitle\n}","import{ clone, contains, take, isEmpty } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessonIntro } from 'ui/screens/home/home-lesson-intro';\nimport { renderEditLesson } from 'ui/screens/lists/lesson-edit';\nimport { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nconst onLoadLessonViewState = (collection, videoPlayer, score, config) => {\n\n  const taxa = collection.iconicTaxa ? collection.iconicTaxa.map(taxon => taxon.common).join(', ') : '';\n\n  collection.taxa = taxa;\n  collection.hasVideo = collection.video && !isEmpty(collection.video) ? true : false;\n  collection.showVideoIconClass = collection.hasVideo ? '' : 'hide-important';\n  collection.videoState = videoHandler.setVideoState(videoPlayer || [], collection);\n  collection.reviewState = 'Lesson Quiz';\n\n  collection.hasTermsClass = collection.terms && Array.isArray(collection.terms) && collection.terms.length > 0 ? '' : 'hide-important';\n  collection.isCollectionEditableClass = '';\n\n  return collection;  \n};\n\nconst onLoadLessonsViewState = (collections, videoPlayer, score, config) => {\n  return collections.map(collection => {\n    return onLoadLessonViewState(collection, videoPlayer, score, config);\n  });\n};\n\nconst onClickViewState = (e, lessons) => {\n\n  const icon = e.currentTarget;\n  const isYoutubeIcon = elem.hasClass(icon, 'js-lesson-list-youtube');\n  const isChevronIcon = elem.hasClass(icon, 'js-lesson-list-chevron');\n  const row = icon.parentElement.parentElement;\n  const lessonId = parseInt(icon.dataset.lessonId);\n  const lesson = lessons.find(l => l.id === lessonId);\n  const container = document.querySelector(`.js-species-container[data-container-id=\"${lessonId}\"]`);\n  const speciesList = document.querySelector(`#species_list_id_${lessonId}`);\n  const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lessonId}\"]`);\n\n  let action = isYoutubeIcon ? enums.userEvent.START_LESSON : isChevronIcon ? enums.userEvent.TOGGLE_SPECIES_LIST : enums.userEvent.DEFAULT;\n  lessonStateHandler.recordUserAction(action);\n\n  hideOtherContentAndRevertChevrons(lessonId);\n\n  const isSpeciesListAvailable = !!speciesList;\n  const isSpeciesListHidden = elem.hasClass(speciesList, 'hide');\n\n  const lessonVideoState = document.querySelector(`.js-lesson-video-state[data-lesson-id=\"${lessonId}\"]`);\n  const iconIsChevron = !icon.dataset.lessonIsYoutubeIcon;\n\n  const state = {\n    requiresSpeciesList: !isSpeciesListAvailable,\n    revealSpeciesList: isSpeciesListAvailable && isSpeciesListHidden,\n    hideSpeciesList: isSpeciesListAvailable && !isSpeciesListHidden && iconIsChevron\n  };\n\n  return { icon, lesson, state, speciesList, container, lessonVideoState, reviewLink, row, isYoutubeIcon };\n};\n\nconst onLessonIconClickHandler = (icon, lessons, config, startLesson) => {\n  \n  return icon.addEventListener('click', async e => {      \n\n    const { icon, lesson, state, speciesList, container, lessonVideoState, row, isYoutubeIcon } = onClickViewState(e, lessons);\n\n    const isItemActive = item => {\n      if(item.hasOwnProperty('isActive')) {\n        return item.isActive;\n      } else {\n        return true;\n      }\n    };\n\n    lesson.items = lesson.items.filter(item => isItemActive(item));\n\n    if(config.isLandscapeMode) {\n\n      const lessonYoutubeIcons = document.querySelectorAll('.lesson-list-selected-lesson .youtube-icon');\n            lessonYoutubeIcons.forEach(icon => icon.parentElement.classList.remove('youtube-green-fg'));\n\n      if(icon.dataset.lessonIsYoutubeIcon) {\n        icon.classList.add('youtube-green-fg');\n        const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${icon.dataset.lessonId}\"]`);\n              chevron.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n      }\n\n      let siblingChevron;\n\n      if(state.requiresSpeciesList) {\n        await loadAndDisplaySpeciesList(icon, lesson, container);\n      }\n\n      if(startLesson) {\n        renderLessonIntro(lesson);\n        siblingChevron = icon.parentElement.parentElement.parentElement.children[1].children[0].children[1];\n        if(isYoutubeIcon) {\n          if(state.hideSpeciesList) {\n            siblingChevron.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n          }\n        }\n      } else {\n        if(!isYoutubeIcon) {\n          if(state.hideSpeciesList) {\n            icon.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n          } else if(!state.revealSpeciesList) {\n            icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n          }\n        }\n      }\n\n      if(state.revealSpeciesList) {        \n        speciesList.classList.remove('hide');\n        if(!isYoutubeIcon) {\n          icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n        }\n      }\n      if(state.hideSpeciesList) {\n        speciesList.classList.add('hide');\n        lessonVideoState.innerHTML = videoHandler.setVideoState(store.getState().videoPlayer || [], lesson);\n      }\n    }\n\n    if(config.isPortraitMode) {\n\n      if(state.requiresSpeciesList) {\n        await loadAndDisplaySpeciesList(icon, lesson, container);\n      }\n\n      renderLessonIntro(lesson);\n      \n      lessonStateHandler.changeRequest({\n        requestType: enums.lessonState.RENDER_SPECIES_LIST,\n        requestArgs: { lesson, container: DOM.rightBody.querySelector('.js-home-scrolling-container .scrollable') }\n      });\n    }\n\n    row.classList.add('lesson-list-selected-lesson');\n  });\n};\n\nconst onLessonTitleClickHandler = (title, lessons) => {\n    title.addEventListener('click', e => {\n          const lesson = lessons.find(lesson => lesson.id === parseInt(title.dataset.lessonId));\n          renderEditLesson(lesson);\n    });\n};\n\nconst onReviewClickHandler = reviewLink => {    \n\n  reviewLink.addEventListener('click', async e => {\n\n    lessonStateHandler.recordUserAction(enums.userEvent.START_LESSON_REVIEW);\n\n    const lessonId = reviewLink.dataset.lessonId;\n    // const loadingMessage = document.querySelector(`.js-loading-review-message[data-lesson-id=\"${lessonId}\"]`);\n    //       loadingMessage.classList.remove('hide');\n\n    //       setTimeout(() => {\n    //         loadingMessage.classList.add('hide');\n    //       }, 2000);\n\n    const { lesson } = store.getState();\n\n    lessonStateHandler.changeRequest({\n      requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n      requestArgs: {\n        id: reviewLink.dataset.lessonId\n      }\n    });\n  });\n};\n\nconst hideOtherContentAndRevertChevrons = selectedLessonId => {\n\n  const upChevrons = Array.from(document.querySelectorAll('.js-lesson-list-chevron .fa-chevron-up'));\n\n  upChevrons.forEach(chevron => {\n    \n    const chevronLessonId = parseInt(chevron.dataset.lessonId);\n\n    if(chevronLessonId !== selectedLessonId) {\n      \n      chevron.click();\n        \n      const lesson = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${chevronLessonId}\"]`);\n            lesson.classList.remove('highlighted-for-review-row');\n    }\n  });\n};\n\nconst loadAndDisplaySpeciesList = async(icon, lesson, container) => {\n\n  Array.from(icon.parentElement.children).forEach(child => child.dataset.selected = true);\n\n  if(userAction && userAction.name === enums.userEvent.START_LESSON.name) { return; }\n\n  const { userAction, config } = store.getState();\n\n  await lessonStateHandler.changeRequest({\n    requestType: enums.lessonState.RENDER_SPECIES_LIST,\n    requestArgs: { lesson, container }\n  });\n\n  lessonListScrollHandler.scrollToTitle(lesson.id);\n};\n\nexport const lessonListEventHandler = {\n  onLoadLessonViewState,\n  onLoadLessonsViewState,\n  onLessonIconClickHandler,\n  onReviewClickHandler,\n  onLessonTitleClickHandler,\n  hideOtherContentAndRevertChevrons\n};","import { onCreateCustomLesson } from 'ui/create-guide-modal/create-guide';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonListEventHandler } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderCustomLesson = (lessons, savedLessons, videoPlayer, score, config) => {\n\n    onCreateCustomLesson(collection => {\n\n        const parent = document.querySelector('.lesson-list > .scrollable');\n        const template = document.createElement('template');\n              template.innerHTML = lessonTemplate;\n        \n        const lesson = lessonListEventHandler.onLoadLessonViewState(collection, savedLessons, videoPlayer, score, config);\n              lesson.hideVideoClass = 'hide-important';\n              lesson.hideTextIntroClass = '';\n        \n        lessons.push(lesson);\n        \n        lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n        renderTemplate({ lesson }, template.content, parent);\n        \n        // const title = document.querySelector(`.js-lesson-title[data-lesson-id=\"${lesson.id}\"]`);\n        // lessonListEventHandler.onLessonTitleClickHandler(title, lessons);\n\n        const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n        lessonListEventHandler.onReviewClickHandler(reviewLink, lessons);\n\n        const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${lesson.id}\"]`);\n\n        if(chevron) {\n          chevron.classList.remove('landscape');\n          lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false);\n        }\n\n        const youtubeLessonIcon = document.querySelector(`.js-lesson-list-youtube[data-lesson-id=\"${lesson.id}\"]`);\n        if(youtubeLessonIcon) {\n          youtubeLessonIcon.classList.add('hide-important');\n        }\n\n        const scrollOptions = {\n          left: 0,\n          top: 1000,\n          behavior: 'smooth'\n        }\n            \n        document.querySelector('.js-lesson-container').scrollTo(scrollOptions);\n    });\n};","import { contains } from 'ramda';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { createGuideHandler } from 'ui/create-guide-modal/create-guide';\nimport { quickFireHandlers } from 'ui/quick-fire-modal/quick-fire';\nimport { renderLessonListHeader } from 'ui/screens/lists/lesson-list-header';\nimport { renderLesson } from 'ui/screens/lists/lesson';\nimport { renderCustomLesson } from 'ui/screens/lists/lesson-custom';\nimport { lessonListEventHandler } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonListTemplate from 'ui/screens/lists/lesson-list-template.html';\n\nexport const renderLessons = () => {\n\n    let { config, collections, lessons: savedLessons, videoPlayer, score } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonListTemplate;\n\n    let lessons = lessonListEventHandler.onLoadLessonsViewState(collections.filter(collection => (collection.isActive === undefined || collection.isActive)), videoPlayer, score, config);\n\n    lessons = lessons.sort(function(a,b){\n          const tsa = a.create ? a.create.seconds : 0;\n          const tsb = b.create ? b.create.seconds : 0;\n        return tsb - tsa;\n    });\n\n    let parent = config.isPortraitMode ? DOM.rightBody : DOM.leftBody;\n        parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n      lessons.forEach(lesson => renderLesson(lesson));\n\n      renderLessonListHeader(parent);\n\n      const createCustomLessonBtn = parent.querySelector('.js-create-custom-lesson');          \n            createCustomLessonBtn.addEventListener('click', e => {\n                  createGuideHandler(1);\n                  lessonListEventHandler.hideOtherContentAndRevertChevrons(0);\n            });    \n\n      // const lessonTitles = document.querySelectorAll('.js-lesson-title');\n      //       lessonTitles.forEach(title => lessonListEventHandler.onLessonTitleClickHandler(title, lessons));\n\n      const youtubeLessonIcons = document.querySelectorAll('.js-lesson-list-youtube');\n            youtubeLessonIcons.forEach(youtube => lessonListEventHandler.onLessonIconClickHandler(youtube, lessons, config, true));\n      highlightActiveLesson(youtubeLessonIcons);\n\n      const chevrons = document.querySelectorAll('.js-lesson-list-chevron');\n            chevrons.forEach(chevron => lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false));\n      highlightActiveLesson(chevrons);\n\n      const reviews = document.querySelectorAll('.js-review-link');\n            reviews.forEach(reviewLink => lessonListEventHandler.onReviewClickHandler(reviewLink));\n      highlightActiveLesson(reviews);\n\n      setTimeout(() => {      \n\n            let terms = document.querySelectorAll('.js-terms-review-link');\n                terms.forEach(term => {\n                  term.addEventListener('click', e => {                         \n                        const lesson = lessons.find(lesson => lesson.id === parseInt(term.dataset.lessonId));\n                        if(lesson.terms) {\n                              const { glossary } = store.getState();\n                              setTimeout(() => {\n                                    const { quickFire } = store.getState();\n                                    if(quickFire && quickFire.lessonId === lesson.id) {\n                                          quickFireHandlers.questions(quickFire);\n                                    } else {\n                                          quickFireHandlers.questions({ ...quickFireHandlers.init(glossary, enums.quickFireType.DEFINITION, lesson), linkFromLesson: true });\n                                    }\n                              },150);\n                        }\n                });\n            });\n            highlightActiveLesson(terms);\n\n      },100);\n\n      renderCustomLesson(lessons, savedLessons, videoPlayer, score, config);      \n};\n\nconst highlightActiveLesson = lessons => {\n      lessons.forEach(lesson => lesson.addEventListener('click', e => {\n            \n            const rows = document.querySelectorAll('.js-lesson-list-carousel-item');\n                  rows.forEach(row => row.classList.remove('highlighted-for-review-row'));\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.dataset.lessonId}\"]`);\n            if (row)\n                  row.classList.add('highlighted-for-review-row');\n\n            // lessonListScrollHandler.scrollToTitle(lesson.dataset.lessonId);\n      }));\n};\n\n","// https://github.com/GoogleChromeLabs/samesite-examples/blob/master/javascript.md\n\nconst FIRST_TIME = 'first_time';\nconst LAST_VISITED = 'last_visited';\nconst TOO_MANY_DAYS = 5;\nconst SECURE = 'SameSite=Lax;';\n\nlet cookie;\n\nconst setFirstTimeVisitorCookie = () =>  {\n    let isFirstVisit = true;\n    if (document.cookie.indexOf(FIRST_TIME) < 0) {\n      cookie = `${FIRST_TIME}=false; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        isFirstVisit = false;\n    }\n    return isFirstVisit;\n};\n\nconst setLastVisitedCookie = date => {    \n    if (document.cookie.indexOf(LAST_VISITED) < 0) {\n      cookie = `${LAST_VISITED}=${date}; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        setLastVisited(date);\n    }    \n};\n\nconst hasUserBeenAwayTooLong = () => {\n    const lastVisited = readCookie(LAST_VISITED);\n\n    if(!lastVisited) return false;\n\n    const timeDiff = Math.abs(new Date() - new Date(lastVisited));\n    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)); \n    const beenGoneTooLong = daysDiff > TOO_MANY_DAYS;\n    if(beenGoneTooLong) {\n        setLastVisited(Date());\n    }\n    return beenGoneTooLong;\n};\n\nconst isFirstTimeVisitor = () => {\n    return readCookie(FIRST_TIME) === null;\n};\n\nconst removeFirstTimeVisitorCookie = () => {\n  cookie = `${FIRST_TIME}= ; expires = Thu, 01 Jan 1970 00:00:00 GMT; ${SECURE}`;\n  document.cookie = cookie; \n};\n\nexport const cookieHandler = {\n    setFirstTimeVisitorCookie,\n    isFirstTimeVisitor,\n    removeFirstTimeVisitorCookie,\n    setLastVisitedCookie,\n    hasUserBeenAwayTooLong\n};\n\nconst readCookie = name => {\n\tvar nameEQ = name + \"=\";\n\tvar ca = document.cookie.split(';');\n\tfor(var i=0;i < ca.length;i++) {\n\t\tvar c = ca[i];\n\t\twhile (c.charAt(0)==' ') c = c.substring(1,c.length);\n\t\tif (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n\t}\n\treturn null;\n}\n\nconst setLastVisited = date => {\n    const cookieValue = document.cookie.replace(/(?:(?:^|.*;\\s*)last_time\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n    const cookieToAdd = cookieValue + `${LAST_VISITED}=${date};`;\n    cookie = `${cookieToAdd}; ${SECURE}`;\n    document.cookie = cookie;\n};\n","import lessonListHeaderTemplate from 'ui/screens/lists/lesson-list-header-template.html';\n\nexport const renderLessonListHeader = parent => {\n\n    const header = document.createElement(\"div\");\n          header.innerHTML = lessonListHeaderTemplate;\n\n    const sibling = document.querySelector('.lesson-list .scrollable');\n\n    parent = document.querySelector('.lesson-list');\n    parent.insertBefore(header, sibling);\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport settingsTemplate from 'ui/fixtures/settings-template.html';\n\nexport const settingsHandler = () => {\n    \n  document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n    \n    template.innerHTML = settingsTemplate;\n    \n    document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon settings';\n\n    const { config } = store.getState();\n\n    const delay = config.callbackTime/1000;\n\n    const languages = config.languages;\n\n    renderTemplate({ delay, languages }, template.content, document.querySelector('#basicModal .js-modal-text'));\n    \n    const clearCacheBtn = document.querySelector('.js-clear-cache-btn');\n    const setDelayBtn = document.querySelector('.js-set-delay-btn');\n    const setDelayInput = document.querySelector('.js-set-delay-input');\n    const delayTxt = document.querySelector('.js-delay-text');\n\n    document.querySelector('#basicModal .modal-body').classList.remove('bird-song-bg');\n\n    delayTxt.innerHTML = delay === 1\n    ? `The current delay is ${delay} second.`\n    : `The current delay is ${delay} seconds.`;\n\n    clearCacheBtn.addEventListener('click', () => { \n        clearCacheBtn.innerText = 'Clearing cache…';\n        setTimeout(() => {\n            persistor.purge();\n            clearCacheBtn.innerText = 'Cache cleared';\n            cookieHandler.removeFirstTimeVisitorCookie();\n            setTimeout(() => {                                \n                setTimeout(() => {                    \n                    window.location.reload(true);\n                }, 500);\n            }, 500);\n        }, 1000);\n    });\n\n    setDelayBtn.addEventListener('click', () => {\n        setDelayBtn.innerHTML = 'Setting delay…';\n        setTimeout(() => {\n            const delay = setDelayInput.value;\n            config.callbackTime = delay * 1000;\n            actions.boundUpdateConfig(config);\n            setDelayBtn.innerHTML = 'Set delay';\n            delayTxt.innerHTML = delay === '1'\n                ? `Delay updated to ${delay} second.`\n                : `Delay updated to ${delay} seconds.`;\n        }, 500);        \n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        actions.boundUpdateConfig(config);\n    });\n};","import { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport loginTemplate from 'ui/fixtures/login-template.html';\nimport logoutTemplate from 'ui/fixtures/logout-template.html';\n\nexport const renderLogin = user => {\n\n  const init = () => {\n\n    document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n        \n    if(user) {\n\n        template.innerHTML = logoutTemplate\n\n        renderTemplate({ email: user.email }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon logout';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        const auth = firebase.auth();\n\n        setTimeout(() => {\n            \n            const form = document.querySelector('#logout-form');\n                  form.addEventListener('submit', e => {\n\n                e.preventDefault();\n\n                const logOut = document.querySelector('#js-logout-btn');\n                      logOut.setAttribute('disabled', 'disabled');\n\n                  auth.signOut()\n                  .then(() => {\n                    actions.boundUpdateUser(null);\n                    logOut.innerHTML = 'Success';\n                    setTimeout(() => {\n                        footer.click();\n                    }, 2500);\n                  });\n          });\n\n        }, 500);\n\n\n    } else {\n\n        template.innerHTML = loginTemplate;\n\n        renderTemplate({ }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon login';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        const auth = firebase.auth();\n\n        setTimeout(() => {\n\n            const email = document.querySelector('#login-email');\n                  email.focus();\n            \n            const password = document.querySelector('#login-password');   \n\n            const form = document.querySelector('#login-form');\n                  form.addEventListener('submit', e => {\n\n                    e.preventDefault();\n\n                    const logIn = document.querySelector('#js-login-btn');\n                          logIn.setAttribute('disabled', 'disabled');              \n                    \n                    auth.signInWithEmailAndPassword(email.value, password.value)\n                    .then((credentials) => {\n                        actions.boundUpdateUser({\n                            email: email.value,\n                            password: password.value\n                        });\n                        logIn.innerHTML = 'Success';\n                        setTimeout(() => {\n                            footer.click();\n                        }, 2500);\n                    })\n                    .catch( error => {\n                        const notLoggedIn = document.querySelector('.js-not-logged-in');\n                              if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n                              if(notLoggedIn) notLoggedIn.querySelector('.js-message').innerHTML = error.message;\n                    });\n                });\n\n        }, 500);\n\n    }\n  };\n\n  init();\n};\n\nexport const renderLoggedIn = user => {\n\n    if(user) {\n        const loggedIn = document.querySelector('.js-logged-in');\n              if(loggedIn) loggedIn.classList.remove('hide-important');\n    } else {\n        const notLoggedIn = document.querySelector('.js-not-logged-in');\n              if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n        const loggedOut = document.querySelector('.js-logged-out');\n              if(loggedOut) loggedOut.classList.remove('hide-important');\n    }\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport languageTemplate from 'ui/fixtures/language-template.html';\n\nexport const renderLanguagePicker = () => {\n\n    const { config } = store.getState();\n\n    const parent = document.querySelector('#basicModal .js-modal-text');\n          parent.innerHTML = '';\n\n    const template = document.createElement('template');    \n          template.innerHTML = languageTemplate;\n\n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Vernacular language';\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        actions.boundUpdateConfig(config);\n    });\n};","import{ contains } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { subscription } from 'redux/subscriptions';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { settingsHandler } from 'ui/fixtures/settings';\nimport { renderLogin } from 'ui/fixtures/login';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { quickFireHandlers } from 'ui/quick-fire-modal/quick-fire';\nimport { renderLanguagePicker } from 'ui/fixtures/language';\n\nimport navigationPortraitTemplate from 'ui/fixtures/navigation-portrait-template.html';\nimport navigationLeftTemplate from 'ui/fixtures/navigation-left-template.html';\nimport navigationRightTemplate from 'ui/fixtures/navigation-right-template.html';\n\nconst onLoseFocusListeners = [];\n\nexport const onAddLoseFocusListener = listener => {\n    onLoseFocusListeners.pop();\n    onLoseFocusListeners.push(listener);\n}\n\nexport const renderNavigation = collection => {\n\n    const { config, counter } = store.getState();\n\n    const template = document.createElement('template');\n\n    let parent;\n    \n    if(config.isPortraitMode) {\n        template.innerHTML = navigationPortraitTemplate;\n        parent = document.querySelector('.js-main-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    } else {\n        template.innerHTML = navigationLeftTemplate;\n        parent = document.querySelector('.js-left-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n        template.innerHTML = navigationRightTemplate;\n        parent = document.querySelector('.js-right-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    }\n\n    const navIcons =  document.querySelectorAll('.js-nav-icons .icon');\n\n    navIcons.forEach(icon => {\n\n        icon.addEventListener('click', async event => {\n            \n                const clickedIcon = event.currentTarget;\n                \n                const { collection, config } = store.getState();\n\n                const toggleIconOnOff = clickedIcon => {\n                    clickedIcon.classList.add('active-icon');\n                    setTimeout(() => {\n                        clickedIcon.classList.remove('active-icon');\n                    }, 1000);\n                };\n\n                let lesson;\n\n                switch(enums.navigation.enumValueOf(clickedIcon.id)) {\n                    case enums.navigation.LANDSCAPE_HOME:\n                        const isIconActive = contains('active-icon', clickedIcon.classList);\n                        if(!isIconActive) {\n                            clickedIcon.classList.add('active-icon');\n                        }\n                        break;\n                    case enums.navigation.SETTINGS:\n                        toggleIconOnOff(clickedIcon);\n                        settingsHandler();\n                        break;\n                    case enums.navigation.PORTRAIT_HOME:\n                        onLoseFocusListeners.forEach(listener => listener());\n                        const activeInfoIcon = document.querySelector('.js-info.active-icon');\n                        if(activeInfoIcon) activeInfoIcon.classList.remove('active-icon');\n                        clickedIcon.classList.add('active-icon');\n                        subscription.getByRole('screen').forEach(sub => subscription.remove(sub));\n                        lesson = await lessonStateHandler.changeRequest({ requestType: enums.lessonState.PAUSE_LESSON });\n                        renderLessons();\n                        DOM.rightHeaderTxt.innerHTML = 'Learn the planet';\n                        DOM.rightHeaderScoreTxt.innerHTML = '';\n                        break;\n                    case enums.navigation.GLOSSARY:   \n                        toggleIconOnOff(clickedIcon);\n                        const { glossary } = store.getState();\n                        const definitions = !!collection.glossary\n                            ? glossary.filter(definition => contains(definition.taxon, collection.glossary))\n                            : glossary;\n                        quickFireHandlers.definitions(definitions);\n                        break;\n                    case enums.navigation.EMAIL:\n                        toggleIconOnOff(clickedIcon);\n                        break;\n                    case enums.navigation.LOGIN:\n                        renderLogin(store.getState().user);\n                        break;\n                    case enums.navigation.LANGUAGE:\n                        renderLanguagePicker();\n                    default:\n                        return;\n                }\n        });        \n    });\n\n    const onLoadState = (config, counter) => {\n        \n        if(config.isPortraitMode && config.collection.id !== 0 && !counter.isLessonRehydrated) {\n            navIcons.forEach(icon => icon.classList.remove('active-icon'));\n            return;\n        }\n\n        if(counter.isLessonPaused) {\n\n            if(config.isPortraitMode) {\n                const id = enums.navigation.PORTRAIT_HOME.name;\n                let icon = document.getElementById(id);\n                const returningUser = !cookieHandler.isFirstTimeVisitor();\n\n                if(id === enums.navigation.LANDSCAPE_HOME.name || (id === enums.navigation.PORTRAIT_HOME.name && returningUser)) {\n                    icon.classList.add('active-icon');\n                }\n            }\n        } else {\n            navIcons.forEach(icon => icon.classList.remove('active-icon'));\n        }\n    };\n\n    onLoadState(config, counter);\n};\n\nexport const renderLoginChanges = user => {\n};\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport { onAddLoseFocusListener } from 'ui/fixtures/navigation';\n\nimport textEntryTemplate from 'ui/screens/text-entry/text-entry-templates.html';\nimport textEntryPortraitTemplate from 'ui/screens/text-entry/text-entry-portrait-templates.html';\n\nexport const renderInput = (screen, question) => {\n\n    const { lessonPlan, collection, config, layout } = store.getState();\n\n    const item = collection.nextItem;\n\n    let vernacularName, binomial, questionTxt;\n\n    questionTxt = 'Complete the latin name';\n\n    switch(question.taxon) {\n        case 'genus': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ${question.species}`;\n            questionTxt = 'Enter the genus name';\n            break;\n        case 'species': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `${question.genus} ---`;\n            questionTxt = 'Enter the species name';\n            break;\n        case 'name': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ---`;\n            questionTxt = 'Enter full latin name';\n            break;\n        case 'vernacular':\n            vernacularName = '--- ---';\n            binomial = item.name;\n            questionTxt = 'Enter the common name';\n            break;\n    }\n\n    const help = config.isLandscapeMode ? '(Complete the name below.)' : '(Scroll to see more images.)';\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help, term: '' });\n\n    const template = document.createElement('template');\n          template.innerHTML = config.isLandscapeMode ? textEntryTemplate : textEntryPortraitTemplate;\n    \n    renderTemplate({ }, template.content, parent);\n\n    const inputTxt = document.querySelector('.js-txt-input');\n    const helpTxt = document.querySelector('.js-help-txt');\n\n    switch(question.taxon) {\n        case 'genus': \n            inputTxt.setAttribute('placeholder', 'Enter genus name');\n            helpTxt.innerHTML = `--- ${question.species}`;\n            break;\n        case 'species': \n            inputTxt.setAttribute('placeholder', 'Enter species name');\n            helpTxt.innerHTML = `${utils.capitaliseFirst(question.genus)} ---`;\n            break;\n        case 'name': \n            inputTxt.setAttribute('placeholder', 'Enter latin name');\n            helpTxt.innerHTML = `--- ---`;\n            break;\n        case 'vernacular':\n            inputTxt.setAttribute('placeholder', 'Enter common name');\n            helpTxt.innerHTML = `-----`;\n            break;\n    }\n\n    const boundScore = {};\n\n    const answerBtn = document.querySelector('.js-check-answer');\n\n    const callback = (score, scoreUpdateTimer) => {        \n        boundScore.scoreUpdateTimer = scoreUpdateTimer;\n        boundScore.score = score;\n    };\n\n    const scoreEventHandler = e => {\n        e.preventDefault();\n        const answer = document.querySelector('.js-txt-input').value;\n        const score = { \n            itemId: item.id, question, answer, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt, \n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        if(answerBtn) answerBtn.disabled = true;\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n        if(helpTxt) helpTxt.innerHTML = question.taxon === 'vernacular' ? item.vernacularName : item.name;\n    };\n\n    const loseFocusMobileHandler = e => {\n        document.removeEventListener('focusout', loseFocusMobileHandler);\n        const answer = document.querySelector('.js-txt-input').value;\n        const score = { \n            itemId: item.id, question, answer: document.querySelector('.js-txt-input').value, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt,\n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n    };\n\n    if(config.isLandscapeMode) {\n        answerBtn.addEventListener('click', scoreEventHandler, { once: true });\n    }\n    \n    if(config.isPortraitMode) renderPortrait(item, config);\n    else renderLandscape(item, config, question);\n\n    document.querySelector('.js-continue-lesson-btn').addEventListener('click', e => {\n        window.clearTimeout(boundScore.scoreUpdateTimer);\n        bindScore(boundScore.score);\n    }, { once: true });\n\n    if(config.isPortraitMode) {\n\n        // hide attribution for now - space issue various across devices\n        const attribution = document.querySelector('.js-attribution-layer');\n              attribution.classList.add('hide-important');\n        const indicators = document.querySelector('.js-carousel-indicators');\n              indicators.classList.add('hide-important');\n    }\n};\n\nconst renderPortrait = (item, config) => {\n    \n    const images = prepImagesForCarousel(item, config, imageUseCases.TEXT_ENTRY);\n\n    const parent = document.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent });\n};\n\nconst renderLandscape = (item, config, question) => {\n    \n    let answer = question[question.taxon];\n    \n    let pool;\n\n    switch(question.taxon) {\n        case 'vernacular':\n            pool = item.vernacularName.toLowerCase();\n            answer = question.common;\n            break;\n        case 'genus':\n            pool = item.taxonomy.genus.toLowerCase();\n            break;\n        case 'species':\n            pool = item.taxonomy.species.toLowerCase();\n            break;\n        case 'binomial':\n        case 'name':\n            pool = item.name.toLowerCase();\n            answer = question.binomial;\n            break;\n    }\n\n    let letterBlocks = '';\n\n    utils.shuffleArray(Array.from(pool)).forEach( (letter, index) => {\n        if(letter === ' ') letter = '&nbsp;';\n        letterBlocks += `<span id=\"${index}\" class=\"block\">${letter}</span>`\n    });\n\n    document.querySelector('.js-pool-letters').innerHTML = letterBlocks;\n\n    const input = document.querySelector('.js-txt-input');\n\n    const letters = [];\n\n    const deleteLetter = letter => {\n        let value = document.querySelector('.js-txt-input').value;\n        let activeBlocks = Array.from(document.querySelectorAll('.block.active'));\n        let activeLetters = Array.from(value);\n        let activeBlock = activeBlocks.find(block => block.innerText.trim() === activeLetters[activeLetters.length-1].trim());\n        let lastLetter = letter || activeBlock;\n        if(value.length > 0){\n            let indexInInput = value.lastIndexOf(lastLetter.innerHTML);            \n            let newValue = '';\n            let letters = Array.from(value);\n            letters.splice(indexInInput,1);\n            letters.forEach(letter => newValue += letter);            \n            input.value = newValue;\n        }\n        let correctBlocks = Array.from(document.querySelectorAll('.correct'));\n            correctBlocks.forEach(b => b.classList.remove('correct'));\n            correctBlocks.forEach(b => b.classList.add('active'));\n        if(lastLetter) {\n          lastLetter.classList.remove('active');\n          letters.forEach(l => {            \n              if(l.id === lastLetter.id) {\n                  const letterIndex = letters.indexOf(l);\n                  if(letterIndex > -1)\n                      letters.splice(letterIndex,1);\n              }\n          });        \n        }\n    };\n\n    const blocks = document.querySelectorAll('.block');\n\n    blocks.forEach(block => {\n        block.addEventListener('click', e => {\n          e.preventDefault();\n          const letter = e.target;\n          if(letter.classList.contains('active')) {\n              deleteLetter(letter);\n          } else {\n              letter.classList.add('active');\n              letters.push(letter);\n              if(letter.innerHTML === '&nbsp;')\n                  input.value += ' ';\n              else\n                  input.value += letter.innerHTML;\n          }\n          if(input.value === answer.toLowerCase()) {\n              blocks.forEach(block => block.classList.add('correct'));\n          }\n        });\n    });\n\n    document.querySelector('.js-delete-letter').addEventListener('click', e => {\n      e.preventDefault();\n      deleteLetter();\n    });\n\n    const keyboardBtn = document.querySelector('.js-toggle-keyboard');          \n          keyboardBtn.addEventListener('click', e =>{\n            e.preventDefault();\n            const disabled = input.hasAttribute('disabled');\n            if(disabled) {\n                keyboardBtn.innerHTML = 'Enable letters';\n                input.removeAttribute('disabled');\n                input.focus();\n            } else {\n                keyboardBtn.innerHTML = 'Enable keyboard'\n                input.setAttribute('disabled', 'disabled');\n            }\n          });\n\n    setTimeout(() => {\n      keyboardBtn.focus();\n    }, 500);\n\n    const blockArray = [ ...blocks ];    \n    const entries = [];\n    let selectedBlock;\n\n    input.addEventListener('input', e => {\n        e.preventDefault();\n        if(!e.data) return;\n        let entry = e.data.toLowerCase();\n        entry = entry === ' ' ? '&nbsp;' : entry;\n        entries.push(entry);\n        selectedBlock = blockArray.find(block => block.innerHTML === entry);\n        if(selectedBlock) selectedBlock.classList.add('active');\n        if(input.value === answer.toLowerCase()) {\n            blockArray.forEach(block => block.classList.add('correct'));\n        }\n    });\n\n    input.addEventListener('keyup', e => {\n        e.preventDefault();\n        if(e.keyCode === 8) { // Backspace\n          const entry = entries.pop();\n          selectedBlock = blockArray.find(block => block.innerHTML === entry);\n          if(selectedBlock) selectedBlock.classList.remove('active');\n        }            \n    });\n};\n","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { findRankByIconicTaxon } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\n\nexport const getPoolItems = async (collection, poolSize = 5) => {\n  \n  try {\n    \n    const item = collection.nextItem;\n\n    if(collection.behaviour === 'static') {\n      const otherItems = collection.items.filter(i => i.name !== item.name);\n      if(otherItems && otherItems.length > 0) {\n        return getItemsFromCollection(otherItems, item, poolSize);\n      }\n    }\n\n    const rank = findRankByIconicTaxon(item.taxonomy, item.iconicTaxon);\n\n    let taxonicMatches = await firestore.getSpeciesByIconicTaxon(item);\n\n    if(item.iconicTaxon.toLowerCase() === 'fungi') {\n        const isLichen = item.lichen;\n        taxonicMatches = isLichen ? taxonicMatches.filter(item => item.lichen) : taxonicMatches.filter(item => !item.lichen);\n    }\n\n    const speciesPool = utils.shuffleArray(taxonicMatches.filter(ci => ci.name.toLowerCase() !== item.name.toLowerCase()));\n\n    // temporary exceptions because there are so few (6 and 3) members of these taxa\n\n    const isException = item.iconicTaxon.toLowerCase() === 'reptilia' || item.iconicTaxon.toLowerCase() === 'amphibia';\n    \n    if(!speciesPool) {\n      getPoolItems(collection);\n    }\n\n    // if not enough, only get the additional necessary number (but duplicates???)\n\n    else if(speciesPool.length < poolSize && !isException) {\n      getPoolItems(collection);\n    } \n    else {\n\n      const items = take(poolSize, speciesPool);\n      \n      items.push(item);\n    \n      return await items;\n    }\n  } catch(e) {\n    logError('renderMixedSpecimenImagesAndQuestion init', e);\n  }\n};\n\n  const getItemsFromCollection = (otherItems, item, poolSize) => {\n    const items = take(poolSize, utils.shuffleArray(otherItems));\n    return utils.shuffleArray([ ...items, item]);\n  };","import{ take, contains, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { epithets } from 'api/botanical-latin';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nimport stripTemplate from 'ui/screens/multichoice/multi-strips-template.html';\nimport stripWithImageTemplate from 'ui/screens/multichoice/multi-strips-with-images.html';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\n\nexport const renderMultiStrips = (collection, bonus, args) => {\n\n    try {\n\n        const { config, lesson, layout, userAction } = store.getState();\n\n        if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n\n        const item = collection.nextItem || collection.items[collection.itemIndex];\n\n        const taxon = matchTaxon(item.taxonomy, iconicTaxa);                        \n    \n        const screen = bonus ? bonus.screen || layout.screens[1] : layout.screens[1];\n\n        let defaultQueryLimit = 6, defaultLanguage = 'en';\n\n        defaultLanguage = config.language;\n\n        const init = async () => {\n\n            const render = (answer, answers, overrides) => {\n\n                const vernacularName = (overrides && overrides.vernacularName !== undefined) ? overrides.vernacularName : item.vernacularName;\n                const binomial = (overrides && overrides.binomial !== undefined) ? overrides.binomial : item.name;\n                const question = (overrides && overrides.question) ? overrides.question : 'Match the name';\n                const helpDefault = config.isLandscapeMode ? '(Select the name below.)' : '(Tap on the name below.)';\n                const help = (overrides && overrides.help !== undefined) ? overrides.help : helpDefault;\n                const term = (overrides && overrides.term !== undefined) ? overrides.term : '';\n                const className = (overrides && overrides.className !== undefined) ? overrides.className : '';\n                const headerClassName = (overrides && overrides.headerClassName !== undefined) ? overrides.headerClassName : '';\n                const clue = (overrides && overrides.clue !== undefined) ? overrides.clue : null;\n                \n                const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question, help, term, className, headerClassName, bonus });\n\n                const template = document.createElement('template');\n                      template.innerHTML = answer.img ? stripWithImageTemplate : stripTemplate;\n\n                answers.forEach((answer, index) => {\n                    answer.index = index;\n                    answer.name = answer.name || '';\n                    answer.names = answer.names ? answer.names.join(', ') : '';\n                });\n\n                renderTemplate({ answers }, template.content, parent);\n\n                const strips = document.querySelectorAll('.js-rptr-strips .strip');\n\n                if(overrides.italicise) strips.forEach(strip => strip.classList.add('binomial'));\n\n                const taxon = { name: item.taxonomy.family, binomial: item.name, question: answer.term };\n\n                const test = { \n                    itemId: item.id, \n                    items: strips, \n                    taxon, binomial: \n                    item.name, \n                    questionCount: lesson.questionCount, \n                    layoutCount: lesson.layoutCount, \n                    points: layout.points, \n                    clue, \n                    answerIndex: answers.findIndex(a => a.term === answer.term),\n                    questionText: question\n                };\n                        \n                scoreHandler('strip', test, null, config);\n            }\n\n            if(screen.name === 'species-scientifics') {\n\n                const renderBinomialQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.name };\n                        answers = await getPoolItems(collection, 6);\n                        answers = take(8, answers).filter(s => s.name.toLowerCase() !== item.name.toLowerCase()).map(s => s.name);\n                        answers = take(5, answers);\n                        answers.push(item.name);\n                        answers = answers.map(a => { return { term: a } });\n                        answers = utils.shuffleArray(answers);\n                        \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    }\n\n                    await buildQuestion();\n\n                    render( answer, answers, { binomial: 'Latin name', question: 'What\\'s the latin name?', help, italicise: true });\n                };\n\n                renderBinomialQuestions();\n            }\n\n            if(screen.name === 'species-vernaculars') {\n\n                const renderVernacularQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.vernacularName };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => itemProperties.getVernacularName(a, config, false, 'vernacularName', defaultLanguage));\n                        answers = take(5, answers.filter(a => a !== item.vernacularName));\n                        answers = utils.shuffleArray([item.vernacularName, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: 'Common name', question: `What's the common name?`, help });\n                };\n\n                renderVernacularQuestions();\n            }\n\n            if(screen.name === 'species-identification') {\n\n                const renderIdQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.quickId };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => a.quickId);\n                        answers = take(5, answers.filter(a => a !== item.quickId));\n                        answers = utils.shuffleArray([item.quickId, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: item.vernacularName, question: 'Which description fits?', help });\n                };\n\n                renderIdQuestions();\n            }\n\n            if(screen.name === 'family-strips') {\n\n                const random = utils.getRandomInt(2);\n\n                const type = random === 0 ? 'identification' : 'summary';\n\n                const number = config.isPortraitMode ? 4 : 4;\n\n                const families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                const answer = { term: item.family[type], name: item.family.name } || { type: { term: `Missing ${type}`}, name: item.family.name };\n                const alternativeFamilies = take(number-1, take(number, utils.shuffleArray(families))).filter(f => f.name.toLowerCase() !== item.taxonomy.family.toLowerCase());\n                let alternatives = alternativeFamilies.filter(f => f[type] && f[type] !== undefined && f[type] !== '').map(f => { return { type: f[type], name: f.name, names: f.names } });\n                    alternatives = alternatives.map(a => { return { term: a.type, name: a.name, names: a.names } });\n                let answers = utils.shuffleArray([answer, ...alternatives]);                    \n                \n                const help = config.isLandscapeMode ? '(Select the description below.)' : '(Tap on the description.)';\n\n                render(answer, answers, { question: 'Match species family', help, clue: item.taxonomy.family });\n            }\n\n            if(screen.name === 'epithet') {\n                \n                const epithet = layout.epithet.latin.join(', ');\n                const number = config.isPortraitMode ? 6 : 6;\n                \n                let alternatives = take(number-1, utils.shuffleArray(epithets)).filter(e => !contains(e.latin, epithet));\n                    alternatives = alternatives.map(e => e.en.join(', '));\n                    alternatives = alternatives.map(a => { return { term: a } });\n                let answer = epithets.find(e => e.latin.join(', ').toUpperCase() === epithet.toUpperCase());\n                    answer = answer ? answer[config.language][0] : epithet;\n                    answer = { term: answer };\n                \n                const answers = utils.shuffleArray([answer, ...alternatives]);\n                \n                if(config.isLandscapeMode) {            \n                    render(answer, answers, { question: layout.epithet.latin.join(', '), help: '(Match the latin term)' });\n                } else {\n                    render(answer, answers, { question: 'Match latin word', help: '', vernacularName: '', binomial: '', term: layout.epithet.latin.join(', ') });\n                }\n            }\n\n            if(screen.name === 'definition') {\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n            }\n\n            if(screen.name === 'family') {\n\n                const indices = config.isPortraitMode ? [5,6] : [5,6];\n\n                let families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                let family = item.taxonomy.family;\n                let otherFamilies = take(indices[0], take(indices[1], utils.shuffleArray(families)).filter(family => family.name.toLowerCase() !== item.taxonomy.family.toLowerCase()));\n                let otherFamiliesLatinNames = otherFamilies.map(family => family.name);\n                let otherFamiliesCommonNames = otherFamilies.map(of => of.names[0]);\n                \n                let answer, answers;\n\n                const random = utils.getRandomInt(2);\n\n                switch(random) {            \n                    case 0:\n                        answer = { term: item.family.vernacularName };\n                        otherFamiliesCommonNames = otherFamiliesCommonNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesCommonNames]);\n                        if(answer === undefined) console.log('Missing question - case 0 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name' });\n                    break;\n                    case 1:\n                        answer = { term: family };\n                        otherFamiliesLatinNames = otherFamiliesLatinNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesLatinNames]);\n                        if(answer === undefined) console.log('Missing question - case 1 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name', italicise: true });\n                    break;\n                } \n            }\n\n            if(screen.name === 'trait-property') {\n\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n\n                if(bonus.overrides.trait && bonus.overrides.trait.name === 'song') {\n\n                        const renderBirdsong = async () => {\n\n                            const parent = document.querySelector('.js-question-help');\n                                  parent.innerHTML = '';\n\n                            const template = document.createElement('template');\n                                  template.innerHTML = audioMediaTemplate;\n\n                            const xcID = bonus.overrides.trait.value[0];\n\n                            const mp3 = await firestore.getBirdsong(xcID);\n                            \n                            renderTemplate({ mp3, title: item.name }, template.content, parent);\n\n                            const header = document.querySelector('.js-test-card-question');\n                                  header.classList.remove('standard-block');\n                                  header.classList.add('double-standard-block');\n\n                            const content = document.querySelector('.js-test-card-content');\n                                  content.classList.add('test-card-content-less-standard-block');\n                        };\n\n                        renderBirdsong();\n                }\n            }\n\n            if(layout.name === 'mixed-trait-images') {\n\n                // portrait only - redirect from renderMixedTraitImages\n\n                const { traits, requiredTraits, item, question, help } = args;\n\n                const answers = flatten(traits);\n                const answer = requiredTraits[0];\n\n                render(answer, answers, { binomial: item.name, question, help, italicise: true});\n\n            }\n        }\n\n        init();\n\n    } catch(e) {\n        console.error('Crashed out somwhere on multi-strips with this error: ', e);        \n    }\n};","import{ take, clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\n\nimport mixedSpecimenTemplate from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html';\n\nexport const renderMixedSpecimenImagesAndQuestion = collection => {\n\n    const { config, lesson, layout, score } = store.getState();\n\n    const item = clone(collection.nextItem);\n\n    if(!item) return;\n\n    const init = async () => {\n\n        const getPortraitImages = images => {\n            const multiImages = utils.flatten(images.map(image => { \n                const images = image.srcs.filter(i => i.starred).length === 0 ? take(1, utils.shuffleArray(image.srcs)) : image.srcs.filter(i => i.starred);\n                const item = { name: image.itemName, images };\n                return prepImagesForCarousel(item, config, imageUseCases.MIXED_SPECIMENS);\n            }));\n            return multiImages;\n        }\n\n        const items = await getPoolItems(collection);\n\n        let images = items.map((item, index) => { \n            return { index: index + 1, srcs: item.images, itemName: item.name };\n        });\n\n        images = getPortraitImages(images);\n\n        let question = config.islandscapeMode ? 'Find then click to ID' : 'Swipe and tap to ID';\n\n        let parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help: '(Click on the matching photo.)', term: '' });\n            parent.innerHTML = '';\n            \n        const template = document.createElement('template');\n              template.innerHTML = mixedSpecimenTemplate;\n        \n        renderTemplate({}, template.content, parent);\n\n        parent = document.querySelector('.js-test-card-container-images');\n\n        imageSlider({ config, images: utils.shuffleArray(images), parent, identifier: 'mixed-specimens' });\n\n        const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n        const boundScore = {};\n\n        const answers = [];\n\n        images.forEach(image => {\n            answers.push({ value: image.itemName, url: scaleImage(image).small });\n        });\n\n        document.querySelectorAll('#imageSlider_mixed-specimens .carousel-item img').forEach(img => {\n            \n            img.addEventListener('click', event => {\n\n                const layer = event.target;\n                const selectedName = layer.dataset.itemName;\n                const question = item.name;\n                const answer = selectedName || 'incorrect';\n                const isCorrect = answer === question;\n                const answerIcon = document.createElement('span');\n                      answerIcon.innerHTML = isCorrect \n                            ? '<span class=\"icon\"><i class=\"fas fa-check-circle\"></i></span>'\n                            : '<span class=\"icon\"><i class=\"fas fa-times-circle\"></i></span>';\n\n                const test = { ...score, itemId: item.id, \n                    question, answer, binomial: item.name, \n                    questionCount: lesson.questionCount, layoutCount: lesson.layoutCount, \n                    points: layout.points,\n                    answers,\n                    questionText: config.isPortraitMode ? 'Swipe and tap to ID' : 'Identify this species',\n                    vernacularName: itemProperties.getVernacularName(item, config),\n                };\n\n                const callback = (score, scoreUpdateTimer) => {\n                    boundScore.score = score;\n                    boundScore.scoreUpdateTimer = scoreUpdateTimer;\n                    continueLessonBtn.disabled = false;          \n                    if(!score.success) {\n                        const wrongItem = items.find(item => item.name === score.answer);\n                        const vernacularName = itemProperties.getVernacularName(wrongItem, config);\n                        const name = vernacularName || score.answer;\n                    }\n                };\n\n                scoreHandler('image-match', test, callback, config);  \n            });\n        });\n\n        continueLessonBtn.addEventListener('click', event => {\n\n            if(!score.success) {            \n                setTimeout(() => {\n                    window.clearTimeout(boundScore.scoreUpdateTimer);\n                    bindScore(boundScore.score);\n                });\n            } else {\n                window.clearTimeout(boundScore.scoreUpdateTimer);\n                bindScore(boundScore.score);\n            }\n\n        });\n    };\n\n    try {\n      init();\n    } catch(e) {\n      logError('renderMixedSpecimenImagesAndQuestion init', e);\n    }\n};\n","import{ clone } from 'ramda'\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { returnIcon } from 'ui/helpers/icon-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { bindScore } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { listenToImageSelection, listenToUserAnswer, renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\nimport { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport mixedSpecimenQuestionTemplate from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question-template.html';\n\nexport const renderMixedSpecimenQuestion = (collection, bonusLayout) => {\n\n    const { config, layout } = store.getState();\n\n    renderMixedSpecimenImagesAndQuestion(collection);\n    \n    return;\n\n    const item = clone(collection.nextItem);\n\n    let question = config.isPortraitMode ? 'Slide to ID this species' : 'Identify this species';\n    let help = '(Click on the matching photo.)';\n\n    if(bonusLayout) {\n        question = bonusLayout.overrides.question || question;\n        help = bonusLayout.overrides.help || help;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });\n    \n    const template = document.createElement('template');\n          template.innerHTML = mixedSpecimenQuestionTemplate;\n\n    const instructions = `Identify & Select`;\n    const binomial = item.name;\n\n    renderTemplate({ instructions, binomial }, template.content, parent);\n\n    const subheader = document.querySelector('.mixed-specimen-container > div > span:nth-child(1)');\n          subheader.innerHTML = `Click the picture of <span>${item.vernacularName} </span> from among those on the left.`;\n\n    const listenToImageChangeHandler = async images => {        \n\n        const uniqueSpecies = [ ...new Set(utils.shuffleArray(images).map(i => i.itemName)) ];\n\n        const speciesList = document.querySelector('.js-images-names-txt');\n\n        if(!speciesList) return;\n\n        speciesList.innerHTML = \"\";\n\n        const speciesItems = await Promise.all(uniqueSpecies.map(async species => {\n\n            const imageItem = await firestore.getSpeciesByName(species);\n            const vernacularName = itemProperties.getVernacularName(imageItem, config);\n            const taxonIcon = returnIcon(imageItem);\n\n            return `<li id=\"${species}\">${taxonIcon}<span>${vernacularName}</span><span class=\"binomial margin-left\">${imageItem.name}</li>`;\n        }));\n\n        speciesList.innerHTML = speciesItems.join('');\n    };\n\n    listenToImageSelection(listenToImageChangeHandler);\n\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n\n    const pendingScore = {};\n\n    listenToUserAnswer((score, scoreUpdateTimer) => {\n        \n        continueLessonBtn.disabled = false;\n        pendingScore.score = score;\n        pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    });\n\n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n\n    document.querySelector('.js-help-txt').addEventListener('click', () => {\n        const noOfImagesPerItem = layout.bonus ? 6 / collection.items.length : 1;\n        const preselectedItems = layout.bonus ? collection.items : null;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, preselectedItems, true);\n    });    \n};\n","import{ clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\n\nexport const renderBonusTest = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n\n    collection.nextItem = bonusLayout.item;\n\n    if(bonusLayout.overrides && bonusLayout.overrides.trait && bonusLayout.overrides.trait.name === 'lookalikes') {\n        collection.items = [ ...bonusLayout.overrides.trait.lookalikes, collection.nextItem ];\n        renderMixedSpecimenQuestion(collection, bonusLayout);\n    } else {        \n        renderMultiStrips(collection, bonusLayout);\n    }\n\n};\n","import{ clone, contains, take, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils'; \nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { imageUseCases, prepImagesForCarousel, prepImageForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderSpecimenTiles = collection => {\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    renderItemSpecimenTiles(item);\n};\n\nconst renderItemSpecimenTiles = item => {\n    \n    const { config, collection, layout } = store.getState();\n\n    const hasTiles = layout.itemIndex === layout.prevItemIndex && !!document.querySelector('.js-tiles');\n\n    if(hasTiles) return;\n\n    const familes = [ 'family-strips', 'family', 'taxon-card' ];\n\n    const collectionItems = collection.allItems || collection.items;\n\n    let images, items;\n    \n    if (contains(layout.screens[1].name, familes)) {        \n        const family = collectionItems.filter(i => i.family.name.toLowerCase() === item.taxonomy.family.toLowerCase());\n        images = take(6, utils.shuffleArray(getImagesFromItemFamily(family, config, imageUseCases.SPECIES_CARD)));\n        items = images.map(image => collectionItems.find(item => item.name === image.itemName));\n    } else {\n        images = take(6, utils.shuffleArray(clone(item.images)));\n        images = prepImagesForCarousel({ name: item.name, itemCommon: item.itemCommon, images }, config, imageUseCases.SPECIES_CARD);\n        items = [item];\n    }\n\n    images = images.map(image => {\n        return scaleImage(image, imageUseCases.VISUAL_MATCH, config);\n    });\n\n    renderSpecimenImageTiles({ items: items }, images, item);\n};\n\nconst renderSpecimenImageTiles = (collection, images, item) => {\n\n    const { layout, config } = store.getState();\n\n    const acceptableScreens = [ 'specimen-images', 'trait-images' ]; // lookalike options?\n\n    let screen = layout.screens.find(screen => contains(screen.name, acceptableScreens));\n\n    if(!screen) return;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = specimensTemplate;    \n\n    const parent = DOM.leftBody;\n          parent.innerHTML = '';\n\n    snapLog('renderSpecimenImageTiles, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images }, template.content, parent);\n\n    modalImagesHandler(document.querySelectorAll('.js-tiles .square'), item, collection, config);\n};\n\nconst getImagesFromItemFamily = (family, config, useCase) => {\n\n    let itemImages, items;\n\n    itemImages = flatten(family.map(i => {\n        return { images: i.images, item: { name: i.name, itemCommon: i.names[0].vernacularName, vernacularName: i.names[0].vernacularName, names: i.names } };\n    }));\n\n    if (itemImages.length < 6) {\n        \n        let pool = itemImages.map(image => {\n            const item = family.find(i => i.name === image.item.name);\n            return {\n                images: item.images,\n                item: {\n                    name: item.name,\n                    itemCommon: item.names[0].vernacularName,\n                    vernacularName: item.names[0].vernacularName,\n                    names: item.names\n                }\n            };\n        });\n        let pooledImages = flatten(pool);\n            pooledImages.forEach(pooledImage => {\n                pooledImage.images.forEach(image => {\n                    itemImages.push({ images: pooledImage.images, item: pooledImage.item });\n                });\n            });\n    }\n\n    items = itemImages.map(image => image.item);\n    \n    items.forEach(i => {\n        const itemName = i.name;\n        i.images = family.find(i => i.name === itemName).images;\n    });\n\n    const uniqueImages = [];\n\n    const getUniqueImage = (image, index, uniqueImages) => {\n        let uniqueImage = image.images.find(i => i.starred);\n        if(uniqueImage) {\n            uniqueImage = contains(uniqueImage.title, uniqueImages.map(i => i.title)) ? null : uniqueImage;\n        }\n        if(uniqueImage) {\n            uniqueImages.push(uniqueImage);\n            return uniqueImage;\n        }\n        else {\n            uniqueImage = image.images[index];\n            if(uniqueImage && !contains(uniqueImage.title, uniqueImages.map(i => i.title))) {\n                uniqueImages.push(uniqueImage);\n                return uniqueImage;\n            }\n        }\n    }; \n\n    const familyImages = [];\n\n    itemImages.forEach((image, index) => {\n        let imageToPrep = getUniqueImage(image, index, uniqueImages);\n        if(imageToPrep) {\n            familyImages.push(prepImageForCarousel(imageToPrep, index, image.item, config, useCase));\n        }\n    });\n\n    return familyImages;\n}\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\n\nimport questionTemplate from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html';\n\nexport const renderMixedTraitQuestion = collection => {\n\n    const init = async () => {\n\n        const { layout, collection, config } = store.getState();\n\n        const template = document.createElement('template');\n              template.innerHTML = questionTemplate;\n        \n        const item = collection.nextItem;\n        const question = 'Match the trait';\n        const help = `Select the correct ${utils.fromCamelCase(layout.trait)}`;\n    \n        const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });              \n\n        renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n\n        // if(config.isPortraitMode) {\n        //     renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n        //     return;\n        // }\n\n        // parent.innerHTML = '';\n        // renderTemplate({ traits: Array.from(new Set(layout.traits.flat())), help }, template.content, parent);\n        // document.querySelectorAll('.js-traits-names-txt img').forEach(img => {\n        //     if(img.src.indexOf('png') > -1) {\n        //         img.classList.add('png');\n        //     }\n        // });\n    };\n\n    init();\n};","import { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport stripTemplate from 'ui/screens/multichoice/horizontal-strips.html';\n\nexport const renderHorizontalStrips = collection => {\n\n    const { config, lesson, layout } = store.getState();\n\n    const item = collection.nextItem || collection.items[collection.itemIndex];\n\n    const binomial = layout.provider.name || layout.provider.taxon;\n    const statement = layout.provider.statement;\n    const providerQuestion = layout.provider.question;\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial, question: '', help: '', term: '', className: '', headerClassName: '', bonus: undefined, statement, providerQuestion });\n\n    const template = document.createElement('template');\n          template.innerHTML = stripTemplate;\n\n    let answers = utils.shuffleArray([ ...layout.provider.answers, layout.provider.answer ]);\n\n    answers = answers.map((answer, index) => {\n        return {\n            term: answer,\n            index\n        }\n    });\n\n    renderTemplate({ answers }, template.content, parent);\n\n    document.querySelector('.js-test-card-question').classList.add('calendar-block');\n    document.querySelector('.js-test-card-question').classList.remove('standard-block');\n\n    const strips = document.querySelectorAll('.js-rptr-strips .strip');\n    const taxon = { name: item.taxonomy.family, binomial: item.name, question: layout.provider.answer.term };\n\n    const test = { itemId: item.id, items: strips, taxon, binomial: item.name, \n        questionCount: lesson.questionCount, vernacularName: item.vernacularName,\n        layoutCount: lesson.layoutCount, points: layout.points, clue: '', \n        answerIndex: answers.findIndex(a => a.term === layout.provider.answer), answers, \n        questionText: providerQuestion, statement };\n\n    scoreHandler('strip', test, null, config);\n};","import { renderTextEntry } from 'ui/screens/text-entry/species-text-entry';\nimport { renderHistory } from 'ui/screens/progress/history';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderSummary } from 'ui/screens/progress/summary';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderCompleteText } from 'ui/screens/text-entry/text-complete';\nimport { renderCultivarCard } from 'ui/screens/cards/cultivar-card';\nimport { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\nimport { renderNonTaxonCardSpecimenTiles } from 'ui/screens/cards/non-taxon-card-specimen-tiles';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\nimport { renderMediaPlayers } from 'ui/screens/media/landscape/media-players';\nimport { renderBonusTest } from 'ui/screens/bonus/bonus-test';\nimport { renderBonusSpecimenTiles } from 'ui/screens/bonus/bonus-specimen-tiles';\nimport { renderMixedTraitQuestion } from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question';\nimport { renderHorizontalStrips } from 'ui/screens/multichoice/horizontal-strips.js';\n\nconst functions = [\n    { name: 'mixed-specimen-questions', func: renderMixedSpecimenImagesAndQuestion },\n    { name: 'non-taxon-specimen-tiles', func: renderNonTaxonCardSpecimenTiles },\n    { name: 'text-entry', func: renderTextEntry },\n    { name: 'species-card', func: renderCard },\n    { name: 'species-scientifics', func: renderMultiStrips },\n    { name: 'species-vernaculars', func: renderMultiStrips },\n    { name: 'species-identification', func: renderMultiStrips },\n    { name: 'summary', func: renderSummary },\n    { name: 'history', func: renderHistory },\n    { name: 'epithet', func: renderMultiStrips },\n    { name: 'definition', func: renderBonusTest },\n    { name: 'family', func: renderMultiStrips },\n    { name: 'family-strips', func: renderMultiStrips },\n    { name: 'taxon-card', func: renderTaxonCard },\n    { name: 'non-taxon-card', func: renderNonTaxonCard },\n    { name: 'text-complete', func: renderCompleteText },\n    { name: 'cultivar-card', func: renderCultivarCard },\n    { name: 'visual-match', func: renderMultiStrips },\n    { name: 'trait-images', func: renderBonusSpecimenTiles },\n    { name: 'trait-property', func: renderBonusTest },\n    { name: 'lookalike-property', func: renderBonusTest },\n    { name: 'symbiotic-property', func: renderMultiStrips },\n    { name: 'mixed-specimen-question', func: renderMixedSpecimenQuestion },\n    { name: 'mixed-specimen-images', func: renderMixedSpecimenQuestion },\n    { name: 'birdsong', func: renderBonusTest },\n    { name: 'media-players', func: renderMediaPlayers },    \n    { name: 'mixed-trait-question', func: renderMixedTraitQuestion },\n    { name: 'provider-horizontal-strip-questions', func: renderHorizontalStrips },\n];\n\nexport const funcByName = name => {\n    const match = functions.find(func => func.name === name);\n    const func = match ? match.func : null;\n    return func;\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { subscribeToNonTaxaSelection } from 'ui/screens/cards/non-taxon-card';\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderNonTaxonCardSpecimenTiles = collection => {\n\n    const { config } = store.getState(); \n\n    const callback = images => {\n\n        const template = document.createElement('template');\n\n        template.innerHTML = specimensTemplate;\n\n        const parent = DOM.leftBody;\n        parent.innerHTML = '';\n\n        renderTemplate({images}, template.content, parent);\n\n        modalImagesHandler(document.querySelectorAll('.js-tiles .square'), null, collection, config);\n    };\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    subscribeToNonTaxaSelection(callback);    \n};","import { store } from 'redux/store';\nimport { renderInput } from 'ui/screens/text-entry/text-entry';\n\nexport const renderTextEntry = (collection) => {\n\n    const { layout } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-entry')[0];\n    const item = collection.nextItem;\n    \n    if(!screen) return;\n\n    item.vernacular = item.vernacularName;\n\n    const q = screen.taxon === 'name' ? item.name : \n                    screen.taxon === 'vernacular' \n                        ? item.vernacularName\n                        : item.taxonomy[screen.taxon];\n\n    const question = { binomial: item.name, species: item.taxonomy.species, genus: item.taxonomy.genus, taxon: screen.taxon, question: q, common: item.vernacularName };\n\n    renderInput(screen, question);\n};","import { subscription } from 'redux/subscriptions';\nimport { store } from 'redux/store';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nexport const renderSummary = history => {\n\n    subscription.remove(subscription.getByName('renderSummary'));\n\n    const { collection } = store.getState();\n\n    renderScoreSummary(collection.id);\n\n    return;\n};\n\n","import { store } from 'redux/store';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nexport const renderHistory = history => {\n            \n    const { collection} = store.getState();\n\n    renderLessons();\n}    ","import{ take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, continueLessonHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport completeTemplate from 'ui/screens/text-entry/text-complete-template.html';\n\nexport const renderCompleteText = (collection) => {\n\n    const item = collection.nextItem;\n\n    const { layout, config, lessonPlan } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-complete')[0];\n    \n    if(!screen) return;\n\n    let question, genus, species, givenTaxon, vernacularName, binomial, questionTxt;\n\n    vernacularName = item.vernacularName;\n    binomial = item.name;\n    questionTxt = 'Complete the latin name';\n\n    switch(screen.type) {\n        case 'text-complete-genus':\n            question = item.taxonomy.genus;\n            genus = '---';\n            species = item.taxonomy.species;\n            binomial = `--- ${item.taxonomy.species}`;\n            givenTaxon = 'genus';\n            questionTxt = 'Select genus name';\n            break;\n        case 'text-complete-species':\n            question = item.taxonomy.species;\n            genus = item.taxonomy.genus;\n            species = '---';\n            binomial = `${item.taxonomy.genus} ---`;\n            givenTaxon = 'species';\n            questionTxt = 'Select species name';\n            break;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help: '(Select the name below.)', term: '' });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = completeTemplate;\n\n    const numerOfItems = config.isPortraitMode ? 4 : 5;\n\n    // broaden pool to species matching iconic taxon\n    const itemTaxons = collection.items.map(item => {\n        switch(givenTaxon) {\n            case 'genus':\n                return item.taxonomy.genus;\n            case 'species':\n                return item.taxonomy.species;\n            default:\n                return item.name;\n        }\n    });\n    const pool = take(numerOfItems, utils.shuffleArray(itemTaxons).filter(utils.onlyUnique).filter(itemTaxon => itemTaxon !== item.taxonomy[givenTaxon])).filter(item => item !== undefined);\n    pool.push(item.taxonomy[givenTaxon]);\n\n    let answers = utils.shuffleArray(pool);\n\n    answers = answers.map((answer, index) => {\n      return {\n        index,\n        value: answer\n      }\n    });\n\n    renderTemplate({ genus, species, answers }, template.content, parent);\n\n    setTimeout(() => {\n      const block = document.querySelectorAll('.pool .block')[0];\n            block.focus(); \n    },1000);\n\n    const score = { itemId: item.id, binomial: item.name, question: item.taxonomy[givenTaxon], callbackTime: config.callbackTime, layoutCount: lessonPlan.layouts.length, points: layout.points };\n\n    const callback = (score, scoreUpdateTimer, config) => {\n\n        const iconColour  = score.success ? 'answer-box-success' : 'answer-box-alert';\n\n        const answerIcon = score.success\n            ? `<span class=\"icon\"><i class=\"fas fa-check\"></i></span>`\n            : `<span class=\"icon\"><i class=\"fas fa-times\"></i></span>`;\n\n        const response = score.success ? `Correct` : `Incorrect`;\n        \n        document.querySelector('.js-txt-question').innerHTML = `<div class=\"${iconColour}\"><span>${answerIcon}</span><span>${ response }</span</div>`;        \n\n        document.querySelectorAll('.block span').forEach(block => {\n            if(block.innerText === score.answer) {\n                score.success\n                    ? block.parentElement.classList.add('snap-success')\n                    : block.parentElement.classList.add('snap-alert');\n            }\n            if(block.innerText === score.question) {\n                block.parentElement.classList.add('snap-success');\n            }\n        });\n\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    };\n\n    document.querySelectorAll('.js-pool button').forEach(answer => {\n        answer.addEventListener('click', e => {\n          e.preventDefault();\n          const button = e.target;\n          const answer = button.innerText;\n          if(question === item.taxonomy.species) {\n              document.querySelector('.species').innerText = answer;                \n          } else {\n              document.querySelector('.genus').innerText = answer;\n          }\n          score.answer = answer;\n          score.answers = answers;\n          score.questionText = questionTxt;\n          scoreHandler('block', score, callback, config);\n        });\n    });    \n};\n","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport cultivarTemplate from 'ui/screens/cards/cultivar-card-template.html';\n\nexport const renderCultivarCard = collection => {\n\n    const item = collection.nextItem;\n    const { lessonPlan, layout, config } = store.getState();\n\n    const cultivarCollection = lessonPlan.layouts.find(layout => layout.name === 'screen-cultivar-card').cultivars;\n\n    const cultivars = cultivarCollection.subspecies.map(sub => {\n        let locale = sub.names.find(n => n.language === config.language);\n        locale = locale || sub.names.find(n => n.language === 'en');\n        return {\n            vernacular: locale.vernacularName || '',\n            variety: sub.variety || '',\n            form: sub.form || '',\n            eol: locale.eol || '',\n            eolAlt: locale.eol || 'N/A',\n            wiki: locale.wiki || '',\n            wikiAlt: locale.wiki || 'N/A'\n        }\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cultivarTemplate;\n\n    const parent = DOM.rightBody;\n    parent.innerHTML = '';\n\n    const context = {\n        rank: 'cultivar',\n        item: item,\n        cultivars: cultivars\n    }\n\n    renderTemplate(context, template.content, parent);\n\n    document.querySelectorAll('[title=\"N/A\"]').forEach(a => a.style.display = 'none');\n};","import{ clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderSpecimenTiles } from 'ui/screens/landscape/specimen-tiles';\n// import { renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\n\nexport const renderBonusSpecimenTiles = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n          collection.nextItem = bonusLayout.item;\n          collection.nextItem = collection.nextItem || collection.items[collection.itemIndex];\n    \n    const lookalikesCount = bonusLayout.item \n            ? bonusLayout.overrides.trait.lookalikes ? bonusLayout.overrides.trait.lookalikes.length + 1 : 0 // lookalikes + item itself\n            : 0;\n\n    if(lookalikesCount > 0) {\n        let noOfImagesPerItem = 6 / lookalikesCount;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, [ collection.nextItem, ...bonusLayout.overrides.trait.lookalikes]);\n    } else {\n        renderSpecimenTiles(collection);\n    }\n\n};","export const renderMediaPlayers = collection => {\n\n    let isAudio = true;\n\n    const mediaPlayers = isAudio \n                ? document.querySelectorAll('.media-audio-players')\n                : document.querySelectorAll('.media-video-players');\n};","import * as R from 'ramda';\n\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { store } from 'redux/store';\nimport { observeStore } from 'redux/observe-store';\nimport { funcByName } from 'ui/helpers/function-lookups';\n\nlet subscriptions = [];\n\nconst add = (subscription, domain, role, layout) => {\n\n    const select = store => store[domain];\n    const onChange = subscription;    \n\n    const sub = observeStore(store, select, onChange, domain, layout);\n\n    const existingSub = getByName(sub.name);\n\n    if(existingSub) return;\n\n    subscriptions.push({ ...sub, role});\n    return sub;\n};\n\nconst remove = subscription => {\n\n    if(subscription) {\n\n        subscription.unsubscribe();\n        subscriptions = subscriptions.filter(sub => sub.name !== subscription.name);\n    }\n    return subscriptions;\n};\n\nconst removeByName = name => {\n    const subscription = getByName(name);\n    if(subscription) {\n        return remove(subscription);\n    }\n};\n\nconst getByName = name => {\n    return subscriptions.find(sub => sub.name === name);\n};\n\nconst getByRole = role => {\n    return subscriptions.filter(sub => sub.role === role);\n};\n\nconst getAll = () => {\n    return subscriptions;\n};\n\nconst removeSubs = () => {\n\n    let screens = getByRole('screen');\n\n    screens.forEach(sub => subscription.remove(sub));\n};\n\nconst checkRequired = (state, layout) => {\n\n    const { userAction, config } = state;\n\n    let isRequired = true, isReviewingLesson = true;\n\n    isReviewingLesson = lessonStateHelper.getIsReviewingLesson(userAction, config, isReviewingLesson); \n        \n    const reviewLayouts = [\n        'screen-species-card',\n        'screen-taxon-card',\n        'screen-non-taxon-card',\n        'species-vernaculars',\n        'mixed-specimen-images',\n        'mixed-specimen-question',\n        'screen-common-to-latin',\n        'screen-genus-completion',\n        'screen-latin-to-common',\n        'media-match'\n    ];\n\n    isRequired = isReviewingLesson ? true : !R.contains(layout.name, reviewLayouts);\n\n    return isRequired;\n};\n\nconst addSubs = (layout, config) => {\n\n    if(!layout) return;\n    \n    layout.screens.forEach( (screen, index) => {\n\n        const func = funcByName(screen.name);\n\n        const isSubscriptionRequired = checkRequired(store.getState(), layout);\n\n        if(func && isSubscriptionRequired) {\n            if(config.isPortraitMode) {\n                if(index === 1 || screen.name === 'summary') subscription.add(func, screen.domain, 'screen', layout ? layout.name : '');\n            } else {\n                subscription.add(func, screen.domain, 'screen', layout ? layout.name : '');\n            }                           \n        } else {\n            subscription.remove(subscription.getByName('nextItem'));\n            subscription.remove(subscription.getByName('traitValuesHandler'));\n        }\n    });\n};\n\n\n\nexport const subscription = {\n    add,\n    remove,\n    removeByName,\n    getByName,\n    getByRole,\n    getAll,\n    removeSubs,\n    addSubs\n};\n\n","export const observeStore = (store, select, onChange, domain, layout) => {\n    let currentState = null;\n    let hasStateSignificantlyChanged = false;\n\n    function handleChange() {      \n      let nextState = select(store.getState());\n\n      // let hasStateSignificantlyChanged = false;\n          hasStateSignificantlyChanged = nextState !== currentState;\n\n          if(currentState && Object.is(currentState.index,0)) {            \n            let areEqual = true;\n                areEqual = areEqual && Object.is(nextState.index, currentState.index);\n                areEqual = areEqual && Object.is(nextState.isLessonPaused, currentState.isLessonPaused);\n            hasStateSignificantlyChanged = !areEqual;\n          }\n\n      if(currentState && nextState) {\n        switch(layout) {\n          case 'screen-species-card':\n          case 'screen-taxon-card':\n          case 'screen-non-taxon-card':\n          case 'species-vernaculars':\n          case 'mixed-specimen-images':\n          case 'mixed-specimen-question':\n          case 'screen-common-to-latin':\n          case 'screen-genus-completion':\n          case 'screen-latin-to-common':\n          case 'media-match':\n            hasStateSignificantlyChanged = (nextState.nextItem && nextState.nextItem.name) !== (currentState.nextItem && currentState.nextItem.name);\n            break;\n        }\n      }\n\n      if(hasStateSignificantlyChanged) {\n        currentState = nextState;\n        onChange(currentState);\n      }\n    }\n  \n    handleChange.domain = domain;\n    handleChange.calledBy = onChange.name;\n    let unsubscribe = store.subscribe(handleChange);\n    if(hasStateSignificantlyChanged) {\n      handleChange();\n    }\n    return { unsubscribe, name: onChange.name };\n  };","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { elem } from 'ui/helpers/class-behaviour';\nimport { markTest} from 'ui/helpers/test-handler';\nimport { subscription } from 'redux/subscriptions';\n\nexport const scoreHandler = (type, test, callback, config) => {\n    \n    switch(type) {\n        case 'radio':\n        case 'text':\n            return genericScoreHandler(test, callback, config);\n        case 'block':\n            blockScoreHander(test, callback, config);\n            break;\n        case 'strip':   \n            stripScoreHandler(test, callback, config);\n            break;\n        case 'image':\n            imageScoreHandler(test, callback, config);\n            break;\n        case 'image-match':\n            simpleScoreHandler(test, callback, config);\n            break;\n    }\n};\n\nexport const renderScoreHTMLResponse = response => {\n    const html = response.success\n            ? `<div class=\"answer-box-success\">\n                <span class=\"icon\"><i class=\"fas fa-check\"></i></span><span class=\"answer-response\">${ response.correct }</span>\n                </div>`\n            : `<div class=\"answer-box-alert\">\n                <span class=\"icon\"><i class=\"fas fa-times\"></i></span><span class=\"answer-response\">${response.answer || response.incorrect}</span>\n            </div>`;\n    return html;\n};\n\nconst showResponseToAnswerHandler = response => {\n    const questionText = document.querySelector(response.container) || document.querySelector('.js-txt-question');\n    if(questionText) {\n          questionText.innerHTML = renderScoreHTMLResponse(response);\n    }\n}\n\nexport const continueLessonHandler = (btn, score, timer) => {\n        \n    btn.disabled = false;\n    btn.style.cursor = 'pointer';\n\n    btn.addEventListener('click', event => {\n        btn.disabled = true;\n        window.clearTimeout(timer);\n        subscription.removeSubs();\n        bindScore(score);\n    });\n};\n\nconst simpleScoreHandler = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);      \n    }, delay);\n\n    if(callback) {\n        callback(score, scoreUpdateTimer);\n    } else {\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n}\n\nconst genericScoreHandler = (_score, callback, config) => {\n    \n    const { itemId, question, answer, target, layoutCount, points, names, questionText, answers } = _score;\n    const test = { itemId, ...question, answer, points, names, questionText, answers };\n\n    const score = markTest(test);\n\n    let responseTxt = (test.names && test.names.length > 0) ? test.names[0] : test.binomial;\t\n    let labelTxt = 'Species';\t\n\n    if(score.taxon === 'genus') {\n        responseTxt = score.genus;\n        labelTxt = 'Genus name';\n    }\n\n    if(score.taxon === 'species') {\n        responseTxt = score.species;\n        labelTxt = 'Species name';\n    }\n    if(score.taxon === 'name') {\n        responseTxt = score.binomial;\n        labelTxt = 'Latin name';\n    }\n\n    if(score.taxon === 'family') {\n        responseTxt = score.question;\n        labelTxt = 'Family name';\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    const container = window.matchMedia(\"(max-height: 568px)\").matches ? '.js-check-answer' : '.js-txt-question';\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect,  container, answer: score.question });\n\n    score.layoutCount = layoutCount;\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs(); \n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);               \n    }, delay);\n\n    if(callback) callback(score, scoreUpdateTimer);\n\n    return { score, scoreUpdateTimer };\n};\n\nconst blockScoreHander = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);        \n    }, delay);\n\n    callback(score, scoreUpdateTimer, config);\n};\n\nconst stripScoreHandler = (test, callback, config) => {    \n\n    const { items, taxon } = test;\n\n    const handleClickEvent = e => {\n      \n        e.preventDefault();\n\n        const target = e.target;\n\n        if(elem.hasClass(target, 'disabled')) return;\n\n        const answerNode = target;\n        const answer = answerNode.innerText.trim();\n        const answerIndex = answerNode.dataset.answerIndex;\n        const name = answerNode.dataset.name;\n        const vernacular = target.dataset.vernacular;\n\n        test.taxon = 'name';\n        test.vernacular = vernacular;\n        test.question = taxon.question;\n        test.answer = (name && name !== '') ? { term: answer, name } : answer;\n            \n        const score = markTest({...test, answeredIndex: parseInt(answerIndex), answers: [] });\n\n        target.classList.add(score.colour);\n\n        items.forEach(strip => {   \n            const stripAnswer = strip.querySelector('button');\n            const stripAnswerIndex = parseInt(stripAnswer.dataset.answerIndex);\n            const stripAnswerName = stripAnswer.dataset.name || '';\n            \n            stripAnswer === '' \n                ? score.answers.push(stripAnswer.innerText) \n                : score.answers.push({\n                    term: stripAnswer.innerText,\n                    name: stripAnswerName\n                });\n            \n            if(stripAnswerIndex === score.answerIndex) {\n                strip.classList.add('snap-success');\n            } else if(stripAnswerIndex === score.answeredIndex) {\n              strip.classList.add('snap-alert');\n            }\n        });     \n        \n        if(callback) {\n            callback(score);\n        } else {\n            const _callback = (score) => {\n\n                const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n                const scoreUpdateTimer = setTimeout(()=>{\n                    subscription.removeSubs();\n                    bindScore(score);\n                }, delay);\n            \n                continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n\n                // screen is always null\n                if(screen.name === 'family-strips') {\n                    document.querySelector('.js-question-question').innerHTML = item.taxonomy.family;\n                    document.querySelector('.js-question-help').classList.add('hide');\n                }\n            };\n            _callback(score);\n        }\n            \n        let correct = `Correct`;\n        let incorrect = `Incorrect`;\n\n        showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n\n        items.forEach(item => item.classList.add('disabled'));\n    };\n\n    items.forEach(selected => {        \n        selected.addEventListener('click', handleClickEvent);\n    });\n\n    window.addEventListener('keydown', e => {\n      if(e.key === 'Enter') {\n        handleClickEvent(e);\n      }                  \n    }, { once: true });\n};\n\nconst imageScoreHandler = (test, callback, config) => {\n\n    const { items, taxon } = test;\n\n    items.forEach(tile => {\n        tile.addEventListener('click', event => {\n\n            const img = event.target;\n            const answer = img.dataset.answer;\n\n            if(!answer) return;\n\n            test.taxon = 'name';\n            test.question = taxon.name\n            test.answer = answer;\n            const score = markTest(test);\n\n            tile.style.filter = 'saturate(100%)';\n\n            img.parentNode.style.filter = 'saturate(100%)';\n\n            items.forEach(tile => {\n                tile.style.filter = 'saturate(10%)';\n                tile.style.opacity = .3;\n                if(tile.dataset.answer.trim().toLowerCase() === taxon.name.trim().toLowerCase()) {\n                    tile.style.filter = 'saturate(100%)';\n                    tile.style.opacity = 1;\n                }\n            });\n\n            const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n            subscription.removeSubs();\n\n            const scoreUpdateTimer = setTimeout(() => {\n                bindScore(score);\n            }, delay);\n                \n            if(callback) callback(score, scoreUpdateTimer);\n        });\n    });\n};\n\nexport const bindScore = score => {\n\n    const { collection } = store.getState();\n\n    score.collectionId = collection.id;\n\n    actions.boundUpdateScore(score);\n};","import{ take, contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nconst onTraitsReadyListeners = [];\nconst onTraitsReady = listener => {\n    onTraitsReadyListeners.push(listener);\n};\n\nconst onTraitClickedListeners = [];\nconst onTraitClicked = listener => {\n    onTraitClickedListeners.push(listener);\n};\n\nconst getMatchingTrait = (layoutTraits, traitValues) => {\n\n    try {\n        let requiredTraitValues, trait;\n\n        for (let [key, obj] of Object.entries(traitValues)) {\n            let t;\n            layoutTraits.map(t => { \n                if(t.toLowerCase() === utils.toCamelCase(key).toLowerCase()) {\n                    requiredTraitValues = obj.value.map(v => v.toLowerCase());\n                    trait = t;\n                }\n            }) \n        };\n    \n        return { requiredTraitValues, trait };\n    } catch (e) {\n      logError(getMatchingTrait, e);\n      return { requiredTraitValues: [], trait: {}};\n    }\n\n};\n\nconst fetchTraits = async (trait, requiredTraitValues, required) => {\n\n    const glossary = store.getState().glossary;\n\n    let traits = await firestore.getTraitDefinitions(glossary, required, trait);\n        traits.forEach(t => {\n            t.term = t.term.toLowerCase();\n            if(t.alt) t.alt = t.alt.toLowerCase();\n            return t;\n        });\n\n    if(!requiredTraitValues) return { traits: null, requiredTraits: null};\n\n    let multiples = traitsHandler.getNMultiplesFromArray(traits.map(t => t.term), requiredTraitValues.length);\n\n        multiples = multiples.filter(multiple => {\n            return !traitsHandler.doArraysHaveSameValues(multiple, requiredTraitValues);\n        });\n        \n        let requiredTraits = traits.filter(t => contains(t.term, requiredTraitValues));\n        \n        multiples = utils.shuffleArray([ ...take(5, multiples), requiredTraitValues ]);\n\n        traits = multiples.map(multiple => {\n            return multiple.map(term => traits.find(trait => trait.term === term));\n        });\n\n    onTraitsReadyListeners.forEach(listener => listener(traits, requiredTraits));\n\n    return { traits, requiredTraits };\n};\n\nconst pendingScore = {};\n\nconst callback = (score, scoreUpdateTimer) => {\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n          continueLessonBtn.disabled = false;\n    pendingScore.score = score;\n    pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    \n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n};\n\nconst onClickTileHandler = (tile, requiredTraits, tiles) => {\n\n    const { config, lesson, collection } = store.getState();\n\n    const item = collection.nextItem;\n\n    tile.addEventListener('click', e => {\n        \n        const tile = e.currentTarget;\n        const traits = Array.from(tile.querySelectorAll('img')).map(t => t.dataset.term);\n        const images = Array.from(tiles).map(t => t.querySelector('img').dataset);\n        const answers = images.map(i => { return { value: i.term, url: i.url } })\n        const test = {\n            points: 0,\n            binomial: item.name, \n            trait: true,\n            question: requiredTraits.map(trait => trait.term),\n            answer: traits,\n            questionCount: lesson.questionCount, \n            layoutCount: lesson.layoutCount,\n            answers,\n            questionText: 'Match the trait'\n        }\n        scoreHandler('image-match', test, callback, config);\n\n        tiles.forEach(tile => {\n            if(!traitsHandler.doArraysHaveSameValues(Array.from(tile.querySelectorAll('img')).map(img => img.dataset.term), requiredTraits.map(trait => trait.term))) {\n                tile.querySelectorAll('img').forEach(img => img.classList.add('desaturate'));\n            }\n        });\n})};\n\nexport const mixedTraitHandler = {\n    getMatchingTrait,\n    fetchTraits,\n    onTraitsReady,\n    onTraitClicked,\n    onClickTileHandler\n};","import { clone } from 'ramda';\n\nimport { panels } from 'snapdragon-config/screen-panels';\n\nconst { \n    specimenImages, speciesCard, vernaculars, scientifics, text, \n    leaf, leafName, \n    family, familyStrips, taxon, nonTaxon, textComplete, cultivar, cultivarCard, \n    epithets, definitions, \n    specimenCommonMatch, specimenLatinMatch,\n    definitionCard, \n    traitProperty, symbioticProperty\n    , lookalikeProperty\n    , traitImages,\n    nonTaxonSpecimenTiles,\n    mixedSpecimenQuestions,\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n    history, summary, \n    birdsong, mediaPlayers,\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification } = panels;\n\nconst mixedSpeciesMatch = {\n    name: 'screen-mixed-species-match',\n    type: 'test',\n    score: 1,\n    kind: 'VMC',\n    points: 3,\n    given: 'Given species name',    \n    requirement: 'Select species image',\n    screens: [\n        { ...specimenImages },\n        { ...mixedSpecimenQuestions }\n    ]\n};\n\nconst speciesRevision = {\n    name: 'screen-species-card',\n    type: 'revision',\n    score: 0,\n    kind: 'S',\n    points: 0,\n    given: 'Given species summary',\n    requirement: 'Study species',\n    screens: [\n        { ...specimenImages },\n        { ...speciesCard }\n    ]\n};\n\nconst taxonRevision = {\n    name: 'screen-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'F',\n    points: 0,\n    given: 'Study',\n    requirement: 'Family summary',\n    screens: [\n        { ...specimenImages },\n        { ...taxon }\n    ]\n};\n\nconst nonTaxonRevision = {\n    name: 'screen-non-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'GR',\n    points: 0,\n    given: 'Group summary',\n    requirement: 'Study',\n    screens: [\n        { ...nonTaxonSpecimenTiles },\n        { ...nonTaxon }\n    ]\n};\n\nconst definitionRevision = {\n    name: 'screen-definition-card',\n    type:'revision',\n    score: 0,\n    kind: 'G',\n    points: 0,\n    given: 'Given glossary',\n    requirement: 'Study definitions',\n    screens: [\n        { ...specimenImages },\n        { ...definitionCard }\n    ]\n};\n\nconst latinToCommonMatch = {\n    name: 'screen-latin-to-common',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given latin name',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...vernaculars }\n    ]\n};\n\nconst commonToLatinMatch = {\n    name: 'screen-common-to-latin',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given common name',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...scientifics }\n    ]\n};\n\nconst speciesIdentificationMatch = {\n    name: 'screen-species-identification',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select identification',\n    screens: [\n        { ...specimenImages },\n        { ...speciesIdentification }\n    ]\n};\n\nconst textCompleteGenus = {\n    name: 'screen-genus-completion',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select genus name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-genus'  }\n    ]\n};\n\nconst multiSpecimenCommonMatch = {\n    name: 'screen-specimens-common-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenCommonMatch }\n    ]\n};\n\nconst multiSpecimenLatinMatch = {\n    name: 'screen-specimens-latin-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenLatinMatch }\n    ]\n};\n\nconst traitPropertyMatch = {\n    name: 'trait-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...traitProperty }\n    ]\n};\n\nconst lookalikePropertyMatch = {\n    name: 'lookalike-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...lookalikeProperty }\n    ]\n};\n\nconst symbioticPropertyMatch = {\n    name: 'symbiotic-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given specimenImages images',\n    requirement: 'Select symbiotic match',\n    screens: [\n        { ...specimenImages },\n        { ...symbioticProperty }\n    ]\n};\n\nconst familyMatch = {\n    name: 'screen-species-to-family',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Species name',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...family }\n    ]\n};\n\nconst cultivarMatch = {\n    name: 'screen-cultivar-to-species',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Cultivar name',\n    requirement: 'List species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivar }\n    ]\n};\n\nconst familyStripsMatch = {\n    name: 'screen-family-to-description',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Family description',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...familyStrips }\n    ]\n};\n\nconst genusEntry = {\n    name: 'screen-genus-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given species name',\n    requirement: 'Enter genus name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'genus'}\n    ]\n};\n\nconst speciesEntry = {\n    name: 'screen-species-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given genus name',\n    requirement: 'Enter species name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'species'}\n    ]\n};\n\nconst speciesGenusEntry = {\n    name: 'screen-binomial-entry',\n    type:'test',\n    score: 1,\n    points: 4,\n    kind: 'T',\n    given: 'Given common name',\n    requirement: 'Enter latin name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'name'}\n    ]\n};\n\nconst leafEntry = {\n    type:'test',\n    score: 1,\n    points: 3,\n    kind: 'T',\n    screens: [\n        { ...leaf },\n        { ...leafName }\n    ]\n};\n\nconst textCompleteSpecies = {\n    name: 'screen-species-completion',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Given genus name',\n    requirement: 'Select species name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-species' }\n    ]\n};\n\nconst commonEntry = {\n    name: 'screen-common-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species latin name',\n    requirement: 'Enter common name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'vernacular'  }\n    ]\n};\n\nconst latinEpithets = {\n    name: 'screen-epithets',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Epithet',\n    requirement: 'List epithet definitions',\n    screens: [\n        { ...specimenImages },\n        { ...epithets }\n    ]\n};\n\nconst glossaryTerms = {\n    name: 'screen-definitions',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'Given glossary term',\n    requirement: 'Select definition',\n    screens: [\n        { ...specimenImages },\n        { ...definitions }\n    ]\n};\n\nconst cultivars = {\n    name: 'screen-cultivars',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'List of cultivars',\n    requirement: 'List of species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivarCard },\n        { ...cultivar }\n    ]\n};\n\nconst mixedSpecimenImages = {\n  name: 'mixed-specimen-images',\n  type:'test',\n  score: 1,\n  points: 2,\n  kind: 'T',\n  given: 'Specimen images',\n  requirement: 'Select species image',\n  screens: [\n      { ...mixedSpecimensLeft },\n      { ...mixedSpecimensRight }\n  ]\n};\n\nconst mediaMatch = {\n    name: 'media-match',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species song',\n    requirement: 'Select species',\n    screens: [\n        { ...specimenImages },\n        { ...birdsong }\n    ]\n};\n\nconst mixedTraitImages = {\n    name: 'mixed-trait-images',\n    type:'test',\n    kind: 'T',\n    score: 1,\n    points: 2,\n    given: 'Trait images',\n    requirement: 'Select trait image',\n    screens: [\n        { ...mixedTraitLeft },\n        { ...mixedTraitRight }\n    ]\n  };  \n\nconst providerHorizontalStrip = {\n    name: 'provider-horizontal-strip',\n    type: 'test',\n    score: 1,\n    screens: [\n        { ...specimenImages },\n        { ...providerHorizontalStripQuestions }\n    ]\n};\n\nconst propertyTrait = (traitPropertyMatch, traits) => {\n    const layout = clone(traitPropertyMatch);\n    layout.screens[0].traits = traits;\n    layout.screens[1].traits = traits;\n    return layout;\n};\n\nexport const layouts = {\n  mixedSpeciesMatch,\n  speciesRevision,\n  taxonRevision,\n  nonTaxonRevision,\n  definitionRevision,\n  \n  latinToCommonMatch,\n  commonToLatinMatch,\n  textCompleteGenus,\n  multiSpecimenCommonMatch,\n  multiSpecimenLatinMatch,\n  traitPropertyMatch,\n  lookalikePropertyMatch,\n  symbioticPropertyMatch,\n  familyMatch,\n  cultivarMatch,\n  familyStripsMatch,\n  genusEntry,\n  speciesEntry,\n  speciesGenusEntry,\n  textCompleteSpecies,\n  commonEntry,\n  leafEntry,\n  glossaryTerms,\n  latinEpithets,\n  cultivars,\n  mixedSpecimenImages,\n  history,\n  summary,\n  mediaMatch,\n  mixedTraitImages,\n  providerHorizontalStrip,\n  speciesIdentificationMatch,\n  propertyTrait\n}","const specimenImages = {\n    name: 'specimen-images',\n    domain: 'collection',\n  };\n  \nconst traitImages = {\n    name: 'trait-images',\n    domain: 'bonusLayout',\n  };\n  \n  const history = { \n    name: 'history', \n    domain: 'history'\n  };\n  \n  const speciesCard = {\n    name: 'species-card',\n    domain: 'collection',\n  };\n  \n  const definitionCard = {\n    name: 'definition-card',\n    domain: 'collection'\n  };\n  \n  const scientifics = {\n    name: 'species-scientifics',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  const birdsong = {\n    name: 'birdsong',\n    domain: 'bonusLayout',\n  }\n\n  const mediaPlayers = {\n    name: 'media-players',\n    domain: 'collection',    \n  }\n  \n  const vernaculars = {\n    name: 'species-vernaculars',\n    domain: 'collection',\n    taxon: 'name'\n  };\n  \n  const text = {\n    name: 'text-entry',\n    domain: 'collection'\n  };\n  \n  const textComplete = {\n    name: 'text-complete',\n    domain: 'collection',\n    question: 'Complete the latin name',\n  };\n  \n  const summary = { \n    name: 'summary', \n    domain: 'history' \n  };\n  \n  const mixedSpecimenQuestions = {\n    name: 'mixed-specimen-questions',\n    domain: 'collection'\n  };\n\n  const leaf = {\n    name: 'leaf-image',\n    domain: 'collection'\n  };\n  \n  const leafName = {\n    name: 'leaf-text',\n    domain: 'collection'\n  };\n  \n  const epithets = {\n    name: 'epithet',\n    domain: 'collection'\n  };\n  \n  const definitions = {\n    name: 'definition',\n    domain: 'bonusLayout'\n  };\n  \n  const family = {\n    name: 'family',\n    domain: 'collection'\n  };\n  \n  const familyStrips = {\n    name: 'family-strips',\n    domain: 'collection'\n  };\n  \n  const taxon = {\n    name: 'taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxon = {\n    name: 'non-taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxonSpecimenTiles = {\n    name: 'non-taxon-specimen-tiles',\n    domain: 'collection'\n  };\n  \n  const cultivarCard = {\n    name: 'cultivar-card',\n    domain: 'collection'\n  };\n  \n  const cultivar = {\n    name: 'cultivar-match',\n    domain: 'collection'\n  };\n\n  const specimenCommonMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'vernacular'\n  };\n  \n  const specimenLatinMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'binomial'\n  };\n  \n  const traitProperty = {\n    name: 'trait-property',\n    domain: 'bonusLayout'\n  };\n  \n  const lookalikeProperty = {\n    name: 'lookalike-property',\n    domain: 'bonusLayout'\n  };\n  \n  const symbioticProperty = {\n    name: 'symbiotic-property',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensLeft = {\n    name: 'mixed-specimen-images',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensRight = {\n    name: 'mixed-specimen-question',\n    domain: 'collection'\n  };\n  \n  const mixedTraitLeft = {\n    name: 'mixed-trait-images',\n    domain: 'collection'\n  };\n\n  const mixedTraitRight = {\n    name: 'mixed-trait-question',\n    domain: 'collection'\n  };\n\n  const providerHorizontalStripQuestions = {\n    name: 'provider-horizontal-strip-questions',\n    domain: 'collection'\n  };\n\n    \n  const speciesIdentification = {\n    name: 'species-identification',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  \n  export const panels = {\n    specimenImages,\n    history,\n  \n    speciesCard,\n    definitionCard,\n    scientifics,\n    vernaculars,\n    text,\n    summary,\n\n    leaf,\n    leafName,\n  \n    epithets,\n    definitions,\n    family,\n    familyStrips,\n    \n    taxon,\n    nonTaxon,\n    nonTaxonSpecimenTiles,\n    textComplete,\n    cultivarCard,\n    cultivar,\n  \n    specimenCommonMatch,\n    specimenLatinMatch,\n    traitProperty,\n    lookalikeProperty,\n    symbioticProperty,\n    \n    mixedSpecimenQuestions,\n\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n\n    birdsong,\n    mediaPlayers,\n    traitImages,\n\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification\n  };","import { contains, flatten } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { utils } from 'utils/utils';\n\nimport { roundHandler } from \"snapdragon-engine/round-plan-handler\";\nimport { bonusHandler } from 'snapdragon-engine/bonus/bonus-test-handler';\nimport { providerHandler } from 'snapdragon-engine/provider/provider-test-handler';\nimport { mixedTraitHandler } from 'ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const createNextRound = (lessonPlan, nextRoundLayoutTemplates, progressScreens, collection, lesson) => {\n\n    const init = async () => {\n    \n        lessonPlan.layouts = [];\n\n        const moduleSize = lesson.moduleSize;\n        const lessonName = lesson.name;\n        const levelName = lesson.level.name;\n        const itemsCountToDate = (lesson.currentRound - 1) * moduleSize;\n        const itemsLeft = collection.items.length - itemsCountToDate;\n\n        const layoutsToAdd = moduleSize > itemsLeft ? itemsLeft : moduleSize;\n        const roundItemNames = roundHandler.getRoundItems(lesson.currentRound, moduleSize, collection.items.map(i => i.name));\n\n        nextRoundLayoutTemplates.forEach( async (layout, index) => {\n            let itemIndex = 0;\n            do {\n                if(layout.name === 'mixed-trait-images') {\n                    \n                    const item = collection.items.find(i => i.name === roundItemNames[itemIndex]);\n\n                    const { requiredTraitValues, trait } = mixedTraitHandler.getMatchingTrait(utils.shuffleArray(layout.screens[1].traits), item.traits);\n\n                    if(!trait) return;\n\n                    const { traits, requiredTraits } = await mixedTraitHandler.fetchTraits(trait, requiredTraitValues, collection.glossary);\n\n                    if(!requiredTraits || !traits) return;\n\n                    layout.trait = trait;\n                    layout.traits = traits;\n                    layout.requiredTraits = requiredTraits;\n\n                    const traitsToIgnore = [ 'n/a', 'none' ];\n                    const addLayout = !!requiredTraits.find(t => !contains(t.term.toLowerCase(), traitsToIgnore));\n\n                    if(addLayout) {\n                        lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                    }\n        \n                } else {\n                    lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                }\n\n                itemIndex++;\n                \n            } while (itemIndex < layoutsToAdd);\n        });\n\n        if(lesson.level.id === 1) {\n            let providerQuestions = await providerHandler.getLayouts(collection, roundItemNames);\n                providerQuestions = flatten(providerQuestions).filter(layout => layout);\n\n            let providerLayouts = providerQuestions.map(provider => {\n                return { ...L.providerHorizontalStrip, lessonName:\"Lesson 1\", levelName:\"Level 1\", speciesName: provider.name || provider.taxon, provider };\n            });\n\n            if(providerLayouts) {\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...providerLayouts ];\n            }\n        }\n\n        const bonusLayouts = lessonPlan.layouts.filter(layout => layout.bonus);\n\n        let lessonLayouts = lessonPlan.layouts.filter(layout => !layout.bonus).map((layout, i) => {\n            layout.itemIndex = layout.itemIndex === undefined ? utils.calcItemIndex(itemsCountToDate, layoutsToAdd, i) : layout.itemIndex;\n            return { ...layout };\n        });\n\n        const itemIndices = [ ...new Set(lessonPlan.layouts.map(layout => layout.itemIndex).filter(i => i !== undefined)) ];\n        \n        lessonPlan.layouts = lessonLayouts;\n\n        if(lesson.level.id === 1) {\n\n            if(bonusLayouts) {\n                const bonusTests = await bonusHandler.getTests(collection, itemIndices, bonusLayouts, lessonName, levelName);\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...bonusTests ];\n            }\n        }\n\n        lessonLayouts = lessonPlan.layouts.map((layout, i) => {\n            layout.roundProgressIndex = i + 1;\n            return { ...layout };\n        });\n\n        const summaryLayout = lessonPlan.portrait \n            ? {\n                name: 'summary',\n                screens: [{ \n                    name: 'summary', \n                    domain: 'history', \n                    parent: DOM.rightBody\n                }],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            }\n            : {\n                name: 'summary',\n                screens: [...progressScreens],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            };\n\n        // lessonPlan.layouts.push(summaryLayout);\n\n        lessonPlan.layouts.push({\n            name: 'summary',\n            screens: [{ \n                name: 'summary', \n                domain: 'history', \n                parent: DOM.rightBody\n            }],\n            lessonName,\n            levelName,\n            layoutIndex: lessonPlan.layouts.length,\n            itemIndex: 0\n        });\n\n        const scores = lessonPlan.layouts.map(layout => layout.score || 0);\n        const roundScoreCount = scores.reduce((accumulator, currentValue) => accumulator + currentValue);\n\n        lessonPlan.layouts.map(layout => layout.roundScoreCount = roundScoreCount);\n\n        lesson.questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n        lesson.layoutCount = lessonPlan.layouts.length;\n        lesson.layoutNames = lessonPlan.layouts.map(layout => layout.name);\n\n        return { updatedLessonPlan: lessonPlan, updatedCollection: collection, updatedLesson: lesson };\n    }\n\n    return init();\n};\n","export const getNextRoundLayouts = (lessonPlan, config, lesson) => {\n\n    // All layouts are currently activated because the lesson edit function is not in use.\n\n    lesson.activeLevelCount = lessonPlan.levels.filter(level => level.layouts.length > 0).length;\n\n    const getCurrentLevelFromLessonPlan = (lessonPlan, levelId) => {\n        return lessonPlan.levels.find(level => level.id === levelId);\n    }\n    \n    const getLayouts = (currentLevel, mode) => {    \n        switch(mode) {\n            case 'learn':\n                currentLevel.bonusLayouts = currentLevel.bonusLayouts || [];\n                return [ ...currentLevel.layouts.filter(l => l), ...currentLevel.bonusLayouts ];\n            case 'review':\n                return currentLevel.reviewLayouts || [];\n            default:\n                return currentLevel.layouts;\n        }\n    };\n\n    const goToNextLevelThatHasLayouts = (lessonPlan, levelId) => {\n\n        let layouts = [], lessonName = '', levelName = '';        \n        \n        const iterateOverLevelsCheckingForAvailableLayouts = (intialValue, levelId) => {\n            \n            let increment = intialValue;\n\n            if(layouts.length > 0) return;\n\n            const level = lessonPlan.levels.find(level => level.id === levelId + increment);\n\n            if(!level) return;\n            \n            lesson.level = level;\n\n            lesson.level = level;\n            lessonName = lesson.name;\n            levelName = lesson.level.name; // sometimes returns null (when at final level, looking for next?)\n            layouts = getLayouts(getCurrentLevelFromLessonPlan(lessonPlan, levelId + increment), config.mode);\n\n            increment++;\n\n            iterateOverLevelsCheckingForAvailableLayouts(increment, levelId);\n        }     \n        \n        iterateOverLevelsCheckingForAvailableLayouts(0, levelId);\n\n        return { lessonName, levelName, layouts };\n    }\n\n    let levelId = lesson.level.id;\n\n    if(lesson.isLevelComplete) {\n        levelId++;\n        lesson.level = lessonPlan.levels.find(level => level.id === levelId);\n    }\n\n    const { layouts } = goToNextLevelThatHasLayouts(lessonPlan, levelId);\n\n    return layouts;\n};","import { createNextRound } from 'snapdragon-engine/round-planner';\nimport { layouts } from 'snapdragon-config/screen-layouts';\nimport { getNextRoundLayouts } from 'snapdragon-engine/lesson-plan-handler';\n\nconst { summary, history } = layouts;\n\nconst createLessonPlan = async (lessonPlan, config, collection, lesson) => {\n\n    lesson.moduleSize = lesson.moduleSize || collection.moduleSize || config.moduleSize;\n    lesson.currentRound = lesson.currentRound || 1;\n\n    let rounds = collection.items.length / lesson.moduleSize;            \n        rounds = collection.items.length % lesson.moduleSize === 0 ? rounds : rounds === 1 ? 1 : Math.floor(rounds) + 1;\n\n    lesson = lesson.level === undefined \n            ? { ...lesson, ...lessonPlan, level: { id: 1 }, rounds } \n            : lesson;\n\n    const nextRoundLayoutTemplates = getNextRoundLayouts(lessonPlan, config, lesson);\n\n    if(lesson.level === undefined) {\n        return new Promise(resolve => resolve(null));\n    }\n\n    return await createNextRound(\n        lessonPlan,\n        nextRoundLayoutTemplates, \n        [ summary, history ],\n        collection,\n        lesson\n    );        \n};\n\nexport const lessonPlanner = {\n    createLessonPlan\n}","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeCustom = {\n    id: 1,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeCustom2 = {\n    id: 2,\n    name:'Lesson 2',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeFungi = {\n    id: 3,\n    name:'Lesson 3',\n    portrait: false,\n    default: false,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape']),\n                        L.propertyTrait(L.mixedTraitImages, ['gillAttachment']),\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        },\n    ]\n};\n\nexport const landscapeLichens = { ...clone(landscapeFungi), id: 4 };\nlandscapeLichens.levels[0] = { \n    id: 1,\n    name:'Level 1',\n    description: 'Species recognition',\n    layouts: [                          \n        L.mixedSpecimenImages\n    ],\n    // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n    // reviewLayouts: [ L.multiSpecimenCommonMatch, L.mixedSpecimensRight ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeStatic = {\n    id: 10,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticTaxonGroup = {\n    id: 11,\n    name:'Lesson 11',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages,\n                        L.speciesIdentificationMatch,\n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, \n                        L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                    ],\n            // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticProviderQuestionsOnly = {\n    id: 12,\n    name:'Lesson 12',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [],\n            bonusLayouts: []\n        }\n    ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const portraitStatic = {\n    id: 110,\n    name:'Lesson 110',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.speciesGenusEntry,\n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const portraitStaticTaxonGroup = {\n    id: 111,\n    name:'Lesson 111',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nimport { landscapeCustom } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeCustom2 } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeFungi, landscapeLichens } from 'snapdragon-config/plans/landscape/landscape-fungi';\n\nimport { landscapeStatic, landscapeStaticTaxonGroup, landscapeStaticProviderQuestionsOnly } from 'snapdragon-config/plans/landscape/landscape-static';\nimport { portraitStatic, portraitStaticTaxonGroup } from 'snapdragon-config/plans/portrait/portrait-static';\n\nconst landscapeBirds = { ...clone(landscapeStatic), id: 5 };\n      if(landscapeBirds.levels[0].bonusLayouts) landscapeBirds.levels[0].bonusLayouts[0].types.push('song');\n\nconst portraitBirds = { ...clone(portraitStatic), id: 105 };\n      portraitBirds.levels[0].layouts.push(L.mediaMatch); \n\nconst portraitFungi = { ...clone(landscapeFungi), id: 103, portrait: true };\n      portraitFungi.levels[0].bonusLayouts = [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ];\n\nconst portraitLichens = { ...clone(landscapeLichens), id: 104, portrait: true };\nconst portraitCustom = { ...clone(landscapeCustom), id: 101, portrait: true };\nconst portraitCustom2 = { ...clone(landscapeCustom2), id: 102, portrait: true };\n\nexport const lessonPlans = [\n\n    landscapeCustom,\n    landscapeCustom2,\n    landscapeStatic,\n    landscapeStaticTaxonGroup,\n    landscapeStaticProviderQuestionsOnly,\n    landscapeFungi,    \n    landscapeLichens,\n    landscapeBirds,\n    \n    portraitCustom,\n    portraitCustom2,\n    portraitStatic,\n    portraitStaticTaxonGroup,    \n    portraitFungi,    \n    portraitLichens,\n    portraitBirds,\n    \n];","import { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\n\nconst isRequired = (step, args) => {\n\n    const { layout, counter, lessonPlan, config, lesson, collection } = args;\n\n    let required = false;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            required = layout && !layout.bonus;\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            if(counter.isLessonPaused) {\n                required = false;\n            } else {\n                required = lessonPlan && lessonPlan.layouts;\n                required = required && lessonPlan.layouts[counter.index] !== null;\n            }\n            break;\n        case enums.nextStep.NEXT_LESSON:\n            required =      (config.collection.id > 0 && !counter.isLessonPaused) // new lesson\n                        ||  (config.collection.id > 0 && config.collection.id !== collection.id); // new lesson from new collection\n            break;\n        case enums.nextStep.NEXT_ROUND:\n            required = counter.index === 0 && lesson.isNextRound && collection.items && collection.items.length > 0;\n            break;\n    }\n\n    return required;\n};\n\nconst actionUpdate = (step, args) => {\n\n    const { layout, config, asyncFunc } = args;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            actions.boundNextItem(layout.itemIndex);\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            actions.boundNextLayout(layout);\n            subscription.addSubs(layout, config);\n            lessonStateHandler.changeRequest({\n                requestType: enums.lessonState.SAVE_LESSON_PROGRESS,\n            });\n            break;\n        case enums.nextStep.NEXT_LESSON:\n            actions.boundNextLesson(asyncFunc);\n            break;\n    }\n}\n\nexport const setupHandler = {\n    isRequired,\n    actionUpdate\n}","import{ clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { lessonPlanner } from 'snapdragon-engine/lesson-planner';\nimport { lessonPlans } from 'snapdragon-config/lesson-plans';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\n\nexport const nextLesson = counter => {\n\n    const { layout, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, config, lesson, collection };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_LESSON, args)) {\n\n        const planId = config.isPortraitMode ? collection.lessonPlanPortrait : collection.lessonPlanLandscape;    \n        const lessonPlan = clone(lessonPlans.find(plan => plan.id === planId && plan.portrait === config.isPortraitMode));\n\n        args.lessonPlan = lessonPlan;\n\n        if(setupHandler.isRequired(enums.nextStep.NEXT_ROUND, args)) {\n\n            // asyncFunc will return collection, lessonPlan and lesson\n\n            const asyncFunc = lessonPlanner.createLessonPlan(lessonPlan, config, clone(collection), clone(lesson)).then(props => {\n                if(!props) return;\n                return { lessonPlan: props.updatedLessonPlan, collection: props.updatedCollection, lesson: props.updatedLesson };\n            });\n\n            if(asyncFunc === null) return;\n\n            setupHandler.actionUpdate(enums.nextStep.NEXT_LESSON, { asyncFunc });\n        }\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextLayout = counter => {\n\n    const { layout, lessonPlan, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection };\n\n    const isRequired = setupHandler.isRequired(enums.nextStep.NEXT_LAYOUT, args);\n\n    if(isRequired) {\n        const nextLayout = lessonPlan.layouts[counter.index];\n        setupHandler.actionUpdate(enums.nextStep.NEXT_LAYOUT, { layout: nextLayout, config });\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextItem = layout => {\n\n    const { counter, lessonPlan, config, lesson, collection } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_ITEM, args)) {\n        setupHandler.actionUpdate(enums.nextStep.NEXT_ITEM, { layout });\n    }\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\n\nexport const renderHeaders = collection => {\n\n    DOM.leftHeaderTxt.innerHTML = 'Learn the planet';\n    DOM.rightHeaderTxt.innerHTML = 'Learn the planet';\n\n    setTimeout(() => {\n        \n        const { layout, lessonPlan } = store.getState();\n        const progressBar = document.querySelector('.js-right-grid progress');\n\n        if(lessonPlan) {\n\n            const questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n            progressBar.max = questionCount;\n            progressBar.value = layout.roundProgressIndex || progressBar.value;\n        }\n    });\n};","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\n\nexport const renderScore = score => {\n    \n    const { history, collection, config, layout, lesson, lessonPlan } = store.getState();\n\n    score.mode = config.mode;\n\n    if(!layout) return;\n\n    if(score.total === layout.roundScoreCount) {\n        actions.boundUpdateHistory(score);\n    }\n};","import { subscription } from 'redux/subscriptions';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\n\nimport homeTemplate from 'ui/screens/home/home-template.html';\n\nexport const renderHome = (counter, forceIntroDisplay = false) => {\n    \n    subscription.remove(subscription.getByName('renderHome'));\n    \n    const isFirstTimeVisitor = cookieHandler.setFirstTimeVisitorCookie();\n\n    if(counter.index > 0 && !counter.isLessonPaused) return;\n\n    let { config } = store.getState();\n\n    if(config.isLandscapeMode || forceIntroDisplay) {\n        renderLessons();\n    }\n\n    // if(config.isLandscapeMode || isFirstTimeVisitor || forceIntroDisplay) {\n    //     renderSnapdragonIntro();\n    // }\n\n    if(config.isPortraitMode && !isFirstTimeVisitor) {\n        renderLessons();\n    }\n};\n\nconst renderSnapdragonIntro = () => {\n    \n    const template = document.createElement('template');\n          template.innerHTML = homeTemplate;\n\n    DOM.rightBody.innerHTML = '';\n\n    renderTemplate({}, template.content, DOM.rightBody);\n}\n","import { clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { getIPLocation } from 'geo/geo';\n\nexport const initialiseConfig = async originalConfig => {\n\n    const config = clone(originalConfig);\n\n    const observableMonths = utils.getObservableMonths(new Date(), 3);\n\n    config.season = { observableMonths };\n    config.guide.season.observableMonths = observableMonths;\n    config.guide.season.type = config.guide.season.type || 'all_year';\n\n    config.collection.id = config.collection.id || 0; \n    config.guide.locationPlace = '';\n    config.guide.place.type = '';\n    \n    try {\n        \n        const ipLocation = await getIPLocation(config);\n        \n        if(ipLocation) {\n            const location = ipLocation.city ? `${ipLocation.city}, ${ipLocation.country_name}` : ipLocation;\n            config.ipLocation = location;\n            config.guide.locationType = 'longLat';\n            config.guide.locationLongLat = location;\n            config.guide.place.name = location;\n            config.guide.coordinates = {\n                lat: ipLocation.latitude,\n                long: ipLocation.longitude\n            }; \n        }\n        else {\n            config.guide.locationPlace = 'Earth';\n            config.guide.locationType = 'place';\n            config.guide.place = { id: 'any', name: 'Earth' };\n        }\n\n    } catch(e) {            \n        config.guide.locationPlace = 'Earth';\n        config.guide.locationType = 'place';\n        config.guide.place = { id: 'any', name: 'Earth' };\n    }    \n\n    return config;\n}","import { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nconst onCloseModal = () => {\n\n    const modal = document.querySelector('#lessonModal');\n    const closer = modal.querySelector('.js-modal-footer');\n          closer.addEventListener('click', e => {\n            const contents = modal.querySelector('.js-modal-text');\n                  contents.innerHTML = `\n                    <div class=\"lesson-spinner double-centred-block\">\n                        <div class=\"icon\"><i class=\"fas fa-sun slow-spin\"></i></div>\n                    </div>\n                  `;\n            // renderLessons();\n            // const activeLesson = document.querySelector('.highlighted-for-review-row');\n            // lessonListScrollHandler.scrollToTitle(activeLesson.dataset.lessonId);\n          });\n\n      // remove subscriptions? e.g. renderScoreSummary\n\n};\n\nexport const lessonModalHandler = {\n    onCloseModal\n};","import { renderTemplate } from 'ui/helpers/templating';\n\nimport modalsTemplate from 'modals.html';\n\nimport { library, dom } from '@fortawesome/fontawesome-svg-core'\n\nimport { faBookOpen, faLanguage, faEnvelope, faUserSlash, faUserCheck, faCog, faChevronDown, faGlasses, faDove, faFrog, faPaw, faBug, faLeaf, faBarcode, faSun, faRegistered, faChevronUp, faChalkboard, faTimes, faTimesCircle, faCheck, faExternalLinkAlt, faExclamation, faClone, faCopyright, faSlidersH, faUndo } from '@fortawesome/free-solid-svg-icons'; // fas\nimport { faArrowAltCircleLeft, faArrowAltCircleRight, faRegistered as faRegisteredFar } from '@fortawesome/free-regular-svg-icons'; // far\nimport { faYoutube } from '@fortawesome/free-brands-svg-icons'; // fab\n\nhttps://fontawesome.com/v5.9.0/how-to-use/with-the-api/setup/library/\n\nlibrary.add(\n  faBookOpen, faLanguage, faEnvelope, faUserSlash, faUserCheck, faCog, faChevronDown, faGlasses, faDove, faFrog, faPaw, faBug, faLeaf, faRegistered, faBarcode, faSun, faChevronUp, faChalkboard, faTimes, faTimesCircle, faCheck, faExternalLinkAlt, faExclamation, faClone, faCopyright, faSlidersH, faUndo,\n  faArrowAltCircleLeft, faArrowAltCircleRight, faRegisteredFar,\n  faYoutube\n)\n\ndom.watch();\n\nexport const handleWindowResize = () => {\n\n  const setWindowHeight = () => {\n\n      const iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream; \n      const iw = (iOS) ? screen.width : window.innerWidth; \n      const ih = (iOS) ? screen.height : window.innerHeight;\n\n      const verticalHeight = window.innerHeight * 0.01;                \n\n      document.documentElement.style.setProperty('--vh', verticalHeight + 'px');\n      document.documentElement.style.setProperty('--vhGrid', verticalHeight * 100  + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlock', (verticalHeight * 7.5) + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlocks', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhStandardBlock', (verticalHeight * 10) + 'px');\n      document.documentElement.style.setProperty('--vhHalfStandardBlock', (verticalHeight * 5) + 'px');\n      document.documentElement.style.setProperty('--vhOneAndHalfStandardBlock', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhDoubleStandardBlock', (verticalHeight * 20) + 'px');\n      document.documentElement.style.setProperty('--vhCarousel', (verticalHeight * 30) + 'px');\n      document.documentElement.style.setProperty('--vhButtonBlock', (verticalHeight * 9) + 'px');\n      document.documentElement.style.setProperty('--vhRow', (verticalHeight * 11) + 'px');\n      document.documentElement.style.setProperty('--vhFixtures', (verticalHeight * 15) + 5 + 'px');\n      document.documentElement.style.setProperty('--vhCalendar', (verticalHeight * 11) + 'px');                \n\n      const fixtures = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhFixtures').replace('px', ''));\n      const largeImage = ((verticalHeight * 100) - fixtures) / 3;\n\n      document.documentElement.style.setProperty('--vhLargeImage', largeImage + 'px');\n      document.documentElement.style.setProperty('--vhSmallImageCarousel', verticalHeight * 36 + 'px');           \n      document.documentElement.style.setProperty('--vhExtraSmallImageCarousel', verticalHeight * 36    + 'px');           \n\n      const horizontalWidth = window.innerWidth * 0.01;\n\n      document.documentElement.style.setProperty('--vw', horizontalWidth + 'px');\n\n      document.documentElement.style.setProperty('--vwGrid', horizontalWidth * 100  + 'px');\n      document.documentElement.style.setProperty('--vwGridNegative', (horizontalWidth * -100) + 52  + 'px');\n      document.documentElement.style.setProperty('--vhScrollingTop', (horizontalWidth * 56.25) + (verticalHeight * 10) + 'px');\n  };\n\n  setWindowHeight();\n\n  window.addEventListener('resize', () => {\n      setWindowHeight();\n  });\n\n  if(window.location.origin.indexOf('learn-the-planet') > -1) {\n     snapLog('*** Live site detected ***');\n      if(window.location.protocol != 'https:') {\n          location.href =  location.href.replace(\"http://\", \"https://\");\n         snapLog(' *** Site secured ***');\n      }\n  }\n};\n\nexport const loadModalHTML = () => {\n\n  const template = document.createElement('template');\n        template.innerHTML = modalsTemplate;\n\n  const parent = document.querySelector('body');\n\n  renderTemplate({}, template.content, parent);\n};","// https://developer.mozilla.org/en-US/docs/Web/API/console#Outputting_text_to_the_console\n\n// import { object } from \"firebase-functions/lib/providers/storage\";\n\nexport const snapLog = (msg, obj) => {\n\n  console.log('SECRET_KEY: ', process.env.SECRET_KEY);\n\n  let css = 'background: #222; color: #bada55; padding: 5px; margin-right: 5px;';\n  if(Array.isArray(obj)) obj = { obj };\n  obj \n    ? console.log(`%c${msg} %o`, css, obj)\n    : console.log(`%c${msg}: ${obj}`, css)\n};\n\nexport const logError = (source, e) => {\n  let css = 'background: #222; color: #fff; padding: 5px; margin-right: 5px;';\n  let output;\n  if(Array.isArray(source)) source = { source };\n  // if(source === typeof(object)) {\n  //   output = `%cError: ${e.message} at %o`;\n  //   console.log(output, source, css);\n  // } else {\n  //   output = `%cError: ${e.message} at ${source}`;\n  //   console.log(output, css);\n  // }\n};\n\nexport const logAPIError = (call, e) => {\n  let source = `Firebase ${call} error`;\n  logError(source, e);\n};","import \"babel-polyfill\";\n// import 'ui/css/groups/bootstrap.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport 'bootstrap/js/dist/carousel';\nimport 'bootstrap/js/dist/modal';\nimport 'bootstrap/js/dist/dropdown';\nimport 'bootstrap/js/dist/collapse';\n\nimport 'ui/css/snapdragon-colours.css';\nimport 'ui/css/snapdragon.css';\nimport 'ui/css/common.css';\nimport 'ui/css/species-list.css';\nimport 'ui/css/snapdragon-media.css';\n\nimport { utils } from 'utils/utils';\nimport { store, persistor } from 'redux/store';\nimport { nextLesson } from 'ui/setup/next-lesson';\nimport { nextLayout } from 'ui/setup/next-layout';\nimport { nextItem } from 'ui/setup/next-item';\nimport { renderHeaders } from 'ui/fixtures/headers';\nimport { renderScore } from 'ui/fixtures/score';\nimport { renderHome } from 'ui/screens/home/home';\nimport { renderNavigation, renderLoginChanges } from 'ui/fixtures/navigation';\nimport { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { traitValuesHandler } from 'api/traits/trait-types';\nimport { initialiseConfig } from 'ui/helpers/location-helper';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderLoggedIn } from 'ui/fixtures/login';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { lessonModalHandler } from 'ui/screens/cards/test-card-modal-handler';\nimport { handleWindowResize, loadModalHTML } from 'media-helper';\nimport { snapLog, logError, logAPIError } from 'ui/helpers/logging-handler';\nimport * as Sentry from '@sentry/browser';\n\nconst onLoadHandler = () => {\n\n    setTimeout( async () => {\n\n      Sentry.init({ dsn: 'https://9d9d8654a6a345a3af09df89cb615bde@o136894.ingest.sentry.io/302756' });\n\n      handleWindowResize();      \n\n      const purgeData = cookieHandler.hasUserBeenAwayTooLong();\n\n      if(purgeData) {\n          persistor.purge();\n          window.location.reload(true);\n      } else {\n        const lastVisitedCookie = cookieHandler.setLastVisitedCookie(Date());\n      }\n\n      let lessonPlan;\n\n      try {\n\n          const { config, counter: currentCounter, lessonPlan: statePlans, collections } = store.getState();\n\n          lessonPlan = statePlans;\n\n          config.isPortraitMode = window.matchMedia(\"(max-width: 767px)\").matches;\n          config.isLandscapeMode = !config.isPortraitMode;\n\n          const counter = currentCounter ? { ...currentCounter } : { index: null, isLessonPaused: true };\n\n          actions.boundUpdateConfig(config);\n          actions.boundStopStartLesson(counter);\n\n          if(collections && collections.length === 0) {\n              const cloudCollections = await firestore.getCollections();\n              actions.boundUpdateCollections(cloudCollections);\n          }\n\n          subscription.add(renderHeaders, 'collection', 'flow');\n          renderNavigation();\n          subscription.add(renderNavigation, 'collection', 'flow');\n          renderLoginChanges();\n          subscription.add(renderLoginChanges, 'user', 'flow');\n          subscription.add(renderLoggedIn, 'user', 'flow');\n\n          subscription.add(renderHome, 'counter', 'flow'); // avoid adding as listener on page refresh\n                  \n          subscription.add(nextItem, 'layout', 'flow');\n          subscription.add(nextLesson, 'counter', 'flow');\n          subscription.add(nextLayout, 'counter', 'flow');\n          subscription.add(renderScore, 'score', 'flow');\n          subscription.add(traitValuesHandler, 'config', 'localisation');\n\n          const updateConfig = async () => {\n              const initialisedConfig = await initialiseConfig(config);\n              actions.boundUpdateConfig(initialisedConfig);\n          };\n\n          if(!config.guide.locationType) {\n              updateConfig();\n          }\n\n          let glossary = await firestore.getDefinitionsByTaxa(['common', 'plantae', 'aves', 'fungi', 'insecta']);\n              glossary = utils.sortAlphabeticallyBy(glossary, 'term');\n          actions.boundCreateGlossary(glossary);\n\n          loadModalHTML();\n          lessonModalHandler.onCloseModal();\n\n      }\n      catch(e) {\n          console.log('home page error: ', e)\n          // persistor.purge();\n          // window.location.reload(true);        \n      }\n    });\n\n    window.snapLog = snapLog;\n    window.logError = logError;\n    window.logAPIError = logAPIError;\n\n    snapLog('port', {});\n};\n\nonLoadHandler();","import{ contains, flatten } from 'ramda';\nimport { utils } from 'utils/utils';\n\nlet root = '';\n\nconst formatUrl = (name, root, encode) => {\n    let binomial = name;\n    if(name.indexOf(' ') > 0) {\n        let ranks = name.split(' ');\n        binomial = ranks[0] + ' ' + ranks[1];\n        if(binomial.indexOf('Speckled wood') > -1) {\n            binomial += ' ' + ranks[2];\n        }\n    }    \n    return root + encode(binomial);\n};\n\nasync function fetchWiki(name, missingMessage) {\n    \n    if(name === undefined) {\n        return missingMessage;  \n    }\n\n    const url = formatUrl(name, root, utils.encodeQuery);\n    const config = { \n        method: 'GET'\n    };\n    \n    try { \n        const response = await fetch(url, config);\n        const data = await response.json();        \n        return flatten(data);        \n    } catch (e) {\n        const errorPromise = new Promise((resolve, reject) => {\n            resolve(missingMessage)\n        });\n        return errorPromise;\n    }    \n};\n\nconst cleanEntry = str => {\n    let cleaned = str;\n    cleaned = cleaned.replace('( or UK: , US: )', '');\n    cleaned = cleaned.replace('(;', '(');\n    cleaned = cleaned.replace('()', '');\n    cleaned = cleaned.replace('( ', '(');\n    cleaned = cleaned.replace('  ', ' ');\n    return cleaned;\n};\n\nconst wikiLink = entry => {\n    const src = cleanEntry(entry).replace('.wikipedia', '.m.wikipedia');\n    return `<span data-toggle=\"modal\" data-target=\"#wikiModal\" data-src=\"${src}\" class=\"underline-link\">Wiki modal</span>`;    \n};\n\nconst formatWiki = (entry) => {\n\n    const exceptions = ['Tarragon', 'Apple'];\n\n    if(contains(entry[0], exceptions)) {\n        return `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    }\n\n    if(!entry) return '';\n    let html = '';\n    if(entry.length === 1) {\n        html += wikiLink(entry[0]);\n    }\n    if(entry[1]) html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[1])}'</li>`;\n    if(entry[2])\n        if(entry[2].indexOf('https')!== -1) html += wikiLink(entry[2]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    if(entry[3]) \n        if(entry[3].indexOf('https')!== -1)\n        html += wikiLink(entry[3]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[3])}'</li>`;\n    return html;\n};\n\nasync function renderWiki(wikiNode, item, language) {\n    const binomial = item.name;\n    const wikiSearchTerm = item.names ? item.names.filter(name => name.language === language).find(name => name.wikiSearchTerm) : null;\n    const searchTerm = wikiSearchTerm ? wikiSearchTerm.vernacularName : (item.searchTerms \n                            ? item.searchTerms.filter(term => term.language === language)[0].searchTerm \n                            : binomial);\n    root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=1&search=`;\n    const exceptions = [ 'Artemisia dracunculus', 'Malus domestica', 'Zingiber officinale'];\n    if(contains(item.name, exceptions)) {\n        root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=2&redirects=resolve&search=`;\n    }    \n    wikiNode.innerHTML = \"\";\n\n    const entry = await fetchWiki(searchTerm);\n\n    if(entry && entry[2]) {\n        wikiNode.innerHTML = formatWiki(entry.slice(1));\n    } else {\n        if(!binomial) return '';\n        const genus = binomial.split(' ')[0];\n        const genusEntry = await fetchWiki(genus);\n        if(genusEntry[2] !== '')\n            wikiNode.innerHTML = formatWiki(genusEntry.slice(1));\n        else if (language !== 'en') {\n            renderWiki(wikiNode, binomial, 'en');\n        }\n    }\n}\n\nexport {\n    formatUrl, \n    formatWiki,\n    renderWiki\n};"],"sourceRoot":""}