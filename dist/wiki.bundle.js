/*! For license information please see wiki.bundle.js.LICENSE.txt */
!function(e){function webpackJsonpCallback(r){for(var i,a,c=r[0],u=r[1],s=r[2],p=0,l=[];p<c.length;p++)a=c[p],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&l.push(n[a][0]),n[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(o&&o(r);l.length;)l.shift()();return t.push.apply(t,s||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,r=0;r<t.length;r++){for(var i=t[r],a=!0,c=1;c<i.length;c++){var o=i[c];0!==n[o]&&(a=!1)}a&&(t.splice(r--,1),e=__webpack_require__(__webpack_require__.s=i[0]))}return e}var r={},n={wiki:0},t=[];function __webpack_require__(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}__webpack_require__.m=e,__webpack_require__.c=r,__webpack_require__.d=function(e,r,n){__webpack_require__.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,r){if(1&r&&(e=__webpack_require__(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)__webpack_require__.d(n,t,function(r){return e[r]}.bind(null,t));return n},__webpack_require__.n=function(e){var r=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__webpack_require__.p="";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=webpackJsonpCallback,i=i.slice();for(var c=0;c<i.length;c++)webpackJsonpCallback(i[c]);var o=a;t.push(["./src/wikipedia/wiki.js","vendors~admin~app~wiki","admin~app~utils~wiki"]),checkDeferredModules()}({"./src/wikipedia/wiki.js":function(e,r,n){"use strict";n.r(r),n.d(r,"formatUrl",(function(){return c})),n.d(r,"formatWiki",(function(){return s})),n.d(r,"renderWiki",(function(){return renderWiki}));var t=n("./node_modules/ramda/es/index.js"),i=n("./src/utils/utils.js");function asyncGeneratorStep(e,r,n,t,i,a,c){try{var o=e[a](c),u=o.value}catch(e){return void n(e)}o.done?r(u):Promise.resolve(u).then(t,i)}function _asyncToGenerator(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var a=e.apply(r,n);function _next(e){asyncGeneratorStep(a,t,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,t,i,_next,_throw,"throw",e)}_next(void 0)}))}}var a="",c=function formatUrl(e,r,n){var t=e;if(e.indexOf(" ")>0){var i=e.split(" ");(t=i[0]+" "+i[1]).indexOf("Speckled wood")>-1&&(t+=" "+i[2])}return r+n(t)};function fetchWiki(e,r){return _fetchWiki.apply(this,arguments)}function _fetchWiki(){return(_fetchWiki=_asyncToGenerator(regeneratorRuntime.mark((function _callee(e,r){var n,o,u,s,p;return regeneratorRuntime.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(void 0!==e){l.next=2;break}return l.abrupt("return",r);case 2:return n=c(e,a,i.utils.encodeQuery),o={method:"GET"},l.prev=4,l.next=7,fetch(n,o);case 7:return u=l.sent,l.next=10,u.json();case 10:return s=l.sent,l.abrupt("return",t.flatten(s));case 14:return l.prev=14,l.t0=l.catch(4),p=new Promise((function(e,n){e(r)})),l.abrupt("return",p);case 18:case"end":return l.stop()}}),_callee,this,[[4,14]])})))).apply(this,arguments)}var o=function cleanEntry(e){var r=e;return r=(r=(r=(r=(r=r.replace("( or UK: , US: )","")).replace("(;","(")).replace("()","")).replace("( ","(")).replace("  "," ")},u=function wikiLink(e){var r=o(e).replace(".wikipedia",".m.wikipedia");return'<span data-toggle="modal" data-target="#wikiModal" data-src="'.concat(r,'" class="underline-link">Wiki modal</span>')},s=function formatWiki(e){if(t.contains(e[0],["Tarragon","Apple"]))return'<li class="species-card-wiki-entry">\''.concat(o(e[2]),"'</li>");if(!e)return"";var r="";return 1===e.length&&(r+=u(e[0])),e[1]&&(r+='<li class="species-card-wiki-entry">\''.concat(o(e[1]),"'</li>")),e[2]&&(-1!==e[2].indexOf("https")?r+=u(e[2]):r+='<li class="species-card-wiki-entry">\''.concat(o(e[2]),"'</li>")),e[3]&&(-1!==e[3].indexOf("https")?r+=u(e[3]):r+='<li class="species-card-wiki-entry">\''.concat(o(e[3]),"'</li>")),r};function renderWiki(e,r,n){return _renderWiki.apply(this,arguments)}function _renderWiki(){return(_renderWiki=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(e,r,n){var i,c,o,u,p,l,_;return regeneratorRuntime.wrap((function _callee2$(f){for(;;)switch(f.prev=f.next){case 0:return i=r.name,c=r.names?r.names.filter((function(e){return e.language===n})).find((function(e){return e.wikiSearchTerm})):null,o=c?c.vernacularName:r.searchTerms?r.searchTerms.filter((function(e){return e.language===n}))[0].searchTerm:i,a="https://".concat(n,".m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=1&search="),u=["Artemisia dracunculus","Malus domestica","Zingiber officinale"],t.contains(r.name,u)&&(a="https://".concat(n,".m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=2&redirects=resolve&search=")),e.innerHTML="",f.next=9,fetchWiki(o);case 9:if(!(p=f.sent)||!p[2]){f.next=14;break}e.innerHTML=s(p.slice(1)),f.next=21;break;case 14:if(i){f.next=16;break}return f.abrupt("return","");case 16:return l=i.split(" ")[0],f.next=19,fetchWiki(l);case 19:""!==(_=f.sent)[2]?e.innerHTML=s(_.slice(1)):"en"!==n&&renderWiki(e,i,"en");case 21:case"end":return f.stop()}}),_callee2,this)})))).apply(this,arguments)}}});
//# sourceMappingURL=wiki.bundle.js.map