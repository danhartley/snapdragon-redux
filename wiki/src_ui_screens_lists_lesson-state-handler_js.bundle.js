(window["webpackJsonplearn_the_planet"] = window["webpackJsonplearn_the_planet"] || []).push([["src_ui_screens_lists_lesson-state-handler_js"],{

/***/ "beYv":
/*!************************************!*\
  !*** ./src/api/glossary/lichen.js ***!
  \************************************/
/*! namespace exports */
/*! export lichen [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "lichen": () => /* binding */ lichen
/* harmony export */ });
var lichen = [{
  term: "Lichen",
  definition: "Composite organism of algae or cyanobacteria (or rarely, both), fungi and yeast living in a mutualistic relationship.",
  wiki: "https://en.wikipedia.org/wiki/Lichen",
  level: 2,
  branch: 'general'
}, {
  term: "Fruticose",
  definition: "Growing like tuft or multiple-branched leafless mini-shrub (beardy), upright or hanging down, flat or round 3D branches.",
  wiki: "https://en.wikipedia.org/wiki/Fruticose_lichen",
  level: 2,
  branch: 'classification'
}, {
  term: "Foliose",
  definition: "Having flat, 2D leaf-like structures.",
  wiki: "https://en.wikipedia.org/wiki/Foliose_lichen",
  level: 2,
  image: {
    url: 'https://content.eol.org/data/media/58/87/e8/509.25630291.260x190.jpg'
  },
  branch: 'classification'
}, {
  term: "Crustose",
  definition: "Forming a crust that strongly adheres to a substrate (crusty).",
  wiki: "https://en.wikipedia.org/wiki/Crustose_lichen",
  level: 2,
  branch: 'classification'
}, {
  term: "Leprose",
  definition: "Having a powdery or granular surface.",
  wiki: "https://en.wikipedia.org/wiki/Leprose_lichen",
  level: 2,
  branch: 'classification'
}, {
  term: "Squamulose",
  definition: "Composed of small, often overlapping squamules( scales).",
  wiki: "https://en.wikipedia.org/wiki/Squamulose_lichen",
  level: 2,
  branch: 'classification'
}, {
  term: "Soredium",
  definition: "Common reproductive structures of lichens.",
  wiki: "https://en.wikipedia.org/wiki/Soredium",
  technical: 'true',
  branch: 'morphology'
}, {
  term: "Epiphyte",
  definition: "An organism that grows on the surface of a plant and derives its moisture and nutrients from the air, rain, water or surrounding debris.",
  wiki: "https://en.wikipedia.org/wiki/Epiphyte",
  branch: 'classification'
}, {
  term: "Gametophyte",
  definition: "One of the two alternating phases in the life cycle of plants and algae. It is the sexual phase (see Sporophyte).",
  wiki: "https://en.wikipedia.org/wiki/Gametophyte",
  branch: 'general'
}, {
  term: "Sporophyte",
  definition: "One of the two alternating phases in the life cycle of plants and algae. In seed plants it is the roots, stem, leaves, cones and flowers (see Gametophyte).",
  wiki: "https://en.wikipedia.org/wiki/Sporophyte",
  branch: 'general'
}, {
  term: "Thallus",
  definition: "Nonreproductive, undifferentiated tissue, or vegetative body part of a lichen. Usually visually prominent.",
  level: 2,
  branch: 'morphology'
}, {
  term: "Thallus type",
  definition: "Means of distinuguishing lichen e.g. foliose, crustose.",
  level: 2,
  branch: 'general'
}, {
  term: "Squamule",
  definition: "One of the scalelike lobes of the thallus of a lichen.",
  level: 2,
  branch: 'morphology'
}, {
  term: "Podetium",
  definition: "The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.",
  technical: 'true',
  branch: 'morphology'
}, {
  term: "Apothecium",
  definition: "Wide, open, saucer-shaped or cup-shaped fruit body. Sessile and fleshy.",
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Rhizine',
  definition: 'Multiceullar, root-like structures which anchor licen to substrate.',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Erhizinate',
  definition: 'Without rhizines.',
  technical: 'true',
  branch: 'general'
}, {
  term: 'Hapter',
  definition: 'Short, peg-like attachments of the lower surface of lichen to the substrate on which they grow.',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Soredium',
  definition: 'Common reproductive structures of lichen.',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Cortex (lichen)',
  definition: 'Composed of closely packed fungal hyphae that protects thallus from water loss (evaporation).',
  branch: 'morphology'
}, {
  term: 'Holdfast',
  definition: 'Means by which a (bushy) lichen is attached to the substrate.',
  branch: 'morphology'
}, {
  term: 'Disc',
  definition: 'Spore-bearing part of the fruiting body of a lichen.',
  branch: 'morphology'
}, {
  term: 'Lobe',
  definition: 'Leaf-like part of a leafy (foliose) lichen.',
  branch: 'morphology'
}, {
  term: 'Medulla',
  definition: 'Fungal part of the thallus situated below the skin like upper cortex.',
  branch: 'morphology'
}, {
  term: 'Mycobiont',
  definition: 'Fungal component of a lichen.',
  branch: 'general'
}, {
  term: 'Photobiont',
  definition: 'Photosynthetic partner in a lichen (alga or cyanobacterium).',
  branch: 'general'
}, {
  term: 'Cyanobacteria',
  definition: 'Phylum of bacteria that obtain their energy through photosynthesis. They produce oxygen.',
  branch: 'classification'
}, {
  term: '(Green) Algae',
  definition: 'Heterogeneous grouping of eukaryotes photosynthesis',
  branch: 'classification'
}, {
  term: 'Placodioid',
  definition: 'Crustose lichen which radiates out from its centre.',
  wiki: 'https://en.wikipedia.org/wiki/Placodioid_lichen',
  technical: 'true',
  branch: 'classification'
}, {
  term: 'Pruinescence',
  definition: 'A "frosted" or dusty looking coating on top of a surface.',
  wiki: 'https://en.wikipedia.org/wiki/Pruinescence',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Lecanorine',
  definition: 'Shaped like a plate with a surrounding ring similar tissue to main non-fruiting body (after genus Lecanora).',
  wiki: 'https://en.wikipedia.org/wiki/Lecanorine_lichen',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Apothecium',
  definition: 'Wide, open, saucer-shaped or cup-shaped fruit body.',
  wiki: 'https://en.wikipedia.org/wiki/Ascocarp#Apothecium',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Ascus',
  definition: 'Spore-bearing cell produced in ascomycete fungi.',
  wiki: 'https://en.wikipedia.org/wiki/Ascus',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Ascomycota',
  definition: '(Ascomycetes or Sac fungi) One of two main fungi divisions (phylum), characterised by spore-containing ascus. Majority of fungal symbionts in lichens are ascomycetes',
  wiki: 'https://en.wikipedia.org/wiki/Ascomycota',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Basidiomycota',
  definition: '(Basidiomycetes (Mushrooms)) Reproduce sexually via formation of specialised end cells (basidia) bearing external meiospores.',
  wiki: 'https://en.wikipedia.org/wiki/Basidiomycota',
  technical: 'true',
  branch: 'classification'
}, {
  term: 'Soredium',
  definition: 'Powdery (asexual) reproductive structure (propagule) composed of fungal hyphae wrapped around the photobiont.',
  wiki: 'https://en.wikipedia.org/wiki/Soredium',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Isidium',
  definition: 'Vegetative (asexual) reproductive structure. Outgrowths from the thallus.',
  wiki: 'https://en.wikipedia.org/wiki/Isidium',
  technical: 'true',
  branch: 'morphology'
}, {
  term: 'Podetium',
  definition: 'The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.',
  wiki: 'https://en.wikipedia.org/wiki/Podetium',
  technical: 'true',
  branch: 'morphology'
}];

/***/ }),

/***/ "Jc5P":
/*!**********************************************!*\
  !*** ./src/api/snapdragon/infraspecifics.js ***!
  \**********************************************/
/*! namespace exports */
/*! export infraspecifics [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "infraspecifics": () => /* binding */ infraspecifics
/* harmony export */ });
var infraspecifics = [{
  name: 'Brassica rapa',
  subspecies: [{
    variety: 'chinensis',
    names: [{
      "vernacularName": "Bok choy",
      "language": "en"
    }, {
      "vernacularName": "Pak choi",
      "language": "en"
    }]
  }, {
    variety: 'rapa',
    names: [{
      "vernacularName": "Turnip",
      "language": "en"
    }]
  }, {
    variety: 'oleifera',
    names: [{
      "vernacularName": "Field mustard",
      "language": "en"
    }]
  }, {
    variety: 'pekinensis',
    names: [{
      "vernacularName": "Chinese cabbage",
      "language": "en"
    }, {
      "vernacularName": "Wombok",
      "language": "en"
    }]
  }]
}, {
  name: 'Brassica oleracea',
  variety: 'oleracea',
  subspecies: [{
    variety: 'oleracea',
    names: [{
      "vernacularName": "Wild cabbage",
      "language": "en",
      wiki: 'https://en.wikipedia.org/wiki/Brassica_oleracea',
      eol: 'http://eol.org/pages/1283630/overview'
    }]
  }, {
    variety: 'capitata',
    group: 'Capitata',
    form: 'alba',
    names: [{
      "vernacularName": "Cabbage",
      "language": "en",
      wiki: 'https://en.wikipedia.org/wiki/Cabbage',
      eol: 'http://eol.org/pages/38390/overview'
    }]
  }, {
    variety: 'capitata',
    group: 'Capitata',
    form: 'sabauda',
    names: [{
      "vernacularName": "Savoy cabbage",
      "language": "en",
      "wiki": 'https://en.wikipedia.org/wiki/Savoy_cabbage',
      eol: 'http://eol.org/pages/5148887/overview'
    }]
  }, {
    variety: 'capitata',
    group: 'Capitata',
    form: 'rubra',
    names: [{
      "vernacularName": "Red cabbage",
      "language": "en",
      wiki: 'https://en.wikipedia.org/wiki/Red_cabbage'
    }]
  }, {
    variety: 'capitata',
    group: 'Capitata',
    form: 'acuta',
    names: [{
      "vernacularName": "Cone cabbage",
      "language": "en"
    }]
  }, {
    variety: 'viridis',
    group: 'acephala',
    names: [{
      "vernacularName": "Collards",
      "language": "en"
    }]
  }, {
    variety: 'viridis',
    group: 'Acephala',
    names: [{
      "vernacularName": "Kale",
      "language": "en"
    }]
  }, {
    variety: 'gemmifera',
    group: 'Gemmifera',
    names: [{
      "vernacularName": "Brussels sprouts",
      "language": "en"
    }]
  }, {
    variety: 'gongylodes',
    group: 'Gongylodes',
    names: [{
      "vernacularName": "Kohlrabi",
      "language": "en"
    }]
  }, {
    variety: 'italica',
    group: 'Italica',
    names: [{
      "vernacularName": "Broccoli",
      "language": "en"
    }]
  }, {
    variety: 'botrytis',
    group: 'Botrytis',
    names: [{
      "vernacularName": "Cauliflower",
      "language": "en"
    }]
  }]
}];

/***/ }),

/***/ "bcOh":
/*!****************************************!*\
  !*** ./src/api/snapdragon/non-taxa.js ***!
  \****************************************/
/*! namespace exports */
/*! export getNonTaxa [provided] [used] [could be renamed] */
/*! export nonTaxaGroup [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "nonTaxaGroup": () => /* binding */ nonTaxaGroup,
/* harmony export */   "getNonTaxa": () => /* binding */ getNonTaxa
/* harmony export */ });
/* harmony import */ var api_glossary_lichen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! api/glossary/lichen */ "beYv");

var nonTaxaGroup = [{
  LICHEN_FORM: 'Lichen Form'
}];
var getNonTaxa = function getNonTaxa(units) {
  var SD = units;
  return [{
    group: nonTaxaGroup[0].LICHEN_FORM,
    id: SD.thallusType.FRUTICOSE,
    type: SD.nonTaxaType.FORM,
    definition: api_glossary_lichen__WEBPACK_IMPORTED_MODULE_0__.lichen.find(function (l) {
      return l.term === 'Fruticose';
    }).definition,
    quickId: 'Free-standing branching tubes',
    names: [{
      language: "en",
      name: 'Fruticose lichen'
    }],
    traits: [{
      name: SD.name.SUBSTRATE,
      value: "".concat(SD.substrate.BARK, ", ").concat(SD.substrate.SOIL, ", ").concat(SD.substrate.ROCKS)
    }, {
      name: SD.name.SUBSTRATE_ADHERANCE,
      value: SD.level.LOW
    }],
    examples: ['Letharia vulpina', 'Evernia prunastri', 'Ramalina polymorpha', 'Roccella phycopsis', 'Ramalina farinacea'],
    wiki: 'https://en.wikipedia.org/wiki/Fruticose_lichen',
    url: '81/9d/a2/542.9769039745.260x190.jpg'
  }, {
    group: nonTaxaGroup[0].LICHEN_FORM,
    id: SD.thallusType.FOLIOSE,
    type: SD.nonTaxaType.FORM,
    definition: api_glossary_lichen__WEBPACK_IMPORTED_MODULE_0__.lichen.find(function (l) {
      return l.term === 'Foliose';
    }).definition,
    quickId: 'Leaflike, with flat sheets of tissue not tightly bound',
    names: [{
      language: "en",
      name: 'Foliose lichen'
    }],
    traits: [{
      name: SD.name.SUBSTRATE,
      value: "".concat(SD.substrate.BARK, ", ").concat(SD.substrate.ROCKS)
    }, {
      name: SD.name.SUBSTRATE_ADHERANCE,
      value: SD.level.LOW
    }, {
      name: SD.name.USAGE,
      value: SD.usage.FOOD,
      examples: [{
        language: 'en',
        value: 'Deer, goats, and caribou'
      }]
    }, {
      name: SD.name.USAGE,
      value: SD.usage.BIRDS_NEST
    }, {
      name: SD.name.LIFE_SPAN,
      value: '30-60a'
    }, {
      name: SD.name.MEDICINAL_PROPERTIES,
      value: "".concat(SD.medicinalProperties.ANTIBIOTIC)
    }, {
      name: SD.name.CHARACTERISTIC,
      value: SD.characteristic.BIOINDICATOR
    }, {
      name: SD.name.SUBSTRATE_ADHERANCE,
      value: SD.level.LOW
    }],
    examples: ['Lobaria pulmonaria', 'Xanthoria parietina'],
    genera: ['Usnea', 'Cladonia'],
    wiki: 'https://en.wikipedia.org/wiki/Foliose_lichen',
    url: '81/66/25/542.8580717370.260x190.jpg'
  }, {
    group: nonTaxaGroup[0].LICHEN_FORM,
    id: SD.thallusType.CRUSTOSE,
    type: SD.nonTaxaType.FORM,
    definition: api_glossary_lichen__WEBPACK_IMPORTED_MODULE_0__.lichen.find(function (l) {
      return l.term === 'Crustose';
    }).definition,
    quickId: 'Crustlike, growing tight against the substrate',
    names: [{
      language: "en",
      name: 'Crustose lichen'
    }],
    traits: [{
      name: SD.name.SUBSTRATE,
      value: "".concat(SD.substrate.BARK, ", ").concat(SD.substrate.ROCKS)
    }, {
      name: SD.name.SUBSTRATE_ADHERANCE,
      value: SD.level.HIGH
    }],
    examples: ['Graphis scripta', 'Diploschistes scruposus', 'Caloplaca ochracea', 'Ophioparma ventosa'],
    wiki: 'https://en.wikipedia.org/wiki/Crustose',
    url: '7f/69/15/542.3258067212.260x190.jpg'
  } // {
  //     group: nonTaxaGroup[0].LICHEN_FORM,
  //     id: SD.thallusType.SQUAMULOSE,
  //     type: SD.nonTaxaType.FORM,
  //     definition: lichen.find(l => l.term === 'Squamulose').definition,
  //     quickId: 'Tightly clustered and slightly flattened pebble-like units',
  //     names: [ { language: "en", name: 'Squamulose lichen'}],
  //     traits: [
  //         { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },
  //         { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.MEDIUM }
  //     ],
  //     examples: [ 'Squamarina cartilaginea', 'Vahliella leucophaea', 'Cladonia subcervicornis' ],
  //     wiki: 'https://en.wikipedia.org/wiki/Squamulose'
  // },
  ];
};

/***/ }),

/***/ "90q+":
/*!********************************************!*\
  !*** ./src/api/traits/traits-for-tests.js ***!
  \********************************************/
/*! namespace exports */
/*! export getTraitsForTests [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTraitsForTests": () => /* binding */ getTraitsForTests
/* harmony export */ });
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/traits-handler */ "B9Ei");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}



var getTraitsForTests = function getTraitsForTests(units, item) {
  var alreadyTestedTraits = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
  if (item.traits === undefined || Object.keys(item.traits).length === 0 && item.traits.constructor === Object) return {};
  var excludedTraits = [].concat(_toConsumableArray(ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getTraitsToExclude()), _toConsumableArray(alreadyTestedTraits), ['lookalikes', 'relationships']).filter(function (et) {
    return et;
  });
  var trait = ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getRandomTrait(item.traits, excludedTraits);
  if (Object.keys(trait).length === 0 && trait.constructor === Object) return {};

  var _ref = trait.unit ? ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getTraitsPoolForUnits(trait) : trait.role ? ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getTraitsPoolForRoles(trait) : ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getTraitsPool(trait, units),
      traitsPool = _ref.traitsPool,
      help = _ref.help;

  var question = trait.unit ? trait.value.join('-') : trait.value.join(',');
  trait.value = trait.value.map(function (t) {
    return utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.capitaliseFirst(t);
  });
  var answers = ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getSetOfTraitAnswers(traitsPool, trait);
  help = help || trait.key;
  var overrides = {
    question: 'Match the trait',
    help: help,
    trait: trait
  };
  return {
    question: question,
    answers: answers,
    overrides: overrides,
    typedItemTraits: item.traits
  };
};

/***/ }),

/***/ "/CNf":
/*!**********************************************!*\
  !*** ./src/redux/actions/action-creators.js ***!
  \**********************************************/
/*! namespace exports */
/*! export actions [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "actions": () => /* binding */ actions
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/actions/action-types */ "NKFH");



var makeActionCreator = function makeActionCreator(action) {
  return function (value, meta) {
    return {
      type: action,
      data: value,
      meta: meta
    };
  };
};

var changeLessonPlans = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.CHANGE_LESSON_PLANS);
var changeLessonPlan = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.CHANGE_LESSON_PLAN);
var nextLesson = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.NEXT_LESSON);
var updateScore = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_SCORE);
var updateTraitScore = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_TRAIT_SCORE);
var nextLayout = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.NEXT_LAYOUT);
var nexItem = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.NEXT_ITEM);
var endRevision = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.END_REVISION);
var updateHistory = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_HISTORY);
var userProgress = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.SAVE_USER_PROGRESS);
var updateCollection = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_COLLECTION);
var resetCollection = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.RESET_COLLECTION);
var updateCollections = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_COLLECTIONS);
var changeCollectionItems = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_COLLECTION_ITEMS);
var nextRound = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.NEXT_ROUND);
var nextLevel = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.NEXT_LEVEL);
var updateConfig = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_CONFIG);
var stopStartLesson = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.STOP_START_LESSON);
var selectCollection = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.SELECT_COLLECTION);
var traitValuesHandler = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_LANGUAGE);
var updateUnits = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_UNITS);
var updateUser = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_USER);
var updateLesson = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_LESSON);
var saveLesson = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.SAVE_LESSON);
var removeSavedLesson = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.REMOVE_LESSON);
var updateVideoPlayer = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_VIDEO_PLAYER);
var createQuickFire = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.CREATE_QUICKFIRE);
var updateQuickFire = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_QUICKFIRE);
var createGlossary = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.CREATE_GLOSSARY);
var clickEvent = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.CLICK_EVENT);
var updateDecks = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_DECKS);
var updateDeck = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_DECK);
var nextDeck = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.NEXT_DECK);
var nextCard = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.NEXT_CARD);
var updateDeckState = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_DECK_STATE);
var updateDeckScore = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_DECK_SCORE);
var updateDeckScoreHistory = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_DECK_SCORE_HISTORY);
var updateDeckSettings = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.UPDATE_DECK_SETTINGS);
var clearDeckScoreHistory = makeActionCreator(redux_actions_action_types__WEBPACK_IMPORTED_MODULE_1__.types.CLEAR_DECK_SCORE_HISTORY);

var boundchangeLessonPlan = function boundchangeLessonPlan(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(changeLessonPlan(data));
};

var boundchangeLessonPlans = function boundchangeLessonPlans(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(changeLessonPlans(data));
};

var boundNextLesson = function boundNextLesson(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(nextLesson(data));
};

var boundAsyncNextLesson = function boundAsyncNextLesson(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(asyncNextLesson(data));
};

var asyncNextLesson = function asyncNextLesson(func) {
  return function (dispatch) {
    return func.then(function (response) {
      return dispatch(nextLesson(response));
    });
  };
};

var boundUpdateScore = function boundUpdateScore(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateScore(data));
};

var boundUpdateTraitScore = function boundUpdateTraitScore(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateTraitScore(data));
};

var boundNextLayout = function boundNextLayout(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(nextLayout(data));
};

var boundNextItem = function boundNextItem(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(nexItem(data, {
    delay: 500
  }));
};

var boundEndRevision = function boundEndRevision(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(endRevision(data));
};

var boundUpdateHistory = function boundUpdateHistory(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateHistory(data));
};

var boundSaveUserProgress = function boundSaveUserProgress(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(userProgress(data));
};

var boundUpdateCollection = function boundUpdateCollection(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateCollection(data));
};

var boundResetCollection = function boundResetCollection(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(resetCollection(data));
};

var boundUpdateCollections = function boundUpdateCollections(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateCollections(data));
};

var boundUpdateCollectionItems = function boundUpdateCollectionItems(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(changeCollectionItems(data));
};

var boundNextRound = function boundNextRound(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(nextRound(data));
};

var boundNextLevel = function boundNextLevel(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(nextLevel(data));
};

var boundUpdateConfig = function boundUpdateConfig(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateConfig(data));
};

var boundStopStartLesson = function boundStopStartLesson(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(stopStartLesson(data));
};

var boundSelectCollection = function boundSelectCollection(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(selectCollection(data));
};

var boundUpdateLanguage = function boundUpdateLanguage(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(traitValuesHandler(data));
};

var boundUpdateUnits = function boundUpdateUnits(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateUnits(data));
};

var boundUpdateUser = function boundUpdateUser(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateUser(data));
};

var boundUpdateLesson = function boundUpdateLesson(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateLesson(data));
};

var boundSaveLesson = function boundSaveLesson(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(saveLesson(data));
};

var boundRemoveSavedLesson = function boundRemoveSavedLesson(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(removeSavedLesson(data));
};

var boundUpdateVideoPlayer = function boundUpdateVideoPlayer(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateVideoPlayer(data));
};

var boundCreateQuickFire = function boundCreateQuickFire(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(createQuickFire(data));
};

var boundUpdateQuickFire = function boundUpdateQuickFire(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateQuickFire(data));
};

var boundCreateGlossary = function boundCreateGlossary(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(createGlossary(data));
};

var boundClickEvent = function boundClickEvent(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(clickEvent(data));
};

var boundUpdateDecks = function boundUpdateDecks(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateDecks(data));
};

var boundUpdateDeck = function boundUpdateDeck(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateDeck(data));
};

var boundNextDeck = function boundNextDeck(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(nextDeck(data));
};

var boundNextCard = function boundNextCard(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(nextCard(data));
};

var boundUpdateDeckState = function boundUpdateDeckState(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateDeckState(data));
};

var boundUpdateDeckScore = function boundUpdateDeckScore(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateDeckScore(data));
};

var boundUpdateDeckScoreHistory = function boundUpdateDeckScoreHistory(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateDeckScoreHistory(data));
};

var boundUpdateDeckSettings = function boundUpdateDeckSettings(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(updateDeckSettings(data));
};

var boundClearDeckScoreHistory = function boundClearDeckScoreHistory(data) {
  return redux_store__WEBPACK_IMPORTED_MODULE_0__.store.dispatch(clearDeckScoreHistory(data));
};

var actions = {
  boundchangeLessonPlans: boundchangeLessonPlans,
  boundchangeLessonPlan: boundchangeLessonPlan,
  boundAsyncNextLesson: boundAsyncNextLesson,
  boundNextLesson: boundNextLesson,
  boundUpdateScore: boundUpdateScore,
  boundUpdateTraitScore: boundUpdateTraitScore,
  boundNextItem: boundNextItem,
  boundNextLayout: boundNextLayout,
  boundEndRevision: boundEndRevision,
  boundUpdateHistory: boundUpdateHistory,
  boundSaveUserProgress: boundSaveUserProgress,
  boundUpdateCollection: boundUpdateCollection,
  boundResetCollection: boundResetCollection,
  boundUpdateCollections: boundUpdateCollections,
  boundUpdateCollectionItems: boundUpdateCollectionItems,
  boundNextRound: boundNextRound,
  boundNextLevel: boundNextLevel,
  boundUpdateConfig: boundUpdateConfig,
  boundStopStartLesson: boundStopStartLesson,
  boundSelectCollection: boundSelectCollection,
  boundUpdateLanguage: boundUpdateLanguage,
  boundUpdateUnits: boundUpdateUnits,
  boundUpdateLesson: boundUpdateLesson,
  boundSaveLesson: boundSaveLesson,
  boundRemoveSavedLesson: boundRemoveSavedLesson,
  boundUpdateVideoPlayer: boundUpdateVideoPlayer,
  boundUpdateUser: boundUpdateUser,
  boundCreateQuickFire: boundCreateQuickFire,
  boundUpdateQuickFire: boundUpdateQuickFire,
  boundCreateGlossary: boundCreateGlossary,
  boundClickEvent: boundClickEvent,
  boundUpdateDecks: boundUpdateDecks,
  boundUpdateDeck: boundUpdateDeck,
  boundNextDeck: boundNextDeck,
  boundNextCard: boundNextCard,
  boundUpdateDeckState: boundUpdateDeckState,
  boundUpdateDeckScore: boundUpdateDeckScore,
  boundUpdateDeckScoreHistory: boundUpdateDeckScoreHistory,
  boundUpdateDeckSettings: boundUpdateDeckSettings,
  boundClearDeckScoreHistory: boundClearDeckScoreHistory
};

/***/ }),

/***/ "xgfk":
/*!************************************!*\
  !*** ./src/redux/observe-store.js ***!
  \************************************/
/*! namespace exports */
/*! export observeStore [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "observeStore": () => /* binding */ observeStore
/* harmony export */ });
var observeStore = function observeStore(store, select, onChange, domain, layout) {
  var currentState = null;
  var hasStateSignificantlyChanged = false;

  function handleChange() {
    var nextState = select(store.getState());
    hasStateSignificantlyChanged = nextState !== currentState;

    if (currentState && Object.is(currentState.index, 0)) {
      var areEqual = true;
      areEqual = areEqual && Object.is(nextState.index, currentState.index);
      areEqual = areEqual && Object.is(nextState.isLessonPaused, currentState.isLessonPaused);
      hasStateSignificantlyChanged = !areEqual;
    }

    if (currentState && nextState) {
      switch (layout) {
        case 'screen-species-card':
        case 'screen-taxon-card':
        case 'screen-non-taxon-card':
        case 'species-vernaculars':
        case 'mixed-specimen-images':
        case 'mixed-specimen-question':
        case 'screen-common-to-latin':
        case 'screen-genus-completion':
        case 'screen-latin-to-common':
        case 'media-match':
          hasStateSignificantlyChanged = (nextState.nextItem && nextState.nextItem.name) !== (currentState.nextItem && currentState.nextItem.name);
          break;
      }
    }

    if (hasStateSignificantlyChanged) {
      currentState = nextState;
      onChange(currentState);
    }
  }

  handleChange.domain = domain;
  handleChange.calledBy = onChange.name;
  var unsubscribe = store.subscribe(handleChange);

  if (hasStateSignificantlyChanged) {
    handleChange();
  }

  return {
    unsubscribe: unsubscribe,
    name: onChange.name
  };
};

/***/ }),

/***/ "6saE":
/*!************************************!*\
  !*** ./src/redux/subscriptions.js ***!
  \************************************/
/*! namespace exports */
/*! export subscription [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "subscription": () => /* binding */ subscription
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/screens/lists/lesson-state-helper */ "6Fh2");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var redux_observe_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/observe-store */ "xgfk");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}





var subscriptions = [];

var add = function add(subscription, domain, role, layout) {
  var select = function select(store) {
    return store[domain];
  };

  var onChange = subscription;
  var sub = (0,redux_observe_store__WEBPACK_IMPORTED_MODULE_2__.observeStore)(redux_store__WEBPACK_IMPORTED_MODULE_1__.store, select, onChange, domain, layout);
  var existingSub = getByName(sub.name);
  if (existingSub) return;
  subscriptions.push(_objectSpread(_objectSpread({}, sub), {}, {
    role: role
  }));
  return sub;
};

var remove = function remove(subscription) {
  if (subscription) {
    subscription.unsubscribe();
    subscriptions = subscriptions.filter(function (sub) {
      return sub.name !== subscription.name;
    });
  }

  return subscriptions;
};

var removeByName = function removeByName(name) {
  var subscription = getByName(name);

  if (subscription) {
    return remove(subscription);
  }
};

var getByName = function getByName(name) {
  return subscriptions.find(function (sub) {
    return sub.name === name;
  });
};

var getByRole = function getByRole(role) {
  return subscriptions.filter(function (sub) {
    return sub.role === role;
  });
};

var getAll = function getAll() {
  return subscriptions;
};

var removeAllQuizScreenSubs = function removeAllQuizScreenSubs() {
  var screens = getByRole('screen');
  screens.forEach(function (sub) {
    subscription.remove(sub);
  });
};

var removeAllQuizLayoutSubs = function removeAllQuizLayoutSubs() {
  var screens = getByRole('quiz');
  screens.forEach(function (sub) {
    subscription.remove(sub);
  });
};

var checkRequired = function checkRequired(state, layout) {
  var userAction = state.userAction,
      config = state.config;
  var isRequired = true,
      isReviewingLesson = true;
  isReviewingLesson = ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_0__.lessonStateHelper.getIsReviewingLesson(userAction, config, isReviewingLesson);
  var reviewLayouts = ['screen-species-card', 'screen-taxon-card', 'screen-non-taxon-card', 'species-vernaculars', 'mixed-specimen-images', 'mixed-specimen-question', 'screen-common-to-latin', 'screen-genus-completion', 'screen-latin-to-common', 'media-match'];
  isRequired = isReviewingLesson ? true : !(0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(layout.name, reviewLayouts);
  return isRequired;
};

var addSubs = function addSubs(layout, config, funcByName) {
  if (!layout) return;
  layout.screens.forEach(function (screen, index) {
    var func = funcByName(screen.name);
    var isSubscriptionRequired = checkRequired(redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(), layout);

    if (func && isSubscriptionRequired) {
      if (config.isPortraitMode) {
        if (index === 1 || screen.name === 'summary') add(func, screen.domain, 'screen', layout ? layout.name : '');
      } else {
        add(func, screen.domain, 'screen', layout ? layout.name : '');
      }
    } else {
      remove(getByName('nextItem'));
      remove(getByName('traitValuesHandler'));
    }
  });
};

var printAllSubs = function printAllSubs() {
  getAll().forEach(function (sub) {
    snapLog('subscribed', sub.name);
  });
};

var subscription = {
  add: add,
  remove: remove,
  removeByName: removeByName,
  getByName: getByName,
  getByRole: getByRole,
  getAll: getAll,
  removeAllQuizScreenSubs: removeAllQuizScreenSubs,
  removeAllQuizLayoutSubs: removeAllQuizLayoutSubs,
  addSubs: addSubs,
  printAllSubs: printAllSubs
};

/***/ }),

/***/ "UvhH":
/*!***********************************************!*\
  !*** ./src/snapdragon-config/lesson-plans.js ***!
  \***********************************************/
/*! namespace exports */
/*! export lessonPlans [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "lessonPlans": () => /* binding */ lessonPlans
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-config/screen-layouts */ "N8LD");
/* harmony import */ var snapdragon_config_plans_landscape_landscape_custom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! snapdragon-config/plans/landscape/landscape-custom */ "isT6");
/* harmony import */ var snapdragon_config_plans_landscape_landscape_fungi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapdragon-config/plans/landscape/landscape-fungi */ "FAFY");
/* harmony import */ var snapdragon_config_plans_landscape_landscape_static__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! snapdragon-config/plans/landscape/landscape-static */ "hjgg");
/* harmony import */ var snapdragon_config_plans_portrait_portrait_static__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! snapdragon-config/plans/portrait/portrait-static */ "aD/o");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}









var landscapeBirds = _objectSpread(_objectSpread({}, (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(snapdragon_config_plans_landscape_landscape_static__WEBPACK_IMPORTED_MODULE_3__.landscapeStatic)), {}, {
  id: 5
});

if (landscapeBirds.levels[0].bonusLayouts) landscapeBirds.levels[0].bonusLayouts[0].types.push('song');

var portraitBirds = _objectSpread(_objectSpread({}, (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(snapdragon_config_plans_portrait_portrait_static__WEBPACK_IMPORTED_MODULE_4__.portraitStatic)), {}, {
  id: 105
});

portraitBirds.levels[0].layouts.push(snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mediaMatch);

var portraitFungi = _objectSpread(_objectSpread({}, (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(snapdragon_config_plans_landscape_landscape_fungi__WEBPACK_IMPORTED_MODULE_2__.landscapeFungi)), {}, {
  id: 103,
  portrait: true
});

portraitFungi.levels[0].bonusLayouts = [_objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.traitPropertyMatch), {}, {
  types: ['definition']
})];

var portraitLichens = _objectSpread(_objectSpread({}, (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(snapdragon_config_plans_landscape_landscape_fungi__WEBPACK_IMPORTED_MODULE_2__.landscapeLichens)), {}, {
  id: 104,
  portrait: true
});

var portraitCustom = _objectSpread(_objectSpread({}, (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(snapdragon_config_plans_landscape_landscape_custom__WEBPACK_IMPORTED_MODULE_1__.landscapeCustom)), {}, {
  id: 101,
  portrait: true
});

var portraitCustom2 = _objectSpread(_objectSpread({}, (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(snapdragon_config_plans_landscape_landscape_custom__WEBPACK_IMPORTED_MODULE_1__.landscapeCustom2)), {}, {
  id: 102,
  portrait: true
});

var lessonPlans = [snapdragon_config_plans_landscape_landscape_custom__WEBPACK_IMPORTED_MODULE_1__.landscapeCustom, snapdragon_config_plans_landscape_landscape_custom__WEBPACK_IMPORTED_MODULE_1__.landscapeCustom2, snapdragon_config_plans_landscape_landscape_static__WEBPACK_IMPORTED_MODULE_3__.landscapeStatic, snapdragon_config_plans_landscape_landscape_static__WEBPACK_IMPORTED_MODULE_3__.landscapeStaticTaxonGroup, snapdragon_config_plans_landscape_landscape_static__WEBPACK_IMPORTED_MODULE_3__.landscapeStaticProviderQuestionsOnly, snapdragon_config_plans_landscape_landscape_fungi__WEBPACK_IMPORTED_MODULE_2__.landscapeFungi, snapdragon_config_plans_landscape_landscape_fungi__WEBPACK_IMPORTED_MODULE_2__.landscapeLichens, landscapeBirds, portraitCustom, portraitCustom2, snapdragon_config_plans_portrait_portrait_static__WEBPACK_IMPORTED_MODULE_4__.portraitStatic, snapdragon_config_plans_portrait_portrait_static__WEBPACK_IMPORTED_MODULE_4__.portraitStaticTaxonGroup, portraitFungi, portraitLichens, portraitBirds];

/***/ }),

/***/ "isT6":
/*!*******************************************************************!*\
  !*** ./src/snapdragon-config/plans/landscape/landscape-custom.js ***!
  \*******************************************************************/
/*! namespace exports */
/*! export landscapeCustom [provided] [used] [could be renamed] */
/*! export landscapeCustom2 [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "landscapeCustom": () => /* binding */ landscapeCustom,
/* harmony export */   "landscapeCustom2": () => /* binding */ landscapeCustom2
/* harmony export */ });
/* harmony import */ var snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-config/screen-layouts */ "N8LD");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}


var landscapeCustom = {
  id: 1,
  name: 'Lesson 1',
  portrait: false,
  "default": true,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.latinToCommonMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonToLatinMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteGenus, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.genusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteSpecies, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesGenusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyStripsMatch],
    bonusLayouts: [_objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.traitPropertyMatch), {}, {
      types: ['definition']
    })]
  }]
};
var landscapeCustom2 = {
  id: 2,
  name: 'Lesson 2',
  portrait: false,
  "default": true,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyStripsMatch],
    bonusLayouts: [_objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.traitPropertyMatch), {}, {
      types: ['definition']
    })]
  }]
};

/***/ }),

/***/ "FAFY":
/*!******************************************************************!*\
  !*** ./src/snapdragon-config/plans/landscape/landscape-fungi.js ***!
  \******************************************************************/
/*! namespace exports */
/*! export landscapeFungi [provided] [used] [could be renamed] */
/*! export landscapeLichens [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "landscapeFungi": () => /* binding */ landscapeFungi,
/* harmony export */   "landscapeLichens": () => /* binding */ landscapeLichens
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-config/screen-layouts */ "N8LD");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}



var landscapeFungi = {
  id: 3,
  name: 'Lesson 3',
  portrait: false,
  "default": false,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.latinToCommonMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonToLatinMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteGenus, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.genusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteSpecies, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.propertyTrait(snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedTraitImages, ['capShape']), snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.propertyTrait(snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedTraitImages, ['gillAttachment']), snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesGenusEntry],
    bonusLayouts: [_objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.traitPropertyMatch), {}, {
      types: ['lookalikes', 'definition']
    })]
  }]
};
var landscapeLichens = _objectSpread(_objectSpread({}, (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(landscapeFungi)), {}, {
  id: 4
});
landscapeLichens.levels[0] = {
  id: 1,
  name: 'Level 1',
  description: 'Species recognition',
  layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages] // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]
  // reviewLayouts: [ L.multiSpecimenCommonMatch, L.mixedSpecimensRight ]

};

/***/ }),

/***/ "hjgg":
/*!*******************************************************************!*\
  !*** ./src/snapdragon-config/plans/landscape/landscape-static.js ***!
  \*******************************************************************/
/*! namespace exports */
/*! export landscapeStatic [provided] [used] [could be renamed] */
/*! export landscapeStaticProviderQuestionsOnly [provided] [used] [could be renamed] */
/*! export landscapeStaticTaxonGroup [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "landscapeStatic": () => /* binding */ landscapeStatic,
/* harmony export */   "landscapeStaticTaxonGroup": () => /* binding */ landscapeStaticTaxonGroup,
/* harmony export */   "landscapeStaticProviderQuestionsOnly": () => /* binding */ landscapeStaticProviderQuestionsOnly
/* harmony export */ });
/* harmony import */ var snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-config/screen-layouts */ "N8LD");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}


var landscapeStatic = {
  id: 10,
  name: 'Lesson 1',
  portrait: false,
  "default": true,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.latinToCommonMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonToLatinMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteGenus, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.genusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteSpecies, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.propertyTrait(snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']), snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesGenusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyStripsMatch],
    bonusLayouts: [_objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.traitPropertyMatch), {}, {
      types: ['lookalikes', 'definition']
    })]
  }]
};
var landscapeStaticTaxonGroup = {
  id: 11,
  name: 'Lesson 11',
  portrait: false,
  "default": true,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesIdentificationMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.latinToCommonMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonToLatinMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteGenus, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.genusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteSpecies, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesGenusEntry] // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]

  }]
};
var landscapeStaticProviderQuestionsOnly = {
  id: 12,
  name: 'Lesson 12',
  portrait: false,
  "default": true,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [],
    bonusLayouts: []
  }]
};

/***/ }),

/***/ "aD/o":
/*!*****************************************************************!*\
  !*** ./src/snapdragon-config/plans/portrait/portrait-static.js ***!
  \*****************************************************************/
/*! namespace exports */
/*! export portraitStatic [provided] [used] [could be renamed] */
/*! export portraitStaticTaxonGroup [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "portraitStatic": () => /* binding */ portraitStatic,
/* harmony export */   "portraitStaticTaxonGroup": () => /* binding */ portraitStaticTaxonGroup
/* harmony export */ });
/* harmony import */ var snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-config/screen-layouts */ "N8LD");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}


var portraitStatic = {
  id: 110,
  name: 'Lesson 110',
  portrait: true,
  "default": true,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.latinToCommonMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonToLatinMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteGenus, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.genusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteSpecies, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.propertyTrait(snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']), snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesGenusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.familyStripsMatch],
    bonusLayouts: [_objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.traitPropertyMatch), {}, {
      types: ['definition']
    })]
  }]
};
var portraitStaticTaxonGroup = {
  id: 111,
  name: 'Lesson 111',
  portrait: true,
  "default": true,
  levels: [{
    id: 1,
    name: 'Level 1',
    layouts: [snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.mixedSpecimenImages, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.latinToCommonMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.commonToLatinMatch, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteGenus, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.genusEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.textCompleteSpecies, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesEntry, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.speciesGenusEntry],
    bonusLayouts: [_objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_0__.layouts.traitPropertyMatch), {}, {
      types: ['lookalikes', 'definition']
    })]
  }]
};

/***/ }),

/***/ "N8LD":
/*!*************************************************!*\
  !*** ./src/snapdragon-config/screen-layouts.js ***!
  \*************************************************/
/*! namespace exports */
/*! export layouts [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "layouts": () => /* binding */ layouts
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-config/screen-panels */ "3imf");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}



var specimenImages = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.specimenImages,
    speciesCard = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.speciesCard,
    vernaculars = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.vernaculars,
    scientifics = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.scientifics,
    text = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.text,
    leaf = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.leaf,
    leafName = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.leafName,
    family = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.family,
    familyStrips = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.familyStrips,
    taxon = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.taxon,
    nonTaxon = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.nonTaxon,
    textComplete = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.textComplete,
    cultivar = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.cultivar,
    cultivarCard = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.cultivarCard,
    epithets = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.epithets,
    definitions = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.definitions,
    specimenCommonMatch = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.specimenCommonMatch,
    specimenLatinMatch = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.specimenLatinMatch,
    definitionCard = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.definitionCard,
    traitProperty = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.traitProperty,
    symbioticProperty = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.symbioticProperty,
    lookalikeProperty = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.lookalikeProperty,
    traitImages = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.traitImages,
    nonTaxonSpecimenTiles = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.nonTaxonSpecimenTiles,
    mixedSpecimenQuestions = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.mixedSpecimenQuestions,
    mixedSpecimensLeft = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.mixedSpecimensLeft,
    mixedSpecimensRight = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.mixedSpecimensRight,
    history = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.history,
    summary = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.summary,
    birdsong = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.birdsong,
    mediaPlayers = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.mediaPlayers,
    mixedTraitLeft = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.mixedTraitLeft,
    mixedTraitRight = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.mixedTraitRight,
    providerHorizontalStripQuestions = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.providerHorizontalStripQuestions,
    speciesIdentification = snapdragon_config_screen_panels__WEBPACK_IMPORTED_MODULE_0__.panels.speciesIdentification;
var mixedSpeciesMatch = {
  name: 'screen-mixed-species-match',
  type: 'test',
  score: 1,
  kind: 'VMC',
  points: 3,
  given: 'Given species name',
  requirement: 'Select species image',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, mixedSpecimenQuestions)]
};
var speciesRevision = {
  name: 'screen-species-card',
  type: 'revision',
  score: 0,
  kind: 'S',
  points: 0,
  given: 'Given species summary',
  requirement: 'Study species',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, speciesCard)]
};
var taxonRevision = {
  name: 'screen-taxon-card',
  type: 'revision',
  score: 0,
  kind: 'F',
  points: 0,
  given: 'Study',
  requirement: 'Family summary',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, taxon)]
};
var nonTaxonRevision = {
  name: 'screen-non-taxon-card',
  type: 'revision',
  score: 0,
  kind: 'GR',
  points: 0,
  given: 'Group summary',
  requirement: 'Study',
  screens: [_objectSpread({}, nonTaxonSpecimenTiles), _objectSpread({}, nonTaxon)]
};
var definitionRevision = {
  name: 'screen-definition-card',
  type: 'revision',
  score: 0,
  kind: 'G',
  points: 0,
  given: 'Given glossary',
  requirement: 'Study definitions',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, definitionCard)]
};
var latinToCommonMatch = {
  name: 'screen-latin-to-common',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  given: 'Given latin name',
  requirement: 'Select common name',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, vernaculars)]
};
var commonToLatinMatch = {
  name: 'screen-common-to-latin',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  given: 'Given common name',
  requirement: 'Select latin name',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, scientifics)]
};
var speciesIdentificationMatch = {
  name: 'screen-species-identification',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  given: 'Given species name',
  requirement: 'Select identification',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, speciesIdentification)]
};
var textCompleteGenus = {
  name: 'screen-genus-completion',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  given: 'Given species name',
  requirement: 'Select genus name',
  screens: [_objectSpread({}, specimenImages), _objectSpread(_objectSpread({}, textComplete), {}, {
    type: 'text-complete-genus'
  })]
};
var multiSpecimenCommonMatch = {
  name: 'screen-specimens-common-match',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'VMC',
  given: 'Given specimenImages images',
  requirement: 'Select common name',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, specimenCommonMatch)]
};
var multiSpecimenLatinMatch = {
  name: 'screen-specimens-latin-match',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'VMC',
  given: 'Given specimenImages images',
  requirement: 'Select latin name',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, specimenLatinMatch)]
};
var traitPropertyMatch = {
  name: 'trait-property-match',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  bonus: true,
  given: 'Given traitImages images',
  requirement: 'Select trait value',
  screens: [_objectSpread({}, traitImages), _objectSpread({}, traitProperty)]
};
var lookalikePropertyMatch = {
  name: 'lookalike-property-match',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  bonus: true,
  given: 'Given traitImages images',
  requirement: 'Select trait value',
  screens: [_objectSpread({}, traitImages), _objectSpread({}, lookalikeProperty)]
};
var symbioticPropertyMatch = {
  name: 'symbiotic-property-match',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  given: 'Given specimenImages images',
  requirement: 'Select symbiotic match',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, symbioticProperty)]
};
var familyMatch = {
  name: 'screen-species-to-family',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'MC',
  given: 'Species name',
  requirement: 'List families',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, family)]
};
var cultivarMatch = {
  name: 'screen-cultivar-to-species',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'MC',
  given: 'Cultivar name',
  requirement: 'List species',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, cultivar)]
};
var familyStripsMatch = {
  name: 'screen-family-to-description',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'MC',
  given: 'Family description',
  requirement: 'List families',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, familyStrips)]
};
var genusEntry = {
  name: 'screen-genus-entry',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'T',
  given: 'Given species name',
  requirement: 'Enter genus name',
  screens: [_objectSpread({}, specimenImages), _objectSpread(_objectSpread({}, text), {}, {
    taxon: 'genus'
  })]
};
var speciesEntry = {
  name: 'screen-species-entry',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'T',
  given: 'Given genus name',
  requirement: 'Enter species name',
  screens: [_objectSpread({}, specimenImages), _objectSpread(_objectSpread({}, text), {}, {
    taxon: 'species'
  })]
};
var speciesGenusEntry = {
  name: 'screen-binomial-entry',
  type: 'test',
  score: 1,
  points: 4,
  kind: 'T',
  given: 'Given common name',
  requirement: 'Enter latin name',
  screens: [_objectSpread({}, specimenImages), _objectSpread(_objectSpread({}, text), {}, {
    taxon: 'name'
  })]
};
var leafEntry = {
  type: 'test',
  score: 1,
  points: 3,
  kind: 'T',
  screens: [_objectSpread({}, leaf), _objectSpread({}, leafName)]
};
var textCompleteSpecies = {
  name: 'screen-species-completion',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'MC',
  given: 'Given genus name',
  requirement: 'Select species name',
  screens: [_objectSpread({}, specimenImages), _objectSpread(_objectSpread({}, textComplete), {}, {
    type: 'text-complete-species'
  })]
};
var commonEntry = {
  name: 'screen-common-entry',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'T',
  given: 'Species latin name',
  requirement: 'Enter common name',
  screens: [_objectSpread({}, specimenImages), _objectSpread(_objectSpread({}, text), {}, {
    taxon: 'vernacular'
  })]
};
var latinEpithets = {
  name: 'screen-epithets',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'MC',
  given: 'Epithet',
  requirement: 'List epithet definitions',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, epithets)]
};
var glossaryTerms = {
  name: 'screen-definitions',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'T',
  given: 'Given glossary term',
  requirement: 'Select definition',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, definitions)]
};
var cultivars = {
  name: 'screen-cultivars',
  type: 'test',
  score: 1,
  points: 1,
  kind: 'T',
  given: 'List of cultivars',
  requirement: 'List of species',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, cultivarCard), _objectSpread({}, cultivar)]
};
var mixedSpecimenImages = {
  name: 'mixed-specimen-images',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'T',
  given: 'Specimen images',
  requirement: 'Select species image',
  screens: [_objectSpread({}, mixedSpecimensLeft), _objectSpread({}, mixedSpecimensRight)]
};
var mediaMatch = {
  name: 'media-match',
  type: 'test',
  score: 1,
  points: 2,
  kind: 'T',
  given: 'Species song',
  requirement: 'Select species',
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, birdsong)]
};
var mixedTraitImages = {
  name: 'mixed-trait-images',
  type: 'test',
  kind: 'T',
  score: 1,
  points: 2,
  given: 'Trait images',
  requirement: 'Select trait image',
  screens: [_objectSpread({}, mixedTraitLeft), _objectSpread({}, mixedTraitRight)]
};
var providerHorizontalStrip = {
  name: 'provider-horizontal-strip',
  type: 'test',
  score: 1,
  screens: [_objectSpread({}, specimenImages), _objectSpread({}, providerHorizontalStripQuestions)]
};

var propertyTrait = function propertyTrait(traitPropertyMatch, traits) {
  var layout = (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(traitPropertyMatch);
  layout.screens[0].traits = traits;
  layout.screens[1].traits = traits;
  return layout;
};

var layouts = {
  mixedSpeciesMatch: mixedSpeciesMatch,
  speciesRevision: speciesRevision,
  taxonRevision: taxonRevision,
  nonTaxonRevision: nonTaxonRevision,
  definitionRevision: definitionRevision,
  latinToCommonMatch: latinToCommonMatch,
  commonToLatinMatch: commonToLatinMatch,
  textCompleteGenus: textCompleteGenus,
  multiSpecimenCommonMatch: multiSpecimenCommonMatch,
  multiSpecimenLatinMatch: multiSpecimenLatinMatch,
  traitPropertyMatch: traitPropertyMatch,
  lookalikePropertyMatch: lookalikePropertyMatch,
  symbioticPropertyMatch: symbioticPropertyMatch,
  familyMatch: familyMatch,
  cultivarMatch: cultivarMatch,
  familyStripsMatch: familyStripsMatch,
  genusEntry: genusEntry,
  speciesEntry: speciesEntry,
  speciesGenusEntry: speciesGenusEntry,
  textCompleteSpecies: textCompleteSpecies,
  commonEntry: commonEntry,
  leafEntry: leafEntry,
  glossaryTerms: glossaryTerms,
  latinEpithets: latinEpithets,
  cultivars: cultivars,
  mixedSpecimenImages: mixedSpecimenImages,
  history: history,
  summary: summary,
  mediaMatch: mediaMatch,
  mixedTraitImages: mixedTraitImages,
  providerHorizontalStrip: providerHorizontalStrip,
  speciesIdentificationMatch: speciesIdentificationMatch,
  propertyTrait: propertyTrait
};

/***/ }),

/***/ "3imf":
/*!************************************************!*\
  !*** ./src/snapdragon-config/screen-panels.js ***!
  \************************************************/
/*! namespace exports */
/*! export panels [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "panels": () => /* binding */ panels
/* harmony export */ });
var specimenImages = {
  name: 'specimen-images',
  domain: 'collection'
};
var traitImages = {
  name: 'trait-images',
  domain: 'bonusLayout'
};
var history = {
  name: 'history',
  domain: 'history'
};
var speciesCard = {
  name: 'species-card',
  domain: 'collection'
};
var definitionCard = {
  name: 'definition-card',
  domain: 'collection'
};
var scientifics = {
  name: 'species-scientifics',
  domain: 'collection',
  taxon: 'name'
};
var birdsong = {
  name: 'birdsong',
  domain: 'bonusLayout'
};
var mediaPlayers = {
  name: 'media-players',
  domain: 'collection'
};
var vernaculars = {
  name: 'species-vernaculars',
  domain: 'collection',
  taxon: 'name'
};
var text = {
  name: 'text-entry',
  domain: 'collection'
};
var textComplete = {
  name: 'text-complete',
  domain: 'collection',
  question: 'Complete the latin name'
};
var summary = {
  name: 'summary',
  domain: 'history'
};
var mixedSpecimenQuestions = {
  name: 'mixed-specimen-questions',
  domain: 'collection'
};
var leaf = {
  name: 'leaf-image',
  domain: 'collection'
};
var leafName = {
  name: 'leaf-text',
  domain: 'collection'
};
var epithets = {
  name: 'epithet',
  domain: 'collection'
};
var definitions = {
  name: 'definition',
  domain: 'bonusLayout'
};
var family = {
  name: 'family',
  domain: 'collection'
};
var familyStrips = {
  name: 'family-strips',
  domain: 'collection'
};
var taxon = {
  name: 'taxon-card',
  domain: 'collection'
};
var nonTaxon = {
  name: 'non-taxon-card',
  domain: 'collection'
};
var nonTaxonSpecimenTiles = {
  name: 'non-taxon-specimen-tiles',
  domain: 'collection'
};
var cultivarCard = {
  name: 'cultivar-card',
  domain: 'collection'
};
var cultivar = {
  name: 'cultivar-match',
  domain: 'collection'
};
var specimenCommonMatch = {
  name: 'visual-match',
  domain: 'collection',
  type: 'vernacular'
};
var specimenLatinMatch = {
  name: 'visual-match',
  domain: 'collection',
  type: 'binomial'
};
var traitProperty = {
  name: 'trait-property',
  domain: 'bonusLayout'
};
var lookalikeProperty = {
  name: 'lookalike-property',
  domain: 'bonusLayout'
};
var symbioticProperty = {
  name: 'symbiotic-property',
  domain: 'collection'
};
var mixedSpecimensLeft = {
  name: 'mixed-specimen-images',
  domain: 'collection'
};
var mixedSpecimensRight = {
  name: 'mixed-specimen-question',
  domain: 'collection'
};
var mixedTraitLeft = {
  name: 'mixed-trait-images',
  domain: 'collection'
};
var mixedTraitRight = {
  name: 'mixed-trait-question',
  domain: 'collection'
};
var providerHorizontalStripQuestions = {
  name: 'provider-horizontal-strip-questions',
  domain: 'collection'
};
var speciesIdentification = {
  name: 'species-identification',
  domain: 'collection',
  taxon: 'name'
};
var panels = {
  specimenImages: specimenImages,
  history: history,
  speciesCard: speciesCard,
  definitionCard: definitionCard,
  scientifics: scientifics,
  vernaculars: vernaculars,
  text: text,
  summary: summary,
  leaf: leaf,
  leafName: leafName,
  epithets: epithets,
  definitions: definitions,
  family: family,
  familyStrips: familyStrips,
  taxon: taxon,
  nonTaxon: nonTaxon,
  nonTaxonSpecimenTiles: nonTaxonSpecimenTiles,
  textComplete: textComplete,
  cultivarCard: cultivarCard,
  cultivar: cultivar,
  specimenCommonMatch: specimenCommonMatch,
  specimenLatinMatch: specimenLatinMatch,
  traitProperty: traitProperty,
  lookalikeProperty: lookalikeProperty,
  symbioticProperty: symbioticProperty,
  mixedSpecimenQuestions: mixedSpecimenQuestions,
  mixedSpecimensLeft: mixedSpecimensLeft,
  mixedSpecimensRight: mixedSpecimensRight,
  birdsong: birdsong,
  mediaPlayers: mediaPlayers,
  traitImages: traitImages,
  mixedTraitLeft: mixedTraitLeft,
  mixedTraitRight: mixedTraitRight,
  providerHorizontalStripQuestions: providerHorizontalStripQuestions,
  speciesIdentification: speciesIdentification
};

/***/ }),

/***/ "eqeR":
/*!*********************************************************!*\
  !*** ./src/snapdragon-config/snapdragon-iconic-taxa.js ***!
  \*********************************************************/
/*! namespace exports */
/*! export iconicTaxa [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "iconicTaxa": () => /* binding */ iconicTaxa
/* harmony export */ });
var all = [{
  id: 'fungi',
  common: 'Fungi & Lichens'
}, {
  id: 'amphibia',
  common: 'Amphibians'
}, {
  id: 'mammalia',
  common: 'Mammals'
}, {
  id: 'plantae',
  common: 'Plants'
}, {
  id: 'lepidoptera',
  common: 'Butterflies & Moths'
}, {
  id: 'insecta',
  common: 'Insects'
}, {
  id: 'aves',
  common: 'Birds'
}, {
  id: 'reptilia',
  common: 'Reptiles'
}];
var iconicTaxa = {
  all: all
};

/***/ }),

/***/ "ZNvb":
/*!***********************************************************!*\
  !*** ./src/snapdragon-engine/bonus/bonus-test-handler.js ***!
  \***********************************************************/
/*! namespace exports */
/*! export bonusHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "bonusHandler": () => /* binding */ bonusHandler
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ramda */ "NjoR");
/* harmony import */ var snapdragon_engine_bonus_tests_trait_test__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-engine/bonus/tests/trait-test */ "f5/7");
/* harmony import */ var snapdragon_engine_bonus_tests_birdsong_test__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! snapdragon-engine/bonus/tests/birdsong-test */ "qrNU");
/* harmony import */ var snapdragon_engine_bonus_tests_lookalike_test__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapdragon-engine/bonus/tests/lookalike-test */ "Ejun");
/* harmony import */ var snapdragon_engine_bonus_tests_definition_test__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! snapdragon-engine/bonus/tests/definition-test */ "yPI4");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}







var getTests = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(collection, itemIndices, bonusLayouts, lessonName, levelName) {
    var itemsInThisRound, addLayoutToTest, getTraitTypeTests, getTraitTypeBirdsongTests, getTraitTypeLookalikeTests, getDefinitionTypeTests, traitTests, birdsongTests, lookalikeTests, definitionTests, layout, getResolvedPromises;
    return regeneratorRuntime.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            itemsInThisRound = collection.items.map(function (item, index) {
              if ((0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(index, itemIndices)) {
                return _objectSpread(_objectSpread({}, item), {}, {
                  itemIndex: index
                });
              } else return null;
            }).filter(function (item) {
              return item;
            });

            addLayoutToTest = function addLayoutToTest(traitTests) {
              var lessonReadyTests = traitTests.map(function (traitTest) {
                traitTest.itemIndex = traitTest.item ? traitTest.item.itemIndex : 0;
                traitTest = _objectSpread(_objectSpread(_objectSpread({}, traitTest), layout), {}, {
                  lessonName: lessonName,
                  levelName: levelName
                });
                return traitTest;
              });
              return lessonReadyTests;
            };

            getTraitTypeTests = function getTraitTypeTests(itemsInThisRound) {
              return new Promise(function (resolve) {
                return resolve((0,snapdragon_engine_bonus_tests_trait_test__WEBPACK_IMPORTED_MODULE_0__.getTraitTests)(itemsInThisRound));
              });
            };

            getTraitTypeBirdsongTests = function getTraitTypeBirdsongTests(itemsInThisRound, collection) {
              return new Promise(function (resolve) {
                return resolve((0,snapdragon_engine_bonus_tests_birdsong_test__WEBPACK_IMPORTED_MODULE_1__.getBirdsongTests)(itemsInThisRound, collection));
              });
            };

            getTraitTypeLookalikeTests = function getTraitTypeLookalikeTests(itemsInThisRound) {
              return (0,snapdragon_engine_bonus_tests_lookalike_test__WEBPACK_IMPORTED_MODULE_2__.getLookalikeTests)(itemsInThisRound);
            };

            getDefinitionTypeTests = function getDefinitionTypeTests(itemsInThisRound) {
              return (0,snapdragon_engine_bonus_tests_definition_test__WEBPACK_IMPORTED_MODULE_3__.getDefinitionTests)(itemsInThisRound);
            };

            traitTests = [], birdsongTests = [], lookalikeTests = [], definitionTests = [];
            layout = bonusLayouts.find(function (layout) {
              return layout.name === "trait-property-match";
            });

            if (!layout) {
              _context3.next = 20;
              break;
            }

            if (!layout.types) {
              _context3.next = 16;
              break;
            }

            getResolvedPromises = /*#__PURE__*/function () {
              var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
                var promises, testGroups, tests;
                return regeneratorRuntime.wrap(function _callee2$(_context2) {
                  while (1) {
                    switch (_context2.prev = _context2.next) {
                      case 0:
                        _context2.next = 2;
                        return layout.types.map( /*#__PURE__*/function () {
                          var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(type) {
                            return regeneratorRuntime.wrap(function _callee$(_context) {
                              while (1) {
                                switch (_context.prev = _context.next) {
                                  case 0:
                                    _context.t0 = type;
                                    _context.next = _context.t0 === 'traits' ? 3 : _context.t0 === 'song' ? 4 : _context.t0 === 'lookalikes' ? 5 : _context.t0 === 'definition' ? 6 : 7;
                                    break;

                                  case 3:
                                    return _context.abrupt("return", getTraitTypeTests(itemsInThisRound));

                                  case 4:
                                    return _context.abrupt("return", getTraitTypeBirdsongTests(itemsInThisRound, collection));

                                  case 5:
                                    return _context.abrupt("return", getTraitTypeLookalikeTests(itemsInThisRound));

                                  case 6:
                                    return _context.abrupt("return", getDefinitionTypeTests(itemsInThisRound));

                                  case 7:
                                  case "end":
                                    return _context.stop();
                                }
                              }
                            }, _callee, this);
                          }));

                          return function (_x6) {
                            return _ref3.apply(this, arguments);
                          };
                        }());

                      case 2:
                        promises = _context2.sent;
                        _context2.next = 5;
                        return Promise.all(promises);

                      case 5:
                        testGroups = _context2.sent;
                        tests = testGroups.map(function (group) {
                          group = group.filter(function (g) {
                            return g.question;
                          });
                          return addLayoutToTest(group);
                        });
                        return _context2.abrupt("return", tests);

                      case 8:
                      case "end":
                        return _context2.stop();
                    }
                  }
                }, _callee2, this);
              }));

              return function getResolvedPromises() {
                return _ref2.apply(this, arguments);
              };
            }();

            _context3.next = 13;
            return getResolvedPromises();

          case 13:
            traitTests = _context3.sent;
            _context3.next = 20;
            break;

          case 16:
            traitTests = getTraitTypeTests(itemsInThisRound);
            birdsongTests = getTraitTypeBirdsongTests(itemsInThisRound, collection);
            lookalikeTests = getTraitTypeLookalikeTests(itemsInThisRound);
            definitionTests = getDefinitionTypeTests(itemsInThisRound);

          case 20:
            return _context3.abrupt("return", (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(traitTests));

          case 21:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3, this);
  }));

  return function getTests(_x, _x2, _x3, _x4, _x5) {
    return _ref.apply(this, arguments);
  };
}();

var bonusHandler = {
  getTests: getTests
};

/***/ }),

/***/ "qrNU":
/*!************************************************************!*\
  !*** ./src/snapdragon-engine/bonus/tests/birdsong-test.js ***!
  \************************************************************/
/*! namespace exports */
/*! export getBirdsongTests [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getBirdsongTests": () => /* binding */ getBirdsongTests
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}



var getBirdsongTests = function getBirdsongTests(itemsInThisRound, collection) {
  if (itemsInThisRound === undefined) return [];
  var tests = itemsInThisRound.map(function (item) {
    if (item.taxonomy["class"] && item.taxonomy["class"].toLowerCase() !== 'aves') return [];

    var _getBirdsongTest = getBirdsongTest(item, itemsInThisRound, collection),
        question = _getBirdsongTest.question,
        answers = _getBirdsongTest.answers,
        overrides = _getBirdsongTest.overrides;

    if (!question) return {};
    return {
      item: item,
      question: question,
      answers: answers,
      overrides: overrides
    };
  });
  return tests;
};

var getBirdsongTest = function getBirdsongTest(item, itemsInThisRound, collection) {
  if (!item.traits || Object.keys(item.traits).length === 0) return;
  var name = 'song';

  var birdsong = _objectSpread({
    name: name
  }, item.traits[name]); // require other birds, which may not be in this collection…


  var birds = (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(3, collection.items.filter(function (bird) {
    return bird.name.toLowerCase() !== item.name.toLowerCase();
  }));
  birds.push(item);
  var birdNames = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(birds.map(function (bird) {
    return bird.name;
  }));
  var question = item.name;
  var answers = birdNames;
  var overrides = {
    question: 'Match the birdsong',
    vernacularName: 'Common name',
    binomial: 'Latin name',
    trait: birdsong
  };
  return {
    question: question,
    answers: answers,
    overrides: overrides
  };
};

/***/ }),

/***/ "yPI4":
/*!**************************************************************!*\
  !*** ./src/snapdragon-engine/bonus/tests/definition-test.js ***!
  \**************************************************************/
/*! namespace exports */
/*! export getDefinitionTests [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getDefinitionTests": () => /* binding */ getDefinitionTests
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/snapdragon/iconic-taxa */ "Bv5j");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}





var getDefinitionTests = function getDefinitionTests(itemsInThisRound) {
  if (itemsInThisRound === undefined) return [];
  var tests = itemsInThisRound.map(function (item) {
    return getDefinitionTest(item);
  });
  return tests;
};

var getDefinitionTest = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item) {
    var _store$getState, config, collection, glossary, number, taxon, definitions, term, definition, alternatives, question, answers, help;

    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(), config = _store$getState.config, collection = _store$getState.collection, glossary = _store$getState.glossary;
            number = config.isPortraitMode ? 4 : 4;
            taxon = (0,api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_2__.matchTaxon)(item.taxonomy, api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_2__.iconicTaxa).value;
            definitions = glossary.filter(function (definition) {
              return (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(definition.taxon, [taxon, 'common']);
            });
            definitions = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(definitions);
            term = item.terms ? utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(item.terms)[0] : item.genus ? item.genus.terms ? item.genus.terms[collection.itemIndex] ? item.genus.terms[collection.itemIndex] : item.family ? item.family.terms ? utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(item.family.terms)[0] : null : null : null : null;
            definition = !!term ? definitions.find(function (definition) {
              return definition.term.toLowerCase() === term.toLowerCase();
            }) : definitions[0];
            alternatives = (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(number - 1, (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(number, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(definitions)).filter(function (d) {
              return d.term.toLowerCase() !== definition.term.toLowerCase();
            })).map(function (d) {
              return utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.capitaliseFirst(d.definition);
            });
            question = definition.definition;
            answers = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([question].concat(_toConsumableArray(alternatives)));
            help = config.isLandscapeMode ? 'Select the correct answer' : 'Select correct answer';
            return _context.abrupt("return", {
              question: question,
              answers: answers,
              overrides: {
                question: definition.term,
                help: help,
                binomial: item.name,
                vernacularName: item.vernacularName
              }
            });

          case 12:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function getDefinitionTest(_x) {
    return _ref.apply(this, arguments);
  };
}();

/***/ }),

/***/ "Ejun":
/*!*************************************************************!*\
  !*** ./src/snapdragon-engine/bonus/tests/lookalike-test.js ***!
  \*************************************************************/
/*! namespace exports */
/*! export getItemLookalikes [provided] [unused] [could be renamed] */
/*! export getLookalikeTests [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getLookalikeTests": () => /* binding */ getLookalikeTests
/* harmony export */ });
/* unused harmony export getItemLookalikes */
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}


var getLookalikeTests = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(itemsInThisRound) {
    var init, tests;
    return regeneratorRuntime.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            init = /*#__PURE__*/function () {
              var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
                return regeneratorRuntime.wrap(function _callee2$(_context2) {
                  while (1) {
                    switch (_context2.prev = _context2.next) {
                      case 0:
                        if (!(itemsInThisRound === undefined)) {
                          _context2.next = 2;
                          break;
                        }

                        return _context2.abrupt("return", new Promise(function (resolve) {
                          return resolve([]);
                        }));

                      case 2:
                        return _context2.abrupt("return", Promise.all(itemsInThisRound.map( /*#__PURE__*/function () {
                          var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item) {
                            var _yield$getLookalikeTe, question, answers, overrides;

                            return regeneratorRuntime.wrap(function _callee$(_context) {
                              while (1) {
                                switch (_context.prev = _context.next) {
                                  case 0:
                                    _context.next = 2;
                                    return getLookalikeTest(item);

                                  case 2:
                                    _yield$getLookalikeTe = _context.sent;
                                    question = _yield$getLookalikeTe.question;
                                    answers = _yield$getLookalikeTe.answers;
                                    overrides = _yield$getLookalikeTe.overrides;

                                    if (question) {
                                      _context.next = 8;
                                      break;
                                    }

                                    return _context.abrupt("return", new Promise(function (resolve) {
                                      return resolve({});
                                    }));

                                  case 8:
                                    return _context.abrupt("return", {
                                      item: item,
                                      question: question,
                                      answers: answers,
                                      overrides: overrides
                                    });

                                  case 9:
                                  case "end":
                                    return _context.stop();
                                }
                              }
                            }, _callee, this);
                          }));

                          return function (_x2) {
                            return _ref3.apply(this, arguments);
                          };
                        }())));

                      case 3:
                      case "end":
                        return _context2.stop();
                    }
                  }
                }, _callee2, this);
              }));

              return function init() {
                return _ref2.apply(this, arguments);
              };
            }();

            _context3.next = 3;
            return init();

          case 3:
            tests = _context3.sent;
            return _context3.abrupt("return", tests);

          case 5:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3, this);
  }));

  return function getLookalikeTests(_x) {
    return _ref.apply(this, arguments);
  };
}();
var getItemLookalikes = /*#__PURE__*/function () {
  var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(item) {
    var lookaliketraits, lookalikes, getLookalikes;
    return regeneratorRuntime.wrap(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            if (!(!item.traits || Object.keys(item.traits).length === 0)) {
              _context6.next = 2;
              break;
            }

            return _context6.abrupt("return", {});

          case 2:
            lookaliketraits = item.traits['lookalikes'];

            if (lookaliketraits) {
              _context6.next = 5;
              break;
            }

            return _context6.abrupt("return", new Promise(function (resolve) {
              return resolve([]);
            }));

          case 5:
            lookalikes = lookaliketraits.map(function (trait) {
              return trait.lookalike.name;
            });

            if (!(lookalikes.length === 0)) {
              _context6.next = 8;
              break;
            }

            return _context6.abrupt("return", {});

          case 8:
            // check current collection first?
            getLookalikes = /*#__PURE__*/function () {
              var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
                return regeneratorRuntime.wrap(function _callee5$(_context5) {
                  while (1) {
                    switch (_context5.prev = _context5.next) {
                      case 0:
                        return _context5.abrupt("return", Promise.all(lookalikes.map( /*#__PURE__*/function () {
                          var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(name) {
                            return regeneratorRuntime.wrap(function _callee4$(_context4) {
                              while (1) {
                                switch (_context4.prev = _context4.next) {
                                  case 0:
                                    _context4.next = 2;
                                    return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.firestore.getSpeciesByName(name);

                                  case 2:
                                    return _context4.abrupt("return", _context4.sent);

                                  case 3:
                                  case "end":
                                    return _context4.stop();
                                }
                              }
                            }, _callee4, this);
                          }));

                          return function (_x4) {
                            return _ref6.apply(this, arguments);
                          };
                        }())));

                      case 1:
                      case "end":
                        return _context5.stop();
                    }
                  }
                }, _callee5, this);
              }));

              return function getLookalikes() {
                return _ref5.apply(this, arguments);
              };
            }();

            _context6.next = 11;
            return getLookalikes();

          case 11:
            lookalikes = _context6.sent;
            lookalikes = lookalikes.filter(function (lookalike) {
              return lookalike;
            });
            return _context6.abrupt("return", lookalikes);

          case 14:
          case "end":
            return _context6.stop();
        }
      }
    }, _callee6, this);
  }));

  return function getItemLookalikes(_x3) {
    return _ref4.apply(this, arguments);
  };
}();

var getLookalikeTest = function getLookalikeTest(item) {
  var init = /*#__PURE__*/function () {
    var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {
      var lookalikes, question, answers;
      return regeneratorRuntime.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              _context7.next = 2;
              return getItemLookalikes(item);

            case 2:
              lookalikes = _context7.sent;
              question = lookalikes.length > 0 ? item.name : null;
              answers = [question].concat(_toConsumableArray(lookalikes.map(function (item) {
                return item.name;
              })));
              return _context7.abrupt("return", {
                question: question,
                answers: answers,
                overrides: {
                  question: 'Avoid look-alikes',
                  help: '(Pick one correct image)',
                  binomial: 'Latin name',
                  vernacularName: 'Common name',
                  trait: {
                    name: 'lookalikes',
                    lookalikes: lookalikes
                  }
                }
              });

            case 6:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, this);
    }));

    return function init() {
      return _ref7.apply(this, arguments);
    };
  }();

  return init();
};

/***/ }),

/***/ "f5/7":
/*!*********************************************************!*\
  !*** ./src/snapdragon-engine/bonus/tests/trait-test.js ***!
  \*********************************************************/
/*! namespace exports */
/*! export getTraitTests [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTraitTests": () => /* binding */ getTraitTests
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var api_traits_traits_for_tests__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/traits/traits-for-tests */ "90q+");


var getTraitTests = function getTraitTests(itemsInThisRound) {
  if (itemsInThisRound === undefined) return [];
  var tests = itemsInThisRound.map(function (item) {
    var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
        units = _store$getState.units;

    var _getTraitsForTests = (0,api_traits_traits_for_tests__WEBPACK_IMPORTED_MODULE_1__.getTraitsForTests)(units, item),
        question = _getTraitsForTests.question,
        answers = _getTraitsForTests.answers,
        overrides = _getTraitsForTests.overrides;

    if (!question) return {};
    return {
      item: item,
      question: question,
      answers: answers,
      overrides: overrides
    };
  });
  return tests;
};

/***/ }),

/***/ "dkL9":
/*!******************************************************!*\
  !*** ./src/snapdragon-engine/lesson-plan-handler.js ***!
  \******************************************************/
/*! namespace exports */
/*! export getNextRoundLayouts [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getNextRoundLayouts": () => /* binding */ getNextRoundLayouts
/* harmony export */ });
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

var getNextRoundLayouts = function getNextRoundLayouts(lessonPlan, config, lesson) {
  // All layouts are currently activated because the lesson edit function is not in use.
  lesson.activeLevelCount = lessonPlan.levels.filter(function (level) {
    return level.layouts.length > 0;
  }).length;

  var getCurrentLevelFromLessonPlan = function getCurrentLevelFromLessonPlan(lessonPlan, levelId) {
    return lessonPlan.levels.find(function (level) {
      return level.id === levelId;
    });
  };

  var getLayouts = function getLayouts(currentLevel, mode) {
    switch (mode) {
      case 'learn':
        currentLevel.bonusLayouts = currentLevel.bonusLayouts || [];
        return [].concat(_toConsumableArray(currentLevel.layouts.filter(function (l) {
          return l;
        })), _toConsumableArray(currentLevel.bonusLayouts));

      case 'review':
        return currentLevel.reviewLayouts || [];

      default:
        return currentLevel.layouts;
    }
  };

  var goToNextLevelThatHasLayouts = function goToNextLevelThatHasLayouts(lessonPlan, levelId) {
    var layouts = [],
        lessonName = '',
        levelName = '';

    var iterateOverLevelsCheckingForAvailableLayouts = function iterateOverLevelsCheckingForAvailableLayouts(intialValue, levelId) {
      var increment = intialValue;
      if (layouts.length > 0) return;
      var level = lessonPlan.levels.find(function (level) {
        return level.id === levelId + increment;
      });
      if (!level) return;
      lesson.level = level;
      lesson.level = level;
      lessonName = lesson.name;
      levelName = lesson.level.name; // sometimes returns null (when at final level, looking for next?)

      layouts = getLayouts(getCurrentLevelFromLessonPlan(lessonPlan, levelId + increment), config.mode);
      increment++;
      iterateOverLevelsCheckingForAvailableLayouts(increment, levelId);
    };

    iterateOverLevelsCheckingForAvailableLayouts(0, levelId);
    return {
      lessonName: lessonName,
      levelName: levelName,
      layouts: layouts
    };
  };

  var levelId = lesson.level.id;

  if (lesson.isLevelComplete) {
    levelId++;
    lesson.level = lessonPlan.levels.find(function (level) {
      return level.id === levelId;
    });
  }

  var _goToNextLevelThatHas = goToNextLevelThatHasLayouts(lessonPlan, levelId),
      layouts = _goToNextLevelThatHas.layouts;

  return layouts;
};

/***/ }),

/***/ "8r1n":
/*!*************************************************!*\
  !*** ./src/snapdragon-engine/lesson-planner.js ***!
  \*************************************************/
/*! namespace exports */
/*! export lessonPlanner [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "lessonPlanner": () => /* binding */ lessonPlanner
/* harmony export */ });
/* harmony import */ var snapdragon_engine_round_planner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapdragon-engine/round-planner */ "ghWu");
/* harmony import */ var snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! snapdragon-config/screen-layouts */ "N8LD");
/* harmony import */ var snapdragon_engine_lesson_plan_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapdragon-engine/lesson-plan-handler */ "dkL9");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}




var summary = snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_1__.layouts.summary,
    history = snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_1__.layouts.history;

var createLessonPlan = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(lessonPlan, config, collection, lesson) {
    var rounds, nextRoundLayoutTemplates;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            lesson.moduleSize = lesson.moduleSize || collection.moduleSize || config.moduleSize;
            lesson.currentRound = lesson.currentRound || 1;
            rounds = collection.items.length / lesson.moduleSize;
            rounds = collection.items.length % lesson.moduleSize === 0 ? rounds : rounds === 1 ? 1 : Math.floor(rounds) + 1;
            lesson = lesson.level === undefined ? _objectSpread(_objectSpread(_objectSpread({}, lesson), lessonPlan), {}, {
              level: {
                id: 1
              },
              rounds: rounds
            }) : lesson;
            nextRoundLayoutTemplates = (0,snapdragon_engine_lesson_plan_handler__WEBPACK_IMPORTED_MODULE_2__.getNextRoundLayouts)(lessonPlan, config, lesson);

            if (!(lesson.level === undefined)) {
              _context.next = 8;
              break;
            }

            return _context.abrupt("return", new Promise(function (resolve) {
              return resolve(null);
            }));

          case 8:
            _context.next = 10;
            return (0,snapdragon_engine_round_planner__WEBPACK_IMPORTED_MODULE_0__.createNextRound)(lessonPlan, nextRoundLayoutTemplates, [summary, history], collection, lesson);

          case 10:
            return _context.abrupt("return", _context.sent);

          case 11:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function createLessonPlan(_x, _x2, _x3, _x4) {
    return _ref.apply(this, arguments);
  };
}();

var lessonPlanner = {
  createLessonPlan: createLessonPlan
};

/***/ }),

/***/ "Yh+2":
/*!***********************************************!*\
  !*** ./src/snapdragon-engine/pool-handler.js ***!
  \***********************************************/
/*! namespace exports */
/*! export getPoolItems [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getPoolItems": () => /* binding */ getPoolItems
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/snapdragon/iconic-taxa */ "Bv5j");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}





var getPoolItems = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(collection) {
    var poolSize,
        item,
        otherItems,
        rank,
        taxonicMatches,
        isLichen,
        speciesPool,
        isException,
        items,
        _args = arguments;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            poolSize = _args.length > 1 && _args[1] !== undefined ? _args[1] : 5;
            _context.prev = 1;
            item = collection.nextItem;

            if (!(collection.behaviour === 'static')) {
              _context.next = 7;
              break;
            }

            otherItems = collection.items.filter(function (i) {
              return i.name !== item.name;
            });

            if (!(otherItems && otherItems.length > 0)) {
              _context.next = 7;
              break;
            }

            return _context.abrupt("return", getItemsFromCollection(otherItems, item, poolSize));

          case 7:
            rank = (0,api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_1__.findRankByIconicTaxon)(item.taxonomy, item.iconicTaxon);
            _context.next = 10;
            return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.firestore.getSpeciesByIconicTaxon(item);

          case 10:
            taxonicMatches = _context.sent;

            if (item.iconicTaxon.toLowerCase() === 'fungi') {
              isLichen = item.lichen;
              taxonicMatches = isLichen ? taxonicMatches.filter(function (item) {
                return item.lichen;
              }) : taxonicMatches.filter(function (item) {
                return !item.lichen;
              });
            }

            speciesPool = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(taxonicMatches.filter(function (ci) {
              return ci.name.toLowerCase() !== item.name.toLowerCase();
            })); // temporary exceptions because there are so few (6 and 3) members of these taxa

            isException = item.iconicTaxon.toLowerCase() === 'reptilia' || item.iconicTaxon.toLowerCase() === 'amphibia';

            if (speciesPool) {
              _context.next = 18;
              break;
            }

            getPoolItems(collection);
            _context.next = 27;
            break;

          case 18:
            if (!(speciesPool.length < poolSize && !isException)) {
              _context.next = 22;
              break;
            }

            getPoolItems(collection);
            _context.next = 27;
            break;

          case 22:
            items = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(poolSize, speciesPool);
            items.push(item);
            _context.next = 26;
            return items;

          case 26:
            return _context.abrupt("return", _context.sent);

          case 27:
            _context.next = 32;
            break;

          case 29:
            _context.prev = 29;
            _context.t0 = _context["catch"](1);
            logError('renderMixedSpecimenImagesAndQuestion init', _context.t0);

          case 32:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this, [[1, 29]]);
  }));

  return function getPoolItems(_x) {
    return _ref.apply(this, arguments);
  };
}();

var getItemsFromCollection = function getItemsFromCollection(otherItems, item, poolSize) {
  var items = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(poolSize, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(otherItems));
  return utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([].concat(_toConsumableArray(items), [item]));
};

/***/ }),

/***/ "t50I":
/*!*****************************************************************!*\
  !*** ./src/snapdragon-engine/provider/provider-test-handler.js ***!
  \*****************************************************************/
/*! namespace exports */
/*! export providerHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "providerHandler": () => /* binding */ providerHandler
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}




var getItemLayouts = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(itemQuestions) {
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (itemQuestions.questionIds) {
              _context.next = 2;
              break;
            }

            return _context.abrupt("return", new Promise(function (resolve) {
              return resolve(null);
            }));

          case 2:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function getItemLayouts(_x) {
    return _ref.apply(this, arguments);
  };
}();

var getLayouts = /*#__PURE__*/function () {
  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(collection, roundItemNames) {
    var species, speciesQuestions, itemsQuestions, promises;
    return regeneratorRuntime.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            if (!collection.species) {
              _context3.next = 16;
              break;
            }

            species = collection.species.filter(function (sp) {
              return (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(sp.name, roundItemNames);
            });
            speciesQuestions = species.filter(function (sp) {
              return sp.questions;
            });

            if (!(speciesQuestions.length > 0)) {
              _context3.next = 5;
              break;
            }

            return _context3.abrupt("return", Promise.all(speciesQuestions.map(function (sq) {
              return sq.questions;
            })));

          case 5:
            itemsQuestions = collection.items.filter(function (i) {
              return (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(i.name, roundItemNames);
            }).map(function (i) {
              return {
                name: i.name,
                questionIds: i.questionIds
              };
            });

            if (!itemsQuestions) {
              _context3.next = 13;
              break;
            }

            promises = itemsQuestions.map( /*#__PURE__*/function () {
              var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(itemQuestions) {
                return regeneratorRuntime.wrap(function _callee2$(_context2) {
                  while (1) {
                    switch (_context2.prev = _context2.next) {
                      case 0:
                        if (!itemQuestions.questionIds) {
                          _context2.next = 4;
                          break;
                        }

                        _context2.next = 3;
                        return getItemLayouts(itemQuestions);

                      case 3:
                        return _context2.abrupt("return", _context2.sent);

                      case 4:
                      case "end":
                        return _context2.stop();
                    }
                  }
                }, _callee2, this);
              }));

              return function (_x4) {
                return _ref3.apply(this, arguments);
              };
            }());
            _context3.next = 10;
            return Promise.all(promises);

          case 10:
            return _context3.abrupt("return", _context3.sent);

          case 13:
            return _context3.abrupt("return", new Promise(function (resolve) {
              return resolve(null);
            }));

          case 14:
            _context3.next = 17;
            break;

          case 16:
            return _context3.abrupt("return", []);

          case 17:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3, this);
  }));

  return function getLayouts(_x2, _x3) {
    return _ref2.apply(this, arguments);
  };
}();

var providerHandler = {
  getLayouts: getLayouts
};

/***/ }),

/***/ "uopz":
/*!*****************************************************!*\
  !*** ./src/snapdragon-engine/round-plan-handler.js ***!
  \*****************************************************/
/*! namespace exports */
/*! export roundHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "roundHandler": () => /* binding */ roundHandler
/* harmony export */ });
var getRoundItems = function getRoundItems(currentRound, moduleSize, items) {
  var start = (currentRound - 1) * moduleSize;
  var end = start + moduleSize;
  return items.slice(start, end);
};

var roundHandler = {
  getRoundItems: getRoundItems
};

/***/ }),

/***/ "ghWu":
/*!************************************************!*\
  !*** ./src/snapdragon-engine/round-planner.js ***!
  \************************************************/
/*! namespace exports */
/*! export createNextRound [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createNextRound": () => /* binding */ createNextRound
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ramda */ "NjoR");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var snapdragon_engine_round_plan_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapdragon-engine/round-plan-handler */ "uopz");
/* harmony import */ var snapdragon_engine_bonus_bonus_test_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! snapdragon-engine/bonus/bonus-test-handler */ "ZNvb");
/* harmony import */ var snapdragon_engine_provider_provider_test_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! snapdragon-engine/provider/provider-test-handler */ "t50I");
/* harmony import */ var ui_screens_multichoice_landscape_mixed_trait_mixed_trait_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler */ "fZTv");
/* harmony import */ var snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! snapdragon-config/screen-layouts */ "N8LD");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}









var createNextRound = function createNextRound(lessonPlan, nextRoundLayoutTemplates, progressScreens, collection, lesson) {
  var init = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
      var moduleSize, lessonName, levelName, itemsCountToDate, itemsLeft, layoutsToAdd, roundItemNames, providerQuestions, providerLayouts, bonusLayouts, lessonLayouts, itemIndices, bonusTests, summaryLayout, scores, roundScoreCount;
      return regeneratorRuntime.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              lessonPlan.layouts = [];
              moduleSize = lesson.moduleSize;
              lessonName = lesson.name;
              levelName = lesson.level.name;
              itemsCountToDate = (lesson.currentRound - 1) * moduleSize;
              itemsLeft = collection.items.length - itemsCountToDate;
              layoutsToAdd = moduleSize > itemsLeft ? itemsLeft : moduleSize;
              roundItemNames = snapdragon_engine_round_plan_handler__WEBPACK_IMPORTED_MODULE_2__.roundHandler.getRoundItems(lesson.currentRound, moduleSize, collection.items.map(function (i) {
                return i.name;
              }));
              nextRoundLayoutTemplates.forEach( /*#__PURE__*/function () {
                var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(layout, index) {
                  var itemIndex, _ret;

                  return regeneratorRuntime.wrap(function _callee2$(_context2) {
                    while (1) {
                      switch (_context2.prev = _context2.next) {
                        case 0:
                          itemIndex = 0;

                        case 1:
                          if (!(layout.name === 'mixed-trait-images')) {
                            _context2.next = 8;
                            break;
                          }

                          return _context2.delegateYield( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
                            var item, _mixedTraitHandler$ge, requiredTraitValues, trait, _yield$mixedTraitHand, traits, requiredTraits, traitsToIgnore, addLayout;

                            return regeneratorRuntime.wrap(function _callee$(_context) {
                              while (1) {
                                switch (_context.prev = _context.next) {
                                  case 0:
                                    item = collection.items.find(function (i) {
                                      return i.name === roundItemNames[itemIndex];
                                    });
                                    _mixedTraitHandler$ge = ui_screens_multichoice_landscape_mixed_trait_mixed_trait_handler__WEBPACK_IMPORTED_MODULE_5__.mixedTraitHandler.getMatchingTrait(utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.shuffleArray(layout.screens[1].traits), item.traits), requiredTraitValues = _mixedTraitHandler$ge.requiredTraitValues, trait = _mixedTraitHandler$ge.trait;

                                    if (trait) {
                                      _context.next = 4;
                                      break;
                                    }

                                    return _context.abrupt("return", {
                                      v: void 0
                                    });

                                  case 4:
                                    _context.next = 6;
                                    return ui_screens_multichoice_landscape_mixed_trait_mixed_trait_handler__WEBPACK_IMPORTED_MODULE_5__.mixedTraitHandler.fetchTraits(trait, requiredTraitValues, collection.glossary);

                                  case 6:
                                    _yield$mixedTraitHand = _context.sent;
                                    traits = _yield$mixedTraitHand.traits;
                                    requiredTraits = _yield$mixedTraitHand.requiredTraits;

                                    if (!(!requiredTraits || !traits)) {
                                      _context.next = 11;
                                      break;
                                    }

                                    return _context.abrupt("return", {
                                      v: void 0
                                    });

                                  case 11:
                                    layout.trait = trait;
                                    layout.traits = traits;
                                    layout.requiredTraits = requiredTraits;
                                    traitsToIgnore = ['n/a', 'none'];
                                    addLayout = !!requiredTraits.find(function (t) {
                                      return !(0,ramda__WEBPACK_IMPORTED_MODULE_7__.default)(t.term.toLowerCase(), traitsToIgnore);
                                    });

                                    if (addLayout) {
                                      lessonPlan.layouts.push(_objectSpread(_objectSpread({}, layout), {}, {
                                        lessonName: lessonName,
                                        levelName: levelName,
                                        speciesName: roundItemNames[itemIndex]
                                      }));
                                    }

                                  case 17:
                                  case "end":
                                    return _context.stop();
                                }
                              }
                            }, _callee, this);
                          })(), "t0", 3);

                        case 3:
                          _ret = _context2.t0;

                          if (!(_typeof(_ret) === "object")) {
                            _context2.next = 6;
                            break;
                          }

                          return _context2.abrupt("return", _ret.v);

                        case 6:
                          _context2.next = 9;
                          break;

                        case 8:
                          lessonPlan.layouts.push(_objectSpread(_objectSpread({}, layout), {}, {
                            lessonName: lessonName,
                            levelName: levelName,
                            speciesName: roundItemNames[itemIndex]
                          }));

                        case 9:
                          itemIndex++;

                        case 10:
                          if (itemIndex < layoutsToAdd) {
                            _context2.next = 1;
                            break;
                          }

                        case 11:
                        case "end":
                          return _context2.stop();
                      }
                    }
                  }, _callee2, this);
                }));

                return function (_x, _x2) {
                  return _ref2.apply(this, arguments);
                };
              }());

              if (!(lesson.level.id === 1)) {
                _context3.next = 16;
                break;
              }

              _context3.next = 12;
              return snapdragon_engine_provider_provider_test_handler__WEBPACK_IMPORTED_MODULE_4__.providerHandler.getLayouts(collection, roundItemNames);

            case 12:
              providerQuestions = _context3.sent;
              providerQuestions = (0,ramda__WEBPACK_IMPORTED_MODULE_8__.default)(providerQuestions).filter(function (layout) {
                return layout;
              });
              providerLayouts = providerQuestions.map(function (provider) {
                return _objectSpread(_objectSpread({}, snapdragon_config_screen_layouts__WEBPACK_IMPORTED_MODULE_6__.layouts.providerHorizontalStrip), {}, {
                  lessonName: "Lesson 1",
                  levelName: "Level 1",
                  speciesName: provider.name || provider.taxon,
                  provider: provider
                });
              });

              if (providerLayouts) {
                lessonPlan.layouts = [].concat(_toConsumableArray(lessonPlan.layouts), _toConsumableArray(providerLayouts));
              }

            case 16:
              bonusLayouts = lessonPlan.layouts.filter(function (layout) {
                return layout.bonus;
              });
              lessonLayouts = lessonPlan.layouts.filter(function (layout) {
                return !layout.bonus;
              }).map(function (layout, i) {
                layout.itemIndex = layout.itemIndex === undefined ? utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.calcItemIndex(itemsCountToDate, layoutsToAdd, i) : layout.itemIndex;
                return _objectSpread({}, layout);
              });
              itemIndices = _toConsumableArray(new Set(lessonPlan.layouts.map(function (layout) {
                return layout.itemIndex;
              }).filter(function (i) {
                return i !== undefined;
              })));
              lessonPlan.layouts = lessonLayouts;

              if (!(lesson.level.id === 1)) {
                _context3.next = 26;
                break;
              }

              if (!bonusLayouts) {
                _context3.next = 26;
                break;
              }

              _context3.next = 24;
              return snapdragon_engine_bonus_bonus_test_handler__WEBPACK_IMPORTED_MODULE_3__.bonusHandler.getTests(collection, itemIndices, bonusLayouts, lessonName, levelName);

            case 24:
              bonusTests = _context3.sent;
              lessonPlan.layouts = [].concat(_toConsumableArray(lessonPlan.layouts), _toConsumableArray(bonusTests));

            case 26:
              lessonLayouts = lessonPlan.layouts.map(function (layout, i) {
                layout.roundProgressIndex = i + 1;
                return _objectSpread({}, layout);
              });
              summaryLayout = lessonPlan.portrait ? {
                name: 'summary',
                screens: [{
                  name: 'summary',
                  domain: 'history',
                  parent: ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody
                }],
                lessonName: lessonName,
                levelName: levelName,
                layoutIndex: lessonPlan.layouts.length,
                itemIndex: 0
              } : {
                name: 'summary',
                screens: _toConsumableArray(progressScreens),
                lessonName: lessonName,
                levelName: levelName,
                layoutIndex: lessonPlan.layouts.length,
                itemIndex: 0
              }; // lessonPlan.layouts.push(summaryLayout);

              lessonPlan.layouts.push({
                name: 'summary',
                screens: [{
                  name: 'summary',
                  domain: 'history',
                  parent: ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody
                }],
                lessonName: lessonName,
                levelName: levelName,
                layoutIndex: lessonPlan.layouts.length,
                itemIndex: 0
              });
              scores = lessonPlan.layouts.map(function (layout) {
                return layout.score || 0;
              });
              roundScoreCount = scores.reduce(function (accumulator, currentValue) {
                return accumulator + currentValue;
              });
              lessonPlan.layouts.map(function (layout) {
                return layout.roundScoreCount = roundScoreCount;
              });
              lesson.questionCount = lessonPlan.layouts.filter(function (layout) {
                return layout.type === 'test';
              }).length;
              lesson.layoutCount = lessonPlan.layouts.length;
              lesson.layoutNames = lessonPlan.layouts.map(function (layout) {
                return layout.name;
              });
              return _context3.abrupt("return", {
                updatedLessonPlan: lessonPlan,
                updatedCollection: collection,
                updatedLesson: lesson
              });

            case 36:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, this);
    }));

    return function init() {
      return _ref.apply(this, arguments);
    };
  }();

  return init();
};

/***/ }),

/***/ "0xFZ":
/*!*************************************************!*\
  !*** ./src/ui/create-guide-modal/categories.js ***!
  \*************************************************/
/*! namespace exports */
/*! export renderCategories [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderCategories": () => /* binding */ renderCategories
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var snapdragon_config_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! snapdragon-config/snapdragon-iconic-taxa */ "eqeR");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_create_guide_modal_categories_template_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/create-guide-modal/categories-template.html */ "/ZXf");
/* harmony import */ var ui_create_guide_modal_categories_template_html__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ui_create_guide_modal_categories_template_html__WEBPACK_IMPORTED_MODULE_3__);





var renderCategories = function renderCategories(modal, createGuide) {
  var config = createGuide.getConfig();
  config.guide.iconicTaxa = config.guide.iconicTaxa || snapdragon_config_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_1__.iconicTaxa.all;
  var filterSelectedClass = 'iconic-taxa-selected';
  var template = document.createElement('template');
  template.innerHTML = (ui_create_guide_modal_categories_template_html__WEBPACK_IMPORTED_MODULE_3___default());
  var parent = modal.querySelector('.js-actions');
  parent.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({}, template.content, parent);
  var icons = parent.querySelectorAll('.js-iconic-taxa-categories > div > div:nth-child(1)');

  if (config.guide.iconicTaxa) {
    icons.forEach(function (icon) {
      var filterId = icon.parentElement.id;

      if ((0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(filterId, config.guide.iconicTaxa.map(function (taxon) {
        return taxon.id;
      }))) {
        icon.classList.add(filterSelectedClass);
      }
    });
  }

  setTimeout(function () {
    var fungiIcon = modal.querySelector('#fungi > div');
    if (!fungiIcon) return;

    if (utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.hasClass(fungiIcon, 'iconic-taxa-selected')) {
      fungiIcon.querySelector('g g').classList.add('svg-icon-selected');
    }
  }, 250);
  config.guide.hasChanged = false;
  icons.forEach(function (category) {
    category.addEventListener('click', function (event) {
      config.guide.hasChanged = true;
      var filter = event.currentTarget;
      var filterId = filter.parentElement.id;
      var commonName = filter.parentElement.innerText;

      if (config.guide.iconicTaxa.find(function (taxon) {
        return taxon.id === filterId;
      })) {
        if (filterId === 'fungi') {
          filter.querySelector('g g').classList.remove('svg-icon-selected');
        }

        if (config.guide.iconicTaxa.length > 1) {
          filter.classList.remove(filterSelectedClass);
          config.guide.iconicTaxa = config.guide.iconicTaxa.filter(function (taxon) {
            return taxon.id !== filterId;
          });
        }
      } else {
        if (filterId === 'fungi') {
          filter.querySelector('g g').classList.add('svg-icon-selected');
        }

        filter.classList.add(filterSelectedClass);
        config.guide.iconicTaxa.push({
          id: filterId,
          common: commonName
        });
      }

      createGuide.setConfig(config);
      createGuide.saveStep('TAXA', config);
    });
  });
  createGuide.saveStep('TAXA');
  document.querySelector('.js-right .js-arrow-wrapper').innerHTML = '<i class="far fa-arrow-alt-circle-right"></i>';
};

/***/ }),

/***/ "4cX6":
/*!********************************************************!*\
  !*** ./src/ui/create-guide-modal/common/save-guide.js ***!
  \********************************************************/
/*! namespace exports */
/*! export saveGuide [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "saveGuide": () => /* binding */ saveGuide
/* harmony export */ });
/* harmony import */ var ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/icon-handler */ "iZK6");

var saveGuide = function saveGuide(config, step) {
  var update = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  var chosen = document.querySelector('.js-chosen span:nth-child(2)');

  var handleSaveEvent = function handleSaveEvent() {
    switch (step) {
      case 'SPECIES':
        break;

      case 'LOCATION':
        var splitLocation = function splitLocation(locationStr) {
          return locationStr;
        };

        if (config.guide.locationType) {
          chosen.innerHTML = config.guide.locationType === 'place' ? config.guide.locationPlace : config.isLandscapeMode ? config.guide.locationLongLat : splitLocation(config.guide.locationLongLat);
        }

        break;

      case 'TAXA':
        chosen.innerHTML = '';
        var icons = '';

        if (config.guide.iconicTaxa.length > 0) {
          config.guide.iconicTaxa.forEach(function (taxon) {
            var icon = (0,ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_0__.returnTaxonIcon)(taxon.id);
            icons += icon;
          });
          chosen.innerHTML = icons;
        } else {
          chosen.innerHTML = 'All species';
        }

        break;

      case 'INAT':
        if (config.guide.inatId.key) {
          chosen.innerHTML = config.guide.inatId.key || '';
        } else {
          chosen.innerHTML = '';
        }

        break;
    }
  };

  return handleSaveEvent;
};

/***/ }),

/***/ "GlMD":
/*!***************************************************************!*\
  !*** ./src/ui/create-guide-modal/common/snapdragon-switch.js ***!
  \***************************************************************/
/*! namespace exports */
/*! export switchHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "switchHandler": () => /* binding */ switchHandler
/* harmony export */ });
var switchHandler = function switchHandler(idSwitch, startingPosition, callback) {
  if (!idSwitch) return;
  var state = {
    position: startingPosition === 'left' ? 'right' : 'left'
  };
  var switchControl = idSwitch.querySelector('div');
  var leftText = idSwitch.parentElement.querySelector('.txt-left');
  var rightText = idSwitch.parentElement.querySelector('.txt-right');

  var switcher = function switcher() {
    switch (state.position) {
      case 'left':
        switchControl.parentElement.classList.add('right');
        switchControl.parentElement.classList.remove('left');
        leftText.classList.remove('selected');
        rightText.classList.add('selected');
        state.position = 'right';
        break;

      case 'right':
        switchControl.parentElement.classList.add('left');
        switchControl.parentElement.classList.remove('right');
        leftText.classList.add('selected');
        rightText.classList.remove('selected');
        state.position = 'left';
        break;
    }

    callback(state.position);
  };

  switcher();
  idSwitch.addEventListener('click', function (event) {
    switcher();
  });
};

/***/ }),

/***/ "iXzC":
/*!***************************************************!*\
  !*** ./src/ui/create-guide-modal/create-guide.js ***!
  \***************************************************/
/*! namespace exports */
/*! export createGuideHandler [provided] [maybe used (runtime-defined)] [usage prevents renaming] */
/*! export onCreateCustomLesson [provided] [used] [usage prevents renaming] */
/*! other exports [not provided] [maybe used (runtime-defined)] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createGuideHandler": () => /* binding */ createGuideHandler,
/* harmony export */   "onCreateCustomLesson": () => /* binding */ onCreateCustomLesson
/* harmony export */ });
/* harmony import */ var ui_css_groups_create_guide_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/css/groups/create-guide.css */ "sBHh");
/* harmony import */ var ui_css_groups_create_guide_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ui_css_groups_create_guide_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ui_create_guide_modal_createGuide__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/create-guide-modal/createGuide */ "hnrz");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");



var createGuideHandler = function createGuideHandler(step) {
  var guide = new ui_create_guide_modal_createGuide__WEBPACK_IMPORTED_MODULE_1__.CreateGuide(step);
  guide.goToNextStep(step, 'NEXT');

  var handleNextStepAction = function handleNextStepAction(e) {
    guide.startLesson = parseInt(guide.nextStepActionArrow.dataset.number) === 4;

    if (guide.startLesson) {
      guide.nextStepActionArrow.setAttribute('data-dismiss', 'modal');
    } else {
      guide.nextStepActionArrow.removeAttribute('data-dismiss');
    }

    var step = guide.steps.find(function (step) {
      return step.description === guide.getCurrentStep().nextStep;
    });
    if (step) guide.goToNextStep(step.number, 'NEXT');
    guide.listeners.push({
      element: guide.nextStepActionArrow,
      handler: handleNextStepAction
    });
  };

  guide.nextStepActionArrow.addEventListener('click', handleNextStepAction, true);

  var handlePreviousStepAction = function handlePreviousStepAction(e) {
    var prevStep;

    if (guide.getCurrentStep() && guide.getCurrentStep().number === 4) {
      prevStep = guide.option === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.guideType.PICKER.name ? 2 : 3;
    } else {
      prevStep = guide.getCurrentStep().number - 1;
    }

    guide.goToNextStep(prevStep, 'PREVIOUS', guide.option);
    guide.listeners.push({
      element: guide.previousStepActionArrow,
      handler: handlePreviousStepAction
    });
  };

  guide.previousStepActionArrow.addEventListener('click', handlePreviousStepAction, true);

  guide.callOnCreateCustomListeners = function (collection) {
    onCloseModalListeners.forEach(function (listener) {
      return listener(collection);
    });
    onCloseModalListeners.pop();
  };
};
var onCloseModalListeners = [];
var onCreateCustomLesson = function onCreateCustomLesson(listener) {
  onCloseModalListeners.pop();
  onCloseModalListeners.push(listener);
};

/***/ }),

/***/ "hnrz":
/*!**************************************************!*\
  !*** ./src/ui/create-guide-modal/createGuide.js ***!
  \**************************************************/
/*! namespace exports */
/*! export CreateGuide [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CreateGuide": () => /* binding */ CreateGuide
/* harmony export */ });
/* harmony import */ var redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/actions/action-creators */ "/CNf");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_create_guide_modal_species_search_options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/create-guide-modal/species-search-options */ "JBMZ");
/* harmony import */ var ui_create_guide_modal_location__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/create-guide-modal/location */ "BGEh");
/* harmony import */ var ui_create_guide_modal_inat_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/create-guide-modal/inat-user */ "w/lL");
/* harmony import */ var ui_create_guide_modal_categories__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/create-guide-modal/categories */ "0xFZ");
/* harmony import */ var ui_create_guide_modal_species_picker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/create-guide-modal/species-picker */ "HkuV");
/* harmony import */ var ui_create_guide_modal_common_save_guide__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/create-guide-modal/common/save-guide */ "4cX6");
/* harmony import */ var ui_create_guide_modal_initialise_lesson__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/create-guide-modal/initialise-lesson */ "kWaW");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_create_guide_modal_common_actions_template_html__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ui/create-guide-modal/common/actions-template.html */ "9W8N");
/* harmony import */ var ui_create_guide_modal_common_actions_template_html__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(ui_create_guide_modal_common_actions_template_html__WEBPACK_IMPORTED_MODULE_11__);
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}













var CreateGuide = /*#__PURE__*/function () {
  function CreateGuide(step) {
    var _this = this;

    _classCallCheck(this, CreateGuide);

    this.listeners = [];
    this.steps = [{
      number: 0,
      title: 'Create your own lesson'
    }, {
      number: 1,
      title: 'Species Picker',
      description: 'Provenance',
      nextStep: '',
      disabled: true,
      className: 'species-actions',
      nextSteps: [{
        id: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.LOCATION.name,
        step: 'Location'
      }, {
        id: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.INAT.name,
        step: 'Location'
      }, {
        id: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.PICKER.name,
        step: 'Picker'
      }]
    }, {
      number: 2,
      title: 'Species Picker',
      description: 'Location',
      nextStep: 'Taxa',
      prevStep: 'Provenance',
      disabled: true,
      className: 'location-actions'
    }, {
      number: 2,
      title: 'Species Picker',
      description: 'Picker',
      nextStep: 'Species',
      prevStep: 'Provenance',
      disabled: true,
      className: 'location-actions'
    }, {
      number: 3,
      title: 'Species Picker',
      description: 'Taxa',
      nextStep: 'Species',
      disabled: true,
      className: 'taxa-actions'
    }, {
      number: 4,
      title: 'Species Picker',
      description: 'Species',
      nextStep: 'View Guide',
      disabled: true,
      className: 'filter-actions'
    }];
    this.currentStep = this.steps.find(function (s) {
      return s.number == step;
    });
    this.modal = document.getElementById('createGuide');
    if (!this.modal) return;
    this.modalTitle = this.modal.querySelector('.js-modal-title header');
    this.navigationContainer = this.modal.querySelector('.js-modal-guide-navigation');
    this.progressSteps = this.modal.querySelectorAll('.js-modal-guide-progress > div > div');
    this.previousStepActionArrow = this.modal.querySelector('.js-left');
    this.previousStepActionTxt = this.modal.querySelector('.js-left .title');
    this.optionsTxt = this.modal.querySelector('.js-centre .title');
    this.nextStepActionArrow = this.modal.querySelector('.js-right');
    this.nextStepActionTxt = this.modal.querySelector('.js-right .title');
    this.progressSteps.forEach(function (ps, index) {
      ps.innerHTML = _this.steps[index].description;
    });
    this.config = this.config || redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState().config;

    this.getConfig = function () {
      return _this.config;
    };

    this.setConfig = function (config) {
      _this.config = config;
      redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_0__.actions.boundUpdateConfig(config);
    };

    this.getCurrentStep = function () {
      return _this.currentStep;
    };

    this.setCurrentStep = function (step) {
      _this.currentStep = _this.steps.find(function (s) {
        return s.number === step;
      });
    };

    this.user = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState().user;
  }

  _createClass(CreateGuide, [{
    key: "addStepActions",
    value: function addStepActions(nextStep) {
      var _this2 = this;

      if (!nextStep) return;
      var parent = this.modal.querySelector('.js-step-action-content');
      parent.innerHTML = '';
      var template = document.createElement('template');
      template.innerHTML = (ui_create_guide_modal_common_actions_template_html__WEBPACK_IMPORTED_MODULE_11___default());
      var description = this.steps.find(function (step) {
        return step.number === _this2.currentStep.number;
      }).description;
      (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
        className: nextStep.className
      }, template.content, parent);
      var options = this.modal.querySelector('.js-options > h1');

      switch (description) {
        case 'Provenance':
          options.innerHTML = 'How do you want to select your species?';
          (0,ui_create_guide_modal_species_search_options__WEBPACK_IMPORTED_MODULE_3__.renderSpeciesSearchOptions)(this);
          break;

        case 'Location':
          options.innerHTML = 'Filter species by location and season.';

          switch (this.option) {
            case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.LOCATION.name:
              (0,ui_create_guide_modal_location__WEBPACK_IMPORTED_MODULE_4__.renderLocation)(this.modal, this);
              break;

            case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.INAT.name:
              (0,ui_create_guide_modal_inat_user__WEBPACK_IMPORTED_MODULE_5__.renderInatUser)(this.modal, this);
              break;

            case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.PICKER.name:
              var chosenOnes = this.modal.querySelector('.js-chosen');
              chosenOnes.classList.add('hide-important');
              document.querySelector('.js-step-action-content .location-actions').classList.add('species-picker-actions');
              (0,ui_create_guide_modal_species_picker__WEBPACK_IMPORTED_MODULE_7__.renderSpeciesPicker)({
                container: this.modal,
                config: this.config,
                setConfig: this.setConfig
              }, this.modal.querySelector('.js-actions'));
              var title = this.modal.querySelector('.js-options > h1');
              title.innerHTML = 'Add species by name.';
              break;
          }

          break;

        case 'Taxa':
          options.innerHTML = 'Filter species by taxa.';
          (0,ui_create_guide_modal_categories__WEBPACK_IMPORTED_MODULE_6__.renderCategories)(this.modal, this);
          break;

        case 'Species':
          setTimeout(function () {
            (0,ui_create_guide_modal_initialise_lesson__WEBPACK_IMPORTED_MODULE_9__.initialiseLesson)(_this2);
          });
          break;
      }
    }
  }, {
    key: "goToNextStep",
    value: function goToNextStep(nextStep, direction) {
      var _this3 = this;

      var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var next = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      this.currentStep = next || this.steps.find(function (s) {
        return s.number === nextStep;
      });

      if (option === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.PICKER.name) {
        this.currentStep = this.steps[3];
      }

      this.direction = direction;
      this.option = option || this.option;

      if (this.startLesson) {
        this.currentStep = {
          number: 0
        };
      }

      ;
      if (!this.modalTitle) return;
      this.modalTitle.innerText = this.currentStep.title;
      this.nextStepActionTxt.innerHTML = this.currentStep.nextStep;
      this.progressSteps.forEach(function (ps, index) {
        ps.classList.remove('active');

        if (index + 1 === _this3.currentStep.number) {
          ps.classList.add('active');

          for (var i = 0; i < index; i++) {
            _this3.progressSteps[i].classList.add('completed');
          }
        }
      });
      this.addStepActions(this.steps.find(function (step) {
        return step.number === _this3.currentStep.number;
      }));

      if (this.currentStep.number === 1) {
        this.navigationContainer.classList.remove('progress-container');
        this.optionsTxt.classList.remove('hide-important');
        this.previousStepActionTxt.classList.add('hide-important');
        this.previousStepActionArrow.classList.add('arrow-wrapper-hidden');
        this.nextStepActionArrow.classList.add('arrow-wrapper-hidden');
      } else {
        this.navigationContainer.classList.add('progress-container');
        this.optionsTxt.classList.add('hide-important');
        this.previousStepActionArrow.classList.remove('arrow-wrapper-hidden');
        this.nextStepActionArrow.classList.remove('arrow-wrapper-hidden');
        this.nextStepActionArrow.dataset.number = this.currentStep.number;
        this.previousStepActionTxt.classList.remove('hide-important');
        var previousStepProperties = this.currentStep.prevStep ? this.steps.find(function (s) {
          return s.description === _this3.currentStep.prevStep;
        }) : this.steps.find(function (s) {
          return s.number === _this3.currentStep.number - 1;
        });

        if (this.getCurrentStep().number === 4) {
          this.previousStepActionTxt.innerHTML = this.option === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_10__.enums.guideType.PICKER.name ? this.steps[3].description : this.steps[4].description;
        } else {
          this.previousStepActionTxt.innerHTML = previousStepProperties.description;
        }
      }
    }
  }, {
    key: "saveStep",
    value: function saveStep(stepDescription, config) {
      (0,ui_create_guide_modal_common_save_guide__WEBPACK_IMPORTED_MODULE_8__.saveGuide)(config || this.getConfig(), stepDescription)();
    }
  }]);

  return CreateGuide;
}();
;

/***/ }),

/***/ "w/lL":
/*!************************************************!*\
  !*** ./src/ui/create-guide-modal/inat-user.js ***!
  \************************************************/
/*! namespace exports */
/*! export renderInatUser [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderInatUser": () => /* binding */ renderInatUser
/* harmony export */ });
/* harmony import */ var ui_create_guide_modal_common_snapdragon_switch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/create-guide-modal/common/snapdragon-switch */ "GlMD");
/* harmony import */ var ui_helpers_inat_autocomplete__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/inat-autocomplete */ "+p2B");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_create_guide_modal_inat_user_template_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/create-guide-modal/inat-user-template.html */ "xCCR");
/* harmony import */ var ui_create_guide_modal_inat_user_template_html__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ui_create_guide_modal_inat_user_template_html__WEBPACK_IMPORTED_MODULE_4__);





var renderInatUser = function renderInatUser(modal, createGuide) {
  var config = createGuide.getConfig();
  var template = document.createElement('template');
  template.innerHTML = (ui_create_guide_modal_inat_user_template_html__WEBPACK_IMPORTED_MODULE_4___default());
  config.guide.guideMode = ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.guideMode.DYNAMIC.name;

  if (config.guide.inatId.key !== '-----') {
    if (config.guide.locationType !== 'inat') {
      config.guide.locationType = 'inat';
      createGuide.setConfig(config);
    }

    createGuide.saveStep('INAT');
  }

  var parent = modal.querySelector('.js-actions');
  parent.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({}, template.content, parent);
  document.querySelector('.js-chosen > div > span:nth-child(2)').innerHTML += '<div class="delete-guide-link js-toggle-filter"><input class="hide" type="checkbox"></div>';
  var autocompleteRef;
  var position = config.guide.inatId.param === 'user_id' ? 'left' : 'right';
  var byType = 'users';
  var inatIdentityInput = parent.querySelector('#inat-identity');
  inatIdentityInput.focus();

  var handlerInatIdentityInput = function handlerInatIdentityInput(e) {
    inatIdentityInput.removeEventListener('keypress', handlerInatIdentityInput);
    autocompleteRef = (0,ui_helpers_inat_autocomplete__WEBPACK_IMPORTED_MODULE_1__.inatAutocomplete)(inatIdentityInput, byType, 'inat-autocomplete-options-container', '');
  };

  inatIdentityInput.addEventListener('keypress', handlerInatIdentityInput);
  inatIdentityInput.addEventListener('click', function (e) {
    e.preventDefault();
  });
  inatIdentityInput.addEventListener('keyup', function (e) {
    e.preventDefault('e.keyCode: ', e.keyCode);
  });
  document.getElementById('inatForm').addEventListener('submit', function (e) {
    e.preventDefault();

    if (inatIdentityInput.value !== '') {
      saveInatId(parent, config, createGuide, autocompleteRef);
    }
  });

  if (config.isPortraitMode) {
    inatIdentityInput.addEventListener('focusout', function (e) {
      var container = document.querySelector('.inat-autocomplete-options-container');

      if (container) {
        setTimeout(function () {
          saveInatId(parent, config, createGuide, autocompleteRef);
        });
        e.preventDefault();
      }
    });
  }

  var idSwitch = parent.querySelector('.snap-switch-slider');

  var switchCallback = function switchCallback(position) {
    byType = position === 'left' ? 'users' : 'projects';
    var type = position === 'left' ? 'iNat user ID' : 'iNat project ID';
    var param = position === 'left' ? 'user_id' : 'project_id';
    config.guide.inatId.type = type;
    config.guide.inatId.param = param;
    createGuide.setConfig(config);
  };

  (0,ui_create_guide_modal_common_snapdragon_switch__WEBPACK_IMPORTED_MODULE_0__.switchHandler)(idSwitch, position, switchCallback);
};

var saveInatId = function saveInatId(parent, config, createGuide, autocompleteRef) {
  var input = parent.querySelector('#inat-identity');

  if (config.isLandsapeMode) {
    input.value = '';
    input.focus();
  }

  var key = input.value;
  var id = input.name;
  config.guide.inatId.key = key;
  config.guide.inatId.id = id;

  if (key !== '') {
    config.guide.locationType = 'inat';
    createGuide.setConfig(config);
    createGuide.saveStep('INAT');
    parent.querySelector('#inat-identity').value = '';

    if (autocompleteRef) {// autocompleteRef.destroy();
    }
  }
};

/***/ }),

/***/ "kWaW":
/*!********************************************************!*\
  !*** ./src/ui/create-guide-modal/initialise-lesson.js ***!
  \********************************************************/
/*! namespace exports */
/*! export initialiseLesson [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "initialiseLesson": () => /* binding */ initialiseLesson
/* harmony export */ });
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bootstrap */ "phKE");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var api_inat_inat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! api/inat/inat */ "gEvk");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_screens_lists_lesson_state_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/lists/lesson-state-handler */ "MC3F");
/* harmony import */ var ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/lists/lesson-state-helper */ "6Fh2");
/* harmony import */ var ui_create_guide_modal_species_in_guide_editor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/create-guide-modal/species-in-guide-editor */ "6sgU");
/* harmony import */ var ui_create_guide_modal_initialise_lesson_template_html__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/create-guide-modal/initialise-lesson-template.html */ "K6WX");
/* harmony import */ var ui_create_guide_modal_initialise_lesson_template_html__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(ui_create_guide_modal_initialise_lesson_template_html__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var ui_create_guide_modal_species_summary_template_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/create-guide-modal/species-summary-template.html */ "N4cl");
/* harmony import */ var ui_create_guide_modal_species_summary_template_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(ui_create_guide_modal_species_summary_template_html__WEBPACK_IMPORTED_MODULE_9__);
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}












var initialiseLesson = function initialiseLesson(createGuide) {
  var config = createGuide.config,
      modal = createGuide.modal,
      option = createGuide.option;

  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      collections = _store$getState.collections;

  var template = document.createElement('template');
  template.innerHTML = (ui_create_guide_modal_initialise_lesson_template_html__WEBPACK_IMPORTED_MODULE_8___default());
  var parent = modal.querySelector('.js-step-action-content');
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({}, template.content, parent);
  var feedback = document.querySelector('.js-request-feedback');
  var count = 0;
  var interval = setInterval(function () {
    count = count === config.guide.iconicTaxa.length ? 0 : count;
    feedback.innerHTML = "Fetching ".concat(config.guide.iconicTaxa[count].common, " from iNaturalist \u2026");
    count++;
  }, 2000);
  var nextStepActionArrow = modal.querySelector('.js-right');
  var viewGuideIcon = nextStepActionArrow.querySelector('svg');
  viewGuideIcon.classList.add('snap-inactive');
  var back = modal.querySelector('.js-left .js-arrow-wrapper');
  var viewTaxaIcon = back.querySelector('svg');
  viewTaxaIcon.classList.add('snap-inactive');

  var renderLessonSummary = function renderLessonSummary(collection) {
    try {
      if (collection && collection.items && collection.items.length === 0) {
        feedback.innerHTML = 'No species were found. Try widening your parameters.';
        return;
      }

      clearTimeout(interval);
      template.innerHTML = (ui_create_guide_modal_species_summary_template_html__WEBPACK_IMPORTED_MODULE_9___default());
      feedback.innerHTML = '';
      collection.taxa = collection.guide.iconicTaxa.map(function (taxon) {
        return taxon.common;
      }).join(', ');
      (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
        collection: collection
      }, template.content, feedback);
      var icon = modal.querySelector('.icon svg');
      icon.classList.remove('slow-spin');
      setTimeout(function () {
        nextStepActionArrow.addEventListener('click', function (e) {
          setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
            var createGuideModal;
            return regeneratorRuntime.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    if (!config.guide.species) {
                      _context.next = 4;
                      break;
                    }

                    collection.items = collection.items.filter(function (item) {
                      return (0,ramda__WEBPACK_IMPORTED_MODULE_10__.default)(item.name, config.guide.species.map(function (sp) {
                        return sp.name;
                      }));
                    });
                    _context.next = 4;
                    return ui_screens_lists_lesson_state_handler__WEBPACK_IMPORTED_MODULE_5__.lessonStateHandler.changeRequest({
                      requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.lessonState.ADD_SPECIES_TO_COLLECTION,
                      requestArgs: {
                        config: config,
                        collection: collection
                      }
                    });

                  case 4:
                    if (parseInt(nextStepActionArrow.dataset.number) === 4) {
                      createGuide.callOnCreateCustomListeners(collection);
                      ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_6__.lessonStateHelper.clearGuide();
                      createGuideModal = bootstrap__WEBPACK_IMPORTED_MODULE_0__.Modal.getInstance(document.getElementById('createGuide'));
                      createGuideModal.hide();
                      document.querySelector('.modal-backdrop.show.fade').style.display = 'none';
                    }

                  case 5:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, this);
          })));
        });
      });
      title.innerHTML = 'New collection species';
      var editSpecies = modal.querySelector('.js-edit-species');
      editSpecies.addEventListener('click', function (e) {
        var selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');
        selectedSpeciesDisplay.classList.add('open');
        selectedSpeciesDisplay.classList.remove('hide-important');
        selectedSpeciesDisplay.innerHTML = '';
        editSpecies.classList.add('hide-important');
        (0,ui_create_guide_modal_species_in_guide_editor__WEBPACK_IMPORTED_MODULE_7__.speciesInGuideEditor)(config, modal, selectedSpeciesDisplay, createGuide, collection.items);
        var editableCollectionName = modal.querySelector('#js-input-collection-name');
        editableCollectionName.classList.remove('hide-important');
        editableCollectionName.addEventListener('focusout', function (e) {
          var name = e.target.value;
          config.guide.name = name;
          collection.name = name;
          ui_screens_lists_lesson_state_handler__WEBPACK_IMPORTED_MODULE_5__.lessonStateHandler.changeRequest({
            requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.lessonState.UPDATE_COLLECTION,
            requestArgs: {
              collection: collection,
              config: config
            }
          });
        });
      });
      viewGuideIcon.classList.remove('snap-inactive');
      viewTaxaIcon.classList.remove('snap-inactive');
    } catch (e) {
      logError(renderLessonSummary, e);
    }
  };

  var initLesson = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(collectionToLoad) {
      var counter, lesson, collection, OrdinalSuffixOf, unsubscribe, callback;
      return regeneratorRuntime.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              counter = {
                index: 0,
                isLessonPaused: true
              };
              _context2.next = 3;
              return ui_screens_lists_lesson_state_handler__WEBPACK_IMPORTED_MODULE_5__.lessonStateHandler.changeRequest({
                requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.lessonState.GET_LESSON_STATE,
                requestArgs: {
                  collectionToLoad: collectionToLoad,
                  updatedCounter: counter,
                  config: createGuide.getConfig()
                }
              });

            case 3:
              lesson = _context2.sent; // snapLog('initLesson', lesson);

              collection = lesson.collection;
              collection.guide = config.guide;
              collection.isPrivate = true;
              renderLessonSummary(collection);

              OrdinalSuffixOf = function OrdinalSuffixOf(i) {
                var j = i % 10,
                    k = i % 100;

                if (j == 1 && k != 11) {
                  return i + "st";
                }

                if (j == 2 && k != 12) {
                  return i + "nd";
                }

                if (j == 3 && k != 13) {
                  return i + "rd";
                }

                return i + "th";
              };

              callback = function callback(request) {
                if (feedback) {
                  feedback.innerHTML = "Making ".concat(OrdinalSuffixOf(request.page), " request of ").concat(request.numberOfRequests);
                } else {
                  unsubscribe(callback);
                }
              };

              unsubscribe = (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_3__.listenToInatRequests)(callback);

            case 11:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, this);
    }));

    return function initLesson(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  config.guide.guideType = option;

  switch (option) {
    case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.guideType.LOCATION.name:
      initLesson(_objectSpread(_objectSpread({}, collections.find(function (c) {
        return c.guideType === option;
      })), {}, {
        name: config.guide.place.name,
        taxa: config.guide.iconicTaxa.map(function (i) {
          return i.common;
        }).join(', '),
        guide: config.guide,
        language: config.language,
        id: collections.length + 100010 // hack to avoid clashes with existing lessons

      }));
      break;

    case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.guideType.INAT.name:
      initLesson(_objectSpread(_objectSpread({}, collections.find(function (c) {
        return c.guideType === option;
      })), {}, {
        name: "".concat(config.guide.inatId.key, "'s observations"),
        taxa: config.guide.iconicTaxa.map(function (i) {
          return i.common;
        }).join(', '),
        iconicTaxa: config.guide.iconicTaxa,
        id: collections.length + 10000
      }));
      break;

    case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.guideType.PICKER.name:
      var initPicker = /*#__PURE__*/function () {
        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
          var _store$getState2, collection, addingExtraSpecies, collectionToLoad;

          return regeneratorRuntime.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  _store$getState2 = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(), collection = _store$getState2.collection;
                  addingExtraSpecies = false;

                  if (collection.items) {
                    addingExtraSpecies = collection.items.map(function (i) {
                      return i.name;
                    }).every(function (val) {
                      return config.guide.species.map(function (s) {
                        return s.name;
                      }).includes(val);
                    });
                  }

                  if (!addingExtraSpecies) {
                    _context3.next = 9;
                    break;
                  }

                  collectionToLoad = collection;
                  _context3.next = 7;
                  return ui_screens_lists_lesson_state_handler__WEBPACK_IMPORTED_MODULE_5__.lessonStateHandler.changeRequest({
                    requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.lessonState.ADD_SPECIES_TO_COLLECTION,
                    requestArgs: {
                      updatedConfig: config,
                      updatedCollection: collectionToLoad
                    }
                  });

                case 7:
                  _context3.next = 10;
                  break;

                case 9:
                  collectionToLoad = _objectSpread(_objectSpread({}, collections.find(function (c) {
                    return c.guideType === option;
                  })), {}, {
                    species: config.guide.species,
                    id: collections.length + 10010,
                    name: 'Your new lesson',
                    hasVideo: false,
                    video: {},
                    terms: []
                  });

                case 10:
                  initLesson(collectionToLoad);

                case 11:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));

        return function initPicker() {
          return _ref3.apply(this, arguments);
        };
      }();

      initPicker();
      break;
  }

  var title = modal.querySelector('.js-options > h1');
  title.innerHTML = 'Requesting species images and traits';
};

/***/ }),

/***/ "BGEh":
/*!***********************************************!*\
  !*** ./src/ui/create-guide-modal/location.js ***!
  \***********************************************/
/*! namespace exports */
/*! export renderLocation [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderLocation": () => /* binding */ renderLocation
/* harmony export */ });
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var geo_geo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! geo/geo */ "85yX");
/* harmony import */ var ui_helpers_inat_autocomplete__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/inat-autocomplete */ "+p2B");
/* harmony import */ var ui_create_guide_modal_common_snapdragon_switch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/create-guide-modal/common/snapdragon-switch */ "GlMD");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_create_guide_modal_location_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/create-guide-modal/location-template.html */ "6q12");
/* harmony import */ var ui_create_guide_modal_location_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_create_guide_modal_location_template_html__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var img_powered_by_google_on_white_hdpi_png__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! img/powered_by_google_on_white_hdpi.png */ "lfAW");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}








var renderLocation = function renderLocation(modal, createGuide) {
  var config = createGuide.getConfig();
  createGuide.saveStep('LOCATION');
  var locationPlace = config.guide.locationPlace;
  var autocompleteRef;
  var template = document.createElement('template');
  template.innerHTML = (ui_create_guide_modal_location_template_html__WEBPACK_IMPORTED_MODULE_5___default());
  var parent = modal.querySelector('.js-actions');
  parent.innerHTML = '';
  config.guide.season.observableMonths = config.guide.season.observableMonths || config.season.observableMonths;
  config.guide.guideMode = ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_4__.enums.guideMode.DYNAMIC.name;

  if (config.guide.season.observableMonths) {
    var months = config.guide.season.observableMonths.map(function (month) {
      return month.name;
    });
    var observableMonths = "".concat(months[0], "-").concat(months[months.length - 1]);
    var defaultNoOfRecords = config.guide.noOfRecords;
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({
      observableMonths: observableMonths,
      noOfRecords: defaultNoOfRecords
    }, template.content, parent);
  }

  var defaultLocationTxt = 'Use your current location';
  var setLocationLongLatBtn = modal.querySelector('.js-set-location-btn');
  setLocationLongLatBtn.innerHTML = defaultLocationTxt;

  function handleSetLocationLongLat(_x) {
    return _handleSetLocationLongLat.apply(this, arguments);
  }

  function _handleSetLocationLongLat() {
    _handleSetLocationLongLat = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {
      var place;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              event.stopPropagation();
              setLocationLongLatBtn.innerHTML = 'Updating location…';
              _context.next = 4;
              return (0,geo_geo__WEBPACK_IMPORTED_MODULE_1__.getPlace)(config, true);

            case 4:
              place = _context.sent;
              config.guide.locationType = 'longLat';
              config.place = place;
              config.guide.locationLongLat = place.longLocation;
              setLocationLongLatBtn.innerHTML = defaultLocationTxt;
              createGuide.setConfig(config);
              createGuide.saveStep('LOCATION');

            case 11:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));
    return _handleSetLocationLongLat.apply(this, arguments);
  }

  setLocationLongLatBtn.addEventListener('click', handleSetLocationLongLat);
  var locationPlaceInput = modal.querySelector('#inat-place');
  locationPlaceInput.placeholder = config.isLandscapeMode ? 'Or start typing the name of a place you are interested in.' : 'Or start typing the name of a place.';
  locationPlaceInput.focus(); // let counter = 0;

  var handleLocationPlaceInput = function handleLocationPlaceInput(e) {
    locationPlaceInput.removeEventListener('keypress', handleLocationPlaceInput); // counter++;        

    autocompleteRef = (0,ui_helpers_inat_autocomplete__WEBPACK_IMPORTED_MODULE_2__.inatAutocomplete)(locationPlaceInput, 'places', 'autocomplete-options-container', 'place'); // saveLocationBtn.disabled = false;        
    // setTimeout(() => {
    //     const googleImageContainer = modal.querySelector('#inat-place-autocomplete #googleLogoContainer');
    //     if(!googleImageContainer && counter >= 3) {
    //         const options = modal.querySelector('#inat-place-autocomplete');
    //         if(options) options.innerHTML += `<div id="googleLogoContainer"><img id="googleLogo" src="${googleLogoImg}" alt=""></div>`;
    //     }            
    // },750);  
  };

  locationPlaceInput.addEventListener('keypress', handleLocationPlaceInput);
  locationPlaceInput.addEventListener('click', function (e) {
    e.preventDefault();
  });
  locationPlaceInput.addEventListener('keyup', function (e) {
    e.preventDefault('e.keyCode: ', e.keyCode);
  });
  document.getElementById('locationForm').addEventListener('submit', function (e) {
    e.preventDefault();

    if (locationPlaceInput.value !== '') {
      saveLocation(config, locationPlaceInput, locationPlace, createGuide);
    }
  });

  if (config.isPortraitMode) {
    locationPlaceInput.addEventListener('focusout', function (e) {
      var container = document.querySelector('.autocomplete-options-container');

      if (container) {
        setTimeout(function () {
          saveLocation(config, locationPlaceInput, locationPlace, createGuide);
        });
        e.preventDefault();
      }
    });
  }

  var range = config.guide.speciesRange;
  var rangeTxt = modal.querySelector('.js-range');
  rangeTxt.innerHTML = "Include species within ".concat(range, "km.");
  modal.querySelector('.js-set-range-input').value = range;
  var slider = modal.querySelector('.js-set-range-input');

  var updateSlider = function updateSlider(event) {
    range = event.target.value;
    config.guide.speciesRange = range;
    rangeTxt.innerHTML = "Include species within ".concat(range, "km.");
    createGuide.setConfig(config);
  };

  slider.addEventListener('change', updateSlider);
  createGuide.nextStepActionArrow.addEventListener('click', function (event) {
    if (autocompleteRef) autocompleteRef.destroy();
  });
  var idSwitch = parent.querySelector('.js-snap-switch-slider');

  var switchCallback = function switchCallback(position) {
    var config = createGuide.getConfig();
    var currentType = config.guide.season.type;

    if (position === 'right') {
      config.guide.season.type = 'all_year';
    } else {
      config.guide.season.type = 'months';
    }

    createGuide.setConfig(config);

    if (config.guide.season.type !== currentType) {
      createGuide.saveStep('SEASON');
    }
  };

  var position = config.guide.season.type === 'months' ? 'left' : 'right';
  (0,ui_create_guide_modal_common_snapdragon_switch__WEBPACK_IMPORTED_MODULE_3__.switchHandler)(idSwitch, position, switchCallback);
  var noOfRecords = document.querySelector('.js-location-no-of-records');
  noOfRecords.addEventListener('change', function (e) {
    var config = createGuide.getConfig();
    config.guide.noOfRecords = parseInt(noOfRecords.value);
    createGuide.setConfig(config);
  });
};

var saveLocation = function saveLocation(config, locationPlaceInput, locationPlace, createGuide) {
  var selectedText = locationPlaceInput.value;
  var selectedId = locationPlaceInput.name;
  config.guide.locationType = 'longLat';
  config.guide.place.name = selectedText;
  config.guide.locationLongLat = selectedText;
  config.guide.locationType = 'longLat';
  config.guide.locationLongLat = selectedText;

  var callback = function callback(geocoderResult) {
    if (geocoderResult && geocoderResult.length > 0) {
      var lat = geocoderResult[0].geometry.location.lat();

      var _long = geocoderResult[0].geometry.location.lng();

      config.guide.coordinates = {
        lat: lat,
        "long": _long
      };
      locationPlaceInput.value = '';
      createGuide.setConfig(config);
      createGuide.saveStep('LOCATION');
    }
  };

  (0,geo_geo__WEBPACK_IMPORTED_MODULE_1__.GooglePlaceDetails)(selectedId, callback);
  return locationPlace;
};

/***/ }),

/***/ "JBMZ":
/*!*************************************************************!*\
  !*** ./src/ui/create-guide-modal/species-search-options.js ***!
  \*************************************************************/
/*! namespace exports */
/*! export renderSpeciesSearchOptions [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderSpeciesSearchOptions": () => /* binding */ renderSpeciesSearchOptions
/* harmony export */ });
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_screens_common_language_selection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/common/language-selection */ "0Zqs");
/* harmony import */ var ui_create_guide_modal_species_search_options_template_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/create-guide-modal/species-search-options-template.html */ "7qcS");
/* harmony import */ var ui_create_guide_modal_species_search_options_template_html__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ui_create_guide_modal_species_search_options_template_html__WEBPACK_IMPORTED_MODULE_3__);




var renderSpeciesSearchOptions = function renderSpeciesSearchOptions(createGuide) {
  var header = createGuide.modal.querySelector('.js-modal-title > header');
  header.innerHTML = 'Create your own lesson';
  var options = [{
    text: 'By location and season',
    id: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__.enums.guideType.LOCATION.name
  }, {
    text: 'From iNaturalist observations',
    id: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__.enums.guideType.INAT.name
  }, {
    text: 'Using a name-based search',
    id: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__.enums.guideType.PICKER.name
  }];
  var template = document.createElement('template');
  template.innerHTML = (ui_create_guide_modal_species_search_options_template_html__WEBPACK_IMPORTED_MODULE_3___default());
  var parent = createGuide.modal.querySelector('.js-actions');
  parent.innerHTML = '';
  var config = createGuide.getConfig();
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({
    options: options
  }, template.content, parent);

  var handleNextStepAction = function handleNextStepAction(event) {
    var option = event.currentTarget.dataset.option;
    var step = createGuide.steps.find(function (s) {
      return s.number === createGuide.getCurrentStep().number;
    });
    var nextStepName = step.nextSteps.find(function (step) {
      return step.id === option;
    }).step;
    var nextStep = createGuide.steps.find(function (s) {
      return s.description === nextStepName;
    });
    createGuide.startLesson = false;
    createGuide.goToNextStep(createGuide.getCurrentStep().number + 1, 'NEXT', option, nextStep);
    createGuide.listeners = [];
    createGuide.listeners.push({
      element: createGuide.nextStepActionArrow,
      handler: handleNextStepAction
    });
  };

  var lessonOptions = document.querySelectorAll('.custom-lesson-menu-options li');
  lessonOptions.forEach(function (option, index) {
    option.addEventListener('click', handleNextStepAction, true);
  });
  (0,ui_screens_common_language_selection__WEBPACK_IMPORTED_MODULE_2__.languagePicker)(config, document.querySelector('.js-language-selection-container'), function (config) {
    createGuide.setConfig(config);
  });
  var warning = createGuide.modal.querySelector('.js-persistence-warning');

  if (createGuide.user) {
    warning.classList.add('hide-important');
  }
};

/***/ }),

/***/ "B+Uw":
/*!***********************!*\
  !*** ./src/ui/dom.js ***!
  \***********************/
/*! namespace exports */
/*! export DOM [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DOM": () => /* binding */ DOM
/* harmony export */ });
var DOM = {
  leftGrid: document.getElementsByClassName('js-side-lesson-list')[0],
  leftHeader: document.getElementsByClassName('js-side-lesson-list-header')[0],
  leftBody: document.getElementsByClassName('js-side-lesson-list-body')[0],
  leftFooter: document.getElementsByClassName('js-side-lesson-list-footer')[0],
  leftHeaderTxt: document.getElementsByClassName('js-side-lesson-list-header-txt')[0],
  specimenRptr: document.getElementsByClassName('js-rptr-specimen')[0],
  rightGrid: document.getElementsByClassName('js-main-lesson-grid')[0],
  rightHeader: document.getElementsByClassName('js-main-lesson-header')[0],
  rightHeaderTxt: document.getElementsByClassName('js-main-lesson-txt-header')[0],
  rightHeaderScoreTxt: document.getElementsByClassName('js-main-lesson-txt-score')[0],
  rightBody: document.getElementsByClassName('js-main-lesson-body')[0],
  rightRptrSummary: document.getElementsByClassName('js-summary')[0],
  rightBodyBottom: document.getElementsByClassName('js-main-lesson-body-bottom')[0],
  rightFooter: document.getElementsByClassName('js-main-lesson-footer')[0]
};

/***/ }),

/***/ "q0Zq":
/*!********************************************!*\
  !*** ./src/ui/helpers/function-lookups.js ***!
  \********************************************/
/*! namespace exports */
/*! export funcByName [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "funcByName": () => /* binding */ funcByName
/* harmony export */ });
/* harmony import */ var ui_screens_text_entry_species_text_entry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/screens/text-entry/species-text-entry */ "+Ynd");
/* harmony import */ var ui_screens_progress_history__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/progress/history */ "v2sf");
/* harmony import */ var ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/cards/card */ "Vt4y");
/* harmony import */ var ui_screens_cards_taxon_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/cards/taxon-card */ "+pkx");
/* harmony import */ var ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/cards/non-taxon-card */ "gtMu");
/* harmony import */ var ui_screens_progress_summary__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/progress/summary */ "TdAe");
/* harmony import */ var ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/multichoice/multi-strips */ "AIrL");
/* harmony import */ var ui_screens_text_entry_text_complete__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/text-entry/text-complete */ "xN5I");
/* harmony import */ var ui_screens_cards_non_taxon_card_specimen_tiles__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/screens/cards/non-taxon-card-specimen-tiles */ "Ghzi");
/* harmony import */ var ui_screens_multichoice_landscape_mixed_specimen_right_mixed_specimen_question__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question */ "lFzj");
/* harmony import */ var ui_screens_media_landscape_media_players__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ui/screens/media/landscape/media-players */ "erJl");
/* harmony import */ var ui_screens_bonus_bonus_test__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ui/screens/bonus/bonus-test */ "kxD5");
/* harmony import */ var ui_screens_bonus_bonus_specimen_tiles__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ui/screens/bonus/bonus-specimen-tiles */ "2pV3");
/* harmony import */ var ui_screens_multichoice_landscape_mixed_trait_right_mixed_trait_question__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question */ "O3D1");
/* harmony import */ var ui_screens_multichoice_horizontal_strips_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ui/screens/multichoice/horizontal-strips.js */ "T8iS");















var functions = [{
  name: 'non-taxon-specimen-tiles',
  func: ui_screens_cards_non_taxon_card_specimen_tiles__WEBPACK_IMPORTED_MODULE_8__.renderNonTaxonCardSpecimenTiles
}, {
  name: 'text-entry',
  func: ui_screens_text_entry_species_text_entry__WEBPACK_IMPORTED_MODULE_0__.renderTextEntry
}, {
  name: 'species-card',
  func: ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_2__.renderCard
}, {
  name: 'species-scientifics',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'species-vernaculars',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'species-identification',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'summary',
  func: ui_screens_progress_summary__WEBPACK_IMPORTED_MODULE_5__.renderSummary
}, {
  name: 'history',
  func: ui_screens_progress_history__WEBPACK_IMPORTED_MODULE_1__.renderHistory
}, {
  name: 'epithet',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'definition',
  func: ui_screens_bonus_bonus_test__WEBPACK_IMPORTED_MODULE_11__.renderBonusTest
}, {
  name: 'family',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'family-strips',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'taxon-card',
  func: ui_screens_cards_taxon_card__WEBPACK_IMPORTED_MODULE_3__.renderTaxonCard
}, {
  name: 'non-taxon-card',
  func: ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_4__.renderNonTaxonCard
}, {
  name: 'text-complete',
  func: ui_screens_text_entry_text_complete__WEBPACK_IMPORTED_MODULE_7__.renderCompleteText
}, {
  name: 'visual-match',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'trait-images',
  func: ui_screens_bonus_bonus_specimen_tiles__WEBPACK_IMPORTED_MODULE_12__.renderBonusSpecimenTiles
}, {
  name: 'trait-property',
  func: ui_screens_bonus_bonus_test__WEBPACK_IMPORTED_MODULE_11__.renderBonusTest
}, {
  name: 'lookalike-property',
  func: ui_screens_bonus_bonus_test__WEBPACK_IMPORTED_MODULE_11__.renderBonusTest
}, {
  name: 'symbiotic-property',
  func: ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_6__.renderMultiStrips
}, {
  name: 'mixed-specimen-question',
  func: ui_screens_multichoice_landscape_mixed_specimen_right_mixed_specimen_question__WEBPACK_IMPORTED_MODULE_9__.renderMixedSpecimenQuestion
}, // landscape triggers both ?
{
  name: 'birdsong',
  func: ui_screens_bonus_bonus_test__WEBPACK_IMPORTED_MODULE_11__.renderBonusTest
}, {
  name: 'media-players',
  func: ui_screens_media_landscape_media_players__WEBPACK_IMPORTED_MODULE_10__.renderMediaPlayers
}, {
  name: 'mixed-trait-question',
  func: ui_screens_multichoice_landscape_mixed_trait_right_mixed_trait_question__WEBPACK_IMPORTED_MODULE_13__.renderMixedTraitQuestion
}, {
  name: 'provider-horizontal-strip-questions',
  func: ui_screens_multichoice_horizontal_strips_js__WEBPACK_IMPORTED_MODULE_14__.renderHorizontalStrips
}];
var funcByName = function funcByName(name) {
  var match = functions.find(function (func) {
    return func.name === name;
  });
  var func = match ? match.func : null;
  return func;
};

/***/ }),

/***/ "iZK6":
/*!****************************************!*\
  !*** ./src/ui/helpers/icon-handler.js ***!
  \****************************************/
/*! namespace exports */
/*! export renderIcon [provided] [used] [could be renamed] */
/*! export returnIcon [provided] [unused] [could be renamed] */
/*! export returnTaxonIcon [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderIcon": () => /* binding */ renderIcon,
/* harmony export */   "returnTaxonIcon": () => /* binding */ returnTaxonIcon
/* harmony export */ });
/* unused harmony export returnIcon */
/* harmony import */ var api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! api/snapdragon/iconic-taxa */ "Bv5j");

var mushroomIcon = '<svg-icon class="si-glyph-mushrooms"><src href="./static/icons/si-glyph-mushrooms.svg"/></svg-icon>';
var renderIcon = function renderIcon(taxonomy, rootNode) {
  if (taxonomy.kingdom.toLowerCase() === 'fungi') {
    var iconicIconContainer = rootNode.querySelector('.js-iconic-icon');
    iconicIconContainer.innerHTML = "<span class=\"mushroom-icon-header\">".concat(mushroomIcon, "</span>");
  } else {
    var iconicIcon = rootNode.querySelector('.js-iconic-icon i');
    var classes = (0,api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_0__.matchIcon)(taxonomy, api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_0__.iconicTaxa).split(' ');
    classes.forEach(function (c) {
      return iconicIcon.classList.add(c);
    });
  }

  return rootNode.querySelector('.js-iconic-icon');
};
var returnIcon = function returnIcon(item) {
  if (!item.taxonomy) return '';

  if (item.taxonomy.kingdom.toLowerCase() === 'fungi') {
    return "<span class=\"mushroom-icon-header\">".concat(mushroomIcon, "</span>");
  } else {
    return "<i class=\"small-icon ".concat(matchIcon(item.taxonomy, iconicTaxa), "\"></i>");
  }
};
var returnTaxonIcon = function returnTaxonIcon(taxon) {
  if (!taxon) return;

  if (taxon.toLowerCase() === 'fungi') {
    return "<span class=\"iconic-taxa-categories-selected\">".concat(mushroomIcon, "</span>");
  } else {
    return "<span><i class=\"small-icon ".concat((0,api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_0__.matchRank)(taxon), "\"></i></span>");
  }
};

/***/ }),

/***/ "mASn":
/*!*****************************************!*\
  !*** ./src/ui/helpers/image-handler.js ***!
  \*****************************************/
/*! namespace exports */
/*! export denormaliseImages [provided] [unused] [could be renamed] */
/*! export imageMatch [provided] [used] [could be renamed] */
/*! export imageUseCases [provided] [used] [could be renamed] */
/*! export modalImageHandler [provided] [used] [could be renamed] */
/*! export modalImagesHandler [provided] [used] [could be renamed] */
/*! export prepImageForCarousel [provided] [used] [could be renamed] */
/*! export prepImagesForCarousel [provided] [used] [could be renamed] */
/*! export scaleImage [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "imageUseCases": () => /* binding */ imageUseCases,
/* harmony export */   "imageMatch": () => /* binding */ imageMatch,
/* harmony export */   "prepImageForCarousel": () => /* binding */ prepImageForCarousel,
/* harmony export */   "prepImagesForCarousel": () => /* binding */ prepImagesForCarousel,
/* harmony export */   "scaleImage": () => /* binding */ scaleImage,
/* harmony export */   "modalImagesHandler": () => /* binding */ modalImagesHandler,
/* harmony export */   "modalImageHandler": () => /* binding */ modalImageHandler
/* harmony export */ });
/* unused harmony export denormaliseImages */
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/common/image-slider */ "YMON");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}






var stripImageUrlOfScaleAndPrefix = function stripImageUrlOfScaleAndPrefix(img) {
  var prefix = img.provider === 'inat' ? 'https://static.inaturalist.org/photos/' : 'https://content.eol.org/data/media/';
  if (!img.url || _typeof(img.url) === 'object') return '';
  var part = img.url.replace('.260x190.jpg', '');
  part = part.replace('.98x68.jpg', '');
  part = part.replace('.jpg', '');
  part = part.replace(prefix, '');

  if (img.provider === 'inat') {
    part = part.split('?')[0];
  }

  return part;
};

var imageUseCases = {
  SPECIES_LIST: 'Species list',
  SPECIES_CARD: 'Species card',
  TAXON_CARD: 'Taxon card',
  SPECIES_SPECIMENS: 'Species specimens',
  NON_TAXON_CARD: 'Non-taxon card',
  VISUAL_MATCH: 'Visual match',
  MIXED_SPECIMENS: 'Mixed specimens',
  CAROUSEL: 'Carousel',
  TEXT_ENTRY: 'Text entry',
  ACTUAL_SIZE: 'Actual size',
  SPECIES_GRID: 'Species grid'
};
var denormaliseImages = function denormaliseImages(images) {
  var denormalisedImages = images.map(function (image) {
    image.photographersName = image.photographer ? image.photographer.full_name || '' : '';
    return image;
  });
  return denormalisedImages;
};
var imageMatch = function imageMatch(src1, src2) {
  if (!src2) return false;
  src1 = stripImageUrlOfScaleAndPrefix(src1);
  src2 = stripImageUrlOfScaleAndPrefix(src2);
  var isActiveImage = src1 === src2;
  return isActiveImage;
};
var prepImageForCarousel = function prepImageForCarousel(image, index, item, config, useCase) {
  var img = _objectSpread(_objectSpread({
    index: index + 1
  }, image), {}, {
    url: scaleImage(image, useCase, config).medium,
    // large: scaleImage({ url:image.src }).large,
    itemName: item.name,
    itemCommon: item.itemCommon,
    rightsHolder: image.rightsHolder || '',
    photographersName: image.photographer ? image.photographer.full_name || '' : '',
    provider: image.provider || ''
  });

  if (image.src) {
    img = _objectSpread(_objectSpread(_objectSpread({}, img), image.src), {}, {
      medium: image.medium
    });
  }

  return img;
};
var prepImagesForCarousel = function prepImagesForCarousel(item, config, useCase) {
  var images = item.images.map(function (image, index) {
    return prepImageForCarousel(image, index, item, config, useCase);
  });
  return images;
};
var scaleImage = function scaleImage(image) {
  if (!image.url) {
    return image;
  }

  image.part = stripImageUrlOfScaleAndPrefix(image);

  if (image.provider === 'inat') {
    image.small = "https://static.inaturalist.org/photos/".concat(image.part);
    image.medium = image.part.replace('small', 'medium');
    image.medium = "https://static.inaturalist.org/photos/".concat(image.medium);
    image.large = image.part.replace('small', 'large');
    image.large = "https://static.inaturalist.org/photos/".concat(image.large);
    return image;
  } else {
    image.small = "https://content.eol.org/data/media/".concat(image.part, ".98x68.jpg");
    image.medium = "https://content.eol.org/data/media/".concat(image.part, ".260x190.jpg");
    image.large = "https://content.eol.org/data/media/".concat(image.part, ".jpg");
    return image;
  }
};
var modalImagesHandler = function modalImagesHandler(images, item, collection, config, displayNameType) {
  images.forEach(function (image) {
    modalImageHandler(image, item, collection, config, displayNameType);
  });
};

var handleImageSelectionFromList = function handleImageSelectionFromList(image, item, collection, config) {
  var displayNameType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'binomial';
  var parent = document.querySelector('#imageModal .js-modal-image');
  var selectedItem = item || collection.items.find(function (item) {
    return item.name === image.dataset.itemName;
  });
  var images = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(selectedItem.images.map(function (image, index) {
    selectedItem.vernacularName = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__.itemProperties.getVernacularName(selectedItem, config);
    image = scaleImage(image, imageUseCases.CAROUSEL, config);
    return _objectSpread(_objectSpread({}, image), {}, {
      itemName: selectedItem.name,
      itemCommon: selectedItem.vernacularName
    });
  }));
  images = denormaliseImages(images);
  var selectedItemImage = selectedItem.images.find(function (i) {
    return imageMatch(i, image.dataset);
  });
  var selectedImage = {
    dataset: _objectSpread(_objectSpread({}, image.dataset), selectedItemImage)
  };
  (0,ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_2__.imageSlider)({
    config: config,
    images: images,
    parent: parent,
    image: selectedImage,
    identifier: selectedImage.dataset.itemName.replace(' ', '_')
  });
  var displayName = '';

  switch (displayNameType) {
    case 'biomial':
      displayName = selectedItem.name;
      break;

    case 'vernacular':
      displayName = selectedItem.vernacularName;
      break;

    case 'withheld':
      displayName = 'Species name withheld';
      break;

    default:
      displayName = "<span>".concat(selectedItem.vernacularName, "</span> <span class=\"latin-name\">").concat(selectedItem.name, "</span>");
  }

  document.querySelector('#imageModal .js-modal-image-title span:nth-child(1)').innerHTML = displayName;
};

var modalImageHandler = function modalImageHandler(image, item, collection, config) {
  var displayNameType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'binomial';
  image.addEventListener('click', function (e) {
    if (!item) return;
    handleImageSelectionFromList(image, item, collection, config, displayNameType);
  }, true);
};

/***/ }),

/***/ "+p2B":
/*!*********************************************!*\
  !*** ./src/ui/helpers/inat-autocomplete.js ***!
  \*********************************************/
/*! namespace exports */
/*! export inatAutocomplete [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "inatAutocomplete": () => /* binding */ inatAutocomplete
/* harmony export */ });
/* harmony import */ var autocompleter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! autocompleter */ "B89K");
/* harmony import */ var autocompleter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(autocompleter__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var api_inat_inat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/inat/inat */ "gEvk");
/* harmony import */ var geo_geo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! geo/geo */ "85yX");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}



 // https://github.com/kraaden/autocomplete

var inatAutocomplete = function inatAutocomplete(input, type, className, rb) {
  var MIN_LENGTH = 3;

  function getUserSuggestions(_x) {
    return _getUserSuggestions.apply(this, arguments);
  }

  function _getUserSuggestions() {
    _getUserSuggestions = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(text) {
      var users;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_1__.getAutocompleteBy)(text, 'users');

            case 2:
              users = _context.sent;
              return _context.abrupt("return", users.results.map(function (user) {
                return {
                  label: user.login_autocomplete,
                  value: user.id,
                  photo: user.icon,
                  name: user.name
                };
              }));

            case 4:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));
    return _getUserSuggestions.apply(this, arguments);
  }

  function getInatPlaceSuggestions(_x2) {
    return _getInatPlaceSuggestions.apply(this, arguments);
  }

  function _getInatPlaceSuggestions() {
    _getInatPlaceSuggestions = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(text) {
      var users;
      return regeneratorRuntime.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_1__.getAutocompleteBy)(text, 'places');

            case 2:
              users = _context2.sent;
              return _context2.abrupt("return", users.results.map(function (place) {
                return {
                  label: place.display_name,
                  value: place.id
                };
              }));

            case 4:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, this);
    }));
    return _getInatPlaceSuggestions.apply(this, arguments);
  }

  function getPlaceSuggestions(text, update) {
    var callback = null;

    callback = function callback(predictions) {
      update(predictions.map(function (prediction) {
        return {
          label: prediction.description,
          value: prediction.place_id
        };
      }));
    };

    (0,geo_geo__WEBPACK_IMPORTED_MODULE_2__.GoogleAutocomplete)(text, callback);
  }

  function getProjectSuggestions(_x3) {
    return _getProjectSuggestions.apply(this, arguments);
  }

  function _getProjectSuggestions() {
    _getProjectSuggestions = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(text) {
      var projects;
      return regeneratorRuntime.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_1__.getAutocompleteBy)(text, 'projects');

            case 2:
              projects = _context3.sent;
              return _context3.abrupt("return", projects.results.map(function (place) {
                return {
                  label: place.title,
                  value: place.id
                };
              }));

            case 4:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, this);
    }));
    return _getProjectSuggestions.apply(this, arguments);
  }

  var autocompleteRef = autocompleter__WEBPACK_IMPORTED_MODULE_0___default()({
    input: input,
    fetch: function fetch(text, update) {
      switch (type) {
        case 'users':
          getUserSuggestions(text).then(function (users) {
            update(users);
          });
          break;

        case 'places':
          getPlaceSuggestions(text, update);
          break;

        case 'projects':
          getProjectSuggestions(text).then(function (projects) {
            update(projects);
          });
          break;
      }
    },
    onSelect: function onSelect(item) {
      input.value = item.label;
      input.name = item.value;
    },
    className: className,
    rb: rb,
    minLength: MIN_LENGTH,
    debounceWaitMs: 200
  });
  return autocompleteRef;
};

/***/ }),

/***/ "l1q+":
/*!*****************************************!*\
  !*** ./src/ui/helpers/score-handler.js ***!
  \*****************************************/
/*! namespace exports */
/*! export bindScore [provided] [used] [could be renamed] */
/*! export continueLessonHandler [provided] [used] [could be renamed] */
/*! export renderScoreHTMLResponse [provided] [unused] [could be renamed] */
/*! export scoreHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "scoreHandler": () => /* binding */ scoreHandler,
/* harmony export */   "continueLessonHandler": () => /* binding */ continueLessonHandler,
/* harmony export */   "bindScore": () => /* binding */ bindScore
/* harmony export */ });
/* unused harmony export renderScoreHTMLResponse */
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/actions/action-creators */ "/CNf");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_helpers_test_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/test-handler */ "qgkr");
/* harmony import */ var redux_subscriptions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/subscriptions */ "6saE");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}






var scoreHandler = function scoreHandler(type, test, callback, config) {
  switch (type) {
    case 'radio':
    case 'text':
      return genericScoreHandler(test, callback, config);

    case 'block':
      blockScoreHander(test, callback, config);
      break;

    case 'strip':
      stripScoreHandler(test, callback, config);
      break;

    case 'image':
      imageScoreHandler(test, callback, config);
      break;

    case 'image-match':
      simpleScoreHandler(test, callback, config);
      break;
  }
};
var renderScoreHTMLResponse = function renderScoreHTMLResponse(response) {
  var html = response.success ? "<div class=\"answer-box-success\">\n                <span class=\"icon\"><i class=\"fas fa-check\"></i></span><span class=\"answer-response\">".concat(response.correct, "</span>\n                </div>") : "<div class=\"answer-box-alert\">\n                <span class=\"icon\"><i class=\"fas fa-times\"></i></span><span class=\"answer-response\">".concat(response.answer || response.incorrect, "</span>\n            </div>");
  return html;
};

var showResponseToAnswerHandler = function showResponseToAnswerHandler(response) {
  var questionText = document.querySelector(response.container) || document.querySelector('.js-txt-question');

  if (questionText) {
    questionText.innerHTML = renderScoreHTMLResponse(response);
  }
};

var continueLessonHandler = function continueLessonHandler(btn, score, timer) {
  btn.disabled = false;
  btn.style.cursor = 'pointer';
  btn.addEventListener('click', function (event) {
    btn.disabled = true;
    window.clearTimeout(timer);
    redux_subscriptions__WEBPACK_IMPORTED_MODULE_4__.subscription.removeAllQuizScreenSubs();
    bindScore(score);
  });
};

var simpleScoreHandler = function simpleScoreHandler(test, callback, config) {
  var score = (0,ui_helpers_test_handler__WEBPACK_IMPORTED_MODULE_3__.markTest)(test);
  var delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;
  redux_subscriptions__WEBPACK_IMPORTED_MODULE_4__.subscription.removeAllQuizScreenSubs();
  var scoreUpdateTimer = setTimeout(function () {
    bindScore(score);
  }, delay);

  if (callback) {
    callback(score, scoreUpdateTimer);
  } else {
    continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);
  }

  var correct = "Correct";
  var incorrect = "Incorrect";
  showResponseToAnswerHandler({
    success: score.success,
    correct: correct,
    incorrect: incorrect
  });
};

var genericScoreHandler = function genericScoreHandler(_score, callback, config) {
  var itemId = _score.itemId,
      question = _score.question,
      answer = _score.answer,
      target = _score.target,
      layoutCount = _score.layoutCount,
      points = _score.points,
      names = _score.names,
      questionText = _score.questionText,
      answers = _score.answers;

  var test = _objectSpread(_objectSpread({
    itemId: itemId
  }, question), {}, {
    answer: answer,
    points: points,
    names: names,
    questionText: questionText,
    answers: answers
  });

  var score = (0,ui_helpers_test_handler__WEBPACK_IMPORTED_MODULE_3__.markTest)(test);
  var responseTxt = test.names && test.names.length > 0 ? test.names[0] : test.binomial;
  var labelTxt = 'Species';

  if (score.taxon === 'genus') {
    responseTxt = score.genus;
    labelTxt = 'Genus name';
  }

  if (score.taxon === 'species') {
    responseTxt = score.species;
    labelTxt = 'Species name';
  }

  if (score.taxon === 'name') {
    responseTxt = score.binomial;
    labelTxt = 'Latin name';
  }

  if (score.taxon === 'family') {
    responseTxt = score.question;
    labelTxt = 'Family name';
  }

  var correct = "Correct";
  var incorrect = "Incorrect";
  var container = window.matchMedia("(max-height: 568px)").matches ? '.js-check-answer' : '.js-txt-question';
  showResponseToAnswerHandler({
    success: score.success,
    correct: correct,
    incorrect: incorrect,
    container: container,
    answer: score.question
  });
  score.layoutCount = layoutCount;
  var delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;
  redux_subscriptions__WEBPACK_IMPORTED_MODULE_4__.subscription.removeAllQuizScreenSubs();
  var scoreUpdateTimer = setTimeout(function () {
    bindScore(score);
  }, delay);
  if (callback) callback(score, scoreUpdateTimer);
  return {
    score: score,
    scoreUpdateTimer: scoreUpdateTimer
  };
};

var blockScoreHander = function blockScoreHander(test, callback, config) {
  var score = (0,ui_helpers_test_handler__WEBPACK_IMPORTED_MODULE_3__.markTest)(test);
  var delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;
  redux_subscriptions__WEBPACK_IMPORTED_MODULE_4__.subscription.removeAllQuizScreenSubs();
  var scoreUpdateTimer = setTimeout(function () {
    bindScore(score);
  }, delay);
  callback(score, scoreUpdateTimer, config);
};

var stripScoreHandler = function stripScoreHandler(test, callback, config) {
  var items = test.items,
      taxon = test.taxon;

  var handleClickEvent = function handleClickEvent(e) {
    e.preventDefault();
    var target = e.target;
    if (utils_utils__WEBPACK_IMPORTED_MODULE_2__.utils.hasClass(target, 'disabled')) return;
    var answerNode = target;
    var answer = answerNode.innerText.trim();
    var answerIndex = answerNode.dataset.answerIndex;
    var name = answerNode.dataset.name;
    var vernacular = target.dataset.vernacular;
    test.taxon = 'name';
    test.vernacular = vernacular;
    test.question = taxon.question;
    test.answer = name && name !== '' ? {
      term: answer,
      name: name
    } : answer;
    var score = (0,ui_helpers_test_handler__WEBPACK_IMPORTED_MODULE_3__.markTest)(_objectSpread(_objectSpread({}, test), {}, {
      answeredIndex: parseInt(answerIndex),
      answers: []
    }));
    target.classList.add(score.colour);
    items.forEach(function (strip) {
      var stripAnswer = strip.querySelector('button');
      var stripAnswerIndex = parseInt(stripAnswer.dataset.answerIndex);
      var stripAnswerName = stripAnswer.dataset.name || '';
      stripAnswer === '' ? score.answers.push(stripAnswer.innerText) : score.answers.push({
        term: stripAnswer.innerText,
        name: stripAnswerName
      });

      if (stripAnswerIndex === score.answerIndex) {
        strip.classList.add('snap-success');
      } else if (stripAnswerIndex === score.answeredIndex) {
        strip.classList.add('snap-alert');
      }
    });

    if (callback) {
      callback(score);
    } else {
      var _callback = function _callback(score) {
        var delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;
        var scoreUpdateTimer = setTimeout(function () {
          redux_subscriptions__WEBPACK_IMPORTED_MODULE_4__.subscription.removeAllQuizScreenSubs();
          bindScore(score);
        }, delay);
        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer); // screen is always null

        if (screen.name === 'family-strips') {
          document.querySelector('.js-question-question').innerHTML = item.taxonomy.family;
          document.querySelector('.js-question-help').classList.add('hide');
        }
      };

      _callback(score);
    }

    var correct = "Correct";
    var incorrect = "Incorrect";
    showResponseToAnswerHandler({
      success: score.success,
      correct: correct,
      incorrect: incorrect
    });
    items.forEach(function (item) {
      return item.classList.add('disabled');
    });
  };

  items.forEach(function (selected) {
    selected.addEventListener('click', handleClickEvent);
  });
  window.addEventListener('keydown', function (e) {
    if (e.key === 'Enter') {
      handleClickEvent(e);
    }
  }, {
    once: true
  });
};

var imageScoreHandler = function imageScoreHandler(test, callback, config) {
  var items = test.items,
      taxon = test.taxon;
  items.forEach(function (tile) {
    tile.addEventListener('click', function (event) {
      var img = event.target;
      var answer = img.dataset.answer;
      if (!answer) return;
      test.taxon = 'name';
      test.question = taxon.name;
      test.answer = answer;
      var score = (0,ui_helpers_test_handler__WEBPACK_IMPORTED_MODULE_3__.markTest)(test);
      tile.style.filter = 'saturate(100%)';
      img.parentNode.style.filter = 'saturate(100%)';
      items.forEach(function (tile) {
        tile.style.filter = 'saturate(10%)';
        tile.style.opacity = .3;

        if (tile.dataset.answer.trim().toLowerCase() === taxon.name.trim().toLowerCase()) {
          tile.style.filter = 'saturate(100%)';
          tile.style.opacity = 1;
        }
      });
      var delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;
      redux_subscriptions__WEBPACK_IMPORTED_MODULE_4__.subscription.removeAllQuizScreenSubs();
      var scoreUpdateTimer = setTimeout(function () {
        bindScore(score);
      }, delay);
      if (callback) callback(score, scoreUpdateTimer);
    });
  });
};

var bindScore = function bindScore(score) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      collection = _store$getState.collection;

  score.collectionId = collection.id;
  redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__.actions.boundUpdateScore(score);
};

/***/ }),

/***/ "qgkr":
/*!****************************************!*\
  !*** ./src/ui/helpers/test-handler.js ***!
  \****************************************/
/*! namespace exports */
/*! export cleanText [provided] [unused] [could be renamed] */
/*! export isAnswerEqualToQuestion [provided] [unused] [could be renamed] */
/*! export markTest [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "markTest": () => /* binding */ markTest
/* harmony export */ });
/* unused harmony exports cleanText, isAnswerEqualToQuestion */
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ramda */ "i1an");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "Jq34");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ramda */ "MbZt");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ramda */ "kGug");

var cleanText = function cleanText(text) {
  return text.term ? text.term.toLowerCase() : text.toLowerCase().replace(/ /g, '');
};
var isAnswerEqualToQuestion = function isAnswerEqualToQuestion(question, answer) {
  var eqValues = (0,ramda__WEBPACK_IMPORTED_MODULE_0__.default)(ramda__WEBPACK_IMPORTED_MODULE_1__.default, ramda__WEBPACK_IMPORTED_MODULE_2__.default);
  return eqValues(cleanText(question), cleanText(answer));
};

var isAnswerCorrect = function isAnswerCorrect(score) {
  var isCorrect;

  if (score.answeredIndex) {
    return parseInt(score.answeredIndex) === score.answerIndex;
  }

  score.answer = score.answer.term || score.answer;
  score.answer = score.answer.trim();
  isCorrect = isAnswerEqualToQuestion(score.question, score.answer); // score.clue = score.clue ? score.clue.toLowerCase().replace(/ /g,'') : null;
  // isCorrect = score.clue ? score.answer.indexOf(score.clue) > -1 : isCorrect;

  switch (score.taxon) {
    case 'vernacular':
      score.names = score.names.map(function (name) {
        return name.toLowerCase();
      });

      if (score.names && score.names.length > 0) {
        var alternativeIsCorrect = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(score.answer, score.names);
        if (!isCorrect && alternativeIsCorrect) score.alternativeAccepted = true;
        isCorrect = isCorrect || alternativeIsCorrect;
      }

      break;
  }

  return isCorrect;
};

var isTraitAnswerCorrect = function isTraitAnswerCorrect(score) {
  var doArraysHaveSameValues = (0,ramda__WEBPACK_IMPORTED_MODULE_0__.default)(ramda__WEBPACK_IMPORTED_MODULE_1__.default, ramda__WEBPACK_IMPORTED_MODULE_2__.default);
  return doArraysHaveSameValues(score.answer, score.question);
};

var markTest = function markTest(test) {
  var score = (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(test);
  score.success = score.trait ? isTraitAnswerCorrect(score) : isAnswerCorrect(score);
  score.colour = score.success ? 'snap-success' : 'snap-alert';
  return score;
};

/***/ }),

/***/ "B9Ei":
/*!******************************************!*\
  !*** ./src/ui/helpers/traits-handler.js ***!
  \******************************************/
/*! namespace exports */
/*! export traitsHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "traitsHandler": () => /* binding */ traitsHandler
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ramda */ "i1an");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ramda */ "Jq34");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ramda */ "MbZt");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/utils */ "EHpu");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _iterableToArrayLimit(arr, i) {
  if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;

  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}





var getRandomTrait = function getRandomTrait(traits, traitsToIgnore) {
  var allowedTraits = {};

  for (var _i = 0, _Object$entries = Object.entries(traits); _i < _Object$entries.length; _i++) {
    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
        key = _Object$entries$_i[0],
        obj = _Object$entries$_i[1];

    if (!(0,ramda__WEBPACK_IMPORTED_MODULE_2__.default)(key.toLowerCase(), traitsToIgnore)) {
      allowedTraits[key] = obj.unit ? ["".concat(obj.value).concat(obj.unit)] : obj.value;
    }
  }

  var trait = utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getRandomObjectProperty(allowedTraits);
  return trait;
};

var getTraitsPoolForUnits = function getTraitsPoolForUnits(trait) {
  // create set of numeric answers based on the value
  var traitsPool = [1, 2, 3, 4, 5, 6, 7, 8, 9];

  if (trait.unit === 'MM') {// months
    // find distance between first and second and add answers with similar gap
    // e.g. jan-feb produces aug-sep, nov-dec, etc.
  }

  return {
    traitsPool: traitsPool,
    help: 'Pick the best range'
  };
};

var getTraitsPoolForRoles = function getTraitsPoolForRoles(trait) {
  enumKey = trait.role; // e.g. name of role, but role of predator; (and possibly need to apply logic as below)

  var traitsPool = ['role1', 'role2', 'role3', 'role4', 'role5', 'role6', 'role7', 'role8', 'role9', 'role10'];
  return {
    traitsPool: traitsPool,
    help: 'symbiosis'
  };
};

var getTraitValues = function getTraitValues(trait, traits) {
  var traitKeyParts = trait.key.split(' ');
  var enumKey; // e.g map 'leaf variation' to leafVariation

  traitKeyParts.forEach(function (part, index) {
    if (index === 0) {
      enumKey = part.toLowerCase();
    } else {
      enumKey += utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.capitaliseFirst(part);
    }
  });
  var traitValues = traits[enumKey];
  return traitValues;
};

var getTraitsPool = function getTraitsPool(trait, traits) {
  var traitsPool = [];
  var traitValues = getTraitValues(trait, traits);

  if (!traitValues) {
    traitValues = traits[ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__.itemProperties.getRootTraitValue(utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.toCamelCase(trait.key))];
    if (traitValues) traitValues.help = trait.key;
  }

  if (traitValues) {
    for (var _i2 = 0, _Object$entries2 = Object.entries(traitValues); _i2 < _Object$entries2.length; _i2++) {
      var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),
          key = _Object$entries2$_i[0],
          obj = _Object$entries2$_i[1];

      if (!(0,ramda__WEBPACK_IMPORTED_MODULE_2__.default)(key, ['type', 'name', 'help'])) {
        if (key !== trait.key) {
          traitsPool.push(obj);
        }
      }
    }
  }

  var help = traitValues ? traitValues.help || traitValues.name : trait.key;
  return {
    traitsPool: traitsPool,
    help: help
  };
};

var getSetOfTraitAnswers = function getSetOfTraitAnswers(pool, trait) {
  var traitSet = trait.value;
  traitSet = traitSet.map(function (t) {
    return t.trim();
  });
  traitSet = utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.shuffleArray(traitSet); // take maximum of 2 values from the trait values array

  var traitValues = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(2, traitSet);
  var sets = [];

  if (traitValues.length === 1) {
    sets = [].concat(_toConsumableArray((0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(5, pool.filter(function (value) {
      return value !== trait.value[0];
    }))), [trait.value[0]]);
  } else {
    // create a 'set' of all possible unique 2-value combinations
    pool.forEach(function (a) {
      pool.forEach(function (b) {
        if (a !== b) {
          var exists = sets.filter(function (s) {
            return s === [a, b] || s === [b, a];
          }).length > 0;

          if (!exists) {
            sets.push([a, b]);
          }
        }
      });
    });
    sets = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(6, utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.shuffleArray(sets)); // remove any combination that matches the trait value set (in either order) 

    sets = sets.map(function (set) {
      if (set[0] !== traitSet[0] && set[1] !== traitSet[1] || set[0] !== traitSet[1] && set[1] !== traitSet[0]) {
        return set;
      }
    }).filter(function (s) {
      return s;
    });
    sets = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(5, sets);
    sets = [].concat(_toConsumableArray(sets), [traitSet]);

    if (sets.length === 0) {
      sets = ['a', 'b', trait.value];
    }

    sets = sets.map(function (set) {
      return set.join(', ');
    });
  }

  return utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.shuffleArray(sets);
};

var getTraitByKey = function getTraitByKey(traits, traitKey) {
  return traits[Object.keys(traits).find(function (key) {
    return key === traitKey;
  })];
};

var getTraitValueByKey = function getTraitValueByKey(traits, traitKey) {
  var trait = getTraitByKey(traits, traitKey);
  if (trait) return trait.value;
};

var hasTraitPropeties = function hasTraitPropeties(traits) {
  for (var prop in traits) {
    if (traits.hasOwnProperty(prop)) {
      return true;
    }
  }
};

var getLinkedTaxaTraits = function getLinkedTaxaTraits(traits) {
  var taxaTraits = [];

  for (var _i3 = 0, _Object$entries3 = Object.entries(traits); _i3 < _Object$entries3.length; _i3++) {
    var _Object$entries3$_i = _slicedToArray(_Object$entries3[_i3], 2),
        key = _Object$entries3$_i[0],
        obj = _Object$entries3$_i[1];

    if (obj.type) {
      taxaTraits.push({
        name: key,
        value: obj.value,
        type: obj.type
      });
    } else if (key === 'lookalikes') {
      taxaTraits.push({
        name: key,
        value: obj.value,
        type: 'lookalike'
      });
    } else if (key === 'symbionts') {
      taxaTraits.push({
        name: key,
        value: obj.value,
        type: 'symbionts'
      });
    }
  }

  return taxaTraits;
};

var getTraitsToExclude = function getTraitsToExclude() {
  return ['symbionts', 'voice', 'pollination', 'name', 'units', 'song', 'uk rank', 'colour', 'bark colour', 'height', 'physiology', 'description', 'usage', 'habitat', 'symbiont' //'characteristic'
  ];
};

var handleUnit = function handleUnit(unit) {
  unit = unit || '';

  switch (unit) {
    case 'DD':
      return ' days';

    case 'MM':
      return '';

    case 'YY':
      return ' years';

    default:
      return unit;
  }
};

var convertTraitsToNameValuePairsArray = function convertTraitsToNameValuePairsArray(traits, traitsToExclude, item) {
  if (!hasTraitPropeties(traits)) return {};
  var includedTraits = [];

  var _loop = function _loop() {
    var _Object$entries4$_i = _slicedToArray(_Object$entries4[_i4], 2),
        key = _Object$entries4$_i[0],
        obj = _Object$entries4$_i[1];

    if (!(0,ramda__WEBPACK_IMPORTED_MODULE_2__.default)(key, traitsToExclude)) {
      if (key === 'lookalikes') {
        obj.forEach(function (species) {
          includedTraits.push({
            name: key,
            value: [species.lookalike.name],
            description: species.description,
            lookalike: {
              name: species.lookalike.name,
              description: species.lookalike.description
            }
          });
        });
      } else if (key === 'relationships') {
        obj.forEach(function (species) {
          includedTraits.push({
            name: key,
            value: [species.symbiont.name]
          });
        });
      } else {
        includedTraits.push({
          name: key,
          value: obj.value,
          unit: handleUnit(obj.unit),
          type: obj.type || ''
        });
      }
    }
  };

  for (var _i4 = 0, _Object$entries4 = Object.entries(traits); _i4 < _Object$entries4.length; _i4++) {
    _loop();
  }

  return includedTraits;
};

var getNMultiplesFromArray = function getNMultiplesFromArray(arra, arra_size) {
  if (arra.length === 0) return [];
  var result_set = [],
      result;

  for (var x = 0; x < Math.pow(2, arra.length); x++) {
    result = [];
    var i = arra.length - 1;

    do {
      if ((x & 1 << i) !== 0) {
        result.push(arra[i]);
      }
    } while (i--);

    if (result.length >= arra_size) {
      result_set.push(result);
    }
  }

  return result_set.filter(function (set) {
    return set.length === arra_size;
  });
};

var doArraysHaveSameValues = (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(ramda__WEBPACK_IMPORTED_MODULE_5__.default, ramda__WEBPACK_IMPORTED_MODULE_6__.default);
var traitsHandler = {
  getRandomTrait: getRandomTrait,
  getTraitsPoolForUnits: getTraitsPoolForUnits,
  getTraitsPoolForRoles: getTraitsPoolForRoles,
  getTraitValues: getTraitValues,
  getTraitsPool: getTraitsPool,
  getSetOfTraitAnswers: getSetOfTraitAnswers,
  getTraitByKey: getTraitByKey,
  getTraitValueByKey: getTraitValueByKey,
  getLinkedTaxaTraits: getLinkedTaxaTraits,
  getTraitsToExclude: getTraitsToExclude,
  convertTraitsToNameValuePairsArray: convertTraitsToNameValuePairsArray,
  getNMultiplesFromArray: getNMultiplesFromArray,
  doArraysHaveSameValues: doArraysHaveSameValues,
  hasTraitPropeties: hasTraitPropeties
};

/***/ }),

/***/ "2pV3":
/*!******************************************************!*\
  !*** ./src/ui/screens/bonus/bonus-specimen-tiles.js ***!
  \******************************************************/
/*! namespace exports */
/*! export renderBonusSpecimenTiles [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderBonusSpecimenTiles": () => /* binding */ renderBonusSpecimenTiles
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_screens_landscape_specimen_tiles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/landscape/specimen-tiles */ "gYBR");


 // import { renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';

var renderBonusSpecimenTiles = function renderBonusSpecimenTiles(bonusLayout) {
  var collection = (0,ramda__WEBPACK_IMPORTED_MODULE_2__.default)(redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState().collection);
  collection.nextItem = bonusLayout.item;
  collection.nextItem = collection.nextItem || collection.items[collection.itemIndex];
  var lookalikesCount = bonusLayout.item ? bonusLayout.overrides.trait.lookalikes ? bonusLayout.overrides.trait.lookalikes.length + 1 : 0 // lookalikes + item itself
  : 0;

  if (lookalikesCount > 0) {
    var noOfImagesPerItem = 6 / lookalikesCount; // renderMixedSpecimenImages(collection, noOfImagesPerItem, [ collection.nextItem, ...bonusLayout.overrides.trait.lookalikes]);
  } else {
    (0,ui_screens_landscape_specimen_tiles__WEBPACK_IMPORTED_MODULE_1__.renderSpecimenTiles)(collection);
  }
};

/***/ }),

/***/ "kxD5":
/*!********************************************!*\
  !*** ./src/ui/screens/bonus/bonus-test.js ***!
  \********************************************/
/*! namespace exports */
/*! export renderBonusTest [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderBonusTest": () => /* binding */ renderBonusTest
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/multichoice/multi-strips */ "AIrL");
/* harmony import */ var ui_screens_multichoice_landscape_mixed_specimen_right_mixed_specimen_question__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question */ "lFzj");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}





var renderBonusTest = function renderBonusTest(bonusLayout) {
  var collection = (0,ramda__WEBPACK_IMPORTED_MODULE_3__.default)(redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState().collection);
  collection.nextItem = bonusLayout.item;

  if (bonusLayout.overrides && bonusLayout.overrides.trait && bonusLayout.overrides.trait.name === 'lookalikes') {
    collection.items = [].concat(_toConsumableArray(bonusLayout.overrides.trait.lookalikes), [collection.nextItem]); // currently no logic to support this as multiple images was replaced by slider (as in portrait)
    // option could be to have e.g. 6 images, 3 of species and 3 of lookalike

    (0,ui_screens_multichoice_landscape_mixed_specimen_right_mixed_specimen_question__WEBPACK_IMPORTED_MODULE_2__.renderMixedSpecimenQuestion)(collection, bonusLayout);
  } else {
    (0,ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_1__.renderMultiStrips)(collection, bonusLayout);
  }
};

/***/ }),

/***/ "Vt4y":
/*!**************************************!*\
  !*** ./src/ui/screens/cards/card.js ***!
  \**************************************/
/*! namespace exports */
/*! export renderCard [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderCard": () => /* binding */ renderCard
/* harmony export */ });
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/common/image-slider */ "YMON");
/* harmony import */ var xeno_canto_birdsong__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! xeno-canto/birdsong */ "b58l");
/* harmony import */ var ui_screens_common_look_alikes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/common/look-alikes */ "cC2e");
/* harmony import */ var ui_screens_common_info_slider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/common/info-slider */ "o1yy");
/* harmony import */ var ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/helpers/icon-handler */ "iZK6");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_common_inat_box__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ui/screens/common/inat-box */ "rDnI");
/* harmony import */ var ui_screens_common_calendar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ui/screens/common/calendar */ "54P6");
/* harmony import */ var ui_screens_common_taxa_box__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ui/screens/common/taxa-box */ "1O4T");
/* harmony import */ var ui_screens_common_badge__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ui/screens/common/badge */ "d2dY");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var ui_screens_cards_card_template_html__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ui/screens/cards/card-template.html */ "dypA");
/* harmony import */ var ui_screens_cards_card_template_html__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(ui_screens_cards_card_template_html__WEBPACK_IMPORTED_MODULE_16__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}


















var renderCard = function renderCard(collection) {
  var mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'STAND_ALONE';
  var selectedItem = arguments.length > 2 ? arguments[2] : undefined;
  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody;
  var isInCarousel = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  if (!selectedItem) return;

  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      layout = _store$getState.layout,
      config = _store$getState.config;

  var item;

  var init = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
      var getItemWithProps, rootNode, screen, prev, next, template;
      return regeneratorRuntime.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              getItemWithProps = /*#__PURE__*/function () {
                var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(item) {
                  var getItem, itemWithProps, names;
                  return regeneratorRuntime.wrap(function _callee2$(_context2) {
                    while (1) {
                      switch (_context2.prev = _context2.next) {
                        case 0:
                          if (!item.eolId) {
                            _context2.next = 2;
                            break;
                          }

                          return _context2.abrupt("return", new Promise(function (resolve) {
                            return resolve(item);
                          }));

                        case 2:
                          getItem = /*#__PURE__*/function () {
                            var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item) {
                              return regeneratorRuntime.wrap(function _callee$(_context) {
                                while (1) {
                                  switch (_context.prev = _context.next) {
                                    case 0:
                                      if (!item.family) {
                                        _context.next = 4;
                                        break;
                                      }

                                      _context.t0 = new Promise(function (resolve) {
                                        return resolve(item);
                                      });
                                      _context.next = 7;
                                      break;

                                    case 4:
                                      _context.next = 6;
                                      return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_15__.firestore.getSpeciesByName(item.name);

                                    case 6:
                                      _context.t0 = _context.sent;

                                    case 7:
                                      return _context.abrupt("return", _context.t0);

                                    case 8:
                                    case "end":
                                      return _context.stop();
                                  }
                                }
                              }, _callee, this);
                            }));

                            return function getItem(_x2) {
                              return _ref3.apply(this, arguments);
                            };
                          }();

                          _context2.next = 5;
                          return getItem(item);

                        case 5:
                          itemWithProps = _context2.sent;
                          _context2.next = 8;
                          return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_15__.firestore.getTaxonByName(config, itemWithProps.taxonomy[ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_14__.enums.taxon.FAMILY.name.toLowerCase()]);

                        case 8:
                          _context2.t0 = _context2.sent;

                          if (_context2.t0) {
                            _context2.next = 11;
                            break;
                          }

                          _context2.t0 = {
                            names: [itemWithProps.taxonomy.family]
                          };

                        case 11:
                          itemWithProps.family = _context2.t0;
                          _context2.next = 14;
                          return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_15__.firestore.getTaxonByName(config, itemWithProps.taxonomy[ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_14__.enums.taxon.ORDER.name.toLowerCase()]);

                        case 14:
                          itemWithProps.order = _context2.sent;
                          _context2.next = 17;
                          return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_15__.firestore.getTraitsBySpeciesName(item.name);

                        case 17:
                          itemWithProps.traits = _context2.sent;
                          itemWithProps.vernacularName = itemWithProps.vernacularName || ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_3__.itemProperties.getVernacularName(item, config);
                          names = item.name.split(' ');
                          itemWithProps.taxonomy.genus = names[0];
                          itemWithProps.taxonomy.species = names[1];
                          return _context2.abrupt("return", itemWithProps);

                        case 23:
                        case "end":
                          return _context2.stop();
                      }
                    }
                  }, _callee2, this);
                }));

                return function getItemWithProps(_x) {
                  return _ref2.apply(this, arguments);
                };
              }();

              item = selectedItem || collection.nextItem;
              _context3.next = 4;
              return getItemWithProps(item);

            case 4:
              item = _context3.sent;
              _context3.t0 = mode;
              _context3.next = _context3.t0 === 'STAND_ALONE' ? 8 : _context3.t0 === 'SWAP_OUT' ? 10 : _context3.t0 === 'MODAL' ? 12 : 14;
              break;

            case 8:
              rootNode = config.isLandscapeMode ? modal.querySelector('.js-modal-text') : document.querySelector('.main-lesson-body');
              return _context3.abrupt("break", 14);

            case 10:
              rootNode = config.isLandscapeMode ? parent : document.querySelector('.js-species-container');
              return _context3.abrupt("break", 14);

            case 12:
              rootNode = document.querySelector('#cardModal');
              return _context3.abrupt("break", 14);

            case 14:
              if (!(mode === 'STAND-ALONE')) {
                _context3.next = 18;
                break;
              }

              screen = layout.screens.filter(function (el) {
                return el.name === 'species-card';
              })[0];

              if (screen) {
                _context3.next = 18;
                break;
              }

              return _context3.abrupt("return");

            case 18:
              prev = document.querySelector('#cardModal .js-prev');
              next = document.querySelector('#cardModal .js-next');
              if (prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');
              if (next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');
              template = document.createElement('template');
              template.innerHTML = (ui_screens_cards_card_template_html__WEBPACK_IMPORTED_MODULE_16___default());
              renderCommonParts(template, config, item, collection, mode, parent, rootNode, isInCarousel);
              config.isPortraitMode ? renderPortrait(item, config, mode, rootNode) : renderLandscape(item, config, mode, rootNode);

            case 26:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, this);
    }));

    return function init() {
      return _ref.apply(this, arguments);
    };
  }();

  init();
};

var renderLandscape = function renderLandscape(item, config, mode, rootNode) {
  var src = rootNode.querySelector('.js-bird-song');
  (0,xeno_canto_birdsong__WEBPACK_IMPORTED_MODULE_5__.getBirdSong)(item, src, config.isPortraitMode);
  var inatNode = rootNode.querySelector('.js-inat-box');
  (0,ui_screens_common_inat_box__WEBPACK_IMPORTED_MODULE_10__.renderInatDataBox)(inatNode, item, config, mode);
  (0,ui_screens_common_calendar__WEBPACK_IMPORTED_MODULE_11__.renderCalendar)(rootNode.querySelector('.js-calendar-box'), item, config);
  (0,ui_screens_common_look_alikes__WEBPACK_IMPORTED_MODULE_6__.lookalikeSpecies)(item, config, rootNode);
};

var renderPortrait = function renderPortrait(item, config, mode, rootNode) {
  var images = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_9__.prepImagesForCarousel)(item, config, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_9__.imageUseCases.SPECIES_CARD);
  var parent = rootNode.querySelector('.js-test-card-container-images');
  (0,ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_4__.imageSlider)({
    config: config,
    images: images,
    parent: parent,
    parentScreen: rootNode.querySelector('.card-card'),
    identifier: item.name.replace(' ', '_')
  });
  var player = rootNode.querySelector('.js-bird-song-player');

  if (mode == 'MODAL') {
    player.style.display = 'none';
    return;
  }

  ;
  (0,xeno_canto_birdsong__WEBPACK_IMPORTED_MODULE_5__.getBirdSong)(item, player, config.isPortraitMode);
  player.addEventListener('click', function () {
    var iframe = document.createElement('iframe');
    iframe.id = 'birdsong';
    iframe.style.border = 0;
    iframe.src = player.dataset.src;
    document.querySelector('#basicModal .modal-body').classList.add('bird-song-bg');
    document.querySelector('#basicModal .js-modal-text-title').innerHTML = "".concat(item.name);
    var elm = document.querySelector('#basicModal .js-modal-text');

    while (elm.firstChild) {
      elm.removeChild(elm.firstChild);
    }

    elm.appendChild(iframe);
  });
};

var renderCommonParts = function renderCommonParts(template, config, item, collection, mode, parent, rootNode, isInCarousel) {
  var image = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_9__.scaleImage)({
    url: item.starred || item.images[0].url
  }, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_9__.imageUseCases.SPECIES_CARD, config);
  var clone = document.importNode(template.content, true);
  parent.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
    name: item.name,
    vernacularName: item.vernacularName,
    image: image,
    iconicTaxon: item.iconicTaxon
  }, template.content, parent, clone);
  (0,ui_screens_common_taxa_box__WEBPACK_IMPORTED_MODULE_12__.renderTaxaBox)(rootNode.querySelector('.js-taxa-box'), {
    item: item,
    familyName: item.taxonomy.family,
    familyVernacularName: item.family.vernacularName || ''
  });
  (0,ui_screens_common_info_slider__WEBPACK_IMPORTED_MODULE_7__.infoSlider)(item, rootNode.querySelector('.js-info-box'), mode);
  (0,ui_screens_common_badge__WEBPACK_IMPORTED_MODULE_13__.renderBadge)(rootNode.querySelector('.js-names-badge'), item, config);
  (0,ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_8__.renderIcon)(item.taxonomy, rootNode);

  if (mode === 'MODAL') {
    rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;
    var prev = rootNode.querySelector('#cardModal .js-prev > span');
    prev.dataset.id = item.id;
    prev.dataset.transition = 'prev';
    prev.dataset.modal = 'cardModal';
    var next = rootNode.querySelector('#cardModal .js-next > span');
    next.dataset.id = item.id;
    next.dataset.transition = 'next';
    next.dataset.modal = 'cardModal';
    var lines = document.getElementsByTagName('hr');
    Array.from(lines).forEach(function (hr) {
      return hr.style.display = 'none';
    });
  }

  setTimeout(function () {
    if (config.isPortraitMode) {
      // hide attribution for now - space issue various across devices
      var attributions = document.querySelectorAll('.js-attribution-layer');
      attributions.forEach(function (attribution) {
        return attribution.classList.add('hide-important');
      });
      var indicators = document.querySelectorAll('.js-carousel-indicators');
      indicators.forEach(function (indicator) {
        return indicator.classList.add('hide-important');
      });
    }
  });
};

/***/ }),

/***/ "Ghzi":
/*!***************************************************************!*\
  !*** ./src/ui/screens/cards/non-taxon-card-specimen-tiles.js ***!
  \***************************************************************/
/*! namespace exports */
/*! export renderNonTaxonCardSpecimenTiles [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderNonTaxonCardSpecimenTiles": () => /* binding */ renderNonTaxonCardSpecimenTiles
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/cards/non-taxon-card */ "gtMu");
/* harmony import */ var ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/landscape/specimen-tiles-template.html */ "u8BC");
/* harmony import */ var ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5__);






var renderNonTaxonCardSpecimenTiles = function renderNonTaxonCardSpecimenTiles(collection) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      config = _store$getState.config;

  var callback = function callback(images) {
    var template = document.createElement('template');
    template.innerHTML = (ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5___default());
    var parent = ui_dom__WEBPACK_IMPORTED_MODULE_1__.DOM.leftBody;
    parent.innerHTML = '';
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
      images: images
    }, template.content, parent);
    (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__.modalImagesHandler)(document.querySelectorAll('.js-tiles .square'), null, collection, config);
  };

  var item = collection.nextItem;
  if (!item) return;
  (0,ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_4__.subscribeToNonTaxaSelection)(callback);
};

/***/ }),

/***/ "gtMu":
/*!************************************************!*\
  !*** ./src/ui/screens/cards/non-taxon-card.js ***!
  \************************************************/
/*! namespace exports */
/*! export renderNonTaxonCard [provided] [used] [could be renamed] */
/*! export subscribeToNonTaxaSelection [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "subscribeToNonTaxaSelection": () => /* binding */ subscribeToNonTaxaSelection,
/* harmony export */   "renderNonTaxonCard": () => /* binding */ renderNonTaxonCard
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/common/image-slider */ "YMON");
/* harmony import */ var api_snapdragon_non_taxa__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! api/snapdragon/non-taxa */ "bcOh");
/* harmony import */ var wikipedia_wiki__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! wikipedia/wiki */ "nCaV");
/* harmony import */ var wikipedia_wiki_modal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! wikipedia/wiki-modal */ "kHXf");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_cards_non_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ui/screens/cards/non-taxon-card-template.html */ "PMM/");
/* harmony import */ var ui_screens_cards_non_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(ui_screens_cards_non_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_11__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}














var subscriptions = [];
var subscribeToNonTaxaSelection = function subscribeToNonTaxaSelection(callback) {
  subscriptions.push(callback);
};
var renderNonTaxonCard = function renderNonTaxonCard() {
  var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'STAND_ALONE';
  var keyTrait = arguments.length > 1 ? arguments[1] : undefined;
  var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ui_dom__WEBPACK_IMPORTED_MODULE_3__.DOM.rightBody;
  var url = arguments.length > 3 ? arguments[3] : undefined;
  var isInCarousel = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
  var prev = document.querySelector('#cardModal .js-prev');
  var next = document.querySelector('#cardModal .js-next');
  if (prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');
  if (next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');

  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState(),
      units = _store$getState.units,
      config = _store$getState.config;

  var nonTaxa = api_snapdragon_non_taxa__WEBPACK_IMPORTED_MODULE_6__.getNonTaxa(units).filter(function (nt) {
    return nt.group === api_snapdragon_non_taxa__WEBPACK_IMPORTED_MODULE_6__.nonTaxaGroup[0].LICHEN_FORM;
  });
  nonTaxa.forEach(function (nt) {
    nt.name = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_4__.itemProperties.getVernacularName(nt, config, false, 'name');
  });
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_cards_non_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_11___default());

  var onChange = function onChange(items) {
    subscriptions.forEach(function (sub) {
      return sub(items);
    });
  };

  var prepImages = function prepImages(items) {
    var _ref;

    var itemImagesArray = items.map(function (item) {
      return (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_10__.prepImagesForCarousel)(item, config, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_10__.imageUseCases.NON_TAXON_CARD);
    });
    var itemImages = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray((_ref = []).concat.apply(_ref, _toConsumableArray(itemImagesArray)));
    return (0,ramda__WEBPACK_IMPORTED_MODULE_12__.default)(9, itemImages);
  };

  var callback = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {
      var nonTaxon, items, portraitImagesNode, images, wikiNode, lookup, idNode, definitionNode, nameNode;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              nonTaxon = nonTaxa.find(function (nt) {
                return nt.id === id;
              });
              _context.next = 3;
              return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.firestore.getSpeciesByNameInParallel(nonTaxon.examples);

            case 3:
              items = _context.sent;
              items = items.filter(function (item) {
                return item.images;
              });
              portraitImagesNode = document.querySelector('.js-non-taxon-card-images');
              images = prepImages(items);

              if (nonTaxon.type) {
                document.querySelector('.js-species-header img').src = "https://content.eol.org/data/media/".concat(nonTaxon.url);
              } else {
                config.isPortraitMode ? (0,ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_5__.imageSlider)({
                  config: config,
                  images: images,
                  portraitImagesNode: portraitImagesNode
                }) : onChange(images);
              }

              wikiNode = document.querySelector('.js-non-taxon-card-wiki');
              lookup = {
                name: nonTaxon.name
              };
              idNode = document.querySelector('.id-box > div:nth-child(2) > div');
              idNode.innerHTML = nonTaxon.quickId;
              definitionNode = document.querySelector('.js-non-taxa-definition div');
              definitionNode.innerHTML = nonTaxon.definition;
              nameNode = document.querySelector('.js-non-taxon-card .js-names-container > div:nth-child(1)');
              nameNode.innerHTML = nonTaxon.id;

              if (mode === 'MODAL') {} else {
                (0,wikipedia_wiki_modal__WEBPACK_IMPORTED_MODULE_8__.renderWikiModal)(lookup, wikiNode, config);
                (0,wikipedia_wiki__WEBPACK_IMPORTED_MODULE_7__.renderWiki)(wikiNode, lookup, config.language);
              }

            case 17:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function callback(_x) {
      return _ref2.apply(this, arguments);
    };
  }();

  var rootNode;

  switch (mode) {
    case 'STAND_ALONE':
      rootNode = document.querySelector('.main-lesson-body');
      break;

    case 'SWAP_OUT':
      rootNode = document.querySelector('.js-taxon-container');
      break;

    case 'MODAL':
      rootNode = document.querySelector('#cardModal');
      break;
  }

  parent.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_9__.renderTemplate)({
    group: nonTaxa,
    image: (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_10__.scaleImage)({
      url: url
    })
  }, template.content, parent);

  if (mode === 'MODAL') {
    rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = "Lichen Forms";
  }

  rootNode.querySelectorAll('.js-non-taxa .btn.btn-secondary').forEach(function (form) {
    form.addEventListener('click', function (event) {
      var id = event.target.id;
      callback(id);
    });
  });
  var id = keyTrait || nonTaxa[0].id;
  document.getElementById(id).click();
};

/***/ }),

/***/ "+pkx":
/*!********************************************!*\
  !*** ./src/ui/screens/cards/taxon-card.js ***!
  \********************************************/
/*! namespace exports */
/*! export renderTaxonCard [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderTaxonCard": () => /* binding */ renderTaxonCard
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_screens_common_info_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/common/info-slider */ "o1yy");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/helpers/icon-handler */ "iZK6");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_cards_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/cards/taxon-card-template.html */ "IJQV");
/* harmony import */ var ui_screens_cards_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(ui_screens_cards_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_7__);









var transition;
var modalCarousel = document.querySelector('#cardModal .carousel');

if (modalCarousel) {
  modalCarousel.addEventListener('click', function (event) {
    transition = event.target.dataset.transition;
  });
}

var renderTaxonCard = function renderTaxonCard(collection) {
  var mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'STAND_ALONE';
  var selectedItem = arguments.length > 2 ? arguments[2] : undefined;
  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ui_dom__WEBPACK_IMPORTED_MODULE_1__.DOM.rightBody;
  var speciesTaxon = arguments.length > 4 ? arguments[4] : undefined;
  var rank = arguments.length > 5 ? arguments[5] : undefined;
  var isInCarousel = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;

  try {
    var item = selectedItem || collection.nextItem;

    if (!item) {
      document.querySelector('#cardModal .close').click();
    }

    var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
        config = _store$getState.config;

    var rootNode;

    switch (mode) {
      case 'STAND_ALONE':
        rootNode = document.querySelector('.main-lesson-body');
        break;

      case 'SWAP_OUT':
        rootNode = document.querySelector('.js-taxon-container');
        break;

      case 'MODAL':
        rootNode = document.querySelector('#cardModal');
        break;
    }

    var template = document.createElement('template');
    template.innerHTML = (ui_screens_cards_taxon_card_template_html__WEBPACK_IMPORTED_MODULE_7___default());
    var clone = document.importNode(template.content, true);
    parent.innerHTML = '';
    rank = rank ? rank.toUpperCase() : 'FAMILY';
    var taxon;

    switch (rank) {
      case 'ORDER':
        taxon = item.order;
        break;

      case 'FAMILY':
        taxon = item.family;
        break;

      case 'GENUS':
        taxon = item.genus;
        break;

      default:
        taxon = item.family;
        break;
    }

    ;
    var familyStats = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__.itemProperties.getFamilyStats(collection.items);
    var occurrences = familyStats ? familyStats[taxon.name] : 0;
    var url = item.images ? item.starred ? item.images[0].url : '' : '';
    var image = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_6__.scaleImage)({
      url: url
    }, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_6__.imageUseCases.TAXON_CARD, config);
    var vernacularName = taxon.vernacularName || ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__.itemProperties.getNestedTaxonProp(taxon, config.language, 'names', 'names', '0').split(',')[0];
    var identification = taxon.identification ? taxon.identification : taxon.descriptions ? taxon.descriptions[0].identification : '';
    var summary = taxon.summary ? taxon.summary : taxon.descriptions ? taxon.descriptions[0].summary : '';
    var context = {
      rank: rank,
      name: taxon.name,
      image: image,
      alt: taxon ? taxon.alt : '',
      vernacularName: vernacularName,
      species: taxon.species || '--',
      genera: taxon.genera || '--',
      families: taxon.families || '--',
      identification: identification,
      summary: summary,
      eol: taxon.eol ? taxon.eol.replace('en', config.language) : '',
      wiki: taxon.wiki ? taxon.wiki.replace('en', config.language) : "https://en.wikipedia.org/wiki/".concat(taxon.name),
      occurrences: occurrences,
      toxic: taxon.toxic ? "Toxic species: ".concat(taxon.toxic.members.join(', ')) : '',
      notableMembers: taxon.members ? (0,ramda__WEBPACK_IMPORTED_MODULE_8__.default)(2, taxon.members).join(', ') : ''
    };
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__.renderTemplate)(context, template.content, parent, clone);
    (0,ui_screens_common_info_slider__WEBPACK_IMPORTED_MODULE_3__.taxonInfoSlider)(item, taxon.traits, rootNode.querySelector('.js-taxon-info-box'), mode);

    switch (rank) {
      case 'GENUS':
        rootNode.querySelector('.js-taxon-genus').classList.add('hide-important');
        rootNode.querySelector('.js-taxon-family').classList.add('hide-important');
        break;

      case 'FAMILY':
        rootNode.querySelector('.js-taxon-family').classList.add('hide-important');
        break;

      case 'ORDER':
        rootNode.querySelector('.js-taxon-rank').classList.add('hide-important');
        break;
    }

    (0,ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_5__.renderIcon)(item.taxonomy, rootNode);

    if (mode === 'MODAL') {
      rootNode.querySelector('.js-external-links').classList.add('hide');
      rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;
      var prev = rootNode.querySelector('#cardModal .js-prev > span');
      prev.dataset.id = item.id;
      prev.dataset.transition = 'prev';
      prev.dataset.modal = 'cardModal';
      var next = rootNode.querySelector('#cardModal .js-next > span');
      next.dataset.id = item.id;
      next.dataset.transition = 'next';
      next.dataset.modal = 'cardModal';
      if (prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');
      if (next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');
    } // if(taxon.toxic) {
    //     document.querySelector('.js-taxon-toxic-warning').innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
    // }


    document.querySelector('.js-external-page-title').innerHTML = "".concat(taxon.name);
    document.querySelector('.js-external-page-body').innerHTML = "<iframe class=\"modal-iframe\" title=\"Wikipedia page for ".concat(taxon.name, "\" src=\"").concat(context.wiki, "\"></iframe>");
    var membersCount = document.querySelector('#taxon-card-header .js-names-badge');
    if (!context.occurrences || context.occurrences === 0) membersCount.classList.add('hide-important');
    membersCount.addEventListener('click', function (event) {
      document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = "Members of the ".concat(taxon.name, " family");
      var members = collection.items.filter(function (i) {
        return i.taxonomy.family.toLowerCase() === taxon.name.toLowerCase();
      });
      var list = document.querySelector('#badgeListModal .js-modal-text');
      list.innerHTML = '';
      members.forEach(function (member) {
        list.innerHTML += "<div>".concat(member.name, "</div>");
      });
    });
  } catch (e) {
    console.error(e);
    setTimeout(function () {
      switch (transition) {
        case 'next':
          document.querySelector('#cardModal .carousel-control-next-icon').click();
          break;

        case 'prev':
          document.querySelector('#cardModal .carousel-control-prev-icon').click();
          break;
      }
    });
  }
};

/***/ }),

/***/ "LLeQ":
/*!*******************************************!*\
  !*** ./src/ui/screens/cards/test-card.js ***!
  \*******************************************/
/*! namespace exports */
/*! export renderTestCardTemplate [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderTestCardTemplate": () => /* binding */ renderTestCardTemplate
/* harmony export */ });
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/icon-handler */ "iZK6");
/* harmony import */ var ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/cards/card */ "Vt4y");
/* harmony import */ var ui_screens_cards_taxon_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/cards/taxon-card */ "+pkx");
/* harmony import */ var ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/cards/non-taxon-card */ "gtMu");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_progress_score_summary__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/progress/score-summary */ "9TBd");
/* harmony import */ var ui_screens_cards_test_card_template_html__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/screens/cards/test-card-template.html */ "H/uh");
/* harmony import */ var ui_screens_cards_test_card_template_html__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(ui_screens_cards_test_card_template_html__WEBPACK_IMPORTED_MODULE_8__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}










var renderTestCardTemplate = function renderTestCardTemplate(collection, context) {
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_cards_test_card_template_html__WEBPACK_IMPORTED_MODULE_8___default());

  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      config = _store$getState.config;

  var modal = config.isLandscapeMode ? document.querySelector('#lessonModal') : document;
  var parent = config.isLandscapeMode ? modal.querySelector('.js-modal-text') : ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody;
  parent.innerHTML = '';
  var header = modal.querySelector('.js-modal-text-title');
  header.innerHTML = collection.name;
  context.className = context.className || '';
  context.headerClassName = context.headerClassName || '';
  context.statement = context.statement || '';
  context.providerQuestion = context.providerQuestion || '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_6__.renderTemplate)(context, template.content, parent);
  var progressLink = modal.querySelector('.js-review-progress');

  if (progressLink) {
    var progressLinkClickHandler = function progressLinkClickHandler() {
      var summaryContainer = modal.querySelector('.js-summary-container');

      var renderSummaryCard = function renderSummaryCard() {
        (0,ui_screens_progress_score_summary__WEBPACK_IMPORTED_MODULE_7__.renderScoreSummary)(collection.id, summaryContainer);
        var count = 1;

        var toggleScreens = function toggleScreens(screenOne, screenTwo) {
          hideCurrentCard(screenOne);
          progressLink.innerHTML = count % 2 === 0 ? 'Progress' : 'Quiz';
          count++;
          screenTwo.classList.remove('swap-out-card');
          progressLink.addEventListener('click', function (e) {
            toggleScreens(screenTwo, screenOne);
          }, {
            once: true
          });
        };

        toggleScreens(testCardContainer, summaryContainer);
      };

      renderSummaryCard();
    };

    progressLink.innerHTML = 'Progress';
    progressLink.removeEventListener('click', progressLinkClickHandler, {
      once: true
    });
    progressLink.addEventListener('click', progressLinkClickHandler, {
      once: true
    });
    progressLink.focus();
  }

  toggleStatementAndQuestion(config);
  var testCardContainer = modal.querySelector('.js-test-card-container');
  var testCard = modal.querySelector('.js-test-card-container');
  var testCardIcon = testCard.querySelector('.js-card-link');
  var item = collection.nextItem || collection.items[context.bonus.itemIndex];

  var hideCurrentCard = function hideCurrentCard(container, card) {
    container.classList.add('swap-out-card');
    container.classList.remove('swap-in-card');

    if (card) {
      card.classList.add('swap-out-card');
      card.classList.remove('swap-in-card');
    }
  };

  var showNextCard = function showNextCard(container, selector) {
    container.classList.remove('swap-out-card');
    var card = modal.querySelector(selector);
    var icon = card.querySelector('.js-card-link');
    icon.classList.remove('disabled-icon');
    return {
      card: card,
      icon: icon
    };
  };

  testCardIcon.addEventListener('click', /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(event) {
      var speciesContainer, taxonContainer, renderSpeciesCard;
      return regeneratorRuntime.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              speciesContainer = modal.querySelector('.js-species-container');
              taxonContainer = modal.querySelector('.js-taxon-container');

              renderSpeciesCard = /*#__PURE__*/function () {
                var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
                  return regeneratorRuntime.wrap(function _callee2$(_context2) {
                    while (1) {
                      switch (_context2.prev = _context2.next) {
                        case 0:
                          (0,ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_3__.renderCard)(collection, 'SWAP_OUT', item, speciesContainer, false);
                          setTimeout(function () {
                            hideCurrentCard(testCardContainer, testCard);

                            var _showNextCard = showNextCard(speciesContainer, '.js-species-card'),
                                speciesCard = _showNextCard.card,
                                speciesIcon = _showNextCard.icon;

                            speciesIcon.addEventListener('click', /*#__PURE__*/function () {
                              var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {
                                var _ref4, taxonCard, taxonIcon;

                                return regeneratorRuntime.wrap(function _callee$(_context) {
                                  while (1) {
                                    switch (_context.prev = _context.next) {
                                      case 0:
                                        item.lichen ? (0,ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_5__.renderNonTaxonCard)('SWAP_OUT', item.keyTrait, taxonContainer, item.images.find(function (i) {
                                          return i.starred;
                                        }) ? item.images.find(function (i) {
                                          return i.starred;
                                        }).url : item.images[0].url) : (0,ui_screens_cards_taxon_card__WEBPACK_IMPORTED_MODULE_4__.renderTaxonCard)(collection, 'SWAP_OUT', item, taxonContainer, false);
                                        hideCurrentCard(speciesContainer, speciesCard);
                                        _ref4 = item.lichen ? showNextCard(taxonContainer, '.js-non-taxon-card') : showNextCard(taxonContainer, '.js-taxon-card'), taxonCard = _ref4.card, taxonIcon = _ref4.icon;
                                        taxonIcon.addEventListener('click', function (event) {
                                          hideCurrentCard(taxonContainer, taxonCard);
                                          showNextCard(testCardContainer, '.js-test-card');
                                        });

                                      case 4:
                                      case "end":
                                        return _context.stop();
                                    }
                                  }
                                }, _callee, this);
                              }));

                              return function (_x2) {
                                return _ref3.apply(this, arguments);
                              };
                            }());
                          }, 500);

                        case 2:
                        case "end":
                          return _context2.stop();
                      }
                    }
                  }, _callee2, this);
                }));

                return function renderSpeciesCard() {
                  return _ref2.apply(this, arguments);
                };
              }();

              _context3.next = 5;
              return renderSpeciesCard();

            case 5:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, this);
    }));

    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }());
  (0,ui_helpers_icon_handler__WEBPACK_IMPORTED_MODULE_2__.renderIcon)(item.taxonomy, modal);
  var testContentParent = modal.querySelector('.js-test-card-content');
  return testContentParent;
};

var toggleStatementAndQuestion = function toggleStatementAndQuestion(config) {
  if (config.isLandscapeMode) return;
  var statement = document.querySelector('.js-statement-para');
  var question = document.querySelector('.js-question-para');
  question.classList.add('hide');
  var iterations = 20;
  var i = 0;
  var interval = setInterval(function () {
    if (i % 2) {
      question.classList.add('hide');
      statement.classList.remove('hide');
    } else {
      question.classList.remove('hide');
      statement.classList.add('hide');
    }

    i++;
    if (i >= iterations) clearInterval(interval);
  }, 5000);
};

/***/ }),

/***/ "d2dY":
/*!****************************************!*\
  !*** ./src/ui/screens/common/badge.js ***!
  \****************************************/
/*! namespace exports */
/*! export renderBadge [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderBadge": () => /* binding */ renderBadge
/* harmony export */ });
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_badge_template_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/common/badge-template.html */ "AiYd");
/* harmony import */ var ui_screens_common_badge_template_html__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_badge_template_html__WEBPACK_IMPORTED_MODULE_1__);
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}



var renderBadge = function renderBadge(badge, item, config) {
  var names = _toConsumableArray(new Set(item.names.map(function (name) {
    return {
      common: name.vernacularName.toLowerCase(),
      language: name.language
    };
  })));

  var languageNames = names.reduce(function (r, a) {
    r[a.language] = r[a.language] || {};
    r[a.language].name = config.languages.find(function (language) {
      return language.lang === a.language.trim();
    }).name;
    r[a.language].names = r[a.language].names || [];
    r[a.language].names.push(a.common);
    return r;
  }, Object.create(null));
  var occurrences = names.length;
  var template = document.createElement('template');

  if (occurrences === 0) {
    badge.classList.add('hide');
  } else {
    badge.innerHTML = '';
    template.innerHTML = "<span class=\"names-badge js-names-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">".concat(occurrences, "</span>");
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({}, template.content, badge);
    badge.addEventListener('click', function (event) {
      document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = 'Common species names';
      var parent = document.querySelector('#badgeListModal .js-modal-text');
      parent.innerHTML = '';
      template.innerHTML = (ui_screens_common_badge_template_html__WEBPACK_IMPORTED_MODULE_1___default());
      (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({
        languageNames: languageNames
      }, template.content, parent);
    });
  }
};

/***/ }),

/***/ "54P6":
/*!*******************************************!*\
  !*** ./src/ui/screens/common/calendar.js ***!
  \*******************************************/
/*! namespace exports */
/*! export renderCalendar [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderCalendar": () => /* binding */ renderCalendar
/* harmony export */ });
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var geo_geo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! geo/geo */ "85yX");
/* harmony import */ var api_inat_inat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/inat/inat */ "gEvk");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_calendar_template_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/common/calendar-template.html */ "9ydg");
/* harmony import */ var ui_screens_common_calendar_template_html__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_calendar_template_html__WEBPACK_IMPORTED_MODULE_4__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}






var renderCalendar = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(parent, item, config) {
    var template, place, country, places, placeId, months, getENShortMonth, getMonth;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            template = document.createElement('template');
            template.innerHTML = (ui_screens_common_calendar_template_html__WEBPACK_IMPORTED_MODULE_4___default());
            parent.innerHTML = '';
            _context.next = 5;
            return (0,geo_geo__WEBPACK_IMPORTED_MODULE_1__.getPlace)(config);

          case 5:
            place = _context.sent;
            country = place.country.place_name_en || place.country;
            _context.next = 9;
            return (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_2__.getInatPlaceId)(country);

          case 9:
            places = _context.sent;

            if (!(places.results.length === 0)) {
              _context.next = 12;
              break;
            }

            return _context.abrupt("return");

          case 12:
            placeId = places.results.find(function (place) {
              return place.display_name === country;
            }).id;
            months = [];

            getENShortMonth = function getENShortMonth(ordinal) {
              var month;

              switch (ordinal) {
                case 1:
                  month = 'J';
                  break;

                case 2:
                  month = 'F';
                  break;

                case 3:
                  month = 'M';
                  break;

                case 4:
                  month = 'A';
                  break;

                case 5:
                  month = 'M';
                  break;

                case 6:
                  month = 'J';
                  break;

                case 7:
                  month = 'J';
                  break;

                case 8:
                  month = 'A';
                  break;

                case 9:
                  month = 'S';
                  break;

                case 10:
                  month = 'O';
                  break;

                case 11:
                  month = 'N';
                  break;

                case 12:
                  month = 'D';
                  break;
              }

              return month;
            };

            getMonth = function getMonth(ordinal, config) {
              var month;

              switch (config.language) {
                case 'en':
                  month = getENShortMonth(ordinal);
                  break;

                default:
                  month = getENShortMonth(ordinal);
              }

              return month;
            };

            (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_2__.getHistogram)(item, placeId).then(function (histogram) {
              var monthlyStats = histogram.results.month_of_year;

              for (var month in monthlyStats) {
                months.push({
                  month: getMonth(parseInt(month), config),
                  index: parseInt(month),
                  count: monthlyStats[month]
                });
              }

              utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.sortBy(months, 'count', 'desc').forEach(function (month, index) {
                if (index < 4 && month.count !== 0) {
                  month["class"] = 'most-observations';
                } else {
                  month["class"] = '';
                }
              });
              utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.sortBy(months, 'index', 'asc');
              var data = [];
              var season = [];
              months.map(function (month, index) {
                if (index < 4) {
                  season.push(month);
                }

                if (index === 3) {
                  data.push(season);
                  season = [];
                }

                if (3 < index && index < 8) {
                  season.push(month);
                }

                if (index === 7) {
                  data.push(season);
                  season = [];
                }

                if (7 < index && index < 12) {
                  season.push(month);
                }

                if (index === 11) {
                  data.push(season);
                  season = [];
                }
              });
              (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({
                data: data
              }, template.content, parent);
              var currentMonthIndex = new Date().getMonth();
              var monthNodes = document.querySelectorAll('.calendar-box .col > div');
              monthNodes.forEach(function (node, index) {
                if (index === currentMonthIndex) {
                  node.classList.add('current-month');
                }
              });
            });

          case 17:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function renderCalendar(_x, _x2, _x3) {
    return _ref.apply(this, arguments);
  };
}();

/***/ }),

/***/ "YMON":
/*!***********************************************!*\
  !*** ./src/ui/screens/common/image-slider.js ***!
  \***********************************************/
/*! namespace exports */
/*! export imageSideBySlider [provided] [used] [could be renamed] */
/*! export imageSlider [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "imageSlider": () => /* binding */ imageSlider,
/* harmony export */   "imageSideBySlider": () => /* binding */ imageSideBySlider
/* harmony export */ });
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_common_rights_attribution__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/common/rights-attribution */ "4qFN");
/* harmony import */ var ui_screens_common_image_slider_template_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/common/image-slider-template.html */ "EJbP");
/* harmony import */ var ui_screens_common_image_slider_template_html__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_image_slider_template_html__WEBPACK_IMPORTED_MODULE_3__);





var selectActiveImage = function selectActiveImage(image, parent, config) {
  parent.querySelectorAll('.carousel-item').forEach(function (i) {
    var elemSrc = i.querySelector('img').dataset;

    if ((0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_1__.imageMatch)(elemSrc, image.dataset || image)) {
      i.classList.add('active');
      return;
    }
  });
  var activeNode = parent.querySelector('.imageSlider.carousel .carousel-item.active img');
  var indicators = document.querySelectorAll('.carousel-indicators li');
  indicators.forEach(function (i) {
    if (i.dataset && activeNode.dataset && i.dataset.slideTo === activeNode.dataset.index) {
      i.classList.add('active');
    }
  });
  var img = image.dataset || image;
  img.title = img.title || img.itemName;
  img = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_1__.scaleImage)(img);
  (0,ui_screens_common_rights_attribution__WEBPACK_IMPORTED_MODULE_2__.handleRightsAttribution)(img);
  return img;
};

var carouselControlHandler = function carouselControlHandler(event) {
  var parentScreen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
  setTimeout(function () {
    var activeNode = parentScreen.querySelector("".concat(event.target.dataset.slider, " .carousel-item.active img"));
    var image = activeNode.dataset;
    (0,ui_screens_common_rights_attribution__WEBPACK_IMPORTED_MODULE_2__.handleRightsAttribution)(image);
  }, 750);
};

var imageSlider = function imageSlider(sliderArgs) {
  var config = sliderArgs.config,
      images = sliderArgs.images,
      parent = sliderArgs.parent,
      image = sliderArgs.image,
      _sliderArgs$parentScr = sliderArgs.parentScreen,
      parentScreen = _sliderArgs$parentScr === void 0 ? document : _sliderArgs$parentScr,
      _sliderArgs$identifie = sliderArgs.identifier,
      identifier = _sliderArgs$identifie === void 0 ? '' : _sliderArgs$identifie;
  var slider = document.createElement('template');
  slider.innerHTML = (ui_screens_common_image_slider_template_html__WEBPACK_IMPORTED_MODULE_3___default());
  parent.innerHTML = '';
  images.forEach(function (img, i) {
    img.index = i;
    img.rightsHolder = img.rightsHolder || 'Public domain';
    img.provider = img.provider || 'eol';
    img = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_1__.scaleImage)(img);
  }); // snapLog('imageSlider, image medium values:', images.map(i => i.medium));

  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({
    images: images,
    identifier: identifier
  }, slider.content, parent);
  var next = document.querySelector("#imageSlider_".concat(identifier, " .carousel-control-next-icon"));
  var prev = document.querySelector("#imageSlider_".concat(identifier, " .carousel-control-prev-icon"));

  if (config.isPortraitMode) {
    next.classList.add('concealed');
    prev.classList.add('concealed');
  }

  setTimeout(function () {
    selectActiveImage(image || images[0], parent, config);
  }, 250);
  parentScreen.querySelector("#imageSlider_".concat(identifier, " .carousel-control-prev")).addEventListener('click', function (e) {
    return carouselControlHandler(e, parentScreen, config);
  });
  parentScreen.querySelector("#imageSlider_".concat(identifier, " .carousel-control-next")).addEventListener('click', function (e) {
    return carouselControlHandler(e, parentScreen, config);
  });
  document.addEventListener('swiped-left', function (e) {
    next.click();
  });
  document.addEventListener('swiped-right', function (e) {
    prev.click();
  });
};
var imageSideBySlider = function imageSideBySlider(slides, parent, config) {
  var sideBySlider = document.createElement('template');
  sideBySlider.innerHTML = (ui_screens_common_image_slider_template_html__WEBPACK_IMPORTED_MODULE_3___default());
  parent.innerHTML = '';
  parent.classList.add('slideBySliderContainer');
  document.querySelector("#imageComparisonModal .js-modal-image-title span:nth-child(3)").innerHTML = '';
  document.querySelector("#imageComparisonModal .js-modal-image-title span:nth-child(4)").innerHTML = '';
  slides.forEach(function (slide, index) {
    var identifier = slide.id.replace(' ', '_') || index + 1;
    var header = document.querySelectorAll("#imageComparisonModal .js-modal-image-title > span")[index];
    header.innerHTML = "<span class=\"common-name\">".concat(slide.images[0].itemCommon, "</span><span class=\"latin-name\">").concat(slide.images[0].itemName, "</span>");
    var item = {
      name: slide.images[0].itemName,
      itemCommon: slide.images[0].itemCommon,
      images: slide.images
    };
    var images = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_1__.prepImagesForCarousel)(item, config, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_1__.imageUseCases.CAROUSEL); // snapLog('imageSideBySlider, image medium values:', images.map(i => i.medium));

    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({
      images: images,
      identifier: identifier
    }, sideBySlider.content, parent);
    var activeNode = document.querySelector("#imageSlider_".concat(identifier, " .carousel-item"));
    activeNode.classList.add('active');
    (0,ui_screens_common_rights_attribution__WEBPACK_IMPORTED_MODULE_2__.handleRightsAttribution)(images[0]);
    var originalImageLink = document.querySelector("#imageSlider_".concat(identifier, " .js-expand"));
    if (originalImageLink) originalImageLink.classList.add('hide-important');
  });
};

/***/ }),

/***/ "rDnI":
/*!*******************************************!*\
  !*** ./src/ui/screens/common/inat-box.js ***!
  \*******************************************/
/*! namespace exports */
/*! export renderInatDataBox [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderInatDataBox": () => /* binding */ renderInatDataBox
/* harmony export */ });
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var geo_geo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! geo/geo */ "85yX");
/* harmony import */ var api_inat_inat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/inat/inat */ "gEvk");
/* harmony import */ var wikipedia_wiki__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wikipedia/wiki */ "nCaV");
/* harmony import */ var wikipedia_wiki_modal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wikipedia/wiki-modal */ "kHXf");
/* harmony import */ var ui_screens_common_inat_box_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/common/inat-box-template.html */ "CUTP");
/* harmony import */ var ui_screens_common_inat_box_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_inat_box_template_html__WEBPACK_IMPORTED_MODULE_5__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}







function renderInatDataBox(_x, _x2, _x3, _x4) {
  return _renderInatDataBox.apply(this, arguments);
}

function _renderInatDataBox() {
  _renderInatDataBox = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(parent, item, config, mode) {
    var template, eolPage, wikiNode, place, country, places, placeId;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            template = document.createElement('template');
            template.innerHTML = (ui_screens_common_inat_box_template_html__WEBPACK_IMPORTED_MODULE_5___default());
            parent.innerHTML = '';
            (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({}, template.content, parent);
            eolPage = document.querySelector('.js-test-card-container-eol-link');
            eolPage.setAttribute('href', "http://eol.org/pages/".concat(item.id, "/overview"));
            eolPage.setAttribute('target', '_blank');
            eolPage.setAttribute('style', 'text-decoration: none');
            setTimeout(function () {
              var wikiLink = document.querySelector('.js-test-card-container-wiki');
              (0,wikipedia_wiki_modal__WEBPACK_IMPORTED_MODULE_4__.renderWikiModal)(item, wikiLink, config);
            });
            wikiNode = document.querySelector('.js-test-card-container-wiki');
            wikiNode.innerHTML = '';
            (0,wikipedia_wiki__WEBPACK_IMPORTED_MODULE_3__.renderWiki)(wikiNode, item, config.language);
            (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_2__.getInatTaxonStats)(item, config).then(function (stats) {
              if (!stats.results) return;
              var taxonId = stats.results.find(function (stat) {
                return stat.taxon.name === item.name;
              }).taxon.id;
              var taxonCount = stats.results.find(function (stat) {
                return stat.taxon.name === item.name;
              }).count;
              var taxonLink = "https://www.inaturalist.org/taxa/".concat(taxonId);
              parent.querySelector('.js-taxon-count').innerHTML = taxonCount.toLocaleString();
              parent.querySelector('.js-taxon-link').setAttribute('href', taxonLink);
            });
            _context.next = 15;
            return (0,geo_geo__WEBPACK_IMPORTED_MODULE_1__.getPlace)(config);

          case 15:
            place = _context.sent;
            country = place.country.place_name_en || place.country;
            _context.next = 19;
            return (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_2__.getInatPlaceId)(country);

          case 19:
            places = _context.sent;

            if (!(places.results.length === 0)) {
              _context.next = 22;
              break;
            }

            return _context.abrupt("return");

          case 22:
            placeId = places.results.find(function (place) {
              return place.display_name === country;
            }).id;
            (0,api_inat_inat__WEBPACK_IMPORTED_MODULE_2__.getInatTaxonStats)(item, config, placeId).then(function (stats) {
              if (stats.results.length === 0) return;
              var itemStats = stats.results.find(function (stat) {
                return stat.taxon.name === item.name;
              });
              if (!itemStats) return;
              var placeTaxonCount = itemStats.count;
              var establishment = itemStats.taxon.preferred_establishment_means;
              document.querySelector('.js-native-container').innerHTML = establishment || '';
              parent.querySelector('.js-world').innerHTML = mode === 'MODAL' ? 'Worldwide' : 'Worldwide sightings';
              parent.querySelector('.js-place').innerHTML = mode === 'MODAL' ? country : "".concat(country, " sightings");
              parent.querySelector('.js-place-taxon-count').innerHTML = placeTaxonCount.toLocaleString();
            });

          case 24:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));
  return _renderInatDataBox.apply(this, arguments);
}

/***/ }),

/***/ "82LF":
/*!*****************************************************!*\
  !*** ./src/ui/screens/common/info-detail-slider.js ***!
  \*****************************************************/
/*! namespace exports */
/*! export renderInfoDetails [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderInfoDetails": () => /* binding */ renderInfoDetails
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var ui_screens_common_linked_taxa__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/common/linked-taxa */ "bnuw");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_id_box_template_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/common/id-box-template.html */ "Q2lf");
/* harmony import */ var ui_screens_common_id_box_template_html__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_id_box_template_html__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var ui_screens_common_info_detail_slider_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/common/info-detail-slider-template.html */ "K1n5");
/* harmony import */ var ui_screens_common_info_detail_slider_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_info_detail_slider_template_html__WEBPACK_IMPORTED_MODULE_5__);






var renderInfoDetails = function renderInfoDetails(item, activeTraitKey, activeTraitValue, description) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      config = _store$getState.config,
      collection = _store$getState.collection,
      glossary = _store$getState.glossary;

  var template = document.createElement('template');
  var parent = document.querySelector('.js-info-box-details');
  if (!parent) return; // hack! currently the case with (non-species) taxon cards (see same below)

  parent.innerHTML = '';

  if (activeTraitKey.toLowerCase().indexOf('description') > -1) {
    template.innerHTML = (ui_screens_common_id_box_template_html__WEBPACK_IMPORTED_MODULE_4___default());
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({
      id: description
    }, template.content, parent);
    var text = document.querySelector('.id-box > div');
    text.innerHTML = text.innerHTML.replace(/\r?\n/g, '<br />');
  } else if (activeTraitKey.toLowerCase() === 'relationships' || activeTraitKey.toLowerCase() === 'lookalikes') {
    var mode = 'MODAL';
    var isInCarousel = true;
    (0,ui_screens_common_linked_taxa__WEBPACK_IMPORTED_MODULE_2__.linkedTaxa)(item, config, parent, mode, isInCarousel, collection, activeTraitValue);
  } else {
    var details = api_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.firestore.getDefinition(activeTraitValue, glossary, collection.glossary); // make dependent on a promise

    if (!parent) return; // hack! taxon info sliders

    if (details && details.length > 0) {
      details.forEach(function (detail) {
        template.innerHTML = (ui_screens_common_info_detail_slider_template_html__WEBPACK_IMPORTED_MODULE_5___default());
        detail.imgClassName = detail.img ? detail.img.url === '' ? 'hide-important' : '' : 'hide-important';
        detail.img = detail.img || {
          url: ''
        };
      });
      (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({
        details: details
      }, template.content, parent);
    }
  }
};

/***/ }),

/***/ "o1yy":
/*!**********************************************!*\
  !*** ./src/ui/screens/common/info-slider.js ***!
  \**********************************************/
/*! namespace exports */
/*! export infoSlider [provided] [used] [could be renamed] */
/*! export taxonInfoSlider [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "taxonInfoSlider": () => /* binding */ taxonInfoSlider,
/* harmony export */   "infoSlider": () => /* binding */ infoSlider
/* harmony export */ });
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/traits-handler */ "B9Ei");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_info_detail_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/common/info-detail-slider */ "82LF");
/* harmony import */ var ui_screens_common_info_slider_template_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/common/info-slider-template.html */ "jX2F");
/* harmony import */ var ui_screens_common_info_slider_template_html__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_info_slider_template_html__WEBPACK_IMPORTED_MODULE_4__);
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}







var renderInfoSlider = function renderInfoSlider(item, traits, parent, id) {
  var slider = document.createElement('template');
  slider.innerHTML = (ui_screens_common_info_slider_template_html__WEBPACK_IMPORTED_MODULE_4___default());
  parent.innerHTML = '';
  traits = traits.filter(function (t) {
    return t.value;
  });
  traits.forEach(function (trait) {
    trait.name = trait.name ? trait.name === 'ph' ? 'pH' : utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.capitaliseFirst(trait.name) : '';
    if (trait.name.toLowerCase() === 'role') trait.name = trait.type || 'role';
    trait.name = trait.name === 'Ph value' ? 'pH value' : trait.name;
    trait.unit = trait.unit ? trait.unit.toLowerCase() === 'colour' ? '' : trait.unit : '';
    trait.description = trait.value;
    trait.value = trait.name.toLowerCase() === 'description' ? '< traits >' : trait.value.join(', ');
  });
  var description = traits.find(function (trait) {
    return trait.name.toLowerCase() === 'description';
  });
  description = description ? description.description[0] : '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
    id: id,
    traits: traits
  }, slider.content, parent);
  var activeTrait, activeTraitKey, activeTraitValue;
  activeTrait = parent.querySelector("#traitSlider".concat(id, " .carousel-item:nth-child(1)"));
  activeTrait.classList.add('active');
  var traitCount = traits.length;

  if (traitCount === 1) {
    parent.querySelectorAll('.carousel.slide a').forEach(function (control) {
      control.setAttribute('disabled', 'disabled');
      control.classList.add('inactive-icon');
    });
  }

  var changeTraitHandler = function changeTraitHandler(event) {
    setTimeout(function () {
      activeTrait = parent.querySelector("#traitSlider".concat(id, " .carousel-item.active"));
      activeTraitKey = activeTrait.querySelector('dt').innerHTML;
      activeTraitValue = activeTrait.querySelector('dd').innerHTML;
      (0,ui_screens_common_info_detail_slider__WEBPACK_IMPORTED_MODULE_3__.renderInfoDetails)(item, activeTraitKey, activeTraitValue, description);
    }, 1000);
  };

  changeTraitHandler();
  parent.querySelector("#traitSlider".concat(id, " .carousel-control-prev")).addEventListener('click', changeTraitHandler);
  parent.querySelector("#traitSlider".concat(id, " .carousel-control-next")).addEventListener('click', changeTraitHandler);
};

var taxonInfoSlider = function taxonInfoSlider(item, traits, parent, mode) {
  var id = mode === 'MODAL' ? 'taxon_1' : 'taxon_0';
  var convertedTraits = ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.convertTraitsToNameValuePairsArray(traits, ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getTraitsToExclude());

  if (convertedTraits.length > 0) {
    renderInfoSlider(item, convertedTraits, parent, id);
  }
};
var infoSlider = function infoSlider(item, parent, mode) {
  if (!ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.hasTraitPropeties(item.traits)) return;
  var traits = ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.convertTraitsToNameValuePairsArray(item.traits, ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_1__.traitsHandler.getTraitsToExclude(), item);

  if (item.traits.description) {
    var description = {
      name: 'description',
      value: item.traits.description.value
    };
    traits = [description].concat(_toConsumableArray(traits));
  }

  if (traits.length === 0) return;
  var id = mode === 'MODAL' ? 1 : 0;
  renderInfoSlider(item, traits, parent, id);
};

/***/ }),

/***/ "0Zqs":
/*!*****************************************************!*\
  !*** ./src/ui/screens/common/language-selection.js ***!
  \*****************************************************/
/*! namespace exports */
/*! export languagePicker [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "languagePicker": () => /* binding */ languagePicker
/* harmony export */ });
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_language_selection_template_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/common/language-selection-template.html */ "oHb/");
/* harmony import */ var ui_screens_common_language_selection_template_html__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_language_selection_template_html__WEBPACK_IMPORTED_MODULE_1__);


var languagePicker = function languagePicker(config, parent, listener) {
  var languages = config.languages;
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_common_language_selection_template_html__WEBPACK_IMPORTED_MODULE_1___default());
  parent.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({
    languages: languages
  }, template.content, parent);
  var taxonLanguageBtn = document.querySelector('#taxonLanguageBtn');
  taxonLanguageBtn.innerHTML = "Taxon language [ ".concat(languages.find(function (l) {
    return l.lang === config.language;
  }).name, " ] ");
  var taxonLanguageTxt = document.querySelector('#taxonLanguageTxt');
  taxonLanguageTxt.innerHTML = languages.find(function (l) {
    return l.lang === config.language;
  }).name;
  document.querySelectorAll('.dropdown-item').forEach(function (language) {
    language.addEventListener('click', function (event) {
      config.language = languages.find(function (l) {
        return l.lang === event.target.id;
      }).lang;
      var name = languages.find(function (l) {
        return l.lang === event.target.id;
      }).name;
      taxonLanguageBtn.innerHTML = "Taxon language [ ".concat(name, " ]");
      taxonLanguageTxt.innerHTML = name;
      listener(config);
    });
  });
};

/***/ }),

/***/ "bnuw":
/*!**********************************************!*\
  !*** ./src/ui/screens/common/linked-taxa.js ***!
  \**********************************************/
/*! namespace exports */
/*! export linkedTaxa [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "linkedTaxa": () => /* binding */ linkedTaxa
/* harmony export */ });
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/cards/card */ "Vt4y");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var ui_screens_common_linked_taxa_lookalike_template_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/common/linked-taxa-lookalike-template.html */ "2ZjO");
/* harmony import */ var ui_screens_common_linked_taxa_lookalike_template_html__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_linked_taxa_lookalike_template_html__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var ui_screens_common_linked_taxa_relationship_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/common/linked-taxa-relationship-template.html */ "re8S");
/* harmony import */ var ui_screens_common_linked_taxa_relationship_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_linked_taxa_relationship_template_html__WEBPACK_IMPORTED_MODULE_5__);
function _createForOfIteratorHelper(o, allowArrayLike) {
  var it;

  if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it) o = it;
      var i = 0;

      var F = function F() {};

      return {
        s: F,
        n: function n() {
          if (i >= o.length) return {
            done: true
          };
          return {
            done: false,
            value: o[i++]
          };
        },
        e: function e(_e) {
          throw _e;
        },
        f: F
      };
    }

    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  var normalCompletion = true,
      didErr = false,
      err;
  return {
    s: function s() {
      it = o[Symbol.iterator]();
    },
    n: function n() {
      var step = it.next();
      normalCompletion = step.done;
      return step;
    },
    e: function e(_e2) {
      didErr = true;
      err = _e2;
    },
    f: function f() {
      try {
        if (!normalCompletion && it["return"] != null) it["return"]();
      } finally {
        if (didErr) throw err;
      }
    }
  };
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}







var linkedTaxa = function linkedTaxa(item, config, parent, mode, isInCarousel, collection, activeTraitValue) {
  parent.innerHTML = '';
  var template = document.createElement('template');

  var addLinksToSpeciesCards = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(mode) {
      var speciesCardLinks;
      return regeneratorRuntime.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              if (!isInCarousel) {
                speciesCardLinks = mode === 'MODAL' ? document.querySelectorAll('#cardModal .js-test-card-container-link') : document.querySelectorAll('.js-test-card-container-link');
                speciesCardLinks.forEach( /*#__PURE__*/function () {
                  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(link) {
                    return regeneratorRuntime.wrap(function _callee2$(_context2) {
                      while (1) {
                        switch (_context2.prev = _context2.next) {
                          case 0:
                            link.addEventListener('click', /*#__PURE__*/function () {
                              var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {
                                var name, selectedItem;
                                return regeneratorRuntime.wrap(function _callee$(_context) {
                                  while (1) {
                                    switch (_context.prev = _context.next) {
                                      case 0:
                                        name = event.target.id || event.target.dataset.name;
                                        _context.next = 3;
                                        return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.firestore.getSpeciesByName(name);

                                      case 3:
                                        selectedItem = _context.sent;
                                        selectedItem.species = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__.itemProperties.getSpeciesName(item.name);
                                        (0,ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_2__.renderCard)({
                                          name: 'Local species',
                                          items: [selectedItem]
                                        }, 'MODAL', selectedItem, document.querySelector('#cardModal .js-modal-body'), false);

                                      case 6:
                                      case "end":
                                        return _context.stop();
                                    }
                                  }
                                }, _callee, this);
                              }));

                              return function (_x3) {
                                return _ref3.apply(this, arguments);
                              };
                            }());

                          case 1:
                          case "end":
                            return _context2.stop();
                        }
                      }
                    }, _callee2, this);
                  }));

                  return function (_x2) {
                    return _ref2.apply(this, arguments);
                  };
                }());
              }

            case 1:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, this);
    }));

    return function addLinksToSpeciesCards(_x) {
      return _ref.apply(this, arguments);
    };
  }();

  var getLinkedTaxa = /*#__PURE__*/function () {
    var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {
      var addVernacularName, relationshipTraits, relationships, convertTraitsForDisplay, lookalikeTraits, lookalikes, convertLookalikesForDisplay, addDisplayRules;
      return regeneratorRuntime.wrap(function _callee7$(_context7) {
        while (1) {
          switch (_context7.prev = _context7.next) {
            case 0:
              addVernacularName = /*#__PURE__*/function () {
                var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(taxonName) {
                  var item, vernacularName;
                  return regeneratorRuntime.wrap(function _callee4$(_context4) {
                    while (1) {
                      switch (_context4.prev = _context4.next) {
                        case 0:
                          _context4.next = 2;
                          return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.firestore.getSpeciesByName(taxonName);

                        case 2:
                          item = _context4.sent;

                          if (item) {
                            _context4.next = 5;
                            break;
                          }

                          return _context4.abrupt("return", {
                            name: taxonName,
                            display: taxonName,
                            isSpecies: false
                          });

                        case 5:
                          vernacularName = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__.itemProperties.getVernacularName(item, config);
                          return _context4.abrupt("return", vernacularName ? {
                            name: taxonName,
                            display: taxonName,
                            isSpecies: true
                          } : {
                            name: taxonName,
                            display: taxonName,
                            isSpecies: true
                          });

                        case 7:
                        case "end":
                          return _context4.stop();
                      }
                    }
                  }, _callee4, this);
                }));

                return function addVernacularName(_x4) {
                  return _ref5.apply(this, arguments);
                };
              }();

              relationshipTraits = item.traits ? item.traits.relationships : null;
              relationships = [];

              if (!relationshipTraits) {
                _context7.next = 8;
                break;
              }

              convertTraitsForDisplay = /*#__PURE__*/function () {
                var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
                  return regeneratorRuntime.wrap(function _callee5$(_context5) {
                    while (1) {
                      switch (_context5.prev = _context5.next) {
                        case 0:
                          return _context5.abrupt("return", Promise.all(relationshipTraits.map(function (trait) {
                            return {
                              type: trait.value[0],
                              speciesA: trait.symbiont.name,
                              speciesARole: trait.symbiont.role,
                              speciesB: item.name,
                              speciesBRole: trait.type,
                              description: trait.description
                            };
                          })));

                        case 1:
                        case "end":
                          return _context5.stop();
                      }
                    }
                  }, _callee5, this);
                }));

                return function convertTraitsForDisplay() {
                  return _ref6.apply(this, arguments);
                };
              }();

              _context7.next = 7;
              return convertTraitsForDisplay();

            case 7:
              relationships = _context7.sent;

            case 8:
              lookalikeTraits = item.traits ? item.traits.lookalikes : null;
              lookalikes = [];

              if (!lookalikeTraits) {
                _context7.next = 16;
                break;
              }

              lookalikeTraits = lookalikeTraits.filter(function (species) {
                return species.lookalike.name === activeTraitValue;
              });

              convertLookalikesForDisplay = /*#__PURE__*/function () {
                var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
                  return regeneratorRuntime.wrap(function _callee6$(_context6) {
                    while (1) {
                      switch (_context6.prev = _context6.next) {
                        case 0:
                          return _context6.abrupt("return", Promise.all(lookalikeTraits.map(function (trait) {
                            return {
                              species: item.name,
                              speciesDescription: trait.description,
                              lookalike: trait.lookalike.name,
                              lookalikeDescription: trait.lookalike.description
                            };
                          })));

                        case 1:
                        case "end":
                          return _context6.stop();
                      }
                    }
                  }, _callee6, this);
                }));

                return function convertLookalikesForDisplay() {
                  return _ref7.apply(this, arguments);
                };
              }();

              _context7.next = 15;
              return convertLookalikesForDisplay();

            case 15:
              lookalikes = _context7.sent;

            case 16:
              addDisplayRules = function addDisplayRules(relationships) {
                var _iterator = _createForOfIteratorHelper(relationships),
                    _step;

                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    var relationship = _step.value;

                    if (mode !== 'MODAL') {
                      relationship.className = 'underline-link';
                      relationship.modal = 'modal';
                    } else {
                      relationship.className = '';
                      relationship.modal = '';
                    }
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                ;
                return relationships;
              };

              if (relationships) {
                relationships = addDisplayRules(relationships);
                template.innerHTML = (ui_screens_common_linked_taxa_relationship_template_html__WEBPACK_IMPORTED_MODULE_5___default());
                (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
                  relationships: relationships
                }, template.content, parent);
              }

              if (lookalikes) {
                lookalikes = addDisplayRules(lookalikes);
                template.innerHTML = (ui_screens_common_linked_taxa_lookalike_template_html__WEBPACK_IMPORTED_MODULE_4___default());
                (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
                  lookalikes: lookalikes
                }, template.content, parent);
              }

              addLinksToSpeciesCards(mode);

            case 20:
            case "end":
              return _context7.stop();
          }
        }
      }, _callee7, this);
    }));

    return function getLinkedTaxa() {
      return _ref4.apply(this, arguments);
    };
  }();

  getLinkedTaxa();
};

/***/ }),

/***/ "cC2e":
/*!**********************************************!*\
  !*** ./src/ui/screens/common/look-alikes.js ***!
  \**********************************************/
/*! namespace exports */
/*! export lookalikeSpecies [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "lookalikeSpecies": () => /* binding */ lookalikeSpecies
/* harmony export */ });
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/common/image-slider */ "YMON");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/common/audio-media-template.html */ "F5SJ");
/* harmony import */ var ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var ui_screens_common_look_alikes_link_template_html__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/common/look-alikes-link-template.html */ "eh49");
/* harmony import */ var ui_screens_common_look_alikes_link_template_html__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_look_alikes_link_template_html__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jquery */ "1QeQ");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_7__);
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function _createForOfIteratorHelper(o, allowArrayLike) {
  var it;

  if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it) o = it;
      var i = 0;

      var F = function F() {};

      return {
        s: F,
        n: function n() {
          if (i >= o.length) return {
            done: true
          };
          return {
            done: false,
            value: o[i++]
          };
        },
        e: function e(_e) {
          throw _e;
        },
        f: F
      };
    }

    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  var normalCompletion = true,
      didErr = false,
      err;
  return {
    s: function s() {
      it = o[Symbol.iterator]();
    },
    n: function n() {
      var step = it.next();
      normalCompletion = step.done;
      return step;
    },
    e: function e(_e2) {
      didErr = true;
      err = _e2;
    },
    f: function f() {
      try {
        if (!normalCompletion && it["return"] != null) it["return"]();
      } finally {
        if (didErr) throw err;
      }
    }
  };
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}









var lookalikeSpecies = function lookalikeSpecies(item, config) {
  var rootNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document;
  var lookalikes = item.traits.lookalikes || item.traits['look-alikes'];

  if (lookalikes) {
    var renderLookalikes = /*#__PURE__*/function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
        var readyLookalikesForRendering, speciesComparisonLink, getTrait;
        return regeneratorRuntime.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                readyLookalikesForRendering = /*#__PURE__*/function () {
                  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
                    var _iterator, _step, _loop, _ret;

                    return regeneratorRuntime.wrap(function _callee2$(_context2) {
                      while (1) {
                        switch (_context2.prev = _context2.next) {
                          case 0:
                            if ((0,jquery__WEBPACK_IMPORTED_MODULE_7__.isArray)(lookalikes)) {
                              _context2.next = 2;
                              break;
                            }

                            return _context2.abrupt("return");

                          case 2:
                            species = [].concat(_toConsumableArray(lookalikes.map(function (lookalike) {
                              return lookalike.lookalike;
                            })), [{
                              name: item.name,
                              description: lookalikes[0].description
                            }]);
                            _iterator = _createForOfIteratorHelper(species);
                            _context2.prev = 4;
                            _loop = /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
                              var lookalike, lookalikeItem, images;
                              return regeneratorRuntime.wrap(function _callee$(_context) {
                                while (1) {
                                  switch (_context.prev = _context.next) {
                                    case 0:
                                      lookalike = _step.value;
                                      _context.next = 3;
                                      return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.firestore.getSpeciesByName(lookalike.name);

                                    case 3:
                                      lookalikeItem = _context.sent;

                                      if (lookalikeItem) {
                                        _context.next = 6;
                                        break;
                                      }

                                      return _context.abrupt("return", {
                                        v: void 0
                                      });

                                    case 6:
                                      lookalikeItem.vernacularName = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__.itemProperties.getVernacularName(lookalikeItem, config);
                                      names.push(lookalikeItem.vernacularName);
                                      scientificNames.push(lookalikeItem.name);
                                      images = lookalikeItem.images.map(function (img, index) {
                                        var url = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__.scaleImage)({
                                          url: img.url
                                        }, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__.imageUseCases.CAROUSEL, config);
                                        return {
                                          index: index + 1,
                                          src: _objectSpread(_objectSpread({}, img), {}, {
                                            url: url.medium
                                          }),
                                          url: url.medium,
                                          itemName: lookalikeItem.name,
                                          itemCommon: lookalikeItem.vernacularName
                                        };
                                      });
                                      slides.push({
                                        id: lookalikeItem.name,
                                        images: images
                                      });

                                    case 11:
                                    case "end":
                                      return _context.stop();
                                  }
                                }
                              }, _callee, this);
                            });

                            _iterator.s();

                          case 7:
                            if ((_step = _iterator.n()).done) {
                              _context2.next = 14;
                              break;
                            }

                            return _context2.delegateYield(_loop(), "t0", 9);

                          case 9:
                            _ret = _context2.t0;

                            if (!(_typeof(_ret) === "object")) {
                              _context2.next = 12;
                              break;
                            }

                            return _context2.abrupt("return", _ret.v);

                          case 12:
                            _context2.next = 7;
                            break;

                          case 14:
                            _context2.next = 19;
                            break;

                          case 16:
                            _context2.prev = 16;
                            _context2.t1 = _context2["catch"](4);

                            _iterator.e(_context2.t1);

                          case 19:
                            _context2.prev = 19;

                            _iterator.f();

                            return _context2.finish(19);

                          case 22:
                            ;

                          case 23:
                          case "end":
                            return _context2.stop();
                        }
                      }
                    }, _callee2, this, [[4, 16, 19, 22]]);
                  }));

                  return function readyLookalikesForRendering() {
                    return _ref2.apply(this, arguments);
                  };
                }();

                _context4.next = 3;
                return readyLookalikesForRendering();

              case 3:
                if (!(slides.length === 0)) {
                  _context4.next = 5;
                  break;
                }

                return _context4.abrupt("return");

              case 5:
                lookalikeParent.innerHTML = '';
                (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
                  slides: slides,
                  names: names.join(', ')
                }, matchTemplate.content, lookalikeParent);
                speciesComparisonLink = rootNode.querySelector('.js-compare-species-link');
                speciesComparisonLink.classList.remove('hide');

                getTrait = /*#__PURE__*/function () {
                  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(itemName, parent) {
                    var item, xcID, mp3, template;
                    return regeneratorRuntime.wrap(function _callee3$(_context3) {
                      while (1) {
                        switch (_context3.prev = _context3.next) {
                          case 0:
                            _context3.next = 2;
                            return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.firestore.getSpeciesByName(itemName);

                          case 2:
                            item = _context3.sent;
                            _context3.next = 5;
                            return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.firestore.getTraitsBySpeciesName(item.name);

                          case 5:
                            item.traits = _context3.sent;

                            if (!(item.taxonomy["class"].toLowerCase() === 'aves')) {
                              _context3.next = 18;
                              break;
                            }

                            if (!(item.traits && Object.keys(item.traits).length === 0)) {
                              _context3.next = 9;
                              break;
                            }

                            return _context3.abrupt("return");

                          case 9:
                            xcID = item.traits['song'].value;

                            if (xcID) {
                              _context3.next = 12;
                              break;
                            }

                            return _context3.abrupt("return");

                          case 12:
                            _context3.next = 14;
                            return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.firestore.getBirdsong(xcID);

                          case 14:
                            mp3 = _context3.sent;
                            template = document.createElement('template');
                            template.innerHTML = (ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_5___default());
                            (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
                              mp3: mp3,
                              title: item.name
                            }, template.content, parent);

                          case 18:
                          case "end":
                            return _context3.stop();
                        }
                      }
                    }, _callee3, this);
                  }));

                  return function getTrait(_x, _x2) {
                    return _ref3.apply(this, arguments);
                  };
                }();

                speciesComparisonLink.addEventListener('click', function () {
                  var parent = document.querySelector('#imageComparisonModal .js-modal-image');
                  (0,ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_2__.imageSideBySlider)(slides, parent, true, config);
                  species.forEach(function (lookalike) {
                    var identifier = ".description_".concat(lookalike.name.replace(' ', '_'));
                    var description = document.querySelector(identifier);
                    description.innerHTML = lookalike.description;
                    getTrait(lookalike.name, document.querySelector("".concat(identifier, " + div")));
                  });
                });

              case 11:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      return function renderLookalikes() {
        return _ref.apply(this, arguments);
      };
    }();

    var matchTemplate = document.createElement('template');
    matchTemplate.innerHTML = (ui_screens_common_look_alikes_link_template_html__WEBPACK_IMPORTED_MODULE_6___default());
    var lookalikeParent = rootNode.querySelector('.js-lookalikes');
    var slides = [];
    var names = [];
    var scientificNames = [];
    var species;
    renderLookalikes();
  }
};

/***/ }),

/***/ "4qFN":
/*!*****************************************************!*\
  !*** ./src/ui/screens/common/rights-attribution.js ***!
  \*****************************************************/
/*! namespace exports */
/*! export handleRightsAttribution [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "handleRightsAttribution": () => /* binding */ handleRightsAttribution
/* harmony export */ });
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_rights_attribution_template_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/common/rights-attribution-template.html */ "aHOI");
/* harmony import */ var ui_screens_common_rights_attribution_template_html__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_rights_attribution_template_html__WEBPACK_IMPORTED_MODULE_2__);



var handleRightsAttribution = function handleRightsAttribution(image) {
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_common_rights_attribution_template_html__WEBPACK_IMPORTED_MODULE_2___default());
  var text;

  switch (image.license) {
    case 'http://creativecommons.org/licenses/publicdomain/':
      text = 'CC PD';
      break;

    case 'http://creativecommons.org/licenses/by/2.0/':
      text = 'CC 2.0';
      break;

    case 'http://creativecommons.org/licenses/by-sa/2.0/':
      text = 'CC BY SA 2.0';
      break;

    case 'http://creativecommons.org/licenses/by-nc/2.0/':
      text = 'CC BY NC 2.0';
      break;

    case 'http://creativecommons.org/licenses/by-nc-sa/2.0/':
      text = 'CC BY NC-SA 2.0';
      break;

    case 'http://creativecommons.org/licenses/by/3.0/':
      text = 'CC 3.0';
      break;

    case 'http://creativecommons.org/licenses/by-sa/3.0/':
      text = 'CC BY SA 3.0';
      break;

    case 'http://creativecommons.org/licenses/by-nc-sa/3.0/':
      text = 'CC BY NC-SA 3.0';
      break;

    case 'http://creativecommons.org/licenses/by/4.0/':
      text = 'CC 4.0';
      break;

    case 'http://creativecommons.org/licenses/by-nc/4.0/':
      text = 'CC BY NC 4.0';
      break;

    case 'http://creativecommons.org/licenses/by-nc-sa/4.0/':
      text = 'CC BY NC-SA 4.0';
      break;

    case 'http://creativecommons.org/licenses/by-sa/4.0/':
      text = 'CC BY SA 4.0';
      break;

    default:
      text = image.license || '';
      break;
  }

  ;
  var licence = {
    text: text,
    url: image.medium
  };
  var title = image.title;
  var author = image.rightsholder || image.rightsHolder || 'Public domain';
  var source = image.source || '';
  var identifier = "".concat(image.itemName.replace(' ', '_'));
  var large = image.large || (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_0__.scaleImage)(image).large;
  var parent = document.querySelector(".js-attribution-layer.".concat(identifier));
  parent = parent || document.querySelector(".js-attribution-layer");
  parent.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
    title: title,
    author: author,
    source: source,
    licence: licence,
    large: large
  }, template.content, parent);
  var rightsAttribution = parent.querySelector('.js-rights-attribution .js-copyright');
  var rightsLink = parent.querySelector('.js-rights-link .js-copyright');
  var indicators = document.querySelector(".carousel-indicators");

  var showAttribution = function showAttribution(event) {
    rightsAttribution.parentElement.classList.add('hide-important');
    rightsLink.parentElement.classList.remove('hide-important');
    indicators.classList.remove('hide-important');
    rightsLink.removeEventListener('click', showLink), true;
    rightsLink.addEventListener('click', showLink, true);
  };

  rightsAttribution.removeEventListener('click', showAttribution, true);
  rightsAttribution.addEventListener('click', showAttribution, true);

  var showLink = function showLink(event) {
    rightsAttribution.parentElement.classList.remove('hide-important');
    rightsLink.parentElement.classList.add('hide-important');
    indicators.classList.add('hide-important');
    rightsAttribution.removeEventListener('click', showAttribution, true);
    rightsAttribution.addEventListener('click', showAttribution, true);
  };

  rightsLink.removeEventListener('click', showLink), true;
  rightsLink.addEventListener('click', showLink, true);
};

/***/ }),

/***/ "1O4T":
/*!*******************************************!*\
  !*** ./src/ui/screens/common/taxa-box.js ***!
  \*******************************************/
/*! namespace exports */
/*! export renderTaxaBox [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderTaxaBox": () => /* binding */ renderTaxaBox
/* harmony export */ });
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var api_snapdragon_infraspecifics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/snapdragon/infraspecifics */ "Jc5P");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_common_taxa_box_template_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/common/taxa-box-template.html */ "1/pR");
/* harmony import */ var ui_screens_common_taxa_box_template_html__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_taxa_box_template_html__WEBPACK_IMPORTED_MODULE_4__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}






var renderTaxaBox = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(parent, taxaBoxArgs) {
    var units, item, familyName, familyVernacularName, options, trait, specific, subSpeciesCount, template, subspeciesBadge, members;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            units = redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState().units;
            parent.innerHTML = '';
            item = taxaBoxArgs.item, familyName = taxaBoxArgs.familyName, familyVernacularName = taxaBoxArgs.familyVernacularName;
            options = [{
              name: 'uk rank',
              formatter: function formatter(trait) {
                return "UK # ".concat(trait[0]);
              }
            }, {
              name: 'how edible',
              formatter: function formatter(trait) {
                return trait[0];
              }
            }];
            trait = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_0__.itemProperties.getActiveTrait(item, options);
            specific = api_snapdragon_infraspecifics__WEBPACK_IMPORTED_MODULE_1__.infraspecifics.find(function (specific) {
              return specific.name === item.name;
            });
            subSpeciesCount = specific ? specific.subspecies.length : 0;
            template = document.createElement('template');
            template.innerHTML = (ui_screens_common_taxa_box_template_html__WEBPACK_IMPORTED_MODULE_4___default());
            (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({
              subSpeciesCount: subSpeciesCount,
              familyName: familyName,
              familyVernacularName: familyVernacularName,
              trait: trait
            }, template.content, parent);
            subspeciesBadge = parent.querySelector('.js-subspecies-badge');

            if (subSpeciesCount === 0) {
              subspeciesBadge.classList.add('hide');
            } else {
              members = specific.subspecies;
              subspeciesBadge.addEventListener('click', function (event) {
                document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = "Cultivars of ".concat(item.name);
                var list = rootNode.querySelector('#badgeListModal .js-modal-text');
                var html = '<div class="modal-list scrollable">';
                members.forEach(function (member) {
                  html += "<div><span>subspecies: ".concat(member.name, "</span>");
                  html += "<ul>";
                  member.names.forEach(function (name) {
                    if (name.language === config.language) html += "<li>name: ".concat(name.vernacularName, "</li>");
                  });
                  html += "</ul></div>";
                });
                html += '</div>';
                list.innerHTML = html;
              });
            }

          case 12:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function renderTaxaBox(_x, _x2) {
    return _ref.apply(this, arguments);
  };
}();

/***/ }),

/***/ "2nee":
/*!*******************************************************!*\
  !*** ./src/ui/screens/home/home-lesson-intro-text.js ***!
  \*******************************************************/
/*! namespace exports */
/*! export textSetup [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "textSetup": () => /* binding */ textSetup
/* harmony export */ });
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_home_home_lesson_intro_text_template_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/home/home-lesson-intro-text-template.html */ "f9Wd");
/* harmony import */ var ui_screens_home_home_lesson_intro_text_template_html__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ui_screens_home_home_lesson_intro_text_template_html__WEBPACK_IMPORTED_MODULE_2__);
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}




var textSetup = function textSetup(collection, config) {
  var speciesCount = getSpeciesCount(collection);
  var iconicTaxa = collection.guide ? collection.guide.iconicTaxa : collection.iconicTaxa || _toConsumableArray(new Set(collection.items.map(function (i) {
    return i.iconicTaxon;
  })));
  var language = config.languages.find(function (l) {
    return l.lang === config.language;
  }).name; // place in guide, and copy to collection

  var template = document.createElement('template');
  template.innerHTML = (ui_screens_home_home_lesson_intro_text_template_html__WEBPACK_IMPORTED_MODULE_2___default());
  var months = collection.guide ? collection.guide.season.observableMonths.map(function (month) {
    return month.name;
  }) : [];
  var observableMonths = months.length > 0 ? "".concat(months[0], "-").concat(months[months.length - 1]) : '';
  var season = months.length === 0 ? 'Species observations are drawn from the whole year.' : collection.guide.season === 'all_year' ? 'Species observations are drawn from the whole year.' : "Species observations are from ".concat(observableMonths, ".");
  var speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);
  var lessonIntro = collection.intro || '';
  var summary = {
    speciesCount: speciesCount,
    iconicTaxa: iconicTaxa,
    title: collection.name,
    language: language,
    observableMonths: observableMonths,
    season: season,
    speciesSummary: speciesSummary,
    lessonIntro: lessonIntro
  };
  ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(summary, template.content, ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody);
  setTimeout(function () {
    var _handleSpeciesUpdate = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa);

    speciesCount = _handleSpeciesUpdate.speciesCount;
    speciesSummary = _handleSpeciesUpdate.speciesSummary;
  }, 500);
  setTimeout(function () {
    var _handleSpeciesUpdate2 = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa);

    speciesCount = _handleSpeciesUpdate2.speciesCount;
    speciesSummary = _handleSpeciesUpdate2.speciesSummary;
  }, 1500);
};

var handleSpeciesUpdate = function handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa) {
  if (speciesCount === '--') {
    speciesCount = getSpeciesCount(collection);
    document.querySelector('.js-species-summary').innerHTML = speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);
  }

  return {
    speciesCount: speciesCount,
    speciesSummary: speciesSummary
  };
};

var getSpeciesSummary = function getSpeciesSummary(iconicTaxa, speciesCount) {
  return iconicTaxa.length === 1 ? "".concat(speciesCount, " species in ").concat(iconicTaxa.length, " taxon.") : "".concat(speciesCount, " species in ").concat(iconicTaxa.length, " taxa.");
};

var getSpeciesCount = function getSpeciesCount(collection) {
  var count = collection.itemNames && collection.itemNames.length > 0 ? collection.itemNames.length : collection.items ? collection.items.length : 0;
  return count === 0 ? '--' : count;
};

/***/ }),

/***/ "xvMz":
/*!********************************************************!*\
  !*** ./src/ui/screens/home/home-lesson-intro-video.js ***!
  \********************************************************/
/*! namespace exports */
/*! export matchSpeciesTime [provided] [unused] [could be renamed] */
/*! export videoSetup [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "videoSetup": () => /* binding */ videoSetup
/* harmony export */ });
/* unused harmony export matchSpeciesTime */
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/lists/video-handler */ "3faD");
/* harmony import */ var ui_screens_home_home_lesson_intro_video_template_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/home/home-lesson-intro-video-template.html */ "rFu4");
/* harmony import */ var ui_screens_home_home_lesson_intro_video_template_html__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ui_screens_home_home_lesson_intro_video_template_html__WEBPACK_IMPORTED_MODULE_3__);
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}






var videoSetup = function videoSetup(collection, videoPlayer, parent, startTime) {
  parent.innerHTML = '';
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_home_home_lesson_intro_video_template_html__WEBPACK_IMPORTED_MODULE_3___default());
  collection.video.webLabel = collection.video.links[1].label;
  collection.video.webUrl = collection.video.links[1].url;
  var activeLesson = videoPlayer.find(function (record) {
    return record.collectionId === collection.id;
  }) || {
    collectionId: collection.id,
    startAt: collection.video.startAt || 0
  };
  activeLesson.playAt = activeLesson.pausedAt || activeLesson.startAt;
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
    video: _objectSpread(_objectSpread({}, collection.video), {}, {
      playAt: activeLesson.playAt,
      location: collection.video.location || ''
    })
  }, template.content, parent);
  var timeBeforeVideoPlayerReady = 1000;
  setTimeout(function () {
    ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.readyPlayer();
    var checkInt;

    var checkCurrentTime = function checkCurrentTime(player) {
      checkInt = setInterval(function () {
        var time = Math.floor(player.getCurrentTime());
        var match = matchSpeciesTime(time, collection);

        if (!!match) {
          ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.onSpeciesTimeMatchListeners.map(function (listener) {
            return listener(collection, match);
          });
        }

        if (!collection.notes) return;
        var noteMatch = collection.notes.find(function (note) {
          return (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(time, note.time);
        });

        if (noteMatch) {
          ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.onNoteTimeMatchListeners.map(function (listener) {
            return listener(collection, noteMatch);
          });
        }
      }, 1000);
    };

    var onPlayerStateChangeCallback = function onPlayerStateChangeCallback(player) {
      if (!_typeof(player.getPlayerState) === 'function' || player.getPlayerState === undefined) return;
      var playerState = player.getPlayerState();
      ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.updateVideoPlayer(redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState().videoPlayer, collection, activeLesson.speciesName);

      switch (playerState) {
        case ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.states.find(function (state) {
          return state.value === 'playing';
        }).key:
          // 1
          checkCurrentTime(player);
          break;

        case ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.states.find(function (state) {
          return state.value === 'paused';
        }).key:
          // 2
          clearInterval(checkInt);
          checkInt = null;
          break;

        default:
          checkCurrentTime(player);
      }
    };

    ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.subscribeToPlayerStateChange(onPlayerStateChangeCallback);

    if (startTime) {
      setTimeout(function () {
        ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_2__.videoHandler.playVideoFrom(startTime);
      }, 1000);
    }
  }, timeBeforeVideoPlayerReady);
  var video = document.getElementsByTagName('iframe')[0];
  var videoWidth = video.offsetWidth;
  video.height = videoWidth * 9 / 16;
};
var matchSpeciesTime = function matchSpeciesTime(time, collection) {
  var species = collection.items ? collection.items.filter(function (sp) {
    return sp.time;
  }) : collection.species.filter(function (sp) {
    return sp.time;
  });
  var match = species.find(function (sp) {
    return (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(time, sp.time);
  });
  return match;
};

/***/ }),

/***/ "2w0h":
/*!**************************************************!*\
  !*** ./src/ui/screens/home/home-lesson-intro.js ***!
  \**************************************************/
/*! namespace exports */
/*! export renderLessonIntro [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderLessonIntro": () => /* binding */ renderLessonIntro
/* harmony export */ });
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_screens_home_home_lesson_intro_video__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/home/home-lesson-intro-video */ "xvMz");
/* harmony import */ var ui_screens_home_home_lesson_intro_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/home/home-lesson-intro-text */ "2nee");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}





var renderLessonIntro = function renderLessonIntro(collection) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      config = _store$getState.config,
      videoPlayer = _store$getState.videoPlayer,
      lesson = _store$getState.collection;

  collection = _objectSpread(_objectSpread({}, collection), {}, {
    items: lesson.items
  });
  collection.hasVideo ? (0,ui_screens_home_home_lesson_intro_video__WEBPACK_IMPORTED_MODULE_2__.videoSetup)(collection, videoPlayer || [], ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody) : (0,ui_screens_home_home_lesson_intro_text__WEBPACK_IMPORTED_MODULE_3__.textSetup)(collection, config);
};

/***/ }),

/***/ "gYBR":
/*!****************************************************!*\
  !*** ./src/ui/screens/landscape/specimen-tiles.js ***!
  \****************************************************/
/*! namespace exports */
/*! export renderSpecimenTiles [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderSpecimenTiles": () => /* binding */ renderSpecimenTiles
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ramda */ "NjoR");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/landscape/specimen-tiles-template.html */ "u8BC");
/* harmony import */ var ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5__);








var renderSpecimenTiles = function renderSpecimenTiles(collection) {
  var item = collection.nextItem;
  if (!item) return;
  renderItemSpecimenTiles(item);
};

var renderItemSpecimenTiles = function renderItemSpecimenTiles(item) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      config = _store$getState.config,
      collection = _store$getState.collection,
      layout = _store$getState.layout;

  var familes = ['family-strips', 'family', 'taxon-card'];
  var collectionItems = collection.allItems || collection.items;
  var images, items;

  if ((0,ramda__WEBPACK_IMPORTED_MODULE_6__.default)(layout.screens[1].name, familes)) {
    var family = collectionItems.filter(function (i) {
      return i.family.name.toLowerCase() === item.taxonomy.family.toLowerCase();
    });
    images = (0,ramda__WEBPACK_IMPORTED_MODULE_7__.default)(6, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(getImagesFromItemFamily(family, config, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.imageUseCases.SPECIES_CARD)));
    items = images.map(function (image) {
      return collectionItems.find(function (item) {
        return item.name === image.itemName;
      });
    });
  } else {
    images = (0,ramda__WEBPACK_IMPORTED_MODULE_7__.default)(6, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray((0,ramda__WEBPACK_IMPORTED_MODULE_8__.default)(item.images)));
    images = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.prepImagesForCarousel)({
      name: item.name,
      itemCommon: item.itemCommon,
      images: images
    }, config, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.imageUseCases.SPECIES_CARD);
    items = [item];
  }

  images = images.map(function (image) {
    return (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.scaleImage)(image, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.imageUseCases.VISUAL_MATCH, config);
  });
  renderSpecimenImageTiles({
    items: items
  }, images, item);
};

var renderSpecimenImageTiles = function renderSpecimenImageTiles(collection, images, item) {
  var _store$getState2 = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      layout = _store$getState2.layout,
      config = _store$getState2.config;

  var acceptableScreens = ['specimen-images', 'trait-images']; // lookalike options?

  var screen = layout.screens.find(function (screen) {
    return (0,ramda__WEBPACK_IMPORTED_MODULE_6__.default)(screen.name, acceptableScreens);
  });
  if (!screen) return;
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_landscape_specimen_tiles_template_html__WEBPACK_IMPORTED_MODULE_5___default());
  var parent = ui_dom__WEBPACK_IMPORTED_MODULE_2__.DOM.leftBody;
  parent.innerHTML = '';
  snapLog('renderSpecimenImageTiles, image medium values:', images.map(function (i) {
    return i.medium;
  }));
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({
    images: images
  }, template.content, parent);
  (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.modalImagesHandler)(document.querySelectorAll('.js-tiles .square'), item, collection, config);
};

var getImagesFromItemFamily = function getImagesFromItemFamily(family, config, useCase) {
  var itemImages, items;
  itemImages = (0,ramda__WEBPACK_IMPORTED_MODULE_9__.default)(family.map(function (i) {
    return {
      images: i.images,
      item: {
        name: i.name,
        itemCommon: i.names[0].vernacularName,
        vernacularName: i.names[0].vernacularName,
        names: i.names
      }
    };
  }));

  if (itemImages.length < 6) {
    var pool = itemImages.map(function (image) {
      var item = family.find(function (i) {
        return i.name === image.item.name;
      });
      return {
        images: item.images,
        item: {
          name: item.name,
          itemCommon: item.names[0].vernacularName,
          vernacularName: item.names[0].vernacularName,
          names: item.names
        }
      };
    });
    var pooledImages = (0,ramda__WEBPACK_IMPORTED_MODULE_9__.default)(pool);
    pooledImages.forEach(function (pooledImage) {
      pooledImage.images.forEach(function (image) {
        itemImages.push({
          images: pooledImage.images,
          item: pooledImage.item
        });
      });
    });
  }

  items = itemImages.map(function (image) {
    return image.item;
  });
  items.forEach(function (i) {
    var itemName = i.name;
    i.images = family.find(function (i) {
      return i.name === itemName;
    }).images;
  });
  var uniqueImages = [];

  var getUniqueImage = function getUniqueImage(image, index, uniqueImages) {
    var uniqueImage = image.images.find(function (i) {
      return i.starred;
    });

    if (uniqueImage) {
      uniqueImage = (0,ramda__WEBPACK_IMPORTED_MODULE_6__.default)(uniqueImage.title, uniqueImages.map(function (i) {
        return i.title;
      })) ? null : uniqueImage;
    }

    if (uniqueImage) {
      uniqueImages.push(uniqueImage);
      return uniqueImage;
    } else {
      uniqueImage = image.images[index];

      if (uniqueImage && !(0,ramda__WEBPACK_IMPORTED_MODULE_6__.default)(uniqueImage.title, uniqueImages.map(function (i) {
        return i.title;
      }))) {
        uniqueImages.push(uniqueImage);
        return uniqueImage;
      }
    }
  };

  var familyImages = [];
  itemImages.forEach(function (image, index) {
    var imageToPrep = getUniqueImage(image, index, uniqueImages);

    if (imageToPrep) {
      familyImages.push((0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.prepImageForCarousel)(imageToPrep, index, image.item, config, useCase));
    }
  });
  return familyImages;
};

/***/ }),

/***/ "Sj2D":
/*!***********************************************!*\
  !*** ./src/ui/screens/lists/lesson-custom.js ***!
  \***********************************************/
/*! namespace exports */
/*! export renderCustomLesson [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderCustomLesson": () => /* binding */ renderCustomLesson
/* harmony export */ });
/* harmony import */ var ui_create_guide_modal_create_guide__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/create-guide-modal/create-guide */ "iXzC");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_lists_lesson_list_event_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/lists/lesson-list-event-handler */ "NGKZ");
/* harmony import */ var ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/lists/lesson-template.html */ "j0sj");
/* harmony import */ var ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_3__);




var renderCustomLesson = function renderCustomLesson(lessons, videoPlayer, config) {
  (0,ui_create_guide_modal_create_guide__WEBPACK_IMPORTED_MODULE_0__.onCreateCustomLesson)(function (collection) {
    var parent = document.querySelector('.lesson-list > .scrollable');
    var template = document.createElement('template');
    template.innerHTML = (ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_3___default());
    var lesson = (0,ui_screens_lists_lesson_list_event_handler__WEBPACK_IMPORTED_MODULE_2__.onLoadLessonViewState)(collection, videoPlayer);
    lesson.hideVideoClass = 'hide-important';
    lesson.hideTextIntroClass = '';
    lessons.push(lesson);
    lesson.icon = lesson.icon || "https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307";
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
      lesson: lesson
    }, template.content, parent);
    var scrollOptions = {
      left: 0,
      top: 1000,
      behavior: 'smooth'
    };
    setTimeout(function () {
      document.querySelector('.js-lesson-container').scrollTo(scrollOptions);
      var reviewLink = document.querySelector(".js-review-link[data-lesson-id=\"".concat(lesson.id, "\"]"));
      Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
        module.lessonListEventHandler.onReviewClickHandler(reviewLink, config);
      });
      var chevron = config.isLandscapeMode ? document.querySelector(".js-lesson-list-chevron[data-lesson-id=\"".concat(lesson.id, "\"]")) : document.querySelectorAll(".js-lesson-list-chevron[data-lesson-id=\"".concat(lesson.id, "\"]"))[1];

      if (chevron) {
        Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
          module.lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false);
        });
      }

      var youtubeLessonIcon = document.querySelector(".js-lesson-list-youtube[data-lesson-id=\"".concat(lesson.id, "\"]"));

      if (youtubeLessonIcon) {
        youtubeLessonIcon.classList.add('hide-important');
      }

      Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
        module.lessonListEventHandler.highlightActiveLesson(lesson.id);
      });
    }, 250);
  });
};

/***/ }),

/***/ "bIuk":
/*!*********************************************!*\
  !*** ./src/ui/screens/lists/lesson-edit.js ***!
  \*********************************************/
/*! namespace exports */
/*! export renderEditLesson [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderEditLesson": () => /* binding */ renderEditLesson
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/actions/action-creators */ "/CNf");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_create_guide_modal_species_in_guide_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/create-guide-modal/species-in-guide-editor */ "6sgU");
/* harmony import */ var ui_screens_lists_lesson_edit_template_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/lists/lesson-edit-template.html */ "pC5K");
/* harmony import */ var ui_screens_lists_lesson_edit_template_html__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ui_screens_lists_lesson_edit_template_html__WEBPACK_IMPORTED_MODULE_4__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}






var renderEditLesson = function renderEditLesson(collection) {
  var init = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var _store$getState, config, template, modal, parent, header, selectedSpeciesDisplay, createGuide;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(), config = _store$getState.config;
              template = document.createElement('template');
              template.innerHTML = (ui_screens_lists_lesson_edit_template_html__WEBPACK_IMPORTED_MODULE_4___default());
              modal = document.querySelector('#basicModal');
              parent = modal.querySelector('.js-modal-text');
              parent.innerHTML = '';
              (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
                collection: collection
              }, template.content, parent);
              header = modal.querySelector('.js-modal-text-title');
              header.innerHTML = 'Edit lesson';
              selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');
              selectedSpeciesDisplay.innerHTML = '';
              createGuide = {
                setConfig: function setConfig(config) {
                  redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__.actions.boundUpdateConfig(config);
                }
              };
              (0,ui_create_guide_modal_species_in_guide_editor__WEBPACK_IMPORTED_MODULE_3__.speciesInGuideEditor)(config, modal, selectedSpeciesDisplay, createGuide, collection.items);

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function init() {
      return _ref.apply(this, arguments);
    };
  }();

  init();
};

/***/ }),

/***/ "NGKZ":
/*!***********************************************************!*\
  !*** ./src/ui/screens/lists/lesson-list-event-handler.js ***!
  \***********************************************************/
/*! namespace exports */
/*! export lessonListEventHandler [provided] [maybe used (runtime-defined)] [usage prevents renaming] */
/*! export onLoadLessonViewState [provided] [used] [usage prevents renaming] */
/*! export onLoadLessonsViewState [provided] [used] [usage prevents renaming] */
/*! other exports [not provided] [maybe used (runtime-defined)] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "onLoadLessonViewState": () => /* binding */ onLoadLessonViewState,
/* harmony export */   "onLoadLessonsViewState": () => /* binding */ onLoadLessonsViewState,
/* harmony export */   "lessonListEventHandler": () => /* binding */ lessonListEventHandler
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ramda */ "Jq34");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_screens_home_home_lesson_intro__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/home/home-lesson-intro */ "2w0h");
/* harmony import */ var ui_screens_lists_lesson_edit__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/lists/lesson-edit */ "bIuk");
/* harmony import */ var ui_screens_lists_lesson_list_scroll_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/lists/lesson-list-scroll-handler */ "Yxnt");
/* harmony import */ var ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/lists/video-handler */ "3faD");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}










var onLoadLessonViewState = function onLoadLessonViewState(collection, videoPlayer) {
  var taxa = collection.iconicTaxa ? collection.iconicTaxa.map(function (taxon) {
    return taxon.common;
  }).join(', ') : '';
  collection.taxa = taxa;
  collection.hasVideo = collection.video && !(0,ramda__WEBPACK_IMPORTED_MODULE_8__.default)(collection.video) ? true : false;
  collection.showVideoIconClass = collection.hasVideo ? '' : 'hide-important';
  collection.videoState = ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_7__.videoHandler.setVideoState(videoPlayer || [], collection);
  collection.reviewState = 'Lesson Quiz';
  collection.hasTermsClass = collection.terms && Array.isArray(collection.terms) && collection.terms.length > 0 ? '' : 'hide-important';
  collection.isCollectionEditableClass = '';
  return collection;
};
var onLoadLessonsViewState = function onLoadLessonsViewState(collections, videoPlayer) {
  return collections.map(function (collection) {
    return onLoadLessonViewState(collection, videoPlayer);
  });
};

var onClickViewState = function onClickViewState(e, lessons) {
  var icon = e.currentTarget;
  var isYoutubeIcon = utils_utils__WEBPACK_IMPORTED_MODULE_2__.utils.hasClass(icon, 'js-lesson-list-youtube');
  var isChevronIcon = utils_utils__WEBPACK_IMPORTED_MODULE_2__.utils.hasClass(icon, 'js-lesson-list-chevron');
  var row = icon.parentElement.parentElement;
  var lessonId = parseInt(icon.dataset.lessonId);
  var lesson = lessons.find(function (l) {
    return l.id === lessonId;
  });
  var container = document.querySelector(".js-species-container[data-container-id=\"".concat(lessonId, "\"]"));
  var speciesList = document.querySelector("#species_list_id_".concat(lessonId));
  var reviewLink = document.querySelector(".js-review-link[data-lesson-id=\"".concat(lessonId, "\"]")); // snapLog('onClickViewState', {});

  hideOtherContentAndRevertChevrons(lessonId);
  var isSpeciesListAvailable = !!speciesList;
  var isSpeciesListHidden = utils_utils__WEBPACK_IMPORTED_MODULE_2__.utils.hasClass(speciesList, 'hide');
  var lessonVideoState = document.querySelector(".js-lesson-video-state[data-lesson-id=\"".concat(lessonId, "\"]"));
  var iconIsChevron = !icon.dataset.lessonIsYoutubeIcon;
  var state = {
    requiresSpeciesList: !isSpeciesListAvailable,
    revealSpeciesList: isSpeciesListAvailable && isSpeciesListHidden,
    hideSpeciesList: isSpeciesListAvailable && !isSpeciesListHidden && iconIsChevron
  };
  return {
    icon: icon,
    lesson: lesson,
    state: state,
    speciesList: speciesList,
    container: container,
    lessonVideoState: lessonVideoState,
    reviewLink: reviewLink,
    row: row,
    isYoutubeIcon: isYoutubeIcon
  };
};

var onLessonIconClickHandler = function onLessonIconClickHandler(icon, lessons, config, startLesson) {
  return icon.addEventListener('click', /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(e) {
      var _onClickViewState, icon, lesson, state, speciesList, container, lessonVideoState, row, isYoutubeIcon, isItemActive, lessonYoutubeIcons, chevron, lessonsIcon, siblingChevron;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _onClickViewState = onClickViewState(e, lessons), icon = _onClickViewState.icon, lesson = _onClickViewState.lesson, state = _onClickViewState.state, speciesList = _onClickViewState.speciesList, container = _onClickViewState.container, lessonVideoState = _onClickViewState.lessonVideoState, row = _onClickViewState.row, isYoutubeIcon = _onClickViewState.isYoutubeIcon; // snapLog('onLessonIconClickHandler', {});

              isItemActive = function isItemActive(item) {
                if (item.hasOwnProperty('isActive')) {
                  return item.isActive;
                } else {
                  return true;
                }
              };

              lesson.items = lesson.items.filter(function (item) {
                return isItemActive(item);
              });
              lessonYoutubeIcons = document.querySelectorAll('.lesson-list-selected-lesson .youtube-icon');
              lessonYoutubeIcons.forEach(function (icon) {
                return icon.parentElement.classList.remove('youtube-green-fg');
              });

              if (icon.dataset.lessonIsYoutubeIcon) {
                icon.classList.add('youtube-green-fg');
                chevron = document.querySelector(".js-lesson-list-chevron[data-lesson-id=\"".concat(icon.dataset.lessonId, "\"]"));
                chevron.innerHTML = "<i class=\"fas fa-chevron-up\" data-lesson-id=\"".concat(lesson.id, "\"></i>");

                if (config.isPortraitMode) {
                  lessonsIcon = document.querySelector('.js-lessons');
                  lessonsIcon.classList.remove('active-icon');
                }
              }

              if (startLesson) {
                (0,ui_screens_home_home_lesson_intro__WEBPACK_IMPORTED_MODULE_4__.renderLessonIntro)(lesson);
                siblingChevron = icon.parentElement.parentElement.parentElement.children[1].children[0].children[1];

                if (isYoutubeIcon) {
                  if (state.hideSpeciesList) {
                    siblingChevron.innerHTML = "<i class=\"fas fa-chevron-down\" data-lesson-id=\"".concat(lesson.id, "\"></i>");
                  }
                }
              } else {
                if (!isYoutubeIcon) {
                  if (state.hideSpeciesList) {
                    icon.innerHTML = "<i class=\"fas fa-chevron-down\" data-lesson-id=\"".concat(lesson.id, "\"></i>");
                  } else if (!state.revealSpeciesList) {
                    icon.innerHTML = "<i class=\"fas fa-chevron-up\" data-lesson-id=\"".concat(lesson.id, "\"></i>");
                  }
                }
              }

              if (state.revealSpeciesList) {
                speciesList.classList.remove('hide');

                if (!isYoutubeIcon) {
                  icon.innerHTML = "<i class=\"fas fa-chevron-up\" data-lesson-id=\"".concat(lesson.id, "\"></i>");
                }
              }

              if (state.hideSpeciesList) {
                speciesList.classList.add('hide');
                lessonVideoState.innerHTML = ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_7__.videoHandler.setVideoState(redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState().videoPlayer || [], lesson);
              }

              if (!state.requiresSpeciesList) {
                _context.next = 12;
                break;
              }

              _context.next = 12;
              return loadAndDisplaySpeciesList(config, icon, lesson, config.isPortraitMode && isYoutubeIcon ? ui_dom__WEBPACK_IMPORTED_MODULE_0__.DOM.rightBody.querySelector('.js-home-scrolling-container .scrollable') : container, isYoutubeIcon);

            case 12:
              row.classList.add('lesson-list-selected-lesson');

            case 13:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }());
};

var onLessonTitleClickHandler = function onLessonTitleClickHandler(title, lessons) {
  title.addEventListener('click', function (e) {
    var lesson = lessons.find(function (lesson) {
      return lesson.id === parseInt(title.dataset.lessonId);
    });
    (0,ui_screens_lists_lesson_edit__WEBPACK_IMPORTED_MODULE_5__.renderEditLesson)(lesson);
  });
};

var onReviewClickHandler = function onReviewClickHandler(reviewLink, config) {
  var reviewLinkHandler = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(e) {
      var spinner;
      return regeneratorRuntime.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              spinner = document.querySelector(".review-spinner[data-lesson-id=\"".concat(reviewLink.dataset.lessonId, "\"]"));
              if (spinner) spinner.classList.remove('hide');
              setTimeout(function () {
                if (spinner) spinner.classList.add('hide');
              }, config.isPortraitMode ? 5000 : 2500);
              Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-state-handler */ "MC3F")).then(function (module) {
                module.lessonStateHandler.recordUserAction(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.userEvent.START_LESSON_REVIEW);
                module.lessonStateHandler.changeRequest({
                  requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.lessonState.BEGIN_OR_RESUME_LESSON,
                  requestArgs: {
                    id: reviewLink.dataset.lessonId
                  }
                });
              });

            case 4:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, this);
    }));

    return function reviewLinkHandler(_x2) {
      return _ref2.apply(this, arguments);
    };
  }();

  reviewLink.addEventListener('click', reviewLinkHandler);
};

var hideOtherContentAndRevertChevrons = function hideOtherContentAndRevertChevrons(selectedLessonId) {
  var upChevrons = Array.from(document.querySelectorAll('.js-lesson-list-chevron .fa-chevron-up'));
  upChevrons.forEach(function (chevron) {
    var chevronLessonId = parseInt(chevron.dataset.lessonId);

    if (chevronLessonId !== selectedLessonId) {
      chevron.parentElement.click();
      var lesson = document.querySelector(".js-lesson-list-carousel-item[data-lesson-id=\"".concat(chevronLessonId, "\"]"));
      lesson.classList.remove('highlighted-for-review-row');
    }
  });
};

var loadAndDisplaySpeciesList = /*#__PURE__*/function () {
  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(config, icon, lesson, container, isYoutubeIcon) {
    return regeneratorRuntime.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            Array.from(icon.parentElement.children).forEach(function (child) {
              return child.dataset.selected = true;
            });
            _context3.next = 3;
            return Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-state-handler */ "MC3F")).then(function (module) {
              module.lessonStateHandler.recordUserAction(isYoutubeIcon ? ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.userEvent.PLAY_LESSON_VIDEO : ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.userEvent.TOGGLE_SPECIES_LIST);
              module.lessonStateHandler.changeRequest({
                requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.lessonState.RENDER_SPECIES_LIST,
                requestArgs: {
                  lesson: lesson,
                  container: container
                }
              });
            });

          case 3:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3, this);
  }));

  return function loadAndDisplaySpeciesList(_x3, _x4, _x5, _x6, _x7) {
    return _ref3.apply(this, arguments);
  };
}();

var highlightActiveLesson = function highlightActiveLesson(lessonId) {
  var rows = document.querySelectorAll('.js-lesson-list-carousel-item');
  rows.forEach(function (row) {
    return row.classList.remove('highlighted-for-review-row');
  });
  var row = document.querySelector(".js-lesson-list-carousel-item[data-lesson-id=\"".concat(lessonId, "\"]"));
  if (row) row.classList.add('highlighted-for-review-row'); // lessonListScrollHandler.scrollToTitle(lesson.dataset.lessonId);
};

var lessonListEventHandler = {
  onLoadLessonViewState: onLoadLessonViewState,
  onLoadLessonsViewState: onLoadLessonsViewState,
  onLessonIconClickHandler: onLessonIconClickHandler,
  onReviewClickHandler: onReviewClickHandler,
  onLessonTitleClickHandler: onLessonTitleClickHandler,
  hideOtherContentAndRevertChevrons: hideOtherContentAndRevertChevrons,
  highlightActiveLesson: highlightActiveLesson
};

/***/ }),

/***/ "55WB":
/*!****************************************************!*\
  !*** ./src/ui/screens/lists/lesson-list-header.js ***!
  \****************************************************/
/*! namespace exports */
/*! export renderLessonListHeader [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderLessonListHeader": () => /* binding */ renderLessonListHeader
/* harmony export */ });
/* harmony import */ var ui_screens_lists_lesson_list_header_template_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/screens/lists/lesson-list-header-template.html */ "Ldqy");
/* harmony import */ var ui_screens_lists_lesson_list_header_template_html__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ui_screens_lists_lesson_list_header_template_html__WEBPACK_IMPORTED_MODULE_0__);

var renderLessonListHeader = function renderLessonListHeader(parent) {
  var header = document.createElement("div");
  header.innerHTML = (ui_screens_lists_lesson_list_header_template_html__WEBPACK_IMPORTED_MODULE_0___default());
  var sibling = document.querySelector('.lesson-list .scrollable');
  parent = document.querySelector('.lesson-list');
  parent.insertBefore(header, sibling);
};

/***/ }),

/***/ "Yxnt":
/*!************************************************************!*\
  !*** ./src/ui/screens/lists/lesson-list-scroll-handler.js ***!
  \************************************************************/
/*! namespace exports */
/*! export lessonListScrollHandler [provided] [unused] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* unused harmony export lessonListScrollHandler */
var siblingsBefore = function siblingsBefore(lessonId) {
  var siblings = document.querySelectorAll('.js-lesson-list-item:not(.hide-important)');
  var sibling = siblings[0];
  var index = 0;
  var before = [];

  while (sibling) {
    index++;

    if (parseInt(sibling.dataset.lessonId) !== lessonId) {
      before.push(sibling);
      sibling = siblings[index];
    } else {
      sibling = null;
    }
  }

  return before.length;
};

var scrollToTitle = function scrollToTitle(lessonId) {
  setTimeout(function () {
    var standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhRow').replace('px', ''));
    var rows = siblingsBefore(lessonId);
    var top = standardBlock * rows;
    var scroll = document.querySelector('.lesson-list .scrollable');
    if (scroll) scroll.scrollTop = top;
  });
};

var lessonListScrollHandler = {
  scrollToTitle: scrollToTitle
};

/***/ }),

/***/ "3D3m":
/*!*********************************************!*\
  !*** ./src/ui/screens/lists/lesson-list.js ***!
  \*********************************************/
/*! namespace exports */
/*! export renderLessons [provided] [used] [usage prevents renaming] */
/*! other exports [not provided] [maybe used (runtime-defined)] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_require__.r, __webpack_exports__, __webpack_require__.e, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderLessons": () => /* binding */ renderLessons
/* harmony export */ });
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_lists_lesson_list_header__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/lists/lesson-list-header */ "55WB");
/* harmony import */ var ui_screens_lists_lesson__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/lists/lesson */ "zOdy");
/* harmony import */ var ui_screens_lists_lesson_custom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/lists/lesson-custom */ "Sj2D");
/* harmony import */ var ui_screens_lists_lesson_list_event_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/lists/lesson-list-event-handler */ "NGKZ");
/* harmony import */ var ui_screens_lists_lesson_list_template_html__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/screens/lists/lesson-list-template.html */ "GB9M");
/* harmony import */ var ui_screens_lists_lesson_list_template_html__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(ui_screens_lists_lesson_list_template_html__WEBPACK_IMPORTED_MODULE_8__);
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}










var renderLessons = function renderLessons() {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState(),
      config = _store$getState.config,
      collections = _store$getState.collections,
      videoPlayer = _store$getState.videoPlayer;

  var template = document.createElement('template');
  template.innerHTML = (ui_screens_lists_lesson_list_template_html__WEBPACK_IMPORTED_MODULE_8___default());
  var lessons = (0,ui_screens_lists_lesson_list_event_handler__WEBPACK_IMPORTED_MODULE_7__.onLoadLessonsViewState)(collections.filter(function (collection) {
    return collection.isActive === undefined || collection.isActive;
  }), videoPlayer);
  lessons = lessons.sort(function (a, b) {
    var tsa = a.create ? a.create.seconds : 0;
    var tsb = b.create ? b.create.seconds : 0;
    return tsb - tsa;
  });
  var parent = config.isPortraitMode ? ui_dom__WEBPACK_IMPORTED_MODULE_1__.DOM.rightBody : ui_dom__WEBPACK_IMPORTED_MODULE_1__.DOM.leftBody;
  parent.innerHTML = '';
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({}, template.content, parent);
  lessons.forEach(function (lesson) {
    return (0,ui_screens_lists_lesson__WEBPACK_IMPORTED_MODULE_5__.renderLesson)(lesson);
  });
  (0,ui_screens_lists_lesson_list_header__WEBPACK_IMPORTED_MODULE_4__.renderLessonListHeader)(parent);
  var createCustomLessonBtn = parent.querySelector('.js-create-custom-lesson');
  createCustomLessonBtn.addEventListener('click', function (e) {
    Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/create-guide-modal/create-guide */ "iXzC")).then(function (module) {
      module.createGuideHandler(1);
    });
    Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
      module.lessonListEventHandler.hideOtherContentAndRevertChevrons(0);
    });
  });
  var youtubeLessonIcons = document.querySelectorAll('.js-lesson-list-youtube');
  youtubeLessonIcons.forEach(function (youtube) {
    Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
      module.lessonListEventHandler.onLessonIconClickHandler(youtube, lessons, config, true);
    });
  });
  highlightActiveLessonHandler(youtubeLessonIcons);
  var chevrons = document.querySelectorAll('.js-lesson-list-chevron');
  chevrons.forEach(function (chevron) {
    Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
      module.lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false);
    });
  });
  highlightActiveLessonHandler(chevrons);
  var reviews = document.querySelectorAll('.js-review-link');
  reviews.forEach(function (reviewLink) {
    Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
      module.lessonListEventHandler.onReviewClickHandler(reviewLink, config);
    });
  });
  highlightActiveLessonHandler(reviews);
  setTimeout(function () {
    var terms = document.querySelectorAll('.js-terms-review-link');
    terms.forEach(function (term) {
      term.addEventListener('click', function (e) {
        var lesson = lessons.find(function (lesson) {
          return lesson.id === parseInt(term.dataset.lessonId);
        });

        if (lesson.terms) {
          var _store$getState2 = redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState(),
              glossary = _store$getState2.glossary;

          setTimeout(function () {
            var _store$getState3 = redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState(),
                quickFire = _store$getState3.quickFire;

            if (quickFire && quickFire.lessonId === lesson.id) {
              __webpack_require__.e(/*! import() */ "src_ui_quick-fire-modal_quick-fire_js").then(__webpack_require__.bind(__webpack_require__, /*! ui/quick-fire-modal/quick-fire */ "U7Pl")).then(function (module) {
                module.quickFireHandlers.questions(quickFire);
              });
            } else {
              __webpack_require__.e(/*! import() */ "src_ui_quick-fire-modal_quick-fire_js").then(__webpack_require__.bind(__webpack_require__, /*! ui/quick-fire-modal/quick-fire */ "U7Pl")).then(function (module) {
                var quickFireState = _objectSpread(_objectSpread({}, module.quickFireHandlers.init(glossary, ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__.enums.quickFireType.DEFINITION, lesson)), {}, {
                  linkFromLesson: true
                });

                module.quickFireHandlers.questions(quickFireState);
              });
            }
          }, 150);
        }
      });
    });
    highlightActiveLessonHandler(terms);
  }, 100);
  (0,ui_screens_lists_lesson_custom__WEBPACK_IMPORTED_MODULE_6__.renderCustomLesson)(lessons, videoPlayer, config);
};

var highlightActiveLessonHandler = function highlightActiveLessonHandler(lessons) {
  lessons.forEach(function (lesson) {
    return lesson.addEventListener('click', function (e) {
      Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-list-event-handler */ "NGKZ")).then(function (module) {
        module.lessonListEventHandler.highlightActiveLesson(lesson.dataset.lessonId);
      });
    });
  });
};

/***/ }),

/***/ "MC3F":
/*!******************************************************!*\
  !*** ./src/ui/screens/lists/lesson-state-handler.js ***!
  \******************************************************/
/*! namespace exports */
/*! export lessonStateHandler [provided] [used] [usage prevents renaming] */
/*! other exports [not provided] [maybe used (runtime-defined)] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "lessonStateHandler": () => /* binding */ lessonStateHandler
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/subscriptions */ "6saE");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var redux_reducers_initial_state_initial_progress_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/reducers/initial-state/initial-progress-state */ "+Q6R");
/* harmony import */ var redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/actions/action-creators */ "/CNf");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_screens_lists_species_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/lists/species-list */ "xluv");
/* harmony import */ var ui_helpers_collection_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/helpers/collection-handler */ "Cz4z");
/* harmony import */ var ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/screens/lists/lesson-state-helper */ "6Fh2");
/* harmony import */ var ui_setup_next_lesson__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/setup/next-lesson */ "ygxW");
/* harmony import */ var ui_setup_next_layout__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ui/setup/next-layout */ "982S");
/* harmony import */ var ui_setup_next_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ui/setup/next-item */ "Qml2");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}















var changeRequest = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(args) {
    var requestType, requestArgs, _store$getState, config, collections, collection, counter, lessonPlan, lessonPlans, layout, lesson, score, history, bonusLayout, _store$getState$trait, traits, userProgressState, savedLesson, collectionToLoad, _lessonState;

    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            requestType = args.requestType, requestArgs = args.requestArgs;
            _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_4__.store.getState(), config = _store$getState.config, collections = _store$getState.collections, collection = _store$getState.collection, counter = _store$getState.counter, lessonPlan = _store$getState.lessonPlan, lessonPlans = _store$getState.lessonPlans, layout = _store$getState.layout, lesson = _store$getState.lesson, score = _store$getState.score, history = _store$getState.history, bonusLayout = _store$getState.bonusLayout, _store$getState$trait = _store$getState.traits, traits = _store$getState$trait === void 0 ? ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums : _store$getState$trait;
            _context.t0 = requestType;
            _context.next = _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.PAUSE_LESSON ? 5 : _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.UPDATE_COLLECTION ? 7 : _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.SAVE_LESSON_PROGRESS ? 9 : _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.GET_LESSON_STATE ? 13 : _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.ADD_SPECIES_TO_COLLECTION ? 18 : _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.RENDER_SPECIES_LIST ? 22 : _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.BEGIN_OR_RESUME_LESSON ? 28 : _context.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.NEXT_ROUND ? 39 : 41;
            break;

          case 5:
            changeLessonState(requestType, collection, config);
            return _context.abrupt("break", 41);

          case 7:
            redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundUpdateCollection({
              config: requestArgs.config,
              collection: requestArgs.collection
            });
            return _context.abrupt("break", 41);

          case 9:
            config.collection.id = collection.id; // hack

            savedLesson = {
              name: collection.name,
              config: config,
              collection: collection,
              counter: counter,
              lessonPlan: lessonPlan,
              lessonPlans: lessonPlans,
              layout: layout,
              lesson: lesson,
              score: (0,ramda__WEBPACK_IMPORTED_MODULE_12__.default)(score),
              history: history,
              bonusLayout: bonusLayout,
              enums: traits
            };
            redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundSaveLesson(savedLesson);
            return _context.abrupt("break", 41);

          case 13:
            _context.next = 15;
            return getLessonState(requestArgs.collectionToLoad, requestArgs.config, requestArgs.updatedCounter);

          case 15:
            userProgressState = _context.sent;
            saveUserProgressState(userProgressState);
            return _context.abrupt("return", userProgressState);

          case 18:
            _context.next = 20;
            return addExtraSpeciesSelection(requestArgs);

          case 20:
            userProgressState = _context.sent;
            saveUserProgressState(userProgressState);

          case 22:
            _context.next = 24;
            return getLessonState(requestArgs.lesson || requestArgs.collection, config);

          case 24:
            userProgressState = _context.sent;
            saveUserProgressState(userProgressState);
            setTimeout(function () {
              (0,ui_screens_lists_species_list__WEBPACK_IMPORTED_MODULE_6__.renderSpeciesList)(userProgressState.collection, {
                callingParentContainer: requestArgs.container
              });
            });
            return _context.abrupt("break", 41);

          case 28:
            collectionToLoad = ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_8__.lessonStateHelper.getCollectionToLoad(collection, collections, requestArgs.id);
            _context.next = 31;
            return getLessonState(collectionToLoad, config);

          case 31:
            userProgressState = _context.sent;
            _lessonState = userProgressState.score && userProgressState.score.collectionId === userProgressState.collection.id ? ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.RESUME_LESSON : ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.BEGIN_LESSON;
            saveUserProgressState(userProgressState); // subscription.addAllQuizLayoutSubs();

            redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.add(ui_setup_next_item__WEBPACK_IMPORTED_MODULE_11__.nextItem, 'layout', 'quiz');
            redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.add(ui_setup_next_lesson__WEBPACK_IMPORTED_MODULE_9__.nextLesson, 'counter', 'quiz');
            redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.add(ui_setup_next_layout__WEBPACK_IMPORTED_MODULE_10__.nextLayout, 'counter', 'quiz');
            setTimeout(function () {
              changeLessonState(_lessonState, userProgressState.collection, userProgressState.lesson);
            });
            return _context.abrupt("break", 41);

          case 39:
            changeLessonState(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.NEXT_ROUND, collection, requestArgs.lesson);
            return _context.abrupt("break", 41);

          case 41:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function changeRequest(_x) {
    return _ref.apply(this, arguments);
  };
}();

var getLessonState = /*#__PURE__*/function () {
  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(collectionToLoad, config, newLessonCounter) {
    var _store$getState2, stateCounter, lessons, savedLesson, counter, userProgressState;

    return regeneratorRuntime.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _store$getState2 = redux_store__WEBPACK_IMPORTED_MODULE_4__.store.getState(), stateCounter = _store$getState2.counter, lessons = _store$getState2.lessons, savedLesson = _store$getState2.lesson;
            counter = newLessonCounter || stateCounter;
            userProgressState = ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_8__.lessonStateHelper.getUserLessonState(lessons, collectionToLoad, redux_reducers_initial_state_initial_progress_state__WEBPACK_IMPORTED_MODULE_2__.progressState, counter, savedLesson, newLessonCounter);
            _context2.next = 5;
            return ui_helpers_collection_handler__WEBPACK_IMPORTED_MODULE_7__.collectionHandler.loadCollection(userProgressState.collection, config);

          case 5:
            userProgressState.collection = _context2.sent;
            return _context2.abrupt("return", userProgressState);

          case 7:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2, this);
  }));

  return function getLessonState(_x2, _x3, _x4) {
    return _ref2.apply(this, arguments);
  };
}();

var changeLessonState = /*#__PURE__*/function () {
  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(userProgressState, collection, lesson) {
    var _lessonStateHelper$ge, index;

    return regeneratorRuntime.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _context3.t0 = userProgressState;
            _context3.next = _context3.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.BEGIN_LESSON ? 3 : _context3.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.PAUSE_LESSON ? 5 : _context3.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.RESUME_LESSON ? 7 : _context3.t0 === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_5__.enums.lessonState.NEXT_ROUND ? 9 : 12;
            break;

          case 3:
            redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundStopStartLesson({
              index: 0,
              isLessonPaused: false,
              log: {
                collection: collection.id
              }
            });
            return _context3.abrupt("break", 12);

          case 5:
            if (collection.items) {
              _lessonStateHelper$ge = ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_8__.lessonStateHelper.getLatestCounter(collection), index = _lessonStateHelper$ge.index;
              redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundStopStartLesson({
                index: index,
                isLessonPaused: true,
                log: {
                  index: index,
                  collection: collection.id
                }
              });
            }

            return _context3.abrupt("break", 12);

          case 7:
            redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundStopStartLesson(_objectSpread(_objectSpread({}, ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_8__.lessonStateHelper.getLatestCounter(collection)), {}, {
              isLessonPaused: false,
              log: {
                collection: collection.id
              }
            }));
            return _context3.abrupt("break", 12);

          case 9:
            if (lesson.isLevelComplete) {
              redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundNextLevel({
                index: 0,
                lesson: lesson
              });
            } else if (lesson.isNextRound) {
              redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundNextRound({
                index: 0,
                lesson: _objectSpread(_objectSpread({}, lesson), {}, {
                  currentRound: lesson.currentRound + 1
                })
              });
            }

            ;
            return _context3.abrupt("break", 12);

          case 12:
            return _context3.abrupt("return", lesson);

          case 13:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3, this);
  }));

  return function changeLessonState(_x5, _x6, _x7) {
    return _ref3.apply(this, arguments);
  };
}();

var addExtraSpeciesSelection = /*#__PURE__*/function () {
  var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(requestArgs) {
    var config, collection, extraSpecies, items, collectionExtension, lesson;
    return regeneratorRuntime.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            config = requestArgs.config, collection = requestArgs.collection;
            extraSpecies = config.guide.species.filter(function (s) {
              return !(0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(s.name, collection.items.map(function (i) {
                return i.name;
              }));
            });
            _context4.next = 4;
            return ui_helpers_collection_handler__WEBPACK_IMPORTED_MODULE_7__.collectionHandler.getSpeciesDetailsInParallel(extraSpecies);

          case 4:
            items = _context4.sent;
            _context4.next = 7;
            return ui_helpers_collection_handler__WEBPACK_IMPORTED_MODULE_7__.collectionHandler.loadCollectionItemProperties({
              items: items
            }, config);

          case 7:
            collectionExtension = _context4.sent;
            collection.items = [].concat(_toConsumableArray(collection.items), _toConsumableArray(collectionExtension.items));
            lesson = {
              collection: collection,
              counter: _objectSpread(_objectSpread({}, redux_store__WEBPACK_IMPORTED_MODULE_4__.store.getState().counter), {}, {
                index: 0
              }),
              lesson: {
                currentRound: 1,
                rounds: 0,
                isNextRound: true
              },
              layout: null,
              history: null,
              score: (0,ramda__WEBPACK_IMPORTED_MODULE_12__.default)(redux_reducers_initial_state_initial_progress_state__WEBPACK_IMPORTED_MODULE_2__.progressState.score)
            };
            _context4.next = 12;
            return lesson;

          case 12:
            return _context4.abrupt("return", _context4.sent);

          case 13:
          case "end":
            return _context4.stop();
        }
      }
    }, _callee4, this);
  }));

  return function addExtraSpeciesSelection(_x8) {
    return _ref4.apply(this, arguments);
  };
}();

var saveUserProgressState = function saveUserProgressState(userProgressState) {
  var _store$getState3 = redux_store__WEBPACK_IMPORTED_MODULE_4__.store.getState(),
      user = _store$getState3.user,
      userAction = _store$getState3.userAction;

  userProgressState.counter = userProgressState.counter || {};
  redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundSaveUserProgress({
    lesson: userProgressState,
    userAction: userAction
  });
  api_firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.firestore.addCollection((0,ramda__WEBPACK_IMPORTED_MODULE_12__.default)(userProgressState.collection), user);
};

var recordUserAction = function recordUserAction(action) {
  redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.removeAllQuizScreenSubs();
  redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.removeAllQuizLayoutSubs();
  setTimeout(function () {
    redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_3__.actions.boundClickEvent(action);
  });
};

var lessonStateHandler = {
  changeRequest: changeRequest,
  recordUserAction: recordUserAction
};

/***/ }),

/***/ "6Fh2":
/*!*****************************************************!*\
  !*** ./src/ui/screens/lists/lesson-state-helper.js ***!
  \*****************************************************/
/*! namespace exports */
/*! export lessonStateHelper [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "lessonStateHelper": () => /* binding */ lessonStateHelper
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/actions/action-creators */ "/CNf");
/* harmony import */ var snapdragon_config_lesson_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! snapdragon-config/lesson-config */ "EpxB");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}








var getIsReviewingLesson = function getIsReviewingLesson(userAction, config) {
  var isNotReviewingLesson = true;

  if (userAction) {
    if (config.isLandscapeMode) {
      isNotReviewingLesson = isNotReviewingLesson && (userAction.name === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__.enums.userEvent.START_LESSON.name || userAction.name === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__.enums.userEvent.TOGGLE_SPECIES_LIST.name);
    } else {
      isNotReviewingLesson = isNotReviewingLesson && userAction.name === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__.enums.userEvent.START_LESSON.name;
    }
  }

  return !isNotReviewingLesson;
};

var overrideLesson = function overrideLesson(userAction, config) {
  return !getIsReviewingLesson(userAction, config);
};

var purgeLesson = function purgeLesson() {
  redux_store__WEBPACK_IMPORTED_MODULE_1__.persistor.purge();
  window.location.reload(true);
};

var clearGuide = function clearGuide() {
  var config = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState().config;
  config.guide = snapdragon_config_lesson_config__WEBPACK_IMPORTED_MODULE_3__.config.guide;
  redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_2__.actions.boundUpdateConfig(config);
};

var getCollectionToLoad = function getCollectionToLoad(currentCollection, collections, selectedLessonCollectionId) {
  var id = parseInt(selectedLessonCollectionId);
  var resume = true;
  resume = resume && currentCollection.id > 0;
  resume = resume && currentCollection.id === id;
  var collection = resume ? currentCollection : collections.find(function (c) {
    return c.id === id;
  });
  return collection;
};

var getLatestCounter = function getLatestCounter(collection) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      counter = _store$getState.counter,
      lessons = _store$getState.lessons;

  var log = counter.log;
  var index = log ? log.index : lessons.find(function (l) {
    return l.collection.id === collection.id;
  }) ? lessons.find(function (l) {
    return l.collection.id === collection.id;
  }).counter.index : counter.index;
  return {
    index: index
  };
};

var getUserLessonState = function getUserLessonState(lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter) {
  var restoredLesson = lessons.find(function (l) {
    return l.name === collectionToLoad.name;
  });
  var lesson;

  if (restoredLesson) {
    lesson = restoredLesson;
    lesson.collection = collectionToLoad;

    if (lesson.lesson.isNextRound) {
      lesson.score = (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(progressState.score);
    }
  } else {
    lesson = {
      collection: collectionToLoad,
      counter: _objectSpread(_objectSpread({}, counter), {}, {
        index: 0
      }),
      lesson: savedLesson || {
        currentRound: 1,
        rounds: 0,
        isNextRound: true
      },
      layout: null,
      history: null,
      score: (0,ramda__WEBPACK_IMPORTED_MODULE_4__.default)(progressState.score)
    };
  }

  return lesson;
};

var lessonStateHelper = {
  getIsReviewingLesson: getIsReviewingLesson,
  overrideLesson: overrideLesson,
  purgeLesson: purgeLesson,
  clearGuide: clearGuide,
  getCollectionToLoad: getCollectionToLoad,
  getLatestCounter: getLatestCounter,
  getUserLessonState: getUserLessonState
};

/***/ }),

/***/ "zOdy":
/*!****************************************!*\
  !*** ./src/ui/screens/lists/lesson.js ***!
  \****************************************/
/*! namespace exports */
/*! export renderLesson [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderLesson": () => /* binding */ renderLesson
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/lists/lesson-template.html */ "j0sj");
/* harmony import */ var ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_2__);



var renderLesson = function renderLesson(lesson) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      config = _store$getState.config,
      lessons = _store$getState.lessons,
      layout = _store$getState.layout;

  var template = document.createElement('template');
  template.innerHTML = (ui_screens_lists_lesson_template_html__WEBPACK_IMPORTED_MODULE_2___default());
  lesson.hideVideoClass = lesson.hasVideo ? '' : 'hide-important';
  lesson.hideTextIntroClass = lesson.hasVideo ? 'hide-important' : '';
  var savedLesson = lessons.find(function (saved) {
    return saved.collection.id === lesson.id;
  });
  lesson.isPaused = !!savedLesson || config.collection.id === lesson.id;
  lesson.icon = lesson.icon || "https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307";
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)({
    lesson: lesson
  }, template.content, document.querySelector('.js-lesson-container'));

  if (savedLesson) {
    renderReview(savedLesson.layout, savedLesson.collection, null, config);
  }

  if (config.collection.id === lesson.id) {
    var row = document.querySelector(".js-lesson-list-carousel-item[data-lesson-id=\"".concat(lesson.id, "\"]"));
    if (row) row.classList.add('highlighted-for-review-row');

    if (config.isLandscapeMode) {
      setTimeout(function () {
        var reviewLink = row.querySelector('.js-review-summary');
        if (reviewLink) reviewLink.click();
      });
    } // current lesson whose current state is not yet saved


    if (layout && layout.roundScoreCount) {
      renderReview(layout, lesson, 'progress-icon', config);
    }
  }
};

var renderReview = function renderReview(layout, lesson, className, config) {
  var progressBar = document.querySelector('.js-main-lesson-grid progress');
  var value = !!layout.roundProgressIndex ? layout.roundProgressIndex : progressBar ? progressBar.value : 0;
  var review = "<progress aria-label=\"lesson quiz progress\" title=\"lesson quiz progress\" class=\"absolute\" value=\"".concat(value, "\" max=\"").concat(layout.roundScoreCount, "\"></progress>");
  var parent = document.querySelector(".js-review[data-lesson-id=\"".concat(lesson.id, "\"]"));
  parent.innerHTML = review;
  var reviewLinkBtn = document.querySelector(".js-review-link[data-lesson-id=\"".concat(lesson.id, "\"]"));
  reviewLinkBtn.innerText = 'Resume Quiz';
};

/***/ }),

/***/ "YkJ3":
/*!****************************************************************!*\
  !*** ./src/ui/screens/lists/species-list-definition-insert.js ***!
  \****************************************************************/
/*! namespace exports */
/*! export onSpeciesChangeHandler [provided] [used] [could be renamed] */
/*! export openNoteHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "onSpeciesChangeHandler": () => /* binding */ onSpeciesChangeHandler,
/* harmony export */   "openNoteHandler": () => /* binding */ openNoteHandler
/* harmony export */ });
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_lists_species_list_definition_insert_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/lists/species-list-definition-insert.html */ "AA8P");
/* harmony import */ var ui_screens_lists_species_list_definition_insert_html__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ui_screens_lists_species_list_definition_insert_html__WEBPACK_IMPORTED_MODULE_1__);


var currentlyActiveRow = null;
var currentlyActiveSpecies;
var onSpeciesChangeHandler = function onSpeciesChangeHandler(species) {
  try {
    var id = species.id || species.eolId;
    var tr = document.querySelector("#id_".concat(id));
    currentlyActiveRow = tr;
    currentlyActiveSpecies = species;
  } catch (e) {
    logError(onSpeciesChangeHandler, e);
  }
};
var openNoteHandler = function openNoteHandler(note, time) {
  if (Math.floor(note.time) !== time) return;
  var parent = document.getElementById('insertParent');
  if (parent) parent.remove();
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_lists_species_list_definition_insert_html__WEBPACK_IMPORTED_MODULE_1___default());
  var insert = document.createElement('div');
  insert.setAttribute('id', 'insertParent');

  if (note.colCount) {
    insert.classList.add("col-count-".concat(note.colCount));
    insert.innerHTML = note.description.replace(/\r?\n/g, '<br />');
  }

  if (!currentlyActiveRow) {
    // first row, before any species have been matched
    currentlyActiveRow = document.querySelector('.js-list-item'); // first by default
  }

  currentlyActiveRow.parentElement.insertBefore(insert, currentlyActiveRow);

  if (!note.colCount) {
    parent = document.getElementById('insertParent');
    parent.innerHTML = '';
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)({
      note: note
    }, template.content, parent);
    var noteText = document.querySelector('#insertParent > div:nth-child(1) > div:nth-child(2)');
    noteText.innerHTML = noteText.innerHTML.replace(/\r?\n/g, '<br />');
  }
};

/***/ }),

/***/ "xluv":
/*!**********************************************!*\
  !*** ./src/ui/screens/lists/species-list.js ***!
  \**********************************************/
/*! namespace exports */
/*! export renderSpeciesList [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderSpeciesList": () => /* binding */ renderSpeciesList
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/cards/card */ "Vt4y");
/* harmony import */ var ui_screens_cards_taxon_card__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/cards/taxon-card */ "+pkx");
/* harmony import */ var ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/cards/non-taxon-card */ "gtMu");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_lists_species_table__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/screens/lists/species-table */ "jadq");
/* harmony import */ var ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/screens/lists/video-handler */ "3faD");
/* harmony import */ var ui_screens_home_home_lesson_intro_video__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ui/screens/home/home-lesson-intro-video */ "xvMz");
/* harmony import */ var ui_screens_lists_lesson_state_handler__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ui/screens/lists/lesson-state-handler */ "MC3F");
/* harmony import */ var ui_screens_lists_species_list_definition_insert__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ui/screens/lists/species-list-definition-insert */ "YkJ3");
function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _iterableToArrayLimit(arr, i) {
  if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;

  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}















var renderSpeciesList = function renderSpeciesList(lesson, args) {
  var init = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var callingParentContainer, _args$isInCarousel, isInCarousel, _store$getState, config, history, traitEnums, collections, collection, openAccordionHandler, userClickHandlers, table, openSpeciesDescriptionHandler;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              callingParentContainer = args.callingParentContainer, _args$isInCarousel = args.isInCarousel, isInCarousel = _args$isInCarousel === void 0 ? false : _args$isInCarousel;
              _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_3__.store.getState(), config = _store$getState.config, history = _store$getState.history, traitEnums = _store$getState.enums, collections = _store$getState.collections; // to ensure we have latest item list if species has been added

              collection = collections.find(function (c) {
                return c.id === lesson.id;
              });

              openAccordionHandler = function openAccordionHandler(species, accordion) {
                accordion.innerHTML = "<i class=\"fas fa-chevron-up\" data-name=\"".concat(species.name, "\"></i>");
                openSpeciesDescriptionHandler(collection, species, true, false);

                var closeAccordionHandler = function closeAccordionHandler(event) {
                  // remove current close accordion handler
                  accordion.removeEventListener('click', closeAccordionHandler); // change direction of chevron       

                  accordion.innerHTML = "<i class=\"fas fa-chevron-down\" data-name=\"".concat(species.name, "\"></i>"); // attach new open accordion listener

                  accordion.addEventListener('click', function (event) {
                    openAccordionHandler(species, accordion);
                  }); // remove the species description - handled in group action

                  var description = document.querySelector('.species-description');

                  if (description) {
                    description.parentNode.removeChild(description);
                  }
                }; // attach close accordion handler


                accordion.addEventListener('click', closeAccordionHandler);
              };

              userClickHandlers = function userClickHandlers() {
                var listItemImages = document.querySelectorAll('.table-row img');
                listItemImages.forEach(function (itemImage) {
                  var item = collection.items.find(function (item) {
                    return item.name === itemImage.dataset.itemName;
                  });
                  (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_7__.modalImageHandler)(itemImage, item, collection, config);
                });
                var accordions = document.querySelectorAll('.js-accordion');
                accordions.forEach(function (accordion) {
                  var accordionHandler = function accordionHandler(event) {
                    var species = collection.items.find(function (item) {
                      return item.name === event.currentTarget.dataset.name;
                    });

                    if (species) {
                      openAccordionHandler(species, accordion);
                    }
                  };

                  accordion.addEventListener('click', accordionHandler);
                });
                var youtubeIcons = document.querySelectorAll('.js-youtube');
                youtubeIcons.forEach(function (icon) {
                  icon.addEventListener('click', function (event) {
                    event.stopPropagation();
                    var activeIcon = event.currentTarget;
                    activeIcon.classList.add('youtube-green-fg');
                    var speciesName = activeIcon.dataset.name;

                    var species = _objectSpread(_objectSpread({}, collection.items.find(function (item) {
                      return item.name == speciesName;
                    })), collection.species.find(function (item) {
                      return item.name == speciesName;
                    }));

                    openSpeciesDescriptionHandler(collection, species, true);

                    if (species && species.time) {
                      ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__.videoHandler.isVideoPlayerReady(collection.video.id) ? ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__.videoHandler.playVideoFrom(species.time[0]) : (0,ui_screens_home_home_lesson_intro_video__WEBPACK_IMPORTED_MODULE_10__.videoSetup)(collection, redux_store__WEBPACK_IMPORTED_MODULE_3__.store.getState().videoPlayer || [], ui_dom__WEBPACK_IMPORTED_MODULE_2__.DOM.rightBody, species.time[0]);
                    }

                    ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__.videoHandler.updateVideoPlayer(redux_store__WEBPACK_IMPORTED_MODULE_3__.store.getState().videoPlayer, collection, species);
                  });
                });
                var cardModal = document.querySelector('#cardModal .js-modal-body');
                setTimeout(function () {
                  var speciesCardLinks = document.querySelectorAll('.js-test-card-container-link');
                  speciesCardLinks.forEach(function (link, index) {
                    link.addEventListener('click', function (event) {
                      var name = event.target.dataset.name;
                      document.querySelector('#cardModal .prev > span').dataset.card = 'species-card';
                      (0,ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_4__.renderCard)(collection, 'MODAL', collection.items.find(function (i) {
                        return i.name === name;
                      }), cardModal, isInCarousel);
                    });
                  });
                  var traitCardLinks = document.querySelectorAll('.js-key-trait-link');
                  traitCardLinks.forEach(function (link) {
                    link.addEventListener('click', function (event) {
                      var keyTrait = event.target.dataset.keyTrait;
                      var url = event.target.dataset.url;
                      (0,ui_screens_cards_non_taxon_card__WEBPACK_IMPORTED_MODULE_6__.renderNonTaxonCard)('MODAL', keyTrait, cardModal, url);
                    });
                  });
                  var taxonCardLinks = document.querySelectorAll('.js-taxon-card-link');
                  taxonCardLinks.forEach(function (link) {
                    link.addEventListener('click', function (event) {
                      var taxon = event.target.dataset.family || event.target.dataset.order;
                      var name = event.target.dataset.name;
                      var rank = event.target.dataset.rank;
                      document.querySelector('#cardModal .prev > span').dataset.rank = rank;
                      document.querySelector('#cardModal .prev > span').dataset.card = 'taxon-card';
                      document.querySelector('#cardModal .next > span').dataset.rank = rank;
                      document.querySelector('#cardModal .next > span').dataset.card = 'taxon-card';
                      (0,ui_screens_cards_taxon_card__WEBPACK_IMPORTED_MODULE_5__.renderTaxonCard)(collection, 'MODAL', collection.items.find(function (i) {
                        return i.taxonomy[rank] === name;
                      }), cardModal, taxon, rank, isInCarousel);
                    });
                  });
                  document.querySelectorAll('.mushroom-icon').forEach(function (icon) {
                    icon.innerHTML = '<svg-icon class="si-glyph-mushrooms"><src href="./static/icons/si-glyph-mushrooms.svg"/></svg>';
                  });
                  var nthChild = config.isLandscapeMode ? 5 : 3;
                  var taxonIcons = document.querySelectorAll(".table-row.js-list-item td:nth-child(".concat(nthChild, ") > span"));
                  if (!history) return;
                  var noWrongAnswersForThisSpecies = [];
                  history.scores.map(function (score) {
                    return score.failsTotals;
                  }).forEach(function (totals) {
                    for (var _i = 0, _Object$entries = Object.entries(totals); _i < _Object$entries.length; _i++) {
                      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
                          key = _Object$entries$_i[0],
                          anyWrongAnwers = _Object$entries$_i[1];

                      if (anyWrongAnwers == false) {
                        noWrongAnswersForThisSpecies.push(parseInt(key));
                      }
                    }
                  });
                  taxonIcons.forEach(function (icon) {
                    if ((0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(parseInt(icon.id), noWrongAnswersForThisSpecies)) {
                      icon.classList.add('correct');
                    }
                  });
                });
              }; // if(!!collection.notes) {
              //     collection.notes.forEach(n => sp.firstTime = n.time[0]);
              //     collection.notes = utils.sortBy(collection.notes, 'firstTime', 'asc');
              // }


              _context.next = 7;
              return (0,ui_screens_lists_species_table__WEBPACK_IMPORTED_MODULE_8__.buildTable)(collection, {
                config: config,
                enums: traitEnums,
                overrideParent: callingParentContainer
              });

            case 7:
              table = _context.sent;

              if (table.isReady) {
                _context.next = 10;
                break;
              }

              return _context.abrupt("return");

            case 10:
              userClickHandlers();

              openSpeciesDescriptionHandler = function openSpeciesDescriptionHandler(collection, species) {
                var enableScroll = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
                var activateYoutubeIcon = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;

                try {
                  var parent = document.getElementById('insertParent');
                  if (parent) parent.remove();

                  var _closeOpenAccordions = closeOpenAccordions(species.name),
                      accordions = _closeOpenAccordions.accordions;

                  var activeAccordion = accordions.find(function (accordion) {
                    return accordion.dataset.name === species.name;
                  });

                  if (activeAccordion) {
                    activeAccordion.innerHTML = "<i class=\"fas fa-chevron-up\" data-name=\"".concat(species.name, "\"></i>");

                    if (activateYoutubeIcon) {
                      var activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');
                      activeYouTubeIcon.classList.add('youtube-green-fg');
                    }
                  } // if(activateYoutubeIcon) {
                  //     const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');
                  //           activeYouTubeIcon.classList.add('youtube-green-fg');
                  // }


                  var description = species.description;
                  description = !!description ? description : species.traits.description && species.traits.description.value ? species.traits.description.value[0] : '';

                  if (description) {
                    var id = species.id || species.eolId;
                    var tr = document.querySelector("#id_".concat(id));
                    var td = document.createElement('td');
                    var text = document.createElement('div');
                    text.classList.add('inserted-td');
                    text.innerHTML = description.replace(/\r?\n/g, '<br />');
                    td.appendChild(text);
                    var insert = document.createElement('div');
                    insert.classList.add('table-row');
                    insert.classList.add('species-description');
                    insert.appendChild(td);
                    tr.parentElement.insertBefore(insert, tr.nextSibling);

                    var scrollIntoView = function scrollIntoView(rowHeight, noOfRows) {
                      var scroll = document.querySelector('.scrollable');
                      var standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhStandardBlock').replace('px', ''));
                      var unit = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vh').replace('px', ''));
                      var top = standardBlock * 2 + rowHeight * (noOfRows - 1) - 2 * unit;
                      scroll.scrollTop = top;
                    };

                    if (enableScroll) {
                      config.isLandscapeMode ? tr.previousElementSibling.scrollIntoView() : scrollIntoView(tr.offsetHeight, species.snapIndex);
                    }
                  }
                } catch (e) {
                  logError(openSpeciesDescriptionHandler, e);
                }
              };

              ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__.videoHandler.onSpeciesTimeMatch(function (collection, species) {
                openSpeciesDescriptionHandler(collection, species);
                ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__.videoHandler.updateVideoPlayer(redux_store__WEBPACK_IMPORTED_MODULE_3__.store.getState().videoPlayer, collection, species);
                (0,ui_screens_lists_species_list_definition_insert__WEBPACK_IMPORTED_MODULE_12__.onSpeciesChangeHandler)(species);
              });
              ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__.videoHandler.onNoteTimeMatch(function (collection, note) {
                (0,ui_screens_lists_species_list_definition_insert__WEBPACK_IMPORTED_MODULE_12__.openNoteHandler)(note, ui_screens_lists_video_handler__WEBPACK_IMPORTED_MODULE_9__.videoHandler.getPlayerTime());
              });

            case 14:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function init() {
      return _ref.apply(this, arguments);
    };
  }();

  init();
};
var currentIndex = 0;

var carouselControlHandler = function carouselControlHandler(event) {
  var _store$getState2 = redux_store__WEBPACK_IMPORTED_MODULE_3__.store.getState(),
      collection = _store$getState2.collection;

  var transition = event.target.dataset.transition;
  var modal = event.target.dataset.modal;
  var card = event.target.dataset.card;
  var rank = event.target.dataset.rank;

  switch (transition) {
    case 'prev':
      currentIndex--;
      currentIndex = currentIndex === -1 ? collection.items.length - 1 : currentIndex;
      break;

    case 'next':
      currentIndex++;
      currentIndex = currentIndex === collection.items.length - 1 ? 0 : currentIndex;
      break;
  }

  var nextItem = collection.items.find(function (item, index) {
    return index === currentIndex;
  });
  var parent = document.querySelector("#".concat(modal, " .js-modal-body"));

  switch (card) {
    case 'species-card':
      (0,ui_screens_cards_card__WEBPACK_IMPORTED_MODULE_4__.renderCard)(collection, 'MODAL', nextItem, parent, isInCarousel);
      break;

    case 'taxon-card':
      (0,ui_screens_cards_taxon_card__WEBPACK_IMPORTED_MODULE_5__.renderTaxonCard)(collection, 'MODAL', nextItem, parent, null, rank, isInCarousel);
      break;
  }
};

var prev = document.querySelector('#cardModal .js-prev');
var next = document.querySelector('#cardModal .js-next');
if (prev) prev.addEventListener('click', carouselControlHandler);
if (next) next.addEventListener('click', carouselControlHandler);
var prevTaxon = document.querySelector('#cardModal .js-prev');
var nextTaxon = document.querySelector('#cardModal .js-next');
if (prevTaxon) prevTaxon.addEventListener('click', carouselControlHandler);
if (nextTaxon) nextTaxon.addEventListener('click', carouselControlHandler);

var closeOpenAccordions = function closeOpenAccordions(speciesName) {
  var accordions = Array.from(document.querySelectorAll('.js-accordion'));
  var openAccordions = accordions.filter(function (accordion) {
    return accordion.dataset.name !== speciesName;
  });
  openAccordions.forEach(function (inactiveAccordion) {
    if (inactiveAccordion.innerHTML.indexOf('fa-chevron-up') > -1) {
      inactiveAccordion.click();
      inactiveAccordion.innerHTML = "<i class=\"fas fa-chevron-down\" data-name=\"".concat(speciesName, "\"></i>");
      var inActiveYouTubeIcon = inactiveAccordion.parentElement.parentElement.querySelector('.js-youtube');
      inActiveYouTubeIcon.classList.remove('youtube-green-fg');
    }
  });
  var parent = document.querySelector('.species-table tbody');
  var currentDescriptions = document.querySelectorAll('.species-description');
  currentDescriptions.forEach(function (tr) {
    return parent.removeChild(tr);
  });
  return {
    accordions: accordions
  };
};

/***/ }),

/***/ "jadq":
/*!***********************************************!*\
  !*** ./src/ui/screens/lists/species-table.js ***!
  \***********************************************/
/*! namespace exports */
/*! export buildTable [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "buildTable": () => /* binding */ buildTable
/* harmony export */ });
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! api/snapdragon/iconic-taxa */ "Bv5j");
/* harmony import */ var ui_screens_lists_species_table_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/lists/species-table-template.html */ "ZRSX");
/* harmony import */ var ui_screens_lists_species_table_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_lists_species_table_template_html__WEBPACK_IMPORTED_MODULE_5__);
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}







var buildTable = function buildTable(collection, args) {
  try {
    var config = args.config,
        units = args.units,
        overrideParent = args.overrideParent;
    var template = document.createElement('template');
    var wide = window.matchMedia("(min-width: 1024px)").matches;

    var getTraitName = function getTraitName(item, units) {
      var traitName = '';
      var keyTratLinkClass = 'capitalise underline-link js-key-trait-link';
      item.taxonomy.phylum = item.taxonomy.phylum || '';

      if (item.taxonomy) {
        switch (item.taxonomy.phylum.toLowerCase()) {
          case 'ascomycota':
            traitName = item.taxonomy.order.toLowerCase() === 'pezizales' ? 'how edible' : 'thallus type';
            if (item.taxonomy.order.toLowerCase() === 'pezizales') keyTratLinkClass = 'js-key-trait-link';
            break;

          case 'basidiomycota':
            traitName = 'how edible';
            keyTratLinkClass = 'js-key-trait-link';
            break;

          default:
            traitName = '-';
        }
      } else {
        keyTratLinkClass = 'js-key-trait-link';
      }

      return {
        traitName: traitName,
        keyTratLinkClass: keyTratLinkClass
      };
    };

    var getOrderLinkClass = function getOrderLinkClass(item) {
      var orderLinkClass;

      if (item.taxonomy && item.taxonomy.order) {
        orderLinkClass = item.order ? 'snap-link-btn underline-link js-taxon-card-link' : 'snap-no-link-btn no-underline-link js-taxon-card-link';
      } else {
        orderLinkClass = 'snap-no-link-btn no-underline-link js-taxon-card-link';
      }

      return orderLinkClass;
    };

    var getIconicTaxonIcon = function getIconicTaxonIcon(item) {
      var iconicTaxonIcon, hideFungiIcon;

      if (item.iconicTaxon.toLowerCase() === 'fungi') {
        iconicTaxonIcon = 'hide';
        hideFungiIcon = '';
      } else {
        iconicTaxonIcon = (0,api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_4__.matchIcon)(item.taxonomy, api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_4__.iconicTaxa);
        hideFungiIcon = 'hide';
      }

      return {
        iconicTaxonIcon: iconicTaxonIcon,
        hideFungiIcon: hideFungiIcon
      };
    };

    var itemImages = collection.items.map(function (item) {
      var _itemImage;

      var image = item.images.find(function (i) {
        return i.starred;
      }) || utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(item.images)[0];
      image = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__.scaleImage)(image, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_3__.imageUseCases.SPECIES_LIST, config);

      var _getTraitName = getTraitName(item, units),
          traitName = _getTraitName.traitName,
          keyTratLinkClass = _getTraitName.keyTratLinkClass;

      var _getIconicTaxonIcon = getIconicTaxonIcon(item),
          iconicTaxonIcon = _getIconicTaxonIcon.iconicTaxonIcon,
          hideFungiIcon = _getIconicTaxonIcon.hideFungiIcon;

      var itemImage = (_itemImage = {
        id: item.id,
        name: item.name,
        itemName: item.name,
        genus: item.taxonomy.genus,
        species: item.taxonomy.species,
        genusLinkClass: item.genus ? 'snap-link-btn underline-link js-taxon-card-link' : 'snap-no-link-btn no-underline-link js-taxon-card-link',
        shortName: ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__.itemProperties.trimLatinName(item.name),
        taxonomy: item.taxonomy,
        iconicTaxon: item.iconicTaxon,
        vernacularName: item.vernacularName,
        snapIndex: item.snapIndex,
        license: image.license,
        url: image.url,
        small: image.small,
        rightsHolder: image.rightsHolder || 'Public domain',
        source: image.source
      }, _defineProperty(_itemImage, "shortName", ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__.itemProperties.trimLatinName(item.name)), _defineProperty(_itemImage, "keyTrait", utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.capitaliseFirst(ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__.itemProperties.getActiveTrait(item, [{
        name: traitName,
        formatter: function formatter(trait) {
          return trait[0];
        }
      }])) || ''), _defineProperty(_itemImage, "keyTratLinkClass", keyTratLinkClass), _defineProperty(_itemImage, "familyLinkClass", item.family ? 'snap-link-btn underline-link js-taxon-card-link' : 'snap-no-link-btn no-underline-link js-taxon-card-link'), _defineProperty(_itemImage, "orderLinkClass", getOrderLinkClass(item)), _defineProperty(_itemImage, "taxonomy", item.taxonomy || {
        family: '',
        order: ''
      }), _defineProperty(_itemImage, "iconicTaxonIcon", iconicTaxonIcon), _defineProperty(_itemImage, "hideFungiIcon", hideFungiIcon), _defineProperty(_itemImage, "hasVideoClassName", !collection.hasVideo ? 'hide-column' : ''), _defineProperty(_itemImage, "hasTaxonClassName", collection.hasVideo ? 'hide-column' : ''), _defineProperty(_itemImage, "provider", image.provider || ''), _itemImage);
      return itemImage;
    });
    template.innerHTML = (ui_screens_lists_species_table_template_html__WEBPACK_IMPORTED_MODULE_5___default());
    var parent = config.isPortraitMode ? overrideParent : document.querySelector(".js-species-container[data-container-id=\"".concat(collection.id, "\"]"));
    parent.innerHTML = '';
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
      id: collection.id,
      itemImages: itemImages
    }, template.content, parent);
    var table = parent.querySelector("table#species_list_id_".concat(collection.id));
    var keyTraits = table.querySelectorAll('.js-key-trait-link');
    keyTraits.forEach(function (vn) {
      var keyTrait = vn.dataset.keyTrait;
      var span = document.createElement('span');

      switch (keyTrait) {
        case units.howEdible.CHOICE:
          span.innerHTML = '<span class="icon choice"></span>';
          vn.append(span);
          break;

        case units.howEdible.EDIBLE:
          span.innerHTML = '<span class="icon edible"></span>';
          vn.append(span);
          break;

        case units.howEdible.INEDIBLE:
          span.innerHTML = '<span class="icon inedible"></span>';
          vn.append(span);
          break;

        case units.howEdible.POISONOUS:
        case units.howEdible.DEADLY:
          span.innerHTML = '<span class="icon toxic"></span>';
          vn.append(span);
          break;
      }
    });
    var tbody = table.querySelector('.species-table tbody');
    if (!tbody) return;
    var caption = document.createElement('caption');
    caption.innerHTML = "Species in ".concat(collection.name);
    caption.classList.add('visually-hidden');
    var thead = document.createElement('thead');
    table.insertBefore(thead, tbody);
    table.insertBefore(caption, thead);
    var headerRow = document.createElement('tr');
    headerRow.classList.add('table-header');
    var imageHeader = document.createElement('th');
    var speciesHeader = document.createElement('th');
    var familyHeader = document.createElement('th');
    var traitNameHeader = document.createElement('th');
    var iconicTaxonHeader = document.createElement('th');
    var accordionHeader = document.createElement('th');
    accordionHeader.classList.add('not-sortable');
    speciesHeader.innerHTML = '<span>Species</span';
    familyHeader.innerHTML = '<span>Family</span><span>Order</span>';
    traitNameHeader.innerHTML = '<span></span>';
    iconicTaxonHeader.innerHTML = '<span><i class="fas fa-sliders-h"></i></span>';
    imageHeader.innerHTML = overrideParent ? '' : '<span><i class="fas fa-undo"></i></span>';

    if (wide) {
      headerRow.appendChild(imageHeader);
      headerRow.appendChild(speciesHeader);
      headerRow.appendChild(familyHeader);

      if (collection.behaviour === 'dynamic') {
        headerRow.appendChild(iconicTaxonHeader);
      }
    } else {
      headerRow.appendChild(imageHeader);
      headerRow.appendChild(speciesHeader);

      if (collection.behaviour === 'dynamic') {
        headerRow.appendChild(iconicTaxonHeader);
      }
    }

    if (collection.behaviour === 'static') {
      headerRow.appendChild(accordionHeader);
    }

    if (!tbody.querySelector('.table-header')) {
      thead.appendChild(headerRow);
    }

    var sortableCalback = function sortableCalback() {};

    utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.makeSortable(document, sortableCalback, wide);
    return new Promise(function (resolve) {
      return resolve({
        isReady: true
      });
    });
  } catch (e) {
    logError('buildTable', e);
    return new Promise(function (resolve) {
      return resolve({
        isReady: false
      });
    });
  }
};

/***/ }),

/***/ "3faD":
/*!***********************************************!*\
  !*** ./src/ui/screens/lists/video-handler.js ***!
  \***********************************************/
/*! namespace exports */
/*! export videoHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "videoHandler": () => /* binding */ videoHandler
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/actions/action-creators */ "/CNf");
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}



var onSpeciesTimeMatchListeners = [];
var onNoteTimeMatchListeners = [];

var onSpeciesTimeMatch = function onSpeciesTimeMatch(listener) {
  while (onSpeciesTimeMatchListeners.length > 0) {
    onSpeciesTimeMatchListeners.pop();
  }

  onSpeciesTimeMatchListeners.push(listener);
};

var onNoteTimeMatch = function onNoteTimeMatch(listener) {
  while (onNoteTimeMatchListeners.length > 0) {
    onNoteTimeMatchListeners.pop();
  }

  onNoteTimeMatchListeners.push(listener);
};

var onSpeciesPlayRequestListeners = [];

var onSpeciesPlayRequest = function onSpeciesPlayRequest(listener) {
  onSpeciesPlayRequestListeners.push(listener);
};

var onPlayerReadyListeners = [];
var onPlayerStateChangeListeners = [];

var subscribeToPlayerStateChange = function subscribeToPlayerStateChange(listener) {
  while (onPlayerStateChangeListeners.length > 0) {
    onPlayerStateChangeListeners.pop();
  }

  onPlayerStateChangeListeners.push(listener);
};

var player,
    isPlayerReady = false;

var readyPlayer = function readyPlayer() {
  var onPlayerReady = function onPlayerReady(event) {
    player = event.target;
    isPlayerReady = true;
  };

  var onPlayerStateChange = function onPlayerStateChange(event) {
    player = event.target;

    if (player) {
      onPlayerStateChangeListeners.forEach(function (listener) {
        return listener(player);
      });
    }
  };

  new YT.Player('embedded-video', {
    playerVars: {
      'autoplay': 1
    },
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    }
  });
};

var playVideoFrom = function playVideoFrom(time) {
  if (!_typeof(player.getPlayerState) === 'function' || player.getPlayerState === undefined) return;
  if (!_typeof(player.seekTo) === 'function' || player.seekTo === undefined) return;
  player.seekTo(time + 1);
  var state = player.getPlayerState();

  if (state === states[0].key || state === states[2].key) {
    player.playVideo();
  }
}; // -1 – unstarted
//  0 – ended
//  1 – playing
//  2 – paused
//  3 – buffering
//  5 – video cued


var states = [{
  key: -1,
  value: 'unstarted'
}, {
  key: 1,
  value: 'playing'
}, {
  key: 2,
  value: 'paused'
}, {
  key: 3,
  value: 'buffering'
}];

var setVideoState = function setVideoState(videoPlayer, lesson) {
  var state = '';
  var activeLesson = videoPlayer.find(function (record) {
    return record.collectionId === lesson.id;
  });

  if (activeLesson) {
    if (lesson.id === activeLesson.collectionId) {
      state = activeLesson.pausedAt ? activeLesson.speciesName !== '' ? "Video paused at ".concat(activeLesson.speciesName) : 'Video paused' : '';
    }
  } else {
    state = '';
  }

  return state;
};

var isVideoPlayerReady = function isVideoPlayerReady(videoId) {
  if (isPlayerReady) {
    var doIdsMatch = videoId === player.getVideoData().video_id;
    return isPlayerReady && doIdsMatch;
  } else {
    return false;
  }
};

var destroyPlayer = function destroyPlayer() {
  while (onPlayerStateChangeListeners.length > 0) {
    onPlayerStateChangeListeners.pop();
  }

  while (onSpeciesTimeMatchListeners.length > 0) {
    onSpeciesTimeMatchListeners.pop();
  }

  if (!player) {} else {
    player.stopVideo();
    player.destroy();
    player = null; // Clear out the reference to the destroyed player
  }
};

var updateVideoPlayer = function updateVideoPlayer(videoPlayer, collection, species) {
  var newPlayerTime = Math.floor(player.getCurrentTime());
  var playerRecords = (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(videoPlayer) || [];
  var activeLesson = playerRecords.find(function (p) {
    return p.collectionId === collection.id;
  });

  if (activeLesson) {
    if (activeLesson.pausedAt === newPlayerTime) return; // user pauses lesson, and then resumes
    // user jumps to another point in the lesson

    activeLesson.speciesName = species ? species.name : activeLesson.speciesName || '';
    activeLesson.pausedAt = species && species.time ? species.time[0] : newPlayerTime;
    activeLesson.playAt = newPlayerTime;
  } else {
    activeLesson = {
      collectionId: collection.id,
      speciesName: '',
      pausedAt: newPlayerTime,
      playerRecords: newPlayerTime
    };
    playerRecords.push(activeLesson);
  }

  redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_0__.actions.boundUpdateVideoPlayer(playerRecords);
};

var getPlayerTime = function getPlayerTime() {
  return Math.floor(player.getCurrentTime());
};

var videoHandler = {
  readyPlayer: readyPlayer,
  onSpeciesTimeMatchListeners: onSpeciesTimeMatchListeners,
  onNoteTimeMatchListeners: onNoteTimeMatchListeners,
  onSpeciesTimeMatch: onSpeciesTimeMatch,
  onNoteTimeMatch: onNoteTimeMatch,
  onSpeciesPlayRequestListeners: onSpeciesPlayRequestListeners,
  onSpeciesPlayRequest: onSpeciesPlayRequest,
  onPlayerReadyListeners: onPlayerReadyListeners,
  subscribeToPlayerStateChange: subscribeToPlayerStateChange,
  playVideoFrom: playVideoFrom,
  states: states,
  setVideoState: setVideoState,
  destroyPlayer: destroyPlayer,
  isVideoPlayerReady: isVideoPlayerReady,
  getPlayerTime: getPlayerTime,
  updateVideoPlayer: updateVideoPlayer
};

/***/ }),

/***/ "erJl":
/*!*********************************************************!*\
  !*** ./src/ui/screens/media/landscape/media-players.js ***!
  \*********************************************************/
/*! namespace exports */
/*! export renderMediaPlayers [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderMediaPlayers": () => /* binding */ renderMediaPlayers
/* harmony export */ });
var renderMediaPlayers = function renderMediaPlayers(collection) {
  var isAudio = true;
  var mediaPlayers = isAudio ? document.querySelectorAll('.media-audio-players') : document.querySelectorAll('.media-video-players');
};

/***/ }),

/***/ "T8iS":
/*!*********************************************************!*\
  !*** ./src/ui/screens/multichoice/horizontal-strips.js ***!
  \*********************************************************/
/*! namespace exports */
/*! export renderHorizontalStrips [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderHorizontalStrips": () => /* binding */ renderHorizontalStrips
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers//score-handler */ "l1q+");
/* harmony import */ var ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/cards/test-card */ "LLeQ");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_multichoice_horizontal_strips_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/multichoice/horizontal-strips.html */ "kuKj");
/* harmony import */ var ui_screens_multichoice_horizontal_strips_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_multichoice_horizontal_strips_html__WEBPACK_IMPORTED_MODULE_5__);
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}







var renderHorizontalStrips = function renderHorizontalStrips(collection) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      config = _store$getState.config,
      lesson = _store$getState.lesson,
      layout = _store$getState.layout;

  var item = collection.nextItem || collection.items[collection.itemIndex];
  var binomial = layout.provider.name || layout.provider.taxon;
  var statement = layout.provider.statement;
  var providerQuestion = layout.provider.question;
  var parent = (0,ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_3__.renderTestCardTemplate)(collection, {
    vernacularName: item.vernacularName,
    binomial: binomial,
    question: '',
    help: '',
    term: '',
    className: '',
    headerClassName: '',
    bonus: undefined,
    statement: statement,
    providerQuestion: providerQuestion
  });
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_multichoice_horizontal_strips_html__WEBPACK_IMPORTED_MODULE_5___default());
  var answers = utils_utils__WEBPACK_IMPORTED_MODULE_1__.utils.shuffleArray([].concat(_toConsumableArray(layout.provider.answers), [layout.provider.answer]));
  answers = answers.map(function (answer, index) {
    return {
      term: answer,
      index: index
    };
  });
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__.renderTemplate)({
    answers: answers
  }, template.content, parent);
  document.querySelector('.js-test-card-question').classList.add('calendar-block');
  document.querySelector('.js-test-card-question').classList.remove('standard-block');
  var strips = document.querySelectorAll('.js-rptr-strips .strip');
  var taxon = {
    name: item.taxonomy.family,
    binomial: item.name,
    question: layout.provider.answer.term
  };
  var test = {
    itemId: item.id,
    items: strips,
    taxon: taxon,
    binomial: item.name,
    questionCount: lesson.questionCount,
    vernacularName: item.vernacularName,
    layoutCount: lesson.layoutCount,
    points: layout.points,
    clue: '',
    answerIndex: answers.findIndex(function (a) {
      return a.term === layout.provider.answer;
    }),
    answers: answers,
    questionText: providerQuestion,
    statement: statement
  };
  (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_2__.scoreHandler)('strip', test, null, config);
};

/***/ }),

/***/ "lFzj":
/*!**********************************************************************************************!*\
  !*** ./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question.js ***!
  \**********************************************************************************************/
/*! namespace exports */
/*! export renderMixedSpecimenQuestion [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderMixedSpecimenQuestion": () => /* binding */ renderMixedSpecimenQuestion
/* harmony export */ });
/* harmony import */ var ui_screens_multichoice_portrait_mixed_specimen_mixed_specimen_combined__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined */ "F+PF");

var renderMixedSpecimenQuestion = function renderMixedSpecimenQuestion(collection, bonusLayout) {
  snapLog('renderMixedSpecimenQuestion', collection.name);
  (0,ui_screens_multichoice_portrait_mixed_specimen_mixed_specimen_combined__WEBPACK_IMPORTED_MODULE_0__.renderMixedSpecimenImagesAndQuestion)(collection);
};

/***/ }),

/***/ "fZTv":
/*!*********************************************************************************!*\
  !*** ./src/ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler.js ***!
  \*********************************************************************************/
/*! namespace exports */
/*! export mixedTraitHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "mixedTraitHandler": () => /* binding */ mixedTraitHandler
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers//score-handler */ "l1q+");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/traits-handler */ "B9Ei");
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _iterableToArrayLimit(arr, i) {
  if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _e = undefined;

  try {
    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);

      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }

  return _arr;
}

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}







var onTraitsReadyListeners = [];

var onTraitsReady = function onTraitsReady(listener) {
  onTraitsReadyListeners.push(listener);
};

var onTraitClickedListeners = [];

var onTraitClicked = function onTraitClicked(listener) {
  onTraitClickedListeners.push(listener);
};

var getMatchingTrait = function getMatchingTrait(layoutTraits, traitValues) {
  try {
    var requiredTraitValues, trait;

    var _loop = function _loop() {
      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),
          key = _Object$entries$_i[0],
          obj = _Object$entries$_i[1];

      var t = void 0;
      layoutTraits.map(function (t) {
        if (t.toLowerCase() === utils_utils__WEBPACK_IMPORTED_MODULE_3__.utils.toCamelCase(key).toLowerCase()) {
          requiredTraitValues = obj.value.map(function (v) {
            return v.toLowerCase();
          });
          trait = t;
        }
      });
    };

    for (var _i = 0, _Object$entries = Object.entries(traitValues); _i < _Object$entries.length; _i++) {
      _loop();
    }

    ;
    return {
      requiredTraitValues: requiredTraitValues,
      trait: trait
    };
  } catch (e) {
    logError(getMatchingTrait, e);
    return {
      requiredTraitValues: [],
      trait: {}
    };
  }
};

var fetchTraits = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(trait, requiredTraitValues, required) {
    var glossary, traits, multiples, requiredTraits;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            glossary = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState().glossary;
            _context.next = 3;
            return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.firestore.getTraitDefinitions(glossary, required, trait);

          case 3:
            traits = _context.sent;
            traits.forEach(function (t) {
              t.term = t.term.toLowerCase();
              if (t.alt) t.alt = t.alt.toLowerCase();
              return t;
            });

            if (requiredTraitValues) {
              _context.next = 7;
              break;
            }

            return _context.abrupt("return", {
              traits: null,
              requiredTraits: null
            });

          case 7:
            multiples = ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_4__.traitsHandler.getNMultiplesFromArray(traits.map(function (t) {
              return t.term;
            }), requiredTraitValues.length);
            multiples = multiples.filter(function (multiple) {
              return !ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_4__.traitsHandler.doArraysHaveSameValues(multiple, requiredTraitValues);
            });
            requiredTraits = traits.filter(function (t) {
              return (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(t.term, requiredTraitValues);
            });
            multiples = utils_utils__WEBPACK_IMPORTED_MODULE_3__.utils.shuffleArray([].concat(_toConsumableArray((0,ramda__WEBPACK_IMPORTED_MODULE_6__.default)(5, multiples)), [requiredTraitValues]));
            traits = multiples.map(function (multiple) {
              return multiple.map(function (term) {
                return traits.find(function (trait) {
                  return trait.term === term;
                });
              });
            });
            onTraitsReadyListeners.forEach(function (listener) {
              return listener(traits, requiredTraits);
            });
            return _context.abrupt("return", {
              traits: traits,
              requiredTraits: requiredTraits
            });

          case 14:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this);
  }));

  return function fetchTraits(_x, _x2, _x3) {
    return _ref.apply(this, arguments);
  };
}();

var pendingScore = {};

var callback = function callback(score, scoreUpdateTimer) {
  var continueLessonBtn = document.querySelector('.js-continue-lesson-btn');
  continueLessonBtn.disabled = false;
  pendingScore.score = score;
  pendingScore.scoreUpdateTimer = scoreUpdateTimer;
  continueLessonBtn.addEventListener('click', function () {
    window.clearTimeout(pendingScore.scoreUpdateTimer);
    (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_1__.bindScore)(pendingScore.score);
  });
};

var onClickTileHandler = function onClickTileHandler(tile, requiredTraits, tiles) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      config = _store$getState.config,
      lesson = _store$getState.lesson,
      collection = _store$getState.collection;

  var item = collection.nextItem;
  tile.addEventListener('click', function (e) {
    var tile = e.currentTarget;
    var traits = Array.from(tile.querySelectorAll('img')).map(function (t) {
      return t.dataset.term;
    });
    var images = Array.from(tiles).map(function (t) {
      return t.querySelector('img').dataset;
    });
    var answers = images.map(function (i) {
      return {
        value: i.term,
        url: i.url
      };
    });
    var test = {
      points: 0,
      binomial: item.name,
      trait: true,
      question: requiredTraits.map(function (trait) {
        return trait.term;
      }),
      answer: traits,
      questionCount: lesson.questionCount,
      layoutCount: lesson.layoutCount,
      answers: answers,
      questionText: 'Match the trait'
    };
    (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_1__.scoreHandler)('image-match', test, callback, config);
    tiles.forEach(function (tile) {
      if (!ui_helpers_traits_handler__WEBPACK_IMPORTED_MODULE_4__.traitsHandler.doArraysHaveSameValues(Array.from(tile.querySelectorAll('img')).map(function (img) {
        return img.dataset.term;
      }), requiredTraits.map(function (trait) {
        return trait.term;
      }))) {
        tile.querySelectorAll('img').forEach(function (img) {
          return img.classList.add('desaturate');
        });
      }
    });
  });
};

var mixedTraitHandler = {
  getMatchingTrait: getMatchingTrait,
  fetchTraits: fetchTraits,
  onTraitsReady: onTraitsReady,
  onTraitClicked: onTraitClicked,
  onClickTileHandler: onClickTileHandler
};

/***/ }),

/***/ "O3D1":
/*!****************************************************************************************!*\
  !*** ./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question.js ***!
  \****************************************************************************************/
/*! namespace exports */
/*! export renderMixedTraitQuestion [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderMixedTraitQuestion": () => /* binding */ renderMixedTraitQuestion
/* harmony export */ });
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/screens/cards/test-card */ "LLeQ");
/* harmony import */ var ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/multichoice/multi-strips */ "AIrL");
/* harmony import */ var ui_screens_multichoice_landscape_mixed_trait_right_mixed_trait_question_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html */ "JAm9");
/* harmony import */ var ui_screens_multichoice_landscape_mixed_trait_right_mixed_trait_question_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_multichoice_landscape_mixed_trait_right_mixed_trait_question_template_html__WEBPACK_IMPORTED_MODULE_5__);
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}







var renderMixedTraitQuestion = function renderMixedTraitQuestion(collection) {
  var init = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var _store$getState, layout, collection, config, template, item, question, help, parent;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(), layout = _store$getState.layout, collection = _store$getState.collection, config = _store$getState.config;
              template = document.createElement('template');
              template.innerHTML = (ui_screens_multichoice_landscape_mixed_trait_right_mixed_trait_question_template_html__WEBPACK_IMPORTED_MODULE_5___default());
              item = collection.nextItem;
              question = 'Match the trait';
              help = "Select the correct ".concat(utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.fromCamelCase(layout.trait));
              parent = (0,ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_3__.renderTestCardTemplate)(collection, {
                vernacularName: item.vernacularName,
                binomial: item.name,
                question: question,
                help: help,
                term: ''
              });
              (0,ui_screens_multichoice_multi_strips__WEBPACK_IMPORTED_MODULE_4__.renderMultiStrips)(collection, null, {
                traits: layout.traits,
                requiredTraits: layout.requiredTraits,
                item: item,
                question: question,
                help: help
              });

            case 8:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function init() {
      return _ref.apply(this, arguments);
    };
  }();

  init();
};

/***/ }),

/***/ "AIrL":
/*!****************************************************!*\
  !*** ./src/ui/screens/multichoice/multi-strips.js ***!
  \****************************************************/
/*! namespace exports */
/*! export renderMultiStrips [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderMultiStrips": () => /* binding */ renderMultiStrips
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ramda */ "NjoR");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var snapdragon_engine_pool_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! snapdragon-engine/pool-handler */ "Yh+2");
/* harmony import */ var ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers//score-handler */ "l1q+");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/cards/test-card */ "LLeQ");
/* harmony import */ var api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! api/snapdragon/iconic-taxa */ "Bv5j");
/* harmony import */ var api_firebase_firestore__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! api/firebase/firestore */ "xWjd");
/* harmony import */ var ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/screens/lists/lesson-state-helper */ "6Fh2");
/* harmony import */ var ui_screens_multichoice_multi_strips_template_html__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ui/screens/multichoice/multi-strips-template.html */ "LZ3q");
/* harmony import */ var ui_screens_multichoice_multi_strips_template_html__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(ui_screens_multichoice_multi_strips_template_html__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var ui_screens_multichoice_multi_strips_with_images_html__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ui/screens/multichoice/multi-strips-with-images.html */ "cwzI");
/* harmony import */ var ui_screens_multichoice_multi_strips_with_images_html__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(ui_screens_multichoice_multi_strips_with_images_html__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ui/screens/common/audio-media-template.html */ "F5SJ");
/* harmony import */ var ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_12__);
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}















var renderMultiStrips = function renderMultiStrips(collection, bonus, args) {
  try {
    var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
        config = _store$getState.config,
        lesson = _store$getState.lesson,
        layout = _store$getState.layout,
        userAction = _store$getState.userAction;

    if (ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_9__.lessonStateHelper.overrideLesson(userAction, config)) {
      return;
    }

    var item = collection.nextItem || collection.items[collection.itemIndex];
    var taxon = (0,api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_7__.matchTaxon)(item.taxonomy, api_snapdragon_iconic_taxa__WEBPACK_IMPORTED_MODULE_7__.iconicTaxa);
    var screen = bonus ? bonus.screen || layout.screens[1] : layout.screens[1];
    var defaultQueryLimit = 6,
        defaultLanguage = 'en';
    defaultLanguage = config.language;

    var init = /*#__PURE__*/function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {
        var render, renderBinomialQuestions, renderVernacularQuestions, renderIdQuestions, random, type, number, families, term, answer, alternativeFamilies, alternatives, answers, help, epithet, _number, epithets, _alternatives, _answer, _answers, indices, _families, family, otherFamilies, otherFamiliesLatinNames, otherFamiliesCommonNames, _answer2, _answers2, _random, renderBirdsong, traits, requiredTraits, _item, question, _help, _answers3, _answer3;

        return regeneratorRuntime.wrap(function _callee8$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                render = function render(answer, answers, overrides) {
                  var vernacularName = overrides && overrides.vernacularName !== undefined ? overrides.vernacularName : item.vernacularName;
                  var binomial = overrides && overrides.binomial !== undefined ? overrides.binomial : item.name;
                  var question = overrides && overrides.question ? overrides.question : 'Match the name';
                  var helpDefault = config.isLandscapeMode ? '(Select the name below.)' : '(Tap on the name below.)';
                  var help = overrides && overrides.help !== undefined ? overrides.help : helpDefault;
                  var term = overrides && overrides.term !== undefined ? overrides.term : '';
                  var className = overrides && overrides.className !== undefined ? overrides.className : '';
                  var headerClassName = overrides && overrides.headerClassName !== undefined ? overrides.headerClassName : '';
                  var clue = overrides && overrides.clue !== undefined ? overrides.clue : null;
                  var parent = (0,ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_6__.renderTestCardTemplate)(collection, {
                    vernacularName: vernacularName,
                    binomial: binomial,
                    question: question,
                    help: help,
                    term: term,
                    className: className,
                    headerClassName: headerClassName,
                    bonus: bonus
                  });
                  var template = document.createElement('template');
                  template.innerHTML = answer.img ? (ui_screens_multichoice_multi_strips_with_images_html__WEBPACK_IMPORTED_MODULE_11___default()) : (ui_screens_multichoice_multi_strips_template_html__WEBPACK_IMPORTED_MODULE_10___default());
                  answers.forEach(function (answer, index) {
                    answer.index = index;
                    answer.name = answer.name || '';
                    answer.names = answer.names ? answer.names.join(', ') : '';
                  });
                  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_5__.renderTemplate)({
                    answers: answers
                  }, template.content, parent);
                  var strips = document.querySelectorAll('.js-rptr-strips .strip');
                  if (overrides.italicise) strips.forEach(function (strip) {
                    return strip.classList.add('binomial');
                  });
                  var taxon = {
                    name: item.taxonomy.family,
                    binomial: item.name,
                    question: answer.term
                  };
                  var test = {
                    itemId: item.id,
                    items: strips,
                    taxon: taxon,
                    binomial: item.name,
                    questionCount: lesson.questionCount,
                    layoutCount: lesson.layoutCount,
                    points: layout.points,
                    clue: clue,
                    answerIndex: answers.findIndex(function (a) {
                      return a.term === answer.term;
                    }),
                    questionText: question
                  };
                  (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_4__.scoreHandler)('strip', test, null, config);
                };

                if (screen.name === 'species-scientifics') {
                  renderBinomialQuestions = /*#__PURE__*/function () {
                    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
                      var answer, answers, help, buildQuestion;
                      return regeneratorRuntime.wrap(function _callee2$(_context2) {
                        while (1) {
                          switch (_context2.prev = _context2.next) {
                            case 0:
                              buildQuestion = /*#__PURE__*/function () {
                                var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
                                  return regeneratorRuntime.wrap(function _callee$(_context) {
                                    while (1) {
                                      switch (_context.prev = _context.next) {
                                        case 0:
                                          answer = {
                                            term: item.name
                                          };
                                          _context.next = 3;
                                          return (0,snapdragon_engine_pool_handler__WEBPACK_IMPORTED_MODULE_3__.getPoolItems)(collection, 6);

                                        case 3:
                                          answers = _context.sent;
                                          answers = (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(8, answers).filter(function (s) {
                                            return s.name.toLowerCase() !== item.name.toLowerCase();
                                          }).map(function (s) {
                                            return s.name;
                                          });
                                          answers = (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(5, answers);
                                          answers.push(item.name);
                                          answers = answers.map(function (a) {
                                            return {
                                              term: a
                                            };
                                          });
                                          answers = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(answers);
                                          help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';

                                        case 10:
                                        case "end":
                                          return _context.stop();
                                      }
                                    }
                                  }, _callee, this);
                                }));

                                return function buildQuestion() {
                                  return _ref3.apply(this, arguments);
                                };
                              }();

                              _context2.next = 3;
                              return buildQuestion();

                            case 3:
                              render(answer, answers, {
                                binomial: 'Latin name',
                                question: 'What\'s the latin name?',
                                help: help,
                                italicise: true
                              });

                            case 4:
                            case "end":
                              return _context2.stop();
                          }
                        }
                      }, _callee2, this);
                    }));

                    return function renderBinomialQuestions() {
                      return _ref2.apply(this, arguments);
                    };
                  }();

                  renderBinomialQuestions();
                }

                if (screen.name === 'species-vernaculars') {
                  renderVernacularQuestions = /*#__PURE__*/function () {
                    var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
                      var answer, answers, help, buildQuestion;
                      return regeneratorRuntime.wrap(function _callee4$(_context4) {
                        while (1) {
                          switch (_context4.prev = _context4.next) {
                            case 0:
                              buildQuestion = /*#__PURE__*/function () {
                                var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
                                  return regeneratorRuntime.wrap(function _callee3$(_context3) {
                                    while (1) {
                                      switch (_context3.prev = _context3.next) {
                                        case 0:
                                          answer = {
                                            term: item.vernacularName
                                          };
                                          _context3.next = 3;
                                          return (0,snapdragon_engine_pool_handler__WEBPACK_IMPORTED_MODULE_3__.getPoolItems)(collection, 6);

                                        case 3:
                                          answers = _context3.sent;
                                          answers = answers.map(function (a) {
                                            return ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__.itemProperties.getVernacularName(a, config, false, 'vernacularName', defaultLanguage);
                                          });
                                          answers = (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(5, answers.filter(function (a) {
                                            return a !== item.vernacularName;
                                          }));
                                          answers = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([item.vernacularName].concat(_toConsumableArray(answers)));
                                          answers = answers.map(function (a) {
                                            return {
                                              term: a
                                            };
                                          });
                                          help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';

                                        case 9:
                                        case "end":
                                          return _context3.stop();
                                      }
                                    }
                                  }, _callee3, this);
                                }));

                                return function buildQuestion() {
                                  return _ref5.apply(this, arguments);
                                };
                              }();

                              _context4.next = 3;
                              return buildQuestion();

                            case 3:
                              render(answer, answers, {
                                vernacularName: 'Common name',
                                question: "What's the common name?",
                                help: help
                              });

                            case 4:
                            case "end":
                              return _context4.stop();
                          }
                        }
                      }, _callee4, this);
                    }));

                    return function renderVernacularQuestions() {
                      return _ref4.apply(this, arguments);
                    };
                  }();

                  renderVernacularQuestions();
                }

                if (screen.name === 'species-identification') {
                  renderIdQuestions = /*#__PURE__*/function () {
                    var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
                      var answer, answers, help, buildQuestion;
                      return regeneratorRuntime.wrap(function _callee6$(_context6) {
                        while (1) {
                          switch (_context6.prev = _context6.next) {
                            case 0:
                              buildQuestion = /*#__PURE__*/function () {
                                var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
                                  return regeneratorRuntime.wrap(function _callee5$(_context5) {
                                    while (1) {
                                      switch (_context5.prev = _context5.next) {
                                        case 0:
                                          answer = {
                                            term: item.quickId
                                          };
                                          _context5.next = 3;
                                          return (0,snapdragon_engine_pool_handler__WEBPACK_IMPORTED_MODULE_3__.getPoolItems)(collection, 6);

                                        case 3:
                                          answers = _context5.sent;
                                          answers = answers.map(function (a) {
                                            return a.quickId;
                                          });
                                          answers = (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(5, answers.filter(function (a) {
                                            return a !== item.quickId;
                                          }));
                                          answers = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([item.quickId].concat(_toConsumableArray(answers)));
                                          answers = answers.map(function (a) {
                                            return {
                                              term: a
                                            };
                                          });
                                          help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';

                                        case 9:
                                        case "end":
                                          return _context5.stop();
                                      }
                                    }
                                  }, _callee5, this);
                                }));

                                return function buildQuestion() {
                                  return _ref7.apply(this, arguments);
                                };
                              }();

                              _context6.next = 3;
                              return buildQuestion();

                            case 3:
                              render(answer, answers, {
                                vernacularName: item.vernacularName,
                                question: 'Which description fits?',
                                help: help
                              });

                            case 4:
                            case "end":
                              return _context6.stop();
                          }
                        }
                      }, _callee6, this);
                    }));

                    return function renderIdQuestions() {
                      return _ref6.apply(this, arguments);
                    };
                  }();

                  renderIdQuestions();
                }

                if (!(screen.name === 'family-strips')) {
                  _context8.next = 19;
                  break;
                }

                random = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getRandomInt(2);
                type = random === 0 ? 'identification' : 'summary';
                number = config.isPortraitMode ? 4 : 4;
                _context8.next = 10;
                return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_8__.firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);

              case 10:
                families = _context8.sent;
                term = item.family[type] || item.family.descriptions[0][type];
                answer = {
                  term: term,
                  name: item.family.name
                } || {
                  type: {
                    term: "Missing ".concat(type)
                  },
                  name: item.family.name
                };
                alternativeFamilies = (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(number - 1, (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(number, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(families))).filter(function (f) {
                  return f.name.toLowerCase() !== item.taxonomy.family.toLowerCase();
                });
                alternatives = alternativeFamilies.filter(function (f) {
                  return f[type] && f[type] !== undefined && f[type] !== '';
                }).map(function (f) {
                  return {
                    type: f[type],
                    name: f.name,
                    names: f.names
                  };
                });
                alternatives = alternatives.map(function (a) {
                  return {
                    term: a.type,
                    name: a.name,
                    names: a.names
                  };
                });
                answers = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([answer].concat(_toConsumableArray(alternatives)));
                help = config.isLandscapeMode ? '(Select the description below.)' : '(Tap on the description.)';
                render(answer, answers, {
                  question: 'Match species family',
                  help: help,
                  clue: item.taxonomy.family
                });

              case 19:
                if (!(screen.name === 'epithet')) {
                  _context8.next = 33;
                  break;
                }

                epithet = layout.epithet.latin.join(', ');
                _number = config.isPortraitMode ? 6 : 6;
                _context8.next = 24;
                return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_8__.firestore.getEpithets();

              case 24:
                epithets = _context8.sent;
                _alternatives = (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(_number - 1, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(epithets)).filter(function (e) {
                  return !(0,ramda__WEBPACK_IMPORTED_MODULE_14__.default)(e.latin, epithet);
                });
                _alternatives = _alternatives.map(function (e) {
                  return e.en.join(', ');
                });
                _alternatives = _alternatives.map(function (a) {
                  return {
                    term: a
                  };
                });
                _answer = epithets.find(function (e) {
                  return e.latin.join(', ').toUpperCase() === epithet.toUpperCase();
                });
                _answer = _answer ? _answer[config.language][0] : epithet;
                _answer = {
                  term: _answer
                };
                _answers = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([_answer].concat(_toConsumableArray(_alternatives)));

                if (config.isLandscapeMode) {
                  render(_answer, _answers, {
                    question: layout.epithet.latin.join(', '),
                    help: '(Match the latin term)'
                  });
                } else {
                  render(_answer, _answers, {
                    question: 'Match latin word',
                    help: '',
                    vernacularName: '',
                    binomial: '',
                    term: layout.epithet.latin.join(', ')
                  });
                }

              case 33:
                if (screen.name === 'definition') {
                  render({
                    term: bonus.question
                  }, bonus.answers.map(function (a) {
                    return {
                      term: a
                    };
                  }), bonus.overrides);
                }

                if (!(screen.name === 'family')) {
                  _context8.next = 59;
                  break;
                }

                indices = config.isPortraitMode ? [5, 6] : [5, 6];
                _context8.next = 38;
                return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_8__.firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);

              case 38:
                _families = _context8.sent;
                family = item.taxonomy.family;
                otherFamilies = (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(indices[0], (0,ramda__WEBPACK_IMPORTED_MODULE_13__.default)(indices[1], utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(_families)).filter(function (family) {
                  return family.name.toLowerCase() !== item.taxonomy.family.toLowerCase();
                }));
                otherFamiliesLatinNames = otherFamilies.map(function (family) {
                  return family.name;
                });
                otherFamiliesCommonNames = otherFamilies.map(function (of) {
                  return of.names[0];
                });
                _random = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getRandomInt(2);
                _context8.t0 = _random;
                _context8.next = _context8.t0 === 0 ? 47 : _context8.t0 === 1 ? 53 : 59;
                break;

              case 47:
                _answer2 = {
                  term: item.family.vernacularName
                };
                otherFamiliesCommonNames = otherFamiliesCommonNames.map(function (a) {
                  return {
                    term: a
                  };
                });
                _answers2 = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([_answer2].concat(_toConsumableArray(otherFamiliesCommonNames)));
                if (_answer2 === undefined) console.log('Missing question - case 0 - in multi-strips for: ', item.name);
                render(_answer2, _answers2, {
                  question: 'Match family name'
                });
                return _context8.abrupt("break", 59);

              case 53:
                _answer2 = {
                  term: family
                };
                otherFamiliesLatinNames = otherFamiliesLatinNames.map(function (a) {
                  return {
                    term: a
                  };
                });
                _answers2 = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray([_answer2].concat(_toConsumableArray(otherFamiliesLatinNames)));
                if (_answer2 === undefined) console.log('Missing question - case 1 - in multi-strips for: ', item.name);
                render(_answer2, _answers2, {
                  question: 'Match family name',
                  italicise: true
                });
                return _context8.abrupt("break", 59);

              case 59:
                if (screen.name === 'trait-property') {
                  render({
                    term: bonus.question
                  }, bonus.answers.map(function (a) {
                    return {
                      term: a
                    };
                  }), bonus.overrides);

                  if (bonus.overrides.trait && bonus.overrides.trait.name === 'song') {
                    renderBirdsong = /*#__PURE__*/function () {
                      var _ref8 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {
                        var parent, template, xcID, mp3, header, content;
                        return regeneratorRuntime.wrap(function _callee7$(_context7) {
                          while (1) {
                            switch (_context7.prev = _context7.next) {
                              case 0:
                                parent = document.querySelector('.js-question-help');
                                parent.innerHTML = '';
                                template = document.createElement('template');
                                template.innerHTML = (ui_screens_common_audio_media_template_html__WEBPACK_IMPORTED_MODULE_12___default());
                                xcID = bonus.overrides.trait.value[0];
                                _context7.next = 7;
                                return api_firebase_firestore__WEBPACK_IMPORTED_MODULE_8__.firestore.getBirdsong(xcID);

                              case 7:
                                mp3 = _context7.sent;
                                (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_5__.renderTemplate)({
                                  mp3: mp3,
                                  title: item.name
                                }, template.content, parent);
                                header = document.querySelector('.js-test-card-question');
                                header.classList.remove('standard-block');
                                header.classList.add('double-standard-block');
                                content = document.querySelector('.js-test-card-content');
                                content.classList.add('test-card-content-less-standard-block');

                              case 14:
                              case "end":
                                return _context7.stop();
                            }
                          }
                        }, _callee7, this);
                      }));

                      return function renderBirdsong() {
                        return _ref8.apply(this, arguments);
                      };
                    }();

                    renderBirdsong();
                  }
                }

                if (layout.name === 'mixed-trait-images') {
                  // portrait only - redirect from renderMixedTraitImages
                  traits = args.traits, requiredTraits = args.requiredTraits, _item = args.item, question = args.question, _help = args.help;
                  _answers3 = (0,ramda__WEBPACK_IMPORTED_MODULE_15__.default)(traits);
                  _answer3 = requiredTraits[0];
                  render(_answer3, _answers3, {
                    binomial: _item.name,
                    question: question,
                    help: _help,
                    italicise: true
                  });
                }

              case 61:
              case "end":
                return _context8.stop();
            }
          }
        }, _callee8, this);
      }));

      return function init() {
        return _ref.apply(this, arguments);
      };
    }();

    init();
  } catch (e) {
    console.error('Crashed out somwhere on multi-strips with this error: ', e);
  }
};

/***/ }),

/***/ "F+PF":
/*!***************************************************************************************!*\
  !*** ./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined.js ***!
  \***************************************************************************************/
/*! namespace exports */
/*! export renderMixedSpecimenImagesAndQuestion [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderMixedSpecimenImagesAndQuestion": () => /* binding */ renderMixedSpecimenImagesAndQuestion
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/cards/test-card */ "LLeQ");
/* harmony import */ var ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/helpers//score-handler */ "l1q+");
/* harmony import */ var ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/common/image-slider */ "YMON");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var snapdragon_engine_pool_handler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! snapdragon-engine/pool-handler */ "Yh+2");
/* harmony import */ var ui_screens_multichoice_portrait_mixed_specimen_mixed_specimen_combined_template_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html */ "ud24");
/* harmony import */ var ui_screens_multichoice_portrait_mixed_specimen_mixed_specimen_combined_template_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(ui_screens_multichoice_portrait_mixed_specimen_mixed_specimen_combined_template_html__WEBPACK_IMPORTED_MODULE_9__);
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}












var renderMixedSpecimenImagesAndQuestion = function renderMixedSpecimenImagesAndQuestion(collection) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      config = _store$getState.config,
      lesson = _store$getState.lesson,
      layout = _store$getState.layout,
      score = _store$getState.score;

  var item = (0,ramda__WEBPACK_IMPORTED_MODULE_10__.default)(collection.nextItem);
  if (!item) return;

  var init = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var getPortraitImages, items, images, question, parent, template, continueLessonBtn, boundScore, answers;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              // snapLog('renderMixedSpecimenImagesAndQuestion runs twice, once from renderMixedSpecimenQuestion, both triggered by same collection change');
              getPortraitImages = function getPortraitImages(images) {
                var multiImages = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.flatten(images.map(function (image) {
                  var images = image.srcs.filter(function (i) {
                    return i.starred;
                  }).length === 0 ? (0,ramda__WEBPACK_IMPORTED_MODULE_11__.default)(1, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(image.srcs)) : image.srcs.filter(function (i) {
                    return i.starred;
                  });
                  var item = {
                    name: image.itemName,
                    images: images
                  };
                  return (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_7__.prepImagesForCarousel)(item, config, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_7__.imageUseCases.MIXED_SPECIMENS);
                }));
                return multiImages;
              };

              _context.next = 3;
              return (0,snapdragon_engine_pool_handler__WEBPACK_IMPORTED_MODULE_8__.getPoolItems)(collection);

            case 3:
              items = _context.sent;
              images = items.map(function (item, index) {
                return {
                  index: index + 1,
                  srcs: item.images,
                  itemName: item.name
                };
              });
              images = getPortraitImages(images);
              question = 'Identify this species';
              parent = (0,ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_4__.renderTestCardTemplate)(collection, {
                vernacularName: item.vernacularName,
                binomial: item.name,
                question: question,
                help: '(Click on the matching photo.)',
                term: ''
              });
              parent.innerHTML = '';
              template = document.createElement('template');
              template.innerHTML = (ui_screens_multichoice_portrait_mixed_specimen_mixed_specimen_combined_template_html__WEBPACK_IMPORTED_MODULE_9___default());
              (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_3__.renderTemplate)({}, template.content, parent);
              parent = document.querySelector('.js-test-card-container-images');
              (0,ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_6__.imageSlider)({
                config: config,
                images: utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(images),
                parent: parent,
                identifier: 'mixed-specimens'
              });
              continueLessonBtn = document.querySelector('.js-continue-lesson-btn');
              boundScore = {};
              answers = [];
              images.forEach(function (image) {
                answers.push({
                  value: image.itemName,
                  url: (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_7__.scaleImage)(image).small
                });
              });
              document.querySelectorAll('#imageSlider_mixed-specimens .carousel-item img').forEach(function (img) {
                img.addEventListener('click', function (event) {
                  var layer = event.target;
                  var selectedName = layer.dataset.itemName;
                  var question = item.name;
                  var answer = selectedName || 'incorrect';
                  var isCorrect = answer === question;
                  var answerIcon = document.createElement('span');
                  answerIcon.innerHTML = isCorrect ? '<span class="icon"><i class="fas fa-check-circle"></i></span>' : '<span class="icon"><i class="fas fa-times-circle"></i></span>';

                  var test = _objectSpread(_objectSpread({}, score), {}, {
                    itemId: item.id,
                    question: question,
                    answer: answer,
                    binomial: item.name,
                    questionCount: lesson.questionCount,
                    layoutCount: lesson.layoutCount,
                    points: layout.points,
                    answers: answers,
                    questionText: 'Identify this species',
                    vernacularName: ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__.itemProperties.getVernacularName(item, config)
                  });

                  var callback = function callback(score, scoreUpdateTimer) {
                    boundScore.score = score;
                    boundScore.scoreUpdateTimer = scoreUpdateTimer;
                    continueLessonBtn.disabled = false;

                    if (!score.success) {
                      var wrongItem = items.find(function (item) {
                        return item.name === score.answer;
                      });
                      var vernacularName = ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_2__.itemProperties.getVernacularName(wrongItem, config);
                      var name = vernacularName || score.answer;
                    }
                  };

                  (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_5__.scoreHandler)('image-match', test, callback, config);
                });
              });
              continueLessonBtn.addEventListener('click', function (event) {
                if (!score.success) {
                  setTimeout(function () {
                    window.clearTimeout(boundScore.scoreUpdateTimer);
                    (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_5__.bindScore)(boundScore.score);
                  });
                } else {
                  window.clearTimeout(boundScore.scoreUpdateTimer);
                  (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_5__.bindScore)(boundScore.score);
                }
              });

            case 20:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function init() {
      return _ref.apply(this, arguments);
    };
  }();

  try {
    init();
  } catch (e) {
    logError('renderMixedSpecimenImagesAndQuestion init', e);
  }
};

/***/ }),

/***/ "v2sf":
/*!********************************************!*\
  !*** ./src/ui/screens/progress/history.js ***!
  \********************************************/
/*! namespace exports */
/*! export renderHistory [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderHistory": () => /* binding */ renderHistory
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_screens_lists_lesson_list__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/lists/lesson-list */ "3D3m");


var renderHistory = function renderHistory(history) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      collection = _store$getState.collection;

  (0,ui_screens_lists_lesson_list__WEBPACK_IMPORTED_MODULE_1__.renderLessons)();
};

/***/ }),

/***/ "DK44":
/*!**********************************************************!*\
  !*** ./src/ui/screens/progress/score-summary-handler.js ***!
  \**********************************************************/
/*! namespace exports */
/*! export getLessonScores [provided] [unused] [could be renamed] */
/*! export scoreSummaryHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "scoreSummaryHandler": () => /* binding */ scoreSummaryHandler
/* harmony export */ });
/* unused harmony export getLessonScores */
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}



var getLessonScores = function getLessonScores(history, lesson, stateScore, savedScore) {
  if (!history) return [stateScore];
  var historyIsUpToDate = (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(stateScore.binomial, history.scores.map(function (s) {
    return s.binomial;
  }));
  var scores = [];

  if (lesson.isNextRound) {
    scores = historyIsUpToDate ? history.scores : stateScore.total === 0 ? history.scores : [].concat(_toConsumableArray(history.scores), [stateScore]);
  } else {
    scores = historyIsUpToDate ? history.scores : [].concat(_toConsumableArray(history.scores), [stateScore]);
  }

  return scores;
};

var getSummaryRows = function getSummaryRows(rows) {
  rows = rows.map(function (r, i) {
    var _r = _objectSpread(_objectSpread({}, r), {}, {
      id: "".concat(utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.toCamelCase(r.binomial), "_").concat(i),
      question: r.question.term ? r.question.term : r.question,
      answers: r.answers.map(function (a) {
        return getAnswer(a, r);
      })
    });

    return _r;
  });
  return rows;
};

var scoreSummaryHandler = {
  getLessonScores: getLessonScores,
  getSummaryRows: getSummaryRows
};

function getAnswer(a, r) {
  var isObj = _typeof(a) === 'object';
  var value = isObj ? a.value || a.term : a;
  var hasImage = isObj && !!a.url;
  var url = isObj ? a.url : '';
  var question = r.question.term || r.question;
  var isTrue = value !== "" && utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.parseToLowerCase(value) === utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.parseToLowerCase(question); // || contains(value, r.answer))

  var isWrongAnswer = !isTrue && utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.parseToLowerCase(value) === utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.parseToLowerCase(r.answer);
  var name = isObj ? a.name || '' : '';
  var answer = {
    value: value,
    url: url,
    hasImage: hasImage,
    isTrue: isTrue,
    isWrongAnswer: isWrongAnswer,
    name: name
  };
  return answer;
}

/***/ }),

/***/ "9TBd":
/*!**************************************************!*\
  !*** ./src/ui/screens/progress/score-summary.js ***!
  \**************************************************/
/*! namespace exports */
/*! export renderScoreSummary [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderScoreSummary": () => /* binding */ renderScoreSummary
/* harmony export */ });
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/data-checking */ "XTkL");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/dom */ "B+Uw");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/lists/lesson-state-helper */ "6Fh2");
/* harmony import */ var ui_screens_progress_score_summary_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/progress/score-summary-handler */ "DK44");
/* harmony import */ var ui_screens_progress_score_summary_template_html__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/progress/score-summary-template.html */ "G+qQ");
/* harmony import */ var ui_screens_progress_score_summary_template_html__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(ui_screens_progress_score_summary_template_html__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var ui_screens_progress_score_summary_row_template_html__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/screens/progress/score-summary-row-template.html */ "aYLD");
/* harmony import */ var ui_screens_progress_score_summary_row_template_html__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(ui_screens_progress_score_summary_row_template_html__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var ui_screens_progress_score_summary_no_row_template_html__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ui/screens/progress/score-summary-no-row-template.html */ "U9hP");
/* harmony import */ var ui_screens_progress_score_summary_no_row_template_html__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(ui_screens_progress_score_summary_no_row_template_html__WEBPACK_IMPORTED_MODULE_9__);
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}











var renderScoreSummary = function renderScoreSummary(lessonId, summaryContainer) {
  var init = function init() {
    var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState(),
        lessons = _store$getState.lessons,
        stateScore = _store$getState.score,
        userAction = _store$getState.userAction;

    var _ref = lessons.length > 0 ? !!lessons.find(function (l) {
      return l.collection.id === parseInt(lessonId);
    }) ? lessons.find(function (l) {
      return l.collection.id === parseInt(lessonId);
    }) : redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState() : redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState(),
        collection = _ref.collection,
        history = _ref.history,
        config = _ref.config,
        savedScore = _ref.score;

    var _store$getState2 = redux_store__WEBPACK_IMPORTED_MODULE_2__.store.getState(),
        lesson = _store$getState2.lesson;

    if (ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_5__.lessonStateHelper.overrideLesson(userAction, config)) {
      return;
    }

    var template = document.createElement('template');
    template.innerHTML = (ui_screens_progress_score_summary_template_html__WEBPACK_IMPORTED_MODULE_7___default());
    var parent = config.isLandscapeMode ? summaryContainer || document.querySelector('#lessonModal .js-modal-text') : ui_dom__WEBPACK_IMPORTED_MODULE_3__.DOM.rightBody;
    parent.innerHTML = '';
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__.renderTemplate)({
      collection: collection,
      lesson: lesson
    }, template.content, parent);
    var actionLinks = document.querySelectorAll('.js-continue-link');
    setTimeout(function () {
      actionLinks[0].focus();
    }, 250);

    if (summaryContainer) {
      actionLinks.forEach(function (link) {
        return link.classList.add('snap-inactive');
      });
    }

    if (lesson.layoutName === 'summary') {
      var progressLink = document.querySelector('.js-review-progress');
      progressLink.innerHTML = '';
    }

    var scores = ui_screens_progress_score_summary_handler__WEBPACK_IMPORTED_MODULE_6__.scoreSummaryHandler.getLessonScores(history, lesson, stateScore, savedScore).reverse();
    scores.forEach(function (s) {
      return renderScoreSummaryRow(scores, s, config);
    });

    var handleContinueLesson = /*#__PURE__*/function () {
      var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(e) {
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                e.preventDefault();
                Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-state-handler */ "MC3F")).then(function (module) {
                  module.lessonStateHandler.changeRequest({
                    requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_0__.enums.lessonState.NEXT_ROUND,
                    requestArgs: {
                      id: lessonId,
                      lesson: _objectSpread(_objectSpread({}, lesson), {}, {
                        isNextRound: true
                      })
                    }
                  });
                });

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      return function handleContinueLesson(_x) {
        return _ref2.apply(this, arguments);
      };
    }();

    var handleNewLesson = /*#__PURE__*/function () {
      var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(event) {
        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return ui_screens_lists_lesson_state_helper__WEBPACK_IMPORTED_MODULE_5__.lessonStateHelper.purgeLesson();

              case 2:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      return function handleNewLesson(_x2) {
        return _ref3.apply(this, arguments);
      };
    }();

    if (lesson.isLessonComplete) {
      actionLinks.forEach(function (actionLink) {
        actionLink.innerHTML = 'START NEW LESSON';
        actionLink.addEventListener('click', handleNewLesson, {
          once: true
        });
      });
    } else {
      actionLinks.forEach(function (actionLink) {
        actionLink.addEventListener('click', handleContinueLesson, {
          once: true
        });
      });
    }

    window.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') {
        handleContinueLesson(e);
      }
    }, {
      once: true
    });
  };

  init();
};

var renderScoreSummaryRow = function renderScoreSummaryRow(scores, s, config) {
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_progress_score_summary_row_template_html__WEBPACK_IMPORTED_MODULE_8___default());
  var parent = document.querySelector('.js-score-summary-rows');

  if (s.total === 0) {
    parent.innerHTML = '';
    template.innerHTML = (ui_screens_progress_score_summary_no_row_template_html__WEBPACK_IMPORTED_MODULE_9___default());
    (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__.renderTemplate)({}, template.content, parent);
    return;
  }

  var rows = [].concat(_toConsumableArray(s.passes), _toConsumableArray(s.fails));
  rows = ui_screens_progress_score_summary_handler__WEBPACK_IMPORTED_MODULE_6__.scoreSummaryHandler.getSummaryRows(rows);
  var vernacularName = s.vernacularName || ui_helpers_data_checking__WEBPACK_IMPORTED_MODULE_1__.itemProperties.getVernacularName(s.binomial, config);
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_4__.renderTemplate)({
    vernacularName: vernacularName,
    binomial: s.binomial,
    rows: rows,
    score: "".concat(s.correct, "/").concat(s.total)
  }, template.content, parent);

  if (scores.length > 0) {
    var noQuestionsText = parent.querySelector('.js-no-questions');

    if (noQuestionsText) {
      noQuestionsText.innerHTML = '';
    }
  }
};

/***/ }),

/***/ "TdAe":
/*!********************************************!*\
  !*** ./src/ui/screens/progress/summary.js ***!
  \********************************************/
/*! namespace exports */
/*! export renderSummary [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderSummary": () => /* binding */ renderSummary
/* harmony export */ });
/* harmony import */ var redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/subscriptions */ "6saE");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_screens_progress_score_summary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/screens/progress/score-summary */ "9TBd");



var renderSummary = function renderSummary(history) {
  redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.remove(redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.getByName('renderSummary'));

  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      collection = _store$getState.collection;

  (0,ui_screens_progress_score_summary__WEBPACK_IMPORTED_MODULE_2__.renderScoreSummary)(collection.id);
  return;
};

/***/ }),

/***/ "+Ynd":
/*!*********************************************************!*\
  !*** ./src/ui/screens/text-entry/species-text-entry.js ***!
  \*********************************************************/
/*! namespace exports */
/*! export renderTextEntry [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderTextEntry": () => /* binding */ renderTextEntry
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_screens_text_entry_text_entry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/screens/text-entry/text-entry */ "MYfN");


var renderTextEntry = function renderTextEntry(collection) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      layout = _store$getState.layout;

  var screen = layout.screens.filter(function (el) {
    return el.name === 'text-entry';
  })[0];
  var item = collection.nextItem;
  if (!screen) return;
  item.vernacular = item.vernacularName;
  var q = screen.taxon === 'name' ? item.name : screen.taxon === 'vernacular' ? item.vernacularName : item.taxonomy[screen.taxon];
  var question = {
    binomial: item.name,
    species: item.taxonomy.species,
    genus: item.taxonomy.genus,
    taxon: screen.taxon,
    question: q,
    common: item.vernacularName
  };
  (0,ui_screens_text_entry_text_entry__WEBPACK_IMPORTED_MODULE_1__.renderInput)(screen, question);
};

/***/ }),

/***/ "xN5I":
/*!****************************************************!*\
  !*** ./src/ui/screens/text-entry/text-complete.js ***!
  \****************************************************/
/*! namespace exports */
/*! export renderCompleteText [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderCompleteText": () => /* binding */ renderCompleteText
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ramda */ "CvH3");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers//score-handler */ "l1q+");
/* harmony import */ var ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/screens/cards/test-card */ "LLeQ");
/* harmony import */ var ui_screens_text_entry_text_complete_template_html__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/text-entry/text-complete-template.html */ "DSGb");
/* harmony import */ var ui_screens_text_entry_text_complete_template_html__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ui_screens_text_entry_text_complete_template_html__WEBPACK_IMPORTED_MODULE_5__);







var renderCompleteText = function renderCompleteText(collection) {
  var item = collection.nextItem;

  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      layout = _store$getState.layout,
      config = _store$getState.config,
      lessonPlan = _store$getState.lessonPlan;

  var screen = layout.screens.filter(function (el) {
    return el.name === 'text-complete';
  })[0];
  if (!screen) return;
  var question, genus, species, givenTaxon, vernacularName, binomial, questionTxt;
  vernacularName = item.vernacularName;
  binomial = item.name;
  questionTxt = 'Complete the latin name';

  switch (screen.type) {
    case 'text-complete-genus':
      question = item.taxonomy.genus;
      genus = '---';
      species = item.taxonomy.species;
      binomial = "--- ".concat(item.taxonomy.species);
      givenTaxon = 'genus';
      questionTxt = 'Select genus name';
      break;

    case 'text-complete-species':
      question = item.taxonomy.species;
      genus = item.taxonomy.genus;
      species = '---';
      binomial = "".concat(item.taxonomy.genus, " ---");
      givenTaxon = 'species';
      questionTxt = 'Select species name';
      break;
  }

  var parent = (0,ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_4__.renderTestCardTemplate)(collection, {
    vernacularName: vernacularName,
    binomial: binomial,
    question: questionTxt,
    help: '(Select the name below.)',
    term: ''
  });
  var template = document.createElement('template');
  template.innerHTML = (ui_screens_text_entry_text_complete_template_html__WEBPACK_IMPORTED_MODULE_5___default());
  var numerOfItems = config.isPortraitMode ? 4 : 5; // broaden pool to species matching iconic taxon

  var itemTaxons = collection.items.map(function (item) {
    switch (givenTaxon) {
      case 'genus':
        return item.taxonomy.genus;

      case 'species':
        return item.taxonomy.species;

      default:
        return item.name;
    }
  });
  var pool = (0,ramda__WEBPACK_IMPORTED_MODULE_6__.default)(numerOfItems, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(itemTaxons).filter(utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.onlyUnique).filter(function (itemTaxon) {
    return itemTaxon !== item.taxonomy[givenTaxon];
  })).filter(function (item) {
    return item !== undefined;
  });
  pool.push(item.taxonomy[givenTaxon]);
  var answers = utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(pool);
  answers = answers.map(function (answer, index) {
    return {
      index: index,
      value: answer
    };
  });
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({
    genus: genus,
    species: species,
    answers: answers
  }, template.content, parent);
  setTimeout(function () {
    var block = document.querySelectorAll('.pool .block')[0];
    block.focus();
  }, 1000);
  var score = {
    itemId: item.id,
    binomial: item.name,
    question: item.taxonomy[givenTaxon],
    callbackTime: config.callbackTime,
    layoutCount: lessonPlan.layouts.length,
    points: layout.points
  };

  var callback = function callback(score, scoreUpdateTimer, config) {
    var iconColour = score.success ? 'answer-box-success' : 'answer-box-alert';
    var answerIcon = score.success ? "<span class=\"icon\"><i class=\"fas fa-check\"></i></span>" : "<span class=\"icon\"><i class=\"fas fa-times\"></i></span>";
    var response = score.success ? "Correct" : "Incorrect";
    document.querySelector('.js-txt-question').innerHTML = "<div class=\"".concat(iconColour, "\"><span>").concat(answerIcon, "</span><span>").concat(response, "</span</div>");
    document.querySelectorAll('.block span').forEach(function (block) {
      if (block.innerText === score.answer) {
        score.success ? block.parentElement.classList.add('snap-success') : block.parentElement.classList.add('snap-alert');
      }

      if (block.innerText === score.question) {
        block.parentElement.classList.add('snap-success');
      }
    });
    (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_3__.continueLessonHandler)(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);
  };

  document.querySelectorAll('.js-pool button').forEach(function (answer) {
    answer.addEventListener('click', function (e) {
      e.preventDefault();
      var button = e.target;
      var answer = button.innerText;

      if (question === item.taxonomy.species) {
        document.querySelector('.species').innerText = answer;
      } else {
        document.querySelector('.genus').innerText = answer;
      }

      score.answer = answer;
      score.answers = answers;
      score.questionText = questionTxt;
      (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_3__.scoreHandler)('block', score, callback, config);
    });
  });
};

/***/ }),

/***/ "MYfN":
/*!*************************************************!*\
  !*** ./src/ui/screens/text-entry/text-entry.js ***!
  \*************************************************/
/*! namespace exports */
/*! export renderInput [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_require__.n, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderInput": () => /* binding */ renderInput
/* harmony export */ });
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/templating */ "xNSC");
/* harmony import */ var ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers//score-handler */ "l1q+");
/* harmony import */ var ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/helpers/image-handler */ "mASn");
/* harmony import */ var ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ui/screens/common/image-slider */ "YMON");
/* harmony import */ var ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ui/screens/cards/test-card */ "LLeQ");
/* harmony import */ var ui_screens_text_entry_text_entry_templates_html__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ui/screens/text-entry/text-entry-templates.html */ "/ArE");
/* harmony import */ var ui_screens_text_entry_text_entry_templates_html__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(ui_screens_text_entry_text_entry_templates_html__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var ui_screens_text_entry_text_entry_portrait_templates_html__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ui/screens/text-entry/text-entry-portrait-templates.html */ "qcAX");
/* harmony import */ var ui_screens_text_entry_text_entry_portrait_templates_html__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(ui_screens_text_entry_text_entry_portrait_templates_html__WEBPACK_IMPORTED_MODULE_8__);
function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}










var renderInput = function renderInput(screen, question) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_1__.store.getState(),
      lessonPlan = _store$getState.lessonPlan,
      collection = _store$getState.collection,
      config = _store$getState.config,
      layout = _store$getState.layout;

  var item = collection.nextItem;
  var vernacularName, binomial, questionTxt;
  questionTxt = 'Complete the latin name';

  switch (question.taxon) {
    case 'genus':
      vernacularName = item.vernacularName;
      binomial = binomial = "--- ".concat(question.species);
      questionTxt = 'Enter the genus name';
      break;

    case 'species':
      vernacularName = item.vernacularName;
      binomial = binomial = "".concat(question.genus, " ---");
      questionTxt = 'Enter the species name';
      break;

    case 'name':
      vernacularName = item.vernacularName;
      binomial = binomial = "--- ---";
      questionTxt = 'Enter full latin name';
      break;

    case 'vernacular':
      vernacularName = '--- ---';
      binomial = item.name;
      questionTxt = 'Enter the common name';
      break;
  }

  var help = config.isLandscapeMode ? '(Complete the name below.)' : '(Scroll to see more images.)';
  var parent = (0,ui_screens_cards_test_card__WEBPACK_IMPORTED_MODULE_6__.renderTestCardTemplate)(collection, {
    vernacularName: vernacularName,
    binomial: binomial,
    question: questionTxt,
    help: help,
    term: ''
  });
  var template = document.createElement('template');
  template.innerHTML = config.isLandscapeMode ? (ui_screens_text_entry_text_entry_templates_html__WEBPACK_IMPORTED_MODULE_7___default()) : (ui_screens_text_entry_text_entry_portrait_templates_html__WEBPACK_IMPORTED_MODULE_8___default());
  (0,ui_helpers_templating__WEBPACK_IMPORTED_MODULE_2__.renderTemplate)({}, template.content, parent);
  var inputTxt = document.querySelector('.js-txt-input');
  var helpTxt = document.querySelector('.js-help-txt');

  switch (question.taxon) {
    case 'genus':
      inputTxt.setAttribute('placeholder', 'Enter genus name');
      helpTxt.innerHTML = "--- ".concat(question.species);
      break;

    case 'species':
      inputTxt.setAttribute('placeholder', 'Enter species name');
      helpTxt.innerHTML = "".concat(utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.capitaliseFirst(question.genus), " ---");
      break;

    case 'name':
      inputTxt.setAttribute('placeholder', 'Enter latin name');
      helpTxt.innerHTML = "--- ---";
      break;

    case 'vernacular':
      inputTxt.setAttribute('placeholder', 'Enter common name');
      helpTxt.innerHTML = "-----";
      break;
  }

  var boundScore = {};
  var answerBtn = document.querySelector('.js-check-answer');

  var callback = function callback(score, scoreUpdateTimer) {
    boundScore.scoreUpdateTimer = scoreUpdateTimer;
    boundScore.score = score;
  };

  var scoreEventHandler = function scoreEventHandler(e) {
    e.preventDefault();
    var input = document.querySelector('.js-txt-input');
    if (!input) return;
    var answer = input.value;
    var score = {
      itemId: item.id,
      question: question,
      answer: answer,
      target: e.target,
      layoutCount: lessonPlan.layouts.length,
      points: layout.points,
      names: item.vernacularNames,
      questionText: questionTxt,
      answers: [question.question, answer]
    };
    (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_3__.scoreHandler)('text', score, callback, config);
    if (answerBtn) answerBtn.disabled = true;
    document.querySelector('.js-continue-lesson-btn').disabled = false;
    if (helpTxt) helpTxt.innerHTML = question.taxon === 'vernacular' ? item.vernacularName : item.name;
  };

  var loseFocusMobileHandler = function loseFocusMobileHandler(e) {
    var input = document.querySelector('.js-txt-input');
    if (!input || input.value === '') return;
    var answer = input.value;
    var score = {
      itemId: item.id,
      question: question,
      answer: document.querySelector('.js-txt-input').value,
      target: e.target,
      layoutCount: lessonPlan.layouts.length,
      points: layout.points,
      names: item.vernacularNames,
      questionText: questionTxt,
      answers: [question.question, answer]
    };
    (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_3__.scoreHandler)('text', score, callback, config);
    document.querySelector('.js-continue-lesson-btn').disabled = false;
    document.removeEventListener('focusout', loseFocusMobileHandler);
  };

  if (config.isLandscapeMode) {
    answerBtn.addEventListener('click', scoreEventHandler, {
      once: true
    });
  } else {
    document.addEventListener('focusout', loseFocusMobileHandler);
  }

  if (config.isPortraitMode) renderPortrait(item, config);else renderLandscape(item, config, question);
  document.querySelector('.js-continue-lesson-btn').addEventListener('click', function (e) {
    window.clearTimeout(boundScore.scoreUpdateTimer);
    (0,ui_helpers_score_handler__WEBPACK_IMPORTED_MODULE_3__.bindScore)(boundScore.score);
  }, {
    once: true
  });

  if (config.isPortraitMode) {
    // hide attribution for now - space issue various across devices
    var attribution = document.querySelector('.js-attribution-layer');
    attribution.classList.add('hide-important');
    var indicators = document.querySelector('.js-carousel-indicators');
    indicators.classList.add('hide-important');
  }
};

var renderPortrait = function renderPortrait(item, config) {
  var images = (0,ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.prepImagesForCarousel)(item, config, ui_helpers_image_handler__WEBPACK_IMPORTED_MODULE_4__.imageUseCases.TEXT_ENTRY);
  var parent = document.querySelector('.js-test-card-container-images');
  (0,ui_screens_common_image_slider__WEBPACK_IMPORTED_MODULE_5__.imageSlider)({
    config: config,
    images: images,
    parent: parent
  });
};

var renderLandscape = function renderLandscape(item, config, question) {
  var answer = question[question.taxon];
  var pool;

  switch (question.taxon) {
    case 'vernacular':
      pool = item.vernacularName.toLowerCase();
      answer = question.common;
      break;

    case 'genus':
      pool = item.taxonomy.genus.toLowerCase();
      break;

    case 'species':
      pool = item.taxonomy.species.toLowerCase();
      break;

    case 'binomial':
    case 'name':
      pool = item.name.toLowerCase();
      answer = question.binomial;
      break;
  }

  var letterBlocks = '';
  utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.shuffleArray(Array.from(pool)).forEach(function (letter, index) {
    if (letter === ' ') letter = '&nbsp;';
    letterBlocks += "<span id=\"".concat(index, "\" class=\"block\">").concat(letter, "</span>");
  });
  document.querySelector('.js-pool-letters').innerHTML = letterBlocks;
  var input = document.querySelector('.js-txt-input');
  var letters = [];

  var deleteLetter = function deleteLetter(letter) {
    var value = document.querySelector('.js-txt-input').value;
    var activeBlocks = Array.from(document.querySelectorAll('.block.active'));
    var activeLetters = Array.from(value);
    var activeBlock = activeBlocks.find(function (block) {
      return block.innerText.trim() === activeLetters[activeLetters.length - 1].trim();
    });
    var lastLetter = letter || activeBlock;

    if (value.length > 0) {
      var indexInInput = value.lastIndexOf(lastLetter.innerHTML);
      var newValue = '';

      var _letters = Array.from(value);

      _letters.splice(indexInInput, 1);

      _letters.forEach(function (letter) {
        return newValue += letter;
      });

      input.value = newValue;
    }

    var correctBlocks = Array.from(document.querySelectorAll('.correct'));
    correctBlocks.forEach(function (b) {
      return b.classList.remove('correct');
    });
    correctBlocks.forEach(function (b) {
      return b.classList.add('active');
    });

    if (lastLetter) {
      lastLetter.classList.remove('active');
      letters.forEach(function (l) {
        if (l.id === lastLetter.id) {
          var letterIndex = letters.indexOf(l);
          if (letterIndex > -1) letters.splice(letterIndex, 1);
        }
      });
    }
  };

  var blocks = document.querySelectorAll('.block');
  blocks.forEach(function (block) {
    block.addEventListener('click', function (e) {
      e.preventDefault();
      var letter = e.target;

      if (letter.classList.contains('active')) {
        deleteLetter(letter);
      } else {
        letter.classList.add('active');
        letters.push(letter);
        if (letter.innerHTML === '&nbsp;') input.value += ' ';else input.value += letter.innerHTML;
      }

      if (input.value === answer.toLowerCase()) {
        blocks.forEach(function (block) {
          return block.classList.add('correct');
        });
      }
    });
  });
  document.querySelector('.js-delete-letter').addEventListener('click', function (e) {
    e.preventDefault();
    deleteLetter();
  });
  var keyboardBtn = document.querySelector('.js-toggle-keyboard');
  keyboardBtn.addEventListener('click', function (e) {
    e.preventDefault();
    var disabled = input.hasAttribute('disabled');

    if (disabled) {
      keyboardBtn.innerHTML = 'Enable letters';
      input.removeAttribute('disabled');
      input.focus();
    } else {
      keyboardBtn.innerHTML = 'Enable keyboard';
      input.setAttribute('disabled', 'disabled');
    }
  });
  setTimeout(function () {
    keyboardBtn.focus();
  }, 500);

  var blockArray = _toConsumableArray(blocks);

  var entries = [];
  var selectedBlock;
  input.addEventListener('input', function (e) {
    e.preventDefault();
    if (!e.data) return;
    var entry = e.data.toLowerCase();
    entry = entry === ' ' ? '&nbsp;' : entry;
    entries.push(entry);
    selectedBlock = blockArray.find(function (block) {
      return block.innerHTML === entry;
    });
    if (selectedBlock) selectedBlock.classList.add('active');

    if (input.value === answer.toLowerCase()) {
      blockArray.forEach(function (block) {
        return block.classList.add('correct');
      });
    }
  });
  input.addEventListener('keyup', function (e) {
    e.preventDefault();

    if (e.keyCode === 8) {
      // Backspace
      var entry = entries.pop();
      selectedBlock = blockArray.find(function (block) {
        return block.innerHTML === entry;
      });
      if (selectedBlock) selectedBlock.classList.remove('active');
    }
  });
};

/***/ }),

/***/ "Qml2":
/*!***********************************!*\
  !*** ./src/ui/setup/next-item.js ***!
  \***********************************/
/*! namespace exports */
/*! export nextItem [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "nextItem": () => /* binding */ nextItem
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/setup/setup-handler */ "tAV6");



var nextItem = function nextItem(layout) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      counter = _store$getState.counter,
      lessonPlan = _store$getState.lessonPlan,
      config = _store$getState.config,
      lesson = _store$getState.lesson,
      collection = _store$getState.collection,
      userAction = _store$getState.userAction;

  var args = {
    layout: layout,
    counter: counter,
    lessonPlan: lessonPlan,
    config: config,
    lesson: lesson,
    collection: collection,
    userAction: userAction
  };

  if (ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_2__.setupHandler.isRequired(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__.enums.nextStep.NEXT_ITEM, args)) {
    ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_2__.setupHandler.actionUpdate(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__.enums.nextStep.NEXT_ITEM, {
      layout: layout
    });
  }
};

/***/ }),

/***/ "982S":
/*!*************************************!*\
  !*** ./src/ui/setup/next-layout.js ***!
  \*************************************/
/*! namespace exports */
/*! export nextLayout [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "nextLayout": () => /* binding */ nextLayout
/* harmony export */ });
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/setup/setup-handler */ "tAV6");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}




var nextLayout = function nextLayout(counter) {
  var init = function init() {
    var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
        layout = _store$getState.layout,
        lessonPlan = _store$getState.lessonPlan,
        config = _store$getState.config,
        lesson = _store$getState.lesson,
        collection = _store$getState.collection,
        userAction = _store$getState.userAction;

    var args = {
      layout: layout,
      counter: counter,
      lessonPlan: lessonPlan,
      config: config,
      lesson: lesson,
      collection: collection,
      userAction: userAction
    };
    var isRequired = ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_2__.setupHandler.isRequired(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__.enums.nextStep.NEXT_LAYOUT, args);

    if (isRequired) {
      if (collection.nextItem) {
        var _nextLayout = _objectSpread(_objectSpread({}, lessonPlan.layouts[counter.index]), {}, {
          speciesName: collection.nextItem ? collection.nextItem.name : collection.items[0].name
        });

        ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_2__.setupHandler.actionUpdate(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_1__.enums.nextStep.NEXT_LAYOUT, {
          layout: _nextLayout,
          config: config
        });
      }
    }
  };

  init();
};

/***/ }),

/***/ "ygxW":
/*!*************************************!*\
  !*** ./src/ui/setup/next-lesson.js ***!
  \*************************************/
/*! namespace exports */
/*! export nextLesson [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "nextLesson": () => /* binding */ nextLesson
/* harmony export */ });
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ramda */ "kGug");
/* harmony import */ var redux_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/store */ "J8+u");
/* harmony import */ var snapdragon_engine_lesson_planner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! snapdragon-engine/lesson-planner */ "8r1n");
/* harmony import */ var snapdragon_config_lesson_plans__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapdragon-config/lesson-plans */ "UvhH");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ui/setup/setup-handler */ "tAV6");






var nextLesson = function nextLesson(counter) {
  var _store$getState = redux_store__WEBPACK_IMPORTED_MODULE_0__.store.getState(),
      layout = _store$getState.layout,
      config = _store$getState.config,
      lesson = _store$getState.lesson,
      collection = _store$getState.collection,
      userAction = _store$getState.userAction;

  var args = {
    layout: layout,
    counter: counter,
    config: config,
    lesson: lesson,
    collection: collection,
    userAction: userAction
  };

  if (ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_4__.setupHandler.isRequired(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.nextStep.NEXT_LESSON, args)) {
    var planId = config.isPortraitMode ? collection.lessonPlanPortrait : collection.lessonPlanLandscape;
    var lessonPlan = (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(snapdragon_config_lesson_plans__WEBPACK_IMPORTED_MODULE_2__.lessonPlans.find(function (plan) {
      return plan.id === planId && plan.portrait === config.isPortraitMode;
    }));
    args.lessonPlan = lessonPlan;

    if (ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_4__.setupHandler.isRequired(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.nextStep.NEXT_ROUND, args)) {
      // asyncFunc will return collection, lessonPlan and lesson
      var asyncFunc = snapdragon_engine_lesson_planner__WEBPACK_IMPORTED_MODULE_1__.lessonPlanner.createLessonPlan(lessonPlan, config, (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(collection), (0,ramda__WEBPACK_IMPORTED_MODULE_5__.default)(lesson)).then(function (props) {
        if (!props) return;
        return {
          lessonPlan: props.updatedLessonPlan,
          collection: props.updatedCollection,
          lesson: props.updatedLesson
        };
      });
      if (asyncFunc === null) return;
      ui_setup_setup_handler__WEBPACK_IMPORTED_MODULE_4__.setupHandler.actionUpdate(ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_3__.enums.nextStep.NEXT_LESSON, {
        config: config,
        asyncFunc: asyncFunc
      });
    }
  }
};

/***/ }),

/***/ "tAV6":
/*!***************************************!*\
  !*** ./src/ui/setup/setup-handler.js ***!
  \***************************************/
/*! namespace exports */
/*! export setupHandler [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setupHandler": () => /* binding */ setupHandler
/* harmony export */ });
/* harmony import */ var redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux/subscriptions */ "6saE");
/* harmony import */ var redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/actions/action-creators */ "/CNf");
/* harmony import */ var ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ui/helpers/enum-helper */ "DXx0");
/* harmony import */ var ui_helpers_function_lookups__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ui/helpers/function-lookups */ "q0Zq");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}






var isRequired = function isRequired(step, args) {
  var layout = args.layout,
      counter = args.counter,
      lessonPlan = args.lessonPlan,
      config = args.config,
      lesson = args.lesson,
      collection = args.collection,
      userAction = args.userAction;
  var required = false;

  if (userAction === undefined || !!userAction && userAction.name === ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.userEvent.START_LESSON_REVIEW.name) {
    // snapLog('userAction', userAction);
    switch (step) {
      case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.nextStep.NEXT_ITEM:
        required = layout && !layout.bonus;
        break;

      case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.nextStep.NEXT_LAYOUT:
        if (counter.isLessonPaused) {
          required = false;
        } else {
          required = lessonPlan && lessonPlan.layouts;
          required = required && lessonPlan.layouts[counter.index] !== null;
        }

        break;

      case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.nextStep.NEXT_LESSON:
        required = config.collection.id > 0 && !counter.isLessonPaused || // new lesson
        config.collection.id > 0 && config.collection.id !== collection.id; // new lesson from new collection

        break;

      case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.nextStep.NEXT_ROUND:
        required = counter.index === 0 && lesson.isNextRound && collection.items && collection.items.length > 0;
        break;
    }
  }

  return required;
};

var actionUpdate = function actionUpdate(step, args) {
  var layout = args.layout,
      config = args.config,
      asyncFunc = args.asyncFunc;

  switch (step) {
    case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.nextStep.NEXT_ITEM:
      redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__.actions.boundNextItem(layout.itemIndex);
      break;

    case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.nextStep.NEXT_LAYOUT:
      redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__.actions.boundNextLayout(layout);
      redux_subscriptions__WEBPACK_IMPORTED_MODULE_0__.subscription.addSubs(layout, config, ui_helpers_function_lookups__WEBPACK_IMPORTED_MODULE_3__.funcByName);
      Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ui/screens/lists/lesson-state-handler */ "MC3F")).then(function (module) {
        module.lessonStateHandler.changeRequest({
          requestType: ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.lessonState.SAVE_LESSON_PROGRESS
        });
      });
      break;

    case ui_helpers_enum_helper__WEBPACK_IMPORTED_MODULE_2__.enums.nextStep.NEXT_LESSON:
      // if(config.isPortraitMode) {
      var awaitPromise = /*#__PURE__*/function () {
        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
          var response;
          return regeneratorRuntime.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return asyncFunc;

                case 2:
                  response = _context.sent;
                  redux_actions_action_creators__WEBPACK_IMPORTED_MODULE_1__.actions.boundNextLesson(response);

                case 4:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));

        return function awaitPromise() {
          return _ref.apply(this, arguments);
        };
      }();

      awaitPromise(); // } else {
      //   actions.boundAsyncNextLesson(asyncFunc);
      // }

      break;
  }
};

var setupHandler = {
  isRequired: isRequired,
  actionUpdate: actionUpdate
};

/***/ }),

/***/ "kHXf":
/*!*************************************!*\
  !*** ./src/wikipedia/wiki-modal.js ***!
  \*************************************/
/*! namespace exports */
/*! export renderWikiModal [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderWikiModal": () => /* binding */ renderWikiModal
/* harmony export */ });
var renderWikiModal = function renderWikiModal(item, wikiLink, config) {
  if (wikiLink) {
    wikiLink.addEventListener('click', function (event) {
      document.querySelector('.js-external-page-title').innerHTML = "".concat(item.name);
      var entry = document.querySelector('.species-card-wiki-entry').innerText;
      var style = "\n                <style type='text/css'>\n                body {\n                    font-family: PT Sans', 'Roboto', arial,sans-serif;\n                }\n                a {\n                    text-decoration: none;\n                    border: solid 1px;\n                    border-top: none;\n                    border-left: none;\n                    border-right: none;\n                    color: black;\n                    cursor: pointer;\n                }\n            </style>";
      var wiki = "<header>".concat(style, "</header><p>").concat(entry, "</p><p><a href='https://en.wikipedia.org/wiki/Salvia_officinalis' target='_blank'>Wikipedia page</a></p>");
      document.querySelector('.js-external-page-body').innerHTML = config.isPortraitMode ? "<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ".concat(item.name, "\" src=\"data:text/html,").concat(wiki, "\"></iframe>") : "<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ".concat(item.name, "\" src=\"").concat(wikiLink.querySelector('span').dataset.src, "\"></iframe>");
      document.querySelector('#wikiModal').focus();
    });
  }
};

/***/ }),

/***/ "nCaV":
/*!*******************************!*\
  !*** ./src/wikipedia/wiki.js ***!
  \*******************************/
/*! namespace exports */
/*! export formatUrl [provided] [unused] [could be renamed] */
/*! export formatWiki [provided] [unused] [could be renamed] */
/*! export renderWiki [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "renderWiki": () => /* binding */ renderWiki
/* harmony export */ });
/* unused harmony exports formatUrl, formatWiki */
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ramda */ "NjoR");
/* harmony import */ var ramda__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ramda */ "pWpQ");
/* harmony import */ var utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/utils */ "EHpu");
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}



var root = '';

var formatUrl = function formatUrl(name, root, encode) {
  var binomial = name;

  if (name.indexOf(' ') > 0) {
    var ranks = name.split(' ');
    binomial = ranks[0] + ' ' + ranks[1];

    if (binomial.indexOf('Speckled wood') > -1) {
      binomial += ' ' + ranks[2];
    }
  }

  return root + encode(binomial);
};

function fetchWiki(_x, _x2) {
  return _fetchWiki.apply(this, arguments);
}

function _fetchWiki() {
  _fetchWiki = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(name, missingMessage) {
    var url, config, response, data, errorPromise;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!(name === undefined)) {
              _context.next = 2;
              break;
            }

            return _context.abrupt("return", missingMessage);

          case 2:
            url = formatUrl(name, root, utils_utils__WEBPACK_IMPORTED_MODULE_0__.utils.encodeQuery);
            config = {
              method: 'GET'
            };
            _context.prev = 4;
            _context.next = 7;
            return fetch(url, config);

          case 7:
            response = _context.sent;
            _context.next = 10;
            return response.json();

          case 10:
            data = _context.sent;
            return _context.abrupt("return", (0,ramda__WEBPACK_IMPORTED_MODULE_1__.default)(data));

          case 14:
            _context.prev = 14;
            _context.t0 = _context["catch"](4);
            errorPromise = new Promise(function (resolve, reject) {
              resolve(missingMessage);
            });
            return _context.abrupt("return", errorPromise);

          case 18:
          case "end":
            return _context.stop();
        }
      }
    }, _callee, this, [[4, 14]]);
  }));
  return _fetchWiki.apply(this, arguments);
}

;

var cleanEntry = function cleanEntry(str) {
  var cleaned = str;
  cleaned = cleaned.replace('( or UK: , US: )', '');
  cleaned = cleaned.replace('(;', '(');
  cleaned = cleaned.replace('()', '');
  cleaned = cleaned.replace('( ', '(');
  cleaned = cleaned.replace('  ', ' ');
  return cleaned;
};

var wikiLink = function wikiLink(entry) {
  var src = cleanEntry(entry).replace('.wikipedia', '.m.wikipedia');
  return "<span data-toggle=\"modal\" data-target=\"#wikiModal\" data-src=\"".concat(src, "\" class=\"underline-link\">Wiki modal</span>");
};

var formatWiki = function formatWiki(entry) {
  var exceptions = ['Tarragon', 'Apple'];

  if ((0,ramda__WEBPACK_IMPORTED_MODULE_2__.default)(entry[0], exceptions)) {
    return "<li class=\"species-card-wiki-entry\">'".concat(cleanEntry(entry[2]), "'</li>");
  }

  if (!entry) return '';
  var html = '';

  if (entry.length === 1) {
    html += wikiLink(entry[0]);
  }

  if (entry[1]) html += "<li class=\"species-card-wiki-entry\">'".concat(cleanEntry(entry[1]), "'</li>");
  if (entry[2]) if (entry[2].indexOf('https') !== -1) html += wikiLink(entry[2]);else html += "<li class=\"species-card-wiki-entry\">'".concat(cleanEntry(entry[2]), "'</li>");
  if (entry[3]) if (entry[3].indexOf('https') !== -1) html += wikiLink(entry[3]);else html += "<li class=\"species-card-wiki-entry\">'".concat(cleanEntry(entry[3]), "'</li>");
  return html;
};

function renderWiki(_x3, _x4, _x5) {
  return _renderWiki.apply(this, arguments);
}

function _renderWiki() {
  _renderWiki = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(wikiNode, item, language) {
    var binomial, wikiSearchTerm, searchTerm, exceptions, entry, genus, genusEntry;
    return regeneratorRuntime.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            binomial = item.name;
            wikiSearchTerm = item.names ? item.names.filter(function (name) {
              return name.language === language;
            }).find(function (name) {
              return name.wikiSearchTerm;
            }) : null;
            searchTerm = wikiSearchTerm ? wikiSearchTerm.vernacularName : item.searchTerms ? item.searchTerms.filter(function (term) {
              return term.language === language;
            })[0].searchTerm : binomial;
            root = "https://".concat(language, ".m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=1&search=");
            exceptions = ['Artemisia dracunculus', 'Malus domestica', 'Zingiber officinale'];

            if ((0,ramda__WEBPACK_IMPORTED_MODULE_2__.default)(item.name, exceptions)) {
              root = "https://".concat(language, ".m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=2&redirects=resolve&search=");
            }

            wikiNode.innerHTML = "";
            _context2.next = 9;
            return fetchWiki(searchTerm);

          case 9:
            entry = _context2.sent;

            if (!(entry && entry[2])) {
              _context2.next = 14;
              break;
            }

            wikiNode.innerHTML = formatWiki(entry.slice(1));
            _context2.next = 21;
            break;

          case 14:
            if (binomial) {
              _context2.next = 16;
              break;
            }

            return _context2.abrupt("return", '');

          case 16:
            genus = binomial.split(' ')[0];
            _context2.next = 19;
            return fetchWiki(genus);

          case 19:
            genusEntry = _context2.sent;
            if (genusEntry[2] !== '') wikiNode.innerHTML = formatWiki(genusEntry.slice(1));else if (language !== 'en') {
              renderWiki(wikiNode, binomial, 'en');
            }

          case 21:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2, this);
  }));
  return _renderWiki.apply(this, arguments);
}



/***/ }),

/***/ "b58l":
/*!************************************!*\
  !*** ./src/xeno-canto/birdsong.js ***!
  \************************************/
/*! namespace exports */
/*! export getBirdSong [provided] [used] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements: __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getBirdSong": () => /* binding */ getBirdSong
/* harmony export */ });
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

var getBirdSong = function getBirdSong(item, node, portrait) {
  if (item.taxonomy["class"].toUpperCase() === 'AVES') {
    var fetchAsync = /*#__PURE__*/function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(endpoint) {
        var response, data;
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return fetch(endpoint);

              case 2:
                response = _context.sent;
                _context.next = 5;
                return response.json();

              case 5:
                data = _context.sent;
                return _context.abrupt("return", data);

              case 7:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      return function fetchAsync(_x) {
        return _ref.apply(this, arguments);
      };
    }();

    var endpoint = "https://cors-anywhere.herokuapp.com/http://www.xeno-canto.org/api/2/recordings?query=".concat(item.name, " q:A");

    var loadPlayer = function loadPlayer(id) {
      var url = "https://www.xeno-canto.org/".concat(id, "/embed?simple=1");
      portrait ? node.dataset.src = url : node.src = url;

      if (portrait) {
        node.classList.remove('bird-song-icon-disabled');
        node.classList.add('bird-song-icon');
      } else {
        node.parentElement.classList.add('bird-song-spacing');
      }
    };

    var playerId = item.traits.song.value[0];

    if (playerId) {
      loadPlayer(playerId);
    } else {
      fetchAsync(endpoint).then(function (data) {
        var recording = data.recordings[0];
        loadPlayer(recording.id);
      });
    }
  } else {
    node.style.display = 'none';
    document.querySelector('.bird-song').style.display = 'none';
  }
};

/***/ }),

/***/ "m72O":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/ui/css/groups/create-guide.css ***!
  \*************************************************************************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: __webpack_exports__, module, __webpack_require__, module.id */
/***/ ((module, exports, __webpack_require__) => {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "QjQd");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.id, "#createGuide .modal-dialog {\n  max-width: 600px;\n  margin: auto; }\n\n.step-action-content {\n  padding: 0 .5rem;\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock) - .5rem); }\n\n.species-picker-link {\n  font-size: .8rem !important;\n  font-style: initial; }\n\n.modal-guide-progress > div {\n  display: flex;\n  align-items: center;\n  padding: .5rem;\n  height: inherit; }\n\n.modal-subheader {\n  font-size: 1.1em; }\n\n.modal-guide-progress .steps {\n  text-transform: uppercase; }\n\n.modal-body .modal-guide-progress > div div {\n  flex: 1;\n  text-align: center;\n  padding: .5rem 0; }\n\n.modal-body .modal-guide-progress > div > div {\n  border-right: 0.005rem solid var(--snap-border-lightest); }\n\n.modal-body .modal-guide-progress > div > div:last-child {\n  border-right: none; }\n\n.modal-body .modal-guide-progress .active {\n  color: var(--snap-text-dark);\n  background-color: var(--snap-active); }\n\n.modal-guide-navigation {\n  display: grid;\n  grid-template-columns: 4fr auto 4fr;\n  margin: 0 .5rem;\n  height: var(--vhRunningBlock, 10vh);\n  border: 1px solid var(--snap-border-light); }\n\n.modal-guide-navigation > button {\n  display: flex;\n  align-items: center; }\n\n.modal-guide-navigation > button > span, .modal-guide-navigation > button svg {\n  pointer-events: none; }\n\n.custom-lesson-menu-options .snap-icon-btn:hover, .modal-guide-navigation .snap-icon-btn:hover {\n  color: var(--snap-collection-active); }\n\n.right-justify {\n  justify-content: flex-end; }\n\n.arrow-wrapper {\n  padding: 0 .5rem;\n  font-size: 1.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end; }\n\n.arrow-wrapper-hidden > span {\n  display: none; }\n\n.arrow-wrapper svg {\n  pointer-events: initial;\n  cursor: pointer; }\n\n.modal-guide-wrapper .modal-body .location .current {\n  display: flex;\n  align-items: center;\n  margin: 1rem 0; }\n\n#set-inat-location-btn {\n  width: 100%; }\n\n.species-picker-container {\n  position: relative; }\n\n.species-picker-container > div {\n  position: absolute;\n  top: -5rem;\n  width: 100%;\n  display: flex; }\n\n.chosen-guide-filter {\n  display: flex;\n  align-items: center; }\n\n.chosen {\n  position: absolute;\n  left: .5rem;\n  right: .5rem;\n  bottom: calc(var(--vhStandardBlock));\n  height: var(--vhHalfStandardBlock, 5vh); }\n\n.chosen > div span:nth-child(2) > span {\n  margin: 0 .25rem; }\n\n.save-your-changes {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  bottom: 1.5rem;\n  width: 100%; }\n\n.modal-body .save-your-changes button {\n  margin: 0 1rem 0 0; }\n\n.modal-body .inat-location-location button {\n  width: 100%;\n  background-color: var(--snap-text-medium-dark); }\n\n.html5-location-place {\n  width: 100%; }\n\n#set-inat-identity-btn {\n  color: var(--snap-text-light);\n  background-color: #7f977a;\n  width: 100%; }\n\n.modal-guide-wrapper .modal-body .inat button.js-set-inat-identity-btn {\n  color: var(--snap-text-light);\n  background-color: #7f977a; }\n\n#inat-place, #input-species, #inat-identity {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  width: 100%; }\n\n#inat-place::placeholder {\n  display: inline; }\n\n.inat.snap-switch .inat-entry, .inat.snap-switch input[type=\"text\"] {\n  width: 100%;\n  margin: 0;\n  padding: 0; }\n\n/* SLIDER */\n.modal-guide-body .range-slider {\n  font-size: .9em;\n  height: var(--vhStandardBlock);\n  display: flex;\n  flex-direction: column;\n  align-items: normal;\n  justify-content: space-evenly; }\n\n.modal-guide-body .range-slider > div:nth-child(2) {\n  display: flex; }\n\n.range-limits {\n  display: none; }\n\n.modal-guide-body .set-range-input {\n  cursor: pointer;\n  width: 100%;\n  margin: 0 .25rem; }\n\n.set-range-input:focus {\n  outline: 1px solid var(--snap-border-medium); }\n\n.modal-guide-body .range-slider.disabled .set-range-input {\n  pointer-events: none; }\n\n/* SNAPDRAGON SWITCH */\n.snap-switch {\n  display: flex;\n  align-items: center; }\n\n.snap-switch-slider {\n  cursor: pointer;\n  background-color: #c5cbcc; }\n\n.snap-switch-slider div {\n  height: 1.6rem;\n  width: 1.6rem;\n  border-radius: .2rem;\n  background-color: var(--snap-collection);\n  transition-property: all;\n  transition-duration: .4s;\n  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);\n  transition-delay: 0s;\n  position: absolute; }\n\n.inat .snap-switch-slider div {\n  background-color: var(--snap-inat); }\n\n.embedded-switch {\n  display: grid;\n  grid-template-columns: auto 3.2rem 1fr;\n  height: 1.6rem; }\n\n.snap-switch-slider.left div {\n  transform: translateX(0); }\n\n.snap-switch .txt-left {\n  align-self: center;\n  padding: 0 .5rem 0 0;\n  font-size: .9em; }\n\n.snap-switch .txt-right {\n  align-self: center;\n  padding: 0 0 0 .5rem; }\n\n.snap-switch-slider.right div {\n  transform: translateX(1.6rem); }\n\n.guides .inat .snap-switch {\n  flex-direction: column; }\n\n/* AUTOCOMPLETE */\n#inat-place.active, #input-species.active {\n  border: 0.1rem solid var(--snap-text-medium-dark); }\n\n.autocomplete-options-container, .inat-autocomplete-options-container {\n  z-index: 9999;\n  color: var(--snap-text-dark-medium-dark);\n  background-color: #fafafa;\n  border: 0.05rem solid var(--snap-border-lightest);\n  text-align: left;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  top: calc( var(--vhRunningBlock, 7.5vh) +  5px + var(--vhStandardBlock, 10vh) + var(--vhRunningBlock, 7.5vh)        + .25rem) !important;\n  left: .5rem;\n  right: .5rem; }\n\n.autocomplete-options-container.autocomplete {\n  height: 10rem !important; }\n\n.inat-autocomplete-options-container {\n  top: calc( var(--vhRunningBlock, 7.5vh) +  5px + var(--vhStandardBlock, 10vh) + var(--vhRunningBlock, 7.5vh) + var(--vhStandardBlock, 10vh) + .5rem) !important; }\n\n.autocomplete-options-container > div, .inat-autocomplete-options-container > div {\n  padding: .25rem; }\n\n.autocomplete-options-container .selected, .inat-autocomplete-options-container .selected {\n  color: var(--snap-dd-non-taxa-bg-hover);\n  background-color: var(--snap-text-medium-dark); }\n\n.inat-autocomplete-options-container .selected {\n  background-color: var(--snap-inat); }\n\n.autocomplete-options-container .selected {\n  color: var(--snap-dd-non-taxa-bg-hover);\n  background-color: var(--snap-text-medium-dark); }\n\n.autocomplete-options-container > div:hover:not(.group) {\n  color: var(--snap-dd-non-taxa-bg-hover);\n  background-color: var(--snap-text-medium-dark-hover);\n  cursor: pointer; }\n\n.autocomplete-options-container > div.selected {\n  color: var(--snap-dd-non-taxa-bg-hover);\n  background-color: var(--snap-text-medium-dark);\n  cursor: pointer; }\n\n#place span {\n  margin: 0 .25rem 0 0; }\n\n/* CATEGORIES */\n.iconic-taxa-categories {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh) - var(--vhHalfStandardBlock));\n  padding: 0 1rem 1rem 1rem; }\n\n.iconic-taxa-categories > div > div {\n  cursor: pointer; }\n\n/* Icon categories list, icon container and size */\n.iconic-taxa-categories > div > div > div:nth-child(1), .iconic-taxa-categories button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer; }\n\n.iconic-taxa-categories > div > div > div:nth-child(1) svg {\n  color: var(--snap-collection); }\n\n.iconic-taxa-categories g {\n  fill: var(--snap-collection); }\n\n.iconic-taxa-categories svg {\n  font-size: 1rem;\n  color: var(--snap-collection); }\n\n.iconic-taxa-selected svg {\n  color: var(--snap-collection-active) !important; }\n\n.iconic-taxa-selected svg g {\n  fill: var(--snap-collection-active) !important; }\n\n.prop-value-block {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n\n.prop-value-block > span:nth-child(2) {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  width: inherit;\n  /* font-size: 1.1rem; */ }\n\n/* Mushroom icon sizes */\n.iconic-taxa-categories svg, .iconic-taxa-categories-selected svg {\n  width: 1rem;\n  height: 1rem;\n  font-size: 1rem; }\n\n.selected-text svg, .selected-text i, .iconic-taxa-selected svg {\n  color: var(--snap-collection-active); }\n\n.lesson-taxa .iconic-taxa-categories-selected svg g {\n  fill: var(--snap-text-medium-dark); }\n\n.iconic-taxa-categories-selected svg {\n  vertical-align: -.125em; }\n\n.lesson-taxa .iconic-taxa-categories-selected svg {\n  width: 1rem;\n  height: 1rem; }\n\n/* .home-guide .iconic-taxa-categories-selected svg {\n    width: 2rem;\n    height: 2rem;\n  } */\n.iconic-taxa-categories-selected svg g {\n  fill: var(--snap-collection-active); }\n\n.svg-icon {\n  margin: 0.25rem 0 0; }\n\n.svg-icon-selected {\n  fill: var(--snap-success);\n  color: var(--snap-success); }\n\n/* EXAMPLE LESSONS INC. RB LIST */\n.btn.btn-secondary {\n  flex-direction: row;\n  align-items: center; }\n\n.lesson-taxa {\n  overflow-wrap: break-word;\n  white-space: initial;\n  font-size: .8em; }\n\n.locations .btn.btn-secondary > * {\n  pointer-events: all; }\n\n.non-taxon .btn.btn-secondary input {\n  pointer-events: none; }\n\n.lesson-name {\n  line-height: initial !important;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  height: 1.5rem;\n  display: flex;\n  align-items: center;\n  font-size: .8rem;\n  color: var(--snap-text-black); }\n\n.lesson-name .underline-link {\n  text-transform: initial;\n  font-size: .8rem; }\n\n.lesson-name input {\n  pointer-events: initial; }\n\n.lesson-taxa span:nth-child(1) {\n  margin: 0 .15rem 0 0; }\n\n.btn.btn-secondary.active .lesson-taxa .iconic-taxa-categories-selected svg g {\n  fill: white; }\n\n#confirm-lesson-btn {\n  margin: 1.5rem 0;\n  width: 9rem;\n  background-color: var(--snap-text-medium-dark); }\n\n.lesson-radio-button {\n  margin-right: .5rem; }\n\n/* PORTRAIT & LANDSCAPE EXAMPLE GUIDE */\n.btn.btn-secondary {\n  width: 100%; }\n\n.start-lesson-wrapper.disabled {\n  pointer-events: none; }\n\n.modal-guide-progress {\n  cursor: pointer; }\n\n.modal-guide-progress span {\n  pointer-events: none; }\n\n.location-checkbox {\n  line-height: 3rem; }\n\n.guide-bottom-actions {\n  display: flex;\n  position: absolute; }\n\n.guide-bottom-actions span:nth-child(1) {\n  font-size: .8rem; }\n\n.guide-bottom-actions span:nth-child(2) {\n  margin-left: .25rem; }\n\n.location-option > div {\n  width: 100%; }\n\n.location-option.inat-entry {\n  position: relative; }\n\n.location-option.or-options {\n  text-align: center;\n  font-style: italic; }\n\n.location-option.range {\n  border: none; }\n\n.location-option button {\n  width: 100%; }\n\n.location-option:nth-child(3) > div:nth-child(2) {\n  flex: auto;\n  position: relative; }\n\n#googleLogo {\n  width: auto;\n  height: 1rem; }\n\n.location-actions {\n  height: 100%; }\n\n.location-actions .actions {\n  display: grid;\n  grid-template-rows: 1fr 2rem 1fr;\n  height: 100%; }\n\n.species-picker-actions {\n  height: initial; }\n\n.filter-option {\n  color: black; }\n\n.taxa-actions .actions {\n  grid-template-rows: 1fr; }\n\n.filter-actions .actions {\n  grid-template-rows: auto; }\n\n.filter-actions .actions {\n  justify-content: space-between; }\n\n.filter-actions + div {\n  display: none !important; }\n\n.filter-language-option-block {\n  width: 100%; }\n\n.filter-language-option-block span {\n  text-transform: uppercase;\n  margin-left: .15rem; }\n\n.custom-lesson-menu-options {\n  display: flex;\n  flex-direction: column;\n  pointer-events: initial;\n  cursor: pointer; }\n\n.custom-lesson-menu-options li {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border: 1px solid var(--snap-border-light); }\n\n.custom-lesson-menu-options li span {\n  padding: .5rem; }\n\n.species-actions + div {\n  display: none !important; }\n\n.request-feedback .edit-species {\n  margin: .5rem;\n  height: var(--vhHalfStandardBlock, 10vh); }\n\n.request-feedback .lesson-list-item {\n  padding: .5rem;\n  background-color: var(--snap-lesson-row-green);\n  pointer-events: all;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly; }\n\n.request-feedback .lesson-list-item {\n  line-height: initial !important; }\n\n.request-feedback .lesson-name {\n  line-height: initial; }\n\n.selected-species-container {\n  position: relative; }\n\n.selected-species-container > div.scrollable {\n  height: 0;\n  margin: .5rem; }\n\n.selected-species-container > div.scrollable.open {\n  height: calc( (var(--vh, 1vh) * 100)  - var(--vhFixtures, 15vh)  - var(--vhStandardBlock,10vh) - var(--vhOneHalfStandardBlock,20vh) - var(--vhHalfStandardBlock,5vh) - var(--vhRunningBlock) - .5px);\n  top: .5rem; }\n\n.selected-species {\n  margin: 1rem; }\n\n.selected-species-container ul {\n  columns: 2 200px;\n  column-gap: 2rem; }\n\n#locationForm, #inatForm {\n  width: 100%; }\n\n@media (min-height: 640px) {\n  .modal-guide-wrapper .modal-body .modal-guide-navigation > div:nth-child(1) > div svg {\n    font-size: 2rem; } }\n\n@media (min-height: 667px) {\n  .iconic-taxa-categories svg, .iconic-taxa-categories svg {\n    font-size: 1.6rem;\n    height: 1.6rem; }\n  .taxa-actions svg-icon.si-glyph-mushrooms svg {\n    height: 2rem; } }\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "lfAW":
/*!*****************************************************!*\
  !*** ./src/img/powered_by_google_on_white_hdpi.png ***!
  \*****************************************************/
/*! namespace exports */
/*! export default [provided] [unused] [could be renamed] */
/*! other exports [not provided] [unused] */
/*! runtime requirements:  */
/***/ (() => {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = ("img/powered_by_google_on_white_hdpi.png");

/***/ }),

/***/ "/ZXf":
/*!************************************************************!*\
  !*** ./src/ui/create-guide-modal/categories-template.html ***!
  \************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"iconic-taxa-categories js-iconic-taxa-categories\">\n    <div class=\"double-centred-block\" id=\"aves\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"birds\"><i class=\"fas fa-dove\" aria-hidden=\"true\"></i></button>\n      <div>Birds</div></div>\n    </div>\n    <div class=\"double-centred-block\" id=\"amphibia\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"amphibians\"><i class=\"fas fa-frog\" aria-hidden=\"true\"></i></button>\n      <div>Amphibians</div></div>\n    </div>\n    <div class=\"double-centred-block\" id=\"mammalia\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"mammals\"><i class=\"fas fa-paw\" aria-hidden=\"true\"></i></button>\n      <div>Mammals</div></div>\n    </div>\n    <div class=\"double-centred-block\" id=\"insecta\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"insects\"><i class=\"fas fa-bug\" aria-hidden=\"true\"></i></button>\n      <div>Insects</div></div>\n    </div>\n    <div class=\"double-centred-block\" id=\"fungi\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"fungi and lichens\"><svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg></button>\n        <div class=\"small-text\">Fungi & Lichens</div></div>\n      </div>\n    <div class=\"double-centred-block\" id=\"plantae\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"plants\"><i class=\"fas fa-leaf\" aria-hidden=\"true\"></i></button>\n      <div>Plants</div></div>\n    </div>    \n    <div class=\"double-centred-block\" id=\"reptilia\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"reptiles\"><i class=\"far fa-registered\" aria-hidden=\"true\"></i></button>\n      <div>Reptiles</div></div>\n    </div>\n    <div class=\"double-centred-block\" id=\"lepidoptera\"><div>\n      <button class=\"snap-icon-btn\" aria-label=\"butterflies and moths\"><i class=\"fas fa-barcode\" aria-hidden=\"true\"></i></button>\n      <div class=\"small-text\">Butterflies & Moths</div></div>\n    </div>\n</div>\n<div class=\"hide-important guide-bottom-actions\">\n    <span>Know what you want?</span>\n    <span class=\"underline-link species-picker-link js-species-picker-link\">Species picker</span>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "9W8N":
/*!****************************************************************!*\
  !*** ./src/ui/create-guide-modal/common/actions-template.html ***!
  \****************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"{{ className }}\">\n    <div class=\"actions js-actions\"></div>\n    <div class=\"save-your-changes js-save-your-changes\"></div>\n</div>\n<div class=\"chosen js-chosen\">\n    <div class=\"prop-value-block\"><span></span><span class=\"selected-text\"></span></div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "xCCR":
/*!***********************************************************!*\
  !*** ./src/ui/create-guide-modal/inat-user-template.html ***!
  \***********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div>\n    <div class=\"inat snap-switch running-block\">\n        <div class=\"embedded-switch\">\n            <div class=\"txt-left\"><span>iNaturalist User</span></div>\n            <div class=\"snap-switch-slider left js-snap-switch-slider\">\n                <div></div>\n            </div>\n            <div class=\"txt-right\"><span>Project</span></div>        \n        </div>\n    </div>\n\n    <div class=\"location-option inat-entry\">\n        <div class=\"input-container standard-block bottom-aligned\">\n            <form id=\"inatForm\" action=\"#\">\n                <input id=\"inat-identity\" type=\"text\" placeholder=\"Start typing a user or project Id.\">\n            </form>\n        </div>\n    </div>\n\n    <div class=\"location-option chosen-guide-filter js-chosen-inat standard-block\">\n        <div>Learn more about <a href=\"https://www.inaturalist.org/\" target=\"_blank\" class=\"underline-link\">iNaturalist</a>.</div>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "K6WX":
/*!*******************************************************************!*\
  !*** ./src/ui/create-guide-modal/initialise-lesson-template.html ***!
  \*******************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div>\n    <div class=\"species-search js-species-search\">\n        <div><div class=\"icon\"><i class=\"fas fa-sun slow-spin\"></i></div></div>\n        <h2 class=\"standard-block\">This search is based on observations recorded by the public on <a class=\"underline-link\" target=\"_blank\" href=\"https://www.inaturalist.org/\">iNaturalist</a>.</h2>\n    </div>\n    <div>\n        <div class=\"hide-empty request-feedback js-request-feedback\">Contacting iNaturalist…</div>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "6q12":
/*!**********************************************************!*\
  !*** ./src/ui/create-guide-modal/location-template.html ***!
  \**********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"border-bottom\">\n    <div class=\"running-block vertical-centred-block location-option html5-location\">\n        <div class=\"html5-location-place\"><button class=\"btn snap-action-btn js-set-location-btn\"></button><span class=\"landscape\"></span></div>\n    </div>\n    <div class=\"standard-block location-option place bottom-aligned\">\n        <form id=\"locationForm\" action=\"#\">\n          <div class=\"standard-block\">\n            <label for=\"#inat-place\" class=\"extra-small-text\">Location</label>\n            <input id=\"inat-place\" type=\"text\" placeholder=\"Or start typing the name of a place.\">\n            <input class=\"hide\" type=\"submit\" value=\"\">\n          </div>\n        </form>\n    </div>\n    <div class=\"location-option margin-top range\">\n        <div class=\"range-slider\">\n            <div class=\"js-range\"></div>\n            <div>\n              <span class=\"range-limits\">0km</span>\n              <span class=\"margin-right\" style=\"width: 100%;\"><input class=\"set-range-input js-set-range-input\" type=\"range\" min=\"0\" max=\"250\" value=\"10\"></span>\n              <span class=\"range-limits\"> 250km</span>\n              <span class=\"saved js-range-saved\"></span>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"location-filter-options\">            \n    <div>\n      <div class=\"black-text\">Species by season</div>\n      <div class=\"season snap-switch margin-top margin-bottom\">\n          <div class=\"embedded-switch\">\n              <div class=\"txt-left\"><span>{{ observableMonths }}</span></div>\n              <div class=\"snap-switch-slider left js-snap-switch-slider\">\n                  <div></div>\n              </div>\n              <div class=\"txt-right\"><span>All Year</span></div>\n          </div>\n      </div>  \n    </div>\n    <div>\n      <div class=\"black-text\">Species by observation count</div>\n      <div class=\"margin-top margin-bottom\">\n        <span>\n          Top <input min=\"1\" max=\"500\" required class=\"medium half-margin-right js-location-no-of-records\" type=\"number\" value=\"{{ noOfRecords }}\"> most observed.\n        </span>\n      </div>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "7qcS":
/*!************************************************************************!*\
  !*** ./src/ui/create-guide-modal/species-search-options-template.html ***!
  \************************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<menu>\n  <ul class=\"custom-lesson-menu-options\" data-repeat-option=\"{{ options }}\">\n    <li data-option=\"{{ option.id }}\">\n        <button class=\"icon snap-icon-btn arrow-wrapper\"><span class=\"small-text\">{{ option.text }}</span><i class=\"far fa-arrow-alt-circle-right\"></i></button>\n    </li>\n  </ul>\n</menu>\n\n<!-- <hr class=\"double-margin-top double-margin-bottom\"> -->\n\n<div class=\"js-language-selection-container\"></div>\n\n<h3 class=\"standard-block centred-block js-persistence-warning\">\n    <span><i class=\"fas fa-exclamation\"></i> You are not currently logged in. Your collection will not be availble outside this browser.</span>\n</h3>";
// Exports
module.exports = code;

/***/ }),

/***/ "N4cl":
/*!*****************************************************************!*\
  !*** ./src/ui/create-guide-modal/species-summary-template.html ***!
  \*****************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"lesson-list-item one-and-half-standard-block double-centred-block\">\n    <!-- <div class=\"lesson-name\" id=\"js-collection-name\">\n        <span>{{ collection.name }}</span>\n    </div> -->\n    <div class=\"lesson-name hide-important\" id=\"js-input-collection-name\">\n      <label for=\"#new-collection-name\" class=\"extra-small-text\">lesson name</label>\n      <input id=\"new-collection-name\" type=\"text\" value=\"{{ collection.name }}\">\n    </div>\n    <div class=\"lesson-taxa\"><span class=\"js-lesson-taxa-count\">{{ collection.items.length }}</span> <span class=\"js-lesson-taxa\">{{ collection.taxa }}</span></div>\n</div>\n<div class=\"edit-species centred-block half-standard-block js-edit-species\">\n    <button class=\"snap-btn fit-width\">Edit lesson</button>\n</div>\n\n<div class=\"selected-species-container\">\n    <div class=\"scrollable js-selected-species-container\"></div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "dypA":
/*!*************************************************!*\
  !*** ./src/ui/screens/cards/card-template.html ***!
  \*************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"snapdragon-container test-card-container js-test-card-container\">    \n    <div class=\"card-card js-species-card\">\n        <div id=\"card-header\" class=\"question-container\">\n            \n            <!-- <div class=\"species-header landscape\">                        \n                <img src=\"{{ image.small }}\" alt=\"\">\n            </div> -->\n\n            <div class=\"iconic-icon double-centred-block js-iconic-icon\">\n                <i class=\"\"></i>\n            </div>\n\n            <div class=\"hide-empty question-header\">\n                <div>\n                    <div class=\"names-container vernacular-name-badge js-names-container\">\n                        <div>\n                            <span class=\"vernacular-name\">{{ vernacularName }}</span>\n                        </div>\n                        <div>\n                            <span class=\"binomial\">{{ name }}</span>\n                            <span class=\"js-names-badge\"></span>\n                            <span class=\"portrait bird-song-icon-disabled js-bird-song-player\" data-src='player' data-toggle=\"modal\" data-target=\"#basicModal\">\n                                <i class=\"fas fa-music\"></i>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"card-link-container\">\n                <i class=\"disabled-icon far fa-arrow-alt-circle-right js-card-link\"></i>\n            </div>\n            <!-- <div class=\"card-link-container\">\n                <div class=\"card-link js-card-link\">\n                    <span>Family</span>\n                    <span>card<i class=\"far fa-arrow-alt-circle-right\"></i></span>\n                </div>\n            </div> -->\n    \n        </div>            \n        <div class=\"data-box-container landscape\">\n            <div class=\"calendar-container landscape\">\n                <div class=\"js-calendar-box\"></div>\n            </div>\n            \n            <div class=\"inat-box js-inat-box\"></div>\n            <div class=\"taxa-container landscape js-taxa-box\"></div>            \n        </div>\n        <div class=\"portrait-grid species-card-images carousel js-test-card-container-images\"></div>\n        <div class=\"mixed-content-container scrollable\">\n            <div class=\"landscape bird-song\">\n                <div class=\"hide-empty\">\n                    <iframe class=\"js-bird-song\" src='' scrolling='no' frameborder='0' width='80vw' height='115'>                    \n                    </iframe>\n                </div>\n            </div>\n            <div class=\"card-txt-block lookalikes js-lookalikes\"></div>\n            <div class=\"js-info-box-details info-details\"></div>            \n        </div>\n        <div class=\"info-box js-info-box\"></div>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "PMM/":
/*!***********************************************************!*\
  !*** ./src/ui/screens/cards/non-taxon-card-template.html ***!
  \***********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"snapdragon-container test-card-container js-test-card-container\">    \n    <div class=\"portrait-grid non-taxon-card-images carousel js-non-taxon-card-images\"></div>    \n    <div class=\"card-card card non-taxon js-non-taxon-card\">\n        <div id=\"taxon-card-header\" class=\"question-container\">\n                \n                <div class=\"species-header js-species-header\">                        \n                    <img src=\"{{ image.small }}\" alt=\"\">\n                </div>\n\n                <div class=\"hide-empty question-header\">\n                    <div>\n                        <div class=\"names-container js-names-container\">\n                            <div>\n                                Foliose\n                            </div>\n                            <div>\n                                \n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class=\"card-link-container\">\n                    <i class=\"disabled-icon far fa-arrow-alt-circle-right js-card-link\"></i>\n                </div>\n    \n\n        </div>  \n        <div class=\"non-taxa js-non-taxa\">                \n            <div role=\"group\" class=\"btn-group\" data-toggle=\"buttons\" data-repeat-taxon=\"{{ group }}\">\n                <label class=\"btn btn-secondary\" id=\"{{ taxon.id }}\">\n                    <input type=\"radio\" name=\"options\" id=\"{{ taxon.id }}\" autocomplete=\"off\" checked> {{ taxon.id }}\n                </label>\n            </div>\n        </div>            \n        <div class=\"definitions\">\n            <div class=\"non-taxa-definition js-non-taxa-definition\">\n                <div></div>\n            </div>\n            <div class=\"non-taxa-definition \">\n                <div class=\"id-box\">\n                    <div>\n                        <div class=\"landscape\"></div>\n                        <div class=\"portrait\"></div>\n                    </div>\n                    <div>\n                        <div></div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"landscape species-card-wiki\">\n                <span class=\"non-taxon-card-wiki js-non-taxon-card-wiki\"></span>\n            </div>\n        </div>\n    </div>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "IJQV":
/*!*******************************************************!*\
  !*** ./src/ui/screens/cards/taxon-card-template.html ***!
  \*******************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"snapdragon-container test-card-container\">\n    <div class=\"taxon card-card js-taxon-card\">\n        <div id=\"taxon-card-header\" class=\"question-container\">\n            <div class=\"iconic-icon double-centred-block js-iconic-icon\">\n                <i class=\"\"></i>\n            </div>\n\n            <div class=\"hide-empty question-header\">\n                <div>\n                    <div class=\"names-container vernacular-name-badge js-names-container\">\n                        <div>\n                            <span>{{ vernacularName }}</span>                                \n                        </div>\n                        <div>\n                            <span class=\"binomial\">{{ name }}</span>\n                            <span class=\"names-badge js-names-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">{{ occurrences }}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        \n            <div class=\"card-link-container\">\n                <i class=\"disabled-icon far fa-arrow-alt-circle-right js-card-link\"></i>\n            </div>\n            <!-- <div class=\"card-link-container\">\n                <div class=\"card-link js-card-link\">\n                    <span>Test</span>\n                    <span>Card<i class=\"far fa-arrow-alt-circle-right\"></i></span>\n                </div>\n            </div> -->\n        </div>  \n        <div class=\"data-box-container sub-header\">\n            <div class=\"data-box\">\n                <div class=\"taxon-data js-taxon-rank\"><span>Rank</span> <span>{{ rank }}</span></div>\n                <div class=\"taxon-data\"><span>Species</span> <span>{{ species }}</span></div>\n                <div class=\"taxon-data js-taxon-genus\"><span>Genera</span> <span>{{ genera }}</span></div>\n                <div class=\"taxon-data js-taxon-family\"><span>Families</span> <span>{{ families }}</span></div>\n            </div>\n            <div class=\"landscape external-links js-external-links\">\n                <div><a href=\"{{ eol }}\" target=\"_blank\" class=\"underline-link\">EOL</a><span> taxon home page</span> <span class=\"names-badge\"> <i class=\"super fas fa-external-link-alt\"></i></span></div>\n                <div><a href=\"{{ wiki }}\" class=\"underline-link\" data-toggle=\"modal\" data-target=\"#wikiModal\">Wikipedia page</a></div>\n            </div>\n        </div>\n        <div class=\"mixed-content-container\">\n            <div class=\"centred-block\">\n                <div class=\"id-box-container\">\n                    <div class=\"id-box\">\n                        <div>\n                        </div>\n                        <div>\n                            <div class=\"taxon-identification\">{{ identification }}</div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"taxon-summary\">\n                    <div>{{ summary }}</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"info-box js-taxon-info-box\"></div>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "H/uh":
/*!******************************************************!*\
  !*** ./src/ui/screens/cards/test-card-template.html ***!
  \******************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"snapdragon-container test-card-container js-test-card-container\">\n    <div class=\"js-test-card\">\n        <div id=\"test-card-header\" class=\"question-container\">\n            <div class=\"iconic-icon double-centred-block js-iconic-icon\">\n                <i class=\"\"></i>\n            </div>\n            <div class=\"hide-empty question-header\">\n                <div>\n                    <div class=\"names-container {{ headerClassName }}\">\n                        <div>\n                            <h2 class=\"vernacular-name\">{{ vernacularName }}</h2>\n                            <span class=\"hide-empty names-badge\"></span>\n                        </div>\n                        <div>\n                            <h2 class=\"binomial\">{{ binomial }}</h2>\n                            <span class=\"names-badge traits-count-badge js-traits-count-badge\"></span>\n                            <h2 class=\"term-header hide-empty js-term-header\">{{ term }}</h2>\n                        </div>\n                    </div>                \n                </div>\n            </div>\n\n            <div class=\"card-link-container\">\n                <i class=\"far fa-arrow-alt-circle-right js-card-link\"></i>\n            </div>\n        </div>\n        <div class=\"test-card-question standard-block centred-block js-test-card-question border-bottom\">            \n            <div class=\"flex question {{ className }}\">\n                <h3 class=\"hide-empty question-question js-question-question\">{{ question }}</h3>\n                <h3 class=\"hide-empty question-help js-question-help\">{{ help }}</h3>\n                <h3 class=\"hide-empty question-statement js-statement-para\">{{ statement }}</h3>\n                <h3 class=\"hide-empty margin-top question-provider-question js-question-para\">{{ providerQuestion }}</h3>\n            </div>\n        </div>\n        <div class=\"test-card-content js-test-card-content scrollable\">\n            <!-- Specific test content goes here -->\n        </div>\n        <div class=\"text-question js-txt-question\"></div>\n        <div class=\"action-update-container\">\n            <div class=\"action-update\">\n                <button disabled class=\"btn snap-action-btn js-continue-lesson-btn\">Continue lesson</button>\n            </div>\n        </div>\n    </div> \n</div>\n<div class=\"swap-out-card js-species-container\"></div>\n<div class=\"swap-out-card js-taxon-container\"></div>\n<div class=\"swap-out-card js-summary-container\"></div>";
// Exports
module.exports = code;

/***/ }),

/***/ "F5SJ":
/*!*********************************************************!*\
  !*** ./src/ui/screens/common/audio-media-template.html ***!
  \*********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<figure>\n    <figcaption class=\"hide\">{{ title }}</figcaption>\n    <audio\n        controls\n        src=\"{{ mp3 }}\">\n        Your browser does not support the\n        <code>audio</code> element.\n    </audio>\n</figure>";
// Exports
module.exports = code;

/***/ }),

/***/ "AiYd":
/*!***************************************************!*\
  !*** ./src/ui/screens/common/badge-template.html ***!
  \***************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<ul data-repeat-language=\"{{ languageNames }}\" class=\"scrollable badge-list\">\n    <li class=\"capitalise\">\n        <div class=\"margin-top uppercase\">{{ language.name }}</div>\n        <ul data-repeat-common=\"{{ language.names }}\">\n            <li>{{ common }}</li>\n        </ul>\n    </li>\n</ul>";
// Exports
module.exports = code;

/***/ }),

/***/ "9ydg":
/*!******************************************************!*\
  !*** ./src/ui/screens/common/calendar-template.html ***!
  \******************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"calendar-box\">\n        <div data-repeat-row=\"{{ data }}\" class=\"\">\n            <div class=\"col\" data-repeat-value=\"{{ row }}\">\n                <div title=\"{{ value.count }}\" class=\"{{ value.class }}\">{{ value.month }}</div>\n            </div>\n        </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "Q2lf":
/*!****************************************************!*\
  !*** ./src/ui/screens/common/id-box-template.html ***!
  \****************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"id-box\">\n  <div>{{ id }}</div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "EJbP":
/*!**********************************************************!*\
  !*** ./src/ui/screens/common/image-slider-template.html ***!
  \**********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div id=\"imageSlider_{{ identifier }}\" class=\"imageSlider carousel slide\" data-ride=\"carousel\" data-interval=\"false\">\n  <div class=\"carousel-inner js-carousel-inner\">\n      <div data-repeat-image=\"{{ images }}\">\n        <div class=\"carousel-item image-slider-190\">\n            <img \n                role=\"button\"\n                src=\"{{ image.medium }}\"\n                data-title=\"{{ image.itemName }}\"\n                data-source=\"{{ image.source }}\"\n                data-license=\"{{ image.license }}\"\n                data-rights-holder=\"{{ image.rightsHolder }}\"\n                data-photographers-name=\"{{ image.photographersName }}\"\n                data-url=\"{{ image.url }}\"\n                data-provider=\"{{ image.provider }}\"\n                data-item-name=\"{{ image.itemName }}\"\n                data-index=\"{{ image.index }}\"\n                alt=\"Give {{ image.itemName }} as your answer\">\n        </div>\n      </div>\n      <div>\n        <div class=\"attribution-layer js-attribution-layer {{ identifier }}\"></div>\n        <ol class=\"carousel-indicators js-carousel-indicators\" data-repeat-image=\"{{ images }}\">\n          <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"{{ image.index }}\"></li>\n        </ol>        \n      </div>\n  </div>        \n  <a class=\"carousel-control-prev\" href=\"#imageSlider_{{ identifier }}\" role=\"button\" data-slide=\"prev\" data-slider=\"#imageSlider_{{ identifier }}\">\n    <button class=\"btn snap-icon-btn carousel-control-prev-icon\" data-slider=\"#imageSlider_{{ identifier }}\"></button>\n    <button class=\"sr-only\">Previous</button>\n  </a>\n  <div class=\"carousel-control-next\" href=\"#imageSlider_{{ identifier }}\" role=\"button\" data-slide=\"next\" data-slider=\"#imageSlider_{{ identifier }}\">\n    <button class=\"btn snap-icon-btn carousel-control-next-icon\" data-slider=\"#imageSlider_{{ identifier }}\"></button>\n    <button class=\"sr-only\">Next</button>\n  </div>\n  <div class=\"description_{{ identifier }} image-description\"></div>\n  <div class=\"double-centred-block\"></div>\n  </div>";
// Exports
module.exports = code;

/***/ }),

/***/ "CUTP":
/*!******************************************************!*\
  !*** ./src/ui/screens/common/inat-box-template.html ***!
  \******************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"data-box\">\n    <div>\n        <span class=\"js-world\">Worldwide</span><span class=\"js-taxon-count\">---</span>\n        </div>\n        <div>\n            <span class=\"js-place\">Location</span><span class=\"js-place-taxon-count\">---</span>\n        </div>\n    <div>\n        <span><a target=\"_blank\" href=\"\" class=\"underline-link js-taxon-link underline-link-left-margin\">iNat</a></span>\n        <span class=\"js-test-card-container-wiki\"></span>\n        <span><a class=\"species-card-eol-link js-test-card-container-eol-link underline-link\">EOL</a></span>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "K1n5":
/*!****************************************************************!*\
  !*** ./src/ui/screens/common/info-detail-slider-template.html ***!
  \****************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div data-repeat-detail=\"{{ details }}\">\n    <dl class=\"info_detail\">\n        <dt>{{ detail.term }}</dt>\n        <dd><img class=\"{{ detail.imgClassName }}\" src=\"{{ detail.img.url }}\" alt=\"\"></dd>\n        <dd>{{ detail.definition }}</dd>\n    </dl>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "jX2F":
/*!*********************************************************!*\
  !*** ./src/ui/screens/common/info-slider-template.html ***!
  \*********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div id=\"traitSlider{{ id }}\" class=\"info carousel slide\" data-ride=\"false\" data-interval=\"false\">\n    <div class=\"carousel-inner\" data-repeat-trait=\"{{ traits }}\">\n      <dl class=\"carousel-item\">\n          <div>\n            <dt>{{ trait.name }}</dt>\n            <dd>{{ trait.value }} {{ trait.unit }}</dd>\n          </div>\n          <div class=\"hide-important\">{{ trait.description }}</div>\n      </dl>\n    </div>\n    <a class=\"carousel-control carousel-control-prev\" href=\"#traitSlider{{ id }}\" role=\"button\" data-slide=\"prev\">\n      <button class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></button>\n      <button class=\"sr-only\">Previous</button>\n    </a>\n    <a class=\"carousel-control carousel-control-next\" href=\"#traitSlider{{ id }}\" role=\"button\" data-slide=\"next\">\n      <button class=\"carousel-control-next-icon\" aria-hidden=\"true\"></button>\n      <button class=\"sr-only\">Next</span>\n      </a>\n  </div>";
// Exports
module.exports = code;

/***/ }),

/***/ "oHb/":
/*!****************************************************************!*\
  !*** ./src/ui/screens/common/language-selection-template.html ***!
  \****************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"filter-language-option-block\">    \n    <div class=\"filter-options\">\n        <div class=\"language-options\">\n            <div class=\"dropdown\">\n                <button class=\"btn smaller-text snap-btn dropdown-toggle\" type=\"button\" id=\"taxonLanguageBtn\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                    Taxon language\n                </button>\n                <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\" data-repeat-language=\"{{ languages }}\">\n                    <a id=\"{{ language.lang }}\" class=\"dropdown-item\" href=\"#\">{{ language.name }}</a>\n                </div>\n            </div>\n        </div>        \n    </div>\n    <h2 class=\"half-standard-block centred-block\">Common names will be shown in<span id=\"taxonLanguageTxt\">English</span>.</h2>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "2ZjO":
/*!*******************************************************************!*\
  !*** ./src/ui/screens/common/linked-taxa-lookalike-template.html ***!
  \*******************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"js-relationship-card-list\" data-repeat-lookalike=\"{{ lookalikes }}\">\n    <div class=\"lookalike-card\">\n        <div>{{ lookalike.species }}</div>\n        <div>{{ lookalike.speciesDescription }}</div>\n        <!-- <button data-toggle=\"{{ lookalike.modal }}\" data-target=\"#cardModal\" class=\"snap-icon-btn smaller-text {{ lookalike.className }} js-test-card-container-link\" id=\"{{ lookalike.lookalike }}\">{{ lookalike.lookalike }}</button> -->\n        <div class=\"js-test-card-container-link\">\n            <span data-toggle=\"{{ lookalike.modal }}\" data-target=\"#cardModal\" class=\"{{ lookalike.className }}\" id=\"{{ lookalike.lookalike }}\">{{ lookalike.lookalike }}</span>\n        </div>\n        <div>{{ lookalike.lookalikeDescription }}</div>\n    </div>\n</div>    ";
// Exports
module.exports = code;

/***/ }),

/***/ "re8S":
/*!**********************************************************************!*\
  !*** ./src/ui/screens/common/linked-taxa-relationship-template.html ***!
  \**********************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "\n<div class=\"js-relationship-card-list\" data-repeat-relationship=\"{{ relationships }}\">\n    <div class=\"relationship-card\">\n        <div class=\"cols\">\n            <div>Relationship</div><div>{{ relationship.type }}</div>\n        </div>\n        <div class=\"cols\">\n            <div class=\"js-test-card-container-link\">\n                <span data-toggle=\"{{ relationship.modal }}\" data-target=\"#cardModal\" class=\"{{ relationship.className }}\" id=\"{{ relationship.speciesA }}\">{{ relationship.speciesA }}</span>\n            </div>                \n            <div class=\"capitalise\">{{ relationship.speciesARole }}</div>\n        </div>\n        <div class=\"cols\">\n            <div>{{ relationship.speciesB }}</div><div class=\"capitalise\">{{ relationship.speciesBRole }}</div>\n        </div>\n        <div>{{ relationship.description }}</div>\n    </div>  \n\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "eh49":
/*!**************************************************************!*\
  !*** ./src/ui/screens/common/look-alikes-link-template.html ***!
  \**************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<span class=\"feature-label js-compare-species-label\"></span>\n<span title=\"Lookalike species\" class=\"landscape compare-species-link js-compare-species-link\" data-toggle=\"modal\" data-target=\"#imageComparisonModal\" data-slides=\"{{ slides }}\">\n    <i class=\"fas fa-clone\"></i>\n</span>\n<span title=\"Lookalike species\" class=\"portrait compare-species-link js-compare-species-link\">\n    <i class=\"fas fa-clone\"></i>\n</span>";
// Exports
module.exports = code;

/***/ }),

/***/ "aHOI":
/*!****************************************************************!*\
  !*** ./src/ui/screens/common/rights-attribution-template.html ***!
  \****************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"attribution-layer\">\n    <div class=\"rights-link js-rights-link\">\n        <div class=\"rights-link-copyright double-centred-block js-copyright\">\n            <i class=\"fas fa-copyright\"></i>\n        </div>\n        <div></div>\n        <div class=\"rights-link-copyright double-centred-block\">            \n            <a href=\"{{ large }}\" target=\"_blank\">\n              <span class=\"sr-only\">Opens in new window</span>\n              <i class=\"fas fa-external-link-alt\"></i>\n            </a>\n        </div>\n    </div>\n    <div class=\"rights-attribution hide-important js-rights-attribution\">        \n        <div class=\"rights-link-copyright double-centred-block js-copyright\">\n            <i class=\"fas fa-copyright\"></i>\n        </div>        \n        <div class=\"double-centred-block\">\n            <a href=\"{{ source }}\" target=\"_blank\">\n                <span class=\"centred-block\">\n                    <span class=\"sr-only\">Opens in new window</span>\n                    <span class=\"underline-link half-margin-right\">{{ author }}</span>\n                    <i class=\"super active-icon fas fa-external-link-alt\"></i>\n                </span>\n            </a>\n    </div>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "1/pR":
/*!******************************************************!*\
  !*** ./src/ui/screens/common/taxa-box-template.html ***!
  \******************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<span>\n    <span class=\"uppercase small-text js-native-container\"></span>\n    <span class='rank'>{{ trait }}</span>\n    <span class=\"lookalikes js-lookalikes\"></span>\n    <!-- <span class=\"portrait bird-song-icon-disabled js-bird-song-player\" data-src='player' data-toggle=\"modal\" data-target=\"#basicModal\"> -->\n        <!-- <i class=\"fas fa-music\"></i> -->\n    <!-- </span> -->\n    <span class=\"badge badge-light js-subspecies-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">{{ subSpeciesCount }}</span> <span class=\"sr-only\">species of this family in the collection</span>\n</span>\n\n<span class=\"hide-empty\">{{ familyVernacularName }}</span>\n<span class=\"latin hide-empty\">{{ familyName }}</span>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "f9Wd":
/*!******************************************************************!*\
  !*** ./src/ui/screens/home/home-lesson-intro-text-template.html ***!
  \******************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"home-scrolling-container  -scrolling-container\">\n    \n    <h1 class=\"title standard-block double-centred-block border-bottom\">{{ title }}</h1 >\n    \n    <main class=\"snapdragon-intro padding\" \n        style=\"margin: 0 2rem;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-evenly;\n        top: calc(var(--vhStandardBlock));\">\n        <h3 class=\"half-standard-block\">\n            <span class=\"js-species-summary\">{{ speciesSummary }}</span>\n        </h3>\n        <h3 class=\"half-standard-block\">\n            <span>Common taxon names are in {{ language }}.</span>\n        </h3>\n        <h3 class=\"half-standard-block\">\n            <span>{{ season }}</span>\n        </h3>\n\n        <h3 class=\"centred-block standard-block js-intro-text\">{{ lessonIntro }}</h3>\n      </main>\n\n    <div class=\"scrollable\"></div>                \n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "rFu4":
/*!*******************************************************************!*\
  !*** ./src/ui/screens/home/home-lesson-intro-video-template.html ***!
  \*******************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"home-scrolling-container js-home-scrolling-container\">\n    <h1 class=\"title standard-block double-centred-block\">{{ video.title }}</h1>\n    <div class=\"margin-left margin-right\">\n      <div class=\"video\">\n          <div style=\"min-height: 1px;\"></div>\n          <iframe\n              type=\"text/html\"\n              id=\"embedded-video\"\n              width=\"100%\"\n              src=\"https://www.youtube.com/embed/{{ video.id }}?enablejsapi=1&playsinline=1&start={{ video.playAt }}\"\n              frameborder=\"0\"\n              allowfullscreen>\n          </iframe>   \n      </div>\n    </div>\n    <div class=\"scrollable\">\n        <div class=\"one-and-half-standard-block centred-block justify-space-between padding-left\">\n            <div class=\"centred-block\">\n                <div class=\"margin-right\">\n                    <img width=\"48px\" height=\"48px\" src=\"{{ video.src }}\" alt=\"\">\n                </div>\n                <div class=\"vertical-centred-block\">\n                    <div><span class=\"hide margin-right\" >Created by:</span><span class=\"emphasis\">{{ video.presenter }}</span></div>\n                    <!-- <div>\n                        <span class=\"hide margin-right\">{{ video.webLabel }}:</span>\n                        <a class=\"underline-link\" href=\"{{ video.webUrl }}\" target=\"_blank\">Channel</a>\n                        <span class=\"names-badge\"> <i class=\"fas fa-external-link-alt\"></i></span>\n                    </div> -->\n                    <div><span class=\"hide margin-right\" >Location:</span><span class=\"font-size-small\">{{ video.location }}</span></div>\n                </div>\n            </div>\n            <!-- <div class=\"centred-block justify-end padding-right js-lesson-links\">\n            </div> -->\n        </div>        \n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "u8BC":
/*!***************************************************************!*\
  !*** ./src/ui/screens/landscape/specimen-tiles-template.html ***!
  \***************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"standard-block border-bottom double-centred-block\"></div>\n<div class=\"tiles-container\">\n    <div class=\"squares js-tiles\" data-repeat-image=\"{{ images }}\">\n        <div>\n            <img class=\"square\"                    \n            src=\"{{ image.medium }}\"\n            data-toggle=\"modal\" data-target=\"#imageModal\"\n            data-item-name=\"{{ image.itemName }}\"\n            data-url=\"{{ image.url }}\" />\n        </div>              \n    </div>\n</div>\n\n<div class=\"lesson-companion\">\n    <!-- 9 things about Dill: #1 -->\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "pC5K":
/*!********************************************************!*\
  !*** ./src/ui/screens/lists/lesson-edit-template.html ***!
  \********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\">\n    <div class=\"lesson-name\" id=\"js-input-collection-name\">\n        <input type=\"text\" value=\"{{ collection.name }}\">\n    </div>\n    <div class=\"margin-left lesson-taxa\"><span class=\"js-lesson-taxa-count\">{{ collection.items.length }}</span> <span class=\"js-lesson-taxa\">{{ collection.taxa }}</span></div>\n</div>\n\n<div class=\"selected-species-container\">\n    <div class=\"open scrollable js-selected-species-container\"></div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "Ldqy":
/*!***************************************************************!*\
  !*** ./src/ui/screens/lists/lesson-list-header-template.html ***!
  \***************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"lesson-list-header centred-block btn standard-block\">\n    <div class=\"standard-block js-toggle-element\">\n        <div>\n            <div class=\"main-header\">\n                <h2>Lessons</h2>\n            </div>\n        </div>\n    </div>\n    <div class=\"margin-right standard-block js-toggle-control\">    \n        <button data-toggle=\"modal\" data-target=\"#createGuide\" class=\"btn snap-btn margin-right small-text js-create-custom-lesson\">Create lesson</button>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "GB9M":
/*!********************************************************!*\
  !*** ./src/ui/screens/lists/lesson-list-template.html ***!
  \********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"lesson-list js-lesson-list\">\n    <ul class=\"scrollable js-lesson-container\" data-toggle=\"buttons\">\n    </ul>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "j0sj":
/*!***************************************************!*\
  !*** ./src/ui/screens/lists/lesson-template.html ***!
  \***************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<li>\n  <div data-lesson-id=\"{{ lesson.id }}\" class=\"relative lesson-list-carousel-item js-lesson-list-carousel-item\">\n      <div class=\"landscape double-centred-block\">\n        <div class=\"lesson-icon\">\n          <picture>\n            <source srcset=\"https://storage.googleapis.com/snapdragon-222014.appspot.com/dist/1x1-transparent-pixel.png 1w\"\n                    media=\"(max-width: 767px)\">\n            <img src=\"{{ lesson.icon }}\" alt=\"{{ lesson.name }}\" />\n          </picture>\n        </div>\n      </div>\n      <div data-lesson-id=\"{{ lesson.id }}\" class=\"lesson-list-item js-lesson-list-item\" data-has-video=\"{{ lesson.hasVideo }}\">\n          <div>            \n              <div class=\"lesson-name js-lesson-title\" data-lesson-id=\"{{ lesson.id }}\">\n                  <span id=\"lesson_{{ lesson.id }}\" class=\"lesson-title margin-right {{ lesson.isCollectionEditableClass }}\">{{ lesson.name }}</span>\n              </div>\n              <div class=\"lesson-taxa\" data-lesson-id=\"{{ lesson.id }}\">{{ lesson.taxa }}</div>\n              <div class=\"latin hide-empty js-lesson-video-state\" data-lesson-id=\"{{ lesson.id }}\">{{ lesson.videoState }}</div>         \n          </div> \n          <div data-lesson-id=\"{{ lesson.id }}\" class=\"lesson-review js-lesson-review\">\n              <div class=\"flex\">\n                  <div class=\"centred-block fit-width margin-top\">\n                      <button data-toggle=\"modal\" data-target=\"#glossaryModal\" data-lesson-id=\"{{ lesson.id }}\" data-lesson-id=\"{{ lesson.id }}\" aria-label=\"vocab test for {{ lesson.name }} lesson\" class=\"lesson-terms-review {{ lesson.hasTermsClass }} margin-right fit-width js-terms-review-link btn snap-btn smaller-text\" data-toggle=\"modal\" data-target=\"#glossaryModal\">Vocab test</button>\n                  </div>\n                  <div class=\"vertical-centred-block relative margin-top\">\n                      <div class=\"centred-block\">\n                        <button data-toggle=\"modal\" data-target=\"#lessonModal\" data-lesson-id=\"{{ lesson.id }}\" aria-label=\"{{ lesson.name }} lesson quiz\" class=\"landscape btn snap-btn smaller-text margin-right fit-width js-review-link\">{{ lesson.reviewState }}</button>\n                        <button data-lesson-id=\"{{ lesson.id }}\" aria-label=\"{{ lesson.name }} lesson quiz\" class=\"portrait btn snap-btn smaller-text margin-right fit-width js-review-link\">{{ lesson.reviewState }}</button>\n                        <span data-lesson-id=\"{{ lesson.id }}\" class=\"review-spinner hide\"><i class=\"fas fa-sun slow-spin\"></i></span>\n                      </div>\n                    <span data-lesson-id=\"{{ lesson.id }}\" class=\"hide-important inline-progress-container js-review\">\n                    <span class=\"absolute\">&nbsp;</span>\n                    </span>\n                    <span data-lesson-id=\"{{ lesson.id }}\" class=\"hide margin-right js-loading-review-message\">\n                        <span><i class=\"fas fa-sync slow-spin\"></i></span>\n                    </span>                  \n                  </div>\n              </div>\n          </div>\n      </div>\n      <div class=\"lesson-list-action-icons\">\n          <div class=\"landscape\">\n              <button data-lesson-id=\"{{ lesson.id }}\" data-lesson-is-youtube-icon=\"true\" class=\"snap-icon-btn fit-width js-lesson-list-youtube\" aria-label=\"play video for the lesson {{ lesson.name }}\">\n                <i class=\"fab fa-youtube youtube-icon {{ lesson.hideVideoClass }}\"></i>\n                <i class=\"fas fa-align-left youtube-icon {{ lesson.hideTextIntroClass }}\"></i>\n              </button>\n              <button data-lesson-id=\"{{ lesson.id }}\" class=\"snap-icon-btn fit-width js-lesson-list-chevron\" aria-label=\"species list for the lesson {{ lesson.name }}\">\n                <i class=\"fas fa-chevron-down\"></i>                \n              </button>\n          </div>\n          <div class=\"portrait\">\n              <button data-lesson-id=\"{{ lesson.id }}\" data-lesson-is-youtube-icon=\"true\" class=\"snap-icon-btn js-lesson-list-youtube {{ lesson.hideVideoClass }}\" aria-label=\"play video for the lesson {{ lesson.name }}\">\n                <i class=\"fab fa-youtube youtube-icon\"></i>\n              </button>\n              <button data-lesson-id=\"{{ lesson.id }}\" class=\"chevron-icon snap-icon-btn js-lesson-list-chevron {{ lesson.hideTextIntroClass }}\" aria-label=\"species list for the lesson {{ lesson.name }}\">\n                <i class=\"fas fa-chevron-down\"></i>\n              </button>\n          </div>\n      </div>\n  </div>\n  <div data-container-id=\"{{ lesson.id }}\" class=\"species-container js-species-container\"></div>\n</li>";
// Exports
module.exports = code;

/***/ }),

/***/ "AA8P":
/*!******************************************************************!*\
  !*** ./src/ui/screens/lists/species-list-definition-insert.html ***!
  \******************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div>\n    <div>{{ note.tag }}</div>\n    <div>{{ note.description }}</div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "ZRSX":
/*!**********************************************************!*\
  !*** ./src/ui/screens/lists/species-table-template.html ***!
  \**********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<table id=\"species_list_id_{{ id }}\" class=\"species-table js-species-list\" style=\"width: 100%;\">\n    <tbody data-repeat-item=\"{{ itemImages }}\">\n        <tr class=\"table-row master js-list-item\" id=\"id_{{ item.id }}\">\n            <td id=\"{{ item.name }}\" data-snap-index=\"{{ item.snapIndex }}\">\n              <button class=\"btn snap-icon-btn double-centred-block\">\n                <img \n                    id=\"{{ item.name }}\" \n                    src=\"{{ item.small }}\" \n                    alt=\"Open gallery to more photos of {{ item.name }}\" \n                    data-toggle=\"modal\" \n                    data-item-name=\"{{ item.name }}\" \n                    data-target=\"#imageModal\" \n                    data-id=\"{{ item.name }}\"                                 \n                    data-url=\"{{ item.url }}\" \n                    data-rights-holder=\"{{ item.rightsHolder }}\" \n                    data-title=\"{{ item.name }}\"\n                    data-license=\"{{ item.license }}\"                                \n                    data-source=\"{{ item.source }}\"\n                    data-provider=\"{{ item.provider }}\">\n              </button>\n            </td>\n            <td>\n                <button data-toggle=\"modal\" data-name=\"{{ item.name }}\" data-vernacular-name=\"{{ item.vernacularName }}\" data-id=\"{{ item.id }}\" data-type=\"speciesCardLink\" data-target=\"#cardModal\" class=\"snap-link-btn underline-link js-test-card-container-link\">{{ item.vernacularName }}</button>\n                <span class=\"no-underline-link latin-name\">\n                    <button data-toggle=\"modal\" data-name=\"{{ item.name }}\" data-url=\"{{ item.url }}\" data-rank=\"genus\" data-genus=\"{{ item.genus }}\" data-target=\"#cardModal\" class=\"{{ item.genusLinkClass }}\">{{ item.genus }}</button> <span>{{ item.species }}</span>\n                </span>\n            </td>\n            <td class=\"wide-screen\">\n                <button data-toggle=\"modal\" data-name=\"{{ item.taxonomy.family }}\" data-url=\"{{ item.url }}\" data-rank=\"family\" data-family=\"{{ item.taxonomy.family }}\" data-target=\"#cardModal\" class=\"no-underline-link {{ item.familyLinkClass }}\">{{ item.taxonomy.family }}</button>\n                <button data-toggle=\"modal\" data-name=\"{{ item.taxonomy.order }}\" data-url=\"{{ item.url }}\" data-rank=\"order\" data-order=\"{{ item.taxonomy.order }}\" data-target=\"#cardModal\" class=\"no-underline-link {{ item.orderLinkClass }} js-order-link\">{{ item.taxonomy.order }}</button>\n            </td>\n            <td class=\"{{ item.iconicTaxon }} {{ item.hasTaxonClassName }}\">\n                <span id=\"{{ item.id }}\" name=\"{{ item.name }}\"><i class=\"{{ item.iconicTaxonIcon }}\"></i></span>\n                <span class=\"mushroom-icon {{ item.hideFungiIcon }}\"></span>\n            </td>\n            <td class=\"{{ item.hasVideoClassName }}\">\n                <button data-name=\"{{ item.name }}\" class=\"snap-icon-btn fit-width js-youtube\" aria-label=\"start video from the species {{ item.name }}\">\n                    <i class=\"fab fa-youtube youtube-icon\" data-name=\"{{ item.name }}\"></i>\n                </button>\n            </td>\n            <td class=\"{{ item.hasVideoClassName }}\">\n                <button data-name=\"{{ item.name }}\" class=\"snap-icon-btn fit-width accordion-icon js-accordion\" aria-label=\"video commentary for the species {{ item.name }}\">\n                  <i data-name=\"{{ item.name }}\" class=\"fas fa-chevron-down\"></i>\n                </button>\n            </td>\n        </tr>\n    </tbody>\n</table>";
// Exports
module.exports = code;

/***/ }),

/***/ "kuKj":
/*!***********************************************************!*\
  !*** ./src/ui/screens/multichoice/horizontal-strips.html ***!
  \***********************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"strips description js-rptr-strips\" data-repeat-answer=\"{{ answers }}\">\n  <div class=\"strip\">\n      <button class=\"btn snap-icon-btn\" data-answer-index=\"{{ answer.index }}\">\n        <span>{{ answer.term }}</span>\n      </button>\n  </div>\n</div>\n    ";
// Exports
module.exports = code;

/***/ }),

/***/ "JAm9":
/*!***************************************************************************************************!*\
  !*** ./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html ***!
  \***************************************************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"mixed-specimen-container\">\n    <div class=\"margin-bottom\"><span>{{ help }}</span></div>\n    <ul class=\"traits-names-txt js-traits-names-txt\" data-repeat-trait=\"{{ traits }}\">\n        <li>\n            <img src=\"{{ trait.img.url }}\" alt=\"{{ trait.term }}\">\n            <span>{{ trait.term }}</span>\n        </li>\n    </ul>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "LZ3q":
/*!***************************************************************!*\
  !*** ./src/ui/screens/multichoice/multi-strips-template.html ***!
  \***************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<ul class=\"strips description js-rptr-strips\" data-repeat-answer=\"{{ answers }}\">\n  <li class=\"strip\">\n      <button class=\"btn snap-icon-btn\" data-answer-index=\"{{ answer.index }}\" data-name=\"{{ answer.name }}\" data-names=\"{{ answer.names }}\">\n          <span>{{ answer.term }}</span>\n      </button>\n    </li>\n</ul>";
// Exports
module.exports = code;

/***/ }),

/***/ "cwzI":
/*!******************************************************************!*\
  !*** ./src/ui/screens/multichoice/multi-strips-with-images.html ***!
  \******************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"strips description js-rptr-strips\" data-repeat-answer=\"{{ answers }}\">\n    <div class=\"strip\">\n        <button class=\"double-centred-block btn snap-icon-btn\" data-answer-index=\"{{ answer.index }}\">\n            <img width=\"25px\" height=\"25px\" src=\"{{ answer.img.url }}\" alt=\"\">\n            <span>{{ answer.term }}</span>\n        </button>\n    </div>\n  </div>";
// Exports
module.exports = code;

/***/ }),

/***/ "ud24":
/*!**************************************************************************************************!*\
  !*** ./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html ***!
  \**************************************************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"species-card-images carousel js-test-card-container-images\"></div>";
// Exports
module.exports = code;

/***/ }),

/***/ "U9hP":
/*!********************************************************************!*\
  !*** ./src/ui/screens/progress/score-summary-no-row-template.html ***!
  \********************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"horizontal-evenly-spaced-block js-no-questions\">\n    <span>You haven't answered any questions yet.</span>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "aYLD":
/*!*****************************************************************!*\
  !*** ./src/ui/screens/progress/score-summary-row-template.html ***!
  \*****************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"score-summary-row species\">\n    <div></div>\n    <div>\n        <div></div>\n        <div>\n            <span>{{ vernacularName }}</span>\n            <span class=\"latin\">{{ binomial }}</span>\n        </div>                \n    </div>\n    <div>{{ score }}</div>\n</div>\n\n    <div data-repeat-row=\"{{ rows }}\">\n\n    <button class=\"btn snap-icon-btn score-summary-row header\" type=\"button\" data-toggle=\"collapse\" data-target=\"#{{ row.id }}\" aria-expanded=\"false\" aria-controls=\"{{ row.id }}\">  \n        <div data-is-true=\"{{ row.success }}\">\n            <i class=\"fas fa-check\"></i>\n            <i class=\"fas fa-times\"></i>\n        </div>\n        <div>\n            <div class=\"binomial\">{{ row.statement }}</div>\n            <div>{{ row.questionText }}</div>\n        </div>\n        <div>\n            <i class=\"fas fa-chevron-down\"></i>\n        </div>\n    </button>\n    \n    <div id=\"{{ row.id }}\" class=\"collapse score-summary-row in-columns js-collapse\" data-repeat-answer=\"{{ row.answers }}\" >  \n        <div data-question=\"{{ ^.row.question }}\">\n            <div>                    \n            </div>\n            <div data-is-true=\"{{ answer.isTrue }}\" data-is-wrong-answer=\"{{ answer.isWrongAnswer }}\">\n                <div data-show-image=\"{{ answer.hasImage }}\">\n                    <img data-has-image=\"{{ answer.hasImage }}\" src=\"{{ answer.url }}\" alt=\"{{ answer.value }}\">\n                </div>\n                <div>\n                    <span>{{ answer.value }}</span><span class=\"hide-empty margin-left\">{{ answer.name }}</span>\n                </div>\n                <div></div>\n            </div>\n            <div></div>\n        </div>\n    </div>\n\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "G+qQ":
/*!*************************************************************!*\
  !*** ./src/ui/screens/progress/score-summary-template.html ***!
  \*************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"snapdragon-container score-summary-container js-test-card-container\">\n    <div class=\"js-summary-card\">\n        <div class=\"test-card-question standard-block centred-block js-test-card-question\">            \n            <div class=\"question\">\n                    <div>\n                        <span class=\"hide-empty question-question js-question-question\">Quiz progress</span>\n                        <span class=\"hide-empty question-statement\"></span>\n                    </div>\n                </div>\n        </div>\n        <div id=\"accordion\" class=\"score-summary scrollable review-summary\">\n            <div class=\"score-summary-row-title\">\n                <div>\n                    <div class=\"double-centred-block\">\n                        <span class=\"uppercase\">{{ collection.name }}</span>\n                    </div>\n                    <div class=\"double-centred-block\">\n                        <span>Round {{ lesson.currentRound }} of {{ lesson.rounds }}</span>\n                    </div>                \n                </div>\n            </div>\n            <div class=\"score-summary-footer running-block centred-block\">\n                <button class=\"btn snap-btn fit-width js-continue-link\">Continue lesson</button>\n            </div>\n            <div class=\"js-score-summary-rows\"></div>\n            <div class=\"score-summary-footer running-block centred-block\">\n                <button class=\"btn snap-btn fit-width js-continue-link\">Continue lesson</button>\n            </div>\n        </div>    \n    </div>\n</div>\n";
// Exports
module.exports = code;

/***/ }),

/***/ "DSGb":
/*!***************************************************************!*\
  !*** ./src/ui/screens/text-entry/text-complete-template.html ***!
  \***************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"centred-block standard-block\">\n    <button class=\"btn snap-icon-btn block\">\n      <span class=\"given genus\">{{ genus }}</span>\n    </button>\n    <button class=\"btn snap-icon-btn block\">\n      <span class=\"species\">{{ species }}</span>\n    </button>\n</div>\n<div class=\"text-complete-container\">\n    <div class=\"margin-bottom landscape\">Click to select the correct name:</div>\n    <div class=\"margin-bottom portrait\">Tap to select the correct name:</div>\n    <div class=\"pool js-pool\" data-repeat-answer=\"{{ answers }}\">    \n        <button type=\"submit\" class=\"btn snap-icon-btn block\">\n            <span>{{ answer.value }}</span>\n        </button>\n    </div>\n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "qcAX":
/*!**********************************************************************!*\
  !*** ./src/ui/screens/text-entry/text-entry-portrait-templates.html ***!
  \**********************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"js-test-card-container-images species-card-images\"></div>\n<div class=\"text-entry\">\n    <input class=\"js-txt-input\" type=\"text\" placeholder=\"Genus\">\n</div>\n<div class=\"landscape help-txt binomial js-help-txt\"></div>";
// Exports
module.exports = code;

/***/ }),

/***/ "/ArE":
/*!*************************************************************!*\
  !*** ./src/ui/screens/text-entry/text-entry-templates.html ***!
  \*************************************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module */
/***/ ((module) => {

// Module
var code = "<div class=\"centred-block standard-block\">\n    <input disabled class=\"js-txt-input\" type=\"text\" placeholder=\"Genus\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\">        \n</div>\n<div>\n    <div class=\"help-txt binomial margin-left js-help-txt\"></div>\n</div>\n<div class=\"text-entry-container\">    \n    <div class=\"js-pool-letters pool margin-left margin-top margin-bottom\"></div>\n    <div class=\"horizontal-buttons\">\n        <button class=\"btn btn-tertiary js-toggle-keyboard\">Enable keyboard</button>\n        <button class=\"btn snap-action-btn js-check-answer\">Check answer</button>\n        <button class=\"btn btn-tertiary js-delete-letter\">Delete last letter</button>\n    </div>    \n</div>";
// Exports
module.exports = code;

/***/ }),

/***/ "sBHh":
/*!********************************************!*\
  !*** ./src/ui/css/groups/create-guide.css ***!
  \********************************************/
/*! unknown exports (runtime-defined) */
/*! exports [maybe provided (runtime-defined)] [maybe used (runtime-defined)] */
/*! runtime requirements: module, __webpack_require__, module.id */
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var content = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./create-guide.css */ "m72O");

if(typeof content === 'string') content = [[module.id, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! !../../../../node_modules/style-loader/lib/addStyles.js */ "aET+")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ })

}]);
//# sourceMappingURL=src_ui_screens_lists_lesson-state-handler_js.bundle.js.map