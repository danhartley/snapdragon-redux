{"version":3,"sources":["webpack://learn-the-planet/./src/utils/utils.js"],"names":["Array","results","subArray","encodeQuery","q","Number","encodeURIComponent","timer","id","Bacon","setInterval","sink","window","timerId","shuffleArray","array","currentIndex","randomIndex","Math","temporaryValue","randomiseSelection","zeroBased","r","arr","selection","index","item","onlyUnique","self","sortBy","dir","parseFloat","a","b","sortAlphabeticallyBy","calcItemIndex","itemIndex","offSet","capitaliseFirst","text","str","capitaliseAll","s","getCellValue","children","tr","child","valueToSortOn","comparer","isNumericallyComparible","v1","v2","isNaN","asc","makeSortable","document","sp","headerSortIndex","names","th","table","tbody","footer","snapLog","callback","flatten","flattenedArray","accumulator","getObservableMonths","span","daysAway","dateFromDays","direction","when","startMonth","thisMonth","date","endMonth","getMonthName","exampleDate","name","month","months","getRandomInt","createSessionToken","v","c","getRandomObjectProperty","Object","obj","keys","key","value","toCamelCase","sentenceCase","out","add","el","idx","fromCamelCase","parseToLowerCase","hasClass","classArray","elem","isTrue","toggleClass","removeClass","convertTraitKeyToUnitKey","conversion","traitKey","utils"],"mappings":"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","file":"shared.bundle.js","sourcesContent":["Array.prototype.concatAll = function() {\n    const results = [];\n  \n    this.forEach(function(subArray) {\n      subArray.forEach(function(element) {\n        results.push(element);\n      });\n    });\n  \n    return results;\n  };\n  \n  const encodeQuery = q => { \n    if(q === undefined) return q;\n    if(Number.isInteger(q)) return q;\n    return encodeURIComponent(q.trim()) \n  };\n  \n  const timer = function (sink, delay) {\n    let id = null;\n    Bacon.fromBinder(function() {\n      id = setInterval(function() {\n          sink();\n        }, delay);    \n      })\n    .onValue(function(element) { \n      //\n     });\n    return id;\n  };\n  \n  function intervalTimer (sink, delay) {\n    var timerId;\n  \n    this.pause = function() {\n        window.clearInterval(timerId);\n    };\n  \n    this.resume = function() {\n        window.clearInterval(timerId);\n        timerId = timer(sink, delay);\n    };\n  \n    this.getId = function (){\n      return timerId;\n    }\n  \n    this.resume();\n  \n    return this;\n  };\n  \n  const shuffleArray = array => {\n\n    // Check against https://bost.ocks.org/mike/shuffle/ Fisherâ€“Yates Shuffle\n\n    if(!array || array.length === 0) return;\n\n    var currentIndex = array.length, temporaryValue, randomIndex;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return [ ...array ];\n\n    // return (arr\n    //   .map(a => [Math.random(), a])\n    //   .sort((a, b) => a[0] - b[0])\n    //   .map(a => a[1]))\n  };\n  \n  const randomiseSelection = (source, required, zeroBased = false) => {\n    const r = selection => {\n      const arr = shuffleArray(source);\n      selection = selection.concat(arr.map((item, index) => {\n        if(index + selection.length < required) {\n          return zeroBased ? --item : item;\n        }      \n      })).filter(item => item !== undefined);\n      return selection.length < required ? r(selection) : selection;\n    }\n    return r([]);\n  };\n\n const onlyUnique = (value, index, self) => { \n    return self.indexOf(value) === index;\n};\n\nconst sortBy = (arr, prop, dir = 'asc') => {\n  return dir === 'asc' \n    ? arr.sort((a, b) => parseFloat(a[prop]) - parseFloat(b[prop]))\n    : arr.sort((a, b) => parseFloat(b[prop]) - parseFloat(a[prop]));  \n};\n\nconst sortAlphabeticallyBy = (arr, prop) => {\n  arr.sort(function(a, b){\n    if(a[prop] < b[prop]) return -1;\n    if(a[prop] > b[prop]) return 1;\n    return 0;\n  });\n  return arr;\n};\n\nconst calcItemIndex = (offSet, moduleSize, index) => {\n  const itemIndex = \n        (offSet + index) % moduleSize === 0 \n          ? offSet\n          : offSet + (offSet + index) % moduleSize;\n  return itemIndex;\n};\n\nconst capitaliseFirst = str => {\n  const text = str.substr(0, 1).toUpperCase() + str.substr(1).toLowerCase();\n  return text;\n};\n\nconst capitaliseAll = str => {\n  const text = str.toLowerCase()\n    .split(' ')\n    .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n    .join(' ');\n  return text;\n};\n\nconst getCellValue = function(tr, idx, headerSortIndex, wide){\n  let children = tr.children;\n  if(!wide) {\n    children = [...tr.children].filter(child => [...child.classList].join('').indexOf('wide-screen') === -1);\n  }\n  const valueToSortOn = \n    children[idx].dataset.snapIndex ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.vernacularName) ||\n    (children[idx].querySelector('button') && children[idx].querySelector('button').dataset.name) ||\n    children[idx].children[headerSortIndex].innerText ||\n    children[idx].innerText || \n    children[idx].classList[0] || \n    children[idx].textContent;\n  return valueToSortOn;\n}\n\nconst comparer = function(idx, asc, headerSortIndex, wide) { return function(a, b) { return function(v1, v2) {\n      const isNumericallyComparible = v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2);\n      return isNumericallyComparible ? v1 - v2 : v1.toString().localeCompare(v2.toString());\n    }(getCellValue(asc ? a : b, idx, headerSortIndex, wide), getCellValue(asc ? b : a, idx, headerSortIndex, wide));\n}};\n\n// https://stackoverflow.com/questions/14267781/sorting-html-table-with-javascript/14268260\n\nconst makeSortable = (document, callback, wide) => {\n\n  Array.from(document.querySelectorAll('th > span')).forEach(function(sp) { sp.addEventListener('click', function() {\n\n          const headerSortIndex = this.innerText.toUpperCase() === 'ORDER' ? 1 : 0;\n\n          const names = [];\n          var th = this.parentElement;\n          if(th.classList[0] === 'not-sortable') return;\n          var table = th.closest('table');\n          var tbody = table.querySelector('tbody');\n          var footer = table.querySelector('tfoot');          \n\n          snapLog('Array.from(tbody.querySelectorAll(\"tr\")): ', Array.from(tbody.querySelectorAll('tr')));\n\n          Array.from(tbody.querySelectorAll('tr'))\n              .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc, headerSortIndex, wide))\n              .forEach(function(tr) { \n                if(tr !== footer) {\n                  tbody.appendChild(tr);\n                  names.push(tr.cells[0].id);\n                }\n              });        \n\n            callback(names);\n      })\n  });\n};\n\nconst flatten = array => {\n  const flattenedArray = array.reduce(\n    function(accumulator, currentValue) {\n      return accumulator.concat(currentValue);\n    },\n    []\n  );\n  return flattenedArray;\n}\n\nconst getObservableMonths = (date, span = 3) => {\n\n  const daysAway = (when, days) => {\n      let dateFromDays = date;\n      const direction = when === 'future' ? 1 : -1;\n      dateFromDays.setDate(dateFromDays.getDate() + direction * days);\n      return dateFromDays;\n  };\n\n  const startMonth = daysAway('past', 30).getMonth();\n  const thisMonth = date.getMonth() + 1;\n  const endMonth = daysAway('future', 30).getMonth() + 1;\n\n  const getMonthName = month => {    \n    const exampleDate = new Date(2000, month, 1);\n    const name = exampleDate.toLocaleString('en-uk', { month: 'long' });\n    return name;\n  }\n\n  const months = [ \n      { index: startMonth, name: getMonthName(startMonth)}, \n      { index: thisMonth, name: getMonthName(thisMonth)}, \n      { index: endMonth, name: getMonthName(endMonth)}\n    ];\n\n  return months;\n};\n\nconst getRandomInt = max => {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\nconst createSessionToken = () => {\n\n  // uuidv4\n\n  // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript#answer-2117523\n\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nconst getRandomObjectProperty = obj => {\n  if(Object.keys(obj).length === 0 && obj.constructor === Object) return {};\n  const keys = Object.keys(obj);\n  const index = Math.floor(Math.random() * keys.length);\n  const key = keys[index];\n\treturn { key, value: obj[key] };\n};\n\nconst toCamelCase = sentenceCase => {\n  if(sentenceCase === undefined) return '';\n  var out = \"\";\n  sentenceCase.split(\" \").forEach(function (el, idx) {\n      var add = el.toLowerCase();\n      out += (idx === 0 ? add : add[0].toUpperCase() + add.slice(1));\n  });\n  return out;\n};\n\nconst fromCamelCase = str => {\n  if(str === undefined) return '';\n  return str.replace(/([a-z])([A-Z])/g, '$1 $2').toLowerCase();\n};\n\nconst parseToLowerCase = value => {\n  if(value === undefined || value === null) return '';\n  else if(typeof value === 'object') return value;\n  else return !!value ? value.toLowerCase() : '';\n};\n\nconst hasClass = (elem, className) => {\n  if(!elem) return false;\n    const classArray = [ ...elem.classList ];\n    const isTrue = classArray.find(c => c === className);\n    return !!isTrue;\n};\n\nconst toggleClass = (elem, className) => {\n  if(!elem) return;\n  hasClass(elem, className) \n    ? elem.classList.remove(className)\n    : elem.classList.add(className);\n};\n\nconst removeClass = (elem, className) => {\n  if(hasClass(elem, className)) {\n      elem.classList.forEach(c => {\n          if(c === className) {\n              elem.classList.remove(c);\n          }\n      });\n  }\n};\n\nconst convertTraitKeyToUnitKey = traitKey => {\n  let conversion = traitKey.replace('_', ' ');\n  return toCamelCase(conversion);\n};\n\nexport const utils = {\n  encodeQuery,\n  timer, \n  shuffleArray,\n  randomiseSelection,\n  onlyUnique,\n  sortBy,\n  sortAlphabeticallyBy,\n  calcItemIndex,\n  capitaliseFirst,\n  capitaliseAll,\n  makeSortable,\n  flatten,\n  getObservableMonths,\n  getRandomInt,\n  createSessionToken,\n  getRandomObjectProperty,\n  toCamelCase,\n  fromCamelCase,\n  parseToLowerCase,\n  hasClass,\n  removeClass,\n  toggleClass,\n  convertTraitKeyToUnitKey\n};"],"sourceRoot":""}