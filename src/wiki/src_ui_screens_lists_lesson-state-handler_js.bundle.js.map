{"version":3,"sources":["webpack://learn-the-planet/./src/api/glossary/lichen.js","webpack://learn-the-planet/./src/api/snapdragon/infraspecifics.js","webpack://learn-the-planet/./src/api/snapdragon/non-taxa.js","webpack://learn-the-planet/./src/api/traits/traits-for-tests.js","webpack://learn-the-planet/./src/redux/actions/action-creators.js","webpack://learn-the-planet/./src/redux/observe-store.js","webpack://learn-the-planet/./src/redux/subscriptions.js","webpack://learn-the-planet/./src/snapdragon-config/lesson-plans.js","webpack://learn-the-planet/./src/snapdragon-config/plans/landscape/landscape-custom.js","webpack://learn-the-planet/./src/snapdragon-config/plans/landscape/landscape-fungi.js","webpack://learn-the-planet/./src/snapdragon-config/plans/landscape/landscape-static.js","webpack://learn-the-planet/./src/snapdragon-config/plans/portrait/portrait-static.js","webpack://learn-the-planet/./src/snapdragon-config/screen-layouts.js","webpack://learn-the-planet/./src/snapdragon-config/screen-panels.js","webpack://learn-the-planet/./src/snapdragon-config/snapdragon-iconic-taxa.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/bonus-test-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/birdsong-test.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/definition-test.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/lookalike-test.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/trait-test.js","webpack://learn-the-planet/./src/snapdragon-engine/lesson-plan-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/lesson-planner.js","webpack://learn-the-planet/./src/snapdragon-engine/pool-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/provider/provider-test-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/round-plan-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/round-planner.js","webpack://learn-the-planet/./src/ui/create-guide-modal/categories.js","webpack://learn-the-planet/./src/ui/create-guide-modal/common/save-guide.js","webpack://learn-the-planet/./src/ui/create-guide-modal/common/snapdragon-switch.js","webpack://learn-the-planet/./src/ui/create-guide-modal/create-guide.js","webpack://learn-the-planet/./src/ui/create-guide-modal/createGuide.js","webpack://learn-the-planet/./src/ui/create-guide-modal/inat-user.js","webpack://learn-the-planet/./src/ui/create-guide-modal/initialise-lesson.js","webpack://learn-the-planet/./src/ui/create-guide-modal/location.js","webpack://learn-the-planet/./src/ui/create-guide-modal/species-search-options.js","webpack://learn-the-planet/./src/ui/dom.js","webpack://learn-the-planet/./src/ui/helpers/function-lookups.js","webpack://learn-the-planet/./src/ui/helpers/icon-handler.js","webpack://learn-the-planet/./src/ui/helpers/image-handler.js","webpack://learn-the-planet/./src/ui/helpers/inat-autocomplete.js","webpack://learn-the-planet/./src/ui/helpers/score-handler.js","webpack://learn-the-planet/./src/ui/helpers/test-handler.js","webpack://learn-the-planet/./src/ui/helpers/traits-handler.js","webpack://learn-the-planet/./src/ui/screens/bonus/bonus-specimen-tiles.js","webpack://learn-the-planet/./src/ui/screens/bonus/bonus-test.js","webpack://learn-the-planet/./src/ui/screens/cards/card.js","webpack://learn-the-planet/./src/ui/screens/cards/non-taxon-card-specimen-tiles.js","webpack://learn-the-planet/./src/ui/screens/cards/non-taxon-card.js","webpack://learn-the-planet/./src/ui/screens/cards/taxon-card.js","webpack://learn-the-planet/./src/ui/screens/cards/test-card.js","webpack://learn-the-planet/./src/ui/screens/common/badge.js","webpack://learn-the-planet/./src/ui/screens/common/calendar.js","webpack://learn-the-planet/./src/ui/screens/common/image-slider.js","webpack://learn-the-planet/./src/ui/screens/common/inat-box.js","webpack://learn-the-planet/./src/ui/screens/common/info-detail-slider.js","webpack://learn-the-planet/./src/ui/screens/common/info-slider.js","webpack://learn-the-planet/./src/ui/screens/common/language-selection.js","webpack://learn-the-planet/./src/ui/screens/common/linked-taxa.js","webpack://learn-the-planet/./src/ui/screens/common/look-alikes.js","webpack://learn-the-planet/./src/ui/screens/common/rights-attribution.js","webpack://learn-the-planet/./src/ui/screens/common/taxa-box.js","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-text.js","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-video.js","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro.js","webpack://learn-the-planet/./src/ui/screens/landscape/specimen-tiles.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-custom.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-edit.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-event-handler.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-header.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-scroll-handler.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-state-handler.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-state-helper.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson.js","webpack://learn-the-planet/./src/ui/screens/lists/species-list-definition-insert.js","webpack://learn-the-planet/./src/ui/screens/lists/species-list.js","webpack://learn-the-planet/./src/ui/screens/lists/species-table.js","webpack://learn-the-planet/./src/ui/screens/lists/video-handler.js","webpack://learn-the-planet/./src/ui/screens/media/landscape/media-players.js","webpack://learn-the-planet/./src/ui/screens/multichoice/horizontal-strips.js","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question.js","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler.js","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question.js","webpack://learn-the-planet/./src/ui/screens/multichoice/multi-strips.js","webpack://learn-the-planet/./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined.js","webpack://learn-the-planet/./src/ui/screens/progress/history.js","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-handler.js","webpack://learn-the-planet/./src/ui/screens/progress/score-summary.js","webpack://learn-the-planet/./src/ui/screens/progress/summary.js","webpack://learn-the-planet/./src/ui/screens/text-entry/species-text-entry.js","webpack://learn-the-planet/./src/ui/screens/text-entry/text-complete.js","webpack://learn-the-planet/./src/ui/screens/text-entry/text-entry.js","webpack://learn-the-planet/./src/ui/setup/next-item.js","webpack://learn-the-planet/./src/ui/setup/next-layout.js","webpack://learn-the-planet/./src/ui/setup/next-lesson.js","webpack://learn-the-planet/./src/ui/setup/setup-handler.js","webpack://learn-the-planet/./src/wikipedia/wiki-modal.js","webpack://learn-the-planet/./src/wikipedia/wiki.js","webpack://learn-the-planet/./src/xeno-canto/birdsong.js","webpack://learn-the-planet/./src/ui/css/groups/create-guide.css","webpack://learn-the-planet/./src/img/powered_by_google_on_white_hdpi.png","webpack://learn-the-planet/./src/ui/create-guide-modal/categories-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/common/actions-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/inat-user-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/initialise-lesson-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/location-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/species-search-options-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/species-summary-template.html","webpack://learn-the-planet/./src/ui/screens/cards/card-template.html","webpack://learn-the-planet/./src/ui/screens/cards/non-taxon-card-template.html","webpack://learn-the-planet/./src/ui/screens/cards/taxon-card-template.html","webpack://learn-the-planet/./src/ui/screens/cards/test-card-template.html","webpack://learn-the-planet/./src/ui/screens/common/audio-media-template.html","webpack://learn-the-planet/./src/ui/screens/common/badge-template.html","webpack://learn-the-planet/./src/ui/screens/common/calendar-template.html","webpack://learn-the-planet/./src/ui/screens/common/id-box-template.html","webpack://learn-the-planet/./src/ui/screens/common/image-slider-template.html","webpack://learn-the-planet/./src/ui/screens/common/inat-box-template.html","webpack://learn-the-planet/./src/ui/screens/common/info-detail-slider-template.html","webpack://learn-the-planet/./src/ui/screens/common/info-slider-template.html","webpack://learn-the-planet/./src/ui/screens/common/language-selection-template.html","webpack://learn-the-planet/./src/ui/screens/common/linked-taxa-lookalike-template.html","webpack://learn-the-planet/./src/ui/screens/common/linked-taxa-relationship-template.html","webpack://learn-the-planet/./src/ui/screens/common/look-alikes-link-template.html","webpack://learn-the-planet/./src/ui/screens/common/rights-attribution-template.html","webpack://learn-the-planet/./src/ui/screens/common/taxa-box-template.html","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-text-template.html","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-video-template.html","webpack://learn-the-planet/./src/ui/screens/landscape/specimen-tiles-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-edit-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-header-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-template.html","webpack://learn-the-planet/./src/ui/screens/lists/species-list-definition-insert.html","webpack://learn-the-planet/./src/ui/screens/lists/species-table-template.html","webpack://learn-the-planet/./src/ui/screens/multichoice/horizontal-strips.html","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html","webpack://learn-the-planet/./src/ui/screens/multichoice/multi-strips-template.html","webpack://learn-the-planet/./src/ui/screens/multichoice/multi-strips-with-images.html","webpack://learn-the-planet/./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-no-row-template.html","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-row-template.html","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-template.html","webpack://learn-the-planet/./src/ui/screens/text-entry/text-complete-template.html","webpack://learn-the-planet/./src/ui/screens/text-entry/text-entry-portrait-templates.html","webpack://learn-the-planet/./src/ui/screens/text-entry/text-entry-templates.html","webpack://learn-the-planet/./src/ui/css/groups/create-guide.css?b011"],"names":["lichen","term","definition","wiki","level","branch","image","url","technical","infraspecifics","name","subspecies","variety","names","eol","group","form","nonTaxaGroup","LICHEN_FORM","getNonTaxa","SD","id","type","l","quickId","language","traits","value","LOW","examples","BIRDS_NEST","BIOINDICATOR","genera","HIGH","getTraitsForTests","alreadyTestedTraits","item","Object","excludedTraits","traitsHandler","trait","traitsPool","help","question","utils","answers","overrides","typedItemTraits","makeActionCreator","data","meta","changeLessonPlans","types","changeLessonPlan","nextLesson","updateScore","updateTraitScore","nextLayout","nexItem","endRevision","updateHistory","userProgress","updateCollection","resetCollection","updateCollections","changeCollectionItems","nextRound","nextLevel","updateConfig","stopStartLesson","selectCollection","traitValuesHandler","updateUnits","updateUser","updateLesson","saveLesson","removeSavedLesson","updateVideoPlayer","createQuickFire","updateQuickFire","createGlossary","clickEvent","updateDecks","updateDeck","nextDeck","nextCard","updateDeckState","updateDeckScore","updateDeckScoreHistory","updateDeckSettings","clearDeckScoreHistory","boundchangeLessonPlan","store","boundchangeLessonPlans","boundNextLesson","boundAsyncNextLesson","asyncNextLesson","dispatch","boundUpdateScore","boundUpdateTraitScore","boundNextLayout","boundNextItem","delay","boundEndRevision","boundUpdateHistory","boundSaveUserProgress","boundUpdateCollection","boundResetCollection","boundUpdateCollections","boundUpdateCollectionItems","boundNextRound","boundNextLevel","boundUpdateConfig","boundStopStartLesson","boundSelectCollection","boundUpdateLanguage","boundUpdateUnits","boundUpdateUser","boundUpdateLesson","boundSaveLesson","boundRemoveSavedLesson","boundUpdateVideoPlayer","boundCreateQuickFire","boundUpdateQuickFire","boundCreateGlossary","boundClickEvent","boundUpdateDecks","boundUpdateDeck","boundNextDeck","boundNextCard","boundUpdateDeckState","boundUpdateDeckScore","boundUpdateDeckScoreHistory","boundUpdateDeckSettings","boundClearDeckScoreHistory","actions","observeStore","currentState","hasStateSignificantlyChanged","nextState","select","areEqual","onChange","handleChange","unsubscribe","subscriptions","add","sub","existingSub","getByName","role","remove","subscription","removeByName","getByRole","getAll","removeAllQuizScreenSubs","screens","removeAllQuizLayoutSubs","checkRequired","userAction","state","config","isRequired","isReviewingLesson","lessonStateHelper","reviewLayouts","contains","layout","addSubs","func","funcByName","screen","isSubscriptionRequired","index","printAllSubs","snapLog","landscapeBirds","clone","portraitBirds","L","portraitFungi","portrait","portraitLichens","portraitCustom","portraitCustom2","lessonPlans","landscapeCustom","levels","layouts","bonusLayouts","landscapeCustom2","landscapeFungi","landscapeLichens","description","landscapeStatic","landscapeStaticTaxonGroup","landscapeStaticProviderQuestionsOnly","portraitStatic","portraitStaticTaxonGroup","specimenImages","panels","speciesCard","vernaculars","scientifics","text","leaf","leafName","family","familyStrips","taxon","nonTaxon","textComplete","cultivar","cultivarCard","epithets","definitions","specimenCommonMatch","specimenLatinMatch","definitionCard","traitProperty","symbioticProperty","lookalikeProperty","traitImages","nonTaxonSpecimenTiles","mixedSpecimenQuestions","mixedSpecimensLeft","mixedSpecimensRight","history","summary","birdsong","mediaPlayers","mixedTraitLeft","mixedTraitRight","providerHorizontalStripQuestions","speciesIdentification","mixedSpeciesMatch","score","kind","points","given","requirement","speciesRevision","taxonRevision","nonTaxonRevision","definitionRevision","latinToCommonMatch","commonToLatinMatch","speciesIdentificationMatch","textCompleteGenus","multiSpecimenCommonMatch","multiSpecimenLatinMatch","traitPropertyMatch","bonus","lookalikePropertyMatch","symbioticPropertyMatch","familyMatch","cultivarMatch","familyStripsMatch","genusEntry","speciesEntry","speciesGenusEntry","leafEntry","textCompleteSpecies","commonEntry","latinEpithets","glossaryTerms","cultivars","mixedSpecimenImages","mediaMatch","mixedTraitImages","providerHorizontalStrip","propertyTrait","domain","all","common","iconicTaxa","getTests","itemsInThisRound","itemIndex","addLayoutToTest","lessonReadyTests","traitTest","lessonName","levelName","getTraitTypeTests","resolve","getTraitTests","getTraitTypeBirdsongTests","getBirdsongTests","getTraitTypeLookalikeTests","getLookalikeTests","getDefinitionTypeTests","getDefinitionTests","traitTests","birdsongTests","lookalikeTests","definitionTests","getResolvedPromises","promises","Promise","testGroups","tests","g","flatten","bonusHandler","getBirdsongTest","birds","take","bird","birdNames","vernacularName","binomial","getDefinitionTest","collection","glossary","number","matchTaxon","alternatives","d","init","getLookalikeTest","getItemLookalikes","lookaliketraits","lookalikes","getLookalikes","firestore","units","getNextRoundLayouts","lesson","getCurrentLevelFromLessonPlan","getLayouts","currentLevel","goToNextLevelThatHasLayouts","iterateOverLevelsCheckingForAvailableLayouts","increment","levelId","createLessonPlan","rounds","Math","nextRoundLayoutTemplates","createNextRound","lessonPlanner","getPoolItems","poolSize","otherItems","i","getItemsFromCollection","rank","findRankByIconicTaxon","taxonicMatches","isLichen","speciesPool","ci","isException","items","logError","getItemLayouts","itemQuestions","species","sp","speciesQuestions","sq","itemsQuestions","questionIds","providerHandler","getRoundItems","start","currentRound","end","roundHandler","lessonPlan","moduleSize","itemsCountToDate","itemsLeft","layoutsToAdd","roundItemNames","mixedTraitHandler","requiredTraitValues","requiredTraits","traitsToIgnore","addLayout","t","speciesName","providerQuestions","providerLayouts","provider","lessonLayouts","itemIndices","bonusTests","summaryLayout","parent","DOM","rightBody","layoutIndex","scores","roundScoreCount","accumulator","updatedLessonPlan","updatedCollection","updatedLesson","renderCategories","createGuide","filterSelectedClass","template","document","modal","renderTemplate","icons","filterId","icon","setTimeout","fungiIcon","category","filter","event","commonName","saveGuide","update","chosen","handleSaveEvent","splitLocation","returnTaxonIcon","switchHandler","position","startingPosition","switchControl","idSwitch","leftText","rightText","switcher","callback","createGuideHandler","guide","handleNextStepAction","parseInt","step","element","handler","handlePreviousStepAction","prevStep","enums","onCloseModalListeners","listener","onCreateCustomLesson","CreateGuide","title","nextStep","disabled","className","nextSteps","s","ps","options","renderSpeciesSearchOptions","renderLocation","renderInatUser","chosenOnes","renderSpeciesPicker","container","setConfig","initialiseLesson","option","next","previousStepProperties","byType","inatIdentityInput","handlerInatIdentityInput","autocompleteRef","inatAutocomplete","e","saveInatId","switchCallback","param","input","key","collections","feedback","count","interval","setInterval","nextStepActionArrow","viewGuideIcon","back","viewTaxaIcon","renderLessonSummary","clearTimeout","requestType","requestArgs","createGuideModal","Modal","editSpecies","selectedSpeciesDisplay","speciesInGuideEditor","editableCollectionName","lessonStateHandler","initLesson","counter","isLessonPaused","collectionToLoad","updatedCounter","OrdinalSuffixOf","j","k","request","listenToInatRequests","c","taxa","initPicker","addingExtraSpecies","updatedConfig","hasVideo","video","terms","locationPlace","months","month","observableMonths","defaultNoOfRecords","noOfRecords","defaultLocationTxt","setLocationLongLatBtn","getPlace","place","locationPlaceInput","handleLocationPlaceInput","saveLocation","range","rangeTxt","slider","updateSlider","currentType","selectedText","selectedId","geocoderResult","lat","long","GooglePlaceDetails","header","nextStepName","lessonOptions","languagePicker","warning","leftGrid","leftHeader","leftBody","leftFooter","leftHeaderTxt","specimenRptr","rightGrid","rightHeader","rightHeaderTxt","rightHeaderScoreTxt","rightRptrSummary","rightBodyBottom","rightFooter","functions","renderNonTaxonCardSpecimenTiles","renderTextEntry","renderCard","renderMultiStrips","renderSummary","renderHistory","renderBonusTest","renderTaxonCard","renderNonTaxonCard","renderCompleteText","renderBonusSpecimenTiles","renderMixedSpecimenQuestion","renderMediaPlayers","renderMixedTraitQuestion","renderHorizontalStrips","match","mushroomIcon","renderIcon","taxonomy","iconicIconContainer","rootNode","iconicIcon","classes","matchIcon","returnIcon","matchRank","stripImageUrlOfScaleAndPrefix","prefix","img","part","imageUseCases","SPECIES_LIST","SPECIES_CARD","TAXON_CARD","SPECIES_SPECIMENS","NON_TAXON_CARD","VISUAL_MATCH","MIXED_SPECIMENS","CAROUSEL","TEXT_ENTRY","ACTUAL_SIZE","SPECIES_GRID","denormaliseImages","denormalisedImages","imageMatch","src1","src2","isActiveImage","prepImageForCarousel","scaleImage","itemName","itemCommon","rightsHolder","photographersName","medium","prepImagesForCarousel","images","modalImagesHandler","modalImageHandler","handleImageSelectionFromList","displayNameType","selectedItem","itemProperties","selectedItemImage","selectedImage","dataset","imageSlider","identifier","displayName","MIN_LENGTH","getAutocompleteBy","users","label","user","photo","prediction","place_id","GoogleAutocomplete","projects","autocomplete","fetch","getUserSuggestions","getPlaceSuggestions","getProjectSuggestions","onSelect","rb","minLength","debounceWaitMs","scoreHandler","genericScoreHandler","blockScoreHander","stripScoreHandler","imageScoreHandler","simpleScoreHandler","renderScoreHTMLResponse","html","response","showResponseToAnswerHandler","questionText","continueLessonHandler","btn","window","bindScore","markTest","scoreUpdateTimer","correct","incorrect","success","itemId","_score","answer","target","layoutCount","test","responseTxt","labelTxt","handleClickEvent","answerNode","answerIndex","vernacular","answeredIndex","stripAnswer","strip","stripAnswerIndex","stripAnswerName","_callback","selected","once","tile","cleanText","isAnswerEqualToQuestion","eqValues","compose","isAnswerCorrect","isCorrect","alternativeIsCorrect","isTraitAnswerCorrect","doArraysHaveSameValues","getRandomTrait","allowedTraits","obj","getTraitsPoolForUnits","getTraitsPoolForRoles","enumKey","getTraitValues","traitKeyParts","traitValues","getTraitsPool","getSetOfTraitAnswers","traitSet","sets","pool","a","exists","set","getTraitByKey","getTraitValueByKey","hasTraitPropeties","getLinkedTaxaTraits","taxaTraits","getTraitsToExclude","handleUnit","unit","convertTraitsToNameValuePairsArray","includedTraits","lookalike","getNMultiplesFromArray","arra","result_set","x","result","bonusLayout","lookalikesCount","noOfImagesPerItem","renderSpecimenTiles","mode","isInCarousel","getItemWithProps","getItem","itemWithProps","el","prev","renderCommonParts","renderPortrait","renderLandscape","src","getBirdSong","inatNode","renderInatDataBox","renderCalendar","lookalikeSpecies","parentScreen","player","iframe","elm","iconicTaxon","renderTaxaBox","familyName","familyVernacularName","infoSlider","renderBadge","lines","Array","hr","attributions","attribution","indicators","indicator","subscribeToNonTaxaSelection","keyTrait","nonTaxa","nt","prepImages","itemImagesArray","itemImages","portraitImagesNode","wikiNode","lookup","idNode","definitionNode","nameNode","renderWikiModal","renderWiki","modalCarousel","transition","speciesTaxon","familyStats","occurrences","identification","context","alt","families","toxic","notableMembers","taxonInfoSlider","membersCount","members","list","member","console","renderTestCardTemplate","progressLink","progressLinkClickHandler","summaryContainer","renderSummaryCard","renderScoreSummary","toggleScreens","hideCurrentCard","screenTwo","toggleStatementAndQuestion","testCardContainer","testCard","testCardIcon","card","showNextCard","speciesContainer","taxonContainer","renderSpeciesCard","speciesIcon","taxonCard","taxonIcon","testContentParent","statement","iterations","clearInterval","languageNames","r","badge","country","getInatPlaceId","places","placeId","getENShortMonth","getMonth","getHistogram","monthlyStats","histogram","season","currentMonthIndex","monthNodes","node","selectActiveImage","elemSrc","activeNode","handleRightsAttribution","carouselControlHandler","sliderArgs","imageSideBySlider","sideBySlider","slides","slide","originalImageLink","eolPage","wikiLink","getInatTaxonStats","stats","taxonId","stat","taxonCount","taxonLink","itemStats","placeTaxonCount","establishment","renderInfoDetails","activeTraitKey","linkedTaxa","details","detail","renderInfoSlider","activeTrait","traitCount","control","changeTraitHandler","activeTraitValue","convertedTraits","languages","taxonLanguageBtn","taxonLanguageTxt","addLinksToSpeciesCards","speciesCardLinks","link","getLinkedTaxa","addVernacularName","display","isSpecies","relationshipTraits","relationships","convertTraitsForDisplay","speciesA","speciesARole","speciesB","speciesBRole","lookalikeTraits","convertLookalikesForDisplay","speciesDescription","lookalikeDescription","addDisplayRules","relationship","renderLookalikes","readyLookalikesForRendering","isArray","lookalikeItem","scientificNames","lookalikeParent","matchTemplate","speciesComparisonLink","getTrait","xcID","mp3","licence","author","source","large","rightsAttribution","rightsLink","showAttribution","showLink","taxaBoxArgs","formatter","specific","subSpeciesCount","subspeciesBadge","textSetup","speciesCount","getSpeciesCount","speciesSummary","getSpeciesSummary","lessonIntro","handleSpeciesUpdate","videoSetup","activeLesson","record","collectionId","startAt","playAt","location","timeBeforeVideoPlayerReady","videoHandler","checkCurrentTime","checkInt","time","matchSpeciesTime","noteMatch","note","onPlayerStateChangeCallback","playerState","videoWidth","renderLessonIntro","videoPlayer","renderItemSpecimenTiles","familes","collectionItems","getImagesFromItemFamily","renderSpecimenImageTiles","acceptableScreens","pooledImages","pooledImage","uniqueImages","getUniqueImage","uniqueImage","familyImages","imageToPrep","renderCustomLesson","onLoadLessonViewState","lessons","scrollOptions","left","top","behavior","reviewLink","module","chevron","youtubeLessonIcon","renderEditLesson","isEmpty","onLoadLessonsViewState","onClickViewState","isYoutubeIcon","isChevronIcon","row","lessonId","speciesList","hideOtherContentAndRevertChevrons","isSpeciesListAvailable","isSpeciesListHidden","lessonVideoState","iconIsChevron","requiresSpeciesList","revealSpeciesList","hideSpeciesList","onLessonIconClickHandler","isItemActive","lessonYoutubeIcons","lessonsIcon","siblingChevron","loadAndDisplaySpeciesList","onLessonTitleClickHandler","onReviewClickHandler","reviewLinkHandler","spinner","upChevrons","chevronLessonId","child","highlightActiveLesson","rows","lessonListEventHandler","renderLessonListHeader","sibling","siblingsBefore","siblings","before","scrollToTitle","standardBlock","parseFloat","getComputedStyle","scroll","lessonListScrollHandler","renderLessons","tsa","tsb","b","renderLesson","createCustomLessonBtn","youtubeLessonIcons","highlightActiveLessonHandler","chevrons","reviews","quickFire","quickFireState","linkFromLesson","changeRequest","args","changeLessonState","savedLesson","getLessonState","userProgressState","saveUserProgressState","addExtraSpeciesSelection","renderSpeciesList","callingParentContainer","_lessonState","stateCounter","newLessonCounter","collectionHandler","log","extraSpecies","collectionExtension","isNextRound","progressState","recordUserAction","getIsReviewingLesson","isNotReviewingLesson","overrideLesson","purgeLesson","persistor","clearGuide","initialConfig","getCollectionToLoad","resume","currentCollection","getLatestCounter","getUserLessonState","restoredLesson","saved","renderReview","progressBar","review","reviewLinkBtn","currentlyActiveRow","onSpeciesChangeHandler","tr","currentlyActiveSpecies","openNoteHandler","insert","noteText","traitEnums","openAccordionHandler","accordion","openSpeciesDescriptionHandler","closeAccordionHandler","userClickHandlers","listItemImages","itemImage","accordions","accordionHandler","youtubeIcons","activeIcon","cardModal","traitCardLinks","taxonCardLinks","nthChild","taxonIcons","noWrongAnswersForThisSpecies","anyWrongAnwers","buildTable","overrideParent","table","enableScroll","activateYoutubeIcon","closeOpenAccordions","activeAccordion","activeYouTubeIcon","td","scrollIntoView","rowHeight","noOfRows","currentIndex","nextItem","prevTaxon","nextTaxon","openAccordions","inactiveAccordion","inActiveYouTubeIcon","currentDescriptions","wide","getTraitName","traitName","keyTratLinkClass","getOrderLinkClass","orderLinkClass","getIconicTaxonIcon","iconicTaxonIcon","hideFungiIcon","genus","genusLinkClass","shortName","snapIndex","license","small","order","keyTraits","vn","span","tbody","caption","thead","headerRow","imageHeader","speciesHeader","familyHeader","traitNameHeader","iconicTaxonHeader","accordionHeader","sortableCalback","isReady","onSpeciesTimeMatchListeners","onNoteTimeMatchListeners","onSpeciesTimeMatch","onNoteTimeMatch","onSpeciesPlayRequestListeners","onSpeciesPlayRequest","onPlayerReadyListeners","onPlayerStateChangeListeners","subscribeToPlayerStateChange","isPlayerReady","readyPlayer","onPlayerReady","onPlayerStateChange","YT","playerVars","events","playVideoFrom","states","setVideoState","isVideoPlayerReady","doIdsMatch","videoId","destroyPlayer","newPlayerTime","playerRecords","p","pausedAt","getPlayerTime","isAudio","providerQuestion","headerClassName","strips","questionCount","clue","renderMixedSpecimenImagesAndQuestion","onTraitsReadyListeners","onTraitsReady","onTraitClickedListeners","onTraitClicked","getMatchingTrait","layoutTraits","v","fetchTraits","multiples","pendingScore","continueLessonBtn","onClickTileHandler","tiles","defaultQueryLimit","defaultLanguage","render","helpDefault","renderBinomialQuestions","buildQuestion","italicise","renderVernacularQuestions","renderIdQuestions","random","alternativeFamilies","f","epithet","indices","otherFamilies","otherFamiliesLatinNames","otherFamiliesCommonNames","of","renderBirdsong","content","getPortraitImages","multiImages","srcs","boundScore","layer","selectedName","answerIcon","wrongItem","getLessonScores","historyIsUpToDate","stateScore","getSummaryRows","_r","getAnswer","scoreSummaryHandler","isObj","hasImage","isTrue","isWrongAnswer","savedScore","actionLinks","renderScoreSummaryRow","handleContinueLesson","handleNewLesson","actionLink","noQuestionsText","q","renderInput","questionTxt","givenTaxon","numerOfItems","itemTaxons","itemTaxon","block","callbackTime","iconColour","button","inputTxt","helpTxt","answerBtn","scoreEventHandler","loseFocusMobileHandler","letterBlocks","letter","letters","deleteLetter","activeBlocks","activeLetters","activeBlock","lastLetter","indexInInput","newValue","correctBlocks","letterIndex","blocks","keyboardBtn","blockArray","entries","entry","selectedBlock","setupHandler","planId","plan","asyncFunc","props","required","actionUpdate","SAVE_LESSON_PROGRESS","awaitPromise","style","root","formatUrl","ranks","encode","fetchWiki","method","errorPromise","cleanEntry","cleaned","formatWiki","exceptions","wikiSearchTerm","searchTerm","fetchAsync","endpoint","loadPlayer","playerId","recording"],"mappings":"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","file":"src_ui_screens_lists_lesson-state-handler_js.bundle.js","sourcesContent":["export const lichen = [\n    {\n        term: \"Lichen\",\n        definition: \"Composite organism of algae or cyanobacteria (or rarely, both), fungi and yeast living in a mutualistic relationship.\",\n        wiki: \"https://en.wikipedia.org/wiki/Lichen\",\n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Fruticose\",\n        definition: \"Growing like tuft or multiple-branched leafless mini-shrub (beardy), upright or hanging down, flat or round 3D branches.\",\n        wiki: \"https://en.wikipedia.org/wiki/Fruticose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Foliose\",\n        definition: \"Having flat, 2D leaf-like structures.\",\n        wiki: \"https://en.wikipedia.org/wiki/Foliose_lichen\",\n        level: 2,\n        image: {\n            url: 'https://content.eol.org/data/media/58/87/e8/509.25630291.260x190.jpg'\n        },\n        branch: 'classification'\n    },\n    {\n        term: \"Crustose\",\n        definition: \"Forming a crust that strongly adheres to a substrate (crusty).\",\n        wiki: \"https://en.wikipedia.org/wiki/Crustose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Leprose\",\n        definition: \"Having a powdery or granular surface.\",\n        wiki: \"https://en.wikipedia.org/wiki/Leprose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Squamulose\",\n        definition: \"Composed of small, often overlapping squamules( scales).\",\n        wiki: \"https://en.wikipedia.org/wiki/Squamulose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Soredium\",\n        definition: \"Common reproductive structures of lichens.\",\n        wiki: \"https://en.wikipedia.org/wiki/Soredium\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Epiphyte\",\n        definition: \"An organism that grows on the surface of a plant and derives its moisture and nutrients from the air, rain, water or surrounding debris.\",\n        wiki: \"https://en.wikipedia.org/wiki/Epiphyte\",\n        branch: 'classification'\n    },\n    {\n        term: \"Gametophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. It is the sexual phase (see Sporophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Gametophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Sporophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. In seed plants it is the roots, stem, leaves, cones and flowers (see Gametophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Sporophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Thallus\",\n        definition: \"Nonreproductive, undifferentiated tissue, or vegetative body part of a lichen. Usually visually prominent.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Thallus type\",\n        definition: \"Means of distinuguishing lichen e.g. foliose, crustose.\", \n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Squamule\",\n        definition: \"One of the scalelike lobes of the thallus of a lichen.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Podetium\",\n        definition: \"The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Apothecium\",\n        definition: \"Wide, open, saucer-shaped or cup-shaped fruit body. Sessile and fleshy.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Rhizine',\n        definition: 'Multiceullar, root-like structures which anchor licen to substrate.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Erhizinate',\n        definition: 'Without rhizines.',\n        technical: 'true',\n        branch: 'general'\n    },\n    {\n        term: 'Hapter',\n        definition: 'Short, peg-like attachments of the lower surface of lichen to the substrate on which they grow.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Common reproductive structures of lichen.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Cortex (lichen)',\n        definition: 'Composed of closely packed fungal hyphae that protects thallus from water loss (evaporation).',\n        branch: 'morphology'\n    },\n    {\n        term: 'Holdfast',\n        definition: 'Means by which a (bushy) lichen is attached to the substrate.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Disc',\n        definition: 'Spore-bearing part of the fruiting body of a lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lobe',\n        definition: 'Leaf-like part of a leafy (foliose) lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Medulla',\n        definition: 'Fungal part of the thallus situated below the skin like upper cortex.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Mycobiont',\n        definition: 'Fungal component of a lichen.',\n        branch: 'general'\n    },\n    {\n        term: 'Photobiont',\n        definition: 'Photosynthetic partner in a lichen (alga or cyanobacterium).',\n        branch: 'general'\n    },\n    {\n        term: 'Cyanobacteria',\n        definition: 'Phylum of bacteria that obtain their energy through photosynthesis. They produce oxygen.',\n        branch: 'classification'\n    },\n    {\n        term: '(Green) Algae',\n        definition: 'Heterogeneous grouping of eukaryotes photosynthesis',\n        branch: 'classification'\n    },\n    {\n        term: 'Placodioid',\n        definition: 'Crustose lichen which radiates out from its centre.',\n        wiki: 'https://en.wikipedia.org/wiki/Placodioid_lichen',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Pruinescence',\n        definition: 'A \"frosted\" or dusty looking coating on top of a surface.',\n        wiki: 'https://en.wikipedia.org/wiki/Pruinescence',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lecanorine',\n        definition: 'Shaped like a plate with a surrounding ring similar tissue to main non-fruiting body (after genus Lecanora).',\n        wiki: 'https://en.wikipedia.org/wiki/Lecanorine_lichen',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Apothecium',\n        definition: 'Wide, open, saucer-shaped or cup-shaped fruit body.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascocarp#Apothecium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascus',\n        definition: 'Spore-bearing cell produced in ascomycete fungi.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascus',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascomycota',\n        definition: '(Ascomycetes or Sac fungi) One of two main fungi divisions (phylum), characterised by spore-containing ascus. Majority of fungal symbionts in lichens are ascomycetes',\n        wiki: 'https://en.wikipedia.org/wiki/Ascomycota',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Basidiomycota',\n        definition: '(Basidiomycetes (Mushrooms)) Reproduce sexually via formation of specialised end cells (basidia) bearing external meiospores.',\n        wiki: 'https://en.wikipedia.org/wiki/Basidiomycota',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Powdery (asexual) reproductive structure (propagule) composed of fungal hyphae wrapped around the photobiont.',\n        wiki: 'https://en.wikipedia.org/wiki/Soredium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Isidium',\n        definition: 'Vegetative (asexual) reproductive structure. Outgrowths from the thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Isidium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Podetium',\n        definition: 'The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Podetium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n];","export const infraspecifics = [\n    {\n        name: 'Brassica rapa',\n        subspecies: [\n            {\n                variety: 'chinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Bok choy\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Pak choi\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'rapa',\n                names: [\n                    {\n                        \"vernacularName\": \"Turnip\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'oleifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Field mustard\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'pekinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Chinese cabbage\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Wombok\",\n                        \"language\": \"en\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        name: 'Brassica oleracea',\n        variety: 'oleracea',\n        subspecies: [\n            {\n                variety: 'oleracea',\n                names: [\n                    {\n                        \"vernacularName\": \"Wild cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Brassica_oleracea',\n                        eol: 'http://eol.org/pages/1283630/overview'              \n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'alba',\n                names: [\n                    {\n                        \"vernacularName\": \"Cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Cabbage',\n                        eol: 'http://eol.org/pages/38390/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'sabauda',\n                names: [\n                    {\n                        \"vernacularName\": \"Savoy cabbage\",\n                        \"language\": \"en\",\n                        \"wiki\": 'https://en.wikipedia.org/wiki/Savoy_cabbage',\n                        eol: 'http://eol.org/pages/5148887/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'rubra',\n                names: [\n                    {\n                        \"vernacularName\": \"Red cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Red_cabbage'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'acuta',\n                names: [\n                    {\n                        \"vernacularName\": \"Cone cabbage\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Collards\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'Acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Kale\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gemmifera',\n                group: 'Gemmifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Brussels sprouts\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gongylodes',\n                group: 'Gongylodes',\n                names: [\n                    {\n                        \"vernacularName\": \"Kohlrabi\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'italica',\n                group: 'Italica',\n                names: [\n                    {\n                        \"vernacularName\": \"Broccoli\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'botrytis',\n                group: 'Botrytis',\n                names: [\n                    {\n                        \"vernacularName\": \"Cauliflower\",\n                        \"language\": \"en\"\n                    },\n                ]\n            }\n        ]\n    }\n];","import { lichen } from 'api/glossary/lichen';\n\nexport const nonTaxaGroup = [\n    { LICHEN_FORM: 'Lichen Form' }     \n];\n\nexport const getNonTaxa = units => {\n    \n    const SD = units;\n    return [\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FRUTICOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Fruticose').definition,\n            quickId: 'Free-standing branching tubes',            \n            names: [ { language: \"en\", name: 'Fruticose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.SOIL}, ${SD.substrate.ROCKS}` },  \n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Letharia vulpina', 'Evernia prunastri', 'Ramalina polymorpha', 'Roccella phycopsis', 'Ramalina farinacea' ],\n            wiki: 'https://en.wikipedia.org/wiki/Fruticose_lichen',\n            url: '81/9d/a2/542.9769039745.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FOLIOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Foliose').definition,\n            quickId: 'Leaflike, with flat sheets of tissue not tightly bound',\n            names: [ { language: \"en\", name: 'Foliose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW },\n                { name: SD.name.USAGE, value: SD.usage.FOOD, examples: [ { language: 'en', value: 'Deer, goats, and caribou' } ] },\n                { name: SD.name.USAGE, value: SD.usage.BIRDS_NEST },\n                { name: SD.name.LIFE_SPAN, value: '30-60a' },\n                { name: SD.name.MEDICINAL_PROPERTIES, value: `${SD.medicinalProperties.ANTIBIOTIC}`},\n                { name: SD.name.CHARACTERISTIC, value: SD.characteristic.BIOINDICATOR},\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Lobaria pulmonaria', 'Xanthoria parietina'  ],\n            genera: [ 'Usnea', 'Cladonia' ],\n            wiki: 'https://en.wikipedia.org/wiki/Foliose_lichen',\n            url: '81/66/25/542.8580717370.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.CRUSTOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Crustose').definition,\n            quickId: 'Crustlike, growing tight against the substrate',\n            names: [ { language: \"en\", name: 'Crustose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.HIGH }\n            ],\n            examples: [ 'Graphis scripta', 'Diploschistes scruposus', 'Caloplaca ochracea', 'Ophioparma ventosa' ],\n            wiki: 'https://en.wikipedia.org/wiki/Crustose',\n            url: '7f/69/15/542.3258067212.260x190.jpg'\n        },\n        // {\n        //     group: nonTaxaGroup[0].LICHEN_FORM,\n        //     id: SD.thallusType.SQUAMULOSE,\n        //     type: SD.nonTaxaType.FORM,\n        //     definition: lichen.find(l => l.term === 'Squamulose').definition,\n        //     quickId: 'Tightly clustered and slightly flattened pebble-like units',\n        //     names: [ { language: \"en\", name: 'Squamulose lichen'}],\n        //     traits: [\n        //         { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n        //         { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.MEDIUM }\n        //     ],\n        //     examples: [ 'Squamarina cartilaginea', 'Vahliella leucophaea', 'Cladonia subcervicornis' ],\n        //     wiki: 'https://en.wikipedia.org/wiki/Squamulose'\n        // },\n    ]\n}","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nexport const getTraitsForTests = (units, item, alreadyTestedTraits = []) => {\n\n    if(item.traits === undefined || (Object.keys(item.traits).length === 0 && item.traits.constructor === Object)) return {};\n\n    const excludedTraits = [ ...traitsHandler.getTraitsToExclude(), ...alreadyTestedTraits, 'lookalikes', 'relationships' ].filter(et => et);\n\n    const trait = traitsHandler.getRandomTrait(item.traits, excludedTraits);\n\n    if((Object.keys(trait).length === 0 && trait.constructor === Object)) return {};\n \n    let { traitsPool, help } = \n        trait.unit \n            ? traitsHandler.getTraitsPoolForUnits(trait)\n            : trait.role\n                ? traitsHandler.getTraitsPoolForRoles(trait)\n                : traitsHandler.getTraitsPool(trait, units);\n\n    const question = trait.unit\n                        ? trait.value.join('-')\n                        : trait.value.join(',');\n                           \n    trait.value = trait.value.map(t => utils.capitaliseFirst(t));\n\n    const answers = traitsHandler.getSetOfTraitAnswers(traitsPool, trait);        \n\n    help = help || trait.key;\n\n    const overrides = { question: 'Match the trait', help, trait };\n\n    return { question, answers, overrides, typedItemTraits: item.traits };\n};  ","import { store } from 'redux/store';\nimport { types } from 'redux/actions/action-types';\n\nconst makeActionCreator = action => {\n    return function (value, meta) {\n      return { \n        type: action,\n        data: value,\n        meta: meta\n      }\n    }\n  }\n\nconst changeLessonPlans = makeActionCreator(types.CHANGE_LESSON_PLANS);\nconst changeLessonPlan = makeActionCreator(types.CHANGE_LESSON_PLAN);\nconst nextLesson = makeActionCreator(types.NEXT_LESSON);\nconst updateScore = makeActionCreator(types.UPDATE_SCORE);\nconst updateTraitScore = makeActionCreator(types.UPDATE_TRAIT_SCORE);\nconst nextLayout = makeActionCreator(types.NEXT_LAYOUT);\nconst nexItem = makeActionCreator(types.NEXT_ITEM);\nconst endRevision = makeActionCreator(types.END_REVISION);\nconst updateHistory = makeActionCreator(types.UPDATE_HISTORY)\nconst userProgress = makeActionCreator(types.SAVE_USER_PROGRESS);\nconst updateCollection = makeActionCreator(types.UPDATE_COLLECTION);\nconst resetCollection = makeActionCreator(types.RESET_COLLECTION);\nconst updateCollections = makeActionCreator(types.UPDATE_COLLECTIONS);\nconst changeCollectionItems = makeActionCreator(types.UPDATE_COLLECTION_ITEMS);\nconst nextRound = makeActionCreator(types.NEXT_ROUND);\nconst nextLevel = makeActionCreator(types.NEXT_LEVEL);\nconst updateConfig = makeActionCreator(types.UPDATE_CONFIG);\nconst stopStartLesson = makeActionCreator(types.STOP_START_LESSON);\nconst selectCollection = makeActionCreator(types.SELECT_COLLECTION);\nconst traitValuesHandler = makeActionCreator(types.UPDATE_LANGUAGE);\nconst updateUnits = makeActionCreator(types.UPDATE_UNITS);\nconst updateUser = makeActionCreator(types.UPDATE_USER);\nconst updateLesson = makeActionCreator(types.UPDATE_LESSON);\nconst saveLesson = makeActionCreator(types.SAVE_LESSON);\nconst removeSavedLesson = makeActionCreator(types.REMOVE_LESSON);\nconst updateVideoPlayer = makeActionCreator(types.UPDATE_VIDEO_PLAYER);\nconst createQuickFire = makeActionCreator(types.CREATE_QUICKFIRE);\nconst updateQuickFire = makeActionCreator(types.UPDATE_QUICKFIRE);\nconst createGlossary = makeActionCreator(types.CREATE_GLOSSARY);\nconst clickEvent = makeActionCreator(types.CLICK_EVENT);\nconst updateDecks = makeActionCreator(types.UPDATE_DECKS);\nconst updateDeck = makeActionCreator(types.UPDATE_DECK);\nconst nextDeck = makeActionCreator(types.NEXT_DECK);\nconst nextCard = makeActionCreator(types.NEXT_CARD);\nconst updateDeckState = makeActionCreator(types.UPDATE_DECK_STATE);\nconst updateDeckScore = makeActionCreator(types.UPDATE_DECK_SCORE);\nconst updateDeckScoreHistory = makeActionCreator(types.UPDATE_DECK_SCORE_HISTORY);\nconst updateDeckSettings = makeActionCreator(types.UPDATE_DECK_SETTINGS);\nconst clearDeckScoreHistory = makeActionCreator(types.CLEAR_DECK_SCORE_HISTORY);\n\nconst boundchangeLessonPlan = data => store.dispatch(changeLessonPlan(data));\nconst boundchangeLessonPlans = data => store.dispatch(changeLessonPlans(data));\nconst boundNextLesson = data => store.dispatch(nextLesson(data));\nconst boundAsyncNextLesson = data => store.dispatch(asyncNextLesson(data));\n\nconst asyncNextLesson = func => {\n  return function(dispatch) {\n    return func.then(response => {\n      return dispatch(nextLesson(response));\n    })\n  }  \n};\n\nconst boundUpdateScore = data => store.dispatch(updateScore(data));\nconst boundUpdateTraitScore = data => store.dispatch(updateTraitScore(data));\nconst boundNextLayout = data => store.dispatch(nextLayout(data));\nconst boundNextItem = data => store.dispatch(nexItem(data,{delay:500}));\nconst boundEndRevision = data => store.dispatch(endRevision(data));\nconst boundUpdateHistory = data => store.dispatch(updateHistory(data));\nconst boundSaveUserProgress = data => store.dispatch(userProgress(data));\nconst boundUpdateCollection = data => store.dispatch(updateCollection(data));\nconst boundResetCollection = data => store.dispatch(resetCollection(data));\nconst boundUpdateCollections = data => store.dispatch(updateCollections(data));\nconst boundUpdateCollectionItems = data => store.dispatch(changeCollectionItems(data));\nconst boundNextRound = data => store.dispatch(nextRound(data));\nconst boundNextLevel = data => store.dispatch(nextLevel(data));\nconst boundUpdateConfig = data => store.dispatch(updateConfig(data));\nconst boundStopStartLesson = data => store.dispatch(stopStartLesson(data));\nconst boundSelectCollection = data => store.dispatch(selectCollection(data));\nconst boundUpdateLanguage = data => store.dispatch(traitValuesHandler(data));\nconst boundUpdateUnits = data => store.dispatch(updateUnits(data));\nconst boundUpdateUser = data => store.dispatch(updateUser(data));\nconst boundUpdateLesson = data => store.dispatch(updateLesson(data));\nconst boundSaveLesson = data => store.dispatch(saveLesson(data));\nconst boundRemoveSavedLesson = data => store.dispatch(removeSavedLesson(data));\nconst boundUpdateVideoPlayer = data => store.dispatch(updateVideoPlayer(data));\nconst boundCreateQuickFire = data => store.dispatch(createQuickFire(data));\nconst boundUpdateQuickFire = data => store.dispatch(updateQuickFire(data));\nconst boundCreateGlossary = data => store.dispatch(createGlossary(data));\nconst boundClickEvent = data => store.dispatch(clickEvent(data));\nconst boundUpdateDecks = data => store.dispatch(updateDecks(data));\nconst boundUpdateDeck = data => store.dispatch(updateDeck(data));\nconst boundNextDeck = data => store.dispatch(nextDeck(data));\nconst boundNextCard = data => store.dispatch(nextCard(data));\nconst boundUpdateDeckState = data => store.dispatch(updateDeckState(data));\nconst boundUpdateDeckScore = data => store.dispatch(updateDeckScore(data));\nconst boundUpdateDeckScoreHistory = data => store.dispatch(updateDeckScoreHistory(data));\nconst boundUpdateDeckSettings = data => store.dispatch(updateDeckSettings(data));\nconst boundClearDeckScoreHistory = data => store.dispatch(clearDeckScoreHistory(data));\n\nexport const actions = {\n    boundchangeLessonPlans,\n    boundchangeLessonPlan,\n    boundAsyncNextLesson,\n    boundNextLesson,\n    boundUpdateScore,\n    boundUpdateTraitScore,\n    boundNextItem,\n    boundNextLayout,\n    boundEndRevision,\n    boundUpdateHistory,\n    boundSaveUserProgress,\n    boundUpdateCollection,\n    boundResetCollection,\n    boundUpdateCollections,\n    boundUpdateCollectionItems,\n    boundNextRound,\n    boundNextLevel,\n    boundUpdateConfig,\n    boundStopStartLesson,\n    boundSelectCollection,\n    boundUpdateLanguage,\n    boundUpdateUnits,\n    boundUpdateLesson,\n    boundSaveLesson,\n    boundRemoveSavedLesson,\n    boundUpdateVideoPlayer,\n    boundUpdateUser,\n    boundCreateQuickFire,\n    boundUpdateQuickFire,\n    boundCreateGlossary,\n    boundClickEvent,\n    boundUpdateDecks,\n    boundUpdateDeck,\n    boundNextDeck,\n    boundNextCard,\n    boundUpdateDeckState,\n    boundUpdateDeckScore,\n    boundUpdateDeckScoreHistory,\n    boundUpdateDeckSettings,\n    boundClearDeckScoreHistory\n};","export const observeStore = (store, select, onChange, domain, layout) => {\n    let currentState = null;\n    let hasStateSignificantlyChanged = false;\n\n    function handleChange() {      \n      let nextState = select(store.getState());\n\n      hasStateSignificantlyChanged = nextState !== currentState;\n\n      if(currentState && Object.is(currentState.index,0)) {            \n        let areEqual = true;\n            areEqual = areEqual && Object.is(nextState.index, currentState.index);\n            areEqual = areEqual && Object.is(nextState.isLessonPaused, currentState.isLessonPaused);\n        hasStateSignificantlyChanged = !areEqual;\n      }\n\n      if(currentState && nextState) {\n        switch(layout) {\n          case 'screen-species-card':\n          case 'screen-taxon-card':\n          case 'screen-non-taxon-card':\n          case 'species-vernaculars':\n          case 'mixed-specimen-images':\n          case 'mixed-specimen-question':\n          case 'screen-common-to-latin':\n          case 'screen-genus-completion':\n          case 'screen-latin-to-common':\n          case 'media-match':\n            hasStateSignificantlyChanged = (nextState.nextItem && nextState.nextItem.name) !== (currentState.nextItem && currentState.nextItem.name);\n            break;\n        }\n      }\n\n      if(hasStateSignificantlyChanged) {\n        currentState = nextState;\n        onChange(currentState);\n      }\n    }\n  \n    handleChange.domain = domain;\n    handleChange.calledBy = onChange.name;\n    let unsubscribe = store.subscribe(handleChange);\n    if(hasStateSignificantlyChanged) {\n      handleChange();\n    }\n    return { unsubscribe, name: onChange.name };\n  };","import { contains } from 'ramda';\n\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { store } from 'redux/store';\nimport { observeStore } from 'redux/observe-store';\n\nlet subscriptions = [];\n\nconst add = (subscription, domain, role, layout) => {\n\n    const select = store => store[domain];\n    const onChange = subscription;    \n\n    const sub = observeStore(store, select, onChange, domain, layout);\n\n    const existingSub = getByName(sub.name);\n\n    if(existingSub) return;\n\n    subscriptions.push({ ...sub, role});\n    return sub;\n};\n\nconst remove = subscription => {\n\n    if(subscription) {\n        subscription.unsubscribe();\n        subscriptions = subscriptions.filter(sub => sub.name !== subscription.name);\n    }\n    return subscriptions;\n};\n\nconst removeByName = name => {\n    const subscription = getByName(name);\n    if(subscription) {\n        return remove(subscription);\n    }\n};\n\nconst getByName = name => {\n    return subscriptions.find(sub => sub.name === name);\n};\n\nconst getByRole = role => {\n    return subscriptions.filter(sub => sub.role === role);\n};\n\nconst getAll = () => {\n    return subscriptions;\n};\n\nconst removeAllQuizScreenSubs = () => {\n\n    let screens = getByRole('screen');\n\n    screens.forEach(sub => {\n      subscription.remove(sub)\n    });\n};\n\nconst removeAllQuizLayoutSubs = () => {\n\n    let screens = getByRole('quiz');\n\n    screens.forEach(sub => {\n      subscription.remove(sub);\n    });\n};\n\nconst checkRequired = (state, layout) => {\n\n    const { userAction, config } = state;\n\n    let isRequired = true, isReviewingLesson = true;\n\n    isReviewingLesson = lessonStateHelper.getIsReviewingLesson(userAction, config, isReviewingLesson); \n        \n    const reviewLayouts = [\n        'screen-species-card',\n        'screen-taxon-card',\n        'screen-non-taxon-card',\n        'species-vernaculars',\n        'mixed-specimen-images',\n        'mixed-specimen-question',\n        'screen-common-to-latin',\n        'screen-genus-completion',\n        'screen-latin-to-common',\n        'media-match'\n    ];\n\n    isRequired = isReviewingLesson ? true : !contains(layout.name, reviewLayouts);\n\n    return isRequired;\n};\n\nconst addSubs = (layout, config, funcByName) => {\n\n    if(!layout) return;\n    \n    layout.screens.forEach( (screen, index) => {\n\n        const func = funcByName(screen.name);\n\n        const isSubscriptionRequired = checkRequired(store.getState(), layout);\n\n        if(func && isSubscriptionRequired) {\n            if(config.isPortraitMode) {\n                if(index === 1 || screen.name === 'summary') add(func, screen.domain, 'screen', layout ? layout.name : '');\n            } else {\n                add(func, screen.domain, 'screen', layout ? layout.name : '');\n            }                           \n        } else {\n            remove(getByName('nextItem'));\n            remove(getByName('traitValuesHandler'));\n        }\n    });\n};\n\nconst printAllSubs = () => {\n  getAll().forEach(sub => {\n    snapLog('subscribed', sub.name);\n  });\n};\n\nexport const subscription = {\n    add,\n    remove,\n    removeByName,\n    getByName,\n    getByRole,\n    getAll,\n    removeAllQuizScreenSubs,\n    removeAllQuizLayoutSubs,\n    addSubs,\n    printAllSubs\n};\n\n","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nimport { landscapeCustom } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeCustom2 } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeFungi, landscapeLichens } from 'snapdragon-config/plans/landscape/landscape-fungi';\n\nimport { landscapeStatic, landscapeStaticTaxonGroup, landscapeStaticProviderQuestionsOnly } from 'snapdragon-config/plans/landscape/landscape-static';\nimport { portraitStatic, portraitStaticTaxonGroup } from 'snapdragon-config/plans/portrait/portrait-static';\n\nconst landscapeBirds = { ...clone(landscapeStatic), id: 5 };\n      if(landscapeBirds.levels[0].bonusLayouts) landscapeBirds.levels[0].bonusLayouts[0].types.push('song');\n\nconst portraitBirds = { ...clone(portraitStatic), id: 105 };\n      portraitBirds.levels[0].layouts.push(L.mediaMatch); \n\nconst portraitFungi = { ...clone(landscapeFungi), id: 103, portrait: true };\n      portraitFungi.levels[0].bonusLayouts = [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ];\n\nconst portraitLichens = { ...clone(landscapeLichens), id: 104, portrait: true };\nconst portraitCustom = { ...clone(landscapeCustom), id: 101, portrait: true };\nconst portraitCustom2 = { ...clone(landscapeCustom2), id: 102, portrait: true };\n\nexport const lessonPlans = [\n\n    landscapeCustom,\n    landscapeCustom2,\n    landscapeStatic,\n    landscapeStaticTaxonGroup,\n    landscapeStaticProviderQuestionsOnly,\n    landscapeFungi,    \n    landscapeLichens,\n    landscapeBirds,\n    \n    portraitCustom,\n    portraitCustom2,\n    portraitStatic,\n    portraitStaticTaxonGroup,    \n    portraitFungi,    \n    portraitLichens,\n    portraitBirds,\n    \n];","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeCustom = {\n    id: 1,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.familyMatch,\n                        L.speciesGenusEntry,\n                        L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeCustom2 = {\n    id: 2,\n    name:'Lesson 2',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeFungi = {\n    id: 3,\n    name:'Lesson 3',\n    portrait: false,\n    default: false,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape']),\n                        L.propertyTrait(L.mixedTraitImages, ['gillAttachment']),\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        },\n    ]\n};\n\nexport const landscapeLichens = { ...clone(landscapeFungi), id: 4 };\nlandscapeLichens.levels[0] = { \n    id: 1,\n    name:'Level 1',\n    description: 'Species recognition',\n    layouts: [                          \n        L.mixedSpecimenImages\n    ],\n    // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n    // reviewLayouts: [ L.multiSpecimenCommonMatch, L.mixedSpecimensRight ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeStatic = {\n    id: 10,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.familyMatch,\n                        L.speciesGenusEntry,\n                        L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticTaxonGroup = {\n    id: 11,\n    name:'Lesson 11',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages,\n                        L.speciesIdentificationMatch,\n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, \n                        L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                    ],\n            // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticProviderQuestionsOnly = {\n    id: 12,\n    name:'Lesson 12',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [],\n            bonusLayouts: []\n        }\n    ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const portraitStatic = {\n    id: 110,\n    name:'Lesson 110',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.familyMatch,\n                        L.speciesGenusEntry,\n                        L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const portraitStaticTaxonGroup = {\n    id: 111,\n    name:'Lesson 111',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n","import { clone } from 'ramda';\n\nimport { panels } from 'snapdragon-config/screen-panels';\n\nconst { \n    specimenImages, speciesCard, vernaculars, scientifics, text, \n    leaf, leafName, \n    family, familyStrips, taxon, nonTaxon, textComplete, cultivar, cultivarCard, \n    epithets, definitions, \n    specimenCommonMatch, specimenLatinMatch,\n    definitionCard, \n    traitProperty, symbioticProperty\n    , lookalikeProperty\n    , traitImages,\n    nonTaxonSpecimenTiles,\n    mixedSpecimenQuestions,\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n    history, summary, \n    birdsong, mediaPlayers,\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification } = panels;\n\nconst mixedSpeciesMatch = {\n    name: 'screen-mixed-species-match',\n    type: 'test',\n    score: 1,\n    kind: 'VMC',\n    points: 3,\n    given: 'Given species name',    \n    requirement: 'Select species image',\n    screens: [\n        { ...specimenImages },\n        { ...mixedSpecimenQuestions }\n    ]\n};\n\nconst speciesRevision = {\n    name: 'screen-species-card',\n    type: 'revision',\n    score: 0,\n    kind: 'S',\n    points: 0,\n    given: 'Given species summary',\n    requirement: 'Study species',\n    screens: [\n        { ...specimenImages },\n        { ...speciesCard }\n    ]\n};\n\nconst taxonRevision = {\n    name: 'screen-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'F',\n    points: 0,\n    given: 'Study',\n    requirement: 'Family summary',\n    screens: [\n        { ...specimenImages },\n        { ...taxon }\n    ]\n};\n\nconst nonTaxonRevision = {\n    name: 'screen-non-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'GR',\n    points: 0,\n    given: 'Group summary',\n    requirement: 'Study',\n    screens: [\n        { ...nonTaxonSpecimenTiles },\n        { ...nonTaxon }\n    ]\n};\n\nconst definitionRevision = {\n    name: 'screen-definition-card',\n    type:'revision',\n    score: 0,\n    kind: 'G',\n    points: 0,\n    given: 'Given glossary',\n    requirement: 'Study definitions',\n    screens: [\n        { ...specimenImages },\n        { ...definitionCard }\n    ]\n};\n\nconst latinToCommonMatch = {\n    name: 'screen-latin-to-common',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given latin name',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...vernaculars }\n    ]\n};\n\nconst commonToLatinMatch = {\n    name: 'screen-common-to-latin',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given common name',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...scientifics }\n    ]\n};\n\nconst speciesIdentificationMatch = {\n    name: 'screen-species-identification',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select identification',\n    screens: [\n        { ...specimenImages },\n        { ...speciesIdentification }\n    ]\n};\n\nconst textCompleteGenus = {\n    name: 'screen-genus-completion',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select genus name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-genus'  }\n    ]\n};\n\nconst multiSpecimenCommonMatch = {\n    name: 'screen-specimens-common-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenCommonMatch }\n    ]\n};\n\nconst multiSpecimenLatinMatch = {\n    name: 'screen-specimens-latin-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenLatinMatch }\n    ]\n};\n\nconst traitPropertyMatch = {\n    name: 'trait-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...traitProperty }\n    ]\n};\n\nconst lookalikePropertyMatch = {\n    name: 'lookalike-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...lookalikeProperty }\n    ]\n};\n\nconst symbioticPropertyMatch = {\n    name: 'symbiotic-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given specimenImages images',\n    requirement: 'Select symbiotic match',\n    screens: [\n        { ...specimenImages },\n        { ...symbioticProperty }\n    ]\n};\n\nconst familyMatch = {\n    name: 'screen-species-to-family',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Species name',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...family }\n    ]\n};\n\nconst cultivarMatch = {\n    name: 'screen-cultivar-to-species',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Cultivar name',\n    requirement: 'List species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivar }\n    ]\n};\n\nconst familyStripsMatch = {\n    name: 'screen-family-to-description',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Family description',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...familyStrips }\n    ]\n};\n\nconst genusEntry = {\n    name: 'screen-genus-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given species name',\n    requirement: 'Enter genus name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'genus'}\n    ]\n};\n\nconst speciesEntry = {\n    name: 'screen-species-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given genus name',\n    requirement: 'Enter species name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'species'}\n    ]\n};\n\nconst speciesGenusEntry = {\n    name: 'screen-binomial-entry',\n    type:'test',\n    score: 1,\n    points: 4,\n    kind: 'T',\n    given: 'Given common name',\n    requirement: 'Enter latin name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'name'}\n    ]\n};\n\nconst leafEntry = {\n    type:'test',\n    score: 1,\n    points: 3,\n    kind: 'T',\n    screens: [\n        { ...leaf },\n        { ...leafName }\n    ]\n};\n\nconst textCompleteSpecies = {\n    name: 'screen-species-completion',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Given genus name',\n    requirement: 'Select species name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-species' }\n    ]\n};\n\nconst commonEntry = {\n    name: 'screen-common-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species latin name',\n    requirement: 'Enter common name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'vernacular'  }\n    ]\n};\n\nconst latinEpithets = {\n    name: 'screen-epithets',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Epithet',\n    requirement: 'List epithet definitions',\n    screens: [\n        { ...specimenImages },\n        { ...epithets }\n    ]\n};\n\nconst glossaryTerms = {\n    name: 'screen-definitions',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'Given glossary term',\n    requirement: 'Select definition',\n    screens: [\n        { ...specimenImages },\n        { ...definitions }\n    ]\n};\n\nconst cultivars = {\n    name: 'screen-cultivars',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'List of cultivars',\n    requirement: 'List of species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivarCard },\n        { ...cultivar }\n    ]\n};\n\nconst mixedSpecimenImages = {\n  name: 'mixed-specimen-images',\n  type:'test',\n  score: 1,\n  points: 2,\n  kind: 'T',\n  given: 'Specimen images',\n  requirement: 'Select species image',\n  screens: [\n      { ...mixedSpecimensLeft },\n      { ...mixedSpecimensRight }\n  ]\n};\n\nconst mediaMatch = {\n    name: 'media-match',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species song',\n    requirement: 'Select species',\n    screens: [\n        { ...specimenImages },\n        { ...birdsong }\n    ]\n};\n\nconst mixedTraitImages = {\n    name: 'mixed-trait-images',\n    type:'test',\n    kind: 'T',\n    score: 1,\n    points: 2,\n    given: 'Trait images',\n    requirement: 'Select trait image',\n    screens: [\n        { ...mixedTraitLeft },\n        { ...mixedTraitRight }\n    ]\n  };  \n\nconst providerHorizontalStrip = {\n    name: 'provider-horizontal-strip',\n    type: 'test',\n    score: 1,\n    screens: [\n        { ...specimenImages },\n        { ...providerHorizontalStripQuestions }\n    ]\n};\n\nconst propertyTrait = (traitPropertyMatch, traits) => {\n    const layout = clone(traitPropertyMatch);\n    layout.screens[0].traits = traits;\n    layout.screens[1].traits = traits;\n    return layout;\n};\n\nexport const layouts = {\n  mixedSpeciesMatch,\n  speciesRevision,\n  taxonRevision,\n  nonTaxonRevision,\n  definitionRevision,\n  \n  latinToCommonMatch,\n  commonToLatinMatch,\n  textCompleteGenus,\n  multiSpecimenCommonMatch,\n  multiSpecimenLatinMatch,\n  traitPropertyMatch,\n  lookalikePropertyMatch,\n  symbioticPropertyMatch,\n  familyMatch,\n  cultivarMatch,\n  familyStripsMatch,\n  genusEntry,\n  speciesEntry,\n  speciesGenusEntry,\n  textCompleteSpecies,\n  commonEntry,\n  leafEntry,\n  glossaryTerms,\n  latinEpithets,\n  cultivars,\n  mixedSpecimenImages,\n  history,\n  summary,\n  mediaMatch,\n  mixedTraitImages,\n  providerHorizontalStrip,\n  speciesIdentificationMatch,\n  propertyTrait\n}","const specimenImages = {\n    name: 'specimen-images',\n    domain: 'collection',\n  };\n  \nconst traitImages = {\n    name: 'trait-images',\n    domain: 'bonusLayout',\n  };\n  \n  const history = { \n    name: 'history', \n    domain: 'history'\n  };\n  \n  const speciesCard = {\n    name: 'species-card',\n    domain: 'collection',\n  };\n  \n  const definitionCard = {\n    name: 'definition-card',\n    domain: 'collection'\n  };\n  \n  const scientifics = {\n    name: 'species-scientifics',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  const birdsong = {\n    name: 'birdsong',\n    domain: 'bonusLayout',\n  }\n\n  const mediaPlayers = {\n    name: 'media-players',\n    domain: 'collection',    \n  }\n  \n  const vernaculars = {\n    name: 'species-vernaculars',\n    domain: 'collection',\n    taxon: 'name'\n  };\n  \n  const text = {\n    name: 'text-entry',\n    domain: 'collection'\n  };\n  \n  const textComplete = {\n    name: 'text-complete',\n    domain: 'collection',\n    question: 'Complete the latin name',\n  };\n  \n  const summary = { \n    name: 'summary', \n    domain: 'history' \n  };\n  \n  const mixedSpecimenQuestions = {\n    name: 'mixed-specimen-questions',\n    domain: 'collection'\n  };\n\n  const leaf = {\n    name: 'leaf-image',\n    domain: 'collection'\n  };\n  \n  const leafName = {\n    name: 'leaf-text',\n    domain: 'collection'\n  };\n  \n  const epithets = {\n    name: 'epithet',\n    domain: 'collection'\n  };\n  \n  const definitions = {\n    name: 'definition',\n    domain: 'bonusLayout'\n  };\n  \n  const family = {\n    name: 'family',\n    domain: 'collection'\n  };\n  \n  const familyStrips = {\n    name: 'family-strips',\n    domain: 'collection'\n  };\n  \n  const taxon = {\n    name: 'taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxon = {\n    name: 'non-taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxonSpecimenTiles = {\n    name: 'non-taxon-specimen-tiles',\n    domain: 'collection'\n  };\n  \n  const cultivarCard = {\n    name: 'cultivar-card',\n    domain: 'collection'\n  };\n  \n  const cultivar = {\n    name: 'cultivar-match',\n    domain: 'collection'\n  };\n\n  const specimenCommonMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'vernacular'\n  };\n  \n  const specimenLatinMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'binomial'\n  };\n  \n  const traitProperty = {\n    name: 'trait-property',\n    domain: 'bonusLayout'\n  };\n  \n  const lookalikeProperty = {\n    name: 'lookalike-property',\n    domain: 'bonusLayout'\n  };\n  \n  const symbioticProperty = {\n    name: 'symbiotic-property',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensLeft = {\n    name: 'mixed-specimen-images',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensRight = {\n    name: 'mixed-specimen-question',\n    domain: 'collection'\n  };\n  \n  const mixedTraitLeft = {\n    name: 'mixed-trait-images',\n    domain: 'collection'\n  };\n\n  const mixedTraitRight = {\n    name: 'mixed-trait-question',\n    domain: 'collection'\n  };\n\n  const providerHorizontalStripQuestions = {\n    name: 'provider-horizontal-strip-questions',\n    domain: 'collection'\n  };\n\n    \n  const speciesIdentification = {\n    name: 'species-identification',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  \n  export const panels = {\n    specimenImages,\n    history,\n  \n    speciesCard,\n    definitionCard,\n    scientifics,\n    vernaculars,\n    text,\n    summary,\n\n    leaf,\n    leafName,\n  \n    epithets,\n    definitions,\n    family,\n    familyStrips,\n    \n    taxon,\n    nonTaxon,\n    nonTaxonSpecimenTiles,\n    textComplete,\n    cultivarCard,\n    cultivar,\n  \n    specimenCommonMatch,\n    specimenLatinMatch,\n    traitProperty,\n    lookalikeProperty,\n    symbioticProperty,\n    \n    mixedSpecimenQuestions,\n\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n\n    birdsong,\n    mediaPlayers,\n    traitImages,\n\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification\n  };","const all = [\n    {\n      id: 'fungi',\n      common: 'Fungi & Lichens'\n    },\n    {\n      id: 'amphibia',\n      common: 'Amphibians'\n    },\n    {\n      id: 'mammalia',\n      common: 'Mammals'\n    },\n    {\n      id: 'plantae',\n      common: 'Plants'\n    },\n    {\n      id: 'lepidoptera',\n      common: 'Butterflies & Moths'\n    },\n    {\n      id: 'insecta',\n      common: 'Insects'\n    },\n    {\n      id: 'aves',\n      common: 'Birds'\n    },\n    {\n      id: 'reptilia',\n      common: 'Reptiles'\n    }\n];\n\nexport const iconicTaxa = {\n    all\n}","import { contains, flatten } from 'ramda';\n\nimport { getTraitTests } from 'snapdragon-engine/bonus/tests/trait-test';\nimport { getBirdsongTests } from 'snapdragon-engine/bonus/tests/birdsong-test';\nimport { getLookalikeTests } from 'snapdragon-engine/bonus/tests/lookalike-test';\nimport { getDefinitionTests } from 'snapdragon-engine/bonus/tests/definition-test';\n\nconst getTests = async (collection, itemIndices, bonusLayouts, lessonName, levelName) => {\n\n    const itemsInThisRound = collection.items.map((item, index) => {\n        if(contains(index, itemIndices)) {\n            return { ...item, itemIndex: index }\n        } else return null;        \n    }).filter(item => item);\n\n    const addLayoutToTest = traitTests => {\n        const lessonReadyTests = traitTests.map(traitTest => {             \n            traitTest.itemIndex = traitTest.item ? traitTest.item.itemIndex : 0; \n            traitTest = { ...traitTest, ...layout, lessonName, levelName };            \n            return traitTest;\n        });\n        return lessonReadyTests;\n    };\n\n    const getTraitTypeTests = itemsInThisRound => {\n        return new Promise(resolve => resolve(getTraitTests(itemsInThisRound)));\n    };\n\n    const getTraitTypeBirdsongTests = (itemsInThisRound, collection) => {\n        return new Promise(resolve => resolve(getBirdsongTests(itemsInThisRound, collection)));\n    };\n\n    const getTraitTypeLookalikeTests = itemsInThisRound => {\n        return getLookalikeTests(itemsInThisRound);     \n    };\n\n    const getDefinitionTypeTests = itemsInThisRound => {\n        return getDefinitionTests(itemsInThisRound);\n    };\n\n    let traitTests = [], birdsongTests = [], lookalikeTests = [], definitionTests = [];\n\n    let layout = bonusLayouts.find(layout => layout.name === \"trait-property-match\");\n\n    if(layout) {\n\n        if(layout.types) {\n\n            const getResolvedPromises = async () => {\n            const promises = await layout.types.map(async type => {\n                switch(type) {\n                    case 'traits':\n                        return getTraitTypeTests(itemsInThisRound);\n                    case 'song':\n                        return getTraitTypeBirdsongTests(itemsInThisRound, collection);\n                    case 'lookalikes':\n                        return getTraitTypeLookalikeTests(itemsInThisRound);\n                    case 'definition':                        \n                        return getDefinitionTypeTests(itemsInThisRound);\n                }\n            });\n\n            const testGroups = await Promise.all(promises);\n\n            const tests = testGroups.map(group => {\n                group = group.filter(g => g.question);\n                return addLayoutToTest(group);\n            });\n\n            return tests;\n        };\n\n        traitTests = await getResolvedPromises();\n\n        } else {\n            traitTests = getTraitTypeTests(itemsInThisRound);\n            birdsongTests = getTraitTypeBirdsongTests(itemsInThisRound, collection);            \n            lookalikeTests = getTraitTypeLookalikeTests(itemsInThisRound);\n            definitionTests = getDefinitionTypeTests(itemsInThisRound);\n        }\n    }\n\n    return flatten(traitTests);\n};\n\nexport const bonusHandler = {\n    getTests\n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getBirdsongTests = (itemsInThisRound, collection) => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n        \n        if(item.taxonomy.class && item.taxonomy.class.toLowerCase() !== 'aves') return [];\n        \n        const { question, answers, overrides } = getBirdsongTest(item, itemsInThisRound, collection);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n}\n\nconst getBirdsongTest = (item, itemsInThisRound, collection) => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return;\n\n    const name = 'song';\n    const birdsong = { name, ...item.traits[name] };\n    \n    // require other birds, which may not be in this collection\n\n    let birds = take(3, collection.items.filter(bird => bird.name.toLowerCase() !== item.name.toLowerCase()));\n        birds.push(item);\n\n    const birdNames = utils.shuffleArray(birds.map(bird => bird.name));\n\n    const question = item.name;\n    const answers = birdNames;\n    const overrides = { question: 'Match the birdsong', vernacularName: 'Common name', binomial: 'Latin name', trait: birdsong };\n\n    return { question, answers, overrides };\n};","import { contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nexport const getDefinitionTests = itemsInThisRound => {\n    \n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        return getDefinitionTest(item);\n\n    });\n\n    return tests;\n};\n\nconst getDefinitionTest = async item => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const number = config.isPortraitMode ? 4 : 4;\n\n    const taxon = matchTaxon(item.taxonomy, iconicTaxa).value;\n\n    let definitions = glossary.filter(definition => contains(definition.taxon, [ taxon, 'common' ]));\n\n    definitions = utils.shuffleArray(definitions);\n\n    const term = item.terms \n                    ? utils.shuffleArray(item.terms)[0] \n                    : item.genus\n                        ? item.genus.terms\n                            ? item.genus.terms[collection.itemIndex] \n                                ? item.genus.terms[collection.itemIndex] \n                                    : item.family\n                                    ? item.family.terms\n                                        ? utils.shuffleArray(item.family.terms)[0]\n                                        : null\n                                    : null\n                            : null\n                        : null;\n                    \n\n    const definition = !!term \n        ? definitions.find(definition => definition.term.toLowerCase() === term.toLowerCase())\n        : definitions[0];\n\n    const alternatives = take(number-1, take(number, utils.shuffleArray(definitions)).filter(d => d.term.toLowerCase() !== definition.term.toLowerCase())).map(d => utils.capitaliseFirst(d.definition));\n    \n    const question = definition.definition;\n    const answers = utils.shuffleArray([question, ...alternatives]);\n    const help = config.isLandscapeMode ? 'Select the correct answer' : 'Select correct answer';\n\n    return { question, answers, overrides : { question: definition.term, help, binomial: item.name, vernacularName: item.vernacularName } };\n};","import { firestore } from 'api/firebase/firestore';\n\nexport const getLookalikeTests = async itemsInThisRound => {\n\n    const init = async () => {\n\n        if(itemsInThisRound === undefined) return new Promise(resolve => resolve([]));\n\n        return Promise.all(itemsInThisRound.map(async item => {\n            \n            const { question, answers, overrides } = await getLookalikeTest(item);\n\n            if(!question) return new Promise(resolve => resolve({}));\n\n            return {\n                item,\n                question,\n                answers,\n                overrides\n            }\n        }));\n    }\n\n    const tests = await init();\n\n    return tests;\n}\n\nexport const getItemLookalikes = async item => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return {};\n\n    const lookaliketraits = item.traits['lookalikes'];\n\n    if(!lookaliketraits) return new Promise(resolve => resolve([]));\n\n    let lookalikes = lookaliketraits.map(trait => trait.lookalike.name);\n\n    if(lookalikes.length === 0) return {};\n\n    // check current collection first?\n\n    const getLookalikes = async () => {\n        return Promise.all(lookalikes.map(async name => {\n            return await firestore.getSpeciesByName(name);\n        })\n    )};\n    \n    lookalikes = await getLookalikes();\n    lookalikes = lookalikes.filter(lookalike => lookalike);\n\n    return lookalikes;\n};\n\nconst getLookalikeTest = item => {\n\n    const init = async () => {\n\n        const lookalikes = await getItemLookalikes(item);\n\n        const question = lookalikes.length > 0 ? item.name : null;\n        const answers = [ question, ...lookalikes.map(item => item.name) ];\n\n\n        return { question, answers, overrides : { question: 'Avoid look-alikes', help: '(Pick one correct image)', binomial: 'Latin name', vernacularName: 'Common name', trait: { name: 'lookalikes', lookalikes } } };\n    };\n\n    return init();\n};\n","import { store } from 'redux/store';\nimport { getTraitsForTests } from 'api/traits/traits-for-tests';\n\nexport const getTraitTests = itemsInThisRound => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        const { units } = store.getState();\n\n        const { question, answers, overrides } = getTraitsForTests(units, item);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n};","export const getNextRoundLayouts = (lessonPlan, config, lesson) => {\n\n    // All layouts are currently activated because the lesson edit function is not in use.\n\n    lesson.activeLevelCount = lessonPlan.levels.filter(level => level.layouts.length > 0).length;\n\n    const getCurrentLevelFromLessonPlan = (lessonPlan, levelId) => {\n        return lessonPlan.levels.find(level => level.id === levelId);\n    }\n    \n    const getLayouts = (currentLevel, mode) => {    \n        switch(mode) {\n            case 'learn':\n                currentLevel.bonusLayouts = currentLevel.bonusLayouts || [];\n                return [ ...currentLevel.layouts.filter(l => l), ...currentLevel.bonusLayouts ];\n            case 'review':\n                return currentLevel.reviewLayouts || [];\n            default:\n                return currentLevel.layouts;\n        }\n    };\n\n    const goToNextLevelThatHasLayouts = (lessonPlan, levelId) => {\n\n        let layouts = [], lessonName = '', levelName = '';        \n        \n        const iterateOverLevelsCheckingForAvailableLayouts = (intialValue, levelId) => {\n            \n            let increment = intialValue;\n\n            if(layouts.length > 0) return;\n\n            const level = lessonPlan.levels.find(level => level.id === levelId + increment);\n\n            if(!level) return;\n            \n            lesson.level = level;\n\n            lesson.level = level;\n            lessonName = lesson.name;\n            levelName = lesson.level.name; // sometimes returns null (when at final level, looking for next?)\n            layouts = getLayouts(getCurrentLevelFromLessonPlan(lessonPlan, levelId + increment), config.mode);\n\n            increment++;\n\n            iterateOverLevelsCheckingForAvailableLayouts(increment, levelId);\n        }     \n        \n        iterateOverLevelsCheckingForAvailableLayouts(0, levelId);\n\n        return { lessonName, levelName, layouts };\n    }\n\n    let levelId = lesson.level.id;\n\n    if(lesson.isLevelComplete) {\n        levelId++;\n        lesson.level = lessonPlan.levels.find(level => level.id === levelId);\n    }\n\n    const { layouts } = goToNextLevelThatHasLayouts(lessonPlan, levelId);\n\n    return layouts;\n};","import { createNextRound } from 'snapdragon-engine/round-planner';\nimport { layouts } from 'snapdragon-config/screen-layouts';\nimport { getNextRoundLayouts } from 'snapdragon-engine/lesson-plan-handler';\n\nconst { summary, history } = layouts;\n\nconst createLessonPlan = async (lessonPlan, config, collection, lesson) => {\n\n    lesson.moduleSize = lesson.moduleSize || collection.moduleSize || config.moduleSize;\n    lesson.currentRound = lesson.currentRound || 1;\n\n    let rounds = collection.items.length / lesson.moduleSize;            \n        rounds = collection.items.length % lesson.moduleSize === 0 ? rounds : rounds === 1 ? 1 : Math.floor(rounds) + 1;\n\n    lesson = lesson.level === undefined \n            ? { ...lesson, ...lessonPlan, level: { id: 1 }, rounds } \n            : lesson;\n\n    const nextRoundLayoutTemplates = getNextRoundLayouts(lessonPlan, config, lesson);\n\n    if(lesson.level === undefined) {\n        return new Promise(resolve => resolve(null));\n    }\n\n    return await createNextRound(\n        lessonPlan,\n        nextRoundLayoutTemplates, \n        [ summary, history ],\n        collection,\n        lesson\n    );        \n};\n\nexport const lessonPlanner = {\n    createLessonPlan\n}","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { findRankByIconicTaxon } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\n\nexport const getPoolItems = async (collection, poolSize = 5) => {\n  \n  try {\n    \n    const item = collection.nextItem;\n\n    if(collection.behaviour === 'static') {\n      const otherItems = collection.items.filter(i => i.name !== item.name);\n      if(otherItems && otherItems.length > 0) {\n        return getItemsFromCollection(otherItems, item, poolSize);\n      }\n    }\n\n    const rank = findRankByIconicTaxon(item.taxonomy, item.iconicTaxon);\n\n    let taxonicMatches = await firestore.getSpeciesByIconicTaxon(item);\n\n    if(item.iconicTaxon.toLowerCase() === 'fungi') {\n        const isLichen = item.lichen;\n        taxonicMatches = isLichen ? taxonicMatches.filter(item => item.lichen) : taxonicMatches.filter(item => !item.lichen);\n    }\n\n    const speciesPool = utils.shuffleArray(taxonicMatches.filter(ci => ci.name.toLowerCase() !== item.name.toLowerCase()));\n\n    // temporary exceptions because there are so few (6 and 3) members of these taxa\n\n    const isException = item.iconicTaxon.toLowerCase() === 'reptilia' || item.iconicTaxon.toLowerCase() === 'amphibia';\n    \n    if(!speciesPool) {\n      getPoolItems(collection);\n    }\n\n    // if not enough, only get the additional necessary number (but duplicates???)\n\n    else if(speciesPool.length < poolSize && !isException) {\n      getPoolItems(collection);\n    } \n    else {\n\n      const items = take(poolSize, speciesPool);\n      \n      items.push(item);\n    \n      return await items;\n    }\n  } catch(e) {\n    logError('renderMixedSpecimenImagesAndQuestion init', e);\n  }\n};\n\n  const getItemsFromCollection = (otherItems, item, poolSize) => {\n    const items = take(poolSize, utils.shuffleArray(otherItems));\n    return utils.shuffleArray([ ...items, item]);\n  };","import { contains } from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\n\nconst getItemLayouts = async itemQuestions => {\n    if(!itemQuestions.questionIds) return new Promise(resolve => resolve(null));\n    // return Promise.all(itemQuestions.questionIds.map(async id => await firestore.getQuestionById(id, itemQuestions.name)));\n};\n\nconst getLayouts = async (collection, roundItemNames) => {\n\n    if(collection.species) {\n    \n        const species = collection.species.filter(sp => contains(sp.name, roundItemNames));\n        const speciesQuestions = species.filter(sp => sp.questions);\n\n        if(speciesQuestions.length > 0) {\n            return Promise.all(speciesQuestions.map(sq => sq.questions));\n        }\n\n        const itemsQuestions = collection.items.filter(i => contains(i.name, roundItemNames)).map(i => { return { name: i.name, questionIds: i.questionIds }});\n        \n        if(itemsQuestions) {\n            const promises = itemsQuestions.map(async (itemQuestions) => {\n                if(itemQuestions.questionIds) return await getItemLayouts(itemQuestions);\n            });\n            return await Promise.all(promises);\n        } else {\n            return new Promise(resolve => resolve(null));\n        }\n    } else {\n        return [];\n    }\n}\n\nexport const providerHandler = {\n    getLayouts\n};","const getRoundItems = (currentRound, moduleSize, items) => {\n\n    const start = (currentRound - 1) * moduleSize;\n    const end = start + moduleSize;\n    return items.slice(start, end);\n}\n\nexport const roundHandler = {\n    getRoundItems\n};","import { contains, flatten } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { utils } from 'utils/utils';\n\nimport { roundHandler } from \"snapdragon-engine/round-plan-handler\";\nimport { bonusHandler } from 'snapdragon-engine/bonus/bonus-test-handler';\nimport { providerHandler } from 'snapdragon-engine/provider/provider-test-handler';\nimport { mixedTraitHandler } from 'ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const createNextRound = (lessonPlan, nextRoundLayoutTemplates, progressScreens, collection, lesson) => {\n\n    const init = async () => {\n    \n        lessonPlan.layouts = [];\n\n        const moduleSize = lesson.moduleSize;\n        const lessonName = lesson.name;\n        const levelName = lesson.level.name;\n        const itemsCountToDate = (lesson.currentRound - 1) * moduleSize;\n        const itemsLeft = collection.items.length - itemsCountToDate;\n\n        const layoutsToAdd = moduleSize > itemsLeft ? itemsLeft : moduleSize;\n        const roundItemNames = roundHandler.getRoundItems(lesson.currentRound, moduleSize, collection.items.map(i => i.name));\n\n        nextRoundLayoutTemplates.forEach( async (layout, index) => {\n            let itemIndex = 0;\n            do {\n                if(layout.name === 'mixed-trait-images') {\n                    \n                    const item = collection.items.find(i => i.name === roundItemNames[itemIndex]);\n\n                    const { requiredTraitValues, trait } = mixedTraitHandler.getMatchingTrait(utils.shuffleArray(layout.screens[1].traits), item.traits);\n\n                    if(!trait) return;\n\n                    const { traits, requiredTraits } = await mixedTraitHandler.fetchTraits(trait, requiredTraitValues, collection.glossary);\n\n                    if(!requiredTraits || !traits) return;\n\n                    layout.trait = trait;\n                    layout.traits = traits;\n                    layout.requiredTraits = requiredTraits;\n\n                    const traitsToIgnore = [ 'n/a', 'none' ];\n                    const addLayout = !!requiredTraits.find(t => !contains(t.term.toLowerCase(), traitsToIgnore));\n\n                    if(addLayout) {\n                        lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                    }\n        \n                } else {\n                    lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                }\n\n                itemIndex++;\n                \n            } while (itemIndex < layoutsToAdd);\n        });\n\n        if(lesson.level.id === 1) {\n            let providerQuestions = await providerHandler.getLayouts(collection, roundItemNames);\n                providerQuestions = flatten(providerQuestions).filter(layout => layout);\n\n            let providerLayouts = providerQuestions.map(provider => {\n                return { ...L.providerHorizontalStrip, lessonName:\"Lesson 1\", levelName:\"Level 1\", speciesName: provider.name || provider.taxon, provider };\n            });\n\n            if(providerLayouts) {\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...providerLayouts ];\n            }\n        }\n\n        const bonusLayouts = lessonPlan.layouts.filter(layout => layout.bonus);\n\n        let lessonLayouts = lessonPlan.layouts.filter(layout => !layout.bonus).map((layout, i) => {\n            layout.itemIndex = layout.itemIndex === undefined ? utils.calcItemIndex(itemsCountToDate, layoutsToAdd, i) : layout.itemIndex;\n            return { ...layout };\n        });\n\n        const itemIndices = [ ...new Set(lessonPlan.layouts.map(layout => layout.itemIndex).filter(i => i !== undefined)) ];\n        \n        lessonPlan.layouts = lessonLayouts;\n\n        if(lesson.level.id === 1) {\n\n            if(bonusLayouts) {\n                const bonusTests = await bonusHandler.getTests(collection, itemIndices, bonusLayouts, lessonName, levelName);\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...bonusTests ];\n            }\n        }\n\n        lessonLayouts = lessonPlan.layouts.map((layout, i) => {\n            layout.roundProgressIndex = i + 1;\n            return { ...layout };\n        });\n\n        const summaryLayout = lessonPlan.portrait \n            ? {\n                name: 'summary',\n                screens: [{ \n                    name: 'summary', \n                    domain: 'history', \n                    parent: DOM.rightBody\n                }],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            }\n            : {\n                name: 'summary',\n                screens: [...progressScreens],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            };\n\n        // lessonPlan.layouts.push(summaryLayout);\n\n        lessonPlan.layouts.push({\n            name: 'summary',\n            screens: [{ \n                name: 'summary', \n                domain: 'history', \n                parent: DOM.rightBody\n            }],\n            lessonName,\n            levelName,\n            layoutIndex: lessonPlan.layouts.length,\n            itemIndex: 0\n        });\n\n        const scores = lessonPlan.layouts.map(layout => layout.score || 0);\n        const roundScoreCount = scores.reduce((accumulator, currentValue) => accumulator + currentValue);\n\n        lessonPlan.layouts.map(layout => layout.roundScoreCount = roundScoreCount);\n\n        lesson.questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n        lesson.layoutCount = lessonPlan.layouts.length;\n        lesson.layoutNames = lessonPlan.layouts.map(layout => layout.name);\n\n        return { updatedLessonPlan: lessonPlan, updatedCollection: collection, updatedLesson: lesson };\n    }\n\n    return init();\n};\n","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { iconicTaxa } from 'snapdragon-config/snapdragon-iconic-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport categoriesTemplate from 'ui/create-guide-modal/categories-template.html';\n\nexport const renderCategories = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n          config.guide.iconicTaxa = config.guide.iconicTaxa || iconicTaxa.all;\n\n    const filterSelectedClass = 'iconic-taxa-selected';\n\n    const template = document.createElement('template');\n          template.innerHTML = categoriesTemplate;\n    \n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({}, template.content, parent);\n\n    const icons = parent.querySelectorAll('.js-iconic-taxa-categories > div > div:nth-child(1)');\n    \n    if(config.guide.iconicTaxa) {\n        icons.forEach(icon => {\n            const filterId = icon.parentElement.id;\n            if(contains(filterId, config.guide.iconicTaxa.map(taxon => taxon.id))) {\n                icon.classList.add(filterSelectedClass);\n            }\n        });\n    }\n\n    setTimeout(() => {\n        const fungiIcon = modal.querySelector('#fungi > div');\n        if(!fungiIcon) return;\n        if(utils.hasClass(fungiIcon, 'iconic-taxa-selected')) {\n            fungiIcon.querySelector('g g').classList.add('svg-icon-selected');\n        }   \n    },250);\n    \n    config.guide.hasChanged = false;\n\n    icons.forEach(category => {\n        category.addEventListener('click', event => {\n\n            config.guide.hasChanged = true;\n            \n            const filter = event.currentTarget;\n            const filterId = filter.parentElement.id;        \n            const commonName = filter.parentElement.innerText;              \n\n            if(config.guide.iconicTaxa.find(taxon => taxon.id === filterId)) {\n                \n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.remove('svg-icon-selected');                    \n                }\n                if(config.guide.iconicTaxa.length > 1) {\n                    filter.classList.remove(filterSelectedClass);\n                    config.guide.iconicTaxa = config.guide.iconicTaxa.filter(taxon => taxon.id !== filterId);\n                }\n\n            } else {\n\n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.add('svg-icon-selected');\n                }\n                filter.classList.add(filterSelectedClass);\n\n                config.guide.iconicTaxa.push(\n                    {\n                        id: filterId,\n                        common: commonName    \n                    }\n                )\n            }\n\n            createGuide.setConfig(config);\n            createGuide.saveStep('TAXA', config);            \n        });\n    });\n\n    createGuide.saveStep('TAXA');\n\n    document.querySelector('.js-right .js-arrow-wrapper').innerHTML = '<i class=\"far fa-arrow-alt-circle-right\"></i>';\n};","import { returnTaxonIcon } from 'ui/helpers/icon-handler';\n\nexport const saveGuide = (config, step, update = true) => {\n\n    const chosen = document.querySelector('.js-chosen span:nth-child(2)');\n\n    const handleSaveEvent = () => {\n\n        switch(step) {\n\n            case 'SPECIES':\n\n            break;\n\n            case 'LOCATION':\n\n                const splitLocation = locationStr => {\n                    return locationStr;\n                };\n\n                if(config.guide.locationType) {\n                    chosen.innerHTML = config.guide.locationType === 'place'\n                        ? config.guide.locationPlace\n                        : config.isLandscapeMode\n                            ? config.guide.locationLongLat\n                            : splitLocation(config.guide.locationLongLat);\n                }\n                break;\n\n            case 'TAXA':\n\n                chosen.innerHTML = '';\n                let icons = '';\n                if(config.guide.iconicTaxa.length > 0) {\n                    config.guide.iconicTaxa.forEach(taxon => {\n                        const icon = returnTaxonIcon(taxon.id);\n                        icons += icon;\n                    })\n                    chosen.innerHTML = icons;\n                } else {\n                    chosen.innerHTML = 'All species';\n                }\n                break;\n\n            case 'INAT':\n                \n                if(config.guide.inatId.key) {\n                    chosen.innerHTML = config.guide.inatId.key || '';\n                } else {\n                    chosen.innerHTML = '';\n                }\n                break;\n        }\n    }\n\n    return handleSaveEvent;\n}","export const switchHandler = (idSwitch, startingPosition, callback) => {\n    \n    if(!idSwitch) return;\n    \n    const state = { position: startingPosition === 'left' ? 'right' : 'left' };\n\n    let switchControl = idSwitch.querySelector('div');\n    let leftText = idSwitch.parentElement.querySelector('.txt-left');\n    let rightText = idSwitch.parentElement.querySelector('.txt-right');\n\n    const switcher = () => {\n        \n        switch(state.position) { \n            case 'left':\n                switchControl.parentElement.classList.add('right');\n                switchControl.parentElement.classList.remove('left');\n                leftText.classList.remove('selected');\n                rightText.classList.add('selected');\n                state.position = 'right';\n                break;\n            case 'right':\n                switchControl.parentElement.classList.add('left');\n                switchControl.parentElement.classList.remove('right');\n                leftText.classList.add('selected');\n                rightText.classList.remove('selected');\n                state.position = 'left';\n                break;\n        }\n        callback(state.position);\n    }\n\n    switcher();\n\n    idSwitch.addEventListener('click', event => {\n        switcher();        \n    });\n};","import 'ui/css/groups/create-guide.css';\n\nimport { CreateGuide } from 'ui/create-guide-modal/createGuide';\nimport { enums } from 'ui/helpers/enum-helper';\n\nexport const createGuideHandler = step => {\n\n    const guide = new CreateGuide(step);\n    \n    guide.goToNextStep(step, 'NEXT');\n\n    const handleNextStepAction = e => {\n\n        guide.startLesson = parseInt(guide.nextStepActionArrow.dataset.number) === 4;\n        if(guide.startLesson) { \n            guide.nextStepActionArrow.setAttribute('data-dismiss','modal');\n        } else {\n            guide.nextStepActionArrow.removeAttribute('data-dismiss');\n        }\n        const step = guide.steps.find(step => step.description === guide.getCurrentStep().nextStep);\n        if(step) guide.goToNextStep(step.number, 'NEXT');\n        guide.listeners.push( { element: guide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    guide.nextStepActionArrow.addEventListener('click', handleNextStepAction, true);\n\n    const handlePreviousStepAction = e => {\n\n        let prevStep;\n        \n        if(guide.getCurrentStep() && guide.getCurrentStep().number === 4) {\n            prevStep = guide.option === enums.guideType.PICKER.name ? 2 : 3;\n        } else {\n            prevStep = guide.getCurrentStep().number - 1;\n        }\n        \n        guide.goToNextStep(prevStep, 'PREVIOUS', guide.option);\n        guide.listeners.push( { element: guide.previousStepActionArrow, handler: handlePreviousStepAction });\n    };\n\n    guide.previousStepActionArrow.addEventListener('click', handlePreviousStepAction, true);\n\n    guide.callOnCreateCustomListeners = collection => {\n        onCloseModalListeners.forEach(listener => listener(collection));\n        onCloseModalListeners.pop();\n    };\n};\n\nconst onCloseModalListeners = [];\n\nexport const onCreateCustomLesson = listener => { \n    onCloseModalListeners.pop();\n    onCloseModalListeners.push(listener);\n};","import { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderSpeciesSearchOptions } from 'ui/create-guide-modal/species-search-options';\nimport { renderLocation } from 'ui/create-guide-modal/location';\nimport { renderInatUser } from 'ui/create-guide-modal/inat-user';\nimport { renderCategories } from 'ui/create-guide-modal/categories';\nimport { renderSpeciesPicker } from 'ui/create-guide-modal/species-picker';\nimport { saveGuide } from 'ui/create-guide-modal/common/save-guide';\nimport { initialiseLesson } from 'ui/create-guide-modal/initialise-lesson';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport actionsTemplate from 'ui/create-guide-modal/common/actions-template.html';\n\nexport class CreateGuide {\n\n  constructor(step) {\n      \n      this.listeners = [];\n\n      this.steps = [\n          { number: 0, title: 'Create your own lesson' },\n          { number: 1, title: 'Species Picker', description: 'Provenance', nextStep: '', disabled: true, className:'species-actions',\n              nextSteps: [\n                  { id: enums.guideType.LOCATION.name, step: 'Location' },\n                  { id: enums.guideType.INAT.name, step: 'Location'},\n                  { id: enums.guideType.PICKER.name, step: 'Picker'},\n              ] },\n          { number: 2, title: 'Species Picker', description: 'Location', nextStep: 'Taxa', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n          { number: 2, title: 'Species Picker', description: 'Picker', nextStep: 'Species', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n          { number: 3, title: 'Species Picker', description: 'Taxa', nextStep: 'Species', disabled: true, className:'taxa-actions' },\n          { number: 4, title: 'Species Picker', description: 'Species', nextStep: 'View Guide', disabled: true, className:'filter-actions' }\n      ];\n\n      this.currentStep = this.steps.find(s => s.number == step);\n      \n      this.modal = document.getElementById('createGuide');\n\n      if(!this.modal) return;\n\n      this.modalTitle = this.modal.querySelector('.js-modal-title header');\n      this.navigationContainer = this.modal.querySelector('.js-modal-guide-navigation');\n      this.progressSteps = this.modal.querySelectorAll('.js-modal-guide-progress > div > div');\n      \n      this.previousStepActionArrow = this.modal.querySelector('.js-left');\n      this.previousStepActionTxt = this.modal.querySelector('.js-left .title');\n      \n      this.optionsTxt = this.modal.querySelector('.js-centre .title');\n      \n      this.nextStepActionArrow = this.modal.querySelector('.js-right');\n      this.nextStepActionTxt = this.modal.querySelector('.js-right .title');\n\n      this.progressSteps.forEach((ps,index) => {\n          ps.innerHTML = this.steps[index].description;\n      });\n\n      this.config = this.config || store.getState().config;\n\n      this.getConfig = () => {\n          return this.config;\n      }\n  \n      this.setConfig = (config) => {\n          this.config = config;\n          actions.boundUpdateConfig(config);\n      }\n\n      this.getCurrentStep = () => {\n          return this.currentStep;\n      }\n\n      this.setCurrentStep = step => {\n          this.currentStep = this.steps.find(s => s.number === step);\n      }\n\n      this.user = store.getState().user;\n  }\n\n  addStepActions(nextStep) {\n      \n      if(!nextStep) return;\n      \n      const parent = this.modal.querySelector('.js-step-action-content');\n            parent.innerHTML = '';\n      const template = document.createElement('template');\n            template.innerHTML = actionsTemplate;\n      const description = this.steps.find(step => step.number === this.currentStep.number).description;\n\n      renderTemplate({ className: nextStep.className }, template.content, parent);\n\n      const options = this.modal.querySelector('.js-options > h1');\n\n      switch(description) {\n          case 'Provenance':\n              options.innerHTML = 'How do you want to select your species?';\n              renderSpeciesSearchOptions(this);\n              break;\n          case 'Location':                                \n              options.innerHTML = 'Filter species by location and season.'\n              switch(this.option) {\n                  case enums.guideType.LOCATION.name:\n                      renderLocation(this.modal, this);\n                      break;\n                  case enums.guideType.INAT.name:\n                      renderInatUser(this.modal, this);\n                      break;\n                  case enums.guideType.PICKER.name:\n                      const chosenOnes = this.modal.querySelector('.js-chosen');\n                            chosenOnes.classList.add('hide-important');\n                      document.querySelector('.js-step-action-content .location-actions').classList.add('species-picker-actions');\n                      renderSpeciesPicker({\n                          container: this.modal,\n                          config: this.config,\n                          setConfig: this.setConfig\n                      }, this.modal.querySelector('.js-actions'));\n                      const title = this.modal.querySelector('.js-options > h1');\n                            title.innerHTML = 'Add species by name.';            \n                      break;\n              }\n              break;\n          case 'Taxa':\n              options.innerHTML = 'Filter species by taxa.'\n              renderCategories(this.modal, this);\n              break;\n          case 'Species':\n              setTimeout(() => {\n                initialiseLesson(this);\n              });\n              break;\n      }\n  }\n\n  goToNextStep(nextStep, direction, option = null, next = null) {\n\n      this.currentStep = next || this.steps.find(s => s.number === nextStep);\n\n      if(option === enums.guideType.PICKER.name) {\n          this.currentStep = this.steps[3];\n      }\n\n      this.direction = direction;\n      this.option = option || this.option;\n\n      if(this.startLesson ) {\n          this.currentStep = { number: 0 };\n      };\n\n      if(!this.modalTitle) return;\n      \n      this.modalTitle.innerText = this.currentStep.title;\n      this.nextStepActionTxt.innerHTML = this.currentStep.nextStep;\n\n      this.progressSteps.forEach((ps,index) => {\n\n          ps.classList.remove('active');\n\n          if(index + 1 === this.currentStep.number) {\n              ps.classList.add('active');\n              for(let i = 0; i < index; i++) {\n                  this.progressSteps[i].classList.add('completed');\n              }\n          }\n      });\n      \n      this.addStepActions(this.steps.find(step => step.number === this.currentStep.number));\n\n      if(this.currentStep.number === 1) {\n          this.navigationContainer.classList.remove('progress-container');\n          this.optionsTxt.classList.remove('hide-important');\n          this.previousStepActionTxt.classList.add('hide-important');\n          this.previousStepActionArrow.classList.add('arrow-wrapper-hidden');\n          this.nextStepActionArrow.classList.add('arrow-wrapper-hidden');            \n      } else {\n          this.navigationContainer.classList.add('progress-container');\n          this.optionsTxt.classList.add('hide-important');\n          this.previousStepActionArrow.classList.remove('arrow-wrapper-hidden');\n          this.nextStepActionArrow.classList.remove('arrow-wrapper-hidden');\n          this.nextStepActionArrow.dataset.number = this.currentStep.number;\n          this.previousStepActionTxt.classList.remove('hide-important');\n          const previousStepProperties = this.currentStep.prevStep\n                                              ? this.steps.find(s => s.description === this.currentStep.prevStep)\n                                              : this.steps.find(s => s.number === (this.currentStep.number - 1));\n          \n\n          if(this.getCurrentStep().number === 4) {\n              this.previousStepActionTxt.innerHTML = this.option === enums.guideType.PICKER.name \n                  ? this.steps[3].description\n                  : this.steps[4].description;\n          } else {\n              this.previousStepActionTxt.innerHTML = previousStepProperties.description;\n          }\n      }\n  }\n\n  saveStep(stepDescription, config) {\n      saveGuide(config || this.getConfig(), stepDescription)();\n  }\n};","import { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport inatTemplate from 'ui/create-guide-modal/inat-user-template.html';\n\nexport const renderInatUser = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatTemplate;\n\n    config.guide.guideMode = enums.guideMode.DYNAMIC.name;\n    if(config.guide.inatId.key !== '-----') {\n        if(config.guide.locationType !== 'inat') {\n            config.guide.locationType = 'inat';\n            createGuide.setConfig(config);\n        }\n        createGuide.saveStep('INAT');\n    }\n\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('.js-chosen > div > span:nth-child(2)').innerHTML += '<div class=\"delete-guide-link js-toggle-filter\"><input class=\"hide\" type=\"checkbox\"></div>';\n\n    let autocompleteRef;\n\n    const position = config.guide.inatId.param === 'user_id' ? 'left' : 'right';\n\n    let byType = 'users';\n\n    const inatIdentityInput = parent.querySelector('#inat-identity');\n          inatIdentityInput.focus();\n\n    const handlerInatIdentityInput = e => {\n        inatIdentityInput.removeEventListener('keypress', handlerInatIdentityInput);\n        autocompleteRef = inatAutocomplete(inatIdentityInput, byType, 'inat-autocomplete-options-container', '');\n    }\n\n    inatIdentityInput.addEventListener('keypress', handlerInatIdentityInput);\n\n    inatIdentityInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    inatIdentityInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('inatForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(inatIdentityInput.value !== '') {\n            saveInatId(parent, config, createGuide, autocompleteRef);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        inatIdentityInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.inat-autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveInatId(parent, config, createGuide, autocompleteRef);\n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    const idSwitch = parent.querySelector('.snap-switch-slider');\n\n    const switchCallback = position => {\n        \n        byType = position === 'left' ? 'users' : 'projects';\n\n        const type = position === 'left' ? 'iNat user ID' : 'iNat project ID';\n        const param = position === 'left' ? 'user_id' : 'project_id';\n\n        config.guide.inatId.type = type;\n        config.guide.inatId.param = param;\n\n        createGuide.setConfig(config);\n    };\n\n    switchHandler(idSwitch, position, switchCallback);\n};\n\nconst saveInatId = (parent, config, createGuide, autocompleteRef) => {\n\n    const input = parent.querySelector('#inat-identity');\n    if (config.isLandsapeMode) {\n        input.value = '';\n        input.focus();\n    }\n    const key = input.value;\n    const id = input.name;\n    config.guide.inatId.key = key;\n    config.guide.inatId.id = id;\n\n    if (key !== '') {\n        config.guide.locationType = 'inat';\n        createGuide.setConfig(config);\n        createGuide.saveStep('INAT');\n        parent.querySelector('#inat-identity').value = '';\n        if (autocompleteRef) {\n            // autocompleteRef.destroy();\n        }\n    }\n}\n","import { Modal } from 'bootstrap';\n\nimport { contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { listenToInatRequests } from 'api/inat/inat';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport initialiseLessonSpinnerTemplate from 'ui/create-guide-modal/initialise-lesson-template.html';\nimport speciesSummaryTemplate from 'ui/create-guide-modal/species-summary-template.html';\n\nexport const initialiseLesson = createGuide => {\n\n    const { config, modal, option } = createGuide;\n    const { collections } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = initialiseLessonSpinnerTemplate;\n\n    const parent = modal.querySelector('.js-step-action-content');\n\n    renderTemplate({ }, template.content, parent);\n\n    const feedback = document.querySelector('.js-request-feedback');\n\n    let count = 0;\n\n    const interval = setInterval(() => {\n      count = count === config.guide.iconicTaxa.length ? 0 : count;\n      feedback.innerHTML = `Fetching ${config.guide.iconicTaxa[count].common} from iNaturalist `;\n      count++;\n    }, 2000);\n\n    const nextStepActionArrow = modal.querySelector('.js-right');\n    const viewGuideIcon = nextStepActionArrow.querySelector('svg');\n          viewGuideIcon.classList.add('snap-inactive');\n\n    const back = modal.querySelector('.js-left .js-arrow-wrapper');\n    const viewTaxaIcon = back.querySelector('svg');\n          viewTaxaIcon.classList.add('snap-inactive');\n\n    const renderLessonSummary = collection => {\n\n      try {\n\n        if(collection && collection.items && collection.items.length === 0) {\n            feedback.innerHTML = 'No species were found. Try widening your parameters.';\n            return;\n        }\n\n        clearTimeout(interval);\n\n        template.innerHTML = speciesSummaryTemplate;\n\n        feedback.innerHTML = '';\n\n        collection.taxa = collection.guide.iconicTaxa.map(taxon => taxon.common).join(', ');\n        \n        renderTemplate({ collection }, template.content, feedback);\n\n        const icon = modal.querySelector('.icon svg');\n              icon.classList.remove('slow-spin');\n\n        setTimeout(() => {\n          nextStepActionArrow.addEventListener('click', e => {\n\n                setTimeout( async () => {\n\n                  // snapLog('config.guide.species', config.guide.species)\n\n                  if(config.guide.species) {\n\n                      collection.items = collection.items.filter(item => {\n                          return contains(item.name, config.guide.species.map(sp => sp.name));\n                      });\n  \n                      await lessonStateHandler.changeRequest({\n                          requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                          requestArgs: { config, collection }\n                      });\n                  }\n\n                  if(parseInt(nextStepActionArrow.dataset.number) === 4) {\n                      createGuide.callOnCreateCustomListeners(collection);\n                      lessonStateHelper.clearGuide();\n                      var createGuideModal = Modal.getInstance(document.getElementById('createGuide'));\n                      createGuideModal.hide();\n                      document.querySelector('.modal-backdrop.show.fade').style.display = 'none';\n                  }\n                });\n            });   \n        });\n\n        title.innerHTML = 'New collection species';\n\n        const editSpecies = modal.querySelector('.js-edit-species');\n              editSpecies.addEventListener('click', e => {\n                const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n                      selectedSpeciesDisplay.classList.add('open');\n                      selectedSpeciesDisplay.classList.remove('hide-important');\n                      selectedSpeciesDisplay.innerHTML = '';\n                      editSpecies.classList.add('hide-important');\n                      \n                speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n\n                const editableCollectionName = modal.querySelector('#js-input-collection-name');\n                      editableCollectionName.classList.remove('hide-important');\n                      editableCollectionName.addEventListener('focusout', e => {      \n                          const name = e.target.value;\n                          config.guide.name = name;\n                          collection.name =  name;\n                          lessonStateHandler.changeRequest( { requestType: enums.lessonState.UPDATE_COLLECTION, requestArgs: { collection, config } });\n                          \n                      });\n              });\n\n        viewGuideIcon.classList.remove('snap-inactive');\n        viewTaxaIcon.classList.remove('snap-inactive');\n\n        } catch(e) {\n          logError(renderLessonSummary, e);\n        }\n    };\n\n    const initLesson = async collectionToLoad => {\n        \n        const counter = { \n            index: 0,\n            isLessonPaused: true\n        }\n        \n        const lesson = await lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.GET_LESSON_STATE,\n            requestArgs: {\n                collectionToLoad,\n                updatedCounter: counter,\n                config: createGuide.getConfig()\n            }\n        });\n\n        // snapLog('initLesson', lesson);\n        \n        const collection = lesson.collection;\n              collection.guide = config.guide;\n              collection.isPrivate = true;\n        \n        renderLessonSummary(collection);\n\n        const OrdinalSuffixOf = i => {\n        var j = i % 10,\n            k = i % 100;\n        if (j == 1 && k != 11) {\n            return i + \"st\";\n        }\n        if (j == 2 && k != 12) {\n            return i + \"nd\";\n        }\n        if (j == 3 && k != 13) {\n            return i + \"rd\";\n        }\n        return i + \"th\";\n        }\n\n        let unsubscribe;\n\n        const callback = request => {\n            if(feedback) {\n                feedback.innerHTML = `Making ${OrdinalSuffixOf(request.page)} request of ${request.numberOfRequests}`;\n            } else {\n                unsubscribe(callback);\n            }\n        };\n\n        unsubscribe = listenToInatRequests(callback);\n    };\n    \n    config.guide.guideType = option;\n\n    switch(option) {\n\n        case enums.guideType.LOCATION.name:\n            initLesson({ \n                ...collections.find(c => c.guideType === option),                \n                name: config.guide.place.name,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                guide: config.guide,\n                language: config.language,\n                id: collections.length + 100010, // hack to avoid clashes with existing lessons\n            });\n            break;\n\n        case enums.guideType.INAT.name:\n            initLesson({\n                ...collections.find(c => c.guideType === option),  \n                name: `${config.guide.inatId.key}'s observations`,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                iconicTaxa: config.guide.iconicTaxa,\n                id: collections.length + 10000,\n            });        \n            break;\n\n        case enums.guideType.PICKER.name:\n\n            const initPicker = async () => {\n\n                const { collection } = store.getState();\n\n                let addingExtraSpecies = false;\n                \n                if(collection.items) {\n                    addingExtraSpecies = collection.items.map(i => i.name).every(val => config.guide.species.map(s => s.name).includes(val));\n                }\n    \n                let collectionToLoad;\n    \n                if(addingExtraSpecies) {\n                    collectionToLoad = collection;\n                    await lessonStateHandler.changeRequest({\n                        requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                        requestArgs: {\n                            updatedConfig: config, updatedCollection: collectionToLoad\n                        }\n                    });\n                } else {\n                    collectionToLoad = {\n                        ...collections.find(c => c.guideType === option),\n                        species: config.guide.species,\n                        id: collections.length + 10010,\n                        name: 'Your new lesson',\n                        hasVideo: false,\n                        video: {},\n                        terms: []\n                    };\n                }\n\n                initLesson(collectionToLoad);\n            };\n\n            initPicker();\n\n            break;\n    }\n\n   const title = modal.querySelector('.js-options > h1');\n         title.innerHTML = 'Requesting species images and traits';\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace, GooglePlaceDetails } from 'geo/geo';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport locationTemplate from 'ui/create-guide-modal/location-template.html';\nimport googleLogoImg from 'img/powered_by_google_on_white_hdpi.png';\n\nexport const renderLocation = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    createGuide.saveStep('LOCATION');\n\n    let locationPlace = config.guide.locationPlace;\n    let autocompleteRef;\n\n    const template = document.createElement('template');\n          template.innerHTML = locationTemplate;\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    config.guide.season.observableMonths = config.guide.season.observableMonths || config.season.observableMonths;\n    config.guide.guideMode = enums.guideMode.DYNAMIC.name;\n\n    if(config.guide.season.observableMonths) {\n\n        const months = config.guide.season.observableMonths.map(month => month.name);\n        const observableMonths = `${months[0]}-${months[months.length - 1]}`;\n        const defaultNoOfRecords = config.guide.noOfRecords;\n\n        renderTemplate({ observableMonths, noOfRecords: defaultNoOfRecords }, template.content, parent);\n    }\n\n    const defaultLocationTxt = 'Use your current location';\n\n    const setLocationLongLatBtn = modal.querySelector('.js-set-location-btn');\n          setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n\n    async function handleSetLocationLongLat(event) {\n\n        event.stopPropagation();\n        setLocationLongLatBtn.innerHTML = 'Updating location'\n        const place = await getPlace(config, true);\n        config.guide.locationType = 'longLat';        \n        config.place = place;\n        config.guide.locationLongLat = place.longLocation;\n        setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n        \n        createGuide.setConfig(config);\n        createGuide.saveStep('LOCATION');\n    }\n\n    setLocationLongLatBtn.addEventListener('click', handleSetLocationLongLat);\n\n    const locationPlaceInput = modal.querySelector('#inat-place');\n          locationPlaceInput.placeholder = config.isLandscapeMode\n                                            ? 'Or start typing the name of a place you are interested in.'\n                                            : 'Or start typing the name of a place.';\n          locationPlaceInput.focus();\n\n    // let counter = 0;\n\n    const handleLocationPlaceInput =  e => {\n        locationPlaceInput.removeEventListener('keypress', handleLocationPlaceInput);\n        // counter++;        \n        autocompleteRef = inatAutocomplete(locationPlaceInput, 'places', 'autocomplete-options-container', 'place');\n        // saveLocationBtn.disabled = false;        \n        // setTimeout(() => {\n        //     const googleImageContainer = modal.querySelector('#inat-place-autocomplete #googleLogoContainer');\n        //     if(!googleImageContainer && counter >= 3) {\n        //         const options = modal.querySelector('#inat-place-autocomplete');\n        //         if(options) options.innerHTML += `<div id=\"googleLogoContainer\"><img id=\"googleLogo\" src=\"${googleLogoImg}\" alt=\"\"></div>`;\n        //     }            \n        // },750);  \n    }\n\n    locationPlaceInput.addEventListener('keypress', handleLocationPlaceInput);\n\n    locationPlaceInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    locationPlaceInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('locationForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(locationPlaceInput.value !== '') {\n            saveLocation(config, locationPlaceInput, locationPlace, createGuide);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        locationPlaceInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveLocation(config, locationPlaceInput, locationPlace, createGuide);                   \n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    let range = config.guide.speciesRange;\n    const rangeTxt = modal.querySelector('.js-range');\n          rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n    modal.querySelector('.js-set-range-input').value = range;\n\n    const slider = modal.querySelector('.js-set-range-input');\n    \n    const updateSlider  = event => {\n        range = event.target.value;\n        config.guide.speciesRange = range;\n        rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n        createGuide.setConfig(config);\n    };\n    \n    slider.addEventListener('change', updateSlider);\n\n    createGuide.nextStepActionArrow.addEventListener('click', event => {\n        if(autocompleteRef)\n            autocompleteRef.destroy();\n    });\n\n    const idSwitch = parent.querySelector('.js-snap-switch-slider');\n\n    const switchCallback = position => {\n\n        const config = createGuide.getConfig();\n\n        const currentType = config.guide.season.type;\n\n        if(position === 'right') {\n            config.guide.season.type = 'all_year';\n        } else {\n            config.guide.season.type = 'months';\n        }\n\n        createGuide.setConfig(config);\n        \n        if(config.guide.season.type !== currentType) {\n            createGuide.saveStep('SEASON');\n        }        \n    };\n\n    const position = config.guide.season.type === 'months' ? 'left' : 'right';\n\n    switchHandler(idSwitch, position, switchCallback);\n\n    const noOfRecords = document.querySelector('.js-location-no-of-records');\n          noOfRecords.addEventListener('change', e => {\n            const config = createGuide.getConfig();\n                  config.guide.noOfRecords = parseInt(noOfRecords.value);\n            createGuide.setConfig(config);\n          });\n}\n\nconst saveLocation = (config, locationPlaceInput, locationPlace, createGuide) => {\n\n    let selectedText = locationPlaceInput.value;\n    let selectedId = locationPlaceInput.name;\n\n    config.guide.locationType = 'longLat';\n    config.guide.place.name = selectedText;\n    config.guide.locationLongLat = selectedText;\n\n    config.guide.locationType = 'longLat';\n    config.guide.locationLongLat = selectedText;    \n\n    const callback = geocoderResult => {\n        if(geocoderResult && geocoderResult.length > 0) {\n            const lat = geocoderResult[0].geometry.location.lat();\n            const long = geocoderResult[0].geometry.location.lng();\n            config.guide.coordinates = { lat, long };\n            \n            locationPlaceInput.value = '';\n            \n            createGuide.setConfig(config);\n            createGuide.saveStep('LOCATION');\n        }\n    };\n    GooglePlaceDetails(selectedId, callback);\n\n    return locationPlace;\n}\n","import { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport speciesTemplate from 'ui/create-guide-modal/species-search-options-template.html';\n\nexport const renderSpeciesSearchOptions = createGuide => {\n\n    const header = createGuide.modal.querySelector('.js-modal-title > header');\n          header.innerHTML = 'Create your own lesson';\n\n    const options = [\n        {\n            text: 'By location and season',\n            id: enums.guideType.LOCATION.name\n        },\n        {\n            text: 'From iNaturalist observations',\n            id: enums.guideType.INAT.name\n        },\n        {\n            text: 'Using a name-based search',\n            id: enums.guideType.PICKER.name\n        }\n    ];\n\n    const template = document.createElement('template');\n          template.innerHTML = speciesTemplate;\n    const parent = createGuide.modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    const config = createGuide.getConfig();\n\n    renderTemplate({ options }, template.content, parent);\n\n    const handleNextStepAction = event => {\n\n        const option = event.currentTarget.dataset.option;\n        const step = createGuide.steps.find(s => s.number === createGuide.getCurrentStep().number);\n        const nextStepName = step.nextSteps.find(step => step.id === option).step;\n        const nextStep = createGuide.steps.find(s => s.description === nextStepName);\n\n        createGuide.startLesson = false;        \n        createGuide.goToNextStep(createGuide.getCurrentStep().number + 1, 'NEXT', option, nextStep);\n        createGuide.listeners = [];\n        createGuide.listeners.push( { element: createGuide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    const lessonOptions = document.querySelectorAll('.custom-lesson-menu-options li');\n    \n    lessonOptions.forEach((option, index) => {\n        option.addEventListener('click', handleNextStepAction, true);\n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        createGuide.setConfig(config);\n    });\n\n    const warning = createGuide.modal.querySelector('.js-persistence-warning');\n            \n    if(createGuide.user) {\n        warning.classList.add('hide-important');\n    }\n};","export const DOM = {\n  \n    leftGrid : document.getElementsByClassName('js-side-lesson-list')[0],\n    leftHeader : document.getElementsByClassName('js-side-lesson-list-header')[0],\n    leftBody : document.getElementsByClassName('js-side-lesson-list-body')[0],\n    leftFooter : document.getElementsByClassName('js-side-lesson-list-footer')[0],\n\n    leftHeaderTxt : document.getElementsByClassName('js-side-lesson-list-header-txt')[0],\n    specimenRptr : document.getElementsByClassName('js-rptr-specimen')[0],\n    \n    rightGrid : document.getElementsByClassName('js-main-lesson-grid')[0],\n    rightHeader : document.getElementsByClassName('js-main-lesson-header')[0],\n    rightHeaderTxt : document.getElementsByClassName('js-main-lesson-txt-header')[0],\n    rightHeaderScoreTxt : document.getElementsByClassName('js-main-lesson-txt-score')[0],\n    rightBody : document.getElementsByClassName('js-main-lesson-body')[0],\n    rightRptrSummary : document.getElementsByClassName('js-summary')[0],\n    rightBodyBottom : document.getElementsByClassName('js-main-lesson-body-bottom')[0],\n    rightFooter : document.getElementsByClassName('js-main-lesson-footer')[0]    \n};\n","import { renderTextEntry } from 'ui/screens/text-entry/species-text-entry';\nimport { renderHistory } from 'ui/screens/progress/history';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderSummary } from 'ui/screens/progress/summary';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderCompleteText } from 'ui/screens/text-entry/text-complete';\nimport { renderNonTaxonCardSpecimenTiles } from 'ui/screens/cards/non-taxon-card-specimen-tiles';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\nimport { renderMediaPlayers } from 'ui/screens/media/landscape/media-players';\nimport { renderBonusTest } from 'ui/screens/bonus/bonus-test';\nimport { renderBonusSpecimenTiles } from 'ui/screens/bonus/bonus-specimen-tiles';\nimport { renderMixedTraitQuestion } from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question';\nimport { renderHorizontalStrips } from 'ui/screens/multichoice/horizontal-strips.js';\n\nconst functions = [\n    { name: 'non-taxon-specimen-tiles', func: renderNonTaxonCardSpecimenTiles },\n    { name: 'text-entry', func: renderTextEntry },\n    { name: 'species-card', func: renderCard },\n    { name: 'species-scientifics', func: renderMultiStrips },\n    { name: 'species-vernaculars', func: renderMultiStrips },\n    { name: 'species-identification', func: renderMultiStrips },\n    { name: 'summary', func: renderSummary },\n    { name: 'history', func: renderHistory },\n    { name: 'epithet', func: renderMultiStrips },\n    { name: 'definition', func: renderBonusTest },\n    { name: 'family', func: renderMultiStrips },\n    { name: 'family-strips', func: renderMultiStrips },\n    { name: 'taxon-card', func: renderTaxonCard },\n    { name: 'non-taxon-card', func: renderNonTaxonCard },\n    { name: 'text-complete', func: renderCompleteText },\n    { name: 'visual-match', func: renderMultiStrips },\n    { name: 'trait-images', func: renderBonusSpecimenTiles },\n    { name: 'trait-property', func: renderBonusTest },\n    { name: 'lookalike-property', func: renderBonusTest },\n    { name: 'symbiotic-property', func: renderMultiStrips },\n    { name: 'mixed-specimen-question', func: renderMixedSpecimenQuestion }, // landscape triggers both ?\n    { name: 'birdsong', func: renderBonusTest },\n    { name: 'media-players', func: renderMediaPlayers },    \n    { name: 'mixed-trait-question', func: renderMixedTraitQuestion },\n    { name: 'provider-horizontal-strip-questions', func: renderHorizontalStrips },\n];\n\nexport const funcByName = name => {\n    const match = functions.find(func => func.name === name);\n    const func = match ? match.func : null;\n    return func;\n};","import { iconicTaxa, matchIcon, matchRank } from 'api/snapdragon/iconic-taxa';\n\nconst mushroomIcon = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg-icon>';\n\nexport const renderIcon = (taxonomy, rootNode) => {\n\n    if(taxonomy.kingdom.toLowerCase() === 'fungi') {\n\n        const iconicIconContainer = rootNode.querySelector('.js-iconic-icon');\n\n        iconicIconContainer.innerHTML = `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n\n    } else {\n\n        const iconicIcon = rootNode.querySelector('.js-iconic-icon i');\n\n        const classes = matchIcon(taxonomy, iconicTaxa).split(' ');\n\n        classes.forEach(c => iconicIcon.classList.add(c));   \n    }\n\n    return rootNode.querySelector('.js-iconic-icon');\n};\n\nexport const returnIcon = item => {\n\n    if(!item.taxonomy) return '';\n\n    if(item.taxonomy.kingdom.toLowerCase() === 'fungi') {\n        return `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n    } else {\n        return `<i class=\"small-icon ${matchIcon(item.taxonomy, iconicTaxa)}\"></i>`;\n    }\n};\n\nexport const returnTaxonIcon = taxon => {\n\n  if(!taxon) return;\n\n  if(taxon.toLowerCase() === 'fungi') {\n      return `<span class=\"iconic-taxa-categories-selected\">${mushroomIcon}</span>`;\n\n  } else {\n      return `<span><i class=\"small-icon ${matchRank(taxon)}\"></i></span>`;\n  }\n};","import { clone } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\n\nconst stripImageUrlOfScaleAndPrefix = img => {  \n    const prefix = img.provider === 'inat' ? 'https://static.inaturalist.org/photos/' : 'https://content.eol.org/data/media/';\n    if(!img.url || typeof img.url === 'object') return '';\n    let part = img.url.replace('.260x190.jpg', '');\n        part = part.replace('.98x68.jpg', '');\n        part = part.replace('.jpg', '');\n        part = part.replace(prefix, '');\n\n    if(img.provider === 'inat') {\n      part = part.split('?')[0];\n    }\n\n    return part;\n};\n\nexport const imageUseCases = {\n    SPECIES_LIST: 'Species list',\n    SPECIES_CARD: 'Species card',\n    TAXON_CARD: 'Taxon card',\n    SPECIES_SPECIMENS: 'Species specimens',\n    NON_TAXON_CARD: 'Non-taxon card',\n    VISUAL_MATCH: 'Visual match',\n    MIXED_SPECIMENS: 'Mixed specimens',\n    CAROUSEL: 'Carousel',\n    TEXT_ENTRY: 'Text entry',\n    ACTUAL_SIZE: 'Actual size',\n    SPECIES_GRID: 'Species grid'\n}\n\nexport const denormaliseImages = images => {\n    const denormalisedImages = images.map(image => {\n        image.photographersName = image.photographer ? image.photographer.full_name || '' : '';\n        return image;\n    });\n    return denormalisedImages;\n};\n\nexport const imageMatch = (src1, src2) => {\n    if(!src2) return false;\n    src1 = stripImageUrlOfScaleAndPrefix(src1);\n    src2 = stripImageUrlOfScaleAndPrefix(src2);\n    const isActiveImage = src1 === src2;\n    return isActiveImage;\n};\n\nexport const prepImageForCarousel = (image, index, item, config, useCase) => {\n    let img = { \n        index: index + 1, \n        ...image,\n        url: scaleImage(image, useCase, config).medium,\n        // large: scaleImage({ url:image.src }).large,\n        itemName: item.name,\n        itemCommon: item.itemCommon,\n        rightsHolder: image.rightsHolder || '',\n        photographersName : image.photographer ? image.photographer.full_name || '' : '',\n        provider: image.provider || ''       \n    };\n    if(image.src) {\n        img = { ...img, ...image.src, medium: image.medium };\n    }\n    return img;\n};\n\nexport const prepImagesForCarousel = (item, config, useCase) => {\n    const images = item.images.map((image, index) => { \n        return prepImageForCarousel(image, index, item, config, useCase);\n    });\n    return images;\n};\n\nexport const scaleImage = image => {\n\n    if(!image.url) {\n        return image;\n    }\n\n    image.part = stripImageUrlOfScaleAndPrefix(image);\n\n    if(image.provider === 'inat') {\n        image.small = `https://static.inaturalist.org/photos/${image.part}`;\n        image.medium = image.part.replace('small', 'medium');\n        image.medium = `https://static.inaturalist.org/photos/${image.medium}`;\n        image.large = image.part.replace('small', 'large');\n        image.large = `https://static.inaturalist.org/photos/${image.large}`;\n        return image;\n    } else {\n        image.small = `https://content.eol.org/data/media/${image.part}.98x68.jpg`;\n        image.medium = `https://content.eol.org/data/media/${image.part}.260x190.jpg`;\n        image.large = `https://content.eol.org/data/media/${image.part}.jpg`;\n        return image;\n    }\n    \n};\n\nexport const modalImagesHandler = (images, item, collection, config, displayNameType) => {\n    images.forEach(image => {\n        modalImageHandler(image, item, collection, config, displayNameType);\n    });\n};\n\nconst handleImageSelectionFromList = (image, item, collection, config, displayNameType = 'binomial') => {\n\n    const parent = document.querySelector('#imageModal .js-modal-image');\n    const selectedItem = item || collection.items.find(item => item.name === image.dataset.itemName);\n    let images = clone(selectedItem.images.map((image, index) => {\n        selectedItem.vernacularName = itemProperties.getVernacularName(selectedItem, config);\n        image = scaleImage(image, imageUseCases.CAROUSEL, config);\n        return { ...image, itemName: selectedItem.name, itemCommon: selectedItem.vernacularName };\n    }));\n    images = denormaliseImages(images);\n    const selectedItemImage = selectedItem.images.find(i => imageMatch(i,image.dataset));\n    const selectedImage = { dataset: { ...image.dataset, ...selectedItemImage } };\n    imageSlider({ config, images, parent, image: selectedImage, identifier: selectedImage.dataset.itemName.replace(' ', '_') });\n    let displayName = '';\n    switch(displayNameType) {\n        case 'biomial':\n            displayName = selectedItem.name;\n            break;\n        case 'vernacular':\n            displayName = selectedItem.vernacularName;\n            break;\n        case 'withheld':\n            displayName = 'Species name withheld';\n            break;\n        default:\n            displayName = `<span>${selectedItem.vernacularName}</span> <span class=\"latin-name\">${selectedItem.name}</span>`;\n    }\n\n    document.querySelector('#imageModal .js-modal-image-title span:nth-child(1)').innerHTML = displayName;\n};\n\nexport const modalImageHandler = (image, item, collection, config, displayNameType = 'binomial') => {\n    image.addEventListener('click', e => {\n        if(!item) return;\n        handleImageSelectionFromList(image, item, collection, config, displayNameType);        \n    }, true);\n};\n","import autocomplete from 'autocompleter';\nimport { getAutocompleteBy } from 'api/inat/inat';\nimport { GoogleAutocomplete } from 'geo/geo';\n\n// https://github.com/kraaden/autocomplete\n\nexport const inatAutocomplete = (input, type, className, rb) => {\n\n    const MIN_LENGTH = 3;\n\n    async function getUserSuggestions(text) {\n        const users = await getAutocompleteBy(text, 'users');\n        return users.results.map(user => {\n            return { label: user.login_autocomplete, value: user.id, photo: user.icon, name: user.name };\n        });\n    }\n\n    async function getInatPlaceSuggestions(text) {        \n        const users = await getAutocompleteBy(text, 'places');\n        return users.results.map(place => {\n            return { label: place.display_name, value: place.id };\n        });\n    }    \n\n    function getPlaceSuggestions(text, update) {\n        let callback = null;\n        callback = predictions => {\n            update(predictions.map(prediction => {\n                return { label: prediction.description, value: prediction.place_id };\n            }));\n        } \n        GoogleAutocomplete(text, callback);\n    }\n\n    async function getProjectSuggestions(text) {\n        const projects = await getAutocompleteBy(text, 'projects');\n        return projects.results.map(place => {\n            return { label: place.title, value: place.id };\n        });\n    }\n    \n    const autocompleteRef = autocomplete({\n        input: input,\n        fetch: function(text, update) {\n            switch(type) {\n                case 'users':\n                    getUserSuggestions(text).then(users => {\n                        update(users);\n                    });\n                    break;\n                case 'places':\n                    getPlaceSuggestions(text, update);\n                    break;\n                case 'projects':\n                    getProjectSuggestions(text).then(projects => {\n                            update(projects);\n                        });\n                    break;\n            }           \n\n        },\n        onSelect: function(item) {\n            input.value = item.label;\n            input.name = item.value;\n        },\n        className: className,\n        rb: rb,\n        minLength: MIN_LENGTH,\n        debounceWaitMs: 200\n    });\n\n    return autocompleteRef;\n};","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { utils } from 'utils/utils';\nimport { markTest} from 'ui/helpers/test-handler';\nimport { subscription } from 'redux/subscriptions';\n\nexport const scoreHandler = (type, test, callback, config) => {\n    \n    switch(type) {\n        case 'radio':\n        case 'text':\n            return genericScoreHandler(test, callback, config);\n        case 'block':\n            blockScoreHander(test, callback, config);\n            break;\n        case 'strip':   \n            stripScoreHandler(test, callback, config);\n            break;\n        case 'image':\n            imageScoreHandler(test, callback, config);\n            break;\n        case 'image-match':\n            simpleScoreHandler(test, callback, config);\n            break;\n    }\n};\n\nexport const renderScoreHTMLResponse = response => {\n    const html = response.success\n            ? `<div class=\"answer-box-success\">\n                <span class=\"icon\"><i class=\"fas fa-check\"></i></span><span class=\"answer-response\">${ response.correct }</span>\n                </div>`\n            : `<div class=\"answer-box-alert\">\n                <span class=\"icon\"><i class=\"fas fa-times\"></i></span><span class=\"answer-response\">${response.answer || response.incorrect}</span>\n            </div>`;\n    return html;\n};\n\nconst showResponseToAnswerHandler = response => {\n    const questionText = document.querySelector(response.container) || document.querySelector('.js-txt-question');\n    if(questionText) {\n          questionText.innerHTML = renderScoreHTMLResponse(response);\n    }\n}\n\nexport const continueLessonHandler = (btn, score, timer) => {\n        \n    btn.disabled = false;\n    btn.style.cursor = 'pointer';\n\n    btn.addEventListener('click', event => {\n        btn.disabled = true;\n        window.clearTimeout(timer);\n        subscription.removeAllQuizScreenSubs();\n        bindScore(score);\n    });\n};\n\nconst simpleScoreHandler = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeAllQuizScreenSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);      \n    }, delay);\n\n    if(callback) {\n        callback(score, scoreUpdateTimer);\n    } else {\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n}\n\nconst genericScoreHandler = (_score, callback, config) => {\n    \n    const { itemId, question, answer, target, layoutCount, points, names, questionText, answers } = _score;\n    const test = { itemId, ...question, answer, points, names, questionText, answers };\n\n    const score = markTest(test);\n\n    let responseTxt = (test.names && test.names.length > 0) ? test.names[0] : test.binomial;\t\n    let labelTxt = 'Species';\t\n\n    if(score.taxon === 'genus') {\n        responseTxt = score.genus;\n        labelTxt = 'Genus name';\n    }\n\n    if(score.taxon === 'species') {\n        responseTxt = score.species;\n        labelTxt = 'Species name';\n    }\n    if(score.taxon === 'name') {\n        responseTxt = score.binomial;\n        labelTxt = 'Latin name';\n    }\n\n    if(score.taxon === 'family') {\n        responseTxt = score.question;\n        labelTxt = 'Family name';\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    const container = window.matchMedia(\"(max-height: 568px)\").matches ? '.js-check-answer' : '.js-txt-question';\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect,  container, answer: score.question });\n\n    score.layoutCount = layoutCount;\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeAllQuizScreenSubs(); \n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);               \n    }, delay);\n\n    if(callback) callback(score, scoreUpdateTimer);\n\n    return { score, scoreUpdateTimer };\n};\n\nconst blockScoreHander = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeAllQuizScreenSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);        \n    }, delay);\n\n    callback(score, scoreUpdateTimer, config);\n};\n\nconst stripScoreHandler = (test, callback, config) => {    \n\n    const { items, taxon } = test;\n\n    const handleClickEvent = e => {\n      \n        e.preventDefault();\n\n        const target = e.target;\n\n        if(utils.hasClass(target, 'disabled')) return;\n\n        const answerNode = target;\n        const answer = answerNode.innerText.trim();\n        const answerIndex = answerNode.dataset.answerIndex;\n        const name = answerNode.dataset.name;\n        const vernacular = target.dataset.vernacular;\n\n        test.taxon = 'name';\n        test.vernacular = vernacular;\n        test.question = taxon.question;\n        test.answer = (name && name !== '') ? { term: answer, name } : answer;\n            \n        const score = markTest({...test, answeredIndex: parseInt(answerIndex), answers: [] });\n\n        target.classList.add(score.colour);\n\n        items.forEach(strip => {   \n            const stripAnswer = strip.querySelector('button');\n            const stripAnswerIndex = parseInt(stripAnswer.dataset.answerIndex);\n            const stripAnswerName = stripAnswer.dataset.name || '';\n            \n            stripAnswer === '' \n                ? score.answers.push(stripAnswer.innerText) \n                : score.answers.push({\n                    term: stripAnswer.innerText,\n                    name: stripAnswerName\n                });\n            \n            if(stripAnswerIndex === score.answerIndex) {\n                strip.classList.add('snap-success');\n            } else if(stripAnswerIndex === score.answeredIndex) {\n              strip.classList.add('snap-alert');\n            }\n        });     \n        \n        if(callback) {\n            callback(score);\n        } else {\n            const _callback = (score) => {\n\n                const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n                const scoreUpdateTimer = setTimeout(()=>{\n                    subscription.removeAllQuizScreenSubs();\n                    bindScore(score);\n                }, delay);\n            \n                continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n\n                // screen is always null\n                if(screen.name === 'family-strips') {\n                    document.querySelector('.js-question-question').innerHTML = item.taxonomy.family;\n                    document.querySelector('.js-question-help').classList.add('hide');\n                }\n            };\n            _callback(score);\n        }\n            \n        let correct = `Correct`;\n        let incorrect = `Incorrect`;\n\n        showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n\n        items.forEach(item => item.classList.add('disabled'));\n    };\n\n    items.forEach(selected => {        \n        selected.addEventListener('click', handleClickEvent);\n    });\n\n    window.addEventListener('keydown', e => {\n      if(e.key === 'Enter') {\n        handleClickEvent(e);\n      }                  \n    }, { once: true });\n};\n\nconst imageScoreHandler = (test, callback, config) => {\n\n    const { items, taxon } = test;\n\n    items.forEach(tile => {\n        tile.addEventListener('click', event => {\n\n            const img = event.target;\n            const answer = img.dataset.answer;\n\n            if(!answer) return;\n\n            test.taxon = 'name';\n            test.question = taxon.name\n            test.answer = answer;\n            const score = markTest(test);\n\n            tile.style.filter = 'saturate(100%)';\n\n            img.parentNode.style.filter = 'saturate(100%)';\n\n            items.forEach(tile => {\n                tile.style.filter = 'saturate(10%)';\n                tile.style.opacity = .3;\n                if(tile.dataset.answer.trim().toLowerCase() === taxon.name.trim().toLowerCase()) {\n                    tile.style.filter = 'saturate(100%)';\n                    tile.style.opacity = 1;\n                }\n            });\n\n            const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n            subscription.removeAllQuizScreenSubs();\n\n            const scoreUpdateTimer = setTimeout(() => {\n                bindScore(score);\n            }, delay);\n                \n            if(callback) callback(score, scoreUpdateTimer);\n        });\n    });\n};\n\nexport const bindScore = score => {\n\n    const { collection } = store.getState();\n\n    score.collectionId = collection.id;\n\n    actions.boundUpdateScore(score);\n};","import { isEmpty, compose, symmetricDifference, contains, clone } from 'ramda';\n\nexport const cleanText = text => {\n    return text.term ? text.term.toLowerCase() : text.toLowerCase().replace(/ /g,'');\n};\n\nexport const isAnswerEqualToQuestion = (question, answer) => {\n\n\n    const eqValues = compose(isEmpty, symmetricDifference);\n\n    return eqValues(cleanText(question), cleanText(answer));\n};\n\nconst isAnswerCorrect = score => {\n\n    let isCorrect;\n\n    if(score.answeredIndex) {\n        return parseInt(score.answeredIndex) === score.answerIndex;\n    }\n\n    score.answer = score.answer.term || score.answer;\n    score.answer = score.answer.trim();\n\n    isCorrect = isAnswerEqualToQuestion(score.question, score.answer);\n\n    // score.clue = score.clue ? score.clue.toLowerCase().replace(/ /g,'') : null;\n\n    // isCorrect = score.clue ? score.answer.indexOf(score.clue) > -1 : isCorrect;\n\n    switch(score.taxon) {\n        case 'vernacular':\n            score.names = score.names.map(name => name.toLowerCase());\n            if(score.names && score.names.length > 0) {\n                const alternativeIsCorrect = contains(score.answer, score.names);                \n                if(!isCorrect && alternativeIsCorrect) score.alternativeAccepted = true;\n                isCorrect = isCorrect || alternativeIsCorrect;\n            }\n        break;\n    }\n    return isCorrect;\n};\n\nconst isTraitAnswerCorrect = score => {\n    const doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n    return doArraysHaveSameValues(score.answer, score.question);\n};\n\nexport const markTest = test => {\n\n    const score = clone(test);\n\n    score.success = score.trait ? isTraitAnswerCorrect(score) : isAnswerCorrect(score);\n    score.colour  = score.success ? 'snap-success' : 'snap-alert';\n    \n    return score;\n};","import { isEmpty, compose, symmetricDifference, contains, take } from 'ramda';\n\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { utils } from 'utils/utils';\n\nconst getRandomTrait = (traits, traitsToIgnore) => {    \n\n    const allowedTraits = {};\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key.toLowerCase(), traitsToIgnore)) {\n            allowedTraits[key] = obj.unit ? [`${obj.value}${obj.unit}`] : obj.value;\n        }\n    }\n\n    let trait = utils.getRandomObjectProperty(allowedTraits);\n    return trait;\n};\n\nconst getTraitsPoolForUnits = trait => {\n    // create set of numeric answers based on the value\n\n    const traitsPool = [1,2,3,4,5,6,7,8,9];\n\n    if(trait.unit === 'MM'){\n        // months\n        // find distance between first and second and add answers with similar gap\n        // e.g. jan-feb produces aug-sep, nov-dec, etc.\n    }\n\n    return { traitsPool, help: 'Pick the best range'};\n};\n\nconst getTraitsPoolForRoles = trait => {    \n    enumKey = trait.role; // e.g. name of role, but role of predator; (and possibly need to apply logic as below)\n    const traitsPool = ['role1', 'role2', 'role3', 'role4', 'role5', 'role6', 'role7', 'role8', 'role9', 'role10'];\n    return { traitsPool, help: 'symbiosis'};\n};\n\nconst getTraitValues = (trait, traits) => {\n\n    let traitKeyParts = trait.key.split(' ');\n    let enumKey; // e.g map 'leaf variation' to leafVariation\n    \n    traitKeyParts.forEach((part, index) => {\n        if(index === 0) {\n            enumKey = part.toLowerCase();\n        } else {\n            enumKey += utils.capitaliseFirst(part);\n        }\n    });\n\n    const traitValues = traits[enumKey];\n\n    return traitValues;\n};\n\nconst getTraitsPool = (trait, traits) => {\n\n    let traitsPool = [];\n\n    let traitValues = getTraitValues(trait, traits);\n\n    if(!traitValues) {\n        traitValues = traits[itemProperties.getRootTraitValue(utils.toCamelCase(trait.key))];\n        if(traitValues) traitValues.help = trait.key;\n    }\n\n    if(traitValues) {        \n        for (let [key, obj] of Object.entries(traitValues)) {\n            if(!contains(key, [ 'type', 'name', 'help'])) {\n                if(key !== trait.key) {\n                    traitsPool.push(obj);\n                }\n            }\n        }\n    }\n\n    let help = traitValues \n            ? traitValues.help || traitValues.name\n            : trait.key;\n\n    return { traitsPool, help };\n};\n\nconst getSetOfTraitAnswers = (pool, trait) => {\n\n    let traitSet = trait.value;\n        traitSet = traitSet.map(t => t.trim());\n        traitSet = utils.shuffleArray(traitSet);\n\n    // take maximum of 2 values from the trait values array\n\n    let traitValues = take(2, traitSet);\n\n    let sets = [];\n  \n    if(traitValues.length === 1) {\n        \n        sets = [ ...take(5, pool.filter(value => value !== trait.value[0])), trait.value[0] ];\n\n    } else {\n\n        // create a 'set' of all possible unique 2-value combinations\n        \n        pool.forEach(a => {\n            pool.forEach( b => {\n                if(a !== b) {\n                    const exists = sets.filter(s => s === [a,b] || s === [b,a]).length > 0;\n                    if(!exists) { \n                        sets.push([a,b]);\n                    }\n                }\n            })\n        });\n\n        sets = take(6, utils.shuffleArray(sets));\n\n        // remove any combination that matches the trait value set (in either order) \n\n        sets = sets.map(set => {\n            if(set[0] !== traitSet[0] && set[1] !== traitSet[1] || set[0] !== traitSet[1] && set[1] !== traitSet[0]) {\n                return set;\n            }\n        }).filter(s => s);\n\n        sets = take(5, sets);\n        sets = [ ...sets, traitSet ];\n\n        if(sets.length === 0) {\n            sets = ['a', 'b', trait.value];\n        }\n        \n        sets = sets.map(set => set.join(', '));\n    }\n  \n    return utils.shuffleArray(sets);\n};\n\nconst getTraitByKey = (traits, traitKey) => {\n    return traits[Object.keys(traits).find(key => key === traitKey)];\n}\n\nconst getTraitValueByKey = (traits, traitKey) => {\n    const trait = getTraitByKey(traits, traitKey);\n    if(trait) return trait.value;\n}\n\nconst hasTraitPropeties = traits => {\n    for(var prop in traits) {\n        if (traits.hasOwnProperty(prop)) {\n            return true;\n        }\n    }\n};\n\nconst getLinkedTaxaTraits = traits => {\n    \n    const taxaTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(obj.type) {\n            taxaTraits.push({ name: key, value: obj.value, type: obj.type });\n        } else if(key === 'lookalikes') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'lookalike' });\n        } else if(key === 'symbionts') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'symbionts' });\n        }\n    }\n\n    return taxaTraits;\n};\n\nconst getTraitsToExclude = () => {\n    return [ \n        'symbionts', 'voice', 'pollination', 'name', \n        'units', 'song', 'uk rank',\n        'colour', 'bark colour', 'height',\n        'physiology', 'description',\n        'usage', 'habitat',\n        'symbiont'\n        //'characteristic'\n    ];\n};\n\nconst handleUnit = unit => {\n\n    unit = unit || '';\n\n    switch(unit) {\n        case 'DD':\n            return ' days';\n        case 'MM':\n            return '';\n        case 'YY':\n            return ' years';\n     default:\n        return unit;   \n    }    \n};\n\nconst convertTraitsToNameValuePairsArray = (traits, traitsToExclude, item) => {\n\n    if(!hasTraitPropeties(traits)) return {};\n    \n    const includedTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key, traitsToExclude)) {\n            if(key === 'lookalikes') {\n                obj.forEach(species => {\n                    includedTraits.push({\n                        name: key, \n                        value: [species.lookalike.name],\n                        description: species.description, lookalike: { name: species.lookalike.name, description: species.lookalike.description } \n                    }); \n                });\n            } else if(key === 'relationships') {\n                obj.forEach(species => {\n                    includedTraits.push({ \n                        name: key, value: [species.symbiont.name],\n                    }); \n                });\n            } else {\n                includedTraits.push({ name: key, value: obj.value, unit: handleUnit(obj.unit), type: obj.type || '' });\n            }\n        }\n    }\n    \n    return includedTraits;\n};\n\nconst getNMultiplesFromArray = (arra, arra_size) => {\n\n    if(arra.length === 0) return [];\n\n    var result_set = [], \n        result;\n    \n   \n    for(var x = 0; x < Math.pow(2, arra.length); x++) {\n        result = [];\n        var i = arra.length - 1; \n        do {\n            if((x & (1 << i)) !== 0) {\n                result.push(arra[i]);\n            }\n        } \n        \n        while(i--);\n\n        if(result.length >= arra_size) {\n            result_set.push(result);\n        }\n    }\n\n    return result_set.filter(set => set.length === arra_size);\n};\n\nconst doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n\nexport const traitsHandler = {\n    getRandomTrait,\n    getTraitsPoolForUnits,  \n    getTraitsPoolForRoles,\n    getTraitValues,\n    getTraitsPool,\n    getSetOfTraitAnswers,\n    getTraitByKey,\n    getTraitValueByKey,\n    getLinkedTaxaTraits,\n    getTraitsToExclude,\n    convertTraitsToNameValuePairsArray,\n    getNMultiplesFromArray,\n\n    doArraysHaveSameValues,\n    hasTraitPropeties,\n};","import { clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderSpecimenTiles } from 'ui/screens/landscape/specimen-tiles';\n// import { renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\n\nexport const renderBonusSpecimenTiles = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n          collection.nextItem = bonusLayout.item;\n          collection.nextItem = collection.nextItem || collection.items[collection.itemIndex];\n    \n    const lookalikesCount = bonusLayout.item \n            ? bonusLayout.overrides.trait.lookalikes ? bonusLayout.overrides.trait.lookalikes.length + 1 : 0 // lookalikes + item itself\n            : 0;\n\n    if(lookalikesCount > 0) {\n        let noOfImagesPerItem = 6 / lookalikesCount;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, [ collection.nextItem, ...bonusLayout.overrides.trait.lookalikes]);\n    } else {\n        renderSpecimenTiles(collection);\n    }\n\n};","import { clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\n\nexport const renderBonusTest = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n\n    collection.nextItem = bonusLayout.item;\n\n    if(bonusLayout.overrides && bonusLayout.overrides.trait && bonusLayout.overrides.trait.name === 'lookalikes') {\n        collection.items = [ ...bonusLayout.overrides.trait.lookalikes, collection.nextItem ];\n        // currently no logic to support this as multiple images was replaced by slider (as in portrait)\n        // option could be to have e.g. 6 images, 3 of species and 3 of lookalike\n        renderMixedSpecimenQuestion(collection, bonusLayout);\n    } else {        \n        renderMultiStrips(collection, bonusLayout);\n    }\n\n};\n","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { getBirdSong } from 'xeno-canto/birdsong';\nimport { lookalikeSpecies } from 'ui/screens/common/look-alikes';\nimport { infoSlider } from 'ui/screens/common/info-slider';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { renderInatDataBox } from 'ui/screens/common/inat-box';\nimport { renderCalendar } from 'ui/screens/common/calendar';\nimport { renderTaxaBox } from 'ui/screens/common/taxa-box';\nimport { renderBadge } from 'ui/screens/common/badge';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { firestore } from 'api/firebase/firestore';\n\nimport cardTemplate from 'ui/screens/cards/card-template.html';\n\nexport const renderCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, isInCarousel = true) => {\n\n    if(!selectedItem) return;\n\n    const { layout, config } = store.getState();\n\n    let item;\n\n    const init = async () => {\n\n            const getItemWithProps = async item => {\n\n            if(item.eolId) return new Promise(resolve => resolve(item));\n            \n            const getItem = async item => {\n                return item.family\n                            ? new Promise(resolve => resolve(item))\n                            : await firestore.getSpeciesByName(item.name);\n            };\n\n            const itemWithProps = await getItem(item);\n            \n            itemWithProps.family = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.FAMILY.name.toLowerCase()]) || { names: [ itemWithProps.taxonomy.family ]};\n            itemWithProps.order = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.ORDER.name.toLowerCase()]);\n            itemWithProps.traits = await firestore.getTraitsBySpeciesName(item.name);\n            itemWithProps.vernacularName = itemWithProps.vernacularName || itemProperties.getVernacularName(item, config);\n\n            const names = item.name.split(' ');\n\n            itemWithProps.taxonomy.genus = names[0];                \n            itemWithProps.taxonomy.species = names[1];\n\n            return itemWithProps;\n        };\n    \n        item = selectedItem || collection.nextItem;\n\n        item = await getItemWithProps(item);\n\n        let rootNode;\n    \n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = config.isLandscapeMode ? modal.querySelector('.js-modal-text') : document.querySelector('.main-lesson-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = config.isLandscapeMode ? parent : document.querySelector('.js-species-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n    \n        if(mode === 'STAND-ALONE') {        \n            const screen = layout.screens.filter(el => el.name === 'species-card')[0];\n            if(!screen) return;\n        }\n    \n        const prev = document.querySelector('#cardModal .js-prev');\n        const next = document.querySelector('#cardModal .js-next');\n    \n        if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n        if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n        \n        const template = document.createElement('template');\n    \n        template.innerHTML = cardTemplate;\n    \n        renderCommonParts(template, config, item, collection, mode, parent, rootNode, isInCarousel);\n    \n        config.isPortraitMode\n            ? renderPortrait(item, config, mode, rootNode)\n            : renderLandscape(item, config, mode, rootNode);\n    };\n\n    init();\n};\n\nconst renderLandscape = (item, config, mode, rootNode) => {\n\n    const src = rootNode.querySelector('.js-bird-song');\n    \n    getBirdSong(item, src, config.isPortraitMode);\n\n    const inatNode = rootNode.querySelector('.js-inat-box');\n\n    renderInatDataBox(inatNode, item, config, mode);\n    \n    renderCalendar(rootNode.querySelector('.js-calendar-box'), item, config);\n\n    lookalikeSpecies(item, config, rootNode);\n};\n\nconst renderPortrait = (item, config, mode, rootNode) => {\n\n    const images = prepImagesForCarousel(item, config, imageUseCases.SPECIES_CARD);\n\n    const parent = rootNode.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent, parentScreen: rootNode.querySelector('.card-card'), identifier: item.name.replace(' ', '_') });\n\n    const player = rootNode.querySelector('.js-bird-song-player');\n\n    if(mode =='MODAL') {\n        player.style.display = 'none';\n        return;\n    };\n\n    getBirdSong(item, player, config.isPortraitMode);\n\n    player.addEventListener('click', () => {\n        const iframe = document.createElement('iframe');\n        iframe.id = 'birdsong';\n        iframe.style.border = 0;\n        iframe.src = player.dataset.src;\n        document.querySelector('#basicModal .modal-body').classList.add('bird-song-bg');\n        document.querySelector('#basicModal .js-modal-text-title').innerHTML = `${item.name}`;\n        const elm = document.querySelector('#basicModal .js-modal-text');\n        while (elm.firstChild) {\n            elm.removeChild(elm.firstChild);\n         }\n        elm.appendChild(iframe);\n    });\n};\n\nconst renderCommonParts = (template, config, item, collection, mode, parent, rootNode, isInCarousel) => {\n\n    const image = scaleImage({ url: item.starred || item.images[0].url }, imageUseCases.SPECIES_CARD, config);\n    \n    const clone = document.importNode(template.content, true);\n    \n    parent.innerHTML = '';\n    \n    renderTemplate({ name: item.name, vernacularName: item.vernacularName, image, iconicTaxon: item.iconicTaxon }, template.content, parent, clone);\n    \n    renderTaxaBox(rootNode.querySelector('.js-taxa-box'), { item, familyName: item.taxonomy.family, familyVernacularName: item.family.vernacularName || '' });\n\n    infoSlider(item, rootNode.querySelector('.js-info-box'), mode);\n\n    renderBadge(rootNode.querySelector('.js-names-badge'), item, config);    \n\n    renderIcon(item.taxonomy, rootNode);\n\n    if(mode === 'MODAL') {      \n          \n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n        const prev = rootNode.querySelector('#cardModal .js-prev > span');\n        prev.dataset.id = item.id;\n        prev.dataset.transition = 'prev';\n        prev.dataset.modal = 'cardModal';\n\n        const next = rootNode.querySelector('#cardModal .js-next > span');\n        next.dataset.id = item.id;\n        next.dataset.transition = 'next';\n        next.dataset.modal = 'cardModal';\n        \n        const lines = document.getElementsByTagName('hr');\n\n        Array.from(lines).forEach(hr => hr.style.display = 'none');\n    }\n\n    setTimeout(() => {\n        \n        if(config.isPortraitMode) {\n            // hide attribution for now - space issue various across devices\n            const attributions = document.querySelectorAll('.js-attribution-layer');\n                    attributions.forEach(attribution => attribution.classList.add('hide-important'));\n            const indicators = document.querySelectorAll('.js-carousel-indicators');\n                    indicators.forEach(indicator => indicator.classList.add('hide-important'));\n        }\n    });\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { subscribeToNonTaxaSelection } from 'ui/screens/cards/non-taxon-card';\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderNonTaxonCardSpecimenTiles = collection => {\n\n    const { config } = store.getState(); \n\n    const callback = images => {\n\n        const template = document.createElement('template');\n\n        template.innerHTML = specimensTemplate;\n\n        const parent = DOM.leftBody;\n        parent.innerHTML = '';\n\n        renderTemplate({images}, template.content, parent);\n\n        modalImagesHandler(document.querySelectorAll('.js-tiles .square'), null, collection, config);\n    };\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    subscribeToNonTaxaSelection(callback);    \n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport * as group from 'api/snapdragon/non-taxa';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport cardTemplate from 'ui/screens/cards/non-taxon-card-template.html';\n\nconst subscriptions = [];\n\nexport const subscribeToNonTaxaSelection = callback => {\n    subscriptions.push(callback);\n};\n\nexport const renderNonTaxonCard = (mode = 'STAND_ALONE', keyTrait, parent = DOM.rightBody, url, isInCarousel = false) => {\n\n    const prev = document.querySelector('#cardModal .js-prev');\n    const next = document.querySelector('#cardModal .js-next');\n\n    if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n    if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n    \n\n    const { units, config } = store.getState();\n\n    const nonTaxa = group.getNonTaxa(units).filter(nt => nt.group === group.nonTaxaGroup[0].LICHEN_FORM);\n\n    nonTaxa.forEach(nt => {\n        nt.name = itemProperties.getVernacularName(nt, config, false, 'name');\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cardTemplate;\n    \n    const onChange = items => {\n        subscriptions.forEach(sub => sub(items));\n    };\n\n    const prepImages = (items) => {\n        const itemImagesArray = items.map(item => {\n            return prepImagesForCarousel(item, config, imageUseCases.NON_TAXON_CARD);\n        });\n        const itemImages = utils.shuffleArray([].concat(...itemImagesArray));\n        return take(9, itemImages);\n    };\n\n    const callback = async id => {\n\n        const nonTaxon = nonTaxa.find(nt => nt.id === id)\n\n        let items = await firestore.getSpeciesByNameInParallel(nonTaxon.examples);\n            items = items.filter(item => item.images);\n\n        const portraitImagesNode = document.querySelector('.js-non-taxon-card-images');\n\n        const images = prepImages(items);\n\n        if(nonTaxon.type) {\n            document.querySelector('.js-species-header img').src = `https://content.eol.org/data/media/${nonTaxon.url}`;\n        } else {\n            config.isPortraitMode ? imageSlider({ config, images, portraitImagesNode }) : onChange(images);\n        }\n\n        const wikiNode = document.querySelector('.js-non-taxon-card-wiki');\n        const lookup = { name: nonTaxon.name };\n\n        const idNode = document.querySelector('.id-box > div:nth-child(2) > div');\n              idNode.innerHTML = nonTaxon.quickId;\n\n        const definitionNode = document.querySelector('.js-non-taxa-definition div');\n              definitionNode.innerHTML = nonTaxon.definition;\n\n        const nameNode = document.querySelector('.js-non-taxon-card .js-names-container > div:nth-child(1)');\n              nameNode.innerHTML = nonTaxon.id;\n\n        if(mode === 'MODAL') {\n        } else {\n            renderWikiModal(lookup, wikiNode, config);    \n            renderWiki(wikiNode, lookup, config.language);\n        }\n    };\n\n    let rootNode;\n\n    switch(mode) {\n        case 'STAND_ALONE':\n            rootNode = document.querySelector('.main-lesson-body');\n            break;\n        case 'SWAP_OUT':\n            rootNode = document.querySelector('.js-taxon-container');\n            break;\n        case 'MODAL':\n            rootNode = document.querySelector('#cardModal');\n            break;\n    }\n\n    parent.innerHTML = '';\n\n    renderTemplate({group: nonTaxa, image: scaleImage({ url })}, template.content, parent);\n\n    if(mode === 'MODAL') {\n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = `Lichen Forms`;\n    }\n\n    rootNode.querySelectorAll('.js-non-taxa .btn.btn-secondary').forEach(form => {\n        form.addEventListener('click', event => {\n            const id = event.target.id;\n            callback(id);\n        });\n    });\n\n    const id = keyTrait || nonTaxa[0].id;\n    document.getElementById(id).click();\n};","import { take } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { taxonInfoSlider } from 'ui/screens/common/info-slider';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\n\nimport taxonTemplate from 'ui/screens/cards/taxon-card-template.html';\n\nlet transition;\n\nconst modalCarousel = document.querySelector('#cardModal .carousel');\n\nif(modalCarousel) {\n    modalCarousel.addEventListener('click', event => {    \n        transition = event.target.dataset.transition;\n    });\n}\n\nexport const renderTaxonCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, speciesTaxon, rank, isInCarousel = true) => {\n  \n    try {\n\n        const item = selectedItem || collection.nextItem;\n\n        if(!item) {\n            document.querySelector('#cardModal .close').click();\n        }\n\n        const { config } = store.getState();\n\n        let rootNode;\n\n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = document.querySelector('.main-lesson-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = document.querySelector('.js-taxon-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n\n        const template = document.createElement('template');\n              template.innerHTML = taxonTemplate;\n        \n        const clone = document.importNode(template.content, true);\n\n        parent.innerHTML = '';\n\n        rank = rank ? rank.toUpperCase() : 'FAMILY';\n\n        let taxon;\n\n        switch(rank) {\n            case 'ORDER':\n                taxon = item.order;\n                break;\n            case 'FAMILY':\n                taxon = item.family;\n                break;\n            case 'GENUS':\n                taxon  = item.genus;\n                break;\n            default:\n                taxon = item.family;\n                break;\n        };\n\n        const familyStats = itemProperties.getFamilyStats(collection.items);\n        const occurrences = familyStats ? familyStats[taxon.name] : 0;\n        const url = item.images ? item.starred ? item.images[0].url : '' : '';\n        const image = scaleImage({ url }, imageUseCases.TAXON_CARD, config);\n        const vernacularName = taxon.vernacularName || itemProperties.getNestedTaxonProp(taxon, config.language, 'names', 'names', '0').split(',')[0];\n        const identification = taxon.identification ? taxon.identification : taxon.descriptions ? taxon.descriptions[0].identification : '';\n        const summary = taxon.summary ? taxon.summary : taxon.descriptions ? taxon.descriptions[0].summary : '';\n                \n        const context = {\n            rank: rank,\n            name: taxon.name,\n            image,\n            alt: taxon ? taxon.alt : '',\n            vernacularName,\n            species: taxon.species || '--',\n            genera: taxon.genera || '--',\n            families: taxon.families || '--',\n            identification,\n            summary,\n            eol: taxon.eol ? taxon.eol.replace('en', config.language) : '',\n            wiki: taxon.wiki ? taxon.wiki.replace('en', config.language) : `https://en.wikipedia.org/wiki/${taxon.name}`,\n            occurrences: occurrences,\n            toxic: taxon.toxic ? `Toxic species: ${taxon.toxic.members.join(', ')}` : '',\n            notableMembers: taxon.members ? take(2, taxon.members).join(', ') : ''\n        }\n\n        renderTemplate(context, template.content, parent, clone);\n\n        taxonInfoSlider(item, taxon.traits, rootNode.querySelector('.js-taxon-info-box'), mode);\n\n        switch(rank) {\n            case 'GENUS': \n                rootNode.querySelector('.js-taxon-genus').classList.add('hide-important');\n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'FAMILY': \n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'ORDER':\n                rootNode.querySelector('.js-taxon-rank').classList.add('hide-important');\n                break;\n        }\n\n        renderIcon(item.taxonomy, rootNode);\n\n        if(mode === 'MODAL') {\n\n            rootNode.querySelector('.js-external-links').classList.add('hide');\n\n            rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n            const prev = rootNode.querySelector('#cardModal .js-prev > span');\n            prev.dataset.id = item.id;\n            prev.dataset.transition = 'prev';\n            prev.dataset.modal = 'cardModal';\n\n            const next = rootNode.querySelector('#cardModal .js-next > span');\n            next.dataset.id = item.id;\n            next.dataset.transition = 'next';\n            next.dataset.modal = 'cardModal';\n\n            if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n            if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n\n        }\n        \n        // if(taxon.toxic) {\n        //     document.querySelector('.js-taxon-toxic-warning').innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>';\n        // }\n\n        document.querySelector('.js-external-page-title').innerHTML = `${taxon.name}`;\n        document.querySelector('.js-external-page-body').innerHTML = `<iframe class=\"modal-iframe\" title=\"Wikipedia page for ${taxon.name}\" src=\"${context.wiki}\"></iframe>`;\n\n        const membersCount = document.querySelector('#taxon-card-header .js-names-badge');\n\n        if(!context.occurrences || context.occurrences === 0) membersCount.classList.add('hide-important');\n\n        membersCount.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Members of the ${taxon.name} family`;\n            const members = collection.items.filter(i => i.taxonomy.family.toLowerCase() === taxon.name.toLowerCase());\n            const list = document.querySelector('#badgeListModal .js-modal-text');\n            list.innerHTML = '';\n            members.forEach(member => {\n                list.innerHTML += `<div>${member.name}</div>`;\n            });\n        });\n\n    } catch(e) {\n\n        console.error(e);\n\n        setTimeout(() => {        \n\n            switch(transition) {\n                case 'next':\n                    document.querySelector('#cardModal .carousel-control-next-icon').click();                   \n                    break;\n                case 'prev':\n                    document.querySelector('#cardModal .carousel-control-prev-icon').click();                    \n                    break;\n            }\n        });\n    }\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nimport testCardTemplate from 'ui/screens/cards/test-card-template.html';\n\nexport const renderTestCardTemplate = (collection, context) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = testCardTemplate;\n\n    const { config } = store.getState();\n\n    const modal = config.isLandscapeMode ? document.querySelector('#lessonModal') : document;\n\n    const parent = config.isLandscapeMode \n                        ? modal.querySelector('.js-modal-text')\n                        : DOM.rightBody ;\n          parent.innerHTML = '';\n\n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = collection.name;\n\n    context.className = context.className || '';\n    context.headerClassName = context.headerClassName || '';\n\n    context.statement = context.statement || '';\n    context.providerQuestion = context.providerQuestion || '';\n\n    renderTemplate(context, template.content, parent);\n\n    const progressLink = modal.querySelector('.js-review-progress');\n\n    if(progressLink) {\n      \n        const progressLinkClickHandler = () => {\n\n          const summaryContainer = modal.querySelector('.js-summary-container');\n\n          const renderSummaryCard = () => {\n\n              renderScoreSummary(collection.id, summaryContainer);\n\n              let count = 1;\n\n              const toggleScreens = (screenOne, screenTwo) => {\n                  hideCurrentCard(screenOne);\n                  progressLink.innerHTML = count % 2 === 0 ? 'Progress' : 'Quiz';\n                  count++;\n                  screenTwo.classList.remove('swap-out-card');\n                  progressLink.addEventListener('click', e => {                    \n                      toggleScreens(screenTwo, screenOne);\n                  }, { once: true });\n              };\n\n              toggleScreens(testCardContainer, summaryContainer);\n          };\n\n          renderSummaryCard();\n\n        };\n\n        progressLink.innerHTML = 'Progress';\n        progressLink.removeEventListener('click', progressLinkClickHandler, { once: true });\n        progressLink.addEventListener('click', progressLinkClickHandler, { once: true });\n\n        progressLink.focus();\n    }\n\n    toggleStatementAndQuestion(config);\n\n    const testCardContainer = modal.querySelector('.js-test-card-container');\n    const testCard = modal.querySelector('.js-test-card-container');\n    const testCardIcon = testCard.querySelector('.js-card-link');\n\n    const item = collection.nextItem || collection.items[context.bonus.itemIndex];\n\n    const hideCurrentCard = (container, card) => {\n\n        container.classList.add('swap-out-card');\n        container.classList.remove('swap-in-card');\n\n        if(card) {\n            card.classList.add('swap-out-card');\n            card.classList.remove('swap-in-card');\n        }\n    };\n\n    const showNextCard = (container, selector) => {\n                \n        container.classList.remove('swap-out-card');\n\n        const card = modal.querySelector(selector);\n        const icon = card.querySelector('.js-card-link');\n              icon.classList.remove('disabled-icon');\n\n        return { card, icon };\n    }\n\n    testCardIcon.addEventListener('click', async event => {\n        \n        const speciesContainer = modal.querySelector('.js-species-container');\n        const taxonContainer = modal.querySelector('.js-taxon-container');\n\n        const renderSpeciesCard = async () => {\n\n            renderCard(collection, 'SWAP_OUT', item, speciesContainer, false);\n                    \n            setTimeout(() => {            \n\n                hideCurrentCard(testCardContainer, testCard);\n\n                const { card: speciesCard, icon: speciesIcon } = showNextCard(speciesContainer, '.js-species-card');\n\n                speciesIcon.addEventListener('click', async event => {\n\n                    item.lichen \n                        ? renderNonTaxonCard('SWAP_OUT', item.keyTrait, taxonContainer, item.images.find(i => i.starred) ? item.images.find(i => i.starred).url : item.images[0].url)\n                        : renderTaxonCard(collection, 'SWAP_OUT', item, taxonContainer, false);\n                    \n                    hideCurrentCard(speciesContainer, speciesCard);\n\n                    const { card: taxonCard, icon: taxonIcon } = item.lichen\n                        ? showNextCard(taxonContainer, '.js-non-taxon-card')\n                        : showNextCard(taxonContainer, '.js-taxon-card');\n\n                    taxonIcon.addEventListener('click', event => {\n                        hideCurrentCard(taxonContainer, taxonCard);\n                        showNextCard(testCardContainer, '.js-test-card');\n                    });\n                });\n\n            }, 500);\n        };\n\n        await renderSpeciesCard();\n    });\n\n    renderIcon(item.taxonomy, modal);\n\n    let testContentParent = modal.querySelector('.js-test-card-content');\n\n    return testContentParent;\n};\n\nconst toggleStatementAndQuestion = config => {\n\n    if(config.isLandscapeMode) return;\n    \n    const statement = document.querySelector('.js-statement-para');\n    const question = document.querySelector('.js-question-para');\n\n    question.classList.add('hide');\n\n    var iterations = 20;\n    var i = 0;\n\n    var interval = setInterval(function() { \n            if(i % 2) {\n                question.classList.add('hide');\n                statement.classList.remove('hide');\n            } else {\n                question.classList.remove('hide');\n                statement.classList.add('hide');\n            }\n            i++; \n            if(i >= iterations) clearInterval(interval);\n    }, 5000);\n\n};\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport badgeTemplate from 'ui/screens/common/badge-template.html';\n\nexport const renderBadge = (badge, item, config) => {\n\n    let names = [ ...new Set(item.names.map(name => {\n        return {\n            common: name.vernacularName.toLowerCase(),\n            language: name.language\n        }\n    })) ];\n\n    const languageNames = names.reduce(function (r, a) {\n        r[a.language] = r[a.language] || {};\n        r[a.language].name = config.languages.find(language => language.lang === a.language.trim()).name;\n        r[a.language].names = r[a.language].names || [];\n        r[a.language].names.push(a.common);\n        return r;\n    }, Object.create(null));\n\n    const occurrences = names.length;\n\n    const template = document.createElement('template');\n\n    if(occurrences === 0) {\n\n        badge.classList.add('hide');\n        \n    } else {\n\n        badge.innerHTML = '';\n\n        template.innerHTML = `<span class=\"names-badge js-names-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">${occurrences}</span>`;\n\n        renderTemplate({}, template.content, badge);\n\n        badge.addEventListener('click', event => {\n            \n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = 'Common species names';\n\n            const parent = document.querySelector('#badgeListModal .js-modal-text');\n\n            parent.innerHTML = '';\n\n            template.innerHTML = badgeTemplate;\n\n            renderTemplate({ languageNames }, template.content, parent);\n        });\n    }\n}","import { utils } from 'utils/utils';\nimport { getLocation, getPlace } from 'geo/geo';\nimport { getHistogram, getInatPlaceId } from 'api/inat/inat';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport calendarTemplate from 'ui/screens/common/calendar-template.html';\n\nexport const renderCalendar = async (parent, item, config) => {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = calendarTemplate;\n\n    parent.innerHTML = '';\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n\n    let months = [];\n\n    const getENShortMonth = (ordinal) => {\n        let month;\n        switch(ordinal) {\n            case 1:\n                month = 'J';\n                break;\n            case 2:\n                month = 'F';\n                break;\n            case 3:\n                month = 'M';\n                break;\n            case 4:\n                month = 'A';\n                break;\n            case 5:\n                month = 'M';\n                break;\n            case 6:\n                month = 'J';\n                break;\n            case 7:\n                month = 'J';\n                break;\n            case 8:\n                month = 'A';\n                break;\n            case 9:\n                month = 'S';\n                break;\n            case 10:\n                month = 'O';\n                break;\n            case 11:\n                month = 'N';\n                break;\n            case 12:\n                month = 'D';\n                break;\n        }\n        return month;\n    }\n\n    const getMonth = (ordinal, config) => {\n        let month;\n        switch(config.language) {\n            case 'en':\n                month = getENShortMonth(ordinal);\n                break;\n            default:\n                month = getENShortMonth(ordinal);\n        }\n        return month;\n    }\n\n    getHistogram(item, placeId).then(histogram => {\n        const monthlyStats = histogram.results.month_of_year;\n        for (var month in monthlyStats) {\n            months.push({\n                month: getMonth(parseInt(month), config),\n                index: parseInt(month),\n                count: monthlyStats[month]\n            });\n        }\n\n        utils.sortBy(months, 'count', 'desc').forEach( (month, index) => {\n            if(index < 4 && month.count !== 0) {\n                month.class = 'most-observations';\n            } else {\n                month.class = '';\n            }\n        });\n\n        utils.sortBy(months, 'index', 'asc');\n\n        const data = [];\n        let season = [];\n\n        months.map((month,index) => {\n            if(index < 4) {\n                season.push(month);                \n            }\n            if(index === 3) {\n                data.push(season);\n                season = [];\n            }\n            if(3 < index && index < 8) {\n                season.push(month);                \n            }\n            if(index === 7) {\n                data.push(season);\n                season = [];\n            }\n            if(7 < index && index < 12) {\n                season.push(month);                \n            }\n            if(index === 11) {\n                data.push(season);\n                season = [];\n            }\n        });\n\n        renderTemplate({ data }, template.content, parent);\n\n        const currentMonthIndex = new Date().getMonth();\n\n        const monthNodes = document.querySelectorAll('.calendar-box .col > div');\n    \n        monthNodes.forEach((node, index) => {\n            if(index === currentMonthIndex) {\n                node.classList.add('current-month');\n            }\n        });\n    });\n    \n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { scaleImage, imageMatch, imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { handleRightsAttribution } from 'ui/screens/common/rights-attribution';\n\nimport imageSliderTemplate from 'ui/screens/common/image-slider-template.html';\n\nconst selectActiveImage = (image, parent, config) => {\n    parent.querySelectorAll('.carousel-item').forEach(i => {\n        const elemSrc = i.querySelector('img').dataset;\n        if(imageMatch(elemSrc, image.dataset || image)) {\n            i.classList.add('active');\n            return;\n        }\n    });    \n    \n    const activeNode = parent.querySelector('.imageSlider.carousel .carousel-item.active img'); \n    \n    const indicators = document.querySelectorAll('.carousel-indicators li');\n          indicators.forEach(i => {\n              if(i.dataset && activeNode.dataset && i.dataset.slideTo === activeNode.dataset.index) {\n                  i.classList.add('active');\n              }\n          });\n\n    let img = image.dataset || image;\n    img.title = img.title || img.itemName;\n    img = scaleImage(img);\n    handleRightsAttribution(img);\n\n    return img;\n};\n\nconst carouselControlHandler = (event, parentScreen = document) => {\n\n    setTimeout(() => {\n\n        const activeNode = parentScreen.querySelector(`${event.target.dataset.slider} .carousel-item.active img`);\n        const image = activeNode.dataset;   \n        \n        handleRightsAttribution(image);    \n\n    }, 750);\n};\n\nexport const imageSlider = sliderArgs => {\n\n    const { config, images, parent, image, parentScreen = document, identifier = '' } = sliderArgs;\n\n    const slider = document.createElement('template');\n          slider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n\n    images.forEach((img, i) => {\n        img.index = i;\n        img.rightsHolder = img.rightsHolder || 'Public domain';\n        img.provider = img.provider || 'eol';\n        img = scaleImage(img);\n    });\n\n    // snapLog('imageSlider, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images, identifier }, slider.content, parent);\n\n    let next = document.querySelector(`#imageSlider_${identifier} .carousel-control-next-icon`);\n    let prev = document.querySelector(`#imageSlider_${identifier} .carousel-control-prev-icon`);\n\n    if(config.isPortraitMode) {        \n        next.classList.add('concealed');\n        prev.classList.add('concealed');\n    }\n\n    setTimeout(() => {\n        selectActiveImage(image || images[0], parent, config);        \n    },250);\n\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-prev`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-next`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n\n    document.addEventListener('swiped-left', function(e) {\n        next.click();\n    });\n\n    document.addEventListener('swiped-right', function(e) {\n        prev.click();\n    });\n};\n\nexport const imageSideBySlider = (slides, parent, config) => {\n\n    const sideBySlider = document.createElement('template');\n          sideBySlider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n    parent.classList.add('slideBySliderContainer');\n\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(3)`).innerHTML = '';\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(4)`).innerHTML = '';\n\n    slides.forEach((slide, index) => {\n\n        const identifier = slide.id.replace(' ', '_') || index + 1;\n\n        const header = document.querySelectorAll(`#imageComparisonModal .js-modal-image-title > span`)[index];\n              header.innerHTML = `<span class=\"common-name\">${slide.images[0].itemCommon}</span><span class=\"latin-name\">${slide.images[0].itemName}</span>`;\n        const item = { name: slide.images[0].itemName, itemCommon: slide.images[0].itemCommon, images: slide.images };\n        const images = prepImagesForCarousel(item, config, imageUseCases.CAROUSEL);\n        \n        // snapLog('imageSideBySlider, image medium values:', images.map(i => i.medium));\n\n        renderTemplate({ images, identifier }, sideBySlider.content, parent);\n        \n        const activeNode = document.querySelector(`#imageSlider_${identifier} .carousel-item`);\n              activeNode.classList.add('active');\n        handleRightsAttribution(images[0]);\n\n        const originalImageLink = document.querySelector(`#imageSlider_${identifier} .js-expand`);\n        if(originalImageLink) originalImageLink.classList.add('hide-important');\n    });\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace } from 'geo/geo';\nimport { getInatTaxonStats, getInatPlaceId } from 'api/inat/inat';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\n\nimport inatBoxTemplate from 'ui/screens/common/inat-box-template.html';\n\nexport async function renderInatDataBox(parent, item, config, mode) {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatBoxTemplate;\n\n    parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n    const eolPage = document.querySelector('.js-test-card-container-eol-link');\n    \n    eolPage.setAttribute('href', `http://eol.org/pages/${item.id}/overview`);\n    eolPage.setAttribute('target', '_blank');\n    eolPage.setAttribute('style', 'text-decoration: none');\n\n    setTimeout(()=>{\n        const wikiLink = document.querySelector('.js-test-card-container-wiki');            \n        renderWikiModal(item, wikiLink, config);\n    });    \n\n    const wikiNode = document.querySelector('.js-test-card-container-wiki');\n          wikiNode.innerHTML = '';\n\n    renderWiki(wikiNode, item, config.language);\n    \n    getInatTaxonStats(item, config).then(stats => {\n\n        if(!stats.results) return;\n\n        const taxonId = stats.results.find(stat => stat.taxon.name === item.name).taxon.id;\n        const taxonCount = stats.results.find(stat => stat.taxon.name === item.name).count;\n\n        const taxonLink = `https://www.inaturalist.org/taxa/${taxonId}`;\n\n        parent.querySelector('.js-taxon-count').innerHTML = taxonCount.toLocaleString();\n        parent.querySelector('.js-taxon-link').setAttribute('href', taxonLink);\n    });\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n    \n    getInatTaxonStats(item, config, placeId).then(stats => {\n\n        if(stats.results.length === 0) return;\n\n        const itemStats = stats.results.find(stat => stat.taxon.name === item.name);\n\n        if(!itemStats) return;\n\n        const placeTaxonCount = itemStats.count;\n        const establishment = itemStats.taxon.preferred_establishment_means;\n\n        document.querySelector('.js-native-container').innerHTML = establishment || '';\n\n        parent.querySelector('.js-world').innerHTML = mode === 'MODAL' ? 'Worldwide' : 'Worldwide sightings';\n        parent.querySelector('.js-place').innerHTML = mode === 'MODAL' ? country : `${country} sightings`;\n        parent.querySelector('.js-place-taxon-count').innerHTML = placeTaxonCount.toLocaleString();\n    });\n}","import { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { linkedTaxa } from 'ui/screens/common/linked-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport idBoxTemplate from 'ui/screens/common/id-box-template.html';\nimport detailsTemplate from 'ui/screens/common/info-detail-slider-template.html';\n\nexport const renderInfoDetails = (item, activeTraitKey, activeTraitValue, description) => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const template = document.createElement('template');\n    const parent = document.querySelector('.js-info-box-details');\n\n\n    if(!parent) return; // hack! currently the case with (non-species) taxon cards (see same below)\n\n    parent.innerHTML = '';\n\n    if(activeTraitKey.toLowerCase().indexOf('description') > -1) {        \n        template.innerHTML = idBoxTemplate;\n        renderTemplate({ id: description }, template.content, parent);\n        const text = document.querySelector('.id-box > div');\n              text.innerHTML = text.innerHTML.replace(/\\r?\\n/g, '<br />');        \n    }\n    else if(activeTraitKey.toLowerCase() === 'relationships' || activeTraitKey.toLowerCase() === 'lookalikes') {\n        const mode = 'MODAL';\n        const isInCarousel = true;\n        linkedTaxa(item, config, parent, mode, isInCarousel, collection, activeTraitValue);\n    } else {\n\n        const details = firestore.getDefinition(activeTraitValue, glossary, collection.glossary); // make dependent on a promise\n\n        if(!parent) return; // hack! taxon info sliders\n\n        if(details && details.length > 0) {            \n            details.forEach(detail => {\n                template.innerHTML = detailsTemplate;\n                detail.imgClassName = detail.img ? detail.img.url === '' ? 'hide-important' : '' : 'hide-important';\n                detail.img = detail.img || { url: '' }; \n            });\n            renderTemplate({ details }, template.content, parent);\n        }\n    }\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderInfoDetails } from 'ui/screens/common/info-detail-slider';\n\nimport infoSliderTemplate from 'ui/screens/common/info-slider-template.html';\n\nconst renderInfoSlider = (item, traits, parent, id) => {\n\n    const slider = document.createElement('template');\n          slider.innerHTML = infoSliderTemplate;\n\n    parent.innerHTML = '';\n\n    traits = traits.filter(t => t.value);\n\n    traits.forEach(trait => {        \n        trait.name = trait.name ? trait.name === 'ph' ? 'pH' : utils.capitaliseFirst(trait.name) : '';\n        if(trait.name.toLowerCase() === 'role') trait.name = trait.type || 'role';\n        trait.name = trait.name === 'Ph value' ? 'pH value' : trait.name; \n        trait.unit = trait.unit ? trait.unit.toLowerCase() === 'colour' ? '' : trait.unit : '';\n        trait.description = trait.value;\n        trait.value = trait.name.toLowerCase() === 'description' ? '< traits >' : trait.value.join(', ');\n    });\n    \n    let description = traits.find(trait => trait.name.toLowerCase() === 'description');\n        description = description ? description.description[0] : '';\n\n    renderTemplate({ id, traits }, slider.content, parent);\n\n    let activeTrait, activeTraitKey, activeTraitValue;\n    \n    activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item:nth-child(1)`);\n    activeTrait.classList.add('active');\n\n    const traitCount = traits.length;\n\n    if(traitCount === 1) {\n        parent.querySelectorAll('.carousel.slide a').forEach(control => {\n            control.setAttribute('disabled', 'disabled');\n            control.classList.add('inactive-icon');\n        });\n    }\n\n    const changeTraitHandler = event => {\n        setTimeout(() => {\n            activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item.active`);\n            activeTraitKey = activeTrait.querySelector('dt').innerHTML;\n            activeTraitValue = activeTrait.querySelector('dd').innerHTML;\n            renderInfoDetails(item, activeTraitKey, activeTraitValue, description);\n        }, 1000);\n    };\n\n    changeTraitHandler();\n\n    parent.querySelector(`#traitSlider${id} .carousel-control-prev`).addEventListener('click', changeTraitHandler);\n    parent.querySelector(`#traitSlider${id} .carousel-control-next`).addEventListener('click', changeTraitHandler);\n}\n\nexport const taxonInfoSlider = (item, traits, parent, mode) => {\n\n    const id = mode === 'MODAL' ? 'taxon_1' : 'taxon_0';\n\n    const convertedTraits = traitsHandler.convertTraitsToNameValuePairsArray(traits, traitsHandler.getTraitsToExclude());\n\n    if(convertedTraits.length > 0) {\n        renderInfoSlider(item, convertedTraits, parent, id);\n    }    \n};\n\nexport const infoSlider = (item, parent, mode) => {\n    \n    if(!traitsHandler.hasTraitPropeties(item.traits)) return;\n\n    let traits = traitsHandler.convertTraitsToNameValuePairsArray(item.traits, traitsHandler.getTraitsToExclude(), item);\n\n    if(item.traits.description) {\n        const description = {\n            name: 'description',\n            value: item.traits.description.value\n        }\n        traits = [ description, ...traits ];\n    }\n    \n    if(traits.length === 0) return;\n    \n    const id = mode === 'MODAL' ? 1 : 0;\n\n    renderInfoSlider(item, traits, parent, id);\n};","import { renderTemplate } from 'ui/helpers/templating';\n\nimport languageSelectionTemplate from 'ui/screens/common/language-selection-template.html';\n\nexport const languagePicker = (config, parent, listener) => {\n\n    const languages = config.languages;\n\n    const template = document.createElement('template');\n          template.innerHTML = languageSelectionTemplate;\n    \n    parent.innerHTML = '';\n\n    renderTemplate({ languages }, template.content, parent);\n\n    const taxonLanguageBtn = document.querySelector('#taxonLanguageBtn');\n          taxonLanguageBtn.innerHTML = `Taxon language [ ${languages.find(l => l.lang === config.language).name} ] `;\n\n    const taxonLanguageTxt = document.querySelector('#taxonLanguageTxt');\n          taxonLanguageTxt.innerHTML = languages.find(l => l.lang === config.language).name;\n\n    document.querySelectorAll('.dropdown-item').forEach(language => {\n        language.addEventListener('click', event => {\n            config.language = languages.find(l => l.lang === event.target.id).lang;\n            const name = languages.find(l => l.lang === event.target.id).name;\n            taxonLanguageBtn.innerHTML = `Taxon language [ ${name} ]`;\n            taxonLanguageTxt.innerHTML = name;\n            listener(config);\n        });    \n    });\n\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { firestore } from 'api/firebase/firestore';\n\nimport linkedTaxaLookalikeTemplate from 'ui/screens/common/linked-taxa-lookalike-template.html';\nimport linkedTaxaRelationshipTemplate from 'ui/screens/common/linked-taxa-relationship-template.html';\n\nexport const linkedTaxa = (item, config, parent, mode, isInCarousel, collection, activeTraitValue) => {\n\n    parent.innerHTML = '';\n    const template = document.createElement('template');\n\n    const addLinksToSpeciesCards = async mode => {        \n        \n        if(!isInCarousel) {            \n            const speciesCardLinks = mode === 'MODAL'\n                    ? document.querySelectorAll('#cardModal .js-test-card-container-link')\n                    : document.querySelectorAll('.js-test-card-container-link');\n            \n            speciesCardLinks.forEach(async link => {\n                link.addEventListener('click', async event => {\n                    const name = event.target.id || event.target.dataset.name;\n                    const selectedItem = await firestore.getSpeciesByName(name);\n                    selectedItem.species = itemProperties.getSpeciesName(item.name);\n                    renderCard({ name: 'Local species', items: [ selectedItem ] }, 'MODAL', selectedItem, document.querySelector('#cardModal .js-modal-body'), false);\n                });\n            });\n        }\n    };\n\n    const getLinkedTaxa = async () => {\n\n        const addVernacularName = async taxonName => {\n            const item = await firestore.getSpeciesByName(taxonName);\n            if(!item) return { name: taxonName, display: taxonName, isSpecies: false };\n            const vernacularName = itemProperties.getVernacularName(item, config);\n            return vernacularName ? { name: taxonName, display: taxonName, isSpecies: true } : { name: taxonName, display: taxonName, isSpecies: true };\n        };\n    \n        let relationshipTraits = item.traits ? item.traits.relationships : null;\n\n        let relationships = [];\n\n        if(relationshipTraits) {\n\n            const convertTraitsForDisplay = async () => {\n                return Promise.all(relationshipTraits.map(trait => {\n                    return  {\n                        type: trait.value[0],\n                        speciesA: trait.symbiont.name,\n                        speciesARole: trait.symbiont.role,\n                        speciesB: item.name,\n                        speciesBRole: trait.type,\n                        description: trait.description\n                    };\n                }));\n            };\n\n            relationships = await convertTraitsForDisplay();\n        }\n\n        let lookalikeTraits = item.traits ? item.traits.lookalikes : null;\n\n        let lookalikes = [];\n\n        if(lookalikeTraits) {\n\n            lookalikeTraits = lookalikeTraits.filter(species => species.lookalike.name === activeTraitValue);\n\n            const convertLookalikesForDisplay = async () => {\n                return Promise.all(lookalikeTraits.map(trait => {\n                    return  {\n                        species: item.name,\n                        speciesDescription: trait.description,\n                        lookalike: trait.lookalike.name,\n                        lookalikeDescription: trait.lookalike.description\n                    };\n                }));\n            };\n\n            lookalikes = await convertLookalikesForDisplay();\n        }\n\n        const addDisplayRules = relationships => {\n            for(const relationship of relationships) {\n                if(mode !== 'MODAL') {\n                    relationship.className = 'underline-link';\n                    relationship.modal = 'modal';\n                } else {\n                    relationship.className = '';\n                    relationship.modal = '';\n                }\n            };\n\n            return relationships;\n        };\n\n        if(relationships) {\n            relationships = addDisplayRules(relationships);\n            template.innerHTML = linkedTaxaRelationshipTemplate;\n            renderTemplate({ relationships }, template.content, parent);\n        }\n\n        if(lookalikes) {\n            lookalikes = addDisplayRules(lookalikes);        \n            template.innerHTML = linkedTaxaLookalikeTemplate;\n            renderTemplate({ lookalikes }, template.content, parent);\n        }\n        addLinksToSpeciesCards(mode);\n    }; \n\n    getLinkedTaxa();\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageSideBySlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { firestore } from 'api/firebase/firestore';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\nimport visualComparisonTemplate from 'ui/screens/common/look-alikes-link-template.html';\nimport { isArray } from 'jquery';\n\nexport const lookalikeSpecies = (item, config, rootNode = document) => {\n    \n    const lookalikes = item.traits.lookalikes || item.traits['look-alikes'];\n\n    if(lookalikes) {\n        \n        const matchTemplate = document.createElement('template');\n              matchTemplate.innerHTML = visualComparisonTemplate;\n        const lookalikeParent = rootNode.querySelector('.js-lookalikes');\n\n        const slides = [];\n        const names = [];\n        const scientificNames = [];\n\n        let species;\n\n        async function renderLookalikes() {\n\n            const readyLookalikesForRendering = async () => {\n\n                if(!isArray(lookalikes)) return;\n\n                species = [ ...lookalikes.map(lookalike => lookalike.lookalike), { name: item.name, description: lookalikes[0].description } ];\n\n                for (let lookalike of species) {\n\n                    const lookalikeItem = await firestore.getSpeciesByName(lookalike.name);\n\n                    if(!lookalikeItem) return;\n                    \n                    lookalikeItem.vernacularName = itemProperties.getVernacularName(lookalikeItem, config);\n                    names.push(lookalikeItem.vernacularName);\n                    scientificNames.push(lookalikeItem.name);\n    \n                    const images = lookalikeItem.images.map((img, index) => { \n\n                        const url = scaleImage({ url: img.url }, imageUseCases.CAROUSEL, config);\n\n                        return { \n                                index: index + 1, \n                                src: { ...img, url: url.medium },\n                                url: url.medium,\n                                itemName: lookalikeItem.name, \n                                itemCommon: lookalikeItem.vernacularName };\n                    });\n    \n                    slides.push({ id: lookalikeItem.name, images });\n                };\n            };\n\n            await readyLookalikesForRendering();\n\n            if(slides.length === 0) return;\n\n            lookalikeParent.innerHTML = '';\n\n            renderTemplate({slides, names: names.join(', ')}, matchTemplate.content, lookalikeParent);\n\n            const speciesComparisonLink = rootNode.querySelector('.js-compare-species-link');\n\n            speciesComparisonLink.classList.remove('hide');\n\n            const getTrait = async (itemName, parent) => {\n    \n                const item = await firestore.getSpeciesByName(itemName);\n                item.traits = await firestore.getTraitsBySpeciesName(item.name);\n                    \n                if(item.taxonomy.class.toLowerCase() === 'aves') {\n    \n                    if(item.traits && Object.keys(item.traits).length === 0) return;\n    \n                    const xcID = item.traits['song'].value;\n    \n                    if(!xcID) return;\n        \n                    const mp3 = await firestore.getBirdsong(xcID);\n    \n                    const template = document.createElement('template');\n                          template.innerHTML = audioMediaTemplate;\n                    \n                    renderTemplate({ mp3, title: item.name }, template.content, parent);\n                }\n            }\n    \n            speciesComparisonLink.addEventListener('click', () => {\n    \n                const parent = document.querySelector('#imageComparisonModal .js-modal-image');\n                            \n                imageSideBySlider(slides, parent, true, config);\n                    \n                species.forEach(lookalike => {\n                    const identifier = `.description_${lookalike.name.replace(' ', '_')}`;\n                    const description = document.querySelector(identifier);\n                          description.innerHTML = lookalike.description;                    \n                    getTrait(lookalike.name, document.querySelector(`${identifier} + div`));\n                });\n                \n            });\n        }\n\n        renderLookalikes();   \n    }\n};","import { scaleImage } from 'ui/helpers/image-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport rightsAttributionTemplate from 'ui/screens/common/rights-attribution-template.html';\n\nexport const handleRightsAttribution = image => {\n\n    const template = document.createElement('template');\n          template.innerHTML = rightsAttributionTemplate;\n\n    let text;\n\n    switch(image.license) {\n        case 'http://creativecommons.org/licenses/publicdomain/':\n            text = 'CC PD';\n            break;\n        case 'http://creativecommons.org/licenses/by/2.0/':        \n            text = 'CC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/2.0/':\n            text = 'CC BY SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/2.0/':\n            text = 'CC BY NC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/2.0/':\n            text = 'CC BY NC-SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by/3.0/':        \n            text = 'CC 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/3.0/':\n            text = 'CC BY SA 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/3.0/':\n            text = 'CC BY NC-SA 3.0';\n            break;        \n        case 'http://creativecommons.org/licenses/by/4.0/':        \n            text = 'CC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/4.0/':\n            text = 'CC BY NC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/4.0/':\n            text = 'CC BY NC-SA 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/4.0/':\n            text = 'CC BY SA 4.0';\n            break;\n        default: \n            text = image.license || '';\n            break;\n    };\n\n    const licence = { text, url: image.medium };\n    const title = image.title;\n    const author = image.rightsholder || image.rightsHolder || 'Public domain';\n    const source = image.source || '';\n    const identifier = `${image.itemName.replace(' ', '_')}`;\n    const large = image.large || scaleImage(image).large;\n    \n    let parent = document.querySelector(`.js-attribution-layer.${identifier}`);\n        parent = parent || document.querySelector(`.js-attribution-layer`);\n        parent.innerHTML = '';\n\n    renderTemplate({title,author,source,licence,large}, template.content, parent);\n\n    const rightsAttribution = parent.querySelector('.js-rights-attribution .js-copyright');\n    const rightsLink = parent.querySelector('.js-rights-link .js-copyright');\n    const indicators = document.querySelector(`.carousel-indicators`);\n\n    const showAttribution = event => {\n        rightsAttribution.parentElement.classList.add('hide-important');\n        rightsLink.parentElement.classList.remove('hide-important');\n        indicators.classList.remove('hide-important');\n        rightsLink.removeEventListener('click', showLink), true;\n        rightsLink.addEventListener('click', showLink, true);\n    };\n\n    rightsAttribution.removeEventListener('click', showAttribution, true);\n    rightsAttribution.addEventListener('click', showAttribution, true);\n\n    const showLink = event => {\n        rightsAttribution.parentElement.classList.remove('hide-important');\n        rightsLink.parentElement.classList.add('hide-important');\n        indicators.classList.add('hide-important');\n        rightsAttribution.removeEventListener('click', showAttribution, true);\n        rightsAttribution.addEventListener('click', showAttribution, true);\n    };\n\n    rightsLink.removeEventListener('click', showLink), true;\n    rightsLink.addEventListener('click', showLink, true);\n\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { infraspecifics } from 'api/snapdragon/infraspecifics';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport taxaBoxTemplate from 'ui/screens/common/taxa-box-template.html';\n\nexport const renderTaxaBox = async (parent, taxaBoxArgs) => {\n\n    const units = store.getState().units;\n\n    parent.innerHTML = '';\n\n    let { item, familyName, familyVernacularName } = taxaBoxArgs;\n\n    const options = [\n        { name: 'uk rank', formatter: trait => `UK # ${trait[0]}` },\n        { name: 'how edible', formatter: trait => trait[0] }\n    ];\n\n    let trait = itemProperties.getActiveTrait(item, options);\n    \n    const specific = infraspecifics.find(specific => specific.name === item.name);\n    const subSpeciesCount = specific ? specific.subspecies.length : 0;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = taxaBoxTemplate;\n\n    renderTemplate({ subSpeciesCount, familyName, familyVernacularName, trait }, template.content, parent);\n\n    const subspeciesBadge = parent.querySelector('.js-subspecies-badge');\n\n    if(subSpeciesCount === 0) {\n\n        subspeciesBadge.classList.add('hide');\n        \n    } else {\n\n        const members = specific.subspecies;\n\n        subspeciesBadge.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Cultivars of ${item.name}`;            \n            const list = rootNode.querySelector('#badgeListModal .js-modal-text');\n            let html = '<div class=\"modal-list scrollable\">';\n            members.forEach(member => {\n                html += `<div><span>subspecies: ${member.name}</span>`;\n                html += `<ul>`;\n                member.names.forEach(name => {\n                    if(name.language === config.language)\n                        html += `<li>name: ${name.vernacularName}</li>`;\n                });\n                html += `</ul></div>`;\n            });\n            html += '</div>';\n            list.innerHTML = html;\n        });\n    }\n}","import { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport textIntroTemplate from 'ui/screens/home/home-lesson-intro-text-template.html';\n\nexport const textSetup = (collection, config) => {\n\n    let speciesCount = getSpeciesCount(collection);\n\n    const iconicTaxa = collection.guide\n                            ? collection.guide.iconicTaxa\n                            : collection.iconicTaxa || [ ...new Set(collection.items.map(i => i.iconicTaxon)) ];\n\n    const language = config.languages.find(l => l.lang === config.language).name; // place in guide, and copy to collection\n\n    const template = document.createElement('template');\n          template.innerHTML = textIntroTemplate;\n\n    const months = collection.guide ? collection.guide.season.observableMonths.map(month => month.name) : [];\n    const observableMonths = months.length > 0 ? `${months[0]}-${months[months.length - 1]}` : '';\n    const season = months.length === 0\n                    ? 'Species observations are drawn from the whole year.'\n                    : collection.guide.season === 'all_year'\n                        ? 'Species observations are drawn from the whole year.'\n                        : `Species observations are from ${observableMonths}.`;\n\n    let speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n\n    let lessonIntro = collection.intro || '';\n\n    const summary = {\n        speciesCount,\n        iconicTaxa,\n        title: collection.name,\n        language,\n        observableMonths,\n        season,\n        speciesSummary,\n        lessonIntro\n    };\n\n    DOM.rightBody.innerHTML = '';\n\n    renderTemplate(summary, template.content, DOM.rightBody);\n\n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 500);\n    \n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 1500);\n};\n\nconst handleSpeciesUpdate = (speciesCount, collection, speciesSummary, iconicTaxa) => {\n    if (speciesCount === '--') {\n        speciesCount = getSpeciesCount(collection);\n        document.querySelector('.js-species-summary').innerHTML = speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n    }\n    return { speciesCount, speciesSummary };\n};\n\nconst getSpeciesSummary = (iconicTaxa, speciesCount) => {\n    return iconicTaxa.length === 1\n        ? `${speciesCount} species in ${iconicTaxa.length} taxon.`\n        : `${speciesCount} species in ${iconicTaxa.length} taxa.`;\n};\n\nconst getSpeciesCount = collection => {\n    let count = (collection.itemNames && collection.itemNames.length > 0)\n        ? collection.itemNames.length\n        : collection.items ? collection.items.length : 0;\n    return count === 0 ? '--' : count;\n};","import { contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\n\nimport videoTemplate from 'ui/screens/home/home-lesson-intro-video-template.html';\n\nexport const videoSetup = (collection, videoPlayer, parent, startTime) => {\n\n    parent.innerHTML = '';\n   \n    const template = document.createElement('template');\n          template.innerHTML = videoTemplate;\n\n    collection.video.webLabel = collection.video.links[1].label;\n    collection.video.webUrl = collection.video.links[1].url;\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === collection.id) || { collectionId: collection.id, startAt: collection.video.startAt || 0 };\n          activeLesson.playAt = activeLesson.pausedAt || activeLesson.startAt;\n\n    renderTemplate({ video: { ...collection.video, playAt: activeLesson.playAt, location: collection.video.location || '' } }, template.content, parent);\n\n    const timeBeforeVideoPlayerReady = 1000;\n\n    setTimeout(() => {\n\n        videoHandler.readyPlayer();\n\n        let checkInt;\n\n        const checkCurrentTime = player => {\n\n            checkInt = setInterval(function() {\n               const time = Math.floor(player.getCurrentTime());               \n               const match = matchSpeciesTime(time, collection);\n               if(!!match) {\n                   videoHandler.onSpeciesTimeMatchListeners.map(listener => listener(collection, match));\n               }\n               if(!collection.notes) return;\n               const noteMatch = collection.notes.find(note => contains(time, note.time));\n               if(noteMatch) {\n                   videoHandler.onNoteTimeMatchListeners.map(listener => listener(collection, noteMatch));\n               }\n            }, 1000);\n        };\n\n        const onPlayerStateChangeCallback = player => {\n\n            if(!typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n\n            const playerState = player.getPlayerState();\n\n            videoHandler.updateVideoPlayer(store.getState().videoPlayer, collection, activeLesson.speciesName);\n\n            switch(playerState) {\n                case videoHandler.states.find(state => state.value === 'playing').key: // 1\n                    checkCurrentTime(player);\n                    break;\n                case videoHandler.states.find(state => state.value === 'paused').key: // 2\n                    clearInterval(checkInt);\n                    checkInt = null;\n                    break;\n                default:\n                    checkCurrentTime(player);\n            }\n        };\n\n        videoHandler.subscribeToPlayerStateChange(onPlayerStateChangeCallback);\n\n        if(startTime) {\n            setTimeout(() => {\n                videoHandler.playVideoFrom(startTime);\n            }, 1000);\n        }        \n\n    }, timeBeforeVideoPlayerReady);\n        \n    const video = document.getElementsByTagName('iframe')[0];\n    const videoWidth = video.offsetWidth;\n          video.height = videoWidth * 9/16;\n  \n};\n\nexport const matchSpeciesTime = (time, collection) => {\n  const species = collection.items ? collection.items.filter(sp => sp.time) : collection.species.filter(sp => sp.time);\n  const match = species.find(sp => contains(time, sp.time));\n  return match;\n}\n","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { textSetup } from 'ui/screens/home/home-lesson-intro-text';\n\nexport const renderLessonIntro = collection => {\n\n    const { config, videoPlayer, collection: lesson } = store.getState();\n\n    collection = { ...collection, items: lesson.items };\n\n    collection.hasVideo ? videoSetup(collection, videoPlayer || [], DOM.rightBody) : textSetup(collection, config);\n    \n}","import { clone, contains, take, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils'; \nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { imageUseCases, prepImagesForCarousel, prepImageForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderSpecimenTiles = collection => {\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    renderItemSpecimenTiles(item);\n};\n\nconst renderItemSpecimenTiles = item => {\n    \n    const { config, collection, layout } = store.getState();\n\n    const familes = [ 'family-strips', 'family', 'taxon-card' ];\n\n    const collectionItems = collection.allItems || collection.items;\n\n    let images, items;\n    \n    if (contains(layout.screens[1].name, familes)) {        \n        const family = collectionItems.filter(i => i.family.name.toLowerCase() === item.taxonomy.family.toLowerCase());\n        images = take(6, utils.shuffleArray(getImagesFromItemFamily(family, config, imageUseCases.SPECIES_CARD)));\n        items = images.map(image => collectionItems.find(item => item.name === image.itemName));\n    } else {\n        images = take(6, utils.shuffleArray(clone(item.images)));\n        images = prepImagesForCarousel({ name: item.name, itemCommon: item.itemCommon, images }, config, imageUseCases.SPECIES_CARD);\n        items = [item];\n    }\n\n    images = images.map(image => {\n        return scaleImage(image, imageUseCases.VISUAL_MATCH, config);\n    });\n\n    renderSpecimenImageTiles({ items: items }, images, item);\n};\n\nconst renderSpecimenImageTiles = (collection, images, item) => {\n\n    const { layout, config } = store.getState();\n\n    const acceptableScreens = [ 'specimen-images', 'trait-images' ]; // lookalike options?\n\n    let screen = layout.screens.find(screen => contains(screen.name, acceptableScreens));\n\n    if(!screen) return;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = specimensTemplate;    \n\n    const parent = DOM.leftBody;\n          parent.innerHTML = '';\n\n    snapLog('renderSpecimenImageTiles, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images }, template.content, parent);\n\n    modalImagesHandler(document.querySelectorAll('.js-tiles .square'), item, collection, config);\n};\n\nconst getImagesFromItemFamily = (family, config, useCase) => {\n\n    let itemImages, items;\n\n    itemImages = flatten(family.map(i => {\n        return { images: i.images, item: { name: i.name, itemCommon: i.names[0].vernacularName, vernacularName: i.names[0].vernacularName, names: i.names } };\n    }));\n\n    if (itemImages.length < 6) {\n        \n        let pool = itemImages.map(image => {\n            const item = family.find(i => i.name === image.item.name);\n            return {\n                images: item.images,\n                item: {\n                    name: item.name,\n                    itemCommon: item.names[0].vernacularName,\n                    vernacularName: item.names[0].vernacularName,\n                    names: item.names\n                }\n            };\n        });\n        let pooledImages = flatten(pool);\n            pooledImages.forEach(pooledImage => {\n                pooledImage.images.forEach(image => {\n                    itemImages.push({ images: pooledImage.images, item: pooledImage.item });\n                });\n            });\n    }\n\n    items = itemImages.map(image => image.item);\n    \n    items.forEach(i => {\n        const itemName = i.name;\n        i.images = family.find(i => i.name === itemName).images;\n    });\n\n    const uniqueImages = [];\n\n    const getUniqueImage = (image, index, uniqueImages) => {\n        let uniqueImage = image.images.find(i => i.starred);\n        if(uniqueImage) {\n            uniqueImage = contains(uniqueImage.title, uniqueImages.map(i => i.title)) ? null : uniqueImage;\n        }\n        if(uniqueImage) {\n            uniqueImages.push(uniqueImage);\n            return uniqueImage;\n        }\n        else {\n            uniqueImage = image.images[index];\n            if(uniqueImage && !contains(uniqueImage.title, uniqueImages.map(i => i.title))) {\n                uniqueImages.push(uniqueImage);\n                return uniqueImage;\n            }\n        }\n    }; \n\n    const familyImages = [];\n\n    itemImages.forEach((image, index) => {\n        let imageToPrep = getUniqueImage(image, index, uniqueImages);\n        if(imageToPrep) {\n            familyImages.push(prepImageForCarousel(imageToPrep, index, image.item, config, useCase));\n        }\n    });\n\n    return familyImages;\n}\n","import { onCreateCustomLesson } from 'ui/create-guide-modal/create-guide';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { onLoadLessonViewState } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderCustomLesson = (lessons, videoPlayer, config) => {\n\n    onCreateCustomLesson(collection => {\n\n        const parent = document.querySelector('.lesson-list > .scrollable');\n        const template = document.createElement('template');\n              template.innerHTML = lessonTemplate;\n        \n        const lesson = onLoadLessonViewState(collection, videoPlayer);\n              lesson.hideVideoClass = 'hide-important';\n              lesson.hideTextIntroClass = '';\n        \n        lessons.push(lesson);\n        \n        lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n        renderTemplate({ lesson }, template.content, parent);\n        \n        const scrollOptions = {\n          left: 0,\n          top: 1000,\n          behavior: 'smooth'\n        }\n\n        setTimeout(() => {\n\n          document.querySelector('.js-lesson-container').scrollTo(scrollOptions);\n\n          const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n\n          import('ui/screens/lists/lesson-list-event-handler').then(module => {\n            module.lessonListEventHandler.onReviewClickHandler(reviewLink, config);\n          });\n  \n          const chevron = config.isLandscapeMode \n              ? document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${lesson.id}\"]`)\n              : document.querySelectorAll(`.js-lesson-list-chevron[data-lesson-id=\"${lesson.id}\"]`)[1];\n\n          if(chevron) {            \n            import('ui/screens/lists/lesson-list-event-handler').then(module => {\n              module.lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false); \n            });         \n          }\n  \n          const youtubeLessonIcon = document.querySelector(`.js-lesson-list-youtube[data-lesson-id=\"${lesson.id}\"]`);\n          if(youtubeLessonIcon) {\n            youtubeLessonIcon.classList.add('hide-important');\n          } \n          \n          import('ui/screens/lists/lesson-list-event-handler').then(module => {\n            module.lessonListEventHandler.highlightActiveLesson(lesson.id);\n          });\n\n        }, 250);\n    });\n};","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport lessonEditTemplate from 'ui/screens/lists/lesson-edit-template.html';\n\nexport const renderEditLesson = collection => {\n\nconst init = async () => {\n\n    const { config } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonEditTemplate;\n\n    const modal = document.querySelector('#basicModal');\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';\n\n    renderTemplate({ collection }, template.content, parent);\n    \n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = 'Edit lesson';\n\n    const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n          selectedSpeciesDisplay.innerHTML = '';\n    \n    const createGuide = {\n        setConfig: config => {\n        actions.boundUpdateConfig(config);\n        }\n    };\n\n    speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n};\n\ninit();\n\n};","import { isEmpty } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessonIntro } from 'ui/screens/home/home-lesson-intro';\nimport { renderEditLesson } from 'ui/screens/lists/lesson-edit';\nimport { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\n\nexport const onLoadLessonViewState = (collection, videoPlayer) => {\n\n  const taxa = collection.iconicTaxa ? collection.iconicTaxa.map(taxon => taxon.common).join(', ') : '';\n\n  collection.taxa = taxa;\n  collection.hasVideo = collection.video && !isEmpty(collection.video) ? true : false;\n  collection.showVideoIconClass = collection.hasVideo ? '' : 'hide-important';\n  collection.videoState = videoHandler.setVideoState(videoPlayer || [], collection);\n  collection.reviewState = 'Lesson Quiz';\n\n  collection.hasTermsClass = collection.terms && Array.isArray(collection.terms) && collection.terms.length > 0 ? '' : 'hide-important';\n  collection.isCollectionEditableClass = '';\n\n  return collection;  \n};\n\nexport const onLoadLessonsViewState = (collections, videoPlayer) => {\n  return collections.map(collection => {\n    return onLoadLessonViewState(collection, videoPlayer);\n  });\n};\n\nconst onClickViewState = (e, lessons) => {\n\n  const icon = e.currentTarget;\n  const isYoutubeIcon = utils.hasClass(icon, 'js-lesson-list-youtube');\n  const isChevronIcon = utils.hasClass(icon, 'js-lesson-list-chevron');\n  const row = icon.parentElement.parentElement;\n  const lessonId = parseInt(icon.dataset.lessonId);\n  const lesson = lessons.find(l => l.id === lessonId);\n  const container = document.querySelector(`.js-species-container[data-container-id=\"${lessonId}\"]`);\n  const speciesList = document.querySelector(`#species_list_id_${lessonId}`);\n  const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lessonId}\"]`);\n\n  // snapLog('onClickViewState', {});\n\n  hideOtherContentAndRevertChevrons(lessonId);\n\n  const isSpeciesListAvailable = !!speciesList;\n  const isSpeciesListHidden = utils.hasClass(speciesList, 'hide');\n\n  const lessonVideoState = document.querySelector(`.js-lesson-video-state[data-lesson-id=\"${lessonId}\"]`);\n  const iconIsChevron = !icon.dataset.lessonIsYoutubeIcon;\n\n  const state = {\n    requiresSpeciesList: !isSpeciesListAvailable,\n    revealSpeciesList: isSpeciesListAvailable && isSpeciesListHidden,\n    hideSpeciesList: isSpeciesListAvailable && !isSpeciesListHidden && iconIsChevron\n  };\n\n  return { icon, lesson, state, speciesList, container, lessonVideoState, reviewLink, row, isYoutubeIcon };\n};\n\nconst onLessonIconClickHandler = (icon, lessons, config, startLesson) => {\n  \n  return icon.addEventListener('click', async e => {      \n\n    const { icon, lesson, state, speciesList, container, lessonVideoState, row, isYoutubeIcon } = onClickViewState(e, lessons);\n\n    // snapLog('onLessonIconClickHandler', {});\n\n    const isItemActive = item => {\n      if(item.hasOwnProperty('isActive')) {\n        return item.isActive;\n      } else {\n        return true;\n      }\n    };\n\n    lesson.items = lesson.items.filter(item => isItemActive(item));\n\n    const lessonYoutubeIcons = document.querySelectorAll('.lesson-list-selected-lesson .youtube-icon');\n          lessonYoutubeIcons.forEach(icon => icon.parentElement.classList.remove('youtube-green-fg'));\n\n    if(icon.dataset.lessonIsYoutubeIcon) {\n      icon.classList.add('youtube-green-fg');\n      const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${icon.dataset.lessonId}\"]`);\n            chevron.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n      if(config.isPortraitMode) {\n        const lessonsIcon = document.querySelector('.js-lessons');\n              lessonsIcon.classList.remove('active-icon');\n      }\n    }\n\n    let siblingChevron;\n\n    if(startLesson) {\n      renderLessonIntro(lesson);\n      siblingChevron = icon.parentElement.parentElement.parentElement.children[1].children[0].children[1];\n      if(isYoutubeIcon) {\n        if(state.hideSpeciesList) {\n          siblingChevron.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n        }\n      }\n    } else {\n      if(!isYoutubeIcon) {\n        if(state.hideSpeciesList) {\n          icon.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n        } else if(!state.revealSpeciesList) {\n          icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n        }\n      }\n    }\n\n    if(state.revealSpeciesList) {        \n      speciesList.classList.remove('hide');\n      if(!isYoutubeIcon) {\n        icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n      }\n    }\n    if(state.hideSpeciesList) {\n      speciesList.classList.add('hide');\n      lessonVideoState.innerHTML = videoHandler.setVideoState(store.getState().videoPlayer || [], lesson);\n    }\n\n    if(state.requiresSpeciesList) {\n      await loadAndDisplaySpeciesList(config, icon, lesson, (config.isPortraitMode && isYoutubeIcon) ? DOM.rightBody.querySelector('.js-home-scrolling-container .scrollable') : container, isYoutubeIcon);\n    }\n\n    row.classList.add('lesson-list-selected-lesson');\n  });\n};\n\nconst onLessonTitleClickHandler = (title, lessons) => {\n    title.addEventListener('click', e => {\n          const lesson = lessons.find(lesson => lesson.id === parseInt(title.dataset.lessonId));\n          renderEditLesson(lesson);\n    });\n};\n\nconst onReviewClickHandler = (reviewLink, config) => {    \n\n  const reviewLinkHandler = async e => {\n\n    const spinner = document.querySelector(`.review-spinner[data-lesson-id=\"${reviewLink.dataset.lessonId}\"]`);\n    if(spinner) spinner.classList.remove('hide');\n    setTimeout(() => {\n      if(spinner) spinner.classList.add('hide');\n    }, config.isPortraitMode ? 5000 : 2500);\n\n    import('ui/screens/lists/lesson-state-handler').then(module => {\n      module.lessonStateHandler.recordUserAction(enums.userEvent.START_LESSON_REVIEW);\n      module.lessonStateHandler.changeRequest({        \n        requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n        requestArgs: {\n          id: reviewLink.dataset.lessonId\n        }\n      });\n    });\n  }\n\n  reviewLink.addEventListener('click', reviewLinkHandler);\n};\n\nconst hideOtherContentAndRevertChevrons = selectedLessonId => {\n\n  const upChevrons = Array.from(document.querySelectorAll('.js-lesson-list-chevron .fa-chevron-up'));\n\n  upChevrons.forEach(chevron => {\n    \n    const chevronLessonId = parseInt(chevron.dataset.lessonId);\n\n    if(chevronLessonId !== selectedLessonId) {\n      \n      chevron.parentElement.click();\n        \n      const lesson = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${chevronLessonId}\"]`);\n            lesson.classList.remove('highlighted-for-review-row');\n    }\n  });\n};\n\nconst loadAndDisplaySpeciesList = async(config, icon, lesson, container, isYoutubeIcon) => {\n\n  Array.from(icon.parentElement.children).forEach(child => child.dataset.selected = true);\n\n  await import('ui/screens/lists/lesson-state-handler').then(module => {\n    module.lessonStateHandler.recordUserAction(isYoutubeIcon ? enums.userEvent.PLAY_LESSON_VIDEO : enums.userEvent.TOGGLE_SPECIES_LIST);\n    module.lessonStateHandler.changeRequest({\n      requestType: enums.lessonState.RENDER_SPECIES_LIST,\n      requestArgs: { lesson, container }\n    });\n  });\n\n  // if(config.isPortraitMode) lessonListScrollHandler.scrollToTitle(lesson.id);\n};\n\nconst highlightActiveLesson = lessonId => {\n  const rows = document.querySelectorAll('.js-lesson-list-carousel-item');\n  rows.forEach(row => row.classList.remove('highlighted-for-review-row'));\n  const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lessonId}\"]`);\n  if (row)\n    row.classList.add('highlighted-for-review-row');\n  // lessonListScrollHandler.scrollToTitle(lesson.dataset.lessonId);\n};\n\nexport const lessonListEventHandler = {\n  onLoadLessonViewState,\n  onLoadLessonsViewState,\n  onLessonIconClickHandler,\n  onReviewClickHandler,\n  onLessonTitleClickHandler,\n  hideOtherContentAndRevertChevrons,\n  highlightActiveLesson\n};","import lessonListHeaderTemplate from 'ui/screens/lists/lesson-list-header-template.html';\n\nexport const renderLessonListHeader = parent => {\n\n    const header = document.createElement(\"div\");\n          header.innerHTML = lessonListHeaderTemplate;\n\n    const sibling = document.querySelector('.lesson-list .scrollable');\n\n    parent = document.querySelector('.lesson-list');\n    parent.insertBefore(header, sibling);\n};","const siblingsBefore = lessonId => {\n        \n    let siblings = document.querySelectorAll('.js-lesson-list-item:not(.hide-important)');\n    let sibling = siblings[0];\n    let index = 0;\n\n    const before = [];\n    \n    while(sibling) {\n      index++;\n      if(parseInt(sibling.dataset.lessonId) !== lessonId) {\n        before.push(sibling);\n        sibling = siblings[index];\n      } else {\n        sibling = null;\n      }\n    }\n\n    return before.length;\n  };\n\nconst scrollToTitle = lessonId => {\n  setTimeout(() => {\n    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhRow').replace('px', ''));\n    const rows = siblingsBefore(lessonId);\n    const top = standardBlock * (rows);\n\n    const scroll = document.querySelector('.lesson-list .scrollable');\n    if(scroll) scroll.scrollTop = top;\n  });\n};\n\nexport const lessonListScrollHandler = {\n  scrollToTitle\n}","import { enums } from 'ui/helpers/enum-helper';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderLessonListHeader } from 'ui/screens/lists/lesson-list-header';\nimport { renderLesson } from 'ui/screens/lists/lesson';\nimport { renderCustomLesson } from 'ui/screens/lists/lesson-custom';\nimport { onLoadLessonsViewState } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonListTemplate from 'ui/screens/lists/lesson-list-template.html';\n\nexport const renderLessons = () => {\n\n    let { config, collections, videoPlayer } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonListTemplate;\n\n    let lessons = onLoadLessonsViewState(collections.filter(collection => (collection.isActive === undefined || collection.isActive)), videoPlayer);\n\n    lessons = lessons.sort(function(a,b){\n          const tsa = a.create ? a.create.seconds : 0;\n          const tsb = b.create ? b.create.seconds : 0;\n        return tsb - tsa;\n    });\n\n    let parent = config.isPortraitMode ? DOM.rightBody : DOM.leftBody;\n        parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n      lessons.forEach(lesson => renderLesson(lesson));\n\n      renderLessonListHeader(parent);\n\n      const createCustomLessonBtn = parent.querySelector('.js-create-custom-lesson');          \n            createCustomLessonBtn.addEventListener('click', e => {\n              import('ui/create-guide-modal/create-guide').then(module => {\n                module.createGuideHandler(1);\n              });\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.hideOtherContentAndRevertChevrons(0);\n              });              \n            });    \n\n      const youtubeLessonIcons = document.querySelectorAll('.js-lesson-list-youtube');      \n            youtubeLessonIcons.forEach(youtube => {\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.onLessonIconClickHandler(youtube, lessons, config, true);\n              });\n            });\n      highlightActiveLessonHandler(youtubeLessonIcons);\n\n      const chevrons = document.querySelectorAll('.js-lesson-list-chevron');\n            chevrons.forEach(chevron => {\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false);\n              });              \n            });\n      highlightActiveLessonHandler(chevrons);\n\n      const reviews = document.querySelectorAll('.js-review-link');\n            reviews.forEach(reviewLink => {\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.onReviewClickHandler(reviewLink, config);\n              });\n            });\n      highlightActiveLessonHandler(reviews);\n\n      setTimeout(() => {      \n\n            let terms = document.querySelectorAll('.js-terms-review-link');\n                terms.forEach(term => {\n                  term.addEventListener('click', e => {                         \n                        const lesson = lessons.find(lesson => lesson.id === parseInt(term.dataset.lessonId));\n                        if(lesson.terms) {\n                              const { glossary } = store.getState();\n                              setTimeout(() => {\n                                    const { quickFire } = store.getState();\n                                    if(quickFire && quickFire.lessonId === lesson.id) {\n                                          import('ui/quick-fire-modal/quick-fire').then(module => {\n                                            module.quickFireHandlers.questions(quickFire);\n                                          });\n                                    } else {\n                                          import('ui/quick-fire-modal/quick-fire').then(module => {\n                                            const quickFireState = { ...module.quickFireHandlers.init(glossary, enums.quickFireType.DEFINITION, lesson), linkFromLesson: true }\n                                            module.quickFireHandlers.questions(quickFireState);\n                                          });\n                                    }\n                              },150);\n                        }\n                });\n            });\n            highlightActiveLessonHandler(terms);\n\n      },100);\n\n      renderCustomLesson(lessons, videoPlayer, config);      \n};\n\nconst highlightActiveLessonHandler = lessons => {\n      lessons.forEach(lesson => lesson.addEventListener('click', e => {            \n        import('ui/screens/lists/lesson-list-event-handler').then(module => {\n          module.lessonListEventHandler.highlightActiveLesson(lesson.dataset.lessonId);\n        });          \n      }));\n};\n","import { contains, clone } from 'ramda';\n\nimport { subscription } from 'redux/subscriptions';\nimport { firestore } from 'api/firebase/firestore';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderSpeciesList } from 'ui/screens/lists/species-list';\nimport { collectionHandler  } from 'ui/helpers/collection-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { nextLesson } from 'ui/setup/next-lesson';\nimport { nextLayout } from 'ui/setup/next-layout';\nimport { nextItem } from 'ui/setup/next-item';\n\nconst changeRequest = async args => {\n\n  const { requestType, requestArgs } = args;\n\n  let { config, collections, collection, counter, lessonPlan, lessonPlans, layout, lesson, score, history, bonusLayout, traits = enums } = store.getState();\n  let userProgressState;\n\n  switch(requestType) {\n\n    case enums.lessonState.PAUSE_LESSON:\n      changeLessonState(requestType, collection, config);\n    break;\n    \n    case enums.lessonState.UPDATE_COLLECTION:\n      actions.boundUpdateCollection({ config: requestArgs.config, collection: requestArgs.collection });\n    break;\n    \n    case enums.lessonState.SAVE_LESSON_PROGRESS:\n      \n      config.collection.id = collection.id; // hack\n    \n      const savedLesson = { \n          name: collection.name,\n          config, collection, counter, lessonPlan, lessonPlans, layout, lesson, score: clone(score), history, bonusLayout, enums: traits\n      };\n    \n      actions.boundSaveLesson(savedLesson);\n\n    break;\n    \n    case enums.lessonState.GET_LESSON_STATE:\n      userProgressState = await getLessonState(requestArgs.collectionToLoad, requestArgs.config, requestArgs.updatedCounter);\n      saveUserProgressState(userProgressState);\n      return userProgressState;\n    \n    case enums.lessonState.ADD_SPECIES_TO_COLLECTION:\n      userProgressState = await addExtraSpeciesSelection(requestArgs);\n      saveUserProgressState(userProgressState);\n    \n    case enums.lessonState.RENDER_SPECIES_LIST:      \n      userProgressState = await getLessonState(requestArgs.lesson || requestArgs.collection, config);\n      saveUserProgressState(userProgressState);\n      setTimeout(() => {\n        renderSpeciesList(userProgressState.collection, { callingParentContainer: requestArgs.container });\n      });\n    break;\n    \n    case enums.lessonState.BEGIN_OR_RESUME_LESSON:\n      const collectionToLoad = lessonStateHelper.getCollectionToLoad(collection, collections, requestArgs.id);\n      userProgressState = await getLessonState(collectionToLoad, config);\n      const _lessonState = userProgressState.score && userProgressState.score.collectionId === userProgressState.collection.id\n              ? enums.lessonState.RESUME_LESSON\n              : enums.lessonState.BEGIN_LESSON;\n      saveUserProgressState(userProgressState);\n      // subscription.addAllQuizLayoutSubs();\n\n      subscription.add(nextItem, 'layout', 'quiz');\n      subscription.add(nextLesson, 'counter', 'quiz');\n      subscription.add(nextLayout, 'counter', 'quiz');\n\n      setTimeout(() => {\n        changeLessonState(_lessonState, userProgressState.collection, userProgressState.lesson); \n      });\n    break;\n\n    case enums.lessonState.NEXT_ROUND:\n      changeLessonState(enums.lessonState.NEXT_ROUND, collection, requestArgs.lesson);\n    break;\n  }\n};\n\nconst getLessonState = async (collectionToLoad, config, newLessonCounter) => {\n\n  const { counter: stateCounter, lessons, lesson: savedLesson } = store.getState();\n\n  const counter = newLessonCounter || stateCounter;\n\n  const userProgressState = lessonStateHelper.getUserLessonState(lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter);\n\n  userProgressState.collection = await collectionHandler.loadCollection(userProgressState.collection, config);\n  \n  return userProgressState;\n};\n\nconst changeLessonState = async (userProgressState, collection, lesson) => {    \n\n  switch(userProgressState) {\n      case enums.lessonState.BEGIN_LESSON: {\n            actions.boundStopStartLesson({ index: 0, isLessonPaused: false, log: { collection: collection.id  } });\n          break;\n      }\n      case enums.lessonState.PAUSE_LESSON: {\n\n        if(collection.items) {\n          const { index } = lessonStateHelper.getLatestCounter(collection);\n          actions.boundStopStartLesson({ index, isLessonPaused: true, log: { index: index, collection: collection.id  } });\n        }\n\n        break;\n      }\n      case enums.lessonState.RESUME_LESSON: {\n          actions.boundStopStartLesson({ ...lessonStateHelper.getLatestCounter(collection), isLessonPaused: false, log: { collection: collection.id  } });\n          break;\n      }\n      case enums.lessonState.NEXT_ROUND: {\n          if(lesson.isLevelComplete) {\n            actions.boundNextLevel({ index: 0, lesson });\n          } else if(lesson.isNextRound) {\n              actions.boundNextRound({ index: 0, lesson: { ...lesson, currentRound: lesson.currentRound + 1 } });\n          };\n          break;      \n      }\n  }\n  return lesson;\n};\n\nconst addExtraSpeciesSelection = async requestArgs => {\n\n  const { config, collection } = requestArgs;\n\n  const extraSpecies = config.guide.species.filter(s => !contains(s.name, collection.items.map(i => i.name)));\n\n  const items = await collectionHandler.getSpeciesDetailsInParallel(extraSpecies);\n\n  const collectionExtension = await collectionHandler.loadCollectionItemProperties({ items }, config);\n  collection.items = [ ...collection.items, ...collectionExtension.items];\n  const lesson = {\n      collection,\n      counter: { ...store.getState().counter, index: 0 },\n      lesson: { currentRound: 1, rounds: 0, isNextRound: true },\n      layout: null,\n      history: null,\n      score: clone(progressState.score)\n  };\n\n  return await lesson;\n};\n\nconst saveUserProgressState = userProgressState => {\n\n  const { user, userAction } = store.getState();\n\n  userProgressState.counter = userProgressState.counter || { };\n\n  actions.boundSaveUserProgress({ lesson: userProgressState, userAction });\n  \n  firestore.addCollection(clone(userProgressState.collection), user);\n};\n\nconst recordUserAction = action => {\n\n  subscription.removeAllQuizScreenSubs();\n  subscription.removeAllQuizLayoutSubs();\n\n  setTimeout(() => {\n    actions.boundClickEvent(action);  \n  });\n};\n\nexport const lessonStateHandler = {\n  changeRequest,\n  recordUserAction\n};","import { clone } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nconst getIsReviewingLesson = (userAction, config) => {\n\n    let isNotReviewingLesson = true;\n  \n    if (userAction) {\n        if (config.isLandscapeMode) {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name || userAction.name === enums.userEvent.TOGGLE_SPECIES_LIST.name);\n        }\n        else {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name);\n        }\n    }\n  \n    return !isNotReviewingLesson;\n};\n\nconst overrideLesson = (userAction, config) => {\n    return !getIsReviewingLesson(userAction, config);\n};\n\nconst purgeLesson = () => {\n    persistor.purge();\n    window.location.reload(true);\n};\n\nconst clearGuide = () => {\n    const config = store.getState().config;\n    config.guide = initialConfig.guide;\n    actions.boundUpdateConfig(config);\n};\n\nconst getCollectionToLoad = (currentCollection, collections, selectedLessonCollectionId)  => {\n\n    const id = parseInt(selectedLessonCollectionId);\n  \n    let resume = true;\n        resume = resume && currentCollection.id > 0;\n        resume = resume && currentCollection.id === id;\n  \n    const collection = resume ? currentCollection : collections.find(c => c.id === id);\n  \n    return collection;\n};\n\nconst getLatestCounter = collection => { \n    const { counter, lessons } = store.getState();\n    const log = counter.log;\n    const index = log ? log.index : \n                lessons.find(l => l.collection.id === collection.id)\n                    ? lessons.find(l => l.collection.id === collection.id).counter.index\n                    : counter.index;\n  \n    return { index };\n};\n\nconst getUserLessonState = (lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter) => {\n\n    let restoredLesson = lessons.find(l => l.name === collectionToLoad.name);\n\n    let lesson;\n  \n    if(restoredLesson) {\n      lesson = restoredLesson;\n      lesson.collection = collectionToLoad;\n      if(lesson.lesson.isNextRound) {\n        lesson.score = clone(progressState.score);\n      }\n    } else {\n      lesson = { \n        collection: collectionToLoad, \n        counter: { ...counter, index: 0 },\n        lesson: savedLesson || { currentRound: 1, rounds: 0, isNextRound: true },\n        layout: null,\n        history: null,\n        score: clone(progressState.score)\n      };\n    }\n    \n    return lesson;\n};\n  \nexport const lessonStateHelper = {\n    getIsReviewingLesson,\n    overrideLesson,\n    purgeLesson,\n    clearGuide,\n    getCollectionToLoad,\n    getLatestCounter,\n    getUserLessonState\n};","import { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderLesson = (lesson) => {\n\n      const { config, lessons, layout } = store.getState();\n\n      const template = document.createElement('template');\n            template.innerHTML = lessonTemplate;\n\n      lesson.hideVideoClass = lesson.hasVideo ? '' : 'hide-important';\n      lesson.hideTextIntroClass = lesson.hasVideo ? 'hide-important' : '';\n\n      const savedLesson = lessons.find(saved => saved.collection.id === lesson.id);\n\n      lesson.isPaused = !!savedLesson || config.collection.id === lesson.id;\n      lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n      renderTemplate({ lesson }, template.content, document.querySelector('.js-lesson-container'));\n\n      if(savedLesson) {\n            renderReview(savedLesson.layout, savedLesson.collection, null, config);\n      } \n      \n      if(config.collection.id === lesson.id) {\n\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.id}\"]`)\n                  if(row) row.classList.add('highlighted-for-review-row');\n\n            if(config.isLandscapeMode) {\n                  setTimeout(() => {\n                        const reviewLink = row.querySelector('.js-review-summary');                  \n                        if(reviewLink) reviewLink.click();\n                  });\n            }\n\n            // current lesson whose current state is not yet saved\n            if(layout && layout.roundScoreCount) {\n                  renderReview(layout, lesson, 'progress-icon', config);\n            }\n      }\n}; \n\nconst renderReview = (layout, lesson, className, config) => {\n      const progressBar = document.querySelector('.js-main-lesson-grid progress');\n      const value = !!layout.roundProgressIndex ? layout.roundProgressIndex : progressBar ? progressBar.value : 0;\n      const review = `<progress aria-label=\"lesson quiz progress\" title=\"lesson quiz progress\" class=\"absolute\" value=\"${ value }\" max=\"${layout.roundScoreCount}\"></progress>`;\n      const parent = document.querySelector(`.js-review[data-lesson-id=\"${lesson.id}\"]`);\n            parent.innerHTML = review;\n\n      const reviewLinkBtn = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n            reviewLinkBtn.innerText = 'Resume Quiz';\n};\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport definitionTemplate from 'ui/screens/lists/species-list-definition-insert.html';\n\nlet currentlyActiveRow = null;\nlet currentlyActiveSpecies;\n\nexport const onSpeciesChangeHandler = species => {\n\n    try {\n\n        const id = species.id || species.eolId;\n        const tr = document.querySelector(`#id_${id}`);\n\n        currentlyActiveRow = tr;\n        currentlyActiveSpecies = species;\n        \n    } catch(e) {\n      logError(onSpeciesChangeHandler, e);\n    }\n};\n\nexport const openNoteHandler = (note, time) => {\n\n    if(Math.floor(note.time) !== time) return;\n\n    let parent = document.getElementById('insertParent');\n\n    if(parent) parent.remove();\n\n    const template = document.createElement('template');\n          template.innerHTML = definitionTemplate;\n\n    const insert = document.createElement('div');\n          insert.setAttribute('id', 'insertParent');\n\n    if(note.colCount) {\n        insert.classList.add(`col-count-${note.colCount}`);\n        insert.innerHTML = note.description.replace(/\\r?\\n/g, '<br />');\n    }\n\n    if(!currentlyActiveRow) {\n        // first row, before any species have been matched\n        currentlyActiveRow = document.querySelector('.js-list-item'); // first by default\n    }\n\n    currentlyActiveRow.parentElement.insertBefore(insert, currentlyActiveRow);\n\n    if(!note.colCount) {        \n        parent = document.getElementById('insertParent');\n        parent.innerHTML = '';\n        renderTemplate({ note }, template.content, parent);\n        const noteText = document.querySelector('#insertParent > div:nth-child(1) > div:nth-child(2)');\n              noteText.innerHTML =noteText.innerHTML.replace(/\\r?\\n/g, '<br />');\n    }    \n};\n","import { contains } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { utils } from 'utils/utils';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { modalImageHandler } from 'ui/helpers/image-handler';\nimport { buildTable } from 'ui/screens/lists/species-table';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { onSpeciesChangeHandler, openNoteHandler } from 'ui/screens/lists/species-list-definition-insert';\n\nexport const renderSpeciesList = (lesson, args) => {\n\n  const init = async () => {\n\n    const { callingParentContainer, isInCarousel = false } = args;\n\n    const { config, history, enums: traitEnums, collections  } = store.getState();    \n\n    // to ensure we have latest item list if species has been added\n    const collection = collections.find(c => c.id === lesson.id);\n\n    const openAccordionHandler = (species, accordion) => {\n        \n        accordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n        \n        openSpeciesDescriptionHandler(collection, species, true, false);\n\n        const closeAccordionHandler = event => {\n            // remove current close accordion handler\n            accordion.removeEventListener('click', closeAccordionHandler);\n            // change direction of chevron       \n            accordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${species.name}\"></i>`;\n            // attach new open accordion listener\n            accordion.addEventListener('click', event => {\n                openAccordionHandler(species, accordion);\n            });\n            // remove the species description - handled in group action\n            const description = document.querySelector('.species-description');\n            if(description) {\n                description.parentNode.removeChild(description);\n            }\n        };\n\n        // attach close accordion handler\n        accordion.addEventListener('click', closeAccordionHandler);\n    };\n\n    const userClickHandlers = () => {\n\n        const listItemImages = document.querySelectorAll('.table-row img');\n\n              listItemImages.forEach(itemImage => {                 \n                  const item = collection.items.find(item => item.name === itemImage.dataset.itemName)\n                  modalImageHandler(itemImage, item, collection, config); \n              });\n\n        const accordions = document.querySelectorAll('.js-accordion');\n\n              accordions.forEach(accordion => {\n                  const accordionHandler = event => {\n                      const species = collection.items.find(item => item.name === event.currentTarget.dataset.name);\n                      if(species) {\n                        openAccordionHandler(species, accordion);\n                      }\n                  };\n                  accordion.addEventListener('click', accordionHandler);\n              });\n\n        const youtubeIcons = document.querySelectorAll('.js-youtube');\n              youtubeIcons.forEach(icon => {                  \n                  icon.addEventListener('click', event => {       \n\n                    event.stopPropagation();\n\n                    const activeIcon = event.currentTarget;\n                          activeIcon.classList.add('youtube-green-fg');\n                    const speciesName = activeIcon.dataset.name;\n\n                    const species = { ...collection.items.find(item => item.name == speciesName), ...collection.species.find(item => item.name == speciesName) };\n\n\n                    openSpeciesDescriptionHandler(collection, species, true);\n\n                    if(species && species.time) {\n\n                        videoHandler.isVideoPlayerReady(collection.video.id)\n                            ? videoHandler.playVideoFrom(species.time[0])\n                            : videoSetup(collection, store.getState().videoPlayer || [], DOM.rightBody, species.time[0]);\n                    }\n\n                   videoHandler.updateVideoPlayer(store.getState().videoPlayer, collection, species);\n                  });\n              });\n\n        const cardModal = document.querySelector('#cardModal .js-modal-body');\n\n        setTimeout(() => {\n            \n            const speciesCardLinks = document.querySelectorAll('.js-test-card-container-link');\n                  speciesCardLinks.forEach((link, index) => {                \n                      link.addEventListener('click', event => {                    \n                        const name = event.target.dataset.name;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'species-card';\n                        renderCard(collection, 'MODAL', collection.items.find(i => i.name === name), cardModal, isInCarousel);\n                      });\n                  });\n\n            const traitCardLinks = document.querySelectorAll('.js-key-trait-link');\n                  traitCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const keyTrait = event.target.dataset.keyTrait;\n                        const url = event.target.dataset.url;\n                        renderNonTaxonCard('MODAL', keyTrait, cardModal, url);\n                    });\n                  });\n\n            const taxonCardLinks = document.querySelectorAll('.js-taxon-card-link');\n                  taxonCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const taxon = event.target.dataset.family || event.target.dataset.order;\n                        const name = event.target.dataset.name;\n                        const rank = event.target.dataset.rank;\n                        document.querySelector('#cardModal .prev > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'taxon-card';\n                        document.querySelector('#cardModal .next > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .next > span').dataset.card = 'taxon-card';\n                        renderTaxonCard(collection, 'MODAL', collection.items.find(i => i.taxonomy[rank] === name), cardModal, taxon, rank, isInCarousel);\n                    });\n                  });\n\n            document.querySelectorAll('.mushroom-icon').forEach(icon => {\n                icon.innerHTML = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg>';\n            });\n\n            const nthChild = config.isLandscapeMode ? 5 : 3;\n            const taxonIcons = document.querySelectorAll(`.table-row.js-list-item td:nth-child(${nthChild}) > span`);\n\n            if(!history) return;\n\n            const noWrongAnswersForThisSpecies = [];\n            history.scores.map(score => score.failsTotals).forEach(totals => {\n                for (let [key, anyWrongAnwers] of Object.entries(totals)) {\n                    if(anyWrongAnwers == false) {\n                        noWrongAnswersForThisSpecies.push(parseInt(key));\n                    }\n                }\n            });\n\n            taxonIcons.forEach(icon => {\n                if(contains(parseInt(icon.id), noWrongAnswersForThisSpecies)) {\n                    icon.classList.add('correct');\n                }\n            });\n        });\n    };\n\n    // if(!!collection.notes) {\n    //     collection.notes.forEach(n => sp.firstTime = n.time[0]);\n    //     collection.notes = utils.sortBy(collection.notes, 'firstTime', 'asc');\n    // }\n\n    const table = await buildTable(collection, { config, enums: traitEnums, overrideParent: callingParentContainer });\n\n    if(!table.isReady) return;\n\n    userClickHandlers();\n\n    const openSpeciesDescriptionHandler = (collection, species, enableScroll = true, activateYoutubeIcon = true) => {\n\n        try {\n\n            const parent = document.getElementById('insertParent');\n            if(parent) parent.remove();\n\n            const { accordions } = closeOpenAccordions(species.name);\n\n            const activeAccordion = accordions.find(accordion => accordion.dataset.name === species.name);\n            \n            if(activeAccordion) {\n                activeAccordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n\n                if(activateYoutubeIcon) {\n                  const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                        activeYouTubeIcon.classList.add('youtube-green-fg');\n              }\n            }\n\n            // if(activateYoutubeIcon) {\n            //     const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n            //           activeYouTubeIcon.classList.add('youtube-green-fg');\n            // }\n\n            let description = species.description;\n                description = !!description ? description : (species.traits.description && species.traits.description.value) ? species.traits.description.value[0] : '';\n\n            if(description) {\n\n                const id = species.id || species.eolId;\n                const tr = document.querySelector(`#id_${id}`);\n                \n                const td = document.createElement('td');\n\n                const text = document.createElement('div');\n                      text.classList.add('inserted-td');\n                      text.innerHTML = description.replace(/\\r?\\n/g, '<br />');\n\n                td.appendChild(text);\n\n                const insert = document.createElement('div');\n                      insert.classList.add('table-row');\n                      insert.classList.add('species-description');\n                      insert.appendChild(td);\n\n                tr.parentElement.insertBefore(insert, tr.nextSibling);\n\n                const scrollIntoView = (rowHeight, noOfRows) => {\n\n                    const scroll = document.querySelector('.scrollable');\n                    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhStandardBlock').replace('px', ''));\n                    const unit = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vh').replace('px', ''));\n                    const top = (standardBlock * 2) + (rowHeight * (noOfRows - 1)) - ( 2 * unit);\n\n                    scroll.scrollTop = top;\n                };\n\n                if(enableScroll) {\n                    config.isLandscapeMode \n                        ? tr.previousElementSibling.scrollIntoView()\n                        : scrollIntoView(tr.offsetHeight, species.snapIndex);\n                }\n            }\n        } catch(e) {\n          logError(openSpeciesDescriptionHandler, e);\n        }\n    };\n\n    videoHandler.onSpeciesTimeMatch((collection, species) => {\n\n        openSpeciesDescriptionHandler(collection, species);\n        videoHandler.updateVideoPlayer(store.getState().videoPlayer, collection, species);\n        onSpeciesChangeHandler(species);\n    });\n\n    videoHandler.onNoteTimeMatch((collection, note) => {        \n        openNoteHandler(note, videoHandler.getPlayerTime());\n    });\n  };\n\n  init();\n};\n\nlet currentIndex = 0;\n\nconst carouselControlHandler = event => {\n\n    const { collection } = store.getState();\n    \n    let transition = event.target.dataset.transition;\n    let modal = event.target.dataset.modal;\n    let card = event.target.dataset.card;\n    let rank =  event.target.dataset.rank;\n\n    switch(transition) {\n        case 'prev':\n            currentIndex--;\n            currentIndex = currentIndex === -1 ? collection.items.length -1 : currentIndex;\n            break;\n        case 'next':\n            currentIndex++;\n            currentIndex = currentIndex === collection.items.length -1 ? 0 : currentIndex;\n            break;\n    }\n\n    let nextItem = collection.items.find((item,index) => index === currentIndex);\n\n    const parent = document.querySelector(`#${modal} .js-modal-body`);\n    \n    switch(card) {\n        case 'species-card':\n            renderCard(collection, 'MODAL', nextItem, parent, isInCarousel);\n            break;\n        case 'taxon-card':\n            renderTaxonCard(collection, 'MODAL', nextItem, parent, null, rank, isInCarousel);\n            break;    \n    }    \n};\n\nconst prev = document.querySelector('#cardModal .js-prev');\nconst next = document.querySelector('#cardModal .js-next');\n\nif(prev) prev.addEventListener('click', carouselControlHandler);\nif(next) next.addEventListener('click', carouselControlHandler);\n\nconst prevTaxon = document.querySelector('#cardModal .js-prev');\nconst nextTaxon = document.querySelector('#cardModal .js-next');\n\nif(prevTaxon) prevTaxon.addEventListener('click', carouselControlHandler);\nif(nextTaxon) nextTaxon.addEventListener('click', carouselControlHandler);\n\nconst closeOpenAccordions = speciesName => {\n\n    const accordions = Array.from(document.querySelectorAll('.js-accordion'));\n    const openAccordions = accordions.filter(accordion => accordion.dataset.name !== speciesName);\n        \n    openAccordions.forEach(inactiveAccordion => {\n        \n        if (inactiveAccordion.innerHTML.indexOf('fa-chevron-up') > -1) {\n            \n            inactiveAccordion.click();\n            inactiveAccordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${speciesName}\"></i>`;\n            \n            const inActiveYouTubeIcon = inactiveAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                  inActiveYouTubeIcon.classList.remove('youtube-green-fg');\n        }\n    });\n\n    const parent = document.querySelector('.species-table tbody');\n    const currentDescriptions = document.querySelectorAll('.species-description');\n            currentDescriptions.forEach(tr => parent.removeChild(tr));\n\n    return { accordions };\n};","import { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { iconicTaxa, matchIcon } from 'api/snapdragon/iconic-taxa';\n\nimport speciesTemplate from 'ui/screens/lists/species-table-template.html';\n\nexport const buildTable = (collection, args) => {\n\n  try {\n\n    const { config, units, overrideParent } = args;\n\n    const template = document.createElement('template');\n\n    const wide = window.matchMedia(\"(min-width: 1024px)\").matches;\n\n    const getTraitName = (item, units) => {\n        let traitName = '';        \n        let keyTratLinkClass = 'capitalise underline-link js-key-trait-link';\n        item.taxonomy.phylum = item.taxonomy.phylum || '';\n        if(item.taxonomy) {\n            switch(item.taxonomy.phylum.toLowerCase()) {\n                case 'ascomycota':\n                    traitName = item.taxonomy.order.toLowerCase() === 'pezizales'\n                        ? 'how edible'\n                        : 'thallus type';\n                    if(item.taxonomy.order.toLowerCase() === 'pezizales') keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                case 'basidiomycota':\n                    traitName = 'how edible';\n                    keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                default:\n                    traitName = '-';\n            }        \n        } else {\n            keyTratLinkClass = 'js-key-trait-link';\n        }\n        return { traitName, keyTratLinkClass };\n    }\n\n    const getOrderLinkClass = item => {\n        let orderLinkClass;\n        if(item.taxonomy && item.taxonomy.order) {\n            orderLinkClass = item.order\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link';\n        } else { orderLinkClass = 'snap-no-link-btn no-underline-link js-taxon-card-link'; }\n        return orderLinkClass;\n    };\n\n    const getIconicTaxonIcon = item => {\n        let iconicTaxonIcon, hideFungiIcon;\n        if(item.iconicTaxon.toLowerCase() === 'fungi') {\n            iconicTaxonIcon = 'hide';\n            hideFungiIcon = '';\n        } else {\n            iconicTaxonIcon = matchIcon(item.taxonomy, iconicTaxa);\n            hideFungiIcon = 'hide';\n        }\n        return { iconicTaxonIcon, hideFungiIcon };\n    };\n\n    const itemImages = collection.items.map(item => { \n\n        let image = item.images.find(i => i.starred) || utils.shuffleArray(item.images)[0];\n            image = scaleImage(image, imageUseCases.SPECIES_LIST, config);\n\n        const { traitName, keyTratLinkClass } = getTraitName(item, units);\n        const { iconicTaxonIcon, hideFungiIcon } = getIconicTaxonIcon(item);\n\n        const itemImage = {\n            id: item.id,\n            name: item.name,\n            itemName: item.name,\n            genus: item.taxonomy.genus,\n            species: item.taxonomy.species,\n            genusLinkClass: item.genus\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            shortName: itemProperties.trimLatinName(item.name),\n            taxonomy: item.taxonomy,\n            iconicTaxon: item.iconicTaxon,\n            vernacularName: item.vernacularName,\n            snapIndex: item.snapIndex,\n            license: image.license,\n            url: image.url,\n            small: image.small,\n            rightsHolder: image.rightsHolder || 'Public domain',\n            source: image.source,\n            shortName: itemProperties.trimLatinName(item.name),\n            keyTrait: utils.capitaliseFirst(itemProperties.getActiveTrait(item, [{ name: traitName, formatter: trait => trait[0] }])) || '',\n            keyTratLinkClass: keyTratLinkClass,\n            familyLinkClass: item.family\n                                ? 'snap-link-btn underline-link js-taxon-card-link' \n                                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            orderLinkClass: getOrderLinkClass(item),\n            taxonomy: item.taxonomy || { family: '', order: ''},\n            iconicTaxonIcon,\n            hideFungiIcon, \n            hasVideoClassName: !collection.hasVideo ? 'hide-column' : '',\n            hasTaxonClassName: collection.hasVideo ? 'hide-column' : '',\n            provider: image.provider || ''\n        };\n\n        return itemImage;\n    });\n\n    template.innerHTML = speciesTemplate;\n\n    let parent = config.isPortraitMode\n            ? overrideParent\n            : document.querySelector(`.js-species-container[data-container-id=\"${collection.id}\"]`);\n        parent.innerHTML = '';\n\n    renderTemplate({ id: collection.id, itemImages }, template.content, parent);\n\n    const table = parent.querySelector(`table#species_list_id_${collection.id}`);\n\n    const keyTraits = table.querySelectorAll('.js-key-trait-link');\n\n    keyTraits.forEach(vn => {\n        const keyTrait = vn.dataset.keyTrait;\n        const span = document.createElement('span');\n        switch(keyTrait) {                \n            case units.howEdible.CHOICE:\n                span.innerHTML = '<span class=\"icon choice\"></span>';\n                vn.append(span);\n                break;\n            case units.howEdible.EDIBLE:\n                span.innerHTML = '<span class=\"icon edible\"></span>';\n                vn.append(span);\n                break;\n            case units.howEdible.INEDIBLE:\n                span.innerHTML = '<span class=\"icon inedible\"></span>';\n                vn.append(span);\n                break;\n            case units.howEdible.POISONOUS:\n            case units.howEdible.DEADLY:\n                span.innerHTML = '<span class=\"icon toxic\"></span>';\n                vn.append(span);\n                break;\n        }\n    });\n\n    const tbody = table.querySelector('.species-table tbody');\n\n    if(!tbody) return;\n    \n    const caption = document.createElement('caption');\n          caption.innerHTML = `Species in ${collection.name}`;\n          caption.classList.add('visually-hidden');\n\n    const thead = document.createElement('thead');\n\n    table.insertBefore(thead, tbody);\n    table.insertBefore(caption, thead);\n\n    const headerRow = document.createElement('tr');\n          headerRow.classList.add('table-header');\n    const imageHeader = document.createElement('th');\n    const speciesHeader = document.createElement('th');\n    const familyHeader = document.createElement('th');\n    const traitNameHeader = document.createElement('th');\n    const iconicTaxonHeader = document.createElement('th');\n\n    const accordionHeader = document.createElement('th');\n          accordionHeader.classList.add('not-sortable');\n\n    speciesHeader.innerHTML = '<span>Species</span';\n    familyHeader.innerHTML = '<span>Family</span><span>Order</span>';\n    traitNameHeader.innerHTML = '<span></span>';\n    iconicTaxonHeader.innerHTML = '<span><i class=\"fas fa-sliders-h\"></i></span>';\n    imageHeader.innerHTML = overrideParent ? '' : '<span><i class=\"fas fa-undo\"></i></span>';\n    if(wide) {        \n        headerRow.appendChild(imageHeader);\n        headerRow.appendChild(speciesHeader);    \n        headerRow.appendChild(familyHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    } else {\n        headerRow.appendChild(imageHeader);    \n        headerRow.appendChild(speciesHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    }\n    if(collection.behaviour === 'static') {\n        headerRow.appendChild(accordionHeader);\n    }\n\n    if(!tbody.querySelector('.table-header')) {\n        thead.appendChild(headerRow);\n    }\n\n    const sortableCalback = () => {};\n\n    utils.makeSortable(document, sortableCalback, wide);\n\n    return new Promise(resolve => resolve({isReady: true}));\n\n  } catch(e) {\n    logError('buildTable', e);\n    return new Promise(resolve => resolve({isReady: false}));\n  }\n}\n","import { clone } from 'ramda';\n\nimport { actions } from 'redux/actions/action-creators';\n\nconst onSpeciesTimeMatchListeners = [];\nconst onNoteTimeMatchListeners = [];\n\nconst onSpeciesTimeMatch = listener => {    \n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n    onSpeciesTimeMatchListeners.push(listener);\n};\n\nconst onNoteTimeMatch = listener => {    \n    while(onNoteTimeMatchListeners.length > 0) {\n        onNoteTimeMatchListeners.pop();\n    }\n    onNoteTimeMatchListeners.push(listener);\n};\n\nconst onSpeciesPlayRequestListeners = [];\n\nconst onSpeciesPlayRequest = listener => {\n    onSpeciesPlayRequestListeners.push(listener);\n};\n\nconst onPlayerReadyListeners = [];\nconst onPlayerStateChangeListeners = [];\n\nconst subscribeToPlayerStateChange = listener => {\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n    onPlayerStateChangeListeners.push(listener);\n};\n\nlet player, isPlayerReady = false;\n\nconst readyPlayer = () => {\n\n    const onPlayerReady = event => {\n        player = event.target;\n        isPlayerReady = true;\n    };\n    \n    const onPlayerStateChange = event => {\n        player = event.target;\n        if(player) {\n            onPlayerStateChangeListeners.forEach(listener => listener(player));\n        }\n     };\n    \n    new YT.Player('embedded-video', {\n        playerVars: { 'autoplay': 1 },\n        events: {\n        'onReady': onPlayerReady,\n        'onStateChange': onPlayerStateChange\n        }\n    });\n};\n\nconst playVideoFrom = time => {\n\n    if(! typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n    if(! typeof player.seekTo === 'function' || player.seekTo === undefined) return;\n\n    player.seekTo(time + 1);\n    const state = player.getPlayerState();\n    if(state === states[0].key || state === states[2].key) {\n        player.playVideo();\n    }\n};\n\n// -1  unstarted\n//  0  ended\n//  1  playing\n//  2  paused\n//  3  buffering\n//  5  video cued\n\nconst states = [ { key: -1, value: 'unstarted' }, { key: 1, value: 'playing' }, { key: 2, value: 'paused' }, { key: 3, value: 'buffering' } ];\n\nconst setVideoState = (videoPlayer, lesson) => {\n\n    let state = '';\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === lesson.id);\n    \n    if(activeLesson) {\n        if(lesson.id === activeLesson.collectionId) {\n        state = activeLesson.pausedAt \n                  ? activeLesson.speciesName !== ''\n                    ? `Video paused at ${activeLesson.speciesName}`\n                    : 'Video paused'\n                  : ''; \n        }\n    } else {\n        state = '';\n    }\n\n    return state;\n\n};\n\nconst isVideoPlayerReady = videoId => {\n    if(isPlayerReady) {\n        const doIdsMatch = videoId === player.getVideoData().video_id;\n        return isPlayerReady && doIdsMatch;\n    } else {\n        return false;\n    }\n};\n\nconst destroyPlayer = () => {\n\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n\n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n\n    if (!player) {\n\n      } else {\n        player.stopVideo();\n        player.destroy();\n        player = null;  // Clear out the reference to the destroyed player\n      }\n};\n\nconst updateVideoPlayer = (videoPlayer, collection, species) => {\n\n  const newPlayerTime = Math.floor(player.getCurrentTime());\n        \n  const playerRecords = clone(videoPlayer) || [];\n  \n  let activeLesson = playerRecords.find(p => p.collectionId === collection.id); \n  \n    if(activeLesson) {        \n      if(activeLesson.pausedAt === newPlayerTime) return; // user pauses lesson, and then resumes\n      // user jumps to another point in the lesson\n      activeLesson.speciesName = species ? species.name : activeLesson.speciesName || '';\n      activeLesson.pausedAt = species && species.time ? species.time[0] : newPlayerTime;\n      activeLesson.playAt = newPlayerTime;\n    } else {\n      activeLesson = { \n        collectionId: collection.id,\n        speciesName: '',\n        pausedAt: newPlayerTime,\n        playerRecords: newPlayerTime,\n      };\n      playerRecords.push(activeLesson);\n  } \n\n  actions.boundUpdateVideoPlayer(playerRecords);\n};\n\nconst getPlayerTime = () => {\n    return Math.floor(player.getCurrentTime());\n};\n\nexport const videoHandler = {\n    readyPlayer,\n    onSpeciesTimeMatchListeners,\n    onNoteTimeMatchListeners,\n    onSpeciesTimeMatch,\n    onNoteTimeMatch,\n    onSpeciesPlayRequestListeners,\n    onSpeciesPlayRequest,\n    onPlayerReadyListeners,\n    subscribeToPlayerStateChange,\n    playVideoFrom,\n    states,\n    setVideoState,\n    destroyPlayer,\n    isVideoPlayerReady,\n    getPlayerTime,\n    updateVideoPlayer\n};","export const renderMediaPlayers = collection => {\n\n    let isAudio = true;\n\n    const mediaPlayers = isAudio \n                ? document.querySelectorAll('.media-audio-players')\n                : document.querySelectorAll('.media-video-players');\n};","import { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport stripTemplate from 'ui/screens/multichoice/horizontal-strips.html';\n\nexport const renderHorizontalStrips = collection => {\n\n    const { config, lesson, layout } = store.getState();\n\n    const item = collection.nextItem || collection.items[collection.itemIndex];\n\n    const binomial = layout.provider.name || layout.provider.taxon;\n    const statement = layout.provider.statement;\n    const providerQuestion = layout.provider.question;\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial, question: '', help: '', term: '', className: '', headerClassName: '', bonus: undefined, statement, providerQuestion });\n\n    const template = document.createElement('template');\n          template.innerHTML = stripTemplate;\n\n    let answers = utils.shuffleArray([ ...layout.provider.answers, layout.provider.answer ]);\n\n    answers = answers.map((answer, index) => {\n        return {\n            term: answer,\n            index\n        }\n    });\n\n    renderTemplate({ answers }, template.content, parent);\n\n    document.querySelector('.js-test-card-question').classList.add('calendar-block');\n    document.querySelector('.js-test-card-question').classList.remove('standard-block');\n\n    const strips = document.querySelectorAll('.js-rptr-strips .strip');\n    const taxon = { name: item.taxonomy.family, binomial: item.name, question: layout.provider.answer.term };\n\n    const test = { itemId: item.id, items: strips, taxon, binomial: item.name, \n        questionCount: lesson.questionCount, vernacularName: item.vernacularName,\n        layoutCount: lesson.layoutCount, points: layout.points, clue: '', \n        answerIndex: answers.findIndex(a => a.term === layout.provider.answer), answers, \n        questionText: providerQuestion, statement };\n\n    scoreHandler('strip', test, null, config);\n};","import { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\n\nexport const renderMixedSpecimenQuestion = (collection, bonusLayout) => {\n\n    snapLog('renderMixedSpecimenQuestion', collection.name);\n\n    renderMixedSpecimenImagesAndQuestion(collection);\n  };\n","import { take, contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nconst onTraitsReadyListeners = [];\nconst onTraitsReady = listener => {\n    onTraitsReadyListeners.push(listener);\n};\n\nconst onTraitClickedListeners = [];\nconst onTraitClicked = listener => {\n    onTraitClickedListeners.push(listener);\n};\n\nconst getMatchingTrait = (layoutTraits, traitValues) => {\n\n    try {\n        let requiredTraitValues, trait;\n\n        for (let [key, obj] of Object.entries(traitValues)) {\n            let t;\n            layoutTraits.map(t => { \n                if(t.toLowerCase() === utils.toCamelCase(key).toLowerCase()) {\n                    requiredTraitValues = obj.value.map(v => v.toLowerCase());\n                    trait = t;\n                }\n            }) \n        };\n    \n        return { requiredTraitValues, trait };\n    } catch (e) {\n      logError(getMatchingTrait, e);\n      return { requiredTraitValues: [], trait: {}};\n    }\n\n};\n\nconst fetchTraits = async (trait, requiredTraitValues, required) => {\n\n    const glossary = store.getState().glossary;\n\n    let traits = await firestore.getTraitDefinitions(glossary, required, trait);\n        traits.forEach(t => {\n            t.term = t.term.toLowerCase();\n            if(t.alt) t.alt = t.alt.toLowerCase();\n            return t;\n        });\n\n    if(!requiredTraitValues) return { traits: null, requiredTraits: null};\n\n    let multiples = traitsHandler.getNMultiplesFromArray(traits.map(t => t.term), requiredTraitValues.length);\n\n        multiples = multiples.filter(multiple => {\n            return !traitsHandler.doArraysHaveSameValues(multiple, requiredTraitValues);\n        });\n        \n        let requiredTraits = traits.filter(t => contains(t.term, requiredTraitValues));\n        \n        multiples = utils.shuffleArray([ ...take(5, multiples), requiredTraitValues ]);\n\n        traits = multiples.map(multiple => {\n            return multiple.map(term => traits.find(trait => trait.term === term));\n        });\n\n    onTraitsReadyListeners.forEach(listener => listener(traits, requiredTraits));\n\n    return { traits, requiredTraits };\n};\n\nconst pendingScore = {};\n\nconst callback = (score, scoreUpdateTimer) => {\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n          continueLessonBtn.disabled = false;\n    pendingScore.score = score;\n    pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    \n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n};\n\nconst onClickTileHandler = (tile, requiredTraits, tiles) => {\n\n    const { config, lesson, collection } = store.getState();\n\n    const item = collection.nextItem;\n\n    tile.addEventListener('click', e => {\n        \n        const tile = e.currentTarget;\n        const traits = Array.from(tile.querySelectorAll('img')).map(t => t.dataset.term);\n        const images = Array.from(tiles).map(t => t.querySelector('img').dataset);\n        const answers = images.map(i => { return { value: i.term, url: i.url } })\n        const test = {\n            points: 0,\n            binomial: item.name, \n            trait: true,\n            question: requiredTraits.map(trait => trait.term),\n            answer: traits,\n            questionCount: lesson.questionCount, \n            layoutCount: lesson.layoutCount,\n            answers,\n            questionText: 'Match the trait'\n        }\n        scoreHandler('image-match', test, callback, config);\n\n        tiles.forEach(tile => {\n            if(!traitsHandler.doArraysHaveSameValues(Array.from(tile.querySelectorAll('img')).map(img => img.dataset.term), requiredTraits.map(trait => trait.term))) {\n                tile.querySelectorAll('img').forEach(img => img.classList.add('desaturate'));\n            }\n        });\n})};\n\nexport const mixedTraitHandler = {\n    getMatchingTrait,\n    fetchTraits,\n    onTraitsReady,\n    onTraitClicked,\n    onClickTileHandler\n};","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\n\nimport questionTemplate from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html';\n\nexport const renderMixedTraitQuestion = collection => {\n\n    const init = async () => {\n\n        const { layout, collection, config } = store.getState();\n\n        const template = document.createElement('template');\n              template.innerHTML = questionTemplate;\n        \n        const item = collection.nextItem;\n        const question = 'Match the trait';\n        const help = `Select the correct ${utils.fromCamelCase(layout.trait)}`;\n    \n        const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });              \n\n        renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n    };\n\n    init();\n};","import { take, contains, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nimport stripTemplate from 'ui/screens/multichoice/multi-strips-template.html';\nimport stripWithImageTemplate from 'ui/screens/multichoice/multi-strips-with-images.html';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\n\nexport const renderMultiStrips = (collection, bonus, args) => {\n\n    try {\n\n        const { config, lesson, layout, userAction } = store.getState();\n\n        if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n\n        const item = collection.nextItem || collection.items[collection.itemIndex];\n\n        const taxon = matchTaxon(item.taxonomy, iconicTaxa);                        \n    \n        const screen = bonus ? bonus.screen || layout.screens[1] : layout.screens[1];\n\n        let defaultQueryLimit = 6, defaultLanguage = 'en';\n\n        defaultLanguage = config.language;\n\n        const init = async () => {\n\n            const render = (answer, answers, overrides) => {\n\n                const vernacularName = (overrides && overrides.vernacularName !== undefined) ? overrides.vernacularName : item.vernacularName;\n                const binomial = (overrides && overrides.binomial !== undefined) ? overrides.binomial : item.name;\n                const question = (overrides && overrides.question) ? overrides.question : 'Match the name';\n                const helpDefault = config.isLandscapeMode ? '(Select the name below.)' : '(Tap on the name below.)';\n                const help = (overrides && overrides.help !== undefined) ? overrides.help : helpDefault;\n                const term = (overrides && overrides.term !== undefined) ? overrides.term : '';\n                const className = (overrides && overrides.className !== undefined) ? overrides.className : '';\n                const headerClassName = (overrides && overrides.headerClassName !== undefined) ? overrides.headerClassName : '';\n                const clue = (overrides && overrides.clue !== undefined) ? overrides.clue : null;\n                \n                const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question, help, term, className, headerClassName, bonus });\n\n                const template = document.createElement('template');\n                      template.innerHTML = answer.img ? stripWithImageTemplate : stripTemplate;\n\n                answers.forEach((answer, index) => {\n                    answer.index = index;\n                    answer.name = answer.name || '';\n                    answer.names = answer.names ? answer.names.join(', ') : '';\n                });\n\n                renderTemplate({ answers }, template.content, parent);\n\n                const strips = document.querySelectorAll('.js-rptr-strips .strip');\n\n                if(overrides.italicise) strips.forEach(strip => strip.classList.add('binomial'));\n\n                const taxon = { name: item.taxonomy.family, binomial: item.name, question: answer.term };\n\n                const test = { \n                    itemId: item.id, \n                    items: strips, \n                    taxon, binomial: \n                    item.name, \n                    questionCount: lesson.questionCount, \n                    layoutCount: lesson.layoutCount, \n                    points: layout.points, \n                    clue, \n                    answerIndex: answers.findIndex(a => a.term === answer.term),\n                    questionText: question\n                };\n                        \n                scoreHandler('strip', test, null, config);\n            }\n\n            if(screen.name === 'species-scientifics') {\n\n                const renderBinomialQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.name };\n                        answers = await getPoolItems(collection, 6);\n                        answers = take(8, answers).filter(s => s.name.toLowerCase() !== item.name.toLowerCase()).map(s => s.name);\n                        answers = take(5, answers);\n                        answers.push(item.name);\n                        answers = answers.map(a => { return { term: a } });\n                        answers = utils.shuffleArray(answers);\n                        \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    }\n\n                    await buildQuestion();\n\n                    render( answer, answers, { binomial: 'Latin name', question: 'What\\'s the latin name?', help, italicise: true });\n                };\n\n                renderBinomialQuestions();\n            }\n\n            if(screen.name === 'species-vernaculars') {\n\n                const renderVernacularQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.vernacularName };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => itemProperties.getVernacularName(a, config, false, 'vernacularName', defaultLanguage));\n                        answers = take(5, answers.filter(a => a !== item.vernacularName));\n                        answers = utils.shuffleArray([item.vernacularName, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: 'Common name', question: `What's the common name?`, help });\n                };\n\n                renderVernacularQuestions();\n            }\n\n            if(screen.name === 'species-identification') {\n\n                const renderIdQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.quickId };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => a.quickId);\n                        answers = take(5, answers.filter(a => a !== item.quickId));\n                        answers = utils.shuffleArray([item.quickId, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: item.vernacularName, question: 'Which description fits?', help });\n                };\n\n                renderIdQuestions();\n            }\n\n            if(screen.name === 'family-strips') {\n\n                const random = utils.getRandomInt(2);\n\n                const type = random === 0 ? 'identification' : 'summary';\n\n                const number = config.isPortraitMode ? 4 : 4;\n\n                const families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                const term = item.family[type] || item.family.descriptions[0][type];\n                const answer = { term, name: item.family.name } || { type: { term: `Missing ${type}`}, name: item.family.name };\n                const alternativeFamilies = take(number-1, take(number, utils.shuffleArray(families))).filter(f => f.name.toLowerCase() !== item.taxonomy.family.toLowerCase());\n                let alternatives = alternativeFamilies.filter(f => f[type] && f[type] !== undefined && f[type] !== '').map(f => { return { type: f[type], name: f.name, names: f.names } });\n                    alternatives = alternatives.map(a => { return { term: a.type, name: a.name, names: a.names } });\n                let answers = utils.shuffleArray([answer, ...alternatives]);                    \n                \n                const help = config.isLandscapeMode ? '(Select the description below.)' : '(Tap on the description.)';\n\n                render(answer, answers, { question: 'Match species family', help, clue: item.taxonomy.family });\n            }\n\n            if(screen.name === 'epithet') {\n                \n                const epithet = layout.epithet.latin.join(', ');\n                const number = config.isPortraitMode ? 6 : 6;\n                \n                const epithets = await firestore.getEpithets();\n\n                let alternatives = take(number-1, utils.shuffleArray(epithets)).filter(e => !contains(e.latin, epithet));\n                    alternatives = alternatives.map(e => e.en.join(', '));\n                    alternatives = alternatives.map(a => { return { term: a } });\n                let answer = epithets.find(e => e.latin.join(', ').toUpperCase() === epithet.toUpperCase());\n                    answer = answer ? answer[config.language][0] : epithet;\n                    answer = { term: answer };\n                \n                const answers = utils.shuffleArray([answer, ...alternatives]);\n                \n                if(config.isLandscapeMode) {            \n                    render(answer, answers, { question: layout.epithet.latin.join(', '), help: '(Match the latin term)' });\n                } else {\n                    render(answer, answers, { question: 'Match latin word', help: '', vernacularName: '', binomial: '', term: layout.epithet.latin.join(', ') });\n                }\n            }\n\n            if(screen.name === 'definition') {\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n            }\n\n            if(screen.name === 'family') {\n\n                const indices = config.isPortraitMode ? [5,6] : [5,6];\n\n                let families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                let family = item.taxonomy.family;\n                let otherFamilies = take(indices[0], take(indices[1], utils.shuffleArray(families)).filter(family => family.name.toLowerCase() !== item.taxonomy.family.toLowerCase()));\n                let otherFamiliesLatinNames = otherFamilies.map(family => family.name);\n                let otherFamiliesCommonNames = otherFamilies.map(of => of.names[0]);\n                \n                let answer, answers;\n\n                const random = utils.getRandomInt(2);\n\n                switch(random) {            \n                    case 0:\n                        answer = { term: item.family.vernacularName };\n                        otherFamiliesCommonNames = otherFamiliesCommonNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesCommonNames]);\n                        if(answer === undefined) console.log('Missing question - case 0 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name' });\n                    break;\n                    case 1:\n                        answer = { term: family };\n                        otherFamiliesLatinNames = otherFamiliesLatinNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesLatinNames]);\n                        if(answer === undefined) console.log('Missing question - case 1 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name', italicise: true });\n                    break;\n                } \n            }\n\n            if(screen.name === 'trait-property') {\n\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n\n                if(bonus.overrides.trait && bonus.overrides.trait.name === 'song') {\n\n                        const renderBirdsong = async () => {\n\n                            const parent = document.querySelector('.js-question-help');\n                                  parent.innerHTML = '';\n\n                            const template = document.createElement('template');\n                                  template.innerHTML = audioMediaTemplate;\n\n                            const xcID = bonus.overrides.trait.value[0];\n\n                            const mp3 = await firestore.getBirdsong(xcID);\n                            \n                            renderTemplate({ mp3, title: item.name }, template.content, parent);\n\n                            const header = document.querySelector('.js-test-card-question');\n                                  header.classList.remove('standard-block');\n                                  header.classList.add('double-standard-block');\n\n                            const content = document.querySelector('.js-test-card-content');\n                                  content.classList.add('test-card-content-less-standard-block');\n                        };\n\n                        renderBirdsong();\n                }\n            }\n\n            if(layout.name === 'mixed-trait-images') {\n\n                // portrait only - redirect from renderMixedTraitImages\n\n                const { traits, requiredTraits, item, question, help } = args;\n\n                const answers = flatten(traits);\n                const answer = requiredTraits[0];\n\n                render(answer, answers, { binomial: item.name, question, help, italicise: true});\n\n            }\n        }\n\n        init();\n\n    } catch(e) {\n        console.error('Crashed out somwhere on multi-strips with this error: ', e);        \n    }\n};","import { take, clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\n\nimport mixedSpecimenTemplate from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html';\n\nexport const renderMixedSpecimenImagesAndQuestion = collection => {\n\n    const { config, lesson, layout, score } = store.getState();\n\n    const item = clone(collection.nextItem);\n\n    if(!item) return;\n\n    const init = async () => {\n\n        // snapLog('renderMixedSpecimenImagesAndQuestion runs twice, once from renderMixedSpecimenQuestion, both triggered by same collection change');\n\n        const getPortraitImages = images => {\n            const multiImages = utils.flatten(images.map(image => { \n                const images = image.srcs.filter(i => i.starred).length === 0 ? take(1, utils.shuffleArray(image.srcs)) : image.srcs.filter(i => i.starred);\n                const item = { name: image.itemName, images };\n                return prepImagesForCarousel(item, config, imageUseCases.MIXED_SPECIMENS);\n            }));\n            return multiImages;\n        }\n\n        const items = await getPoolItems(collection);\n\n        let images = items.map((item, index) => { \n            return { index: index + 1, srcs: item.images, itemName: item.name };\n        });\n\n        images = getPortraitImages(images);\n\n        let question = 'Identify this species';\n\n        let parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help: '(Click on the matching photo.)', term: '' });\n            parent.innerHTML = '';\n            \n        const template = document.createElement('template');\n              template.innerHTML = mixedSpecimenTemplate;\n        \n        renderTemplate({}, template.content, parent);\n\n        parent = document.querySelector('.js-test-card-container-images');\n\n        imageSlider({ config, images: utils.shuffleArray(images), parent, identifier: 'mixed-specimens' });\n\n        const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n        const boundScore = {};\n\n        const answers = [];\n\n        images.forEach(image => {\n            answers.push({ value: image.itemName, url: scaleImage(image).small });\n        });\n\n        document.querySelectorAll('#imageSlider_mixed-specimens .carousel-item img').forEach(img => {\n            \n            img.addEventListener('click', event => {\n\n                const layer = event.target;\n                const selectedName = layer.dataset.itemName;\n                const question = item.name;\n                const answer = selectedName || 'incorrect';\n                const isCorrect = answer === question;\n                const answerIcon = document.createElement('span');\n                      answerIcon.innerHTML = isCorrect \n                            ? '<span class=\"icon\"><i class=\"fas fa-check-circle\"></i></span>'\n                            : '<span class=\"icon\"><i class=\"fas fa-times-circle\"></i></span>';\n\n                const test = { ...score, itemId: item.id, \n                    question, answer, binomial: item.name, \n                    questionCount: lesson.questionCount, layoutCount: lesson.layoutCount, \n                    points: layout.points,\n                    answers,\n                    questionText: 'Identify this species',\n                    vernacularName: itemProperties.getVernacularName(item, config),\n                };\n\n                const callback = (score, scoreUpdateTimer) => {\n                    boundScore.score = score;\n                    boundScore.scoreUpdateTimer = scoreUpdateTimer;\n                    continueLessonBtn.disabled = false;          \n                    if(!score.success) {\n                        const wrongItem = items.find(item => item.name === score.answer);\n                        const vernacularName = itemProperties.getVernacularName(wrongItem, config);\n                        const name = vernacularName || score.answer;\n                    }\n                };\n\n                scoreHandler('image-match', test, callback, config);  \n            });\n        });\n\n        continueLessonBtn.addEventListener('click', event => {\n\n            if(!score.success) {            \n                setTimeout(() => {\n                    window.clearTimeout(boundScore.scoreUpdateTimer);\n                    bindScore(boundScore.score);\n                });\n            } else {\n                window.clearTimeout(boundScore.scoreUpdateTimer);\n                bindScore(boundScore.score);\n            }\n\n        });\n    };\n\n    try {\n      init();\n    } catch(e) {\n      logError('renderMixedSpecimenImagesAndQuestion init', e);\n    }\n};\n","import { store } from 'redux/store';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nexport const renderHistory = history => {\n            \n    const { collection} = store.getState();\n\n    renderLessons();\n}    ","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getLessonScores = (history, lesson, stateScore, savedScore) => {\n\n      if(!history) return [ stateScore ];\n\n      const historyIsUpToDate = contains(stateScore.binomial, history.scores.map(s => s.binomial));\n\n      let scores = [];\n\n      if(lesson.isNextRound) {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : stateScore.total === 0\n                        ? history.scores\n                        : [...history.scores, stateScore];\n      } else {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : [...history.scores, stateScore];\n      }\n      \n      return scores;\n};\n\nconst getSummaryRows = (rows) => {\n      rows = rows.map((r, i) => {\n            const _r = {\n                  ...r, id: `${utils.toCamelCase(r.binomial)}_${i}`, question: r.question.term ? r.question.term : r.question, \n                        answers: r.answers.map(a => { return getAnswer(a, r); })\n            };\n            return _r;\n      });\n      return rows;\n};\n\nexport const scoreSummaryHandler = {\n    getLessonScores,\n    getSummaryRows\n}\n\nfunction getAnswer(a, r) {\n      \n      const isObj = typeof a === 'object';\n\n      const value = isObj ? a.value || a.term : a;\n      const hasImage = isObj && !!a.url;\n      const url = isObj ? a.url : '';\n      const question = r.question.term || r.question;\n      const isTrue = \n                  value !== \"\" && \n                          (utils.parseToLowerCase(value) === utils.parseToLowerCase(question))\n                        // || contains(value, r.answer))\n\n      const isWrongAnswer = !isTrue && utils.parseToLowerCase(value) === utils.parseToLowerCase(r.answer);\n      const name = isObj ? a.name || '' : '';\n      \n      const answer = {\n            value,\n            url,\n            hasImage,\n            isTrue,\n            isWrongAnswer,\n            name\n      };\n      return answer;\n}\n","import { enums } from 'ui/helpers/enum-helper';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { scoreSummaryHandler } from 'ui/screens/progress/score-summary-handler';\n\nimport summaryTemplate from 'ui/screens/progress/score-summary-template.html';\nimport summaryRowTemplate from 'ui/screens/progress/score-summary-row-template.html';\nimport summaryNoRowTemplate from 'ui/screens/progress/score-summary-no-row-template.html';\n\nexport const renderScoreSummary = (lessonId, summaryContainer) => {\n\n      const init = () => {\n\n            const { lessons, score: stateScore, userAction } = store.getState();\n\n            const { collection, history, config, score: savedScore } = lessons.length > 0\n                        ? !!lessons.find(l => l.collection.id === parseInt(lessonId))\n                              ? lessons.find(l => l.collection.id === parseInt(lessonId))\n                              : store.getState()\n                        : store.getState();\n      \n            const { lesson } = store.getState();\n      \n            if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n      \n            const template = document.createElement('template');\n                  template.innerHTML = summaryTemplate;\n      \n            const parent = config.isLandscapeMode\n                        ? summaryContainer || document.querySelector('#lessonModal .js-modal-text')\n                        : DOM.rightBody ;\n                  parent.innerHTML = '';\n            \n            renderTemplate({ collection, lesson }, template.content, parent);\n\n            const actionLinks = document.querySelectorAll('.js-continue-link');\n\n            setTimeout(() => {\n              actionLinks[0].focus();\n            }, 250);\n\n            if(summaryContainer) {\n                  actionLinks.forEach(link => link.classList.add('snap-inactive'));\n            }\n\n            if(lesson.layoutName === 'summary') {\n                  const progressLink = document.querySelector('.js-review-progress');\n                        progressLink.innerHTML = '';\n            }\n            \n            let scores = scoreSummaryHandler.getLessonScores(history, lesson, stateScore, savedScore).reverse();\n                scores.forEach(s => renderScoreSummaryRow(scores, s, config));\n      \n            const handleContinueLesson = async e => {\n                e.preventDefault();\n                import('ui/screens/lists/lesson-state-handler').then(module => {\n                  module.lessonStateHandler.changeRequest({\n                    requestType: enums.lessonState.NEXT_ROUND,\n                    requestArgs: {\n                      id: lessonId,\n                      lesson: { ...lesson, isNextRound: true }\n                    }\n                  });\n                });\n            };\n      \n            const handleNewLesson = async event => {                   \n                  await lessonStateHelper.purgeLesson();\n            };\n      \n            if(lesson.isLessonComplete) {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.innerHTML = 'START NEW LESSON';\n                        actionLink.addEventListener('click', handleNewLesson, { once: true });\n                  });\n            } else {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.addEventListener('click', handleContinueLesson, { once: true });\n                  });\n            }\n\n            window.addEventListener('keydown', e => {\n              if(e.key === 'Enter') {\n                handleContinueLesson(e);\n              }                  \n            }, { once: true });\n      };\n\n      init();\n}\n\nconst renderScoreSummaryRow = (scores, s, config) => {\n    \n      const template = document.createElement('template');\n            template.innerHTML = summaryRowTemplate;\n\n      const parent = document.querySelector('.js-score-summary-rows');\n            \n      if(s.total === 0) {\n            parent.innerHTML = '';\n            template.innerHTML = summaryNoRowTemplate;            \n            renderTemplate({ }, template.content, parent);\n            return;\n      }\n      let rows = [ ...s.passes, ...s.fails ];\n          rows = scoreSummaryHandler.getSummaryRows(rows);          \n\n      const vernacularName = s.vernacularName || itemProperties.getVernacularName(s.binomial, config);\n\n      renderTemplate({ vernacularName, binomial: s.binomial, rows, score: `${s.correct}/${s.total}` }, template.content, parent);\n\n      if(scores.length > 0) {\n            const noQuestionsText = parent.querySelector('.js-no-questions');                  \n            if(noQuestionsText) {\n                  noQuestionsText.innerHTML = '';\n            }\n      }\n};","import { subscription } from 'redux/subscriptions';\nimport { store } from 'redux/store';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nexport const renderSummary = history => {\n\n    subscription.remove(subscription.getByName('renderSummary'));\n\n    const { collection } = store.getState();\n\n    renderScoreSummary(collection.id);\n\n    return;\n};\n\n","import { store } from 'redux/store';\nimport { renderInput } from 'ui/screens/text-entry/text-entry';\n\nexport const renderTextEntry = (collection) => {\n\n    const { layout } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-entry')[0];\n    const item = collection.nextItem;\n    \n    if(!screen) return;\n\n    item.vernacular = item.vernacularName;\n\n    const q = screen.taxon === 'name' ? item.name : \n                    screen.taxon === 'vernacular' \n                        ? item.vernacularName\n                        : item.taxonomy[screen.taxon];\n\n    const question = { binomial: item.name, species: item.taxonomy.species, genus: item.taxonomy.genus, taxon: screen.taxon, question: q, common: item.vernacularName };\n\n    renderInput(screen, question);\n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, continueLessonHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport completeTemplate from 'ui/screens/text-entry/text-complete-template.html';\n\nexport const renderCompleteText = (collection) => {\n\n    const item = collection.nextItem;\n\n    const { layout, config, lessonPlan } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-complete')[0];\n    \n    if(!screen) return;\n\n    let question, genus, species, givenTaxon, vernacularName, binomial, questionTxt;\n\n    vernacularName = item.vernacularName;\n    binomial = item.name;\n    questionTxt = 'Complete the latin name';\n\n    switch(screen.type) {\n        case 'text-complete-genus':\n            question = item.taxonomy.genus;\n            genus = '---';\n            species = item.taxonomy.species;\n            binomial = `--- ${item.taxonomy.species}`;\n            givenTaxon = 'genus';\n            questionTxt = 'Select genus name';\n            break;\n        case 'text-complete-species':\n            question = item.taxonomy.species;\n            genus = item.taxonomy.genus;\n            species = '---';\n            binomial = `${item.taxonomy.genus} ---`;\n            givenTaxon = 'species';\n            questionTxt = 'Select species name';\n            break;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help: '(Select the name below.)', term: '' });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = completeTemplate;\n\n    const numerOfItems = config.isPortraitMode ? 4 : 5;\n\n    // broaden pool to species matching iconic taxon\n    const itemTaxons = collection.items.map(item => {\n        switch(givenTaxon) {\n            case 'genus':\n                return item.taxonomy.genus;\n            case 'species':\n                return item.taxonomy.species;\n            default:\n                return item.name;\n        }\n    });\n    const pool = take(numerOfItems, utils.shuffleArray(itemTaxons).filter(utils.onlyUnique).filter(itemTaxon => itemTaxon !== item.taxonomy[givenTaxon])).filter(item => item !== undefined);\n    pool.push(item.taxonomy[givenTaxon]);\n\n    let answers = utils.shuffleArray(pool);\n\n    answers = answers.map((answer, index) => {\n      return {\n        index,\n        value: answer\n      }\n    });\n\n    renderTemplate({ genus, species, answers }, template.content, parent);\n\n    setTimeout(() => {\n      const block = document.querySelectorAll('.pool .block')[0];\n            block.focus(); \n    },1000);\n\n    const score = { itemId: item.id, binomial: item.name, question: item.taxonomy[givenTaxon], callbackTime: config.callbackTime, layoutCount: lessonPlan.layouts.length, points: layout.points };\n\n    const callback = (score, scoreUpdateTimer, config) => {\n\n        const iconColour  = score.success ? 'answer-box-success' : 'answer-box-alert';\n\n        const answerIcon = score.success\n            ? `<span class=\"icon\"><i class=\"fas fa-check\"></i></span>`\n            : `<span class=\"icon\"><i class=\"fas fa-times\"></i></span>`;\n\n        const response = score.success ? `Correct` : `Incorrect`;\n        \n        document.querySelector('.js-txt-question').innerHTML = `<div class=\"${iconColour}\"><span>${answerIcon}</span><span>${ response }</span</div>`;        \n\n        document.querySelectorAll('.block span').forEach(block => {\n            if(block.innerText === score.answer) {\n                score.success\n                    ? block.parentElement.classList.add('snap-success')\n                    : block.parentElement.classList.add('snap-alert');\n            }\n            if(block.innerText === score.question) {\n                block.parentElement.classList.add('snap-success');\n            }\n        });\n\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    };\n\n    document.querySelectorAll('.js-pool button').forEach(answer => {\n        answer.addEventListener('click', e => {\n          e.preventDefault();\n          const button = e.target;\n          const answer = button.innerText;\n          if(question === item.taxonomy.species) {\n              document.querySelector('.species').innerText = answer;                \n          } else {\n              document.querySelector('.genus').innerText = answer;\n          }\n          score.answer = answer;\n          score.answers = answers;\n          score.questionText = questionTxt;\n          scoreHandler('block', score, callback, config);\n        });\n    });    \n};\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport textEntryTemplate from 'ui/screens/text-entry/text-entry-templates.html';\nimport textEntryPortraitTemplate from 'ui/screens/text-entry/text-entry-portrait-templates.html';\n\nexport const renderInput = (screen, question) => {\n\n    const { lessonPlan, collection, config, layout } = store.getState();\n\n    const item = collection.nextItem;\n\n    let vernacularName, binomial, questionTxt;\n\n    questionTxt = 'Complete the latin name';\n\n    switch(question.taxon) {\n        case 'genus': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ${question.species}`;\n            questionTxt = 'Enter the genus name';\n            break;\n        case 'species': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `${question.genus} ---`;\n            questionTxt = 'Enter the species name';\n            break;\n        case 'name': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ---`;\n            questionTxt = 'Enter full latin name';\n            break;\n        case 'vernacular':\n            vernacularName = '--- ---';\n            binomial = item.name;\n            questionTxt = 'Enter the common name';\n            break;\n    }\n\n    const help = config.isLandscapeMode ? '(Complete the name below.)' : '(Scroll to see more images.)';\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help, term: '' });\n\n    const template = document.createElement('template');\n          template.innerHTML = config.isLandscapeMode ? textEntryTemplate : textEntryPortraitTemplate;\n    \n    renderTemplate({ }, template.content, parent);\n\n    const inputTxt = document.querySelector('.js-txt-input');\n    const helpTxt = document.querySelector('.js-help-txt');\n\n    switch(question.taxon) {\n        case 'genus': \n            inputTxt.setAttribute('placeholder', 'Enter genus name');\n            helpTxt.innerHTML = `--- ${question.species}`;\n            break;\n        case 'species': \n            inputTxt.setAttribute('placeholder', 'Enter species name');\n            helpTxt.innerHTML = `${utils.capitaliseFirst(question.genus)} ---`;\n            break;\n        case 'name': \n            inputTxt.setAttribute('placeholder', 'Enter latin name');\n            helpTxt.innerHTML = `--- ---`;\n            break;\n        case 'vernacular':\n            inputTxt.setAttribute('placeholder', 'Enter common name');\n            helpTxt.innerHTML = `-----`;\n            break;\n    }\n\n    const boundScore = {};\n\n    const answerBtn = document.querySelector('.js-check-answer');\n\n    const callback = (score, scoreUpdateTimer) => {        \n        boundScore.scoreUpdateTimer = scoreUpdateTimer;\n        boundScore.score = score;\n    };\n\n    const scoreEventHandler = e => {\n        e.preventDefault();\n        const input = document.querySelector('.js-txt-input');\n        if(!input) return;\n        const answer = input.value;\n        const score = { \n            itemId: item.id, question, answer, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt, \n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        if(answerBtn) answerBtn.disabled = true;\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n        if(helpTxt) helpTxt.innerHTML = question.taxon === 'vernacular' ? item.vernacularName : item.name;\n    };\n\n    const loseFocusMobileHandler = e => {\n        const input = document.querySelector('.js-txt-input');\n        if(!input || input.value === '') return;\n        const answer = input.value;\n        const score = { \n            itemId: item.id, question, answer: document.querySelector('.js-txt-input').value, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt,\n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n        document.removeEventListener('focusout', loseFocusMobileHandler);\n    };\n\n    if(config.isLandscapeMode) {\n        answerBtn.addEventListener('click', scoreEventHandler, { once: true });\n    } else {        \n        document.addEventListener('focusout', loseFocusMobileHandler);\n    }\n    \n    if(config.isPortraitMode) renderPortrait(item, config);\n    else renderLandscape(item, config, question);\n\n    document.querySelector('.js-continue-lesson-btn').addEventListener('click', e => {\n        window.clearTimeout(boundScore.scoreUpdateTimer);\n        bindScore(boundScore.score);\n    }, { once: true });\n\n    if(config.isPortraitMode) {\n\n        // hide attribution for now - space issue various across devices\n        const attribution = document.querySelector('.js-attribution-layer');\n              attribution.classList.add('hide-important');\n        const indicators = document.querySelector('.js-carousel-indicators');\n              indicators.classList.add('hide-important');\n    }\n};\n\nconst renderPortrait = (item, config) => {\n    \n    const images = prepImagesForCarousel(item, config, imageUseCases.TEXT_ENTRY);\n\n    const parent = document.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent });\n};\n\nconst renderLandscape = (item, config, question) => {\n    \n    let answer = question[question.taxon];\n    \n    let pool;\n\n    switch(question.taxon) {\n        case 'vernacular':\n            pool = item.vernacularName.toLowerCase();\n            answer = question.common;\n            break;\n        case 'genus':\n            pool = item.taxonomy.genus.toLowerCase();\n            break;\n        case 'species':\n            pool = item.taxonomy.species.toLowerCase();\n            break;\n        case 'binomial':\n        case 'name':\n            pool = item.name.toLowerCase();\n            answer = question.binomial;\n            break;\n    }\n\n    let letterBlocks = '';\n\n    utils.shuffleArray(Array.from(pool)).forEach( (letter, index) => {\n        if(letter === ' ') letter = '&nbsp;';\n        letterBlocks += `<span id=\"${index}\" class=\"block\">${letter}</span>`\n    });\n\n    document.querySelector('.js-pool-letters').innerHTML = letterBlocks;\n\n    const input = document.querySelector('.js-txt-input');\n\n    const letters = [];\n\n    const deleteLetter = letter => {\n        let value = document.querySelector('.js-txt-input').value;\n        let activeBlocks = Array.from(document.querySelectorAll('.block.active'));\n        let activeLetters = Array.from(value);\n        let activeBlock = activeBlocks.find(block => block.innerText.trim() === activeLetters[activeLetters.length-1].trim());\n        let lastLetter = letter || activeBlock;\n        if(value.length > 0){\n            let indexInInput = value.lastIndexOf(lastLetter.innerHTML);            \n            let newValue = '';\n            let letters = Array.from(value);\n            letters.splice(indexInInput,1);\n            letters.forEach(letter => newValue += letter);            \n            input.value = newValue;\n        }\n        let correctBlocks = Array.from(document.querySelectorAll('.correct'));\n            correctBlocks.forEach(b => b.classList.remove('correct'));\n            correctBlocks.forEach(b => b.classList.add('active'));\n        if(lastLetter) {\n          lastLetter.classList.remove('active');\n          letters.forEach(l => {            \n              if(l.id === lastLetter.id) {\n                  const letterIndex = letters.indexOf(l);\n                  if(letterIndex > -1)\n                      letters.splice(letterIndex,1);\n              }\n          });        \n        }\n    };\n\n    const blocks = document.querySelectorAll('.block');\n\n    blocks.forEach(block => {\n        block.addEventListener('click', e => {\n          e.preventDefault();\n          const letter = e.target;\n          if(letter.classList.contains('active')) {\n              deleteLetter(letter);\n          } else {\n              letter.classList.add('active');\n              letters.push(letter);\n              if(letter.innerHTML === '&nbsp;')\n                  input.value += ' ';\n              else\n                  input.value += letter.innerHTML;\n          }\n          if(input.value === answer.toLowerCase()) {\n              blocks.forEach(block => block.classList.add('correct'));\n          }\n        });\n    });\n\n    document.querySelector('.js-delete-letter').addEventListener('click', e => {\n      e.preventDefault();\n      deleteLetter();\n    });\n\n    const keyboardBtn = document.querySelector('.js-toggle-keyboard');          \n          keyboardBtn.addEventListener('click', e =>{\n            e.preventDefault();\n            const disabled = input.hasAttribute('disabled');\n            if(disabled) {\n                keyboardBtn.innerHTML = 'Enable letters';\n                input.removeAttribute('disabled');\n                input.focus();\n            } else {\n                keyboardBtn.innerHTML = 'Enable keyboard'\n                input.setAttribute('disabled', 'disabled');\n            }\n          });\n\n    setTimeout(() => {\n      keyboardBtn.focus();\n    }, 500);\n\n    const blockArray = [ ...blocks ];    \n    const entries = [];\n    let selectedBlock;\n\n    input.addEventListener('input', e => {\n        e.preventDefault();\n        if(!e.data) return;\n        let entry = e.data.toLowerCase();\n        entry = entry === ' ' ? '&nbsp;' : entry;\n        entries.push(entry);\n        selectedBlock = blockArray.find(block => block.innerHTML === entry);\n        if(selectedBlock) selectedBlock.classList.add('active');\n        if(input.value === answer.toLowerCase()) {\n            blockArray.forEach(block => block.classList.add('correct'));\n        }\n    });\n\n    input.addEventListener('keyup', e => {\n        e.preventDefault();\n        if(e.keyCode === 8) { // Backspace\n          const entry = entries.pop();\n          selectedBlock = blockArray.find(block => block.innerHTML === entry);\n          if(selectedBlock) selectedBlock.classList.remove('active');\n        }            \n    });\n};\n","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextItem = layout => {\n\n    const { counter, lessonPlan, config, lesson, collection, userAction } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection, userAction };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_ITEM, args)) {\n        setupHandler.actionUpdate(enums.nextStep.NEXT_ITEM, { layout });\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextLayout = counter => {\n\n  const init = () => {\n\n    const { layout, lessonPlan, config, lesson, collection, userAction } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection, userAction };\n\n    const isRequired = setupHandler.isRequired(enums.nextStep.NEXT_LAYOUT, args);\n    \n    if(isRequired) {\n      if(collection.nextItem) {\n        const nextLayout = { ...lessonPlan.layouts[counter.index], speciesName: collection.nextItem ? collection.nextItem.name : collection.items[0].name };\n        setupHandler.actionUpdate(enums.nextStep.NEXT_LAYOUT, { layout: nextLayout, config });\n      }\n    }\n  };\n\n  init();\n};","import { clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { lessonPlanner } from 'snapdragon-engine/lesson-planner';\nimport { lessonPlans } from 'snapdragon-config/lesson-plans';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\n\nexport const nextLesson = counter => {\n\n    const { layout, config, lesson, collection, userAction } = store.getState();\n\n    const args = { layout, counter, config, lesson, collection, userAction };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_LESSON, args)) {\n\n        const planId = config.isPortraitMode ? collection.lessonPlanPortrait : collection.lessonPlanLandscape;    \n        const lessonPlan = clone(lessonPlans.find(plan => plan.id === planId && plan.portrait === config.isPortraitMode));\n\n        args.lessonPlan = lessonPlan;\n\n        if(setupHandler.isRequired(enums.nextStep.NEXT_ROUND, args)) {\n\n            // asyncFunc will return collection, lessonPlan and lesson\n\n            const asyncFunc = lessonPlanner.createLessonPlan(lessonPlan, config, clone(collection), clone(lesson)).then(props => {\n                if(!props) return;\n                return { lessonPlan: props.updatedLessonPlan, collection: props.updatedCollection, lesson: props.updatedLesson };\n            });\n\n            if(asyncFunc === null) return;\n\n            setupHandler.actionUpdate(enums.nextStep.NEXT_LESSON, { config, asyncFunc });\n        }\n    }\n};","import { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { funcByName } from 'ui/helpers/function-lookups';\n\nconst isRequired = (step, args) => {\n\n    const { layout, counter, lessonPlan, config, lesson, collection, userAction } = args;\n\n    let required = false;\n\n    if(userAction === undefined || !!userAction && userAction.name === enums.userEvent.START_LESSON_REVIEW.name) {\n\n      // snapLog('userAction', userAction);\n      \n      switch(step) {\n          case enums.nextStep.NEXT_ITEM:\n              required = layout && !layout.bonus;\n              break;\n          case enums.nextStep.NEXT_LAYOUT:\n              if(counter.isLessonPaused) {\n                  required = false;\n              } else {\n                  required = lessonPlan && lessonPlan.layouts;\n                  required = required && lessonPlan.layouts[counter.index] !== null;\n              }\n              break;\n          case enums.nextStep.NEXT_LESSON:            \n              required =      (config.collection.id > 0 && !counter.isLessonPaused) // new lesson\n                          ||  (config.collection.id > 0 && config.collection.id !== collection.id); // new lesson from new collection\n              break;\n          case enums.nextStep.NEXT_ROUND:\n              required = counter.index === 0 && lesson.isNextRound && collection.items && collection.items.length > 0;\n              break;\n      }\n    }\n\n    return required;\n};\n\nconst actionUpdate = (step, args) => {\n\n    const { layout, config, asyncFunc } = args;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            actions.boundNextItem(layout.itemIndex);\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            actions.boundNextLayout(layout);\n            subscription.addSubs(layout, config, funcByName);\n            import('ui/screens/lists/lesson-state-handler').then(module => {\n              module.lessonStateHandler.changeRequest({\n                  requestType: enums.lessonState.SAVE_LESSON_PROGRESS,\n              });\n            });\n            break;\n        case enums.nextStep.NEXT_LESSON:\n\n            // if(config.isPortraitMode) {\n              const awaitPromise = async () => {\n                const response = await asyncFunc;\n                actions.boundNextLesson(response);  \n              };\n  \n              awaitPromise();\n            // } else {\n            //   actions.boundAsyncNextLesson(asyncFunc);\n            // }\n            break;\n    }\n}\n\nexport const setupHandler = {\n    isRequired,\n    actionUpdate\n}","export const renderWikiModal = (item, wikiLink, config) => {\n    if(wikiLink) {\n        wikiLink.addEventListener('click', event => {\n            document.querySelector('.js-external-page-title').innerHTML = `${item.name}`;\n            const entry = document.querySelector('.species-card-wiki-entry').innerText;\n            const style = `\n                <style type='text/css'>\n                body {\n                    font-family: PT Sans', 'Roboto', arial,sans-serif;\n                }\n                a {\n                    text-decoration: none;\n                    border: solid 1px;\n                    border-top: none;\n                    border-left: none;\n                    border-right: none;\n                    color: black;\n                    cursor: pointer;\n                }\n            </style>`;\n            const wiki = `<header>${style}</header><p>${entry}</p><p><a href='https://en.wikipedia.org/wiki/Salvia_officinalis' target='_blank'>Wikipedia page</a></p>`;\n\n            document.querySelector('.js-external-page-body').innerHTML = config.isPortraitMode\n                ? `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"data:text/html,${wiki}\"></iframe>`          \n                : `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"${wikiLink.querySelector('span').dataset.src}\"></iframe>`;\n                \n            document.querySelector('#wikiModal').focus();\n        });\n    }\n};","import { contains, flatten } from 'ramda';\nimport { utils } from 'utils/utils';\n\nlet root = '';\n\nconst formatUrl = (name, root, encode) => {\n    let binomial = name;\n    if(name.indexOf(' ') > 0) {\n        let ranks = name.split(' ');\n        binomial = ranks[0] + ' ' + ranks[1];\n        if(binomial.indexOf('Speckled wood') > -1) {\n            binomial += ' ' + ranks[2];\n        }\n    }    \n    return root + encode(binomial);\n};\n\nasync function fetchWiki(name, missingMessage) {\n    \n    if(name === undefined) {\n        return missingMessage;  \n    }\n\n    const url = formatUrl(name, root, utils.encodeQuery);\n    const config = { \n        method: 'GET'\n    };\n    \n    try { \n        const response = await fetch(url, config);\n        const data = await response.json();        \n        return flatten(data);        \n    } catch (e) {\n        const errorPromise = new Promise((resolve, reject) => {\n            resolve(missingMessage)\n        });\n        return errorPromise;\n    }    \n};\n\nconst cleanEntry = str => {\n    let cleaned = str;\n    cleaned = cleaned.replace('( or UK: , US: )', '');\n    cleaned = cleaned.replace('(;', '(');\n    cleaned = cleaned.replace('()', '');\n    cleaned = cleaned.replace('( ', '(');\n    cleaned = cleaned.replace('  ', ' ');\n    return cleaned;\n};\n\nconst wikiLink = entry => {\n    const src = cleanEntry(entry).replace('.wikipedia', '.m.wikipedia');\n    return `<span data-toggle=\"modal\" data-target=\"#wikiModal\" data-src=\"${src}\" class=\"underline-link\">Wiki modal</span>`;    \n};\n\nconst formatWiki = (entry) => {\n\n    const exceptions = ['Tarragon', 'Apple'];\n\n    if(contains(entry[0], exceptions)) {\n        return `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    }\n\n    if(!entry) return '';\n    let html = '';\n    if(entry.length === 1) {\n        html += wikiLink(entry[0]);\n    }\n    if(entry[1]) html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[1])}'</li>`;\n    if(entry[2])\n        if(entry[2].indexOf('https')!== -1) html += wikiLink(entry[2]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    if(entry[3]) \n        if(entry[3].indexOf('https')!== -1)\n        html += wikiLink(entry[3]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[3])}'</li>`;\n    return html;\n};\n\nasync function renderWiki(wikiNode, item, language) {\n    const binomial = item.name;\n    const wikiSearchTerm = item.names ? item.names.filter(name => name.language === language).find(name => name.wikiSearchTerm) : null;\n    const searchTerm = wikiSearchTerm ? wikiSearchTerm.vernacularName : (item.searchTerms \n                            ? item.searchTerms.filter(term => term.language === language)[0].searchTerm \n                            : binomial);\n    root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=1&search=`;\n    const exceptions = [ 'Artemisia dracunculus', 'Malus domestica', 'Zingiber officinale'];\n    if(contains(item.name, exceptions)) {\n        root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=2&redirects=resolve&search=`;\n    }    \n    wikiNode.innerHTML = \"\";\n\n    const entry = await fetchWiki(searchTerm);\n\n    if(entry && entry[2]) {\n        wikiNode.innerHTML = formatWiki(entry.slice(1));\n    } else {\n        if(!binomial) return '';\n        const genus = binomial.split(' ')[0];\n        const genusEntry = await fetchWiki(genus);\n        if(genusEntry[2] !== '')\n            wikiNode.innerHTML = formatWiki(genusEntry.slice(1));\n        else if (language !== 'en') {\n            renderWiki(wikiNode, binomial, 'en');\n        }\n    }\n}\n\nexport {\n    formatUrl, \n    formatWiki,\n    renderWiki\n};","export const getBirdSong = (item, node, portrait) => {\n\n    if(item.taxonomy.class.toUpperCase() === 'AVES') {\n\n        const endpoint = `https://cors-anywhere.herokuapp.com/http://www.xeno-canto.org/api/2/recordings?query=${item.name} q:A`;\n\n        async function fetchAsync (endpoint) {\n\n            let response = await fetch(endpoint);\n            \n            let data = await response.json();\n            \n            return data;\n        }\n\n        const loadPlayer = id => {\n            const url = `https://www.xeno-canto.org/${id}/embed?simple=1`;\n            portrait ? node.dataset.src = url : node.src = url;\n            if(portrait) {\n                node.classList.remove('bird-song-icon-disabled');\n                node.classList.add('bird-song-icon');\n            } else {\n                node.parentElement.classList.add('bird-song-spacing');\n            }\n        };\n\n        const playerId = item.traits.song.value[0];\n            \n        if(playerId) {\n            loadPlayer(playerId);\n        } else {\n            fetchAsync(endpoint).then(data => {        \n                const recording = data.recordings[0];\n                loadPlayer(recording.id);\n            });\n        }\n    } else {\n        node.style.display = 'none';\n        document.querySelector('.bird-song').style.display = 'none';\n    }\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#createGuide .modal-dialog {\\n  max-width: 600px;\\n  margin: auto; }\\n\\n.step-action-content {\\n  padding: 0 .5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock) - .5rem); }\\n\\n.species-picker-link {\\n  font-size: .8rem !important;\\n  font-style: initial; }\\n\\n.modal-guide-progress > div {\\n  display: flex;\\n  align-items: center;\\n  padding: .5rem;\\n  height: inherit; }\\n\\n.modal-subheader {\\n  font-size: 1.1em; }\\n\\n.modal-guide-progress .steps {\\n  text-transform: uppercase; }\\n\\n.modal-body .modal-guide-progress > div div {\\n  flex: 1;\\n  text-align: center;\\n  padding: .5rem 0; }\\n\\n.modal-body .modal-guide-progress > div > div {\\n  border-right: 0.005rem solid var(--snap-border-lightest); }\\n\\n.modal-body .modal-guide-progress > div > div:last-child {\\n  border-right: none; }\\n\\n.modal-body .modal-guide-progress .active {\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-active); }\\n\\n.modal-guide-navigation {\\n  display: grid;\\n  grid-template-columns: 4fr auto 4fr;\\n  margin: 0 .5rem;\\n  height: var(--vhRunningBlock, 10vh);\\n  border: 1px solid var(--snap-border-light); }\\n\\n.modal-guide-navigation > button {\\n  display: flex;\\n  align-items: center; }\\n\\n.modal-guide-navigation > button > span, .modal-guide-navigation > button svg {\\n  pointer-events: none; }\\n\\n.custom-lesson-menu-options .snap-icon-btn:hover, .modal-guide-navigation .snap-icon-btn:hover {\\n  color: var(--snap-collection-active); }\\n\\n.right-justify {\\n  justify-content: flex-end; }\\n\\n.arrow-wrapper {\\n  padding: 0 .5rem;\\n  font-size: 1.6rem;\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-end; }\\n\\n.arrow-wrapper-hidden > span {\\n  display: none; }\\n\\n.arrow-wrapper svg {\\n  pointer-events: initial;\\n  cursor: pointer; }\\n\\n.modal-guide-wrapper .modal-body .location .current {\\n  display: flex;\\n  align-items: center;\\n  margin: 1rem 0; }\\n\\n#set-inat-location-btn {\\n  width: 100%; }\\n\\n.species-picker-container {\\n  position: relative; }\\n\\n.species-picker-container > div {\\n  position: absolute;\\n  top: -5rem;\\n  width: 100%;\\n  display: flex; }\\n\\n.chosen-guide-filter {\\n  display: flex;\\n  align-items: center; }\\n\\n.chosen {\\n  position: absolute;\\n  left: .5rem;\\n  right: .5rem;\\n  bottom: calc(var(--vhStandardBlock));\\n  height: var(--vhHalfStandardBlock, 5vh); }\\n\\n.chosen > div span:nth-child(2) > span {\\n  margin: 0 .25rem; }\\n\\n.save-your-changes {\\n  display: flex;\\n  align-items: center;\\n  position: absolute;\\n  bottom: 1.5rem;\\n  width: 100%; }\\n\\n.modal-body .save-your-changes button {\\n  margin: 0 1rem 0 0; }\\n\\n.modal-body .inat-location-location button {\\n  width: 100%;\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.html5-location-place {\\n  width: 100%; }\\n\\n#set-inat-identity-btn {\\n  color: var(--snap-text-light);\\n  background-color: #7f977a;\\n  width: 100%; }\\n\\n.modal-guide-wrapper .modal-body .inat button.js-set-inat-identity-btn {\\n  color: var(--snap-text-light);\\n  background-color: #7f977a; }\\n\\n#inat-place, #input-species, #inat-identity {\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  width: 100%; }\\n\\n#inat-place::placeholder {\\n  display: inline; }\\n\\n.inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n  width: 100%;\\n  margin: 0;\\n  padding: 0; }\\n\\n/* SLIDER */\\n.modal-guide-body .range-slider {\\n  font-size: .9em;\\n  height: var(--vhStandardBlock);\\n  display: flex;\\n  flex-direction: column;\\n  align-items: normal;\\n  justify-content: space-evenly; }\\n\\n.modal-guide-body .range-slider > div:nth-child(2) {\\n  display: flex; }\\n\\n.range-limits {\\n  display: none; }\\n\\n.modal-guide-body .set-range-input {\\n  cursor: pointer;\\n  width: 100%;\\n  margin: 0 .25rem; }\\n\\n.set-range-input:focus {\\n  outline: 1px solid var(--snap-border-medium); }\\n\\n.modal-guide-body .range-slider.disabled .set-range-input {\\n  pointer-events: none; }\\n\\n/* SNAPDRAGON SWITCH */\\n.snap-switch {\\n  display: flex;\\n  align-items: center; }\\n\\n.snap-switch-slider {\\n  cursor: pointer;\\n  background-color: #c5cbcc; }\\n\\n.snap-switch-slider div {\\n  height: 1.6rem;\\n  width: 1.6rem;\\n  border-radius: .2rem;\\n  background-color: var(--snap-collection);\\n  transition-property: all;\\n  transition-duration: .4s;\\n  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);\\n  transition-delay: 0s;\\n  position: absolute; }\\n\\n.inat .snap-switch-slider div {\\n  background-color: var(--snap-inat); }\\n\\n.embedded-switch {\\n  display: grid;\\n  grid-template-columns: auto 3.2rem 1fr;\\n  height: 1.6rem; }\\n\\n.snap-switch-slider.left div {\\n  transform: translateX(0); }\\n\\n.snap-switch .txt-left {\\n  align-self: center;\\n  padding: 0 .5rem 0 0;\\n  font-size: .9em; }\\n\\n.snap-switch .txt-right {\\n  align-self: center;\\n  padding: 0 0 0 .5rem; }\\n\\n.snap-switch-slider.right div {\\n  transform: translateX(1.6rem); }\\n\\n.guides .inat .snap-switch {\\n  flex-direction: column; }\\n\\n/* AUTOCOMPLETE */\\n#inat-place.active, #input-species.active {\\n  border: 0.1rem solid var(--snap-text-medium-dark); }\\n\\n.autocomplete-options-container, .inat-autocomplete-options-container {\\n  z-index: 9999;\\n  color: var(--snap-text-dark-medium-dark);\\n  background-color: #fafafa;\\n  border: 0.05rem solid var(--snap-border-lightest);\\n  text-align: left;\\n  overflow-y: auto;\\n  -webkit-overflow-scrolling: touch;\\n  top: calc( var(--vhRunningBlock, 7.5vh) +  5px + var(--vhStandardBlock, 10vh) + var(--vhRunningBlock, 7.5vh)        + .25rem) !important;\\n  left: .5rem;\\n  right: .5rem; }\\n\\n.autocomplete-options-container.autocomplete {\\n  height: 10rem !important; }\\n\\n.inat-autocomplete-options-container {\\n  top: calc( var(--vhRunningBlock, 7.5vh) +  5px + var(--vhStandardBlock, 10vh) + var(--vhRunningBlock, 7.5vh) + var(--vhStandardBlock, 10vh) + .5rem) !important; }\\n\\n.autocomplete-options-container > div, .inat-autocomplete-options-container > div {\\n  padding: .25rem; }\\n\\n.autocomplete-options-container .selected, .inat-autocomplete-options-container .selected {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.inat-autocomplete-options-container .selected {\\n  background-color: var(--snap-inat); }\\n\\n.autocomplete-options-container .selected {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.autocomplete-options-container > div:hover:not(.group) {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark-hover);\\n  cursor: pointer; }\\n\\n.autocomplete-options-container > div.selected {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark);\\n  cursor: pointer; }\\n\\n#place span {\\n  margin: 0 .25rem 0 0; }\\n\\n/* CATEGORIES */\\n.iconic-taxa-categories {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh) - var(--vhHalfStandardBlock));\\n  padding: 0 1rem 1rem 1rem; }\\n\\n.iconic-taxa-categories > div > div {\\n  cursor: pointer; }\\n\\n/* Icon categories list, icon container and size */\\n.iconic-taxa-categories > div > div > div:nth-child(1), .iconic-taxa-categories button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer; }\\n\\n.iconic-taxa-categories > div > div > div:nth-child(1) svg {\\n  color: var(--snap-collection); }\\n\\n.iconic-taxa-categories g {\\n  fill: var(--snap-collection); }\\n\\n.iconic-taxa-categories svg {\\n  font-size: 1rem;\\n  color: var(--snap-collection); }\\n\\n.iconic-taxa-selected svg {\\n  color: var(--snap-collection-active) !important; }\\n\\n.iconic-taxa-selected svg g {\\n  fill: var(--snap-collection-active) !important; }\\n\\n.prop-value-block {\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center; }\\n\\n.prop-value-block > span:nth-child(2) {\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  display: inline-block;\\n  width: inherit;\\n  /* font-size: 1.1rem; */ }\\n\\n/* Mushroom icon sizes */\\n.iconic-taxa-categories svg, .iconic-taxa-categories-selected svg {\\n  width: 1rem;\\n  height: 1rem;\\n  font-size: 1rem; }\\n\\n.selected-text svg, .selected-text i, .iconic-taxa-selected svg {\\n  color: var(--snap-collection-active); }\\n\\n.lesson-taxa .iconic-taxa-categories-selected svg g {\\n  fill: var(--snap-text-medium-dark); }\\n\\n.iconic-taxa-categories-selected svg {\\n  vertical-align: -.125em; }\\n\\n.lesson-taxa .iconic-taxa-categories-selected svg {\\n  width: 1rem;\\n  height: 1rem; }\\n\\n/* .home-guide .iconic-taxa-categories-selected svg {\\n    width: 2rem;\\n    height: 2rem;\\n  } */\\n.iconic-taxa-categories-selected svg g {\\n  fill: var(--snap-collection-active); }\\n\\n.svg-icon {\\n  margin: 0.25rem 0 0; }\\n\\n.svg-icon-selected {\\n  fill: var(--snap-success);\\n  color: var(--snap-success); }\\n\\n/* EXAMPLE LESSONS INC. RB LIST */\\n.btn.btn-secondary {\\n  flex-direction: row;\\n  align-items: center; }\\n\\n.lesson-taxa {\\n  overflow-wrap: break-word;\\n  white-space: initial;\\n  font-size: .8em; }\\n\\n.locations .btn.btn-secondary > * {\\n  pointer-events: all; }\\n\\n.non-taxon .btn.btn-secondary input {\\n  pointer-events: none; }\\n\\n.lesson-name {\\n  line-height: initial !important;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  height: 1.5rem;\\n  display: flex;\\n  align-items: center;\\n  font-size: .8rem;\\n  color: var(--snap-text-black); }\\n\\n.lesson-name .underline-link {\\n  text-transform: initial;\\n  font-size: .8rem; }\\n\\n.lesson-name input {\\n  pointer-events: initial; }\\n\\n.lesson-taxa span:nth-child(1) {\\n  margin: 0 .15rem 0 0; }\\n\\n.btn.btn-secondary.active .lesson-taxa .iconic-taxa-categories-selected svg g {\\n  fill: white; }\\n\\n#confirm-lesson-btn {\\n  margin: 1.5rem 0;\\n  width: 9rem;\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.lesson-radio-button {\\n  margin-right: .5rem; }\\n\\n/* PORTRAIT & LANDSCAPE EXAMPLE GUIDE */\\n.btn.btn-secondary {\\n  width: 100%; }\\n\\n.start-lesson-wrapper.disabled {\\n  pointer-events: none; }\\n\\n.modal-guide-progress {\\n  cursor: pointer; }\\n\\n.modal-guide-progress span {\\n  pointer-events: none; }\\n\\n.location-checkbox {\\n  line-height: 3rem; }\\n\\n.guide-bottom-actions {\\n  display: flex;\\n  position: absolute; }\\n\\n.guide-bottom-actions span:nth-child(1) {\\n  font-size: .8rem; }\\n\\n.guide-bottom-actions span:nth-child(2) {\\n  margin-left: .25rem; }\\n\\n.location-option > div {\\n  width: 100%; }\\n\\n.location-option.inat-entry {\\n  position: relative; }\\n\\n.location-option.or-options {\\n  text-align: center;\\n  font-style: italic; }\\n\\n.location-option.range {\\n  border: none; }\\n\\n.location-option button {\\n  width: 100%; }\\n\\n.location-option:nth-child(3) > div:nth-child(2) {\\n  flex: auto;\\n  position: relative; }\\n\\n#googleLogo {\\n  width: auto;\\n  height: 1rem; }\\n\\n.location-actions {\\n  height: 100%; }\\n\\n.location-actions .actions {\\n  display: grid;\\n  grid-template-rows: 1fr 2rem 1fr;\\n  height: 100%; }\\n\\n.species-picker-actions {\\n  height: initial; }\\n\\n.filter-option {\\n  color: black; }\\n\\n.taxa-actions .actions {\\n  grid-template-rows: 1fr; }\\n\\n.filter-actions .actions {\\n  grid-template-rows: auto; }\\n\\n.filter-actions .actions {\\n  justify-content: space-between; }\\n\\n.filter-actions + div {\\n  display: none !important; }\\n\\n.filter-language-option-block {\\n  width: 100%; }\\n\\n.filter-language-option-block span {\\n  text-transform: uppercase;\\n  margin-left: .15rem; }\\n\\n.custom-lesson-menu-options {\\n  display: flex;\\n  flex-direction: column;\\n  pointer-events: initial;\\n  cursor: pointer; }\\n\\n.custom-lesson-menu-options li {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  border: 1px solid var(--snap-border-light); }\\n\\n.custom-lesson-menu-options li span {\\n  padding: .5rem; }\\n\\n.species-actions + div {\\n  display: none !important; }\\n\\n.request-feedback .edit-species {\\n  margin: .5rem;\\n  height: var(--vhHalfStandardBlock, 10vh); }\\n\\n.request-feedback .lesson-list-item {\\n  padding: .5rem;\\n  background-color: var(--snap-lesson-row-green);\\n  pointer-events: all;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly; }\\n\\n.request-feedback .lesson-list-item {\\n  line-height: initial !important; }\\n\\n.request-feedback .lesson-name {\\n  line-height: initial; }\\n\\n.selected-species-container {\\n  position: relative; }\\n\\n.selected-species-container > div.scrollable {\\n  height: 0;\\n  margin: .5rem; }\\n\\n.selected-species-container > div.scrollable.open {\\n  height: calc( (var(--vh, 1vh) * 100)  - var(--vhFixtures, 15vh)  - var(--vhStandardBlock,10vh) - var(--vhOneHalfStandardBlock,20vh) - var(--vhHalfStandardBlock,5vh) - var(--vhRunningBlock) - .5px);\\n  top: .5rem; }\\n\\n.selected-species {\\n  margin: 1rem; }\\n\\n.selected-species-container ul {\\n  columns: 2 200px;\\n  column-gap: 2rem; }\\n\\n#locationForm, #inatForm {\\n  width: 100%; }\\n\\n@media (min-height: 640px) {\\n  .modal-guide-wrapper .modal-body .modal-guide-navigation > div:nth-child(1) > div svg {\\n    font-size: 2rem; } }\\n\\n@media (min-height: 667px) {\\n  .iconic-taxa-categories svg, .iconic-taxa-categories svg {\\n    font-size: 1.6rem;\\n    height: 1.6rem; }\\n  .taxa-actions svg-icon.si-glyph-mushrooms svg {\\n    height: 2rem; } }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default \"img/powered_by_google_on_white_hdpi.png\";","// Module\nvar code = \"<div class=\\\"iconic-taxa-categories js-iconic-taxa-categories\\\">\\n    <div class=\\\"double-centred-block\\\" id=\\\"aves\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"birds\\\"><i class=\\\"fas fa-dove\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Birds</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"amphibia\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"amphibians\\\"><i class=\\\"fas fa-frog\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Amphibians</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"mammalia\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"mammals\\\"><i class=\\\"fas fa-paw\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Mammals</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"insecta\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"insects\\\"><i class=\\\"fas fa-bug\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Insects</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"fungi\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"fungi and lichens\\\"><svg-icon class=\\\"si-glyph-mushrooms\\\"><src href=\\\"./static/icons/si-glyph-mushrooms.svg\\\"/></svg></button>\\n        <div class=\\\"small-text\\\">Fungi & Lichens</div></div>\\n      </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"plantae\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"plants\\\"><i class=\\\"fas fa-leaf\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Plants</div></div>\\n    </div>    \\n    <div class=\\\"double-centred-block\\\" id=\\\"reptilia\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"reptiles\\\"><i class=\\\"far fa-registered\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Reptiles</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"lepidoptera\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"butterflies and moths\\\"><i class=\\\"fas fa-barcode\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div class=\\\"small-text\\\">Butterflies & Moths</div></div>\\n    </div>\\n</div>\\n<div class=\\\"hide-important guide-bottom-actions\\\">\\n    <span>Know what you want?</span>\\n    <span class=\\\"underline-link species-picker-link js-species-picker-link\\\">Species picker</span>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"{{ className }}\\\">\\n    <div class=\\\"actions js-actions\\\"></div>\\n    <div class=\\\"save-your-changes js-save-your-changes\\\"></div>\\n</div>\\n<div class=\\\"chosen js-chosen\\\">\\n    <div class=\\\"prop-value-block\\\"><span></span><span class=\\\"selected-text\\\"></span></div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div>\\n    <div class=\\\"inat snap-switch running-block\\\">\\n        <div class=\\\"embedded-switch\\\">\\n            <div class=\\\"txt-left\\\"><span>iNaturalist User</span></div>\\n            <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\">\\n                <div></div>\\n            </div>\\n            <div class=\\\"txt-right\\\"><span>Project</span></div>        \\n        </div>\\n    </div>\\n\\n    <div class=\\\"location-option inat-entry\\\">\\n        <div class=\\\"input-container standard-block bottom-aligned\\\">\\n            <form id=\\\"inatForm\\\" action=\\\"#\\\">\\n                <input id=\\\"inat-identity\\\" type=\\\"text\\\" placeholder=\\\"Start typing a user or project Id.\\\">\\n            </form>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"location-option chosen-guide-filter js-chosen-inat standard-block\\\">\\n        <div>Learn more about <a href=\\\"https://www.inaturalist.org/\\\" target=\\\"_blank\\\" class=\\\"underline-link\\\">iNaturalist</a>.</div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div>\\n    <div class=\\\"species-search js-species-search\\\">\\n        <div><div class=\\\"icon\\\"><i class=\\\"fas fa-sun slow-spin\\\"></i></div></div>\\n        <h2 class=\\\"standard-block\\\">This search is based on observations recorded by the public on <a class=\\\"underline-link\\\" target=\\\"_blank\\\" href=\\\"https://www.inaturalist.org/\\\">iNaturalist</a>.</h2>\\n    </div>\\n    <div>\\n        <div class=\\\"hide-empty request-feedback js-request-feedback\\\">Contacting iNaturalist</div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"border-bottom\\\">\\n    <div class=\\\"running-block vertical-centred-block location-option html5-location\\\">\\n        <div class=\\\"html5-location-place\\\"><button class=\\\"btn snap-action-btn js-set-location-btn\\\"></button><span class=\\\"landscape\\\"></span></div>\\n    </div>\\n    <div class=\\\"standard-block location-option place bottom-aligned\\\">\\n        <form id=\\\"locationForm\\\" action=\\\"#\\\">\\n          <div class=\\\"standard-block\\\">\\n            <label for=\\\"#inat-place\\\" class=\\\"extra-small-text\\\">Location</label>\\n            <input id=\\\"inat-place\\\" type=\\\"text\\\" placeholder=\\\"Or start typing the name of a place.\\\">\\n            <input class=\\\"hide\\\" type=\\\"submit\\\" value=\\\"\\\">\\n          </div>\\n        </form>\\n    </div>\\n    <div class=\\\"location-option margin-top range\\\">\\n        <div class=\\\"range-slider\\\">\\n            <div class=\\\"js-range\\\"></div>\\n            <div>\\n              <span class=\\\"range-limits\\\">0km</span>\\n              <span class=\\\"margin-right\\\" style=\\\"width: 100%;\\\"><input class=\\\"set-range-input js-set-range-input\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"250\\\" value=\\\"10\\\"></span>\\n              <span class=\\\"range-limits\\\"> 250km</span>\\n              <span class=\\\"saved js-range-saved\\\"></span>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"location-filter-options\\\">            \\n    <div>\\n      <div class=\\\"black-text\\\">Species by season</div>\\n      <div class=\\\"season snap-switch margin-top margin-bottom\\\">\\n          <div class=\\\"embedded-switch\\\">\\n              <div class=\\\"txt-left\\\"><span>{{ observableMonths }}</span></div>\\n              <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\">\\n                  <div></div>\\n              </div>\\n              <div class=\\\"txt-right\\\"><span>All Year</span></div>\\n          </div>\\n      </div>  \\n    </div>\\n    <div>\\n      <div class=\\\"black-text\\\">Species by observation count</div>\\n      <div class=\\\"margin-top margin-bottom\\\">\\n        <span>\\n          Top <input min=\\\"1\\\" max=\\\"500\\\" required class=\\\"medium half-margin-right js-location-no-of-records\\\" type=\\\"number\\\" value=\\\"{{ noOfRecords }}\\\"> most observed.\\n        </span>\\n      </div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<menu>\\n  <ul class=\\\"custom-lesson-menu-options\\\" data-repeat-option=\\\"{{ options }}\\\">\\n    <li data-option=\\\"{{ option.id }}\\\">\\n        <button class=\\\"icon snap-icon-btn arrow-wrapper\\\"><span class=\\\"small-text\\\">{{ option.text }}</span><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></button>\\n    </li>\\n  </ul>\\n</menu>\\n\\n<!-- <hr class=\\\"double-margin-top double-margin-bottom\\\"> -->\\n\\n<div class=\\\"js-language-selection-container\\\"></div>\\n\\n<h3 class=\\\"standard-block centred-block js-persistence-warning\\\">\\n    <span><i class=\\\"fas fa-exclamation\\\"></i> You are not currently logged in. Your collection will not be availble outside this browser.</span>\\n</h3>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block double-centred-block\\\">\\n    <!-- <div class=\\\"lesson-name\\\" id=\\\"js-collection-name\\\">\\n        <span>{{ collection.name }}</span>\\n    </div> -->\\n    <div class=\\\"lesson-name hide-important\\\" id=\\\"js-input-collection-name\\\">\\n      <label for=\\\"#new-collection-name\\\" class=\\\"extra-small-text\\\">lesson name</label>\\n      <input id=\\\"new-collection-name\\\" type=\\\"text\\\" value=\\\"{{ collection.name }}\\\">\\n    </div>\\n    <div class=\\\"lesson-taxa\\\"><span class=\\\"js-lesson-taxa-count\\\">{{ collection.items.length }}</span> <span class=\\\"js-lesson-taxa\\\">{{ collection.taxa }}</span></div>\\n</div>\\n<div class=\\\"edit-species centred-block half-standard-block js-edit-species\\\">\\n    <button class=\\\"snap-btn fit-width\\\">Edit lesson</button>\\n</div>\\n\\n<div class=\\\"selected-species-container\\\">\\n    <div class=\\\"scrollable js-selected-species-container\\\"></div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\">    \\n    <div class=\\\"card-card js-species-card\\\">\\n        <div id=\\\"card-header\\\" class=\\\"question-container\\\">\\n            \\n            <!-- <div class=\\\"species-header landscape\\\">                        \\n                <img src=\\\"{{ image.small }}\\\" alt=\\\"\\\">\\n            </div> -->\\n\\n            <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\">\\n                <i class=\\\"\\\"></i>\\n            </div>\\n\\n            <div class=\\\"hide-empty question-header\\\">\\n                <div>\\n                    <div class=\\\"names-container vernacular-name-badge js-names-container\\\">\\n                        <div>\\n                            <span class=\\\"vernacular-name\\\">{{ vernacularName }}</span>\\n                        </div>\\n                        <div>\\n                            <span class=\\\"binomial\\\">{{ name }}</span>\\n                            <span class=\\\"js-names-badge\\\"></span>\\n                            <span class=\\\"portrait bird-song-icon-disabled js-bird-song-player\\\" data-src='player' data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\">\\n                                <i class=\\\"fas fa-music\\\"></i>\\n                            </span>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"card-link-container\\\">\\n                <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n            </div>\\n            <!-- <div class=\\\"card-link-container\\\">\\n                <div class=\\\"card-link js-card-link\\\">\\n                    <span>Family</span>\\n                    <span>card<i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span>\\n                </div>\\n            </div> -->\\n    \\n        </div>            \\n        <div class=\\\"data-box-container landscape\\\">\\n            <div class=\\\"calendar-container landscape\\\">\\n                <div class=\\\"js-calendar-box\\\"></div>\\n            </div>\\n            \\n            <div class=\\\"inat-box js-inat-box\\\"></div>\\n            <div class=\\\"taxa-container landscape js-taxa-box\\\"></div>            \\n        </div>\\n        <div class=\\\"portrait-grid species-card-images carousel js-test-card-container-images\\\"></div>\\n        <div class=\\\"mixed-content-container scrollable\\\">\\n            <div class=\\\"landscape bird-song\\\">\\n                <div class=\\\"hide-empty\\\">\\n                    <iframe class=\\\"js-bird-song\\\" src='' scrolling='no' frameborder='0' width='80vw' height='115'>                    \\n                    </iframe>\\n                </div>\\n            </div>\\n            <div class=\\\"card-txt-block lookalikes js-lookalikes\\\"></div>\\n            <div class=\\\"js-info-box-details info-details\\\"></div>            \\n        </div>\\n        <div class=\\\"info-box js-info-box\\\"></div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\">    \\n    <div class=\\\"portrait-grid non-taxon-card-images carousel js-non-taxon-card-images\\\"></div>    \\n    <div class=\\\"card-card card non-taxon js-non-taxon-card\\\">\\n        <div id=\\\"taxon-card-header\\\" class=\\\"question-container\\\">\\n                \\n                <div class=\\\"species-header js-species-header\\\">                        \\n                    <img src=\\\"{{ image.small }}\\\" alt=\\\"\\\">\\n                </div>\\n\\n                <div class=\\\"hide-empty question-header\\\">\\n                    <div>\\n                        <div class=\\\"names-container js-names-container\\\">\\n                            <div>\\n                                Foliose\\n                            </div>\\n                            <div>\\n                                \\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n                \\n                <div class=\\\"card-link-container\\\">\\n                    <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n                </div>\\n    \\n\\n        </div>  \\n        <div class=\\\"non-taxa js-non-taxa\\\">                \\n            <div role=\\\"group\\\" class=\\\"btn-group\\\" data-toggle=\\\"buttons\\\" data-repeat-taxon=\\\"{{ group }}\\\">\\n                <label class=\\\"btn btn-secondary\\\" id=\\\"{{ taxon.id }}\\\">\\n                    <input type=\\\"radio\\\" name=\\\"options\\\" id=\\\"{{ taxon.id }}\\\" autocomplete=\\\"off\\\" checked> {{ taxon.id }}\\n                </label>\\n            </div>\\n        </div>            \\n        <div class=\\\"definitions\\\">\\n            <div class=\\\"non-taxa-definition js-non-taxa-definition\\\">\\n                <div></div>\\n            </div>\\n            <div class=\\\"non-taxa-definition \\\">\\n                <div class=\\\"id-box\\\">\\n                    <div>\\n                        <div class=\\\"landscape\\\"></div>\\n                        <div class=\\\"portrait\\\"></div>\\n                    </div>\\n                    <div>\\n                        <div></div>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"landscape species-card-wiki\\\">\\n                <span class=\\\"non-taxon-card-wiki js-non-taxon-card-wiki\\\"></span>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container\\\">\\n    <div class=\\\"taxon card-card js-taxon-card\\\">\\n        <div id=\\\"taxon-card-header\\\" class=\\\"question-container\\\">\\n            <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\">\\n                <i class=\\\"\\\"></i>\\n            </div>\\n\\n            <div class=\\\"hide-empty question-header\\\">\\n                <div>\\n                    <div class=\\\"names-container vernacular-name-badge js-names-container\\\">\\n                        <div>\\n                            <span>{{ vernacularName }}</span>                                \\n                        </div>\\n                        <div>\\n                            <span class=\\\"binomial\\\">{{ name }}</span>\\n                            <span class=\\\"names-badge js-names-badge\\\" data-toggle=\\\"modal\\\" data-target=\\\"#badgeListModal\\\">{{ occurrences }}</span>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        \\n            <div class=\\\"card-link-container\\\">\\n                <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n            </div>\\n            <!-- <div class=\\\"card-link-container\\\">\\n                <div class=\\\"card-link js-card-link\\\">\\n                    <span>Test</span>\\n                    <span>Card<i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span>\\n                </div>\\n            </div> -->\\n        </div>  \\n        <div class=\\\"data-box-container sub-header\\\">\\n            <div class=\\\"data-box\\\">\\n                <div class=\\\"taxon-data js-taxon-rank\\\"><span>Rank</span> <span>{{ rank }}</span></div>\\n                <div class=\\\"taxon-data\\\"><span>Species</span> <span>{{ species }}</span></div>\\n                <div class=\\\"taxon-data js-taxon-genus\\\"><span>Genera</span> <span>{{ genera }}</span></div>\\n                <div class=\\\"taxon-data js-taxon-family\\\"><span>Families</span> <span>{{ families }}</span></div>\\n            </div>\\n            <div class=\\\"landscape external-links js-external-links\\\">\\n                <div><a href=\\\"{{ eol }}\\\" target=\\\"_blank\\\" class=\\\"underline-link\\\">EOL</a><span> taxon home page</span> <span class=\\\"names-badge\\\"> <i class=\\\"super fas fa-external-link-alt\\\"></i></span></div>\\n                <div><a href=\\\"{{ wiki }}\\\" class=\\\"underline-link\\\" data-toggle=\\\"modal\\\" data-target=\\\"#wikiModal\\\">Wikipedia page</a></div>\\n            </div>\\n        </div>\\n        <div class=\\\"mixed-content-container\\\">\\n            <div class=\\\"centred-block\\\">\\n                <div class=\\\"id-box-container\\\">\\n                    <div class=\\\"id-box\\\">\\n                        <div>\\n                        </div>\\n                        <div>\\n                            <div class=\\\"taxon-identification\\\">{{ identification }}</div>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\\"taxon-summary\\\">\\n                    <div>{{ summary }}</div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"info-box js-taxon-info-box\\\"></div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\">\\n    <div class=\\\"js-test-card\\\">\\n        <div id=\\\"test-card-header\\\" class=\\\"question-container\\\">\\n            <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\">\\n                <i class=\\\"\\\"></i>\\n            </div>\\n            <div class=\\\"hide-empty question-header\\\">\\n                <div>\\n                    <div class=\\\"names-container {{ headerClassName }}\\\">\\n                        <div>\\n                            <h2 class=\\\"vernacular-name\\\">{{ vernacularName }}</h2>\\n                            <span class=\\\"hide-empty names-badge\\\"></span>\\n                        </div>\\n                        <div>\\n                            <h2 class=\\\"binomial\\\">{{ binomial }}</h2>\\n                            <span class=\\\"names-badge traits-count-badge js-traits-count-badge\\\"></span>\\n                            <h2 class=\\\"term-header hide-empty js-term-header\\\">{{ term }}</h2>\\n                        </div>\\n                    </div>                \\n                </div>\\n            </div>\\n\\n            <div class=\\\"card-link-container\\\">\\n                <i class=\\\"far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n            </div>\\n        </div>\\n        <div class=\\\"test-card-question standard-block centred-block js-test-card-question border-bottom\\\">            \\n            <div class=\\\"flex question {{ className }}\\\">\\n                <h3 class=\\\"hide-empty question-question js-question-question\\\">{{ question }}</h3>\\n                <h3 class=\\\"hide-empty question-help js-question-help\\\">{{ help }}</h3>\\n                <h3 class=\\\"hide-empty question-statement js-statement-para\\\">{{ statement }}</h3>\\n                <h3 class=\\\"hide-empty margin-top question-provider-question js-question-para\\\">{{ providerQuestion }}</h3>\\n            </div>\\n        </div>\\n        <div class=\\\"test-card-content js-test-card-content scrollable\\\">\\n            <!-- Specific test content goes here -->\\n        </div>\\n        <div class=\\\"text-question js-txt-question\\\"></div>\\n        <div class=\\\"action-update-container\\\">\\n            <div class=\\\"action-update\\\">\\n                <button disabled class=\\\"btn snap-action-btn js-continue-lesson-btn\\\">Continue lesson</button>\\n            </div>\\n        </div>\\n    </div> \\n</div>\\n<div class=\\\"swap-out-card js-species-container\\\"></div>\\n<div class=\\\"swap-out-card js-taxon-container\\\"></div>\\n<div class=\\\"swap-out-card js-summary-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<figure>\\n    <figcaption class=\\\"hide\\\">{{ title }}</figcaption>\\n    <audio\\n        controls\\n        src=\\\"{{ mp3 }}\\\">\\n        Your browser does not support the\\n        <code>audio</code> element.\\n    </audio>\\n</figure>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul data-repeat-language=\\\"{{ languageNames }}\\\" class=\\\"scrollable badge-list\\\">\\n    <li class=\\\"capitalise\\\">\\n        <div class=\\\"margin-top uppercase\\\">{{ language.name }}</div>\\n        <ul data-repeat-common=\\\"{{ language.names }}\\\">\\n            <li>{{ common }}</li>\\n        </ul>\\n    </li>\\n</ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"calendar-box\\\">\\n        <div data-repeat-row=\\\"{{ data }}\\\" class=\\\"\\\">\\n            <div class=\\\"col\\\" data-repeat-value=\\\"{{ row }}\\\">\\n                <div title=\\\"{{ value.count }}\\\" class=\\\"{{ value.class }}\\\">{{ value.month }}</div>\\n            </div>\\n        </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"id-box\\\">\\n  <div>{{ id }}</div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"imageSlider_{{ identifier }}\\\" class=\\\"imageSlider carousel slide\\\" data-ride=\\\"carousel\\\" data-interval=\\\"false\\\">\\n  <div class=\\\"carousel-inner js-carousel-inner\\\">\\n      <div data-repeat-image=\\\"{{ images }}\\\">\\n        <div class=\\\"carousel-item image-slider-190\\\">\\n            <img \\n                role=\\\"button\\\"\\n                src=\\\"{{ image.medium }}\\\"\\n                data-title=\\\"{{ image.itemName }}\\\"\\n                data-source=\\\"{{ image.source }}\\\"\\n                data-license=\\\"{{ image.license }}\\\"\\n                data-rights-holder=\\\"{{ image.rightsHolder }}\\\"\\n                data-photographers-name=\\\"{{ image.photographersName }}\\\"\\n                data-url=\\\"{{ image.url }}\\\"\\n                data-provider=\\\"{{ image.provider }}\\\"\\n                data-item-name=\\\"{{ image.itemName }}\\\"\\n                data-index=\\\"{{ image.index }}\\\"\\n                alt=\\\"Give {{ image.itemName }} as your answer\\\">\\n        </div>\\n      </div>\\n      <div>\\n        <div class=\\\"attribution-layer js-attribution-layer {{ identifier }}\\\"></div>\\n        <ol class=\\\"carousel-indicators js-carousel-indicators\\\" data-repeat-image=\\\"{{ images }}\\\">\\n          <li data-target=\\\"#carouselExampleIndicators\\\" data-slide-to=\\\"{{ image.index }}\\\"></li>\\n        </ol>        \\n      </div>\\n  </div>        \\n  <a class=\\\"carousel-control-prev\\\" href=\\\"#imageSlider_{{ identifier }}\\\" role=\\\"button\\\" data-slide=\\\"prev\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\">\\n    <button class=\\\"btn snap-icon-btn carousel-control-prev-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button>\\n    <button class=\\\"sr-only\\\">Previous</button>\\n  </a>\\n  <div class=\\\"carousel-control-next\\\" href=\\\"#imageSlider_{{ identifier }}\\\" role=\\\"button\\\" data-slide=\\\"next\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\">\\n    <button class=\\\"btn snap-icon-btn carousel-control-next-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button>\\n    <button class=\\\"sr-only\\\">Next</button>\\n  </div>\\n  <div class=\\\"description_{{ identifier }} image-description\\\"></div>\\n  <div class=\\\"double-centred-block\\\"></div>\\n  </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"data-box\\\">\\n    <div>\\n        <span class=\\\"js-world\\\">Worldwide</span><span class=\\\"js-taxon-count\\\">---</span>\\n        </div>\\n        <div>\\n            <span class=\\\"js-place\\\">Location</span><span class=\\\"js-place-taxon-count\\\">---</span>\\n        </div>\\n    <div>\\n        <span><a target=\\\"_blank\\\" href=\\\"\\\" class=\\\"underline-link js-taxon-link underline-link-left-margin\\\">iNat</a></span>\\n        <span class=\\\"js-test-card-container-wiki\\\"></span>\\n        <span><a class=\\\"species-card-eol-link js-test-card-container-eol-link underline-link\\\">EOL</a></span>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div data-repeat-detail=\\\"{{ details }}\\\">\\n    <dl class=\\\"info_detail\\\">\\n        <dt>{{ detail.term }}</dt>\\n        <dd><img class=\\\"{{ detail.imgClassName }}\\\" src=\\\"{{ detail.img.url }}\\\" alt=\\\"\\\"></dd>\\n        <dd>{{ detail.definition }}</dd>\\n    </dl>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"traitSlider{{ id }}\\\" class=\\\"info carousel slide\\\" data-ride=\\\"false\\\" data-interval=\\\"false\\\">\\n    <div class=\\\"carousel-inner\\\" data-repeat-trait=\\\"{{ traits }}\\\">\\n      <dl class=\\\"carousel-item\\\">\\n          <div>\\n            <dt>{{ trait.name }}</dt>\\n            <dd>{{ trait.value }} {{ trait.unit }}</dd>\\n          </div>\\n          <div class=\\\"hide-important\\\">{{ trait.description }}</div>\\n      </dl>\\n    </div>\\n    <a class=\\\"carousel-control carousel-control-prev\\\" href=\\\"#traitSlider{{ id }}\\\" role=\\\"button\\\" data-slide=\\\"prev\\\">\\n      <button class=\\\"carousel-control-prev-icon\\\" aria-hidden=\\\"true\\\"></button>\\n      <button class=\\\"sr-only\\\">Previous</button>\\n    </a>\\n    <a class=\\\"carousel-control carousel-control-next\\\" href=\\\"#traitSlider{{ id }}\\\" role=\\\"button\\\" data-slide=\\\"next\\\">\\n      <button class=\\\"carousel-control-next-icon\\\" aria-hidden=\\\"true\\\"></button>\\n      <button class=\\\"sr-only\\\">Next</span>\\n      </a>\\n  </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"filter-language-option-block\\\">    \\n    <div class=\\\"filter-options\\\">\\n        <div class=\\\"language-options\\\">\\n            <div class=\\\"dropdown\\\">\\n                <button class=\\\"btn smaller-text snap-btn dropdown-toggle\\\" type=\\\"button\\\" id=\\\"taxonLanguageBtn\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\n                    Taxon language\\n                </button>\\n                <div class=\\\"dropdown-menu\\\" aria-labelledby=\\\"dropdownMenuButton\\\" data-repeat-language=\\\"{{ languages }}\\\">\\n                    <a id=\\\"{{ language.lang }}\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\">{{ language.name }}</a>\\n                </div>\\n            </div>\\n        </div>        \\n    </div>\\n    <h2 class=\\\"half-standard-block centred-block\\\">Common names will be shown in<span id=\\\"taxonLanguageTxt\\\">English</span>.</h2>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"js-relationship-card-list\\\" data-repeat-lookalike=\\\"{{ lookalikes }}\\\">\\n    <div class=\\\"lookalike-card\\\">\\n        <div>{{ lookalike.species }}</div>\\n        <div>{{ lookalike.speciesDescription }}</div>\\n        <!-- <button data-toggle=\\\"{{ lookalike.modal }}\\\" data-target=\\\"#cardModal\\\" class=\\\"snap-icon-btn smaller-text {{ lookalike.className }} js-test-card-container-link\\\" id=\\\"{{ lookalike.lookalike }}\\\">{{ lookalike.lookalike }}</button> -->\\n        <div class=\\\"js-test-card-container-link\\\">\\n            <span data-toggle=\\\"{{ lookalike.modal }}\\\" data-target=\\\"#cardModal\\\" class=\\\"{{ lookalike.className }}\\\" id=\\\"{{ lookalike.lookalike }}\\\">{{ lookalike.lookalike }}</span>\\n        </div>\\n        <div>{{ lookalike.lookalikeDescription }}</div>\\n    </div>\\n</div>    \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"\\n<div class=\\\"js-relationship-card-list\\\" data-repeat-relationship=\\\"{{ relationships }}\\\">\\n    <div class=\\\"relationship-card\\\">\\n        <div class=\\\"cols\\\">\\n            <div>Relationship</div><div>{{ relationship.type }}</div>\\n        </div>\\n        <div class=\\\"cols\\\">\\n            <div class=\\\"js-test-card-container-link\\\">\\n                <span data-toggle=\\\"{{ relationship.modal }}\\\" data-target=\\\"#cardModal\\\" class=\\\"{{ relationship.className }}\\\" id=\\\"{{ relationship.speciesA }}\\\">{{ relationship.speciesA }}</span>\\n            </div>                \\n            <div class=\\\"capitalise\\\">{{ relationship.speciesARole }}</div>\\n        </div>\\n        <div class=\\\"cols\\\">\\n            <div>{{ relationship.speciesB }}</div><div class=\\\"capitalise\\\">{{ relationship.speciesBRole }}</div>\\n        </div>\\n        <div>{{ relationship.description }}</div>\\n    </div>  \\n\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span class=\\\"feature-label js-compare-species-label\\\"></span>\\n<span title=\\\"Lookalike species\\\" class=\\\"landscape compare-species-link js-compare-species-link\\\" data-toggle=\\\"modal\\\" data-target=\\\"#imageComparisonModal\\\" data-slides=\\\"{{ slides }}\\\">\\n    <i class=\\\"fas fa-clone\\\"></i>\\n</span>\\n<span title=\\\"Lookalike species\\\" class=\\\"portrait compare-species-link js-compare-species-link\\\">\\n    <i class=\\\"fas fa-clone\\\"></i>\\n</span>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"attribution-layer\\\">\\n    <div class=\\\"rights-link js-rights-link\\\">\\n        <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\">\\n            <i class=\\\"fas fa-copyright\\\"></i>\\n        </div>\\n        <div></div>\\n        <div class=\\\"rights-link-copyright double-centred-block\\\">            \\n            <a href=\\\"{{ large }}\\\" target=\\\"_blank\\\">\\n              <span class=\\\"sr-only\\\">Opens in new window</span>\\n              <i class=\\\"fas fa-external-link-alt\\\"></i>\\n            </a>\\n        </div>\\n    </div>\\n    <div class=\\\"rights-attribution hide-important js-rights-attribution\\\">        \\n        <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\">\\n            <i class=\\\"fas fa-copyright\\\"></i>\\n        </div>        \\n        <div class=\\\"double-centred-block\\\">\\n            <a href=\\\"{{ source }}\\\" target=\\\"_blank\\\">\\n                <span class=\\\"centred-block\\\">\\n                    <span class=\\\"sr-only\\\">Opens in new window</span>\\n                    <span class=\\\"underline-link half-margin-right\\\">{{ author }}</span>\\n                    <i class=\\\"super active-icon fas fa-external-link-alt\\\"></i>\\n                </span>\\n            </a>\\n    </div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span>\\n    <span class=\\\"uppercase small-text js-native-container\\\"></span>\\n    <span class='rank'>{{ trait }}</span>\\n    <span class=\\\"lookalikes js-lookalikes\\\"></span>\\n    <!-- <span class=\\\"portrait bird-song-icon-disabled js-bird-song-player\\\" data-src='player' data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\"> -->\\n        <!-- <i class=\\\"fas fa-music\\\"></i> -->\\n    <!-- </span> -->\\n    <span class=\\\"badge badge-light js-subspecies-badge\\\" data-toggle=\\\"modal\\\" data-target=\\\"#badgeListModal\\\">{{ subSpeciesCount }}</span> <span class=\\\"sr-only\\\">species of this family in the collection</span>\\n</span>\\n\\n<span class=\\\"hide-empty\\\">{{ familyVernacularName }}</span>\\n<span class=\\\"latin hide-empty\\\">{{ familyName }}</span>\\n\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container  -scrolling-container\\\">\\n    \\n    <h1 class=\\\"title standard-block double-centred-block border-bottom\\\">{{ title }}</h1 >\\n    \\n    <main class=\\\"snapdragon-intro padding\\\" \\n        style=\\\"margin: 0 2rem;\\n        display: flex;\\n        flex-direction: column;\\n        justify-content: space-evenly;\\n        top: calc(var(--vhStandardBlock));\\\">\\n        <h3 class=\\\"half-standard-block\\\">\\n            <span class=\\\"js-species-summary\\\">{{ speciesSummary }}</span>\\n        </h3>\\n        <h3 class=\\\"half-standard-block\\\">\\n            <span>Common taxon names are in {{ language }}.</span>\\n        </h3>\\n        <h3 class=\\\"half-standard-block\\\">\\n            <span>{{ season }}</span>\\n        </h3>\\n\\n        <h3 class=\\\"centred-block standard-block js-intro-text\\\">{{ lessonIntro }}</h3>\\n      </main>\\n\\n    <div class=\\\"scrollable\\\"></div>                \\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container js-home-scrolling-container\\\">\\n    <h1 class=\\\"title standard-block double-centred-block\\\">{{ video.title }}</h1>\\n    <div class=\\\"margin-left margin-right\\\">\\n      <div class=\\\"video\\\">\\n          <div style=\\\"min-height: 1px;\\\"></div>\\n          <iframe\\n              type=\\\"text/html\\\"\\n              id=\\\"embedded-video\\\"\\n              width=\\\"100%\\\"\\n              src=\\\"https://www.youtube.com/embed/{{ video.id }}?enablejsapi=1&playsinline=1&start={{ video.playAt }}\\\"\\n              frameborder=\\\"0\\\"\\n              allowfullscreen>\\n          </iframe>   \\n      </div>\\n    </div>\\n    <div class=\\\"scrollable\\\">\\n        <div class=\\\"one-and-half-standard-block centred-block justify-space-between padding-left\\\">\\n            <div class=\\\"centred-block\\\">\\n                <div class=\\\"margin-right\\\">\\n                    <img width=\\\"48px\\\" height=\\\"48px\\\" src=\\\"{{ video.src }}\\\" alt=\\\"\\\">\\n                </div>\\n                <div class=\\\"vertical-centred-block\\\">\\n                    <div><span class=\\\"hide margin-right\\\" >Created by:</span><span class=\\\"emphasis\\\">{{ video.presenter }}</span></div>\\n                    <!-- <div>\\n                        <span class=\\\"hide margin-right\\\">{{ video.webLabel }}:</span>\\n                        <a class=\\\"underline-link\\\" href=\\\"{{ video.webUrl }}\\\" target=\\\"_blank\\\">Channel</a>\\n                        <span class=\\\"names-badge\\\"> <i class=\\\"fas fa-external-link-alt\\\"></i></span>\\n                    </div> -->\\n                    <div><span class=\\\"hide margin-right\\\" >Location:</span><span class=\\\"font-size-small\\\">{{ video.location }}</span></div>\\n                </div>\\n            </div>\\n            <!-- <div class=\\\"centred-block justify-end padding-right js-lesson-links\\\">\\n            </div> -->\\n        </div>        \\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"standard-block border-bottom double-centred-block\\\"></div>\\n<div class=\\\"tiles-container\\\">\\n    <div class=\\\"squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\">\\n        <div>\\n            <img class=\\\"square\\\"                    \\n            src=\\\"{{ image.medium }}\\\"\\n            data-toggle=\\\"modal\\\" data-target=\\\"#imageModal\\\"\\n            data-item-name=\\\"{{ image.itemName }}\\\"\\n            data-url=\\\"{{ image.url }}\\\" />\\n        </div>              \\n    </div>\\n</div>\\n\\n<div class=\\\"lesson-companion\\\">\\n    <!-- 9 things about Dill: #1 -->\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\">\\n    <div class=\\\"lesson-name\\\" id=\\\"js-input-collection-name\\\">\\n        <input type=\\\"text\\\" value=\\\"{{ collection.name }}\\\">\\n    </div>\\n    <div class=\\\"margin-left lesson-taxa\\\"><span class=\\\"js-lesson-taxa-count\\\">{{ collection.items.length }}</span> <span class=\\\"js-lesson-taxa\\\">{{ collection.taxa }}</span></div>\\n</div>\\n\\n<div class=\\\"selected-species-container\\\">\\n    <div class=\\\"open scrollable js-selected-species-container\\\"></div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-header centred-block btn standard-block\\\">\\n    <div class=\\\"standard-block js-toggle-element\\\">\\n        <div>\\n            <div class=\\\"main-header\\\">\\n                <h2>Lessons</h2>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"margin-right standard-block js-toggle-control\\\">    \\n        <button data-toggle=\\\"modal\\\" data-target=\\\"#createGuide\\\" class=\\\"btn snap-btn margin-right small-text js-create-custom-lesson\\\">Create lesson</button>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list js-lesson-list\\\">\\n    <ul class=\\\"scrollable js-lesson-container\\\" data-toggle=\\\"buttons\\\">\\n    </ul>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li>\\n  <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"relative lesson-list-carousel-item js-lesson-list-carousel-item\\\">\\n      <div class=\\\"landscape double-centred-block\\\">\\n        <div class=\\\"lesson-icon\\\">\\n          <picture>\\n            <source srcset=\\\"https://storage.googleapis.com/snapdragon-222014.appspot.com/dist/1x1-transparent-pixel.png 1w\\\"\\n                    media=\\\"(max-width: 767px)\\\">\\n            <img src=\\\"{{ lesson.icon }}\\\" alt=\\\"{{ lesson.name }}\\\" />\\n          </picture>\\n        </div>\\n      </div>\\n      <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-list-item js-lesson-list-item\\\" data-has-video=\\\"{{ lesson.hasVideo }}\\\">\\n          <div>            \\n              <div class=\\\"lesson-name js-lesson-title\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">\\n                  <span id=\\\"lesson_{{ lesson.id }}\\\" class=\\\"lesson-title margin-right {{ lesson.isCollectionEditableClass }}\\\">{{ lesson.name }}</span>\\n              </div>\\n              <div class=\\\"lesson-taxa\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.taxa }}</div>\\n              <div class=\\\"latin hide-empty js-lesson-video-state\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.videoState }}</div>         \\n          </div> \\n          <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-review js-lesson-review\\\">\\n              <div class=\\\"flex\\\">\\n                  <div class=\\\"centred-block fit-width margin-top\\\">\\n                      <button data-toggle=\\\"modal\\\" data-target=\\\"#glossaryModal\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"vocab test for {{ lesson.name }} lesson\\\" class=\\\"lesson-terms-review {{ lesson.hasTermsClass }} margin-right fit-width js-terms-review-link btn snap-btn smaller-text\\\" data-toggle=\\\"modal\\\" data-target=\\\"#glossaryModal\\\">Vocab test</button>\\n                  </div>\\n                  <div class=\\\"vertical-centred-block relative margin-top\\\">\\n                      <div class=\\\"centred-block\\\">\\n                        <button data-toggle=\\\"modal\\\" data-target=\\\"#lessonModal\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"landscape btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button>\\n                        <button data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"portrait btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button>\\n                        <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"review-spinner hide\\\"><i class=\\\"fas fa-sun slow-spin\\\"></i></span>\\n                      </div>\\n                    <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide-important inline-progress-container js-review\\\">\\n                    <span class=\\\"absolute\\\">&nbsp;</span>\\n                    </span>\\n                    <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide margin-right js-loading-review-message\\\">\\n                        <span><i class=\\\"fas fa-sync slow-spin\\\"></i></span>\\n                    </span>                  \\n                  </div>\\n              </div>\\n          </div>\\n      </div>\\n      <div class=\\\"lesson-list-action-icons\\\">\\n          <div class=\\\"landscape\\\">\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-is-youtube-icon=\\\"true\\\" class=\\\"snap-icon-btn fit-width js-lesson-list-youtube\\\" aria-label=\\\"play video for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fab fa-youtube youtube-icon {{ lesson.hideVideoClass }}\\\"></i>\\n                <i class=\\\"fas fa-align-left youtube-icon {{ lesson.hideTextIntroClass }}\\\"></i>\\n              </button>\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"snap-icon-btn fit-width js-lesson-list-chevron\\\" aria-label=\\\"species list for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fas fa-chevron-down\\\"></i>                \\n              </button>\\n          </div>\\n          <div class=\\\"portrait\\\">\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-is-youtube-icon=\\\"true\\\" class=\\\"snap-icon-btn js-lesson-list-youtube {{ lesson.hideVideoClass }}\\\" aria-label=\\\"play video for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fab fa-youtube youtube-icon\\\"></i>\\n              </button>\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"chevron-icon snap-icon-btn js-lesson-list-chevron {{ lesson.hideTextIntroClass }}\\\" aria-label=\\\"species list for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fas fa-chevron-down\\\"></i>\\n              </button>\\n          </div>\\n      </div>\\n  </div>\\n  <div data-container-id=\\\"{{ lesson.id }}\\\" class=\\\"species-container js-species-container\\\"></div>\\n</li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div>\\n    <div>{{ note.tag }}</div>\\n    <div>{{ note.description }}</div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<table id=\\\"species_list_id_{{ id }}\\\" class=\\\"species-table js-species-list\\\" style=\\\"width: 100%;\\\">\\n    <tbody data-repeat-item=\\\"{{ itemImages }}\\\">\\n        <tr class=\\\"table-row master js-list-item\\\" id=\\\"id_{{ item.id }}\\\">\\n            <td id=\\\"{{ item.name }}\\\" data-snap-index=\\\"{{ item.snapIndex }}\\\">\\n              <button class=\\\"btn snap-icon-btn double-centred-block\\\">\\n                <img \\n                    id=\\\"{{ item.name }}\\\" \\n                    src=\\\"{{ item.small }}\\\" \\n                    alt=\\\"Open gallery to more photos of {{ item.name }}\\\" \\n                    data-toggle=\\\"modal\\\" \\n                    data-item-name=\\\"{{ item.name }}\\\" \\n                    data-target=\\\"#imageModal\\\" \\n                    data-id=\\\"{{ item.name }}\\\"                                 \\n                    data-url=\\\"{{ item.url }}\\\" \\n                    data-rights-holder=\\\"{{ item.rightsHolder }}\\\" \\n                    data-title=\\\"{{ item.name }}\\\"\\n                    data-license=\\\"{{ item.license }}\\\"                                \\n                    data-source=\\\"{{ item.source }}\\\"\\n                    data-provider=\\\"{{ item.provider }}\\\">\\n              </button>\\n            </td>\\n            <td>\\n                <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.name }}\\\" data-vernacular-name=\\\"{{ item.vernacularName }}\\\" data-id=\\\"{{ item.id }}\\\" data-type=\\\"speciesCardLink\\\" data-target=\\\"#cardModal\\\" class=\\\"snap-link-btn underline-link js-test-card-container-link\\\">{{ item.vernacularName }}</button>\\n                <span class=\\\"no-underline-link latin-name\\\">\\n                    <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=\\\"genus\\\" data-genus=\\\"{{ item.genus }}\\\" data-target=\\\"#cardModal\\\" class=\\\"{{ item.genusLinkClass }}\\\">{{ item.genus }}</button> <span>{{ item.species }}</span>\\n                </span>\\n            </td>\\n            <td class=\\\"wide-screen\\\">\\n                <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.taxonomy.family }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=\\\"family\\\" data-family=\\\"{{ item.taxonomy.family }}\\\" data-target=\\\"#cardModal\\\" class=\\\"no-underline-link {{ item.familyLinkClass }}\\\">{{ item.taxonomy.family }}</button>\\n                <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.taxonomy.order }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=\\\"order\\\" data-order=\\\"{{ item.taxonomy.order }}\\\" data-target=\\\"#cardModal\\\" class=\\\"no-underline-link {{ item.orderLinkClass }} js-order-link\\\">{{ item.taxonomy.order }}</button>\\n            </td>\\n            <td class=\\\"{{ item.iconicTaxon }} {{ item.hasTaxonClassName }}\\\">\\n                <span id=\\\"{{ item.id }}\\\" name=\\\"{{ item.name }}\\\"><i class=\\\"{{ item.iconicTaxonIcon }}\\\"></i></span>\\n                <span class=\\\"mushroom-icon {{ item.hideFungiIcon }}\\\"></span>\\n            </td>\\n            <td class=\\\"{{ item.hasVideoClassName }}\\\">\\n                <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width js-youtube\\\" aria-label=\\\"start video from the species {{ item.name }}\\\">\\n                    <i class=\\\"fab fa-youtube youtube-icon\\\" data-name=\\\"{{ item.name }}\\\"></i>\\n                </button>\\n            </td>\\n            <td class=\\\"{{ item.hasVideoClassName }}\\\">\\n                <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width accordion-icon js-accordion\\\" aria-label=\\\"video commentary for the species {{ item.name }}\\\">\\n                  <i data-name=\\\"{{ item.name }}\\\" class=\\\"fas fa-chevron-down\\\"></i>\\n                </button>\\n            </td>\\n        </tr>\\n    </tbody>\\n</table>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\">\\n  <div class=\\\"strip\\\">\\n      <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\">\\n        <span>{{ answer.term }}</span>\\n      </button>\\n  </div>\\n</div>\\n    \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"mixed-specimen-container\\\">\\n    <div class=\\\"margin-bottom\\\"><span>{{ help }}</span></div>\\n    <ul class=\\\"traits-names-txt js-traits-names-txt\\\" data-repeat-trait=\\\"{{ traits }}\\\">\\n        <li>\\n            <img src=\\\"{{ trait.img.url }}\\\" alt=\\\"{{ trait.term }}\\\">\\n            <span>{{ trait.term }}</span>\\n        </li>\\n    </ul>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\">\\n  <li class=\\\"strip\\\">\\n      <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\" data-name=\\\"{{ answer.name }}\\\" data-names=\\\"{{ answer.names }}\\\">\\n          <span>{{ answer.term }}</span>\\n      </button>\\n    </li>\\n</ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\">\\n    <div class=\\\"strip\\\">\\n        <button class=\\\"double-centred-block btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\">\\n            <img width=\\\"25px\\\" height=\\\"25px\\\" src=\\\"{{ answer.img.url }}\\\" alt=\\\"\\\">\\n            <span>{{ answer.term }}</span>\\n        </button>\\n    </div>\\n  </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"species-card-images carousel js-test-card-container-images\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"horizontal-evenly-spaced-block js-no-questions\\\">\\n    <span>You haven't answered any questions yet.</span>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"score-summary-row species\\\">\\n    <div></div>\\n    <div>\\n        <div></div>\\n        <div>\\n            <span>{{ vernacularName }}</span>\\n            <span class=\\\"latin\\\">{{ binomial }}</span>\\n        </div>                \\n    </div>\\n    <div>{{ score }}</div>\\n</div>\\n\\n    <div data-repeat-row=\\\"{{ rows }}\\\">\\n\\n    <button class=\\\"btn snap-icon-btn score-summary-row header\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#{{ row.id }}\\\" aria-expanded=\\\"false\\\" aria-controls=\\\"{{ row.id }}\\\">  \\n        <div data-is-true=\\\"{{ row.success }}\\\">\\n            <i class=\\\"fas fa-check\\\"></i>\\n            <i class=\\\"fas fa-times\\\"></i>\\n        </div>\\n        <div>\\n            <div class=\\\"binomial\\\">{{ row.statement }}</div>\\n            <div>{{ row.questionText }}</div>\\n        </div>\\n        <div>\\n            <i class=\\\"fas fa-chevron-down\\\"></i>\\n        </div>\\n    </button>\\n    \\n    <div id=\\\"{{ row.id }}\\\" class=\\\"collapse score-summary-row in-columns js-collapse\\\" data-repeat-answer=\\\"{{ row.answers }}\\\" >  \\n        <div data-question=\\\"{{ ^.row.question }}\\\">\\n            <div>                    \\n            </div>\\n            <div data-is-true=\\\"{{ answer.isTrue }}\\\" data-is-wrong-answer=\\\"{{ answer.isWrongAnswer }}\\\">\\n                <div data-show-image=\\\"{{ answer.hasImage }}\\\">\\n                    <img data-has-image=\\\"{{ answer.hasImage }}\\\" src=\\\"{{ answer.url }}\\\" alt=\\\"{{ answer.value }}\\\">\\n                </div>\\n                <div>\\n                    <span>{{ answer.value }}</span><span class=\\\"hide-empty margin-left\\\">{{ answer.name }}</span>\\n                </div>\\n                <div></div>\\n            </div>\\n            <div></div>\\n        </div>\\n    </div>\\n\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container score-summary-container js-test-card-container\\\">\\n    <div class=\\\"js-summary-card\\\">\\n        <div class=\\\"test-card-question standard-block centred-block js-test-card-question\\\">            \\n            <div class=\\\"question\\\">\\n                    <div>\\n                        <span class=\\\"hide-empty question-question js-question-question\\\">Quiz progress</span>\\n                        <span class=\\\"hide-empty question-statement\\\"></span>\\n                    </div>\\n                </div>\\n        </div>\\n        <div id=\\\"accordion\\\" class=\\\"score-summary scrollable review-summary\\\">\\n            <div class=\\\"score-summary-row-title\\\">\\n                <div>\\n                    <div class=\\\"double-centred-block\\\">\\n                        <span class=\\\"uppercase\\\">{{ collection.name }}</span>\\n                    </div>\\n                    <div class=\\\"double-centred-block\\\">\\n                        <span>Round {{ lesson.currentRound }} of {{ lesson.rounds }}</span>\\n                    </div>                \\n                </div>\\n            </div>\\n            <div class=\\\"score-summary-footer running-block centred-block\\\">\\n                <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button>\\n            </div>\\n            <div class=\\\"js-score-summary-rows\\\"></div>\\n            <div class=\\\"score-summary-footer running-block centred-block\\\">\\n                <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button>\\n            </div>\\n        </div>    \\n    </div>\\n</div>\\n\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\">\\n    <button class=\\\"btn snap-icon-btn block\\\">\\n      <span class=\\\"given genus\\\">{{ genus }}</span>\\n    </button>\\n    <button class=\\\"btn snap-icon-btn block\\\">\\n      <span class=\\\"species\\\">{{ species }}</span>\\n    </button>\\n</div>\\n<div class=\\\"text-complete-container\\\">\\n    <div class=\\\"margin-bottom landscape\\\">Click to select the correct name:</div>\\n    <div class=\\\"margin-bottom portrait\\\">Tap to select the correct name:</div>\\n    <div class=\\\"pool js-pool\\\" data-repeat-answer=\\\"{{ answers }}\\\">    \\n        <button type=\\\"submit\\\" class=\\\"btn snap-icon-btn block\\\">\\n            <span>{{ answer.value }}</span>\\n        </button>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"js-test-card-container-images species-card-images\\\"></div>\\n<div class=\\\"text-entry\\\">\\n    <input class=\\\"js-txt-input\\\" type=\\\"text\\\" placeholder=\\\"Genus\\\">\\n</div>\\n<div class=\\\"landscape help-txt binomial js-help-txt\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\">\\n    <input disabled class=\\\"js-txt-input\\\" type=\\\"text\\\" placeholder=\\\"Genus\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\">        \\n</div>\\n<div>\\n    <div class=\\\"help-txt binomial margin-left js-help-txt\\\"></div>\\n</div>\\n<div class=\\\"text-entry-container\\\">    \\n    <div class=\\\"js-pool-letters pool margin-left margin-top margin-bottom\\\"></div>\\n    <div class=\\\"horizontal-buttons\\\">\\n        <button class=\\\"btn btn-tertiary js-toggle-keyboard\\\">Enable keyboard</button>\\n        <button class=\\\"btn snap-action-btn js-check-answer\\\">Check answer</button>\\n        <button class=\\\"btn btn-tertiary js-delete-letter\\\">Delete last letter</button>\\n    </div>    \\n</div>\";\n// Exports\nmodule.exports = code;","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./create-guide.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./create-guide.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./create-guide.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}