{"version":3,"sources":["webpack://learn-the-planet/./src/ui/fixtures/settings.js","webpack://learn-the-planet/./src/ui/fixtures/settings-template.html"],"names":["settingsHandler","document","template","title","store","config","delay","languages","renderTemplate","clearCacheBtn","setDelayBtn","setDelayInput","delayTxt","setTimeout","persistor","cookieHandler","window","actions","languagePicker"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAEnCC,UAAQ,CAARA;AAEE,MAAMC,QAAQ,GAAGD,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEAC,UAAQ,CAARA;AAEA,MAAMC,KAAK,GAAGF,QAAQ,CAARA,cAAd,kCAAcA,CAAd;AAEAE,OAAK,CAALA;;AAViC,wBAYdC,yDAZc;AAAA,MAYzBC,MAZyB;;AAcjC,MAAMC,KAAK,GAAGD,MAAM,CAANA,eAAd;AAEA,MAAME,SAAS,GAAGF,MAAM,CAAxB;AAEAG,uEAAc,CAAC;AAAEF,SAAK,EAAP;AAASC,aAAS,EAATA;AAAT,GAAD,EAAuBL,QAAQ,CAA/B,SAAyCD,QAAQ,CAARA,cAAvDO,4BAAuDP,CAAzC,CAAdO;AAEA,MAAMC,aAAa,GAAGR,QAAQ,CAARA,cAAtB,qBAAsBA,CAAtB;AACA,MAAMS,WAAW,GAAGT,QAAQ,CAARA,cAApB,mBAAoBA,CAApB;AACA,MAAMU,aAAa,GAAGV,QAAQ,CAARA,cAAtB,qBAAsBA,CAAtB;AACA,MAAMW,QAAQ,GAAGX,QAAQ,CAARA,cAAjB,gBAAiBA,CAAjB;AAEAA,UAAQ,CAARA;AAEAW,UAAQ,CAARA,YAAqBN,KAAK,KAALA,8FAArBM,WAAqBN,CAArBM;AAIAH,eAAa,CAAbA,0BAAwC,YAAM;AAC1CA,iBAAa,CAAbA;AACAI,cAAU,CAAC,YAAM;AACbC;AACAL,mBAAa,CAAbA;AACAM;AACAF,gBAAU,CAAC,YAAM;AACbA,kBAAU,CAAC,YAAM;AACbG,gBAAM,CAANA;AADM,WAAVH,GAAU,CAAVA;AADM,SAAVA,GAAU,CAAVA;AAJM,OAAVA,IAAU,CAAVA;AAFJJ;AAcAC,aAAW,CAAXA,0BAAsC,YAAM;AACxCA,eAAW,CAAXA;AACAG,cAAU,CAAC,YAAM;AACb,UAAMP,KAAK,GAAGK,aAAa,CAA3B;AACAN,YAAM,CAANA,eAAsBC,KAAK,GAA3BD;AACAY;AACAP,iBAAW,CAAXA;AACAE,cAAQ,CAARA,YAAqBN,KAAK,KAALA,wFAArBM,WAAqBN,CAArBM;AALM,OAAVC,GAAU,CAAVA;AAFJH;AAaAQ,sFAAc,SAASjB,QAAQ,CAARA,cAAT,kCAASA,CAAT,EAAqE,kBAAY;AAC3FgB;AADJC,GAAc,CAAdA;AA1DG,E;;;;;;;;;;;;;ACVP;AACA,6nBAA6nB,SAAS;AACtoB;AACA,sB","file":"src_ui_fixtures_settings_js.bundle.js","sourcesContent":["import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport settingsTemplate from 'ui/fixtures/settings-template.html';\n\nexport const settingsHandler = () => {\n    \n  document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n    \n    template.innerHTML = settingsTemplate;\n    \n    const title = document.querySelector('#basicModal .js-modal-text-title');\n\n    title.innerHTML = '<header>Snapdragon settings</header>';\n\n    const { config } = store.getState();\n\n    const delay = config.callbackTime/1000;\n\n    const languages = config.languages;\n\n    renderTemplate({ delay, languages }, template.content, document.querySelector('#basicModal .js-modal-text'));\n    \n    const clearCacheBtn = document.querySelector('.js-clear-cache-btn');\n    const setDelayBtn = document.querySelector('.js-set-delay-btn');\n    const setDelayInput = document.querySelector('.js-set-delay-input');\n    const delayTxt = document.querySelector('.js-delay-text');\n\n    document.querySelector('#basicModal .modal-body').classList.remove('bird-song-bg');\n\n    delayTxt.innerHTML = delay === 1\n    ? `The current delay is ${delay} second.`\n    : `The current delay is ${delay} seconds.`;\n\n    clearCacheBtn.addEventListener('click', () => { \n        clearCacheBtn.innerText = 'Clearing cache…';\n        setTimeout(() => {\n            persistor.purge();\n            clearCacheBtn.innerText = 'Cache cleared';\n            cookieHandler.removeFirstTimeVisitorCookie();\n            setTimeout(() => {                                \n                setTimeout(() => {                    \n                    window.location.reload(true);\n                }, 500);\n            }, 500);\n        }, 1000);\n    });\n\n    setDelayBtn.addEventListener('click', () => {\n        setDelayBtn.innerHTML = 'Setting delay…';\n        setTimeout(() => {\n            const delay = setDelayInput.value;\n            config.callbackTime = delay * 1000;\n            actions.boundUpdateConfig(config);\n            setDelayBtn.innerHTML = 'Set delay';\n            delayTxt.innerHTML = delay === '1'\n                ? `Delay updated to ${delay} second.`\n                : `Delay updated to ${delay} seconds.`;\n        }, 500);        \n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        actions.boundUpdateConfig(config);\n    });\n};","// Module\nvar code = \"<div class=\\\"double-standard-block vertical-centred-block\\\">\\n    <p class=\\\"portrait\\\">Clear all data (and delete your score).</p>\\n    <p class=\\\"landscape centred-block standard-block\\\">Clear all data (and delete your score).</p>\\n    <button class=\\\"btn snap-action-btn js-clear-cache-btn\\\">Clear all data</button>\\n</div>\\n\\n<hr>\\n\\n<div class=\\\"half-standard-block centred-block\\\">Time for answer to remain visible:</div>\\n<div class=\\\"delay-slider\\\">\\n    <div class=\\\"standard-block double-centred-block\\\">\\n        <span>0 secs</span> <input class=\\\"js-set-delay-input\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"5\\\" value=\\\"{{ delay }}\\\"><span> 5 secs</span>\\n    </div>\\n    <button class=\\\"btn snap-action-btn js-set-delay-btn\\\">Set delay</button>\\n    <div class=\\\"half-standard-block centred-block js-delay-text\\\"></div>\\n</div>\\n\\n<hr class=\\\"portrait\\\">\\n\\n<div class=\\\"portrait js-language-selection-container\\\"></div>\\n\\n<hr class=\\\"portrait\\\">\\n\\n<div class=\\\"portrait email centred-block\\\">\\n    <a target=\\\"_blank\\\" href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\">\\n        <i class=\\\"fas fa-envelope\\\"></i>        \\n    </a>\\n    <span class=\\\"margin-left\\\">Contact Snapdragon</span>\\n</div>\\n\\n<!-- <img class=\\\"landscape\\\" src=\\\"https://api.thegreenwebfoundation.org/greencheckimage/www.learn-the-planet.com\\\" alt=\\\"This website is hosted Green - checked by thegreenwebfoundation.org\\\"> -->\";\n// Exports\nmodule.exports = code;"],"sourceRoot":""}