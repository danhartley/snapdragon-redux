{"version":3,"sources":["webpack://learn-the-planet/./src/api/firebase/credentials.js","webpack://learn-the-planet/./src/api/firebase/firestore.js","webpack://learn-the-planet/./src/api/glossary/lichen.js","webpack://learn-the-planet/./src/api/inat/inat.js","webpack://learn-the-planet/./src/api/snapdragon/iconic-taxa.js","webpack://learn-the-planet/./src/api/snapdragon/infraspecifics.js","webpack://learn-the-planet/./src/api/snapdragon/non-taxa.js","webpack://learn-the-planet/./src/api/traits/trait-types.js","webpack://learn-the-planet/./src/api/traits/traits-for-tests.js","webpack://learn-the-planet/./src/geo/geo.js","webpack://learn-the-planet/./src/index-helpers/media-helper.js","webpack://learn-the-planet/./src/index.js","webpack://learn-the-planet/./src/redux/actions/action-creators.js","webpack://learn-the-planet/./src/redux/actions/action-types.js","webpack://learn-the-planet/./src/redux/middleware/logger.js","webpack://learn-the-planet/./src/redux/middleware/timeoutScheduler.js","webpack://learn-the-planet/./src/redux/observe-store.js","webpack://learn-the-planet/./src/redux/reducers/config-reducer.js","webpack://learn-the-planet/./src/redux/reducers/deck-reducers.js","webpack://learn-the-planet/./src/redux/reducers/initial-state/initial-progress-state.js","webpack://learn-the-planet/./src/redux/reducers/layout-reducers.js","webpack://learn-the-planet/./src/redux/reducers/lesson-reducers.js","webpack://learn-the-planet/./src/redux/reducers/progress-reducers.js","webpack://learn-the-planet/./src/redux/reducers/quick-fire-reducers.js","webpack://learn-the-planet/./src/redux/reducers/species-reducers.js","webpack://learn-the-planet/./src/redux/store.js","webpack://learn-the-planet/./src/redux/subscriptions.js","webpack://learn-the-planet/./src/snapdragon-config/lesson-config.js","webpack://learn-the-planet/./src/snapdragon-config/lesson-plans.js","webpack://learn-the-planet/./src/snapdragon-config/plans/landscape/landscape-custom.js","webpack://learn-the-planet/./src/snapdragon-config/plans/landscape/landscape-fungi.js","webpack://learn-the-planet/./src/snapdragon-config/plans/landscape/landscape-static.js","webpack://learn-the-planet/./src/snapdragon-config/plans/portrait/portrait-static.js","webpack://learn-the-planet/./src/snapdragon-config/screen-layouts.js","webpack://learn-the-planet/./src/snapdragon-config/screen-panels.js","webpack://learn-the-planet/./src/snapdragon-config/snapdragon-iconic-taxa.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/bonus-test-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/birdsong-test.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/definition-test.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/lookalike-test.js","webpack://learn-the-planet/./src/snapdragon-engine/bonus/tests/trait-test.js","webpack://learn-the-planet/./src/snapdragon-engine/lesson-plan-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/lesson-planner.js","webpack://learn-the-planet/./src/snapdragon-engine/pool-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/provider/provider-test-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/round-plan-handler.js","webpack://learn-the-planet/./src/snapdragon-engine/round-planner.js","webpack://learn-the-planet/./src/ui/create-guide-modal/categories.js","webpack://learn-the-planet/./src/ui/create-guide-modal/common/save-guide.js","webpack://learn-the-planet/./src/ui/create-guide-modal/common/snapdragon-switch.js","webpack://learn-the-planet/./src/ui/create-guide-modal/create-guide.js","webpack://learn-the-planet/./src/ui/create-guide-modal/createGuide.js","webpack://learn-the-planet/./src/ui/create-guide-modal/inat-user.js","webpack://learn-the-planet/./src/ui/create-guide-modal/initialise-lesson.js","webpack://learn-the-planet/./src/ui/create-guide-modal/location.js","webpack://learn-the-planet/./src/ui/create-guide-modal/species-editor.js","webpack://learn-the-planet/./src/ui/create-guide-modal/species-in-guide-editor.js","webpack://learn-the-planet/./src/ui/create-guide-modal/species-picker.js","webpack://learn-the-planet/./src/ui/create-guide-modal/species-search-options.js","webpack://learn-the-planet/./src/ui/dom.js","webpack://learn-the-planet/./src/ui/fixtures/headers.js","webpack://learn-the-planet/./src/ui/fixtures/login.js","webpack://learn-the-planet/./src/ui/fixtures/navigation.js","webpack://learn-the-planet/./src/ui/fixtures/score.js","webpack://learn-the-planet/./src/ui/helpers/collection-handler.js","webpack://learn-the-planet/./src/ui/helpers/cookie-handler.js","webpack://learn-the-planet/./src/ui/helpers/data-checking.js","webpack://learn-the-planet/./src/ui/helpers/enum-helper.js","webpack://learn-the-planet/./src/ui/helpers/function-lookups.js","webpack://learn-the-planet/./src/ui/helpers/icon-handler.js","webpack://learn-the-planet/./src/ui/helpers/image-handler.js","webpack://learn-the-planet/./src/ui/helpers/inat-autocomplete.js","webpack://learn-the-planet/./src/ui/helpers/location-helper.js","webpack://learn-the-planet/./src/ui/helpers/logging-handler.js","webpack://learn-the-planet/./src/ui/helpers/score-handler.js","webpack://learn-the-planet/./src/ui/helpers/templating.js","webpack://learn-the-planet/./src/ui/helpers/test-handler.js","webpack://learn-the-planet/./src/ui/helpers/traits-handler.js","webpack://learn-the-planet/./src/ui/screens/bonus/bonus-specimen-tiles.js","webpack://learn-the-planet/./src/ui/screens/bonus/bonus-test.js","webpack://learn-the-planet/./src/ui/screens/cards/card.js","webpack://learn-the-planet/./src/ui/screens/cards/non-taxon-card-specimen-tiles.js","webpack://learn-the-planet/./src/ui/screens/cards/non-taxon-card.js","webpack://learn-the-planet/./src/ui/screens/cards/taxon-card.js","webpack://learn-the-planet/./src/ui/screens/cards/test-card-modal-handler.js","webpack://learn-the-planet/./src/ui/screens/cards/test-card.js","webpack://learn-the-planet/./src/ui/screens/common/badge.js","webpack://learn-the-planet/./src/ui/screens/common/calendar.js","webpack://learn-the-planet/./src/ui/screens/common/image-slider.js","webpack://learn-the-planet/./src/ui/screens/common/inat-box.js","webpack://learn-the-planet/./src/ui/screens/common/info-detail-slider.js","webpack://learn-the-planet/./src/ui/screens/common/info-slider.js","webpack://learn-the-planet/./src/ui/screens/common/language-selection.js","webpack://learn-the-planet/./src/ui/screens/common/linked-taxa.js","webpack://learn-the-planet/./src/ui/screens/common/look-alikes.js","webpack://learn-the-planet/./src/ui/screens/common/rights-attribution.js","webpack://learn-the-planet/./src/ui/screens/common/taxa-box.js","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-text.js","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-video.js","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro.js","webpack://learn-the-planet/./src/ui/screens/home/home.js","webpack://learn-the-planet/./src/ui/screens/landscape/specimen-tiles.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-custom.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-edit.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-event-handler.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-header.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-scroll-handler.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-state-handler.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson-state-helper.js","webpack://learn-the-planet/./src/ui/screens/lists/lesson.js","webpack://learn-the-planet/./src/ui/screens/lists/species-list-definition-insert.js","webpack://learn-the-planet/./src/ui/screens/lists/species-list.js","webpack://learn-the-planet/./src/ui/screens/lists/species-table.js","webpack://learn-the-planet/./src/ui/screens/lists/video-handler.js","webpack://learn-the-planet/./src/ui/screens/media/landscape/media-players.js","webpack://learn-the-planet/./src/ui/screens/multichoice/horizontal-strips.js","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question.js","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler.js","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question.js","webpack://learn-the-planet/./src/ui/screens/multichoice/multi-strips.js","webpack://learn-the-planet/./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined.js","webpack://learn-the-planet/./src/ui/screens/progress/history.js","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-handler.js","webpack://learn-the-planet/./src/ui/screens/progress/score-summary.js","webpack://learn-the-planet/./src/ui/screens/progress/summary.js","webpack://learn-the-planet/./src/ui/screens/text-entry/species-text-entry.js","webpack://learn-the-planet/./src/ui/screens/text-entry/text-complete.js","webpack://learn-the-planet/./src/ui/screens/text-entry/text-entry.js","webpack://learn-the-planet/./src/ui/setup/next-item.js","webpack://learn-the-planet/./src/ui/setup/next-layout.js","webpack://learn-the-planet/./src/ui/setup/next-lesson.js","webpack://learn-the-planet/./src/ui/setup/setup-handler.js","webpack://learn-the-planet/./src/wikipedia/wiki-modal.js","webpack://learn-the-planet/./src/wikipedia/wiki.js","webpack://learn-the-planet/./src/xeno-canto/birdsong.js","webpack://learn-the-planet/./src/quiz/style.scss","webpack://learn-the-planet/./src/ui/css/common.css","webpack://learn-the-planet/./src/ui/css/groups/create-guide.css","webpack://learn-the-planet/./src/ui/css/non-main.css","webpack://learn-the-planet/./src/ui/css/snapdragon-colours.css","webpack://learn-the-planet/./src/ui/css/snapdragon-media.css","webpack://learn-the-planet/./src/ui/css/snapdragon.css","webpack://learn-the-planet/./src/ui/css/species-list.css","webpack://learn-the-planet/./src/img/powered_by_google_on_white_hdpi.png","webpack://learn-the-planet/./src/index-helpers/modals.html","webpack://learn-the-planet/./src/ui/create-guide-modal/categories-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/common/actions-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/inat-user-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/initialise-lesson-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/location-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/species-editor-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/species-in-guide-editor-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/species-picker-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/species-search-options-template.html","webpack://learn-the-planet/./src/ui/create-guide-modal/species-summary-template.html","webpack://learn-the-planet/./src/ui/fixtures/login-template.html","webpack://learn-the-planet/./src/ui/fixtures/logout-template.html","webpack://learn-the-planet/./src/ui/fixtures/navigation-left-template.html","webpack://learn-the-planet/./src/ui/fixtures/navigation-portrait-template.html","webpack://learn-the-planet/./src/ui/fixtures/navigation-right-template.html","webpack://learn-the-planet/./src/ui/screens/cards/card-template.html","webpack://learn-the-planet/./src/ui/screens/cards/non-taxon-card-template.html","webpack://learn-the-planet/./src/ui/screens/cards/taxon-card-template.html","webpack://learn-the-planet/./src/ui/screens/cards/test-card-template.html","webpack://learn-the-planet/./src/ui/screens/common/audio-media-template.html","webpack://learn-the-planet/./src/ui/screens/common/badge-template.html","webpack://learn-the-planet/./src/ui/screens/common/calendar-template.html","webpack://learn-the-planet/./src/ui/screens/common/id-box-template.html","webpack://learn-the-planet/./src/ui/screens/common/image-slider-template.html","webpack://learn-the-planet/./src/ui/screens/common/inat-box-template.html","webpack://learn-the-planet/./src/ui/screens/common/info-detail-slider-template.html","webpack://learn-the-planet/./src/ui/screens/common/info-slider-template.html","webpack://learn-the-planet/./src/ui/screens/common/language-selection-template.html","webpack://learn-the-planet/./src/ui/screens/common/linked-taxa-lookalike-template.html","webpack://learn-the-planet/./src/ui/screens/common/linked-taxa-relationship-template.html","webpack://learn-the-planet/./src/ui/screens/common/look-alikes-link-template.html","webpack://learn-the-planet/./src/ui/screens/common/rights-attribution-template.html","webpack://learn-the-planet/./src/ui/screens/common/taxa-box-template.html","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-text-template.html","webpack://learn-the-planet/./src/ui/screens/home/home-lesson-intro-video-template.html","webpack://learn-the-planet/./src/ui/screens/landscape/specimen-tiles-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-edit-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-header-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-list-template.html","webpack://learn-the-planet/./src/ui/screens/lists/lesson-template.html","webpack://learn-the-planet/./src/ui/screens/lists/species-list-definition-insert.html","webpack://learn-the-planet/./src/ui/screens/lists/species-table-template.html","webpack://learn-the-planet/./src/ui/screens/multichoice/horizontal-strips.html","webpack://learn-the-planet/./src/ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html","webpack://learn-the-planet/./src/ui/screens/multichoice/multi-strips-template.html","webpack://learn-the-planet/./src/ui/screens/multichoice/multi-strips-with-images.html","webpack://learn-the-planet/./src/ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-no-row-template.html","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-row-template.html","webpack://learn-the-planet/./src/ui/screens/progress/score-summary-template.html","webpack://learn-the-planet/./src/ui/screens/text-entry/text-complete-template.html","webpack://learn-the-planet/./src/ui/screens/text-entry/text-entry-portrait-templates.html","webpack://learn-the-planet/./src/ui/screens/text-entry/text-entry-templates.html","webpack://learn-the-planet/./src/quiz/style.scss?d170","webpack://learn-the-planet/./src/ui/css/common.css?e333","webpack://learn-the-planet/./src/ui/css/groups/create-guide.css?b011","webpack://learn-the-planet/./src/ui/css/non-main.css?e9b0","webpack://learn-the-planet/./src/ui/css/snapdragon-colours.css?41d5","webpack://learn-the-planet/./src/ui/css/snapdragon-media.css?3170","webpack://learn-the-planet/./src/ui/css/snapdragon.css?f800","webpack://learn-the-planet/./src/ui/css/species-list.css?f1c8"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","db","getSpeciesWhere","key","props","operator","value","limit","speciesRef","querySnapshot","docs","doc","getSpecies","item","getSpeciesNames","speciesPropertiesRef","getTaxaNames","taxaPropertiesRef","getSpeciesByIconicTaxon","number","iconicTaxon","isLichen","eolId","species","random","utils","randomId","getRandomId","getSpeciesByName","force","itemName","items","getTaxaWhere","language","taxaRef","getFamiliesByIconicTaxon","config","getTaxonByName","taxon","getAsyncTraitsByNameAndCollection","collection","languageTraits","traits","getTraitsBySpeciesName","resolve","getTraitsByTaxonName","getBirdsong","storage","storageRef","url","addSpecies","license","image","photographer","rightsHolder","source","title","docRef","updateSpecies","updatedSpecies","speciesDocRef","updateSpeciesNames","names","deleteSpeciesByName","addTraits","trait","speciesTraitsRef","addSpeciesRelationship","batch","readyBatch","addPhotos","images","deleteSpeciesTraitField","removeField","getRandomSpecies","getDefinition","terms","term","definitions","definition","getTraitDefinitions","entry","addTaxon","getSpeciesInParallel","sp","description","time","questionIds","quickId","logAPIError","getSpeciesByNameInParallel","addCollection","updateCollection","collectionRef","console","message","details","success","getCollectionsWhere","getCollections","addQuestion","getQuestionsWhere","addDefinition","getDefinitionsWhere","id","getDefinitionById","data","getBatchDefinitionsById","getDefinitionsByTaxa","taxa","updateDefinition","getUnits","langage","unitsRef","getEpithets","epithetssRef","firestore","chars","autoId","i","Math","lichen","wiki","level","branch","technical","inatListeners","RECORDS_PER_PAGE","unsubscribe","l","listenToInatRequests","getBasePath","month","perPage","basePath","getInatSpecies","speciesNames","snapdragonSpeciesNames","iconicTaxaKeys","Object","getIconicTaxa","iconicTaxa","logError","getUserOrProjectKeyValuePair","param","parameter","getAllInatObservations","snapdragonSpecies","records","keepGoing","page","getInatObservations","recordsFromThisRequest","matches","contains","record","noMoreRecords","recordsCountReached","snapLog","loadSpeciesInParallel","observation","observationCount","iconic_taxon_name","lat","lng","placeId","radius","parseInt","inat","params","fetch","json","listener","numberOfRequests","observations","take","place","taxonName","FUNGI","PLANTAE","AVES","AMPHIBIA","REPTILIA","MAMMALIA","INSECTA","ARACHNIDA","LEPIDOPTERA","matchTaxonKey","rank","taxonomy","matchTaxon","findRankByIconicTaxon","matchIcon","matchRank","icon","infraspecifics","name","subspecies","variety","eol","group","form","nonTaxaGroup","LICHEN_FORM","getNonTaxa","SD","type","LOW","examples","BIRDS_NEST","BIOINDICATOR","genera","HIGH","traitValuesHandler","isEmpty","store","unitsArray","unitObjects","unit","units","actions","getTraitsForTests","alreadyTestedTraits","excludedTraits","traitsHandler","traitsPool","help","question","answers","overrides","typedItemTraits","GOOGLE_ACCESS_KEY","process","getHTML5Location","position","navigator","getLocation","listeners","parseMapBoxPlace","locality","f","region","country","placePromise","updatedPlace","getMapBoxPlace","token","longitude","latitude","response","getPlace","coordinates","listenToPlaceChange","IPCountryLookup","ACCESS_KEY","country_code","country_name","err","LocationLookup","city","state_prov","IPLookup","ip","getIPLocation","candidates","requireNewSession","isScriptReady","current_term","predictions","createScriptRequest","script","document","callback","GoogleAutocomplete_Original","getPredictions","displaySuggestions","status","google","alert","service","input","SESSION_TOKEN","src","GoogleAutocomplete","GooglePlaceDetails","request","library","dom","handleWindowResize","setWindowHeight","iOS","window","iw","screen","ih","verticalHeight","fixtures","parseFloat","getComputedStyle","largeImage","horizontalWidth","loadModalHTML","template","parent","renderTemplate","onLoadHandler","setTimeout","Sentry","dsn","lastVisitedCookie","cookieHandler","Date","currentCounter","statePlans","collections","lessonPlan","counter","index","isLessonPaused","cloudCollections","subscription","renderNavigation","renderLoginChanges","updateConfig","initialiseConfig","initialisedConfig","glossary","lessonModalHandler","makeActionCreator","meta","changeLessonPlans","types","changeLessonPlan","nextLesson","updateScore","updateTraitScore","nextLayout","nexItem","endRevision","updateHistory","userProgress","resetCollection","updateCollections","changeCollectionItems","nextRound","nextLevel","stopStartLesson","selectCollection","updateUnits","updateUser","updateLesson","saveLesson","removeSavedLesson","updateVideoPlayer","createQuickFire","updateQuickFire","createGlossary","clickEvent","updateDecks","updateDeck","nextDeck","nextCard","updateDeckState","updateDeckScore","updateDeckScoreHistory","updateDeckSettings","clearDeckScoreHistory","boundchangeLessonPlan","boundchangeLessonPlans","boundNextLesson","boundAsyncNextLesson","asyncNextLesson","dispatch","boundUpdateScore","boundUpdateTraitScore","boundNextLayout","boundNextItem","delay","boundEndRevision","boundUpdateHistory","boundSaveUserProgress","boundUpdateCollection","boundResetCollection","boundUpdateCollections","boundUpdateCollectionItems","boundNextRound","boundNextLevel","boundUpdateConfig","boundStopStartLesson","boundSelectCollection","boundUpdateLanguage","boundUpdateUnits","boundUpdateUser","boundUpdateLesson","boundSaveLesson","boundRemoveSavedLesson","boundUpdateVideoPlayer","boundCreateQuickFire","boundUpdateQuickFire","boundCreateGlossary","boundClickEvent","boundUpdateDecks","boundUpdateDeck","boundNextDeck","boundNextCard","boundUpdateDeckState","boundUpdateDeckScore","boundUpdateDeckScoreHistory","boundUpdateDeckSettings","boundClearDeckScoreHistory","UPDATE_CONFIG","STOP_START_LESSON","CHANGE_LESSON_PLANS","CHANGE_LESSON_PLAN","SELECT_COLLECTION","NEXT_ROUND","NEXT_LESSON","NEXT_LAYOUT","NEXT_ITEM","SAVE_USER_PROGRESS","UPDATE_COLLECTION","UPDATE_COLLECTIONS","RESET_COLLECTION","UPDATE_SCORE","UPDATE_TRAIT_SCORE","END_REVISION","UPDATE_HISTORY","UPDATE_COLLECTION_ITEMS","NEXT_LEVEL","UPDATE_LANGUAGE","UPDATE_UNITS","UPDATE_USER","UPDATE_LESSON","SAVE_LESSON","REMOVE_LESSON","UPDATE_VIDEO_PLAYER","UPDATE_QUICKFIRE","CREATE_QUICKFIRE","CREATE_GLOSSARY","CLICK_EVENT","UPDATE_DECK","UPDATE_DECKS","NEXT_DECK","NEXT_CARD","UPDATE_DECK_STATE","UPDATE_DECK_SCORE","UPDATE_DECK_SCORE_HISTORY","UPDATE_DECK_SETTINGS","CLEAR_DECK_SCORE_HISTORY","logger","result","next","timeoutScheduler","action","timeoutId","clearTimeout","observeStore","currentState","hasStateSignificantlyChanged","nextState","select","areEqual","onChange","handleChange","state","initialConfig","lang","user","userAction","decks","count","deck","clone","currentCard","c","deckState","enums","deckScore","total","correct","incorrect","deckScoreHistory","score","deckSettings","resetScore","binomial","answer","fails","passes","statement","mode","totalPassPoints","totalPoints","progressState","lessonPlans","layout","initialState","currentRound","rounds","isNextRound","lesson","layoutName","isLessonComplete","layoutCounter","isLevelComplete","layoutCount","lessons","savedLessonNames","isLessonRehydrated","isLessonSelected","itemId","questionText","bonusScores","guid","history","scores","historyCorrect","historyTotal","videoPlayer","cleanAndReturnIncomingState","quickFire","cols","col","isCollectionUpdate","getNextRound","itemIndex","nextItem","bonusLayout","reducer","combineReducers","persistConfig","persistedReducer","persistReducer","composeEnhancers","createStore","applyMiddleware","persistor","persistStore","rootReducer","subscriptions","add","sub","existingSub","getByName","role","remove","removeByName","getByRole","getAll","removeAllQuizScreenSubs","screens","removeAllQuizLayoutSubs","checkRequired","isRequired","isReviewingLesson","lessonStateHelper","reviewLayouts","addSubs","func","funcByName","isSubscriptionRequired","printAllSubs","moduleSize","callbackTime","callbackDelay","excludeRevision","isPortraitMode","isLandscapeMode","languages","guide","locationLongLat","locationPlace","locationType","speciesRange","inatId","season","noOfRecords","guideMode","landscapeBirds","portraitBirds","L","portraitFungi","portrait","portraitLichens","portraitCustom","portraitCustom2","landscapeCustom","levels","layouts","bonusLayouts","landscapeCustom2","landscapeFungi","landscapeLichens","landscapeStatic","landscapeStaticTaxonGroup","landscapeStaticProviderQuestionsOnly","portraitStatic","portraitStaticTaxonGroup","specimenImages","panels","speciesCard","vernaculars","scientifics","text","leaf","leafName","family","familyStrips","nonTaxon","textComplete","cultivar","cultivarCard","epithets","specimenCommonMatch","specimenLatinMatch","definitionCard","traitProperty","symbioticProperty","lookalikeProperty","traitImages","nonTaxonSpecimenTiles","mixedSpecimenQuestions","mixedSpecimensLeft","mixedSpecimensRight","summary","birdsong","mediaPlayers","mixedTraitLeft","mixedTraitRight","providerHorizontalStripQuestions","speciesIdentification","mixedSpeciesMatch","kind","points","given","requirement","speciesRevision","taxonRevision","nonTaxonRevision","definitionRevision","latinToCommonMatch","commonToLatinMatch","speciesIdentificationMatch","textCompleteGenus","multiSpecimenCommonMatch","multiSpecimenLatinMatch","traitPropertyMatch","bonus","lookalikePropertyMatch","symbioticPropertyMatch","familyMatch","cultivarMatch","familyStripsMatch","genusEntry","speciesEntry","speciesGenusEntry","leafEntry","textCompleteSpecies","commonEntry","latinEpithets","glossaryTerms","cultivars","mixedSpecimenImages","mediaMatch","mixedTraitImages","providerHorizontalStrip","propertyTrait","domain","all","common","getTests","itemsInThisRound","addLayoutToTest","lessonReadyTests","traitTest","lessonName","levelName","getTraitTypeTests","getTraitTests","getTraitTypeBirdsongTests","getBirdsongTests","getTraitTypeLookalikeTests","getLookalikeTests","getDefinitionTypeTests","getDefinitionTests","traitTests","birdsongTests","lookalikeTests","definitionTests","getResolvedPromises","promises","Promise","testGroups","tests","g","flatten","bonusHandler","getBirdsongTest","birds","bird","birdNames","vernacularName","getDefinitionTest","alternatives","d","init","getLookalikeTest","getItemLookalikes","lookaliketraits","lookalikes","getLookalikes","getNextRoundLayouts","getCurrentLevelFromLessonPlan","getLayouts","currentLevel","goToNextLevelThatHasLayouts","iterateOverLevelsCheckingForAvailableLayouts","increment","levelId","createLessonPlan","nextRoundLayoutTemplates","createNextRound","lessonPlanner","getPoolItems","poolSize","otherItems","getItemsFromCollection","taxonicMatches","speciesPool","ci","isException","getItemLayouts","itemQuestions","speciesQuestions","sq","itemsQuestions","providerHandler","getRoundItems","start","end","roundHandler","itemsCountToDate","itemsLeft","layoutsToAdd","roundItemNames","mixedTraitHandler","requiredTraitValues","requiredTraits","traitsToIgnore","addLayout","t","speciesName","providerQuestions","providerLayouts","provider","lessonLayouts","itemIndices","bonusTests","summaryLayout","DOM","rightBody","layoutIndex","roundScoreCount","accumulator","updatedLessonPlan","updatedCollection","updatedLesson","renderCategories","createGuide","filterSelectedClass","modal","icons","filterId","fungiIcon","category","filter","event","commonName","saveGuide","update","chosen","handleSaveEvent","splitLocation","returnTaxonIcon","switchHandler","startingPosition","switchControl","idSwitch","leftText","rightText","switcher","createGuideHandler","handleNextStepAction","step","element","handler","handlePreviousStepAction","prevStep","onCloseModalListeners","onCreateCustomLesson","CreateGuide","nextStep","disabled","className","nextSteps","s","ps","options","renderSpeciesSearchOptions","renderLocation","renderInatUser","chosenOnes","renderSpeciesPicker","container","setConfig","initialiseLesson","option","previousStepProperties","byType","inatIdentityInput","handlerInatIdentityInput","autocompleteRef","inatAutocomplete","e","saveInatId","switchCallback","feedback","interval","setInterval","nextStepActionArrow","viewGuideIcon","back","viewTaxaIcon","renderLessonSummary","requestType","requestArgs","createGuideModal","Modal","editSpecies","selectedSpeciesDisplay","speciesInGuideEditor","editableCollectionName","lessonStateHandler","initLesson","collectionToLoad","updatedCounter","OrdinalSuffixOf","j","k","initPicker","addingExtraSpecies","updatedConfig","hasVideo","video","months","observableMonths","defaultNoOfRecords","defaultLocationTxt","setLocationLongLatBtn","locationPlaceInput","handleLocationPlaceInput","saveLocation","range","rangeTxt","slider","updateSlider","currentType","selectedText","selectedId","geocoderResult","long","listenersToAddedSpecies","addListenerToAddedSpecies","speciesEditor","addedSpecies","addSpeciesToList","selectedSpecies","savedSpeciesNames","label","autocomplete","suggestions","n","onSelect","minLength","debounceWaitMs","highlightedText","checkBox","removedSpecies","spinner","getTaxa","ss","speciesCount","module","header","nextStepName","lessonOptions","languagePicker","warning","leftGrid","leftHeader","leftBody","leftFooter","leftHeaderTxt","specimenRptr","rightGrid","rightHeader","rightHeaderTxt","rightHeaderScoreTxt","rightRptrSummary","rightBodyBottom","rightFooter","renderHeaders","progressBar","questionCount","renderLogin","email","footer","auth","logOut","password","logIn","notLoggedIn","error","renderLoggedIn","loggedIn","loggedOut","navIcons","clickedIcon","toggleIconOnOff","isIconActive","onLoadState","lessonsIcon","newScreenActions","loginIcon","renderScore","getItems","getSpeciesDetailsInParallel","loadCollection","collectionIsUnchanged","insecta","lepidoptera","noninsecta","loadCollectionItemProperties","loadedCollection","families","orders","familyTaxa","orderTaxa","genusTaxa","getGenusTaxa","genusTaxon","getFamilyTaxa","familyTaxon","getOrderTaxa","orderTaxon","getFamilyNames","findRank","taxonRank","itemProperties","loadTraitsInParallel","itemTraits","collectionHandler","FIRST_TIME","LAST_VISITED","TOO_MANY_DAYS","SECURE","setFirstTimeVisitorCookie","isFirstVisit","cookie","setLastVisitedCookie","setLastVisited","hasUserBeenAwayTooLong","lastVisited","readCookie","timeDiff","daysDiff","beenGoneTooLong","isFirstTimeVisitor","removeFirstTimeVisitorCookie","nameEQ","ca","cookieValue","cookieToAdd","getVernacularName","useShortForm","namePart","englishShortForm","languageSortForm","shortForm","englishNames","english","capitalisedNames","capitalisedName","getGenusName","getSpeciesName","getTaxonProp","propValue","p","getNestedTaxonProp","prop1Value","prop2Value","output","trimLatinName","familyVernacularNames","getTrait","obj","formatter","acc","getActiveTrait","traitValues","traitName","vernacularNamesForItems","itemNames","v","getVernacularNames","answersFromList","statsReducer","getFamilyStats","getFileNameFromImageUrl","pattern","filename","getRootTraitValue","drop","parts","traitValue","dropStarters","rootTraitValue","getImageRightsUrl","lessonState","Enum","navigation","guideType","quickFireType","quickFireStep","userEvent","functions","renderNonTaxonCardSpecimenTiles","renderTextEntry","renderCard","renderMultiStrips","renderSummary","renderHistory","renderBonusTest","renderTaxonCard","renderNonTaxonCard","renderCompleteText","renderBonusSpecimenTiles","renderMixedSpecimenQuestion","renderMediaPlayers","renderMixedTraitQuestion","renderHorizontalStrips","match","mushroomIcon","renderIcon","iconicIconContainer","rootNode","iconicIcon","classes","returnIcon","stripImageUrlOfScaleAndPrefix","prefix","img","part","imageUseCases","SPECIES_LIST","SPECIES_CARD","TAXON_CARD","SPECIES_SPECIMENS","NON_TAXON_CARD","VISUAL_MATCH","MIXED_SPECIMENS","CAROUSEL","TEXT_ENTRY","ACTUAL_SIZE","SPECIES_GRID","denormaliseImages","denormalisedImages","imageMatch","src1","src2","isActiveImage","prepImageForCarousel","scaleImage","itemCommon","photographersName","medium","prepImagesForCarousel","modalImagesHandler","modalImageHandler","handleImageSelectionFromList","displayNameType","selectedItem","selectedItemImage","selectedImage","dataset","imageSlider","identifier","displayName","MIN_LENGTH","getAutocompleteBy","users","photo","prediction","place_id","projects","getUserSuggestions","getPlaceSuggestions","getProjectSuggestions","rb","ipLocation","location","css","Array","scoreHandler","genericScoreHandler","blockScoreHander","stripScoreHandler","imageScoreHandler","simpleScoreHandler","renderScoreHTMLResponse","html","showResponseToAnswerHandler","continueLessonHandler","btn","bindScore","markTest","scoreUpdateTimer","_score","target","test","responseTxt","labelTxt","handleClickEvent","answerNode","answerIndex","vernacular","answeredIndex","stripAnswer","strip","stripAnswerIndex","stripAnswerName","_callback","selected","once","tile","Stamp","ns","re","mystate","len","address","a","JSON","str","m","filterState","ssplice","clones","nodes","ele","appendChildren","expandString","processChildren","attr","iterName","tpl","addressOf","childState","instanceState","cl","cloneAllNodes","expand","keys","childEle","nextSibling","replacement","replaceChildren","contentClone","ctx","expanded","cleanText","isAnswerEqualToQuestion","eqValues","compose","isAnswerCorrect","isCorrect","alternativeIsCorrect","isTraitAnswerCorrect","doArraysHaveSameValues","getRandomTrait","allowedTraits","getTraitsPoolForUnits","getTraitsPoolForRoles","enumKey","getTraitValues","traitKeyParts","getTraitsPool","getSetOfTraitAnswers","traitSet","sets","pool","exists","set","getTraitByKey","getTraitValueByKey","hasTraitPropeties","getLinkedTaxaTraits","taxaTraits","getTraitsToExclude","handleUnit","convertTraitsToNameValuePairsArray","includedTraits","lookalike","getNMultiplesFromArray","arra","result_set","x","lookalikesCount","noOfImagesPerItem","renderSpecimenTiles","isInCarousel","getItemWithProps","getItem","itemWithProps","el","prev","renderCommonParts","renderPortrait","renderLandscape","getBirdSong","inatNode","renderInatDataBox","renderCalendar","lookalikeSpecies","parentScreen","player","iframe","elm","renderTaxaBox","familyName","familyVernacularName","infoSlider","renderBadge","lines","hr","attributions","attribution","indicators","indicator","subscribeToNonTaxaSelection","keyTrait","nonTaxa","nt","prepImages","itemImagesArray","itemImages","portraitImagesNode","wikiNode","lookup","idNode","definitionNode","nameNode","renderWikiModal","renderWiki","modalCarousel","transition","speciesTaxon","familyStats","occurrences","identification","context","alt","toxic","notableMembers","taxonInfoSlider","membersCount","members","list","member","onCloseModal","closer","contents","renderTestCardTemplate","progressLink","progressLinkClickHandler","summaryContainer","renderSummaryCard","renderScoreSummary","toggleScreens","hideCurrentCard","screenTwo","toggleStatementAndQuestion","testCardContainer","testCard","testCardIcon","card","showNextCard","speciesContainer","taxonContainer","renderSpeciesCard","speciesIcon","taxonCard","taxonIcon","testContentParent","iterations","clearInterval","languageNames","r","badge","getInatPlaceId","places","getENShortMonth","getMonth","getHistogram","monthlyStats","histogram","currentMonthIndex","monthNodes","node","selectActiveImage","elemSrc","activeNode","handleRightsAttribution","carouselControlHandler","sliderArgs","imageSideBySlider","sideBySlider","slides","slide","originalImageLink","eolPage","wikiLink","getInatTaxonStats","stats","taxonId","stat","taxonCount","taxonLink","itemStats","placeTaxonCount","establishment","renderInfoDetails","activeTraitKey","linkedTaxa","detail","renderInfoSlider","activeTrait","traitCount","control","changeTraitHandler","activeTraitValue","convertedTraits","taxonLanguageBtn","taxonLanguageTxt","addLinksToSpeciesCards","speciesCardLinks","link","getLinkedTaxa","addVernacularName","display","isSpecies","relationshipTraits","relationships","convertTraitsForDisplay","speciesA","speciesARole","speciesB","speciesBRole","lookalikeTraits","convertLookalikesForDisplay","speciesDescription","lookalikeDescription","addDisplayRules","relationship","renderLookalikes","readyLookalikesForRendering","isArray","lookalikeItem","scientificNames","lookalikeParent","matchTemplate","speciesComparisonLink","xcID","mp3","licence","author","large","rightsAttribution","rightsLink","showAttribution","showLink","taxaBoxArgs","specific","subSpeciesCount","subspeciesBadge","textSetup","getSpeciesCount","speciesSummary","getSpeciesSummary","lessonIntro","handleSpeciesUpdate","videoSetup","activeLesson","collectionId","startAt","playAt","timeBeforeVideoPlayerReady","videoHandler","checkCurrentTime","checkInt","matchSpeciesTime","noteMatch","note","onPlayerStateChangeCallback","playerState","videoWidth","renderLessonIntro","renderHome","forceIntroDisplay","renderLessons","introduction","renderItemSpecimenTiles","familes","collectionItems","getImagesFromItemFamily","renderSpecimenImageTiles","acceptableScreens","pooledImages","pooledImage","uniqueImages","getUniqueImage","uniqueImage","familyImages","imageToPrep","renderCustomLesson","onLoadLessonViewState","scrollOptions","left","top","behavior","reviewLink","chevron","youtubeLessonIcon","renderEditLesson","onLoadLessonsViewState","onClickViewState","isYoutubeIcon","isChevronIcon","row","lessonId","speciesList","hideOtherContentAndRevertChevrons","isSpeciesListAvailable","isSpeciesListHidden","lessonVideoState","iconIsChevron","requiresSpeciesList","revealSpeciesList","hideSpeciesList","onLessonIconClickHandler","isItemActive","lessonYoutubeIcons","siblingChevron","loadAndDisplaySpeciesList","onLessonTitleClickHandler","onReviewClickHandler","reviewLinkHandler","upChevrons","chevronLessonId","child","highlightActiveLesson","rows","lessonListEventHandler","renderLessonListHeader","sibling","siblingsBefore","siblings","before","scrollToTitle","standardBlock","scroll","lessonListScrollHandler","tsa","tsb","b","renderLesson","createCustomLessonBtn","youtubeLessonIcons","highlightActiveLessonHandler","chevrons","reviews","quickFireState","linkFromLesson","changeRequest","args","changeLessonState","savedLesson","getLessonState","userProgressState","saveUserProgressState","addExtraSpeciesSelection","renderSpeciesList","callingParentContainer","_lessonState","stateCounter","newLessonCounter","log","extraSpecies","collectionExtension","recordUserAction","getIsReviewingLesson","isNotReviewingLesson","overrideLesson","purgeLesson","clearGuide","getCollectionToLoad","resume","currentCollection","getLatestCounter","getUserLessonState","restoredLesson","saved","renderReview","review","reviewLinkBtn","currentlyActiveRow","onSpeciesChangeHandler","tr","currentlyActiveSpecies","openNoteHandler","insert","noteText","traitEnums","openAccordionHandler","accordion","openSpeciesDescriptionHandler","closeAccordionHandler","userClickHandlers","listItemImages","itemImage","accordions","accordionHandler","youtubeIcons","activeIcon","cardModal","traitCardLinks","taxonCardLinks","nthChild","taxonIcons","noWrongAnswersForThisSpecies","anyWrongAnwers","buildTable","overrideParent","table","enableScroll","activateYoutubeIcon","closeOpenAccordions","activeAccordion","activeYouTubeIcon","td","scrollIntoView","rowHeight","noOfRows","currentIndex","prevTaxon","nextTaxon","openAccordions","inactiveAccordion","inActiveYouTubeIcon","currentDescriptions","wide","getTraitName","keyTratLinkClass","getOrderLinkClass","orderLinkClass","getIconicTaxonIcon","iconicTaxonIcon","hideFungiIcon","genus","genusLinkClass","shortName","snapIndex","small","order","keyTraits","vn","span","tbody","caption","thead","headerRow","imageHeader","speciesHeader","familyHeader","traitNameHeader","iconicTaxonHeader","accordionHeader","sortableCalback","isReady","onSpeciesTimeMatchListeners","onNoteTimeMatchListeners","onSpeciesTimeMatch","onNoteTimeMatch","onSpeciesPlayRequestListeners","onSpeciesPlayRequest","onPlayerReadyListeners","onPlayerStateChangeListeners","subscribeToPlayerStateChange","isPlayerReady","readyPlayer","onPlayerReady","onPlayerStateChange","YT","playerVars","events","playVideoFrom","states","setVideoState","isVideoPlayerReady","doIdsMatch","videoId","destroyPlayer","newPlayerTime","playerRecords","pausedAt","getPlayerTime","isAudio","providerQuestion","headerClassName","strips","clue","renderMixedSpecimenImagesAndQuestion","onTraitsReadyListeners","onTraitsReady","onTraitClickedListeners","onTraitClicked","getMatchingTrait","layoutTraits","fetchTraits","multiples","pendingScore","continueLessonBtn","onClickTileHandler","tiles","defaultQueryLimit","defaultLanguage","render","helpDefault","renderBinomialQuestions","buildQuestion","italicise","renderVernacularQuestions","renderIdQuestions","alternativeFamilies","epithet","indices","otherFamilies","otherFamiliesLatinNames","otherFamiliesCommonNames","of","renderBirdsong","content","getPortraitImages","multiImages","srcs","boundScore","layer","selectedName","answerIcon","wrongItem","getLessonScores","historyIsUpToDate","stateScore","getSummaryRows","_r","getAnswer","scoreSummaryHandler","isObj","hasImage","isTrue","isWrongAnswer","savedScore","actionLinks","renderScoreSummaryRow","handleContinueLesson","handleNewLesson","actionLink","noQuestionsText","q","renderInput","questionTxt","givenTaxon","numerOfItems","itemTaxons","itemTaxon","block","iconColour","button","inputTxt","helpTxt","answerBtn","scoreEventHandler","loseFocusMobileHandler","letterBlocks","letter","letters","deleteLetter","activeBlocks","activeLetters","activeBlock","lastLetter","indexInInput","newValue","correctBlocks","letterIndex","blocks","keyboardBtn","blockArray","entries","selectedBlock","setupHandler","planId","plan","asyncFunc","required","actionUpdate","SAVE_LESSON_PROGRESS","awaitPromise","style","root","formatUrl","ranks","encode","fetchWiki","method","errorPromise","cleanEntry","cleaned","formatWiki","exceptions","wikiSearchTerm","searchTerm","fetchAsync","endpoint","loadPlayer","playerId","recording"],"mappings":";;;;;;;;;;;;;;;;AAAO,IAAMA,cAAc,GAAG;AAC1BC,QAAM,EADoB;AAE1BC,YAAU,EAFgB;AAG1BC,aAAW,EAHe;AAI1BC,WAAS,EAJiB;AAK1BC,eAAa,EALa;AAM1BC,mBAAiB,EANS;AAO1BC,OAAK,EAAE;AAPmB,CAAvB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AACA;AACA;AACA;AACA;AAEAC;AAEA,IAAMC,EAAE,GAAGD,+DAAX;;AAEA,IAAME,eAAe;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGRC,eAHQ,GAGwBC,KAHxB,IAGRD,EAAKE,QAHG,GAGwBD,KAHxB,SAGRD,EAAeG,KAHP,GAGwBF,KAHxB,MAGRD,EAAsBI,KAHd,GAGwBH,KAHxB,MAGRD;AAEJK,sBALY,GAKCD,KAAK,GACJN,EAAE,CAAFA,wDADI,KACJA,CADI,GAEJA,EAAE,CAAFA,2CAPF,KAOEA,CAFdO;AALY;AAAA,mBASYA,UAAU,CATtB,GASYA,EATZ;;AAAA;AASVC,yBATU,gBASVA;AAEAC,gBAXU,KAWVA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AACzBC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADJD;AAbgB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAfP,eAAe;AAAA;AAAA;AAArB,CAAqB,EAArB;;AAwBA,IAAMU,UAAU;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACIV,eAAe,CADnB,KACmB,CADnB;;AAAA;AACTW,gBADS,iBACTA;AADS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAVD,UAAU;AAAA;AAAA;AAAhB,CAAgB,EAAhB;;AAKA,IAAME,eAAe;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGVC,gCAHU,GAGad,EAAE,CAAFA,yDAHb,OAGaA,CAAvBc;AAHU;AAAA,mBAKYA,oBAAoB,CALhC,GAKYA,EALZ;;AAAA;AAKVN,yBALU,iBAKVA;AAEAC,gBAPU,KAOVA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AACzBC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADJD;AATgB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAfK,eAAe;AAAA;AAAA;AAArB,CAAqB,EAArB;;AAoBA,IAAME,YAAY;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGPC,6BAHO,GAGahB,EAAE,CAAFA,sDAHb,OAGaA,CAApBgB;AAHO;AAAA,mBAKeA,iBAAiB,CALhC,GAKeA,EALf;;AAAA;AAKPR,yBALO,iBAKPA;AAEAC,gBAPO,KAOPA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AACzBC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADJD;AATa;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAZO,YAAY;AAAA;AAAA;AAAlB,CAAkB,EAAlB;;AAmBA,IAAME,uBAAuB;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAaC,kBAAb,+DAAaA;AAEjCC,uBAFoB,GAEqBP,IAFrB,YAEpBO,EAAqBC,QAFD,GAEqBR,IAFrB,OAEpBO,EAA+BE,KAFX,GAEqBT,IAFrB,MAEpBO;AAEWV,gBAJS,KAITA;AAEfa,mBANwB,GAMdtB,EAAE,CAAFA,WANc,SAMdA,CAAVsB;AAEEC,kBARsB,GAQbC,4DARa,CAQbA,CAATD;AAEAnB,oBAVsB,GAUXmB,MAAM,KAANA,WAVW,IAUtBnB;AAEAqB,oBAZsB,GAYXC,WAZW,EAYtBD;;AAZsB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAeFH,OAAO,CAAPA,kCAA0CvB,oFAA1CuB,oCAfE,GAeFA,EAfE;;AAAA;AAexBd,yBAfwB,iBAexBA;AAfwB;AAAA;;AAAA;AAAA;AAAA,mBAiBFc,OAAO,CAAPA,2BAAmCH,WAAW,CAA9CG,WAAmCH,EAAnCG,QAAoEvB,oFAApEuB,oCAjBE,GAiBFA,EAjBE;;AAAA;AAiBxBd,yBAjBwB,iBAiBxBA;;AAjBwB;AAoB5BA,yBAAa,CAAbA,QAAsB,eAAO;AACzBC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADJD;AApB4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAvBS,uBAAuB;AAAA;AAAA;AAA7B,CAA6B,EAA7B;;AA2BA,IAAMU,gBAAgB;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiBC,iBAAjB,mEAAiBA;;AAAjB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAIDjB,UAAU,CAAC;AAAET,iBAAG,EAAL;AAAcE,sBAAQ,EAAtB;AAA6BC,mBAAK,EAACwB;AAAnC,aAAD,CAJT;;AAAA;AAIfC,iBAJe,iBAIfA;AAJe,8CAMdA,KAAK,CANS,CAMT,CANS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAhBH,gBAAgB;AAAA;AAAA;AAAtB,CAAsB,EAAtB;;AASA,IAAMI,YAAY;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAETC,oBAFS,GAEiC7B,KAFjC,SAET6B,EAAU9B,GAFD,GAEiCC,KAFjC,IAET6B,EAAe5B,QAFN,GAEiCD,KAFjC,SAET6B,EAAyB3B,KAFhB,GAEiCF,KAFjC,MAET6B,EAAgC1B,KAFvB,GAEiCH,KAFjC,MAET6B;AAEFC,mBAJW,GAID3B,KAAK,GACCN,EAAE,CAAFA,wDADD,KACCA,CADD,GAECA,EAAE,CAAFA,2CANL,KAMKA,CAFhBiC;AAJW;AAAA,mBAQWA,OAAO,CARlB,GAQWA,EARX;;AAAA;AAQXzB,yBARW,iBAQXA;AAEAC,gBAVW,KAUXA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AAC3BC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADFD;AAZiB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAZuB,YAAY;AAAA;AAAA;AAAlB,CAAkB,EAAlB;;AAmBA,IAAMG,wBAAwB;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAChBH,YAAY,CAAC;AAAEC,sBAAQ,EAAEG,MAAM,CAAlB;AAA6BjC,iBAAG,EAAhC;AAAiDE,sBAAQ,EAAzD;AAAiEC,mBAAK,EAAtE;AAA0FC,mBAAK,EAAE;AAAjG,aAAD,CADI;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAxB4B,wBAAwB;AAAA;AAAA;AAA9B,CAA8B,EAA9B;;AAIA,IAAME,cAAc;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIXC,iBAJW,KAIXA;AAEEJ,mBANS,GAMCjC,EAAE,CAAFA,0CAND,IAMCA,CAAViC;AANS;AAAA,mBAQaA,OAAO,CARpB,GAQaA,EARb;;AAAA;AAQTzB,yBARS,iBAQTA;;AAEN,gBAAGA,aAAa,CAAbA,cAAH,GAAkC;AAC9BA,2BAAa,CAAbA,QAAsB,eAAO;AACzB6B,qBAAK,GAAG3B,GAAG,CAAX2B,IAAQ3B,EAAR2B;AADJ7B;AAGH;;AAdc;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAd4B,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB;;AAwBA,IAAME,iCAAiC;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAaC,sBAAb,4EAAaA;AAA0BP,oBAAvC,8CAAuCA;AAAvC;AAIhCQ,0BAJgC,GAIfxC,EAAE,CAAFA,2CAJe,IAIfA,CAAjBwC;AAJgC;AAAA,mBAMjBA,cAAc,CANG,GAMjBA,EANiB;;AAAA;AAMhCC,kBANgC,kBAMhCA;AANgC;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAjCH,iCAAiC;AAAA;AAAA;AAAvC,CAAuC,EAAvC;;AAeA,IAAMI,sBAAsB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAaV,oBAAb,qEAAaA;AAAb;AAAA,mBAICM,iCAAiC,oBAJlC,QAIkC,CAJlC;;AAAA;AAIrB9B,yBAJqB,kBAIrBA;;AAJqB,kBAMxB,kBAAkB,CAACA,aAAa,CANR;AAAA;AAAA;AAAA;;AAAA,+CAMsB,YAAY,mBAAO;AAAA,qBAAImC,OAAO,CAAX,EAAW,CAAX;AANzC,aAMsB,CANtB;;AAAA;AAQ3B,gBAAGnC,aAAa,CAAbA,cAAH,GAAkC;AAC9BA,2BAAa,CAAbA,QAAsB,eAAO;AAC7BiC,sBAAM,GAAG/B,GAAG,CAAZ+B,IAAS/B,EAAT+B;AADAjC;AAGH;;AAZ0B;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAtBkC,sBAAsB;AAAA;AAAA;AAA5B,CAA4B,EAA5B;;AAiBA,IAAME,oBAAoB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAaZ,oBAAb,qEAAaA;AAAb;AAAA,mBAIGM,iCAAiC,kBAJpC,QAIoC,CAJpC;;AAAA;AAInB9B,yBAJmB,kBAInBA;;AAJmB,kBAMtB,kBAAkB,CAACA,aAAa,CANV;AAAA;AAAA;AAAA;;AAAA,+CAMwB,YAAY,mBAAO;AAAA,qBAAImC,OAAO,CAAX,EAAW,CAAX;AAN3C,aAMwB,CANxB;;AAAA;AAQzB,gBAAGnC,aAAa,CAAbA,cAAH,GAAkC;AAC9BA,2BAAa,CAAbA,QAAsB,eAAO;AAC7BiC,sBAAM,GAAG/B,GAAG,CAAZ+B,IAAS/B,EAAT+B;AADAjC;AAGH;;AAZwB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAApBoC,oBAAoB;AAAA;AAAA;AAA1B,CAA0B,EAA1B;;AAiBA,IAAMC,WAAW;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEZC,mBAFY,GAEF/C,6DAAV+C;AACAC,sBAHY,GAGCD,OAAO,CAHR,GAGCA,EAAbC;AAHY;AAAA,mBAIAA,UAAU,CAAVA,wCAJA,cAIAA,EAJA;;AAAA;AAIZC,eAJY,kBAIZA;AAJY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAXH,WAAW;AAAA;AAAA;AAAjB,CAAiB,EAAjB;;AASA,IAAMI,UAAU;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAIf,gBAAG3B,OAAO,CAAV,QAAmB;AACfA,qBAAO,CAAPA,SAAiB,OAAO,CAAP,WAAmB,iBAAS;AACzC,uBAAO;AACH4B,yBAAO,EAAEC,KAAK,CAALA,WADN;AAEHC,8BAAY,EAAED,KAAK,CAALA,gBAFX;AAGHE,8BAAY,EAAEF,KAAK,CAALA,gBAHX;AAIHG,wBAAM,EAAEH,KAAK,CAALA,UAJL;AAKHI,uBAAK,EAAEJ,KAAK,CAALA,SALJ;AAMHH,qBAAG,EAAEG,KAAK,CAALA,OAAa;AANf,iBAAP;AADJ7B,eAAiB,CAAjBA;AAUH;;AAfc;AAAA;AAAA,mBAkBItB,EAAE,CAAFA,0BAlBJ,OAkBIA,CAlBJ;;AAAA;AAkBXwD,kBAlBW,kBAkBXA;AAlBW;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAVP,UAAU;AAAA;AAAA;AAAhB,CAAgB,EAAhB;;AA0BA,IAAMQ,aAAa;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAIlB,gBAAGnC,OAAO,CAAV,QAAmB;AACfA,qBAAO,CAAPA,SAAiB,OAAO,CAAP,WAAmB,iBAAS;AACzC,oBAAMoC,cAAc,GAAG;AACnBR,yBAAO,EAAEC,KAAK,CAALA,WADU;AAEnBC,8BAAY,EAAED,KAAK,CAALA,gBAFK;AAGnBE,8BAAY,EAAEF,KAAK,CAALA,gBAHK;AAInBG,wBAAM,EAAEH,KAAK,CAALA,UAJW;AAKnBI,uBAAK,EAAEJ,KAAK,CAALA,SALY;AAMnBH,qBAAG,EAAEG,KAAK,CAALA,OAAa;AANC,iBAAvB;;AAQA,oBAAGA,KAAK,CAAR,SAAkB;AACdO,gCAAc,CAAdA,UAAyBP,KAAK,CAA9BO;AACH;;AACD,oBAAGP,KAAK,CAAR,UAAmB;AACfO,gCAAc,CAAdA,WAA0BP,KAAK,CAA/BO;AACH;;AACD;AAfJpC,eAAiB,CAAjBA;AAiBH;;AAtBiB;AAAA,mBAwBUtB,EAAE,CAAFA,0CAA6CsB,OAAO,CAApDtB,MAxBV,GAwBUA,EAxBV;;AAAA;AAwBZQ,yBAxBY,kBAwBZA;AAENA,yBAAa,CAAbA,QAAsB,eAAc;AAChCmD,2BAAa,GAAGjD,GAAG,CAAnBiD;AADJnD;AA1BkB;AAAA,mBA8BLmD,aAAa,CAAbA,OA9BK,OA8BLA,CA9BK;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAbF,aAAa;AAAA;AAAA;AAAnB,CAAmB,EAAnB;;AAkCA,IAAMG,kBAAkB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAIK5D,EAAE,CAAFA,0CAA6CsB,OAAO,CAApDtB,MAJL,GAIKA,EAJL;;AAAA;AAIjBQ,yBAJiB,kBAIjBA;AAENA,yBAAa,CAAbA,QAAsB,eAAc;AAChCmD,2BAAa,GAAGjD,GAAG,CAAnBiD;AADJnD;AANuB;AAAA,mBAUV,aAAa,CAAb,OAAqB;AAACqD,mBAAK,EAALA;AAAD,aAArB,CAVU;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAlBD,kBAAkB;AAAA;AAAA;AAAxB,CAAwB,EAAxB;;AAcA,IAAME,mBAAmB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAElBvD,sBAFkB,GAELP,EAAE,CAAFA,0CAFK,IAELA,CAAbO;AAENA,sBAAU,CAAVA,WAAsB,yBAAwB;AAC1CC,2BAAa,CAAbA,QAAsB,eAAc;AACpCE,mBAAG,CAAHA;AADAF;AADJD;;AAJwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAnBuD,mBAAmB;AAAA;AAAA;AAAzB,CAAyB,EAAzB;;AAWA,IAAMC,SAAS;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoBxB,sBAApB,4EAAoBA;AAApB;AAAA;AAAA,mBAMkBvC,EAAE,CAAFA,iDANlB,GAMkBA,EANlB;;AAAA;AAMJQ,yBANI,kBAMJA;;AANI,iBAQPA,aAAa,CARN;AAAA;AAAA;AAAA;;AASNwD,iBAAK,CAALA;AATM;AAAA,mBAUOhE,EAAE,CAAFA,2BAVP,KAUOA,CAVP;;AAAA;AAAA;;AAAA;AAYNQ,yBAAa,CAAbA,QAAsB,eAAc;AAChCyD,8BAAgB,GAAGvD,GAAG,CAAtBuD;AADJzD;AAZM;AAAA,mBAgBAyD,gBAAgB,CAAhBA,OAhBA,KAgBAA,CAhBA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,8EAsBmB,cAtBnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAATF,SAAS;AAAA;AAAA;AAAf,CAAe,EAAf;;AA0BA,IAAMG,sBAAsB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGjBC,iBAHiB,GAGTnE,EAAE,CAHO,KAGTA,EAARmE;;AAEAC,sBALiB;AAAA,mFAKJ;AAAA;AAAA;AAAA;AAAA;AAAA,2DAER,OAAO,CAAP,IAAY,MAAM,CAAN;AAAA,+FAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAIEpE,EAAE,CAAFA,4CAA+CgE,KAAK,CAApDhE,MAJF,GAIEA,EAJF;;AAAA;AAIpBQ,iDAJoB,kBAIpBA;;AAJoB,yCAMvBA,aAAa,CANU;AAAA;AAAA;AAAA;;AAOtBwD,yCAAK,CAALA;AAPsB;AAAA,2CAQGhE,EAAE,CAAFA,4BARH,KAQGA,CARH;;AAAA;AAQtBiE,oDARsB,kBAQtBA;AARsB;AAAA;;AAAA;AAUtBzD,iDAAa,CAAbA,QAAsB,eAAc;AAChCyD,sDAAgB,GAAGvD,GAAG,CAAtBuD;AADJzD;;AAVsB;AAe1ByD,oDAAgB,CAAhBA,iCACYlE,oFAAyCiE,KAAK,CAD1DC,MACYlE,CADZkE;;AAf0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAX;;AAAA;AAAA;AAAA;AAFJ,yBAEI,GAAZ,CAFQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALI;;AAAA;AAAA;AAAA;AAAA,eAKjBG;;AALiB;AAAA,mBA4BjBA,UA5BiB;;AAAA;AAAA;AAAA,mBA8BjBD,KAAK,CA9BY,MA8BjBA,EA9BiB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,+CAoClB,cApCkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAtBD,sBAAsB;AAAA;AAAA;AAA5B,CAA4B,EAA5B;;AAyCA,IAAMG,SAAS;AAAA,uEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAIcrE,EAAE,CAAFA,gDAJd,GAIcA,EAJd;;AAAA;AAIRQ,yBAJQ,kBAIRA;AAENA,yBAAa,CAAbA,QAAsB,eAAc;AAChCmD,2BAAa,GAAGjD,GAAG,CAAnBiD;AADJnD;AANc;AAAA,+CAWH,aAAa,CAAb,OAAqB;AACxB8D,oBAAM,EAAE;AADgB,aAArB,CAXG;;AAAA;AAAA;AAAA;AAAA,+CAgBL,cAhBK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAATD,SAAS;AAAA;AAAA;AAAf,CAAe,EAAf;;AAqBA,IAAME,uBAAuB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAMAvE,EAAE,CAAFA,kDANA,GAMAA,EANA;;AAAA;AAMtBQ,yBANsB,kBAMtBA;AAEAA,yBAAa,CAAbA,QAAsB,eAAc;AAChCyD,8BAAgB,GAAGvD,GAAG,CAAtBuD;AADJzD;AARsB;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAepBgE,uBAfoB,GAeNP,gBAAgB,CAAhBA,kCACJlE,iFADIkE,EAAdO;AAfoB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAvBD,uBAAuB;AAAA;AAAA;AAA7B,CAA6B,EAA7B;;AA0BA,IAAME,gBAAgB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEFhE,gBAFE,KAEFA;AAEfa,mBAJiB,GAIPtB,EAAE,CAAFA,WAJO,SAIPA,CAAVsB;AAEEC,kBANe,GAMNC,4DANM,CAMNA,CAATD;AAEAnB,oBARe,GAQJmB,MAAM,KAANA,WARI,IAQfnB;AARe;AAAA,mBAUCkB,OAAO,CAAPA,MAAcvB,oFAAduB,YAAmEI,WAAnEJ,kBAVD,GAUCA,EAVD;;AAAA;AAUrBd,yBAVqB,kBAUrBA;AAEAA,yBAAa,CAAbA,QAAsB,eAAO;AACzBC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADJD;AAZqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAhBiE,gBAAgB;AAAA;AAAA;AAAtB,CAAsB,EAAtB;;AAmBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,2BAA8B;AAEhD,MAAMC,KAAK,GAAGC,IAAI,CAAJA,MAAd,GAAcA,CAAd;AAEA,MAAIC,WAAW,GAAf;;AAJgD;AAAA;;AAAA;AAAA;AAAA,UAMxCD,IANwC;AAO5C,UAAME,UAAU,GAAG,QAAQ,CAAR,KAAc,sBAAU;AAAA,eAAIA,UAAU,CAAVA,uBAAkCF,IAAI,CAAJA,OAAlCE,WAAkCF,EAAlCE,IAA+DA,UAAU,CAAVA,OAAkBA,UAAU,CAAVA,sBAAiCF,IAAI,CAAJA,OAAtH,WAAsHA,EAAtH;AAA3C,OAAmB,CAAnB;AACAC,iBAAW,CAAXA;AAR4C;;AAMhD,wDAAuB;AAAA;AAGtB;AAT+C;AAAA;AAAA;AAAA;AAAA;;AAS/C;AAED,SAAO,WAAW,CAAX,OAAmB,sBAAU;AAAA;AAApC,GAAO,CAAP;AAXJ;;AAcA,IAAME,mBAAmB,GAAG,SAAtBA,mBAAsB,4BAA+B;AAEvD,MAAMtC,MAAM,GAAG,QAAQ,CAAR,OAAgB,iBAAK;AAAA,WAAIuC,KAAK,CAAT;AAArB,YAA6C,iBAAK;AAAA,WAAIA,KAAK,CAALA,wBAA8BhB,KAAK,CAAvC,WAAkCA,EAAlC;AAAjE,GAAe,CAAf;AAEA,SAAO,YAAY,mBAAO;AAAA,WAAIrB,OAAO,CAAX,MAAW,CAAX;AAA1B,GAAO,CAAP;AAJJ;;AAOA,IAAMsC,QAAQ;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAELjD,oBAFK,GAEe7B,KAFf,SAEL6B,EAAUK,KAFL,GAEelC,KAFf,MAEL6B;AAFK;AAAA;AAAA,mBAOMhC,EAAE,CAAFA,0BAPN,KAOMA,CAPN;;AAAA;AAOTwD,kBAPS,kBAOTA;AAPS;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAARyB,QAAQ;AAAA;AAAA;AAAd,CAAc,EAAd;;AAgBA,IAAMC,oBAAoB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAGd,OAAO,CAAP,IAAY,OAAO,CAAP,IAAY,cAAM;AACjC,qBAAO,SAAS,CAAT,iBAA2BC,EAAE,CAA7B;AAAA,qFAAyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE/BC,uCAAW,EAAED,EAAE,CAAFA,eAFkB;AAEIE,gCAAI,EAAEF,EAAE,CAAFA,QAFV;AAEwBG,uCAAW,EAAEH,EAAE,CAAFA,eAFrC;AAE2DI,mCAAO,EAAEJ,EAAE,CAAFA,WAAc;AAFlF;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzC;;AAAA;AAAA;AAAA;AAAP,eAAO,GAAP;AAJiB,aAGF,CAAZ,CAHc;;AAAA;AAAA;AAAA;AAYvBK,uBAAW,gBAAXA,sBAAW,CAAXA;;AAZuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAApBN,oBAAoB;AAAA;AAAA;AAA1B,CAA0B,EAA1B;;AAgBA,IAAMO,0BAA0B;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEpB,OAAO,CAAP,IAAY,SAAS,CAAT,IAAc,gBAAQ;AACrC,qBAAO,SAAS,CAAT;AAAA,qFAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAtC;;AAAA;AAAA;AAAA;AAAP,eAAO,GAAP;AAHuB,aAER,CAAZ,CAFoB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAA1BA,0BAA0B;AAAA;AAAA;AAAhC,CAAgC,EAAhC;;AAeA,IAAMC,aAAa;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAIUC,gBAAgB,CAJ1B,UAI0B,CAJ1B;;AAAA;AAIZC,yBAJY,kBAIZA;;AAJY;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAQlBrD,sBAAU,CAAVA;AAEIiB,kBAVc,OAUdA;AAVc;AAAA;AAAA,mBAaCxD,EAAE,CAAFA,8BAbD,UAaCA,CAbD;;AAAA;AAadwD,kBAbc,kBAadA;AAbc;AAAA;;AAAA;AAAA;AAAA,oDAehB;;AACAqC,mBAAO,CAAPA;;AAhBgB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAbH,aAAa;AAAA;AAAA;AAAnB,CAAmB,EAAnB;;AAsBE,IAAMC,gBAAgB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGnBpD,sBAAU,CAAVA,QAHmB,EAGnBA,CAHmB,CAGI;;AAEnBiB,kBALe,OAKfA;AALe;AAAA,mBAOSxD,EAAE,CAAFA,8CAAiDuC,UAAU,CAA3DvC,MAPT,GAOSA,EAPT;;AAAA;AAObQ,yBAPa,kBAObA;AAENA,yBAAa,CAAbA,QAAsB,eAAc;AAChCgD,oBAAM,GAAG9C,GAAG,CAAZ8C;AADJhD;;AATmB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAcTgD,MAAM,CAANA,OAdS,UAcTA,CAdS;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,+CAqBd;AAAEsC,qBAAO,EAAT;AAAsBC,qBAAO,EAAE,cAA/B;AAA0CC,qBAAO,EAAG;AAApD,aArBc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAhBL,gBAAgB;AAAA;AAAA;AAAtB,CAAsB,EAAtB;;AA0BA,IAAMM,mBAAmB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAElB/F,eAFkB,GAEcC,KAFd,IAElBD,EAAKE,QAFa,GAEcD,KAFd,SAElBD,EAAeG,KAFG,GAEcF,KAFd,MAElBD,EAAsBI,KAFJ,GAEcH,KAFd,MAElBD;AAEF0F,yBAJoB,GAIJtF,KAAK,GACvBN,EAAE,CAAFA,4DADuB,KACvBA,CADuB,GAErBE,GAAG,GACCF,EAAE,CAAFA,+CADD,KACCA,CADD,GAECA,EAAE,CAAFA,WARgB,aAQhBA,CAJJ4F;AAJoB;AAAA,mBAUEA,aAAa,CAVf,GAUEA,EAVF;;AAAA;AAUpBpF,yBAVoB,kBAUpBA;AAEAC,gBAZoB,KAYpBA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AAC3BC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADFD;AAd0B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAnByF,mBAAmB;AAAA;AAAA;AAAzB,CAAyB,EAAzB;;AAqBA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,QAAS;AAC9B,SAAOD,mBAAmB,CAA1B,EAA0B,CAA1B;AADF;;AAIA,IAAME,WAAW;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKCnG,EAAE,CAAFA,4BALD,QAKCA,CALD;;AAAA;AAKdwD,kBALc,kBAKdA;AALc;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAX2C,WAAW;AAAA;AAAA;AAAjB,CAAiB,EAAjB;;AAaA,IAAMC,iBAAiB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhBlG,eAFgB,GAESC,KAFT,IAEhBD,EAAKE,QAFW,GAESD,KAFT,SAEhBD,EAAeG,KAFC,GAESF,KAFT,MAEhBD;AAEF0F,yBAJkB,GAIF1F,GAAG,GACfF,EAAE,CAAFA,6CADe,KACfA,CADe,GAEfA,EAAE,CAAFA,WANc,WAMdA,CAFJ4F;AAJkB;AAAA,mBAQIA,aAAa,CARjB,GAQIA,EARJ;;AAAA;AAQlBpF,yBARkB,kBAQlBA;AAEAC,gBAVkB,KAUlBA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AAC3BC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADFD;AAZwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAjB4F,iBAAiB;AAAA;AAAA;AAAvB,CAAuB,EAAvB;;AAmBA,IAAMC,aAAa;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEQrG,EAAE,CAAFA,2CAA8C8E,UAAU,CAAxD9E,MAFR,GAEQA,EAFR;;AAAA;AAEdQ,yBAFc,kBAEdA;;AAFc,iBAMjBA,aAAa,CANI;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,mBASGR,EAAE,CAAFA,2BATH,UASGA,CATH;;AAAA;AASZwD,kBATY,kBASZA;AATY;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAb6C,aAAa;AAAA;AAAA;AAAnB,CAAmB,EAAnB;;AAsBA,IAAMC,mBAAmB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAElBpG,eAFkB,GAEOC,KAFP,IAElBD,EAAKE,QAFa,GAEOD,KAFP,SAElBD,EAAeG,KAFG,GAEOF,KAFP,MAElBD;AAEF0F,yBAJoB,GAIJ1F,GAAG,GACfF,EAAE,CAAFA,4CADe,KACfA,CADe,GAEfA,EAAE,CAAFA,WANgB,UAMhBA,CAFJ4F;AAJoB;AAAA,mBAQEA,aAAa,CARf,GAQEA,EARF;;AAAA;AAQpBpF,yBARoB,kBAQpBA;AAEAC,gBAVoB,KAUpBA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AAC3BC,kBAAI,CAAJA,qCAAeC,GAAG,CAAlBD,IAAeC,EAAfD;AAA2B8F,kBAAE,EAAE7F,GAAG,CAAC6F;AAAnC9F;AADFD;AAZ0B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAnB8F,mBAAmB;AAAA;AAAA;AAAzB,CAAyB,EAAzB;;AAmBA,IAAME,iBAAiB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,+CACjB,EAAE,CAAF,0CAA6C,gBAAQ;AACxD,qDAAYC,IAAI,CAAhB,IAAYA,EAAZ;AAAyBF,kBAAE,EAAEE,IAAI,CAACF;AAAlC;AAFoB,aACjB,CADiB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAjBC,iBAAiB;AAAA;AAAA;AAAvB,CAAuB,EAAvB;;AAMA,IAAME,uBAAuB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAExB/B,iBAFwB,KAExBA;AAFwB;AAKpBR,iBALoB,GAKZnE,EAAE,CALU,KAKZA,EAARmE;;AAEAC,sBAPoB;AAAA,mFAOP;AAAA;AAAA;AAAA;AAAA;AAAA,2DAER,OAAO,CAAP,IAAY,GAAG,CAAH;AAAA,+FAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEJoC,iBAAiB,CAFb,EAEa,CAFb;;AAAA;AAEjB5B,wCAFiB,kBAEjBA;AAEND,yCAAK,CAALA;;AAJuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAR;;AAAA;AAAA;AAAA;AAFJ,yBAEI,GAAZ,CAFQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPO;;AAAA;AAAA;AAAA;AAAA,eAOpBP;;AAPoB;AAAA,mBAkBpBA,UAlBoB;;AAAA;AAAA;AAAA,mBAoBpBD,KAAK,CApBe,MAoBpBA,EApBoB;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAvBuC,uBAAuB;AAAA;AAAA;AAA7B,CAA6B,EAA7B;;AA6BA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAQ;AACjC,SAAOL,mBAAmB,CAAC;AACzBpG,OAAG,EADsB;AAEzBE,YAAQ,EAFiB;AAGzBC,SAAK,EAAEuG;AAHkB,GAAD,CAA1B;AADJ;;AAQA,IAAMC,gBAAgB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAIK7G,EAAE,CAAFA,2CAA8C8E,UAAU,CAAxD9E,MAJL,GAIKA,EAJL;;AAAA;AAIjBQ,yBAJiB,kBAIjBA;AAENA,yBAAa,CAAbA,QAAsB,eAAc;AAChCgD,oBAAM,GAAG9C,GAAG,CAAZ8C;AADJhD;AANuB;AAAA,mBAUVgD,MAAM,CAANA,OAVU,UAUVA,CAVU;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAhBqD,gBAAgB;AAAA;AAAA;AAAtB,CAAsB,EAAtB;;AAaA,IAAMC,QAAQ;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAO3G,iBAAP,iEAAe;AAAE4G,qBAAO,EAAE;AAAX,aAAR5G;AAAP,8BAEmCA,KAFnC,WAEP6B,QAFO,wDAEU9B,GAFV,GAEmCC,KAFnC,MAEeC,QAFf,GAEmCD,KAFnC,WAEyBE,KAFzB,GAEmCF,KAFnC;AAIT6G,oBAJS,GAIEhH,EAAE,CAAFA,2BAJF,QAIEA,EAAXgH;AAJS;AAAA,mBAMaA,QAAQ,CANrB,GAMaA,EANb;;AAAA;AAMTxG,yBANS,kBAMTA;AAEAC,gBARS,KAQTA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AAC3BC,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AADFD;AAVe;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAARsG,QAAQ;AAAA;AAAA;AAAd,CAAc,EAAd;;AAiBA,IAAMG,WAAW;AAAA,uEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEgC9G,KAFhC,WAEV6B,QAFU,0DAEO9B,GAFP,GAEgCC,KAFhC,MAEYC,QAFZ,GAEgCD,KAFhC,WAEsBE,KAFtB,GAEgCF,KAFhC;AAIZ+G,wBAJY,GAIGlH,EAAE,CAAFA,8BAJH,QAIGA,EAAfkH;AAJY;AAAA,mBAMUA,YAAY,CANtB,GAMUA,EANV;;AAAA;AAMZ1G,yBANY,kBAMZA;AAEAC,gBARY,KAQZA;AAEND,yBAAa,CAAbA,QAAsB,eAAO;AAC3BqF,qBAAO,CAAPA,IAAYnF,GAAG,CAAfmF,IAAYnF,EAAZmF;AACApF,kBAAI,CAAJA,KAAUC,GAAG,CAAbD,IAAUC,EAAVD;AAFFD;AAVkB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAXyG,WAAW;AAAA;AAAA;AAAjB,CAAiB,EAAjB;;AAkBK,IAAME,SAAS,GAAG;AAErBxG,YAAU,EAFW;AAGrBE,iBAAe,EAHM;AAIrBE,cAAY,EAJS;AAKrBY,kBAAgB,EALK;AAMrBV,yBAAuB,EANF;AAOrBiB,0BAAwB,EAPH;AAQrBE,gBAAc,EARO;AASrBM,wBAAsB,EATD;AAUrBE,sBAAoB,EAVC;AAWrBC,aAAW,EAXU;AAYrB4B,kBAAgB,EAZK;AAarBC,eAAa,EAbQ;AAcrBQ,sBAAoB,EAdC;AAerBO,4BAA0B,EAfL;AAgBrBS,gBAAc,EAhBO;AAiBrBD,qBAAmB,EAjBE;AAkBrBG,mBAAiB,EAlBI;AAoBrBnD,YAAU,EApBW;AAqBrBc,WAAS,EArBY;AAsBrBG,wBAAsB,EAtBD;AAuBrBG,WAAS,EAvBY;AAwBrBY,UAAQ,EAxBa;AAyBrBS,eAAa,EAzBQ;AA0BrBS,aAAW,EA1BU;AA2BrBE,eAAa,EA3BQ;AA6BrB5C,eAAa,EA7BQ;AA8BrBG,oBAAkB,EA9BG;AA+BrB+B,kBAAgB,EA/BK;AAgCrBkB,kBAAgB,EAhCK;AAkCrB/C,qBAAmB,EAlCE;AAmCrBS,yBAAuB,EAnCF;AAqCrBQ,qBAAmB,EArCE;AAsCrBuB,qBAAmB,EAtCE;AAuCrBK,sBAAoB,EAvCC;AAwCrBH,mBAAiB,EAxCI;AAyCrBE,yBAAuB,EAzCF;AA0CrBI,UAAQ,EA1Ca;AA2CrBG,aAAW,EAAXA;AA3CqB,CAAlB;;AA8CP,IAAMvF,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtB,MAAM0F,KAAK,GAAX;AACA,MAAIC,MAAM,GAAV;;AACA,OAAK,IAAIC,CAAC,GAAV,GAAgBA,CAAC,GAAjB,IAAwBA,CAAxB,IAA6B;AACzBD,UAAM,IAAID,KAAK,CAALA,OAAaG,IAAI,CAAJA,MAAWA,IAAI,CAAJA,WAAgBH,KAAK,CAAvDC,MAAuBE,CAAbH,CAAVC;AACH;;AACD;AANJ,E;;;;;;;;;;;;;;;;;;ACrxBO,IAAMG,MAAM,GAAG,CAClB;AACI5C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIC,OAAK,EAJT;AAKIC,QAAM,EAAE;AALZ,CADkB,EAQlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIC,OAAK,EAJT;AAKIC,QAAM,EAAE;AALZ,CARkB,EAelB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIC,OAAK,EAJT;AAKIvE,OAAK,EAAE;AACHH,OAAG,EAAE;AADF,GALX;AAQI2E,QAAM,EAAE;AARZ,CAfkB,EAyBlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIC,OAAK,EAJT;AAKIC,QAAM,EAAE;AALZ,CAzBkB,EAgClB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIC,OAAK,EAJT;AAKIC,QAAM,EAAE;AALZ,CAhCkB,EAuClB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIC,OAAK,EAJT;AAKIC,QAAM,EAAE;AALZ,CAvCkB,EA8ClB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CA9CkB,EAqDlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIE,QAAM,EAAE;AAJZ,CArDkB,EA2DlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIE,QAAM,EAAE;AAJZ,CA3DkB,EAiElB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIE,QAAM,EAAE;AAJZ,CAjEkB,EAuElB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI4C,OAAK,EAHT;AAIIC,QAAM,EAAE;AAJZ,CAvEkB,EA6ElB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI4C,OAAK,EAHT;AAIIC,QAAM,EAAE;AAJZ,CA7EkB,EAmFlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI4C,OAAK,EAHT;AAIIC,QAAM,EAAE;AAJZ,CAnFkB,EAyFlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI8C,WAAS,EAHb;AAIID,QAAM,EAAE;AAJZ,CAzFkB,EA+FlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI8C,WAAS,EAHb;AAIID,QAAM,EAAE;AAJZ,CA/FkB,EAqGlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI8C,WAAS,EAHb;AAIID,QAAM,EAAE;AAJZ,CArGkB,EA2GlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI8C,WAAS,EAHb;AAIID,QAAM,EAAE;AAJZ,CA3GkB,EAiHlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI8C,WAAS,EAHb;AAIID,QAAM,EAAE;AAJZ,CAjHkB,EAuHlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI8C,WAAS,EAHb;AAIID,QAAM,EAAE;AAJZ,CAvHkB,EA6HlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CA7HkB,EAkIlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CAlIkB,EAuIlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CAvIkB,EA4IlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CA5IkB,EAiJlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CAjJkB,EAsJlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CAtJkB,EA2JlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CA3JkB,EAgKlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CAhKkB,EAqKlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI6C,QAAM,EAAE;AAHZ,CArKkB,EA0KlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CA1KkB,EAiLlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CAjLkB,EAwLlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CAxLkB,EA+LlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CA/LkB,EAsMlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CAtMkB,EA6MlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CA7MkB,EAoNlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CApNkB,EA2NlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CA3NkB,EAkOlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CAlOkB,EAyOlB;AACI/C,MAAI,EADR;AAEIE,YAAU,EAFd;AAGI2C,MAAI,EAHR;AAIIG,WAAS,EAJb;AAKID,QAAM,EAAE;AALZ,CAzOkB,CAAf,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AAEA;AACA;AACA;AAEA,IAAIE,aAAa,GAAjB;AACA,IAAIC,gBAAgB,GAApB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,WAAY;AAC5BF,eAAa,GAAG,aAAa,CAAb,OAAqB,aAAC;AAAA,WAAIG,CAAC,KAAL;AAAtCH,GAAgB,CAAhBA;AADJ;;AAIO,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAuB,WAAY;AAC5CJ,eAAa,CAAbA;AACA;AAFG;;AAKP,IAAMK,WAAW,GAAG,SAAdA,WAAc,SAAU;AAE1B,MAAMC,KAAK,GAAGhG,MAAM,CAANA,wCAEJ,MAAM,CAAN,kCAAyC,iBAAK;AAAA,WAAIgG,KAAK,CAAT;AAA9C,UAFV,GAEU,CAFV;AAIA,MAAMC,OAAO,GAAGjG,MAAM,CAANA,iBAAhB;AAEA,MAAMkG,QAAQ,uIAAd,KAAc,CAAd;AAEA;AAVJ;;AAaO,IAAMC,cAAc;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAECnB,+EAFD;;AAAA;AAEpBoB,wBAFoB,iBAEpBA;AAEAC,kCAJoB,GAIKD,YAAY,CAAZA,CAAY,CAAZA,CAJL,KAIpBC,CAJoB,CAM5B;;AAEQC,0BARoB,GAQHC,MAAM,CAANA,8EARG,GAQHA,CAAjBD;;AAEAE,yBAVoB,GAUJ,SAAhBA,aAAgB,SAAU;AAE9B,kBAAI;AAEA,oBAAMC,WAAU,GAAG,MAAM,CAAN,qBAA4B,iBAAK;AAAA,yBAAIvG,KAAK,CAAT;AAAjC,sBAFnB,cAEA,CAFA,CAIA;;;AAEA,oBAAG,WAAU,CAAV,KAAgB,iBAAK;AAAA,yBAAIA,KAAK,KAAT;AAAxB,iBAAG,CAAH,EAAmD;AAC/CuG,6BAAU,CAAVA;AACH;;AAED,oBAAMhC,IAAI,GAAG,WAAU,CAAV,IAAe,iBAAS;AACjC,sBAAGvE,KAAK,KAAR,eAA4BA,KAAK,GAALA;AAC5B;AAFJ,iBAAa,CAAb;;AAKA;AAfJ,gBAiBE,UAAU;AACVwG,wBAAQ,8BAARA,CAAQ,CAARA;AACH;AA/ByB,aAUpBF;;AAwBAG,wCAlCoB,GAkCW,SAA/BA,4BAA+B,SAAU;AAC3C,kBAAG,CAAC3G,MAAM,CAANA,MAAJ,QAAyB;AACzB,kBAAM4G,KAAK,GAAG5G,MAAM,CAANA,aAAd;AACA,kBAAMoE,EAAE,GAAGpE,MAAM,CAANA,aAAX;AACA,kBAAM6G,SAAS,iCAAf,EAAe,CAAf;AACA,qBAAOzC,EAAE,eAAT;AAvCsB,aAkCpBuC;;AAQAG,kCA1CoB;AAAA,kFA0CK;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBC,yCADuB,KACvBA;AACAC,+BAFuB,KAEvBA;AACAC,iCAHuB,OAGvBA;AACAC,4BAJuB,IAIvBA;;AAJuB;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,+BAOYC,mBAAmB,SAP/B,IAO+B,CAP/B;;AAAA;AAOnBC,8CAPmB,gBAOnBA;AAPmB;AAAA,+BAQjBJ,OAAO,CAAPA,oBARiB,sBAQjBA,CARiB;;AAAA;AASnBK,+BATmB,GAST,sBAAsB,CAAtB,OAA8B,kBAAM;AAAA,iCAAIC,8CAAQ,CAACC,MAAM,CAANA,MAAD,MAAZ,sBAAY,CAAZ;AAT3B,yBAST,CAAVF;AATmB;AAAA,+BAUjBN,iBAAiB,CAAjBA,8BAViB,OAUjBA,CAViB;;AAAA;AAWvBG,4BAAI,GAAGA,IAAI,GAAXA;AACIM,qCAZmB,GAYHJ,sBAAsB,CAAtBA,SAZG,gBAYnBI;AACAC,2CAbmB,GAaGV,iBAAiB,CAAjBA,UAA4B/G,MAAM,CAANA,MAb/B,WAanByH;AACLC,+BAAO,sBAAPA,iBAAO,CAAPA;AACAA,+BAAO,YAAPA,OAAO,CAAPA;;AAfwB,8BAgBnBF,aAAa,IAhBM;AAAA;AAAA;AAAA;;AAiBnBP,iCAAS,GAATA;AAjBmB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAqBvBP,gCAAQ,iCAARA,EAAQ,CAARA;AArBuB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA1CL;;AAAA;AAAA;AAAA;AAAA,eA0CpBI;;AA2BAa,iCArEoB;AAAA,kFAqEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAEf,OAAO,CAAP,IAAY,YAAY,CAAZ,IAAiB,uBAAe;AAC/C,iCAAO,+EAA2BC,WAAW,CAAXA,MAA3B;AAAA,gGAAwD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGvDC,wDAAgB,EAAED,WAAW,CAAXA,MAHqC;AAIvD5I,mDAAW,EAAE4I,WAAW,CAAXA,MAAkBE;AAJwB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxD;;AAAA;AAAA;AAAA;AAAP,2BAAO,GAAP;AAHkB,yBAEH,CAAZ,CAFe;;AAAA;AAAA;AAAA;AAaxBpB,gCAAQ,sCAARA,EAAQ,CAARA;;AAbwB;AAAA;AAAA;AAAA;AAAA;AAAA;AArEJ;;AAAA;AAAA;AAAA;AAAA,eAqEpBiB;;AAiBAR,+BAtFoB;AAAA,kFAsFE;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIpBY,2BAJoB,KAIpBA,EAAUC,GAJU,KAIpBD,EAAoBE,OAJA,KAIpBF;AAEAG,8BANoB,GAMXlI,MAAM,CAANA,qBAA4BmI,QAAQ,CAACnI,MAAM,CAANA,MAArCA,YAAoC,CAApCA,GANW,EAMpBkI;AACAE,4BAPoB,KAOpBA;AAPoB,uCASjBpI,MAAM,CAANA,MATiB;AAAA;AAAA;;AAAA;AAWhBiI,+BAAO,GAAGjI,MAAM,CAANA,YAAViI;AAXgB;;AAAA;AAchBF,2BAAG,GAAG/H,MAAM,CAANA,kBAAN+H;AACAC,2BAAG,GAAGhI,MAAM,CAANA,kBAANgI,MAAMhI,CAANgI;AAfgB;;AAAA;AAkBhBD,2BAAG,GAAHA;AACAC,2BAAG,GAAHA;AACAC,+BAAO,GAAPA;AACAC,8BAAM,GAANA;AACAE,4BAAI,cAAOpI,MAAM,CAANA,aAAP,mBAAoCA,MAAM,CAANA,aAAxCoI,GAAI,CAAJA;AAtBgB;;AAAA;AA0BlB3B,oCA1BkB,GA0BLD,aAAa,CA1BR,MA0BQ,CAA1BC;AACA4B,8BA3BkB,GA2BTrI,MAAM,CAANA,4BAAmC2G,4BAA4B,CAA/D3G,MAA+D,CAA/DA,GA3BS,EA2BlBqI;AACAxH,2BA5BkB,GA4BZkF,WAAW,CAAXA,MAAW,CAAXA,sLA5BY,MA4BZA,CAANlF;AAEP6G,+BAAO,6BAAPA,GAAO,CAAPA;AA9ByB;AAAA,+BAgCaY,KAAK,CAhClB,GAgCkB,CAhClB;;AAAA;AAgClBlB,8CAhCkB,iBAgClBA;AAEPM,+BAAO,gCAAPA,sBAAO,CAAPA;AAlCyB;AAAA,+BAoCLN,sBAAsB,CApCjB,IAoCLA,EApCK;;AAAA;AAoClBmB,4BApCkB,iBAoClBA;AACN7C,qCAAa,CAAbA,QAAsB,oBAAQ;AAAA,iCAAI8C,QAAQ,CACtC;AAAEtB,gCAAI,EAAEqB,IAAI,CAAZ;AAAmBE,4CAAgB,EAAErD,IAAI,CAAJA,KAAUmD,IAAI,CAAJA,gBAAmBA,IAAI,CAAjCnD;AAArC,2BADsC,CAAZ;AAA9BM;;AArCwB;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAwCJ6C,IAAI,CAxCA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AA0CxB7B,gCAAQ,kCAARA,EAAQ,CAARA;AA1CwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAtFF;;AAAA;AAAA;AAAA;AAAA,eAsFpBS;;AAtFoB;AAAA;AAAA,mBAwIHL,sBAAsB,SAxInB,sBAwImB,CAxInB;;AAAA;AAwIxB4B,wBAxIwB,iBAwIxBA;AACAA,wBAAY,GAAG,YAAY,CAAZ,OAAoB,uBAAW;AAAA,qBAAIpB,8CAAQ,CAACM,WAAW,CAAXA,MAAD,MAAZ,sBAAY,CAAZ;AAA9Cc,aAAe,CAAfA;AACAA,wBAAY,GAAGC,8CAAI,CAAC3I,MAAM,CAANA,MAAD,aAA2B,sDAAa,YAAY,CAAZ,OAAoB,gBAAI;AAAA;AAArC,aAAa,CAAb,sBAA9C0I,MAA8C,CAA3B,CAAnBA;AA1IwB;AAAA;;AAAA;AAAA;AAAA;AA4IxBhC,oBAAQ,qCAARA,EAAQ,CAARA;;AA5IwB;AA+I3BgB,mBAAO,iBAAPA,YAAO,CAAPA;;AA/I2B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAmJbC,qBAAqB,CAnJR,YAmJQ,CAnJR;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAdxB,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB;AAsJP;AAAA;AAAA;;;4EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAEGtF,eAFH,wEAEGA;AAFH;AAAA,mBAGkCyH,KAAK,CAHvC,GAGuC,CAHvC;;AAAA;AAGGlB,kCAHH,iBAGGA;AAHH;AAAA,mBAIiBA,sBAAsB,CAJvC,IAIiBA,EAJjB;;AAAA;AAIGmB,gBAJH,iBAIGA;AAJH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAQP;AAAA;AAAA;;;+EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAEGK,iBAFH,GAEWX,OAAO,IAFlB,KAEGW;AACAC,qBAHH,GAGepK,IAAI,CAHnB,IAGGoK;AACAhI,eAJH,0IAIGA;AAJH;AAAA,mBAKkCyH,KAAK,CALvC,GAKuC,CALvC;;AAAA;AAKGlB,kCALH,iBAKGA;AALH;AAAA,mBAMgBA,sBAAsB,CANtC,IAMgBA,EANhB;;AAAA;AAMGmB,gBANH,iBAMGA;AANH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAUP;AAAA;AAAA;;;0EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAEGK,iBAFH,GAEWX,OAAO,IAFlB,KAEGW;AACAC,qBAHH,GAGepK,IAAI,CAHnB,IAGGoK;AACAhI,eAJH,oHAIGA;AAJH;AAAA,mBAKkCyH,KAAK,CALvC,GAKuC,CALvC;;AAAA;AAKGlB,kCALH,iBAKGA;AALH;AAAA,mBAMgBA,sBAAsB,CANtC,IAMgBA,EANhB;;AAAA;AAMGmB,gBANH,iBAMGA;AANH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAUP;AAAA;EAWA;;;+EAXO;AAAA;AAAA;AAAA;AAAA;AAAA;AAEH;AACA;AAEM1H,eALH,6EAKGA;AALH;AAAA,mBAMkCyH,KAAK,CANvC,GAMuC,CANvC;;AAAA;AAMGlB,kCANH,iBAMGA;AANH;AAAA,mBAOgBA,sBAAsB,CAPtC,IAOgBA,EAPhB;;AAAA;AAOGmB,gBAPH,iBAOGA;AAPH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjNP;AAEO,IAAM9B,UAAU,GAAG;AAEtB;AACAqC,OAAK,EAHiB;AAItBC,SAAO,EAJe;AAMtB;AACA;AAEA;AACAC,MAAI,EAVkB;AAWtBC,UAAQ,EAXc;AAYtBC,UAAQ,EAZc;AAatBC,UAAQ,EAbc;AActBC,SAAO,EAde;AAetB;AACAC,WAAS,EAhBa;AAkBtB;AACAC,aAAW,EAAE;AAnBS,CAAnB;AAsBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,2BAA8B;AACvD,MAAIrJ,KAAK,GAAG;AAAEsJ,QAAI,EAAN;AAAYtL,SAAK,EAAE;AAAnB,GAAZ;AACA,MAAG,CAAH,UAAc;AACd,MAAGuL,QAAQ,CAARA,SAAkBnC,8CAAQ,CAACmC,QAAQ,CAARA,MAAD,WAACA,EAAD,EAA7B,cAA6B,CAA7B,EAA6E,KAAK,GAAG;AAAED,QAAI,EAAN;AAAiBtL,SAAK,EAAEuL,QAAQ,CAARA;AAAxB,GAAR;AAC7E,MAAGvJ,KAAK,CAALA,gBAAsBuJ,QAAQ,CAA9BvJ,OAA8B,CAA9BA,IAAwCoH,8CAAQ,CAACmC,QAAQ,CAARA,OAAQ,CAARA,CAAD,WAACA,EAAD,EAAnD,cAAmD,CAAnD,EAAmG,KAAK,GAAG;AAAED,QAAI,EAAN;AAAiBtL,SAAK,EAAEuL,QAAQ,CAARA,OAAQ,CAARA;AAAxB,GAAR;AACnG,MAAGvJ,KAAK,CAALA,gBAAsBuJ,QAAQ,CAA9BvJ,WAA0CoH,8CAAQ,CAACmC,QAAQ,CAARA,QAAD,WAACA,EAAD,EAArD,cAAqD,CAArD,EAAuG,KAAK,GAAG;AAAED,QAAI,EAAN;AAAmBtL,SAAK,EAAEuL,QAAQ,CAARA;AAA1B,GAAR;AAEvG;AAPG;AAUA,IAAMC,UAAU,GAAG,SAAbA,UAAa,uBAA0B;AAChD,MAAG,CAAH,UAAc;AACd,MAAIpD,cAAc,GAAG,MAAM,CAAN,qBAA4B,eAAG;AAAA,WAAIvI,GAAG,CAAP,WAAIA,EAAJ;AAApD,GAAqB,CAArB;AACA,MAAMmC,KAAK,GAAGqJ,aAAa,WAA3B,cAA2B,CAA3B;AACA;AAJG;AAOA,IAAMI,qBAAqB,GAAG,SAAxBA,qBAAwB,wBAA2B;AAC5D,SAAO,MAAM,CAAN,oBAA2B,eAAG;AAAA,WAAIF,QAAQ,CAARA,GAAQ,CAARA,mBAAgCzK,WAAW,CAA/C,WAAoCA,EAApC;AAArC,GAAO,CAAP;AADG;AAIA,IAAM4K,SAAS,GAAG,SAAZA,SAAY,uBAA0B;AAC/C,MAAG,CAAH,UAAc;AACd,MAAMJ,IAAI,GAAGE,UAAU,WAAVA,UAAU,CAAVA,CAAb;AACA,MAAG,CAAH,MAAU;AACV,SAAOG,SAAS,CAAhB,IAAgB,CAAhB;AAJG;AAOA,IAAMA,SAAS,GAAG,SAAZA,SAAY,OAAQ;AAC7B;;AACA,UAAOL,IAAI,CAAX,WAAOA,EAAP;AACI;AACIM,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACA;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACA;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;AA1BR;;AA4BA;AA9BG,E;;;;;;;;;;;;;;;;;;ACpDA,IAAMC,cAAc,GAAG,CAC1B;AACIC,MAAI,EADR;AAEIC,YAAU,EAAE,CACR;AACIC,WAAO,EADX;AAEIxI,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG,EAKH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KALG;AAFX,GADQ,EAcR;AACIwI,WAAO,EADX;AAEIxI,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAFX,GAdQ,EAuBR;AACIwI,WAAO,EADX;AAEIxI,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAFX,GAvBQ,EAgCR;AACIwI,WAAO,EADX;AAEIxI,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG,EAKH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KALG;AAFX,GAhCQ;AAFhB,CAD0B,EAkD1B;AACIsI,MAAI,EADR;AAEIE,SAAO,EAFX;AAGID,YAAU,EAAE,CACR;AACIC,WAAO,EADX;AAEIxI,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAFJ;AAGI4D,UAAI,EAHR;AAII6E,SAAG,EAAE;AAJT,KADG;AAFX,GADQ,EAYR;AACID,WAAO,EADX;AAEIE,SAAK,EAFT;AAGIC,QAAI,EAHR;AAII3I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAFJ;AAGI4D,UAAI,EAHR;AAII6E,SAAG,EAAE;AAJT,KADG;AAJX,GAZQ,EAyBR;AACID,WAAO,EADX;AAEIE,SAAK,EAFT;AAGIC,QAAI,EAHR;AAII3I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAFJ;AAGI,cAHJ;AAIIyI,SAAG,EAAE;AAJT,KADG;AAJX,GAzBQ,EAsCR;AACID,WAAO,EADX;AAEIE,SAAK,EAFT;AAGIC,QAAI,EAHR;AAII3I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAFJ;AAGI4D,UAAI,EAAE;AAHV,KADG;AAJX,GAtCQ,EAkDR;AACI4E,WAAO,EADX;AAEIE,SAAK,EAFT;AAGIC,QAAI,EAHR;AAII3I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAJX,GAlDQ,EA6DR;AACIwI,WAAO,EADX;AAEIE,SAAK,EAFT;AAGI1I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAHX,GA7DQ,EAuER;AACIwI,WAAO,EADX;AAEIE,SAAK,EAFT;AAGI1I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAHX,GAvEQ,EAiFR;AACIwI,WAAO,EADX;AAEIE,SAAK,EAFT;AAGI1I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAHX,GAjFQ,EA2FR;AACIwI,WAAO,EADX;AAEIE,SAAK,EAFT;AAGI1I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAHX,GA3FQ,EAqGR;AACIwI,WAAO,EADX;AAEIE,SAAK,EAFT;AAGI1I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAHX,GArGQ,EA+GR;AACIwI,WAAO,EADX;AAEIE,SAAK,EAFT;AAGI1I,SAAK,EAAE,CACH;AACI,wBADJ;AAEI,kBAAY;AAFhB,KADG;AAHX,GA/GQ;AAHhB,CAlD0B,CAAvB,C;;;;;;;;;;;;;;;;;;;;;ACAP;AAEO,IAAM4I,YAAY,GAAG,CACxB;AAAEC,aAAW,EAAE;AAAf,CADwB,CAArB;AAIA,IAAMC,UAAU,GAAG,SAAbA,UAAa,QAAS;AAE/B,MAAMC,EAAE,GAAR;AACA,SAAO,CACH;AACIL,SAAK,EAAEE,YAAY,CAAZA,CAAY,CAAZA,CADX;AAEIlG,MAAE,EAAEqG,EAAE,CAAFA,YAFR;AAGIC,QAAI,EAAED,EAAE,CAAFA,YAHV;AAII9H,cAAU,EAAE,6DAAY,aAAC;AAAA,aAAIkD,CAAC,CAADA,SAAJ;AAAb,OAJhB;AAKIzC,WAAO,EALX;AAMI1B,SAAK,EAAE,CAAE;AAAE7B,cAAQ,EAAV;AAAkBmK,UAAI,EAAE;AAAxB,KAAF,CANX;AAOI1J,UAAM,EAAE,CACJ;AAAE0J,UAAI,EAAES,EAAE,CAAFA,KAAR;AAA2BvM,WAAK,YAAKuM,EAAE,CAAFA,UAAL,mBAA2BA,EAAE,CAAFA,UAA3B,mBAAiDA,EAAE,CAAFA,UAAjD;AAAhC,KADI,EAEJ;AAAET,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAqCvM,WAAK,EAAEuM,EAAE,CAAFA,MAASE;AAArD,KAFI,CAPZ;AAWIC,YAAQ,EAAE,uFAXd,oBAWc,CAXd;AAYItF,QAAI,EAZR;AAaIzE,OAAG,EAAE;AAbT,GADG,EAgBH;AACIuJ,SAAK,EAAEE,YAAY,CAAZA,CAAY,CAAZA,CADX;AAEIlG,MAAE,EAAEqG,EAAE,CAAFA,YAFR;AAGIC,QAAI,EAAED,EAAE,CAAFA,YAHV;AAII9H,cAAU,EAAE,6DAAY,aAAC;AAAA,aAAIkD,CAAC,CAADA,SAAJ;AAAb,OAJhB;AAKIzC,WAAO,EALX;AAMI1B,SAAK,EAAE,CAAE;AAAE7B,cAAQ,EAAV;AAAkBmK,UAAI,EAAE;AAAxB,KAAF,CANX;AAOI1J,UAAM,EAAE,CACJ;AAAE0J,UAAI,EAAES,EAAE,CAAFA,KAAR;AAA2BvM,WAAK,YAAKuM,EAAE,CAAFA,UAAL,mBAA2BA,EAAE,CAAFA,UAA3B;AAAhC,KADI,EAEJ;AAAET,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAqCvM,WAAK,EAAEuM,EAAE,CAAFA,MAASE;AAArD,KAFI,EAGJ;AAAEX,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAuBvM,WAAK,EAAEuM,EAAE,CAAFA,MAA9B;AAA6CG,cAAQ,EAAE,CAAE;AAAE/K,gBAAQ,EAAV;AAAkB3B,aAAK,EAAE;AAAzB,OAAF;AAAvD,KAHI,EAIJ;AAAE8L,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAuBvM,WAAK,EAAEuM,EAAE,CAAFA,MAASI;AAAvC,KAJI,EAKJ;AAAEb,UAAI,EAAES,EAAE,CAAFA,KAAR;AAA2BvM,WAAK,EAAE;AAAlC,KALI,EAMJ;AAAE8L,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAsCvM,WAAK,YAAKuM,EAAE,CAAFA,oBAAL;AAA3C,KANI,EAOJ;AAAET,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAgCvM,WAAK,EAAEuM,EAAE,CAAFA,eAAkBK;AAAzD,KAPI,EAQJ;AAAEd,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAqCvM,WAAK,EAAEuM,EAAE,CAAFA,MAASE;AAArD,KARI,CAPZ;AAiBIC,YAAQ,EAAE,uBAjBd,qBAiBc,CAjBd;AAkBIG,UAAM,EAAE,UAlBZ,UAkBY,CAlBZ;AAmBIzF,QAAI,EAnBR;AAoBIzE,OAAG,EAAE;AApBT,GAhBG,EAsCH;AACIuJ,SAAK,EAAEE,YAAY,CAAZA,CAAY,CAAZA,CADX;AAEIlG,MAAE,EAAEqG,EAAE,CAAFA,YAFR;AAGIC,QAAI,EAAED,EAAE,CAAFA,YAHV;AAII9H,cAAU,EAAE,6DAAY,aAAC;AAAA,aAAIkD,CAAC,CAADA,SAAJ;AAAb,OAJhB;AAKIzC,WAAO,EALX;AAMI1B,SAAK,EAAE,CAAE;AAAE7B,cAAQ,EAAV;AAAkBmK,UAAI,EAAE;AAAxB,KAAF,CANX;AAOI1J,UAAM,EAAE,CACJ;AAAE0J,UAAI,EAAES,EAAE,CAAFA,KAAR;AAA2BvM,WAAK,YAAKuM,EAAE,CAAFA,UAAL,mBAA2BA,EAAE,CAAFA,UAA3B;AAAhC,KADI,EAEJ;AAAET,UAAI,EAAES,EAAE,CAAFA,KAAR;AAAqCvM,WAAK,EAAEuM,EAAE,CAAFA,MAASO;AAArD,KAFI,CAPZ;AAWIJ,YAAQ,EAAE,qEAXd,oBAWc,CAXd;AAYItF,QAAI,EAZR;AAaIzE,OAAG,EAAE;AAbT,GAtCG,CAqDH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlEG,GAAP;AAHG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNP;AAEA;AACA;AACA;AAEA;AAEO,IAAMoK,kBAAkB;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAE3BpL,QAAQ,KAAKG,MAAM,CAFQ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAI9BH,oBAAQ,GAAGG,MAAM,CAAjBH;;AAJ8B,gBAM1BqL,8CAAO,CAACC,0DANkB,KAMnB,CANmB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAQLnG,wEARK;;AAAA;AAQxBoG,sBARwB,gBAQxBA;AAEAC,uBAVwB,KAUxBA;AAEND,sBAAU,CAAVA,QAAmB,gBAAQ;AACvB,kBAAMrN,GAAG,GAAGwI,MAAM,CAANA,WAAZ,CAAYA,CAAZ;AACA8E,yBAAW,CAAXA,GAAW,CAAXA,GAAmBC,IAAI,CAAvBD,GAAuB,CAAvBA;AAFJD;AAKIG,iBAjB0B,iCAiB1BA;AAEJC;;AAnB8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAlBP,kBAAkB;AAAA;AAAA;AAAxB,CAAwB,EAAxB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRP;AACA;AAEO,IAAMQ,iBAAiB,GAAG,SAApBA,iBAAoB,cAA2C;AAAA,MAA7BC,mBAA6B,uEAAP,EAAO;AAExE,MAAGjN,IAAI,CAAJA,wBAA8B8H,MAAM,CAANA,KAAY9H,IAAI,CAAhB8H,wBAAyC9H,IAAI,CAAJA,uBAA1E,QAA+G;AAE/G,MAAMkN,cAAc,GAAG,6BAAKC,yFAAL,oFAAwG,cAAE;AAAA;AAAjI,GAAuB,CAAvB;AAEA,MAAM/J,KAAK,GAAG+J,oFAA6BnN,IAAI,CAAjCmN,QAAd,cAAcA,CAAd;AAEA,MAAIrF,MAAM,CAANA,4BAAmC1E,KAAK,CAALA,gBAAvC,QAAsE;;AARE,aAWpEA,KAAK,CAALA,OACM+J,2FADN/J,KACM+J,CADN/J,GAEMA,KAAK,CAALA,OACI+J,2FADJ/J,KACI+J,CADJ/J,GAEI+J,0FAf0D,KAe1DA,CAf0D;AAAA,MAUlEC,UAVkE;AAAA,MAUtDC,IAVsD;;AAiBxE,MAAMC,QAAQ,GAAGlK,KAAK,CAALA,OACKA,KAAK,CAALA,WADLA,GACKA,CADLA,GAEKA,KAAK,CAALA,WAFtB,GAEsBA,CAFtB;AAIAA,OAAK,CAALA,QAAc,KAAK,CAAL,UAAgB,aAAC;AAAA,WAAIxC,+DAAJ,CAAIA,CAAJ;AAA/BwC,GAAc,CAAdA;AAEA,MAAMmK,OAAO,GAAGJ,sGAAhB,KAAgBA,CAAhB;AAEAE,MAAI,GAAGA,IAAI,IAAIjK,KAAK,CAApBiK;AAEA,MAAMG,SAAS,GAAG;AAAEF,YAAQ,EAAV;AAA+BD,QAAI,EAAnC;AAAqCjK,SAAK,EAALA;AAArC,GAAlB;AAEA,SAAO;AAAEkK,YAAQ,EAAV;AAAYC,WAAO,EAAnB;AAAqBC,aAAS,EAA9B;AAAgCC,mBAAe,EAAEzN,IAAI,CAAC6B;AAAtD,GAAP;AA7BG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHP;AAEA,IAAM6L,iBAAiB,GAAGC,yCAA1B;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAE7B,SAAO,YAAY,2BAA2B;AAC5C,+BAA2B;AACzB7L,aAAO,CAAC,CAAC8L,QAAQ,CAARA,OAAD,UAA2BA,QAAQ,CAARA,OAAnC9L,SAAQ,CAAD,CAAPA;AACD;;AAED,sBAAkB;AAChBkG,cAAQ,qBAARA,CAAQ,CAARA;AACAlG,aAAO,CAAC;AACN,aADM;AAEN,aAAK;AAFC,OAAD,CAAPA;AAID;;AAED+L,aAAS,CAATA;AAbF,GAAO,CAAP;AAFF;;AAmBO,IAAMC,WAAW,GAAG,SAAdA,WAAc,SAAY;AACrC,MAAG,CAAC,CAACxM,MAAM,CAAR,eAAwBA,MAAM,CAANA,YAAxB,OAAkDA,MAAM,CAANA,YAArD,MAAqDA,CAArD,EAA8E;AAC9E;AACE,WAAO,YAAY,mBAAW;AAC1BQ,aAAO,CAACR,MAAM,CAAdQ,WAAO,CAAPA;AADJ,KAAO,CAAP;AAFF,SAKO;AACP;AACE,WAAO6L,gBAAP;AACD;AATI;AAYP,IAAMI,SAAS,GAAf;;AAEA,IAAMC,gBAAgB;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AACjB9D,iBADiB,gBACjBA;AACA+D,oBAFiB,GAEN,KAAK,CAAL,cAAoB,aAAC;AAAA,qBAAIC,CAAC,CAADA,kBAAJ;AAFf,aAEN,CAAXD;AACAE,kBAHiB,GAGR,KAAK,CAAL,cAAoB,aAAC;AAAA,qBAAID,CAAC,CAADA,kBAAJ;AAHb,aAGR,CAATC;AACAC,mBAJiB,GAIP,KAAK,CAAL,cAAoB,aAAC;AAAA,qBAAIF,CAAC,CAADA,kBAAJ;AAJd,aAIP,CAAVE;AAENlE,iBAAK,CAALA,WAAiB+D,QAAQ,GAAGA,QAAQ,CAAX,OAAzB/D;AACAA,iBAAK,CAALA,SAAeiE,MAAM,GAAGA,MAAM,CAAT,OAArBjE;AACAA,iBAAK,CAALA,UAAgBkE,OAAO,GAAGA,OAAO,CAAV,OAAvBlE;AACAA,iBAAK,CAALA,OAAaA,KAAK,CAALA,UAAgBA,KAAK,CAAlCA;AAEAA,iBAAK,CAALA,0BAAyBA,KAAK,CAA9BA,uBAA4CA,KAAK,CAAjDA;AACAA,iBAAK,CAALA,yBAAwBA,KAAK,CAA7BA,uBAA2CA,KAAK,CAAhDA,qBAA4DA,KAAK,CAAjEA;AAEAA,iBAAK,CAALA,UAAgB5I,MAAM,CAANA,yCAAyC4I,KAAK,CAA9C5I,uCAAgF4I,KAAK,CAArGA,aAAgB5I,CAAhB4I;AACMmE,wBAfiB,GAeF,YAAY,mBAAW;AAC1CvM,qBAAO,CAAPA,KAAO,CAAPA;AAhBqB,aAeF,CAAfuM;AAfiB;AAAA;;AAAA;AAkBjBC,wBAlBiB,gBAkBjBA;AAlBiB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAhBN,gBAAgB;AAAA;AAAA;AAAtB,CAAsB,EAAtB;;AAsBA,IAAMO,cAAc;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,iBADe,kGACfA;AACAC,qBAFe,QAEfA,CAFe,CAEE;;AACjBC,oBAHe,MAGfA,CAHe,CAGA;;AACfvN,oBAJe,GAIJG,MAAM,CAANA,YAJI,IAIfH;AACAgB,eALe,mKAKfA;AALe;AAAA,mBAMEyH,KAAK,CANP,GAMO,CANP;;AAAA;AAMf+E,oBANe,iBAMfA;AANe;AAAA,mBAOFA,QAAQ,CAPN,IAOFA,EAPE;;AAAA;AAOf9E,gBAPe,iBAOfA;AAPe;AAAA,mBAQDmE,gBAAgB,OARf,MAQe,CARf;;AAAA;AAQf9D,iBARe,iBAQfA;AACN6D,qBAAS,CAATA,QAAkB,oBAAQ;AAAA,qBAAIjE,QAAQ,CAAZ,KAAY,CAAZ;AAA1BiE;AATqB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAdQ,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB;;AAaO,IAAMK,QAAQ;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAe7N,iBAAf,mEAAeA;;AAAf,kBACnB,CAAC,CAACO,MAAM,CAAR,SAAkB,CADC;AAAA;AAAA;AAAA;;AAEdqN,oBAFc,GAEH,YAAY,mBAAW;AACtC7M,qBAAO,CAACR,MAAM,CAAdQ,KAAO,CAAPA;AAHkB,aAEH,CAAX6M;AAFc;AAAA;;AAAA;AAKd9E,gBALc,iBAKdA;AALc;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAQMiE,WAAW,CARjB,MAQiB,CARjB;;AAAA;AAQde,uBARc,iBAQdA;AACAH,oBATc,GASHG,WAAW,CAAXA,GAAW,CAAXA,IAAoBA,WAAW,CAT5B,GASdH;AACAD,qBAVc,GAUFI,WAAW,CAAXA,GAAW,CAAXA,IAAoBA,WAAW,CAV7B,MAU6B,CAA3CJ;AACNnN,kBAAM,CAANA,cAAqB;AAAE+H,iBAAG,EAAL;AAAiB,sBAAMoF;AAAvB,aAArBnN;AAXoB,8CAabiN,cAAc,sBAbD,MAaC,CAbD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAARK,QAAQ;AAAA;AAAA;AAAd,CAAc,EAAd;AAiBA,IAAME,mBAAmB,GAAG,SAAtBA,mBAAsB,WAAY;AAC7Cf,WAAS,CAATA;AADK;;AAIP,IAAMgB,eAAe;AAAA,sEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAChBC,sBADgB,qCAChBA;AACA7M,eAFgB,gEAEhBA;AAFgB;AAAA;AAAA,mBAIGyH,KAAK,CAJR,GAIQ,CAJR;;AAAA;AAId+E,oBAJc,iBAIdA;AAJc;AAAA,mBAKDA,QAAQ,CALP,IAKDA,EALC;;AAAA;AAKd9E,gBALc,iBAKdA;AALc;AAAA;;AAAA;AAAA;AAMZoF,wBANY,2BAMZA;AAAcC,wBANF,2BAMEA;AANF,8CAOb;AAAED,0BAAY,EAAd;AAAgBC,0BAAY,EAAZA;AAAhB,aAPa;;AAAA;AAAA;AAAA;AASpBlK,mBAAO,CAAPA,qBAAsBmK,GAAG,CAAzBnK,oBAAoCmK,GAAG,CAAvCnK;;AAToB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAf+J,eAAe;AAAA;AAAA;AAArB,CAAqB,EAArB;;AAaA,IAAMK,cAAc;AAAA,sEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AACfJ,sBADe,qCACfA;AACA7M,eAFe,4JAEfA;AAFe;AAAA,mBAGEyH,KAAK,CAHP,GAGO,CAHP;;AAAA;AAGf+E,oBAHe,iBAGfA;AAHe;AAAA,mBAIFA,QAAQ,CAJN,IAIFA,EAJE;;AAAA;AAIf9E,gBAJe,iBAIfA;AAJe;AAAA;;AAAA;AAAA;AAKbwF,gBALa,oBAKbA;AAAMC,sBALO,0BAKPA;AAAYJ,wBALL,4BAKKA;AAAcR,oBALnB,wBAKmBA;AAAUD,qBAL7B,yBAK6BA;AAL7B,8CAMd;AAAEY,kBAAI,EAAN;AAAQC,wBAAU,EAAlB;AAAoBJ,0BAAY,EAAhC;AAAkCR,sBAAQ,EAA1C;AAA4CD,uBAAS,EAATA;AAA5C,aANc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAdW,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB;;AASA,IAAMG,QAAQ;AAAA,sEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AACTpN,eADS,uCACTA;AADS;AAAA,mBAEQyH,KAAK,CAFb,GAEa,CAFb;;AAAA;AAET+E,oBAFS,iBAETA;AAFS;AAAA,mBAGIA,QAAQ,CAHZ,IAGIA,EAHJ;;AAAA;AAGT9E,gBAHS,iBAGTA;AAHS;AAAA;;AAAA;AAAA;AAIP2F,cAJO,kBAIPA;AAJO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAARD,QAAQ;AAAA;AAAA;AAAd,CAAc,EAAd;;AAQO,IAAME,aAAa;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAe1O,iBAAf,mEAAeA;;AAAf,kBAErB,CAAC,CAACO,MAAM,CAAR,cAAuB,CAFF;AAAA;AAAA;AAAA;;AAGjBqN,oBAHiB,GAGN,YAAY,mBAAW;AACtC7M,qBAAO,CAACR,MAAM,CAAdQ,UAAO,CAAPA;AAJqB,aAGN,CAAX6M;AAHiB;AAAA;;AAAA;AAMjB9E,gBANiB,iBAMjBA;AANiB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,mBASN0F,QATM;;AAAA;AASjBC,cATiB,iBASjBA;AATiB;AAAA,mBAU+CJ,cAAc,CAV7D,EAU6D,CAV7D;;AAAA;AAAA;AAUfC,gBAVe,6BAUfA;AAAMC,sBAVS,mCAUTA;AAAYJ,wBAVH,qCAUGA;AAAcR,oBAVjB,iCAUiBA;AAAUD,qBAV3B,kCAU2BA;AAV3B,8CAWhB;AAAEY,kBAAI,EAAN;AAAQC,wBAAU,EAAlB;AAAoBJ,0BAAY,EAAhC;AAAkCR,sBAAQ,EAA1C;AAA4CD,uBAAS,EAATA;AAA5C,aAXgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAbgB,aAAa;AAAA;AAAA;AAAnB,CAAmB,EAAnB;AAeP;AAAA;AAAA;;;6EAAO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEL;AAEMtN,eAJD,kKAICA;AAJD;AAAA,mBAMkByH,KAAK,CANvB,GAMuB,CANvB;;AAAA;AAMC+E,oBAND,iBAMCA;AAND;AAAA,mBAOcA,QAAQ,CAPtB,IAOcA,EAPd;;AAAA;AAOC9E,gBAPD,iBAOCA;AAPD;AAAA;;AAAA;AAAA;AAQG6F,sBARH,0BAQGA;AARH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAYP;AACA,IAAIC,iBAAiB,GAArB;AACA,IAAIC,aAAa,GAAjB;AACA;AACA,IAAIC,YAAY,GAAhB;AAEA;AAAA;AAAA;;;0FAAO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEL;AAEM1N,eAJD,6JAICA;AAJD;AAAA,mBAMkByH,KAAK,CANvB,GAMuB,CANvB;;AAAA;AAMC+E,oBAND,iBAMCA;AAND;AAAA,mBAOcA,QAAQ,CAPtB,IAOcA,EAPd;;AAAA;AAOC9E,gBAPD,iBAOCA;AAPD;AAAA;;AAAA;AAAA;AAQGiG,uBARH,2BAQGA;AARH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAYP,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,gBAAmB;AAC7CJ,mBAAiB,GAAjBA;AACA,MAAMK,MAAM,GAAGC,QAAQ,CAARA,cAAf,QAAeA,CAAf;AACED,QAAM,CAANA;AACAA,QAAM,CAANA;AACAC,UAAQ,CAARA;AACAD,QAAM,CAANA,yBAAgC,YAAM;AACpCJ,iBAAa,GAAbA;AACAM,YAAQ;AAFVF;AANJ;;AAYO,IAAMG,2BAA2B,GAAG,SAA9BA,2BAA8B,kBAAqB;AAE9D,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAE3B,QAAG,CAAH,eAAmB;;AAEnB,QAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,sBAA8B;AACvD,UAAIC,MAAM,IAAIC,MAAM,CAANA,gCAAd,IAAyD;AACvDC,aAAK,CAALA,MAAK,CAALA;AACA;AACD;;AAEDN,cAAQ,CAARA,WAAQ,CAARA;AANF;;AAQA,QAAG,CAAH,SAAa;AACXO,aAAO,GAAG,IAAIF,MAAM,CAANA,YAAdE,mBAAU,EAAVA;AACD;;AAEDA,WAAO,CAAPA,oBAA4B;AAAEC,WAAK,EAAExG;AAAT,KAA5BuG;AAhBF;;AAmBA,yBAAsB;AAEpB,QAAME,cAAa,GAAGhQ,KAAK,CAA3B,kBAAsBA,EAAtB;;AAEA,QAAMiQ,GAAG,qHAAT,mBAAS,CAAT;AAEAb,uBAAmB,MAAM,YAAM;AAC7BK,oBAAc;AADhBL,KAAmB,CAAnBA;AANF,SASO;AACLK,kBAAc;AACf;AAhCI;AAmCA,IAAMS,kBAAkB,GAAG,SAArBA,kBAAqB,kBAAqB;AAErD,MAAMT,cAAc,GAAG,SAAjBA,cAAiB,gBAAiB;AAEtC,QAAG,CAAH,SAAa;AACTK,aAAO,GAAG,IAAIF,MAAM,CAANA,YAAdE,mBAAU,EAAVA;AACH;;AAEDA,WAAO,CAAPA,oBACE;AACEC,WAAK,EADP,MAEE;;AAFF,KADFD;AANF;;AAcA,yBAAsB;AACpBE,iBAAa,GAAG,IAAIJ,MAAM,CAANA,YAApBI,wBAAgB,EAAhBA;AACAP,kBAAc,CAAdA,aAAc,CAAdA;AACAP,gBAAY,GAAZA;AACAF,qBAAiB,GAJG,KAIpBA,CAJoB,CAIO;AAJ7B,SAKO;AACL,QAAGzF,KAAK,KAAR,cAA2B;AACzBkG,oBAAc,CAAdA,aAAc,CAAdA;AACD;;AACDP,gBAAY,GAAZA;AACD;AA1BI;AA6BA,IAAMiB,kBAAkB,GAAG,SAArBA,kBAAqB,oBAAuB;AAEvD,MAAIC,OAAO,GAAG;AACZxH,WAAO,EADK,QAEZ;;AAFY,GAAd;AAKA,MAAIkH,OAAO,GAAG,IAAIF,MAAM,CAANA,KAAlB,QAAc,EAAd;AACIE,SAAO,CAAPA;AAEJd,mBAAiB,GAAjBA;AAVK,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpPP;AAEA;AAEA;CAE2Y;;CACvQ;;CACpE;AAEhE;;AAEAqB;AAMAC;AAEO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAEtC,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAE1B,QAAMC,GAAG,GAAG,wBAAwBvD,SAAS,CAAjC,cAAgD,CAACwD,MAAM,CAAnE;AACA,QAAMC,EAAE,GAAIF,GAAD,GAAQG,MAAM,CAAd,QAAuBF,MAAM,CAAxC;AACA,QAAMG,EAAE,GAAIJ,GAAD,GAAQG,MAAM,CAAd,SAAwBF,MAAM,CAAzC;AAEA,QAAMI,cAAc,GAAGJ,MAAM,CAANA,cAAvB;AAEApB,YAAQ,CAARA,0CAAmDwB,cAAc,GAAjExB;AACAA,YAAQ,CAARA,8CAAuDwB,cAAc,GAAdA,MAAvDxB;AACAA,YAAQ,CAARA,sDAAgEwB,cAAc,GAAf,GAACA,GAAhExB;AACAA,YAAQ,CAARA,uDAAiEwB,cAAc,GAAf,EAACA,GAAjExB;AACAA,YAAQ,CAARA,uDAAiEwB,cAAc,GAAf,EAACA,GAAjExB;AACAA,YAAQ,CAARA,2DAAqEwB,cAAc,GAAf,CAACA,GAArExB;AACAA,YAAQ,CAARA,iEAA2EwB,cAAc,GAAf,EAACA,GAA3ExB;AACAA,YAAQ,CAARA,6DAAuEwB,cAAc,GAAf,EAACA,GAAvExB;AACAA,YAAQ,CAARA,kDAA4DwB,cAAc,GAAf,EAACA,GAA5DxB;AACAA,YAAQ,CAARA,qDAA+DwB,cAAc,GAAf,CAACA,GAA/DxB;AACAA,YAAQ,CAARA,6CAAuDwB,cAAc,GAAf,EAACA,GAAvDxB;AACAA,YAAQ,CAARA,kDAA4DwB,cAAc,GAAf,EAACA,GAAD,CAACA,GAA5DxB;AACAA,YAAQ,CAARA,kDAA4DwB,cAAc,GAAf,EAACA,GAA5DxB;AAEA,QAAMyB,QAAQ,GAAGC,UAAU,CAACC,gBAAgB,CAAC3B,QAAQ,CAAzB2B,eAAgB,CAAhBA,gDAA5B,EAA4BA,CAAD,CAA3B;AACA,QAAMC,UAAU,GAAG,CAAEJ,cAAc,GAAf,GAACA,GAAF,YAAnB;AAEAxB,YAAQ,CAARA,oDAA6D4B,UAAU,GAAvE5B;AACAA,YAAQ,CAARA,4DAAqEwB,cAAc,GAAdA,KAArExB;AACAA,YAAQ,CAARA,iEAA0EwB,cAAc,GAAdA,KAA1ExB;AAEA,QAAM6B,eAAe,GAAGT,MAAM,CAANA,aAAxB;AAEApB,YAAQ,CAARA,0CAAmD6B,eAAe,GAAlE7B;AAEAA,YAAQ,CAARA,8CAAuD6B,eAAe,GAAfA,MAAvD7B;AACAA,YAAQ,CAARA,sDAAgE6B,eAAe,GAAG,CAAnB,GAACA,GAAD,EAACA,GAAhE7B;AACAA,YAAQ,CAARA,sDAAgE6B,eAAe,GAAhB,KAACA,GAA4BL,cAAc,GAA3C,EAACK,GAAhE7B;AAnCJ;;AAsCAkB,iBAAe;AAEfE,QAAM,CAANA,2BAAkC,YAAM;AACpCF,mBAAe;AADnBE;AA1CK;AA+CA,IAAMU,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAEjC,MAAMC,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAMC,MAAM,GAAGhC,QAAQ,CAARA,cAAf,MAAeA,CAAf;AAEAiC,uEAAc,KAAKF,QAAQ,CAAb,SAAdE,MAAc,CAAdA;AAPK,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnEP;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAE1B;AACAJ,4EAAa;AAEbK,YAAU,uEAAE;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEVC,+DAAY;AAAEC,iBAAG,EAAE;AAAP,aAAZD;AAEAnB,2FAJU,IAMV;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEMqB,6BAfI,GAegBC,2FAAmCC,IAfnD,EAegBD,CAApBD;AAfI;AAAA,8BAqB2E9F,0DArB3E,EAqBEnL,MArBF,2BAqBmBoR,cArBnB,4BAqB+CC,UArB/C,+BAqB2DC,WArB3D;AAuBNC,sBAAU,GAAVA;AAEAvR,kBAAM,CAANA,iBAAwB+P,MAAM,CAANA,iCAAxB/P;AACAA,kBAAM,CAANA,kBAAyB,CAACA,MAAM,CAAhCA;AAEMwR,mBA5BA,GA4BUJ,cAAc,uCAA2B;AAAEK,mBAAK,EAAP;AAAeC,4BAAc,EAAE;AAA/B,aAAnDF;AAENhG;AACAA;;AA/BM,kBAiCH8F,WAAW,IAAIA,WAAW,CAAXA,WAjCZ;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAkC6BtM,+EAlC7B;;AAAA;AAkCI2M,4BAlCJ,iBAkCIA;AACNnG;;AAnCE;AAsCNoG;AACAC,qFAAgB;AAChBD;AACAE,uFAAkB;AAClBF;AACAA;AACAA,yJA5CM,MA4CNA,EA5CM,CA4C2C;;AACjDA;AAEAA;AACAA;AACAA;AAEAA;;AAEMG,wBArDA;AAAA,kFAqDe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACeC,6EAAgB,CAD/B,MAC+B,CAD/B;;AAAA;AACXC,yCADW,gBACXA;AACNzG;;AAFiB;AAAA;AAAA;AAAA;AAAA;AAAA;AArDf;;AAAA;AAAA;AAAA;AAAA,eAqDAuG;;AAKN,gBAAG,CAAC/R,MAAM,CAANA,MAAJ,cAA+B;AAC3B+R,0BAAY;AACf;;AA5DK;AAAA,mBA8De/M,oFAA+B,uCA9D9C,SA8D8C,CAA/BA,CA9Df;;AAAA;AA8DFkN,oBA9DE,iBA8DFA;AACAA,oBAAQ,GAAG7S,8EAAX6S,MAAW7S,CAAX6S;AACJ1G;AAEA2G;AAlEM;AAAA;;AAAA;AAAA;AAAA;AAsENzO,mBAAO,CAAPA,mCAtEM,EAsENA;AACA;AACA;;AAxEM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAZoN,GAAU,GAAVA;AA4EAf,QAAM,CAANA;AACAA,QAAM,CAANA;AACAA,QAAM,CAANA;AAEA,MAAMrB,MAAM,GAAGC,QAAQ,CAARA,cAAf,QAAeA,CAAf;AACMD,QAAM,CAANA,4DAA4DtC,yCAA5DsC;AACNC,UAAQ,CAARA;AAvFF;;AA0FAkC,aAAa,G;;;;;;;;;;;;;;;;;;;;AC3Hb;AACA;;AAEA,IAAMuB,iBAAiB,GAAG,SAApBA,iBAAoB,SAAU;AAChC,SAAO,uBAAuB;AAC5B,WAAO;AACL1H,UAAI,EADC;AAELpG,UAAI,EAFC;AAGL+N,UAAI,EAAEA;AAHD,KAAP;AADF;AADJ;;AAUA,IAAMC,iBAAiB,GAAGF,iBAAiB,CAACG,iFAAD,CAA3C;AACA,IAAMC,gBAAgB,GAAGJ,iBAAiB,CAACG,gFAAD,CAA1C;AACA,IAAME,UAAU,GAAGL,iBAAiB,CAACG,yEAAD,CAApC;AACA,IAAMG,WAAW,GAAGN,iBAAiB,CAACG,0EAAD,CAArC;AACA,IAAMI,gBAAgB,GAAGP,iBAAiB,CAACG,gFAAD,CAA1C;AACA,IAAMK,UAAU,GAAGR,iBAAiB,CAACG,yEAAD,CAApC;AACA,IAAMM,OAAO,GAAGT,iBAAiB,CAACG,uEAAD,CAAjC;AACA,IAAMO,WAAW,GAAGV,iBAAiB,CAACG,0EAAD,CAArC;AACA,IAAMQ,aAAa,GAAGX,iBAAiB,CAACG,4EAAD,CAAvC;AACA,IAAMS,YAAY,GAAGZ,iBAAiB,CAACG,gFAAD,CAAtC;AACA,IAAM/O,gBAAgB,GAAG4O,iBAAiB,CAACG,+EAAD,CAA1C;AACA,IAAMU,eAAe,GAAGb,iBAAiB,CAACG,8EAAD,CAAzC;AACA,IAAMW,iBAAiB,GAAGd,iBAAiB,CAACG,gFAAD,CAA3C;AACA,IAAMY,qBAAqB,GAAGf,iBAAiB,CAACG,qFAAD,CAA/C;AACA,IAAMa,SAAS,GAAGhB,iBAAiB,CAACG,wEAAD,CAAnC;AACA,IAAMc,SAAS,GAAGjB,iBAAiB,CAACG,wEAAD,CAAnC;AACA,IAAMR,YAAY,GAAGK,iBAAiB,CAACG,2EAAD,CAAtC;AACA,IAAMe,eAAe,GAAGlB,iBAAiB,CAACG,+EAAD,CAAzC;AACA,IAAMgB,gBAAgB,GAAGnB,iBAAiB,CAACG,+EAAD,CAA1C;AACA,IAAMtH,kBAAkB,GAAGmH,iBAAiB,CAACG,6EAAD,CAA5C;AACA,IAAMiB,WAAW,GAAGpB,iBAAiB,CAACG,0EAAD,CAArC;AACA,IAAMkB,UAAU,GAAGrB,iBAAiB,CAACG,yEAAD,CAApC;AACA,IAAMmB,YAAY,GAAGtB,iBAAiB,CAACG,2EAAD,CAAtC;AACA,IAAMoB,UAAU,GAAGvB,iBAAiB,CAACG,yEAAD,CAApC;AACA,IAAMqB,iBAAiB,GAAGxB,iBAAiB,CAACG,2EAAD,CAA3C;AACA,IAAMsB,iBAAiB,GAAGzB,iBAAiB,CAACG,iFAAD,CAA3C;AACA,IAAMuB,eAAe,GAAG1B,iBAAiB,CAACG,8EAAD,CAAzC;AACA,IAAMwB,eAAe,GAAG3B,iBAAiB,CAACG,8EAAD,CAAzC;AACA,IAAMyB,cAAc,GAAG5B,iBAAiB,CAACG,6EAAD,CAAxC;AACA,IAAM0B,UAAU,GAAG7B,iBAAiB,CAACG,yEAAD,CAApC;AACA,IAAM2B,WAAW,GAAG9B,iBAAiB,CAACG,0EAAD,CAArC;AACA,IAAM4B,UAAU,GAAG/B,iBAAiB,CAACG,yEAAD,CAApC;AACA,IAAM6B,QAAQ,GAAGhC,iBAAiB,CAACG,uEAAD,CAAlC;AACA,IAAM8B,QAAQ,GAAGjC,iBAAiB,CAACG,uEAAD,CAAlC;AACA,IAAM+B,eAAe,GAAGlC,iBAAiB,CAACG,+EAAD,CAAzC;AACA,IAAMgC,eAAe,GAAGnC,iBAAiB,CAACG,+EAAD,CAAzC;AACA,IAAMiC,sBAAsB,GAAGpC,iBAAiB,CAACG,uFAAD,CAAhD;AACA,IAAMkC,kBAAkB,GAAGrC,iBAAiB,CAACG,kFAAD,CAA5C;AACA,IAAMmC,qBAAqB,GAAGtC,iBAAiB,CAACG,sFAAD,CAA/C;;AAEA,IAAMoC,qBAAqB,GAAG,SAAxBA,qBAAwB,OAAI;AAAA,SAAIxJ,wDAAeqH,gBAAgB,CAAnC,IAAmC,CAA/BrH,CAAJ;AAAlC;;AACA,IAAMyJ,sBAAsB,GAAG,SAAzBA,sBAAyB,OAAI;AAAA,SAAIzJ,wDAAemH,iBAAiB,CAApC,IAAoC,CAAhCnH,CAAJ;AAAnC;;AACA,IAAM0J,eAAe,GAAG,SAAlBA,eAAkB,OAAI;AAAA,SAAI1J,wDAAesH,UAAU,CAA7B,IAA6B,CAAzBtH,CAAJ;AAA5B;;AACA,IAAM2J,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAI;AAAA,SAAI3J,wDAAe4J,eAAe,CAAlC,IAAkC,CAA9B5J,CAAJ;AAAjC;;AAEA,IAAM4J,eAAe,GAAG,SAAlBA,eAAkB,OAAQ;AAC9B,SAAO,oBAAmB;AACxB,WAAO,IAAI,CAAJ,KAAU,oBAAY;AAC3B,aAAOC,QAAQ,CAACvC,UAAU,CAA1B,QAA0B,CAAX,CAAf;AADF,KAAO,CAAP;AADF;AADF;;AAQA,IAAMwC,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAI;AAAA,SAAI9J,wDAAeuH,WAAW,CAA9B,IAA8B,CAA1BvH,CAAJ;AAA7B;;AACA,IAAM+J,qBAAqB,GAAG,SAAxBA,qBAAwB,OAAI;AAAA,SAAI/J,wDAAewH,gBAAgB,CAAnC,IAAmC,CAA/BxH,CAAJ;AAAlC;;AACA,IAAMgK,eAAe,GAAG,SAAlBA,eAAkB,OAAI;AAAA,SAAIhK,wDAAeyH,UAAU,CAA7B,IAA6B,CAAzBzH,CAAJ;AAA5B;;AACA,IAAMiK,aAAa,GAAG,SAAhBA,aAAgB,OAAI;AAAA,SAAI,wDAAevC,OAAO,OAAM;AAACwC,SAAK,EAAC;AAAP,GAAN,CAAtB,CAAJ;AAA1B;;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAI;AAAA,SAAInK,wDAAe2H,WAAW,CAA9B,IAA8B,CAA1B3H,CAAJ;AAA7B;;AACA,IAAMoK,kBAAkB,GAAG,SAArBA,kBAAqB,OAAI;AAAA,SAAIpK,wDAAe4H,aAAa,CAAhC,IAAgC,CAA5B5H,CAAJ;AAA/B;;AACA,IAAMqK,qBAAqB,GAAG,SAAxBA,qBAAwB,OAAI;AAAA,SAAIrK,wDAAe6H,YAAY,CAA/B,IAA+B,CAA3B7H,CAAJ;AAAlC;;AACA,IAAMsK,qBAAqB,GAAG,SAAxBA,qBAAwB,OAAI;AAAA,SAAItK,wDAAe3H,gBAAgB,CAAnC,IAAmC,CAA/B2H,CAAJ;AAAlC;;AACA,IAAMuK,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAI;AAAA,SAAIvK,wDAAe8H,eAAe,CAAlC,IAAkC,CAA9B9H,CAAJ;AAAjC;;AACA,IAAMwK,sBAAsB,GAAG,SAAzBA,sBAAyB,OAAI;AAAA,SAAIxK,wDAAe+H,iBAAiB,CAApC,IAAoC,CAAhC/H,CAAJ;AAAnC;;AACA,IAAMyK,0BAA0B,GAAG,SAA7BA,0BAA6B,OAAI;AAAA,SAAIzK,wDAAegI,qBAAqB,CAAxC,IAAwC,CAApChI,CAAJ;AAAvC;;AACA,IAAM0K,cAAc,GAAG,SAAjBA,cAAiB,OAAI;AAAA,SAAI1K,wDAAeiI,SAAS,CAA5B,IAA4B,CAAxBjI,CAAJ;AAA3B;;AACA,IAAM2K,cAAc,GAAG,SAAjBA,cAAiB,OAAI;AAAA,SAAI3K,wDAAekI,SAAS,CAA5B,IAA4B,CAAxBlI,CAAJ;AAA3B;;AACA,IAAM4K,iBAAiB,GAAG,SAApBA,iBAAoB,OAAI;AAAA,SAAI5K,wDAAe4G,YAAY,CAA/B,IAA+B,CAA3B5G,CAAJ;AAA9B;;AACA,IAAM6K,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAI;AAAA,SAAI7K,wDAAemI,eAAe,CAAlC,IAAkC,CAA9BnI,CAAJ;AAAjC;;AACA,IAAM8K,qBAAqB,GAAG,SAAxBA,qBAAwB,OAAI;AAAA,SAAI9K,wDAAeoI,gBAAgB,CAAnC,IAAmC,CAA/BpI,CAAJ;AAAlC;;AACA,IAAM+K,mBAAmB,GAAG,SAAtBA,mBAAsB,OAAI;AAAA,SAAI/K,wDAAeF,kBAAkB,CAArC,IAAqC,CAAjCE,CAAJ;AAAhC;;AACA,IAAMgL,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAI;AAAA,SAAIhL,wDAAeqI,WAAW,CAA9B,IAA8B,CAA1BrI,CAAJ;AAA7B;;AACA,IAAMiL,eAAe,GAAG,SAAlBA,eAAkB,OAAI;AAAA,SAAIjL,wDAAesI,UAAU,CAA7B,IAA6B,CAAzBtI,CAAJ;AAA5B;;AACA,IAAMkL,iBAAiB,GAAG,SAApBA,iBAAoB,OAAI;AAAA,SAAIlL,wDAAeuI,YAAY,CAA/B,IAA+B,CAA3BvI,CAAJ;AAA9B;;AACA,IAAMmL,eAAe,GAAG,SAAlBA,eAAkB,OAAI;AAAA,SAAInL,wDAAewI,UAAU,CAA7B,IAA6B,CAAzBxI,CAAJ;AAA5B;;AACA,IAAMoL,sBAAsB,GAAG,SAAzBA,sBAAyB,OAAI;AAAA,SAAIpL,wDAAeyI,iBAAiB,CAApC,IAAoC,CAAhCzI,CAAJ;AAAnC;;AACA,IAAMqL,sBAAsB,GAAG,SAAzBA,sBAAyB,OAAI;AAAA,SAAIrL,wDAAe0I,iBAAiB,CAApC,IAAoC,CAAhC1I,CAAJ;AAAnC;;AACA,IAAMsL,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAI;AAAA,SAAItL,wDAAe2I,eAAe,CAAlC,IAAkC,CAA9B3I,CAAJ;AAAjC;;AACA,IAAMuL,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAI;AAAA,SAAIvL,wDAAe4I,eAAe,CAAlC,IAAkC,CAA9B5I,CAAJ;AAAjC;;AACA,IAAMwL,mBAAmB,GAAG,SAAtBA,mBAAsB,OAAI;AAAA,SAAIxL,wDAAe6I,cAAc,CAAjC,IAAiC,CAA7B7I,CAAJ;AAAhC;;AACA,IAAMyL,eAAe,GAAG,SAAlBA,eAAkB,OAAI;AAAA,SAAIzL,wDAAe8I,UAAU,CAA7B,IAA6B,CAAzB9I,CAAJ;AAA5B;;AACA,IAAM0L,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAI;AAAA,SAAI1L,wDAAe+I,WAAW,CAA9B,IAA8B,CAA1B/I,CAAJ;AAA7B;;AACA,IAAM2L,eAAe,GAAG,SAAlBA,eAAkB,OAAI;AAAA,SAAI3L,wDAAegJ,UAAU,CAA7B,IAA6B,CAAzBhJ,CAAJ;AAA5B;;AACA,IAAM4L,aAAa,GAAG,SAAhBA,aAAgB,OAAI;AAAA,SAAI5L,wDAAeiJ,QAAQ,CAA3B,IAA2B,CAAvBjJ,CAAJ;AAA1B;;AACA,IAAM6L,aAAa,GAAG,SAAhBA,aAAgB,OAAI;AAAA,SAAI7L,wDAAekJ,QAAQ,CAA3B,IAA2B,CAAvBlJ,CAAJ;AAA1B;;AACA,IAAM8L,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAI;AAAA,SAAI9L,wDAAemJ,eAAe,CAAlC,IAAkC,CAA9BnJ,CAAJ;AAAjC;;AACA,IAAM+L,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAI;AAAA,SAAI/L,wDAAeoJ,eAAe,CAAlC,IAAkC,CAA9BpJ,CAAJ;AAAjC;;AACA,IAAMgM,2BAA2B,GAAG,SAA9BA,2BAA8B,OAAI;AAAA,SAAIhM,wDAAeqJ,sBAAsB,CAAzC,IAAyC,CAArCrJ,CAAJ;AAAxC;;AACA,IAAMiM,uBAAuB,GAAG,SAA1BA,uBAA0B,OAAI;AAAA,SAAIjM,wDAAesJ,kBAAkB,CAArC,IAAqC,CAAjCtJ,CAAJ;AAApC;;AACA,IAAMkM,0BAA0B,GAAG,SAA7BA,0BAA6B,OAAI;AAAA,SAAIlM,wDAAeuJ,qBAAqB,CAAxC,IAAwC,CAApCvJ,CAAJ;AAAvC;;AAEO,IAAMK,OAAO,GAAG;AACnBoJ,wBAAsB,EADH;AAEnBD,uBAAqB,EAFF;AAGnBG,sBAAoB,EAHD;AAInBD,iBAAe,EAJI;AAKnBI,kBAAgB,EALG;AAMnBC,uBAAqB,EANF;AAOnBE,eAAa,EAPM;AAQnBD,iBAAe,EARI;AASnBG,kBAAgB,EATG;AAUnBC,oBAAkB,EAVC;AAWnBC,uBAAqB,EAXF;AAYnBC,uBAAqB,EAZF;AAanBC,sBAAoB,EAbD;AAcnBC,wBAAsB,EAdH;AAenBC,4BAA0B,EAfP;AAgBnBC,gBAAc,EAhBK;AAiBnBC,gBAAc,EAjBK;AAkBnBC,mBAAiB,EAlBE;AAmBnBC,sBAAoB,EAnBD;AAoBnBC,uBAAqB,EApBF;AAqBnBC,qBAAmB,EArBA;AAsBnBC,kBAAgB,EAtBG;AAuBnBE,mBAAiB,EAvBE;AAwBnBC,iBAAe,EAxBI;AAyBnBC,wBAAsB,EAzBH;AA0BnBC,wBAAsB,EA1BH;AA2BnBJ,iBAAe,EA3BI;AA4BnBK,sBAAoB,EA5BD;AA6BnBC,sBAAoB,EA7BD;AA8BnBC,qBAAmB,EA9BA;AA+BnBC,iBAAe,EA/BI;AAgCnBC,kBAAgB,EAhCG;AAiCnBC,iBAAe,EAjCI;AAkCnBC,eAAa,EAlCM;AAmCnBC,eAAa,EAnCM;AAoCnBC,sBAAoB,EApCD;AAqCnBC,sBAAoB,EArCD;AAsCnBC,6BAA2B,EAtCR;AAuCnBC,yBAAuB,EAvCJ;AAwCnBC,4BAA0B,EAA1BA;AAxCmB,CAAhB,C;;;;;;;;;;;;;;;;;;ACvGP,IAAMC,aAAa,GAAnB;AACA,IAAMC,iBAAiB,GAAvB;AACA,IAAMC,mBAAmB,GAAzB;AACA,IAAMC,kBAAkB,GAAxB;AACA,IAAMC,iBAAiB,GAAvB;AACA,IAAMC,UAAU,GAAhB;AACA,IAAMC,WAAW,GAAjB;AACA,IAAMC,WAAW,GAAjB;AACA,IAAMC,SAAS,GAAf;AAEA,IAAMC,kBAAkB,GAAxB;AACA,IAAMC,iBAAiB,GAAvB;AACA,IAAMC,kBAAkB,GAAxB;AACA,IAAMC,gBAAgB,GAAtB;AAEA,IAAMC,YAAY,GAAlB;AACA,IAAMC,kBAAkB,GAAxB;AACA,IAAMC,YAAY,GAAlB;AACA,IAAMC,cAAc,GAApB;AACA,IAAMC,uBAAuB,GAA7B;AACA,IAAMC,UAAU,GAAhB;AACA,IAAMC,eAAe,GAArB;AAEA,IAAMC,YAAY,GAAlB;AACA,IAAMC,WAAW,GAAjB;AACA,IAAMC,aAAa,GAAnB;AAEA,IAAMC,WAAW,GAAjB;AACA,IAAMC,aAAa,GAAnB;AAEA,IAAMC,mBAAmB,GAAzB;AAEA,IAAMC,gBAAgB,GAAtB;AACA,IAAMC,gBAAgB,GAAtB;AACA,IAAMC,eAAe,GAArB;AAEA,IAAMC,WAAW,GAAjB;AACA,IAAMC,WAAW,GAAjB;AACA,IAAMC,YAAY,GAAlB;AACA,IAAMC,SAAS,GAAf;AACA,IAAMC,SAAS,GAAf;AACA,IAAMC,iBAAiB,GAAvB;AACA,IAAMC,iBAAiB,GAAvB;AACA,IAAMC,yBAAyB,GAA/B;AACA,IAAMC,oBAAoB,GAA1B;AACA,IAAMC,wBAAwB,GAA9B;AAEO,IAAMrH,KAAK,GAAG;AACjBiF,qBAAmB,EADF;AAEjBC,oBAAkB,EAFD;AAGjBG,aAAW,EAHM;AAIjBC,aAAW,EAJM;AAKjBC,WAAS,EALQ;AAMjBK,cAAY,EANK;AAOjBC,oBAAkB,EAPD;AAQjBC,cAAY,EARK;AASjBC,gBAAc,EATG;AAUjBP,oBAAkB,EAVD;AAWjBC,mBAAiB,EAXA;AAYjBO,yBAAuB,EAZN;AAajBN,oBAAkB,EAbD;AAcjBC,kBAAgB,EAdC;AAejBP,YAAU,EAfO;AAgBjBa,YAAU,EAhBO;AAiBjBlB,eAAa,EAjBI;AAkBjBC,mBAAiB,EAlBA;AAmBjBG,mBAAiB,EAnBA;AAoBjBe,iBAAe,EApBE;AAqBjBC,cAAY,EArBK;AAsBjBE,eAAa,EAtBI;AAuBjBC,aAAW,EAvBM;AAwBjBC,eAAa,EAxBI;AAyBjBC,qBAAmB,EAzBF;AA0BjBJ,aAAW,EA1BM;AA2BjBM,kBAAgB,EA3BC;AA4BjBD,kBAAgB,EA5BC;AA6BjBE,iBAAe,EA7BE;AA8BjBC,aAAW,EA9BM;AA+BjBE,cAAY,EA/BK;AAgCjBD,aAAW,EAhCM;AAiCjBE,WAAS,EAjCQ;AAkCjBC,WAAS,EAlCQ;AAmCjBC,mBAAiB,EAnCA;AAoCjBC,mBAAiB,EApCA;AAqCjBC,2BAAyB,EArCR;AAsCjBC,sBAAoB,EAtCH;AAuCjBC,0BAAwB,EAAxBA;AAvCiB,CAAd,C;;;;;;;;;;;;;;;;;;AC/CA,IAAMC,MAAM,GAAG,SAATA,MAAS,QAAK;AAAA,SAAI,gBAAI;AAAA,WAAI,kBAAU;AAE7C;AACA;AACA;AACA,UAAIC,MAAM,GAAGC,IAAI,CAL4B,MAK5B,CAAjB,CAL6C,CAM7C;AACA;AAEA;AACA;;AAEA;AAZ+B;AAAR;AAApB,E;;;;;;;;;;;;;;;;ACAP;;;;AAIO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,QAAK;AAAA,SAAI,gBAAI;AAAA,WAAI,kBAAU;AACvD,UAAI,CAACC,MAAM,CAAP,QAAgB,CAACA,MAAM,CAANA,KAArB,OAAwC;AACtC,eAAOF,IAAI,CAAX,MAAW,CAAX;AACD;;AAED,UAAG5O,KAAK,CAALA,oBAAH,MAAmC,OAAO4O,IAAI,CAAX,MAAW,CAAX;AAEnC,UAAIG,SAAS,GAAGpJ,UAAU,CACxB,YAAM;AACJiJ,YAAI,CAAJA,MAAI,CAAJA;AAFsB,SAIxBE,MAAM,CAANA,KAJF,KAA0B,CAA1B;AAOA,aAAO,kBAAkB;AACvBE,oBAAY,CAAZA,SAAY,CAAZA;AADF;AAdyC;AAAR;AAA9B,E;;;;;;;;;;;;;;;;;;ACJA,IAAMC,YAAY,GAAG,SAAfA,YAAe,0CAA6C;AACrE,MAAIC,YAAY,GAAhB;AACA,MAAIC,4BAA4B,GAAhC;;AAEA,0BAAwB;AACtB,QAAIC,SAAS,GAAGC,MAAM,CAACrP,KAAK,CAA5B,QAAuBA,EAAD,CAAtB;AAEAmP,gCAA4B,GAAGC,SAAS,KAAxCD;;AAEA,QAAGD,YAAY,IAAI9T,MAAM,CAANA,GAAU8T,YAAY,CAAtB9T,OAAnB,CAAmBA,CAAnB,EAAoD;AAClD,UAAIkU,QAAQ,GAAZ;AACIA,cAAQ,GAAGA,QAAQ,IAAIlU,MAAM,CAANA,GAAUgU,SAAS,CAAnBhU,OAA2B8T,YAAY,CAA9DI,KAAuBlU,CAAvBkU;AACAA,cAAQ,GAAGA,QAAQ,IAAIlU,MAAM,CAANA,GAAUgU,SAAS,CAAnBhU,gBAAoC8T,YAAY,CAAvEI,cAAuBlU,CAAvBkU;AACJH,kCAA4B,GAAG,CAA/BA;AACD;;AAED,QAAGD,YAAY,IAAf,WAA8B;AAC5B;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,sCAA4B,GAAG,CAACC,SAAS,CAATA,YAAsBA,SAAS,CAATA,SAAvB,WAAqDF,YAAY,CAAZA,YAAyBA,YAAY,CAAZA,SAA7GC,IAA+B,CAA/BA;AACA;AAZJ;AAcD;;AAED,sCAAiC;AAC/BD,kBAAY,GAAZA;AACAK,cAAQ,CAARA,YAAQ,CAARA;AACD;AACF;;AAEDC,cAAY,CAAZA;AACAA,cAAY,CAAZA,WAAwBD,QAAQ,CAAhCC;AACA,MAAI/U,WAAW,GAAGuF,KAAK,CAALA,UAAlB,YAAkBA,CAAlB;;AACA,oCAAiC;AAC/BwP,gBAAY;AACb;;AACD,SAAO;AAAE/U,eAAW,EAAb;AAAeoE,QAAI,EAAE0Q,QAAQ,CAAC1Q;AAA9B,GAAP;AA7CG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AAEO,IAAMhK,MAAM,GAAG,SAATA,MAAS,GAAmC;AAAA,MAAlC4a,KAAkC,uEAA1BC,mEAA0B;AAAA,MAAXZ,MAAW;;AACrD,UAAOA,MAAM,CAAb;AACI,SAAK1H,+EAAL;AACI,2DAAY0H,MAAM,CAANA,KAAZ,SAAmC;AAAE1M,mBAAW,EAAEqN,KAAK,CAACrN;AAArB,OAAnC,GAA0E;AAAE3E,aAAK,EAAEgS,KAAK,CAAChS;AAAf,OAA1E;;AACJ,SAAK2J,2EAAL;AACI,qDAAsB0H,MAAM,CAA5B;;AACJ,SAAK1H,6EAAL;AACI,qDAAsB;AAAE1S,gBAAQ,EAAEoa,MAAM,CAANA,KAAYa;AAAxB,OAAtB;;AACJ,SAAKvI,gFAAL;AACI,qDAAsB0H,MAAM,CAANA,YAAtB;;AACJ;AACI;AAVR;AADG;AAeA,IAAM1O,KAAK,GAAG,SAARA,KAAQ,GAAwB;AAAA,MAAvBqP,KAAuB,uEAAf,EAAe;AAAA,MAAXX,MAAW;;AACzC,UAAOA,MAAM,CAAb;AACI,SAAK1H,0EAAL;AACI,aAAO0H,MAAM,CAAb;;AACJ;AACI;AAJR;AADG;AASA,IAAMc,IAAI,GAAG,SAAPA,IAAO,GAA0B;AAAA,MAAzBH,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAC1C,UAAOA,MAAM,CAAb;AACI,SAAK1H,yEAAL;AACI,aAAO0H,MAAM,CAAb;;AACJ;AACI;AAJR;AADG;AASA,IAAMe,UAAU,GAAG,SAAbA,UAAa,GAA0B;AAAA,MAAzBJ,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAChD,UAAOA,MAAM,CAAb;AACI,SAAK1H,yEAAL;AACI,aAAO0H,MAAM,CAAb;;AACJ;AACI;AAJR;AADG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpCP;AACA;AACA;AAEO,IAAMgB,KAAK,GAAG,SAARA,KAAQ,GAAwD;AAAA,MAAvDL,KAAuD,uEAA/C,CAAC;AAAC5Q,QAAI,EAAL;AAAuBkR,SAAK,EAAE;AAA9B,GAAD,CAA+C;AAAA,MAAXjB,MAAW;;AAC3E,UAAOA,MAAM,CAAb;AACE,SAAK1H,0EAAL;AACE,aAAO0H,MAAM,CAAb;;AACF,SAAK1H,uEAAL;AACE;;AACF;AACE;AANJ;AADK;AAWA,IAAM4I,IAAI,GAAG,SAAPA,IAAO,GAAwB;AAAA,MAAvBP,KAAuB,uEAAf,EAAe;AAAA,MAAXX,MAAW;;AAC1C,UAAOA,MAAM,CAAb;AACE,SAAK1H,yEAAL;AACE,aAAO0H,MAAM,CAAb;;AACF,SAAK1H,uEAAL;AACE,UAAM4I,KAAI,GAAGC,8CAAK,CAAlB,KAAkB,CAAlB;;AACA,UAAMC,WAAW,GAAG,KAAI,CAAJ,WAAgB,aAAC;AAAA,eAAIC,CAAC,CAAL;AAArC,OAAoB,CAApB;;AACA,uBAAgB,OAAOD,WAAW,CAAlB;AACdF,WAAI,CAAJA,MAAWlB,MAAM,CAANA,KAAXkB;AACF;;AACF;AACE;AAVJ;AADK;AAeA,IAAMI,SAAS,GAAG,SAAZA,SAAY,GAA2C;AAAA,MAA1CX,KAA0C,uEAAlCY,yEAAkC;AAAA,MAAXvB,MAAW;;AAClE,UAAOA,MAAM,CAAb;AACE;AAA0B;AACtB;AACH;;AACD,SAAK1H,+EAAL;AACE,aAAO0H,MAAM,CAAb;;AACF,SAAK1H,uEAAL;AACE,aAAOiJ,yEAAP;;AACF,SAAKjJ,uFAAL;AACE,aAAOiJ,uEAAP;;AACF;AACE;AAXJ;AADK;AAgBA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAA4D;AAAA,MAA3Db,KAA2D,uEAAnD;AAAEc,SAAK,EAAP;AAAYC,WAAO,EAAnB;AAAwBC,aAAS,EAAE;AAAnC,GAAmD;AAAA,MAAX3B,MAAW;;AACnF,UAAOA,MAAM,CAAb;AACE,SAAK1H,+EAAL;AACE,aAAO0H,MAAM,CAAb;;AACF,SAAK1H,+EAAL;AACE7O,aAAO,CAAPA,IAAYuW,MAAM,CADpB,IACEvW,EADF,CAEE;;AACA,aAAO;AAAEgY,aAAK,EAAP;AAAYC,eAAO,EAAnB;AAAwBC,iBAAS,EAAE;AAAnC,OAAP;;AACF;AACE;AARJ;AADK;AAaA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAA4D;AAAA,MAA3DjB,KAA2D,uEAAnD;AAAEc,SAAK,EAAP;AAAYC,WAAO,EAAnB;AAAwBC,aAAS,EAAE;AAAnC,GAAmD;AAAA,MAAX3B,MAAW;;AAC1F,UAAOA,MAAM,CAAb;AACE,SAAK1H,uFAAL;AACE,UAAMuJ,KAAK,GAAG7B,MAAM,CAApB;AACA,aAAO;AACLyB,aAAK,EAAEd,KAAK,CAALA,QAAckB,KAAK,CADrB;AAELH,eAAO,EAAEf,KAAK,CAALA,UAAgBkB,KAAK,CAFzB;AAGLF,iBAAS,EAAEhB,KAAK,CAALA,YAAkBkB,KAAK,CAACF;AAH9B,OAAP;;AAKF,SAAKrJ,sFAAL;AACE,aAAO;AAAEmJ,aAAK,EAAP;AAAYC,eAAO,EAAnB;AAAwBC,iBAAS,EAAE;AAAnC,OAAP;;AACJ;AACE;AAXF;AADK;AAgBA,IAAMG,YAAY,GAAG,SAAfA,YAAe,GAA4D;AAAA,MAA3DnB,KAA2D,uEAAnD;AAAE5Q,QAAI,EAAN;AAAsBnK,YAAQ,EAAE;AAAhC,GAAmD;AAAA,MAAXoa,MAAW;;AACtF,UAAOA,MAAM,CAAb;AACE,SAAK1H,kFAAL;AACE,UAAMvI,IAAI,GAAGiQ,MAAM,CAANA,aAAoBW,KAAK,CAAtC;AACA,UAAM/a,QAAQ,GAAGoa,MAAM,CAANA,iBAAwBW,KAAK,CAA9C;AACA;AAAmB5Q,YAAI,EAAvB;AAAyBnK,gBAAQ,EAARA;AAAzB;;AACF;AACE;AANJ;AADK,E;;;;;;;;;;;;;;;;;;AC3EP,IAAMmc,UAAU,GAAG,SAAbA,UAAa;AAAA;AAAA;AAAA,MACfN,KADe;AAAA;AAAA,MAEfC,OAFe;AAAA;AAAA,MAGfzb,KAHe;AAAA;AAAA,MAIf+b,QAJe;AAAA;AAAA,MAKfC,MALe;AAAA;AAAA,MAMfrY,OANe;AAAA;AAAA,MAOf+X,SAPe;AAAA;AAAA,MAQf7P,QARe;AAAA;AAAA,MASfoQ,KATe;AAAA;AAAA,MAUfC,MAVe;AAAA;AAAA,MAWfpQ,OAXe;AAAA;AAAA,MAYfqQ,SAZe;AAAA;AAAA,MAafC,IAbe;AAAA;AAAA,MAcfC,eAde;AAAA;AAAA,MAefC,WAfe;;AAAA,SAgBL;AACVd,SAAK,EADK;AACHC,WAAO,EADJ;AACMzb,SAAK,EADX;AACa+b,YAAQ,EADrB;AACuBC,UAAM,EAD7B;AAC+BrY,WAAO,EADtC;AACwC+X,aAAS,EADjD;AACmD7P,YAAQ,EAD3D;AAC6DoQ,SAAK,EADlE;AACoEC,UAAM,EAD1E;AAC4EpQ,WAAO,EADnF;AACqFqQ,aAAS,EAD9F;AACgGC,QAAI,EADpG;AACsGC,mBAAe,EADrH;AACuHC,eAAW,EAAXA;AADvH,GAhBK;AAAnB;;AAoBO,IAAMC,aAAa,GAAG;AACzBX,OAAK,EAAEE,UADkB;AAEzBA,YAAU,EAAVA;AAFyB,CAAtB,C;;;;;;;;;;;;;;;;;;;;;;;ACpBP;AAEO,IAAMU,WAAW,GAAG,SAAdA,WAAc,GAA0B;AAAA,MAAzB9B,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AACjD,UAAOA,MAAM,CAAb;AACI,SAAK1H,iFAAL;AACI,aAAO0H,MAAM,CAAb;;AACJ;AACI;AAJR;AADG;AASA,IAAM1I,UAAU,GAAG,SAAbA,UAAa,GAA0B;AAAA,MAAzBqJ,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAChD,UAAOA,MAAM,CAAb;AACI,SAAK1H,gFAAL;AACI,aAAO0H,MAAM,CAANA,QAAP;;AACJ,SAAK1H,yEAAL;AACI,aAAO0H,MAAM,CAANA,mBAAP;;AACJ,SAAK1H,gFAAL;AACI,aAAO0H,MAAM,CAANA,0BAAP;;AACJ;AACI;AARR;AADG;AAaA,IAAM0C,MAAM,GAAG,SAATA,MAAS,GAA0B;AAAA,MAAzB/B,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAC5C,UAAOA,MAAM,CAAb;AACI,SAAK1H,yEAAL;AACI,iBAAU;AACN,YAAG0H,MAAM,CAANA,sBAAH,GAAmC;AAAE;AACjC,iBAAOA,MAAM,CAAb;AADJ,eAEO;AACH,iBAAOA,MAAM,CAAb;AACH;AALL,aAMO;AACH,eAAOA,MAAM,CAAb;AACH;;AACL,SAAK1H,gFAAL;AACI,aAAO0H,MAAM,CAANA,sBAAP;;AACJ;AACI;AAdR;AADG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBP;AAEA;AAEA,IAAM2C,YAAY,GAAG;AAAEC,cAAY,EAAd;AAAmBC,QAAM,EAAzB;AAA8BC,aAAW,EAAE;AAA3C,CAArB;AAEO,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAkC;AAAA,MAAjCpC,KAAiC,uEAAzBgC,YAAyB;AAAA,MAAX3C,MAAW;;AAEpD,UAAOA,MAAM,CAAb;AAEI;AACI;;AAEJ,SAAK1H,2EAAL;AAA0B;AACtB,uDAAsB0H,MAAM,CAA5B;AACH;;AAED,SAAK1H,yEAAL;AAAwB;AACpB;AAAmB0K,oBAAU,EAAEhD,MAAM,CAANA,KAAYjQ;AAA3C;AACH;;AAED,SAAKuI,uEAAL;AAAsB;AAElB;AAAA;AAAA;AAAA,YAAiD2K,gBAAgB,GAAjE;AAA0E;AAE1EC,qBAAa,GAAGvC,KAAK,CAALA,gBAAsBA,KAAK,CAALA,gBAAtBA,IAAhBuC;AAEAA,qBAAa,GAAGA,aAAa,GAAGvC,KAAK,CAArBuC,cAAoCvC,KAAK,CAAzCuC,cAAhBA;AACAJ,mBAAW,GAAGI,aAAa,KAAKvC,KAAK,CAArCmC;;AAEA,YAAGnC,KAAK,CAALA,cAAoBA,KAAK,CAALA,eAAvB,WAAuD;AACnDmC,qBAAW,GAAXA;AACH;;AACDK,uBAAe,GAAGxC,KAAK,CAALA,uBAA6BA,KAAK,CAALA,iBAAuBA,KAAK,CAA3EwC;;AAEA,YAAGxC,KAAK,CAALA,SAAeA,KAAK,CAALA,MAAfA,MAAiCA,KAAK,CAAzC,QAAkD;AAC9CsC,0BAAgB,GAAGE,eAAe,IAAKxC,KAAK,CAALA,OAAaA,KAAK,CAALA,gBAAbA,UAA4CA,KAAK,CAALA,MAAnFsC;AACH;;AAED;AAAmBC,uBAAa,EAAhC;AAAkCJ,qBAAW,EAA7C;AAA+CK,yBAAe,EAA9D;AAAgEF,0BAAgB,EAAhBA;AAAhE;AACH;;AAED,SAAK3K,wEAAL;AAAuB;AAEnB,YAAIsK,YAAY,GAAG5C,MAAM,CAANA,YAAnB;;AAEA,YAAIiD,iBAAgB,GAAGtC,KAAK,CAALA,uBAA6BiC,YAAY,KAAKjC,KAAK,CAA1E;;AAEA,YAAIuC,cAAa,GAAGvC,KAAK,CAAzB;AAEA,YAAIrV,KAAK,GAAGqV,KAAK,CAAjB;AAEA;AAAmBiC,sBAAY,EAA/B;AAAiCM,uBAAa,EAA9C;AAAgD5X,eAAK,EAArD;AAAuD2X,0BAAgB,EAAhBA;AAAvD;AACH;;AAED,SAAK3K,yEAAL;AAAwB;AAEpB,YAAIwK,YAAW,GAAG,CAAC,CAACnC,KAAK,CAAP,cAAsBA,KAAK,CAALA,kBAAwBA,KAAK,CAAnD,cAAlB;;AACA,YAAIuC,eAAa,GAAjB;AACA,YAAIE,WAAW,GAAGpD,MAAM,CAANA,YAAlB;AAEA,qEAAsBA,MAAM,CAANA,KAAtB;AAA0C8C,qBAAW,EAArD;AAAuDI,uBAAa,EAApE;AAAsEE,qBAAW,EAAXA;AAAtE;AACH;;AAED,SAAK9K,wEAAL;AAAuB;AAEnB;AAAmBsK,sBAAY,EAAE;AAAjC;AACH;;AAED,SAAKtK,+EAAL;AAA8B;AAE1B,YAAG0H,MAAM,CAANA,qBAAH,eAA8C;AAC1C,cAAM8C,aAAW,GAAjB;AACA,cAAMK,gBAAe,GAArB;AACA;AAAmBP,wBAAY,EAA/B;AAAoCE,uBAAW,EAA/C;AAAiDK,2BAAe,EAAfA;AAAjD;AAHJ,eAKO;AACH;AACH;AACJ;;AAED,SAAK7K,gFAAL;AACI,mEAAsB0H,MAAM,CAANA,YAAtB;AAAiD8C,mBAAW,EAAE;AAA9D;;AAEJ;AAAS;AACL;AACH;AA9EL;AAFG;AAoFA,IAAMO,OAAO,GAAG,SAAVA,OAAU,GAAwB;AAAA,MAAvB1C,KAAuB,uEAAf,EAAe;AAAA,MAAXX,MAAW;;AAE3C,UAAOA,MAAM,CAAb;AACI,SAAK1H,yEAAL;AACI,UAAMgL,gBAAgB,GAAG,KAAK,CAAL,IAAU,kBAAM;AAAA,eAAIP,MAAM,CAAV;AAAzC,OAAyB,CAAzB;;AACA,UAAG1V,8CAAQ,CAAC2S,MAAM,CAANA,gBAAD,MAAX,gBAAW,CAAX,EAA4D;AACxD,YAAMqD,QAAO,GAAG,KAAK,CAAL,OAAa,kBAAM;AAAA,iBAAIN,MAAM,CAANA,SAAgB/C,MAAM,CAANA,gBAApB;AAAnC,SAAgB,CAAhB;;AACMqD,gBAAO,CAAPA,KAAarD,MAAM,CAAnBqD;;AACN;AAHJ,aAIO;AACH,qDAAmBrD,MAAM,CAAzB;AACH;;AACD,SAAK1H,2EAAL;AAA0B;AACtB,eAAO,KAAK,CAAL,OAAa,kBAAM;AAAA,iBAAIyK,MAAM,CAANA,SAAgB/C,MAAM,CAANA,KAApB;AAA1B,SAAO,CAAP;AACH;;AACL;AACI;AAdR;AAFG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1FP;AAEA;AACA;AAEO,IAAMzI,OAAO,GAAG,SAAVA,OAAU,GAA0B;AAAA,MAAzBoJ,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAC7C,UAAOA,MAAM,CAAb;AACI;AACI,aAAO,MAAM,CAAN,0CAAsBA,MAAM,CAANA,QAAtB;AAA8CuD,0BAAkB,EAAhE;AAAwE9L,sBAAc,EAAE;AAAxF,WAAP;;AACJ,SAAKa,8EAAL;AACI;AAAmBkL,wBAAgB,EAAnC;AAA4C/L,sBAAc,EAAE;AAA5D;;AACJ,SAAKa,+EAAL;AACI;AAAmBiL,0BAAkB,EAAE;AAAvC;;AACJ,SAAKjL,wEAAL;AACI,aAAO;AAAEd,aAAK,EAAE;AAAT,OAAP;;AACJ,SAAKc,yEAAL;AACI,aAAO;AAAEd,aAAK,EAAE;AAAT,OAAP;;AACJ,SAAKc,wEAAL;AACI;AAAmBd,aAAK,EAAEwI,MAAM,CAANA,KAAYxI;AAAtC;;AACJ,SAAKc,+EAAL;AACI,UAAMd,KAAK,GAAImJ,KAAK,IAAIA,KAAK,CAAf,KAACA,IAAf;AACA,6CAAYX,MAAM,CAAlB;AAAyBxI,aAAK,EAALA;AAAzB;;AACJ,SAAKc,0EAAL;AACA,SAAKA,0EAAL;AACI,UAAIpN,CAAC,GAAIyV,KAAK,CAALA,QAAD,CAACA,IAAoBX,MAAM,CAANA,KAArB,WAACW,GAA+CA,KAAK,CAALA,QAAhD,CAACA,GAAkEA,KAAK,CAAhF;AACA,aAAO;AAAEnJ,aAAK,EAAEtM;AAAT,OAAP;;AACJ,SAAKoN,gFAAL;AACI,mEAAsB0H,MAAM,CAANA,YAAtB;AAAkDvI,sBAAc,EAAE,CAAC,CAACuI,MAAM,CAANA,oBAApE;AAA6He,kBAAU,EAAEf,MAAM,CAANA,KAAYe;AAArJ;;AACJ;AACI;AAvBR;AADG;AA4BA,IAAMc,KAAK,GAAG,SAARA,KAAQ,GAAyC;AAAA,MAAxClB,KAAwC,uEAAhC6B,oGAAgC;AAAA,MAAXxC,MAAW;;AAC1D,UAAOA,MAAM,CAAb;AACI,SAAK1H,0EAAL;AAAyB;AAErB,YAAMuJ,MAAK,yDAAkB7B,MAAM,CAAxB;AAA+BoC,mBAAS,EAAEpC,MAAM,CAANA,kBAAyB;AAAnE,UAAX;;AAEA6B,cAAK,CAALA,cAAoBA,MAAK,CAALA,eAApBA;AACAA,cAAK,CAALA,kBAAwBA,MAAK,CAALA,mBAAxBA;AACAA,cAAK,CAALA,kBAAwBA,MAAK,CAALA,mBAAxBA;AAEAA,cAAK,CAALA,eAAqBA,MAAK,CAALA,SAAeA,MAAK,CAApBA,SAArBA;AAEAA,cAAK,CAALA;;AACA,YAAGA,MAAK,CAAR,SAAkB;AACdA,gBAAK,CAALA,mBAAyBA,MAAK,CAALA,SAAeA,MAAK,CAApBA,SAAzBA;AACAA,gBAAK,CAALA;;AACAA,gBAAK,CAALA,YAAkB;AACd4B,kBAAM,EAAE5B,MAAK,CADC;AAEd5b,iBAAK,EAAE4b,MAAK,CAFE;AAGdG,oBAAQ,EAAEH,MAAK,CAHD;AAId/P,oBAAQ,EAAE+P,MAAK,CAJD;AAKdO,qBAAS,EAAEP,MAAK,CAALA,aALG;AAMdI,kBAAM,EAAEJ,MAAK,CANC;AAOd9P,mBAAO,EAAE8P,MAAK,CAPA;AAQdrK,iBAAK,EAAEqK,MAAK,CAALA,QARO;AASdjY,mBAAO,EAAEiY,MAAK,CATA;AAUd6B,wBAAY,EAAE7B,MAAK,CAAC6B;AAVN,WAAlB7B;AAHJ,eAgBK;AACDA,gBAAK,CAALA;AACAA,gBAAK,CAALA,mBAAyBA,MAAK,CAALA,SAAeA,MAAK,CAApBA,SAAzBA;;AACAA,gBAAK,CAALA,WAAiB;AACb4B,kBAAM,EAAE5B,MAAK,CADA;AAEb5b,iBAAK,EAAE4b,MAAK,CAFC;AAGbG,oBAAQ,EAAEH,MAAK,CAHF;AAIb/P,oBAAQ,EAAE+P,MAAK,CAJF;AAKbO,qBAAS,EAAEP,MAAK,CAALA,aALE;AAMbI,kBAAM,EAAEJ,MAAK,CANA;AAOb9P,mBAAO,EAAE8P,MAAK,CAPD;AAQbrK,iBAAK,EAAEqK,MAAK,CAALA,QARM;AASbjY,mBAAO,EAAEiY,MAAK,CATD;AAUb6B,wBAAY,EAAE7B,MAAK,CAAC6B;AAVP,WAAjB7B;AAYH;;AACDA,cAAK,CAALA,gBAAsBA,MAAK,CAALA,gBAAsBA,MAAK,CAALA,MAA5CA;AAEAA,cAAK,CAALA,eAAqBV,8CAAK,CAACR,KAAK,CAAXQ,YAAK,CAALA,IAArBU;AACAA,cAAK,CAALA,cAAoBV,8CAAK,CAACR,KAAK,CAAXQ,WAAK,CAALA,IAApBU;;AAEA,YAAGA,MAAK,CAAR,SAAkB;AACdA,gBAAK,CAALA,aAAmBA,MAAK,CAAxBA,UAAmCA,MAAK,CAALA,aAAmBA,MAAK,CAAxBA,UAAmCA,MAAK,CAALA,aAAmBA,MAAK,CAAxBA,UAAnCA,IAAnCA;;AACA,cAAG,CAACA,MAAK,CAALA,YAAkBA,MAAK,CAA3B,MAAIA,CAAJ,EAAqC;AACjCA,kBAAK,CAALA,YAAkBA,MAAK,CAAvBA;AACH;AAJL,eAKO;AACHA,gBAAK,CAALA,YAAkBA,MAAK,CAAvBA,UAAkCA,MAAK,CAALA,YAAkBA,MAAK,CAAvBA,UAAkCA,MAAK,CAALA,YAAkBA,MAAK,CAAvBA,UAAlCA,IAAlCA;;AACA,cAAG,CAACA,MAAK,CAALA,aAAmBA,MAAK,CAA5B,MAAIA,CAAJ,EAAsC;AAClCA,kBAAK,CAALA,aAAmBA,MAAK,CAAxBA;AACH;AACJ;;AAED;AACH;;AACD,SAAKvJ,+EAAL;AACI,aAAO6I,8CAAK,CAACqB,oGAAD,CAAZ;;AACJ,SAAKlK,wEAAL;AACA,SAAKA,wEAAL;AACA,SAAKA,+EAAL;AACI,6CAAYkK,oGAAZ,GAAoC;AAAEN,aAAK,EAAP;AAAaC,cAAM,EAAE;AAArB,OAApC;;AACJ,SAAK7J,gFAAL;AAA+B;AAC3B,YAAMqL,WAAW,GAAGhD,KAAK,CAALA,eAApB;AACAgD,mBAAW,CAAXA,KACI;AACIxZ,YAAE,EAAE6V,MAAM,CAANA,KADR;AAEIjQ,cAAI,EAAEiQ,MAAM,CAANA,KAFV;AAGIpW,iBAAO,EAAEoW,MAAM,CAANA,KAHb;AAII4D,cAAI,EAAE5D,MAAM,CAANA,KAAY4D;AAJtB,SADJD;AAQA;AAAmBA,qBAAW,EAAEA;AAAhC;AACH;;AACD,SAAKrL,gFAAL;AACI,aAAO0H,MAAM,CAANA,YAAP;;AACJ,SAAK1H,yEAAL;AAAwB;AACpB;AAAmB+J,cAAI,EAAE;AAAzB;AACC;;AACL;AACI;AAvFR;AADG;AA4FA,IAAMwB,OAAO,GAAG,SAAVA,OAAU,GAA0B;AAAA,MAAzBlD,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAC7C,UAAOA,MAAM,CAAb;AACI,SAAK1H,4EAAL;AAA2B;AAEvB,YAAMuL,QAAO,GAAG;AAAEC,gBAAM,EAAE;AAAV,SAAhB;AAEAD,gBAAO,CAAPA,SAAiBlD,KAAK,KAALA,OACX,CAACX,MAAM,CADIW,IACX,CADWA,GAEXA,KAAK,CAALA,OAAaA,KAAK,CAALA,gBAAbA,gBAAiDX,MAAM,CAANA,KAAjDW,8BACQA,KAAK,CADbA,uCAEQA,KAAK,CAFbA,UAEsBX,MAAM,CAJlC6D,IAEMlD,EAFNkD;AAMA,YAAIE,cAAc,GAAlB;AACA,YAAIC,YAAY,GAAhB;;AAEAH,gBAAO,CAAPA,eAAuB,iBAAS;AAC5BE,wBAAc,IAAIlC,KAAK,CAAvBkC;AACAC,sBAAY,IAAInC,KAAK,CAArBmC;AAFJH;;AAKAA,gBAAO,CAAPA;AACAA,gBAAO,CAAPA;AACAA,gBAAO,CAAPA,YAAoBA,QAAO,CAAPA,QAAgBA,QAAO,CAA3CA;AAEA;AACH;;AACD,SAAKvL,+EAAL;AACI;;AACJ,SAAKA,gFAAL;AACI,aAAO0H,MAAM,CAANA,YAAP;;AACJ;AACI;AA9BR;AADG;AAmCA,IAAMiE,WAAW,GAAG,SAAdA,WAAc,GAA0B;AAAA,MAAzBtD,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AACjD,UAAOA,MAAM,CAAb;AACI,SAAK1H,iFAAL;AACI,aAAO0H,MAAM,CAAb;;AACJ;AACI;AAJR;AADG,E;;;;;;;;;;;;;;;;;;;;;AChKP;;AAGA,IAAMkE,2BAA2B,GAAG,SAA9BA,2BAA8B,QAAS;AACzC,MAAMC,SAAS,GAAf;AACA,MAAGA,SAAS,CAAZ,6BAA0C,OAAOA,SAAS,CAAhB;AAC1C,MAAGA,SAAS,CAAZ,8BAA2C,OAAOA,SAAS,CAAhB;AAC3C;AAJJ;;AAOO,IAAMA,SAAS,GAAG,SAAZA,SAAY,GAA0B;AAAA,MAAzBxD,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAC/C,UAAOA,MAAM,CAAb;AACI,SAAK1H,8EAAL;AACI,aAAO4L,2BAA2B,CAAClE,MAAM,CAAzC,IAAkC,CAAlC;;AACJ,SAAK1H,8EAAL;AACI,aAAO4L,2BAA2B,CAAClE,MAAM,CAAzC,IAAkC,CAAlC;;AACJ;AACI;AANR;AADG;AAWA,IAAM/H,QAAQ,GAAG,SAAXA,QAAW,GAA0B;AAAA,MAAzB0I,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAC9C,UAAOA,MAAM,CAAb;AACI,SAAK1H,6EAAL;AACI,aAAO0H,MAAM,CAAb;;AACJ;AACI;AAJR;AADG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBP;AAEA;AAEO,IAAM3I,WAAW,GAAG,SAAdA,WAAc,GAAwB;AAAA,MAAvBsJ,KAAuB,uEAAf,EAAe;AAAA,MAAXX,MAAW;;AAC/C,UAAOA,MAAM,CAAb;AACI,SAAK1H,+EAAL;AACI,UAAM8L,IAAI,sBAAV,KAAU,CAAV;;AACAA,UAAI,CAAJA,QAAa,eAAO;AAChB,YAAGC,GAAG,CAAHA,OAAWrE,MAAM,CAANA,KAAd,IAA8B;AAC1BqE,aAAG,CAAHA;AADJ,eAEO;AACHA,aAAG,CAAHA;AACH;AALLD;AAOA;;AACJ,SAAK9L,gFAAL;AAA+B;AAC3B,eAAOqI,KAAK,2DAAkBX,MAAM,CAAxB,SAAkCA,MAAM,CAApD;AACH;;AACD,SAAK1H,+EAAL;AAA8B;AAE1B,YAAMjB,YAAW,sBAAjB,KAAiB,CAAjB;;AAEAA,oBAAW,CAAXA,QAAoB,sBAAc;AAC9B,cAAGlR,UAAU,CAAVA,OAAkB6Z,MAAM,CAANA,gBAArB,IAAgD;AAC5C7Z,sBAAU,GAAG6Z,MAAM,CAANA,KAAb7Z;AACH;AAHLkR;;AAMA;AACH;;AACD,SAAKiB,gFAAL;AAA+B;AAE3B0H,cAAM,CAANA;AAEA,YAAMsE,kBAAkB,GAAGjX,8CAAQ,CAAC2S,MAAM,CAANA,uBAAD,IAAmC,KAAK,CAAL,IAAU,sBAAU;AAAA,iBAAI7Z,UAAU,CAAd;AAA1F,SAAsE,CAAnC,CAAnC;;AACA,gCAAuB;AACnB,8CAAY,KAAK,CAAL,OAAa,sBAAU;AAAA,mBAAIA,UAAU,CAAVA,OAAkB6Z,MAAM,CAANA,uBAAtB;AAAnC,WAAY,CAAZ,IAA4FA,MAAM,CAANA,YAA5F;AADJ,eAEO;AACH,uDAAmBA,MAAM,CAANA,YAAnB;AACH;AACJ;;AACD;AACI;AAtCR;AADG;AA2CA,IAAM7Z,UAAU,GAAG,SAAbA,UAAa,GAA+B;AAAA,MAA9Bwa,KAA8B,uEAAtB;AAAExW,MAAE,EAAE;AAAN,GAAsB;AAAA,MAAX6V,MAAW;;AAErD,MAAMuE,YAAY,GAAG,SAAfA,YAAe,gBAAmB;AAEpC,QAAIxB,MAAM,GAAG/C,MAAM,CAANA,KAAb;AACA,QAAIwE,SAAS,GAAIzB,MAAM,CAANA,cAAqBA,MAAM,CAANA,eAAtC,CAAiBA,CAAjB;AACA,QAAI0B,QAAQ,GAAG9D,KAAK,CAALA,MAAf,SAAeA,CAAf;;AAEA,QAAGoC,MAAM,CAAT,iBAA2B;AACvByB,eAAS,GAATA;AACAC,cAAQ,GAAG9D,KAAK,CAALA,MAAX8D,SAAW9D,CAAX8D;AACH;;AACD,WAAO;AAAED,eAAS,EAAX;AAAaC,cAAQ,EAARA;AAAb,KAAP;AAVJ;;AAaA,MAAMlb,gBAAgB,GAAG,SAAnBA,gBAAmB,gBAAmB;AAExC,QAAIpD,UAAU,2CAAkB6Z,MAAM,CAANA,KAAhC,UAAc,CAAd;;AACA,QAAGW,KAAK,CAALA,MAAYA,KAAK,CAALA,OAAaX,MAAM,CAANA,gBAA5B,IAAwD;AACpD7Z,gBAAU,CAAVA,YAAuBwa,KAAK,CAA5Bxa;AACH;;AACD,QAAIse,QAAQ,GAAGte,UAAU,CAAVA,MAAiBA,UAAU,CAA1C,SAAeA,CAAf;;AAEA,QAAG6Z,MAAM,CAANA,qBAAH,UAAyC;AACrC7Z,gBAAU,CAAVA,WAAsB6Z,MAAM,CAANA,gBAAtB7Z;AACH;;AAED,QAAG6Z,MAAM,CAANA,qBAAH,eAA8C;AAC1C7Z,gBAAU,CAAVA;AACAA,gBAAU,CAAVA,WAAsBA,UAAU,CAAVA,MAAiBA,UAAU,CAAjDA,SAAsBA,CAAtBA;AACH;;AAED,WAAO;AAAEA,gBAAU,EAAZ;AAAcse,cAAQ,EAARA;AAAd,KAAP;AAjBJ;;AAoBA,UAAOzE,MAAM,CAAb;AAEI;AAA0B;AACtB;AACH;;AAED,SAAK1H,+EAAL;AAA8B;AAC1B,eAAO0H,MAAM,CAAb;AACH;;AACD,SAAK1H,qFAAL;AAAoC;AAChC,YAAMnS,WAAU,GAAGgb,8CAAK,CAAxB,KAAwB,CAAxB;;AACAhb,mBAAU,CAAVA,QAAmB,MAAM,CAAN,YAAmB,gBAAI;AAAA,iBAAI,CAAC3B,IAAI,CAAT;AAA1C2B,SAAmB,CAAnBA;AACA;AACH;;AAED,SAAKmS,gFAAL;AAA+B;AAC3B,+CACO0H,MAAM,CAANA,YADP;AAEIyE,kBAAQ,EAAEzE,MAAM,CAANA,6BAAoCA,MAAM,CAANA,uBAApCA;AAFd;AAGH;;AAED,SAAK1H,8EAAL;AAA6B;AACzB,eAAO0H,MAAM,CAANA,KAAP;AACH;;AAED,SAAK1H,+EAAL;AAA8B;AAAA,gCACO/O,gBAAgB,QADvB,MACuB,CADvB;AAAA,YAClBpD,YADkB;AAAA,YACNse,QADM;;AAE1B;AAAkCA,kBAAQ,EAARA;AAAlC;AACH;;AAED,SAAKnM,yEAAL;AAAwB;AACpB,YAAMoK,MAAM,GAAG1C,MAAM,CAArB;AACA,eAAO0C,MAAM,CAANA,gBAAP;AACH;;AAED,SAAKpK,uEAAL;AAAsB;AAClB,YAAIkM,SAAS,GAAGxE,MAAM,CAAtB;AACA,YAAIyE,SAAQ,GAAG9D,KAAK,CAALA,MAAf,SAAeA,CAAf;AACA;AAAmB6D,mBAAS,EAA5B;AAA8BC,kBAAQ,EAARA;AAA9B;AACH;;AAED,SAAKnM,wEAAL;AAAuB;AAAA,4BACaiM,YAAY,SADzB,KACyB,CADzB;AAAA,YACXC,UADW;AAAA,YACAC,UADA;;AAEnB;AAAmBD,mBAAS,EAA5B;AAA8BC,kBAAQ,EAARA;AAA9B;AACH;;AAED,SAAKnM,yEAAL;AAAwB;AACpB,YAAMnS,YAAU,2CAAkB6Z,MAAM,CAANA,KAAlC,UAAgB,CAAhB;;AACA;AACH;;AAED,SAAK1H,wEAAL;AAAuB;AACnB;AACH;;AAED;AAAS;AACL;AACH;AAzDL;AAnCG;AAgGA,IAAMoM,WAAW,GAAG,SAAdA,WAAc,GAA0B;AAAA,MAAzB/D,KAAyB,uEAAjB,IAAiB;AAAA,MAAXX,MAAW;;AAEjD,UAAOA,MAAM,CAAb;AAEI;AAA0B;AACtB;AACH;;AAED,SAAK1H,yEAAL;AAAwB;AACpB,YAAMoK,MAAM,GAAG1C,MAAM,CAArB;;AAEA,YAAG0C,MAAM,CAAT,OAAiB;AACb/B,eAAK,GAALA;AACH;;AACD;AACH;;AAED,SAAKrI,gFAAL;AACI,qDAAsB0H,MAAM,CAANA,YAAtB;;AAEJ;AAAS;AACL;AACH;AApBL;AAFG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/IP;AACA;AACA;CACiD;;AAEjD;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,IAAM2E,OAAO,GAAGC,uDAAe,CAAC;AAC5BrN,SAAO,EADqB;AAE5BkL,aAAW,EAFiB;AAG5BnL,YAAU,EAHkB;AAI5BoL,QAAM,EAJsB;AAK5B3c,QAAM,EALsB;AAM5Bsd,SAAO,EANqB;AAO5BN,QAAM,EAPsB;AAQ5B5c,YAAU,EARkB;AAS5B0b,OAAK,EATuB;AAU5BxK,aAAW,EAViB;AAW5BwM,SAAO,EAXqB;AAY5BI,aAAW,EAZiB;AAa5B3S,OAAK,EAbuB;AAc5BoT,aAAW,EAdiB;AAe5B5D,MAAI,EAfwB;AAgB5BqD,WAAS,EAhBmB;AAiB5BlM,UAAQ,EAjBoB;AAkB5B8I,YAAU,EAlBkB;AAmB5BC,OAAK,EAnBuB;AAoB5BE,MAAI,EApBwB;AAqB5BI,WAAS,EArBmB;AAsB5BE,WAAS,EAtBmB;AAuB5BM,cAAY,EAvBgB;AAwB5BF,kBAAgB,EAAhBA,2EAAgBA;AAxBY,CAAD,CAA/B;AA2BA,IAAMiD,aAAa,GAAG;AACpB/gB,KAAG,EADiB;AAEpB4C,SAAO,EAFa,+DAGtB;AACA;;AAJsB,CAAtB;AAOA,IAAMoe,gBAAgB,GAAGC,6DAAc,gBAAvC,OAAuC,CAAvC;AAEA,IAAMC,gBAAgB,GAAGlP,MAAM,CAANA,wCAAzB;AAEO,IAAM5E,KAAK,GAAG+T,mDAAW,mBAE5BD,gBAAgB,CAACE,uDAAe,8DAF7B,gDAE6B,CAAhB,CAFY,CAAzB;AAQA,IAAMC,SAAS,GAAGC,2DAAY,CAA9B,KAA8B,CAA9B;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,gBAAmB;AAE1C;AAEA;AAEA,MAAGrF,MAAM,CAANA,SAAH,oBAAuC;AACnCW,SAAK,GAALA;AACH;;AAED,SAAOgE,OAAO,QAAd,MAAc,CAAd;AAVG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEP;AAEA;AACA;AACA;AAEA,IAAIW,aAAa,GAAjB;;AAEA,IAAMC,GAAG,GAAG,SAANA,GAAM,qCAAwC;AAEhD,MAAMhF,MAAM,GAAG,SAATA,MAAS,QAAK;AAAA,WAAIrP,KAAK,CAAT,MAAS,CAAT;AAApB;;AACA,MAAMuP,QAAQ,GAAd;AAEA,MAAM+E,GAAG,GAAGrF,iEAAY,2EAAxB,MAAwB,CAAxB;AAEA,MAAMsF,WAAW,GAAGC,SAAS,CAACF,GAAG,CAAjC,IAA6B,CAA7B;AAEA,mBAAgB;AAEhBF,eAAa,CAAbA;AAA6BK,QAAI,EAAJA;AAA7BL;AACA;AAZJ;;AAeA,IAAMM,MAAM,GAAG,SAATA,MAAS,eAAgB;AAE3B,oBAAiB;AACbjO,gBAAY,CAAZA;AACA2N,iBAAa,GAAG,aAAa,CAAb,OAAqB,eAAG;AAAA,aAAIE,GAAG,CAAHA,SAAa7N,YAAY,CAA7B;AAAxC2N,KAAgB,CAAhBA;AACH;;AACD;AANJ;;AASA,IAAMO,YAAY,GAAG,SAAfA,YAAe,OAAQ;AACzB,MAAMlO,YAAY,GAAG+N,SAAS,CAA9B,IAA8B,CAA9B;;AACA,oBAAiB;AACb,WAAOE,MAAM,CAAb,YAAa,CAAb;AACH;AAJL;;AAOA,IAAMF,SAAS,GAAG,SAAZA,SAAY,OAAQ;AACtB,SAAO,aAAa,CAAb,KAAmB,eAAG;AAAA,WAAIF,GAAG,CAAHA,SAAJ;AAA7B,GAAO,CAAP;AADJ;;AAIA,IAAMM,SAAS,GAAG,SAAZA,SAAY,OAAQ;AACtB,SAAO,aAAa,CAAb,OAAqB,eAAG;AAAA,WAAIN,GAAG,CAAHA,SAAJ;AAA/B,GAAO,CAAP;AADJ;;AAIA,IAAMO,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB;AADJ;;AAIA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AAElC,MAAIC,OAAO,GAAGH,SAAS,CAAvB,QAAuB,CAAvB;AAEAG,SAAO,CAAPA,QAAgB,eAAO;AACrBtO,gBAAY,CAAZA;AADFsO;AAJJ;;AASA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AAElC,MAAID,OAAO,GAAGH,SAAS,CAAvB,MAAuB,CAAvB;AAEAG,SAAO,CAAPA,QAAgB,eAAO;AACrBtO,gBAAY,CAAZA;AADFsO;AAJJ;;AASA,IAAME,aAAa,GAAG,SAAhBA,aAAgB,gBAAmB;AAAA,MAE7BpF,UAF6B,GAENJ,KAFM;AAAA,MAEjB5a,MAFiB,GAEN4a,KAFM;AAIrC,MAAIyF,UAAU,GAAd;AAAA,MAAuBC,iBAAiB,GAAxC;AAEAA,mBAAiB,GAAGC,6HAApBD,iBAAoBC,CAApBD;AAEA,MAAME,aAAa,GAAG,gOAAtB,aAAsB,CAAtB;AAaAH,YAAU,GAAGC,iBAAiB,UAAU,CAAChZ,8CAAQ,CAACqV,MAAM,CAAP,MAAjD0D,aAAiD,CAAjDA;AAEA;AAvBJ;;AA0BA,IAAMI,OAAO,GAAG,SAAVA,OAAU,6BAAgC;AAE5C,MAAG,CAAH,QAAY;AAEZ9D,QAAM,CAANA,gBAAwB,yBAAmB;AAEvC,QAAM+D,IAAI,GAAGC,UAAU,CAAC1Q,MAAM,CAA9B,IAAuB,CAAvB;AAEA,QAAM2Q,sBAAsB,GAAGR,aAAa,CAACjV,yDAAD,EAA5C,MAA4C,CAA5C;;AAEA,QAAGuV,IAAI,IAAP,wBAAmC;AAC/B,UAAG1gB,MAAM,CAAT,gBAA0B;AACtB,YAAGyR,KAAK,KAALA,KAAexB,MAAM,CAANA,SAAlB,WAA6CuP,GAAG,OAAOvP,MAAM,CAAb,kBAAgC0M,MAAM,GAAGA,MAAM,CAAT,OAAzC6C,EAAG,CAAHA;AADjD,aAEO;AACHA,WAAG,OAAOvP,MAAM,CAAb,kBAAgC0M,MAAM,GAAGA,MAAM,CAAT,OAAzC6C,EAAG,CAAHA;AACH;AALL,WAMO;AACHK,YAAM,CAACF,SAAS,CAAhBE,UAAgB,CAAV,CAANA;AACAA,YAAM,CAACF,SAAS,CAAhBE,oBAAgB,CAAV,CAANA;AACH;AAfLlD;AAJJ;;AAuBA,IAAMkE,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzBb,QAAM,GAANA,QAAiB,eAAO;AACtBtY,WAAO,eAAe+X,GAAG,CAAzB/X,IAAO,CAAPA;AADFsY;AADF;;AAMO,IAAMpO,YAAY,GAAG;AACxB4N,KAAG,EADqB;AAExBK,QAAM,EAFkB;AAGxBC,cAAY,EAHY;AAIxBH,WAAS,EAJe;AAKxBI,WAAS,EALe;AAMxBC,QAAM,EANkB;AAOxBC,yBAAuB,EAPC;AAQxBE,yBAAuB,EARC;AASxBM,SAAO,EATiB;AAUxBI,cAAY,EAAZA;AAVwB,CAArB,C;;;;;;;;;;;;;;;;;;;AC5HP;AAEO,IAAM7gB,MAAM,GAAG;AAClBH,UAAQ,EADU;AAElBihB,YAAU,EAFQ;AAGlBC,cAAY,EAHM;AAIlBC,eAAa,EAJK;AAKlBC,iBAAe,EALG;AAMlBC,gBAAc,EANI;AAOlBC,iBAAe,EAPG;AAQlB/gB,YAAU,EAAE;AACRgE,MAAE,EAAE;AADI,GARM;AAWlBkY,MAAI,EAXc;AAYlB8E,WAAS,EAAG,CACR;AAAEpX,QAAI,EAAN;AAAoB8Q,QAAI,EAAE;AAA1B,GADQ,EAER;AAAE9Q,QAAI,EAAN;AAAmB8Q,QAAI,EAAE;AAAzB,GAFQ,EAGR;AAAE9Q,QAAI,EAAN;AAAmB8Q,QAAI,EAAE;AAAzB,GAHQ,EAIR;AAAE9Q,QAAI,EAAN;AAAoB8Q,QAAI,EAAE;AAA1B,GAJQ,EAKR;AAAE9Q,QAAI,EAAN;AAAoB8Q,QAAI,EAAE;AAA1B,GALQ,EAMR;AAAE9Q,QAAI,EAAN;AAAqB8Q,QAAI,EAAE;AAA3B,GANQ,CAZM;AAoBlBuG,OAAK,EAAE;AACH5a,cAAU,EADP;AAEH6a,mBAAe,EAFZ;AAGHC,iBAAa,EAHV;AAIHC,gBAAY,EAJT;AAKH5Y,SAAK,EAAE;AACHxE,QAAE,EADC;AAEH4F,UAAI,EAAE;AAFH,KALJ;AASHyX,gBAAY,EATT;AAUHC,UAAM,EAAE;AAAE3jB,SAAG,EAAL;AAAW2M,UAAI,EAAf;AAAqB9D,WAAK,EAAE;AAA5B,KAVL;AAWH+a,UAAM,EAXH;AAYH1b,WAAO,EAZJ;AAaH2b,eAAW,EAbR;AAcHC,aAAS,EAAErG,+EAA2BxR;AAdnC;AApBW,CAAf,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFP;AAEA;AAEA;AACA;AACA;AAEA;AACA;;AAEA,IAAM8X,cAAc,mCAAQ1G,8CAAK,CAAb,+FAAa,CAAb;AAAgChX,IAAE,EAAE;AAApC,EAApB;;AACM,IAAG0d,cAAc,CAAdA,UAAH,cAA0CA,cAAc,CAAdA;;AAEhD,IAAMC,aAAa,mCAAQ3G,8CAAK,CAAb,4FAAa,CAAb;AAA+BhX,IAAE,EAAE;AAAnC,EAAnB;;AACM2d,aAAa,CAAbA,uBAAqCC,gFAArCD;;AAEN,IAAME,aAAa,mCAAQ7G,8CAAK,CAAb,6FAAa,CAAb;AAA+BhX,IAAE,EAAjC;AAAwC8d,UAAQ,EAAE;AAAlD,EAAnB;;AACMD,aAAa,CAAbA,yBAAuC,iCAAOD,wFAAP;AAA6BzP,OAAK,EAAE;AAApC,GAAvC0P;;AAEN,IAAME,eAAe,mCAAQ/G,8CAAK,CAAb,+FAAa,CAAb;AAAiChX,IAAE,EAAnC;AAA0C8d,UAAQ,EAAE;AAApD,EAArB;;AACA,IAAME,cAAc,mCAAQhH,8CAAK,CAAb,+FAAa,CAAb;AAAgChX,IAAE,EAAlC;AAAyC8d,UAAQ,EAAE;AAAnD,EAApB;;AACA,IAAMG,eAAe,mCAAQjH,8CAAK,CAAb,gGAAa,CAAb;AAAiChX,IAAE,EAAnC;AAA0C8d,UAAQ,EAAE;AAApD,EAArB;;AAEO,IAAMxF,WAAW,GAAG,69BAApB,aAAoB,CAApB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBP;AAEO,IAAM4F,eAAe,GAAG;AAC3Ble,IAAE,EADyB;AAE3B4F,MAAI,EAFuB;AAG3BkY,UAAQ,EAHmB;AAI3B,aAJ2B;AAK3BK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAAE,CACGR,yFADH,EAEGA,wFAFH,EAGGA,iFAHH,EAIGA,wFAJH,EAKGA,uFALH,EAKwBA,gFALxB,EAMGA,yFANH,EAM0BA,kFAN1B,EAOGA,iFAPH,EAQGA,uFARH,EASGA,uFATH,CAFb;AAaIS,gBAAY,EAAE,iCAAOT,wFAAP;AAA6BzP,WAAK,EAAE;AAApC;AAblB,GADI;AALmB,CAAxB;AAwBA,IAAMmQ,gBAAgB,GAAG;AAC5Bte,IAAE,EAD0B;AAE5B4F,MAAI,EAFwB;AAG5BkY,UAAQ,EAHoB;AAI5B,aAJ4B;AAK5BK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAAE,CACGR,yFADH,EAEGA,iFAFH,EAEmBA,uFAFnB,CAFb;AAMIS,gBAAY,EAAE,iCAAOT,wFAAP;AAA6BzP,WAAK,EAAE;AAApC;AANlB,GADI;AALoB,CAAzB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BP;AAEA;AAEO,IAAMoQ,cAAc,GAAG;AAC1Bve,IAAE,EADwB;AAE1B4F,MAAI,EAFsB;AAG1BkY,UAAQ,EAHkB;AAI1B,aAJ0B;AAK1BK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAAE,CACGR,yFADH,EAEGA,wFAFH,EAEyBA,iFAFzB,EAGGA,wFAHH,EAIGA,uFAJH,EAIwBA,gFAJxB,EAKGA,yFALH,EAK0BA,kFAL1B,EAMGA,oFAAgBA,sFAAhBA,EAAoC,CANvC,UAMuC,CAApCA,CANH,EAOGA,oFAAgBA,sFAAhBA,EAAoC,CAPvC,gBAOuC,CAApCA,CAPH,EAQGA,uFARH,CAFb;AAYIS,gBAAY,EAAE,iCAAOT,wFAAP;AAA6BzP,WAAK,EAAE;AAApC;AAZlB,GADI;AALkB,CAAvB;AAuBA,IAAMqQ,gBAAgB,mCAAQxH,8CAAK,CAAb,cAAa,CAAb;AAA+BhX,IAAE,EAAE;AAAnC,EAAtB;AACPwe,gBAAgB,CAAhBA,YAA6B;AACzBxe,IAAE,EADuB;AAEzB4F,MAAI,EAFqB;AAGzB/G,aAAW,EAHc;AAIzBuf,SAAO,EAAE,CACLR,yFADK,CAJgB,CAOzB;AACA;;AARyB,CAA7BY,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA;AAEO,IAAMC,eAAe,GAAG;AAC3Bze,IAAE,EADyB;AAE3B4F,MAAI,EAFuB;AAG3BkY,UAAQ,EAHmB;AAI3B,aAJ2B;AAK3BK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAAE,CACGR,yFADH,EAEGA,wFAFH,EAGGA,iFAHH,EAIGA,wFAJH,EAKGA,uFALH,EAKwBA,gFALxB,EAMGA,yFANH,EAM0BA,kFAN1B,EAOGA,oFAAgBA,sFAAhBA,EAAoC,6EAPvC,YAOuC,CAApCA,CAPH,EAQGA,iFARH,EASGA,uFATH,EAUGA,uFAVH,CAFb;AAcIS,gBAAY,EAAE,iCAAOT,wFAAP;AAA6BzP,WAAK,EAAE;AAApC;AAdlB,GADI;AALmB,CAAxB;AAyBA,IAAMuQ,yBAAyB,GAAG;AACrC1e,IAAE,EADmC;AAErC4F,MAAI,EAFiC;AAGrCkY,UAAQ,EAH6B;AAIrC,aAJqC;AAKrCK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAAE,CACGR,yFADH,EAEGA,gGAFH,EAGGA,wFAHH,EAGyBA,iFAHzB,EAIGA,wFAJH,EAKGA,uFALH,EAMGA,gFANH,EAOGA,yFAPH,EAO0BA,kFAP1B,EAQGA,uFARH,CAFb,CAYI;;AAZJ,GADI;AAL6B,CAAlC;AAuBA,IAAMe,oCAAoC,GAAG;AAChD3e,IAAE,EAD8C;AAEhD4F,MAAI,EAF4C;AAGhDkY,UAAQ,EAHwC;AAIhD,aAJgD;AAKhDK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAFX;AAGIC,gBAAY,EAAE;AAHlB,GADI;AALwC,CAA7C,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClDP;AAEO,IAAMO,cAAc,GAAG;AAC1B5e,IAAE,EADwB;AAE1B4F,MAAI,EAFsB;AAG1BkY,UAAQ,EAHkB;AAI1B,aAJ0B;AAK1BK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAAE,CACGR,yFADH,EAEGA,wFAFH,EAGGA,iFAHH,EAIGA,wFAJH,EAKGA,uFALH,EAKwBA,gFALxB,EAMGA,yFANH,EAM0BA,kFAN1B,EAOGA,oFAAgBA,sFAAhBA,EAAoC,6EAPvC,YAOuC,CAApCA,CAPH,EAQGA,iFARH,EASGA,uFATH,EAUGA,uFAVH,CAFb;AAcIS,gBAAY,EAAE,iCAAOT,wFAAP;AAA6BzP,WAAK,EAAE;AAApC;AAdlB,GADI;AALkB,CAAvB;AAyBA,IAAM0Q,wBAAwB,GAAG;AACpC7e,IAAE,EADkC;AAEpC4F,MAAI,EAFgC;AAGpCkY,UAAQ,EAH4B;AAIpC,aAJoC;AAKpCK,QAAM,EAAE,CACJ;AAAIne,MAAE,EAAN;AACI4F,QAAI,EADR;AAEIwY,WAAO,EAAE,CACGR,yFADH,EAC0BA,wFAD1B,EACgDA,iFADhD,EAEGA,wFAFH,EAGGA,uFAHH,EAGwBA,gFAHxB,EAIGA,yFAJH,EAI0BA,kFAJ1B,EAKGA,uFALH,CAFb;AASIS,gBAAY,EAAE,iCAAOT,wFAAP;AAA6BzP,WAAK,EAAE;AAApC;AATlB,GADI;AAL4B,CAAjC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BP;AAEA;IAGI2Q,c,GAkB0BC,kF;IAlBVC,W,GAkBUD,+E;IAlBGE,W,GAkBHF,+E;IAlBgBG,W,GAkBhBH,+E;IAlB6BI,I,GAkB7BJ,wE;IAjB1BK,I,GAiB0BL,wE;IAjBpBM,Q,GAiBoBN,4E;IAhB1BO,M,GAgB0BP,0E;IAhBlBQ,Y,GAgBkBR,gF;IAhBJjjB,K,GAgBIijB,yE;IAhBGS,Q,GAgBHT,4E;IAhBaU,Y,GAgBbV,gF;IAhB2BW,Q,GAgB3BX,4E;IAhBqCY,Y,GAgBrCZ,gF;IAf1Ba,Q,GAe0Bb,4E;IAfhBzgB,W,GAegBygB,+E;IAd1Bc,mB,GAc0Bd,uF;IAdLe,kB,GAcKf,sF;IAb1BgB,c,GAa0BhB,kF;IAZ1BiB,a,GAY0BjB,iF;IAZXkB,iB,GAYWlB,qF;IAXxBmB,iB,GAWwBnB,qF;IAVxBoB,W,GAUwBpB,+E;IAT1BqB,qB,GAS0BrB,yF;IAR1BsB,sB,GAQ0BtB,0F;IAP1BuB,kB,GAO0BvB,sF;IAN1BwB,mB,GAM0BxB,uF;IAL1BrF,O,GAK0BqF,2E;IALjByB,O,GAKiBzB,2E;IAJ1B0B,Q,GAI0B1B,4E;IAJhB2B,Y,GAIgB3B,gF;IAH1B4B,c,GAG0B5B,kF;IAF1B6B,e,GAE0B7B,mF;IAD1B8B,gC,GAC0B9B,oG;IAA1B+B,qB,GAA0B/B,yF;AAE9B,IAAMgC,iBAAiB,GAAG;AACtBnb,MAAI,EADkB;AAEtBU,MAAI,EAFkB;AAGtBoR,OAAK,EAHiB;AAItBsJ,MAAI,EAJkB;AAKtBC,QAAM,EALgB;AAMtBC,OAAK,EANiB;AAOtBC,aAAW,EAPW;AAQtBrF,SAAO,EAAE;AARa,CAA1B;AAcA,IAAMsF,eAAe,GAAG;AACpBxb,MAAI,EADgB;AAEpBU,MAAI,EAFgB;AAGpBoR,OAAK,EAHe;AAIpBsJ,MAAI,EAJgB;AAKpBC,QAAM,EALc;AAMpBC,OAAK,EANe;AAOpBC,aAAW,EAPS;AAQpBrF,SAAO,EAAE;AARW,CAAxB;AAcA,IAAMuF,aAAa,GAAG;AAClBzb,MAAI,EADc;AAElBU,MAAI,EAFc;AAGlBoR,OAAK,EAHa;AAIlBsJ,MAAI,EAJc;AAKlBC,QAAM,EALY;AAMlBC,OAAK,EANa;AAOlBC,aAAW,EAPO;AAQlBrF,SAAO,EAAE;AARS,CAAtB;AAcA,IAAMwF,gBAAgB,GAAG;AACrB1b,MAAI,EADiB;AAErBU,MAAI,EAFiB;AAGrBoR,OAAK,EAHgB;AAIrBsJ,MAAI,EAJiB;AAKrBC,QAAM,EALe;AAMrBC,OAAK,EANgB;AAOrBC,aAAW,EAPU;AAQrBrF,SAAO,EAAE;AARY,CAAzB;AAcA,IAAMyF,kBAAkB,GAAG;AACvB3b,MAAI,EADmB;AAEvBU,MAAI,EAFmB;AAGvBoR,OAAK,EAHkB;AAIvBsJ,MAAI,EAJmB;AAKvBC,QAAM,EALiB;AAMvBC,OAAK,EANkB;AAOvBC,aAAW,EAPY;AAQvBrF,SAAO,EAAE;AARc,CAA3B;AAcA,IAAM0F,kBAAkB,GAAG;AACvB5b,MAAI,EADmB;AAEvBU,MAAI,EAFmB;AAGvBoR,OAAK,EAHkB;AAIvBuJ,QAAM,EAJiB;AAKvBD,MAAI,EALmB;AAMvBE,OAAK,EANkB;AAOvBC,aAAW,EAPY;AAQvBrF,SAAO,EAAE;AARc,CAA3B;AAcA,IAAM2F,kBAAkB,GAAG;AACvB7b,MAAI,EADmB;AAEvBU,MAAI,EAFmB;AAGvBoR,OAAK,EAHkB;AAIvBuJ,QAAM,EAJiB;AAKvBD,MAAI,EALmB;AAMvBE,OAAK,EANkB;AAOvBC,aAAW,EAPY;AAQvBrF,SAAO,EAAE;AARc,CAA3B;AAcA,IAAM4F,0BAA0B,GAAG;AAC/B9b,MAAI,EAD2B;AAE/BU,MAAI,EAF2B;AAG/BoR,OAAK,EAH0B;AAI/BuJ,QAAM,EAJyB;AAK/BD,MAAI,EAL2B;AAM/BE,OAAK,EAN0B;AAO/BC,aAAW,EAPoB;AAQ/BrF,SAAO,EAAE;AARsB,CAAnC;AAcA,IAAM6F,iBAAiB,GAAG;AACtB/b,MAAI,EADkB;AAEtBU,MAAI,EAFkB;AAGtBoR,OAAK,EAHiB;AAItBuJ,QAAM,EAJgB;AAKtBD,MAAI,EALkB;AAMtBE,OAAK,EANiB;AAOtBC,aAAW,EAPW;AAQtBrF,SAAO,EAAE;AAEcxV,QAAI,EAAE;AAFpB;AARa,CAA1B;AAcA,IAAMsb,wBAAwB,GAAG;AAC7Bhc,MAAI,EADyB;AAE7BU,MAAI,EAFyB;AAG7BoR,OAAK,EAHwB;AAI7BuJ,QAAM,EAJuB;AAK7BD,MAAI,EALyB;AAM7BE,OAAK,EANwB;AAO7BC,aAAW,EAPkB;AAQ7BrF,SAAO,EAAE;AARoB,CAAjC;AAcA,IAAM+F,uBAAuB,GAAG;AAC5Bjc,MAAI,EADwB;AAE5BU,MAAI,EAFwB;AAG5BoR,OAAK,EAHuB;AAI5BuJ,QAAM,EAJsB;AAK5BD,MAAI,EALwB;AAM5BE,OAAK,EANuB;AAO5BC,aAAW,EAPiB;AAQ5BrF,SAAO,EAAE;AARmB,CAAhC;AAcA,IAAMgG,kBAAkB,GAAG;AACvBlc,MAAI,EADmB;AAEvBU,MAAI,EAFmB;AAGvBoR,OAAK,EAHkB;AAIvBuJ,QAAM,EAJiB;AAKvBD,MAAI,EALmB;AAMvBe,OAAK,EANkB;AAOvBb,OAAK,EAPkB;AAQvBC,aAAW,EARY;AASvBrF,SAAO,EAAE;AATc,CAA3B;AAeA,IAAMkG,sBAAsB,GAAG;AAC3Bpc,MAAI,EADuB;AAE3BU,MAAI,EAFuB;AAG3BoR,OAAK,EAHsB;AAI3BuJ,QAAM,EAJqB;AAK3BD,MAAI,EALuB;AAM3Be,OAAK,EANsB;AAO3Bb,OAAK,EAPsB;AAQ3BC,aAAW,EARgB;AAS3BrF,SAAO,EAAE;AATkB,CAA/B;AAeA,IAAMmG,sBAAsB,GAAG;AAC3Brc,MAAI,EADuB;AAE3BU,MAAI,EAFuB;AAG3BoR,OAAK,EAHsB;AAI3BuJ,QAAM,EAJqB;AAK3BD,MAAI,EALuB;AAM3BE,OAAK,EANsB;AAO3BC,aAAW,EAPgB;AAQ3BrF,SAAO,EAAE;AARkB,CAA/B;AAcA,IAAMoG,WAAW,GAAG;AAChBtc,MAAI,EADY;AAEhBU,MAAI,EAFY;AAGhBoR,OAAK,EAHW;AAIhBuJ,QAAM,EAJU;AAKhBD,MAAI,EALY;AAMhBE,OAAK,EANW;AAOhBC,aAAW,EAPK;AAQhBrF,SAAO,EAAE;AARO,CAApB;AAcA,IAAMqG,aAAa,GAAG;AAClBvc,MAAI,EADc;AAElBU,MAAI,EAFc;AAGlBoR,OAAK,EAHa;AAIlBuJ,QAAM,EAJY;AAKlBD,MAAI,EALc;AAMlBE,OAAK,EANa;AAOlBC,aAAW,EAPO;AAQlBrF,SAAO,EAAE;AARS,CAAtB;AAcA,IAAMsG,iBAAiB,GAAG;AACtBxc,MAAI,EADkB;AAEtBU,MAAI,EAFkB;AAGtBoR,OAAK,EAHiB;AAItBuJ,QAAM,EAJgB;AAKtBD,MAAI,EALkB;AAMtBE,OAAK,EANiB;AAOtBC,aAAW,EAPW;AAQtBrF,SAAO,EAAE;AARa,CAA1B;AAcA,IAAMuG,UAAU,GAAG;AACfzc,MAAI,EADW;AAEfU,MAAI,EAFW;AAGfoR,OAAK,EAHU;AAIfuJ,QAAM,EAJS;AAKfD,MAAI,EALW;AAMfE,OAAK,EANU;AAOfC,aAAW,EAPI;AAQfrF,SAAO,EAAE;AAEMhgB,SAAK,EAAE;AAFb;AARM,CAAnB;AAcA,IAAMwmB,YAAY,GAAG;AACjB1c,MAAI,EADa;AAEjBU,MAAI,EAFa;AAGjBoR,OAAK,EAHY;AAIjBuJ,QAAM,EAJW;AAKjBD,MAAI,EALa;AAMjBE,OAAK,EANY;AAOjBC,aAAW,EAPM;AAQjBrF,SAAO,EAAE;AAEMhgB,SAAK,EAAE;AAFb;AARQ,CAArB;AAcA,IAAMymB,iBAAiB,GAAG;AACtB3c,MAAI,EADkB;AAEtBU,MAAI,EAFkB;AAGtBoR,OAAK,EAHiB;AAItBuJ,QAAM,EAJgB;AAKtBD,MAAI,EALkB;AAMtBE,OAAK,EANiB;AAOtBC,aAAW,EAPW;AAQtBrF,SAAO,EAAE;AAEMhgB,SAAK,EAAE;AAFb;AARa,CAA1B;AAcA,IAAM0mB,SAAS,GAAG;AACdlc,MAAI,EADU;AAEdoR,OAAK,EAFS;AAGduJ,QAAM,EAHQ;AAIdD,MAAI,EAJU;AAKdlF,SAAO,EAAE;AALK,CAAlB;AAWA,IAAM2G,mBAAmB,GAAG;AACxB7c,MAAI,EADoB;AAExBU,MAAI,EAFoB;AAGxBoR,OAAK,EAHmB;AAIxBuJ,QAAM,EAJkB;AAKxBD,MAAI,EALoB;AAMxBE,OAAK,EANmB;AAOxBC,aAAW,EAPa;AAQxBrF,SAAO,EAAE;AAEcxV,QAAI,EAAE;AAFpB;AARe,CAA5B;AAcA,IAAMoc,WAAW,GAAG;AAChB9c,MAAI,EADY;AAEhBU,MAAI,EAFY;AAGhBoR,OAAK,EAHW;AAIhBuJ,QAAM,EAJU;AAKhBD,MAAI,EALY;AAMhBE,OAAK,EANW;AAOhBC,aAAW,EAPK;AAQhBrF,SAAO,EAAE;AAEMhgB,SAAK,EAAE;AAFb;AARO,CAApB;AAcA,IAAM6mB,aAAa,GAAG;AAClB/c,MAAI,EADc;AAElBU,MAAI,EAFc;AAGlBoR,OAAK,EAHa;AAIlBuJ,QAAM,EAJY;AAKlBD,MAAI,EALc;AAMlBE,OAAK,EANa;AAOlBC,aAAW,EAPO;AAQlBrF,SAAO,EAAE;AARS,CAAtB;AAcA,IAAM8G,aAAa,GAAG;AAClBhd,MAAI,EADc;AAElBU,MAAI,EAFc;AAGlBoR,OAAK,EAHa;AAIlBuJ,QAAM,EAJY;AAKlBD,MAAI,EALc;AAMlBE,OAAK,EANa;AAOlBC,aAAW,EAPO;AAQlBrF,SAAO,EAAE;AARS,CAAtB;AAcA,IAAM+G,SAAS,GAAG;AACdjd,MAAI,EADU;AAEdU,MAAI,EAFU;AAGdoR,OAAK,EAHS;AAIduJ,QAAM,EAJQ;AAKdD,MAAI,EALU;AAMdE,OAAK,EANS;AAOdC,aAAW,EAPG;AAQdrF,SAAO,EAAE;AARK,CAAlB;AAeA,IAAMgH,mBAAmB,GAAG;AAC1Bld,MAAI,EADsB;AAE1BU,MAAI,EAFsB;AAG1BoR,OAAK,EAHqB;AAI1BuJ,QAAM,EAJoB;AAK1BD,MAAI,EALsB;AAM1BE,OAAK,EANqB;AAO1BC,aAAW,EAPe;AAQ1BrF,SAAO,EAAE;AARiB,CAA5B;AAcA,IAAMiH,UAAU,GAAG;AACfnd,MAAI,EADW;AAEfU,MAAI,EAFW;AAGfoR,OAAK,EAHU;AAIfuJ,QAAM,EAJS;AAKfD,MAAI,EALW;AAMfE,OAAK,EANU;AAOfC,aAAW,EAPI;AAQfrF,SAAO,EAAE;AARM,CAAnB;AAcA,IAAMkH,gBAAgB,GAAG;AACrBpd,MAAI,EADiB;AAErBU,MAAI,EAFiB;AAGrB0a,MAAI,EAHiB;AAIrBtJ,OAAK,EAJgB;AAKrBuJ,QAAM,EALe;AAMrBC,OAAK,EANgB;AAOrBC,aAAW,EAPU;AAQrBrF,SAAO,EAAE;AARY,CAAzB;AAcA,IAAMmH,uBAAuB,GAAG;AAC5Brd,MAAI,EADwB;AAE5BU,MAAI,EAFwB;AAG5BoR,OAAK,EAHuB;AAI5BoE,SAAO,EAAE;AAJmB,CAAhC;;AAUA,IAAMoH,aAAa,GAAG,SAAhBA,aAAgB,6BAAgC;AAClD,MAAM3K,MAAM,GAAGvB,8CAAK,CAApB,kBAAoB,CAApB;AACAuB,QAAM,CAANA;AACAA,QAAM,CAANA;AACA;AAJJ;;AAOO,IAAM6F,OAAO,GAAG;AACrB2C,mBAAiB,EADI;AAErBK,iBAAe,EAFM;AAGrBC,eAAa,EAHQ;AAIrBC,kBAAgB,EAJK;AAKrBC,oBAAkB,EALG;AAOrBC,oBAAkB,EAPG;AAQrBC,oBAAkB,EARG;AASrBE,mBAAiB,EATI;AAUrBC,0BAAwB,EAVH;AAWrBC,yBAAuB,EAXF;AAYrBC,oBAAkB,EAZG;AAarBE,wBAAsB,EAbD;AAcrBC,wBAAsB,EAdD;AAerBC,aAAW,EAfU;AAgBrBC,eAAa,EAhBQ;AAiBrBC,mBAAiB,EAjBI;AAkBrBC,YAAU,EAlBW;AAmBrBC,cAAY,EAnBS;AAoBrBC,mBAAiB,EApBI;AAqBrBE,qBAAmB,EArBE;AAsBrBC,aAAW,EAtBU;AAuBrBF,WAAS,EAvBY;AAwBrBI,eAAa,EAxBQ;AAyBrBD,eAAa,EAzBQ;AA0BrBE,WAAS,EA1BY;AA2BrBC,qBAAmB,EA3BE;AA4BrBpJ,SAAO,EA5Bc;AA6BrB8G,SAAO,EA7Bc;AA8BrBuC,YAAU,EA9BW;AA+BrBC,kBAAgB,EA/BK;AAgCrBC,yBAAuB,EAhCF;AAiCrBvB,4BAA0B,EAjCL;AAkCrBwB,eAAa,EAAbA;AAlCqB,CAAhB,C;;;;;;;;;;;;;;;;;;AChcP,IAAMpE,cAAc,GAAG;AACnBlZ,MAAI,EADe;AAEnBud,QAAM,EAAE;AAFW,CAAvB;AAKA,IAAMhD,WAAW,GAAG;AAChBva,MAAI,EADY;AAEhBud,QAAM,EAAE;AAFQ,CAApB;AAKE,IAAMzJ,OAAO,GAAG;AACd9T,MAAI,EADU;AAEdud,QAAM,EAAE;AAFM,CAAhB;AAKA,IAAMnE,WAAW,GAAG;AAClBpZ,MAAI,EADc;AAElBud,QAAM,EAAE;AAFU,CAApB;AAKA,IAAMpD,cAAc,GAAG;AACrBna,MAAI,EADiB;AAErBud,QAAM,EAAE;AAFa,CAAvB;AAKA,IAAMjE,WAAW,GAAG;AAClBtZ,MAAI,EADc;AAElBud,QAAM,EAFY;AAGlBrnB,OAAK,EAAE;AAHW,CAApB;AAMA,IAAM2kB,QAAQ,GAAG;AACf7a,MAAI,EADW;AAEfud,QAAM,EAAE;AAFO,CAAjB;AAKA,IAAMzC,YAAY,GAAG;AACnB9a,MAAI,EADe;AAEnBud,QAAM,EAAE;AAFW,CAArB;AAKA,IAAMlE,WAAW,GAAG;AAClBrZ,MAAI,EADc;AAElBud,QAAM,EAFY;AAGlBrnB,OAAK,EAAE;AAHW,CAApB;AAMA,IAAMqjB,IAAI,GAAG;AACXvZ,MAAI,EADO;AAEXud,QAAM,EAAE;AAFG,CAAb;AAKA,IAAM1D,YAAY,GAAG;AACnB7Z,MAAI,EADe;AAEnBud,QAAM,EAFa;AAGnBxb,UAAQ,EAAE;AAHS,CAArB;AAMA,IAAM6Y,OAAO,GAAG;AACd5a,MAAI,EADU;AAEdud,QAAM,EAAE;AAFM,CAAhB;AAKA,IAAM9C,sBAAsB,GAAG;AAC7Bza,MAAI,EADyB;AAE7Bud,QAAM,EAAE;AAFqB,CAA/B;AAKA,IAAM/D,IAAI,GAAG;AACXxZ,MAAI,EADO;AAEXud,QAAM,EAAE;AAFG,CAAb;AAKA,IAAM9D,QAAQ,GAAG;AACfzZ,MAAI,EADW;AAEfud,QAAM,EAAE;AAFO,CAAjB;AAKA,IAAMvD,QAAQ,GAAG;AACfha,MAAI,EADW;AAEfud,QAAM,EAAE;AAFO,CAAjB;AAKA,IAAM7kB,WAAW,GAAG;AAClBsH,MAAI,EADc;AAElBud,QAAM,EAAE;AAFU,CAApB;AAKA,IAAM7D,MAAM,GAAG;AACb1Z,MAAI,EADS;AAEbud,QAAM,EAAE;AAFK,CAAf;AAKA,IAAM5D,YAAY,GAAG;AACnB3Z,MAAI,EADe;AAEnBud,QAAM,EAAE;AAFW,CAArB;AAKA,IAAMrnB,KAAK,GAAG;AACZ8J,MAAI,EADQ;AAEZud,QAAM,EAAE;AAFI,CAAd;AAKA,IAAM3D,QAAQ,GAAG;AACf5Z,MAAI,EADW;AAEfud,QAAM,EAAE;AAFO,CAAjB;AAKA,IAAM/C,qBAAqB,GAAG;AAC5Bxa,MAAI,EADwB;AAE5Bud,QAAM,EAAE;AAFoB,CAA9B;AAKA,IAAMxD,YAAY,GAAG;AACnB/Z,MAAI,EADe;AAEnBud,QAAM,EAAE;AAFW,CAArB;AAKA,IAAMzD,QAAQ,GAAG;AACf9Z,MAAI,EADW;AAEfud,QAAM,EAAE;AAFO,CAAjB;AAKA,IAAMtD,mBAAmB,GAAG;AAC1Bja,MAAI,EADsB;AAE1Bud,QAAM,EAFoB;AAG1B7c,MAAI,EAAE;AAHoB,CAA5B;AAMA,IAAMwZ,kBAAkB,GAAG;AACzBla,MAAI,EADqB;AAEzBud,QAAM,EAFmB;AAGzB7c,MAAI,EAAE;AAHmB,CAA3B;AAMA,IAAM0Z,aAAa,GAAG;AACpBpa,MAAI,EADgB;AAEpBud,QAAM,EAAE;AAFY,CAAtB;AAKA,IAAMjD,iBAAiB,GAAG;AACxBta,MAAI,EADoB;AAExBud,QAAM,EAAE;AAFgB,CAA1B;AAKA,IAAMlD,iBAAiB,GAAG;AACxBra,MAAI,EADoB;AAExBud,QAAM,EAAE;AAFgB,CAA1B;AAKA,IAAM7C,kBAAkB,GAAG;AACzB1a,MAAI,EADqB;AAEzBud,QAAM,EAAE;AAFiB,CAA3B;AAKA,IAAM5C,mBAAmB,GAAG;AAC1B3a,MAAI,EADsB;AAE1Bud,QAAM,EAAE;AAFkB,CAA5B;AAKA,IAAMxC,cAAc,GAAG;AACrB/a,MAAI,EADiB;AAErBud,QAAM,EAAE;AAFa,CAAvB;AAKA,IAAMvC,eAAe,GAAG;AACtBhb,MAAI,EADkB;AAEtBud,QAAM,EAAE;AAFc,CAAxB;AAKA,IAAMtC,gCAAgC,GAAG;AACvCjb,MAAI,EADmC;AAEvCud,QAAM,EAAE;AAF+B,CAAzC;AAMA,IAAMrC,qBAAqB,GAAG;AAC5Blb,MAAI,EADwB;AAE5Bud,QAAM,EAFsB;AAG5BrnB,OAAK,EAAE;AAHqB,CAA9B;AAOO,IAAMijB,MAAM,GAAG;AACpBD,gBAAc,EADM;AAEpBpF,SAAO,EAFa;AAIpBsF,aAAW,EAJS;AAKpBe,gBAAc,EALM;AAMpBb,aAAW,EANS;AAOpBD,aAAW,EAPS;AAQpBE,MAAI,EARgB;AASpBqB,SAAO,EATa;AAWpBpB,MAAI,EAXgB;AAYpBC,UAAQ,EAZY;AAcpBO,UAAQ,EAdY;AAepBthB,aAAW,EAfS;AAgBpBghB,QAAM,EAhBc;AAiBpBC,cAAY,EAjBQ;AAmBpBzjB,OAAK,EAnBe;AAoBpB0jB,UAAQ,EApBY;AAqBpBY,uBAAqB,EArBD;AAsBpBX,cAAY,EAtBQ;AAuBpBE,cAAY,EAvBQ;AAwBpBD,UAAQ,EAxBY;AA0BpBG,qBAAmB,EA1BC;AA2BpBC,oBAAkB,EA3BE;AA4BpBE,eAAa,EA5BO;AA6BpBE,mBAAiB,EA7BG;AA8BpBD,mBAAiB,EA9BG;AAgCpBI,wBAAsB,EAhCF;AAkCpBC,oBAAkB,EAlCE;AAmCpBC,qBAAmB,EAnCC;AAqCpBE,UAAQ,EArCY;AAsCpBC,cAAY,EAtCQ;AAuCpBP,aAAW,EAvCS;AAyCpBQ,gBAAc,EAzCM;AA0CpBC,iBAAe,EA1CK;AA2CpBC,kCAAgC,EA3CZ;AA4CpBC,uBAAqB,EAArBA;AA5CoB,CAAf,C;;;;;;;;;;;;;;;;;;ACvLT,IAAMsC,GAAG,GAAG,CACR;AACEpjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CADQ,EAKR;AACErjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CALQ,EASR;AACErjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CATQ,EAaR;AACErjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CAbQ,EAiBR;AACErjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CAjBQ,EAqBR;AACErjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CArBQ,EAyBR;AACErjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CAzBQ,EA6BR;AACErjB,IAAE,EADJ;AAEEqjB,QAAM,EAAE;AAFV,CA7BQ,CAAZ;AAmCO,IAAMhhB,UAAU,GAAG;AACtB+gB,KAAG,EAAHA;AADsB,CAAnB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCP;AAEA;AACA;AACA;AACA;;AAEA,IAAME,QAAQ;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEPC,4BAFO,GAEY,UAAU,CAAV,UAAqB,uBAAiB;AAC3D,kBAAGrgB,8CAAQ,QAAX,WAAW,CAAX,EAAiC;AAC7B;AAAkBmX,2BAAS,EAAEhN;AAA7B;AADJ,qBAEO;AAHc,sBAIf,gBAAI;AAAA;AAND,aAEY,CAAnBkW;;AAMAC,2BARO,GAQW,SAAlBA,eAAkB,aAAc;AAClC,kBAAMC,gBAAgB,GAAG,UAAU,CAAV,IAAe,qBAAa;AACjDC,yBAAS,CAATA,YAAsBA,SAAS,CAATA,OAAiBA,SAAS,CAATA,KAAjBA,YAAtBA;AACAA,yBAAS;AAA8BC,4BAAU,EAAxC;AAA0CC,2BAAS,EAATA;AAA1C,kBAATF;AACA;AAHJ,eAAyB,CAAzB;AAKA;AAdS,aAQPF;;AASAK,6BAjBO,GAiBa,SAApBA,iBAAoB,mBAAoB;AAC1C,qBAAO,YAAY,mBAAO;AAAA,uBAAIznB,OAAO,CAAC0nB,uFAAa,CAAzB,gBAAyB,CAAd,CAAX;AAA1B,eAAO,CAAP;AAlBS,aAiBPD;;AAIAE,qCArBO,GAqBqB,SAA5BA,yBAA4B,+BAAkC;AAChE,qBAAO,YAAY,mBAAO;AAAA,uBAAI3nB,OAAO,CAAC4nB,6FAAgB,mBAA5B,UAA4B,CAAjB,CAAX;AAA1B,eAAO,CAAP;AAtBS,aAqBPD;;AAIAE,sCAzBO,GAyBsB,SAA7BA,0BAA6B,mBAAoB;AACnD,qBAAOC,+FAAiB,CAAxB,gBAAwB,CAAxB;AA1BS,aAyBPD;;AAIAE,kCA7BO,GA6BkB,SAAzBA,sBAAyB,mBAAoB;AAC/C,qBAAOC,iGAAkB,CAAzB,gBAAyB,CAAzB;AA9BS,aA6BPD;;AAIFE,sBAjCS,KAiCTA,EAAiBC,aAjCR,KAiCTD,EAAqCE,cAjC5B,KAiCTF,EAA0DG,eAjCjD,KAiCTH;AAEA9L,kBAnCS,GAmCA,YAAY,CAAZ,KAAkB,kBAAM;AAAA,qBAAIA,MAAM,CAANA,SAAJ;AAnCxB,aAmCA,CAATA;;AAnCS;AAAA;AAAA;AAAA;;AAAA,iBAuCNA,MAAM,CAvCA;AAAA;AAAA;AAAA;;AAyCCkM,+BAzCD;AAAA,kFAyCuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACL,MAAM,CAAN;AAAA,8FAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,qEAGrBZ,iBAAiB,CAHI,gBAGJ,CAHI;;AAAA;AAAA,qEAKrBE,yBAAyB,mBALJ,UAKI,CALJ;;AAAA;AAAA,qEAOrBE,0BAA0B,CAPL,gBAOK,CAPL;;AAAA;AAAA,qEASrBE,sBAAsB,CATD,gBASC,CATD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAjB;;AAAA;AAAA;AAAA;AADK,yBACL,GADK;;AAAA;AACtBO,gCADsB,iBACtBA;AADsB;AAAA,+BAcHC,OAAO,CAAPA,IAdG,QAcHA,CAdG;;AAAA;AActBC,kCAdsB,iBActBA;AAEAC,6BAhBsB,GAgBd,UAAU,CAAV,IAAe,iBAAS;AAClC7e,+BAAK,GAAG,KAAK,CAAL,OAAa,aAAC;AAAA,mCAAI8e,CAAC,CAAL;AAAtB9e,2BAAQ,CAARA;AACA,iCAAOwd,eAAe,CAAtB,KAAsB,CAAtB;AAlBwB,yBAgBd,CAARqB;AAhBsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAzCvB;;AAAA;AAAA;AAAA;AAAA,eAyCCJ;;AAzCD;AAAA,mBAiEUA,mBAjEV;;AAAA;AAiETJ,sBAjES,iBAiETA;AAjES;AAAA;;AAAA;AAoELA,sBAAU,GAAGR,iBAAiB,CAA9BQ,gBAA8B,CAA9BA;AACAC,yBAAa,GAAGP,yBAAyB,mBAAzCO,UAAyC,CAAzCA;AACAC,0BAAc,GAAGN,0BAA0B,CAA3CM,gBAA2C,CAA3CA;AACAC,2BAAe,GAAGL,sBAAsB,CAAxCK,gBAAwC,CAAxCA;;AAvEK;AAAA,8CA2ENO,8CAAO,CA3ED,UA2EC,CA3ED;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAARzB,QAAQ;AAAA;AAAA;AAAd,CAAc,EAAd;;AA8EO,IAAM0B,YAAY,GAAG;AACxB1B,UAAQ,EAARA;AADwB,CAArB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrFP;AAEA;AAEO,IAAMU,gBAAgB,GAAG,SAAnBA,gBAAmB,+BAAkC;AAE9D,MAAGT,gBAAgB,KAAnB,WAAmC;AAEnC,MAAMsB,KAAK,GAAG,gBAAgB,CAAhB,IAAqB,gBAAQ;AAEvC,QAAGxqB,IAAI,CAAJA,qBAAuBA,IAAI,CAAJA,oCAA1B,QAAwE;;AAFjC,2BAIE4qB,eAAe,yBAJjB,UAIiB,CAJjB;AAAA,QAI/Btd,QAJ+B;AAAA,QAIrBC,OAJqB;AAAA,QAIZC,SAJY;;AAMvC,QAAG,CAAH,UAAc;AAEd,WAAO;AACHxN,UAAI,EADD;AAEHsN,cAAQ,EAFL;AAGHC,aAAO,EAHJ;AAIHC,eAAS,EAATA;AAJG,KAAP;AARJ,GAAc,CAAd;AAgBA;AApBG;;AAuBP,IAAMod,eAAe,GAAG,SAAlBA,eAAkB,qCAAwC;AAE5D,MAAG,CAAC5qB,IAAI,CAAL,UAAgB8H,MAAM,CAANA,KAAY9H,IAAI,CAAhB8H,mBAAnB,GAA0D;AAE1D,MAAMyD,IAAI,GAAV;;AACA,MAAM6a,QAAQ;AAAK7a,QAAI,EAAJA;AAAL,KAAcvL,IAAI,CAAJA,OALgC,IAKhCA,CAAd,CAAd,CAL4D,CAO5D;;;AAEA,MAAI6qB,KAAK,GAAG3gB,8CAAI,IAAI,UAAU,CAAV,aAAwB,gBAAI;AAAA,WAAI4gB,IAAI,CAAJA,uBAA4B9qB,IAAI,CAAJA,KAAhC,WAAgCA,EAAhC;AAAhD,GAAoB,CAAJ,CAAhB;AACI6qB,OAAK,CAALA;AAEJ,MAAME,SAAS,GAAG,4DAAmB,KAAK,CAAL,IAAU,gBAAI;AAAA,WAAID,IAAI,CAAR;AAAnD,GAAqC,CAAnB,CAAlB;AAEA,MAAMxd,QAAQ,GAAGtN,IAAI,CAArB;AACA,MAAMuN,OAAO,GAAb;AACA,MAAMC,SAAS,GAAG;AAAEF,YAAQ,EAAV;AAAkC0d,kBAAc,EAAhD;AAAiExN,YAAQ,EAAzE;AAAyFpa,SAAK,EAAEgjB;AAAhG,GAAlB;AAEA,SAAO;AAAE9Y,YAAQ,EAAV;AAAYC,WAAO,EAAnB;AAAqBC,aAAS,EAATA;AAArB,GAAP;AAlBJ,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BA;AAEA;AACA;AACA;AAEO,IAAMuc,kBAAkB,GAAG,SAArBA,kBAAqB,mBAAoB;AAElD,MAAGb,gBAAgB,KAAnB,WAAmC;AAEnC,MAAMsB,KAAK,GAAG,gBAAgB,CAAhB,IAAqB,gBAAQ;AAEvC,WAAOS,iBAAiB,CAAxB,IAAwB,CAAxB;AAFJ,GAAc,CAAd;AAMA;AAVG;;AAaP,IAAMA,iBAAiB;AAAA,qEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,8BAEmBve,yDAFnB,EAEdnL,MAFc,2BAENI,UAFM,+BAEM8R,QAFN;AAIhBnT,kBAJgB,GAIPiB,MAAM,CAANA,qBAJO,CAIhBjB;AAEAmB,iBANgB,GAMRwJ,sEAAU,CAACjL,IAAI,CAAL,UAAViL,kEAAU,CAAVA,CANQ,KAMhBxJ;AAEFwC,uBARkB,GAQJ,QAAQ,CAAR,OAAgB,sBAAU;AAAA,qBAAI4E,8CAAQ,CAAC3E,UAAU,CAAX,OAAmB,QAA/B,QAA+B,CAAnB,CAAZ;AARtB,aAQJ,CAAdD;AAEJA,uBAAW,GAAGrD,4DAAdqD,WAAcrD,CAAdqD;AAEMD,gBAZgB,GAYThE,IAAI,CAAJA,QACKY,4DAAmBZ,IAAI,CAAvBY,OADLZ,CACKY,CADLZ,GAEKA,IAAI,CAAJA,QACIA,IAAI,CAAJA,cACIA,IAAI,CAAJA,YAAiB2B,UAAU,CAA3B3B,aACIA,IAAI,CAAJA,YAAiB2B,UAAU,CAD/B3B,SACIA,CADJA,GAEQA,IAAI,CAAJA,SACAA,IAAI,CAAJA,eACIY,4DAAmBZ,IAAI,CAAJA,OAAnBY,OADJZ,CACIY,CADJZ,GADAA,OAHZA,OADJA,OAdI,IAYhBgE;AAeAE,sBA3BgB,GA2BH,CAAC,CAAD,OACb,WAAW,CAAX,KAAiB,sBAAU;AAAA,qBAAIA,UAAU,CAAVA,uBAAkCF,IAAI,CAA1C,WAAsCA,EAAtC;AADd,aACb,CADa,GAEbC,WAAW,CA7BK,CA6BL,CAFXC;AAIAgnB,wBA/BgB,GA+BD,8CAAI,CAAC5qB,MAAM,GAAP,GAAW,8CAAI,SAASM,4DAAb,WAAaA,CAAT,CAAJ,QAAqD,aAAC;AAAA,qBAAIuqB,CAAC,CAADA,uBAAyBjnB,UAAU,CAAVA,KAA7B,WAA6BA,EAA7B;AAArE,aAAe,CAAX,CAAJ,KAAsI,aAAC;AAAA,qBAAItD,+DAAsBuqB,CAAC,CAA3B,UAAIvqB,CAAJ;AA/BtI,aA+BD,CAAfsqB;AAEA5d,oBAjCgB,GAiCLpJ,UAAU,CAjCL,UAiChBoJ;AACAC,mBAlCgB,GAkCN3M,iGAlCM,YAkCNA,GAAV2M;AACAF,gBAnCgB,GAmCT9L,MAAM,CAANA,gDAnCS,uBAmChB8L;AAnCgB,6CAqCf;AAAEC,sBAAQ,EAAV;AAAYC,qBAAO,EAAnB;AAAqBC,uBAAS,EAAG;AAAEF,wBAAQ,EAAEpJ,UAAU,CAAtB;AAA6BmJ,oBAAI,EAAjC;AAAmCmQ,wBAAQ,EAAExd,IAAI,CAAjD;AAAwDgrB,8BAAc,EAAEhrB,IAAI,CAACgrB;AAA7E;AAAjC,aArCe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAjBC,iBAAiB;AAAA;AAAA;AAAvB,CAAuB,EAAvB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBA;AAEO,IAAMpB,iBAAiB;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEvBuB,gBAFuB;AAAA,kFAEhB;AAAA;AAAA;AAAA;AAAA;AAAA,8BAENlC,gBAAgB,KAFV;AAAA;AAAA;AAAA;;AAAA,0DAEiC,YAAY,mBAAO;AAAA,iCAAInnB,OAAO,CAAX,EAAW,CAAX;AAFpD,yBAEiC,CAFjC;;AAAA;AAAA,0DAIF,OAAO,CAAP,IAAY,gBAAgB,CAAhB;AAAA,8FAAqB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEWspB,gBAAgB,CAF3B,IAE2B,CAF3B;;AAAA;AAAA;AAE5B/d,4CAF4B,iCAE5BA;AAAUC,2CAFkB,gCAElBA;AAASC,6CAFS,kCAETA;;AAFS;AAAA;AAAA;AAAA;;AAAA,qEAIf,YAAY,mBAAO;AAAA,6CAAIzL,OAAO,CAAX,EAAW,CAAX;AAJJ,qCAIf,CAJe;;AAAA;AAAA,qEAM7B;AACH/B,0CAAI,EADD;AAEHsN,8CAAQ,EAFL;AAGHC,6CAAO,EAHJ;AAIHC,+CAAS,EAATA;AAJG,qCAN6B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAArB;;AAAA;AAAA;AAAA;AAJV,yBAIU,GAAZ,CAJE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFgB;;AAAA;AAAA;AAAA;AAAA,eAEvB4d;;AAFuB;AAAA,mBAqBTA,IArBS;;AAAA;AAqBvBZ,iBArBuB,iBAqBvBA;AArBuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAjBX,iBAAiB;AAAA;AAAA;AAAvB,CAAuB,EAAvB;AA0BA,IAAMyB,iBAAiB;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAE1B,CAACtrB,IAAI,CAAL,UAAgB8H,MAAM,CAANA,KAAY9H,IAAI,CAAhB8H,mBAFU;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAIvByjB,2BAJuB,GAILvrB,IAAI,CAAJA,OAJK,YAILA,CAAlBurB;;AAJuB;AAAA;AAAA;AAAA;;AAAA,8CAMD,YAAY,mBAAO;AAAA,qBAAIxpB,OAAO,CAAX,EAAW,CAAX;AANlB,aAMD,CANC;;AAAA;AAQzBypB,sBARyB,GAQZ,eAAe,CAAf,IAAoB,iBAAK;AAAA,qBAAIpoB,KAAK,CAALA,UAAJ;AARb,aAQZ,CAAbooB;;AARyB,kBAU1BA,UAAU,CAAVA,WAV0B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAY7B;AAEMC,yBAduB;AAAA,kFAcP;AAAA;AAAA;AAAA;AAAA;AAAA,0DACX,OAAO,CAAP,IAAY,UAAU,CAAV;AAAA,8FAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACjBllB,+EADiB,IACjBA,CADiB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAf;;AAAA;AAAA;AAAA;AADD,yBACC,GAAZ,CADW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAdO;;AAAA;AAAA;AAAA;AAAA,eAcvBklB;;AAduB;AAAA,mBAoBVA,aApBU;;AAAA;AAoB7BD,sBApB6B,iBAoB7BA;AACAA,sBAAU,GAAG,UAAU,CAAV,OAAkB,qBAAS;AAAA;AAAxCA,aAAa,CAAbA;AArB6B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAjBF,iBAAiB;AAAA;AAAA;AAAvB,CAAuB,EAAvB;;AA0BP,IAAMD,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAQ;AAE7B,MAAMD,IAAI;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEgBE,iBAAiB,CAFjC,IAEiC,CAFjC;;AAAA;AAEHE,wBAFG,iBAEHA;AAEAle,sBAJG,GAIQke,UAAU,CAAVA,aAAwBxrB,IAAI,CAA5BwrB,OAJR,IAIHle;AACAC,qBALG,wCAKsB,UAAU,CAAV,IAAe,gBAAI;AAAA,uBAAIvN,IAAI,CAAR;AALzC,eAKsB,CALtB,EAKHuN;AALG,gDAQF;AAAED,wBAAQ,EAAV;AAAYC,uBAAO,EAAnB;AAAqBC,yBAAS,EAAG;AAAEF,0BAAQ,EAAV;AAAiCD,sBAAI,EAArC;AAAmEmQ,0BAAQ,EAA3E;AAA2FwN,gCAAc,EAAzG;AAA0H5nB,uBAAK,EAAE;AAAEmI,wBAAI,EAAN;AAAsBigB,8BAAU,EAAVA;AAAtB;AAAjI;AAAjC,eARE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJJ,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AAWA,SAAOA,IAAP;AAbJ,E;;;;;;;;;;;;;;;;;;;;ACtDA;AACA;AAEO,IAAM3B,aAAa,GAAG,SAAhBA,aAAgB,mBAAoB;AAE7C,MAAGP,gBAAgB,KAAnB,WAAmC;AAEnC,MAAMsB,KAAK,GAAG,gBAAgB,CAAhB,IAAqB,gBAAQ;AAAA,0BAErB9d,yDAFqB;AAAA,QAE/BI,KAF+B;;AAAA,6BAIEE,8EAAiB,QAJnB,IAImB,CAJnB;AAAA,QAI/BM,QAJ+B;AAAA,QAIrBC,OAJqB;AAAA,QAIZC,SAJY;;AAMvC,QAAG,CAAH,UAAc;AAEd,WAAO;AACHxN,UAAI,EADD;AAEHsN,cAAQ,EAFL;AAGHC,aAAO,EAHJ;AAIHC,eAAS,EAATA;AAJG,KAAP;AARJ,GAAc,CAAd;AAgBA;AApBG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA,IAAMke,mBAAmB,GAAG,SAAtBA,mBAAsB,6BAAgC;AAE/D;AAEAnN,QAAM,CAANA,mBAA0B,UAAU,CAAV,cAAyB,iBAAK;AAAA,WAAIzX,KAAK,CAALA,iBAAJ;AAA9B,KAA1ByX;;AAEA,MAAMoN,6BAA6B,GAAG,SAAhCA,6BAAgC,sBAAyB;AAC3D,WAAO,UAAU,CAAV,YAAuB,iBAAK;AAAA,aAAI7kB,KAAK,CAALA,OAAJ;AAAnC,KAAO,CAAP;AADJ;;AAIA,MAAM8kB,UAAU,GAAG,SAAbA,UAAa,qBAAwB;AACvC;AACI;AACIC,oBAAY,CAAZA,eAA4BA,YAAY,CAAZA,gBAA5BA;AACA,4CAAY,YAAY,CAAZ,eAA4B,aAAC;AAAA;AAAzC,SAAY,CAAZ,sBAAoDA,YAAY,CAAhE;;AACJ;AACI,eAAOA,YAAY,CAAZA,iBAAP;;AACJ;AACI,eAAOA,YAAY,CAAnB;AAPR;AADJ;;AAYA,MAAMC,2BAA2B,GAAG,SAA9BA,2BAA8B,sBAAyB;AAEzD,QAAI/H,OAAO,GAAX;AAAA,QAAkBuF,UAAU,GAA5B;AAAA,QAAmCC,SAAS,GAA5C;;AAEA,QAAMwC,4CAA4C,GAAG,SAA/CA,4CAA+C,uBAA0B;AAE3E,UAAIC,SAAS,GAAb;AAEA,UAAGjI,OAAO,CAAPA,SAAH,GAAuB;AAEvB,UAAMjd,KAAK,GAAG,UAAU,CAAV,YAAuB,iBAAK;AAAA,eAAIA,KAAK,CAALA,OAAamlB,OAAO,GAAxB;AAA1C,OAAc,CAAd;AAEA,UAAG,CAAH,OAAW;AAEX1N,YAAM,CAANA;AAEAA,YAAM,CAANA;AACA+K,gBAAU,GAAG/K,MAAM,CAAnB+K;AACAC,eAAS,GAAGhL,MAAM,CAANA,MAd+D,IAc3EgL,CAd2E,CAc5C;;AAC/BxF,aAAO,GAAG6H,UAAU,CAACD,6BAA6B,aAAaM,OAAO,GAAlD,SAA8B,CAA9B,EAAiE1qB,MAAM,CAA3FwiB,IAAoB,CAApBA;AAEAiI,eAAS;AAETD,kDAA4C,YAA5CA,OAA4C,CAA5CA;AAnBJ;;AAsBAA,gDAA4C,IAA5CA,OAA4C,CAA5CA;AAEA,WAAO;AAAEzC,gBAAU,EAAZ;AAAcC,eAAS,EAAvB;AAAyBxF,aAAO,EAAPA;AAAzB,KAAP;AA5BJ;;AA+BA,MAAIkI,OAAO,GAAG1N,MAAM,CAANA,MAAd;;AAEA,MAAGA,MAAM,CAAT,iBAA2B;AACvB0N,WAAO;AACP1N,UAAM,CAANA,QAAe,UAAU,CAAV,YAAuB,iBAAK;AAAA,aAAIzX,KAAK,CAALA,OAAJ;AAA3CyX,KAAe,CAAfA;AACH;;AA1D8D,8BA4D3CuN,2BAA2B,aA5DgB,OA4DhB,CA5DgB;AAAA,MA4DvD/H,OA5DuD;;AA8D/D;AA9DG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AACA;IAEQoC,O,GAAqBpC,6E;IAAZ1E,O,GAAY0E,6E;;AAE7B,IAAMmI,gBAAgB;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAErB3N,kBAAM,CAANA,aAAoBA,MAAM,CAANA,cAAqB5c,UAAU,CAA/B4c,cAA8Chd,MAAM,CAAxEgd;AACAA,kBAAM,CAANA,eAAsBA,MAAM,CAANA,gBAAtBA;AAEIF,kBALiB,GAKR1c,UAAU,CAAVA,eAA0B4c,MAAM,CALxB,UAKjBF;AACAA,kBAAM,GAAG1c,UAAU,CAAVA,eAA0B4c,MAAM,CAAhC5c,4BAA6D0c,MAAM,KAANA,QAAmB1X,IAAI,CAAJA,gBAAzF0X;AAEJE,kBAAM,GAAG,MAAM,CAAN;AAC6BzX,mBAAK,EAAE;AAAEnB,kBAAE,EAAE;AAAN,eADpC;AAC+C0Y,oBAAM,EAANA;AAD/C,iBAATE;AAIM4N,oCAZe,GAYYT,0FAAmB,qBAZ/B,MAY+B,CAA9CS;;AAZe,kBAclB5N,MAAM,CAANA,UAdkB;AAAA;AAAA;AAAA;;AAAA,6CAeV,YAAY,mBAAO;AAAA,qBAAIxc,OAAO,CAAX,IAAW,CAAX;AAfT,aAeV,CAfU;;AAAA;AAAA;AAAA,mBAkBRqqB,gFAAe,uCAGxB,UAHwB,OAGxB,CAHwB,cAlBP,MAkBO,CAlBP;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAhBF,gBAAgB;AAAA;AAAA;AAAtB,CAAsB,EAAtB;;AA2BO,IAAMG,aAAa,GAAG;AACzBH,kBAAgB,EAAhBA;AADyB,CAAtB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCP;AAEA;AACA;AACA;AAEO,IAAMI,YAAY;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmBC,oBAAnB,4DAAmBA;AAAnB;AAIlBvsB,gBAJkB,GAIX2B,UAAU,CAJC,QAIlB3B;;AAJkB,kBAMrB2B,UAAU,CAAVA,cANqB;AAAA;AAAA;AAAA;;AAOhB6qB,sBAPgB,GAOH,UAAU,CAAV,aAAwB,aAAC;AAAA,qBAAI9lB,CAAC,CAADA,SAAW1G,IAAI,CAAnB;AAPtB,aAOH,CAAbwsB;;AAPgB,kBAQnBA,UAAU,IAAIA,UAAU,CAAVA,SARK;AAAA;AAAA;AAAA;;AAAA,6CASbC,sBAAsB,mBATT,QASS,CATT;;AAAA;AAalB1hB,gBAbkB,GAaXG,iFAAqB,CAAClL,IAAI,CAAL,UAAgBA,IAAI,CAb9B,WAaU,CAA5B+K;AAbkB;AAAA,mBAeGxE,sFAfH,IAeGA,CAfH;;AAAA;AAepBmmB,0BAfoB,gBAepBA;;AAEJ,gBAAG1sB,IAAI,CAAJA,8BAAH,SAA+C;AACrCQ,sBADqC,GAC1BR,IAAI,CADsB,MACrCQ;AACNksB,4BAAc,GAAGlsB,QAAQ,GAAG,cAAc,CAAd,OAAsB,gBAAI;AAAA,uBAAIR,IAAI,CAAR;AAA7B,eAAG,CAAH,GAAgD,cAAc,CAAd,OAAsB,gBAAI;AAAA,uBAAI,CAACA,IAAI,CAAT;AAAnG0sB,eAAyE,CAAzEA;AACH;;AAEKC,uBAtBkB,GAsBJ,4DAAmB,cAAc,CAAd,OAAsB,cAAE;AAAA,qBAAIC,EAAE,CAAFA,uBAA0B5sB,IAAI,CAAJA,KAA9B,WAA8BA,EAA9B;AAtBvC,aAsBe,CAAnB,CAAd2sB,CAtBkB,CAwBxB;;AAEME,uBA1BkB,GA0BJ7sB,IAAI,CAAJA,4CAAiDA,IAAI,CAAJA,8BA1B7C,UA0BlB6sB;;AA1BkB;AAAA;AAAA;AAAA;;AA6BtBP,wBAAY,CAAZA,UAAY,CAAZA;AA7BsB;AAAA;;AAAA;AAAA,kBAkChBK,WAAW,CAAXA,qBAAiC,CAlCjB;AAAA;AAAA;AAAA;;AAmCtBL,wBAAY,CAAZA,UAAY,CAAZA;AAnCsB;AAAA;;AAAA;AAuChBprB,iBAvCgB,GAuCRgJ,8CAAI,WAvCI,WAuCJ,CAAZhJ;AAENA,iBAAK,CAALA;AAzCsB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AA8CxB+G,oBAAQ,uDAARA,EAAQ,CAARA;;AA9CwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAZqkB,YAAY;AAAA;AAAA;AAAlB,CAAkB,EAAlB;;AAkDL,IAAMG,sBAAsB,GAAG,SAAzBA,sBAAyB,6BAAgC;AAC7D,MAAMvrB,KAAK,GAAGgJ,8CAAI,WAAWtJ,4DAA7B,UAA6BA,CAAX,CAAlB;AACA,SAAOA,kGAAP,IAAOA,GAAP;AAFF,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxDF;AAEA;;AAEA,IAAMksB,cAAc;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,gBACfC,aAAa,CADE;AAAA;AAAA;AAAA;;AAAA,6CACmB,YAAY,mBAAO;AAAA,qBAAIhrB,OAAO,CAAX,IAAW,CAAX;AADtC,aACmB,CADnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAd+qB,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB;;AAKA,IAAMlB,UAAU;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAEZjqB,UAAU,CAFE;AAAA;AAAA;AAAA;;AAILjB,mBAJK,GAIK,UAAU,CAAV,eAA0B,cAAE;AAAA,qBAAImI,8CAAQ,CAACtE,EAAE,CAAH,MAAZ,cAAY,CAAZ;AAJjC,aAIK,CAAV7D;AACAssB,4BALK,GAKc,OAAO,CAAP,OAAe,cAAE;AAAA,qBAAIzoB,EAAE,CAAN;AAL/B,aAKc,CAAnByoB;;AALK,kBAORA,gBAAgB,CAAhBA,SAPQ;AAAA;AAAA;AAAA;;AAAA,8CAQA,OAAO,CAAP,IAAY,gBAAgB,CAAhB,IAAqB,cAAE;AAAA,qBAAIC,EAAE,CAAN;AARnC,aAQY,CAAZ,CARA;;AAAA;AAWLC,0BAXK,GAWY,UAAU,CAAV,aAAwB,aAAC;AAAA,qBAAIrkB,8CAAQ,CAACnC,CAAC,CAAF,MAAZ,cAAY,CAAZ;AAAzB,mBAAmE,aAAK;AAAE,qBAAO;AAAE6E,oBAAI,EAAE7E,CAAC,CAAT;AAAgBhC,2BAAW,EAAEgC,CAAC,CAAChC;AAA/B,eAAP;AAXtF,aAWY,CAAjBwoB;;AAXK;AAAA;AAAA;AAAA;;AAcD7C,oBAdC,GAcU,cAAc,CAAd;AAAA,kFAAmB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAC7B0C,aAAa,CADgB;AAAA;AAAA;AAAA;;AAAA;AAAA,+BACWD,cAAc,CADzB,aACyB,CADzB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAnB;;AAAA;AAAA;AAAA;AAdV,aAcU,GAAXzC;AAdC;AAAA,mBAiBMC,OAAO,CAAPA,IAjBN,QAiBMA,CAjBN;;AAAA;AAAA;;AAAA;AAAA,8CAmBA,YAAY,mBAAO;AAAA,qBAAIvoB,OAAO,CAAX,IAAW,CAAX;AAnBnB,aAmBA,CAnBA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAV6pB,UAAU;AAAA;AAAA;AAAhB,CAAgB,EAAhB;;AA0BO,IAAMuB,eAAe,GAAG;AAC3BvB,YAAU,EAAVA;AAD2B,CAAxB,C;;;;;;;;;;;;;;;;;;ACnCP,IAAMwB,aAAa,GAAG,SAAhBA,aAAgB,kCAAqC;AAEvD,MAAMC,KAAK,GAAG,CAACjP,YAAY,GAAb,KAAd;AACA,MAAMkP,GAAG,GAAGD,KAAK,GAAjB;AACA,SAAOnsB,KAAK,CAALA,aAAP,GAAOA,CAAP;AAJJ;;AAOO,IAAMqsB,YAAY,GAAG;AACxBH,eAAa,EAAbA;AADwB,CAArB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPP;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEO,IAAMhB,eAAe,GAAG,SAAlBA,eAAkB,4EAA+E;AAE1G,MAAMhB,IAAI;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAETtY,wBAAU,CAAVA;AAEMuP,wBAJG,GAIU9D,MAAM,CAJhB,UAIH8D;AACAiH,wBALG,GAKU/K,MAAM,CALhB,IAKH+K;AACAC,uBANG,GAMShL,MAAM,CAANA,MANT,IAMHgL;AACAiE,8BAPG,GAOgB,CAACjP,MAAM,CAANA,eAAD,KAPhB,UAOHiP;AACAC,uBARG,GAQS9rB,UAAU,CAAVA,eART,gBAQH8rB;AAEAC,0BAVG,GAUYrL,UAAU,GAAVA,wBAVZ,UAUHqL;AACAC,4BAXG,GAWc,6FAA2BpP,MAAM,CAAjC,0BAA4D,UAAU,CAAV,UAAqB,aAAC;AAAA,uBAAI7X,CAAC,CAAL;AAXhG,eAW0E,CAA5D,CAAjBinB;AAENxB,sCAAwB,CAAxBA;AAAAA,oFAAkC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAC1BnM,mCAD0B,IAC1BA;;AAD0B;AAAA,gCAGvB9B,MAAM,CAANA,SAHuB;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAKhBle,wCALgB,GAKT,UAAU,CAAV,WAAsB,aAAC;AAAA,6CAAI0G,CAAC,CAADA,SAAWinB,cAAc,CAA7B,SAA6B,CAA7B;AALd,qCAKT,CAAP3tB;AALgB,4DAOiB4tB,iIAAmChtB,4DAAmBsd,MAAM,CAANA,WAAtD0P,MAAmChtB,CAAnCgtB,EAAiF5tB,IAAI,CAPtG,MAOiB4tB,CAPjB,EAOdC,mBAPc,8CAOOzqB,KAPP;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,2CAWmBwqB,wJAA0DjsB,UAAU,CAXvF,QAWmBisB,CAXnB;;AAAA;AAAA;AAWd/rB,0CAXc,+BAWdA;AAAQisB,kDAXM,uCAWNA;;AAXM,0CAanB,mBAAmB,CAbA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAetB5P,0CAAM,CAANA;AACAA,0CAAM,CAANA;AACAA,0CAAM,CAANA;AAEM6P,kDAnBgB,GAmBC,QAnBD,MAmBC,CAAjBA;AACAC,6CApBgB,GAoBJ,CAAC,CAAC,cAAc,CAAd,KAAoB,aAAC;AAAA,6CAAI,CAACnlB,8CAAQ,CAAColB,CAAC,CAADA,KAAD,WAACA,EAAD,EAAb,cAAa,CAAb;AApBnB,qCAoBF,CAAdD;;AAEN,mDAAc;AACVlb,gDAAU,CAAVA;AAAoCwW,kDAAU,EAA9CxW;AAAgDyW,iDAAS,EAAzDzW;AAA2Dob,mDAAW,EAAEP,cAAc;AAAtF7a;AACH;;AAxBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AA2BtBA,oCAAU,CAAVA;AAAoCwW,sCAAU,EAA9CxW;AAAgDyW,qCAAS,EAAzDzW;AAA2Dob,uCAAW,EAAEP,cAAc;AAAtF7a;;AA3BsB;AA8B1BkN,mCAAS;;AA9BiB;AAAA,8BAgCrBA,SAAS,GAhCY;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlCmM;;AAAAA;AAAAA;AAAAA;AAAAA;;AAbS,oBAgDN5N,MAAM,CAANA,aAhDM;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAiDyB4O,qHAjDzB,cAiDyBA,CAjDzB;;AAAA;AAiDDgB,+BAjDC,iBAiDDA;AACAA,+BAAiB,GAAG,8CAAO,CAAP,iBAAO,CAAP,QAAkC,kBAAM;AAAA;AAA5DA,eAAoB,CAApBA;AAEAC,6BApDC,GAoDiB,iBAAiB,CAAjB,IAAsB,oBAAY;AACpD,uDAAY7K,6FAAZ;AAAuC+F,4BAAU,EAAjD;AAA8DC,2BAAS,EAAvE;AAAmF2E,6BAAW,EAAEG,QAAQ,CAARA,QAAiBA,QAAQ,CAAzH;AAAiIA,0BAAQ,EAARA;AAAjI;AArDC,eAoDiB,CAAlBD;;AAIJ,mCAAoB;AAChBtb,0BAAU,CAAVA,uCAA0BA,UAAU,CAApCA;AACH;;AA1DI;AA6DHkR,0BA7DG,GA6DY,UAAU,CAAV,eAA0B,kBAAM;AAAA,uBAAI9F,MAAM,CAAV;AA7D5C,eA6DY,CAAf8F;AAEFsK,2BA/DK,GA+DW,UAAU,CAAV,eAA0B,kBAAM;AAAA,uBAAI,CAACpQ,MAAM,CAAX;AAAhC,qBAAuD,qBAAe;AACtFA,sBAAM,CAANA,YAAmBA,MAAM,CAANA,0BAAiCtd,6FAAjCsd,CAAiCtd,CAAjCsd,GAA0FA,MAAM,CAAnHA;AACA;AAjEK,eA+DW,CAAhBoQ;AAKEC,yBApEG,sBAoEgB,QAAQ,UAAU,CAAV,YAAuB,kBAAM;AAAA,uBAAIrQ,MAAM,CAAV;AAA7B,wBAA0D,aAAC;AAAA,uBAAIxX,CAAC,KAAL;AApEnF,eAoEwB,CAAR,CApEhB,CAoEH6nB;AAENzb,wBAAU,CAAVA;;AAtES,oBAwENyL,MAAM,CAANA,aAxEM;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,qBA2EwBoM,iJA3ExB,SA2EwBA,CA3ExB;;AAAA;AA2EK6D,wBA3EL,iBA2EKA;AACN1b,wBAAU,CAAVA,uCAA0BA,UAAU,CAApCA;;AA5EC;AAgFTwb,2BAAa,GAAG,UAAU,CAAV,YAAuB,qBAAe;AAClDpQ,sBAAM,CAANA,qBAA4BxX,CAAC,GAA7BwX;AACA;AAFJoQ,eAAgB,CAAhBA;AAKMG,2BArFG,GAqFa,UAAU,CAAV,WAChB;AACEljB,oBAAI,EADN;AAEEkW,uBAAO,EAAE,CAAC;AACNlW,sBAAI,EADE;AAENud,wBAAM,EAFA;AAGN5W,wBAAM,EAAEwc,iDAAaC;AAHf,iBAAD,CAFX;AAOErF,0BAAU,EAPZ;AAQEC,yBAAS,EARX;AASEqF,2BAAW,EAAE9b,UAAU,CAAVA,QATf;AAUEkN,yBAAS,EAAE;AAVb,eADgB,GAahB;AACEzU,oBAAI,EADN;AAEEkW,uBAAO,qBAFT,eAES,CAFT;AAGE6H,0BAAU,EAHZ;AAIEC,yBAAS,EAJX;AAKEqF,2BAAW,EAAE9b,UAAU,CAAVA,QALf;AAMEkN,yBAAS,EAAE;AANb,eAbAyO,CArFG,CA2GT;;AAEA3b,wBAAU,CAAVA,aAAwB;AACpBvH,oBAAI,EADgB;AAEpBkW,uBAAO,EAAE,CAAC;AACNlW,sBAAI,EADE;AAENud,wBAAM,EAFA;AAGN5W,wBAAM,EAAEwc,iDAAaC;AAHf,iBAAD,CAFW;AAOpBrF,0BAAU,EAPU;AAQpBC,yBAAS,EARW;AASpBqF,2BAAW,EAAE9b,UAAU,CAAVA,QATO;AAUpBkN,yBAAS,EAAE;AAVS,eAAxBlN;AAaMwM,oBA1HG,GA0HM,UAAU,CAAV,YAAuB,kBAAM;AAAA,uBAAIpB,MAAM,CAANA,SAAJ;AA1HnC,eA0HM,CAAToB;AACAuP,6BA3HG,GA2He,MAAM,CAAN,OAAc;AAAA,uBAA+BC,WAAW,GAA1C;AA3H7B,eA2He,CAAlBD;AAEN/b,wBAAU,CAAVA,YAAuB,kBAAM;AAAA,uBAAIoL,MAAM,CAANA,kBAAJ;AAA7BpL;AAEAyL,oBAAM,CAANA,gBAAuB,UAAU,CAAV,eAA0B,kBAAM;AAAA,uBAAIL,MAAM,CAANA,SAAJ;AAAhC,iBAAvBK;AAEAA,oBAAM,CAANA,cAAqBzL,UAAU,CAAVA,QAArByL;AACAA,oBAAM,CAANA,cAAqB,UAAU,CAAV,YAAuB,kBAAM;AAAA,uBAAIL,MAAM,CAAV;AAAlDK,eAAqB,CAArBA;AAlIS,gDAoIF;AAAEwQ,iCAAiB,EAAnB;AAAiCC,iCAAiB,EAAlD;AAAgEC,6BAAa,EAAE1Q;AAA/E,eApIE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJ6M,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AAuIA,SAAOA,IAAP;AAzIG,E;;;;;;;;;;;;;;;;;;;;;;;;ACZP;AAEA;AACA;AACA;AAEA;AAEO,IAAM8D,gBAAgB,GAAG,SAAnBA,gBAAmB,qBAAwB;AAEpD,MAAM3tB,MAAM,GAAG4tB,WAAW,CAA1B,SAAeA,EAAf;AACM5tB,QAAM,CAANA,mBAA0BA,MAAM,CAANA,oBAA2ByG,oFAArDzG;AAEN,MAAM6tB,mBAAmB,GAAzB;AAEA,MAAMnd,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAMC,MAAM,GAAGmd,KAAK,CAALA,cAAf,aAAeA,CAAf;AACMnd,QAAM,CAANA;AAENC,uEAAc,KAAKF,QAAQ,CAAb,SAAdE,MAAc,CAAdA;AAEA,MAAMmd,KAAK,GAAGpd,MAAM,CAANA,iBAAd,qDAAcA,CAAd;;AAEA,MAAG3Q,MAAM,CAANA,MAAH,YAA4B;AACxB+tB,SAAK,CAALA,QAAc,gBAAQ;AAClB,UAAMC,QAAQ,GAAGlkB,IAAI,CAAJA,cAAjB;;AACA,UAAGxC,8CAAQ,WAAW,MAAM,CAAN,qBAA4B,iBAAK;AAAA,eAAIpH,KAAK,CAAT;AAAvD,OAAsB,CAAX,CAAX,EAAuE;AACnE4J,YAAI,CAAJA;AACH;AAJLikB;AAMH;;AAEDjd,YAAU,CAAC,YAAM;AACb,QAAMmd,SAAS,GAAGH,KAAK,CAALA,cAAlB,cAAkBA,CAAlB;AACA,QAAG,CAAH,WAAe;;AACf,QAAGzuB,mEAAH,sBAAGA,CAAH,EAAsD;AAClD4uB,eAAS,CAATA;AACH;AALK,KAAVnd,GAAU,CAAVA;AAQA9Q,QAAM,CAANA;AAEA+tB,OAAK,CAALA,QAAc,oBAAY;AACtBG,YAAQ,CAARA,0BAAmC,iBAAS;AAExCluB,YAAM,CAANA;AAEA,UAAMmuB,MAAM,GAAGC,KAAK,CAApB;AACA,UAAMJ,QAAQ,GAAGG,MAAM,CAANA,cAAjB;AACA,UAAME,UAAU,GAAGF,MAAM,CAANA,cAAnB;;AAEA,UAAG,MAAM,CAAN,sBAA6B,iBAAK;AAAA,eAAIjuB,KAAK,CAALA,OAAJ;AAArC,OAAG,CAAH,EAAiE;AAE7D,YAAG8tB,QAAQ,KAAX,SAAyB;AACrBG,gBAAM,CAANA;AACH;;AACD,YAAGnuB,MAAM,CAANA,0BAAH,GAAuC;AACnCmuB,gBAAM,CAANA;AACAnuB,gBAAM,CAANA,mBAA0B,MAAM,CAAN,wBAA+B,iBAAK;AAAA,mBAAIE,KAAK,CAALA,OAAJ;AAA9DF,WAA0B,CAA1BA;AACH;AARL,aAUO;AAEH,YAAGguB,QAAQ,KAAX,SAAyB;AACrBG,gBAAM,CAANA;AACH;;AACDA,cAAM,CAANA;AAEAnuB,cAAM,CAANA,sBACI;AACIoE,YAAE,EADN;AAEIqjB,gBAAM,EAAE4G;AAFZ,SADJruB;AAMH;;AAED4tB,iBAAW,CAAXA;AACAA,iBAAW,CAAXA;AAlCJM;AADJH;AAuCAH,aAAW,CAAXA;AAEAjf,UAAQ,CAARA;AA7EG,E;;;;;;;;;;;;;;;;;;;ACRP;AAEO,IAAM2f,SAAS,GAAG,SAAZA,SAAY,eAAiC;AAAA,MAAlBC,MAAkB,uEAAT,IAAS;AAEtD,MAAMC,MAAM,GAAG7f,QAAQ,CAARA,cAAf,8BAAeA,CAAf;;AAEA,MAAM8f,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAE1B;AAEI;AAEA;;AAEA;AAEI,YAAMC,aAAa,GAAG,SAAhBA,aAAgB,cAAe;AACjC;AADJ;;AAIA,YAAG1uB,MAAM,CAANA,MAAH,cAA8B;AAC1BwuB,gBAAM,CAANA,YAAmBxuB,MAAM,CAANA,iCACbA,MAAM,CAANA,MADaA,gBAEbA,MAAM,CAANA,kBACIA,MAAM,CAANA,MADJA,kBAEI0uB,aAAa,CAAC1uB,MAAM,CAANA,MAJxBwuB,eAIuB,CAJvBA;AAKH;;AACD;;AAEJ;AAEIA,cAAM,CAANA;AACA,YAAIT,KAAK,GAAT;;AACA,YAAG/tB,MAAM,CAANA,0BAAH,GAAuC;AACnCA,gBAAM,CAANA,yBAAgC,iBAAS;AACrC,gBAAM8J,IAAI,GAAG6kB,wEAAe,CAACzuB,KAAK,CAAlC,EAA4B,CAA5B;AACA6tB,iBAAK,IAALA;AAFJ/tB;AAIAwuB,gBAAM,CAANA;AALJ,eAMO;AACHA,gBAAM,CAANA;AACH;;AACD;;AAEJ;AAEI,YAAGxuB,MAAM,CAANA,aAAH,KAA4B;AACxBwuB,gBAAM,CAANA,YAAmBxuB,MAAM,CAANA,oBAAnBwuB;AADJ,eAEO;AACHA,gBAAM,CAANA;AACH;;AACD;AA3CR;AAFJ;;AAiDA;AArDG,E;;;;;;;;;;;;;;;;;;ACFA,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,uCAA0C;AAEnE,MAAG,CAAH,UAAc;AAEd,MAAMhU,KAAK,GAAG;AAAEtO,YAAQ,EAAEuiB,gBAAgB,KAAhBA,mBAAwC;AAApD,GAAd;AAEA,MAAIC,aAAa,GAAGC,QAAQ,CAARA,cAApB,KAAoBA,CAApB;AACA,MAAIC,QAAQ,GAAGD,QAAQ,CAARA,4BAAf,WAAeA,CAAf;AACA,MAAIE,SAAS,GAAGF,QAAQ,CAARA,4BAAhB,YAAgBA,CAAhB;;AAEA,MAAMG,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAEnB,YAAOtU,KAAK,CAAZ;AACI;AACIkU,qBAAa,CAAbA;AACAA,qBAAa,CAAbA;AACAE,gBAAQ,CAARA;AACAC,iBAAS,CAATA;AACArU,aAAK,CAALA;AACA;;AACJ;AACIkU,qBAAa,CAAbA;AACAA,qBAAa,CAAbA;AACAE,gBAAQ,CAARA;AACAC,iBAAS,CAATA;AACArU,aAAK,CAALA;AACA;AAdR;;AAgBAhM,YAAQ,CAACgM,KAAK,CAAdhM,QAAQ,CAARA;AAlBJ;;AAqBAsgB,UAAQ;AAERH,UAAQ,CAARA,0BAAmC,iBAAS;AACxCG,YAAQ;AADZH;AAjCG,E;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AAEA;AACA;AAEO,IAAMI,kBAAkB,GAAG,SAArBA,kBAAqB,OAAQ;AAEtC,MAAM9N,KAAK,GAAG,+EAAd,IAAc,CAAd;AAEAA,OAAK,CAALA;;AAEA,MAAM+N,oBAAoB,GAAG,SAAvBA,oBAAuB,IAAK;AAE9B/N,SAAK,CAALA,cAAoBlZ,QAAQ,CAACkZ,KAAK,CAALA,4BAATlZ,MAAQ,CAARA,KAApBkZ;;AACA,QAAGA,KAAK,CAAR,aAAsB;AAClBA,WAAK,CAALA;AADJ,WAEO;AACHA,WAAK,CAALA;AACH;;AACD,QAAMgO,IAAI,GAAG,KAAK,CAAL,WAAiB,gBAAI;AAAA,aAAIA,IAAI,CAAJA,gBAAqBhO,KAAK,CAALA,iBAAzB;AAAlC,KAAa,CAAb;AACA,cAASA,KAAK,CAALA,aAAmBgO,IAAI,CAAvBhO;AACTA,SAAK,CAALA,eAAsB;AAAEiO,aAAO,EAAEjO,KAAK,CAAhB;AAAsCkO,aAAO,EAAEH;AAA/C,KAAtB/N;AAVJ;;AAaAA,OAAK,CAALA;;AAEA,MAAMmO,wBAAwB,GAAG,SAA3BA,wBAA2B,IAAK;AAElC;;AAEA,QAAGnO,KAAK,CAALA,oBAA0BA,KAAK,CAALA,4BAA7B,GAAkE;AAC9DoO,cAAQ,GAAGpO,KAAK,CAALA,WAAiB7F,+EAAjB6F,OAAXoO;AADJ,WAEO;AACHA,cAAQ,GAAGpO,KAAK,CAALA,0BAAXoO;AACH;;AAEDpO,SAAK,CAALA,mCAAyCA,KAAK,CAA9CA;AACAA,SAAK,CAALA,eAAsB;AAAEiO,aAAO,EAAEjO,KAAK,CAAhB;AAA0CkO,aAAO,EAAEC;AAAnD,KAAtBnO;AAXJ;;AAcAA,OAAK,CAALA;;AAEAA,OAAK,CAALA,8BAAoC,sBAAc;AAC9CqO,yBAAqB,CAArBA,QAA8B,oBAAQ;AAAA,aAAIlnB,QAAQ,CAAZ,UAAY,CAAZ;AAAtCknB;AACAA,yBAAqB,CAArBA;AAFJrO;AArCG;AA2CP,IAAMqO,qBAAqB,GAA3B;AAEO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,WAAY;AAC5CD,uBAAqB,CAArBA;AACAA,uBAAqB,CAArBA;AAFG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClDP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,IAAaE,WAAb;AAEE,6BAAkB;AAAA;;AAAA;;AAEd;AAEA,iBAAa,CACT;AAAE7wB,YAAM,EAAR;AAAaqC,WAAK,EAAE;AAApB,KADS,EAET;AAAErC,YAAM,EAAR;AAAaqC,WAAK,EAAlB;AAAsC6B,iBAAW,EAAjD;AAAiE4sB,cAAQ,EAAzE;AAA+EC,cAAQ,EAAvF;AAA+FC,eAAS,EAAxG;AACIC,eAAS,EAAE,CACP;AAAE5rB,UAAE,EAAEoX,kFAAN;AAAqC6T,YAAI,EAAE;AAA3C,OADO,EAEP;AAAEjrB,UAAE,EAAEoX,8EAAN;AAAiC6T,YAAI,EAAE;AAAvC,OAFO,EAGP;AAAEjrB,UAAE,EAAEoX,gFAAN;AAAmC6T,YAAI,EAAE;AAAzC,OAHO;AADf,KAFS,EAQT;AAAEtwB,YAAM,EAAR;AAAaqC,WAAK,EAAlB;AAAsC6B,iBAAW,EAAjD;AAA+D4sB,cAAQ,EAAvE;AAAiFJ,cAAQ,EAAzF;AAAyGK,cAAQ,EAAjH;AAAyHC,eAAS,EAAC;AAAnI,KARS,EAST;AAAEhxB,YAAM,EAAR;AAAaqC,WAAK,EAAlB;AAAsC6B,iBAAW,EAAjD;AAA6D4sB,cAAQ,EAArE;AAAkFJ,cAAQ,EAA1F;AAA0GK,cAAQ,EAAlH;AAA0HC,eAAS,EAAC;AAApI,KATS,EAUT;AAAEhxB,YAAM,EAAR;AAAaqC,WAAK,EAAlB;AAAsC6B,iBAAW,EAAjD;AAA2D4sB,cAAQ,EAAnE;AAAgFC,cAAQ,EAAxF;AAAgGC,eAAS,EAAC;AAA1G,KAVS,EAWT;AAAEhxB,YAAM,EAAR;AAAaqC,WAAK,EAAlB;AAAsC6B,iBAAW,EAAjD;AAA8D4sB,cAAQ,EAAtE;AAAsFC,cAAQ,EAA9F;AAAsGC,eAAS,EAAC;AAAhH,KAXS,CAAb;AAcA,uBAAmB,gBAAgB,aAAC;AAAA,aAAIE,CAAC,CAADA,UAAJ;AAApC,KAAmB,CAAnB;AAEA,iBAAathB,QAAQ,CAARA,eAAb,aAAaA,CAAb;AAEA,QAAG,CAAC,KAAJ,OAAgB;AAEhB,sBAAkB,yBAAlB,wBAAkB,CAAlB;AACA,+BAA2B,yBAA3B,4BAA2B,CAA3B;AACA,yBAAqB,4BAArB,sCAAqB,CAArB;AAEA,mCAA+B,yBAA/B,UAA+B,CAA/B;AACA,iCAA6B,yBAA7B,iBAA6B,CAA7B;AAEA,sBAAkB,yBAAlB,mBAAkB,CAAlB;AAEA,+BAA2B,yBAA3B,WAA2B,CAA3B;AACA,6BAAyB,yBAAzB,kBAAyB,CAAzB;AAEA,+BAA2B,qBAAc;AACrCuhB,QAAE,CAAFA,YAAe,KAAI,CAAJ,aAAfA;AADJ;AAIA,kBAAc,eAAe/kB,0DAA7B;;AAEA,qBAAiB,YAAM;AACnB,aAAO,KAAI,CAAX;AADJ;;AAIA,qBAAiB,kBAAY;AACzB,WAAI,CAAJ;AACAK;AAFJ;;AAKA,0BAAsB,YAAM;AACxB,aAAO,KAAI,CAAX;AADJ;;AAIA,0BAAsB,gBAAQ;AAC1B,WAAI,CAAJ,cAAmB,KAAI,CAAJ,WAAgB,aAAC;AAAA,eAAIykB,CAAC,CAADA,WAAJ;AAApC,OAAmB,CAAnB;AADJ;;AAIA,gBAAY9kB,0DAAZ;AACH;;AA9DH;AAAA;AAAA,6CAgE2B;AAAA;;AAErB,UAAG,CAAH,UAAc;AAEd,UAAMwF,MAAM,GAAG,yBAAf,yBAAe,CAAf;AACMA,YAAM,CAANA;AACN,UAAMD,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,cAAQ,CAARA;AACN,UAAMzN,WAAW,GAAG,gBAAgB,gBAAI;AAAA,eAAIosB,IAAI,CAAJA,WAAgB,MAAI,CAAJ,YAApB;AAApB,SAApB;AAEAze,2EAAc,CAAC;AAAEmf,iBAAS,EAAEF,QAAQ,CAACE;AAAtB,OAAD,EAAoCrf,QAAQ,CAA5C,SAAdE,MAAc,CAAdA;AAEA,UAAMuf,OAAO,GAAG,yBAAhB,kBAAgB,CAAhB;;AAEA;AACI;AACIA,iBAAO,CAAPA;AACAC,kHAA0B,CAA1BA,IAA0B,CAA1BA;AACA;;AACJ;AACID,iBAAO,CAAPA;;AACA,kBAAO,KAAP;AACI,iBAAK3U,kFAAL;AACI6U,4FAAc,CAAC,KAAD,OAAdA,IAAc,CAAdA;AACA;;AACJ,iBAAK7U,8EAAL;AACI8U,6FAAc,CAAC,KAAD,OAAdA,IAAc,CAAdA;AACA;;AACJ,iBAAK9U,gFAAL;AACI,kBAAM+U,UAAU,GAAG,yBAAnB,YAAmB,CAAnB;AACMA,wBAAU,CAAVA;AACN5hB,sBAAQ,CAARA;AACA6hB,uGAAmB,CAAC;AAChBC,yBAAS,EAAE,KADK;AAEhBzwB,sBAAM,EAAE,KAFQ;AAGhB0wB,yBAAS,EAAE,KAAKA;AAHA,eAAD,EAIhB,yBAJHF,aAIG,CAJgB,CAAnBA;AAKA,kBAAMpvB,KAAK,GAAG,yBAAd,kBAAc,CAAd;AACMA,mBAAK,CAALA;AACN;AAlBR;;AAoBA;;AACJ;AACI+uB,iBAAO,CAAPA;AACAxC,4FAAgB,CAAC,KAAD,OAAhBA,IAAgB,CAAhBA;AACA;;AACJ;AACI7c,oBAAU,CAAC,YAAM;AACf6f,qGAAgB,CAAhBA,MAAgB,CAAhBA;AADF7f,WAAU,CAAVA;AAGA;AApCR;AAsCH;AApHH;AAAA;AAAA,sDAsHgE;AAAA;;AAAA,UAA5B8f,MAA4B,uEAAnB,IAAmB;AAAA,UAAb7W,IAAa,uEAAN,IAAM;AAE1D,yBAAmBA,IAAI,IAAI,gBAAgB,aAAC;AAAA,eAAIkW,CAAC,CAADA,WAAJ;AAA5C,OAA2B,CAA3B;;AAEA,UAAGW,MAAM,KAAKpV,gFAAd,EAA2C;AACvC,2BAAmB,WAAnB,CAAmB,CAAnB;AACH;;AAED;AACA,oBAAcoV,MAAM,IAAI,KAAxB;;AAEA,UAAG,KAAH,aAAsB;AAClB,2BAAmB;AAAE7xB,gBAAM,EAAE;AAAV,SAAnB;AACH;;AAAA;AAED,UAAG,CAAC,KAAJ,YAAqB;AAErB,kCAA4B,iBAA5B;AACA,yCAAmC,iBAAnC;AAEA,iCAA2B,qBAAc;AAErCmxB,UAAE,CAAFA;;AAEA,YAAGze,KAAK,GAALA,MAAc,MAAI,CAAJ,YAAjB,QAA0C;AACtCye,YAAE,CAAFA;;AACA,eAAI,IAAI/qB,CAAC,GAAT,GAAeA,CAAC,GAAhB,OAA0BA,CAA1B,IAA+B;AAC3B,kBAAI,CAAJ;AACH;AACJ;AATL;AAYA,0BAAoB,gBAAgB,gBAAI;AAAA,eAAIkqB,IAAI,CAAJA,WAAgB,MAAI,CAAJ,YAApB;AAAxC,OAAoB,CAApB;;AAEA,UAAG,4BAAH,GAAkC;AAC9B;AACA;AACA;AACA;AACA;AALJ,aAMO;AACH;AACA;AACA;AACA;AACA,kDAA0C,iBAA1C;AACA;AACA,YAAMwB,sBAAsB,GAAG,4BACO,gBAAgB,aAAC;AAAA,iBAAIZ,CAAC,CAADA,gBAAkB,MAAI,CAAJ,YAAtB;AADxB,SACO,CADP,GAEO,gBAAgB,aAAC;AAAA,iBAAIA,CAAC,CAADA,WAAc,MAAI,CAAJ,qBAAlB;AAFvD,SAEsC,CAFtC;;AAKA,YAAG,iCAAH,GAAuC;AACnC,iDAAuC,gBAAgBzU,gFAAhB,GACjC,cADiC,cAEjC,cAFN;AADJ,eAIO;AACH,iDAAuCqV,sBAAsB,CAA7D;AACH;AACJ;AACJ;AAlLH;AAAA;AAAA,sDAoLoC;AAC9BvC,wFAAS,CAACtuB,MAAM,IAAI,KAAX,SAAW,EAAX,EAATsuB,eAAS,CAATA;AACH;AAtLH;;AAAA;AAAA;AAuLC,C;;;;;;;;;;;;;;;;;;;;;;;;ACrMD;AACA;AACA;AACA;AAEA;AAEO,IAAMgC,cAAc,GAAG,SAAjBA,cAAiB,qBAAwB;AAElD,MAAMtwB,MAAM,GAAG4tB,WAAW,CAA1B,SAAeA,EAAf;AAEA,MAAMld,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEA+B,UAAQ,CAARA;AAEA1Q,QAAM,CAANA,kBAAyBwb,gFAAzBxb;;AACA,MAAGA,MAAM,CAANA,qBAAH,SAAwC;AACpC,QAAGA,MAAM,CAANA,uBAAH,QAAyC;AACrCA,YAAM,CAANA;AACA4tB,iBAAW,CAAXA;AACH;;AACDA,eAAW,CAAXA;AACH;;AAED,MAAMjd,MAAM,GAAGmd,KAAK,CAALA,cAAf,aAAeA,CAAf;AACMnd,QAAM,CAANA;AAENC,uEAAc,KAAMF,QAAQ,CAAd,SAAdE,MAAc,CAAdA;AAEAjC,UAAQ,CAARA;AAEA;AAEA,MAAMrC,QAAQ,GAAGtM,MAAM,CAANA,4CAAjB;AAEA,MAAI8wB,MAAM,GAAV;AAEA,MAAMC,iBAAiB,GAAGpgB,MAAM,CAANA,cAA1B,gBAA0BA,CAA1B;AACMogB,mBAAiB,CAAjBA;;AAEN,MAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,IAAK;AAClCD,qBAAiB,CAAjBA;AACAE,mBAAe,GAAGC,8EAAgB,mEAAlCD,EAAkC,CAAlCA;AAFJ;;AAKAF,mBAAiB,CAAjBA;AAEAA,mBAAiB,CAAjBA,0BAA4C,aAAK;AAC7CI,KAAC,CAADA;AADJJ;AAIAA,mBAAiB,CAAjBA,0BAA4C,aAAK;AAC7CI,KAAC,CAADA,8BAAgCA,CAAC,CAAjCA;AADJJ;AAIApiB,UAAQ,CAARA,sDAA+D,aAAK;AAChEwiB,KAAC,CAADA;;AACA,QAAGJ,iBAAiB,CAAjBA,UAAH,IAAmC;AAC/BK,gBAAU,8BAAVA,eAAU,CAAVA;AACH;AAJLziB;;AAOA,MAAG3O,MAAM,CAAT,gBAA0B;AACtB+wB,qBAAiB,CAAjBA,6BAA+C,aAAK;AAChD,UAAMN,SAAS,GAAG9hB,QAAQ,CAARA,cAAlB,sCAAkBA,CAAlB;;AACI,qBAAc;AACVmC,kBAAU,CAAC,YAAM;AACbsgB,oBAAU,8BAAVA,eAAU,CAAVA;AADJtgB,SAAU,CAAVA;AAGAqgB,SAAC,CAADA;AACH;AAPTJ;AASH;;AAED,MAAMhC,QAAQ,GAAGpe,MAAM,CAANA,cAAjB,qBAAiBA,CAAjB;;AAEA,MAAM0gB,cAAc,GAAG,SAAjBA,cAAiB,WAAY;AAE/BP,UAAM,GAAGxkB,QAAQ,KAARA,mBAATwkB;AAEA,QAAMpmB,IAAI,GAAG4B,QAAQ,KAARA,0BAAb;AACA,QAAM1F,KAAK,GAAG0F,QAAQ,KAARA,qBAAd;AAEAtM,UAAM,CAANA;AACAA,UAAM,CAANA;AAEA4tB,eAAW,CAAXA;AAVJ;;AAaAgB,+FAAa,qBAAbA,cAAa,CAAbA;AAlFG;;AAqFP,IAAMwC,UAAU,GAAG,SAAbA,UAAa,+CAAkD;AAEjE,MAAMhiB,KAAK,GAAGuB,MAAM,CAANA,cAAd,gBAAcA,CAAd;;AACA,MAAI3Q,MAAM,CAAV,gBAA2B;AACvBoP,SAAK,CAALA;AACAA,SAAK,CAALA;AACH;;AACD,MAAMrR,GAAG,GAAGqR,KAAK,CAAjB;AACA,MAAMhL,EAAE,GAAGgL,KAAK,CAAhB;AACApP,QAAM,CAANA;AACAA,QAAM,CAANA;;AAEA,MAAIjC,GAAG,KAAP,IAAgB;AACZiC,UAAM,CAANA;AACA4tB,eAAW,CAAXA;AACAA,eAAW,CAAXA;AACAjd,UAAM,CAANA;;AACA,yBAAqB,CACjB;AACH;AACJ;AApBL,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5FA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEO,IAAMggB,gBAAgB,GAAG,SAAnBA,gBAAmB,cAAe;AAAA,MAEnC3wB,MAFmC,GAET4tB,WAFS;AAAA,MAE3BE,KAF2B,GAETF,WAFS;AAAA,MAEpBgD,MAFoB,GAEThD,WAFS;;AAAA,wBAGnBziB,yDAHmB;AAAA,MAGnCmG,WAHmC;;AAK3C,MAAMZ,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAMC,MAAM,GAAGmd,KAAK,CAALA,cAAf,yBAAeA,CAAf;AAEAld,uEAAc,KAAMF,QAAQ,CAAd,SAAdE,MAAc,CAAdA;AAEA,MAAM0gB,QAAQ,GAAG3iB,QAAQ,CAARA,cAAjB,sBAAiBA,CAAjB;AAEA,MAAIuM,KAAK,GAAT;AAEA,MAAMqW,QAAQ,GAAGC,WAAW,CAAC,YAAM;AACjCtW,SAAK,GAAGA,KAAK,KAAKlb,MAAM,CAANA,iBAAVkb,aAARA;AACAoW,YAAQ,CAARA,+BAAiCtxB,MAAM,CAANA,wBAAjCsxB;AACApW,SAAK;AAHqB,KAA5B,IAA4B,CAA5B;AAMA,MAAMuW,mBAAmB,GAAG3D,KAAK,CAALA,cAA5B,WAA4BA,CAA5B;AACA,MAAM4D,aAAa,GAAGD,mBAAmB,CAAnBA,cAAtB,KAAsBA,CAAtB;AACMC,eAAa,CAAbA;AAEN,MAAMC,IAAI,GAAG7D,KAAK,CAALA,cAAb,4BAAaA,CAAb;AACA,MAAM8D,YAAY,GAAGD,IAAI,CAAJA,cAArB,KAAqBA,CAArB;AACMC,cAAY,CAAZA;;AAEN,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,aAAc;AAExC,QAAI;AAEF,UAAGzxB,UAAU,IAAIA,UAAU,CAAxBA,SAAkCA,UAAU,CAAVA,iBAArC,GAAoE;AAChEkxB,gBAAQ,CAARA;AACA;AACH;;AAEDnX,kBAAY,CAAZA,QAAY,CAAZA;AAEAzJ,cAAQ,CAARA;AAEA4gB,cAAQ,CAARA;AAEAlxB,gBAAU,CAAVA,OAAkB,UAAU,CAAV,qBAAgC,iBAAK;AAAA,eAAIF,KAAK,CAAT;AAArC,cAAlBE,IAAkB,CAAlBA;AAEAwQ,2EAAc,CAAC;AAAExQ,kBAAU,EAAVA;AAAF,OAAD,EAAiBsQ,QAAQ,CAAzB,SAAdE,QAAc,CAAdA;AAEA,UAAM9G,IAAI,GAAGgkB,KAAK,CAALA,cAAb,WAAaA,CAAb;AACMhkB,UAAI,CAAJA;AAENgH,gBAAU,CAAC,YAAM;AACf2gB,2BAAmB,CAAnBA,0BAA8C,aAAK;AAE7C3gB,oBAAU,uEAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAIP9Q,MAAM,CAANA,MAJO;AAAA;AAAA;AAAA;;AAMNI,8BAAU,CAAVA,QAAmB,UAAU,CAAV,aAAwB,gBAAQ;AAC/C,6BAAOkH,+CAAQ,CAAC7I,IAAI,CAAL,MAAY,MAAM,CAAN,kBAAyB,cAAE;AAAA,+BAAIuE,EAAE,CAAN;AAAtD,uBAA2B,CAAZ,CAAf;AADJ5C,qBAAmB,CAAnBA;AANM;AAAA,2BAUA,oGAAiC;AACnC0xB,iCAAW,EAAEtW,+FADsB;AAEnCuW,iCAAW,EAAE;AAAE/xB,8BAAM,EAAR;AAAUI,kCAAU,EAAVA;AAAV;AAFsB,qBAAjC,CAVA;;AAAA;AAgBV,wBAAG+H,QAAQ,CAACspB,mBAAmB,CAAnBA,QAATtpB,MAAQ,CAARA,KAAH,GAAuD;AACnDylB,iCAAW,CAAXA;AACArN;AACIyR,sCAH+C,GAG5BC,yDAAkBtjB,QAAQ,CAARA,eAHU,aAGVA,CAAlBsjB,CAAnBD;AACJA,sCAAgB,CAAhBA;AACArjB,8BAAQ,CAARA;AACH;;AAtBS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAZmC,WAAU,GAAVA;AAFN2gB;AADF3gB,OAAU,CAAVA;AA8BA1P,WAAK,CAALA;AAEA,UAAM8wB,WAAW,GAAGpE,KAAK,CAALA,cAApB,kBAAoBA,CAApB;AACMoE,iBAAW,CAAXA,0BAAsC,aAAK;AACzC,YAAMC,sBAAsB,GAAGrE,KAAK,CAALA,cAA/B,gCAA+BA,CAA/B;AACMqE,8BAAsB,CAAtBA;AACAA,8BAAsB,CAAtBA;AACAA,8BAAsB,CAAtBA;AACAD,mBAAW,CAAXA;AAENE,2GAAoB,qDAAqDhyB,UAAU,CAAnFgyB,KAAoB,CAApBA;AAEA,YAAMC,sBAAsB,GAAGvE,KAAK,CAALA,cAA/B,2BAA+BA,CAA/B;AACMuE,8BAAsB,CAAtBA;AACAA,8BAAsB,CAAtBA,6BAAoD,aAAK;AACrD,cAAMroB,IAAI,GAAGmnB,CAAC,CAADA,OAAb;AACAnxB,gBAAM,CAANA;AACAI,oBAAU,CAAVA;AACAkyB,8GAAkC;AAAER,uBAAW,EAAEtW,uFAAf;AAAoDuW,uBAAW,EAAE;AAAE3xB,wBAAU,EAAZ;AAAcJ,oBAAM,EAANA;AAAd;AAAjE,WAAlCsyB;AAJJD;AAXRH;AAoBNR,mBAAa,CAAbA;AACAE,kBAAY,CAAZA;AA1EF,MA4EI,UAAS;AACTlrB,cAAQ,sBAARA,CAAQ,CAARA;AACD;AAhFL;;AAmFA,MAAM6rB,UAAU;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAET/gB,qBAFS,GAEC;AACZC,qBAAK,EADO;AAEZC,8BAAc,EAAE;AAFJ,eAAVF;AAFS;AAAA,qBAOM,oGAAiC;AAClDsgB,2BAAW,EAAEtW,sFADqC;AAElDuW,2BAAW,EAAE;AACTS,kCAAgB,EADP;AAETC,gCAAc,EAFL;AAGTzyB,wBAAM,EAAE4tB,WAAW,CAAXA;AAHC;AAFqC,eAAjC,CAPN;;AAAA;AAOT5Q,oBAPS,iBAOTA,CAPS,CAgBf;;AAEM5c,wBAlBS,GAkBI4c,MAAM,CAlBV,UAkBT5c;AACAA,wBAAU,CAAVA,QAAmBJ,MAAM,CAAzBI;AACAA,wBAAU,CAAVA;AAENyxB,iCAAmB,CAAnBA,UAAmB,CAAnBA;;AAEMa,6BAxBS,GAwBS,SAAlBA,eAAkB,IAAK;AAC7B,oBAAIC,CAAC,GAAGxtB,CAAC,GAAT;AAAA,oBACIytB,CAAC,GAAGztB,CAAC,GADT;;AAEA,oBAAIwtB,CAAC,IAADA,KAAUC,CAAC,IAAf,IAAuB;AACnB,yBAAOztB,CAAC,GAAR;AACH;;AACD,oBAAIwtB,CAAC,IAADA,KAAUC,CAAC,IAAf,IAAuB;AACnB,yBAAOztB,CAAC,GAAR;AACH;;AACD,oBAAIwtB,CAAC,IAADA,KAAUC,CAAC,IAAf,IAAuB;AACnB,yBAAOztB,CAAC,GAAR;AACH;;AACD,uBAAOA,CAAC,GAAR;AApCe,eAwBTutB;;AAiBA9jB,sBAzCS,GAyCE,SAAXA,QAAW,UAAW;AACxB,8BAAa;AACT0iB,0BAAQ,CAARA,6BAA+BoB,eAAe,CAACjjB,OAAO,CAAtD6hB,IAA8C,CAA9CA,yBAA2E7hB,OAAO,CAAlF6hB;AADJ,uBAEO;AACH1rB,6BAAW,CAAXA,QAAW,CAAXA;AACH;AA9CU,eAyCTgJ;;AAQNhJ,yBAAW,GAAGE,mEAAoB,CAAlCF,QAAkC,CAAlCA;;AAjDe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAV2sB,UAAU;AAAA;AAAA;AAAhB,GAAgB,EAAhB;;AAoDAvyB,QAAM,CAANA;;AAEA;AAEI,SAAKwb,iFAAL;AACI+W,gBAAU,iCACH,WAAW,CAAX,KAAiB,aAAC;AAAA,eAAIjX,CAAC,CAADA,cAAJ;AADf,OACH,CADG;AAENtR,YAAI,EAAEhK,MAAM,CAANA,YAFA;AAGNyE,YAAI,EAAE,MAAM,CAAN,qBAA4B,aAAC;AAAA,iBAAIU,CAAC,CAAL;AAA7B,gBAHA,IAGA,CAHA;AAINkc,aAAK,EAAErhB,MAAM,CAJP;AAKNH,gBAAQ,EAAEG,MAAM,CALV;AAMNoE,UAAE,EAAEkN,WAAW,CAAXA,SANE,OAM2B;;AAN3B,SAAVihB;AAQA;;AAEJ,SAAK/W,6EAAL;AACI+W,gBAAU,iCACH,WAAW,CAAX,KAAiB,aAAC;AAAA,eAAIjX,CAAC,CAADA,cAAJ;AADf,OACH,CADG;AAENtR,YAAI,YAAKhK,MAAM,CAANA,aAAL,KAFE,iBAEF,CAFE;AAGNyE,YAAI,EAAE,MAAM,CAAN,qBAA4B,aAAC;AAAA,iBAAIU,CAAC,CAAL;AAA7B,gBAHA,IAGA,CAHA;AAINsB,kBAAU,EAAEzG,MAAM,CAANA,MAJN;AAKNoE,UAAE,EAAEkN,WAAW,CAAXA,SAAqB;AALnB,SAAVihB;AAOA;;AAEJ,SAAK/W,+EAAL;AAEI,UAAMqX,UAAU;AAAA,4EAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,qCAEQ1nB,yDAFR,EAEP/K,UAFO;AAIX0yB,oCAJW,QAIXA;;AAEJ,sBAAG1yB,UAAU,CAAb,OAAqB;AACjB0yB,sCAAkB,GAAG,UAAU,CAAV,UAAqB,aAAC;AAAA,6BAAI3tB,CAAC,CAAL;AAAtB,6BAAwC,eAAG;AAAA,6BAAI,MAAM,CAAN,kBAAyB,aAAC;AAAA,+BAAI8qB,CAAC,CAAL;AAA1B,kCAAJ,GAAI,CAAJ;AAAhE6C,qBAAqB,CAArBA;AACH;;AARc;AAAA;AAAA;AAAA;;AAaXN,kCAAgB,GAAhBA;AAbW;AAAA,yBAcL,oGAAiC;AACnCV,+BAAW,EAAEtW,+FADsB;AAEnCuW,+BAAW,EAAE;AACTgB,mCAAa,EADJ;AACctF,uCAAiB,EAAE+E;AADjC;AAFsB,mBAAjC,CAdK;;AAAA;AAAA;AAAA;;AAAA;AAqBXA,kCAAgB,mCACT,WAAW,CAAX,KAAiB,aAAC;AAAA,2BAAIlX,CAAC,CAADA,cAAJ;AADT,mBACT,CADS;AAEZnc,2BAAO,EAAEa,MAAM,CAANA,MAFG;AAGZoE,sBAAE,EAAEkN,WAAW,CAAXA,SAHQ;AAIZtH,wBAAI,EAJQ;AAKZgpB,4BAAQ,EALI;AAMZC,yBAAK,EANO;AAOZzwB,yBAAK,EAAE;AAPK,oBAAhBgwB;;AArBW;AAgCfD,4BAAU,CAAVA,gBAAU,CAAVA;;AAhCe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,wBAAVM,UAAU;AAAA;AAAA;AAAhB,OAAgB,EAAhB;;AAmCAA,gBAAU;AAEV;AA9DR;;AAiED,MAAMzxB,KAAK,GAAG0sB,KAAK,CAALA,cAAd,kBAAcA,CAAd;AACM1sB,OAAK,CAALA;AAzOF,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfP;AACA;AACA;AACA;AACA;AAEA;AACA;AAEO,IAAMivB,cAAc,GAAG,SAAjBA,cAAiB,qBAAwB;AAElD,MAAMrwB,MAAM,GAAG4tB,WAAW,CAA1B,SAAeA,EAAf;AAEAA,aAAW,CAAXA;AAEA,MAAIrM,aAAa,GAAGvhB,MAAM,CAANA,MAApB;AACA;AAEA,MAAM0Q,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AACN,MAAMC,MAAM,GAAGmd,KAAK,CAALA,cAAf,aAAeA,CAAf;AACMnd,QAAM,CAANA;AAEN3Q,QAAM,CAANA,gCAAuCA,MAAM,CAANA,iCAAwCA,MAAM,CAANA,OAA/EA;AACAA,QAAM,CAANA,kBAAyBwb,gFAAzBxb;;AAEA,MAAGA,MAAM,CAANA,aAAH,kBAAyC;AAErC,QAAMkzB,MAAM,GAAG,MAAM,CAAN,kCAAyC,iBAAK;AAAA,aAAIltB,KAAK,CAAT;AAA7D,KAAe,CAAf;AACA,QAAMmtB,gBAAgB,aAAMD,MAAM,CAAZ,CAAY,CAAZ,cAAmBA,MAAM,CAACA,MAAM,CAANA,SAAhD,CAA+C,CAAzB,CAAtB;AACA,QAAME,kBAAkB,GAAGpzB,MAAM,CAANA,MAA3B;AAEA4Q,yEAAc,CAAC;AAAEuiB,sBAAgB,EAAlB;AAAoBvR,iBAAW,EAAEwR;AAAjC,KAAD,EAAwD1iB,QAAQ,CAAhE,SAAdE,MAAc,CAAdA;AACH;;AAED,MAAMyiB,kBAAkB,GAAxB;AAEA,MAAMC,qBAAqB,GAAGxF,KAAK,CAALA,cAA9B,sBAA8BA,CAA9B;AACMwF,uBAAqB,CAArBA;;AA7B4C;AAAA;AAAA;;AAAA;AAAA,wFA+BlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAEIlF,mBAAK,CAALA;AACAkF,mCAAqB,CAArBA;AAHJ;AAAA,qBAIwBhmB,iDAAQ,SAJhC,IAIgC,CAJhC;;AAAA;AAIU1E,mBAJV,gBAIUA;AACN5I,oBAAM,CAANA;AACAA,oBAAM,CAANA;AACAA,oBAAM,CAANA,wBAA+B4I,KAAK,CAApC5I;AACAszB,mCAAqB,CAArBA;AAEA1F,yBAAW,CAAXA;AACAA,yBAAW,CAAXA;;AAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;AA/BkD;AAAA;AAAA;;AA6ClD0F,uBAAqB,CAArBA;AAEA,MAAMC,kBAAkB,GAAGzF,KAAK,CAALA,cAA3B,aAA2BA,CAA3B;AACMyF,oBAAkB,CAAlBA,cAAiCvzB,MAAM,CAANA,iFAAjCuzB;AAGAA,oBAAkB,CAnD0B,KAmD5CA,GAnD4C,CAqDlD;;AAEA,MAAMC,wBAAwB,GAAI,SAA5BA,wBAA4B,IAAK;AACnCD,sBAAkB,CAAlBA,gCADmC,wBACnCA,EADmC,CAEnC;;AACAtC,mBAAe,GAAGC,8EAAgB,iEAHC,OAGD,CAAlCD,CAHmC,CAInC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXJ;;AAcAsC,oBAAkB,CAAlBA;AAEAA,oBAAkB,CAAlBA,0BAA6C,aAAK;AAC9CpC,KAAC,CAADA;AADJoC;AAIAA,oBAAkB,CAAlBA,0BAA6C,aAAK;AAC9CpC,KAAC,CAADA,8BAAgCA,CAAC,CAAjCA;AADJoC;AAIA5kB,UAAQ,CAARA,0DAAmE,aAAK;AACpEwiB,KAAC,CAADA;;AACA,QAAGoC,kBAAkB,CAAlBA,UAAH,IAAoC;AAChCE,kBAAY,4CAAZA,WAAY,CAAZA;AACH;AAJL9kB;;AAOA,MAAG3O,MAAM,CAAT,gBAA0B;AACtBuzB,sBAAkB,CAAlBA,6BAAgD,aAAK;AACjD,UAAM9C,SAAS,GAAG9hB,QAAQ,CAARA,cAAlB,iCAAkBA,CAAlB;;AACI,qBAAc;AACVmC,kBAAU,CAAC,YAAM;AACb2iB,sBAAY,4CAAZA,WAAY,CAAZA;AADJ3iB,SAAU,CAAVA;AAGAqgB,SAAC,CAADA;AACH;AAPToC;AASH;;AAED,MAAIG,KAAK,GAAG1zB,MAAM,CAANA,MAAZ;AACA,MAAM2zB,QAAQ,GAAG7F,KAAK,CAALA,cAAjB,WAAiBA,CAAjB;AACM6F,UAAQ,CAARA;AAEN7F,OAAK,CAALA;AAEA,MAAM8F,MAAM,GAAG9F,KAAK,CAALA,cAAf,qBAAeA,CAAf;;AAEA,MAAM+F,YAAY,GAAI,SAAhBA,YAAgB,QAAS;AAC3BH,SAAK,GAAGtF,KAAK,CAALA,OAARsF;AACA1zB,UAAM,CAANA;AACA2zB,YAAQ,CAARA;AAEA/F,eAAW,CAAXA;AALJ;;AAQAgG,QAAM,CAANA;AAEAhG,aAAW,CAAXA,8CAA0D,iBAAS;AAC/D,yBACIqD,eAAe,CAAfA;AAFRrD;AAKA,MAAMmB,QAAQ,GAAGpe,MAAM,CAANA,cAAjB,wBAAiBA,CAAjB;;AAEA,MAAM0gB,cAAc,GAAG,SAAjBA,cAAiB,WAAY;AAE/B,QAAMrxB,MAAM,GAAG4tB,WAAW,CAA1B,SAAeA,EAAf;AAEA,QAAMkG,WAAW,GAAG9zB,MAAM,CAANA,aAApB;;AAEA,QAAGsM,QAAQ,KAAX,SAAyB;AACrBtM,YAAM,CAANA;AADJ,WAEO;AACHA,YAAM,CAANA;AACH;;AAED4tB,eAAW,CAAXA;;AAEA,QAAG5tB,MAAM,CAANA,sBAAH,aAA6C;AACzC4tB,iBAAW,CAAXA;AACH;AAhBL;;AAmBA,MAAMthB,QAAQ,GAAGtM,MAAM,CAANA,0CAAjB;AAEA4uB,+FAAa,qBAAbA,cAAa,CAAbA;AAEA,MAAMhN,WAAW,GAAGjT,QAAQ,CAARA,cAApB,4BAAoBA,CAApB;AACMiT,aAAW,CAAXA,2BAAuC,aAAK;AAC1C,QAAM5hB,MAAM,GAAG4tB,WAAW,CAA1B,SAAeA,EAAf;AACM5tB,UAAM,CAANA,oBAA2BmI,QAAQ,CAACyZ,WAAW,CAA/C5hB,KAAmC,CAAnCA;AACN4tB,eAAW,CAAXA;AAHFhM;AAnJH;;AA0JP,IAAM6R,YAAY,GAAG,SAAfA,YAAe,yDAA4D;AAE7E,MAAIM,YAAY,GAAGR,kBAAkB,CAArC;AACA,MAAIS,UAAU,GAAGT,kBAAkB,CAAnC;AAEAvzB,QAAM,CAANA;AACAA,QAAM,CAANA;AACAA,QAAM,CAANA;AAEAA,QAAM,CAANA;AACAA,QAAM,CAANA;;AAEA,MAAM4O,QAAQ,GAAG,SAAXA,QAAW,iBAAkB;AAC/B,QAAGqlB,cAAc,IAAIA,cAAc,CAAdA,SAArB,GAAgD;AAC5C,UAAMlsB,GAAG,GAAGksB,cAAc,CAAdA,CAAc,CAAdA,mBAAZ,GAAYA,EAAZ;;AACA,UAAMC,KAAI,GAAGD,cAAc,CAAdA,CAAc,CAAdA,mBAAb,GAAaA,EAAb;;AACAj0B,YAAM,CAANA,oBAA2B;AAAE+H,WAAG,EAAL;AAAO;AAAP,OAA3B/H;AAEAuzB,wBAAkB,CAAlBA;AAEA3F,iBAAW,CAAXA;AACAA,iBAAW,CAAXA;AACH;AAVL;;AAYApe,6DAAkB,aAAlBA,QAAkB,CAAlBA;AAEA;AA1BJ,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnKA;AAEA;AAEA;AACA;AAEA;AAEA,IAAM2kB,uBAAuB,GAA7B;AAEO,IAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,WAAY;AACjDD,yBAAuB,CAAvBA;AACAA,yBAAuB,CAAvBA;AAFG;AAKA,IAAME,aAAa,GAAG,SAAhBA,aAAgB,sFAAyF;AAElH,MAAM3jB,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAENyhB,wBAAsB,CAAtBA;AAEAvhB,uEAAc,CAAC;AAAC0jB,gBAAY,EAAZA;AAAD,GAAD,EAAiB5jB,QAAQ,CAAzB,SAAdE,sBAAc,CAAdA;AAEA,MAAMxB,KAAK,GAAGqhB,SAAS,CAATA,cAAd,gBAAcA,CAAd;AAEA3f,YAAU,CAAC,YAAM;AACb1B,SAAK,CAALA;AADM,KAAV0B,GAAU,CAAVA;;AAIA,MAAMyjB,gBAAgB,GAAG,SAAnBA,gBAAmB,UAAW;AAEhC,QAAGjtB,8CAAQ,UAAX,eAAW,CAAX,EAAuC;AAEvCktB,mBAAe,CAAfA;AACAF,gBAAY,CAAZA;AAEAluB,gBAAY,GAAG,YAAY,CAAZ,OAAoB,gBAAI;AAAA,aAAI4D,IAAI,CAAJA,UAAeoF,KAAK,CAAxB;AAAvChJ,KAAe,CAAfA;AACAgJ,SAAK,CAALA;AAEA+kB,2BAAuB,CAAvBA,QAAgC,oBAAQ;AAAA,aAAI3rB,QAAQ,CAAZ,OAAY,CAAZ;AAAxC2rB;AAEArjB,cAAU,CAAC,YAAM;AACbujB,mBAAa,mEAAbA,YAAa,CAAbA;AADM,OAAVvjB,GAAU,CAAVA;AAZJ;;AAiBA,MAAI1K,YAAY,GAAGquB,iBAAiB,IAApC;;AAEA,MAAM5K,IAAI;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,oBAENzjB,YAAY,CAAZA,WAFM;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAIgBpB,+EAJhB;;AAAA;AAILoB,0BAJK,gBAILA;AACAA,0BAAY,GAAG,YAAY,CAAZ,CAAY,CAAZ,WAA0B,gBAAQ;AAC7C,uBAAO;AACHsuB,uBAAK,EADF;AAEHx2B,uBAAK,EAAE8L;AAFJ,iBAAP;AADJ5D,eAAe,CAAfA;;AALK;AAaTuuB,kEAAY,CAAC;AACTvlB,qBAAK,EADI;AAET9G,qBAAK,EAAE,6BAAuB;AAC1Bib,sBAAI,GAAGA,IAAI,CAAXA,WAAOA,EAAPA;AACA,sBAAMqR,WAAW,GAAG,YAAY,CAAZ,OAAoB,aAAC;AAAA,2BAAIC,CAAC,CAADA,wCAA0C,CAACvtB,8CAAQ,CAACutB,CAAC,CAAF,OAAvD,eAAuD,CAAvD;AAAzC,mBAAoB,CAApB;AACAtG,wBAAM,CAANA,WAAM,CAANA;AALK;AAOTuG,wBAAQ,EAAE,wBAAe;AACrB1lB,uBAAK,CAALA,QAAc3Q,IAAI,CAAlB2Q;AACAmlB,kCAAgB,CAACnlB,KAAK,CAAtBmlB,KAAgB,CAAhBA;AATK;AAWTQ,yBAAS,EAXA;AAYTC,8BAAc,EAZL;AAaTjF,yBAAS,EAAE;AAbF,eAAD,CAAZ4E;AAgBAvlB,mBAAK,CAALA,2BAAiC,iBAAS;AACtC0B,0BAAU,CAAC,YAAM;AACb,sBAAMmkB,eAAe,GAAGtmB,QAAQ,CAARA,cAAxB,WAAwBA,CAAxB;;AACA,uCAAoB;AAChBS,yBAAK,CAALA,QAAc6lB,eAAe,CAA7B7lB;AACAmlB,oCAAgB,CAACnlB,KAAK,CAAtBmlB,KAAgB,CAAhBA;AACH;AALK,mBAAVzjB,GAAU,CAAVA;AADJ1B;;AA7BS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJya,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AAwCAA,MAAI;AAEJ4G,WAAS,CAATA,qCAA+C,oBAAY;AAEvDyE,YAAQ,CAARA,2BAAoC,iBAAS;AAEzC,UAAMC,cAAc,GAAG/G,KAAK,CAALA,OAAvB;AAEAhoB,kBAAY,CAAZA,KAAkB;AAAEsuB,aAAK,EAAP;AAAyBx2B,aAAK,EAAEi3B;AAAhC,OAAlB/uB;AACAouB,qBAAe,GAAG,eAAe,CAAf,OAAuB,mBAAO;AAAA,eAAIr1B,OAAO,KAAX;AAAhDq1B,OAAkB,CAAlBA;AAEAH,mBAAa,qDAAbA,YAAa,CAAbA;AAPJa;AAFJzE;AA5EG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBP;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEO,IAAM2B,oBAAoB,GAAG,SAAvBA,oBAAuB,yFAA4F;AAE5H,MAAMgD,OAAO,GAAGtH,KAAK,CAALA,cAAhB,oBAAgBA,CAAhB;AACA,eAAYsH,OAAO,CAAPA;AAEZ,MAAM1kB,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAENyhB,wBAAsB,CAAtBA;AAEAvhB,uEAAc,CAAC;AAAC4jB,mBAAe,EAAfA;AAAD,GAAD,EAAoB9jB,QAAQ,CAA5B,SAAdE,sBAAc,CAAdA;;AAEA,MAAMykB,OAAO,GAAG,SAAVA,OAAU,gCAAmC;AAC/C,cAAS;AACL,UAAGr1B,MAAM,CAANA,MAAH,YAA4B;AACxByE,YAAI,CAAJA,YAAiB,MAAM,CAAN,qBAA4B,aAAC;AAAA,iBAAIU,CAAC,CAAL;AAA7B,gBAAjBV,IAAiB,CAAjBA;AADJ,aAEO;AACHA,YAAI,CAAJA,YAAiB,mBAAK,QAAQ,eAAe,CAAf,IAAoB,cAAE;AAAA,iBAAI6wB,EAAE,CAAN;AAAnC,SAAa,CAAR,CAAL,OAAjB7wB,IAAiB,CAAjBA;AACH;AACJ;AAPL;;AAUA,MAAM8wB,YAAY,GAAGzH,KAAK,CAALA,cAArB,uBAAqBA,CAArB;;AAEA,oBAAiB;AACbyH,gBAAY,CAAZA,YAAyBA,YAAY,KAAZA,uBACPf,eAAe,CADRe,0DAENf,eAAe,CAFTe,QAAzBA,0BAAyBA,CAAzBA;AAEoE;AACvE;;AAED,MAAM9wB,IAAI,GAAGqpB,KAAK,CAALA,cAAb,iBAAaA,CAAb;AACAuH,SAAO,eAAPA,eAAO,CAAPA;AAEA,MAAMjmB,KAAK,GAAG0e,KAAK,CAALA,cAAd,gBAAcA,CAAd;;AACA,MAAG9tB,MAAM,CAAT,iBAA2B;AACvB8Q,cAAU,CAAC,YAAM;AACb1B,WAAK,CAALA;AADM,OAAV0B,GAAU,CAAVA;AAGH;;AAED,MAAMyjB,gBAAgB;AAAA,uEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mBAElBjtB,8CAAQ,CAACnI,OAAO,CAAR,MAAe,eAAe,CAAf,IAAoB,cAAE;AAAA,uBAAIm2B,EAAE,CAAN;AAF3B,eAEK,CAAf,CAFU;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAIrBd,6BAAe,CAAfA;AAEAx0B,oBAAM,CAANA;AACAA,oBAAM,CAANA,sCAA+B,QAAQ,eAAe,CAAf,IAAoB,cAAE;AAAA,uBAAIs1B,EAAE,CAAN;AAA7Dt1B,eAAuC,CAAR,CAA/BA;AAEA4tB,yBAAW,CAAXA;AAEAxnB,0BAAY,GAAG,YAAY,CAAZ,OAAoB,gBAAI;AAAA,uBAAI4D,IAAI,CAAJA,UAAeoF,KAAK,CAAxB;AAAvChJ,eAAe,CAAfA;AACAgJ,mBAAK,CAALA;AAZqB,gCAcEjE,yDAdF,EAcb/K,UAda;;AAgBrB,kBAAGA,UAAU,CAAb,OAAqB;AAAE;AACrB,oQAAqD,kBAAU;AAC7Do1B,wBAAM,CAANA,iCAAwC;AACpC1D,+BAAW,EAAEtW,+FADuB;AAEpCuW,+BAAW,EAAE;AAAE/xB,4BAAM,EAAR;AAAUI,gCAAU,EAAVA;AAAV;AAFuB,mBAAxCo1B;AADF;AAMD;;AAED1kB,wBAAU,CAAC,YAAM;AACbshB,oCAAoB,sEAApBA,YAAoB,CAApBA;AADM,iBAAVthB,GAAU,CAAVA;;AAzBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAhByjB,gBAAgB;AAAA;AAAA;AAAtB,GAAsB,EAAtB;;AA8BA,MAAInuB,YAAY,GAAGquB,iBAAiB,IAApC;;AAEA,MAAM5K,IAAI;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,oBAENzjB,YAAY,CAAZA,WAFM;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAIgBpB,+EAJhB;;AAAA;AAILoB,0BAJK,iBAILA;AACAA,0BAAY,GAAG,YAAY,CAAZ,CAAY,CAAZ,WAA0B,gBAAQ;AAC7C,uBAAO;AACHsuB,uBAAK,EADF;AAEHx2B,uBAAK,EAAE8L;AAFJ,iBAAP;AADJ5D,eAAe,CAAfA;;AALK;AAaTuuB,kEAAY,CAAC;AACTvlB,qBAAK,EADI;AAET9G,qBAAK,EAAE,6BAAuB;AAC1Bib,sBAAI,GAAGA,IAAI,CAAXA,WAAOA,EAAPA;AACA,sBAAMqR,WAAW,GAAG,YAAY,CAAZ,OAAoB,aAAC;AAAA,2BAAIC,CAAC,CAADA,wCAA0C,CAACvtB,8CAAQ,CAACutB,CAAC,CAAF,OAAU,eAAe,CAAf,IAAoB,cAAE;AAAA,6BAAIS,EAAE,CAAN;AAAvF,qBAAiE,CAAV,CAAvD;AAAzC,mBAAoB,CAApB;AACA/G,wBAAM,CAANA,WAAM,CAANA;AALK;AAOTuG,wBAAQ;AAAA,0FAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AACN1lB,iCAAK,CAALA,QAAc3Q,IAAI,CAAlB2Q;AADM;AAAA,mCAEgBpK,+EAA2BvG,IAAI,CAF/C,KAEgBuG,CAFhB;;AAAA;AAEA7F,mCAFA,iBAEAA;AACNo1B,4CAAgB,CAAhBA,OAAgB,CAAhBA;;AAHM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAF;;AAAA;AAAA;AAAA;;AAAA;AAPC,iBAOD,EAPC;AAYTQ,yBAAS,EAZA;AAaTC,8BAAc,EAbL;AAcTjF,yBAAS,EAAE;AAdF,eAAD,CAAZ4E;AAiBAvlB,mBAAK,CAALA,2BAAiC,iBAAS;AACtC0B,0BAAU,uEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AACDmkB,yCADC,GACiBtmB,QAAQ,CAARA,cADjB,WACiBA,CAAlBsmB;;AADC;AAAA;AAAA;AAAA;;AAGH7lB,+BAAK,CAALA,QAAc6lB,eAAe,CAA7B7lB;AAHG;AAAA,iCAImBpK,+EAA2BoK,KAAK,CAJnD,KAImBpK,CAJnB;;AAAA;AAIG7F,iCAJH,iBAIGA;AACNo1B,0CAAgB,CAAhBA,OAAgB,CAAhBA;;AALG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAD,qBAAVzjB,GAAU,CAAVA;AADJ1B;;AA9BS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJya,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AA0CAA,MAAI;AAEJiE,OAAK,CAALA,qCAA2C,oBAAY;AAEnDoH,YAAQ,CAARA,2BAAoC,iBAAS;AAEzC,UAAMC,cAAc,GAAG/G,KAAK,CAALA,OAAvB;AAEAhoB,kBAAY,CAAZA,KAAkB;AAAEsuB,aAAK,EAAP;AAAyBx2B,aAAK,EAAEi3B;AAAhC,OAAlB/uB;AACAouB,qBAAe,GAAG,eAAe,CAAf,OAAuB,mBAAO;AAAA,eAAIr1B,OAAO,CAAPA,SAAJ;AAAhDq1B,OAAkB,CAAlBA;AAEAx0B,YAAM,CAANA;AACAA,YAAM,CAANA,sCAA+B,QAAQ,eAAe,CAAf,IAAoB,cAAE;AAAA,eAAIs1B,EAAE,CAAN;AAA7Dt1B,OAAuC,CAAR,CAA/BA;AAEA4tB,iBAAW,CAAXA;AAEAwE,0BAAoB,sEAApBA,YAAoB,CAApBA;AAZJ8C;AAFJpH;AApHG,E;;;;;;;;;;;;;;;;;;;;;;;;ACXP;AACA;AACA;AACA;AAEA;AAEO,IAAM0C,mBAAmB,GAAG,SAAtBA,mBAAsB,gBAAmB;AAAA,MAExCxwB,MAFwC,GAEDhC,KAFC;AAAA,MAEhCyyB,SAFgC,GAEDzyB,KAFC;AAAA,MAErBw2B,eAFqB,GAEDx2B,KAFC;AAIhD,MAAM0S,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAENC,QAAM,CAANA;AAEAC,uEAAc,KAAKF,QAAQ,CAAb,SAAdE,MAAc,CAAdA;AAEA,MAAMuhB,sBAAsB,GAAGxhB,MAAM,CAANA,cAA/B,gCAA+BA,CAA/B;AACMwhB,wBAAsB,CAAtBA;;AAEN,cAAW;AAAE;AACTnyB,UAAM,CAANA,kBAAyBwb,+EAAzBxb;AACAoyB,uGAAoB,mDAAmDpyB,MAAM,CAANA,iBAAvEoyB,EAAoB,CAApBA;AAFJ,SAGO;AAAE;AACLiC,uFAAa,sDAAbA,EAAa,CAAbA;AACH;AAnBA,E;;;;;;;;;;;;;;;;;;;;;;;ACPP;AACA;AACA;AAEA;AAEO,IAAMjE,0BAA0B,GAAG,SAA7BA,0BAA6B,cAAe;AAErD,MAAMqF,MAAM,GAAG7H,WAAW,CAAXA,oBAAf,0BAAeA,CAAf;AACM6H,QAAM,CAANA;AAEN,MAAMtF,OAAO,GAAG,CACZ;AACI5M,QAAI,EADR;AAEInf,MAAE,EAAEoX,iFAA6BxR;AAFrC,GADY,EAKZ;AACIuZ,QAAI,EADR;AAEInf,MAAE,EAAEoX,6EAAyBxR;AAFjC,GALY,EASZ;AACIuZ,QAAI,EADR;AAEInf,MAAE,EAAEoX,+EAA2BxR;AAFnC,GATY,CAAhB;AAeA,MAAM0G,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AACN,MAAMC,MAAM,GAAGid,WAAW,CAAXA,oBAAf,aAAeA,CAAf;AACMjd,QAAM,CAANA;AAEN,MAAM3Q,MAAM,GAAG4tB,WAAW,CAA1B,SAAeA,EAAf;AAEAhd,uEAAc,CAAC;AAAEuf,WAAO,EAAPA;AAAF,GAAD,EAAczf,QAAQ,CAAtB,SAAdE,MAAc,CAAdA;;AAEA,MAAMwe,oBAAoB,GAAG,SAAvBA,oBAAuB,QAAS;AAElC,QAAMwB,MAAM,GAAGxC,KAAK,CAALA,sBAAf;AACA,QAAMiB,IAAI,GAAG,WAAW,CAAX,WAAuB,aAAC;AAAA,aAAIY,CAAC,CAADA,WAAarC,WAAW,CAAXA,iBAAjB;AAArC,KAAa,CAAb;AACA,QAAM8H,YAAY,GAAG,IAAI,CAAJ,eAAoB,gBAAI;AAAA,aAAIrG,IAAI,CAAJA,OAAJ;AAAxB,OAArB;AACA,QAAMQ,QAAQ,GAAG,WAAW,CAAX,WAAuB,aAAC;AAAA,aAAII,CAAC,CAADA,gBAAJ;AAAzC,KAAiB,CAAjB;AAEArC,eAAW,CAAXA;AACAA,eAAW,CAAXA,aAAyBA,WAAW,CAAXA,0BAAzBA;AACAA,eAAW,CAAXA;AACAA,eAAW,CAAXA,eAA4B;AAAE0B,aAAO,EAAE1B,WAAW,CAAtB;AAA4C2B,aAAO,EAAEH;AAArD,KAA5BxB;AAVJ;;AAaA,MAAM+H,aAAa,GAAGhnB,QAAQ,CAARA,iBAAtB,gCAAsBA,CAAtB;AAEAgnB,eAAa,CAAbA,QAAsB,yBAAmB;AACrC/E,UAAM,CAANA;AADJ+E;AAIAC,sFAAc,SAASjnB,QAAQ,CAARA,cAAT,kCAASA,CAAT,EAAqE,kBAAY;AAC3Fif,eAAW,CAAXA;AADJgI,GAAc,CAAdA;AAIA,MAAMC,OAAO,GAAGjI,WAAW,CAAXA,oBAAhB,yBAAgBA,CAAhB;;AAEA,MAAGA,WAAW,CAAd,MAAqB;AACjBiI,WAAO,CAAPA;AACH;AAxDE,E;;;;;;;;;;;;;;;;;;ACNA,IAAM1I,GAAG,GAAG;AAEf2I,UAAQ,EAAGnnB,QAAQ,CAARA,8CAFI,CAEJA,CAFI;AAGfonB,YAAU,EAAGpnB,QAAQ,CAARA,qDAHE,CAGFA,CAHE;AAIfqnB,UAAQ,EAAGrnB,QAAQ,CAARA,mDAJI,CAIJA,CAJI;AAKfsnB,YAAU,EAAGtnB,QAAQ,CAARA,qDALE,CAKFA,CALE;AAOfunB,eAAa,EAAGvnB,QAAQ,CAARA,yDAPD,CAOCA,CAPD;AAQfwnB,cAAY,EAAGxnB,QAAQ,CAARA,2CARA,CAQAA,CARA;AAUfynB,WAAS,EAAGznB,QAAQ,CAARA,8CAVG,CAUHA,CAVG;AAWf0nB,aAAW,EAAG1nB,QAAQ,CAARA,gDAXC,CAWDA,CAXC;AAYf2nB,gBAAc,EAAG3nB,QAAQ,CAARA,oDAZF,CAYEA,CAZF;AAaf4nB,qBAAmB,EAAG5nB,QAAQ,CAARA,mDAbP,CAaOA,CAbP;AAcfye,WAAS,EAAGze,QAAQ,CAARA,8CAdG,CAcHA,CAdG;AAef6nB,kBAAgB,EAAG7nB,QAAQ,CAARA,qCAfJ,CAeIA,CAfJ;AAgBf8nB,iBAAe,EAAG9nB,QAAQ,CAARA,qDAhBH,CAgBGA,CAhBH;AAiBf+nB,aAAW,EAAG/nB,QAAQ,CAARA;AAjBC,CAAZ,C;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AAEO,IAAMgoB,aAAa,GAAG,SAAhBA,aAAgB,aAAc;AAEvCxJ;AACAA;AAEArc,YAAU,CAAC,YAAM;AAAA,0BAEkB3F,yDAFlB;AAAA,QAELwR,MAFK;AAAA,QAEGpL,UAFH;;AAGb,QAAMqlB,WAAW,GAAGjoB,QAAQ,CAARA,cAApB,+BAAoBA,CAApB;;AAEA,QAAG4C,UAAU,IAAb,QAAyB;AAErB,UAAMslB,aAAa,GAAG,UAAU,CAAV,eAA0B,kBAAM;AAAA,eAAIla,MAAM,CAANA,SAAJ;AAAhC,SAAtB;AAEAia,iBAAW,CAAXA;AACAA,iBAAW,CAAXA,QAAoBja,MAAM,CAANA,sBAA6Bia,WAAW,CAA5DA;AACH;AAXL9lB,GAAU,CAAVA;AALG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHP;AACA;AAEA;AACA;AAEA;AACA;AAEO,IAAMgmB,WAAW,GAAG,SAAdA,WAAc,OAAQ;AAEjC,MAAMjN,IAAI,GAAG,SAAPA,IAAO,GAAM;AAEjBlb,YAAQ,CAARA;AAEA,QAAM+B,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;;AAEA,cAAS;AAEL+B,cAAQ,CAARA;AAEAE,2EAAc,CAAC;AAAEmmB,aAAK,EAAEhc,IAAI,CAACgc;AAAd,OAAD,EAAwBrmB,QAAQ,CAAhC,SAA0C/B,QAAQ,CAARA,cAAxDiC,4BAAwDjC,CAA1C,CAAdiC;AAEAjC,cAAQ,CAARA;AAEA,UAAMqoB,MAAM,GAAGroB,QAAQ,CAARA,cAAf,kBAAeA,CAAf;AAEA,UAAMsoB,IAAI,GAAGr5B,0DAAb;AAEAkT,gBAAU,CAAC,YAAM;AAEb,YAAMzG,IAAI,GAAGsE,QAAQ,CAARA,cAAb,cAAaA,CAAb;AACMtE,YAAI,CAAJA,2BAAgC,aAAK;AAEvC8mB,WAAC,CAADA;AAEA,cAAM+F,MAAM,GAAGvoB,QAAQ,CAARA,cAAf,gBAAeA,CAAf;AACMuoB,gBAAM,CAANA;AAEJD,cAAI,CAAJA,eACM,YAAM;AACVzrB;AACA0rB,kBAAM,CAANA;AACApmB,sBAAU,CAAC,YAAM;AACbkmB,oBAAM,CAANA;AADM,eAAVlmB,IAAU,CAAVA;AAJFmmB;AAPA5sB;AAHA,SAAVyG,GAAU,CAAVA;AAZJ,WAmCO;AAEHJ,cAAQ,CAARA;AAEAE,2EAAc,KAAMF,QAAQ,CAAd,SAAwB/B,QAAQ,CAARA,cAAtCiC,4BAAsCjC,CAAxB,CAAdiC;AAEAjC,cAAQ,CAARA;;AAEA,UAAMqoB,OAAM,GAAGroB,QAAQ,CAARA,cAAf,kBAAeA,CAAf;;AAEA,UAAMsoB,KAAI,GAAGr5B,0DAAb;;AAEAkT,gBAAU,CAAC,YAAM;AAEb,YAAMimB,KAAK,GAAGpoB,QAAQ,CAARA,cAAd,cAAcA,CAAd;AACMooB,aAAK,CAALA;AAEN,YAAMI,QAAQ,GAAGxoB,QAAQ,CAARA,cAAjB,iBAAiBA,CAAjB;AAEA,YAAMtE,IAAI,GAAGsE,QAAQ,CAARA,cAAb,aAAaA,CAAb;AACMtE,YAAI,CAAJA,2BAAgC,aAAK;AAEnC8mB,WAAC,CAADA;AAEA,cAAMiG,KAAK,GAAGzoB,QAAQ,CAARA,cAAd,eAAcA,CAAd;AACMyoB,eAAK,CAALA;;AAENH,eAAI,CAAJA,2BAAgCF,KAAK,CAArCE,OAA6CE,QAAQ,CAArDF,YACM,uBAAiB;AACnBzrB,+FAAwB;AACpBurB,mBAAK,EAAEA,KAAK,CADQ;AAEpBI,sBAAQ,EAAEA,QAAQ,CAACj5B;AAFC,aAAxBsN;AAIA4rB,iBAAK,CAALA;AACAtmB,sBAAU,CAAC,YAAM;AACbkmB,qBAAM,CAANA;AADM,eAAVlmB,IAAU,CAAVA;AAPJmmB,sBAWQ,iBAAS;AACb,gBAAMI,WAAW,GAAG1oB,QAAQ,CAARA,cAApB,mBAAoBA,CAApB;AACM,6BAAgB0oB,WAAW,CAAXA;AAChB,6BAAgBA,WAAW,CAAXA,yCAAqDC,KAAK,CAA1DD;AAd1BJ;AAPF5sB;AARA,SAAVyG,GAAU,CAAVA;AAmCH;AAxFH;;AA2FA+Y,MAAI;AA7FC;AAgGA,IAAM0N,cAAc,GAAG,SAAjBA,cAAiB,OAAQ;AAElC,YAAS;AACL,QAAMC,QAAQ,GAAG7oB,QAAQ,CAARA,cAAjB,eAAiBA,CAAjB;AACA,kBAAa6oB,QAAQ,CAARA;AAFjB,SAGO;AACH,QAAMH,WAAW,GAAG1oB,QAAQ,CAARA,cAApB,mBAAoBA,CAApB;AACA,qBAAgB0oB,WAAW,CAAXA;AAChB,QAAMI,SAAS,GAAG9oB,QAAQ,CAARA,cAAlB,gBAAkBA,CAAlB;AACA,mBAAc8oB,SAAS,CAATA;AACjB;AAVE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGP;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEO,IAAM5lB,gBAAgB,GAAG,SAAnBA,gBAAmB,aAAc;AAAA,wBAEvB1G,yDAFuB;AAAA,MAElCnL,MAFkC;;AAI1C,MAAM0Q,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEA;;AAEA,MAAG3O,MAAM,CAAT,gBAA0B;AACtB0Q,YAAQ,CAARA;AACAC,UAAM,GAAGhC,QAAQ,CAARA,cAATgC,+BAAShC,CAATgC;AACAA,UAAM,CAANA;AACAC,yEAAc,KAAMF,QAAQ,CAAd,SAAdE,MAAc,CAAdA;AAJJ,SAKO;AACHF,YAAQ,CAARA;AACAC,UAAM,GAAGhC,QAAQ,CAARA,cAATgC,2CAAShC,CAATgC;AACAA,UAAM,CAANA;AACAC,yEAAc,KAAMF,QAAQ,CAAd,SAAdE,MAAc,CAAdA;AACAF,YAAQ,CAARA;AACAC,UAAM,GAAGhC,QAAQ,CAARA,cAATgC,sCAAShC,CAATgC;AACAA,UAAM,CAANA;AACAC,yEAAc,KAAMF,QAAQ,CAAd,SAAdE,MAAc,CAAdA;AACH;;AAED,MAAM8mB,QAAQ,GAAI/oB,QAAQ,CAARA,iBAAlB,qBAAkBA,CAAlB;AAEA+oB,UAAQ,CAARA,QAAiB,gBAAQ;AAErB5tB,QAAI,CAAJA;AAAAA,yEAA+B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEvB6tB,2BAFuB,GAETvJ,KAAK,CAFI,aAEvBuJ;AAFuB,mCAIExsB,yDAJF,EAIrB/K,UAJqB,gCAITJ,MAJS;;AAMvB43B,+BANuB,GAML,SAAlBA,eAAkB,cAAe;AACnCD,6BAAW,CAAXA;AACA7mB,4BAAU,CAAC,YAAM;AACb6mB,+BAAW,CAAXA;AADM,qBAAV7mB,IAAU,CAAVA;AARyB,iBAMvB8mB;;AASNF,wBAAQ,CAARA,QAAiB,gBAAI;AAAA,yBAAI5tB,IAAI,CAAJA,iBAAJ,aAAIA,CAAJ;AAArB4tB;AACMG,4BAhBuB,GAgBRvwB,8CAAQ,gBAAgBqwB,WAAW,CAhB3B,SAgBA,CAAvBE;;AACN,oBAAG,CAAH,cAAkB;AACdF,6BAAW,CAAXA;AACH;;AAnB4B,8BAqBtBnc,iFAA6Bmc,WAAW,CArBlB,EAqBtBnc,CArBsB;AAAA,gDAsBpBA,mFAtBoB,uBAwBpBA,6EAxBoB,wBA8BpBA,4EA9BoB,wBAsCpBA,6EAtCoB,wBAgDpBA,0EAhDoB,wBAmDpBA,0EAnDoB,wBAwDpBA,6EAxDoB,wBA+DpBA,yEA/DoB;AAAA;;AAAA;AAAA;;AAAA;AAyBrBoc,+BAAe,CAAfA,WAAe,CAAfA;AACA,kLAAoC,kBAAU;AAC5CpC,wBAAM,CAANA;AADF;AA1BqB;;AAAA;AA+BrB,+JAAqD,kBAAU;AAC7DA,wBAAM,CAANA,oCAA2Cha,kFAA3Cga;AADF;AAGA,sJAA4C,kBAAU;AACpDA,wBAAM,CAANA;AADF;AAlCqB;;AAAA;AAuCrBoC,+BAAe,CAAfA,WAAe,CAAfA;AAvCqB,mCAwCAzsB,yDAxCA,EAwCb+G,QAxCa;AAyCfxP,2BAzCe,GAyCD,CAAC,CAACtC,UAAU,CAAZ,WACd,QAAQ,CAAR,OAAgB,sBAAU;AAAA,yBAAIkH,8CAAQ,CAAC3E,UAAU,CAAX,OAAmBvC,UAAU,CAAzC,QAAY,CAAZ;AADZ,iBACd,CADc,GAzCC,QAyCfsC;AAGN,sMAA8C,kBAAU;AACtD8yB,wBAAM,CAANA;AADF;AA5CqB;;AAAA;AAiDrBoC,+BAAe,CAAfA,WAAe,CAAfA;AAjDqB;;AAAA;AAoDrB,2IAAiC,kBAAU;AACzCpC,wBAAM,CAANA,YAAmBrqB,0DAAnBqqB;AADF;AApDqB;;AAAA;AAyDvB,kLAAoC,kBAAU;AAC5CA,wBAAM,CAANA;AACA7mB,0BAAQ,CAARA,+DAAwE,aAAK;AAC3EA,4BAAQ,CAARA;AADFA;AAFF;;AAzDuB;AAgEvB,wKAA+B,kBAAU;AACvC6mB,wBAAM,CAANA;AACA7mB,0BAAQ,CAARA,8DAAuE,aAAK;AAC1EA,4BAAQ,CAARA;AACAnD;AAFFmD;AAFF;AAhEuB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA/B7E;;AAAAA;AAAAA;AAAAA;AAAAA;AAFJ4tB;;AAgFA,MAAMI,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA,2BAEO3sB,yDAFP;AAAA,QAEhBnL,MAFgB;AAAA,QAERgb,UAFQ;;AAIxB,QAAGhb,MAAM,CAAT,iBAA2B;;AAE3B,QAAG,CAACkR,yFAAJ,EAAwC;AACtCxN,aAAO,CAAPA;AACA,UAAMq0B,WAAW,GAAGppB,QAAQ,CAARA,cAApB,aAAoBA,CAApB;AACA,UAAMqpB,gBAAgB,GAAG,CAAExc,0FAAF,EAA0CA,4FAA1C,EAAoFA,0FAApF,CAAzB;AACCR,gBAAU,IAAI1T,8CAAQ,CAAC0T,UAAU,CAAX,MAAvB,gBAAuB,CAAtBA,GACG+c,WAAW,CAAXA,iBADJ,aACIA,CADH/c,GAEG+c,WAAW,CAAXA,cAFJ,aAEIA,CAFH/c;AAGF;AAbH;;AAgBA8c,aAAW;AA1HR;AA6HA,IAAMhmB,kBAAkB,GAAG,SAArBA,kBAAqB,OAAQ;AACxC,MAAMmmB,SAAS,GAAGtpB,QAAQ,CAARA,cAAlB,WAAkBA,CAAlB;AACA,iBACEspB,SAAS,CAATA,qBAA+B,kBAA/BA;AAHG,E;;;;;;;;;;;;;;;;;;;;ACzIP;AACA;AAEO,IAAMC,WAAW,GAAG,SAAdA,WAAc,QAAS;AAAA,wBAEoC/sB,yDAFpC;AAAA,MAExB2S,OAFwB;AAAA,MAEf1d,UAFe;AAAA,MAEHJ,MAFG;AAAA,MAEK2c,MAFL;AAAA,MAEaK,MAFb;AAAA,MAEqBzL,UAFrB;;AAIhCuK,OAAK,CAALA,OAAa9b,MAAM,CAAnB8b;AAEA,MAAG,CAAH,QAAY;;AAEZ,MAAGA,KAAK,CAALA,UAAgBa,MAAM,CAAzB,iBAA2C;AACvCnR;AACH;AAVE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHP;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAM2sB,QAAQ;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEXx4B,iBAFW,KAEXA;AAFW,0BAIRK,MAAM,CAANA,MAJQ;AAAA,4CAKRwb,gFALQ,uBAkBRA,+EAlBQ;AAAA;;AAAA;AAAA,0BAMJxb,MAAM,CAANA,MANI;AAAA,4CAOJwb,iFAPI,uBAcJA,6EAdI;AAAA;;AAAA;AAAA;AAAA,mBAQalO,iDAAQ,SARrB,IAQqB,CARrB;;AAAA;AAQD1E,iBARC,gBAQDA;AACN5I,kBAAM,CAANA,oBAA2B;AACvB,sBAAM4I,KAAK,CAALA,MADiB,CACjBA,CADiB;AAEvBb,iBAAG,EAAEa,KAAK,CAALA;AAFkB,aAA3B5I;AATO;AAAA,mBAaOmG,6DAAc,CAbrB,MAaqB,CAbrB;;AAAA;AAaPxG,iBAbO,gBAaPA;;AAbO;AAAA;AAAA,mBAeOwG,6DAAc,CAfrB,MAeqB,CAfrB;;AAAA;AAePxG,iBAfO,gBAePA;;AAfO;AAAA;;AAAA;AAAA;AAAA,mBAmBGy4B,2BAA2B,CAACh4B,UAAU,CAnBzC,OAmB8B,CAnB9B;;AAAA;AAmBXT,iBAnBW,gBAmBXA;AAnBW;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAARw4B,QAAQ;AAAA;AAAA;AAAd,CAAc,EAAd;;AA4BA,IAAME,cAAc;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEnBr4B,kBAAM,CAANA,aAAoB;AAAEoE,gBAAE,EAAEhE,UAAU,CAACgE;AAAjB,aAApBpE;AACAA,kBAAM,CAANA,WAAkBI,UAAU,CAAVA,YAAlBJ;AAEMs4B,iCALa,GAMjBl4B,UAAU,CAAVA,SAAoBA,UAAU,CAAVA,eAApBA,KAAmDJ,MAAM,CAANA,kBAAyBI,UAAU,CAAtFA,OACC,CAACA,UAAU,CAAX,gBAA4BA,UAAU,CAAVA,iBAA4BJ,MAAM,CAANA,MAPxC,YAMjBI,CADIk4B,CALa,CASnB;;AATmB,gBAWf,CAXe;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAeMH,QAAQ,aAfd,MAec,CAfd;;AAAA;AAenB/3B,sBAAU,CAfS,KAenBA,GAfmB,cAenBA;AACAA,sBAAU,CAAVA,QAAmB,4DAAmB,UAAU,CAAV,aAAwB,gBAAI;AAAA,qBAAI3B,IAAI,CAAR;AAAlE2B,aAAsC,CAAnB,CAAnBA;;AAhBmB,iBAkBhBA,UAAU,CAlBM;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAkBa;AAEhC,gBAAG,8CAAQ,gBAAgB,UAAU,CAAV,eAA0B,iBAAK;AAAA,qBAAIF,KAAK,CAAT;AAAvD,aAAwB,CAAhB,CAAR,IAAyE,CAACoH,8CAAQ,YAAY,UAAU,CAAV,eAA0B,iBAAK;AAAA,qBAAIpH,KAAK,CAAT;AAAhI,aAAiG,CAAZ,CAArF,EAAgJ;AACtIq4B,qBADsI,GAC5H,UAAU,CAAV,aAAwB,aAAC;AAAA,uBAAIpzB,CAAC,CAADA,oCAAJ;AADmG,eAC5H,CAAVozB;AACAC,yBAFsI,GAExH,OAAO,CAAP,OAAe,aAAC;AAAA,uBAAIrzB,CAAC,CAADA,iCAAJ;AAFwG,eAExH,CAAdqzB;AACAC,wBAHsI,GAGzH,UAAU,CAAV,aAAwB,aAAC;AAAA,uBAAItzB,CAAC,CAADA,oCAAJ;AAHgG,eAGzH,CAAbszB;AACNr4B,wBAAU,CAAVA;AACH;;AAzBkB,2BA2BZJ,MAAM,CAANA,MA3BY;AAAA,8CA4BZwb,gFA5BY;AAAA;;AAAA;AA6Bfpb,sBAAU,CAAVA,eAA0BJ,MAAM,CAANA,MAA1BI;AA7Be;;AAAA;AAAA;AAAA,mBAiCYs4B,4BAA4B,aAjCxC,MAiCwC,CAjCxC;;AAAA;AAiCbC,4BAjCa,iBAiCbA;AAjCa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAdN,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB;;AAsCA,IAAMK,4BAA4B;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAE1B14B,MAAM,CAANA,MAF0B;AAAA,gDAG1Bwb,gFAH0B,yBAM1BA,+EAN0B;AAAA;;AAAA;AAI7Bpb,sBAAU,CAAVA,QAAmB,sDAAa,UAAU,CAAV,aAAwB,gBAAI;AAAA;AAAzC,aAAa,CAAb,sBAAnBA,MAAmB,CAAnBA;AAJ6B;;AAAA;AAO7BA,sBAAU,CAAVA,cAAyB,cAAM;AAC3B,kBAAG4C,EAAE,CAAL,MAAY;AACRA,kBAAE,CAAFA,YAAeA,EAAE,CAAFA,KAAfA,CAAeA,CAAfA;AACH;AAHL5C;AAKAA,sBAAU,CAAVA,QAAmBf,sDAAae,UAAU,CAAvBf,oBAAnBe,KAAmBf,CAAnBe;AAZ6B;;AAAA;AAgBjC;AAEMw4B,oBAlB2B,sBAkBZ,QAAQ,UAAU,CAAV,UAAqB,aAAC;AAAA,qBAAIzzB,CAAC,CAADA,SAAJ;AAlBlB,aAkBJ,CAAR,CAlBY,CAkB3ByzB;AACAC,kBAnB2B,sBAmBd,QAAQ,UAAU,CAAV,UAAqB,aAAC;AAAA,qBAAI1zB,CAAC,CAADA,SAAJ;AAnBhB,aAmBN,CAAR,CAnBc,CAmB3B0zB;AACA9tB,kBApB2B,sBAoBd,QAAQ,UAAU,CAAV,UAAqB,aAAC;AAAA,qBAAI5F,CAAC,CAADA,SAAJ;AAAtB,sBAAmD,aAAC;AAAA;AApB9C,aAoBN,CAAR,CApBc,CAoB3B4F;AACF+tB,sBArB6B,KAqB7BA,EAAiBC,SArBY,KAqB7BD,EAAiCE,SArBJ,KAqB7BF;AArB6B;AAAA,mBAsBhB9zB,4EAtBgB;;AAAA;AAsB7BP,gBAtB6B,kBAsB7BA;AACJA,gBAAI,GAAGA,IAAI,CAAJA,CAAI,CAAJA,CAAPA;;AACMw0B,wBAxB2B;AAAA,kFAwBZ;AAAA;AAAA;AAAA;AAAA;AAAA,0DACV,OAAO,CAAP,IAAY,MAAM,CAAN;AAAA,8FAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACDj0B,qFADC,KACDA,CADC;;AAAA;AACpBk0B,8CADoB,iBACpBA;AACN,wCAAG3yB,MAAM,CAANA,kCAAyC2yB,UAAU,CAAVA,gBAA5C,QACIF,SAAS,CAATA;AAHsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAX;;AAAA;AAAA;AAAA;AADF,yBACE,GAAZ,CADU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAxBY;;AAAA;AAAA;AAAA;AAAA,eAwB3BC;;AAxB2B;AAAA,mBAgC3BA,YAAY,CAhCe,MAgCf,CAhCe;;AAAA;AAiC3BE,yBAjC2B;AAAA,kFAiCX;AAAA;AAAA;AAAA;AAAA;AAAA,0DACX,OAAO,CAAP,IAAY,QAAQ,CAAR;AAAA,8FAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACFn0B,qFADE,MACFA,CADE;;AAAA;AACtBo0B,+CADsB,iBACtBA;AACN,wCAAG7yB,MAAM,CAANA,mCAA0C6yB,WAAW,CAAXA,gBAA7C,QACIN,UAAU,CAAVA;AAHwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAb;;AAAA;AAAA;AAAA;AADD,yBACC,GAAZ,CADW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAjCW;;AAAA;AAAA;AAAA;AAAA,eAiC3BK;;AAjC2B;AAAA,mBAyC3BA,aAAa,CAzCc,QAyCd,CAzCc;;AAAA;AA0C3BE,wBA1C2B;AAAA,kFA0CZ;AAAA;AAAA;AAAA;AAAA;AAAA,0DACV,OAAO,CAAP,IAAY,MAAM,CAAN;AAAA,8FAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACDr0B,qFADC,KACDA,CADC;;AAAA;AACpBs0B,8CADoB,iBACpBA;AACN,wCAAG/yB,MAAM,CAANA,kCAAyC+yB,UAAU,CAAVA,gBAA5C,QACIP,SAAS,CAATA;AAHsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAX;;AAAA;AAAA;AAAA;AADF,yBACE,GAAZ,CADU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA1CY;;AAAA;AAAA;AAAA;AAAA,eA0C3BM;;AA1C2B;AAAA,mBAkD3BA,YAAY,CAlDe,MAkDf,CAlDe;;AAAA;AAmD3BE,0BAnD2B,GAmDV,SAAjBA,cAAiB,OAAQ;AAC3B,kBAAI96B,IAAI,CAAJA,UAAeA,IAAI,CAAJA,OAAnB,OAAsC;AAClC,uBAAOA,IAAI,CAAJA,wBAA6BA,IAAI,CAAJA,gBAA7BA,QAA0DA,IAAI,CAAJA,OAAjE;AADJ,qBAGK;AACD;AACH;AAzD4B,aAmD3B86B;;AASAC,oBA5D2B,GA4DhB,SAAXA,QAAW,mBAAsB;AACnC,kBAAMC,SAAS,GAAGh7B,IAAI,CAAJA,SAAc+K,IAAI,CAAJA,KAAhC,WAAgCA,EAAd/K,CAAlB;AACA,kBAAMyB,KAAK,GAAG,IAAI,CAAJ,aAAkB,IAAI,CAAJ,KAAU,iBAAK;AAAA,uBAAIA,KAAK,CAALA,SAAJ;AAAjC,eAAkB,CAAlB,GAAd;AACA,qBAAOA,KAAK,IAAZ;AA/D6B,aA4D3Bs5B;;AAMNp5B,sBAAU,CAAVA;AAAAA,mFAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AACfsB,6BADe,GACPjD,IAAI,CAAJA,WADO,GACPA,CAARiD;AACNjD,4BAAI,CAAJA,iBAAsBiD,KAAK,CAA3BjD,CAA2B,CAA3BA;AACAA,4BAAI,CAAJA,mBAAwBiD,KAAK,CAA7BjD,CAA6B,CAA7BA;AACAA,4BAAI,CAAJA,QAAa+6B,QAAQ,kBAAkBhe,qEAAlB,CAArB/c;AACAA,4BAAI,CAAJA,SAAc+6B,QAAQ,mBAAmBhe,sEAAnB,CAAtB/c;;AACA,4BAAIA,IAAI,CAAR,QAAiB;AACbA,8BAAI,CAAJA,eAAoB86B,cAAc,CAAlC96B,IAAkC,CAAlCA;AACAA,8BAAI,CAAJA,wBAA6BA,IAAI,CAAJA,aAA7BA,CAA6BA,CAA7BA;AACH;;AACDA,4BAAI,CAAJA,QAAa+6B,QAAQ,kBAAkBhe,qEAAlB,CAArB/c;AACAA,4BAAI,CAAJA,YAAiBgT,KAAK,GAAtBhT;AACAA,4BAAI,CAAJA,KAAUA,IAAI,CAAdA;AACAA,4BAAI,CAAJA,kBAAuBi7B,8FAAvBj7B,MAAuBi7B,CAAvBj7B;AACAA,4BAAI,CAAJA,iBAAsBi7B,6FAAtBj7B,MAAsBi7B,CAAtBj7B;AACAA,4BAAI,CAAJA,OAAYiD,KAAK,CAALA,iBAAZjD,GAAYiD,CAAZjD;AACAA,4BAAI,CAAJA,cAAmBA,IAAI,CAAJA,eAAnBA;;AAhBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzB2B;;AAAAA;AAAAA;AAAAA;AAAAA;;AAkBMu5B,gCApF2B,GAoFJ,SAAvBA,oBAAuB,QAAS;AAClC,qBAAO,OAAO,CAAP,IAAY,KAAK,CAAL;AAAA,qFAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACA30B,qFAAiCvG,IAAI,CADrC,IACAuG,CADA;;AAAA;AACnB40B,oCADmB,kBACnBA;AACNn7B,8BAAI,CAAJA,SAAcm7B,UAAU,IAAxBn7B;AAFyB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAV;;AAAA;AAAA;AAAA;AAAnB,eAAmB,GAAZ,CAAP;AArF6B,aAoF3Bk7B;;AApF2B;AAAA,mBA2F3BA,oBAAoB,CAACv5B,UAAU,CA3FJ,KA2FP,CA3FO;;AAAA;AA4FjCA,sBAAU,CAAVA;AACAA,sBAAU,CAAVA,wCAA0B,KAAK,CAAL,KAAW,QAAQ,UAAU,CAAV,UAAqB,gBAAI;AAAA,qBAAI3B,IAAI,CAAR;AAAtE2B,aAA6C,CAAR,CAAX,CAA1BA;AA7FiC;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAA5Bs4B,4BAA4B;AAAA;AAAA;AAAlC,CAAkC,EAAlC;;AAiGA,IAAMN,2BAA2B;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACrBpzB,mFADqB,OACrBA,CADqB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAA3BozB,2BAA2B;AAAA;AAAA;AAAjC,CAAiC,EAAjC;;AAIO,IAAMyB,iBAAiB,GAAG;AAC7BxB,gBAAc,EADe;AAE7BK,8BAA4B,EAFC;AAG7BN,6BAA2B,EAA3BA;AAH6B,CAA1B,C;;;;;;;;;;;;;;;;;;AChLP;AAEA,IAAM0B,UAAU,GAAhB;AACA,IAAMC,YAAY,GAAlB;AACA,IAAMC,aAAa,GAAnB;AACA,IAAMC,MAAM,GAAZ;AAEA;;AAEA,IAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAO;AACrC,MAAIC,YAAY,GAAhB;;AACA,MAAIxrB,QAAQ,CAARA,6BAAJ,GAA6C;AAC3CyrB,UAAM,4CAANA,MAAM,CAANA;AACAzrB,YAAQ,CAARA;AAFF,SAGO;AACHwrB,gBAAY,GAAZA;AACH;;AACD;AARJ;;AAWA,IAAME,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAQ;AACjC,MAAI1rB,QAAQ,CAARA,+BAAJ,GAA+C;AAC7CyrB,UAAM,0DAANA,MAAM,CAANA;AACAzrB,YAAQ,CAARA;AAFF,SAGO;AACH2rB,kBAAc,CAAdA,IAAc,CAAdA;AACH;AANL;;AASA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACjC,MAAMC,WAAW,GAAGC,UAAU,CAA9B,YAA8B,CAA9B;AAEA,MAAG,CAAH,aAAiB;AAEjB,MAAMC,QAAQ,GAAGt1B,IAAI,CAAJA,IAAS,aAAa,SAAvC,WAAuC,CAAtBA,CAAjB;AACA,MAAMu1B,QAAQ,GAAGv1B,IAAI,CAAJA,KAAUs1B,QAAQ,IAAI,iBAAvC,EAAmC,CAAlBt1B,CAAjB;AACA,MAAMw1B,eAAe,GAAGD,QAAQ,GAAhC;;AACA,uBAAoB;AAChBL,kBAAc,CAACnpB,IAAfmpB,EAAc,CAAdA;AACH;;AACD;AAXJ;;AAcA,IAAMO,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC7B,SAAOJ,UAAU,CAAVA,UAAU,CAAVA,KAAP;AADJ;;AAIA,IAAMK,4BAA4B,GAAG,SAA/BA,4BAA+B,GAAM;AACzCV,QAAM,iFAANA,MAAM,CAANA;AACAzrB,UAAQ,CAARA;AAFF;;AAKO,IAAMuC,aAAa,GAAG;AACzBgpB,2BAAyB,EADA;AAEzBW,oBAAkB,EAFO;AAGzBC,8BAA4B,EAHH;AAIzBT,sBAAoB,EAJK;AAKzBE,wBAAsB,EAAtBA;AALyB,CAAtB;;AAQP,IAAME,UAAU,GAAG,SAAbA,UAAa,OAAQ;AAC1B,MAAIM,MAAM,GAAG/wB,IAAI,GAAjB;AACA,MAAIgxB,EAAE,GAAGrsB,QAAQ,CAARA,aAAT,GAASA,CAAT;;AACA,OAAI,IAAIxJ,CAAC,GAAT,GAAYA,CAAC,GAAG61B,EAAE,CAAlB,QAA0B71B,CAA1B,IAA+B;AAC9B,QAAImW,CAAC,GAAG0f,EAAE,CAAV,CAAU,CAAV;;AACA,WAAO1f,CAAC,CAADA,aAAP;AAAyBA,OAAC,GAAGA,CAAC,CAADA,aAAcA,CAAC,CAAnBA,MAAIA,CAAJA;AAAzB;;AACA,QAAIA,CAAC,CAADA,oBAAJ,GAA6B,OAAOA,CAAC,CAADA,UAAYyf,MAAM,CAAlBzf,QAA0BA,CAAC,CAAlC,MAAOA,CAAP;AAC7B;;AACD;AARD;;AAWA,IAAMgf,cAAc,GAAG,SAAjBA,cAAiB,OAAQ;AAC3B,MAAMW,WAAW,GAAGtsB,QAAQ,CAARA,mEAApB,IAAoBA,CAApB;AACA,MAAMusB,WAAW,GAAGD,WAAW,6CAA/B,GAA+B,CAA/B;AACAb,QAAM,uCAANA,MAAM,CAANA;AACAzrB,UAAQ,CAARA;AAJJ,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvEA;AAEA;;AAEA,IAAMwsB,iBAAiB,GAAG,SAApBA,iBAAoB,eAAqE;AAAA,MAAtDC,YAAsD,uEAAvC,KAAuC;AAAA,MAAhCC,QAAgC,uEAArB,gBAAqB;;AAC3F,MAAI;AACA;;AACA,sBAAiB;AACb,UAAIC,gBAAgB,GAAG,IAAI,CAAJ,WAAgB,gBAAI;AAAA,eAAItxB,IAAI,CAAJA,qBAA0BA,IAAI,CAAlC;AAA3C,OAAuB,CAAvB;AACAsxB,sBAAgB,GAAGA,gBAAgB,GAAGA,gBAAgB,CAAnB,YAAnCA;AACA,UAAIC,gBAAgB,GAAG,IAAI,CAAJ,WAAgB,gBAAI;AAAA,eAAIvxB,IAAI,CAAJA,aAAkBhK,MAAM,CAAxBgK,YAAqCA,IAAI,CAA7C;AAA3C,OAAuB,CAAvB;AACAuxB,sBAAgB,GAAGA,gBAAgB,GAAGA,gBAAgB,CAAnB,YAAnCA;AACAC,eAAS,GAAGD,gBAAgB,IAA5BC;AACH;;AACD,mBAAc;AACd,QAAMC,YAAY,GAAG,IAAI,CAAJ,aAAkB,gBAAI;AAAA,aAAIzxB,IAAI,CAAJA,aAAJ;AAA3C,KAAqB,CAArB;AACA,QAAM0xB,OAAO,GAAGD,YAAY,CAAZA,aAA0BA,YAAY,CAAZA,CAAY,CAAZA,CAA1BA,QAA0BA,CAA1BA,GAAhB;AACA,QAAM/5B,KAAK,GAAG,IAAI,CAAJ,aAAkB,gBAAI;AAAA,aAAIsI,IAAI,CAAJA,aAAkBhK,MAAM,CAA5B;AAApC,KAAc,CAAd;AACA,QAAMgK,IAAI,GAAGtI,KAAK,CAALA,aAAmBA,KAAK,CAALA,CAAK,CAALA,CAAnBA,QAAmBA,CAAnBA,GAAb;AACA,QAAMi6B,gBAAgB,GAAG3xB,IAAI,CAAJA,MAAzB,GAAyBA,CAAzB;AACA;;AACA,QAAGhK,MAAM,CAANA,aAAH,MAA6B;AACzB47B,qBAAe,GAAGv8B,+DAAsBs8B,gBAAgB,CAAhBA,KAAxCC,GAAwCD,CAAtBt8B,CAAlBu8B;AADJ,WAEO;AACHA,qBAAe,GAAG,gBAAgB,CAAhB,IAAqB,gBAAI;AAAA,eAAIv8B,+DAAJ,IAAIA,CAAJ;AAAzB,cAAlBu8B,GAAkB,CAAlBA;AACH;;AACD;AArBJ,IAsBE,UAAS;AACPl4B,WAAO,CAAPA,gEAAwEytB,CAAC,CAAzEztB;AACA;AACH;AA1BL;;AA6BA,IAAMm4B,YAAY,GAAG,SAAfA,YAAe,WAAY;AAC7B,SAAO5f,QAAQ,CAARA,WAAP,CAAOA,CAAP;AADJ;;AAIA,IAAM6f,cAAc,GAAG,SAAjBA,cAAiB,WAAY;AAC/B,SAAO7f,QAAQ,CAARA,WAAP,CAAOA,CAAP;AADJ;;AAIA,IAAM8f,YAAY,GAAG,SAAfA,YAAe,wBAA2B;AAE5C,MAAG,CAAC77B,KAAK,CAAT,IAAS,CAAT,EAAiB;AAEjB,MAAM87B,SAAS,GAAG,KAAK,CAAL,IAAK,CAAL,MAAiB,aAAC;AAAA,WAAIC,CAAC,CAADA,aAAJ;AAAlB,OAAiD,KAAK,CAAL,IAAK,CAAL,MAAiB,aAAC;AAAA,WAAIA,CAAC,CAADA,aAAJ;AAAnE,GAAiD,CAAjD,GAAkG,KAAK,CAAL,IAAK,CAAL,MAAiB,aAAC;AAAA,WAAIA,CAAC,CAADA,aAAJ;AAAtI,GAAoH,CAApH;AAEA,SAAOD,SAAS,IAAhB;AANJ;;AASA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,uCAA0C;AAEjE,MAAG,UAAU,CAACh8B,KAAK,CAAnB,KAAmB,CAAnB,EAA4B;AAE5B,MAAMi8B,UAAU,GAAG,KAAK,CAAL,KAAK,CAAL,MAAkB,gBAAI;AAAA,WAAInyB,IAAI,CAAJA,aAAJ;AAAtB,OAAwD,KAAK,CAAL,KAAK,CAAL,MAAkB,gBAAI;AAAA,WAAIA,IAAI,CAAJA,aAAJ;AAA9E,GAAwD,CAAxD,GAAgH,KAAK,CAAL,KAAK,CAAL,MAAkB,gBAAI;AAAA,WAAIA,IAAI,CAAJA,aAAJ;AAAzJ,GAAmI,CAAnI;AAEA,MAAG,CAAH,YAAgB;AAEhB,MAAMoyB,UAAU,GAAGD,UAAU,CAA7B,KAA6B,CAA7B;AAEA,MAAG,CAAH,YAAgB;AAEhB,MAAME,MAAM,GAAG5qB,KAAK,GAAG2qB,UAAU,CAAb,KAAa,CAAb,GAApB;AAEA;AAdJ;;AAiBA,IAAME,aAAa,GAAG,SAAhBA,aAAgB,OAAQ;AAE1B,MAAIrgB,QAAQ,GAAZ;;AAEA,MAAGjS,IAAI,CAAJA,eAAH,GAA0B;AACtBiS,YAAQ,GAAG,IAAI,CAAJ,eAAoB,gBAAS;AACpC,aAAO9W,CAAC,KAADA,IAAU0vB,CAAC,CAADA,qBAAV1vB,MAAsC0vB,CAAC,CAA9C,IAA6CA,EAA7C;AADO,YAAX5Y,GAAW,CAAXA;AAGH;;AAED;AAVJ;;AAaA,IAAMsgB,qBAAqB,GAAG,SAAxBA,qBAAwB,uBAA0B;AACpD,MAAGvyB,IAAI,KAAP,IAAgB;AAChB,MAAM9J,KAAK,GAAG,IAAI,CAAJ,KAAU,iBAAK;AAAA,WAAIA,KAAK,CAALA,uBAA6B8J,IAAI,CAArC,WAAiCA,EAAjC;AAA7B,GAAc,CAAd;AACA,MAAG,CAAH,OAAW;AACX,SAAO,KAAK,CAAL,WAAiB,gBAAI;AAAA,WAAIA,IAAI,CAAJA,aAAJ;AAArB,KAAP;AAJJ;;AAOA,IAAMwyB,QAAQ,GAAG,SAAXA,QAAW,wBAA2B;AAExC,MAAG,CAAC/9B,IAAI,CAAR,QAAiB;AAEjB;;AAEA,qCAAuB8H,MAAM,CAANA,QAAe9H,IAAI,CAA1C,MAAuB8H,CAAvB,qCAAoD;AAAA;AAAA,QAA1CxI,GAA0C;AAAA,QAArC0+B,GAAqC;;AAChD,QAAG1+B,GAAG,KAAN,MAAiB;AACb8D,WAAK,GAAG46B,GAAG,CAAX56B;AACH;AACJ;;AAED,MAAG,CAAH,OAAW;AACX,MAAG,CAAH,WAAe;AACf,SAAO66B,SAAS,CAAhB,KAAgB,CAAhB;AAdJ;;AAiBA,IAAM9d,OAAO,GAAG,SAAVA,OAAU,YAAe;AAC3B,SAAO+d,GAAG,GAAV;AADJ;;AAIA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,gBAAmB;AACtC,MAAMC,WAAW,GAAG,OAAO,CAAP,IAAY,kBAAU;AACtC,QAAMC,SAAS,GAAGlM,MAAM,CAAxB;AACA,QAAM8L,SAAS,GAAG9L,MAAM,CAAxB;AACA,WAAO4L,QAAQ,kBAAf,SAAe,CAAf;AAHJ,GAAoB,CAApB;AAKA,SAAOK,WAAW,CAAXA,gBAAP,EAAOA,CAAP;AANJ;;AASA,IAAME,uBAAuB,GAAG,SAA1BA,uBAA0B,gBAAmB;AAC/C,MAAIC,SAAS,GAAG,KAAK,CAAL,IAAU,gBAAI;AAAA,WAAIv+B,IAAI,CAAR;AAA9B,GAAgB,CAAhB;AACA,MAAI4kB,WAAW,GAAG,SAAS,CAAT,IAAc,qBAAS;AAAA,WAAI,SAAS,CAAT,OAAiB,gBAC1D;AAAE,aAAOrZ,IAAI,CAAJA,aAAkBhK,MAAM,CAAxBgK,YAAqCA,IAAI,CAAJA,aAA5C;AADmC,KAAI,CAAJ;AAAzC,GAAkB,CAAlB;AAEA,MAAGqZ,WAAW,CAAXA,WAAH,GAA6B;AAC7BA,aAAW,GAAG,WAAW,CAAX,IAAgB,sBAAc;AACxC,QAAIrZ,IAAI,GAAG,UAAU,CAAV,KAAgB,aAAC;AAAA,aAAIizB,CAAC,CAADA,aAAej9B,MAAM,CAAzB;AAA5B,KAAW,CAAX;AACA,QAAG,CAAH,MAAU,IAAI,GAAG,UAAU,CAAV,KAAgB,aAAC;AAAA,aAAIi9B,CAAC,CAADA,aAAJ;AAAxB,KAAO,CAAP;AACV,QAAG,CAAH,MAAU;AACV,WAAO59B,+DAAsB2K,IAAI,CAAjC,cAAO3K,CAAP;AAJU,YAKJ,aAAC;AAAA,WAAI49B,CAAC,KAAL;AALX5Z,GAAc,CAAdA;AAMA;AAXJ;;AAcA,IAAM6Z,kBAAkB,GAAG,SAArBA,kBAAqB,eAAkB;AACzC,MAAI;AACA,QAAMx7B,KAAK,GAAG,IAAI,CAAJ,aAAkB,gBAAI;AAAA,aAAIsI,IAAI,CAAJA,aAAkBhK,MAAM,CAA5B;AAAtB,WAAiE,gBAAI;AAAA,aAAIX,+DAAsB2K,IAAI,CAA9B,cAAI3K,CAAJ;AAAnF,KAAc,CAAd;AACA;AAFJ,IAGE,UAAS;AACPqE,WAAO,CAAPA;AACA;AACH;AAPL;;AAUA,IAAMy5B,eAAe,GAAG,SAAlBA,eAAkB,0BAA6B;AACjD,MAAMnxB,OAAO,GAAGrD,8CAAI,CAAC5J,MAAM,GAAP,GAAa,IAAI,CAAJ,OAAY,gBAAI;AAAA,WAAIN,IAAI,KAAR;AAAjD,GAAiC,CAAb,CAApB;AACAuN,SAAO,CAAPA;AACA,SAAO3M,4DAAP,OAAOA,CAAP;AAHJ;;AAMA,IAAM+9B,YAAY,GAAG,SAAfA,YAAe,YAAkB;AACnCX,KAAG,CAAHA,IAAG,CAAHA,GAAUA,GAAG,CAAHA,IAAG,CAAHA,IAAVA;AACAA,KAAG,CAAHA,IAAG,CAAHA;AACA;AAHJ;;AAMA,IAAMY,cAAc,GAAG,SAAjBA,cAAiB,QAAS;AAC5B,SAAO,KAAK,CAAL,IAAU,gBAAI;AAAA,WAAI5+B,IAAI,CAAJA,SAAJ;AAAd,0BAAP,EAAO,CAAP;AADJ;;AAIA,IAAM6+B,uBAAuB,GAAG,SAA1BA,uBAA0B,MAAO;AAEnC,MAAMC,OAAO,GAAb;AAEA,MAAIC,QAAQ,GAAGD,OAAO,CAAPA,UAAf,CAAeA,CAAf;AAEA;AANJ;;AASA,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,aAA8B;AAAA,MAAjBC,IAAiB,uEAAV,KAAU;AAEpD,MAAMH,OAAO,GAAb;AAEA,MAAMI,KAAK,GAAGC,UAAU,CAAVA,MAAd,OAAcA,CAAd;AAEA,MAAMC,YAAY,GAAG,WAArB,OAAqB,CAArB;AAEAA,cAAY,CAAZA,QAAqB,mBAAW;AAC5B,QAAGD,UAAU,CAAVA,iCAA4C,CAA/C,GAAmD;AAC/CF,UAAI,GAAJA;AACH;AAHLG;AAMA,MAAIC,cAAc,GAAlB;;AAEA,MAAGJ,IAAI,KAAP,SAAqB;AACjBC,SAAK,CAALA,QAAc,uBAAgB;AAC1B,UAAGlsB,KAAK,KAAKksB,KAAK,CAALA,SAAb,GAA+B;AAC3BG,sBAAc,IAAdA;AACH;AAHLH;AAKAG,kBAAc,GAAGA,cAAc,CAAdA,0BAAyCA,cAAc,CAAdA,MAA1DA,CAA0DA,CAA1DA;AANJ,SAOO;AACHH,SAAK,CAALA,QAAc,uBAAgB;AAC1B,UAAGlsB,KAAK,GAAGksB,KAAK,CAALA,SAAX,GAA6B;AACzBG,sBAAc,IAAdA;AACH;AAHLH;AAKH;;AAED;AA/BJ;;AAkCA,IAAMI,iBAAiB,GAAG,SAApBA,iBAAoB,MAAO;AAE7B,MAAMP,QAAQ,GAAGF,uBAAuB,CAAxC,GAAwC,CAAxC;AAEA,MAAM5sB,QAAQ,qHAAd,cAAc,CAAd;AAEA;AANJ;;AASO,IAAMgpB,cAAc,GAAG;AAC1ByB,mBAAiB,EADS;AAE1BU,cAAY,EAFc;AAG1BC,gBAAc,EAHY;AAI1BC,cAAY,EAJc;AAK1BG,oBAAkB,EALQ;AAM1BI,eAAa,EANa;AAO1BC,uBAAqB,EAPK;AAQ1BC,UAAQ,EARkB;AAS1BI,gBAAc,EATY;AAU1BG,yBAAuB,EAVG;AAW1BG,oBAAkB,EAXQ;AAY1BC,iBAAe,EAZW;AAa1BE,gBAAc,EAbY;AAc1BC,yBAAuB,EAdG;AAe1BS,mBAAiB,EAfS;AAgB1BN,mBAAiB,EAAjBA;AAhB0B,CAAvB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjNP;;IAEMO,W;;;;;;;;;;;;EAAoBC,yC;;AAAO;AACjCD,WAAW,CAAXA,SAAqB,iKASI;AATJ,yEAArBA,qBAAqB,CAArBA;;IAgBME,U;;;;;;;;;;;;EAAmBD,yC;;AAAO;AAChCC,UAAU,CAAVA,SAAoB,sGAApBA,MAAoB,CAApBA;;IAaMh+B,K;;;;;;;;;;;;EAAc+9B,yC;;AAAO;AAC3B/9B,KAAK,CAALA,SAAe,kDAAfA,SAAe,CAAfA;;IASMi+B,S;;;;;;;;;;;;EAAkBF,yC;;AAAO;AAC/BE,SAAS,CAATA,SAAmB,qBAAnBA,QAAmB,CAAnBA;;IAMMtc,S;;;;;;;;;;;;EAAkBoc,yC;;AAAO;AAC/Bpc,SAAS,CAATA,SAAmB,WAAnBA,SAAmB,CAAnBA;;IAKMgO,Q;;;;;;;;;;;;EAAiBoO,yC;;AAAO;AAC9BpO,QAAQ,CAARA,SAAkB,4CAAlBA,YAAkB,CAAlBA;;IAOMuO,a;;;;;;;;;;;;EAAsBH,yC;;AAAO;AACnCG,aAAa,CAAbA,SAAuB,qCAAvBA,YAAuB,CAAvBA;;IAMMC,a;;;;;;;;;;;;EAAsBJ,yC;;AAAO;AACnCI,aAAa,CAAbA,SAAuB,wBAAvBA,WAAuB,CAAvBA;;IAMMC,S;;;;;;;;;;;;EAAkBL,yC;;AAAO;AAC/BK,SAAS,CAATA,SAAmB,mIAAnBA,gBAAmB,CAAnBA;;IAWM/iB,S;;;;;;;;;;;;EAAkB0iB,yC;;AAAO;AAC/B1iB,SAAS,CAATA,SAAmB,mBAAnBA,KAAmB,CAAnBA;AAMO,IAAMC,KAAK,GAAG;AACjBwiB,aAAW,EADM;AAEjBE,YAAU,EAFO;AAGjBh+B,OAAK,EAHY;AAIjBi+B,WAAS,EAJQ;AAKjBtc,WAAS,EALQ;AAMjBgO,UAAQ,EANS;AAOjBuO,eAAa,EAPI;AAQjBC,eAAa,EARI;AASjBC,WAAS,EATQ;AAUjB/iB,WAAS,EAATA;AAViB,CAAd,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjGP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMgjB,SAAS,GAAG,CACd;AAAEv0B,MAAI,EAAN;AAAoC0W,MAAI,EAAE8d,2GAA+BA;AAAzE,CADc,EAEd;AAAEx0B,MAAI,EAAN;AAAsB0W,MAAI,EAAE+d,qFAAeA;AAA3C,CAFc,EAGd;AAAEz0B,MAAI,EAAN;AAAwB0W,MAAI,EAAEge,6DAAUA;AAAxC,CAHc,EAId;AAAE10B,MAAI,EAAN;AAA+B0W,MAAI,EAAEie,kFAAiBA;AAAtD,CAJc,EAKd;AAAE30B,MAAI,EAAN;AAA+B0W,MAAI,EAAEie,kFAAiBA;AAAtD,CALc,EAMd;AAAE30B,MAAI,EAAN;AAAkC0W,MAAI,EAAEie,kFAAiBA;AAAzD,CANc,EAOd;AAAE30B,MAAI,EAAN;AAAmB0W,MAAI,EAAEke,sEAAaA;AAAtC,CAPc,EAQd;AAAE50B,MAAI,EAAN;AAAmB0W,MAAI,EAAEme,sEAAaA;AAAtC,CARc,EASd;AAAE70B,MAAI,EAAN;AAAmB0W,MAAI,EAAEie,kFAAiBA;AAA1C,CATc,EAUd;AAAE30B,MAAI,EAAN;AAAsB0W,MAAI,EAAEoe,yEAAeA;AAA3C,CAVc,EAWd;AAAE90B,MAAI,EAAN;AAAkB0W,MAAI,EAAEie,kFAAiBA;AAAzC,CAXc,EAYd;AAAE30B,MAAI,EAAN;AAAyB0W,MAAI,EAAEie,kFAAiBA;AAAhD,CAZc,EAad;AAAE30B,MAAI,EAAN;AAAsB0W,MAAI,EAAEqe,wEAAeA;AAA3C,CAbc,EAcd;AAAE/0B,MAAI,EAAN;AAA0B0W,MAAI,EAAEse,+EAAkBA;AAAlD,CAdc,EAed;AAAEh1B,MAAI,EAAN;AAAyB0W,MAAI,EAAEue,mFAAkBA;AAAjD,CAfc,EAgBd;AAAEj1B,MAAI,EAAN;AAAwB0W,MAAI,EAAEie,kFAAiBA;AAA/C,CAhBc,EAiBd;AAAE30B,MAAI,EAAN;AAAwB0W,MAAI,EAAEwe,4FAAwBA;AAAtD,CAjBc,EAkBd;AAAEl1B,MAAI,EAAN;AAA0B0W,MAAI,EAAEoe,yEAAeA;AAA/C,CAlBc,EAmBd;AAAE90B,MAAI,EAAN;AAA8B0W,MAAI,EAAEoe,yEAAeA;AAAnD,CAnBc,EAoBd;AAAE90B,MAAI,EAAN;AAA8B0W,MAAI,EAAEie,kFAAiBA;AAArD,CApBc,EAqBd;AAAE30B,MAAI,EAAN;AAAmC0W,MAAI,EAAEye,sIAA2BA;AAApE,CArBc,EAqB0D;AACxE;AAAEn1B,MAAI,EAAN;AAAoB0W,MAAI,EAAEoe,yEAAeA;AAAzC,CAtBc,EAuBd;AAAE90B,MAAI,EAAN;AAAyB0W,MAAI,EAAE0e,yFAAkBA;AAAjD,CAvBc,EAwBd;AAAEp1B,MAAI,EAAN;AAAgC0W,MAAI,EAAE2e,8HAAwBA;AAA9D,CAxBc,EAyBd;AAAEr1B,MAAI,EAAN;AAA+C0W,MAAI,EAAE4e,gGAAsBA;AAA3E,CAzBc,CAAlB;AA4BO,IAAM3e,UAAU,GAAG,SAAbA,UAAa,OAAQ;AAC9B,MAAM4e,KAAK,GAAG,SAAS,CAAT,KAAe,gBAAI;AAAA,WAAI7e,IAAI,CAAJA,SAAJ;AAAjC,GAAc,CAAd;AACA,MAAMA,IAAI,GAAG6e,KAAK,GAAGA,KAAK,CAAR,OAAlB;AACA;AAHG,E;;;;;;;;;;;;;;;;;;;;;;;AC5CP;AAEA,IAAMC,YAAY,GAAlB;AAEO,IAAMC,UAAU,GAAG,SAAbA,UAAa,qBAAwB;AAE9C,MAAGh2B,QAAQ,CAARA,0BAAH,SAA+C;AAE3C,QAAMi2B,mBAAmB,GAAGC,QAAQ,CAARA,cAA5B,iBAA4BA,CAA5B;AAEAD,uBAAmB,CAAnBA;AAJJ,SAMO;AAEH,QAAME,UAAU,GAAGD,QAAQ,CAARA,cAAnB,mBAAmBA,CAAnB;AAEA,QAAME,OAAO,GAAGj2B,qEAAS,WAATA,kEAAS,CAATA,OAAhB,GAAgBA,CAAhB;AAEAi2B,WAAO,CAAPA,QAAgB,aAAC;AAAA,aAAID,UAAU,CAAVA,cAAJ,CAAIA,CAAJ;AAAjBC;AACH;;AAED,SAAOF,QAAQ,CAARA,cAAP,iBAAOA,CAAP;AAjBG;AAoBA,IAAMG,UAAU,GAAG,SAAbA,UAAa,OAAQ;AAE9B,MAAG,CAACrhC,IAAI,CAAR,UAAmB;;AAEnB,MAAGA,IAAI,CAAJA,mCAAH,SAAoD;AAChD;AADJ,SAEO;AACH,2CAA+BmL,SAAS,CAACnL,IAAI,CAAL,UAAxC,UAAwC,CAAxC;AACH;AARE;AAWA,IAAMkwB,eAAe,GAAG,SAAlBA,eAAkB,QAAS;AAEtC,MAAG,CAAH,OAAW;;AAEX,MAAGzuB,KAAK,CAALA,kBAAH,SAAoC;AAChC;AADJ,SAGO;AACH,iDAAqC2J,qEAAS,CAA9C,KAA8C,CAA9C;AACH;AATI,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCP;AAEA;AACA;AACA;;AAEA,IAAMk2B,6BAA6B,GAAG,SAAhCA,6BAAgC,MAAO;AACzC,MAAMC,MAAM,GAAGC,GAAG,CAAHA,iEAAf;AACA,MAAG,CAACA,GAAG,CAAJ,OAAY,QAAOA,GAAG,CAAV,SAAf,UAA4C;AAC5C,MAAIC,IAAI,GAAGD,GAAG,CAAHA,4BAAX,EAAWA,CAAX;AACIC,MAAI,GAAGA,IAAI,CAAJA,sBAAPA,EAAOA,CAAPA;AACAA,MAAI,GAAGA,IAAI,CAAJA,gBAAPA,EAAOA,CAAPA;AACAA,MAAI,GAAGA,IAAI,CAAJA,gBAAPA,EAAOA,CAAPA;;AAEJ,MAAGD,GAAG,CAAHA,aAAH,QAA4B;AAC1BC,QAAI,GAAGA,IAAI,CAAJA,WAAPA,CAAOA,CAAPA;AACD;;AAED;AAZJ;;AAeO,IAAMC,aAAa,GAAG;AACzBC,cAAY,EADa;AAEzBC,cAAY,EAFa;AAGzBC,YAAU,EAHe;AAIzBC,mBAAiB,EAJQ;AAKzBC,gBAAc,EALW;AAMzBC,cAAY,EANa;AAOzBC,iBAAe,EAPU;AAQzBC,UAAQ,EARiB;AASzBC,YAAU,EATe;AAUzBC,aAAW,EAVc;AAWzBC,cAAY,EAAE;AAXW,CAAtB;AAcA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,SAAU;AACvC,MAAMC,kBAAkB,GAAG,MAAM,CAAN,IAAW,iBAAS;AAC3ChgC,SAAK,CAALA,oBAA0BA,KAAK,CAALA,eAAqBA,KAAK,CAALA,0BAArBA,KAA1BA;AACA;AAFJ,GAA2B,CAA3B;AAIA;AALG;AAQA,IAAMigC,UAAU,GAAG,SAAbA,UAAa,aAAgB;AACtC,MAAG,CAAH,MAAU;AACVC,MAAI,GAAGnB,6BAA6B,CAApCmB,IAAoC,CAApCA;AACAC,MAAI,GAAGpB,6BAA6B,CAApCoB,IAAoC,CAApCA;AACA,MAAMC,aAAa,GAAGF,IAAI,KAA1B;AACA;AALG;AAQA,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,sCAAyC;AACzE,MAAIpB,GAAG;AACHxuB,SAAK,EAAEA,KAAK,GAAG;AADZ;AAGH5Q,OAAG,EAAEygC,UAAU,iBAAVA,MAAU,CAAVA,CAHF;AAIH;AACA5hC,YAAQ,EAAEjB,IAAI,CALX;AAMH8iC,cAAU,EAAE9iC,IAAI,CANb;AAOHyC,gBAAY,EAAEF,KAAK,CAALA,gBAPX;AAQHwgC,qBAAiB,EAAGxgC,KAAK,CAALA,eAAqBA,KAAK,CAALA,0BAArBA,KARjB;AASH8rB,YAAQ,EAAE9rB,KAAK,CAALA,YAAkB;AATzB,IAAP;;AAWA,MAAGA,KAAK,CAAR,KAAc;AACVi/B,OAAG,uDAAgBj/B,KAAK,CAArB;AAA2BygC,YAAM,EAAEzgC,KAAK,CAACygC;AAAzC,MAAHxB;AACH;;AACD;AAfG;AAkBA,IAAMyB,qBAAqB,GAAG,SAAxBA,qBAAwB,wBAA2B;AAC5D,MAAMv/B,MAAM,GAAG,IAAI,CAAJ,WAAgB,wBAAkB;AAC7C,WAAOk/B,oBAAoB,6BAA3B,OAA2B,CAA3B;AADJ,GAAe,CAAf;AAGA;AAJG;AAOA,IAAMC,UAAU,GAAG,SAAbA,UAAa,QAAS;AAE/B,MAAG,CAACtgC,KAAK,CAAT,KAAe;AACX;AACH;;AAEDA,OAAK,CAALA,OAAa++B,6BAA6B,CAA1C/+B,KAA0C,CAA1CA;;AAEA,MAAGA,KAAK,CAALA,aAAH,QAA8B;AAC1BA,SAAK,CAALA,wDAAuDA,KAAK,CAA5DA;AACAA,SAAK,CAALA,SAAeA,KAAK,CAALA,sBAAfA,QAAeA,CAAfA;AACAA,SAAK,CAALA,yDAAwDA,KAAK,CAA7DA;AACAA,SAAK,CAALA,QAAcA,KAAK,CAALA,sBAAdA,OAAcA,CAAdA;AACAA,SAAK,CAALA,wDAAuDA,KAAK,CAA5DA;AACA;AANJ,SAOO;AACHA,SAAK,CAALA,qDAAoDA,KAAK,CAAzDA;AACAA,SAAK,CAALA,sDAAqDA,KAAK,CAA1DA;AACAA,SAAK,CAALA,qDAAoDA,KAAK,CAAzDA;AACA;AACH;AApBE;AAwBA,IAAM2gC,kBAAkB,GAAG,SAArBA,kBAAqB,oDAAuD;AACrFx/B,QAAM,CAANA,QAAe,iBAAS;AACpBy/B,qBAAiB,kCAAjBA,eAAiB,CAAjBA;AADJz/B;AADG;;AAMP,IAAM0/B,4BAA4B,GAAG,SAA/BA,4BAA+B,kCAAmE;AAAA,MAAjCC,eAAiC,uEAAf,UAAe;AAEpG,MAAMnxB,MAAM,GAAGhC,QAAQ,CAARA,cAAf,6BAAeA,CAAf;AACA,MAAMozB,YAAY,GAAGtjC,IAAI,IAAI,UAAU,CAAV,WAAsB,gBAAI;AAAA,WAAIA,IAAI,CAAJA,SAAcuC,KAAK,CAALA,QAAlB;AAAvD,GAA6B,CAA7B;AACA,MAAImB,MAAM,GAAGiZ,8CAAK,CAAC,YAAY,CAAZ,WAAwB,wBAAkB;AACzD2mB,gBAAY,CAAZA,iBAA8BrI,qGAA9BqI,MAA8BrI,CAA9BqI;AACA/gC,SAAK,GAAGsgC,UAAU,QAAQnB,aAAa,CAArB,UAAlBn/B,MAAkB,CAAlBA;AACA;AAAmBtB,cAAQ,EAAEqiC,YAAY,CAAzC;AAAgDR,gBAAU,EAAEQ,YAAY,CAACtY;AAAzE;AAHJ,GAAmB,CAAD,CAAlB;AAKAtnB,QAAM,GAAG4+B,iBAAiB,CAA1B5+B,MAA0B,CAA1BA;AACA,MAAM6/B,iBAAiB,GAAG,YAAY,CAAZ,YAAyB,aAAC;AAAA,WAAIf,UAAU,IAAGjgC,KAAK,CAAtB,OAAc,CAAd;AAApD,GAA0B,CAA1B;AACA,MAAMihC,aAAa,GAAG;AAAEC,WAAO,kCAAOlhC,KAAK,CAAZ;AAAT,GAAtB;AACAmhC,6EAAW,CAAC;AAAEniC,UAAM,EAAR;AAAUmC,UAAM,EAAhB;AAAkBwO,UAAM,EAAxB;AAA0B3P,SAAK,EAA/B;AAAgDohC,cAAU,EAAEH,aAAa,CAAbA;AAA5D,GAAD,CAAXE;AACA,MAAIE,WAAW,GAAf;;AACA;AACI;AACIA,iBAAW,GAAGN,YAAY,CAA1BM;AACA;;AACJ;AACIA,iBAAW,GAAGN,YAAY,CAA1BM;AACA;;AACJ;AACIA,iBAAW,GAAXA;AACA;;AACJ;AACIA,iBAAW,mBAAYN,YAAY,CAAxB,8DAA2EA,YAAY,CAAvF,MAAXM,SAAW,CAAXA;AAXR;;AAcA1zB,UAAQ,CAARA;AA5BJ;;AA+BO,IAAMizB,iBAAiB,GAAG,SAApBA,iBAAoB,kCAAmE;AAAA,MAAjCE,eAAiC,uEAAf,UAAe;AAChG9gC,OAAK,CAALA,0BAAgC,aAAK;AACjC,QAAG,CAAH,MAAU;AACV6gC,gCAA4B,kCAA5BA,eAA4B,CAA5BA;AAFJ7gC;AADG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzIP;AACA;CAGA;;AAEO,IAAMkwB,gBAAgB,GAAG,SAAnBA,gBAAmB,6BAAgC;AAE5D,MAAMoR,UAAU,GAAhB;;AAF4D;AAAA;AAAA;;AAAA;AAAA,kFAI5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACwBC,gEAAiB,OADzC,OACyC,CADzC;;AAAA;AACUC,mBADV,gBACUA;AADV,+CAEW,KAAK,CAAL,YAAkB,gBAAQ;AAC7B,uBAAO;AAAE9N,uBAAK,EAAE3Z,IAAI,CAAb;AAAkC7c,uBAAK,EAAE6c,IAAI,CAA7C;AAAkD0nB,uBAAK,EAAE1nB,IAAI,CAA7D;AAAoE/Q,sBAAI,EAAE+Q,IAAI,CAAC/Q;AAA/E,iBAAP;AAHR,eAEW,CAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJ4D;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,uFAW5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACwBu4B,gEAAiB,OADzC,QACyC,CADzC;;AAAA;AACUC,mBADV,iBACUA;AADV,gDAEW,KAAK,CAAL,YAAkB,iBAAS;AAC9B,uBAAO;AAAE9N,uBAAK,EAAE9rB,KAAK,CAAd;AAA6B1K,uBAAK,EAAE0K,KAAK,CAACxE;AAA1C,iBAAP;AAHR,eAEW,CAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAX4D;AAAA;AAAA;;AAkB5D,6CAA2C;AACvC,QAAIwK,QAAQ,GAAZ;;AACAA,YAAQ,GAAG,+BAAe;AACtB2f,YAAM,CAAC,WAAW,CAAX,IAAgB,sBAAc;AACjC,eAAO;AAAEmG,eAAK,EAAEgO,UAAU,CAAnB;AAAiCxkC,eAAK,EAAEwkC,UAAU,CAACC;AAAnD,SAAP;AADJpU,OAAO,CAAD,CAANA;AADJ3f;;AAKAW,+DAAkB,OAAlBA,QAAkB,CAAlBA;AACH;;AA1B2D;AAAA;AAAA;;AAAA;AAAA,qFA4B5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAC2BgzB,gEAAiB,OAD5C,UAC4C,CAD5C;;AAAA;AACUK,sBADV,iBACUA;AADV,gDAEW,QAAQ,CAAR,YAAqB,iBAAS;AACjC,uBAAO;AAAElO,uBAAK,EAAE9rB,KAAK,CAAd;AAAsB1K,uBAAK,EAAE0K,KAAK,CAACxE;AAAnC,iBAAP;AAHR,eAEW,CAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA5B4D;AAAA;AAAA;;AAmC5D,MAAM6sB,eAAe,GAAG0D,oDAAY,CAAC;AACjCvlB,SAAK,EAD4B;AAEjC9G,SAAK,EAAE,6BAAuB;AAC1B;AACI;AACIu6B,4BAAkB,CAAlBA,IAAkB,CAAlBA,MAA8B,iBAAS;AACnCtU,kBAAM,CAANA,KAAM,CAANA;AADJsU;AAGA;;AACJ;AACIC,6BAAmB,OAAnBA,MAAmB,CAAnBA;AACA;;AACJ;AACIC,+BAAqB,CAArBA,IAAqB,CAArBA,MAAiC,oBAAY;AACrCxU,kBAAM,CAANA,QAAM,CAANA;AADRwU;AAGA;AAbR;AAH6B;AAoBjCjO,YAAQ,EAAE,wBAAe;AACrB1lB,WAAK,CAALA,QAAc3Q,IAAI,CAAlB2Q;AACAA,WAAK,CAALA,OAAa3Q,IAAI,CAAjB2Q;AAtB6B;AAwBjC2gB,aAAS,EAxBwB;AAyBjCiT,MAAE,EAzB+B;AA0BjCjO,aAAS,EA1BwB;AA2BjCC,kBAAc,EAAE;AA3BiB,GAAD,CAApC;AA8BA;AAjEG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNP;AAEA;AACA;AAEO,IAAMhjB,gBAAgB;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtBhS,kBAFsB,GAEbob,8CAAK,CAFQ,cAER,CAAdpb;AAEAmzB,4BAJsB,GAIH9zB,mEAA0B,IAA1BA,IAA0B,EAA1BA,EAJG,CAIHA,CAAnB8zB;AAENnzB,kBAAM,CAANA,SAAgB;AAAEmzB,8BAAgB,EAAhBA;AAAF,aAAhBnzB;AACAA,kBAAM,CAANA;AACAA,kBAAM,CAANA,oBAA2BA,MAAM,CAANA,qBAA3BA;AAEAA,kBAAM,CAANA,gBAAuBA,MAAM,CAANA,iBAAvBA;AACAA,kBAAM,CAANA;AACAA,kBAAM,CAANA;AAZ4B;AAAA;AAAA,mBAgBCmO,sDAAa,CAhBd,MAgBc,CAhBd;;AAAA;AAgBlB80B,sBAhBkB,gBAgBlBA;;AAEN,4BAAe;AACLC,sBADK,GACMD,UAAU,CAAVA,iBAAqBA,UAAU,CAA/BA,mBAAyCA,UAAU,CAAnDA,gBADN,UACLC;AACNljC,oBAAM,CAANA;AACAA,oBAAM,CAANA;AACAA,oBAAM,CAANA;AACAA,oBAAM,CAANA;AACAA,oBAAM,CAANA,oBAA2B;AACvB+H,mBAAG,EAAEk7B,UAAU,CADQ;AAEvB,wBAAMA,UAAU,CAAC91B;AAFM,eAA3BnN;AANJ,mBAWK;AACDA,oBAAM,CAANA;AACAA,oBAAM,CAANA;AACAA,oBAAM,CAANA,cAAqB;AAAEoE,kBAAE,EAAJ;AAAa4F,oBAAI,EAAE;AAAnB,eAArBhK;AACH;;AAjCuB;AAAA;;AAAA;AAAA;AAAA;AAoCxBA,kBAAM,CAANA;AACAA,kBAAM,CAANA;AACAA,kBAAM,CAANA,cAAqB;AAAEoE,gBAAE,EAAJ;AAAa4F,kBAAI,EAAE;AAAnB,aAArBhK;;AAtCwB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAhBgS,gBAAgB;AAAA;AAAA;AAAtB,CAAsB,EAAtB,C;;;;;;;;;;;;;;;;;;;;;;ACLP;AAEA;AAEO,IAAMtK,OAAO,GAAG,SAAVA,OAAU,WAAc;AAEnC;AACA;AAEA,MAAIy7B,GAAG,GAAP;AACA,MAAGC,KAAK,CAALA,QAAH,GAAGA,CAAH,EAAuB,GAAG,GAAG;AAAE3G,OAAG,EAAHA;AAAF,GAAN;AACvBA,KAAG,GACC/4B,OAAO,CAAPA,kCADD,GACCA,CADD,GAECA,OAAO,CAAPA,wCAFJ+4B,GAEI/4B,CAFJ+4B;AAPK;AAYA,IAAM/1B,QAAQ,GAAG,SAAXA,QAAW,YAAe;AACrC,MAAIy8B,GAAG,GAAP;AACA;AACA,MAAGC,KAAK,CAALA,QAAH,MAAGA,CAAH,EAA0B,MAAM,GAAG;AAAEjiC,UAAM,EAANA;AAAF,GAAT,CAHW,CAIrC;AACA;AACA;AACA;AACA;AACA;AACA;AAVK;AAaA,IAAMkC,WAAW,GAAG,SAAdA,WAAc,UAAa;AACtC,MAAIlC,MAAM,4BAAV,QAAU,CAAV;AACAuF,UAAQ,SAARA,CAAQ,CAARA;AAFK,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BP;AACA;AACA;AACA;AACA;AAEO,IAAM28B,YAAY,GAAG,SAAfA,YAAe,+BAAkC;AAE1D;AACI;AACA;AACI,aAAOC,mBAAmB,iBAA1B,MAA0B,CAA1B;;AACJ;AACIC,sBAAgB,iBAAhBA,MAAgB,CAAhBA;AACA;;AACJ;AACIC,uBAAiB,iBAAjBA,MAAiB,CAAjBA;AACA;;AACJ;AACIC,uBAAiB,iBAAjBA,MAAiB,CAAjBA;AACA;;AACJ;AACIC,wBAAkB,iBAAlBA,MAAkB,CAAlBA;AACA;AAfR;AAFG;AAqBA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,WAAY;AAC/C,MAAMC,IAAI,GAAGv2B,QAAQ,CAARA,kKAEsFA,QAAQ,CAF9FA,oMAKqFA,QAAQ,CAARA,UAAmBA,QAAQ,CALhHA,WAAb,6BAAaA,CAAb;AAOA;AARG;;AAWP,IAAMw2B,2BAA2B,GAAG,SAA9BA,2BAA8B,WAAY;AAC5C,MAAMlmB,YAAY,GAAGhP,QAAQ,CAARA,cAAuBtB,QAAQ,CAA/BsB,cAA8CA,QAAQ,CAARA,cAAnE,kBAAmEA,CAAnE;;AACA,oBAAiB;AACXgP,gBAAY,CAAZA,YAAyBgmB,uBAAuB,CAAhDhmB,QAAgD,CAAhDA;AACL;AAJL;;AAOO,IAAMmmB,qBAAqB,GAAG,SAAxBA,qBAAwB,oBAAuB;AAExDC,KAAG,CAAHA;AACAA,KAAG,CAAHA;AAEAA,KAAG,CAAHA,0BAA8B,iBAAS;AACnCA,OAAG,CAAHA;AACAh0B,UAAM,CAANA;AACA6B;AACAoyB,aAAS,CAATA,KAAS,CAATA;AAJJD;AALG;;AAaP,IAAML,kBAAkB,GAAG,SAArBA,kBAAqB,yBAA4B;AAEnD,MAAM5nB,KAAK,GAAGmoB,iEAAQ,CAAtB,IAAsB,CAAtB;AAEA,MAAM5uB,KAAK,GAAGyG,KAAK,CAALA,UAAgB9b,MAAM,CAAtB8b,eAAsC9b,MAAM,CAANA,eAAsBA,MAAM,CAAhF;AAEA4R;AAEA,MAAMsyB,gBAAgB,GAAGpzB,UAAU,CAAC,YAAI;AACpCkzB,aAAS,CAATA,KAAS,CAATA;AAD+B,KAAnC,KAAmC,CAAnC;;AAIA,gBAAa;AACTp1B,YAAQ,QAARA,gBAAQ,CAARA;AADJ,SAEO;AACHk1B,yBAAqB,CAACn1B,QAAQ,CAARA,cAAD,yBAACA,CAAD,SAArBm1B,gBAAqB,CAArBA;AACH;;AAED,MAAInoB,OAAO,GAAX;AACA,MAAIC,SAAS,GAAb;AAEAioB,6BAA2B,CAAC;AAAEhgC,WAAO,EAAEiY,KAAK,CAAhB;AAA0BH,WAAO,EAAjC;AAAmCC,aAAS,EAATA;AAAnC,GAAD,CAA3BioB;AArBJ;;AAwBA,IAAMP,mBAAmB,GAAG,SAAtBA,mBAAsB,2BAA8B;AAAA,MAE9C5lB,MAF8C,GAE0CymB,MAF1C;AAAA,MAEtCp4B,QAFsC,GAE0Co4B,MAF1C;AAAA,MAE5BjoB,MAF4B,GAE0CioB,MAF1C;AAAA,MAEpBC,MAFoB,GAE0CD,MAF1C;AAAA,MAEZ9mB,WAFY,GAE0C8mB,MAF1C;AAAA,MAEC9e,MAFD,GAE0C8e,MAF1C;AAAA,MAESziC,KAFT,GAE0CyiC,MAF1C;AAAA,MAEgBxmB,YAFhB,GAE0CwmB,MAF1C;AAAA,MAE8Bn4B,OAF9B,GAE0Cm4B,MAF1C;;AAGtD,MAAME,IAAI;AAAK3mB,UAAM,EAANA;AAAL;AAA0BxB,UAAM,EAAhC;AAAkCmJ,UAAM,EAAxC;AAA0C3jB,SAAK,EAA/C;AAAiDic,gBAAY,EAA7D;AAA+D3R,WAAO,EAAPA;AAA/D,IAAV;;AAEA,MAAM8P,KAAK,GAAGmoB,iEAAQ,CAAtB,IAAsB,CAAtB;AAEA,MAAIK,WAAW,GAAID,IAAI,CAAJA,SAAcA,IAAI,CAAJA,eAAf,CAACA,GAAuCA,IAAI,CAAJA,MAAxC,CAAwCA,CAAvCA,GAAuDA,IAAI,CAA9E;AACA,MAAIE,QAAQ,GAAZ;;AAEA,MAAGzoB,KAAK,CAALA,UAAH,SAA4B;AACxBwoB,eAAW,GAAGxoB,KAAK,CAAnBwoB;AACAC,YAAQ,GAARA;AACH;;AAED,MAAGzoB,KAAK,CAALA,UAAH,WAA8B;AAC1BwoB,eAAW,GAAGxoB,KAAK,CAAnBwoB;AACAC,YAAQ,GAARA;AACH;;AACD,MAAGzoB,KAAK,CAALA,UAAH,QAA2B;AACvBwoB,eAAW,GAAGxoB,KAAK,CAAnBwoB;AACAC,YAAQ,GAARA;AACH;;AAED,MAAGzoB,KAAK,CAALA,UAAH,UAA6B;AACzBwoB,eAAW,GAAGxoB,KAAK,CAAnBwoB;AACAC,YAAQ,GAARA;AACH;;AAED,MAAI5oB,OAAO,GAAX;AACA,MAAIC,SAAS,GAAb;AAEA,MAAM6U,SAAS,GAAG1gB,MAAM,CAANA,iEAAlB;AAEA8zB,6BAA2B,CAAC;AAAEhgC,WAAO,EAAEiY,KAAK,CAAhB;AAA0BH,WAAO,EAAjC;AAAmCC,aAAS,EAA5C;AAA+C6U,aAAS,EAAxD;AAA0DvU,UAAM,EAAEJ,KAAK,CAAC/P;AAAxE,GAAD,CAA3B83B;AAEA/nB,OAAK,CAALA;AAEA,MAAMzG,KAAK,GAAGyG,KAAK,CAALA,UAAgB9b,MAAM,CAAtB8b,eAAsC9b,MAAM,CAANA,eAAsBA,MAAM,CAAhF;AAEA4R;AAEA,MAAMsyB,gBAAgB,GAAGpzB,UAAU,CAAC,YAAI;AACpCkzB,aAAS,CAATA,KAAS,CAATA;AAD+B,KAAnC,KAAmC,CAAnC;AAIA,gBAAap1B,QAAQ,QAARA,gBAAQ,CAARA;AAEb,SAAO;AAAEkN,SAAK,EAAP;AAASooB,oBAAgB,EAAhBA;AAAT,GAAP;AAhDJ;;AAmDA,IAAMX,gBAAgB,GAAG,SAAnBA,gBAAmB,yBAA4B;AAEjD,MAAMznB,KAAK,GAAGmoB,iEAAQ,CAAtB,IAAsB,CAAtB;AAEA,MAAM5uB,KAAK,GAAGyG,KAAK,CAALA,UAAgB9b,MAAM,CAAtB8b,eAAsC9b,MAAM,CAANA,eAAsBA,MAAM,CAAhF;AAEA4R;AAEA,MAAMsyB,gBAAgB,GAAGpzB,UAAU,CAAC,YAAI;AACpCkzB,aAAS,CAATA,KAAS,CAATA;AAD+B,KAAnC,KAAmC,CAAnC;AAIAp1B,UAAQ,0BAARA,MAAQ,CAARA;AAZJ;;AAeA,IAAM40B,iBAAiB,GAAG,SAApBA,iBAAoB,yBAA4B;AAAA,MAE1C7jC,KAF0C,GAEzB0kC,IAFyB;AAAA,MAEnCnkC,KAFmC,GAEzBmkC,IAFyB;;AAIlD,MAAMG,gBAAgB,GAAG,SAAnBA,gBAAmB,IAAK;AAE1BrT,KAAC,CAADA;AAEA,QAAMiT,MAAM,GAAGjT,CAAC,CAAhB;AAEA,QAAG9xB,gEAAH,UAAGA,CAAH,EAAuC;AAEvC,QAAMolC,UAAU,GAAhB;AACA,QAAMvoB,MAAM,GAAGuoB,UAAU,CAAVA,UAAf,IAAeA,EAAf;AACA,QAAMC,WAAW,GAAGD,UAAU,CAAVA,QAApB;AACA,QAAMz6B,IAAI,GAAGy6B,UAAU,CAAVA,QAAb;AACA,QAAME,UAAU,GAAGP,MAAM,CAANA,QAAnB;AAEAC,QAAI,CAAJA;AACAA,QAAI,CAAJA;AACAA,QAAI,CAAJA,WAAgBnkC,KAAK,CAArBmkC;AACAA,QAAI,CAAJA,SAAer6B,IAAI,IAAIA,IAAI,KAAb,EAACA,GAAuB;AAAEvH,UAAI,EAAN;AAAgBuH,UAAI,EAAJA;AAAhB,KAAvBA,GAAfq6B;AAEA,QAAMvoB,KAAK,GAAGmoB,iEAAQ;AAAWW,mBAAa,EAAEz8B,QAAQ,CAAlC,WAAkC,CAAlC;AAAiD6D,aAAO,EAAE;AAA1D,OAAtB;AAEAo4B,UAAM,CAANA,cAAqBtoB,KAAK,CAA1BsoB;AAEAzkC,SAAK,CAALA,QAAc,iBAAS;AACnB,UAAMklC,WAAW,GAAGC,KAAK,CAALA,cAApB,QAAoBA,CAApB;AACA,UAAMC,gBAAgB,GAAG58B,QAAQ,CAAC08B,WAAW,CAAXA,QAAlC,WAAiC,CAAjC;AACA,UAAMG,eAAe,GAAGH,WAAW,CAAXA,gBAAxB;AAEAA,iBAAW,KAAXA,KACM/oB,KAAK,CAALA,aAAmB+oB,WAAW,CADpCA,SACM/oB,CADN+oB,GAEM,KAAK,CAAL,aAAmB;AACjBpiC,YAAI,EAAEoiC,WAAW,CADA;AAEjB76B,YAAI,EAAEg7B;AAFW,OAAnB,CAFNH;;AAOA,UAAGE,gBAAgB,KAAKjpB,KAAK,CAA7B,aAA2C;AACvCgpB,aAAK,CAALA;AADJ,aAEO,IAAGC,gBAAgB,KAAKjpB,KAAK,CAA7B,eAA6C;AAClDgpB,aAAK,CAALA;AACD;AAhBLnlC;;AAmBA,kBAAa;AACTiP,cAAQ,CAARA,KAAQ,CAARA;AADJ,WAEO;AACH,UAAMq2B,SAAS,GAAG,SAAZA,SAAY,QAAW;AAEzB,YAAM5vB,KAAK,GAAGyG,KAAK,CAALA,UAAgB9b,MAAM,CAAtB8b,eAAsC9b,MAAM,CAANA,eAAsBA,MAAM,CAAhF;AAEA,YAAMkkC,gBAAgB,GAAGpzB,UAAU,CAAC,YAAI;AACpCc;AACAoyB,mBAAS,CAATA,KAAS,CAATA;AAF+B,WAAnC,KAAmC,CAAnC;AAKAF,6BAAqB,CAACn1B,QAAQ,CAARA,cAAD,yBAACA,CAAD,SATI,gBASJ,CAArBm1B,CATyB,CAWzB;;AACA,YAAG7zB,MAAM,CAANA,SAAH,iBAAoC;AAChCtB,kBAAQ,CAARA,mDAA4DlQ,IAAI,CAAJA,SAA5DkQ;AACAA,kBAAQ,CAARA;AACH;AAfL;;AAiBAs2B,eAAS,CAATA,KAAS,CAATA;AACH;;AAED,QAAItpB,OAAO,GAAX;AACA,QAAIC,SAAS,GAAb;AAEAioB,+BAA2B,CAAC;AAAEhgC,aAAO,EAAEiY,KAAK,CAAhB;AAA0BH,aAAO,EAAjC;AAAmCC,eAAS,EAATA;AAAnC,KAAD,CAA3BioB;AAEAlkC,SAAK,CAALA,QAAc,gBAAI;AAAA,aAAIlB,IAAI,CAAJA,cAAJ,UAAIA,CAAJ;AAAlBkB;AAtEJ;;AAyEAA,OAAK,CAALA,QAAc,oBAAY;AACtBulC,YAAQ,CAARA;AADJvlC;AAIAoQ,QAAM,CAANA,4BAAmC,aAAK;AACtC,QAAGohB,CAAC,CAADA,QAAH,SAAsB;AACpBqT,sBAAgB,CAAhBA,CAAgB,CAAhBA;AACD;AAHHz0B,KAIG;AAAEo1B,QAAI,EAAE;AAAR,GAJHp1B;AAjFJ;;AAwFA,IAAM0zB,iBAAiB,GAAG,SAApBA,iBAAoB,yBAA4B;AAAA,MAE1C9jC,KAF0C,GAEzB0kC,IAFyB;AAAA,MAEnCnkC,KAFmC,GAEzBmkC,IAFyB;AAIlD1kC,OAAK,CAALA,QAAc,gBAAQ;AAClBylC,QAAI,CAAJA,0BAA+B,iBAAS;AAEpC,UAAMnF,GAAG,GAAG7R,KAAK,CAAjB;AACA,UAAMlS,MAAM,GAAG+jB,GAAG,CAAHA,QAAf;AAEA,UAAG,CAAH,QAAY;AAEZoE,UAAI,CAAJA;AACAA,UAAI,CAAJA,WAAgBnkC,KAAK,CAArBmkC;AACAA,UAAI,CAAJA;AACA,UAAMvoB,KAAK,GAAGmoB,iEAAQ,CAAtB,IAAsB,CAAtB;AAEAmB,UAAI,CAAJA;AAEAnF,SAAG,CAAHA;AAEAtgC,WAAK,CAALA,QAAc,gBAAQ;AAClBylC,YAAI,CAAJA;AACAA,YAAI,CAAJA;;AACA,YAAGA,IAAI,CAAJA,wCAA6CllC,KAAK,CAALA,YAAhD,WAAgDA,EAAhD,EAAiF;AAC7EklC,cAAI,CAAJA;AACAA,cAAI,CAAJA;AACH;AANLzlC;AASA,UAAM0V,KAAK,GAAGyG,KAAK,CAALA,UAAgB9b,MAAM,CAAtB8b,eAAsC9b,MAAM,CAANA,eAAsBA,MAAM,CAAhF;AAEA4R;AAEA,UAAMsyB,gBAAgB,GAAGpzB,UAAU,CAAC,YAAM;AACtCkzB,iBAAS,CAATA,KAAS,CAATA;AAD+B,SAAnC,KAAmC,CAAnC;AAIA,oBAAap1B,QAAQ,QAARA,gBAAQ,CAARA;AAjCjBw2B;AADJzlC;AAJJ;;AA2CO,IAAMqkC,SAAS,GAAG,SAAZA,SAAY,QAAS;AAAA,wBAEP74B,yDAFO;AAAA,MAEtB/K,UAFsB;;AAI9B0b,OAAK,CAALA,eAAqB1b,UAAU,CAA/B0b;AAEAtQ;AANG,E;;;;;;;;;;;;;;;;;;ACvRP;AAEA,IAAI65B,KAAK,GAAGA,KAAK,IAAjB;;AAEA,CAAC,cAAa;AAEZC,IAAE,CAAFA,UAAa,YAAW,CAAxBA;;AAGAA,IAAE,CAAFA,8BAA8B,cAAa;AACzC,WAAO32B,QAAQ,CAARA,WAAoB,uBAAuB,MAAvB,IAApBA,SAAP,IAAOA,CAAP;AADF22B;;AAIA,MAAIC,EAAE,GAAN;;AAEA,uCAAqC;AACnC,QAAIC,OAAO,GAAX;;AACA,SAAK,IAAIrgC,CAAC,GAAL,GAAWsgC,GAAG,GAAGC,OAAO,CAA7B,QAAsCvgC,CAAC,GAAvC,KAA+CA,CAA/C,IAAoD;AAClD,UAAIwgC,CAAC,GAAGD,OAAO,CAAf,CAAe,CAAf;;AACA,UAAIC,CAAC,IAAL,SAAkB;AAChBH,eAAO,GAAGA,OAAO,CAAjBA,CAAiB,CAAjBA;AADF,aAEO,IAAIA,OAAO,CAAPA,gBAAwBA,OAAO,CAAPA,aAA5B,CAA4BA,CAA5B,EAAqD;AAC1DA,eAAO,GAAGA,OAAO,CAAPA,aAAVA,CAAUA,CAAVA;AADK,aAEA;AACL,cAAMG,CAAC,GAADA,iCAAqCC,IAAI,CAAJA,UAA3C,OAA2CA,CAA3C;AACD;AACF;;AACD;AACD;;AAED,2CAAyC;AACvC,WAAOC,GAAG,CAAHA,wBAA4BA,GAAG,CAAHA,MAAUp0B,KAAK,GAAlD,KAAmCo0B,CAAnC;AACD;;AAED;;AACA,wBAAsB;AACpB,QAAI,CAACtG,KAAK,GAAGgG,EAAE,CAAFA,KAAT,CAASA,CAAT,KAAJ,MAAkC;AAChC,aAAOhG,KAAK,CAALA,CAAK,CAALA,OAAP,GAAOA,CAAP;AADF,WAEO;AACL;AACD;AACF;;AAED,kCAAgC;AAC9B;AACA,QAAIl4B,OAAO,GAAX;AACAk+B,MAAE,CAAFA;;AACA,WAAO,CAAChG,KAAK,GAAGgG,EAAE,CAAFA,KAAT,CAASA,CAAT,KAAP,MAAqC;AACnCl+B,aAAO,CAAPA;AACD;;AAED,SAAK,IAAIlC,CAAC,GAAGkC,OAAO,CAAPA,SAAb,GAAiClC,CAAC,IAAlC,GAAyCA,CAAzC,IAA8C;AAC5Co6B,WAAK,GAAGl4B,OAAO,CAAfk4B,CAAe,CAAfA;AACA,UAAImG,OAAO,GAAGnG,KAAK,CAALA,CAAK,CAALA,OAAd,GAAcA,CAAd;AACA,UAAIuG,CAAC,GAAGC,WAAW,UAAnB,KAAmB,CAAnB;AACA9V,OAAC,GAAG+V,OAAO,IAAIzG,KAAK,CAAT,OAAiBA,KAAK,CAALA,CAAK,CAALA,CAAjB,QAAXtP,CAAW,CAAXA;AACD;;AACD,QAAI5oB,OAAO,CAAX,QAAoB;AAClB;AACD;;AACD;AACD;;AAED,4BAA0B;AACxB,QAAI4+B,MAAM,GAAV;;AACA,SAAK,IAAI9gC,CAAC,GAAL,GAAWsgC,GAAG,GAAGE,CAAC,CAAvB,QAAgCxgC,CAAC,GAAjC,KAAyCA,CAAzC,IAA8C;AAC5C,UAAIwgC,CAAC,CAADA,CAAC,CAADA,aAAJ,YAAiC;AAC/BM,cAAM,CAANA,KAAYN,CAAC,CAADA,CAAC,CAADA,mBAAZM,IAAYN,CAAZM;AADF,aAEO;AACLA,cAAM,CAANA,KAAYN,CAAC,CAADA,CAAC,CAADA,WAAZM,IAAYN,CAAZM;AACD;AACF;;AACD;AACD;;AAED,sCAAoC;AAClC,SAAK,IAAI9gC,CAAC,GAAL,GAAWsgC,GAAG,GAAGS,KAAK,CAA3B,QAAoC/gC,CAAC,GAArC,KAA6CA,CAA7C,IAAkD;AAChDghC,SAAG,CAAHA,YAAgBD,KAAK,CAArBC,CAAqB,CAArBA;AACD;AACF;;AAED,+BAA6B;AAC3BA,OAAG,CAAHA;AACD;;AAED,uCAAqC;AACnCA,OAAG,CAAHA;AACAC,kBAAc,MAAdA,KAAc,CAAdA;AACD;;AAED,8BAA4B;AAC1B,QAAID,GAAG,CAAHA,aAAJ,SAA8B;AAC5BL,OAAC,GAAGO,YAAY,CAACF,GAAG,CAAJ,aAAhBL,KAAgB,CAAhBA;;AACA,UAAIA,CAAC,IAAL,MAAe;AACbK,WAAG,CAAHA;AACD;;AACD;AACD;;AACD,QAAI,CAAC/C,KAAK,CAALA,QAAL,GAAKA,CAAL,EAAyB;AACvB+C,SAAG,GAAG,CAANA,GAAM,CAANA;AACD;;AACD,SAAK,IAAIxT,CAAC,GAAL,GAAW8S,GAAG,GAAGU,GAAG,CAAzB,QAAkCxT,CAAC,GAAnC,KAA2CA,CAA3C,IAAgD;AAC9C,UAAIxB,CAAC,GAAGgV,GAAG,CAAX,CAAW,CAAX;AACA,UAAIG,eAAe,GAAnB;;AACA,UAAInV,CAAC,CAADA,aAAJ,SAA4B;AAC1B2U,SAAC,GAAGO,YAAY,CAAClV,CAAC,CAAF,aAAhB2U,KAAgB,CAAhBA;;AACA,YAAIA,CAAC,IAAL,MAAe;AACb3U,WAAC,CAADA;AACD;AAJH,aAKO;AACL,YAAIA,CAAC,CAADA,cAAJ,WAA+B;AAC7B,eAAK,IAAIhsB,CAAC,GAAGgsB,CAAC,CAADA,oBAAb,GAAoChsB,CAAC,IAArC,GAA4CA,CAA5C,IAAiD;AAC/C,gBAAIohC,IAAI,GAAGpV,CAAC,CAADA,WAAX,CAAWA,CAAX;;AACA,gBAAIoV,IAAI,CAAJA,gCAAJ,GAA4C;AAC1CD,6BAAe,GAAfA;AACA,kBAAI3I,KAAK,GAAG4I,IAAI,CAAJA,WAAZ,GAAYA,CAAZ;;AACA,kBAAI5I,KAAK,CAALA,gBAAsBA,KAAK,CAALA,WAA1B,GAA8C;AAC5C,sBAAM,2DAA2D4I,IAAI,CAArE;AACD;;AACD,kBAAIv8B,IAAI,GAAG2zB,KAAK,CAAhB,CAAgB,CAAhB;AACA,kBAAI6I,QAAQ,GAAG7I,KAAK,CAApB,CAAoB,CAApB;AACA,kBAAI8I,GAAG,GAAP;;AACA,qBAAOtV,CAAC,CAAR,YAAqB;AACnBsV,mBAAG,CAAHA,KAAStV,CAAC,CAADA,YAAcA,CAAC,CAAxBsV,UAAStV,CAATsV;AACD;;AACD,kBAAIf,OAAO,GAAG,CAACa,IAAI,CAAnB,KAAc,CAAd;;AACA,kBAAIA,IAAI,CAAJA,wBAA6B,CAAjC,GAAqC;AACnCb,uBAAO,GAAGgB,SAAS,CAACH,IAAI,CAAxBb,KAAmB,CAAnBA;AACD;;AACD,kBAAIA,OAAO,KAAX,MAAsB;AACpB,sBAAMa,IAAI,CAAJA,QAAN;AACD;;AACD,kBAAII,UAAU,GAAGZ,WAAW,UAA5B,KAA4B,CAA5B;AACA,kBAAIa,aAAa,GAAG;AAClB,qBAAKhsB;AADa,eAApB;;AAGA,kBAAIrU,MAAM,CAANA,wCAAJ,kBAAsE;AACpEigC,wBAAQ,GAAGA,QAAQ,IAAnBA;;AACA,qBAAK,IAAI5T,CAAC,GAAV,GAAgBA,CAAC,GAAG+T,UAAU,CAA9B,QAAuC/T,CAAvC,IAA4C;AAC1C,sBAAIiU,EAAE,GAAGC,aAAa,CAAtB,GAAsB,CAAtB;AACAF,+BAAa,CAAbA,IAAa,CAAbA,GAAuBD,UAAU,CAAjCC,CAAiC,CAAjCA;AACAA,+BAAa,CAAbA,QAAa,CAAbA;AACAG,wBAAM,KAANA,aAAM,CAANA;AACAX,gCAAc,IAAdA,EAAc,CAAdA;AACD;AARH,qBASO;AACLI,wBAAQ,GAAGA,QAAQ,IAAnBA;AACA,oBAAIQ,IAAI,GAAGzgC,MAAM,CAANA,iBAAX,IAAWA,EAAX;;AACA,qBAAK,IAAIu/B,CAAC,GAAV,GAAgBA,CAAC,GAAGkB,IAAI,CAAxB,QAAiClB,CAAjC,IAAsC;AACpC,sBAAI/nC,GAAG,GAAGipC,IAAI,CAAd,CAAc,CAAd;AACA,sBAAIH,EAAE,GAAGC,aAAa,CAAtB,GAAsB,CAAtB;AACAF,+BAAa,CAAbA,IAAa,CAAbA,GAAsBD,UAAU,CAAhCC,GAAgC,CAAhCA;AACAA,+BAAa,CAAbA,QAAa,CAAbA;AACAG,wBAAM,KAANA,aAAM,CAANA;AACAX,gCAAc,IAAdA,EAAc,CAAdA;AACD;AACF;;AACDjV,eAAC,CAADA,gBAAkBoV,IAAI,CAAtBpV;AA5CF,mBA6CO;AACL2U,eAAC,GAAGO,YAAY,CAACE,IAAI,CAAL,OAAhBT,KAAgB,CAAhBA;;AACA,kBAAIA,CAAC,IAAL,MAAe;AACb,oBAAI97B,IAAI,GAAGu8B,IAAI,CAAf;;AACA,oBAAIv8B,IAAI,CAAJA,OAAYA,IAAI,CAAJA,SAAZA,MAAJ,KAAuC;AACrCmnB,mBAAC,CAADA,gBAAkBoV,IAAI,CAAtBpV;AACAA,mBAAC,CAADA,aAAeoV,IAAI,CAAJA,cAAmB,CAAlCpV,CAAeoV,CAAfpV;AAFF,uBAGO;AACLoV,sBAAI,CAAJA;AACD;AACF;AACF;AACF;AACF;AACF;;AACD,2BAAqB;AACnB,YAAIU,QAAQ,GAAG9V,CAAC,CAAhB;;AACA,eAAO8V,QAAQ,IAAf,MAAyB;AACvB,cAAIC,WAAW,GAAGD,QAAQ,CAA1B;;AACA,cAAIA,QAAQ,CAARA,YAAJ,YAAqC;AACnC,gBAAIE,WAAW,GAAGJ,MAAM,CAACE,QAAQ,CAARA,kBAAD,IAACA,CAAD,EAAxB,KAAwB,CAAxB;;AACA,mBAAOE,WAAW,CAAXA,CAAW,CAAXA,qBAAP,GAA6C;AAC3ChW,eAAC,CAADA,aAAegW,WAAW,CAAXA,CAAW,CAAXA,CAAfhW;AACD;;AACDA,aAAC,CAADA;AALF,iBAMO;AACL4V,kBAAM,WAANA,KAAM,CAANA;AACD;;AACDE,kBAAQ,GAARA;AACD;AACF;AACF;;AACD;AACD;;AAAA;;AAED,0CAAwC;AACtCG,mBAAe,SAASL,MAAM,MAA9BK,KAA8B,CAAf,CAAfA;AACD;;AAED9B,IAAE,CAAFA;AACAA,IAAE,CAAFA;AACAA,IAAE,CAAFA;AAnMF;;AAsMO,IAAM10B,cAAc,GAAG,SAAjBA,cAAiB,kCAAqC;AAC/D,MAAMy2B,YAAY,GAAGjsB,KAAK,IAAIzM,QAAQ,CAARA,oBAA9B,IAA8BA,CAA9B;AACA,MAAI24B,GAAG,GAAG,IAAIjC,KAAK,CAAnB,OAAU,EAAV;AACA,MAAIkC,QAAQ,GAAGlC,KAAK,CAALA,qBAAf,OAAeA,CAAf;AACAA,OAAK,CAALA;AAJG,E;;;;;;;;;;;;;;;;;;;;;;;;;;AC1MP;AAEO,IAAMmC,SAAS,GAAG,SAAZA,SAAY,OAAQ;AAC7B,SAAOjkB,IAAI,CAAJA,OAAYA,IAAI,CAAJA,KAAZA,WAAYA,EAAZA,GAAsCA,IAAI,CAAJA,4BAA7C,EAA6CA,CAA7C;AADG;AAIA,IAAMkkB,uBAAuB,GAAG,SAA1BA,uBAA0B,mBAAsB;AAGzD,MAAMC,QAAQ,GAAGC,8CAAO,6CAAxB,0CAAwB,CAAxB;AAEA,SAAOD,QAAQ,CAACF,SAAS,CAAV,QAAU,CAAV,EAAsBA,SAAS,CAA9C,MAA8C,CAA/B,CAAf;AALG;;AAQP,IAAMI,eAAe,GAAG,SAAlBA,eAAkB,QAAS;AAE7B;;AAEA,MAAG9rB,KAAK,CAAR,eAAwB;AACpB,WAAO3T,QAAQ,CAAC2T,KAAK,CAAd3T,aAAQ,CAARA,KAAkC2T,KAAK,CAA9C;AACH;;AAEDA,OAAK,CAALA,SAAeA,KAAK,CAALA,eAAqBA,KAAK,CAAzCA;AACAA,OAAK,CAALA,SAAeA,KAAK,CAALA,OAAfA,IAAeA,EAAfA;AAEA+rB,WAAS,GAAGJ,uBAAuB,CAAC3rB,KAAK,CAAN,UAAiBA,KAAK,CAX5B,MAWM,CAAnC+rB,CAX6B,CAa7B;AAEA;;AAEA,UAAO/rB,KAAK,CAAZ;AACI;AACIA,WAAK,CAALA,QAAc,KAAK,CAAL,UAAgB,gBAAI;AAAA,eAAI9R,IAAI,CAAR,WAAIA,EAAJ;AAAlC8R,OAAc,CAAdA;;AACA,UAAGA,KAAK,CAALA,SAAeA,KAAK,CAALA,eAAlB,GAA0C;AACtC,YAAMgsB,oBAAoB,GAAGxgC,8CAAQ,CAACwU,KAAK,CAAN,QAAeA,KAAK,CAAzD,KAAqC,CAArC;AACA,YAAG,cAAH,sBAAuCA,KAAK,CAALA;AACvC+rB,iBAAS,GAAGA,SAAS,IAArBA;AACH;;AACL;AARJ;;AAUA;AA3BJ;;AA8BA,IAAME,oBAAoB,GAAG,SAAvBA,oBAAuB,QAAS;AAClC,MAAMC,sBAAsB,GAAGL,8CAAO,6CAAtC,0CAAsC,CAAtC;AACA,SAAOK,sBAAsB,CAAClsB,KAAK,CAAN,QAAeA,KAAK,CAAjD,QAA6B,CAA7B;AAFJ;;AAKO,IAAMmoB,QAAQ,GAAG,SAAXA,QAAW,OAAQ;AAE5B,MAAMnoB,KAAK,GAAGV,8CAAK,CAAnB,IAAmB,CAAnB;AAEAU,OAAK,CAALA,UAAgBA,KAAK,CAALA,QAAcisB,oBAAoB,CAAlCjsB,KAAkC,CAAlCA,GAA4C8rB,eAAe,CAA3E9rB,KAA2E,CAA3EA;AACAA,OAAK,CAALA,SAAgBA,KAAK,CAALA,2BAAhBA;AAEA;AAPG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDP;AAEA;AACA;;AAEA,IAAMmsB,cAAc,GAAG,SAAjBA,cAAiB,yBAA4B;AAE/C,MAAMC,aAAa,GAAnB;;AAEA,qCAAuB3hC,MAAM,CAANA,QAAvB,MAAuBA,CAAvB,qCAA+C;AAAA;AAAA,QAArCxI,GAAqC;AAAA,QAAhC0+B,GAAgC;;AAC3C,QAAG,CAACn1B,8CAAQ,CAACvJ,GAAG,CAAJ,WAACA,EAAD,EAAZ,cAAY,CAAZ,EAAiD;AAC7CmqC,mBAAa,CAAbA,GAAa,CAAbA,GAAqBzL,GAAG,CAAHA,OAAW,WAAIA,GAAG,CAAP,cAAgBA,GAAG,CAA9BA,IAAW,EAAXA,GAAyCA,GAAG,CAAjEyL;AACH;AACJ;;AAED,MAAIrmC,KAAK,GAAGxC,uEAAZ,aAAYA,CAAZ;AACA;AAXJ;;AAcA,IAAM8oC,qBAAqB,GAAG,SAAxBA,qBAAwB,QAAS;AACnC;AAEA,MAAMt8B,UAAU,GAAG,yBAAnB,CAAmB,CAAnB;;AAEA,MAAGhK,KAAK,CAALA,SAAH,MAAuB,CACnB;AACA;AACA;AACH;;AAED,SAAO;AAAEgK,cAAU,EAAZ;AAAcC,QAAI,EAAE;AAApB,GAAP;AAXJ;;AAcA,IAAMs8B,qBAAqB,GAAG,SAAxBA,qBAAwB,QAAS;AACnCC,SAAO,GAAGxmC,KAAK,CADoB,IACnCwmC,CADmC,CACb;;AACtB,MAAMx8B,UAAU,GAAG,kFAAnB,QAAmB,CAAnB;AACA,SAAO;AAAEA,cAAU,EAAZ;AAAcC,QAAI,EAAE;AAApB,GAAP;AAHJ;;AAMA,IAAMw8B,cAAc,GAAG,SAAjBA,cAAiB,gBAAmB;AAEtC,MAAIC,aAAa,GAAG1mC,KAAK,CAALA,UAApB,GAAoBA,CAApB;AACA,MAHsC,OAGtC,CAHsC,CAGzB;;AAEb0mC,eAAa,CAAbA,QAAsB,uBAAiB;AACnC,QAAG92B,KAAK,KAAR,GAAgB;AACZ42B,aAAO,GAAGnI,IAAI,CAAdmI,WAAUnI,EAAVmI;AADJ,WAEO;AACHA,aAAO,IAAIhpC,+DAAXgpC,IAAWhpC,CAAXgpC;AACH;AALLE;AAQA,MAAM1L,WAAW,GAAGv8B,MAAM,CAA1B,OAA0B,CAA1B;AAEA;AAfJ;;AAkBA,IAAMkoC,aAAa,GAAG,SAAhBA,aAAgB,gBAAmB;AAErC,MAAI38B,UAAU,GAAd;AAEA,MAAIgxB,WAAW,GAAGyL,cAAc,QAAhC,MAAgC,CAAhC;;AAEA,MAAG,CAAH,aAAiB;AACbzL,eAAW,GAAGv8B,MAAM,CAACo5B,uFAAiCr6B,2DAAkBwC,KAAK,CAA7Eg7B,GAAsDx9B,CAAjCq6B,CAAD,CAApBmD;AACA,qBAAgBA,WAAW,CAAXA,OAAmBh7B,KAAK,CAAxBg7B;AACnB;;AAED,mBAAgB;AACZ,yCAAuBt2B,MAAM,CAANA,QAAvB,WAAuBA,CAAvB,wCAAoD;AAAA;AAAA,UAA1CxI,GAA0C;AAAA,UAArC0+B,GAAqC;;AAChD,UAAG,CAACn1B,8CAAQ,MAAM,iBAAlB,MAAkB,CAAN,CAAZ,EAA8C;AAC1C,YAAGvJ,GAAG,KAAK8D,KAAK,CAAhB,KAAsB;AAClBgK,oBAAU,CAAVA;AACH;AACJ;AACJ;AACJ;;AAED,MAAIC,IAAI,GAAG+wB,WAAW,GACZA,WAAW,CAAXA,QAAoBA,WAAW,CADnB,OAEZh7B,KAAK,CAFf;AAIA,SAAO;AAAEgK,cAAU,EAAZ;AAAcC,QAAI,EAAJA;AAAd,GAAP;AAzBJ;;AA4BA,IAAM28B,oBAAoB,GAAG,SAAvBA,oBAAuB,cAAiB;AAE1C,MAAIC,QAAQ,GAAG7mC,KAAK,CAApB;AACI6mC,UAAQ,GAAG,QAAQ,CAAR,IAAa,aAAC;AAAA,WAAIhc,CAAC,CAAL,IAAIA,EAAJ;AAAzBgc,GAAW,CAAXA;AACAA,UAAQ,GAAGrpC,4DAJ2B,QAI3BA,CAAXqpC,CAJsC,CAM1C;;AAEA,MAAI7L,WAAW,GAAGl0B,8CAAI,IAAtB,QAAsB,CAAtB;AAEA,MAAIggC,IAAI,GAAR;;AAEA,MAAG9L,WAAW,CAAXA,WAAH,GAA6B;AAEzB8L,QAAI,gCAAQhgC,8CAAI,IAAI,IAAI,CAAJ,OAAY,iBAAK;AAAA,aAAIzK,KAAK,KAAK2D,KAAK,CAALA,MAAd,CAAcA,CAAd;AAAjC,KAAgB,CAAJ,CAAZ,IAAiEA,KAAK,CAALA,MAArE8mC,CAAqE9mC,CAAjE,EAAJ8mC;AAFJ,SAIO;AAEH;AAEAC,QAAI,CAAJA,QAAa,aAAK;AACdA,UAAI,CAAJA,QAAc,aAAK;AACf,YAAGjD,CAAC,KAAJ,GAAY;AACR,cAAMkD,MAAM,GAAG,IAAI,CAAJ,OAAY,aAAC;AAAA,mBAAI5Y,CAAC,KAAK,IAANA,CAAM,CAANA,IAAeA,CAAC,KAAK,IAAzB,CAAyB,CAAzB;AAAb,sBAAf;;AACA,cAAG,CAAH,QAAY;AACR0Y,gBAAI,CAAJA,KAAU,IAAVA,CAAU,CAAVA;AACH;AACJ;AANLC;AADJA;AAWAD,QAAI,GAAGhgC,8CAAI,IAAItJ,4DAfZ,IAeYA,CAAJ,CAAXspC,CAfG,CAiBH;;AAEAA,QAAI,GAAG,IAAI,CAAJ,IAAS,eAAO;AACnB,UAAGG,GAAG,CAAHA,CAAG,CAAHA,KAAWJ,QAAQ,CAAnBI,CAAmB,CAAnBA,IAA0BA,GAAG,CAAHA,CAAG,CAAHA,KAAWJ,QAAQ,CAA7CI,CAA6C,CAA7CA,IAAoDA,GAAG,CAAHA,CAAG,CAAHA,KAAWJ,QAAQ,CAAnBI,CAAmB,CAAnBA,IAA0BA,GAAG,CAAHA,CAAG,CAAHA,KAAWJ,QAAQ,CAApG,CAAoG,CAApG,EAAyG;AACrG;AACH;AAHE,cAIG,aAAC;AAAA;AAJXC,KAAO,CAAPA;AAMAA,QAAI,GAAGhgC,8CAAI,IAAXggC,IAAW,CAAXA;AACAA,QAAI,wCAAJA,QAAI,EAAJA;;AAEA,QAAGA,IAAI,CAAJA,WAAH,GAAsB;AAClBA,UAAI,GAAG,WAAW9mC,KAAK,CAAvB8mC,KAAO,CAAPA;AACH;;AAEDA,QAAI,GAAG,IAAI,CAAJ,IAAS,eAAG;AAAA,aAAIG,GAAG,CAAHA,KAAJ,IAAIA,CAAJ;AAAnBH,KAAO,CAAPA;AACH;;AAED,SAAOtpC,4DAAP,IAAOA,CAAP;AAnDJ;;AAsDA,IAAM0pC,aAAa,GAAG,SAAhBA,aAAgB,mBAAsB;AACxC,SAAOzoC,MAAM,CAAC,MAAM,CAAN,kBAAyB,eAAG;AAAA,WAAIvC,GAAG,KAAP;AAA1C,GAAc,CAAD,CAAb;AADJ;;AAIA,IAAMirC,kBAAkB,GAAG,SAArBA,kBAAqB,mBAAsB;AAC7C,MAAMnnC,KAAK,GAAGknC,aAAa,SAA3B,QAA2B,CAA3B;AACA,aAAU,OAAOlnC,KAAK,CAAZ;AAFd;;AAKA,IAAMonC,iBAAiB,GAAG,SAApBA,iBAAoB,SAAU;AAChC,OAAI,IAAJ,gBAAwB;AACpB,QAAI3oC,MAAM,CAANA,eAAJ,IAAIA,CAAJ,EAAiC;AAC7B;AACH;AACJ;AALL;;AAQA,IAAM4oC,mBAAmB,GAAG,SAAtBA,mBAAsB,SAAU;AAElC,MAAMC,UAAU,GAAhB;;AAEA,uCAAuB5iC,MAAM,CAANA,QAAvB,MAAuBA,CAAvB,wCAA+C;AAAA;AAAA,QAArCxI,GAAqC;AAAA,QAAhC0+B,GAAgC;;AAC3C,QAAGA,GAAG,CAAN,MAAa;AACT0M,gBAAU,CAAVA,KAAgB;AAAEn/B,YAAI,EAAN;AAAa9L,aAAK,EAAEu+B,GAAG,CAAvB;AAA+B/xB,YAAI,EAAE+xB,GAAG,CAAC/xB;AAAzC,OAAhBy+B;AADJ,WAEO,IAAGprC,GAAG,KAAN,cAAyB;AAC5BorC,gBAAU,CAAVA,KAAgB;AAAEn/B,YAAI,EAAN;AAAa9L,aAAK,EAAEu+B,GAAG,CAAvB;AAA+B/xB,YAAI,EAAE;AAArC,OAAhBy+B;AADG,WAEA,IAAGprC,GAAG,KAAN,aAAwB;AAC3BorC,gBAAU,CAAVA,KAAgB;AAAEn/B,YAAI,EAAN;AAAa9L,aAAK,EAAEu+B,GAAG,CAAvB;AAA+B/xB,YAAI,EAAE;AAArC,OAAhBy+B;AACH;AACJ;;AAED;AAdJ;;AAiBA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC7B,SAAO,yKAOH;AAPG,GAAP;AADJ;;AAYA,IAAMC,UAAU,GAAG,SAAbA,UAAa,OAAQ;AAEvB/9B,MAAI,GAAGA,IAAI,IAAXA;;AAEA;AACI;AACI;;AACJ;AACI;;AACJ;AACI;;AACP;AACG;AARJ;AAJJ;;AAgBA,IAAMg+B,kCAAkC,GAAG,SAArCA,kCAAqC,gCAAmC;AAE1E,MAAG,CAACL,iBAAiB,CAArB,MAAqB,CAArB,EAA+B;AAE/B,MAAMM,cAAc,GAApB;;AAJ0E;AAAA;AAAA,QAMhExrC,GANgE;AAAA,QAM3D0+B,GAN2D;;AAOtE,QAAG,CAACn1B,8CAAQ,MAAZ,eAAY,CAAZ,EAAoC;AAChC,UAAGvJ,GAAG,KAAN,cAAyB;AACrB0+B,WAAG,CAAHA,QAAY,mBAAW;AACnB8M,wBAAc,CAAdA,KAAoB;AAChBv/B,gBAAI,EADY;AAEhB9L,iBAAK,EAAE,CAACiB,OAAO,CAAPA,UAFQ,IAET,CAFS;AAGhB8D,uBAAW,EAAE9D,OAAO,CAHJ;AAGkBqqC,qBAAS,EAAE;AAAEx/B,kBAAI,EAAE7K,OAAO,CAAPA,UAAR;AAAgC8D,yBAAW,EAAE9D,OAAO,CAAPA,UAAkB8D;AAA/D;AAH7B,WAApBsmC;AADJ9M;AADJ,aAQO,IAAG1+B,GAAG,KAAN,iBAA4B;AAC/B0+B,WAAG,CAAHA,QAAY,mBAAW;AACnB8M,wBAAc,CAAdA,KAAoB;AAChBv/B,gBAAI,EADY;AACL9L,iBAAK,EAAE,CAACiB,OAAO,CAAPA,SAAD;AADF,WAApBoqC;AADJ9M;AADG,aAMA;AACH8M,sBAAc,CAAdA,KAAoB;AAAEv/B,cAAI,EAAN;AAAa9L,eAAK,EAAEu+B,GAAG,CAAvB;AAA+BnxB,cAAI,EAAE+9B,UAAU,CAAC5M,GAAG,CAAnD,IAA+C,CAA/C;AAA2D/xB,cAAI,EAAE+xB,GAAG,CAAHA,QAAY;AAA7E,SAApB8M;AACH;AACJ;AAzBqE;;AAM1E,uCAAuBhjC,MAAM,CAANA,QAAvB,MAAuBA,CAAvB,wCAA+C;AAAA;AAoB9C;;AAED;AA5BJ;;AA+BA,IAAMkjC,sBAAsB,GAAG,SAAzBA,sBAAyB,kBAAqB;AAEhD,MAAGC,IAAI,CAAJA,WAAH,GAAsB;AAEtB,MAAIC,UAAU,GAAd;AAAA;;AAIA,OAAI,IAAIC,CAAC,GAAT,GAAeA,CAAC,GAAGxkC,IAAI,CAAJA,OAAYskC,IAAI,CAAnC,MAAmBtkC,CAAnB,EAA6CwkC,CAA7C,IAAkD;AAC9C9vB,UAAM,GAANA;AACA,QAAI3U,CAAC,GAAGukC,IAAI,CAAJA,SAAR;;AACA,OAAG;AACC,UAAG,CAACE,CAAC,GAAI,KAAN,OAAH,GAAyB;AACrB9vB,cAAM,CAANA,KAAY4vB,IAAI,CAAhB5vB,CAAgB,CAAhBA;AACH;AAHL,aAMM3U,CANN;;AAQA,QAAG2U,MAAM,CAANA,UAAH,WAA+B;AAC3B6vB,gBAAU,CAAVA;AACH;AACJ;;AAED,SAAO,UAAU,CAAV,OAAkB,eAAG;AAAA,WAAIb,GAAG,CAAHA,WAAJ;AAA5B,GAAO,CAAP;AAxBJ;;AA2BA,IAAMd,sBAAsB,GAAGL,8CAAO,6CAAtC,0CAAsC,CAAtC;AAEO,IAAM/7B,aAAa,GAAG;AACzBq8B,gBAAc,EADW;AAEzBE,uBAAqB,EAFI;AAGzBC,uBAAqB,EAHI;AAIzBE,gBAAc,EAJW;AAKzBE,eAAa,EALY;AAMzBC,sBAAoB,EANK;AAOzBM,eAAa,EAPY;AAQzBC,oBAAkB,EARO;AASzBE,qBAAmB,EATM;AAUzBE,oBAAkB,EAVO;AAWzBE,oCAAkC,EAXT;AAYzBG,wBAAsB,EAZG;AAczBzB,wBAAsB,EAdG;AAezBiB,mBAAiB,EAAjBA;AAfyB,CAAtB,C;;;;;;;;;;;;;;;;;;;;;ACrQP;AAEA;CAEA;;AAEO,IAAM/J,wBAAwB,GAAG,SAA3BA,wBAA2B,cAAe;AAEnD,MAAM9+B,UAAU,GAAGgb,8CAAK,CAACjQ,0DAAzB,UAAwB,CAAxB;AACM/K,YAAU,CAAVA,WAAsBue,WAAW,CAAjCve;AACAA,YAAU,CAAVA,WAAsBA,UAAU,CAAVA,YAAuBA,UAAU,CAAVA,MAAiBA,UAAU,CAAxEA,SAA6CA,CAA7CA;AAEN,MAAMypC,eAAe,GAAG,WAAW,CAAX,OACdlrB,WAAW,CAAXA,6BAAyCA,WAAW,CAAXA,oCAAzCA,IADc,EACiF;AADjF,IAAxB;;AAIA,MAAGkrB,eAAe,GAAlB,GAAwB;AACpB,QAAIC,iBAAiB,GAAG,IADJ,eACpB,CADoB,CAEpB;AAFJ,SAGO;AACHC,4FAAmB,CAAnBA,UAAmB,CAAnBA;AACH;AAfE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNP;AAEA;AACA;AACA;AAEO,IAAMjL,eAAe,GAAG,SAAlBA,eAAkB,cAAe;AAE1C,MAAM1+B,UAAU,GAAGgb,8CAAK,CAACjQ,0DAAzB,UAAwB,CAAxB;AAEA/K,YAAU,CAAVA,WAAsBue,WAAW,CAAjCve;;AAEA,MAAGue,WAAW,CAAXA,aAAyBA,WAAW,CAAXA,UAAzBA,SAAwDA,WAAW,CAAXA,yBAA3D,cAA8G;AAC1Gve,cAAU,CAAVA,qCAAwBue,WAAW,CAAXA,gBAAxBve,cAAgEA,UAAU,CADgC,QAC1GA,GAD0G,CAE1G;AACA;;AACA++B,8IAA2B,aAA3BA,WAA2B,CAA3BA;AAJJ,SAKO;AACHR,0FAAiB,aAAjBA,WAAiB,CAAjBA;AACH;AAbE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMD,UAAU,GAAG,SAAbA,UAAa,aAAiG;AAAA,MAApFpiB,IAAoF,uEAA7E,aAA6E;AAAA,MAA9DylB,YAA8D;AAAA,MAAhDpxB,MAAgD,uEAAvCwc,iDAAuC;AAAA,MAAxB6c,YAAwB,uEAAT,IAAS;AAEvH,MAAG,CAAH,cAAkB;;AAFqG,wBAI5F7+B,yDAJ4F;AAAA,MAI/GwR,MAJ+G;AAAA,MAIvG3c,MAJuG;;AAMvH;;AAEA,MAAM6pB,IAAI;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAECogB,8BAFD;AAAA,oFAEoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEtBxrC,IAAI,CAFkB;AAAA;AAAA;AAAA;;AAAA,4DAEH,YAAY,mBAAO;AAAA,mCAAI+B,OAAO,CAAX,IAAW,CAAX;AAFhB,2BAEH,CAFG;;AAAA;AAInB0pC,iCAJmB;AAAA,gGAIT;AAAA;AAAA;AAAA;AAAA;AAAA,2CACLzrC,IAAI,CADC;AAAA;AAAA;AAAA;;AAAA,oDAEE,YAAY,mBAAO;AAAA,+CAAI+B,OAAO,CAAX,IAAW,CAAX;AAFrB,uCAEE,CAFF;AAAA;AAAA;;AAAA;AAAA;AAAA,6CAGQwE,gFAA2BvG,IAAI,CAHvC,IAGQuG,CAHR;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJS;;AAAA;AAAA;AAAA;AAAA,6BAInBklC;;AAJmB;AAAA,iCAUGA,OAAO,CAVV,IAUU,CAVV;;AAAA;AAUnBC,uCAVmB,iBAUnBA;AAVmB;AAAA,iCAYInlC,sFAAiCmlC,aAAa,CAAbA,SAAuB3uB,0FAAvB2uB,CAAjCnlC,CAZJ;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA,yCAYuG;AAAEtD,iCAAK,EAAE,CAAEyoC,aAAa,CAAbA,SAAF;AAAT,2BAZvG;;AAAA;AAYzBA,uCAAa,CAZY,MAYzBA,GAZyB,YAYzBA;AAZyB;AAAA,iCAaGnlC,sFAAiCmlC,aAAa,CAAbA,SAAuB3uB,yFAAvB2uB,CAAjCnlC,CAbH;;AAAA;AAazBmlC,uCAAa,CAbY,KAazBA,GAbyB,cAazBA;AAbyB;AAAA,iCAcInlC,sFAAiCvG,IAAI,CAdzC,IAcIuG,CAdJ;;AAAA;AAczBmlC,uCAAa,CAdY,MAczBA,GAdyB,cAczBA;AACAA,uCAAa,CAAbA,iBAA+BA,aAAa,CAAbA,kBAAgCzQ,6FAA/DyQ,MAA+DzQ,CAA/DyQ;AAEMzoC,+BAjBmB,GAiBXjD,IAAI,CAAJA,WAjBW,GAiBXA,CAARiD;AAENyoC,uCAAa,CAAbA,iBAA+BzoC,KAAK,CAApCyoC,CAAoC,CAApCA;AACAA,uCAAa,CAAbA,mBAAiCzoC,KAAK,CAAtCyoC,CAAsC,CAAtCA;AApByB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFpB;;AAAA;AAAA;AAAA;AAAA,iBAECF;;AAyBVxrC,kBAAI,GAAGsjC,YAAY,IAAI3hC,UAAU,CAAjC3B;AA3BS;AAAA,qBA6BIwrC,gBAAgB,CA7BpB,IA6BoB,CA7BpB;;AAAA;AA6BTxrC,kBA7BS,iBA6BTA;AA7BS;AAAA;AAAA;;AAAA;AAmCDkhC,sBAAQ,GAAG3/B,MAAM,CAANA,kBAAyB8tB,KAAK,CAALA,cAAzB9tB,gBAAyB8tB,CAAzB9tB,GAAiE2O,QAAQ,CAARA,cAA5EgxB,mBAA4EhxB,CAA5EgxB;AAnCC;;AAAA;AAsCDA,sBAAQ,GAAG3/B,MAAM,CAANA,2BAAkC2O,QAAQ,CAARA,cAA7CgxB,uBAA6ChxB,CAA7CgxB;AAtCC;;AAAA;AAyCDA,sBAAQ,GAAGhxB,QAAQ,CAARA,cAAXgxB,YAAWhxB,CAAXgxB;AAzCC;;AAAA;AAAA,oBA6CNrjB,IAAI,KA7CE;AAAA;AAAA;AAAA;;AA8CCrM,oBA9CD,GA8CU,MAAM,CAAN,eAAsB,cAAE;AAAA,uBAAIm6B,EAAE,CAAFA,SAAJ;AAAxB,iBA9CV,CA8CU,CAATn6B;;AA9CD;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAkDHo6B,kBAlDG,GAkDI17B,QAAQ,CAARA,cAlDJ,qBAkDIA,CAAP07B;AACAtwB,kBAnDG,GAmDIpL,QAAQ,CAARA,cAnDJ,qBAmDIA,CAAPoL;AAEN,wBAASiwB,YAAY,GAAGK,IAAI,CAAJA,iBAAH,gBAAGA,CAAH,GAA6CA,IAAI,CAAJA,cAAzDL,gBAAyDK,CAAzDL;AACT,wBAASA,YAAY,GAAGjwB,IAAI,CAAJA,iBAAH,gBAAGA,CAAH,GAA6CA,IAAI,CAAJA,cAAzDiwB,gBAAyDjwB,CAAzDiwB;AAEHt5B,sBAxDG,GAwDQ/B,QAAQ,CAARA,cAxDR,UAwDQA,CAAX+B;AAENA,sBAAQ,CAARA;AAEA45B,+BAAiB,6DAAjBA,YAAiB,CAAjBA;AAEAtqC,oBAAM,CAANA,iBACMuqC,cAAc,qBADpBvqC,QACoB,CADpBA,GAEMwqC,eAAe,qBAFrBxqC,QAEqB,CAFrBA;;AA9DS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJ6pB,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AAmEAA,MAAI;AA3ED;;AA8EP,IAAM2gB,eAAe,GAAG,SAAlBA,eAAkB,+BAAkC;AAEtD,MAAMl7B,GAAG,GAAGqwB,QAAQ,CAARA,cAAZ,eAAYA,CAAZ;AAEA8K,kEAAW,YAAYzqC,MAAM,CAA7ByqC,cAAW,CAAXA;AAEA,MAAMC,QAAQ,GAAG/K,QAAQ,CAARA,cAAjB,cAAiBA,CAAjB;AAEAgL,gFAAiB,yBAAjBA,IAAiB,CAAjBA;AAEAC,6EAAc,CAACjL,QAAQ,CAARA,cAAD,kBAACA,CAAD,QAAdiL,MAAc,CAAdA;AAEAC,iFAAgB,eAAhBA,QAAgB,CAAhBA;AAZJ;;AAeA,IAAMN,cAAc,GAAG,SAAjBA,cAAiB,+BAAkC;AAErD,MAAMpoC,MAAM,GAAGu/B,+EAAqB,eAAevB,gFAAf,CAApC;AAEA,MAAMxvB,MAAM,GAAGgvB,QAAQ,CAARA,cAAf,gCAAeA,CAAf;AAEAwC,6EAAW,CAAC;AAAEniC,UAAM,EAAR;AAAUmC,UAAM,EAAhB;AAAkBwO,UAAM,EAAxB;AAA0Bm6B,gBAAY,EAAEnL,QAAQ,CAARA,cAAxC,YAAwCA,CAAxC;AAA8EyC,cAAU,EAAE3jC,IAAI,CAAJA;AAA1F,GAAD,CAAX0jC;AAEA,MAAM4I,MAAM,GAAGpL,QAAQ,CAARA,cAAf,sBAAeA,CAAf;;AAEA,MAAGrjB,IAAI,IAAP,SAAmB;AACfyuB,UAAM,CAANA;AACA;AACH;;AAAA;AAEDN,kEAAW,eAAezqC,MAAM,CAAhCyqC,cAAW,CAAXA;AAEAM,QAAM,CAANA,0BAAiC,YAAM;AACnC,QAAMC,MAAM,GAAGr8B,QAAQ,CAARA,cAAf,QAAeA,CAAf;AACAq8B,UAAM,CAANA;AACAA,UAAM,CAANA;AACAA,UAAM,CAANA,MAAaD,MAAM,CAANA,QAAbC;AACAr8B,YAAQ,CAARA;AACAA,YAAQ,CAARA,wEAA0ElQ,IAAI,CAA9EkQ;AACA,QAAMs8B,GAAG,GAAGt8B,QAAQ,CAARA,cAAZ,4BAAYA,CAAZ;;AACA,WAAOs8B,GAAG,CAAV,YAAuB;AACnBA,SAAG,CAAHA,YAAgBA,GAAG,CAAnBA;AACF;;AACFA,OAAG,CAAHA;AAXJF;AAjBJ;;AAgCA,IAAMT,iBAAiB,GAAG,SAApBA,iBAAoB,2EAA8E;AAEpG,MAAMtpC,KAAK,GAAGsgC,oEAAU,CAAC;AAAEzgC,OAAG,EAAEpC,IAAI,CAAJA,WAAgBA,IAAI,CAAJA,UAAeoC;AAAtC,GAAD,EAA8Cs/B,gFAA9C,EAAxB,MAAwB,CAAxB;AAEA,MAAM/kB,KAAK,GAAGzM,QAAQ,CAARA,WAAoB+B,QAAQ,CAA5B/B,SAAd,IAAcA,CAAd;AAEAgC,QAAM,CAANA;AAEAC,uEAAc,CAAC;AAAE5G,QAAI,EAAEvL,IAAI,CAAZ;AAAmBgrB,kBAAc,EAAEhrB,IAAI,CAAvC;AAAwDuC,SAAK,EAA7D;AAA+DhC,eAAW,EAAEP,IAAI,CAACO;AAAjF,GAAD,EAAiG0R,QAAQ,CAAzG,iBAAdE,KAAc,CAAdA;AAEAs6B,4EAAa,CAACvL,QAAQ,CAARA,cAAD,cAACA,CAAD,EAAyC;AAAElhC,QAAI,EAAN;AAAQ0sC,cAAU,EAAE1sC,IAAI,CAAJA,SAApB;AAA0C2sC,wBAAoB,EAAE3sC,IAAI,CAAJA,yBAA8B;AAA9F,GAAzC,CAAbysC;AAEAG,2EAAU,OAAO1L,QAAQ,CAARA,cAAP,cAAOA,CAAP,EAAV0L,IAAU,CAAVA;AAEAC,uEAAW,CAAC3L,QAAQ,CAARA,cAAD,iBAACA,CAAD,QAAX2L,MAAW,CAAXA;AAEA7L,qEAAU,CAAChhC,IAAI,CAAL,UAAVghC,QAAU,CAAVA;;AAEA,MAAGnjB,IAAI,KAAP,SAAqB;AAEjBqjB,YAAQ,CAARA,6DAAsEv/B,UAAU,CAAhFu/B;AAEA,QAAM0K,IAAI,GAAG1K,QAAQ,CAARA,cAAb,4BAAaA,CAAb;AACA0K,QAAI,CAAJA,aAAkB5rC,IAAI,CAAtB4rC;AACAA,QAAI,CAAJA;AACAA,QAAI,CAAJA;AAEA,QAAMtwB,IAAI,GAAG4lB,QAAQ,CAARA,cAAb,4BAAaA,CAAb;AACA5lB,QAAI,CAAJA,aAAkBtb,IAAI,CAAtBsb;AACAA,QAAI,CAAJA;AACAA,QAAI,CAAJA;AAEA,QAAMwxB,KAAK,GAAG58B,QAAQ,CAARA,qBAAd,IAAcA,CAAd;AAEAy0B,SAAK,CAALA,oBAA0B,cAAE;AAAA,aAAIoI,EAAE,CAAFA,gBAAJ;AAA5BpI;AACH;;AAEDtyB,YAAU,CAAC,YAAM;AAEb,QAAG9Q,MAAM,CAAT,gBAA0B;AACtB;AACA,UAAMyrC,YAAY,GAAG98B,QAAQ,CAARA,iBAArB,uBAAqBA,CAArB;AACQ88B,kBAAY,CAAZA,QAAqB,uBAAW;AAAA,eAAIC,WAAW,CAAXA,cAAJ,gBAAIA,CAAJ;AAAhCD;AACR,UAAME,UAAU,GAAGh9B,QAAQ,CAARA,iBAAnB,yBAAmBA,CAAnB;AACQg9B,gBAAU,CAAVA,QAAmB,qBAAS;AAAA,eAAIC,SAAS,CAATA,cAAJ,gBAAIA,CAAJ;AAA5BD;AACX;AARL76B,GAAU,CAAVA;AArCJ,E;;;;;;;;;;;;;;;;;;;;;;;;;AChJA;AACA;AACA;AACA;AACA;AACA;AAEO,IAAM0tB,+BAA+B,GAAG,SAAlCA,+BAAkC,aAAc;AAAA,wBAEtCrzB,yDAFsC;AAAA,MAEjDnL,MAFiD;;AAIzD,MAAM4O,QAAQ,GAAG,SAAXA,QAAW,SAAU;AAEvB,QAAM8B,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEA+B,YAAQ,CAARA;AAEA,QAAMC,MAAM,GAAGwc,gDAAf;AACAxc,UAAM,CAANA;AAEAC,yEAAc,CAAC;AAACzO,YAAM,EAANA;AAAD,KAAD,EAAWuO,QAAQ,CAAnB,SAAdE,MAAc,CAAdA;AAEA+wB,gFAAkB,CAAChzB,QAAQ,CAARA,iBAAD,mBAACA,CAAD,oBAAlBgzB,MAAkB,CAAlBA;AAXJ;;AAcA,MAAMljC,IAAI,GAAG2B,UAAU,CAAvB;AAEA,MAAG,CAAH,MAAU;AAEVyrC,8FAA2B,CAA3BA,QAA2B,CAA3BA;AAtBG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,IAAMtsB,aAAa,GAAnB;AAEO,IAAMssB,2BAA2B,GAAG,SAA9BA,2BAA8B,WAAY;AACnDtsB,eAAa,CAAbA;AADG;AAIA,IAAMyf,kBAAkB,GAAG,SAArBA,kBAAqB,GAAuF;AAAA,MAAtF1iB,IAAsF,uEAA/E,aAA+E;AAAA,MAAhEwvB,QAAgE;AAAA,MAAtDn7B,MAAsD,uEAA7Cwc,iDAA6C;AAAA,MAA9BtsB,GAA8B;AAAA,MAAzBmpC,YAAyB,uEAAV,KAAU;AAErH,MAAMK,IAAI,GAAG17B,QAAQ,CAARA,cAAb,qBAAaA,CAAb;AACA,MAAMoL,IAAI,GAAGpL,QAAQ,CAARA,cAAb,qBAAaA,CAAb;AAEA,YAASq7B,YAAY,GAAGK,IAAI,CAAJA,iBAAH,gBAAGA,CAAH,GAA6CA,IAAI,CAAJA,cAAzDL,gBAAyDK,CAAzDL;AACT,YAASA,YAAY,GAAGjwB,IAAI,CAAJA,iBAAH,gBAAGA,CAAH,GAA6CA,IAAI,CAAJA,cAAzDiwB,gBAAyDjwB,CAAzDiwB;;AAN4G,wBAS3F7+B,yDAT2F;AAAA,MAS7GI,KAT6G;AAAA,MAStGvL,MATsG;;AAWrH,MAAM+rC,OAAO,GAAG,8EAA+B,cAAE;AAAA,WAAIC,EAAE,CAAFA,UAAa5hC,gFAAjB;AAAjD,GAAgB,CAAhB;AAEA2hC,SAAO,CAAPA,QAAgB,cAAM;AAClBC,MAAE,CAAFA,OAAUtS,0GAAVsS,MAAUtS,CAAVsS;AADJD;AAIA,MAAMr7B,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEA+B,UAAQ,CAARA;;AAEA,MAAMgK,QAAQ,GAAG,SAAXA,QAAW,QAAS;AACtB6E,iBAAa,CAAbA,QAAsB,eAAG;AAAA,aAAIE,GAAG,CAAP,KAAO,CAAP;AAAzBF;AADJ;;AAIA,MAAM0sB,UAAU,GAAG,SAAbA,UAAa,QAAW;AAAA;;AAC1B,QAAMC,eAAe,GAAG,KAAK,CAAL,IAAU,gBAAQ;AACtC,aAAOxK,gFAAqB,eAAevB,mFAAf,CAA5B;AADJ,KAAwB,CAAxB;AAGA,QAAMgM,UAAU,GAAG9sC,4DAAmB,kDAAtC,eAAsC,EAAnBA,CAAnB;AACA,WAAOsJ,+CAAI,IAAX,UAAW,CAAX;AALJ;;AAQA,MAAMiG,QAAQ;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEPgV,sBAFO,GAEI,OAAO,CAAP,KAAa,cAAE;AAAA,uBAAIooB,EAAE,CAAFA,OAAJ;AAFnB,eAEI,CAAXpoB;AAFO;AAAA,qBAIK5e,yFAAqC4e,QAAQ,CAJlD,QAIK5e,CAJL;;AAAA;AAITrF,mBAJS,gBAITA;AACAA,mBAAK,GAAG,KAAK,CAAL,OAAa,gBAAI;AAAA,uBAAIlB,IAAI,CAAR;AAAzBkB,eAAQ,CAARA;AAEEysC,gCAPO,GAOcz9B,QAAQ,CAARA,cAPd,2BAOcA,CAArBy9B;AAEAjqC,oBATO,GASE8pC,UAAU,CATZ,KASY,CAAnB9pC;;AAEN,kBAAGyhB,QAAQ,CAAX,MAAkB;AACdjV,wBAAQ,CAARA,2FAA6FiV,QAAQ,CAArGjV;AADJ,qBAEO;AACH3O,sBAAM,CAANA,iBAAwBmiC,2EAAW,CAAC;AAAEniC,wBAAM,EAAR;AAAUmC,wBAAM,EAAhB;AAAkBiqC,oCAAkB,EAAlBA;AAAlB,iBAAD,CAAnCpsC,GAA8E0a,QAAQ,CAAtF1a,MAAsF,CAAtFA;AACH;;AAEKqsC,sBAjBO,GAiBI19B,QAAQ,CAARA,cAjBJ,yBAiBIA,CAAX09B;AACAC,oBAlBO,GAkBE;AAAEtiC,oBAAI,EAAE4Z,QAAQ,CAAC5Z;AAAjB,eAATsiC;AAEAC,oBApBO,GAoBE59B,QAAQ,CAARA,cApBF,kCAoBEA,CAAT49B;AACAA,oBAAM,CAANA,YAAmB3oB,QAAQ,CAA3B2oB;AAEAC,4BAvBO,GAuBU79B,QAAQ,CAARA,cAvBV,6BAuBUA,CAAjB69B;AACAA,4BAAc,CAAdA,YAA2B5oB,QAAQ,CAAnC4oB;AAEAC,sBA1BO,GA0BI99B,QAAQ,CAARA,cA1BJ,2DA0BIA,CAAX89B;AACAA,sBAAQ,CAARA,YAAqB7oB,QAAQ,CAA7B6oB;;AAEN,kBAAGnwB,IAAI,KAAP,SAAqB,CAArB,OACO;AACHowB,qFAAe,mBAAfA,MAAe,CAAfA;AACAC,0EAAU,mBAAmB3sC,MAAM,CAAnC2sC,QAAU,CAAVA;AACH;;AAjCY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAR/9B,QAAQ;AAAA;AAAA;AAAd,GAAc,EAAd;;AAoCA;;AAEA;AACI;AACI+wB,cAAQ,GAAGhxB,QAAQ,CAARA,cAAXgxB,mBAAWhxB,CAAXgxB;AACA;;AACJ;AACIA,cAAQ,GAAGhxB,QAAQ,CAARA,cAAXgxB,qBAAWhxB,CAAXgxB;AACA;;AACJ;AACIA,cAAQ,GAAGhxB,QAAQ,CAARA,cAAXgxB,YAAWhxB,CAAXgxB;AACA;AATR;;AAYAhvB,QAAM,CAANA;AAEAC,uEAAc,CAAC;AAACxG,SAAK,EAAN;AAAiBpJ,SAAK,EAAEsgC,qEAAU,CAAC;AAAEzgC,SAAG,EAAHA;AAAF,KAAD;AAAlC,GAAD,EAA+C6P,QAAQ,CAAvD,SAAdE,MAAc,CAAdA;;AAEA,MAAG0L,IAAI,KAAP,SAAqB;AACjBqjB,YAAQ,CAARA;AACH;;AAEDA,UAAQ,CAARA,4DAAqE,gBAAQ;AACzEt1B,QAAI,CAAJA,0BAA+B,iBAAS;AACpC,UAAMjG,EAAE,GAAGgqB,KAAK,CAALA,OAAX;AACAxf,cAAQ,CAARA,EAAQ,CAARA;AAFJvE;AADJs1B;AAOA,MAAMv7B,EAAE,GAAG0nC,QAAQ,IAAIC,OAAO,CAAPA,CAAO,CAAPA,CAAvB;AACAp9B,UAAQ,CAARA;AAnGG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA,IAAMi+B,aAAa,GAAGj+B,QAAQ,CAARA,cAAtB,sBAAsBA,CAAtB;;AAEA,mBAAkB;AACdi+B,eAAa,CAAbA,0BAAwC,iBAAS;AAC7CC,cAAU,GAAGze,KAAK,CAALA,eAAbye;AADJD;AAGH;;AAEM,IAAM7N,eAAe,GAAG,SAAlBA,eAAkB,aAAqH;AAAA,MAAxGziB,IAAwG,uEAAjG,aAAiG;AAAA,MAAlFylB,YAAkF;AAAA,MAApEpxB,MAAoE,uEAA3Dwc,iDAA2D;AAAA,MAA5C2f,YAA4C;AAAA,MAA9BtjC,IAA8B;AAAA,MAAxBwgC,YAAwB,uEAAT,IAAS;;AAEhJ,MAAI;AAEA,QAAMvrC,IAAI,GAAGsjC,YAAY,IAAI3hC,UAAU,CAAvC;;AAEA,QAAG,CAAH,MAAU;AACNuO,cAAQ,CAARA;AACH;;AAND,0BAQmBxD,yDARnB;AAAA,QAQQnL,MARR;;AAUA;;AAEA;AACI;AACI2/B,gBAAQ,GAAGhxB,QAAQ,CAARA,cAAXgxB,mBAAWhxB,CAAXgxB;AACA;;AACJ;AACIA,gBAAQ,GAAGhxB,QAAQ,CAARA,cAAXgxB,qBAAWhxB,CAAXgxB;AACA;;AACJ;AACIA,gBAAQ,GAAGhxB,QAAQ,CAARA,cAAXgxB,YAAWhxB,CAAXgxB;AACA;AATR;;AAYA,QAAMjvB,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,YAAQ,CAARA;AAEN,QAAM0K,KAAK,GAAGzM,QAAQ,CAARA,WAAoB+B,QAAQ,CAA5B/B,SAAd,IAAcA,CAAd;AAEAgC,UAAM,CAANA;AAEAnH,QAAI,GAAGA,IAAI,GAAGA,IAAI,CAAP,WAAGA,EAAH,GAAXA;AAEA;;AAEA;AACI;AACItJ,aAAK,GAAGzB,IAAI,CAAZyB;AACA;;AACJ;AACIA,aAAK,GAAGzB,IAAI,CAAZyB;AACA;;AACJ;AACIA,aAAK,GAAIzB,IAAI,CAAbyB;AACA;;AACJ;AACIA,aAAK,GAAGzB,IAAI,CAAZyB;AACA;AAZR;;AAaC;AAED,QAAM6sC,WAAW,GAAGrT,oFAA8Bt5B,UAAU,CAA5D,KAAoBs5B,CAApB;AACA,QAAMsT,WAAW,GAAGD,WAAW,GAAGA,WAAW,CAAC7sC,KAAK,CAApB,IAAc,CAAd,GAA/B;AACA,QAAMW,GAAG,GAAGpC,IAAI,CAAJA,SAAcA,IAAI,CAAJA,UAAeA,IAAI,CAAJA,UAAfA,MAAdA,KAAZ;AACA,QAAMuC,KAAK,GAAGsgC,oEAAU,CAAC;AAAEzgC,SAAG,EAAHA;AAAF,KAAD,EAAUs/B,8EAAV,EAAxB,MAAwB,CAAxB;AACA,QAAM1W,cAAc,GAAGvpB,KAAK,CAALA,kBAAwBw5B,+FAAyC15B,MAAM,CAA/C05B,4CAA/C,CAA+CA,CAA/C;AACA,QAAMuT,cAAc,GAAG/sC,KAAK,CAALA,iBAAuBA,KAAK,CAA5BA,iBAA8CA,KAAK,CAALA,eAAqBA,KAAK,CAALA,gBAArBA,iBAArE;AACA,QAAM0kB,OAAO,GAAG1kB,KAAK,CAALA,UAAgBA,KAAK,CAArBA,UAAgCA,KAAK,CAALA,eAAqBA,KAAK,CAALA,gBAArBA,UAAhD;AAEA,QAAMgtC,OAAO,GAAG;AACZ1jC,UAAI,EADQ;AAEZQ,UAAI,EAAE9J,KAAK,CAFC;AAGZc,WAAK,EAHO;AAIZmsC,SAAG,EAAEjtC,KAAK,GAAGA,KAAK,CAAR,MAJE;AAKZupB,oBAAc,EALF;AAMZtqB,aAAO,EAAEe,KAAK,CAALA,WANG;AAOZ6K,YAAM,EAAE7K,KAAK,CAALA,UAPI;AAQZ04B,cAAQ,EAAE14B,KAAK,CAALA,YARE;AASZ+sC,oBAAc,EATF;AAUZroB,aAAO,EAVK;AAWZza,SAAG,EAAEjK,KAAK,CAALA,MAAYA,KAAK,CAALA,kBAAwBF,MAAM,CAA1CE,QAAYA,CAAZA,GAXO;AAYZoF,UAAI,EAAEpF,KAAK,CAALA,OAAaA,KAAK,CAALA,mBAAyBF,MAAM,CAA5CE,QAAaA,CAAbA,2CAA0FA,KAAK,CAZzF,IAYNA,CAZM;AAaZ8sC,iBAAW,EAbC;AAcZI,WAAK,EAAEltC,KAAK,CAALA,iCAAgCA,KAAK,CAALA,mBAAhCA,IAAgCA,CAAhCA,IAdK;AAeZmtC,oBAAc,EAAEntC,KAAK,CAALA,UAAgByI,8CAAI,IAAIzI,KAAK,CAAbyI,OAAI,CAAJA,MAAhBzI,IAAgByI,CAAhBzI,GAAoD;AAfxD,KAAhB;AAkBA0Q,yEAAc,UAAUF,QAAQ,CAAlB,iBAAdE,KAAc,CAAdA;AAEA08B,kFAAe,OAAOptC,KAAK,CAAZ,QAAqBy/B,QAAQ,CAARA,cAArB,oBAAqBA,CAArB,EAAf2N,IAAe,CAAfA;;AAEA;AACI;AACI3N,gBAAQ,CAARA;AACAA,gBAAQ,CAARA;AACA;;AACJ;AACIA,gBAAQ,CAARA;AACA;;AACJ;AACIA,gBAAQ,CAARA;AACA;AAVR;;AAaAF,uEAAU,CAAChhC,IAAI,CAAL,UAAVghC,QAAU,CAAVA;;AAEA,QAAGnjB,IAAI,KAAP,SAAqB;AAEjBqjB,cAAQ,CAARA;AAEAA,cAAQ,CAARA,6DAAsEv/B,UAAU,CAAhFu/B;AAEA,UAAM0K,IAAI,GAAG1K,QAAQ,CAARA,cAAb,4BAAaA,CAAb;AACA0K,UAAI,CAAJA,aAAkB5rC,IAAI,CAAtB4rC;AACAA,UAAI,CAAJA;AACAA,UAAI,CAAJA;AAEA,UAAMtwB,IAAI,GAAG4lB,QAAQ,CAARA,cAAb,4BAAaA,CAAb;AACA5lB,UAAI,CAAJA,aAAkBtb,IAAI,CAAtBsb;AACAA,UAAI,CAAJA;AACAA,UAAI,CAAJA;AAEA,gBAASiwB,YAAY,GAAGK,IAAI,CAAJA,iBAAH,gBAAGA,CAAH,GAA6CA,IAAI,CAAJA,cAAzDL,gBAAyDK,CAAzDL;AACT,gBAASA,YAAY,GAAGjwB,IAAI,CAAJA,iBAAH,gBAAGA,CAAH,GAA6CA,IAAI,CAAJA,cAAzDiwB,gBAAyDjwB,CAAzDiwB;AAhHb,MAoHA;AACA;AACA;;;AAEAr7B,YAAQ,CAARA,+DAAiEzO,KAAK,CAAtEyO;AACAA,YAAQ,CAARA,wHAAuHzO,KAAK,CAA5HyO,0BAA2Iu+B,OAAO,CAAlJv+B;AAEA,QAAM4+B,YAAY,GAAG5+B,QAAQ,CAARA,cAArB,oCAAqBA,CAArB;AAEA,QAAG,CAACu+B,OAAO,CAAR,eAAwBA,OAAO,CAAPA,gBAA3B,GAAsDK,YAAY,CAAZA;AAEtDA,gBAAY,CAAZA,0BAAuC,iBAAS;AAC5C5+B,cAAQ,CAARA,2FAA6FzO,KAAK,CAAlGyO;AACA,UAAM6+B,OAAO,GAAG,UAAU,CAAV,aAAwB,aAAC;AAAA,eAAIroC,CAAC,CAADA,kCAAoCjF,KAAK,CAALA,KAAxC,WAAwCA,EAAxC;AAAzC,OAAgB,CAAhB;AACA,UAAMutC,IAAI,GAAG9+B,QAAQ,CAARA,cAAb,gCAAaA,CAAb;AACA8+B,UAAI,CAAJA;AACAD,aAAO,CAAPA,QAAgB,kBAAU;AACtBC,YAAI,CAAJA,4BAA0BC,MAAM,CAAhCD;AADJD;AALJD;AA/HJ,IAyIE,UAAS;AAEP7pC,WAAO,CAAPA;AAEAoN,cAAU,CAAC,YAAM;AAEb;AACI;AACInC,kBAAQ,CAARA;AACA;;AACJ;AACIA,kBAAQ,CAARA;AACA;AANR;AAFJmC,KAAU,CAAVA;AAWH;AA1JE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBP,IAAM68B,YAAY,GAAG,SAAfA,YAAe,GAAM;AAEvB,MAAM7f,KAAK,GAAGnf,QAAQ,CAARA,cAAd,cAAcA,CAAd;AACA,MAAMi/B,MAAM,GAAG9f,KAAK,CAALA,cAAf,kBAAeA,CAAf;AACM8f,QAAM,CAANA;AAAAA,uEAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBC,sBADyB,GACd/f,KAAK,CAALA,cADc,gBACdA,CAAX+f;AACAA,sBAAQ,CAARA;;AAFyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAjCD;;AAAAA;AAAAA;AAAAA;AAAAA;AAJV;;AAcO,IAAMz7B,kBAAkB,GAAG;AAC9Bw7B,cAAY,EAAZA;AAD8B,CAA3B,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMG,sBAAsB,GAAG,SAAzBA,sBAAyB,sBAAyB;AAE3D,MAAMp9B,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;;AAHqD,wBAKxCvF,yDALwC;AAAA,MAKnDnL,MALmD;;AAO3D,MAAM8tB,KAAK,GAAG9tB,MAAM,CAANA,kBAAyB2O,QAAQ,CAARA,cAAzB3O,cAAyB2O,CAAzB3O,GAAd;AAEA,MAAM2Q,MAAM,GAAG3Q,MAAM,CAANA,kBACO8tB,KAAK,CAALA,cADP9tB,gBACO8tB,CADP9tB,GAEOmtB,iDAFtB;AAGMxc,QAAM,CAANA;AAEN,MAAM8kB,MAAM,GAAG3H,KAAK,CAALA,cAAf,sBAAeA,CAAf;AACM2H,QAAM,CAANA,YAAmBr1B,UAAU,CAA7Bq1B;AAENyX,SAAO,CAAPA,YAAoBA,OAAO,CAAPA,aAApBA;AACAA,SAAO,CAAPA,kBAA0BA,OAAO,CAAPA,mBAA1BA;AAEAA,SAAO,CAAPA,YAAoBA,OAAO,CAAPA,aAApBA;AACAA,SAAO,CAAPA,mBAA2BA,OAAO,CAAPA,oBAA3BA;AAEAt8B,uEAAc,UAAUF,QAAQ,CAAlB,SAAdE,MAAc,CAAdA;AAEA,MAAMm9B,YAAY,GAAGjgB,KAAK,CAALA,cAArB,qBAAqBA,CAArB;;AAEA,oBAAiB;AAEb,QAAMkgB,wBAAwB,GAAG,SAA3BA,wBAA2B,GAAM;AAErC,UAAMC,gBAAgB,GAAGngB,KAAK,CAALA,cAAzB,uBAAyBA,CAAzB;;AAEA,UAAMogB,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAE5BC,6FAAkB,CAAC/tC,UAAU,CAAX,IAAlB+tC,gBAAkB,CAAlBA;AAEA,YAAIjzB,KAAK,GAAT;;AAEA,YAAMkzB,aAAa,GAAG,SAAhBA,aAAgB,uBAA0B;AAC5CC,yBAAe,CAAfA,SAAe,CAAfA;AACAN,sBAAY,CAAZA,YAAyB7yB,KAAK,GAALA,uBAAzB6yB;AACA7yB,eAAK;AACLozB,mBAAS,CAATA;AACAP,sBAAY,CAAZA,0BAAuC,aAAK;AACxCK,yBAAa,YAAbA,SAAa,CAAbA;AADJL,aAEG;AAAE5I,gBAAI,EAAE;AAAR,WAFH4I;AALJ;;AAUAK,qBAAa,oBAAbA,gBAAa,CAAbA;AAhBJ;;AAmBAF,uBAAiB;AAvBnB;;AA2BAH,gBAAY,CAAZA;AACAA,gBAAY,CAAZA,uDAAoE;AAAE5I,UAAI,EAAE;AAAR,KAApE4I;AACAA,gBAAY,CAAZA,oDAAiE;AAAE5I,UAAI,EAAE;AAAR,KAAjE4I;AAEAA,gBAAY,CAAZA;AACH;;AAEDQ,4BAA0B,CAA1BA,MAA0B,CAA1BA;AAEA,MAAMC,iBAAiB,GAAG1gB,KAAK,CAALA,cAA1B,yBAA0BA,CAA1B;AACA,MAAM2gB,QAAQ,GAAG3gB,KAAK,CAALA,cAAjB,yBAAiBA,CAAjB;AACA,MAAM4gB,YAAY,GAAGD,QAAQ,CAARA,cAArB,eAAqBA,CAArB;AAEA,MAAMhwC,IAAI,GAAG2B,UAAU,CAAVA,YAAuBA,UAAU,CAAVA,MAAiB8sC,OAAO,CAAPA,MAArD,SAAoC9sC,CAApC;;AAEA,MAAMiuC,eAAe,GAAG,SAAlBA,eAAkB,kBAAqB;AAEzC5d,aAAS,CAATA;AACAA,aAAS,CAATA;;AAEA,cAAS;AACLke,UAAI,CAAJA;AACAA,UAAI,CAAJA;AACH;AARL;;AAWA,MAAMC,YAAY,GAAG,SAAfA,YAAe,sBAAyB;AAE1Cne,aAAS,CAATA;AAEA,QAAMke,IAAI,GAAG7gB,KAAK,CAALA,cAAb,QAAaA,CAAb;AACA,QAAMhkB,IAAI,GAAG6kC,IAAI,CAAJA,cAAb,eAAaA,CAAb;AACM7kC,QAAI,CAAJA;AAEN,WAAO;AAAE6kC,UAAI,EAAN;AAAQ7kC,UAAI,EAAJA;AAAR,KAAP;AARJ;;AAWA4kC,cAAY,CAAZA;AAAAA,uEAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAE7BG,8BAF6B,GAEV/gB,KAAK,CAALA,cAFU,uBAEVA,CAAnB+gB;AACAC,4BAH6B,GAGZhhB,KAAK,CAALA,cAHY,qBAGZA,CAAjBghB;;AAEAC,+BAL6B;AAAA,oFAKT;AAAA;AAAA;AAAA;AAAA;AAEtBrQ,2FAAU,iDAAVA,KAAU,CAAVA;AAEA5tB,oCAAU,CAAC,YAAM;AAEbu9B,2CAAe,oBAAfA,QAAe,CAAfA;;AAFa,gDAIoCO,YAAY,mBAJhD,kBAIgD,CAJhD;AAAA,gCAICxrB,WAJD;AAAA,gCAIoB4rB,WAJpB;;AAMbA,uCAAW,CAAXA;AAAAA,kGAAsC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAElCvwC,4CAAI,CAAJA,SACMugC,mFAAkB,aAAavgC,IAAI,CAAjB,0BAA4C,IAAI,CAAJ,YAAiB,aAAC;AAAA,iDAAI0G,CAAC,CAAL;AAAlB,6CAAmC,IAAI,CAAJ,YAAiB,aAAC;AAAA,iDAAIA,CAAC,CAAL;AAAlB,2CAAnC,MAA0E1G,IAAI,CAAJA,UAD9IA,GACwB,CADxBA,GAEMsgC,4EAAe,+CAFrBtgC,KAEqB,CAFrBA;AAIA4vC,uDAAe,mBAAfA,WAAe,CAAfA;AANkC,gDAQW5vC,IAAI,CAAJA,SACvCmwC,YAAY,iBAD2BnwC,oBAC3B,CAD2BA,GAEvCmwC,YAAY,iBAVgB,gBAUhB,CAVgB,EAQpBK,SARoB,eAQHC,SARG;AAYlCA,iDAAS,CAATA,0BAAoC,iBAAS;AACzCb,yDAAe,iBAAfA,SAAe,CAAfA;AACAO,sDAAY,oBAAZA,eAAY,CAAZA;AAFJM;;AAZkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAtCF;;AAAAA;AAAAA;AAAAA;AAAAA;AANM,6BAAVl+B,GAAU,CAAVA;;AAJsB;AAAA;AAAA;AAAA;AAAA;AAAA;AALS;;AAAA;AAAA;AAAA;AAAA,iBAK7Bi+B;;AAL6B;AAAA,qBAoC7BA,iBApC6B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAvCL;;AAAAA;AAAAA;AAAAA;AAAAA;AAuCAjP,qEAAU,CAAChhC,IAAI,CAAL,UAAVghC,KAAU,CAAVA;AAEA,MAAI0P,iBAAiB,GAAGrhB,KAAK,CAALA,cAAxB,uBAAwBA,CAAxB;AAEA;AAxIG;;AA2IP,IAAMygB,0BAA0B,GAAG,SAA7BA,0BAA6B,SAAU;AAEzC,MAAGvuC,MAAM,CAAT,iBAA2B;AAE3B,MAAMqc,SAAS,GAAG1N,QAAQ,CAARA,cAAlB,oBAAkBA,CAAlB;AACA,MAAM5C,QAAQ,GAAG4C,QAAQ,CAARA,cAAjB,mBAAiBA,CAAjB;AAEA5C,UAAQ,CAARA;AAEA,MAAIqjC,UAAU,GAAd;AACA,MAAIjqC,CAAC,GAAL;AAEA,MAAIosB,QAAQ,GAAGC,WAAW,CAAC,YAAW;AAC9B,QAAGrsB,CAAC,GAAJ,GAAU;AACN4G,cAAQ,CAARA;AACAsQ,eAAS,CAATA;AAFJ,WAGO;AACHtQ,cAAQ,CAARA;AACAsQ,eAAS,CAATA;AACH;;AACDlX,KAAC;AACD,QAAGA,CAAC,IAAJ,YAAoBkqC,aAAa,CAAbA,QAAa,CAAbA;AATF,KAA1B,IAA0B,CAA1B;AAZJ,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtJA;AAEA;AAEO,IAAM/D,WAAW,GAAG,SAAdA,WAAc,sBAAyB;AAEhD,MAAI5pC,KAAK,sBAAQ,QAAQ,IAAI,CAAJ,UAAe,gBAAQ;AAC5C,WAAO;AACH+lB,YAAM,EAAEzd,IAAI,CAAJA,eADL,WACKA,EADL;AAEHnK,cAAQ,EAAEmK,IAAI,CAACnK;AAFZ,KAAP;AADJ,GAAyB,CAAR,CAAR,CAAT;;AAOA,MAAMyvC,aAAa,GAAG,KAAK,CAAL,OAAa,gBAAgB;AAC/CC,KAAC,CAAC5J,CAAC,CAAH4J,QAAC,CAADA,GAAgBA,CAAC,CAAC5J,CAAC,CAAH4J,QAAC,CAADA,IAAhBA;AACAA,KAAC,CAAC5J,CAAC,CAAH4J,QAAC,CAADA,QAAqB,MAAM,CAAN,eAAsB,oBAAQ;AAAA,aAAI1vC,QAAQ,CAARA,SAAkB8lC,CAAC,CAADA,SAAtB,IAAsBA,EAAtB;AAA9B,OAArB4J;AACAA,KAAC,CAAC5J,CAAC,CAAH4J,QAAC,CAADA,SAAsBA,CAAC,CAAC5J,CAAC,CAAH4J,QAAC,CAADA,UAAtBA;AACAA,KAAC,CAAC5J,CAAC,CAAH4J,QAAC,CAADA,YAAyB5J,CAAC,CAA1B4J;AACA;AALkB,KAMnBhpC,MAAM,CAANA,OANH,IAMGA,CANmB,CAAtB;AAQA,MAAMymC,WAAW,GAAGtrC,KAAK,CAAzB;AAEA,MAAMgP,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;;AAEA,MAAGq+B,WAAW,KAAd,GAAsB;AAElBwC,SAAK,CAALA;AAFJ,SAIO;AAEHA,SAAK,CAALA;AAEA9+B,YAAQ,CAARA;AAEAE,yEAAc,KAAKF,QAAQ,CAAb,SAAdE,KAAc,CAAdA;AAEA4+B,SAAK,CAALA,0BAAgC,iBAAS;AAErC7gC,cAAQ,CAARA;AAEA,UAAMgC,MAAM,GAAGhC,QAAQ,CAARA,cAAf,gCAAeA,CAAf;AAEAgC,YAAM,CAANA;AAEAD,cAAQ,CAARA;AAEAE,2EAAc,CAAC;AAAE0+B,qBAAa,EAAbA;AAAF,OAAD,EAAoB5+B,QAAQ,CAA5B,SAAdE,MAAc,CAAdA;AAVJ4+B;AAYH;AA7CE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJP;AACA;AACA;AACA;AACA;AAEO,IAAM5E,cAAc;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpBl6B,oBAFoB,GAET/B,QAAQ,CAARA,cAFS,UAETA,CAAX+B;AAENA,oBAAQ,CAARA;AAEAC,kBAAM,CAANA;AAN0B;AAAA,mBAQNrD,iDAAQ,CARF,MAQE,CARF;;AAAA;AAQpB1E,iBARoB,gBAQpBA;AAEAkE,mBAVoB,GAUVlE,KAAK,CAALA,yBAA+BA,KAAK,CAV1B,OAUpBkE;AAVoB;AAAA,mBAYL2iC,6DAAc,CAZT,OAYS,CAZT;;AAAA;AAYpBC,kBAZoB,gBAYpBA;;AAZoB,kBAcvBA,MAAM,CAANA,mBAduB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAgBpBznC,mBAhBoB,GAgBV,MAAM,CAAN,aAAoB,iBAAK;AAAA,qBAAIW,KAAK,CAALA,iBAAJ;AAAzB,eAhBU,EAgBpBX;AAEFirB,kBAlBsB,KAkBtBA;;AAEEyc,2BApBoB,GAoBF,SAAlBA,eAAkB,UAAa;AACjC;;AACA;AACI;AACI3pC,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;;AACJ;AACIA,uBAAK,GAALA;AACA;AApCR;;AAsCA;AA5DsB,aAoBpB2pC;;AA2CAC,oBA/DoB,GA+DT,SAAXA,QAAW,kBAAqB;AAClC;;AACA,sBAAO5vC,MAAM,CAAb;AACI;AACIgG,uBAAK,GAAG2pC,eAAe,CAAvB3pC,OAAuB,CAAvBA;AACA;;AACJ;AACIA,uBAAK,GAAG2pC,eAAe,CAAvB3pC,OAAuB,CAAvBA;AALR;;AAOA;AAxEsB,aA+DpB4pC;;AAYNC,uEAAY,OAAZA,OAAY,CAAZA,MAAiC,qBAAa;AAC1C,kBAAMC,YAAY,GAAGC,SAAS,CAATA,QAArB;;AACA,mBAAK,IAAL,uBAAgC;AAC5B7c,sBAAM,CAANA,KAAY;AACRltB,uBAAK,EAAE4pC,QAAQ,CAACznC,QAAQ,CAAT,KAAS,CAAT,EADP,MACO,CADP;AAERsJ,uBAAK,EAAEtJ,QAAQ,CAFP,KAEO,CAFP;AAGR+S,uBAAK,EAAE40B,YAAY;AAHX,iBAAZ5c;AAKH;;AAED7zB,qGAA+C,wBAAkB;AAC7D,oBAAGoS,KAAK,GAALA,KAAazL,KAAK,CAALA,UAAhB,GAAmC;AAC/BA,uBAAK,CAALA,OAAK,CAALA;AADJ,uBAEO;AACHA,uBAAK,CAALA,OAAK,CAALA;AACH;AALL3G;AAQAA;AAEA,kBAAMiF,IAAI,GAAV;AACA,kBAAIqd,MAAM,GAAV;AAEAuR,oBAAM,CAANA,IAAW,wBAAiB;AACxB,oBAAGzhB,KAAK,GAAR,GAAc;AACVkQ,wBAAM,CAANA;AACH;;AACD,oBAAGlQ,KAAK,KAAR,GAAgB;AACZnN,sBAAI,CAAJA;AACAqd,wBAAM,GAANA;AACH;;AACD,oBAAG,aAAalQ,KAAK,GAArB,GAA2B;AACvBkQ,wBAAM,CAANA;AACH;;AACD,oBAAGlQ,KAAK,KAAR,GAAgB;AACZnN,sBAAI,CAAJA;AACAqd,wBAAM,GAANA;AACH;;AACD,oBAAG,aAAalQ,KAAK,GAArB,IAA4B;AACxBkQ,wBAAM,CAANA;AACH;;AACD,oBAAGlQ,KAAK,KAAR,IAAiB;AACbnN,sBAAI,CAAJA;AACAqd,wBAAM,GAANA;AACH;AArBLuR;AAwBAtiB,mFAAc,CAAC;AAAEtM,oBAAI,EAAJA;AAAF,eAAD,EAAWoM,QAAQ,CAAnB,SAAdE,MAAc,CAAdA;AAEA,kBAAMo/B,iBAAiB,GAAG,WAA1B,QAA0B,EAA1B;AAEA,kBAAMC,UAAU,GAAGthC,QAAQ,CAARA,iBAAnB,0BAAmBA,CAAnB;AAEAshC,wBAAU,CAAVA,QAAmB,uBAAiB;AAChC,oBAAGx+B,KAAK,KAAR,mBAAgC;AAC5By+B,sBAAI,CAAJA;AACH;AAHLD;AArDJJ;;AA3E0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAdjF,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB,C;;;;;;;;;;;;;;;;;;;;;;;;;ACNP;AACA;AACA;AAEA;;AAEA,IAAMuF,iBAAiB,GAAG,SAApBA,iBAAoB,wBAA2B;AACjDx/B,QAAM,CAANA,2CAAkD,aAAK;AACnD,QAAMy/B,OAAO,GAAGjrC,CAAC,CAADA,qBAAhB;;AACA,QAAG87B,oEAAU,UAAUjgC,KAAK,CAALA,WAAvB,KAAa,CAAb,EAAgD;AAC5CmE,OAAC,CAADA;AACA;AACH;AALLwL;AAQA,MAAM0/B,UAAU,GAAG1/B,MAAM,CAANA,cAAnB,iDAAmBA,CAAnB;AAEA,MAAMg7B,UAAU,GAAGh9B,QAAQ,CAARA,iBAAnB,yBAAmBA,CAAnB;AACMg9B,YAAU,CAAVA,QAAmB,aAAK;AACpB,QAAGxmC,CAAC,CAADA,WAAakrC,UAAU,CAAvBlrC,WAAmCA,CAAC,CAADA,oBAAsBkrC,UAAU,CAAVA,QAA5D,OAAsF;AAClFlrC,OAAC,CAADA;AACH;AAHLwmC;AAMN,MAAI1L,GAAG,GAAGj/B,KAAK,CAALA,WAAV;AACAi/B,KAAG,CAAHA,QAAYA,GAAG,CAAHA,SAAaA,GAAG,CAA5BA;AACAA,KAAG,GAAGqB,oEAAU,CAAhBrB,GAAgB,CAAhBA;AACAqQ,+FAAuB,CAAvBA,GAAuB,CAAvBA;AAEA;AAvBJ;;AA0BA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,QAAoC;AAAA,MAA5BzF,YAA4B,uEAAbn8B,QAAa;AAE/DmC,YAAU,CAAC,YAAM;AAEb,QAAMu/B,UAAU,GAAGvF,YAAY,CAAZA,wBAA8B1c,KAAK,CAALA,eAA9B0c,QAAnB,4BAAmBA,EAAnB;AACA,QAAM9pC,KAAK,GAAGqvC,UAAU,CAAxB;AAEAC,iGAAuB,CAAvBA,KAAuB,CAAvBA;AALM,KAAVx/B,GAAU,CAAVA;AAFJ;;AAYO,IAAMqxB,WAAW,GAAG,SAAdA,WAAc,aAAc;AAAA,MAE7BniC,MAF6B,GAE+CwwC,UAF/C;AAAA,MAErBruC,MAFqB,GAE+CquC,UAF/C;AAAA,MAEb7/B,MAFa,GAE+C6/B,UAF/C;AAAA,MAELxvC,KAFK,GAE+CwvC,UAF/C;AAAA,8BAE+CA,UAF/C;AAAA,MAEE1F,YAFF;AAAA,8BAE+C0F,UAF/C;AAAA,MAE2BpO,UAF3B;AAIrC,MAAMxO,MAAM,GAAGjlB,QAAQ,CAARA,cAAf,UAAeA,CAAf;AACMilB,QAAM,CAANA;AAENjjB,QAAM,CAANA;AAEAxO,QAAM,CAANA,QAAe,kBAAY;AACvB89B,OAAG,CAAHA;AACAA,OAAG,CAAHA,eAAmBA,GAAG,CAAHA,gBAAnBA;AACAA,OAAG,CAAHA,WAAeA,GAAG,CAAHA,YAAfA;AACAA,OAAG,GAAGqB,oEAAU,CAAhBrB,GAAgB,CAAhBA;AAbiC,GASrC99B,EATqC,CAgBrC;;AAEAyO,uEAAc,CAAC;AAAEzO,UAAM,EAAR;AAAUigC,cAAU,EAAVA;AAAV,GAAD,EAAyBxO,MAAM,CAA/B,SAAdhjB,MAAc,CAAdA;AAEA,MAAImJ,IAAI,GAAGpL,QAAQ,CAARA,iDAAX,8BAAWA,EAAX;AACA,MAAI07B,IAAI,GAAG17B,QAAQ,CAARA,iDAAX,8BAAWA,EAAX;;AAEA,MAAG3O,MAAM,CAAT,gBAA0B;AACtB+Z,QAAI,CAAJA;AACAswB,QAAI,CAAJA;AACH;;AAEDv5B,YAAU,CAAC,YAAM;AACbq/B,qBAAiB,CAACnvC,KAAK,IAAImB,MAAM,CAAhB,CAAgB,CAAhB,UAAjBguC,MAAiB,CAAjBA;AADM,KAAVr/B,GAAU,CAAVA;AAIAg6B,cAAY,CAAZA,uGAA0G,aAAC;AAAA,WAAIyF,sBAAsB,kBAA1B,MAA0B,CAA1B;AAA3GzF;AACAA,cAAY,CAAZA,uGAA0G,aAAC;AAAA,WAAIyF,sBAAsB,kBAA1B,MAA0B,CAA1B;AAA3GzF;AAEAn8B,UAAQ,CAARA,gCAAyC,aAAY;AACjDoL,QAAI,CAAJA;AADJpL;AAIAA,UAAQ,CAARA,iCAA0C,aAAY;AAClD07B,QAAI,CAAJA;AADJ17B;AAvCG;AA4CA,IAAM8hC,iBAAiB,GAAG,SAApBA,iBAAoB,yBAA4B;AAEzD,MAAMC,YAAY,GAAG/hC,QAAQ,CAARA,cAArB,UAAqBA,CAArB;AACM+hC,cAAY,CAAZA;AAEN//B,QAAM,CAANA;AACAA,QAAM,CAANA;AAEAhC,UAAQ,CAARA;AACAA,UAAQ,CAARA;AAEAgiC,QAAM,CAANA,QAAe,wBAAkB;AAE7B,QAAMvO,UAAU,GAAGwO,KAAK,CAALA,wBAA8Bn/B,KAAK,GAAtD;AAEA,QAAMgkB,MAAM,GAAG9mB,QAAQ,CAARA,uEAAf,KAAeA,CAAf;AACM8mB,UAAM,CAANA,kDAAgDmb,KAAK,CAALA,UAAhDnb,yDAA6Gmb,KAAK,CAALA,UAA7Gnb;AACN,QAAMh3B,IAAI,GAAG;AAAEuL,UAAI,EAAE4mC,KAAK,CAALA,UAAR;AAAkCrP,gBAAU,EAAEqP,KAAK,CAALA,UAA9C;AAA0EzuC,YAAM,EAAEyuC,KAAK,CAACzuC;AAAxF,KAAb;AACA,QAAMA,MAAM,GAAGu/B,+EAAqB,eAAevB,4EAAf,CAApC,CAP6B,CAS7B;;AAEAvvB,yEAAc,CAAC;AAAEzO,YAAM,EAAR;AAAUigC,gBAAU,EAAVA;AAAV,KAAD,EAAyBsO,YAAY,CAArC,SAAd9/B,MAAc,CAAdA;AAEA,QAAMy/B,UAAU,GAAG1hC,QAAQ,CAARA,iDAAnB,iBAAmBA,EAAnB;AACM0hC,cAAU,CAAVA;AACNC,iGAAuB,CAACnuC,MAAM,CAA9BmuC,CAA8B,CAAP,CAAvBA;AAEA,QAAMO,iBAAiB,GAAGliC,QAAQ,CAARA,iDAA1B,aAA0BA,EAA1B;AACA,2BAAsBkiC,iBAAiB,CAAjBA;AAlB1BF;AAXG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFP;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;;;+EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAEGjgC,oBAFH,GAEc/B,QAAQ,CAARA,cAFd,UAEcA,CAAX+B;AAENA,oBAAQ,CAARA;AAEAC,kBAAM,CAANA;AAEAC,iFAAc,KAAKF,QAAQ,CAAb,SAAdE,MAAc,CAAdA;AAEMkgC,mBAVH,GAUaniC,QAAQ,CAARA,cAVb,kCAUaA,CAAVmiC;AAENA,mBAAO,CAAPA,oDAAqDryC,IAAI,CAAzDqyC;AACAA,mBAAO,CAAPA;AACAA,mBAAO,CAAPA;AAEAhgC,sBAAU,CAAC,YAAI;AACX,kBAAMigC,QAAQ,GAAGpiC,QAAQ,CAARA,cAAjB,8BAAiBA,CAAjB;AACA+9B,mFAAe,iBAAfA,MAAe,CAAfA;AAFJ57B,aAAU,CAAVA;AAKMu7B,oBArBH,GAqBc19B,QAAQ,CAARA,cArBd,8BAqBcA,CAAX09B;AACAA,oBAAQ,CAARA;AAENM,sEAAU,iBAAiB3sC,MAAM,CAAjC2sC,QAAU,CAAVA;AAEAqE,4EAAiB,OAAjBA,MAAiB,CAAjBA,MAAqC,iBAAS;AAE1C,kBAAG,CAACC,KAAK,CAAT,SAAmB;AAEnB,kBAAMC,OAAO,GAAG,KAAK,CAAL,aAAmB,gBAAI;AAAA,uBAAIC,IAAI,CAAJA,eAAoB1yC,IAAI,CAA5B;AAAvB,uBAAhB;AACA,kBAAM2yC,UAAU,GAAG,KAAK,CAAL,aAAmB,gBAAI;AAAA,uBAAID,IAAI,CAAJA,eAAoB1yC,IAAI,CAA5B;AAAvB,iBAAnB;AAEA,kBAAM4yC,SAAS,8CAAf,OAAe,CAAf;AAEA1gC,oBAAM,CAANA,6CAAoDygC,UAAU,CAA9DzgC,cAAoDygC,EAApDzgC;AACAA,oBAAM,CAANA;AAVJqgC;AA1BG;AAAA,mBAuCiB1jC,iDAAQ,CAvCzB,MAuCyB,CAvCzB;;AAAA;AAuCG1E,iBAvCH,gBAuCGA;AAEAkE,mBAzCH,GAyCalE,KAAK,CAALA,yBAA+BA,KAAK,CAzCjD,OAyCGkE;AAzCH;AAAA,mBA2CkB2iC,6DAAc,CA3ChC,OA2CgC,CA3ChC;;AAAA;AA2CGC,kBA3CH,gBA2CGA;;AA3CH,kBA6CAA,MAAM,CAANA,mBA7CA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AA+CGznC,mBA/CH,GA+Ca,MAAM,CAAN,aAAoB,iBAAK;AAAA,qBAAIW,KAAK,CAALA,iBAAJ;AAAzB,eA/Cb,EA+CGX;AAEN+oC,4EAAiB,eAAjBA,OAAiB,CAAjBA,MAA8C,iBAAS;AAEnD,kBAAGC,KAAK,CAALA,mBAAH,GAA+B;AAE/B,kBAAMK,SAAS,GAAG,KAAK,CAAL,aAAmB,gBAAI;AAAA,uBAAIH,IAAI,CAAJA,eAAoB1yC,IAAI,CAA5B;AAAzC,eAAkB,CAAlB;AAEA,kBAAG,CAAH,WAAe;AAEf,kBAAM8yC,eAAe,GAAGD,SAAS,CAAjC;AACA,kBAAME,aAAa,GAAGF,SAAS,CAATA,MAAtB;AAEA3iC,sBAAQ,CAARA,kDAA2D6iC,aAAa,IAAxE7iC;AAEAgC,oBAAM,CAANA,uCAA8C2L,IAAI,KAAJA,wBAA9C3L;AACAA,oBAAM,CAANA,uCAA8C2L,IAAI,KAAJA,uCAA9C3L,YAA8C2L,CAA9C3L;AACAA,oBAAM,CAANA,mDAA0D4gC,eAAe,CAAzE5gC,cAA0D4gC,EAA1D5gC;AAfJqgC;;AAjDG;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRP;AACA;AACA;AACA;AAEA;AACA;AAEO,IAAMS,iBAAiB,GAAG,SAApBA,iBAAoB,sDAAyD;AAAA,wBAE7CtmC,yDAF6C;AAAA,MAE9EnL,MAF8E;AAAA,MAEtEI,UAFsE;AAAA,MAE1D8R,QAF0D;;AAItF,MAAMxB,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACA,MAAMgC,MAAM,GAAGhC,QAAQ,CAARA,cAAf,sBAAeA,CAAf;AAGA,MAAG,CAAH,QARsF,QAQlE;;AAEpBgC,QAAM,CAANA;;AAEA,MAAG+gC,cAAc,CAAdA,uCAAsD,CAAzD,GAA6D;AACzDhhC,YAAQ,CAARA;AACAE,yEAAc,CAAC;AAAExM,QAAE,EAAEnB;AAAN,KAAD,EAAsByN,QAAQ,CAA9B,SAAdE,MAAc,CAAdA;AACA,QAAM2S,IAAI,GAAG5U,QAAQ,CAARA,cAAb,eAAaA,CAAb;AACM4U,QAAI,CAAJA,YAAiBA,IAAI,CAAJA,4BAAjBA,QAAiBA,CAAjBA;AAJV,SAMK,IAAGmuB,cAAc,CAAdA,qCAAoDA,cAAc,CAAdA,kBAAvD,cAAsG;AACvG,QAAMp1B,IAAI,GAAV;AACA,QAAM0tB,YAAY,GAAlB;AACA2H,6EAAU,uDAAVA,gBAAU,CAAVA;AAHC,SAIE;AAEH,QAAM/tC,OAAO,GAAGoB,wGAAoD5E,UAAU,CAF3E,QAEa4E,CAAhB,CAFG,CAEuF;;AAE1F,QAAG,CAAH,QAJG,QAIiB;;AAEpB,QAAGpB,OAAO,IAAIA,OAAO,CAAPA,SAAd,GAAkC;AAC9BA,aAAO,CAAPA,QAAgB,kBAAU;AACtB8M,gBAAQ,CAARA;AACAkhC,cAAM,CAANA,eAAsBA,MAAM,CAANA,MAAaA,MAAM,CAANA,oCAAbA,KAAtBA;AACAA,cAAM,CAANA,MAAaA,MAAM,CAANA,OAAc;AAAE/wC,aAAG,EAAE;AAAP,SAA3B+wC;AAHJhuC;AAKAgN,2EAAc,CAAC;AAAEhN,eAAO,EAAPA;AAAF,OAAD,EAAc8M,QAAQ,CAAtB,SAAdE,MAAc,CAAdA;AACH;AACJ;AApCE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRP;AACA;AACA;AACA;AAEA;;AAEA,IAAMihC,gBAAgB,GAAG,SAAnBA,gBAAmB,2BAA8B;AAEnD,MAAMje,MAAM,GAAGjlB,QAAQ,CAARA,cAAf,UAAeA,CAAf;AACMilB,QAAM,CAANA;AAENjjB,QAAM,CAANA;AAEArQ,QAAM,GAAG,MAAM,CAAN,OAAc,aAAC;AAAA,WAAIosB,CAAC,CAAL;AAAxBpsB,GAAS,CAATA;AAEAA,QAAM,CAANA,QAAe,iBAAS;AACpBuB,SAAK,CAALA,OAAaA,KAAK,CAALA,OAAaA,KAAK,CAALA,uBAA6BxC,+DAAsBwC,KAAK,CAArEA,IAA0CxC,CAA1CwC,GAAbA;AACA,QAAGA,KAAK,CAALA,uBAAH,QAAwCA,KAAK,CAALA,OAAaA,KAAK,CAALA,QAAbA;AACxCA,SAAK,CAALA,OAAaA,KAAK,CAALA,mCAAyCA,KAAK,CAA3DA;AACAA,SAAK,CAALA,OAAaA,KAAK,CAALA,OAAaA,KAAK,CAALA,uCAA6CA,KAAK,CAA/DA,OAAbA;AACAA,SAAK,CAALA,cAAoBA,KAAK,CAAzBA;AACAA,SAAK,CAALA,QAAcA,KAAK,CAALA,sDAA4DA,KAAK,CAALA,WAA1EA,IAA0EA,CAA1EA;AANJvB;AASA,MAAI2C,WAAW,GAAG,MAAM,CAAN,KAAY,iBAAK;AAAA,WAAIpB,KAAK,CAALA,uBAAJ;AAAnC,GAAkB,CAAlB;AACIoB,aAAW,GAAGA,WAAW,GAAGA,WAAW,CAAXA,YAAH,CAAGA,CAAH,GAAzBA;AAEJ2N,uEAAc,CAAC;AAAExM,MAAE,EAAJ;AAAM9D,UAAM,EAANA;AAAN,GAAD,EAAiBszB,MAAM,CAAvB,SAAdhjB,MAAc,CAAdA;AAEA;AAEAkhC,aAAW,GAAGnhC,MAAM,CAANA,wCAAdmhC,8BAAcnhC,EAAdmhC;AACAA,aAAW,CAAXA;AAEA,MAAMC,UAAU,GAAGzxC,MAAM,CAAzB;;AAEA,MAAGyxC,UAAU,KAAb,GAAqB;AACjBphC,UAAM,CAANA,8CAAqD,mBAAW;AAC5DqhC,aAAO,CAAPA;AACAA,aAAO,CAAPA;AAFJrhC;AAIH;;AAED,MAAMshC,kBAAkB,GAAG,SAArBA,kBAAqB,QAAS;AAChCnhC,cAAU,CAAC,YAAM;AACbghC,iBAAW,GAAGnhC,MAAM,CAANA,wCAAdmhC,wBAAcnhC,EAAdmhC;AACAJ,oBAAc,GAAGI,WAAW,CAAXA,oBAAjBJ;AACAQ,sBAAgB,GAAGJ,WAAW,CAAXA,oBAAnBI;AACAT,6FAAiB,yCAAjBA,WAAiB,CAAjBA;AAJM,OAAV3gC,IAAU,CAAVA;AADJ;;AASAmhC,oBAAkB;AAElBthC,QAAM,CAANA;AACAA,QAAM,CAANA;AAjDJ;;AAoDO,IAAM28B,eAAe,GAAG,SAAlBA,eAAkB,6BAAgC;AAE3D,MAAMlpC,EAAE,GAAGkY,IAAI,KAAJA,sBAAX;AAEA,MAAM61B,eAAe,GAAGvmC,gHAAyDA,yFAAzDA,CAAxB;;AAEA,MAAGumC,eAAe,CAAfA,SAAH,GAA+B;AAC3BN,oBAAgB,gCAAhBA,EAAgB,CAAhBA;AACH;AARE;AAWA,IAAMxG,UAAU,GAAG,SAAbA,UAAa,qBAAwB;AAE9C,MAAG,CAACz/B,uFAAgCnN,IAAI,CAAxC,MAAImN,CAAJ,EAAkD;AAElD,MAAItL,MAAM,GAAGsL,wGAAiDnN,IAAI,CAArDmN,QAA8DA,yFAA9DA,EAAb,IAAaA,CAAb;;AAEA,MAAGnN,IAAI,CAAJA,OAAH,aAA4B;AACxB,QAAMwE,WAAW,GAAG;AAChB+G,UAAI,EADY;AAEhB9L,WAAK,EAAEO,IAAI,CAAJA,mBAAwBP;AAFf,KAApB;AAIAoC,UAAM,2CAANA,MAAM,EAANA;AACH;;AAED,MAAGA,MAAM,CAANA,WAAH,GAAwB;AAExB,MAAM8D,EAAE,GAAGkY,IAAI,KAAJA,cAAX;AAEAu1B,kBAAgB,uBAAhBA,EAAgB,CAAhBA;AAlBG,E;;;;;;;;;;;;;;;;;;;;;ACtEP;AAEA;AAEO,IAAMjc,cAAc,GAAG,SAAjBA,cAAiB,2BAA8B;AAExD,MAAMxU,SAAS,GAAGphB,MAAM,CAAxB;AAEA,MAAM0Q,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAENC,QAAM,CAANA;AAEAC,uEAAc,CAAC;AAAEwQ,aAAS,EAATA;AAAF,GAAD,EAAgB1Q,QAAQ,CAAxB,SAAdE,MAAc,CAAdA;AAEA,MAAMwhC,gBAAgB,GAAGzjC,QAAQ,CAARA,cAAzB,mBAAyBA,CAAzB;AACMyjC,kBAAgB,CAAhBA,uCAAiD,SAAS,CAAT,KAAe,aAAC;AAAA,WAAIvsC,CAAC,CAADA,SAAW7F,MAAM,CAArB;AAAhB,KAAjDoyC;AAEN,MAAMC,gBAAgB,GAAG1jC,QAAQ,CAARA,cAAzB,mBAAyBA,CAAzB;AACM0jC,kBAAgB,CAAhBA,YAA6B,SAAS,CAAT,KAAe,aAAC;AAAA,WAAIxsC,CAAC,CAADA,SAAW7F,MAAM,CAArB;AAAhB,KAA7BqyC;AAEN1jC,UAAQ,CAARA,2CAAoD,oBAAY;AAC5D9O,YAAQ,CAARA,0BAAmC,iBAAS;AACxCG,YAAM,CAANA,WAAkB,SAAS,CAAT,KAAe,aAAC;AAAA,eAAI6F,CAAC,CAADA,SAAWuoB,KAAK,CAALA,OAAf;AAAhB,SAAlBpuB;AACA,UAAMgK,IAAI,GAAG,SAAS,CAAT,KAAe,aAAC;AAAA,eAAInE,CAAC,CAADA,SAAWuoB,KAAK,CAALA,OAAf;AAAhB,SAAb;AACAgkB,sBAAgB,CAAhBA;AACAC,sBAAgB,CAAhBA;AACA7pC,cAAQ,CAARA,MAAQ,CAARA;AALJ3I;AADJ8O;AAjBG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJP;AACA;AACA;AACA;AAEA;AACA;AAEO,IAAMgjC,UAAU,GAAG,SAAbA,UAAa,yEAA4E;AAElGhhC,QAAM,CAANA;AACA,MAAMD,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;;AAEA,MAAM2jC,sBAAsB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAE3B,kBAAG,CAAH,cAAkB;AACRC,gCADQ,GACWj2B,IAAI,KAAJA,UACf3N,QAAQ,CAARA,iBADe2N,yCACf3N,CADe2N,GAEf3N,QAAQ,CAARA,iBAHI,8BAGJA,CAFJ4jC;AAINA,gCAAgB,CAAhBA;AAAAA,sFAAyB;AAAA;AAAA;AAAA;AAAA;AACrBC,gCAAI,CAAJA;AAAAA,kGAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBxoC,4CADqB,GACdokB,KAAK,CAALA,aAAmBA,KAAK,CAALA,eADL,IACrBpkB;AADqB;AAAA,+CAEAhF,+EAFA,IAEAA,CAFA;;AAAA;AAErB+8B,oDAFqB,gBAErBA;AACNA,oDAAY,CAAZA,UAAuBrI,oFAA8Bj7B,IAAI,CAAzDsjC,IAAuBrI,CAAvBqI;AACArD,yGAAU,CAAC;AAAE10B,8CAAI,EAAN;AAAyBrK,+CAAK,EAAE;AAAhC,yCAAD,yBAA4EgP,QAAQ,CAARA,cAA5E,2BAA4EA,CAA5E,EAAV+vB,KAAU,CAAVA;;AAJ2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAA/B8T;;AAAAA;AAAAA;AAAAA;AAAAA;;AADqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzBD;;AAAAA;AAAAA;AAAAA;AAAAA;AAQH;;AAf0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAtBD,sBAAsB;AAAA;AAAA;AAA5B,GAA4B,EAA5B;;AAkBA,MAAMG,aAAa;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEZC,+BAFY;AAAA,oFAEQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACH1tC,+EADG,SACHA,CADG;;AAAA;AAChBvG,8BADgB,iBAChBA;;AADgB;AAAA;AAAA;AAAA;;AAAA,4DAEL;AAAEuL,gCAAI,EAAN;AAAmB2oC,mCAAO,EAA1B;AAAuCC,qCAAS,EAAE;AAAlD,2BAFK;;AAAA;AAGhBnpB,wCAHgB,GAGCiQ,6FAHD,MAGCA,CAAjBjQ;AAHgB,4DAIfA,cAAc,GAAG;AAAEzf,gCAAI,EAAN;AAAmB2oC,mCAAO,EAA1B;AAAuCC,qCAAS,EAAE;AAAlD,2BAAH,GAA8D;AAAE5oC,gCAAI,EAAN;AAAmB2oC,mCAAO,EAA1B;AAAuCC,qCAAS,EAAE;AAAlD,2BAJ7D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFR;;AAAA;AAAA;AAAA;AAAA,iBAEZF;;AAOFG,gCATc,GASOp0C,IAAI,CAAJA,SAAcA,IAAI,CAAJA,OAAdA,gBATP,IASdo0C;AAEAC,2BAXc,KAWdA;;AAXc;AAAA;AAAA;AAAA;;AAeRC,qCAfQ;AAAA,oFAekB;AAAA;AAAA;AAAA;AAAA;AAAA,4DACrB,OAAO,CAAP,IAAY,kBAAkB,CAAlB,IAAuB,iBAAS;AAC/C,mCAAQ;AACJroC,kCAAI,EAAE7I,KAAK,CAALA,MADF,CACEA,CADF;AAEJmxC,sCAAQ,EAAEnxC,KAAK,CAALA,SAFN;AAGJoxC,0CAAY,EAAEpxC,KAAK,CAALA,SAHV;AAIJqxC,sCAAQ,EAAEz0C,IAAI,CAJV;AAKJ00C,0CAAY,EAAEtxC,KAAK,CALf;AAMJoB,yCAAW,EAAEpB,KAAK,CAACoB;AANf,6BAAR;AAFwB,2BACT,CAAZ,CADqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAflB;;AAAA;AAAA;AAAA;AAAA,iBAeR8vC;;AAfQ;AAAA,qBA4BQA,uBA5BR;;AAAA;AA4BdD,2BA5Bc,iBA4BdA;;AA5Bc;AA+BdM,6BA/Bc,GA+BI30C,IAAI,CAAJA,SAAcA,IAAI,CAAJA,OAAdA,aA/BJ,IA+Bd20C;AAEAnpB,wBAjCc,KAiCdA;;AAjCc;AAAA;AAAA;AAAA;;AAqCdmpB,6BAAe,GAAG,eAAe,CAAf,OAAuB,mBAAO;AAAA,uBAAIj0C,OAAO,CAAPA,mBAAJ;AAAhDi0C,eAAkB,CAAlBA;;AAEMC,yCAvCQ;AAAA,oFAuCsB;AAAA;AAAA;AAAA;AAAA;AAAA,4DACzB,OAAO,CAAP,IAAY,eAAe,CAAf,IAAoB,iBAAS;AAC5C,mCAAQ;AACJl0C,qCAAO,EAAEV,IAAI,CADT;AAEJ60C,gDAAkB,EAAEzxC,KAAK,CAFrB;AAGJ2nC,uCAAS,EAAE3nC,KAAK,CAALA,UAHP;AAIJ0xC,kDAAoB,EAAE1xC,KAAK,CAALA,UAAgBoB;AAJlC,6BAAR;AAF4B,2BACb,CAAZ,CADyB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAvCtB;;AAAA;AAAA;AAAA;AAAA,iBAuCRowC;;AAvCQ;AAAA,qBAkDKA,2BAlDL;;AAAA;AAkDdppB,wBAlDc,iBAkDdA;;AAlDc;AAqDZupB,6BArDY,GAqDM,SAAlBA,eAAkB,gBAAiB;AAAA;AAAA;;AAAA;AACrC,sEAAyC;AAAA,wBAA/BC,YAA+B;;AACrC,wBAAGn3B,IAAI,KAAP,SAAqB;AACjBm3B,kCAAY,CAAZA;AACAA,kCAAY,CAAZA;AAFJ,2BAGO;AACHA,kCAAY,CAAZA;AACAA,kCAAY,CAAZA;AACH;AACJ;AAToC;AAAA;AAAA;AAAA;AAAA;;AASpC;AAED;AAhEc,eAqDZD;;AAcN,iCAAkB;AACdV,6BAAa,GAAGU,eAAe,CAA/BV,aAA+B,CAA/BA;AACApiC,wBAAQ,CAARA;AACAE,qFAAc,CAAC;AAAEkiC,+BAAa,EAAbA;AAAF,iBAAD,EAAoBpiC,QAAQ,CAA5B,SAAdE,MAAc,CAAdA;AACH;;AAED,8BAAe;AACXqZ,0BAAU,GAAGupB,eAAe,CAA5BvpB,UAA4B,CAA5BA;AACAvZ,wBAAQ,CAARA;AACAE,qFAAc,CAAC;AAAEqZ,4BAAU,EAAVA;AAAF,iBAAD,EAAiBvZ,QAAQ,CAAzB,SAAdE,MAAc,CAAdA;AACH;;AACD0hC,oCAAsB,CAAtBA,IAAsB,CAAtBA;;AA9EkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAbG,aAAa;AAAA;AAAA;AAAnB,GAAmB,EAAnB;;AAiFAA,eAAa;AAxGV,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRP;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEO,IAAM5H,gBAAgB,GAAG,SAAnBA,gBAAmB,eAAuC;AAAA,MAAxBlL,QAAwB,uEAAbhxB,QAAa;AAEnE,MAAMsb,UAAU,GAAGxrB,IAAI,CAAJA,qBAA0BA,IAAI,CAAJA,OAA7C,aAA6CA,CAA7C;;AAEA,kBAAe;AAAA,QAYIi1C,gBAZJ;AAAA,yEAYX;AAAA;AAAA;AAAA;AAAA;AAAA;AAEUC,2CAFV;AAAA,sFAEwC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gCAE5BC,+CAAO,CAFqB,UAErB,CAFqB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAIhCz0C,mCAAO,gCAAQ,UAAU,CAAV,IAAe,qBAAS;AAAA,qCAAIqqC,SAAS,CAAb;AAAhC,6BAAQ,CAAR,IAA0D;AAAEx/B,kCAAI,EAAEvL,IAAI,CAAZ;AAAmBwE,yCAAW,EAAEgnB,UAAU,CAAVA,CAAU,CAAVA,CAAchnB;AAA9C,6BAA1D,EAAP9D;AAJgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMvBqqC,+CANuB,cAMvBA;AANuB;AAAA,6CAQAxkC,+EAA2BwkC,SAAS,CARpC,IAQAxkC,CARA;;AAAA;AAQtB6uC,mDARsB,gBAQtBA;;AARsB;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAY5BA,mDAAa,CAAbA,iBAA+Bna,sGAA/Bma,MAA+Bna,CAA/Bma;AACAnyC,2CAAK,CAALA,KAAWmyC,aAAa,CAAxBnyC;AACAoyC,qDAAe,CAAfA,KAAqBD,aAAa,CAAlCC;AAEM3xC,4CAhBsB,GAgBb,aAAa,CAAb,WAAyB,sBAAgB;AAEpD,4CAAMtB,GAAG,GAAGygC,oEAAU,CAAC;AAAEzgC,6CAAG,EAAEo/B,GAAG,CAACp/B;AAAX,yCAAD,EAAmBs/B,4EAAnB,EAAtB,MAAsB,CAAtB;AAEA,+CAAO;AACC1uB,+CAAK,EAAEA,KAAK,GADb;AAECnC,6CAAG;AAAYzO,+CAAG,EAAEA,GAAG,CAAC4gC;AAArB,4CAFJ;AAGC5gC,6CAAG,EAAEA,GAAG,CAHT;AAICnB,kDAAQ,EAAEm0C,aAAa,CAJxB;AAKCtS,oDAAU,EAAEsS,aAAa,CAACpqB;AAL3B,yCAAP;AApBwB,uCAgBb,CAATtnB;AAYNwuC,4CAAM,CAANA,KAAY;AAAEvsC,0CAAE,EAAEyvC,aAAa,CAAnB;AAA0B1xC,8CAAM,EAANA;AAA1B,uCAAZwuC;;AA5B4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AA6B/B;;AA7B+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAFxC;;AAAA;AAAA;AAAA;AAAA,mBAEUgD;;AAFV;AAAA,uBAkCUA,2BAlCV;;AAAA;AAAA,sBAoCOhD,MAAM,CAANA,WApCP;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAsCIoD,+BAAe,CAAfA;AAEAnjC,qFAAc,CAAC;AAAC+/B,wBAAM,EAAP;AAASjvC,uBAAK,EAAEA,KAAK,CAALA;AAAhB,iBAAD,EAAoCsyC,aAAa,CAAjD,SAAdpjC,eAAc,CAAdA;AAEMqjC,qCA1CV,GA0CkCtU,QAAQ,CAARA,cA1ClC,0BA0CkCA,CAAxBsU;AAENA,qCAAqB,CAArBA;;AAEMzX,wBA9CV;AAAA,sFA8CqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAEMx3B,+EAFN,QAEMA,CAFN;;AAAA;AAEPvG,gCAFO,iBAEPA;AAFO;AAAA,mCAGOuG,qFAAiCvG,IAAI,CAH5C,IAGOuG,CAHP;;AAAA;AAGbvG,gCAAI,CAHS,MAGbA,GAHa,cAGbA;;AAHa,kCAKVA,IAAI,CAAJA,oCALU;AAAA;AAAA;AAAA;;AAAA,kCAONA,IAAI,CAAJA,UAAe8H,MAAM,CAANA,KAAY9H,IAAI,CAAhB8H,mBAPT;AAAA;AAAA;AAAA;;AAAA;;AAAA;AASH2tC,gCATG,GASIz1C,IAAI,CAAJA,eATJ,KASHy1C;;AATG;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mCAaSlvC,0EAbT,IAaSA,CAbT;;AAAA;AAaHmvC,+BAbG,iBAaHA;AAEAzjC,oCAfG,GAeQ/B,QAAQ,CAARA,cAfR,UAeQA,CAAX+B;AACAA,oCAAQ,CAARA;AAENE,iGAAc,CAAC;AAAEujC,iCAAG,EAAL;AAAO/yC,mCAAK,EAAE3C,IAAI,CAACuL;AAAnB,6BAAD,EAA4B0G,QAAQ,CAApC,SAAdE,MAAc,CAAdA;;AAlBS;AAAA;AAAA;AAAA;AAAA;AAAA;AA9CrB;;AAAA;AAAA;AAAA;AAAA,mBA8CU4rB;;AAsBNyX,qCAAqB,CAArBA,0BAAgD,YAAM;AAElD,sBAAMtjC,MAAM,GAAGhC,QAAQ,CAARA,cAAf,uCAAeA,CAAf;AAEA8hC,mGAAiB,uBAAjBA,MAAiB,CAAjBA;AAEAtxC,yBAAO,CAAPA,QAAgB,qBAAa;AACzB,wBAAMijC,UAAU,0BAAmBoH,SAAS,CAATA,kBAAnC,GAAmCA,CAAnB,CAAhB;AACA,wBAAMvmC,WAAW,GAAG0L,QAAQ,CAARA,cAApB,UAAoBA,CAApB;AACM1L,+BAAW,CAAXA,YAAwBumC,SAAS,CAAjCvmC;AACNu5B,4BAAQ,CAACgN,SAAS,CAAV,MAAiB76B,QAAQ,CAARA,oCAAzB6tB,QAAyB7tB,EAAjB,CAAR6tB;AAJJr9B;AANJ80C;;AApEJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAZW;;AAAA;AAAA;AAAA;AAAA;;AAEX,QAAMD,aAAa,GAAGrlC,QAAQ,CAARA,cAAtB,UAAsBA,CAAtB;AACMqlC,iBAAa,CAAbA;AACN,QAAMD,eAAe,GAAGpU,QAAQ,CAARA,cAAxB,gBAAwBA,CAAxB;AAEA,QAAMgR,MAAM,GAAZ;AACA,QAAMjvC,KAAK,GAAX;AACA,QAAMoyC,eAAe,GAArB;AAEA;AAsFAJ,oBAAgB;AACnB;AArGE,E;;;;;;;;;;;;;;;;;;;;;;ACVP;AACA;AAEA;AAEO,IAAMpD,uBAAuB,GAAG,SAA1BA,uBAA0B,QAAS;AAE5C,MAAM5/B,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN;;AAEA,UAAO1P,KAAK,CAAZ;AACI;AACIuiB,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAJA;AACA;;AACJ;AACIA,UAAI,GAAGviB,KAAK,CAALA,WAAPuiB;AACA;AAvCR;;AAwCC;AAED,MAAM6wB,OAAO,GAAG;AAAE7wB,QAAI,EAAN;AAAQ1iB,OAAG,EAAEG,KAAK,CAACygC;AAAnB,GAAhB;AACA,MAAMrgC,KAAK,GAAGJ,KAAK,CAAnB;AACA,MAAMqzC,MAAM,GAAGrzC,KAAK,CAALA,gBAAsBA,KAAK,CAA3BA,gBAAf;AACA,MAAMG,MAAM,GAAGH,KAAK,CAALA,UAAf;AACA,MAAMohC,UAAU,aAAMphC,KAAK,CAALA,sBAAtB,GAAsBA,CAAN,CAAhB;AACA,MAAMszC,KAAK,GAAGtzC,KAAK,CAALA,SAAesgC,oEAAU,CAAVA,KAAU,CAAVA,CAA7B;AAEA,MAAI3wB,MAAM,GAAGhC,QAAQ,CAARA,8CAAb,UAAaA,EAAb;AACIgC,QAAM,GAAGA,MAAM,IAAIhC,QAAQ,CAARA,cAAnBgC,uBAAmBhC,CAAnBgC;AACAA,QAAM,CAANA;AAEJC,uEAAc,CAAC;AAACxP,SAAK,EAAN;AAAOizC,UAAM,EAAb;AAAclzC,UAAM,EAApB;AAAqBizC,WAAO,EAA5B;AAA6BE,SAAK,EAALA;AAA7B,GAAD,EAAsC5jC,QAAQ,CAA9C,SAAdE,MAAc,CAAdA;AAEA,MAAM2jC,iBAAiB,GAAG5jC,MAAM,CAANA,cAA1B,sCAA0BA,CAA1B;AACA,MAAM6jC,UAAU,GAAG7jC,MAAM,CAANA,cAAnB,+BAAmBA,CAAnB;AACA,MAAMg7B,UAAU,GAAGh9B,QAAQ,CAARA,cAAnB,sBAAmBA,CAAnB;;AAEA,MAAM8lC,eAAe,GAAG,SAAlBA,eAAkB,QAAS;AAC7BF,qBAAiB,CAAjBA;AACAC,cAAU,CAAVA;AACA7I,cAAU,CAAVA;AACA6I,cAAU,CAAVA;AACAA,cAAU,CAAVA;AALJ;;AAQAD,mBAAiB,CAAjBA;AACAA,mBAAiB,CAAjBA;;AAEA,MAAMG,QAAQ,GAAG,SAAXA,QAAW,QAAS;AACtBH,qBAAiB,CAAjBA;AACAC,cAAU,CAAVA;AACA7I,cAAU,CAAVA;AACA4I,qBAAiB,CAAjBA;AACAA,qBAAiB,CAAjBA;AALJ;;AAQAC,YAAU,CAAVA;AACAA,YAAU,CAAVA;AAtFG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLP;AACA;AACA;AACA;AACA;AAEO,IAAMtJ,aAAa;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEnB3/B,iBAFmB,GAEXJ,0DAFW,KAEnBI;AAENoF,kBAAM,CAANA;AAEMlS,gBANmB,GAMwBk2C,WANxB,KAMnBl2C,EAAM0sC,UANa,GAMwBwJ,WANxB,WAMnBl2C,EAAkB2sC,oBANC,GAMwBuJ,WANxB,qBAMnBl2C;AAEA0xB,mBARmB,GAQT,CACZ;AAAEnmB,kBAAI,EAAN;AAAmB0yB,uBAAS,EAAE,0BAAK;AAAA,sCAAY76B,KAAK,CAAjB,CAAiB,CAAjB;AAAA;AAAnC,aADY,EAEZ;AAAEmI,kBAAI,EAAN;AAAsB0yB,uBAAS,EAAE,0BAAK;AAAA,uBAAI76B,KAAK,CAAT,CAAS,CAAT;AAAA;AAAtC,aAFY,CAAVsuB;AAKFtuB,iBAbqB,GAab63B,0FAba,OAabA,CAAR73B;AAEE+yC,oBAfmB,GAeR,+EAAoB,oBAAQ;AAAA,qBAAIA,QAAQ,CAARA,SAAkBn2C,IAAI,CAA1B;AAfpB,aAeR,CAAXm2C;AACAC,2BAhBmB,GAgBDD,QAAQ,GAAGA,QAAQ,CAARA,WAAH,SAhBP,CAgBnBC;AAEAnkC,oBAlBmB,GAkBR/B,QAAQ,CAARA,cAlBQ,UAkBRA,CAAX+B;AAENA,oBAAQ,CAARA;AAEAE,iFAAc,CAAC;AAAEikC,6BAAe,EAAjB;AAAmB1J,wBAAU,EAA7B;AAA+BC,kCAAoB,EAAnD;AAAqDvpC,mBAAK,EAALA;AAArD,aAAD,EAA+D6O,QAAQ,CAAvE,SAAdE,MAAc,CAAdA;AAEMkkC,2BAxBmB,GAwBDnkC,MAAM,CAANA,cAxBC,sBAwBDA,CAAlBmkC;;AAEN,gBAAGD,eAAe,KAAlB,GAA0B;AAEtBC,6BAAe,CAAfA;AAFJ,mBAIO;AAEGtH,qBAFH,GAEaoH,QAAQ,CAFrB,UAEGpH;AAENsH,6BAAe,CAAfA,0BAA0C,iBAAS;AAC/CnmC,wBAAQ,CAARA,yFAA2FlQ,IAAI,CAA/FkQ;AACA,oBAAM8+B,IAAI,GAAG9N,QAAQ,CAARA,cAAb,gCAAaA,CAAb;AACA,oBAAIiE,IAAI,GAAR;AACA4J,uBAAO,CAAPA,QAAgB,kBAAU;AACtB5J,sBAAI,qCAA8B8J,MAAM,CAApC,MAAJ9J,SAAI,CAAJA;AACAA,sBAAI,IAAJA;AACA8J,wBAAM,CAANA,cAAqB,gBAAQ;AACzB,wBAAG1jC,IAAI,CAAJA,aAAkBhK,MAAM,CAA3B,UACI4jC,IAAI,wBAAiB55B,IAAI,CAArB,gBAAJ45B,OAAI,CAAJA;AAFR8J;AAIA9J,sBAAI,IAAJA;AAPJ4J;AASA5J,oBAAI,IAAJA;AACA6J,oBAAI,CAAJA;AAdJqH;AAgBH;;AAlDwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAb5J,aAAa;AAAA;AAAA;AAAnB,CAAmB,EAAnB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNP;AACA;AAEA;AAEO,IAAM6J,SAAS,GAAG,SAAZA,SAAY,qBAAwB;AAE7C,MAAIxf,YAAY,GAAGyf,eAAe,CAAlC,UAAkC,CAAlC;AAEA,MAAMvuC,UAAU,GAAGrG,UAAU,CAAVA,QACOA,UAAU,CAAVA,MADPA,aAEO,UAAU,CAAV,iCAA8B,QAAQ,UAAU,CAAV,UAAqB,aAAC;AAAA,WAAI+E,CAAC,CAAL;AAFtF,GAEgE,CAAR,CAA9B,CAF1B;AAIA,MAAMtF,QAAQ,GAAG,MAAM,CAAN,eAAsB,aAAC;AAAA,WAAIgG,CAAC,CAADA,SAAW7F,MAAM,CAArB;AAAvB,KAR4B,IAQ7C,CAR6C,CAQiC;;AAE9E,MAAM0Q,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAMwiB,MAAM,GAAG,UAAU,CAAV,QAAmB,UAAU,CAAV,kCAA6C,iBAAK;AAAA,WAAIltB,KAAK,CAAT;AAArE,GAAmB,CAAnB,GAAf;AACA,MAAMmtB,gBAAgB,GAAGD,MAAM,CAANA,uBAAuBA,MAAM,CAA7BA,CAA6B,CAA7BA,cAAoCA,MAAM,CAACA,MAAM,CAANA,SAA3CA,CAA0C,CAA1CA,IAAzB;AACA,MAAMvR,MAAM,GAAGuR,MAAM,CAANA,uEAEG9yB,UAAU,CAAVA,gJAFlB,GAEkBA,CAFlB;AAMA,MAAI60C,cAAc,GAAGC,iBAAiB,aAAtC,YAAsC,CAAtC;AAEA,MAAIC,WAAW,GAAG/0C,UAAU,CAAVA,SAAlB;AAEA,MAAMwkB,OAAO,GAAG;AACZ2Q,gBAAY,EADA;AAEZ9uB,cAAU,EAFE;AAGZrF,SAAK,EAAEhB,UAAU,CAHL;AAIZP,YAAQ,EAJI;AAKZszB,oBAAgB,EALJ;AAMZxR,UAAM,EANM;AAOZszB,kBAAc,EAPF;AAQZE,eAAW,EAAXA;AARY,GAAhB;AAWAhoB;AAEAvc,uEAAc,UAAUF,QAAQ,CAAlB,SAA4Byc,iDAA5B,CAAdvc;AAEAE,YAAU,CAAC,YAAM;AAAA,+BACuBskC,mBAAmB,2CAD1C,UAC0C,CAD1C;;AACV7f,gBADU,oCACVA;AAAc0f,kBADJ,sCACIA;AADX,KAAVnkC,GAAU,CAAVA;AAIAA,YAAU,CAAC,YAAM;AAAA,gCACuBskC,mBAAmB,2CAD1C,UAC0C,CAD1C;;AACV7f,gBADU,qCACVA;AAAc0f,kBADJ,uCACIA;AADX,KAAVnkC,IAAU,CAAVA;AA5CG;;AAiDP,IAAMskC,mBAAmB,GAAG,SAAtBA,mBAAsB,uDAA0D;AAClF,MAAI7f,YAAY,KAAhB,MAA2B;AACvBA,gBAAY,GAAGyf,eAAe,CAA9Bzf,UAA8B,CAA9BA;AACA5mB,YAAQ,CAARA,iDAA0DsmC,cAAc,GAAGC,iBAAiB,aAA5FvmC,YAA4F,CAA5FA;AACH;;AACD,SAAO;AAAE4mB,gBAAY,EAAd;AAAgB0f,kBAAc,EAAdA;AAAhB,GAAP;AALJ;;AAQA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,2BAA8B;AACpD,SAAOzuC,UAAU,CAAVA,8DAC6BA,UAAU,CADvCA,oEAE6BA,UAAU,CAFvCA,QAAP,QAAOA,CAAP;AADJ;;AAMA,IAAMuuC,eAAe,GAAG,SAAlBA,eAAkB,aAAc;AAClC,MAAI95B,KAAK,GAAI9a,UAAU,CAAVA,aAAwBA,UAAU,CAAVA,mBAAzB,CAACA,GACPA,UAAU,CAAVA,UADM,MAACA,GAEPA,UAAU,CAAVA,QAAmBA,UAAU,CAAVA,MAAnBA,SAFN;AAGA,SAAO8a,KAAK,KAALA,WAAP;AAJJ,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpEA;AAEA;AACA;AACA;AAEA;AAEO,IAAMm6B,UAAU,GAAG,SAAbA,UAAa,6CAAgD;AAEtE1kC,QAAM,CAANA;AAEA,MAAMD,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAENtQ,YAAU,CAAVA,iBAA4BA,UAAU,CAAVA,eAA5BA;AACAA,YAAU,CAAVA,eAA0BA,UAAU,CAAVA,eAA1BA;AAEA,MAAMk1C,YAAY,GAAG,WAAW,CAAX,KAAiB,kBAAM;AAAA,WAAI/tC,MAAM,CAANA,iBAAwBnH,UAAU,CAAtC;AAAvB,QAAqE;AAAEm1C,gBAAY,EAAEn1C,UAAU,CAA1B;AAA+Bo1C,WAAO,EAAEp1C,UAAU,CAAVA,iBAA4B;AAApE,GAA1F;AACMk1C,cAAY,CAAZA,SAAsBA,YAAY,CAAZA,YAAyBA,YAAY,CAA3DA;AAEN1kC,uEAAc,CAAC;AAAEqiB,SAAK,kCAAO7yB,UAAU,CAAjB;AAAyBq1C,YAAM,EAAEH,YAAY,CAA7C;AAAsDpS,cAAQ,EAAE9iC,UAAU,CAAVA,kBAA6B;AAA7F;AAAP,GAAD,EAA6GsQ,QAAQ,CAArH,SAAdE,MAAc,CAAdA;AAEA,MAAM8kC,0BAA0B,GAAhC;AAEA5kC,YAAU,CAAC,YAAM;AAEb6kC;AAEA;;AAEA,QAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,SAAU;AAE/BC,cAAQ,GAAGrkB,WAAW,CAAC,YAAW;AAC/B,YAAMtuB,IAAI,GAAGkC,IAAI,CAAJA,MAAW2lC,MAAM,CAA9B,cAAwBA,EAAX3lC,CAAb;AACA,YAAMm6B,KAAK,GAAGuW,gBAAgB,OAA9B,UAA8B,CAA9B;;AACA,YAAG,CAAC,CAAJ,OAAY;AACRH,mHAA6C,oBAAQ;AAAA,mBAAIntC,QAAQ,aAAZ,KAAY,CAAZ;AAArDmtC;AACH;;AACD,YAAG,CAACv1C,UAAU,CAAd,OAAsB;AACtB,YAAM21C,SAAS,GAAG,UAAU,CAAV,WAAsB,gBAAI;AAAA,iBAAIzuC,8CAAQ,OAAO0uC,IAAI,CAAvB,IAAY,CAAZ;AAA5C,SAAkB,CAAlB;;AACA,uBAAc;AACVL,gHAA0C,oBAAQ;AAAA,mBAAIntC,QAAQ,aAAZ,SAAY,CAAZ;AAAlDmtC;AACH;AAVkB,SAAtBE,IAAsB,CAAtBA;AAFJ;;AAgBA,QAAMI,2BAA2B,GAAG,SAA9BA,2BAA8B,SAAU;AAE1C,UAAG,SAAQlL,MAAM,CAAd,kCAAgDA,MAAM,CAANA,mBAAnD,WAAwF;AAExF,UAAMmL,WAAW,GAAGnL,MAAM,CAA1B,cAAoBA,EAApB;AAEA4K,iGAA+BxqC,0DAA/BwqC,yBAAyEL,YAAY,CAArFK;;AAEA;AACI,aAAK,qFAAyB,iBAAK;AAAA,iBAAI/6B,KAAK,CAALA,UAAJ;AAA9B,WAAL;AAAuE;AACnEg7B,0BAAgB,CAAhBA,MAAgB,CAAhBA;AACA;;AACJ,aAAK,qFAAyB,iBAAK;AAAA,iBAAIh7B,KAAK,CAALA,UAAJ;AAA9B,WAAL;AAAsE;AAClEy0B,uBAAa,CAAbA,QAAa,CAAbA;AACAwG,kBAAQ,GAARA;AACA;;AACJ;AACID,0BAAgB,CAAhBA,MAAgB,CAAhBA;AATR;AARJ;;AAqBAD;;AAEA,mBAAc;AACV7kC,gBAAU,CAAC,YAAM;AACb6kC;AADM,SAAV7kC,IAAU,CAAVA;AAGH;AAjDK,KAAVA,0BAAU,CAAVA;AAqDA,MAAMmiB,KAAK,GAAGtkB,QAAQ,CAARA,+BAAd,CAAcA,CAAd;AACA,MAAMwnC,UAAU,GAAGljB,KAAK,CAAxB;AACMA,OAAK,CAALA,SAAekjB,UAAU,GAAVA,IAAfljB;AAxEH;AA4EA,IAAM6iB,gBAAgB,GAAG,SAAnBA,gBAAmB,mBAAsB;AACpD,MAAM32C,OAAO,GAAG,UAAU,CAAV,QAAmB,UAAU,CAAV,aAAwB,cAAE;AAAA,WAAI6D,EAAE,CAAN;AAA7C,GAAmB,CAAnB,GAA4D,UAAU,CAAV,eAA0B,cAAE;AAAA,WAAIA,EAAE,CAAN;AAAxG,GAA4E,CAA5E;AACA,MAAMu8B,KAAK,GAAG,OAAO,CAAP,KAAa,cAAE;AAAA,WAAIj4B,8CAAQ,OAAOtE,EAAE,CAArB,IAAY,CAAZ;AAA7B,GAAc,CAAd;AACA;AAHK,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpFP;AACA;AACA;AACA;AAEO,IAAMozC,iBAAiB,GAAG,SAApBA,iBAAoB,aAAc;AAAA,wBAESjrC,yDAFT;AAAA,MAEnCnL,MAFmC;AAAA,MAE3Bke,WAF2B;AAAA,MAEFlB,MAFE;;AAI3C5c,YAAU;AAAoBT,SAAK,EAAEqd,MAAM,CAACrd;AAAlC,IAAVS;AAEAA,YAAU,CAAVA,WAAsBi1C,mFAAU,aAAan3B,WAAW,IAAxB,IAAgCiP,iDAAhC,CAAhC/sB,GAAiF20C,iFAAS,aAA1F30C,MAA0F,CAA1FA;AANG,E;;;;;;;;;;;;;;;;;;;;;;ACLP;AACA;AACA;AACA;AAEO,IAAMi2C,UAAU,GAAG,SAAbA,UAAa,UAAwC;AAAA,MAA9BC,iBAA8B,uEAAV,KAAU;AAE9D1kC,uEAAoBA,wEAApBA,YAAoBA,CAApBA;AAEA,MAAMipB,kBAAkB,GAAG3pB,gGAA3B;AAEA,MAAGM,OAAO,CAAPA,aAAqB,CAACA,OAAO,CAAhC,gBAAiD;;AANa,wBAQ7CrG,yDAR6C;AAAA,MAQxDnL,MARwD;;AAU9D,MAAGA,MAAM,CAANA,mBAAH,mBAAgD;AAC5Cu2C,+EAAa;AAChB;;AAED,MAAMC,YAAY,GAAG7nC,QAAQ,CAARA,cAArB,oBAAqBA,CAArB;;AAEA,MAAG3O,MAAM,CAANA,kBAAH,oBAAgD;AAC9Cw2C,gBAAY,CAAZA;AACAA,gBAAY,CAAZA;AACD;;AAED,MAAGx2C,MAAM,CAANA,kBAAyB,CAA5B,oBAAiD;AAC/Cw2C,gBAAY,CAAZA;AACAA,gBAAY,CAAZA;AACAD,+EAAa;AACd;AAzBE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLP;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMxM,mBAAmB,GAAG,SAAtBA,mBAAsB,aAAc;AAE7C,MAAMtrC,IAAI,GAAG2B,UAAU,CAAvB;AAEA,MAAG,CAAH,MAAU;AAEVq2C,yBAAuB,CAAvBA,IAAuB,CAAvBA;AANG;;AASP,IAAMA,uBAAuB,GAAG,SAA1BA,uBAA0B,OAAQ;AAAA,wBAEGtrC,yDAFH;AAAA,MAE5BnL,MAF4B;AAAA,MAEpBI,UAFoB;AAAA,MAERuc,MAFQ;;AAIpC,MAAM+5B,OAAO,GAAG,4BAAhB,YAAgB,CAAhB;AAEA,MAAMC,eAAe,GAAGv2C,UAAU,CAAVA,YAAuBA,UAAU,CAAzD;AAEA;;AAEA,MAAIkH,8CAAQ,CAACqV,MAAM,CAANA,WAAD,MAAZ,OAAY,CAAZ,EAA+C;AAC3C,QAAM+G,MAAM,GAAG,eAAe,CAAf,OAAuB,aAAC;AAAA,aAAIve,CAAC,CAADA,8BAAgC1G,IAAI,CAAJA,gBAApC,WAAoCA,EAApC;AAAvC,KAAe,CAAf;AACA0D,UAAM,GAAGwG,8CAAI,IAAItJ,4DAAmBu3C,uBAAuB,iBAAiBzW,gFAAjB,CAA1C9gC,CAAJ,CAAb8C;AACAxC,SAAK,GAAG,MAAM,CAAN,IAAW,iBAAK;AAAA,aAAI,eAAe,CAAf,KAAqB,gBAAI;AAAA,eAAIlB,IAAI,CAAJA,SAAcuC,KAAK,CAAvB;AAA7B,OAAI,CAAJ;AAAxBrB,KAAQ,CAARA;AAHJ,SAIO;AACHwC,UAAM,GAAGwG,8CAAI,IAAItJ,4DAAmB+b,8CAAK,CAAC3c,IAAI,CAA9C0D,MAAyC,CAAxB9C,CAAJ,CAAb8C;AACAA,UAAM,GAAGu/B,+EAAqB,CAAC;AAAE13B,UAAI,EAAEvL,IAAI,CAAZ;AAAmB8iC,gBAAU,EAAE9iC,IAAI,CAAnC;AAAgD0D,YAAM,EAANA;AAAhD,KAAD,UAAmEg+B,gFAAnE,CAA9Bh+B;AACAxC,SAAK,GAAG,CAARA,IAAQ,CAARA;AACH;;AAEDwC,QAAM,GAAG,MAAM,CAAN,IAAW,iBAAS;AACzB,WAAOm/B,oEAAU,QAAQnB,gFAAR,EAAjB,MAAiB,CAAjB;AADJh+B,GAAS,CAATA;AAIA00C,0BAAwB,CAAC;AAAEl3C,SAAK,EAAEA;AAAT,GAAD,UAAxBk3C,IAAwB,CAAxBA;AAxBJ;;AA2BA,IAAMA,wBAAwB,GAAG,SAA3BA,wBAA2B,2BAA8B;AAAA,yBAEhC1rC,yDAFgC;AAAA,MAEnDwR,MAFmD;AAAA,MAE3C3c,MAF2C;;AAI3D,MAAM82C,iBAAiB,GAAG,oBAJiC,cAIjC,CAA1B,CAJ2D,CAIM;;AAEjE,MAAI7mC,MAAM,GAAG,MAAM,CAAN,aAAoB,kBAAM;AAAA,WAAI3I,8CAAQ,CAAC2I,MAAM,CAAP,MAAZ,iBAAY,CAAZ;AAAvC,GAAa,CAAb;AAEA,MAAG,CAAH,QAAY;AAEZ,MAAMS,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEA+B,UAAQ,CAARA;AAEA,MAAMC,MAAM,GAAGwc,gDAAf;AACMxc,QAAM,CAANA;AAENjJ,SAAO,mDAAmD,MAAM,CAAN,IAAW,aAAC;AAAA,WAAIvC,CAAC,CAAL;AAAtEuC,GAA0D,CAAnD,CAAPA;AAEAkJ,uEAAc,CAAC;AAAEzO,UAAM,EAANA;AAAF,GAAD,EAAauO,QAAQ,CAArB,SAAdE,MAAc,CAAdA;AAEA+wB,8EAAkB,CAAChzB,QAAQ,CAARA,iBAAD,mBAACA,CAAD,oBAAlBgzB,MAAkB,CAAlBA;AArBJ;;AAwBA,IAAMiV,uBAAuB,GAAG,SAA1BA,uBAA0B,0BAA6B;AAEzD;AAEAzK,YAAU,GAAGhjB,8CAAO,CAAC,MAAM,CAAN,IAAW,aAAK;AACjC,WAAO;AAAEhnB,YAAM,EAAEgD,CAAC,CAAX;AAAoB1G,UAAI,EAAE;AAAEuL,YAAI,EAAE7E,CAAC,CAAT;AAAgBo8B,kBAAU,EAAEp8B,CAAC,CAADA,SAA5B;AAAuDskB,sBAAc,EAAEtkB,CAAC,CAADA,SAAvE;AAAkGzD,aAAK,EAAEyD,CAAC,CAACzD;AAA3G;AAA1B,KAAP;AADJyqC,GAAqB,CAAD,CAApBA;;AAIA,MAAIA,UAAU,CAAVA,SAAJ,GAA2B;AAEvB,QAAIvD,IAAI,GAAG,UAAU,CAAV,IAAe,iBAAS;AAC/B,UAAMnqC,IAAI,GAAG,MAAM,CAAN,KAAY,aAAC;AAAA,eAAI0G,CAAC,CAADA,SAAWnE,KAAK,CAALA,KAAf;AAA1B,OAAa,CAAb;AACA,aAAO;AACHmB,cAAM,EAAE1D,IAAI,CADT;AAEHA,YAAI,EAAE;AACFuL,cAAI,EAAEvL,IAAI,CADR;AAEF8iC,oBAAU,EAAE9iC,IAAI,CAAJA,SAFV;AAGFgrB,wBAAc,EAAEhrB,IAAI,CAAJA,SAHd;AAIFiD,eAAK,EAAEjD,IAAI,CAACiD;AAJV;AAFH,OAAP;AAFJ,KAAW,CAAX;AAYA,QAAIq1C,YAAY,GAAG5tB,8CAAO,CAA1B,IAA0B,CAA1B;AACI4tB,gBAAY,CAAZA,QAAqB,uBAAe;AAChCC,iBAAW,CAAXA,eAA2B,iBAAS;AAChC7K,kBAAU,CAAVA,KAAgB;AAAEhqC,gBAAM,EAAE60C,WAAW,CAArB;AAA8Bv4C,cAAI,EAAEu4C,WAAW,CAACv4C;AAAhD,SAAhB0tC;AADJ6K;AADJD;AAKP;;AAEDp3C,OAAK,GAAG,UAAU,CAAV,IAAe,iBAAK;AAAA,WAAIqB,KAAK,CAAT;AAA5BrB,GAAQ,CAARA;AAEAA,OAAK,CAALA,QAAc,aAAK;AACf,QAAMD,QAAQ,GAAGyF,CAAC,CAAlB;AACAA,KAAC,CAADA,SAAW,MAAM,CAAN,KAAY,aAAC;AAAA,aAAIA,CAAC,CAADA,SAAJ;AAAb,OAAXA;AAFJxF;AAKA,MAAMs3C,YAAY,GAAlB;;AAEA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,6BAAgC;AACnD,QAAIC,WAAW,GAAG,KAAK,CAAL,YAAkB,aAAC;AAAA,aAAIhyC,CAAC,CAAL;AAArC,KAAkB,CAAlB;;AACA,qBAAgB;AACZgyC,iBAAW,GAAG,8CAAQ,CAACA,WAAW,CAAZ,OAAoB,YAAY,CAAZ,IAAiB,aAAC;AAAA,eAAIhyC,CAAC,CAAL;AAA9C,OAA4B,CAApB,CAAR,UAAdgyC;AACH;;AACD,qBAAgB;AACZF,kBAAY,CAAZA;AACA;AAFJ,WAIK;AACDE,iBAAW,GAAGn2C,KAAK,CAALA,OAAdm2C,KAAcn2C,CAAdm2C;;AACA,UAAGA,WAAW,IAAI,CAAC7vC,8CAAQ,CAAC6vC,WAAW,CAAZ,OAAoB,YAAY,CAAZ,IAAiB,aAAC;AAAA,eAAIhyC,CAAC,CAAL;AAAjE,OAA+C,CAApB,CAA3B,EAAgF;AAC5E8xC,oBAAY,CAAZA;AACA;AACH;AACJ;AAfL;;AAkBA,MAAMG,YAAY,GAAlB;AAEAjL,YAAU,CAAVA,QAAmB,wBAAkB;AACjC,QAAIkL,WAAW,GAAGH,cAAc,eAAhC,YAAgC,CAAhC;;AACA,qBAAgB;AACZE,kBAAY,CAAZA,KAAkB/V,8EAAoB,qBAAqBrgC,KAAK,CAA1B,cAAtCo2C,OAAsC,CAAtCA;AACH;AAJLjL;AAOA;AAlEJ,E;;;;;;;;;;;;;;;;;;;;;;;ACvEA;AACA;AACA;AAEA;AAEO,IAAMmL,kBAAkB,GAAG,SAArBA,kBAAqB,+BAAkC;AAEhE3nB,0FAAoB,CAAC,sBAAc;AAE/B,QAAMhf,MAAM,GAAGhC,QAAQ,CAARA,cAAf,4BAAeA,CAAf;AACA,QAAM+B,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,YAAQ,CAARA;AAEN,QAAMsM,MAAM,GAAGu6B,iGAAqB,aAApC,WAAoC,CAApC;AACMv6B,UAAM,CAANA;AACAA,UAAM,CAANA;AAENM,WAAO,CAAPA;AAEAN,UAAM,CAANA,OAAcA,MAAM,CAANA,QAAdA;AAEApM,yEAAc,CAAC;AAAEoM,YAAM,EAANA;AAAF,KAAD,EAAatM,QAAQ,CAArB,SAAdE,MAAc,CAAdA;AAEA,QAAM4mC,aAAa,GAAG;AACpBC,UAAI,EADgB;AAEpBC,SAAG,EAFiB;AAGpBC,cAAQ,EAAE;AAHU,KAAtB;AAMA7mC,cAAU,CAAC,YAAM;AAEfnC,cAAQ,CAARA;AAEA,UAAMipC,UAAU,GAAGjpC,QAAQ,CAARA,yDAA0DqO,MAAM,CAAhErO,IAAnB,KAAmBA,EAAnB;AAEA,0JAA0D,kBAAU;AAClE6mB,cAAM,CAANA;AADF;AAIA,UAAMqiB,OAAO,GAAG73C,MAAM,CAANA,kBACV2O,QAAQ,CAARA,iEAAkEqO,MAAM,CAAxErO,IADU3O,KACV2O,EADU3O,GAEV2O,QAAQ,CAARA,oEAAqEqO,MAAM,CAA3ErO,YAFN,CAEMA,CAFN;;AAIA,mBAAY;AACV,4JAA0D,kBAAU;AAClE6mB,gBAAM,CAANA;AADF;AAGD;;AAED,UAAMsiB,iBAAiB,GAAGnpC,QAAQ,CAARA,iEAAkEqO,MAAM,CAAxErO,IAA1B,KAA0BA,EAA1B;;AACA,6BAAsB;AACpBmpC,yBAAiB,CAAjBA;AACD;;AAED,0JAA0D,kBAAU;AAClEtiB,cAAM,CAANA,6CAAoDxY,MAAM,CAA1DwY;AADF;AAzBQ,OAAV1kB,GAAU,CAAVA;AAtBJ6e,GAAoB,CAApBA;AAFG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNP;AACA;AACA;AACA;AAEA;AAEO,IAAMooB,gBAAgB,GAAG,SAAnBA,gBAAmB,aAAc;AAE9C,MAAMluB,IAAI;AAAA,uEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gCAEU1e,yDAFV,EAEDnL,MAFC;AAIH0Q,sBAJG,GAIQ/B,QAAQ,CAARA,cAJR,UAIQA,CAAX+B;AACAA,sBAAQ,CAARA;AAEAod,mBAPG,GAOKnf,QAAQ,CAARA,cAPL,aAOKA,CAARmf;AACAnd,oBARG,GAQMmd,KAAK,CAALA,cARN,gBAQMA,CAATnd;AACAA,oBAAM,CAANA;AAENC,mFAAc,CAAC;AAAExQ,0BAAU,EAAVA;AAAF,eAAD,EAAiBsQ,QAAQ,CAAzB,SAAdE,MAAc,CAAdA;AAEM6kB,oBAbG,GAaM3H,KAAK,CAALA,cAbN,sBAaMA,CAAT2H;AACAA,oBAAM,CAANA;AAEAtD,oCAhBG,GAgBsBrE,KAAK,CAALA,cAhBtB,gCAgBsBA,CAAzBqE;AACAA,oCAAsB,CAAtBA;AAEAvE,yBAnBG,GAmBW;AAChB8C,yBAAS,EAAE,2BAAU;AACrBllB;AACC;AAHe,eAAdoiB;AAMNwE,iHAAoB,qDAAqDhyB,UAAU,CAAnFgyB,KAAoB,CAApBA;;AAzBS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJvI,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AA4BAA,MAAI;AA9BG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEO,IAAM0tB,qBAAqB,GAAG,SAAxBA,qBAAwB,0BAA6B;AAEhE,MAAM9yC,IAAI,GAAGrE,UAAU,CAAVA,aAAwB,UAAU,CAAV,eAA0B,iBAAK;AAAA,WAAIF,KAAK,CAAT;AAA/B,UAAxBE,IAAwB,CAAxBA,GAAb;AAEAA,YAAU,CAAVA;AACAA,YAAU,CAAVA,WAAsBA,UAAU,CAAVA,SAAoB,CAAC8K,8CAAO,CAAC9K,UAAU,CAAvCA,KAA4B,CAA5BA,UAAtBA;AACAA,YAAU,CAAVA,qBAAgCA,UAAU,CAAVA,gBAAhCA;AACAA,YAAU,CAAVA,aAAwBu1C,uFAA2Bz3B,WAAW,IAAtCy3B,IAAxBv1C,UAAwBu1C,CAAxBv1C;AACAA,YAAU,CAAVA;AAEAA,YAAU,CAAVA,gBAA2BA,UAAU,CAAVA,SAAoBgjC,KAAK,CAALA,QAAchjC,UAAU,CAA5CA,KAAoBgjC,CAApBhjC,IAAuDA,UAAU,CAAVA,eAAvDA,SAA3BA;AACAA,YAAU,CAAVA;AAEA;AAbK;AAgBA,IAAM43C,sBAAsB,GAAG,SAAzBA,sBAAyB,2BAA8B;AAClE,SAAO,WAAW,CAAX,IAAgB,sBAAc;AACnC,WAAOT,qBAAqB,aAA5B,WAA4B,CAA5B;AADF,GAAO,CAAP;AADK;;AAMP,IAAMU,gBAAgB,GAAG,SAAnBA,gBAAmB,aAAgB;AAEvC,MAAMnuC,IAAI,GAAGqnB,CAAC,CAAd;AACA,MAAM+mB,aAAa,GAAG74C,8DAAtB,wBAAsBA,CAAtB;AACA,MAAM84C,aAAa,GAAG94C,8DAAtB,wBAAsBA,CAAtB;AACA,MAAM+4C,GAAG,GAAGtuC,IAAI,CAAJA,cAAZ;AACA,MAAMuuC,QAAQ,GAAGlwC,QAAQ,CAAC2B,IAAI,CAAJA,QAA1B,QAAyB,CAAzB;AACA,MAAMkT,MAAM,GAAG,OAAO,CAAP,KAAa,aAAC;AAAA,WAAInX,CAAC,CAADA,OAAJ;AAA7B,GAAe,CAAf;AACA,MAAM4qB,SAAS,GAAG9hB,QAAQ,CAARA,4EAAlB,KAAkBA,EAAlB;AACA,MAAM2pC,WAAW,GAAG3pC,QAAQ,CAARA,yCAApB,QAAoBA,EAApB;AACA,MAAMipC,UAAU,GAAGjpC,QAAQ,CAARA,mEAVoB,KAUpBA,EAAnB,CAVuC,CAYvC;;AAEA4pC,mCAAiC,CAAjCA,QAAiC,CAAjCA;AAEA,MAAMC,sBAAsB,GAAG,CAAC,CAAhC;AACA,MAAMC,mBAAmB,GAAGp5C,qEAA5B,MAA4BA,CAA5B;AAEA,MAAMq5C,gBAAgB,GAAG/pC,QAAQ,CAARA,0EAAzB,KAAyBA,EAAzB;AACA,MAAMgqC,aAAa,GAAG,CAAC7uC,IAAI,CAAJA,QAAvB;AAEA,MAAM8Q,KAAK,GAAG;AACZg+B,uBAAmB,EAAE,CADT;AAEZC,qBAAiB,EAAEL,sBAAsB,IAF7B;AAGZM,mBAAe,EAAEN,sBAAsB,IAAI,CAA1BA,uBAAkDG;AAHvD,GAAd;AAMA,SAAO;AAAE7uC,QAAI,EAAN;AAAQkT,UAAM,EAAd;AAAgBpC,SAAK,EAArB;AAAuB09B,eAAW,EAAlC;AAAoC7nB,aAAS,EAA7C;AAA+CioB,oBAAgB,EAA/D;AAAiEd,cAAU,EAA3E;AAA6EQ,OAAG,EAAhF;AAAkFF,iBAAa,EAAbA;AAAlF,GAAP;AA5BF;;AA+BA,IAAMa,wBAAwB,GAAG,SAA3BA,wBAA2B,qCAAwC;AAEvE,SAAO,IAAI,CAAJ;AAAA,uEAA+B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,kCAE0Dd,gBAAgB,IAF1E,OAE0E,CAF1E,EAE5BnuC,IAF4B,2BAEtBkT,MAFsB,6BAEdpC,KAFc,4BAEP09B,WAFO,kCAEM7nB,SAFN,gCAEiBioB,gBAFjB,uCAEmCN,GAFnC,0BAEwCF,aAFxC,oCAIpC;;AAEMc,0BAN8B,GAMf,SAAfA,YAAe,OAAQ;AAC3B,oBAAGv6C,IAAI,CAAJA,eAAH,UAAGA,CAAH,EAAoC;AAClC,yBAAOA,IAAI,CAAX;AADF,uBAEO;AACL;AACD;AAXiC,eAM9Bu6C;;AAQNh8B,oBAAM,CAANA,QAAe,MAAM,CAAN,aAAoB,gBAAI;AAAA,uBAAIg8B,YAAY,CAAhB,IAAgB,CAAhB;AAAvCh8B,eAAe,CAAfA;AAEMi8B,gCAhB8B,GAgBTtqC,QAAQ,CAARA,iBAhBS,4CAgBTA,CAArBsqC;AACAA,gCAAkB,CAAlBA,QAA2B,gBAAI;AAAA,uBAAInvC,IAAI,CAAJA,+BAAJ,kBAAIA,CAAJ;AAA/BmvC;;AAEN,kBAAGnvC,IAAI,CAAJA,QAAH,qBAAqC;AACnCA,oBAAI,CAAJA;AACM+tC,uBAF6B,GAEnBlpC,QAAQ,CAARA,iEAAkE7E,IAAI,CAAJA,QAAlE6E,UAFmB,KAEnBA,EAAVkpC;AACAA,uBAAO,CAAPA,sEAAoE76B,MAAM,CAA1E66B;;AACN,oBAAG73C,MAAM,CAAT,gBAA0B;AAClB+3B,6BADkB,GACJppB,QAAQ,CAARA,cADI,aACJA,CAAdopB;AACAA,6BAAW,CAAXA;AACP;AACF;;AAID,+BAAgB;AACdqe,oGAAiB,CAAjBA,MAAiB,CAAjBA;AACA8C,8BAAc,GAAGpvC,IAAI,CAAJA,2EAAjBovC,CAAiBpvC,CAAjBovC;;AACA,mCAAkB;AAChB,sBAAGt+B,KAAK,CAAR,iBAA0B;AACxBs+B,kCAAc,CAAdA,wEAA6El8B,MAAM,CAAnFk8B;AACD;AACF;AAPH,qBAQO;AACL,oBAAG,CAAH,eAAmB;AACjB,sBAAGt+B,KAAK,CAAR,iBAA0B;AACxB9Q,wBAAI,CAAJA,wEAAmEkT,MAAM,CAAzElT;AADF,yBAEO,IAAG,CAAC8Q,KAAK,CAAT,mBAA6B;AAClC9Q,wBAAI,CAAJA,sEAAiEkT,MAAM,CAAvElT;AACD;AACF;AACF;;AAED,kBAAG8Q,KAAK,CAAR,mBAA4B;AAC1B09B,2BAAW,CAAXA;;AACA,oBAAG,CAAH,eAAmB;AACjBxuC,sBAAI,CAAJA,sEAAiEkT,MAAM,CAAvElT;AACD;AACF;;AACD,kBAAG8Q,KAAK,CAAR,iBAA0B;AACxB09B,2BAAW,CAAXA;AACAI,gCAAgB,CAAhBA,YAA6B/C,uFAA2BxqC,yEAA3BwqC,IAA7B+C,MAA6B/C,CAA7B+C;AACD;;AA1DmC,mBA4DjC99B,KAAK,CA5D4B;AAAA;AAAA;AAAA;;AAAA;AAAA,qBA6D5Bu+B,yBAAyB,uBAAwBn5C,MAAM,CAANA,kBAAD,aAACA,GAA0CmtB,gEAA3C,0CAA2CA,CAA1CntB,GAAxB,WA7DG,aA6DH,CA7DG;;AAAA;AAgEpCo4C,iBAAG,CAAHA;;AAhEoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAA/B;;AAAA;AAAA;AAAA;AAAP,GAAO,GAAP;AAFF;;AAsEA,IAAMgB,yBAAyB,GAAG,SAA5BA,yBAA4B,iBAAoB;AAClDh4C,OAAK,CAALA,0BAAgC,aAAK;AAC/B,QAAM4b,MAAM,GAAG,OAAO,CAAP,KAAa,kBAAM;AAAA,aAAIA,MAAM,CAANA,OAAc7U,QAAQ,CAAC/G,KAAK,CAALA,QAA3B,QAA0B,CAA1B;AAAlC,KAAe,CAAf;AACA22C,kFAAgB,CAAhBA,MAAgB,CAAhBA;AAFN32C;AADJ;;AAOA,IAAMi4C,oBAAoB,GAAG,SAAvBA,oBAAuB,qBAAwB;AAEnD,MAAMC,iBAAiB;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAElBlkB,qBAFkB,GAERzmB,QAAQ,CAARA,yDAA0DipC,UAAU,CAAVA,QAA1DjpC,UAFQ,KAERA,EAAVymB;AACN,2BAAYA,OAAO,CAAPA;AACZtkB,wBAAU,CAAC,YAAM;AACf,6BAAYskB,OAAO,CAAPA;AADJ,iBAEPp1B,MAAM,CAANA,wBAFH8Q,IAAU,CAAVA;AAIA,6JAAqD,kBAAU;AAC7D0kB,sBAAM,CAANA,oCAA2Cha,uFAA3Cga;AACAA,sBAAM,CAANA,iCAAwC;AACtC1D,6BAAW,EAAEtW,4FADyB;AAEtCuW,6BAAW,EAAE;AACX3tB,sBAAE,EAAEwzC,UAAU,CAAVA,QAAmBS;AADZ;AAFyB,iBAAxC7iB;AAFF;;AARwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAjB8jB,iBAAiB;AAAA;AAAA;AAAvB,GAAuB,EAAvB;;AAmBA1B,YAAU,CAAVA;AArBF;;AAwBA,IAAMW,iCAAiC,GAAG,SAApCA,iCAAoC,mBAAoB;AAE5D,MAAMgB,UAAU,GAAGnW,KAAK,CAALA,KAAWz0B,QAAQ,CAARA,iBAA9B,wCAA8BA,CAAXy0B,CAAnB;AAEAmW,YAAU,CAAVA,QAAmB,mBAAW;AAE5B,QAAMC,eAAe,GAAGrxC,QAAQ,CAAC0vC,OAAO,CAAPA,QAAjC,QAAgC,CAAhC;;AAEA,QAAG2B,eAAe,KAAlB,kBAAyC;AAEvC3B,aAAO,CAAPA;AAEA,UAAM76B,MAAM,GAAGrO,QAAQ,CAARA,wFAAf,KAAeA,EAAf;AACMqO,YAAM,CAANA;AACP;AAVHu8B;AAJF;;AAkBA,IAAMJ,yBAAyB;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAEhC/V,iBAAK,CAALA,KAAWt5B,IAAI,CAAJA,cAAXs5B,kBAAgD,iBAAK;AAAA,qBAAIqW,KAAK,CAALA,mBAAJ;AAArDrW;AAFgC;AAAA,mBAI1B,+IAAqD,kBAAU;AACnE5N,oBAAM,CAANA,oCAA2C0iB,aAAa,GAAG18B,qFAAH,GAAuCA,uFAA/Fga;AACAA,oBAAM,CAANA,iCAAwC;AACtC1D,2BAAW,EAAEtW,yFADyB;AAEtCuW,2BAAW,EAAE;AAAE/U,wBAAM,EAAR;AAAUyT,2BAAS,EAATA;AAAV;AAFyB,eAAxC+E;AAN8B,aAI1B,CAJ0B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAzB2jB,yBAAyB;AAAA;AAAA;AAA/B,CAA+B,EAA/B;;AAeA,IAAMO,qBAAqB,GAAG,SAAxBA,qBAAwB,WAAY;AACxC,MAAMC,IAAI,GAAGhrC,QAAQ,CAARA,iBAAb,+BAAaA,CAAb;AACAgrC,MAAI,CAAJA,QAAa,eAAG;AAAA,WAAIvB,GAAG,CAAHA,iBAAJ,4BAAIA,CAAJ;AAAhBuB;AACA,MAAMvB,GAAG,GAAGzpC,QAAQ,CAARA,iFAAZ,KAAYA,EAAZ;AACA,WACEypC,GAAG,CAAHA,cALsC,4BAKtCA,EALsC,CAMxC;AANF;;AASO,IAAMwB,sBAAsB,GAAG;AACpCrC,uBAAqB,EADe;AAEpCS,wBAAsB,EAFc;AAGpCe,0BAAwB,EAHY;AAIpCM,sBAAoB,EAJgB;AAKpCD,2BAAyB,EALW;AAMpCb,mCAAiC,EANG;AAOpCmB,uBAAqB,EAArBA;AAPoC,CAA/B,C;;;;;;;;;;;;;;;;;;;;AC/MP;AAEO,IAAMG,sBAAsB,GAAG,SAAzBA,sBAAyB,SAAU;AAE5C,MAAMpkB,MAAM,GAAG9mB,QAAQ,CAARA,cAAf,KAAeA,CAAf;AACM8mB,QAAM,CAANA;AAEN,MAAMqkB,OAAO,GAAGnrC,QAAQ,CAARA,cAAhB,0BAAgBA,CAAhB;AAEAgC,QAAM,GAAGhC,QAAQ,CAARA,cAATgC,cAAShC,CAATgC;AACAA,QAAM,CAANA;AARG,E;;;;;;;;;;;;;;;;ACFP,IAAMopC,cAAc,GAAG,SAAjBA,cAAiB,WAAY;AAE/B,MAAIC,QAAQ,GAAGrrC,QAAQ,CAARA,iBAAf,2CAAeA,CAAf;AACA,MAAImrC,OAAO,GAAGE,QAAQ,CAAtB,CAAsB,CAAtB;AACA,MAAIvoC,KAAK,GAAT;AAEA,MAAMwoC,MAAM,GAAZ;;AAEA,kBAAe;AACbxoC,SAAK;;AACL,QAAGtJ,QAAQ,CAAC2xC,OAAO,CAAPA,QAAT3xC,QAAQ,CAARA,KAAH,UAAoD;AAClD8xC,YAAM,CAANA;AACAH,aAAO,GAAGE,QAAQ,CAAlBF,KAAkB,CAAlBA;AAFF,WAGO;AACLA,aAAO,GAAPA;AACD;AACF;;AAED,SAAOG,MAAM,CAAb;AAlBJ;;AAqBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,WAAY;AAChCppC,YAAU,CAAC,YAAM;AACf,QAAMqpC,aAAa,GAAG9pC,UAAU,CAACC,gBAAgB,CAAC3B,QAAQ,CAAzB2B,eAAgB,CAAhBA,2CAAjC,EAAiCA,CAAD,CAAhC;AACA,QAAMqpC,IAAI,GAAGI,cAAc,CAA3B,QAA2B,CAA3B;AACA,QAAMrC,GAAG,GAAGyC,aAAa,GAAzB;AAEA,QAAMC,MAAM,GAAGzrC,QAAQ,CAARA,cAAf,0BAAeA,CAAf;AACA,gBAAWyrC,MAAM,CAANA;AANbtpC,GAAU,CAAVA;AADF;;AAWO,IAAMupC,uBAAuB,GAAG;AACrCH,eAAa,EAAbA;AADqC,CAAhC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChCP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAM3D,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAAA,wBAEYprC,yDAFZ;AAAA,MAEzBnL,MAFyB;AAAA,MAEjBsR,WAFiB;AAAA,MAEJ4M,WAFI;;AAI/B,MAAMxN,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAI4M,OAAO,GAAG06B,kGAAsB,CAAC,WAAW,CAAX,OAAmB,sBAAU;AAAA,WAAK53C,UAAU,CAAVA,0BAAqCA,UAAU,CAApD;AAA9B,GAAC,CAAD,EAApC,WAAoC,CAApC;AAEAkd,SAAO,GAAG,OAAO,CAAP,KAAa,gBAAa;AAC9B,QAAMg9B,GAAG,GAAG3U,CAAC,CAADA,SAAWA,CAAC,CAADA,OAAXA,UAAZ;AACA,QAAM4U,GAAG,GAAGC,CAAC,CAADA,SAAWA,CAAC,CAADA,OAAXA,UAAZ;AACF,WAAOD,GAAG,GAAV;AAHJj9B,GAAU,CAAVA;AAMA,MAAI3M,MAAM,GAAG3Q,MAAM,CAANA,iBAAwBmtB,iDAAxBntB,GAAwCmtB,gDAArD;AACIxc,QAAM,CAANA;AAEJC,uEAAc,KAAKF,QAAQ,CAAb,SAAdE,MAAc,CAAdA;AAEE0M,SAAO,CAAPA,QAAgB,kBAAM;AAAA,WAAIm9B,qEAAY,CAAhB,MAAgB,CAAhB;AAAtBn9B;AAEAu8B,6FAAsB,CAAtBA,MAAsB,CAAtBA;AAEA,MAAMa,qBAAqB,GAAG/pC,MAAM,CAANA,cAA9B,0BAA8BA,CAA9B;AACM+pC,uBAAqB,CAArBA,0BAAgD,aAAK;AACnD,gJAAkD,kBAAU;AAC1DllB,YAAM,CAANA;AADF;AAGA,wJAA0D,kBAAU;AAClEA,YAAM,CAANA;AADF;AAJFklB;AASN,MAAMC,kBAAkB,GAAGhsC,QAAQ,CAARA,iBAA3B,yBAA2BA,CAA3B;AACMgsC,oBAAkB,CAAlBA,QAA2B,mBAAW;AACpC,wJAA0D,kBAAU;AAClEnlB,YAAM,CAANA;AADF;AADFmlB;AAKNC,8BAA4B,CAA5BA,kBAA4B,CAA5BA;AAEA,MAAMC,QAAQ,GAAGlsC,QAAQ,CAARA,iBAAjB,yBAAiBA,CAAjB;AACMksC,UAAQ,CAARA,QAAiB,mBAAW;AAC1B,wJAA0D,kBAAU;AAClErlB,YAAM,CAANA;AADF;AADFqlB;AAKND,8BAA4B,CAA5BA,QAA4B,CAA5BA;AAEA,MAAME,OAAO,GAAGnsC,QAAQ,CAARA,iBAAhB,iBAAgBA,CAAhB;AACMmsC,SAAO,CAAPA,QAAgB,sBAAc;AAC5B,wJAA0D,kBAAU;AAClEtlB,YAAM,CAANA;AADF;AADFslB;AAKNF,8BAA4B,CAA5BA,OAA4B,CAA5BA;AAEA9pC,YAAU,CAAC,YAAM;AAEX,QAAItO,KAAK,GAAGmM,QAAQ,CAARA,iBAAZ,uBAAYA,CAAZ;AACInM,SAAK,CAALA,QAAc,gBAAQ;AACpBC,UAAI,CAAJA,0BAA+B,aAAK;AAC9B,YAAMua,MAAM,GAAG,OAAO,CAAP,KAAa,kBAAM;AAAA,iBAAIA,MAAM,CAANA,OAAc7U,QAAQ,CAAC1F,IAAI,CAAJA,QAA3B,QAA0B,CAA1B;AAAlC,SAAe,CAAf;;AACA,YAAGua,MAAM,CAAT,OAAiB;AAAA,iCACU7R,yDADV;AAAA,cACH+G,QADG;;AAEXpB,oBAAU,CAAC,YAAM;AAAA,mCACW3F,yDADX;AAAA,gBACHiT,SADG;;AAEX,gBAAGA,SAAS,IAAIA,SAAS,CAATA,aAAuBpB,MAAM,CAA7C,IAAkD;AAC5C,oMAA8C,kBAAU;AACtDwY,sBAAM,CAANA;AADF;AADN,mBAIO;AACD,oMAA8C,kBAAU;AACtD,oBAAMulB,cAAc,mCAAQvlB,MAAM,CAANA,iCAAwCha,kFAAxCga,EAAR,MAAQA,CAAR;AAAyFwlB,gCAAc,EAAE;AAAzG,kBAApB;;AACAxlB,sBAAM,CAANA;AAFF;AAIL;AAXG,aAAV1kB,GAAU,CAAVA;AAaL;AAjBPrO;AADFD;AAqBJo4C,gCAA4B,CAA5BA,KAA4B,CAA5BA;AAxBI,KAAV9pC,GAAU,CAAVA;AA4BAwmC,oFAAkB,uBAAlBA,MAAkB,CAAlBA;AAtFC;;AAyFP,IAAMsD,4BAA4B,GAAG,SAA/BA,4BAA+B,UAAW;AAC1Ct9B,SAAO,CAAPA,QAAgB,kBAAM;AAAA,WAAI,MAAM,CAAN,0BAAiC,aAAK;AAC9D,0JAA0D,kBAAU;AAClEkY,cAAM,CAANA,6CAAoDxY,MAAM,CAANA,QAApDwY;AADF;AADoB,KAAI,CAAJ;AAAtBlY;AADN,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAM29B,aAAa;AAAA,qEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEZnpB,uBAFY,GAEiBopB,IAFjB,YAEZppB,EAAaC,WAFD,GAEiBmpB,IAFjB,YAEZppB;AAFY,8BAIqH3mB,yDAJrH,EAIdnL,MAJc,2BAINsR,WAJM,gCAIOlR,UAJP,+BAImBoR,OAJnB,4BAI4BD,UAJ5B,+BAIwCmL,WAJxC,gCAIqDC,MAJrD,2BAI6DK,MAJ7D,2BAIqElB,KAJrE,0BAI4EgC,OAJ5E,4BAIqFa,WAJrF,gFAIkGre,MAJlG;AAAA;AAAA,4CASbkb,kFATa,uBAabA,uFAba,uBAiBbA,0FAjBa,uBA8BbA,sFA9Ba,wBAmCbA,+FAnCa,wBAuCbA,yFAvCa,wBA+CbA,4FA/Ca,wBAiEbA,gFAjEa;AAAA;;AAAA;AAUhB2/B,6BAAiB,0BAAjBA,MAAiB,CAAjBA;AAVgB;;AAAA;AAchB3vC,qGAA8B;AAAExL,oBAAM,EAAE+xB,WAAW,CAArB;AAA8B3xB,wBAAU,EAAE2xB,WAAW,CAAC3xB;AAAtD,aAA9BoL;AAdgB;;AAAA;AAmBhBxL,kBAAM,CAANA,gBAAuBI,UAAU,CAnBjB,EAmBhBJ,CAnBgB,CAmBsB;;AAEhCo7C,uBArBU,GAqBI;AAChBpxC,kBAAI,EAAE5J,UAAU,CADA;AAEhBJ,oBAAM,EAFU;AAERI,wBAAU,EAFF;AAEIoR,qBAAO,EAFX;AAEaD,wBAAU,EAFvB;AAEyBmL,yBAAW,EAFpC;AAEsCC,oBAAM,EAF5C;AAE8CK,oBAAM,EAFpD;AAEsDlB,mBAAK,EAAEV,+CAAK,CAFlE,KAEkE,CAFlE;AAE2E0C,qBAAO,EAFlF;AAEoFa,yBAAW,EAF/F;AAEiGnD,mBAAK,EAAElb;AAFxG,aAAd86C;AAKN5vC;AA1BgB;;AAAA;AAAA;AAAA,mBA+BU6vC,cAAc,CAACtpB,WAAW,CAAZ,kBAA+BA,WAAW,CAA1C,QAAmDA,WAAW,CA/BtF,cA+BwB,CA/BxB;;AAAA;AA+BhBupB,6BA/BgB,gBA+BhBA;AACAC,iCAAqB,CAArBA,iBAAqB,CAArBA;AAhCgB;;AAAA;AAAA;AAAA,mBAoCUC,wBAAwB,CApClC,WAoCkC,CApClC;;AAAA;AAoChBF,6BApCgB,gBAoChBA;AACAC,iCAAqB,CAArBA,iBAAqB,CAArBA;;AArCgB;AAAA;AAAA,mBAwCUF,cAAc,CAACtpB,WAAW,CAAXA,UAAsBA,WAAW,CAAlC,YAxCxB,MAwCwB,CAxCxB;;AAAA;AAwChBupB,6BAxCgB,gBAwChBA;AACAC,iCAAqB,CAArBA,iBAAqB,CAArBA;AACAzqC,sBAAU,CAAC,YAAM;AACf2qC,8FAAiB,CAACH,iBAAiB,CAAlB,YAA+B;AAAEI,sCAAsB,EAAE3pB,WAAW,CAACtB;AAAtC,eAA/B,CAAjBgrB;AADF3qC,aAAU,CAAVA;AA1CgB;;AAAA;AAgDV0hB,4BAhDU,GAgDSjS,iIAA+DwR,WAAW,CAhDnF,EAgDSxR,CAAnBiS;AAhDU;AAAA,mBAiDU6oB,cAAc,mBAjDxB,MAiDwB,CAjDxB;;AAAA;AAiDhBC,6BAjDgB,gBAiDhBA;AACMK,wBAlDU,GAkDKL,iBAAiB,CAAjBA,SAA2BA,iBAAiB,CAAjBA,uBAAyCA,iBAAiB,CAAjBA,WAApEA,KACX9/B,mFADW8/B,GAEX9/B,kFAFJmgC;AAGNJ,iCAAqB,CArDL,iBAqDK,CAArBA,CArDgB,CAsDhB;;AAEA3pC;AACAA;AACAA;AAEAd,sBAAU,CAAC,YAAM;AACfqqC,+BAAiB,eAAeG,iBAAiB,CAAhC,YAA6CA,iBAAiB,CAA/EH,MAAiB,CAAjBA;AADFrqC,aAAU,CAAVA;AA5DgB;;AAAA;AAkEhBqqC,6BAAiB,CAAC3/B,gFAAD,cAA2CuW,WAAW,CAAvEopB,MAAiB,CAAjBA;AAlEgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAbF,aAAa;AAAA;AAAA;AAAnB,CAAmB,EAAnB;;AAuEA,IAAMI,cAAc;AAAA,sEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,+BAE2ClwC,yDAF3C,EAEJywC,YAFI,6BAEUt+B,OAFV,6BAE2B89B,WAF3B;AAIf5pC,mBAJe,GAILqqC,gBAAgB,IAJX,YAIfrqC;AAEA8pC,6BANe,GAMK/6B,wPANL,gBAMKA,CAApB+6B;AANe;AAAA,mBAQgBzhB,4FAAiCyhB,iBAAiB,CAAlDzhB,YARhB,MAQgBA,CARhB;;AAAA;AAQrByhB,6BAAiB,CARI,UAQrBA,GARqB,cAQrBA;AARqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAdD,cAAc;AAAA;AAAA;AAApB,CAAoB,EAApB;;AAaA,IAAMF,iBAAiB;AAAA,sEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAGf3/B,kFAHe,wBAOfA,kFAPe,wBAgBfA,mFAhBe,wBAoBfA,gFApBe;AAAA;;AAAA;AAIdhQ,oGAA6B;AAAEiG,mBAAK,EAAP;AAAYC,4BAAc,EAA1B;AAAmCoqC,iBAAG,EAAE;AAAE17C,0BAAU,EAAEA,UAAU,CAACgE;AAAzB;AAAxC,aAA7BoH;AAJc;;AAAA;AASlB,gBAAGpL,UAAU,CAAb,OAAqB;AAAA,sCACDmgB,qGADC,UACDA,CADC,EACX9O,KADW;AAEnBjG,sGAA6B;AAAEiG,qBAAK,EAAP;AAASC,8BAAc,EAAvB;AAA+BoqC,mBAAG,EAAE;AAAErqC,uBAAK,EAAP;AAAgBrR,4BAAU,EAAEA,UAAU,CAACgE;AAAvC;AAApC,eAA7BoH;AACD;;AAZiB;;AAAA;AAiBhBA,oIAAkC+U,qGAAlC/U,UAAkC+U,CAAlC/U;AAAkFkG,4BAAc,EAAhGlG;AAAyGswC,iBAAG,EAAE;AAAE17C,0BAAU,EAAEA,UAAU,CAACgE;AAAzB;AAA9GoH;AAjBgB;;AAAA;AAqBhB,gBAAGwR,MAAM,CAAT,iBAA2B;AACzBxR,gGAAuB;AAAEiG,qBAAK,EAAP;AAAYuL,sBAAM,EAANA;AAAZ,eAAvBxR;AADF,mBAEO,IAAGwR,MAAM,CAAT,aAAuB;AAC1BxR,gGAAuB;AAAEiG,qBAAK,EAAP;AAAYuL,sBAAM;AAAeH,8BAAY,EAAEG,MAAM,CAANA,eAAsB;AAAnD;AAAlB,eAAvBxR;AACH;;AAAA;AAzBe;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAjB2vC,iBAAiB;AAAA;AAAA;AAAvB,CAAuB,EAAvB;;AAgCA,IAAMK,wBAAwB;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEvBx7C,kBAFuB,GAEA+xB,WAFA,OAEvB/xB,EAAQI,UAFe,GAEA2xB,WAFA,WAEvB/xB;AAEF+7C,wBAJyB,GAIV,MAAM,CAAN,qBAA4B,aAAC;AAAA,qBAAI,CAACz0C,+CAAQ,CAAC2oB,CAAC,CAAF,MAAS,UAAU,CAAV,UAAqB,aAAC;AAAA,uBAAI9qB,CAAC,CAAL;AAA5C,eAAsB,CAAT,CAAb;AAJnB,aAIV,CAAf42C;AAJyB;AAAA,mBAMXliB,yGANW,YAMXA,CANW;;AAAA;AAMzBl6B,iBANyB,iBAMzBA;AANyB;AAAA,mBAQG,0GAA+C;AAAEA,mBAAK,EAALA;AAAF,aAA/C,EARH,MAQG,CARH;;AAAA;AAQzBq8C,+BARyB,iBAQzBA;AACN57C,sBAAU,CAAVA,qCAAwBA,UAAU,CAAlCA,2BAA6C47C,mBAAmB,CAAhE57C;AACM4c,kBAVyB,GAUhB;AACX5c,wBAAU,EADC;AAEXoR,qBAAO,kCAAOrG,0DAAP;AAAiCsG,qBAAK,EAAE;AAAxC,gBAFI;AAGXuL,oBAAM,EAAE;AAAEH,4BAAY,EAAd;AAAmBC,sBAAM,EAAzB;AAA8BC,2BAAW,EAAE;AAA3C,eAHG;AAIXJ,oBAAM,EAJK;AAKXmB,qBAAO,EALI;AAMXhC,mBAAK,EAAEV,+CAAK,CAACqB,oGAAD;AAND,aAATO;AAVyB;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAxBw+B,wBAAwB;AAAA;AAAA;AAA9B,CAA8B,EAA9B;;AAsBA,IAAMD,qBAAqB,GAAG,SAAxBA,qBAAwB,oBAAqB;AAAA,yBAEpBpwC,yDAFoB;AAAA,MAEzC4P,IAFyC;AAAA,MAEnCC,UAFmC;;AAIjDsgC,mBAAiB,CAAjBA,UAA4BA,iBAAiB,CAAjBA,WAA5BA;AAEA9vC,2FAA8B;AAAEwR,UAAM,EAAR;AAA6BhC,cAAU,EAAVA;AAA7B,GAA9BxP;AAEAxG,8EAAwBoW,+CAAK,CAACkgC,iBAAiB,CAA/Ct2C,UAA6B,CAA7BA;AARF;;AAWA,IAAMi3C,gBAAgB,GAAG,SAAnBA,gBAAmB,SAAU;AAEjCrqC;AACAA;AAEAd,YAAU,CAAC,YAAM;AACftF;AADFsF,GAAU,CAAVA;AALF;;AAUO,IAAMwhB,kBAAkB,GAAG;AAChC2oB,eAAa,EADmB;AAEhCgB,kBAAgB,EAAhBA;AAFgC,CAA3B,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9KP;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,qBAAwB;AAEjD,MAAIC,oBAAoB,GAAxB;;AAEA,kBAAgB;AACZ,QAAIn8C,MAAM,CAAV,iBAA4B;AACxBm8C,0BAAoB,GAAGA,oBAAoB,KAAKnhC,UAAU,CAAVA,SAAoBQ,qFAApBR,IAAyDA,UAAU,CAAVA,SAAoBQ,4FAAlF,CAA3C2gC;AADJ,WAGK;AACDA,0BAAoB,GAAGA,oBAAoB,IAAKnhC,UAAU,CAAVA,SAAoBQ,qFAApE2gC;AACH;AACJ;;AAED,SAAO,CAAP;AAbJ;;AAgBA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,qBAAwB;AAC3C,SAAO,CAACF,oBAAoB,aAA5B,MAA4B,CAA5B;AADJ;;AAIA,IAAMG,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBj9B;AACArP,QAAM,CAANA;AAFJ;;AAKA,IAAMusC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrB,MAAMt8C,MAAM,GAAGmL,0DAAf;AACAnL,QAAM,CAANA,QAAe6a,yEAAf7a;AACAwL;AAHJ;;AAMA,IAAM+wC,mBAAmB,GAAG,SAAtBA,mBAAsB,6DAAiE;AAEzF,MAAMn4C,EAAE,GAAG+D,QAAQ,CAAnB,0BAAmB,CAAnB;AAEA,MAAIq0C,MAAM,GAAV;AACIA,QAAM,GAAGA,MAAM,IAAIC,iBAAiB,CAAjBA,KAAnBD;AACAA,QAAM,GAAGA,MAAM,IAAIC,iBAAiB,CAAjBA,OAAnBD;AAEJ,MAAMp8C,UAAU,GAAGo8C,MAAM,uBAAuB,WAAW,CAAX,KAAiB,aAAC;AAAA,WAAIlhC,CAAC,CAADA,OAAJ;AAAlE,GAAgD,CAAhD;AAEA;AAVJ;;AAaA,IAAMohC,gBAAgB,GAAG,SAAnBA,gBAAmB,aAAc;AAAA,wBACNvxC,yDADM;AAAA,MAC3BqG,OAD2B;AAAA,MAClB8L,OADkB;;AAEnC,MAAMw+B,GAAG,GAAGtqC,OAAO,CAAnB;AACA,MAAMC,KAAK,GAAGqqC,GAAG,GAAGA,GAAG,CAAN,QACL,OAAO,CAAP,KAAa,aAAC;AAAA,WAAIj2C,CAAC,CAADA,kBAAoBzF,UAAU,CAAlC;AAAd,OACM,OAAO,CAAP,KAAa,aAAC;AAAA,WAAIyF,CAAC,CAADA,kBAAoBzF,UAAU,CAAlC;AAAd,aADN,QAEMoR,OAAO,CAHzB;AAKA,SAAO;AAAEC,SAAK,EAALA;AAAF,GAAP;AARJ;;AAWA,IAAMkrC,kBAAkB,GAAG,SAArBA,kBAAqB,mFAAsF;AAE7G,MAAIC,cAAc,GAAG,OAAO,CAAP,KAAa,aAAC;AAAA,WAAI/2C,CAAC,CAADA,SAAW2sB,gBAAgB,CAA/B;AAAnC,GAAqB,CAArB;AAEA;;AAEA,sBAAmB;AACjBxV,UAAM,GAANA;AACAA,UAAM,CAANA;;AACA,QAAGA,MAAM,CAANA,OAAH,aAA8B;AAC5BA,YAAM,CAANA,QAAe5B,8CAAK,CAACqB,aAAa,CAAlCO,KAAoB,CAApBA;AACD;AALH,SAMO;AACLA,UAAM,GAAG;AACP5c,gBAAU,EADH;AAEPoR,aAAO;AAAgBC,aAAK,EAAE;AAAvB,QAFA;AAGPuL,YAAM,EAAEo+B,WAAW,IAAI;AAAEv+B,oBAAY,EAAd;AAAmBC,cAAM,EAAzB;AAA8BC,mBAAW,EAAE;AAA3C,OAHhB;AAIPJ,YAAM,EAJC;AAKPmB,aAAO,EALA;AAMPhC,WAAK,EAAEV,8CAAK,CAACqB,aAAa,CAAd;AANL,KAATO;AAQD;;AAED;AAvBJ;;AA0BO,IAAMuD,iBAAiB,GAAG;AAC7B27B,sBAAoB,EADS;AAE7BE,gBAAc,EAFe;AAG7BC,aAAW,EAHkB;AAI7BC,YAAU,EAJmB;AAK7BC,qBAAmB,EALU;AAM7BG,kBAAgB,EANa;AAO7BC,oBAAkB,EAAlBA;AAP6B,CAA1B,C;;;;;;;;;;;;;;;;;;;;;;ACzFP;AACA;AAEA;AAEO,IAAMlC,YAAY,GAAG,SAAfA,YAAe,SAAY;AAAA,wBAEEtvC,yDAFF;AAAA,MAE1BnL,MAF0B;AAAA,MAElBsd,OAFkB;AAAA,MAETX,MAFS;;AAIlC,MAAMjM,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAENsM,QAAM,CAANA,iBAAwBA,MAAM,CAANA,gBAAxBA;AACAA,QAAM,CAANA,qBAA4BA,MAAM,CAANA,8BAA5BA;AAEA,MAAMo+B,WAAW,GAAG,OAAO,CAAP,KAAa,iBAAK;AAAA,WAAIyB,KAAK,CAALA,kBAAwB7/B,MAAM,CAAlC;AAAtC,GAAoB,CAApB;AAEAA,QAAM,CAANA,WAAkB,CAAC,CAAD,eAAiBhd,MAAM,CAANA,kBAAyBgd,MAAM,CAAlEA;AACAA,QAAM,CAANA,OAAcA,MAAM,CAANA,QAAdA;AAEApM,uEAAc,CAAC;AAAEoM,UAAM,EAANA;AAAF,GAAD,EAAatM,QAAQ,CAArB,SAA+B/B,QAAQ,CAARA,cAA7CiC,sBAA6CjC,CAA/B,CAAdiC;;AAEA,mBAAgB;AACVksC,gBAAY,CAAC1B,WAAW,CAAZ,QAAqBA,WAAW,CAAhC,kBAAZ0B,MAAY,CAAZA;AACL;;AAED,MAAG98C,MAAM,CAANA,kBAAyBgd,MAAM,CAAlC,IAAuC;AAEjC,QAAMo7B,GAAG,GAAGzpC,QAAQ,CAARA,uEAAwEqO,MAAM,CAA9ErO,IAAZ,KAAYA,EAAZ;AACM,aAAQypC,GAAG,CAAHA;;AAEd,QAAGp4C,MAAM,CAAT,iBAA2B;AACrB8Q,gBAAU,CAAC,YAAM;AACX,YAAM8mC,UAAU,GAAGQ,GAAG,CAAHA,cAAnB,oBAAmBA,CAAnB;AACA,wBAAeR,UAAU,CAAVA;AAFrB9mC,OAAU,CAAVA;AAN2B,MAYjC;;;AACA,QAAG6L,MAAM,IAAIA,MAAM,CAAnB,iBAAqC;AAC/BmgC,kBAAY,kCAAZA,MAAY,CAAZA;AACL;AACN;AArCA;;AAwCP,IAAMA,YAAY,GAAG,SAAfA,YAAe,oCAAuC;AACtD,MAAMlmB,WAAW,GAAGjoB,QAAQ,CAARA,cAApB,+BAAoBA,CAApB;AACA,MAAMzQ,KAAK,GAAG,CAAC,CAACye,MAAM,CAAR,qBAA8BA,MAAM,CAApC,qBAA0Dia,WAAW,GAAGA,WAAW,CAAd,QAAnF;AACA,MAAMmmB,MAAM,gJAAwHpgC,MAAM,CAA9H,iBAAZ,gBAAY,CAAZ;AACA,MAAMhM,MAAM,GAAGhC,QAAQ,CAARA,oDAAqDqO,MAAM,CAA3DrO,IAAf,KAAeA,EAAf;AACMgC,QAAM,CAANA;AAEN,MAAMqsC,aAAa,GAAGruC,QAAQ,CAARA,yDAA0DqO,MAAM,CAAhErO,IAAtB,KAAsBA,EAAtB;AACMquC,eAAa,CAAbA;AARZ,E;;;;;;;;;;;;;;;;;;;;;;;AC7CA;AAEA;AAEA,IAAIC,kBAAkB,GAAtB;AACA;AAEO,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,UAAW;AAE7C,MAAI;AAEA,QAAM94C,EAAE,GAAGjF,OAAO,CAAPA,MAAcA,OAAO,CAAhC;AACA,QAAMg+C,EAAE,GAAGxuC,QAAQ,CAARA,4BAAX,EAAWA,EAAX;AAEAsuC,sBAAkB,GAAlBA;AACAG,0BAAsB,GAAtBA;AANJ,IAQE,UAAS;AACT12C,YAAQ,yBAARA,CAAQ,CAARA;AACD;AAZE;AAeA,IAAM22C,eAAe,GAAG,SAAlBA,eAAkB,aAAgB;AAE3C,MAAGj4C,IAAI,CAAJA,MAAW4wC,IAAI,CAAf5wC,UAAH,MAAmC;AAEnC,MAAIuL,MAAM,GAAGhC,QAAQ,CAARA,eAAb,cAAaA,CAAb;AAEA,cAAWgC,MAAM,CAANA;AAEX,MAAMD,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAM4sC,MAAM,GAAG3uC,QAAQ,CAARA,cAAf,KAAeA,CAAf;AACM2uC,QAAM,CAANA;;AAEN,MAAGtH,IAAI,CAAP,UAAkB;AACdsH,UAAM,CAANA,kCAAkCtH,IAAI,CAAtCsH;AACAA,UAAM,CAANA,YAAmBtH,IAAI,CAAJA,8BAAnBsH,QAAmBtH,CAAnBsH;AACH;;AAED,MAAG,CAAH,oBAAwB;AACpB;AACAL,sBAAkB,GAAGtuC,QAAQ,CAARA,cAFD,eAECA,CAArBsuC,CAFoB,CAE0C;AACjE;;AAEDA,oBAAkB,CAAlBA;;AAEA,MAAG,CAACjH,IAAI,CAAR,UAAmB;AACfrlC,UAAM,GAAGhC,QAAQ,CAARA,eAATgC,cAAShC,CAATgC;AACAA,UAAM,CAANA;AACAC,yEAAc,CAAC;AAAEolC,UAAI,EAAJA;AAAF,KAAD,EAAWtlC,QAAQ,CAAnB,SAAdE,MAAc,CAAdA;AACA,QAAM2sC,QAAQ,GAAG5uC,QAAQ,CAARA,cAAjB,qDAAiBA,CAAjB;AACM4uC,YAAQ,CAARA,YAAoBA,QAAQ,CAARA,4BAApBA,QAAoBA,CAApBA;AACT;AAhCE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEO,IAAM9B,iBAAiB,GAAG,SAApBA,iBAAoB,eAAkB;AAEjD,MAAM5xB,IAAI;AAAA,uEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEH6xB,oCAFG,GAE8CR,IAF9C,uBAEHQ,EAFG,qBAE8CR,IAF9C,aAEHQ,EAAwB1R,YAFrB,6DAEH0R;AAFG,gCAIkDvwC,yDAJlD,EAIHnL,MAJG,2BAIK8d,OAJL,4BAIqB0/B,UAJrB,0BAIiClsC,WAJjC,gCAMX;;AACMlR,wBAPK,GAOQ,WAAW,CAAX,KAAiB,aAAC;AAAA,uBAAIkb,CAAC,CAADA,OAAS0B,MAAM,CAAnB;AAP1B,eAOQ,CAAb5c;;AAEAq9C,kCATK,GASkB,SAAvBA,oBAAuB,qBAAwB;AAEjDC,yBAAS,CAATA,iEAAiEv+C,OAAO,CAAxEu+C;AAEAC,6CAA6B,4BAA7BA,KAA6B,CAA7BA;;AAEA,oBAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,QAAS;AACnC;AACAF,2BAAS,CAATA,6BAFmC,qBAEnCA,EAFmC,CAGnC;;AACAA,2BAAS,CAATA,mEAAmEv+C,OAAO,CAA1Eu+C,MAJmC,SAInCA,EAJmC,CAKnC;;AACAA,2BAAS,CAATA,0BAAoC,iBAAS;AACzCD,wCAAoB,UAApBA,SAAoB,CAApBA;AAP+B,mBAMnCC,EANmC,CASnC;;AACA,sBAAMz6C,WAAW,GAAG0L,QAAQ,CAARA,cAApB,sBAAoBA,CAApB;;AACA,mCAAgB;AACZ1L,+BAAW,CAAXA;AACH;AAnB4C,iBAMjD,CANiD,CAsBjD;;;AACAy6C,yBAAS,CAATA;AAhCO,eASLD;;AA0BAI,+BAnCK,GAmCe,SAApBA,iBAAoB,GAAM;AAE5B,oBAAMC,cAAc,GAAGnvC,QAAQ,CAARA,iBAAvB,gBAAuBA,CAAvB;AAEMmvC,8BAAc,CAAdA,QAAuB,qBAAa;AAChC,sBAAMr/C,IAAI,GAAG,UAAU,CAAV,WAAsB,gBAAI;AAAA,2BAAIA,IAAI,CAAJA,SAAcs/C,SAAS,CAATA,QAAlB;AAAvC,mBAAa,CAAb;AACAnc,6FAAiB,8BAAjBA,MAAiB,CAAjBA;AAFJkc;AAKN,oBAAME,UAAU,GAAGrvC,QAAQ,CAARA,iBAAnB,eAAmBA,CAAnB;AAEMqvC,0BAAU,CAAVA,QAAmB,qBAAa;AAC5B,sBAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,QAAS;AAC9B,wBAAM9+C,OAAO,GAAG,UAAU,CAAV,WAAsB,gBAAI;AAAA,6BAAIV,IAAI,CAAJA,SAAc2vB,KAAK,CAALA,sBAAlB;AAA1C,qBAAgB,CAAhB;;AACA,iCAAY;AACVqvB,0CAAoB,UAApBA,SAAoB,CAApBA;AACD;AAJL;;AAMAC,2BAAS,CAATA;AAPJM;AAUN,oBAAME,YAAY,GAAGvvC,QAAQ,CAARA,iBAArB,aAAqBA,CAArB;AACMuvC,4BAAY,CAAZA,QAAqB,gBAAQ;AACzBp0C,sBAAI,CAAJA,0BAA+B,iBAAS;AAEtCskB,yBAAK,CAALA;AAEA,wBAAM+vB,UAAU,GAAG/vB,KAAK,CAAxB;AACM+vB,8BAAU,CAAVA;AACN,wBAAMxxB,WAAW,GAAGwxB,UAAU,CAAVA,QAApB;;AAEA,wBAAMh/C,OAAO,mCAAQ,UAAU,CAAV,WAAsB,gBAAI;AAAA,6BAAIV,IAAI,CAAJA,QAAJ;AAAlC,qBAAQ,CAAR,GAAoE,UAAU,CAAV,aAAwB,gBAAI;AAAA,6BAAIA,IAAI,CAAJA,QAAJ;AAA7G,qBAAiF,CAApE,CAAb;;AAGAk/C,iDAA6B,sBAA7BA,IAA6B,CAA7BA;;AAEA,wBAAGx+C,OAAO,IAAIA,OAAO,CAArB,MAA4B;AAExBw2C,kHAAgCv1C,UAAU,CAAVA,MAAhCu1C,MACMA,uFAA2Bx2C,OAAO,CAAPA,KADjCw2C,CACiCx2C,CAA3Bw2C,CADNA,GAEMN,oFAAU,aAAalqC,yEAAb,IAAiDgiB,iDAAjD,EAAgEhuB,OAAO,CAAPA,KAFhFw2C,CAEgFx2C,CAAhE,CAFhBw2C;AAGH;;AAEFA,+GAA+BxqC,0DAA/BwqC;AApBD7rC;AADJo0C;AAyBN,oBAAME,SAAS,GAAGzvC,QAAQ,CAARA,cAAlB,2BAAkBA,CAAlB;AAEAmC,0BAAU,CAAC,YAAM;AAEb,sBAAMyhC,gBAAgB,GAAG5jC,QAAQ,CAARA,iBAAzB,8BAAyBA,CAAzB;AACM4jC,kCAAgB,CAAhBA,QAAyB,uBAAiB;AACtCC,wBAAI,CAAJA,0BAA+B,iBAAS;AACtC,0BAAMxoC,IAAI,GAAGokB,KAAK,CAALA,eAAb;AACAzf,8BAAQ,CAARA;AACA+vB,uFAAU,sBAAsB,UAAU,CAAV,WAAsB,aAAC;AAAA,+BAAIv5B,CAAC,CAADA,SAAJ;AAA7C,uBAAsB,CAAtB,aAAVu5B,YAAU,CAAVA;AAHF8T;AADJD;AAQN,sBAAM8L,cAAc,GAAG1vC,QAAQ,CAARA,iBAAvB,oBAAuBA,CAAvB;AACM0vC,gCAAc,CAAdA,QAAuB,gBAAQ;AAC7B7L,wBAAI,CAAJA,0BAA+B,iBAAS;AACpC,0BAAM1G,QAAQ,GAAG1d,KAAK,CAALA,eAAjB;AACA,0BAAMvtB,GAAG,GAAGutB,KAAK,CAALA,eAAZ;AACA4Q,yGAAkB,+BAAlBA,GAAkB,CAAlBA;AAHJwT;AADF6L;AAQN,sBAAMC,cAAc,GAAG3vC,QAAQ,CAARA,iBAAvB,qBAAuBA,CAAvB;AACM2vC,gCAAc,CAAdA,QAAuB,gBAAQ;AAC7B9L,wBAAI,CAAJA,0BAA+B,iBAAS;AACpC,0BAAMtyC,KAAK,GAAGkuB,KAAK,CAALA,yBAA+BA,KAAK,CAALA,eAA7C;AACA,0BAAMpkB,IAAI,GAAGokB,KAAK,CAALA,eAAb;AACA,0BAAM5kB,IAAI,GAAG4kB,KAAK,CAALA,eAAb;AACAzf,8BAAQ,CAARA;AACAA,8BAAQ,CAARA;AACAA,8BAAQ,CAARA;AACAA,8BAAQ,CAARA;AACAowB,kGAAe,sBAAsB,UAAU,CAAV,WAAsB,aAAC;AAAA,+BAAI55B,CAAC,CAADA,mBAAJ;AAA7C,uBAAsB,CAAtB,0BAAf45B,YAAe,CAAfA;AARJyT;AADF8L;AAaN3vC,0BAAQ,CAARA,2CAAoD,gBAAQ;AACxD7E,wBAAI,CAAJA;AADJ6E;AAIA,sBAAM4vC,QAAQ,GAAGv+C,MAAM,CAANA,sBAAjB;AACA,sBAAMw+C,UAAU,GAAG7vC,QAAQ,CAARA,0EAAnB,UAAmBA,EAAnB;AAEA,sBAAG,CAAH,SAAa;AAEb,sBAAM8vC,4BAA4B,GAAlC;AACA3gC,yBAAO,CAAPA,WAAmB,iBAAK;AAAA,2BAAIhC,KAAK,CAAT;AAAxBgC,6BAAuD,kBAAU;AAC7D,uDAAkCvX,MAAM,CAANA,QAAlC,MAAkCA,CAAlC,qCAA0D;AAAA;AAAA,0BAAhDxI,GAAgD;AAAA,0BAA3C2gD,cAA2C;;AACtD,0BAAGA,cAAc,IAAjB,OAA4B;AACxBD,oDAA4B,CAA5BA,KAAkCt2C,QAAQ,CAA1Cs2C,GAA0C,CAA1CA;AACH;AACJ;AALL3gC;AAQA0gC,4BAAU,CAAVA,QAAmB,gBAAQ;AACvB,wBAAGl3C,+CAAQ,CAACa,QAAQ,CAAC2B,IAAI,CAAd,EAAS,CAAT,EAAX,4BAAW,CAAX,EAA8D;AAC1DA,0BAAI,CAAJA;AACH;AAHL00C;AApDJ1tC,iBAAU,CAAVA;AApFO,eAmCL+sC,CAnCK,CAgJX;AACA;AACA;AACA;;;AAnJW;AAAA,qBAqJSc,0EAAU,aAAa;AAAE3+C,sBAAM,EAAR;AAAUwb,qBAAK,EAAf;AAA6BojC,8BAAc,EAAElD;AAA7C,eAAb,CArJnB;;AAAA;AAqJLmD,mBArJK,gBAqJLA;;AArJK,kBAuJPA,KAAK,CAvJE;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAyJXhB,+BAAiB;;AAEXF,2CA3JK,GA2J2B,SAAhCA,6BAAgC,sBAA0E;AAAA,oBAApDmB,YAAoD,uEAArC,IAAqC;AAAA,oBAA/BC,mBAA+B,uEAAT,IAAS;;AAE5G,oBAAI;AAEA,sBAAMpuC,MAAM,GAAGhC,QAAQ,CAARA,eAAf,cAAeA,CAAf;AACA,8BAAWgC,MAAM,CAANA;;AAHX,6CAKuBquC,mBAAmB,CAAC7/C,OAAO,CALlD,IAK0C,CAL1C;AAAA,sBAKQ6+C,UALR;;AAOA,sBAAMiB,eAAe,GAAG,UAAU,CAAV,KAAgB,qBAAS;AAAA,2BAAIvB,SAAS,CAATA,iBAA2Bv+C,OAAO,CAAtC;AAAjD,mBAAwB,CAAxB;;AAEA,uCAAoB;AAChB8/C,mCAAe,CAAfA,iEAAuE9/C,OAAO,CAA9E8/C;;AAEA,6CAAwB;AACtB,0BAAMC,iBAAiB,GAAGD,eAAe,CAAfA,0CAA1B,aAA0BA,CAA1B;AACMC,uCAAiB,CAAjBA;AACT;AAfH,oBAkBA;AACA;AACA;AACA;;;AAEA,sBAAIj8C,WAAW,GAAG9D,OAAO,CAAzB;AACI8D,6BAAW,GAAG,CAAC,CAAD,4BAA+B9D,OAAO,CAAPA,sBAA8BA,OAAO,CAAPA,mBAA/B,KAACA,GAAkEA,OAAO,CAAPA,yBAAnE,CAAmEA,CAAlEA,GAA7C8D;;AAEJ,mCAAgB;AAEZ,wBAAMmB,EAAE,GAAGjF,OAAO,CAAPA,MAAcA,OAAO,CAAhC;AACA,wBAAMg+C,EAAE,GAAGxuC,QAAQ,CAARA,4BAAX,EAAWA,EAAX;AAEA,wBAAMwwC,EAAE,GAAGxwC,QAAQ,CAARA,cAAX,IAAWA,CAAX;AAEA,wBAAM4U,IAAI,GAAG5U,QAAQ,CAARA,cAAb,KAAaA,CAAb;AACM4U,wBAAI,CAAJA;AACAA,wBAAI,CAAJA,YAAiBtgB,WAAW,CAAXA,kBAAjBsgB,QAAiBtgB,CAAjBsgB;AAEN47B,sBAAE,CAAFA;AAEA,wBAAM7B,MAAM,GAAG3uC,QAAQ,CAARA,cAAf,KAAeA,CAAf;AACM2uC,0BAAM,CAANA;AACAA,0BAAM,CAANA;AACAA,0BAAM,CAANA;AAENH,sBAAE,CAAFA,mCAAsCA,EAAE,CAAxCA;;AAEA,wBAAMiC,cAAc,GAAG,SAAjBA,cAAiB,sBAAyB;AAE5C,0BAAMhF,MAAM,GAAGzrC,QAAQ,CAARA,cAAf,aAAeA,CAAf;AACA,0BAAMwrC,aAAa,GAAG9pC,UAAU,CAACC,gBAAgB,CAAC3B,QAAQ,CAAzB2B,eAAgB,CAAhBA,qDAAjC,EAAiCA,CAAD,CAAhC;AACA,0BAAMhF,IAAI,GAAG+E,UAAU,CAACC,gBAAgB,CAAC3B,QAAQ,CAAzB2B,eAAgB,CAAhBA,wCAAxB,EAAwBA,CAAD,CAAvB;AACA,0BAAMonC,GAAG,GAAIyC,aAAa,GAAd,CAACA,GAAsBkF,SAAS,IAAIC,QAAQ,GAA5C,CAAgC,CAA/BnF,GAAsD,IAAnE;AAEAC,4BAAM,CAANA;AAPJ;;AAUA,sCAAiB;AACbp6C,4BAAM,CAANA,kBACMm9C,EAAE,CAAFA,uBADNn9C,cACMm9C,EADNn9C,GAEMo/C,cAAc,CAACjC,EAAE,CAAH,cAAkBh+C,OAAO,CAF7Ca,SAEoB,CAFpBA;AAGH;AACJ;AA7DL,kBA8DE,UAAS;AACT0G,0BAAQ,gCAARA,CAAQ,CAARA;AACD;AA7NM,eA2JLi3C;;AAqENhI,0GAAgC,+BAAyB;AAErDgI,6CAA6B,aAA7BA,OAA6B,CAA7BA;AACAhI,2GAA+BxqC,0DAA/BwqC;AACAuH,wHAAsB,CAAtBA,OAAsB,CAAtBA;AAJJvH;AAOAA,uGAA6B,4BAAsB;AAC/C0H,iHAAe,OAAO1H,wFAAP,CAAf0H;AADJ1H;;AAvOW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJ9rB,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AA4OAA,MAAI;AA9OC;AAiPP,IAAI01B,YAAY,GAAhB;;AAEA,IAAMhP,sBAAsB,GAAG,SAAzBA,sBAAyB,QAAS;AAAA,yBAEbplC,yDAFa;AAAA,MAE5B/K,UAF4B;;AAIpC,MAAIysC,UAAU,GAAGze,KAAK,CAALA,eAAjB;AACA,MAAIN,KAAK,GAAGM,KAAK,CAALA,eAAZ;AACA,MAAIugB,IAAI,GAAGvgB,KAAK,CAALA,eAAX;AACA,MAAI5kB,IAAI,GAAI4kB,KAAK,CAALA,eAAZ;;AAEA;AACI;AACImxB,kBAAY;AACZA,kBAAY,GAAGA,YAAY,KAAK,CAAjBA,IAAsBn/C,UAAU,CAAVA,eAAtBm/C,IAAfA;AACA;;AACJ;AACIA,kBAAY;AACZA,kBAAY,GAAGA,YAAY,KAAKn/C,UAAU,CAAVA,eAAjBm/C,QAAfA;AACA;AARR;;AAWA,MAAI7gC,QAAQ,GAAG,UAAU,CAAV,WAAsB;AAAA,WAAgBjN,KAAK,KAArB;AAArC,GAAe,CAAf;AAEA,MAAMd,MAAM,GAAGhC,QAAQ,CAARA,gCAAf,iBAAeA,EAAf;;AAEA;AACI;AACI+vB,uEAAU,wCAAVA,YAAU,CAAVA;AACA;;AACJ;AACIK,kFAAe,oDAAfA,YAAe,CAAfA;AACA;AANR;AAxBJ;;AAkCA,IAAMsL,IAAI,GAAG17B,QAAQ,CAARA,cAAb,qBAAaA,CAAb;AACA,IAAMoL,IAAI,GAAGpL,QAAQ,CAARA,cAAb,qBAAaA,CAAb;AAEA,UAAS07B,IAAI,CAAJA;AACT,UAAStwB,IAAI,CAAJA;AAET,IAAMylC,SAAS,GAAG7wC,QAAQ,CAARA,cAAlB,qBAAkBA,CAAlB;AACA,IAAM8wC,SAAS,GAAG9wC,QAAQ,CAARA,cAAlB,qBAAkBA,CAAlB;AAEA,eAAc6wC,SAAS,CAATA;AACd,eAAcC,SAAS,CAATA;;AAEd,IAAMT,mBAAmB,GAAG,SAAtBA,mBAAsB,cAAe;AAEvC,MAAMhB,UAAU,GAAG5a,KAAK,CAALA,KAAWz0B,QAAQ,CAARA,iBAA9B,eAA8BA,CAAXy0B,CAAnB;AACA,MAAMsc,cAAc,GAAG,UAAU,CAAV,OAAkB,qBAAS;AAAA,WAAIhC,SAAS,CAATA,iBAAJ;AAAlD,GAAuB,CAAvB;AAEAgC,gBAAc,CAAdA,QAAuB,6BAAqB;AAExC,QAAIC,iBAAiB,CAAjBA,qCAAuD,CAA3D,GAA+D;AAE3DA,uBAAiB,CAAjBA;AACAA,uBAAiB,CAAjBA;AAEA,UAAMC,mBAAmB,GAAGD,iBAAiB,CAAjBA,0CAA5B,aAA4BA,CAA5B;AACMC,yBAAmB,CAAnBA;AACT;AATLF;AAYA,MAAM/uC,MAAM,GAAGhC,QAAQ,CAARA,cAAf,sBAAeA,CAAf;AACA,MAAMkxC,mBAAmB,GAAGlxC,QAAQ,CAARA,iBAA5B,sBAA4BA,CAA5B;AACQkxC,qBAAmB,CAAnBA,QAA4B,cAAE;AAAA,WAAIlvC,MAAM,CAANA,YAAJ,EAAIA,CAAJ;AAA9BkvC;AAER,SAAO;AAAE7B,cAAU,EAAVA;AAAF,GAAP;AArBJ,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjTA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMW,UAAU,GAAG,SAAbA,UAAa,mBAAsB;AAE9C,MAAI;AAAA,QAEM3+C,MAFN,GAEwCk7C,IAFxC;AAAA,QAEc3vC,KAFd,GAEwC2vC,IAFxC;AAAA,QAEqB0D,cAFrB,GAEwC1D,IAFxC;AAIF,QAAMxqC,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEA,QAAMmxC,IAAI,GAAG/vC,MAAM,CAANA,kCAAb;;AAEA,QAAMgwC,YAAY,GAAG,SAAfA,YAAe,cAAiB;AAClC,UAAIjjB,SAAS,GAAb;AACA,UAAIkjB,gBAAgB,GAApB;AACAvhD,UAAI,CAAJA,kBAAuBA,IAAI,CAAJA,mBAAvBA;;AACA,UAAGA,IAAI,CAAP,UAAkB;AACd,gBAAOA,IAAI,CAAJA,gBAAP,WAAOA,EAAP;AACI;AACIq+B,qBAAS,GAAGr+B,IAAI,CAAJA,8DAAZq+B;AAGA,gBAAGr+B,IAAI,CAAJA,iCAAH,aAAsDuhD,gBAAgB,GAAhBA;AACtD;;AACJ;AACIljB,qBAAS,GAATA;AACAkjB,4BAAgB,GAAhBA;AACA;;AACJ;AACIljB,qBAAS,GAATA;AAZR;AADJ,aAeO;AACHkjB,wBAAgB,GAAhBA;AACH;;AACD,aAAO;AAAEljB,iBAAS,EAAX;AAAakjB,wBAAgB,EAAhBA;AAAb,OAAP;AAtBJ;;AAyBA,QAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,OAAQ;AAC9B;;AACA,UAAGxhD,IAAI,CAAJA,YAAiBA,IAAI,CAAJA,SAApB,OAAyC;AACrCyhD,sBAAc,GAAGzhD,IAAI,CAAJA,4DAAjByhD;AADJ,aAIO;AAAEA,sBAAc,GAAdA;AAA2E;;AACpF;AAPJ;;AAUA,QAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,OAAQ;AAC/B;;AACA,UAAG1hD,IAAI,CAAJA,8BAAH,SAA+C;AAC3C2hD,uBAAe,GAAfA;AACAC,qBAAa,GAAbA;AAFJ,aAGO;AACHD,uBAAe,GAAGx2C,qEAAS,CAACnL,IAAI,CAAL,UAA3B2hD,kEAA2B,CAA3BA;AACAC,qBAAa,GAAbA;AACH;;AACD,aAAO;AAAED,uBAAe,EAAjB;AAAmBC,qBAAa,EAAbA;AAAnB,OAAP;AATJ;;AAYA,QAAMlU,UAAU,GAAG,UAAU,CAAV,UAAqB,gBAAQ;AAAA;;AAE5C,UAAInrC,KAAK,GAAG,IAAI,CAAJ,YAAiB,aAAC;AAAA,eAAImE,CAAC,CAAL;AAAlB,YAAoC9F,4DAAmBZ,IAAI,CAAvBY,QAAhD,CAAgDA,CAAhD;AACI2B,WAAK,GAAGsgC,oEAAU,QAAQnB,gFAAR,EAAlBn/B,MAAkB,CAAlBA;;AAHwC,0BAKJ++C,YAAY,OALR,KAKQ,CALR;AAAA,UAKpCjjB,SALoC;AAAA,UAKzBkjB,gBALyB;;AAAA,gCAMDG,kBAAkB,CANjB,IAMiB,CANjB;AAAA,UAMpCC,eANoC;AAAA,UAMnBC,aANmB;;AAQ5C,UAAMtC,SAAS;AACX35C,UAAE,EAAE3F,IAAI,CADG;AAEXuL,YAAI,EAAEvL,IAAI,CAFC;AAGXiB,gBAAQ,EAAEjB,IAAI,CAHH;AAIX6hD,aAAK,EAAE7hD,IAAI,CAAJA,SAJI;AAKXU,eAAO,EAAEV,IAAI,CAAJA,SALE;AAMX8hD,sBAAc,EAAE9hD,IAAI,CAAJA,4DANL;AASX+hD,iBAAS,EAAE9mB,mFAA6Bj7B,IAAI,CATjC,IASAi7B,CATA;AAUXjwB,gBAAQ,EAAEhL,IAAI,CAVH;AAWXO,mBAAW,EAAEP,IAAI,CAXN;AAYXgrB,sBAAc,EAAEhrB,IAAI,CAZT;AAaXgiD,iBAAS,EAAEhiD,IAAI,CAbJ;AAcXsC,eAAO,EAAEC,KAAK,CAdH;AAeXH,WAAG,EAAEG,KAAK,CAfC;AAgBX0/C,aAAK,EAAE1/C,KAAK,CAhBD;AAiBXE,oBAAY,EAAEF,KAAK,CAALA,gBAjBH;AAkBXG,cAAM,EAAEH,KAAK,CAACG;AAlBH,kDAmBAu4B,mFAA6Bj7B,IAAI,CAnBjC,IAmBAi7B,CAnBA,2CAoBD,+DAAsB,0FAAoC,CAAC;AAAE1vB,YAAI,EAAN;AAAmB0yB,iBAAS,EAAE,0BAAK;AAAA,iBAAI76B,KAAK,CAAT,CAAS,CAAT;AAAA;AAAnC,OAAD,CAApC,CAAtB,KApBC,uHAsBMpD,IAAI,CAAJA,6DAtBN,wGAyBKwhD,iBAAiB,CAzBtB,IAyBsB,CAzBtB,2CA0BDxhD,IAAI,CAAJA,YAAiB;AAAEilB,cAAM,EAAR;AAAci9B,aAAK,EAAE;AAArB,OA1BhB,kLA6BQ,CAACvgD,UAAU,CAAX,2BA7BR,sDA8BQA,UAAU,CAAVA,2BA9BR,6CA+BDY,KAAK,CAALA,YA/BC,KAAf,UAAe,CAAf;AAkCA;AA1CJ,KAAmB,CAAnB;AA6CA0P,YAAQ,CAARA;AAEA,QAAIC,MAAM,GAAG3Q,MAAM,CAANA,kCAEH2O,QAAQ,CAARA,kEAAmEvO,UAAU,CAA7EuO,IAFV,KAEUA,EAFV;AAGIgC,UAAM,CAANA;AAEJC,yEAAc,CAAC;AAAExM,QAAE,EAAEhE,UAAU,CAAhB;AAAqB+rC,gBAAU,EAAVA;AAArB,KAAD,EAAoCz7B,QAAQ,CAA5C,SAAdE,MAAc,CAAdA;AAEA,QAAMiuC,KAAK,GAAGluC,MAAM,CAANA,8CAA8CvQ,UAAU,CAAtE,EAAcuQ,EAAd;AAEA,QAAMiwC,SAAS,GAAG/B,KAAK,CAALA,iBAAlB,oBAAkBA,CAAlB;AAEA+B,aAAS,CAATA,QAAkB,cAAM;AACpB,UAAM9U,QAAQ,GAAG+U,EAAE,CAAFA,QAAjB;AACA,UAAMC,IAAI,GAAGnyC,QAAQ,CAARA,cAAb,MAAaA,CAAb;;AACA;AACI,aAAKpD,KAAK,CAALA,UAAL;AACIu1C,cAAI,CAAJA;AACAD,YAAE,CAAFA;AACA;;AACJ,aAAKt1C,KAAK,CAALA,UAAL;AACIu1C,cAAI,CAAJA;AACAD,YAAE,CAAFA;AACA;;AACJ,aAAKt1C,KAAK,CAALA,UAAL;AACIu1C,cAAI,CAAJA;AACAD,YAAE,CAAFA;AACA;;AACJ,aAAKt1C,KAAK,CAALA,UAAL;AACA,aAAKA,KAAK,CAALA,UAAL;AACIu1C,cAAI,CAAJA;AACAD,YAAE,CAAFA;AACA;AAjBR;AAHJD;AAwBA,QAAMG,KAAK,GAAGlC,KAAK,CAALA,cAAd,sBAAcA,CAAd;AAEA,QAAG,CAAH,OAAW;AAEX,QAAMmC,OAAO,GAAGryC,QAAQ,CAARA,cAAhB,SAAgBA,CAAhB;AACMqyC,WAAO,CAAPA,iCAAkC5gD,UAAU,CAA5C4gD;AACAA,WAAO,CAAPA;AAEN,QAAMC,KAAK,GAAGtyC,QAAQ,CAARA,cAAd,OAAcA,CAAd;AAEAkwC,SAAK,CAALA;AACAA,SAAK,CAALA;AAEA,QAAMqC,SAAS,GAAGvyC,QAAQ,CAARA,cAAlB,IAAkBA,CAAlB;AACMuyC,aAAS,CAATA;AACN,QAAMC,WAAW,GAAGxyC,QAAQ,CAARA,cAApB,IAAoBA,CAApB;AACA,QAAMyyC,aAAa,GAAGzyC,QAAQ,CAARA,cAAtB,IAAsBA,CAAtB;AACA,QAAM0yC,YAAY,GAAG1yC,QAAQ,CAARA,cAArB,IAAqBA,CAArB;AACA,QAAM2yC,eAAe,GAAG3yC,QAAQ,CAARA,cAAxB,IAAwBA,CAAxB;AACA,QAAM4yC,iBAAiB,GAAG5yC,QAAQ,CAARA,cAA1B,IAA0BA,CAA1B;AAEA,QAAM6yC,eAAe,GAAG7yC,QAAQ,CAARA,cAAxB,IAAwBA,CAAxB;AACM6yC,mBAAe,CAAfA;AAENJ,iBAAa,CAAbA;AACAC,gBAAY,CAAZA;AACAC,mBAAe,CAAfA;AACAC,qBAAiB,CAAjBA;AACAJ,eAAW,CAAXA,YAAwBvC,cAAc,QAAtCuC;;AACA,cAAS;AACLD,eAAS,CAATA;AACAA,eAAS,CAATA;AACAA,eAAS,CAATA;;AACA,UAAG9gD,UAAU,CAAVA,cAAH,WAAuC;AACnC8gD,iBAAS,CAATA;AACH;AANL,WAOO;AACHA,eAAS,CAATA;AACAA,eAAS,CAATA;;AACA,UAAG9gD,UAAU,CAAVA,cAAH,WAAuC;AACnC8gD,iBAAS,CAATA;AACH;AACJ;;AACD,QAAG9gD,UAAU,CAAVA,cAAH,UAAsC;AAClC8gD,eAAS,CAATA;AACH;;AAED,QAAG,CAACH,KAAK,CAALA,cAAJ,eAAIA,CAAJ,EAA0C;AACtCE,WAAK,CAALA;AACH;;AAED,QAAMQ,eAAe,GAAG,SAAlBA,eAAkB,GAAM,CAA9B;;AAEApiD;AAEA,WAAO,YAAY,mBAAO;AAAA,aAAImB,OAAO,CAAC;AAACkhD,eAAO,EAAE;AAAV,OAAD,CAAX;AAA1B,KAAO,CAAP;AAhMF,IAkME,UAAS;AACTh7C,YAAQ,eAARA,CAAQ,CAARA;AACA,WAAO,YAAY,mBAAO;AAAA,aAAIlG,OAAO,CAAC;AAACkhD,eAAO,EAAE;AAAV,OAAD,CAAX;AAA1B,KAAO,CAAP;AACD;AAvMI,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRP;AAEA;AAEA,IAAMC,2BAA2B,GAAjC;AACA,IAAMC,wBAAwB,GAA9B;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,WAAY;AACnC,SAAMF,2BAA2B,CAA3BA,SAAN,GAA8C;AAC1CA,+BAA2B,CAA3BA;AACH;;AACDA,6BAA2B,CAA3BA;AAJJ;;AAOA,IAAMG,eAAe,GAAG,SAAlBA,eAAkB,WAAY;AAChC,SAAMF,wBAAwB,CAAxBA,SAAN,GAA2C;AACvCA,4BAAwB,CAAxBA;AACH;;AACDA,0BAAwB,CAAxBA;AAJJ;;AAOA,IAAMG,6BAA6B,GAAnC;;AAEA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,WAAY;AACrCD,+BAA6B,CAA7BA;AADJ;;AAIA,IAAME,sBAAsB,GAA5B;AACA,IAAMC,4BAA4B,GAAlC;;AAEA,IAAMC,4BAA4B,GAAG,SAA/BA,4BAA+B,WAAY;AAC7C,SAAMD,4BAA4B,CAA5BA,SAAN,GAA+C;AAC3CA,gCAA4B,CAA5BA;AACH;;AACDA,8BAA4B,CAA5BA;AAJJ;;AAOA;AAAA,IAAYE,aAAa,GAAzB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAEtB,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,QAAS;AAC3BvX,UAAM,GAAG3c,KAAK,CAAd2c;AACAqX,iBAAa,GAAbA;AAFJ;;AAKA,MAAMG,mBAAmB,GAAG,SAAtBA,mBAAsB,QAAS;AACjCxX,UAAM,GAAG3c,KAAK,CAAd2c;;AACA,gBAAW;AACPmX,kCAA4B,CAA5BA,QAAqC,oBAAQ;AAAA,eAAI15C,QAAQ,CAAZ,MAAY,CAAZ;AAA7C05C;AACH;AAJL;;AAOA,MAAIM,EAAE,CAAN,yBAAgC;AAC5BC,cAAU,EAAE;AAAE,kBAAY;AAAd,KADgB;AAE5BC,UAAM,EAAE;AACR,iBADQ;AAER,uBAAiBH;AAFT;AAFoB,GAAhC;AAdJ;;AAuBA,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,OAAQ;AAE1B,MAAG,SAAS5X,MAAM,CAAf,kCAAiDA,MAAM,CAANA,mBAApD,WAAyF;AACzF,MAAG,SAASA,MAAM,CAAf,0BAAyCA,MAAM,CAANA,WAA5C,WAAyE;AAEzEA,QAAM,CAANA,OAAc7nC,IAAI,GAAlB6nC;AACA,MAAMnwB,KAAK,GAAGmwB,MAAM,CAApB,cAAcA,EAAd;;AACA,MAAGnwB,KAAK,KAAKgoC,MAAM,CAANA,CAAM,CAANA,CAAVhoC,OAA2BA,KAAK,KAAKgoC,MAAM,CAANA,CAAM,CAANA,CAAxC,KAAuD;AACnD7X,UAAM,CAANA;AACH;AATL,E,CAYA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAM6X,MAAM,GAAG,CAAE;AAAE7kD,KAAG,EAAE,CAAP;AAAWG,OAAK,EAAE;AAAlB,CAAF,EAAmC;AAAEH,KAAG,EAAL;AAAUG,OAAK,EAAE;AAAjB,CAAnC,EAAiE;AAAEH,KAAG,EAAL;AAAUG,OAAK,EAAE;AAAjB,CAAjE,EAA8F;AAAEH,KAAG,EAAL;AAAUG,OAAK,EAAE;AAAjB,CAA9F,CAAf;;AAEA,IAAM2kD,aAAa,GAAG,SAAhBA,aAAgB,sBAAyB;AAE3C,MAAIjoC,KAAK,GAAT;AAEA,MAAM06B,YAAY,GAAG,WAAW,CAAX,KAAiB,kBAAM;AAAA,WAAI/tC,MAAM,CAANA,iBAAwByV,MAAM,CAAlC;AAA5C,GAAqB,CAArB;;AAEA,oBAAiB;AACb,QAAGA,MAAM,CAANA,OAAcs4B,YAAY,CAA7B,cAA4C;AAC5C16B,WAAK,GAAG06B,YAAY,CAAZA,WACIA,YAAY,CAAZA,+CACqBA,YAAY,CADjCA,eADJA,iBAAR16B;AAKC;AAPL,SAQO;AACHA,SAAK,GAALA;AACH;;AAED;AAlBJ;;AAsBA,IAAMkoC,kBAAkB,GAAG,SAArBA,kBAAqB,UAAW;AAClC,qBAAkB;AACd,QAAMC,UAAU,GAAGC,OAAO,KAAKjY,MAAM,CAANA,eAA/B;AACA,WAAOqX,aAAa,IAApB;AAFJ,SAGO;AACH;AACH;AANL;;AASA,IAAMa,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAExB,SAAMf,4BAA4B,CAA5BA,SAAN,GAA+C;AAC3CA,gCAA4B,CAA5BA;AACH;;AAED,SAAMP,2BAA2B,CAA3BA,SAAN,GAA8C;AAC1CA,+BAA2B,CAA3BA;AACH;;AAED,MAAI,CAAJ,QAAa,CAAb,OAES;AACL5W,UAAM,CAANA;AACAA,UAAM,CAANA;AACAA,UAAM,GAHD,IAGLA,CAHK,CAGW;AACjB;AAhBP;;AAmBA,IAAMl3B,iBAAiB,GAAG,SAApBA,iBAAoB,mCAAsC;AAE9D,MAAMqvC,aAAa,GAAG99C,IAAI,CAAJA,MAAW2lC,MAAM,CAAvC,cAAiCA,EAAX3lC,CAAtB;AAEA,MAAM+9C,aAAa,GAAG/nC,8CAAK,CAALA,WAAK,CAALA,IAAtB;AAEA,MAAIk6B,YAAY,GAAG,aAAa,CAAb,KAAmB,aAAC;AAAA,WAAIrZ,CAAC,CAADA,iBAAmB77B,UAAU,CAAjC;AAAvC,GAAmB,CAAnB;;AAEE,oBAAiB;AACf,QAAGk1C,YAAY,CAAZA,aAAH,eADe,QACqC;AACpD;;AACAA,gBAAY,CAAZA,cAA2Bn2C,OAAO,GAAGA,OAAO,CAAV,OAAkBm2C,YAAY,CAAZA,eAApDA;AACAA,gBAAY,CAAZA,WAAwBn2C,OAAO,IAAIA,OAAO,CAAlBA,OAA0BA,OAAO,CAAPA,KAA1BA,CAA0BA,CAA1BA,GAAxBm2C;AACAA,gBAAY,CAAZA;AALF,SAMO;AACLA,gBAAY,GAAG;AACbC,kBAAY,EAAEn1C,UAAU,CADX;AAEbusB,iBAAW,EAFE;AAGby2B,cAAQ,EAHK;AAIbD,mBAAa,EAAED;AAJF,KAAf5N;AAMA6N,iBAAa,CAAbA;AACH;;AAED33C;AAxBF;;AA2BA,IAAM63C,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB,SAAOj+C,IAAI,CAAJA,MAAW2lC,MAAM,CAAxB,cAAkBA,EAAX3lC,CAAP;AADJ;;AAIO,IAAMuwC,YAAY,GAAG;AACxB0M,aAAW,EADa;AAExBV,6BAA2B,EAFH;AAGxBC,0BAAwB,EAHA;AAIxBC,oBAAkB,EAJM;AAKxBC,iBAAe,EALS;AAMxBC,+BAA6B,EANL;AAOxBC,sBAAoB,EAPI;AAQxBC,wBAAsB,EARE;AASxBE,8BAA4B,EATJ;AAUxBQ,eAAa,EAVW;AAWxBC,QAAM,EAXkB;AAYxBC,eAAa,EAZW;AAaxBI,eAAa,EAbW;AAcxBH,oBAAkB,EAdM;AAexBO,eAAa,EAfW;AAgBxBxvC,mBAAiB,EAAjBA;AAhBwB,CAArB,C;;;;;;;;;;;;;;;;;;ACpKA,IAAMurB,kBAAkB,GAAG,SAArBA,kBAAqB,aAAc;AAE5C,MAAIkkB,OAAO,GAAX;AAEA,MAAMx+B,YAAY,GAAGw+B,OAAO,GACd30C,QAAQ,CAARA,iBADc,sBACdA,CADc,GAEdA,QAAQ,CAARA,iBAFd,sBAEcA,CAFd;AAJG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAM2wB,sBAAsB,GAAG,SAAzBA,sBAAyB,aAAc;AAAA,wBAEbn0B,yDAFa;AAAA,MAExCnL,MAFwC;AAAA,MAEhCgd,MAFgC;AAAA,MAExBL,MAFwB;;AAIhD,MAAMle,IAAI,GAAG2B,UAAU,CAAVA,YAAuBA,UAAU,CAAVA,MAAiBA,UAAU,CAA/D,SAAoCA,CAApC;AAEA,MAAM6b,QAAQ,GAAGU,MAAM,CAANA,iBAAwBA,MAAM,CAANA,SAAzC;AACA,MAAMN,SAAS,GAAGM,MAAM,CAANA,SAAlB;AACA,MAAM4mC,gBAAgB,GAAG5mC,MAAM,CAANA,SAAzB;AAEA,MAAMhM,MAAM,GAAGm9B,kFAAsB,aAAa;AAAErkB,kBAAc,EAAEhrB,IAAI,CAAtB;AAAuCwd,YAAQ,EAA/C;AAAiDlQ,YAAQ,EAAzD;AAA+DD,QAAI,EAAnE;AAAyErJ,QAAI,EAA7E;AAAmFstB,aAAS,EAA5F;AAAkGyzB,mBAAe,EAAjH;AAAuHr9B,SAAK,EAA5H;AAAyI9J,aAAS,EAAlJ;AAAoJknC,oBAAgB,EAAhBA;AAApJ,GAAb,CAArC;AAEA,MAAM7yC,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAI1E,OAAO,GAAG3M,yFAAwBsd,MAAM,CAANA,SAAxBtd,WAAiDsd,MAAM,CAANA,SAA/D,MAActd,GAAd;AAEA2M,SAAO,GAAG,OAAO,CAAP,IAAY,yBAAmB;AACrC,WAAO;AACHvJ,UAAI,EADD;AAEHgP,WAAK,EAALA;AAFG,KAAP;AADJzF,GAAU,CAAVA;AAOA4E,uEAAc,CAAC;AAAE5E,WAAO,EAAPA;AAAF,GAAD,EAAc0E,QAAQ,CAAtB,SAAdE,MAAc,CAAdA;AAEAjC,UAAQ,CAARA;AACAA,UAAQ,CAARA;AAEA,MAAM80C,MAAM,GAAG90C,QAAQ,CAARA,iBAAf,wBAAeA,CAAf;AACA,MAAMzO,KAAK,GAAG;AAAE8J,QAAI,EAAEvL,IAAI,CAAJA,SAAR;AAA8Bwd,YAAQ,EAAExd,IAAI,CAA5C;AAAmDsN,YAAQ,EAAE4Q,MAAM,CAANA,gBAAuBla;AAApF,GAAd;AAEA,MAAM4hC,IAAI,GAAG;AAAE3mB,UAAM,EAAEjf,IAAI,CAAd;AAAmBkB,SAAK,EAAxB;AAAkCO,SAAK,EAAvC;AAAyC+b,YAAQ,EAAExd,IAAI,CAAvD;AACTo4B,iBAAa,EAAE7Z,MAAM,CADZ;AAC4ByM,kBAAc,EAAEhrB,IAAI,CADhD;AAET4e,eAAW,EAAEL,MAAM,CAFV;AAEwBqI,UAAM,EAAE1I,MAAM,CAFtC;AAE+C+mC,QAAI,EAFnD;AAGThf,eAAW,EAAE,OAAO,CAAP,UAAkB,aAAC;AAAA,aAAIiB,CAAC,CAADA,SAAWhpB,MAAM,CAANA,SAAf;AAHvB,KAGI,CAHJ;AAG+D3Q,WAAO,EAHtE;AAIT2R,gBAAY,EAJH;AAIuBtB,aAAS,EAATA;AAJvB,GAAb;AAMAgnB,wEAAY,sBAAZA,MAAY,CAAZA;AAtCG,E;;;;;;;;;;;;;;;;;;;ACRP;AAEO,IAAMlE,2BAA2B,GAAG,SAA9BA,2BAA8B,0BAA6B;AAEpEz3B,SAAO,gCAAgCtH,UAAU,CAAjDsH,IAAO,CAAPA;AAEAi8C,8IAAoC,CAApCA,UAAoC,CAApCA;AAJG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFP;AAEA;AACA;AACA;AACA;AACA;AAEA,IAAMC,sBAAsB,GAA5B;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,WAAY;AAC9BD,wBAAsB,CAAtBA;AADJ;;AAIA,IAAME,uBAAuB,GAA7B;;AACA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,WAAY;AAC/BD,yBAAuB,CAAvBA;AADJ;;AAIA,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,4BAA+B;AAEpD,MAAI;AACA;;AADA;AAAA;AAAA,UAGUjmD,GAHV;AAAA,UAGe0+B,GAHf;;AAII,UAAI/P,CAAC,QAAL;AACAu3B,kBAAY,CAAZA,IAAiB,aAAK;AAClB,YAAGv3B,CAAC,CAADA,kBAAoBrtB,gEAAvB,WAAuBA,EAAvB,EAA6D;AACzDitB,6BAAmB,GAAG,GAAG,CAAH,UAAc,aAAC;AAAA,mBAAI2Q,CAAC,CAAL,WAAIA,EAAJ;AAArC3Q,WAAsB,CAAtBA;AACAzqB,eAAK,GAALA;AACH;AAJLoiD;AALJ;;AAGA,uCAAuB19C,MAAM,CAANA,QAAvB,WAAuBA,CAAvB,qCAAoD;AAAA;AAQnD;;AAAA;AAED,WAAO;AAAE+lB,yBAAmB,EAArB;AAAuBzqB,WAAK,EAALA;AAAvB,KAAP;AAbJ,IAcE,UAAU;AACV6E,YAAQ,mBAARA,CAAQ,CAARA;AACA,WAAO;AAAE4lB,yBAAmB,EAArB;AAA2BzqB,WAAK,EAAE;AAAlC,KAAP;AACD;AAnBL;;AAuBA,IAAMqiD,WAAW;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEVhyC,oBAFU,GAEC/G,0DAFD,QAEV+G;AAFU;AAAA,mBAIGlN,sGAJH,KAIGA,CAJH;;AAAA;AAIZ1E,kBAJY,gBAIZA;AACAA,kBAAM,CAANA,QAAe,aAAK;AAChBosB,eAAC,CAADA,OAASA,CAAC,CAADA,KAATA,WAASA,EAATA;AACA,kBAAGA,CAAC,CAAJ,KAAUA,CAAC,CAADA,MAAQA,CAAC,CAADA,IAARA,WAAQA,EAARA;AACV;AAHJpsB;;AALY;AAAA;AAAA;AAAA;;AAAA,6CAWgB;AAAEA,oBAAM,EAAR;AAAgBisB,4BAAc,EAAE;AAAhC,aAXhB;;AAAA;AAaZ43B,qBAbY,GAaA,4FAAqC,MAAM,CAAN,IAAW,aAAC;AAAA,qBAAIz3B,CAAC,CAAL;AAAjD,aAAqC,CAArC,EAA8DJ,mBAAmB,CAbjF,MAaA,CAAZ63B;AAEAA,qBAAS,GAAG,SAAS,CAAT,OAAiB,oBAAY;AACrC,qBAAO,CAACv4C,sGAAR,mBAAQA,CAAR;AADJu4C,aAAY,CAAZA;AAII53B,0BAnBQ,GAmBS,MAAM,CAAN,OAAc,aAAC;AAAA,qBAAIjlB,8CAAQ,CAAColB,CAAC,CAAF,MAAZ,mBAAY,CAAZ;AAnBxB,aAmBS,CAAjBH;AAEJ43B,qBAAS,GAAG9kD,yFAAwBsJ,8CAAI,IAA5BtJ,SAA4B,CAA5BA,IAAZ8kD,mBAAY9kD,GAAZ8kD;AAEA7jD,kBAAM,GAAG,SAAS,CAAT,IAAc,oBAAY;AAC/B,qBAAO,QAAQ,CAAR,IAAa,gBAAI;AAAA,uBAAI,MAAM,CAAN,KAAY,iBAAK;AAAA,yBAAIuB,KAAK,CAALA,SAAJ;AAArB,iBAAI,CAAJ;AAAxB,eAAO,CAAP;AADJvB,aAAS,CAATA;AAIJsjD,kCAAsB,CAAtBA,QAA+B,oBAAQ;AAAA,qBAAIp7C,QAAQ,SAAZ,cAAY,CAAZ;AAAvCo7C;AA3BgB,6CA6BT;AAAEtjD,oBAAM,EAAR;AAAUisB,4BAAc,EAAdA;AAAV,aA7BS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,kBAAX23B,WAAW;AAAA;AAAA;AAAjB,CAAiB,EAAjB;;AAgCA,IAAME,YAAY,GAAlB;;AAEA,IAAMx1C,QAAQ,GAAG,SAAXA,QAAW,0BAA6B;AAC1C,MAAMy1C,iBAAiB,GAAG11C,QAAQ,CAARA,cAA1B,yBAA0BA,CAA1B;AACM01C,mBAAiB,CAAjBA;AACND,cAAY,CAAZA;AACAA,cAAY,CAAZA;AAEAC,mBAAiB,CAAjBA,0BAA4C,YAAM;AAC9Ct0C,UAAM,CAANA,aAAoBq0C,YAAY,CAAhCr0C;AACAi0B,uEAAS,CAACogB,YAAY,CAAtBpgB,KAAS,CAATA;AAFJqgB;AANJ;;AAYA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,8BAAiC;AAAA,wBAEjBn5C,yDAFiB;AAAA,MAEhDnL,MAFgD;AAAA,MAExCgd,MAFwC;AAAA,MAEhC5c,UAFgC;;AAIxD,MAAM3B,IAAI,GAAG2B,UAAU,CAAvB;AAEAglC,MAAI,CAAJA,0BAA+B,aAAK;AAEhC,QAAMA,IAAI,GAAGjU,CAAC,CAAd;AACA,QAAM7wB,MAAM,GAAG,KAAK,CAAL,KAAW8kC,IAAI,CAAJA,iBAAX,KAAWA,CAAX,MAA6C,aAAC;AAAA,aAAI1Y,CAAC,CAADA,QAAJ;AAA7D,KAAe,CAAf;AACA,QAAMvqB,MAAM,GAAG,KAAK,CAAL,gBAAsB,aAAC;AAAA,aAAIuqB,CAAC,CAADA,qBAAJ;AAAtC,KAAe,CAAf;AACA,QAAM1gB,OAAO,GAAG,MAAM,CAAN,IAAW,aAAK;AAAE,aAAO;AAAE9N,aAAK,EAAEiH,CAAC,CAAV;AAAiBtE,WAAG,EAAEsE,CAAC,CAACtE;AAAxB,OAAP;AAAlC,KAAgB,CAAhB;AACA,QAAMwjC,IAAI,GAAG;AACThf,YAAM,EADG;AAETpJ,cAAQ,EAAExd,IAAI,CAFL;AAGToD,WAAK,EAHI;AAITkK,cAAQ,EAAE,cAAc,CAAd,IAAmB,iBAAK;AAAA,eAAIlK,KAAK,CAAT;AAJzB,OAIC,CAJD;AAKTqa,YAAM,EALG;AAMT2a,mBAAa,EAAE7Z,MAAM,CANZ;AAOTK,iBAAW,EAAEL,MAAM,CAPV;AAQThR,aAAO,EARE;AAST2R,kBAAY,EAAE;AATL,KAAb;AAWA0lB,0EAAY,gCAAZA,MAAY,CAAZA;AAEAkhB,SAAK,CAALA,QAAc,gBAAQ;AAClB,UAAG,CAAC,4FAAqC,KAAK,CAAL,KAAWnf,IAAI,CAAJA,iBAAX,KAAWA,CAAX,MAA6C,eAAG;AAAA,eAAInF,GAAG,CAAHA,QAAJ;AAArF,OAAqC,CAArC,EAA4G,cAAc,CAAd,IAAmB,iBAAK;AAAA,eAAIp+B,KAAK,CAAT;AAAxI,OAAgH,CAA5G,CAAJ,EAA0J;AACtJujC,YAAI,CAAJA,gCAAqC,eAAG;AAAA,iBAAInF,GAAG,CAAHA,cAAJ,YAAIA,CAAJ;AAAxCmF;AACH;AAHLmf;AAnBJnf;AANJ;;AAgCO,IAAM/Y,iBAAiB,GAAG;AAC7B23B,kBAAgB,EADa;AAE7BE,aAAW,EAFkB;AAG7BL,eAAa,EAHgB;AAI7BE,gBAAc,EAJe;AAK7BO,oBAAkB,EAAlBA;AAL6B,CAA1B,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvHP;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMjlB,wBAAwB,GAAG,SAA3BA,wBAA2B,aAAc;AAElD,MAAMxV,IAAI;AAAA,uEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gCAE8B1e,yDAF9B,EAEDwR,MAFC,2BAEOvc,UAFP,+BAEmBJ,MAFnB;AAIH0Q,sBAJG,GAIQ/B,QAAQ,CAARA,cAJR,UAIQA,CAAX+B;AACAA,sBAAQ,CAARA;AAEAjS,kBAPG,GAOI2B,UAAU,CAPd,QAOH3B;AACAsN,sBARG,oBAQHA;AACAD,kBATG,gCAS0BzM,6DAAoBsd,MAAM,CATpD,KAS0Btd,CAT1B,CASHyM;AAEA6E,oBAXG,GAWMm9B,kFAAsB,aAAa;AAAErkB,8BAAc,EAAEhrB,IAAI,CAAtB;AAAuCwd,wBAAQ,EAAExd,IAAI,CAArD;AAA4DsN,wBAAQ,EAApE;AAAsED,oBAAI,EAA1E;AAA4ErJ,oBAAI,EAAE;AAAlF,eAAb,CAA/BkO;AAENguB,oGAAiB,mBAAmB;AAAEr+B,sBAAM,EAAEqc,MAAM,CAAhB;AAAyB4P,8BAAc,EAAE5P,MAAM,CAA/C;AAAgEle,oBAAI,EAApE;AAAsEsN,wBAAQ,EAA9E;AAAgFD,oBAAI,EAAJA;AAAhF,eAAnB,CAAjB6yB;;AAbS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJ9U,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AAgBAA,MAAI;AAlBD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEO,IAAM8U,iBAAiB,GAAG,SAApBA,iBAAoB,0BAA6B;AAE1D,MAAI;AAAA,0BAE+CxzB,yDAF/C;AAAA,QAEQnL,MAFR;AAAA,QAEgBgd,MAFhB;AAAA,QAEwBL,MAFxB;AAAA,QAEgC3B,UAFhC;;AAIA,QAAGuF,+GAAH,MAAGA,CAAH,EAAyD;AAAE;AAAS;;AAEpE,QAAM9hB,IAAI,GAAG2B,UAAU,CAAVA,YAAuBA,UAAU,CAAVA,MAAiBA,UAAU,CAA/D,SAAoCA,CAApC;AAEA,QAAMF,KAAK,GAAGwJ,sEAAU,CAACjL,IAAI,CAAL,UAAxB,kEAAwB,CAAxB;AAEA,QAAMwR,MAAM,GAAGkW,KAAK,GAAGA,KAAK,CAALA,UAAgBxJ,MAAM,CAANA,QAAnB,CAAmBA,CAAnB,GAAuCA,MAAM,CAANA,QAA3D,CAA2DA,CAA3D;AAEA,QAAI6nC,iBAAiB,GAArB;AAAA,QAA2BC,eAAe,GAA1C;AAEAA,mBAAe,GAAGzkD,MAAM,CAAxBykD;;AAEA,QAAM56B,IAAI;AAAA,yEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEH66B,sBAFG,GAEM,SAATA,MAAS,6BAAgC;AAE3C,sBAAMj7B,cAAc,GAAIxd,SAAS,IAAIA,SAAS,CAATA,mBAAd,SAACA,GAAuDA,SAAS,CAAjE,cAACA,GAAkFxN,IAAI,CAA9G;AACA,sBAAMwd,QAAQ,GAAIhQ,SAAS,IAAIA,SAAS,CAATA,aAAd,SAACA,GAAiDA,SAAS,CAA3D,QAACA,GAAsExN,IAAI,CAA5F;AACA,sBAAMsN,QAAQ,GAAIE,SAAS,IAAIA,SAAS,CAAvB,QAACA,GAAmCA,SAAS,CAA7C,QAACA,GAAlB;AACA,sBAAM04C,WAAW,GAAG3kD,MAAM,CAANA,+CAApB;AACA,sBAAM8L,IAAI,GAAIG,SAAS,IAAIA,SAAS,CAATA,SAAd,SAACA,GAA6CA,SAAS,CAAvD,IAACA,GAAd;AACA,sBAAMxJ,IAAI,GAAIwJ,SAAS,IAAIA,SAAS,CAATA,SAAd,SAACA,GAA6CA,SAAS,CAAvD,IAACA,GAAd;AACA,sBAAM8jB,SAAS,GAAI9jB,SAAS,IAAIA,SAAS,CAATA,cAAd,SAACA,GAAkDA,SAAS,CAA5D,SAACA,GAAnB;AACA,sBAAMu3C,eAAe,GAAIv3C,SAAS,IAAIA,SAAS,CAATA,oBAAd,SAACA,GAAwDA,SAAS,CAAlE,eAACA,GAAzB;AACA,sBAAMy3C,IAAI,GAAIz3C,SAAS,IAAIA,SAAS,CAATA,SAAd,SAACA,GAA6CA,SAAS,CAAvD,IAACA,GAAd;AAEA,sBAAM0E,MAAM,GAAGm9B,kFAAsB,aAAa;AAAErkB,kCAAc,EAAhB;AAAkBxN,4BAAQ,EAA1B;AAA4BlQ,4BAAQ,EAApC;AAAsCD,wBAAI,EAA1C;AAA4CrJ,wBAAI,EAAhD;AAAkDstB,6BAAS,EAA3D;AAA6DyzB,mCAAe,EAA5E;AAA8Er9B,yBAAK,EAALA;AAA9E,mBAAb,CAArC;AAEA,sBAAMzV,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,0BAAQ,CAARA,YAAqBwL,MAAM,CAANA,uGAArBxL;AAEN1E,yBAAO,CAAPA,QAAgB,yBAAmB;AAC/BkQ,0BAAM,CAANA;AACAA,0BAAM,CAANA,OAAcA,MAAM,CAANA,QAAdA;AACAA,0BAAM,CAANA,QAAeA,MAAM,CAANA,QAAeA,MAAM,CAANA,WAAfA,IAAeA,CAAfA,GAAfA;AAHJlQ;AAMA4E,uFAAc,CAAC;AAAE5E,2BAAO,EAAPA;AAAF,mBAAD,EAAc0E,QAAQ,CAAtB,SAAdE,MAAc,CAAdA;AAEA,sBAAM6yC,MAAM,GAAG90C,QAAQ,CAARA,iBAAf,wBAAeA,CAAf;AAEA,sBAAG1C,SAAS,CAAZ,WAAwB,MAAM,CAAN,QAAe,iBAAK;AAAA,2BAAI64B,KAAK,CAALA,cAAJ,UAAIA,CAAJ;AAApB;AAExB,sBAAM5kC,KAAK,GAAG;AAAE8J,wBAAI,EAAEvL,IAAI,CAAJA,SAAR;AAA8Bwd,4BAAQ,EAAExd,IAAI,CAA5C;AAAmDsN,4BAAQ,EAAEmQ,MAAM,CAACzZ;AAApE,mBAAd;AAEA,sBAAM4hC,IAAI,GAAG;AACT3mB,0BAAM,EAAEjf,IAAI,CADH;AAETkB,yBAAK,EAFI;AAGTO,yBAAK,EAHI;AAGF+b,4BAAQ,EACfxd,IAAI,CAJK;AAKTo4B,iCAAa,EAAE7Z,MAAM,CALZ;AAMTK,+BAAW,EAAEL,MAAM,CANV;AAOTqI,0BAAM,EAAE1I,MAAM,CAPL;AAQT+mC,wBAAI,EARK;AASThf,+BAAW,EAAE,OAAO,CAAP,UAAkB,aAAC;AAAA,6BAAIiB,CAAC,CAADA,SAAWzpB,MAAM,CAArB;AATvB,qBASI,CATJ;AAUTyB,gCAAY,EAAE5R;AAVL,mBAAb;AAaAs3B,wFAAY,sBAAZA,MAAY,CAAZA;AA9CK,iBAEHqhB;;AA+CN,oBAAGz0C,MAAM,CAANA,SAAH,uBAA0C;AAEhC20C,yCAFgC;AAAA,wFAEN;AAAA;AAAA;AAAA;AAAA;AAAA;AAItBC,2CAJsB;AAAA,oGAIN;AAAA;AAAA;AAAA;AAAA;AAElB3oC,gDAAM,GAAG;AAAEzZ,gDAAI,EAAEhE,IAAI,CAACuL;AAAb,2CAATkS;AAFkB;AAAA,iDAGF6O,4EAAY,aAHV,CAGU,CAHV;;AAAA;AAGlB/e,iDAHkB,gBAGlBA;AACAA,iDAAO,GAAG,+CAAI,IAAJ,OAAI,CAAJ,QAAwB,aAAC;AAAA,mDAAIikB,CAAC,CAADA,uBAAyBxxB,IAAI,CAAJA,KAA7B,WAA6BA,EAA7B;AAAzB,iDAAmF,aAAC;AAAA,mDAAIwxB,CAAC,CAAL;AAA9FjkB,2CAAU,CAAVA;AACAA,iDAAO,GAAGrD,+CAAI,IAAdqD,OAAc,CAAdA;AACAA,iDAAO,CAAPA,KAAavN,IAAI,CAAjBuN;AACAA,iDAAO,GAAG,OAAO,CAAP,IAAY,aAAK;AAAE,mDAAO;AAAEvJ,kDAAI,EAAEkjC;AAAR,6CAAP;AAA7B35B,2CAAU,CAAVA;AACAA,iDAAO,GAAG3M,4DAAV2M,OAAU3M,CAAV2M;AAEAF,8CAAI,GAAG9L,MAAM,CAANA,0CAAP8L;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAJM;;AAAA;AAAA;AAAA;AAAA,iCAItB+4C;;AAJsB;AAAA,qCAiBtBA,aAjBsB;;AAAA;AAmB5BH,oCAAM,kBAAmB;AAAEzoC,wCAAQ,EAAV;AAA0BlQ,wCAAQ,EAAlC;AAA+DD,oCAAI,EAAnE;AAAqEg5C,yCAAS,EAAE;AAAhF,+BAAnB,CAANJ;;AAnB4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAFM;;AAAA;AAAA;AAAA;AAAA,qBAEhCE;;AAsBNA,yCAAuB;AAC1B;;AAED,oBAAG30C,MAAM,CAANA,SAAH,uBAA0C;AAEhC80C,2CAFgC;AAAA,wFAEJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAIxBF,2CAJwB;AAAA,oGAIR;AAAA;AAAA;AAAA;AAAA;AAElB3oC,gDAAM,GAAG;AAAEzZ,gDAAI,EAAEhE,IAAI,CAACgrB;AAAb,2CAATvN;AAFkB;AAAA,iDAGF6O,4EAAY,aAHV,CAGU,CAHV;;AAAA;AAGlB/e,iDAHkB,iBAGlBA;AACAA,iDAAO,GAAG,OAAO,CAAP,IAAY,aAAC;AAAA,mDAAI0tB,2HAAJ,eAAIA,CAAJ;AAAvB1tB,2CAAU,CAAVA;AACAA,iDAAO,GAAGrD,+CAAI,IAAI,OAAO,CAAP,OAAe,aAAC;AAAA,mDAAIg9B,CAAC,KAAKlnC,IAAI,CAAd;AAAlCuN,2CAAkB,CAAJ,CAAdA;AACAA,iDAAO,GAAG3M,6DAAoBZ,IAAI,CAAxBY,0CAAV2M,OAAU3M,GAAV2M;AACAA,iDAAO,GAAG,OAAO,CAAP,IAAY,aAAK;AAAE,mDAAO;AAAEvJ,kDAAI,EAAEkjC;AAAR,6CAAP;AAA7B35B,2CAAU,CAAVA;AAEAF,8CAAI,GAAG9L,MAAM,CAANA,0CAAP8L;;AATkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAJQ;;AAAA;AAAA;AAAA;AAAA,iCAIxB+4C;;AAJwB;AAAA,qCAgBxBA,aAhBwB;;AAAA;AAkB9BH,oCAAM,kBAAkB;AAAEj7B,8CAAc,EAAhB;AAAiC1d,wCAAQ,EAAzC;AAAsED,oCAAI,EAAJA;AAAtE,+BAAlB,CAAN44C;;AAlB8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAFI;;AAAA;AAAA;AAAA;AAAA,qBAEhCK;;AAqBNA,2CAAyB;AAC5B;;AAED,oBAAG90C,MAAM,CAANA,SAAH,0BAA6C;AAEnC+0C,mCAFmC;AAAA,wFAEf;AAAA;AAAA;AAAA;AAAA;AAAA;AAIhBH,2CAJgB;AAAA,oGAIA;AAAA;AAAA;AAAA;AAAA;AAElB3oC,gDAAM,GAAG;AAAEzZ,gDAAI,EAAEhE,IAAI,CAAC2E;AAAb,2CAAT8Y;AAFkB;AAAA,iDAGF6O,4EAAY,aAHV,CAGU,CAHV;;AAAA;AAGlB/e,iDAHkB,iBAGlBA;AACAA,iDAAO,GAAG,OAAO,CAAP,IAAY,aAAC;AAAA,mDAAI25B,CAAC,CAAL;AAAvB35B,2CAAU,CAAVA;AACAA,iDAAO,GAAGrD,+CAAI,IAAI,OAAO,CAAP,OAAe,aAAC;AAAA,mDAAIg9B,CAAC,KAAKlnC,IAAI,CAAd;AAAlCuN,2CAAkB,CAAJ,CAAdA;AACAA,iDAAO,GAAG3M,6DAAoBZ,IAAI,CAAxBY,mCAAV2M,OAAU3M,GAAV2M;AACAA,iDAAO,GAAG,OAAO,CAAP,IAAY,aAAK;AAAE,mDAAO;AAAEvJ,kDAAI,EAAEkjC;AAAR,6CAAP;AAA7B35B,2CAAU,CAAVA;AAEAF,8CAAI,GAAG9L,MAAM,CAANA,0CAAP8L;;AATkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;AAAA;AAAA;AAAA;AAAA,iCAIhB+4C;;AAJgB;AAAA,qCAgBhBA,aAhBgB;;AAAA;AAkBtBH,oCAAM,kBAAkB;AAAEj7B,8CAAc,EAAEhrB,IAAI,CAAtB;AAAuCsN,wCAAQ,EAA/C;AAA4ED,oCAAI,EAAJA;AAA5E,+BAAlB,CAAN44C;;AAlBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAFe;;AAAA;AAAA;AAAA;AAAA,qBAEnCM;;AAqBNA,mCAAiB;AACpB;;AA9HQ,sBAgIN/0C,MAAM,CAANA,SAhIM;AAAA;AAAA;AAAA;;AAkIC7Q,sBAlID,GAkIUC,4DAlIV,CAkIUA,CAATD;AAEAsL,oBApID,GAoIQtL,MAAM,KAANA,uBApIR,SAoICsL;AAEA3L,sBAtID,GAsIUiB,MAAM,CAANA,qBAtIV,CAsICjB;AAtID;AAAA,uBAwIkBiG,uFAAmC9E,KAAK,CAAxC8E,MAA+C9E,KAAK,CAApD8E,OAA4DvG,IAAI,CAAhEuG,QAxIlB,MAwIkBA,CAxIlB;;AAAA;AAwIC4zB,wBAxID,iBAwICA;AACAn2B,oBAzID,GAyIQhE,IAAI,CAAJA,gBAAqBA,IAAI,CAAJA,uBAzI7B,IAyI6BA,CAA5BgE;AACAyZ,sBA1ID,GA0IU;AAAEzZ,sBAAI,EAAN;AAAQuH,sBAAI,EAAEvL,IAAI,CAAJA,OAAYuL;AAA1B,qBAAoC;AAAEU,sBAAI,EAAE;AAAEjI,wBAAI;AAAN,mBAAR;AAAoCuH,sBAAI,EAAEvL,IAAI,CAAJA,OAAYuL;AAAtD,iBAA7CkS;AACA+oC,mCA3ID,GA2IuB,+CAAI,CAAClmD,MAAM,GAAP,GAAW4J,+CAAI,SAAStJ,4DAA5B,QAA4BA,CAAT,CAAf,CAAJ,QAAkE,aAAC;AAAA,yBAAIuN,CAAC,CAADA,uBAAyBnO,IAAI,CAAJA,gBAA7B,WAA6BA,EAA7B;AA3I1F,iBA2IuB,CAAtBwmD;AACFt7B,4BA5IC,GA4Ic,mBAAmB,CAAnB,OAA2B,aAAC;AAAA,yBAAI/c,CAAC,CAADA,IAAC,CAADA,IAAWA,CAAC,CAADA,IAAC,CAADA,KAAXA,aAAoCA,CAAC,CAADA,IAAC,CAADA,KAAxC;AAA5B,uBAAwF,aAAK;AAAE,yBAAO;AAAElC,wBAAI,EAAEkC,CAAC,CAAT,IAAS,CAAT;AAAiB5C,wBAAI,EAAE4C,CAAC,CAAxB;AAA+BlL,yBAAK,EAAEkL,CAAC,CAAClL;AAAxC,mBAAP;AA5I7G,iBA4Ic,CAAfioB;AACAA,4BAAY,GAAG,YAAY,CAAZ,IAAiB,aAAK;AAAE,yBAAO;AAAElnB,wBAAI,EAAEkjC,CAAC,CAAT;AAAgB37B,wBAAI,EAAE27B,CAAC,CAAvB;AAA8BjkC,yBAAK,EAAEikC,CAAC,CAACjkC;AAAvC,mBAAP;AAAvCioB,iBAAe,CAAfA;AACA3d,uBA9IC,GA8IS3M,+FA9IT,YA8ISA,GAAV2M;AAEEF,oBAhJD,GAgJQ9L,MAAM,CAANA,sDAhJR,2BAgJC8L;AAEN44C,sBAAM,kBAAkB;AAAE34C,0BAAQ,EAAV;AAAoCD,sBAAI,EAAxC;AAA0C43C,sBAAI,EAAEjlD,IAAI,CAAJA,SAAcilB;AAA9D,iBAAlB,CAANghC;;AAlJK;AAAA,sBAqJNz0C,MAAM,CAANA,SArJM;AAAA;AAAA;AAAA;;AAuJCi1C,uBAvJD,GAuJWvoC,MAAM,CAANA,mBAvJX,IAuJWA,CAAVuoC;AACAnmD,uBAxJD,GAwJUiB,MAAM,CAANA,qBAxJV,CAwJCjB;AAxJD;AAAA,uBA0JkBiG,2EA1JlB;;AAAA;AA0JCgf,wBA1JD,iBA0JCA;AAEF2F,6BA5JC,GA4Jc,+CAAI,CAAC5qB,OAAM,GAAP,GAAWM,4DAAf,QAAeA,CAAX,CAAJ,QAAoD,aAAC;AAAA,yBAAI,CAACiI,+CAAQ,CAAC6pB,CAAC,CAAF,OAAb,OAAa,CAAb;AA5JnE,iBA4Jc,CAAfxH;AACAA,6BAAY,GAAG,aAAY,CAAZ,IAAiB,aAAC;AAAA,yBAAIwH,CAAC,CAADA,QAAJ,IAAIA,CAAJ;AAAjCxH,iBAAe,CAAfA;AACAA,6BAAY,GAAG,aAAY,CAAZ,IAAiB,aAAK;AAAE,yBAAO;AAAElnB,wBAAI,EAAEkjC;AAAR,mBAAP;AAAvChc,iBAAe,CAAfA;AACAzN,uBA/JC,GA+JQ,QAAQ,CAAR,KAAc,aAAC;AAAA,yBAAIiV,CAAC,CAADA,mCAAqC+zB,OAAO,CAAhD,WAAyCA,EAAzC;AA/JvB,iBA+JQ,CAAThpC;AACAA,uBAAM,GAAGA,OAAM,GAAGA,OAAM,CAAClc,MAAM,CAAbkc,QAAM,CAANA,CAAH,CAAGA,CAAH,GAAfA;AACAA,uBAAM,GAAG;AAAEzZ,sBAAI,EAAEyZ;AAAR,iBAATA;AAEElQ,wBAnKD,GAmKW3M,gGAnKX,aAmKWA,GAAV2M;;AAEN,oBAAGhM,MAAM,CAAT,iBAA2B;AACvB0kD,wBAAM,oBAAkB;AAAE34C,4BAAQ,EAAE4Q,MAAM,CAANA,mBAAZ,IAAYA,CAAZ;AAA6C7Q,wBAAI,EAAE;AAAnD,mBAAlB,CAAN44C;AADJ,uBAEO;AACHA,wBAAM,oBAAkB;AAAE34C,4BAAQ,EAAV;AAAgCD,wBAAI,EAApC;AAA0C2d,kCAAc,EAAxD;AAA8DxN,4BAAQ,EAAtE;AAA4ExZ,wBAAI,EAAEka,MAAM,CAANA;AAAlF,mBAAlB,CAAN+nC;AACH;;AAzKI;AA4KT,oBAAGz0C,MAAM,CAANA,SAAH,cAAiC;AAC7By0C,wBAAM,CAAC;AAAEjiD,wBAAI,EAAE0jB,KAAK,CAACpa;AAAd,mBAAD,EAA2B,KAAK,CAAL,YAAkB,aAAK;AAAE,2BAAO;AAAEtJ,0BAAI,EAAEkjC;AAAR,qBAAP;AAApD,mBAA2B,CAA3B,EAA2Exf,KAAK,CAAtFu+B,SAAM,CAANA;AACH;;AA9KQ,sBAgLNz0C,MAAM,CAANA,SAhLM;AAAA;AAAA;AAAA;;AAkLCk1C,uBAlLD,GAkLWnlD,MAAM,CAANA,iBAAwB,IAAxBA,CAAwB,CAAxBA,GAAgC,IAlL3C,CAkL2C,CAA1CmlD;AAlLD;AAAA,uBAoLgBngD,uFAAmC9E,KAAK,CAAxC8E,MAA+C9E,KAAK,CAApD8E,OAA4DvG,IAAI,CAAhEuG,QApLhB,MAoLgBA,CApLhB;;AAAA;AAoLD4zB,yBApLC,iBAoLDA;AACAlV,sBArLC,GAqLQjlB,IAAI,CAAJA,SArLR,MAqLDilB;AACA0hC,6BAtLC,GAsLez8C,+CAAI,CAACw8C,OAAO,CAAR,CAAQ,CAAR,EAAa,+CAAI,CAACA,OAAO,CAAR,CAAQ,CAAR,EAAa9lD,4DAAjB,SAAiBA,CAAb,CAAJ,QAAsD,kBAAM;AAAA,yBAAIqkB,MAAM,CAANA,uBAA8BjlB,IAAI,CAAJA,gBAAlC,WAAkCA,EAAlC;AAtL5F,iBAsLgC,CAAb,CAApB2mD;AACAC,uCAvLC,GAuLyB,aAAa,CAAb,IAAkB,kBAAM;AAAA,yBAAI3hC,MAAM,CAAV;AAvLjD,iBAuLyB,CAA1B2hC;AACAC,wCAxLC,GAwL0B,aAAa,CAAb,IAAkB,cAAE;AAAA,yBAAIC,EAAE,CAAFA,MAAJ,CAAIA,CAAJ;AAxL9C,iBAwL0B,CAA3BD;AAIElmD,uBA5LD,GA4LUC,4DA5LV,CA4LUA,CAATD;AA5LD;AAAA;AAAA;;AAAA;AAgMG8c,wBAAM,GAAG;AAAEzZ,sBAAI,EAAEhE,IAAI,CAAJA,OAAYgrB;AAApB,iBAATvN;AACAopC,wCAAwB,GAAG,wBAAwB,CAAxB,IAA6B,aAAK;AAAE,yBAAO;AAAE7iD,wBAAI,EAAEkjC;AAAR,mBAAP;AAA/D2f,iBAA2B,CAA3BA;AACAt5C,yBAAO,GAAG3M,iGAAV2M,wBAAU3M,GAAV2M;AACA,oBAAGkQ,QAAM,KAAT,WAAyBxY,OAAO,CAAPA,yDAAiEjF,IAAI,CAArEiF;AACzBghD,sBAAM,sBAAkB;AAAE34C,0BAAQ,EAAE;AAAZ,iBAAlB,CAAN24C;AApMH;;AAAA;AAuMGxoC,wBAAM,GAAG;AAAEzZ,sBAAI,EAAEihB;AAAR,iBAATxH;AACAmpC,uCAAuB,GAAG,uBAAuB,CAAvB,IAA4B,aAAK;AAAE,yBAAO;AAAE5iD,wBAAI,EAAEkjC;AAAR,mBAAP;AAA7D0f,iBAA0B,CAA1BA;AACAr5C,yBAAO,GAAG3M,iGAAV2M,uBAAU3M,GAAV2M;AACA,oBAAGkQ,QAAM,KAAT,WAAyBxY,OAAO,CAAPA,yDAAiEjF,IAAI,CAArEiF;AACzBghD,sBAAM,sBAAkB;AAAE34C,0BAAQ,EAAV;AAAiC+4C,2BAAS,EAAE;AAA5C,iBAAlB,CAANJ;AA3MH;;AAAA;AAgNT,oBAAGz0C,MAAM,CAANA,SAAH,kBAAqC;AAEjCy0C,wBAAM,CAAC;AAAEjiD,wBAAI,EAAE0jB,KAAK,CAACpa;AAAd,mBAAD,EAA2B,KAAK,CAAL,YAAkB,aAAK;AAAE,2BAAO;AAAEtJ,0BAAI,EAAEkjC;AAAR,qBAAP;AAApD,mBAA2B,CAA3B,EAA2Exf,KAAK,CAAtFu+B,SAAM,CAANA;;AAEA,sBAAGv+B,KAAK,CAALA,mBAAyBA,KAAK,CAALA,yBAA5B,QAAmE;AAErDq/B,kCAFqD;AAAA,0FAEpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAEb70C,sCAFa,GAEJhC,QAAQ,CAARA,cAFI,mBAEJA,CAATgC;AACAA,sCAAM,CAANA;AAEAD,wCALa,GAKF/B,QAAQ,CAARA,cALE,UAKFA,CAAX+B;AACAA,wCAAQ,CAARA;AAEAwjC,oCARa,GAQN/tB,KAAK,CAALA,sBARM,CAQNA,CAAP+tB;AARa;AAAA,uCAUDlvC,0EAVC,IAUDA,CAVC;;AAAA;AAUbmvC,mCAVa,iBAUbA;AAENvjC,qGAAc,CAAC;AAAEujC,qCAAG,EAAL;AAAO/yC,uCAAK,EAAE3C,IAAI,CAACuL;AAAnB,iCAAD,EAA4B0G,QAAQ,CAApC,SAAdE,MAAc,CAAdA;AAEM6kB,sCAda,GAcJ9mB,QAAQ,CAARA,cAdI,wBAcJA,CAAT8mB;AACAA,sCAAM,CAANA;AACAA,sCAAM,CAANA;AAEAgwB,uCAlBa,GAkBH92C,QAAQ,CAARA,cAlBG,uBAkBHA,CAAV82C;AACAA,uCAAO,CAAPA;;AAnBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAFoC;;AAAA;AAAA;AAAA;AAAA,uBAErDD;;AAsBNA,kCAAc;AACrB;AACJ;;AAED,oBAAG7oC,MAAM,CAANA,SAAH,sBAAyC;AAErC;AAEQrc,wBAJ6B,GAIoB46C,IAJpB,OAI7B56C,EAAQisB,cAJqB,GAIoB2uB,IAJpB,eAI7B56C,EAAwB7B,KAJK,GAIoBy8C,IAJpB,KAI7B56C,EAA8ByL,QAJD,GAIoBmvC,IAJpB,SAI7B56C,EAAwCwL,KAJX,GAIoBovC,IAJpB,KAI7B56C;AAEF0L,2BAN+B,GAMrBmd,+CAAO,CANc,MAMd,CAAjBnd;AACAkQ,0BAP+B,GAOtBqQ,cAAc,CAPQ,CAOR,CAAvBrQ;AAENwoC,wBAAM,sBAAkB;AAAEzoC,4BAAQ,EAAExd,KAAI,CAAhB;AAAuBsN,4BAAQ,EAA/B;AAAiCD,wBAAI,EAArC;AAAuCg5C,6BAAS,EAAE;AAAlD,mBAAlB,CAANJ;AAEH;;AA3PQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,sBAAJ76B,IAAI;AAAA;AAAA;AAAV,KAAU,EAAV;;AA8PAA,QAAI;AA9QR,IAgRE,UAAS;AACPnmB,WAAO,CAAPA;AACH;AApRE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMigD,oCAAoC,GAAG,SAAvCA,oCAAuC,aAAc;AAAA,wBAEpBx4C,yDAFoB;AAAA,MAEtDnL,MAFsD;AAAA,MAE9Cgd,MAF8C;AAAA,MAEtCL,MAFsC;AAAA,MAE9Bb,KAF8B;;AAI9D,MAAMrd,IAAI,GAAG2c,+CAAK,CAAChb,UAAU,CAA7B,QAAkB,CAAlB;AAEA,MAAG,CAAH,MAAU;;AAEV,MAAMypB,IAAI;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAET;AAEM67B,+BAJG,GAIiB,SAApBA,iBAAoB,SAAU;AAChC,oBAAMC,WAAW,GAAG,uDAAc,MAAM,CAAN,IAAW,iBAAS;AAClD,sBAAMxjD,MAAM,GAAG,KAAK,CAAL,YAAkB,aAAC;AAAA,2BAAIgD,CAAC,CAAL;AAAnB,oCAAiDwD,+CAAI,IAAItJ,4DAAmB2B,KAAK,CAAjF,IAAyD3B,CAAJ,CAArD,GAA2F,KAAK,CAAL,YAAkB,aAAC;AAAA,2BAAI8F,CAAC,CAAL;AAA7H,mBAA0G,CAA1G;AACA,sBAAM1G,IAAI,GAAG;AAAEuL,wBAAI,EAAEhJ,KAAK,CAAb;AAAwBmB,0BAAM,EAANA;AAAxB,mBAAb;AACA,yBAAOu/B,+EAAqB,eAAevB,mFAAf,CAA5B;AAHJ,iBAAkC,CAAd,CAApB;AAKA;AAVK,eAIHulB;;AAJG;AAAA,qBAaW36B,4EAAY,CAbvB,UAauB,CAbvB;;AAAA;AAaHprB,mBAbG,gBAaHA;AAEFwC,oBAfK,GAeI,KAAK,CAAL,IAAU,uBAAiB;AACpC,uBAAO;AAAEsP,uBAAK,EAAEA,KAAK,GAAd;AAAoBm0C,sBAAI,EAAEnnD,IAAI,CAA9B;AAAuCiB,0BAAQ,EAAEjB,IAAI,CAACuL;AAAtD,iBAAP;AAhBK,eAeI,CAAT7H;AAIJA,oBAAM,GAAGujD,iBAAiB,CAA1BvjD,MAA0B,CAA1BA;AAEI4J,sBArBK,0BAqBLA;AAEA4E,oBAvBK,GAuBIm9B,kFAAsB,aAAa;AAAErkB,8BAAc,EAAEhrB,IAAI,CAAtB;AAAuCwd,wBAAQ,EAAExd,IAAI,CAArD;AAA4DsN,wBAAQ,EAApE;AAAsED,oBAAI,EAA1E;AAA8GrJ,oBAAI,EAAE;AAApH,eAAb,CAA/BkO;AACAA,oBAAM,CAANA;AAEED,sBA1BG,GA0BQ/B,QAAQ,CAARA,cA1BR,UA0BQA,CAAX+B;AACAA,sBAAQ,CAARA;AAENE,mFAAc,KAAKF,QAAQ,CAAb,SAAdE,MAAc,CAAdA;AAEAD,oBAAM,GAAGhC,QAAQ,CAARA,cAATgC,gCAAShC,CAATgC;AAEAwxB,yFAAW,CAAC;AAAEniC,sBAAM,EAAR;AAAUmC,sBAAM,EAAE9C,4DAAlB,MAAkBA,CAAlB;AAA8CsR,sBAAM,EAApD;AAAsDyxB,0BAAU,EAAE;AAAlE,eAAD,CAAXD;AAEMkiB,+BAnCG,GAmCiB11C,QAAQ,CAARA,cAnCjB,yBAmCiBA,CAApB01C;AACAwB,wBApCG,KAoCHA;AAEA75C,qBAtCG,KAsCHA;AAEN7J,oBAAM,CAANA,QAAe,iBAAS;AACpB6J,uBAAO,CAAPA,KAAa;AAAE9N,uBAAK,EAAE8C,KAAK,CAAd;AAAyBH,qBAAG,EAAEygC,oEAAU,CAAVA,KAAU,CAAVA,CAAkBof;AAAhD,iBAAb10C;AADJ7J;AAIAwM,sBAAQ,CAARA,4EAAqF,eAAO;AAExFsxB,mBAAG,CAAHA,0BAA8B,iBAAS;AAEnC,sBAAM6lB,KAAK,GAAG13B,KAAK,CAAnB;AACA,sBAAM23B,YAAY,GAAGD,KAAK,CAALA,QAArB;AACA,sBAAM/5C,QAAQ,GAAGtN,IAAI,CAArB;AACA,sBAAMyd,MAAM,GAAG6pC,YAAY,IAA3B;AACA,sBAAMle,SAAS,GAAG3rB,MAAM,KAAxB;AACA,sBAAM8pC,UAAU,GAAGr3C,QAAQ,CAARA,cAAnB,MAAmBA,CAAnB;AACMq3C,4BAAU,CAAVA,YAAuBne,SAAS,qEAAhCme;;AAIN,sBAAM3hB,IAAI;AAAe3mB,0BAAM,EAAEjf,IAAI,CAA3B;AACNsN,4BAAQ,EADF;AACImQ,0BAAM,EADV;AACYD,4BAAQ,EAAExd,IAAI,CAD1B;AAENo4B,iCAAa,EAAE7Z,MAAM,CAFf;AAE+BK,+BAAW,EAAEL,MAAM,CAFlD;AAGNqI,0BAAM,EAAE1I,MAAM,CAHR;AAIN3Q,2BAAO,EAJD;AAKN2R,gCAAY,EALN;AAMN8L,kCAAc,EAAEiQ;AANV,oBAAV;;AASA,sBAAM9qB,QAAQ,GAAG,SAAXA,QAAW,0BAA6B;AAC1Ci3C,8BAAU,CAAVA;AACAA,8BAAU,CAAVA;AACAxB,qCAAiB,CAAjBA;;AACA,wBAAG,CAACvoC,KAAK,CAAT,SAAmB;AACf,0BAAMmqC,SAAS,GAAG,KAAK,CAAL,KAAW,gBAAI;AAAA,+BAAIxnD,IAAI,CAAJA,SAAcqd,KAAK,CAAvB;AAAjC,uBAAkB,CAAlB;AACA,0BAAM2N,cAAc,GAAGiQ,kGAAvB,MAAuBA,CAAvB;AACA,0BAAM1vB,IAAI,GAAGyf,cAAc,IAAI3N,KAAK,CAApC;AACH;AARL;;AAWAunB,wFAAY,gCAAZA,MAAY,CAAZA;AAhCJpD;AAFJtxB;AAsCA01C,+BAAiB,CAAjBA,0BAA4C,iBAAS;AAEjD,oBAAG,CAACvoC,KAAK,CAAT,SAAmB;AACfhL,4BAAU,CAAC,YAAM;AACbf,0BAAM,CAANA,aAAoB81C,UAAU,CAA9B91C;AACAi0B,uFAAS,CAAC6hB,UAAU,CAApB7hB,KAAS,CAATA;AAFJlzB,mBAAU,CAAVA;AADJ,uBAKO;AACHf,wBAAM,CAANA,aAAoB81C,UAAU,CAA9B91C;AACAi0B,qFAAS,CAAC6hB,UAAU,CAApB7hB,KAAS,CAATA;AACH;AAVLqgB;;AAlFS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,oBAAJx6B,IAAI;AAAA;AAAA;AAAV,GAAU,EAAV;;AAiGA,MAAI;AACFA,QAAI;AADN,IAEE,UAAS;AACTnjB,YAAQ,8CAARA,CAAQ,CAARA;AACD;AA7GE,E;;;;;;;;;;;;;;;;;;;;ACdP;AACA;AAEO,IAAMm4B,aAAa,GAAG,SAAhBA,aAAgB,UAAW;AAAA,wBAEd1zB,yDAFc;AAAA,MAE5B/K,UAF4B;;AAIpCm2C,6EAAa;AAJV,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHP;AAEA;AAEO,IAAM2P,eAAe,GAAG,SAAlBA,eAAkB,0CAA6C;AAEtE,MAAG,CAAH,SAAa,OAAO,CAAP,UAAO,CAAP;AAEb,MAAMC,iBAAiB,GAAG7+C,8CAAQ,CAAC8+C,UAAU,CAAX,UAAsB,OAAO,CAAP,WAAmB,aAAC;AAAA,WAAIn2B,CAAC,CAAL;AAA5E,GAAwD,CAAtB,CAAlC;AAEA,MAAIlS,MAAM,GAAV;;AAEA,MAAGf,MAAM,CAAT,aAAuB;AACjBe,UAAM,GAAGooC,iBAAiB,GAClBroC,OAAO,CADW,SAElBsoC,UAAU,CAAVA,cACMtoC,OAAO,CADbsoC,sCAEUtoC,OAAO,CAFjBsoC,UAFRroC,UAEQqoC,EAFRroC;AADN,SAMO;AACDA,UAAM,GAAGooC,iBAAiB,GAClBroC,OAAO,CADW,sCAEdA,OAAO,CAFO,UAA1BC,UAA0B,EAA1BA;AAGL;;AAED;AApBC;;AAuBP,IAAMsoC,cAAc,GAAG,SAAjBA,cAAiB,OAAU;AAC3B1M,MAAI,GAAG,IAAI,CAAJ,IAAS,gBAAU;AACpB,QAAM2M,EAAE;AACIliD,QAAE,YAAK/E,2DAAkBkwC,CAAC,CAAxB,QAAKlwC,CAAL,cADN,CACM,CADN;AACiD0M,cAAQ,EAAEwjC,CAAC,CAADA,gBAAkBA,CAAC,CAADA,SAAlBA,OAAoCA,CAAC,CADhG;AAEIvjC,aAAO,EAAE,CAAC,CAAD,YAAc,aAAK;AAAE,eAAOu6C,SAAS,IAAhB,CAAgB,CAAhB;AAArB;AAFb,MAAR;;AAIA;AALN5M,GAAO,CAAPA;AAOA;AARN;;AAWO,IAAM6M,mBAAmB,GAAG;AAC/BN,iBAAe,EADgB;AAE/BG,gBAAc,EAAdA;AAF+B,CAA5B;;AAKP,yBAAyB;AAEnB,MAAMI,KAAK,GAAG,eAAd;AAEA,MAAMvoD,KAAK,GAAGuoD,KAAK,GAAG9gB,CAAC,CAADA,SAAWA,CAAC,CAAf,OAAnB;AACA,MAAM+gB,QAAQ,GAAGD,KAAK,IAAI,CAAC,CAAC9gB,CAAC,CAA7B;AACA,MAAM9kC,GAAG,GAAG4lD,KAAK,GAAG9gB,CAAC,CAAJ,MAAjB;AACA,MAAM55B,QAAQ,GAAGwjC,CAAC,CAADA,iBAAmBA,CAAC,CAArC;AACA,MAAMoX,MAAM,GACAzoD,KAAK,KAALA,MACSmB,2EAAkCA,gEAVpC,QAUoCA,CAFvD,CARmB,CAWD;;AAElB,MAAMunD,aAAa,GAAG,WAAWvnD,2EAAkCA,gEAAuBkwC,CAAC,CAA3F,MAAmElwC,CAAnE;AACA,MAAM2K,IAAI,GAAGy8C,KAAK,GAAG9gB,CAAC,CAADA,QAAH,KAAlB;AAEA,MAAMzpB,MAAM,GAAG;AACThe,SAAK,EADI;AAET2C,OAAG,EAFM;AAGT6lD,YAAQ,EAHC;AAITC,UAAM,EAJG;AAKTC,iBAAa,EALJ;AAMT58C,QAAI,EAAJA;AANS,GAAf;AAQA;AACL,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEO,IAAMmkC,kBAAkB,GAAG,SAArBA,kBAAqB,6BAAgC;AAE5D,MAAMtkB,IAAI,GAAG,SAAPA,IAAO,GAAM;AAAA,0BAEsC1e,yDAFtC;AAAA,QAELmS,OAFK;AAAA,QAEW8oC,UAFX;AAAA,QAEuBprC,UAFvB;;AAAA,eAI8CsC,OAAO,CAAPA,aAC7C,CAAC,CAAC,OAAO,CAAP,KAAa,aAAC;AAAA,aAAIzX,CAAC,CAADA,kBAAoBsC,QAAQ,CAAhC,QAAgC,CAAhC;AAAhB,KAAE,CAAF,GACM,OAAO,CAAP,KAAa,aAAC;AAAA,aAAItC,CAAC,CAADA,kBAAoBsC,QAAQ,CAAhC,QAAgC,CAAhC;AADpB,KACM,CADN,GAEMgD,yDAHuCmS,GAI7CnS,yDARD;AAAA,QAIL/K,UAJK;AAAA,QAIO0d,OAJP;AAAA,QAIgB9d,MAJhB;AAAA,QAI+B6mD,UAJ/B;;AAAA,2BAUM17C,yDAVN;AAAA,QAUL6R,MAVK;;AAYb,QAAGuD,+GAAH,MAAGA,CAAH,EAAyD;AAAE;AAAS;;AAEpE,QAAM7P,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,YAAQ,CAARA;AAEN,QAAMC,MAAM,GAAG3Q,MAAM,CAANA,kBACDiuC,gBAAgB,IAAIt/B,QAAQ,CAARA,cADnB3O,6BACmB2O,CADnB3O,GAEDmtB,iDAFd;AAGMxc,UAAM,CAANA;AAENC,yEAAc,CAAC;AAAExQ,gBAAU,EAAZ;AAAc4c,YAAM,EAANA;AAAd,KAAD,EAAyBtM,QAAQ,CAAjC,SAAdE,MAAc,CAAdA;AAEA,QAAMk2C,WAAW,GAAGn4C,QAAQ,CAARA,iBAApB,mBAAoBA,CAApB;AAEAmC,cAAU,CAAC,YAAM;AACfg2C,iBAAW,CAAXA,CAAW,CAAXA;AADQ,OAAVh2C,GAAU,CAAVA;;AAIA,0BAAqB;AACfg2C,iBAAW,CAAXA,QAAoB,gBAAI;AAAA,eAAItU,IAAI,CAAJA,cAAJ,eAAIA,CAAJ;AAAxBsU;AACL;;AAED,QAAG9pC,MAAM,CAANA,eAAH,WAAoC;AAC9B,UAAM+wB,YAAY,GAAGp/B,QAAQ,CAARA,cAArB,qBAAqBA,CAArB;AACMo/B,kBAAY,CAAZA;AACX;;AAED,QAAIhwB,MAAM,GAAGyoC,oJAAb,OAAaA,EAAb;AACIzoC,UAAM,CAANA,QAAe,aAAC;AAAA,aAAIgpC,qBAAqB,YAAzB,MAAyB,CAAzB;AAAhBhpC;;AAEJ,QAAMipC,oBAAoB;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AACzB71B,iBAAC,CAADA;AACA,+JAAqD,kBAAU;AAC7DqE,wBAAM,CAANA,iCAAwC;AACtC1D,+BAAW,EAAEtW,gFADyB;AAEtCuW,+BAAW,EAAE;AACX3tB,wBAAE,EADS;AAEX4Y,4BAAM;AAAeD,mCAAW,EAAE;AAA5B;AAFK;AAFyB,mBAAxCyY;AADF;;AAFyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,sBAApBwxB,oBAAoB;AAAA;AAAA;AAA1B,KAA0B,EAA1B;;AAaA,QAAMC,eAAe;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACZ1mC,iGADY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,sBAAf0mC,eAAe;AAAA;AAAA;AAArB,KAAqB,EAArB;;AAIA,QAAGjqC,MAAM,CAAT,kBAA4B;AACtB8pC,iBAAW,CAAXA,QAAoB,sBAAc;AAC5BI,kBAAU,CAAVA;AACAA,kBAAU,CAAVA,2CAAsD;AAAE/hB,cAAI,EAAE;AAAR,SAAtD+hB;AAFNJ;AADN,WAKO;AACDA,iBAAW,CAAXA,QAAoB,sBAAc;AAC5BI,kBAAU,CAAVA,gDAA2D;AAAE/hB,cAAI,EAAE;AAAR,SAA3D+hB;AADNJ;AAGL;;AAED/2C,UAAM,CAANA,4BAAmC,aAAK;AACtC,UAAGohB,CAAC,CAADA,QAAH,SAAsB;AACpB61B,4BAAoB,CAApBA,CAAoB,CAApBA;AACD;AAHHj3C,OAIG;AAAEo1B,UAAI,EAAE;AAAR,KAJHp1B;AAtEN;;AA6EA8Z,MAAI;AA/EH;;AAkFP,IAAMk9B,qBAAqB,GAAG,SAAxBA,qBAAwB,oBAAuB;AAE/C,MAAMr2C,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA;AAEN,MAAMC,MAAM,GAAGhC,QAAQ,CAARA,cAAf,wBAAeA,CAAf;;AAEA,MAAGshB,CAAC,CAADA,UAAH,GAAkB;AACZtf,UAAM,CAANA;AACAD,YAAQ,CAARA;AACAE,yEAAc,KAAMF,QAAQ,CAAd,SAAdE,MAAc,CAAdA;AACA;AACL;;AACD,MAAI+oC,IAAI,gCAAQ1pB,CAAC,CAAT,4BAAqBA,CAAC,CAA9B,KAAQ,EAAR;AACI0pB,MAAI,GAAG6M,0GAAP7M,IAAO6M,CAAP7M;AAEJ,MAAMlwB,cAAc,GAAGwG,CAAC,CAADA,kBAAoByJ,uFAAiCzJ,CAAC,CAAlCyJ,UAA3C,MAA2CA,CAA3C;AAEA9oB,uEAAc,CAAC;AAAE6Y,kBAAc,EAAhB;AAAkBxN,YAAQ,EAAEgU,CAAC,CAA7B;AAAwC0pB,QAAI,EAA5C;AAA8C79B,SAAK,YAAKmU,CAAC,CAAN,qBAAkBA,CAAC,CAAnB;AAAnD,GAAD,EAAmFvf,QAAQ,CAA3F,SAAdE,MAAc,CAAdA;;AAEA,MAAGmN,MAAM,CAANA,SAAH,GAAsB;AAChB,QAAMopC,eAAe,GAAGx2C,MAAM,CAANA,cAAxB,kBAAwBA,CAAxB;;AACA,yBAAoB;AACdw2C,qBAAe,CAAfA;AACL;AACN;AAzBP,E;;;;;;;;;;;;;;;;;;;;;AC9FA;AACA;AACA;AAEO,IAAMvoB,aAAa,GAAG,SAAhBA,aAAgB,UAAW;AAEpChtB,uEAAoBA,wEAApBA,eAAoBA,CAApBA;;AAFoC,wBAIbzG,yDAJa;AAAA,MAI5B/K,UAJ4B;;AAMpC+tC,uFAAkB,CAAC/tC,UAAU,CAA7B+tC,EAAkB,CAAlBA;AAEA;AARG,E;;;;;;;;;;;;;;;;;;;;ACJP;AACA;AAEO,IAAM1P,eAAe,GAAG,SAAlBA,eAAkB,aAAgB;AAAA,wBAExBtzB,yDAFwB;AAAA,MAEnCwR,MAFmC;;AAI3C,MAAM1M,MAAM,GAAG,MAAM,CAAN,eAAsB,cAAE;AAAA,WAAIm6B,EAAE,CAAFA,SAAJ;AAAxB,KAAf,CAAe,CAAf;AACA,MAAM3rC,IAAI,GAAG2B,UAAU,CAAvB;AAEA,MAAG,CAAH,QAAY;AAEZ3B,MAAI,CAAJA,aAAkBA,IAAI,CAAtBA;AAEA,MAAM2oD,CAAC,GAAGn3C,MAAM,CAANA,mBAA0BxR,IAAI,CAA9BwR,OACMA,MAAM,CAANA,yBACMxR,IAAI,CADVwR,iBAEMxR,IAAI,CAAJA,SAAcwR,MAAM,CAH1C,KAGsBxR,CAHtB;AAKA,MAAMsN,QAAQ,GAAG;AAAEkQ,YAAQ,EAAExd,IAAI,CAAhB;AAAuBU,WAAO,EAAEV,IAAI,CAAJA,SAAhC;AAAuD6hD,SAAK,EAAE7hD,IAAI,CAAJA,SAA9D;AAAmFyB,SAAK,EAAE+P,MAAM,CAAhG;AAAwGlE,YAAQ,EAAhH;AAAqH0b,UAAM,EAAEhpB,IAAI,CAACgrB;AAAlI,GAAjB;AAEA49B,+EAAW,SAAXA,QAAW,CAAXA;AAlBG,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACHP;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEO,IAAMpoB,kBAAkB,GAAG,SAArBA,kBAAqB,aAAgB;AAE9C,MAAMxgC,IAAI,GAAG2B,UAAU,CAAvB;;AAF8C,wBAIP+K,yDAJO;AAAA,MAItCwR,MAJsC;AAAA,MAI9B3c,MAJ8B;AAAA,MAItBuR,UAJsB;;AAM9C,MAAMtB,MAAM,GAAG,MAAM,CAAN,eAAsB,cAAE;AAAA,WAAIm6B,EAAE,CAAFA,SAAJ;AAAxB,KAAf,CAAe,CAAf;AAEA,MAAG,CAAH,QAAY;AAEZ;AAEA3gB,gBAAc,GAAGhrB,IAAI,CAArBgrB;AACAxN,UAAQ,GAAGxd,IAAI,CAAfwd;AACAqrC,aAAW,GAAXA;;AAEA,UAAOr3C,MAAM,CAAb;AACI;AACIlE,cAAQ,GAAGtN,IAAI,CAAJA,SAAXsN;AACAu0C,WAAK,GAALA;AACAnhD,aAAO,GAAGV,IAAI,CAAJA,SAAVU;AACA8c,cAAQ,iBAAUxd,IAAI,CAAJA,SAAlBwd,OAAQ,CAARA;AACAsrC,gBAAU,GAAVA;AACAD,iBAAW,GAAXA;AACA;;AACJ;AACIv7C,cAAQ,GAAGtN,IAAI,CAAJA,SAAXsN;AACAu0C,WAAK,GAAG7hD,IAAI,CAAJA,SAAR6hD;AACAnhD,aAAO,GAAPA;AACA8c,cAAQ,aAAMxd,IAAI,CAAJA,SAAN,OAARwd,MAAQ,CAARA;AACAsrC,gBAAU,GAAVA;AACAD,iBAAW,GAAXA;AACA;AAhBR;;AAmBA,MAAM32C,MAAM,GAAGm9B,kFAAsB,aAAa;AAAErkB,kBAAc,EAAhB;AAAkBxN,YAAQ,EAA1B;AAA4BlQ,YAAQ,EAApC;AAAmDD,QAAI,EAAvD;AAAqFrJ,QAAI,EAAE;AAA3F,GAAb,CAArC;AAEA,MAAMiO,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AAEA+B,UAAQ,CAARA;AAEA,MAAM82C,YAAY,GAAGxnD,MAAM,CAANA,qBAzCyB,CAyC9C,CAzC8C,CA2C9C;;AACA,MAAMynD,UAAU,GAAG,UAAU,CAAV,UAAqB,gBAAQ;AAC5C;AACI;AACI,eAAOhpD,IAAI,CAAJA,SAAP;;AACJ;AACI,eAAOA,IAAI,CAAJA,SAAP;;AACJ;AACI,eAAOA,IAAI,CAAX;AANR;AADJ,GAAmB,CAAnB;AAUA,MAAMmqC,IAAI,GAAG,8CAAI,eAAe,+EAAsCvpC,yDAAtC,SAA+D,qBAAS;AAAA,WAAIqoD,SAAS,KAAKjpD,IAAI,CAAJA,SAAlB,UAAkBA,CAAlB;AAA3F,GAAmB,CAAf,CAAJ,QAAgJ,gBAAI;AAAA,WAAIA,IAAI,KAAR;AAAjK,GAAa,CAAb;AACAmqC,MAAI,CAAJA,KAAUnqC,IAAI,CAAJA,SAAVmqC,UAAUnqC,CAAVmqC;AAEA,MAAI58B,OAAO,GAAG3M,4DAAd,IAAcA,CAAd;AAEA2M,SAAO,GAAG,OAAO,CAAP,IAAY,yBAAmB;AACvC,WAAO;AACLyF,WAAK,EADA;AAELvT,WAAK,EAAEge;AAFF,KAAP;AADFlQ,GAAU,CAAVA;AAOA4E,uEAAc,CAAC;AAAE0vC,SAAK,EAAP;AAASnhD,WAAO,EAAhB;AAAkB6M,WAAO,EAAPA;AAAlB,GAAD,EAA8B0E,QAAQ,CAAtC,SAAdE,MAAc,CAAdA;AAEAE,YAAU,CAAC,YAAM;AACf,QAAM62C,KAAK,GAAGh5C,QAAQ,CAARA,iCAAd,CAAcA,CAAd;AACMg5C,SAAK,CAALA;AAFE,KAAV72C,IAAU,CAAVA;AAKA,MAAMgL,KAAK,GAAG;AAAE4B,UAAM,EAAEjf,IAAI,CAAd;AAAmBwd,YAAQ,EAAExd,IAAI,CAAjC;AAAwCsN,YAAQ,EAAEtN,IAAI,CAAJA,SAAlD,UAAkDA,CAAlD;AAA6EsiB,gBAAY,EAAE/gB,MAAM,CAAjG;AAAgHqd,eAAW,EAAE9L,UAAU,CAAVA,QAA7H;AAAwJ8T,UAAM,EAAE1I,MAAM,CAAC0I;AAAvK,GAAd;;AAEA,MAAMzW,QAAQ,GAAG,SAAXA,QAAW,kCAAqC;AAElD,QAAMg5C,UAAU,GAAI9rC,KAAK,CAALA,iCAApB;AAEA,QAAMkqC,UAAU,GAAGlqC,KAAK,CAALA,yEAAnB;AAIA,QAAMzO,QAAQ,GAAGyO,KAAK,CAALA,sBAAjB;AAEAnN,YAAQ,CAARA;AAEAA,YAAQ,CAARA,wCAAiD,iBAAS;AACtD,UAAGg5C,KAAK,CAALA,cAAoB7rC,KAAK,CAA5B,QAAqC;AACjCA,aAAK,CAALA,UACM6rC,KAAK,CAALA,4BADN7rC,cACM6rC,CADN7rC,GAEM6rC,KAAK,CAALA,4BAFN7rC,YAEM6rC,CAFN7rC;AAGH;;AACD,UAAG6rC,KAAK,CAALA,cAAoB7rC,KAAK,CAA5B,UAAuC;AACnC6rC,aAAK,CAALA;AACH;AARLh5C;AAWAm1B,mFAAqB,CAACn1B,QAAQ,CAARA,cAAD,yBAACA,CAAD,SAArBm1B,gBAAqB,CAArBA;AAvBJ;;AA0BAn1B,UAAQ,CAARA,4CAAqD,kBAAU;AAC3DuN,UAAM,CAANA,0BAAiC,aAAK;AACpCiV,OAAC,CAADA;AACA,UAAM02B,MAAM,GAAG12B,CAAC,CAAhB;AACA,UAAMjV,MAAM,GAAG2rC,MAAM,CAArB;;AACA,UAAG97C,QAAQ,KAAKtN,IAAI,CAAJA,SAAhB,SAAuC;AACnCkQ,gBAAQ,CAARA;AADJ,aAEO;AACHA,gBAAQ,CAARA;AACH;;AACDmN,WAAK,CAALA;AACAA,WAAK,CAALA;AACAA,WAAK,CAALA;AACAunB,4EAAY,2BAAZA,MAAY,CAAZA;AAZFnnB;AADJvN;AArGG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVP;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEO,IAAM04C,WAAW,GAAG,SAAdA,WAAc,mBAAsB;AAAA,wBAEMl8C,yDAFN;AAAA,MAErCoG,UAFqC;AAAA,MAEzBnR,UAFyB;AAAA,MAEbJ,MAFa;AAAA,MAEL2c,MAFK;;AAI7C,MAAMle,IAAI,GAAG2B,UAAU,CAAvB;AAEA;AAEAknD,aAAW,GAAXA;;AAEA,UAAOv7C,QAAQ,CAAf;AACI;AACI0d,oBAAc,GAAGhrB,IAAI,CAArBgrB;AACAxN,cAAQ,GAAGA,QAAQ,iBAAUlQ,QAAQ,CAArCkQ,OAAmB,CAAnBA;AACAqrC,iBAAW,GAAXA;AACA;;AACJ;AACI79B,oBAAc,GAAGhrB,IAAI,CAArBgrB;AACAxN,cAAQ,GAAGA,QAAQ,aAAMlQ,QAAQ,CAAd,OAAnBkQ,MAAmB,CAAnBA;AACAqrC,iBAAW,GAAXA;AACA;;AACJ;AACI79B,oBAAc,GAAGhrB,IAAI,CAArBgrB;AACAxN,cAAQ,GAAGA,QAAQ,GAAnBA;AACAqrC,iBAAW,GAAXA;AACA;;AACJ;AACI79B,oBAAc,GAAdA;AACAxN,cAAQ,GAAGxd,IAAI,CAAfwd;AACAqrC,iBAAW,GAAXA;AACA;AApBR;;AAuBA,MAAMx7C,IAAI,GAAG9L,MAAM,CAANA,iDAAb;AAEA,MAAM2Q,MAAM,GAAGm9B,kFAAsB,aAAa;AAAErkB,kBAAc,EAAhB;AAAkBxN,YAAQ,EAA1B;AAA4BlQ,YAAQ,EAApC;AAAmDD,QAAI,EAAvD;AAAyDrJ,QAAI,EAAE;AAA/D,GAAb,CAArC;AAEA,MAAMiO,QAAQ,GAAG/B,QAAQ,CAARA,cAAjB,UAAiBA,CAAjB;AACM+B,UAAQ,CAARA,YAAqB1Q,MAAM,CAANA,6GAArB0Q;AAENE,uEAAc,KAAMF,QAAQ,CAAd,SAAdE,MAAc,CAAdA;AAEA,MAAMk3C,QAAQ,GAAGn5C,QAAQ,CAARA,cAAjB,eAAiBA,CAAjB;AACA,MAAMo5C,OAAO,GAAGp5C,QAAQ,CAARA,cAAhB,cAAgBA,CAAhB;;AAEA,UAAO5C,QAAQ,CAAf;AACI;AACI+7C,cAAQ,CAARA;AACAC,aAAO,CAAPA,0BAA2Bh8C,QAAQ,CAAnCg8C;AACA;;AACJ;AACID,cAAQ,CAARA;AACAC,aAAO,CAAPA,sBAAuB1oD,+DAAsB0M,QAAQ,CAArDg8C,KAAuB1oD,CAAvB0oD;AACA;;AACJ;AACID,cAAQ,CAARA;AACAC,aAAO,CAAPA;AACA;;AACJ;AACID,cAAQ,CAARA;AACAC,aAAO,CAAPA;AACA;AAhBR;;AAmBA,MAAMlC,UAAU,GAAhB;AAEA,MAAMmC,SAAS,GAAGr5C,QAAQ,CAARA,cAAlB,kBAAkBA,CAAlB;;AAEA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,0BAA6B;AAC1Ci3C,cAAU,CAAVA;AACAA,cAAU,CAAVA;AAFJ;;AAKA,MAAMoC,iBAAiB,GAAG,SAApBA,iBAAoB,IAAK;AAC3B92B,KAAC,CAADA;AACA,QAAM/hB,KAAK,GAAGT,QAAQ,CAARA,cAAd,eAAcA,CAAd;AACA,QAAG,CAAH,OAAW;AACX,QAAMuN,MAAM,GAAG9M,KAAK,CAApB;AACA,QAAM0M,KAAK,GAAG;AACV4B,YAAM,EAAEjf,IAAI,CADF;AACOsN,cAAQ,EADf;AACiBmQ,YAAM,EADvB;AACyBkoB,YAAM,EAAEjT,CAAC,CADlC;AAEV9T,iBAAW,EAAE9L,UAAU,CAAVA,QAFH;AAE8B8T,YAAM,EAAE1I,MAAM,CAF5C;AAGVjb,WAAK,EAAEjD,IAAI,CAHD;AAGmBkf,kBAAY,EAH/B;AAIV3R,aAAO,EAAE,CAACD,QAAQ,CAAT;AAJC,KAAd;AAMAs3B,0EAAY,0BAAZA,MAAY,CAAZA;AACA,mBAAc2kB,SAAS,CAATA;AACdr5C,YAAQ,CAARA;AACA,iBAAYo5C,OAAO,CAAPA,YAAoBh8C,QAAQ,CAARA,yBAAkCtN,IAAI,CAAtCsN,iBAAwDtN,IAAI,CAAhFspD;AAdhB;;AAiBA,MAAMG,sBAAsB,GAAG,SAAzBA,sBAAyB,IAAK;AAChC,QAAM94C,KAAK,GAAGT,QAAQ,CAARA,cAAd,eAAcA,CAAd;AACA,QAAG,UAAUS,KAAK,CAALA,UAAb,IAAiC;AACjC,QAAM8M,MAAM,GAAG9M,KAAK,CAApB;AACA,QAAM0M,KAAK,GAAG;AACV4B,YAAM,EAAEjf,IAAI,CADF;AACOsN,cAAQ,EADf;AACiBmQ,YAAM,EAAEvN,QAAQ,CAARA,+BADzB;AACwEy1B,YAAM,EAAEjT,CAAC,CADjF;AAEV9T,iBAAW,EAAE9L,UAAU,CAAVA,QAFH;AAE8B8T,YAAM,EAAE1I,MAAM,CAF5C;AAGVjb,WAAK,EAAEjD,IAAI,CAHD;AAGmBkf,kBAAY,EAH/B;AAIV3R,aAAO,EAAE,CAACD,QAAQ,CAAT;AAJC,KAAd;AAMAs3B,0EAAY,0BAAZA,MAAY,CAAZA;AACA10B,YAAQ,CAARA;AACAA,YAAQ,CAARA;AAZJ;;AAeA,MAAG3O,MAAM,CAAT,iBAA2B;AACvBgoD,aAAS,CAATA,6CAAuD;AAAE7iB,UAAI,EAAE;AAAR,KAAvD6iB;AADJ,SAEO;AACHr5C,YAAQ,CAARA;AACH;;AAED,MAAG3O,MAAM,CAAT,gBAA0BuqC,cAAc,OAAxC,MAAwC,CAAdA,CAA1B,KACKC,eAAe,eAAfA,QAAe,CAAfA;AAEL77B,UAAQ,CAARA,mEAA4E,aAAK;AAC7EoB,UAAM,CAANA,aAAoB81C,UAAU,CAA9B91C;AACAi0B,uEAAS,CAAC6hB,UAAU,CAApB7hB,KAAS,CAATA;AAFJr1B,KAGG;AAAEw2B,QAAI,EAAE;AAAR,GAHHx2B;;AAKA,MAAG3O,MAAM,CAAT,gBAA0B;AAEtB;AACA,QAAM0rC,WAAW,GAAG/8B,QAAQ,CAARA,cAApB,uBAAoBA,CAApB;AACM+8B,eAAW,CAAXA;AACN,QAAMC,UAAU,GAAGh9B,QAAQ,CAARA,cAAnB,yBAAmBA,CAAnB;AACMg9B,cAAU,CAAVA;AACT;AA9HE;;AAiIP,IAAMpB,cAAc,GAAG,SAAjBA,cAAiB,eAAkB;AAErC,MAAMpoC,MAAM,GAAGu/B,+EAAqB,eAAevB,8EAAf,CAApC;AAEA,MAAMxvB,MAAM,GAAGhC,QAAQ,CAARA,cAAf,gCAAeA,CAAf;AAEAwzB,6EAAW,CAAC;AAAEniC,UAAM,EAAR;AAAUmC,UAAM,EAAhB;AAAkBwO,UAAM,EAANA;AAAlB,GAAD,CAAXwxB;AANJ;;AASA,IAAMqI,eAAe,GAAG,SAAlBA,eAAkB,yBAA4B;AAEhD,MAAItuB,MAAM,GAAGnQ,QAAQ,CAACA,QAAQ,CAA9B,KAAqB,CAArB;AAEA;;AAEA,UAAOA,QAAQ,CAAf;AACI;AACI68B,UAAI,GAAGnqC,IAAI,CAAJA,eAAPmqC,WAAOnqC,EAAPmqC;AACA1sB,YAAM,GAAGnQ,QAAQ,CAAjBmQ;AACA;;AACJ;AACI0sB,UAAI,GAAGnqC,IAAI,CAAJA,eAAPmqC,WAAOnqC,EAAPmqC;AACA;;AACJ;AACIA,UAAI,GAAGnqC,IAAI,CAAJA,iBAAPmqC,WAAOnqC,EAAPmqC;AACA;;AACJ;AACA;AACIA,UAAI,GAAGnqC,IAAI,CAAJA,KAAPmqC,WAAOnqC,EAAPmqC;AACA1sB,YAAM,GAAGnQ,QAAQ,CAAjBmQ;AACA;AAfR;;AAkBA,MAAIisC,YAAY,GAAhB;AAEA9oD,8DAAmB+jC,KAAK,CAALA,KAAnB/jC,IAAmB+jC,CAAnB/jC,UAA8C,yBAAmB;AAC7D,QAAG+oD,MAAM,KAAT,KAAmBA,MAAM,GAANA;AACnBD,gBAAY,sEAAZA,SAAY,CAAZA;AAFJ9oD;AAKAsP,UAAQ,CAARA;AAEA,MAAMS,KAAK,GAAGT,QAAQ,CAARA,cAAd,eAAcA,CAAd;AAEA,MAAM05C,OAAO,GAAb;;AAEA,MAAMC,YAAY,GAAG,SAAfA,YAAe,SAAU;AAC3B,QAAIpqD,KAAK,GAAGyQ,QAAQ,CAARA,+BAAZ;AACA,QAAI45C,YAAY,GAAGnlB,KAAK,CAALA,KAAWz0B,QAAQ,CAARA,iBAA9B,eAA8BA,CAAXy0B,CAAnB;AACA,QAAIolB,aAAa,GAAGplB,KAAK,CAALA,KAApB,KAAoBA,CAApB;AACA,QAAIqlB,WAAW,GAAG,YAAY,CAAZ,KAAkB,iBAAK;AAAA,aAAId,KAAK,CAALA,qBAA2Ba,aAAa,CAACA,aAAa,CAAbA,SAAdA,CAAa,CAAbA,CAA/B,IAA+BA,EAA/B;AAAzC,KAAkB,CAAlB;AACA,QAAIE,UAAU,GAAGN,MAAM,IAAvB;;AACA,QAAGlqD,KAAK,CAALA,SAAH,GAAoB;AAChB,UAAIyqD,YAAY,GAAGzqD,KAAK,CAALA,YAAkBwqD,UAAU,CAA/C,SAAmBxqD,CAAnB;AACA,UAAI0qD,QAAQ,GAAZ;;AACA,UAAIP,QAAO,GAAGjlB,KAAK,CAALA,KAAd,KAAcA,CAAd;;AACAilB,cAAO,CAAPA;;AACAA,cAAO,CAAPA,QAAgB,kBAAM;AAAA,eAAIO,QAAQ,IAAZ;AAAtBP;;AACAj5C,WAAK,CAALA;AACH;;AACD,QAAIy5C,aAAa,GAAGzlB,KAAK,CAALA,KAAWz0B,QAAQ,CAARA,iBAA/B,UAA+BA,CAAXy0B,CAApB;AACIylB,iBAAa,CAAbA,QAAsB,aAAC;AAAA,aAAIrO,CAAC,CAADA,iBAAJ,SAAIA,CAAJ;AAAvBqO;AACAA,iBAAa,CAAbA,QAAsB,aAAC;AAAA,aAAIrO,CAAC,CAADA,cAAJ,QAAIA,CAAJ;AAAvBqO;;AACJ,oBAAe;AACbH,gBAAU,CAAVA;AACAL,aAAO,CAAPA,QAAgB,aAAK;AACjB,YAAGxiD,CAAC,CAADA,OAAS6iD,UAAU,CAAtB,IAA2B;AACvB,cAAMI,WAAW,GAAGT,OAAO,CAAPA,QAApB,CAAoBA,CAApB;AACA,cAAGS,WAAW,GAAG,CAAjB,GACIT,OAAO,CAAPA;AACP;AALLA;AAOD;AA1BL;;AA6BA,MAAMU,MAAM,GAAGp6C,QAAQ,CAARA,iBAAf,QAAeA,CAAf;AAEAo6C,QAAM,CAANA,QAAe,iBAAS;AACpBpB,SAAK,CAALA,0BAAgC,aAAK;AACnCx2B,OAAC,CAADA;AACA,UAAMi3B,MAAM,GAAGj3B,CAAC,CAAhB;;AACA,UAAGi3B,MAAM,CAANA,mBAAH,QAAGA,CAAH,EAAwC;AACpCE,oBAAY,CAAZA,MAAY,CAAZA;AADJ,aAEO;AACHF,cAAM,CAANA;AACAC,eAAO,CAAPA;AACA,YAAGD,MAAM,CAANA,cAAH,UACIh5C,KAAK,CAALA,SADJ,GACIA,CADJ,KAGIA,KAAK,CAALA,SAAeg5C,MAAM,CAArBh5C;AACP;;AACD,UAAGA,KAAK,CAALA,UAAgB8M,MAAM,CAAzB,WAAmBA,EAAnB,EAAyC;AACrC6sC,cAAM,CAANA,QAAe,iBAAK;AAAA,iBAAIpB,KAAK,CAALA,cAAJ,SAAIA,CAAJ;AAApBoB;AACH;AAfHpB;AADJoB;AAoBAp6C,UAAQ,CAARA,6DAAsE,aAAK;AACzEwiB,KAAC,CAADA;AACAm3B,gBAAY;AAFd35C;AAKA,MAAMq6C,WAAW,GAAGr6C,QAAQ,CAARA,cAApB,qBAAoBA,CAApB;AACMq6C,aAAW,CAAXA,0BAAsC,aAAI;AACxC73B,KAAC,CAADA;AACA,QAAMrB,QAAQ,GAAG1gB,KAAK,CAALA,aAAjB,UAAiBA,CAAjB;;AACA,kBAAa;AACT45C,iBAAW,CAAXA;AACA55C,WAAK,CAALA;AACAA,WAAK,CAALA;AAHJ,WAIO;AACH45C,iBAAW,CAAXA;AACA55C,WAAK,CAALA;AACH;AAVH45C;AAaNl4C,YAAU,CAAC,YAAM;AACfk4C,eAAW,CAAXA;AADQ,KAAVl4C,GAAU,CAAVA;;AAIA,MAAMm4C,UAAU,sBAAhB,MAAgB,CAAhB;;AACA,MAAMC,OAAO,GAAb;AACA;AAEA95C,OAAK,CAALA,0BAAgC,aAAK;AACjC+hB,KAAC,CAADA;AACA,QAAG,CAACA,CAAC,CAAL,MAAY;AACZ,QAAItuB,KAAK,GAAGsuB,CAAC,CAADA,KAAZ,WAAYA,EAAZ;AACAtuB,SAAK,GAAGA,KAAK,KAALA,iBAARA;AACAqmD,WAAO,CAAPA;AACAC,iBAAa,GAAG,UAAU,CAAV,KAAgB,iBAAK;AAAA,aAAIxB,KAAK,CAALA,cAAJ;AAArCwB,KAAgB,CAAhBA;AACA,uBAAkBA,aAAa,CAAbA;;AAClB,QAAG/5C,KAAK,CAALA,UAAgB8M,MAAM,CAAzB,WAAmBA,EAAnB,EAAyC;AACrC+sC,gBAAU,CAAVA,QAAmB,iBAAK;AAAA,eAAItB,KAAK,CAALA,cAAJ,SAAIA,CAAJ;AAAxBsB;AACH;AAVL75C;AAaAA,OAAK,CAALA,0BAAgC,aAAK;AACjC+hB,KAAC,CAADA;;AACA,QAAGA,CAAC,CAADA,YAAH,GAAoB;AAAE;AACpB,UAAMtuB,KAAK,GAAGqmD,OAAO,CAArB,GAAcA,EAAd;AACAC,mBAAa,GAAG,UAAU,CAAV,KAAgB,iBAAK;AAAA,eAAIxB,KAAK,CAALA,cAAJ;AAArCwB,OAAgB,CAAhBA;AACA,yBAAkBA,aAAa,CAAbA;AACnB;AANL/5C;AAhIJ,E;;;;;;;;;;;;;;;;;;;;;ACrJA;AACA;AACA;AAEO,IAAMsP,QAAQ,GAAG,SAAXA,QAAW,SAAU;AAAA,wBAE0CvT,yDAF1C;AAAA,MAEtBqG,OAFsB;AAAA,MAEbD,UAFa;AAAA,MAEDvR,MAFC;AAAA,MAEOgd,MAFP;AAAA,MAEe5c,UAFf;AAAA,MAE2B4a,UAF3B;;AAI9B,MAAMkgC,IAAI,GAAG;AAAEv+B,UAAM,EAAR;AAAUnL,WAAO,EAAjB;AAAmBD,cAAU,EAA7B;AAA+BvR,UAAM,EAArC;AAAuCgd,UAAM,EAA7C;AAA+C5c,cAAU,EAAzD;AAA2D4a,cAAU,EAAVA;AAA3D,GAAb;;AAEA,MAAGouC,4EAAwB5tC,4EAAxB4tC,EAAH,IAAGA,CAAH,EAA4D;AACxDA,kFAA0B5tC,4EAA1B4tC,EAAoD;AAAEzsC,YAAM,EAANA;AAAF,KAApDysC;AACH;AARE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJP;AACA;AACA;AAEO,IAAMx2C,UAAU,GAAG,SAAbA,UAAa,UAAW;AAEnC,MAAMiX,IAAI,GAAG,SAAPA,IAAO,GAAM;AAAA,0BAEsD1e,yDAFtD;AAAA,QAETwR,MAFS;AAAA,QAEDpL,UAFC;AAAA,QAEWvR,MAFX;AAAA,QAEmBgd,MAFnB;AAAA,QAE2B5c,UAF3B;AAAA,QAEuC4a,UAFvC;;AAIjB,QAAMkgC,IAAI,GAAG;AAAEv+B,YAAM,EAAR;AAAUnL,aAAO,EAAjB;AAAmBD,gBAAU,EAA7B;AAA+BvR,YAAM,EAArC;AAAuCgd,YAAM,EAA7C;AAA+C5c,gBAAU,EAAzD;AAA2D4a,gBAAU,EAAVA;AAA3D,KAAb;AAEA,QAAMqF,UAAU,GAAG+oC,4EAAwB5tC,8EAAxB4tC,EAAnB,IAAmBA,CAAnB;;AAEA,oBAAe;AACb,UAAGhpD,UAAU,CAAb,UAAwB;AACtB,YAAMwS,WAAU,mCAAQrB,UAAU,CAAVA,QAAmBC,OAAO,CAAlC,KAAQD,CAAR;AAA2Cob,qBAAW,EAAEvsB,UAAU,CAAVA,WAAsBA,UAAU,CAAVA,SAAtBA,OAAiDA,UAAU,CAAVA,SAAoB4J;AAA7H,UAAhB;;AACAo/C,sFAA0B5tC,8EAA1B4tC,EAAsD;AAAEzsC,gBAAM,EAAR;AAAsB3c,gBAAM,EAANA;AAAtB,SAAtDopD;AACD;AACF;AAbH;;AAgBAv/B,MAAI;AAlBC,E;;;;;;;;;;;;;;;;;;;;;;;;ACJP;AAEA;AACA;AACA;AACA;AACA;AAGO,IAAMpX,UAAU,GAAG,SAAbA,UAAa,UAAW;AAAA,wBAE0BtH,yDAF1B;AAAA,MAEzBwR,MAFyB;AAAA,MAEjB3c,MAFiB;AAAA,MAETgd,MAFS;AAAA,MAED5c,UAFC;AAAA,MAEW4a,UAFX;;AAIjC,MAAMkgC,IAAI,GAAG;AAAEv+B,UAAM,EAAR;AAAUnL,WAAO,EAAjB;AAAmBxR,UAAM,EAAzB;AAA2Bgd,UAAM,EAAjC;AAAmC5c,cAAU,EAA7C;AAA+C4a,cAAU,EAAVA;AAA/C,GAAb;;AAEA,MAAGouC,4EAAwB5tC,8EAAxB4tC,EAAH,IAAGA,CAAH,EAA8D;AAE1D,QAAMC,MAAM,GAAGrpD,MAAM,CAANA,iBAAwBI,UAAU,CAAlCJ,qBAAwDI,UAAU,CAAjF;AACA,QAAMmR,UAAU,GAAG6J,8CAAK,CAAC,6EAAiB,gBAAI;AAAA,aAAIkuC,IAAI,CAAJA,iBAAsBA,IAAI,CAAJA,aAAkBtpD,MAAM,CAAlD;AAA9C,KAAyB,CAAD,CAAxB;AAEAk7C,QAAI,CAAJA;;AAEA,QAAGkO,4EAAwB5tC,6EAAxB4tC,EAAH,IAAGA,CAAH,EAA6D;AAEzD;AAEA,UAAMG,SAAS,GAAG,iHAAmDnuC,8CAAK,CAAxD,UAAwD,CAAxD,EAAsEA,8CAAK,CAA3E,MAA2E,CAA3E,OAA0F,iBAAS;AACjH,YAAG,CAAH,OAAW;AACX,eAAO;AAAE7J,oBAAU,EAAEvT,KAAK,CAAnB;AAAuCoC,oBAAU,EAAEpC,KAAK,CAAxD;AAA4Egf,gBAAM,EAAEhf,KAAK,CAAC0vB;AAA1F,SAAP;AAFJ,OAAkB,CAAlB;AAKA,UAAG67B,SAAS,KAAZ,MAAuB;AAEvBH,oFAA0B5tC,8EAA1B4tC,EAAsD;AAAEppD,cAAM,EAAR;AAAUupD,iBAAS,EAATA;AAAV,OAAtDH;AACH;AACJ;AA1BE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTP;AACA;AACA;AACA;;AAEA,IAAM/oC,UAAU,GAAG,SAAbA,UAAa,aAAgB;AAAA,MAEvB1D,MAFuB,GAEiDu+B,IAFjD;AAAA,MAEf1pC,OAFe,GAEiD0pC,IAFjD;AAAA,MAEN3pC,UAFM,GAEiD2pC,IAFjD;AAAA,MAEMl7C,MAFN,GAEiDk7C,IAFjD;AAAA,MAEcl+B,MAFd,GAEiDk+B,IAFjD;AAAA,MAEsB96C,UAFtB,GAEiD86C,IAFjD;AAAA,MAEkClgC,UAFlC,GAEiDkgC,IAFjD;AAI/B,MAAIsO,QAAQ,GAAZ;;AAEA,MAAGxuC,UAAU,KAAVA,aAA4B,CAAC,CAAD,cAAgBA,UAAU,CAAVA,SAAoBQ,4FAAnE,EAA6G;AAE3G;AAEA;AACI,WAAKA,4EAAL;AACIguC,gBAAQ,GAAG7sC,MAAM,IAAI,CAACA,MAAM,CAA5B6sC;AACA;;AACJ,WAAKhuC,8EAAL;AACI,YAAGhK,OAAO,CAAV,gBAA2B;AACvBg4C,kBAAQ,GAARA;AADJ,eAEO;AACHA,kBAAQ,GAAGj4C,UAAU,IAAIA,UAAU,CAAnCi4C;AACAA,kBAAQ,GAAGA,QAAQ,IAAIj4C,UAAU,CAAVA,QAAmBC,OAAO,CAA1BD,WAAvBi4C;AACH;;AACD;;AACJ,WAAKhuC,8EAAL;AACIguC,gBAAQ,GAASxpD,MAAM,CAANA,qBAA4B,CAACwR,OAAO,CAArC,cAACxR,IAAqD;AACrDA,cAAM,CAANA,qBAA4BA,MAAM,CAANA,kBAAyBI,UAAU,CAFpF,EACIopD,CADJ,CAE0F;;AACtF;;AACJ,WAAKhuC,6EAAL;AACIguC,gBAAQ,GAAGh4C,OAAO,CAAPA,eAAuBwL,MAAM,CAA7BxL,eAA6CpR,UAAU,CAAvDoR,SAAiEpR,UAAU,CAAVA,eAA5EopD;AACA;AAlBR;AAoBD;;AAED;AAhCJ;;AAmCA,IAAMC,YAAY,GAAG,SAAfA,YAAe,aAAgB;AAAA,MAEzB9sC,MAFyB,GAEKu+B,IAFL;AAAA,MAEjBl7C,MAFiB,GAEKk7C,IAFL;AAAA,MAETqO,SAFS,GAEKrO,IAFL;;AAIjC;AACI,SAAK1/B,4EAAL;AACIhQ,uFAAsBmR,MAAM,CAA5BnR;AACA;;AACJ,SAAKgQ,8EAAL;AACIhQ;AACAoG;AACA,qJAAqD,kBAAU;AAC7D4jB,cAAM,CAANA,iCAAwC;AACpC1D,qBAAW,EAAEtW,0FAAsCkuC;AADf,SAAxCl0B;AADF;AAKA;;AACJ,SAAKha,8EAAL;AAEI;AACE,UAAMmuC,YAAY;AAAA,2EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AACbt8C,0BADa,gBACbA;AACN7B;;AAFmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;;AAAA,wBAAZm+C,YAAY;AAAA;AAAA;AAAlB,OAAkB,EAAlB;;AAKAA,kBARN,IASI;AACA;AACA;;AACA;AAzBR;AAJJ;;AAiCO,IAAMP,YAAY,GAAG;AACxB/oC,YAAU,EADc;AAExBopC,cAAY,EAAZA;AAFwB,CAArB,C;;;;;;;;;;;;;;;;;;ACzEA,IAAM/c,eAAe,GAAG,SAAlBA,eAAkB,yBAA4B;AACvD,gBAAa;AACTqE,YAAQ,CAARA,0BAAmC,iBAAS;AACxCpiC,cAAQ,CAARA,+DAAiElQ,IAAI,CAArEkQ;AACA,UAAM9L,KAAK,GAAG8L,QAAQ,CAARA,0CAAd;AACA,UAAMi7C,KAAK,GAAX;AAeA,UAAMtkD,IAAI,0DAAV,0GAAU,CAAV;AAEAqJ,cAAQ,CAARA,oDAA6D3O,MAAM,CAANA,iGACevB,IAAI,CADnBuB,iJAEevB,IAAI,CAFnBuB,0BAEkC+wC,QAAQ,CAARA,8BAFlC/wC,KAA7D2O,cAA6D3O,CAA7D2O;AAIAA,cAAQ,CAARA;AAxBJoiC;AA0BH;AA5BE,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;AACA;AAEA,IAAI8Y,IAAI,GAAR;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY,qBAAwB;AACtC,MAAI7tC,QAAQ,GAAZ;;AACA,MAAGjS,IAAI,CAAJA,eAAH,GAA0B;AACtB,QAAI+/C,KAAK,GAAG//C,IAAI,CAAJA,MAAZ,GAAYA,CAAZ;AACAiS,YAAQ,GAAG8tC,KAAK,CAALA,CAAK,CAALA,SAAiBA,KAAK,CAAjC9tC,CAAiC,CAAjCA;;AACA,QAAGA,QAAQ,CAARA,2BAAoC,CAAvC,GAA2C;AACvCA,cAAQ,IAAI,MAAM8tC,KAAK,CAAvB9tC,CAAuB,CAAvBA;AACH;AACJ;;AACD,SAAO4tC,IAAI,GAAGG,MAAM,CAApB,QAAoB,CAApB;AATJ;;SAYeC,S;;;;;uEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEOjgD,IAAI,KAFX;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAMUnJ,eANV,GAMgBipD,SAAS,aAAazqD,0DAAb,CAAfwB;AACAb,kBAPV,GAOmB;AACXkqD,oBAAM,EAAE;AADG,aAATlqD;AAPV;AAAA;AAAA,mBAY+BsI,KAAK,MAZpC,MAYoC,CAZpC;;AAAA;AAYc+E,oBAZd,gBAYcA;AAZd;AAAA,mBAa2BA,QAAQ,CAbnC,IAa2BA,EAb3B;;AAAA;AAac/I,gBAbd,gBAacA;AAbd,6CAce6kB,8CAAO,CAdtB,IAcsB,CAdtB;;AAAA;AAAA;AAAA;AAgBcghC,wBAhBd,GAgB6B,YAAY,2BAAqB;AAClD3pD,qBAAO,CAAPA,cAAO,CAAPA;AAjBZ,aAgB6B,CAAf2pD;AAhBd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAqBC;;AAED,IAAMC,UAAU,GAAG,SAAbA,UAAa,MAAO;AACtB,MAAIC,OAAO,GAAX;AACAA,SAAO,GAAGA,OAAO,CAAPA,4BAAVA,EAAUA,CAAVA;AACAA,SAAO,GAAGA,OAAO,CAAPA,cAAVA,GAAUA,CAAVA;AACAA,SAAO,GAAGA,OAAO,CAAPA,cAAVA,EAAUA,CAAVA;AACAA,SAAO,GAAGA,OAAO,CAAPA,cAAVA,GAAUA,CAAVA;AACAA,SAAO,GAAGA,OAAO,CAAPA,cAAVA,GAAUA,CAAVA;AACA;AAPJ;;AAUA,IAAMtZ,QAAQ,GAAG,SAAXA,QAAW,QAAS;AACtB,MAAMzhC,GAAG,GAAG86C,UAAU,CAAVA,KAAU,CAAVA,uBAAZ,cAAYA,CAAZ;AACA;AAFJ;;AAKA,IAAME,UAAU,GAAG,SAAbA,UAAa,QAAW;AAE1B,MAAMC,UAAU,GAAG,aAAnB,OAAmB,CAAnB;;AAEA,MAAGjjD,8CAAQ,CAACzE,KAAK,CAAN,CAAM,CAAN,EAAX,UAAW,CAAX,EAAmC;AAC/B,4DAA+CunD,UAAU,CAACvnD,KAAK,CAA/D,CAA+D,CAAN,CAAzD;AACH;;AAED,MAAG,CAAH,OAAW;AACX,MAAI+gC,IAAI,GAAR;;AACA,MAAG/gC,KAAK,CAALA,WAAH,GAAuB;AACnB+gC,QAAI,IAAImN,QAAQ,CAACluC,KAAK,CAAtB+gC,CAAsB,CAAN,CAAhBA;AACH;;AACD,MAAG/gC,KAAK,CAAR,CAAQ,CAAR,EAAa+gC,IAAI,qDAA4CwmB,UAAU,CAACvnD,KAAK,CAA5D,CAA4D,CAAN,CAAtD,EAAJ+gC,QAAI,CAAJA;AACb,MAAG/gC,KAAK,CAAR,CAAQ,CAAR,EACI,IAAGA,KAAK,CAALA,CAAK,CAALA,sBAA6B,CAAhC,GAAoC+gC,IAAI,IAAImN,QAAQ,CAACluC,KAAK,CAA1D,CAA0D,CAAN,CAAhB+gC,CAApC,KACKA,IAAI,qDAA4CwmB,UAAU,CAACvnD,KAAK,CAA5D,CAA4D,CAAN,CAAtD,EAAJ+gC,QAAI,CAAJA;AACT,MAAG/gC,KAAK,CAAR,CAAQ,CAAR,EACI,IAAGA,KAAK,CAALA,CAAK,CAALA,sBAA6B,CAAhC,GACA+gC,IAAI,IAAImN,QAAQ,CAACluC,KAAK,CADtB,CACsB,CAAN,CAAhB+gC,CADA,KAEKA,IAAI,qDAA4CwmB,UAAU,CAACvnD,KAAK,CAA5D,CAA4D,CAAN,CAAtD,EAAJ+gC,QAAI,CAAJA;AACT;AArBJ;;SAwBe+I,U;;;;;wEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACU1wB,oBADV,GACqBxd,IAAI,CADzB,IACUwd;AACAuuC,0BAFV,GAE2B,IAAI,CAAJ,QAAa,IAAI,CAAJ,aAAkB,gBAAI;AAAA,qBAAIxgD,IAAI,CAAJA,aAAJ;AAAtB,oBAA2D,gBAAI;AAAA,qBAAIA,IAAI,CAAR;AAA5E,aAAa,CAAb,GAF3B,IAEUwgD;AACAC,sBAHV,GAGuBD,cAAc,GAAGA,cAAc,CAAjB,iBAAoC,IAAI,CAAJ,cAC3C,IAAI,CAAJ,mBAAwB,gBAAI;AAAA,qBAAI/nD,IAAI,CAAJA,aAAJ;AAA5B,kBAD2C,aAHzE,QAGUgoD;AAGNZ,gBAAI,+BAAJA,mFAAI,CAAJA;AACMU,sBAPV,GAOuB,6CAPvB,qBAOuB,CAAbA;;AACN,gBAAGjjD,8CAAQ,CAAC7I,IAAI,CAAL,MAAX,UAAW,CAAX,EAAoC;AAChCorD,kBAAI,+BAAJA,qGAAI,CAAJA;AACH;;AACDxd,oBAAQ,CAARA;AAXJ;AAAA,mBAawB4d,SAAS,CAbjC,UAaiC,CAbjC;;AAAA;AAaUpnD,iBAbV,iBAaUA;;AAbV,kBAeOA,KAAK,IAAIA,KAAK,CAfrB,CAeqB,CAfrB;AAAA;AAAA;AAAA;;AAgBQwpC,oBAAQ,CAARA,YAAqBie,UAAU,CAACznD,KAAK,CAALA,MAAhCwpC,CAAgCxpC,CAAD,CAA/BwpC;AAhBR;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAmBciU,iBAnBd,GAmBsBrkC,QAAQ,CAARA,WAnBtB,CAmBsBA,CAARqkC;AAnBd;AAAA,mBAoBiC2J,SAAS,CApB1C,KAoB0C,CApB1C;;AAAA;AAoBcxjC,sBApBd,iBAoBcA;AACN,gBAAGA,UAAU,CAAVA,CAAU,CAAVA,KAAH,IACI4lB,QAAQ,CAARA,YAAqBie,UAAU,CAAC7jC,UAAU,CAAVA,MADpC,CACoCA,CAAD,CAA/B4lB,CADJ,KAEK,IAAIxsC,QAAQ,KAAZ,MAAuB;AACxB8sC,wBAAU,qBAAVA,IAAU,CAAVA;AACH;;AAzBT;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/EO,IAAMlC,WAAW,GAAG,SAAdA,WAAc,uBAA0B;AAEjD,MAAGhsC,IAAI,CAAJA,oCAAH,QAAiD;AAAA,QAI9BisD,UAJ8B;AAAA,yEAI7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEyBpiD,KAAK,CAF9B,QAE8B,CAF9B;;AAAA;AAEQ+E,wBAFR,gBAEQA;AAFR;AAAA,uBAIqBA,QAAQ,CAJ7B,IAIqBA,EAJrB;;AAAA;AAIQ/I,oBAJR,gBAIQA;AAJR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJ6C;;AAAA;AAAA;AAAA;AAAA;;AAE7C,QAAMqmD,QAAQ,kGAA2FlsD,IAAI,CAA/F,MAAd,MAAc,CAAd;;AAWA,QAAMmsD,UAAU,GAAG,SAAbA,UAAa,KAAM;AACrB,UAAM/pD,GAAG,4CAAT,iBAAS,CAAT;AACAqhB,cAAQ,GAAGguB,IAAI,CAAJA,cAAH,MAA4BA,IAAI,CAAJA,MAApChuB;;AACA,oBAAa;AACTguB,YAAI,CAAJA;AACAA,YAAI,CAAJA;AAFJ,aAGO;AACHA,YAAI,CAAJA;AACH;AARL;;AAWA,QAAM2a,QAAQ,GAAGpsD,IAAI,CAAJA,kBAAjB,CAAiBA,CAAjB;;AAEA,kBAAa;AACTmsD,gBAAU,CAAVA,QAAU,CAAVA;AADJ,WAEO;AACHF,gBAAU,CAAVA,QAAU,CAAVA,MAA0B,gBAAQ;AAC9B,YAAMI,SAAS,GAAGxmD,IAAI,CAAJA,WAAlB,CAAkBA,CAAlB;AACAsmD,kBAAU,CAACE,SAAS,CAApBF,EAAU,CAAVA;AAFJF;AAIH;AAjCL,SAkCO;AACHxa,QAAI,CAAJA;AACAvhC,YAAQ,CAARA;AACH;AAvCE,E;;;;;;;;;;;;;ACAP;AACA,kCAAkC,mBAAO,CAAC,+DAAmD;AAC7F;AACA;AACA,2CAA2C,yEAAyE,EAAE,wBAAwB,uEAAuE,8BAA8B,EAAE,wBAAwB,yEAAyE,EAAE,gCAAgC,kBAAkB,wBAAwB,4BAA4B,EAAE,0BAA0B,+CAA+C,EAAE,8CAA8C,4CAA4C,EAAE,mCAAmC,eAAe,iBAAiB,EAAE,yBAAyB,4BAA4B,gBAAgB,EAAE,wBAAwB,oBAAoB,6CAA6C,EAAE,0BAA0B,eAAe,EAAE,kBAAkB,gBAAgB,0BAA0B,EAAE,gBAAgB,wDAAwD,+DAA+D,sBAAsB,EAAE,mBAAmB,kBAAkB,wBAAwB,4BAA4B,EAAE,kCAAkC,oBAAoB,oBAAoB,EAAE,eAAe,gFAAgF,kCAAkC,mBAAmB,EAAE,iCAAiC,uBAAuB,uBAAuB,gDAAgD,mCAAmC,2BAA2B,6CAA6C,0BAA0B,yBAAyB,sBAAsB,oBAAoB,EAAE,uBAAuB,2BAA2B,EAAE,uCAAuC,sBAAsB,EAAE,uBAAuB,oBAAoB,EAAE,0BAA0B,mBAAmB,2BAA2B,EAAE,mBAAmB,gFAAgF,mCAAmC,EAAE,kBAAkB,qBAAqB,6CAA6C,6CAA6C,wDAAwD,4BAA4B,EAAE,2BAA2B,qFAAqF,EAAE,0BAA0B,cAAc,eAAe,EAAE,4CAA4C,iCAAiC,EAAE,4CAA4C,4BAA4B,uBAAuB,EAAE,4CAA4C,qBAAqB,EAAE,6CAA6C,mBAAmB,EAAE,4BAA4B,wDAAwD,kBAAkB,uCAAuC,gBAAgB,EAAE,6CAA6C,sBAAsB,EAAE,6CAA6C,sBAAsB,sCAAsC,EAAE,uCAAuC,sBAAsB,EAAE,8BAA8B,oBAAoB,8BAA8B,+BAA+B,EAAE,kBAAkB,oBAAoB,iCAAiC,yBAAyB,sBAAsB,EAAE,iBAAiB,uBAAuB,eAAe,gBAAgB,eAAe,iBAAiB,qBAAqB,2BAA2B,wBAAwB,kCAAkC,EAAE,0BAA0B,oBAAoB,gCAAgC,kBAAkB,gBAAgB,EAAE,8BAA8B,kCAAkC,EAAE,iDAAiD,wBAAwB,EAAE,6BAA6B,wBAAwB,EAAE,gCAAgC,2BAA2B,wBAAwB,sBAAsB,EAAE,gCAAgC,+BAA+B,4BAA4B,uBAAuB,yBAAyB,oBAAoB,mBAAmB,4DAA4D,kCAAkC,2BAA2B,yBAAyB,sBAAsB,EAAE,wCAAwC,uDAAuD,EAAE,sCAAsC,oBAAoB,EAAE,iCAAiC,uBAAuB,oBAAoB,oBAAoB,oBAAoB,mBAAmB,oBAAoB,iDAAiD,qCAAqC,EAAE,uCAAuC,sBAAsB,4BAA4B,gCAAgC,EAAE,qCAAqC,yCAAyC,oBAAoB,aAAa,uBAAuB,wBAAwB,EAAE,2CAA2C,sBAAsB,4BAA4B,gCAAgC,EAAE,qDAAqD,kDAAkD,EAAE,+BAA+B,WAAW,qBAAqB,EAAE,0BAA0B,yBAAyB,EAAE,oCAAoC,oBAAoB,iDAAiD,EAAE,+BAA+B,oBAAoB,EAAE,qBAAqB,2CAA2C,EAAE,oBAAoB,uBAAuB,yBAAyB,EAAE,6BAA6B,yCAAyC,EAAE,4BAA4B,uCAAuC,iCAAiC,EAAE,qCAAqC,0BAA0B,2BAA2B,uBAAuB,8DAA8D,EAAE,2CAA2C,iCAAiC,qCAAqC,EAAE,6CAA6C,mCAAmC,EAAE,EAAE;AACnqM;AACA;;;;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,kEAAsD;AAChG;AACA;AACA,6BAA6B,qCAAqC,qCAAqC,EAAE,QAAQ,qBAAqB,EAAE,QAAQ,qBAAqB,EAAE,QAAQ,qBAAqB,EAAE,SAAS,oBAAoB,mBAAmB,EAAE,4BAA4B,uBAAuB,yBAAyB,EAAE,cAAc,iBAAiB,EAAE,WAAW,cAAc,EAAE,YAAY,cAAc,8BAA8B,EAAE,aAAa,eAAe,cAAc,EAAE,QAAQ,qBAAqB,EAAE,SAAS,yBAAyB,EAAE,YAAY,wBAAwB,EAAE,WAAW,kBAAkB,EAAE,iBAAiB,sBAAsB,EAAE,eAAe,uBAAuB,EAAE,eAAe,uBAAuB,EAAE,qBAAqB,yCAAyC,EAAE,4BAA4B,+CAA+C,EAAE,0BAA0B,4CAA4C,EAAE,kCAAkC,mDAAmD,EAAE,oBAAoB,kBAAkB,wBAAwB,0BAA0B,kCAAkC,EAAE,qBAAqB,kBAAkB,0BAA0B,EAAE,2BAA2B,kBAAkB,wBAAwB,4BAA4B,EAAE,6BAA6B,kBAAkB,2BAA2B,4BAA4B,EAAE,mCAAmC,kBAAkB,2BAA2B,kCAAkC,EAAE,qCAAqC,kBAAkB,wBAAwB,kCAAkC,EAAE,iBAAiB,6BAA6B,EAAE,iBAAiB,iCAAiC,EAAE,mBAAmB,mCAAmC,EAAE,wBAAwB,oCAAoC,EAAE,0BAA0B,kCAAkC,EAAE,oBAAoB,oCAAoC,EAAE,kBAAkB,kCAAkC,EAAE,uBAAuB,mCAAmC,EAAE,cAAc,mBAAmB,EAAE,mBAAmB,oBAAoB,EAAE,kBAAkB,uBAAuB,EAAE,oBAAoB,yBAAyB,EAAE,qBAAqB,0BAA0B,EAAE,mBAAmB,wBAAwB,EAAE,4BAA4B,yBAAyB,EAAE,WAAW,oBAAoB,EAAE,WAAW,kBAAkB,EAAE,qBAAqB,6BAA6B,EAAE,+CAA+C,kCAAkC,gBAAgB,eAAe,qBAAqB,gCAAgC,qDAAqD,wBAAwB,sBAAsB,qBAAqB,4BAA4B,oBAAoB,0BAA0B,qBAAqB,8CAA8C,EAAE,kDAAkD,kCAAkC,EAAE,2BAA2B,iDAAiD,EAAE,iBAAiB,gBAAgB,EAAE,qBAAqB,oBAAoB,EAAE,iBAAiB,sDAAsD,EAAE,mBAAmB,qDAAqD,EAAE,oBAAoB,sDAAsD,EAAE,kBAAkB,oDAAoD,EAAE,4BAA4B,mCAAmC,EAAE,kBAAkB,8BAA8B,EAAE,iBAAiB,gCAAgC,EAAE,mBAAmB,gCAAgC,EAAE,uBAAuB,gCAAgC,EAAE,iBAAiB,iCAAiC,EAAE,uBAAuB,iCAAiC,EAAE,iBAAiB,+BAA+B,EAAE,gBAAgB,8BAA8B,EAAE,mBAAmB,kCAAkC,EAAE,8BAA8B,+DAA+D,EAAE,uCAAuC,qDAAqD,EAAE,mBAAmB,2DAA2D,EAAE,oBAAoB,gDAAgD,EAAE,qBAAqB,kBAAkB,2BAA2B,EAAE,eAAe,sBAAsB,2BAA2B,EAAE,sBAAsB,uBAAuB,kBAAkB,EAAE,sBAAsB,yBAAyB,EAAE,kBAAkB,oBAAoB,EAAE,kBAAkB,oBAAoB,EAAE,kBAAkB,oBAAoB,EAAE,kBAAkB,oBAAoB,EAAE,kBAAkB,oBAAoB,EAAE,aAAa,wBAAwB,EAAE,oBAAoB,2CAA2C,oCAAoC,EAAE,iBAAiB,kCAAkC,EAAE,oIAAoI,qBAAqB,4EAA4E,sDAAsD,kBAAkB,cAAc,uBAAuB,eAAe,gBAAgB,eAAe,iBAAiB,qBAAqB,2BAA2B,cAAc,EAAE,YAAY,0BAA0B,oBAAoB,EAAE,sBAAsB,qBAAqB,0BAA0B,EAAE,eAAe,yDAAyD,kCAAkC,2BAA2B,+CAA+C,2BAA2B,EAAE,sCAAsC,eAAe,kDAAkD,kBAAkB,EAAE,mFAAmF,yCAAyC,kBAAkB,EAAE,0DAA0D,+CAA+C,EAAE,oBAAoB,iCAAiC,kCAAkC,kCAAkC,oBAAoB,mBAAmB,EAAE,6CAA6C,cAAc,eAAe,EAAE,4DAA4D,4CAA4C,mDAAmD,EAAE,yBAAyB,4CAA4C,EAAE,uCAAuC,iCAAiC,kCAAkC,iBAAiB,qBAAqB,qBAAqB,4EAA4E,sDAAsD,kBAAkB,oBAAoB,yCAAyC,EAAE,uBAAuB,yBAAyB,EAAE,sBAAsB,sDAAsD,kCAAkC,2BAA2B,sDAAsD,0BAA0B,EAAE,4BAA4B,iDAAiD,kCAAkC,EAAE,mCAAmC,6CAA6C,qDAAqD,8CAA8C,EAAE,iCAAiC,6CAA6C,mDAAmD,4CAA4C,EAAE;AACpnP;AACA;;;;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,qEAAyD;AACnG;AACA;AACA,sDAAsD,qBAAqB,iBAAiB,EAAE,0BAA0B,qBAAqB,iIAAiI,EAAE,0BAA0B,gCAAgC,wBAAwB,EAAE,iCAAiC,kBAAkB,wBAAwB,mBAAmB,oBAAoB,EAAE,sBAAsB,qBAAqB,EAAE,kCAAkC,8BAA8B,EAAE,iDAAiD,YAAY,uBAAuB,qBAAqB,EAAE,mDAAmD,6DAA6D,EAAE,8DAA8D,uBAAuB,EAAE,+CAA+C,iCAAiC,yCAAyC,EAAE,6BAA6B,kBAAkB,wCAAwC,oBAAoB,wCAAwC,+CAA+C,EAAE,sCAAsC,kBAAkB,wBAAwB,EAAE,mFAAmF,yBAAyB,EAAE,oGAAoG,yCAAyC,EAAE,oBAAoB,8BAA8B,EAAE,oBAAoB,qBAAqB,sBAAsB,kBAAkB,wBAAwB,8BAA8B,EAAE,kCAAkC,kBAAkB,EAAE,wBAAwB,4BAA4B,oBAAoB,EAAE,yDAAyD,kBAAkB,wBAAwB,mBAAmB,EAAE,4BAA4B,gBAAgB,EAAE,+BAA+B,uBAAuB,EAAE,qCAAqC,uBAAuB,eAAe,gBAAgB,kBAAkB,EAAE,0BAA0B,kBAAkB,wBAAwB,EAAE,aAAa,uBAAuB,gBAAgB,iBAAiB,yCAAyC,4CAA4C,EAAE,4CAA4C,qBAAqB,EAAE,wBAAwB,kBAAkB,wBAAwB,uBAAuB,mBAAmB,gBAAgB,EAAE,2CAA2C,uBAAuB,EAAE,gDAAgD,gBAAgB,mDAAmD,EAAE,2BAA2B,gBAAgB,EAAE,4BAA4B,kCAAkC,8BAA8B,gBAAgB,EAAE,4EAA4E,kCAAkC,8BAA8B,EAAE,iDAAiD,4BAA4B,qBAAqB,wBAAwB,gBAAgB,EAAE,8BAA8B,oBAAoB,EAAE,2EAA2E,gBAAgB,cAAc,eAAe,EAAE,mDAAmD,oBAAoB,mCAAmC,kBAAkB,2BAA2B,wBAAwB,kCAAkC,EAAE,wDAAwD,kBAAkB,EAAE,mBAAmB,kBAAkB,EAAE,wCAAwC,oBAAoB,gBAAgB,qBAAqB,EAAE,4BAA4B,iDAAiD,EAAE,+DAA+D,yBAAyB,EAAE,2CAA2C,kBAAkB,wBAAwB,EAAE,yBAAyB,oBAAoB,8BAA8B,EAAE,6BAA6B,mBAAmB,kBAAkB,yBAAyB,6CAA6C,6BAA6B,6BAA6B,2DAA2D,yBAAyB,uBAAuB,EAAE,mCAAmC,uCAAuC,EAAE,sBAAsB,kBAAkB,2CAA2C,mBAAmB,EAAE,kCAAkC,6BAA6B,EAAE,4BAA4B,uBAAuB,yBAAyB,oBAAoB,EAAE,6BAA6B,uBAAuB,yBAAyB,EAAE,mCAAmC,kCAAkC,EAAE,gCAAgC,2BAA2B,EAAE,mEAAmE,sDAAsD,EAAE,2EAA2E,kBAAkB,6CAA6C,8BAA8B,sDAAsD,qBAAqB,qBAAqB,sCAAsC,6IAA6I,gBAAgB,iBAAiB,EAAE,kDAAkD,6BAA6B,EAAE,0CAA0C,oKAAoK,EAAE,uFAAuF,oBAAoB,EAAE,+FAA+F,4CAA4C,mDAAmD,EAAE,oDAAoD,uCAAuC,EAAE,+CAA+C,4CAA4C,mDAAmD,EAAE,6DAA6D,4CAA4C,yDAAyD,oBAAoB,EAAE,oDAAoD,4CAA4C,mDAAmD,oBAAoB,EAAE,iBAAiB,yBAAyB,EAAE,+CAA+C,kBAAkB,mCAAmC,oIAAoI,8BAA8B,EAAE,yCAAyC,oBAAoB,EAAE,iJAAiJ,kBAAkB,wBAAwB,4BAA4B,oBAAoB,EAAE,gEAAgE,kCAAkC,EAAE,+BAA+B,iCAAiC,EAAE,iCAAiC,oBAAoB,kCAAkC,EAAE,+BAA+B,oDAAoD,EAAE,iCAAiC,mDAAmD,EAAE,uBAAuB,kBAAkB,8BAA8B,wBAAwB,EAAE,2CAA2C,4BAA4B,qBAAqB,wBAAwB,0BAA0B,mBAAmB,yBAAyB,KAAK,kGAAkG,gBAAgB,iBAAiB,oBAAoB,EAAE,qEAAqE,yCAAyC,EAAE,yDAAyD,uCAAuC,EAAE,0CAA0C,4BAA4B,EAAE,uDAAuD,gBAAgB,iBAAiB,EAAE,yDAAyD,kBAAkB,mBAAmB,KAAK,6CAA6C,wCAAwC,EAAE,eAAe,wBAAwB,EAAE,wBAAwB,8BAA8B,+BAA+B,EAAE,4DAA4D,wBAAwB,wBAAwB,EAAE,kBAAkB,8BAA8B,yBAAyB,oBAAoB,EAAE,uCAAuC,wBAAwB,EAAE,yCAAyC,yBAAyB,EAAE,kBAAkB,oCAAoC,wBAAwB,4BAA4B,mBAAmB,kBAAkB,wBAAwB,qBAAqB,kCAAkC,EAAE,kCAAkC,4BAA4B,qBAAqB,EAAE,wBAAwB,4BAA4B,EAAE,oCAAoC,yBAAyB,EAAE,mFAAmF,gBAAgB,EAAE,yBAAyB,qBAAqB,gBAAgB,mDAAmD,EAAE,0BAA0B,wBAAwB,EAAE,kEAAkE,gBAAgB,EAAE,oCAAoC,yBAAyB,EAAE,2BAA2B,oBAAoB,EAAE,gCAAgC,yBAAyB,EAAE,wBAAwB,sBAAsB,EAAE,2BAA2B,kBAAkB,uBAAuB,EAAE,6CAA6C,qBAAqB,EAAE,6CAA6C,wBAAwB,EAAE,4BAA4B,gBAAgB,EAAE,iCAAiC,uBAAuB,EAAE,iCAAiC,uBAAuB,uBAAuB,EAAE,4BAA4B,iBAAiB,EAAE,6BAA6B,gBAAgB,EAAE,sDAAsD,eAAe,uBAAuB,EAAE,iBAAiB,gBAAgB,iBAAiB,EAAE,uBAAuB,iBAAiB,EAAE,gCAAgC,kBAAkB,qCAAqC,iBAAiB,EAAE,6BAA6B,oBAAoB,EAAE,oBAAoB,iBAAiB,EAAE,4BAA4B,4BAA4B,EAAE,8BAA8B,6BAA6B,EAAE,8BAA8B,mCAAmC,EAAE,2BAA2B,6BAA6B,EAAE,mCAAmC,gBAAgB,EAAE,wCAAwC,8BAA8B,wBAAwB,EAAE,iCAAiC,kBAAkB,2BAA2B,4BAA4B,oBAAoB,EAAE,oCAAoC,kBAAkB,wBAAwB,mCAAmC,+CAA+C,EAAE,yCAAyC,mBAAmB,EAAE,4BAA4B,6BAA6B,EAAE,qCAAqC,kBAAkB,6CAA6C,EAAE,yCAAyC,mBAAmB,mDAAmD,wBAAwB,kBAAkB,2BAA2B,kCAAkC,EAAE,yCAAyC,oCAAoC,EAAE,oCAAoC,yBAAyB,EAAE,iCAAiC,uBAAuB,EAAE,kDAAkD,cAAc,kBAAkB,EAAE,uDAAuD,yMAAyM,eAAe,EAAE,uBAAuB,iBAAiB,EAAE,oCAAoC,qBAAqB,qBAAqB,EAAE,8BAA8B,gBAAgB,EAAE,gCAAgC,2FAA2F,sBAAsB,EAAE,EAAE,gCAAgC,8DAA8D,wBAAwB,qBAAqB,EAAE,mDAAmD,mBAAmB,EAAE,EAAE;AAC3ka;AACA;;;;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,kEAAsD;AAChG;AACA;AACA,kCAAkC,sBAAsB,EAAE,iBAAiB,gBAAgB,2BAA2B,EAAE;AACxH;AACA;;;;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,kEAAsD;AAChG;AACA;AACA,iCAAiC,+CAA+C,gDAAgD,qDAAqD,oDAAoD,qDAAqD,qCAAqC,sCAAsC,kDAAkD,6CAA6C,sDAAsD,6CAA6C,yCAAyC,uCAAuC,wCAAwC,yCAAyC,uCAAuC,+CAA+C,gDAAgD,gDAAgD,wCAAwC,qCAAqC,mCAAmC,4CAA4C,2CAA2C,wCAAwC,qCAAqC,8CAA8C,6CAA6C,uCAAuC,mCAAmC,2CAA2C,4CAA4C,2CAA2C,+CAA+C,kDAAkD,yDAAyD,iDAAiD,sDAAsD,8CAA8C,uDAAuD,4DAA4D,yDAAyD,6DAA6D,2CAA2C,yCAAyC,4CAA4C,oDAAoD,qCAAqC,+CAA+C,iDAAiD,6CAA6C,8CAA8C,0CAA0C,6CAA6C,6CAA6C,kDAAkD,oCAAoC,2CAA2C,iCAAiC,gCAAgC,gCAAgC,EAAE;AACjtF;AACA;;;;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,kEAAsD;AAChG;AACA;AACA,iGAAiG,wCAAwC,oBAAoB,0BAA0B,8BAA8B,EAAE,EAAE,+BAA+B,4CAA4C,wBAAwB,EAAE,uCAAuC,uDAAuD,EAAE,EAAE,2EAA2E,mBAAmB,8BAA8B,EAAE,EAAE,gDAAgD,uCAAuC,yBAAyB,EAAE,EAAE,iCAAiC,sCAAsC,4BAA4B,OAAO,qDAAqD,4BAA4B,OAAO,GAAG,kNAAkN,oBAAoB,iCAAiC,eAAe,GAAG,iCAAiC,0BAA0B,oBAAoB,EAAE,EAAE,mCAAmC,6IAA6I,2BAA2B,yBAAyB,OAAO,GAAG,gCAAgC,4CAA4C,wBAAwB,EAAE,sBAAsB,uBAAuB,EAAE,mCAAmC,uBAAuB,EAAE,uCAAuC,mBAAmB,EAAE,oBAAoB,kBAAkB,mBAAmB,EAAE,sBAAsB,sBAAsB,0BAA0B,EAAE,EAAE,kEAAkE,mBAAmB,mCAAmC,EAAE,EAAE,kEAAkE,YAAY,wBAAwB,EAAE,8FAA8F,sBAAsB,EAAE,UAAU,uBAAuB,EAAE,6BAA6B,wBAAwB,EAAE,mBAAmB,mCAAmC,EAAE,gDAAgD,sBAAsB,EAAE,EAAE,+BAA+B,gBAAgB,+BAA+B,EAAE,oBAAoB,oBAAoB,EAAE,EAAE,gCAAgC,kBAAkB,uBAAuB,EAAE,EAAE,+BAA+B,QAAQ,wBAAwB,EAAE,QAAQ,wBAAwB,EAAE,QAAQ,sBAAsB,EAAE,eAAe,wBAAwB,EAAE,QAAQ,sBAAsB,EAAE,QAAQ,uBAAuB,EAAE,+BAA+B,uBAAuB,EAAE,qCAAqC,wIAAwI,EAAE,2BAA2B,wBAAwB,qDAAqD,EAAE,kDAAkD,+BAA+B,EAAE,cAAc,0GAA0G,EAAE,iCAAiC,0CAA0C,8CAA8C,EAAE,wBAAwB,oBAAoB,EAAE,gGAAgG,kFAAkF,0FAA0F,EAAE,wBAAwB,yBAAyB,4BAA4B,uCAAuC,kDAAkD,iFAAiF,mBAAmB,wJAAwJ,OAAO,wDAAwD,6FAA6F,EAAE,0BAA0B,yBAAyB,kBAAkB,mBAAmB,qBAAqB,uBAAuB,mCAAmC,oCAAoC,EAAE,6BAA6B,uBAAuB,EAAE,8FAA8F,uBAAuB,EAAE,gCAAgC,sBAAsB,EAAE,gDAAgD,0BAA0B,EAAE,iCAAiC,mBAAmB,sBAAsB,EAAE,0CAA0C,mBAAmB,sBAAsB,EAAE,mCAAmC,oBAAoB,0BAA0B,yBAAyB,EAAE,4CAA4C,0BAA0B,0CAA0C,uBAAuB,EAAE,gDAAgD,kBAAkB,uBAAuB,EAAE,qCAAqC,0BAA0B,EAAE,8BAA8B,yBAAyB,sBAAsB,EAAE,2EAA2E,mBAAmB,yBAAyB,wBAAwB,EAAE,mBAAmB,oBAAoB,0BAA0B,qCAAqC,EAAE,uCAAuC,yBAAyB,wDAAwD,qBAAqB,EAAE,mBAAmB,uBAAuB,EAAE,8BAA8B,oBAAoB,4CAA4C,EAAE,8BAA8B,oBAAoB,qCAAqC,EAAE,uBAAuB,oBAAoB,qCAAqC,oBAAoB,2DAA2D,EAAE,kBAAkB,sBAAsB,EAAE,mDAAmD,oBAAoB,qBAAqB,2CAA2C,EAAE,qBAAqB,wBAAwB,EAAE,mCAAmC,yBAAyB,yBAAyB,wBAAwB,6BAA6B,EAAE,oBAAoB,qBAAqB,sBAAsB,EAAE,uBAAuB,iBAAiB,sBAAsB,qDAAqD,EAAE,YAAY,kBAAkB,EAAE,gBAAgB,uBAAuB,EAAE,gCAAgC,oBAAoB,6BAA6B,8BAA8B,8BAA8B,EAAE,+BAA+B,gBAAgB,aAAa,EAAE,oEAAoE,qBAAqB,2BAA2B,qCAAqC,EAAE,uBAAuB,oBAAoB,EAAE,kHAAkH,yBAAyB,yBAAyB,EAAE,kBAAkB,kBAAkB,mBAAmB,uBAAuB,EAAE,gCAAgC,oCAAoC,0BAA0B,oBAAoB,yCAAyC,EAAE,iCAAiC,oDAAoD,EAAE,mDAAmD,8BAA8B,gBAAgB,EAAE,yDAAyD,oBAAoB,EAAE,UAAU,wBAAwB,EAAE,uBAAuB,mBAAmB,sBAAsB,EAAE,uBAAuB,mBAAmB,uBAAuB,EAAE,WAAW,qCAAqC,0CAA0C,EAAE,qBAAqB,+BAA+B,EAAE,uBAAuB,oBAAoB,EAAE,WAAW,qBAAqB,EAAE,uDAAuD,+BAA+B,EAAE,aAAa,sBAAsB,qBAAqB,uBAAuB,qBAAqB,EAAE,YAAY,yBAAyB,oCAAoC,sBAAsB,EAAE,UAAU,sBAAsB,EAAE,2CAA2C,yBAAyB,aAAa,EAAE,8BAA8B,wEAAwE,gJAAgJ,EAAE,mBAAmB,oBAAoB,0BAA0B,qCAAqC,EAAE,YAAY,kBAAkB,gBAAgB,EAAE,mCAAmC,sBAAsB,iGAAiG,EAAE,iCAAiC,2DAA2D,EAAE,8BAA8B,uBAAuB,mBAAmB,EAAE,uBAAuB,mBAAmB,EAAE,+BAA+B,uBAAuB,mBAAmB,EAAE,mCAAmC,oBAAoB,0BAA0B,EAAE,uDAAuD,0BAA0B,EAAE,oCAAoC,sBAAsB,EAAE,oCAAoC,sBAAsB,EAAE,mBAAmB,yBAAyB,EAAE,4FAA4F,qBAAqB,EAAE,yBAAyB,qBAAqB,oBAAoB,EAAE,sBAAsB,cAAc,eAAe,gCAAgC,EAAE,gCAAgC,wCAAwC,iDAAiD,EAAE,0EAA0E,0CAA0C,EAAE,YAAY,oBAAoB,6BAA6B,EAAE,+BAA+B,wBAAwB,EAAE,wBAAwB,sBAAsB,EAAE,+BAA+B,+BAA+B,EAAE,gCAAgC,yBAAyB,8BAA8B,EAAE,eAAe,oBAAoB,6BAA6B,4BAA4B,EAAE,0BAA0B,mBAAmB,6BAA6B,sBAAsB,EAAE,kCAAkC,mBAAmB,iCAAiC,EAAE,0BAA0B,0BAA0B,EAAE,6BAA6B,0BAA0B,wDAAwD,EAAE,iDAAiD,sBAAsB,EAAE,sEAAsE,wBAAwB,EAAE,EAAE,gCAAgC,uBAAuB,mBAAmB,EAAE,uBAAuB,mBAAmB,EAAE,cAAc,wBAAwB,EAAE,oBAAoB,mBAAmB,oBAAoB,EAAE,+DAA+D,cAAc,EAAE,+DAA+D,cAAc,uBAAuB,qBAAqB,EAAE,+DAA+D,yBAAyB,EAAE,2DAA2D,2BAA2B,EAAE,yCAAyC,oBAAoB,EAAE,4DAA4D,4BAA4B,eAAe,gBAAgB,2BAA2B,6BAA6B,oBAAoB,8BAA8B,4CAA4C,uBAAuB,2CAA2C,sBAAsB,EAAE,0GAA0G,4BAA4B,eAAe,gBAAgB,2BAA2B,6BAA6B,oBAAoB,8BAA8B,4CAA4C,uBAAuB,2CAA2C,sBAAsB,EAAE,mCAAmC,6BAA6B,oBAAoB,yBAAyB,EAAE,wCAAwC,cAAc,2BAA2B,EAAE,6HAA6H,cAAc,EAAE,oBAAoB,+BAA+B,EAAE,uCAAuC,sBAAsB,EAAE,EAAE,gCAAgC,kBAAkB,+BAA+B,EAAE,EAAE,gCAAgC,yCAAyC,mBAAmB,EAAE,oBAAoB,gHAAgH,mBAAmB,EAAE,cAAc,wBAAwB,EAAE,wBAAwB,qBAAqB,EAAE,uBAAuB,mBAAmB,EAAE,EAAE,gCAAgC,yCAAyC,mBAAmB,EAAE,uBAAuB,mBAAmB,EAAE,oBAAoB,mBAAmB,EAAE,EAAE;AAC7qb;AACA;;;;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,kEAAsD;AAChG;AACA;AACA,6BAA6B,2BAA2B,cAAc,eAAe,EAAE,UAAU,iCAAiC,EAAE,UAAU,iCAAiC,kBAAkB,wBAAwB,4BAA4B,yCAAyC,iCAAiC,iBAAiB,kDAAkD,EAAE,YAAY,gBAAgB,2BAA2B,EAAE,kBAAkB,mDAAmD,EAAE,qBAAqB,kBAAkB,EAAE,8BAA8B,kBAAkB,EAAE,0BAA0B,oBAAoB,mBAAmB,gBAAgB,8CAA8C,wBAAwB,EAAE,gCAAgC,0DAA0D,EAAE,aAAa,0BAA0B,EAAE,QAAQ,cAAc,eAAe,EAAE,QAAQ,0BAA0B,wBAAwB,EAAE,cAAc,yBAAyB,gBAAgB,cAAc,wCAAwC,oBAAoB,EAAE,oCAAoC,8CAA8C,EAAE,sCAAsC,6CAA6C,EAAE,iCAAiC,+CAA+C,EAAE,oBAAoB,+CAA+C,oBAAoB,EAAE,kBAAkB,8CAA8C,EAAE,yCAAyC,gBAAgB,gBAAgB,YAAY,gBAAgB,EAAE,QAAQ,cAAc,EAAE,sBAAsB,qBAAqB,EAAE,kBAAkB,8CAA8C,EAAE,kBAAkB,0BAA0B,uBAAuB,yBAAyB,yBAAyB,wCAAwC,yCAAyC,EAAE,yBAAyB,qBAAqB,wBAAwB,0BAA0B,0BAA0B,mBAAmB,EAAE,yBAAyB,qBAAqB,wBAAwB,2BAA2B,mBAAmB,EAAE,yBAAyB,qBAAqB,wBAAwB,2BAA2B,gCAAgC,EAAE,2BAA2B,qBAAqB,wBAAwB,2BAA2B,gCAAgC,EAAE,wBAAwB,qBAAqB,wBAAwB,2BAA2B,6BAA6B,EAAE,oBAAoB,0BAA0B,eAAe,iCAAiC,mDAAmD,EAAE,mBAAmB,qBAAqB,EAAE,2GAA2G,oBAAoB,iCAAiC,sBAAsB,EAAE,kBAAkB,kCAAkC,EAAE,kBAAkB,kCAAkC,EAAE,iBAAiB,qBAAqB,EAAE,mBAAmB,2BAA2B,EAAE,kBAAkB,8BAA8B,2CAA2C,kBAAkB,wBAAwB,iCAAiC,gBAAgB,uCAAuC,4BAA4B,8BAA8B,EAAE,wBAAwB,sBAAsB,EAAE,2CAA2C,iBAAiB,EAAE,oBAAoB,oBAAoB,iBAAiB,mEAAmE,EAAE,wCAAwC,2DAA2D,EAAE,qBAAqB,uBAAuB,oDAAoD,EAAE,sBAAsB,qBAAqB,EAAE,mBAAmB,cAAc,EAAE,yBAAyB,oBAAoB,EAAE,WAAW,6BAA6B,2BAA2B,gBAAgB,iCAAiC,qBAAqB,EAAE,0CAA0C,kBAAkB,gCAAgC,2BAA2B,2FAA2F,EAAE,+CAA+C,kBAAkB,wBAAwB,mEAAmE,qDAAqD,EAAE,sBAAsB,kBAAkB,wBAAwB,sBAAsB,2BAA2B,8BAA8B,wCAAwC,6CAA6C,6CAA6C,EAAE,gCAAgC,mBAAmB,qBAAqB,EAAE,aAAa,cAAc,EAAE,gFAAgF,eAAe,kCAAkC,EAAE,sFAAsF,yBAAyB,EAAE,wBAAwB,wCAAwC,qBAAqB,EAAE,0DAA0D,8BAA8B,2CAA2C,EAAE,0DAA0D,4BAA4B,4CAA4C,EAAE,kBAAkB,6CAA6C,EAAE,iBAAiB,qBAAqB,sCAAsC,uBAAuB,YAAY,aAAa,WAAW,cAAc,EAAE,0BAA0B,oCAAoC,EAAE,iBAAiB,qBAAqB,EAAE,sBAAsB,cAAc,EAAE,iCAAiC,wCAAwC,oBAAoB,EAAE,gDAAgD,4BAA4B,uBAAuB,0BAA0B,EAAE,iBAAiB,uBAAuB,uBAAuB,4BAA4B,EAAE,kBAAkB,uBAAuB,+BAA+B,EAAE,0BAA0B,kBAAkB,wBAAwB,4BAA4B,EAAE,8BAA8B,oBAAoB,oBAAoB,0CAA0C,EAAE,oCAAoC,yCAAyC,EAAE,0CAA0C,mCAAmC,qBAAqB,EAAE,yBAAyB,yCAAyC,iBAAiB,mBAAmB,kBAAkB,2BAA2B,4BAA4B,wDAAwD,qBAAqB,EAAE,oFAAoF,kBAAkB,mCAAmC,qBAAqB,EAAE,+DAA+D,0BAA0B,EAAE,wDAAwD,uBAAuB,EAAE,qCAAqC,mBAAmB,EAAE,+CAA+C,8BAA8B,EAAE,iBAAiB,kBAAkB,wBAAwB,EAAE,YAAY,uBAAuB,uBAAuB,EAAE,oBAAoB,uBAAuB,EAAE,kBAAkB,uBAAuB,EAAE,UAAU,uBAAuB,mBAAmB,iBAAiB,EAAE,gBAAgB,gBAAgB,EAAE,4BAA4B,qBAAqB,EAAE,sBAAsB,yBAAyB,GAAG,2BAA2B,iCAAiC,EAAE,mBAAmB,kCAAkC,iEAAiE,+CAA+C,+BAA+B,EAAE,yBAAyB,iDAAiD,kCAAkC,EAAE,6BAA6B,2BAA2B,wBAAwB,EAAE,8BAA8B,gFAAgF,sJAAsJ,EAAE,sBAAsB,sBAAsB,oBAAoB,EAAE,mBAAmB,wBAAwB,EAAE,mBAAmB,mBAAmB,EAAE,+BAA+B,eAAe,oBAAoB,EAAE,sBAAsB,kBAAkB,kBAAkB,wBAAwB,uBAAuB,mBAAmB,iBAAiB,gBAAgB,EAAE,oBAAoB,gBAAgB,EAAE,2BAA2B,gBAAgB,EAAE,qBAAqB,+BAA+B,iBAAiB,mEAAmE,EAAE,sCAAsC,eAAe,qBAAqB,EAAE,sCAAsC,eAAe,qBAAqB,EAAE,yDAAyD,6CAA6C,iCAAiC,EAAE,oEAAoE,4DAA4D,EAAE,mBAAmB,kBAAkB,2BAA2B,EAAE,6CAA6C,+BAA+B,8BAA8B,iBAAiB,EAAE,yDAAyD,wCAAwC,8BAA8B,iBAAiB,EAAE,8BAA8B,mBAAmB,EAAE,wCAAwC,eAAe,EAAE,yBAAyB,wBAAwB,EAAE,qCAAqC,2BAA2B,eAAe,uBAAuB,2BAA2B,yBAAyB,EAAE,wBAAwB,wCAAwC,mCAAmC,cAAc,uBAAuB,iBAAiB,EAAE,8BAA8B,qBAAqB,EAAE,uFAAuF,iBAAiB,EAAE,mHAAmH,kBAAkB,EAAE,uCAAuC,oBAAoB,mBAAmB,EAAE,YAAY,6BAA6B,oBAAoB,EAAE,kBAAkB,mBAAmB,kCAAkC,iCAAiC,yCAAyC,EAAE,iBAAiB,iBAAiB,kBAAkB,kDAAkD,EAAE,oBAAoB,kCAAkC,EAAE,2BAA2B,oBAAoB,EAAE,kCAAkC,kBAAkB,2BAA2B,+CAA+C,EAAE,wCAAwC,mBAAmB,EAAE,8EAA8E,aAAa,gBAAgB,eAAe,+CAA+C,iBAAiB,EAAE,kEAAkE,6CAA6C,4BAA4B,EAAE,oDAAoD,wBAAwB,EAAE,mGAAmG,yBAAyB,EAAE,kCAAkC,wDAAwD,EAAE,kFAAkF,6CAA6C,iDAAiD,EAAE,oIAAoI,kBAAkB,wBAAwB,4BAA4B,EAAE,4GAA4G,kBAAkB,wBAAwB,4BAA4B,wBAAwB,EAAE,mGAAmG,kBAAkB,EAAE,kCAAkC,mBAAmB,EAAE,uCAAuC,gBAAgB,6BAA6B,iCAAiC,gCAAgC,EAAE,8FAA8F,yBAAyB,EAAE,qDAAqD,6BAA6B,EAAE,yFAAyF,kBAAkB,mBAAmB,kCAAkC,iBAAiB,EAAE,mBAAmB,YAAY,EAAE,mBAAmB,YAAY,EAAE,mBAAmB,YAAY,EAAE,+BAA+B,iBAAiB,gBAAgB,4DAA4D,EAAE,4FAA4F,sBAAsB,uBAAuB,kBAAkB,4CAA4C,kBAAkB,wBAAwB,4BAA4B,EAAE,4FAA4F,+CAA+C,EAAE,gDAAgD,+CAA+C,8BAA8B,EAAE,wDAAwD,iBAAiB,EAAE,iCAAiC,+CAA+C,wKAAwK,EAAE,iCAAiC,+CAA+C,wKAAwK,EAAE,iCAAiC,8BAA8B,EAAE,mBAAmB,oDAAoD,EAAE,qBAAqB,iBAAiB,wBAAwB,EAAE,8BAA8B,8BAA8B,yBAAyB,wBAAwB,EAAE,qBAAqB,eAAe,qBAAqB,EAAE,WAAW,2BAA2B,0BAA0B,6BAA6B,EAAE,mCAAmC,mBAAmB,EAAE,uBAAuB,6BAA6B,EAAE,2BAA2B,sBAAsB,qDAAqD,mBAAmB,kBAAkB,wBAAwB,4BAA4B,EAAE,+CAA+C,8BAA8B,EAAE,+BAA+B,mBAAmB,sBAAsB,EAAE,gBAAgB,kDAAkD,0CAA0C,EAAE,2BAA2B,kBAAkB,EAAE,0BAA0B,kCAAkC,cAAc,yBAAyB,mCAAmC,oCAAoC,wBAAwB,EAAE,6BAA6B,mDAAmD,gBAAgB,oBAAoB,qBAAqB,EAAE,kCAAkC,4BAA4B,EAAE,sBAAsB,kBAAkB,4DAA4D,4BAA4B,4BAA4B,EAAE,gBAAgB,oBAAoB,mBAAmB,EAAE,wBAAwB,yBAAyB,EAAE,oBAAoB,mDAAmD,EAAE,wCAAwC,WAAW,8BAA8B,yCAAyC,sBAAsB,2BAA2B,yDAAyD,EAAE,wFAAwF,yCAAyC,EAAE,6HAA6H,4BAA4B,uBAAuB,kBAAkB,4BAA4B,2BAA2B,kBAAkB,2BAA2B,wBAAwB,EAAE,mDAAmD,oBAAoB,EAAE,iBAAiB,qBAAqB,EAAE,6BAA6B,+BAA+B,yBAAyB,EAAE,qCAAqC,yBAAyB,EAAE,yBAAyB,2BAA2B,EAAE,4EAA4E,wBAAwB,EAAE,0CAA0C,oBAAoB,EAAE,sCAAsC,wCAAwC,4BAA4B,EAAE,wCAAwC,uCAAuC,yBAAyB,EAAE,8BAA8B,oBAAoB,gBAAgB,iBAAiB,gCAAgC,EAAE,uDAAuD,wBAAwB,EAAE,mBAAmB,qBAAqB,EAAE,oBAAoB,6BAA6B,EAAE,wBAAwB,yBAAyB,EAAE,uBAAuB,mBAAmB,kBAAkB,2BAA2B,kCAAkC,sCAAsC,EAAE,4EAA4E,oBAAoB,EAAE,qCAAqC,oBAAoB,EAAE,kBAAkB,uBAAuB,8CAA8C,EAAE,yBAAyB,0BAA0B,8BAA8B,mCAAmC,EAAE,4CAA4C,kBAAkB,wBAAwB,EAAE,kDAAkD,yCAAyC,kBAAkB,wBAAwB,gBAAgB,mCAAmC,wBAAwB,EAAE,4CAA4C,kBAAkB,wBAAwB,4BAA4B,oBAAoB,EAAE,kDAAkD,iCAAiC,gCAAgC,EAAE,4CAA4C,mCAAmC,EAAE,0FAA0F,kBAAkB,EAAE,yFAAyF,kBAAkB,EAAE,6BAA6B,oBAAoB,0BAA0B,yCAAyC,oBAAoB,EAAE,gCAAgC,sCAAsC,yCAAyC,kBAAkB,qBAAqB,EAAE,iCAAiC,sDAAsD,yDAAyD,gEAAgE,EAAE,mDAAmD,sBAAsB,oBAAoB,wBAAwB,kBAAkB,uBAAuB,EAAE,uBAAuB,wBAAwB,yBAAyB,EAAE,0CAA0C,4BAA4B,EAAE,wBAAwB,qBAAqB,kCAAkC,EAAE,2DAA2D,oBAAoB,8BAA8B,EAAE,2CAA2C,mCAAmC,EAAE,gEAAgE,mDAAmD,EAAE,kEAAkE,mDAAmD,EAAE,8BAA8B,gBAAgB,kGAAkG,2BAA2B,sCAAsC,sDAAsD,EAAE,qDAAqD,uBAAuB,2BAA2B,EAAE,uBAAuB,qCAAqC,EAAE,oBAAoB,uCAAuC,EAAE,qBAAqB,oCAAoC,EAAE,wCAAwC,2CAA2C,8BAA8B,oBAAoB,EAAE,YAAY,qBAAqB,6BAA6B,WAAW,cAAc,eAAe,uBAAuB,mDAAmD,uBAAuB,cAAc,wBAAwB,gBAAgB,EAAE,mBAAmB,uBAAuB,WAAW,YAAY,cAAc,gBAAgB,iBAAiB,EAAE,+BAA+B,uBAAuB,EAAE,2CAA2C,sCAAsC,EAAE,uBAAuB,kBAAkB,EAAE,+BAA+B,sDAAsD,kDAAkD,EAAE,oDAAoD,8BAA8B,oBAAoB,EAAE,kBAAkB,sBAAsB,8BAA8B,2BAA2B,EAAE,iCAAiC,qBAAqB,EAAE,mBAAmB,qBAAqB,kBAAkB,EAAE,kBAAkB,oBAAoB,EAAE,kBAAkB,oBAAoB,EAAE,4CAA4C,uBAAuB,qBAAqB,EAAE,oBAAoB,2DAA2D,EAAE,uBAAuB,kBAAkB,wBAAwB,4BAA4B,uBAAuB,qBAAqB,yCAAyC,EAAE,oBAAoB,sCAAsC,0BAA0B,EAAE,8CAA8C,iBAAiB,EAAE,oCAAoC,cAAc,EAAE,oCAAoC,6BAA6B,EAAE,mCAAmC,kBAAkB,EAAE,gBAAgB,eAAe,EAAE,iCAAiC,gCAAgC,EAAE,mBAAmB,4BAA4B,kCAAkC,EAAE,oCAAoC,kCAAkC,EAAE,4DAA4D,kBAAkB,EAAE,6DAA6D,kBAAkB,EAAE,gCAAgC,gBAAgB,mBAAmB,EAAE,mCAAmC,gBAAgB,oBAAoB,qBAAqB,EAAE,6BAA6B,yBAAyB,EAAE,eAAe,wCAAwC,2BAA2B,EAAE,+DAA+D,wCAAwC,mDAAmD,EAAE,6GAA6G,iDAAiD,EAAE,6GAA6G,+CAA+C,EAAE,0BAA0B,qBAAqB,uBAAuB,EAAE,2BAA2B,+BAA+B,EAAE,6BAA6B,6BAA6B,EAAE,uBAAuB,2DAA2D,+DAA+D,EAAE,yBAAyB,kBAAkB,uCAAuC,oBAAoB,EAAE,qBAAqB,oBAAoB,mEAAmE,EAAE,2BAA2B,kBAAkB,sBAAsB,EAAE,kBAAkB,gBAAgB,iBAAiB,qBAAqB,EAAE,sBAAsB,qBAAqB,iBAAiB,EAAE,8BAA8B,mBAAmB,gCAAgC,kBAAkB,EAAE,sBAAsB,WAAW,EAAE,mBAAmB,6BAA6B,EAAE,mBAAmB,6BAA6B,EAAE,6BAA6B,2BAA2B,EAAE;AAC38xB;AACA;;;;;;;;;;;;;;ACNA;AACA,kCAAkC,mBAAO,CAAC,kEAAsD;AAChG;AACA;AACA,0CAA0C,sDAAsD,qDAAqD,uDAAuD,EAAE,mBAAmB,oBAAoB,kBAAkB,wBAAwB,cAAc,yCAAyC,gBAAgB,wBAAwB,WAAW,gDAAgD,kCAAkC,qBAAqB,2BAA2B,EAAE,sBAAsB,oBAAoB,yBAAyB,EAAE,gBAAgB,kBAAkB,wBAAwB,iCAAiC,oBAAoB,EAAE,wBAAwB,kBAAkB,4BAA4B,gBAAgB,EAAE,iCAAiC,qDAAqD,EAAE,iCAAiC,oBAAoB,EAAE,8BAA8B,sBAAsB,EAAE,oBAAoB,gBAAgB,iBAAiB,qBAAqB,mBAAmB,EAAE,0BAA0B,gBAAgB,EAAE,0BAA0B,4BAA4B,EAAE,0BAA0B,0BAA0B,EAAE,kBAAkB,qBAAqB,wBAAwB,qBAAqB,mBAAmB,EAAE,QAAQ,wBAAwB,EAAE,mCAAmC,oBAAoB,EAAE,2GAA2G,0BAA0B,aAAa,cAAc,0BAA0B,2BAA2B,kBAAkB,6BAA6B,2CAA2C,qBAAqB,0CAA0C,oBAAoB,EAAE,iFAAiF,gBAAgB,kBAAkB,wBAAwB,4BAA4B,EAAE,mCAAmC,YAAY,4BAA4B,EAAE,uCAAuC,gBAAgB,kBAAkB,wBAAwB,EAAE,4CAA4C,gBAAgB,EAAE,gCAAgC,YAAY,kBAAkB,4BAA4B,2BAA2B,4BAA4B,EAAE,0HAA0H,YAAY,kBAAkB,wBAAwB,EAAE,+DAA+D,YAAY,kBAAkB,wBAAwB,EAAE,+DAA+D,YAAY,kBAAkB,wBAAwB,EAAE,sEAAsE,uBAAuB,kBAAkB,EAAE,sEAAsE,uBAAuB,iBAAiB,EAAE,kBAAkB,uBAAuB,6BAA6B,EAAE,uCAAuC,gBAAgB,iBAAiB,sBAAsB,EAAE,6BAA6B,+DAA+D,sDAAsD,yDAAyD,kBAAkB,+BAA+B,oBAAoB,EAAE,+BAA+B,gBAAgB,EAAE,mDAAmD,sBAAsB,oBAAoB,EAAE,+DAA+D,sBAAsB,EAAE,wBAAwB,uBAAuB,gBAAgB,EAAE,+BAA+B,cAAc,gBAAgB,mBAAmB,EAAE,oCAAoC,4BAA4B,qBAAqB,EAAE,+BAA+B,sCAAsC,kBAAkB,EAAE;AACh7H;AACA;;;;;;;;;;;;;;;;ACNA,0EAAe,yCAAyC,E;;;;;;;;;;;;;ACAxD;AACA,yrBAAyrB,mWAAmW;AAC5hC;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,2BAA2B,aAAa;AACxC;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,ygCAAygC,ujBAAujB,oBAAoB,6hBAA6hB,eAAe;AAChoE;AACA,sB;;;;;;;;;;;;;ACHA;AACA,6QAA6Q;AAC7Q;AACA,sB;;;;;;;;;;;;;ACHA;AACA,uTAAuT,wFAAwF,mBAAmB,4HAA4H,gBAAgB,oCAAoC,gBAAgB,KAAK,gBAAgB;AACvnB;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,sFAAsF,WAAW,6BAA6B,aAAa,6FAA6F,eAAe;AACvP;AACA,sB;;;;;;;;;;;;;ACHA;AACA,+KAA+K,mBAAmB,mQAAmQ,mBAAmB,uFAAuF,2BAA2B,yCAAyC,mBAAmB;AACtoB;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,oSAAoS,SAAS;AAC7S;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,6UAA6U,eAAe,ybAAyb,kBAAkB,+HAA+H,QAAQ;AAC96B;AACA,sB;;;;;;;;;;;;;ACHA;AACA,wdAAwd,eAAe,i3BAAi3B,SAAS,+DAA+D,YAAY,uEAAuE,YAAY,mCAAmC,YAAY;AAC9iD;AACA,sB;;;;;;;;;;;;;ACHA;AACA,qjBAAqjB,kBAAkB,+JAA+J,QAAQ,wIAAwI,eAAe,wvBAAwvB,QAAQ,sFAAsF,WAAW,oGAAoG,UAAU,uGAAuG,YAAY,4IAA4I,OAAO,gNAAgN,QAAQ,qeAAqe,kBAAkB,sKAAsK,WAAW;AAC19F;AACA,sB;;;;;;;;;;;;;ACHA;AACA,0cAA0c,mBAAmB,gGAAgG,kBAAkB,uMAAuM,YAAY,mMAAmM,QAAQ,scAAsc,aAAa,uFAAuF,YAAY,iFAAiF,QAAQ,uFAAuF,aAAa,yGAAyG,oBAAoB;AAC71D;AACA,sB;;;;;;;;;;;;;ACHA;AACA,uDAAuD,SAAS,6DAA6D,OAAO;AACpI;AACA,sB;;;;;;;;;;;;;ACHA;AACA,yCAAyC,iBAAiB,kHAAkH,iBAAiB,2CAA2C,kBAAkB,uBAAuB,UAAU;AAC3R;AACA,sB;;;;;;;;;;;;;ACHA;AACA,2EAA2E,QAAQ,qEAAqE,OAAO,oCAAoC,eAAe,aAAa,eAAe,KAAK,eAAe;AAClQ;AACA,sB;;;;;;;;;;;;;ACHA;AACA,6CAA6C,MAAM;AACnD;AACA,sB;;;;;;;;;;;;;ACHA;AACA,oCAAoC,cAAc,8KAA8K,UAAU,yIAAyI,gBAAgB,mCAAmC,kBAAkB,oCAAoC,gBAAgB,qCAAqC,iBAAiB,2CAA2C,sBAAsB,gDAAgD,2BAA2B,iCAAiC,aAAa,sCAAsC,kBAAkB,uCAAuC,kBAAkB,mCAAmC,eAAe,iCAAiC,kBAAkB,6HAA6H,cAAc,kGAAkG,UAAU,gFAAgF,eAAe,4HAA4H,cAAc,oEAAoE,cAAc,qGAAqG,cAAc,oIAAoI,cAAc,oEAAoE,cAAc,qGAAqG,cAAc,kGAAkG,cAAc;AAC9hE;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,wCAAwC,WAAW,mDAAmD,eAAe,kCAAkC,uBAAuB,WAAW,kBAAkB,iCAAiC,qBAAqB;AACjQ;AACA,sB;;;;;;;;;;;;;ACHA;AACA,mCAAmC,MAAM,uIAAuI,UAAU,4EAA4E,cAAc,yBAAyB,eAAe,GAAG,cAAc,mEAAmE,qBAAqB,8GAA8G,MAAM,sQAAsQ,MAAM;AACryB;AACA,sB;;;;;;;;;;;;;ACHA;AACA,4hBAA4hB,aAAa,mCAAmC,iBAAiB,wCAAwC,iBAAiB;AACtpB;AACA,sB;;;;;;;;;;;;;ACHA;AACA,+EAA+E,cAAc,wDAAwD,qBAAqB,uBAAuB,gCAAgC,6CAA6C,mBAAmB,mEAAmE,uBAAuB,sCAAsC,uBAAuB,KAAK,uBAAuB,sGAAsG,mBAAmB,wCAAwC,uBAAuB,UAAU,uBAAuB,KAAK,uBAAuB,wCAAwC,kCAAkC;AACnxB;AACA,sB;;;;;;;;;;;;;ACHA;AACA,oFAAoF,iBAAiB,oHAAoH,qBAAqB,qJAAqJ,sBAAsB,wCAAwC,0BAA0B,UAAU,yBAAyB,KAAK,yBAAyB,qFAAqF,6BAA6B,yEAAyE,yBAAyB,kCAAkC,6BAA6B,uCAAuC,4BAA4B;AACl3B;AACA,sB;;;;;;;;;;;;;ACHA;AACA,2PAA2P,UAAU;AACrQ;AACA,sB;;;;;;;;;;;;;ACHA;AACA,6WAA6W,SAAS,qfAAqf,UAAU,sNAAsN,UAAU;AACrlC;AACA,sB;;;;;;;;;;;;;ACHA;AACA,mHAAmH,SAAS,gZAAgZ,mBAAmB,yHAAyH,wBAAwB,4CAA4C,cAAc;AAC1uB;AACA,sB;;;;;;;;;;;;;ACHA;AACA,8JAA8J,SAAS,4FAA4F,wBAAwB,iCAAiC,wCAAwC,4CAA4C,kGAAkG,kBAAkB,kHAAkH,YAAY,yFAAyF,UAAU,6FAA6F,eAAe;AACj1B;AACA,sB;;;;;;;;;;;;;ACHA;AACA,gJAAgJ,eAAe,yHAAyH,uLAAuL,YAAY,qCAAqC,gBAAgB,sZAAsZ,aAAa,uMAAuM,mBAAmB,2GAA2G,kBAAkB,uEAAuE,gBAAgB,wRAAwR,kBAAkB;AAC3oD;AACA,sB;;;;;;;;;;;;;ACHA;AACA,gLAAgL,UAAU,+FAA+F,gBAAgB,kGAAkG,kBAAkB,6BAA6B,aAAa;AACvc;AACA,sB;;;;;;;;;;;;;ACHA;AACA,+MAA+M,mBAAmB,mGAAmG,2BAA2B,yCAAyC,mBAAmB;AAC5Z;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,4CAA4C,aAAa,0YAA0Y,eAAe,WAAW,eAAe,yFAAyF,aAAa,qEAAqE,mBAAmB,8GAA8G,aAAa,2CAA2C,aAAa,uCAAuC,oCAAoC,KAAK,eAAe,2FAA2F,aAAa,KAAK,eAAe,+FAA+F,aAAa,KAAK,qBAAqB,sEAAsE,aAAa,8PAA8P,aAAa,sBAAsB,aAAa,iCAAiC,eAAe,wCAAwC,wBAAwB,sZAAsZ,aAAa,kBAAkB,eAAe,qGAAqG,sBAAsB,8DAA8D,aAAa,kBAAkB,eAAe,oGAAoG,sBAAsB,4DAA4D,aAAa,2JAA2J,aAAa,qHAAqH,mFAAmF,aAAa,sYAAsY,aAAa,0IAA0I,eAAe,8DAA8D,yBAAyB,qEAAqE,6BAA6B,2EAA2E,aAAa,uGAAuG,eAAe,oMAAoM,aAAa,uFAAuF,yBAAyB,4CAA4C,eAAe,sIAAsI,aAAa,+DAA+D,6BAA6B,8CAA8C,eAAe,4JAA4J,aAAa;AAC9pJ;AACA,sB;;;;;;;;;;;;;ACHA;AACA,8BAA8B,YAAY,mBAAmB,oBAAoB;AACjF;AACA,sB;;;;;;;;;;;;;ACHA;AACA,0CAA0C,MAAM,+DAA+D,qCAAqC,cAAc,mEAAmE,WAAW,4BAA4B,aAAa,uBAAuB,kBAAkB,gIAAgI,aAAa,iCAAiC,cAAc,gEAAgE,aAAa,wFAAwF,aAAa,uFAAuF,aAAa,sEAAsE,YAAY,gDAAgD,qBAAqB,wCAAwC,aAAa,yCAAyC,gBAAgB,wEAAwE,eAAe,0CAA0C,iBAAiB,+HAA+H,aAAa,4BAA4B,uBAAuB,eAAe,WAAW,iIAAiI,uBAAuB,0IAA0I,aAAa,gBAAgB,YAAY,sCAAsC,cAAc,wCAAwC,uBAAuB,KAAK,cAAc,kBAAkB,gBAAgB,yJAAyJ,wBAAwB,gBAAgB,YAAY,wCAAwC,wBAAwB,0DAA0D,wBAAwB,KAAK,wBAAwB,uEAAuE,uBAAuB,gBAAgB,YAAY,sCAAsC,uBAAuB,0DAA0D,uBAAuB,mBAAmB,uBAAuB,wDAAwD,oBAAoB,GAAG,0BAA0B,kCAAkC,WAAW,YAAY,aAAa,gBAAgB,wBAAwB,8DAA8D,sBAAsB,yDAAyD,0BAA0B,2CAA2C,aAAa,4FAA4F,aAAa,gFAAgF,aAAa,iFAAiF,0BAA0B,2CAA2C,aAAa,iHAAiH,aAAa,wCAAwC,aAAa;AACv/G;AACA,sB;;;;;;;;;;;;;ACHA;AACA,oFAAoF,WAAW,8FAA8F,gBAAgB,qBAAqB,eAAe;AACjP;AACA,sB;;;;;;;;;;;;;ACHA;AACA,+FAA+F,QAAQ,4FAA4F,UAAU,4CAA4C,iBAAiB,WAAW,cAAc,yBAAyB,cAAc;AAC1U;AACA,sB;;;;;;;;;;;;;ACHA;AACA,mFAAmF,WAAW,6FAA6F,gBAAgB,iBAAiB,eAAe,kBAAkB,gBAAgB,uBAAuB,eAAe;AACnT;AACA,sB;;;;;;;;;;;;;ACHA;AACA,oFAAoF,WAAW,uHAAuH,gBAAgB,6DAA6D,kBAAkB,kCAAkC,eAAe;AACtW;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA,2IAA2I,kBAAkB,6CAA6C,YAAY,gEAAgE,SAAS,+CAA+C,QAAQ,kIAAkI,UAAU,6CAA6C,UAAU,qCAAqC,eAAe,kKAAkK,iBAAiB,2BAA2B,oBAAoB,+IAA+I,UAAU,sFAAsF,eAAe,uCAAuC,kBAAkB,kGAAkG,iBAAiB,4BAA4B,wBAAwB,8CAA8C,mBAAmB,iDAAiD,mBAAmB,WAAW,cAAc,WAAW,gBAAgB,gFAAgF,gBAAgB,gDAAgD,eAAe;AACrmD;AACA,sB;;;;;;;;;;;;;ACHA;AACA,i0BAAi0B,mBAAmB,qIAAqI,uBAAuB,MAAM,iBAAiB;AACvgC;AACA,sB;;;;;;;;;;;;;ACHA;AACA,8IAA8I,SAAS,wGAAwG,WAAW,qSAAqS,WAAW,iGAAiG,gBAAgB;AAC3qB;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;ACHA;AACA;AACA;AACA,sB;;;;;;;;;;;;;;ACFA,cAAc,mBAAO,CAAC,iHAAqG;;AAE3H;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,+DAAmD;;AAExE;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;AClBf,cAAc,mBAAO,CAAC,uHAA2G;;AAEjI;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,kEAAsD;;AAE3E;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;AClBf,cAAc,mBAAO,CAAC,mIAAuH;;AAE7I;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,qEAAyD;;AAE9E;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;AClBf,cAAc,mBAAO,CAAC,yHAA6G;;AAEnI;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,kEAAsD;;AAE3E;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;AClBf,cAAc,mBAAO,CAAC,mIAAuH;;AAE7I;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,kEAAsD;;AAE3E;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;AClBf,cAAc,mBAAO,CAAC,iIAAqH;;AAE3I;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,kEAAsD;;AAE3E;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;AClBf,cAAc,mBAAO,CAAC,2HAA+G;;AAErI;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,kEAAsD;;AAE3E;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;AClBf,cAAc,mBAAO,CAAC,6HAAiH;;AAEvI;;AAEA;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,kEAAsD;;AAE3E;;AAEA,GAAG,KAAU,EAAE,E","file":"app.bundle.js","sourcesContent":["export const firebaseConfig = {\n    apiKey: \"AIzaSyCA5oDmWevmZy2Ginb9eKcIe72Titk7szM\",\n    authDomain: \"snapdragon-222014.firebaseapp.com\",\n    databaseURL: \"https://snapdragon-222014.firebaseio.com\",\n    projectId: \"snapdragon-222014\",\n    storageBucket: \"snapdragon-222014.appspot.com\",\n    messagingSenderId: \"947213844747\",\n    appId: \"1:947213844747:web:97c1a5e664a670de\"\n};\n","import { utils } from 'utils/utils';\nimport { firebaseConfig } from 'api/firebase/credentials';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/storage';\nimport 'firebase/firestore';\n\nfirebase.initializeApp(firebaseConfig);\n\nconst db = firebase.firestore();\n\nconst getSpeciesWhere = async props => {\n\n    try {\n        const { key, operator, value, limit } = props;\n\n        let speciesRef = limit\n                        ? db.collection(`species`).where(key, operator, value).limit(limit)\n                        : db.collection(`species`).where(key, operator, value);\n\n        const querySnapshot = await speciesRef.get();\n\n        const docs = [];\n\n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n\n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesWhere');\n    }\n};\n  \nconst getSpecies = async props => {\n    const item = await getSpeciesWhere(props);\n    return item;\n};\n\nconst getSpeciesNames = async () => {\n\n    try {\n        const speciesPropertiesRef = db.collection(`species`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await speciesPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n\n    } catch(e) {\n      // logAPIError(e, 'getSpeciesNames');\n    }\n};\n\nconst getTaxaNames = async () => {\n\n    try {\n        const taxaPropertiesRef = db.collection(`taxa`).where(\"collection_property\", \"==\", 'names');\n\n        const querySnapshot = await taxaPropertiesRef.get();\n        \n        const docs = [];\n    \n        querySnapshot.forEach(doc => {\n            docs.push(doc.data());\n        });\n    \n        return await docs;\n    } catch(e) {\n      // logAPIError(e, 'getTaxaNames');\n    }\n};\n\nconst getSpeciesByIconicTaxon = async (item, number = 6) => {\n\n    const { iconicTaxon, lichen: isLichen, eolId } = item;\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    const randomId = getRandomId();\n    \n    if(isLichen) {\n        querySnapshot = await species.where('lichen', '==', true).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    } else {\n        querySnapshot = await species.where('iconicTaxon', '==', iconicTaxon.toLowerCase()).where(firebase.firestore.FieldPath.documentId(), operator, randomId).limit(number).get();\n    }\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getSpeciesByName = async (itemName, force = false) => {\n\n    if(!itemName) return '';\n\n    const items = await getSpecies({ key:'name', operator:'==', value:itemName });\n    \n    return items[0];\n};\n\nconst getTaxaWhere = async props => {\n\n    const { language, key, operator, value, limit } = props;\n  \n    const taxaRef = limit\n                        ? db.collection(`taxa_en`).where(key, operator, value).limit(limit)\n                        : db.collection(`taxa_en`).where(key, operator, value);\n  \n    const querySnapshot = await taxaRef.get();\n  \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return await docs;\n};\n  \nconst getFamiliesByIconicTaxon = async (iconicTaxonRank, iconicTaxonValue, isLichen, config) => {\n    return await getTaxaWhere({ language: config.language, key: 'iconicTaxon', operator: '==', value: iconicTaxonValue, limit: 7 });\n};\n\nconst getTaxonByName = async (config, name) => {\n\n    try {\n                \n        let taxon = {};\n\n        const taxaRef = db.collection(`taxa_en`).where('name', '==', name);\n\n        const querySnapshot = await taxaRef.get();\n        \n        if(querySnapshot.docs.length > 0) {\n            querySnapshot.forEach(doc => {\n                taxon = doc.data();                                \n          });          \n        }\n\n        return taxon;\n\n    } catch (e) {\n      // logAPIError(e, 'getTaxonByName');\n      return e;\n    }\n};\n\nconst getAsyncTraitsByNameAndCollection = async (name, collection = 'traits_en', language) => {\n\n    try {\n    \n    const languageTraits = db.collection(collection).where(\"name\", \"==\", name);\n  \n    const traits = await languageTraits.get();\n  \n    return await traits;\n    \n    } catch(e) {\n      // logAPIError(e, 'getAsyncTraitsByNameAndCollection');\n    }\n};\n\nconst getTraitsBySpeciesName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'traits_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getTraitsByTaxonName = async (name, language = 'en') => {\n\n    let traits;\n\n    const querySnapshot = await getAsyncTraitsByNameAndCollection(name, 'taxa_en', language);\n\n    if(!querySnapshot || !querySnapshot.docs) return new Promise(resolve => resolve({}));\n\n    if(querySnapshot.docs.length > 0) {\n        querySnapshot.forEach(doc => {\n        traits = doc.data();\n      });\n    }\n\n    return await traits;\n};\n\nconst getBirdsong = async xcID => {\n\n  const storage = firebase.storage();\n  const storageRef = storage.ref();\n  const url = await storageRef.child(`birdsong/${xcID}.mp3`).getDownloadURL();\n  return url;\n\n};\n\nconst addSpecies = async species => {\n\n    let docRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            return {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || ''\n            }\n        });\n    }\n\n    try {\n        docRef = await db.collection('species').add(species);\n    } catch(e) {\n      // logAPIError(e, 'addSpecies');\n    }\n\n    return docRef;\n};\n\nconst updateSpecies = async species => {\n\n    let speciesDocRef;\n\n    if(species.images) {\n        species.images = species.images.map(image => {\n            const updatedSpecies = {\n                license: image.license || '',\n                photographer: image.photographer || '',\n                rightsHolder: image.rightsHolder || '',\n                source: image.source || '',\n                title: image.title || '',\n                url: image.url || '',\n            };\n            if(image.starred) {\n                updatedSpecies.starred = image.starred;\n            }\n            if(image.provider) {\n                updatedSpecies.provider = image.provider;\n            }\n            return updatedSpecies;\n        });\n    }\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update(species); \n\n};\n\nconst updateSpeciesNames = async (species, names) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", species.name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    return await speciesDocRef.update({names}); \n\n};\n\nconst deleteSpeciesByName = async name => {\n\n    const speciesRef = db.collection(`species`).where('name', '==', name);\n\n    speciesRef.get().then(function(querySnapshot) {\n        querySnapshot.forEach(function(doc) {\n        doc.ref.delete();\n        });\n    });\n};\n\nconst addTraits = async (name, trait, collection = 'traits_en') => {\n\n    let speciesTraitsRef;\n\n    try {\n\n        const querySnapshot = await db.collection(collection).where(\"name\", \"==\", name).get();\n        \n        if(querySnapshot.empty) {\n            trait.name = name;\n            return await db.collection(collection).add(trait);\n        } else {\n            querySnapshot.forEach(function(doc) {\n                speciesTraitsRef = doc.ref;\n            });\n\n            await speciesTraitsRef.update(trait); \n\n            return 'Update successful';\n        }\n    } catch(e) {\n      // logAPIError(e, 'addTraits');\n      return `Update failed. Error ${e.message}.`;\n    }\n};\n\nconst addSpeciesRelationship = async (type, traits) => {\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(traits.map(async trait => {\n\n                let speciesTraitsRef;\n        \n                const querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", trait.name).get();\n\n                if(querySnapshot.empty) {\n                    trait.name = name;\n                    speciesTraitsRef = await db.collection(`traits_en`).add(trait);\n                } else {\n                    querySnapshot.forEach(function(doc) {\n                        speciesTraitsRef = doc.ref;\n                    });\n                }\n\n                speciesTraitsRef.update({\n                    [type]: firebase.firestore.FieldValue.arrayUnion(trait.update)\n                });\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return 'Relationship added.';\n\n    } catch (e) {\n      // logAPIError(e, 'addSpeciesRelationship');\n      return e.message;\n    }\n\n};\n\nconst addPhotos = async (name, photos) => {\n\n    let speciesDocRef;\n\n    const querySnapshot = await db.collection(\"species\").where(\"name\", \"==\", name).get();\n    \n    querySnapshot.forEach(function(doc) {\n        speciesDocRef = doc.ref;\n    });\n\n    try {\n        return speciesDocRef.update({\n            images: firebase.firestore.FieldValue.arrayUnion(...photos)\n        });\n    } catch (e) {\n      // logAPIError(e, 'addPhotos');\n      return e.message;\n    }\n\n};\n\nconst deleteSpeciesTraitField = async (name, field) => {\n\n    let querySnapshot, speciesTraitsRef;\n  \n    try {\n        try {\n          querySnapshot = await db.collection(\"traits_en\").where(\"name\", \"==\", name).get();\n      \n          querySnapshot.forEach(function(doc) {\n              speciesTraitsRef = doc.ref;\n          });\n        } catch(e) {\n          // logAPIError(e, 'deleteSpeciesTraitField unable to obtain reference to species trait');\n        }\n      \n        var removeField = speciesTraitsRef.update({\n            [field] : firebase.firestore.FieldValue.delete()\n        });\n  \n        return removeField;\n\n      } catch(e) {\n        // logAPIError(e, 'deleteSpeciesTraitField');\n    }    \n  };\n\nconst getRandomSpecies = async number => {\n\n    let querySnapshot, docs = [];\n\n    var species = db.collection(\"species\");\n\n    const random = utils.getRandomInt(2);\n\n    const operator = random === 0 ? '>=' : '<=';\n\n    querySnapshot = await species.where(firebase.firestore.FieldPath.documentId(), operator, getRandomId()).limit(number).get();\n\n    querySnapshot.forEach(doc => {\n        docs.push(doc.data());\n    });\n\n    return docs;\n};\n\nconst getDefinition = (term, glossary, required) => {\n\n    const terms = term.split(',');\n\n    let definitions = [];\n\n    for(let term of terms) {        \n        const definition = glossary.find(definition => definition.term.toLowerCase() === term.trim().toLowerCase() || definition.alt && definition.alt.toLowerCase() === term.trim().toLowerCase());\n        definitions.push(definition);\n    };\n    \n    return definitions.filter(definition => definition);\n};\n\nconst getTraitDefinitions = (glossary, required, trait) => {\n    \n    const traits = glossary.filter(entry => entry.trait).filter(entry => entry.trait.toLowerCase() === trait.toLowerCase());\n\n    return new Promise(resolve => resolve(traits));\n};\n\nconst addTaxon = async props => {\n\n    const { language, taxon } = props;\n  \n    let docRef;\n  \n    try {\n        docRef = await db.collection(`taxa_en`).add(taxon);\n        return 'Taxon saved.';\n    } catch(e) {\n      // logAPIError(e, 'addTaxon');\n    }\n  \n    return docRef;\n};\n\nconst getSpeciesInParallel = async species => {\n\n    try {\n        return Promise.all(species.map(sp => {                    \n            return firestore.getSpeciesByName(sp.name).then(async item => {\n                return await {\n                    ...item, description: sp.description || '', time: sp.time || 0, questionIds: sp.questionIds || [], quickId: sp.quickId || ''\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      logAPIError(e, 'getSpeciesInParallel');\n    }\n};\n\nconst getSpeciesByNameInParallel = async itemNames => {\n    try {\n        return Promise.all(itemNames.map(name => {                    \n            return firestore.getSpeciesByName(name).then(async item => {\n                return await {                         \n                    ...item\n                }\n            })                    \n        }));\n\n    } catch (e) {\n      // logAPIError(e, 'getSpeciesByNameInParallel');\n    }\n};\n\nconst addCollection = async (collection, user) => {\n\n    if(!user) return;\n\n    const collectionRef = await updateCollection(collection);\n\n    if(collectionRef) return;\n\n    collection.user = user;\n\n    let docRef = null;\n  \n    try {\n        docRef = await db.collection('collections').add(collection);\n    } catch(e) {\n      // logAPIError(e, 'addCollection');\n      console.log('addCollection:', e);\n    }\n  \n    return docRef;\n  };\n\n  const updateCollection = async collection => {\n\n    try {\n        collection.items = []; // we don't want to update items as we have the info we need in species; the rest we get at runtime\n\n        let docRef = null;\n\n        const querySnapshot = await db.collection(\"collections\").where(\"name\", \"==\", collection.name).get();\n        \n        querySnapshot.forEach(function(doc) {\n            docRef = doc.ref;\n        });\n\n        if(docRef) {\n            await docRef.update(collection);            \n        }\n\n        return docRef;\n\n    } catch(e) {\n      // logAPIError(e, 'updateCollection');\n      return { message: 'Failure', details: e.message, success : false };\n    }\n\n};\n  \n  const getCollectionsWhere = async props => {\n  \n    const { key, operator, value, limit } = props;\n  \n    const collectionRef = limit\n      ? db.collection('collections').where(key, operator, value).limit(limit)\n        : key\n            ? db.collection('collections').where(key, operator, value)\n            : db.collection('collections');\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const getCollections = async => {\n    return getCollectionsWhere({});\n  };\n\n  const addQuestion = async question => {\n\n    let docRef;\n  \n    try {\n        docRef = await db.collection('questions').add(question);\n    } catch(e) {\n      // logAPIError(e, 'getCollectionsWhere');\n    }\n  \n    return docRef;\n  };\n  \n  const getQuestionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`questions`).where(key, operator, value)\n            : db.collection(`questions`);\n  \n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return docs;\n  };\n\n  const addDefinition = async definition => {\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n\n    let docRef;\n\n    if(querySnapshot.empty) {\n\n        try {\n            docRef = await db.collection('glossary').add(definition);\n        } catch(e) {\n          // logAPIError(e, 'getQuestionsWhere');\n        }\n      \n        return docRef;        \n\n    } else {\n        throw 'That definition already exists!';\n    }\n\n  };\n  \n  const getDefinitionsWhere = async props => {\n  \n    const { key, operator, value } = props;\n  \n    const collectionRef = key \n            ? db.collection(`glossary`).where(key, operator, value)\n            : db.collection(`glossary`);\n\n    const querySnapshot = await collectionRef.get();\n    \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push({ ...doc.data(), id: doc.id });\n    });\n  \n    return docs;\n  };\n\n  const getDefinitionById = async id => {\n    return db.collection('glossary').doc(id).get().then(data => {\n        return { ...data.data(), id: data.id };\n    });\n  };\n\n  const getBatchDefinitionsById = async ids => {\n\n    const terms = [];\n\n    try {\n        const batch = db.batch();\n\n        const readyBatch = async () => {\n            \n            return Promise.all(ids.map(async id => {\n\n                const term = await getDefinitionById(id);\n\n                terms.push(term);\n\n            }));\n        };\n\n        await readyBatch();\n\n        await batch.commit();\n\n        return terms;\n\n    } catch (e) {\n      // logAPIError(e, 'getBatchDefinitionsById');\n    }\n  }\n\n  const getDefinitionsByTaxa = taxa => {\n      return getDefinitionsWhere({\n        key: 'taxon',\n        operator: 'in', \n        value: taxa\n    });\n  };\n\n  const updateDefinition = async definition => {\n\n    let docRef;\n\n    const querySnapshot = await db.collection(\"glossary\").where(\"term\", \"==\", definition.term).get();\n    \n    querySnapshot.forEach(function(doc) {\n        docRef = doc.ref;\n    });\n\n    return await docRef.update(definition);\n  };\n\n  const getUnits = async (props = { langage: 'en '}) => {\n\n    const { language = 'en', key, operator, value } = props;\n\n    const unitsRef = db.collection(`units_${language}`);\n  \n    const querySnapshot = await unitsRef.get();\n  \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      docs.push(doc.data());\n    });\n  \n    return await docs;\n  };\n\n  const getEpithets = async props => {\n\n    const { language = 'en', key, operator, value } = props;\n\n    const epithetssRef = db.collection(`epithets_${language}`);\n  \n    const querySnapshot = await epithetssRef.get();\n  \n    const docs = [];\n  \n    querySnapshot.forEach(doc => {\n      console.log(doc.data());\n      docs.push(doc.data());\n    });\n  \n    return await docs;\n  };\n\nexport const firestore = {\n\n    getSpecies,\n    getSpeciesNames,\n    getTaxaNames,\n    getSpeciesByName,\n    getSpeciesByIconicTaxon,\n    getFamiliesByIconicTaxon,\n    getTaxonByName,\n    getTraitsBySpeciesName,\n    getTraitsByTaxonName,\n    getBirdsong,\n    getRandomSpecies,\n    getDefinition,\n    getSpeciesInParallel,\n    getSpeciesByNameInParallel,\n    getCollections,\n    getCollectionsWhere,\n    getQuestionsWhere,\n    \n    addSpecies,\n    addTraits,\n    addSpeciesRelationship,\n    addPhotos,\n    addTaxon,\n    addCollection,\n    addQuestion,\n    addDefinition,\n    \n    updateSpecies,\n    updateSpeciesNames,\n    updateCollection,\n    updateDefinition,\n  \n    deleteSpeciesByName,\n    deleteSpeciesTraitField,\n\n    getTraitDefinitions,\n    getDefinitionsWhere,\n    getDefinitionsByTaxa,\n    getDefinitionById,\n    getBatchDefinitionsById,\n    getUnits,\n    getEpithets\n};\n\nconst getRandomId = () => {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let autoId = '';\n    for (let i = 0; i < 20; i++) {\n        autoId += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return autoId;\n};","export const lichen = [\n    {\n        term: \"Lichen\",\n        definition: \"Composite organism of algae or cyanobacteria (or rarely, both), fungi and yeast living in a mutualistic relationship.\",\n        wiki: \"https://en.wikipedia.org/wiki/Lichen\",\n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Fruticose\",\n        definition: \"Growing like tuft or multiple-branched leafless mini-shrub (beardy), upright or hanging down, flat or round 3D branches.\",\n        wiki: \"https://en.wikipedia.org/wiki/Fruticose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Foliose\",\n        definition: \"Having flat, 2D leaf-like structures.\",\n        wiki: \"https://en.wikipedia.org/wiki/Foliose_lichen\",\n        level: 2,\n        image: {\n            url: 'https://content.eol.org/data/media/58/87/e8/509.25630291.260x190.jpg'\n        },\n        branch: 'classification'\n    },\n    {\n        term: \"Crustose\",\n        definition: \"Forming a crust that strongly adheres to a substrate (crusty).\",\n        wiki: \"https://en.wikipedia.org/wiki/Crustose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Leprose\",\n        definition: \"Having a powdery or granular surface.\",\n        wiki: \"https://en.wikipedia.org/wiki/Leprose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Squamulose\",\n        definition: \"Composed of small, often overlapping squamules( scales).\",\n        wiki: \"https://en.wikipedia.org/wiki/Squamulose_lichen\",\n        level: 2,\n        branch: 'classification'\n    },\n    {\n        term: \"Soredium\",\n        definition: \"Common reproductive structures of lichens.\",\n        wiki: \"https://en.wikipedia.org/wiki/Soredium\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Epiphyte\",\n        definition: \"An organism that grows on the surface of a plant and derives its moisture and nutrients from the air, rain, water or surrounding debris.\",\n        wiki: \"https://en.wikipedia.org/wiki/Epiphyte\",\n        branch: 'classification'\n    },\n    {\n        term: \"Gametophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. It is the sexual phase (see Sporophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Gametophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Sporophyte\",\n        definition: \"One of the two alternating phases in the life cycle of plants and algae. In seed plants it is the roots, stem, leaves, cones and flowers (see Gametophyte).\",\n        wiki: \"https://en.wikipedia.org/wiki/Sporophyte\",\n        branch: 'general'\n    },\n    {\n        term: \"Thallus\",\n        definition: \"Nonreproductive, undifferentiated tissue, or vegetative body part of a lichen. Usually visually prominent.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Thallus type\",\n        definition: \"Means of distinuguishing lichen e.g. foliose, crustose.\", \n        level: 2,\n        branch: 'general'\n    },\n    {\n        term: \"Squamule\",\n        definition: \"One of the scalelike lobes of the thallus of a lichen.\", \n        level: 2,\n        branch: 'morphology'\n    },\n    {\n        term: \"Podetium\",\n        definition: \"The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: \"Apothecium\",\n        definition: \"Wide, open, saucer-shaped or cup-shaped fruit body. Sessile and fleshy.\",\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Rhizine',\n        definition: 'Multiceullar, root-like structures which anchor licen to substrate.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Erhizinate',\n        definition: 'Without rhizines.',\n        technical: 'true',\n        branch: 'general'\n    },\n    {\n        term: 'Hapter',\n        definition: 'Short, peg-like attachments of the lower surface of lichen to the substrate on which they grow.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Common reproductive structures of lichen.',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Cortex (lichen)',\n        definition: 'Composed of closely packed fungal hyphae that protects thallus from water loss (evaporation).',\n        branch: 'morphology'\n    },\n    {\n        term: 'Holdfast',\n        definition: 'Means by which a (bushy) lichen is attached to the substrate.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Disc',\n        definition: 'Spore-bearing part of the fruiting body of a lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lobe',\n        definition: 'Leaf-like part of a leafy (foliose) lichen.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Medulla',\n        definition: 'Fungal part of the thallus situated below the skin like upper cortex.',\n        branch: 'morphology'\n    },\n    {\n        term: 'Mycobiont',\n        definition: 'Fungal component of a lichen.',\n        branch: 'general'\n    },\n    {\n        term: 'Photobiont',\n        definition: 'Photosynthetic partner in a lichen (alga or cyanobacterium).',\n        branch: 'general'\n    },\n    {\n        term: 'Cyanobacteria',\n        definition: 'Phylum of bacteria that obtain their energy through photosynthesis. They produce oxygen.',\n        branch: 'classification'\n    },\n    {\n        term: '(Green) Algae',\n        definition: 'Heterogeneous grouping of eukaryotes photosynthesis',\n        branch: 'classification'\n    },\n    {\n        term: 'Placodioid',\n        definition: 'Crustose lichen which radiates out from its centre.',\n        wiki: 'https://en.wikipedia.org/wiki/Placodioid_lichen',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Pruinescence',\n        definition: 'A \"frosted\" or dusty looking coating on top of a surface.',\n        wiki: 'https://en.wikipedia.org/wiki/Pruinescence',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Lecanorine',\n        definition: 'Shaped like a plate with a surrounding ring similar tissue to main non-fruiting body (after genus Lecanora).',\n        wiki: 'https://en.wikipedia.org/wiki/Lecanorine_lichen',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Apothecium',\n        definition: 'Wide, open, saucer-shaped or cup-shaped fruit body.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascocarp#Apothecium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascus',\n        definition: 'Spore-bearing cell produced in ascomycete fungi.',\n        wiki: 'https://en.wikipedia.org/wiki/Ascus',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Ascomycota',\n        definition: '(Ascomycetes or Sac fungi) One of two main fungi divisions (phylum), characterised by spore-containing ascus. Majority of fungal symbionts in lichens are ascomycetes',\n        wiki: 'https://en.wikipedia.org/wiki/Ascomycota',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Basidiomycota',\n        definition: '(Basidiomycetes (Mushrooms)) Reproduce sexually via formation of specialised end cells (basidia) bearing external meiospores.',\n        wiki: 'https://en.wikipedia.org/wiki/Basidiomycota',\n        technical: 'true',\n        branch: 'classification'\n    },\n    {\n        term: 'Soredium',\n        definition: 'Powdery (asexual) reproductive structure (propagule) composed of fungal hyphae wrapped around the photobiont.',\n        wiki: 'https://en.wikipedia.org/wiki/Soredium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Isidium',\n        definition: 'Vegetative (asexual) reproductive structure. Outgrowths from the thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Isidium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n    {\n        term: 'Podetium',\n        definition: 'The upright secondary thallus in Cladonia lichens. It is a hollow stalk extending from the primary thallus.',\n        wiki: 'https://en.wikipedia.org/wiki/Podetium',\n        technical: 'true',\n        branch: 'morphology'\n    },\n];","import { contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nlet inatListeners = [];\nlet RECORDS_PER_PAGE = 200;\n\nconst unsubscribe = listener => {\n    inatListeners = inatListeners.filter(l => l !== listener);\n};\n\nexport const listenToInatRequests = listener => {\n    inatListeners.push(listener);\n    return unsubscribe;\n};\n\nconst getBasePath = config => {\n    \n    const month = config.guide.season.type === 'all_year' \n            ? ''\n            : config.guide.season.observableMonths.map(month => month.index).join(',');\n\n    const perPage = config.guide.perPage || RECORDS_PER_PAGE;\n\n    const basePath = `https://api.inaturalist.org/v1/observations/species_counts?captive=false&rank=species&per_page=${perPage}&month=${month}`;\n\n    return basePath;\n};\n\nexport const getInatSpecies = async config => {\n\n    const speciesNames = await firestore.getSpeciesNames();\n\n    const snapdragonSpeciesNames = speciesNames[0].value;\n\n  //  snapLog('snapdragon species', snapdragonSpeciesNames);\n\n    const iconicTaxaKeys = Object.keys(iconicTaxa).join(',');\n\n    const getIconicTaxa = config => {\n      \n      try {\n\n          const iconicTaxa = config.guide.iconicTaxa.map(taxon => taxon.id) || iconicTaxaKeys;\n\n          // Create new taxonic group for reptilia, etc?\n\n          if(iconicTaxa.find(taxon => taxon === 'mammalia')) {\n              iconicTaxa.push('reptilia');\n          }\n\n          const taxa = iconicTaxa.map(taxon => {\n              if(taxon === 'lepidoptera') taxon = 'insecta';            \n              return taxon;\n          });\n\n          return taxa;\n\n      } catch (e) {\n        logError('Error for getIconicTaxa: ', e);\n    }\n    };\n\n    const getUserOrProjectKeyValuePair = config => {\n        if(!config.guide.inatId) return '';\n        const param = config.guide.inatId.param;    \n        const id = config.guide.inatId.id;\n        const parameter = `&${param}=${id}`;\n        return id ? parameter : '';\n    };\n\n    const getAllInatObservations = async (config, snapdragonSpeciesNames) => {\n        let snapdragonSpecies = [];\n        let records = [];\n        let keepGoing = true;\n        let page = 1;\n        while (keepGoing) {\n          try {\n            let recordsFromThisRequest = await getInatObservations(config, page);\n            await records.push.apply(records, recordsFromThisRequest);\n            let matches = recordsFromThisRequest.filter(record => contains(record.taxon.name, snapdragonSpeciesNames));\n            await snapdragonSpecies.push.apply(snapdragonSpecies, matches);\n            page = page + 1;\n            let noMoreRecords = recordsFromThisRequest.length < RECORDS_PER_PAGE;\n            let recordsCountReached = snapdragonSpecies.length >= config.guide.noOfRecords;\n           snapLog('snapdragonSpecies', snapdragonSpecies);\n           snapLog('records', records);\n            if (noMoreRecords || recordsCountReached) {\n                keepGoing = false;\n                return snapdragonSpecies;\n            }\n          } catch(e) {\n            logError('getInatObservations', e);\n            return snapdragonSpecies;\n          }\n        }\n    }\n\n    const loadSpeciesInParallel = async observations => {\n        try {\n            return Promise.all(observations.map(observation => {\n                return firestore.getSpeciesByName(observation.taxon.name).then(async item => {\n                    return await {                         \n                        ...item, \n                        observationCount: observation.taxon.observations_count, \n                        iconicTaxon: observation.taxon.iconic_taxon_name\n                    };\n                })                    \n            }));\n\n        } catch (e) {\n          logError('loadSpeciesInParallel: ', e);\n        }\n    };\n\n    const getInatObservations = async (config, page) => {\n\n      try {\n\n        let lat = '', lng = '', placeId = '';\n\n        let radius = config.guide.speciesRange ? parseInt(config.guide.speciesRange) : 10;\n        let inat = '';\n        \n        switch(config.guide.locationType) {\n            case 'place':\n                placeId = config.guide.place.id;\n                break;\n            case 'longLat':\n                lat = config.guide.coordinates.lat;\n                lng = config.guide.coordinates.long;\n                break;\n            case 'inat':\n                lat = '';\n                lng = '';\n                placeId = '';\n                radius = '';\n                inat = `&${config.guide.inatId.param}=${config.guide.inatId.key}`;\n                break;\n        }\n\n        const iconicTaxa = getIconicTaxa(config);\n        const params = config.guide.guideTpe === 'INAT' ? getUserOrProjectKeyValuePair(config) : '';\n        const url = getBasePath(config) + `&page=${page}&iconic_taxa=${iconicTaxa}&place_id=${placeId}&lat=${lat}&lng=${lng}&radius=${radius}${inat}${params}`;\n\n       snapLog('inat species request url', url);\n\n        const recordsFromThisRequest = await fetch(url);\n\n       snapLog('inat recordsFromThisRequest', recordsFromThisRequest);\n\n        const json = await recordsFromThisRequest.json();\n        inatListeners.forEach(listener => listener(\n            { page: json.page, numberOfRequests: Math.ceil(json.total_results/json.RECORDS_per_page) }\n        ));\n        return json ? await json.results : [];\n      } catch(e) {\n        logError('getInatObservations', e);\n        return [];\n      }\n    }\n    \n    let observations;\n\n    try {\n      observations = await getAllInatObservations(config, snapdragonSpeciesNames);\n      observations = observations.filter(observation => contains(observation.taxon.name, snapdragonSpeciesNames));\n      observations = take(config.guide.noOfRecords, utils.sortBy(observations.filter(item => item), 'observationCount', 'desc'));\n    } catch(e) {\n      logError('getAllInatObservations', e);\n    }\n\n   snapLog('observations', observations);\n\n    if(!observations) return [];\n\n    return await loadSpeciesInParallel(observations);\n}\n\nexport async function getInatPlaceId(place) {\n    \n    const url = `https://api.inaturalist.org/v1/places/autocomplete?q=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json  = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getInatTaxonStats(item, config, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/species_counts?&verifiable=true&taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getHistogram(item, placeId) {\n\n    const place = placeId || 'any';\n    const taxonName = item.name;\n    const url = `https://api.inaturalist.org/v1/observations/histogram?taxon_name=${taxonName}&place_id=${place}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\nexport async function getAutocompleteBy(q, by) {\n\n    // currently set up for USERS and PROJECTS but PLACES? Not sure\n    // https://api.inaturalist.org/v1/places/autocomplete?q=O%20Parque%20Natural%20da%20Arr%C3%A1bida\n\n    const url = `https://api.inaturalist.org/v1/${by}/autocomplete?q=${q}`;\n    const recordsFromThisRequest = await fetch(url);\n    const json = await recordsFromThisRequest.json();\n    return json;\n}\n\n// https://www.inaturalist.org/observations/danielhartley.json?m1=1&m2=11&iconic_taxa[]=Fungi","import { contains } from 'ramda';\n\nexport const iconicTaxa = {\n\n    // kingdom\n    FUNGI: 'Fungi',\n    PLANTAE: 'Plants',\n\n    // phlyum\n    // MOLLUSCA: 'Mollusks',\n\n    // class\n    AVES: 'Birds',\n    AMPHIBIA: 'Amphibians',\n    REPTILIA: 'Reptilians',\n    MAMMALIA: 'Mammals',\n    INSECTA: 'Insects',\n    // ACTINOPTERYGII: 'Ray-finned fishes',\n    ARACHNIDA: 'Arachnids',\n\n    //order\n    LEPIDOPTERA: 'Lepidoptera'\n};\n\nexport const matchTaxonKey = (taxonomy, iconicTaxaKeys) => {\n    let taxon = { rank: '', value: '' };\n    if(!taxonomy) return taxon;\n    if(taxonomy.order && contains(taxonomy.order.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'order', value: taxonomy.order.toLowerCase() };\n    if(taxon.value === '' && taxonomy.class && contains(taxonomy.class.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'class', value: taxonomy.class.toLowerCase() };\n    if(taxon.value === '' && taxonomy.kingdom && contains(taxonomy.kingdom.toLowerCase(), iconicTaxaKeys)) taxon = { rank: 'kingdom', value: taxonomy.kingdom.toLowerCase() };\n\n    return taxon;\n}\n\nexport const matchTaxon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return false;\n    let iconicTaxaKeys = Object.keys(iconicTaxa).map(key => key.toLowerCase());\n    const taxon = matchTaxonKey(taxonomy, iconicTaxaKeys);\n    return taxon;\n};\n\nexport const findRankByIconicTaxon = (taxonomy, iconicTaxon) => {\n    return Object.keys(taxonomy).find(key => taxonomy[key].toLowerCase() === iconicTaxon.toLowerCase());\n};\n\nexport const matchIcon = (taxonomy, iconicTaxa) => {\n    if(!taxonomy) return '';\n    const rank = matchTaxon(taxonomy, iconicTaxa).value;\n    if(!rank) return ''\n    return matchRank(rank);\n}\n\nexport const matchRank = rank => {\n    let icon;\n    switch(rank.toLowerCase()) {\n        case 'aves':\n            icon = 'fas fa-dove';\n            break;\n        case 'lepidoptera':\n            icon = 'fas fa-barcode';\n            break;\n        case 'amphibia':\n            icon = 'fas fa-frog';\n            break;\n        case 'mammalia':        \n        case 'actinopterygii':\n            icon = 'fas fa-paw';\n            break;\n        case 'reptilia':\n            icon = 'fas fa-registered';\n            break;\n        case 'insecta':\n        case 'arachnida':\n            icon = 'fas fa-bug';\n            break;\n        case 'fungi':\n            icon = './static/icons/mushroom.svg';\n            break;\n        case 'plantae':\n            icon = 'fas fa-leaf';\n            break;\n    }\n    return icon;\n}","export const infraspecifics = [\n    {\n        name: 'Brassica rapa',\n        subspecies: [\n            {\n                variety: 'chinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Bok choy\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Pak choi\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'rapa',\n                names: [\n                    {\n                        \"vernacularName\": \"Turnip\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'oleifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Field mustard\",\n                        \"language\": \"en\"\n                    }\n                ]\n            },\n            {\n                variety: 'pekinensis',\n                names: [\n                    {\n                        \"vernacularName\": \"Chinese cabbage\",\n                        \"language\": \"en\"\n                    },\n                    {\n                        \"vernacularName\": \"Wombok\",\n                        \"language\": \"en\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        name: 'Brassica oleracea',\n        variety: 'oleracea',\n        subspecies: [\n            {\n                variety: 'oleracea',\n                names: [\n                    {\n                        \"vernacularName\": \"Wild cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Brassica_oleracea',\n                        eol: 'http://eol.org/pages/1283630/overview'              \n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'alba',\n                names: [\n                    {\n                        \"vernacularName\": \"Cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Cabbage',\n                        eol: 'http://eol.org/pages/38390/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'sabauda',\n                names: [\n                    {\n                        \"vernacularName\": \"Savoy cabbage\",\n                        \"language\": \"en\",\n                        \"wiki\": 'https://en.wikipedia.org/wiki/Savoy_cabbage',\n                        eol: 'http://eol.org/pages/5148887/overview'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'rubra',\n                names: [\n                    {\n                        \"vernacularName\": \"Red cabbage\",\n                        \"language\": \"en\",\n                        wiki: 'https://en.wikipedia.org/wiki/Red_cabbage'\n                    },\n                ]\n            },\n            {\n                variety: 'capitata',\n                group: 'Capitata',\n                form: 'acuta',\n                names: [\n                    {\n                        \"vernacularName\": \"Cone cabbage\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Collards\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'viridis',\n                group: 'Acephala',\n                names: [\n                    {\n                        \"vernacularName\": \"Kale\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gemmifera',\n                group: 'Gemmifera',\n                names: [\n                    {\n                        \"vernacularName\": \"Brussels sprouts\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'gongylodes',\n                group: 'Gongylodes',\n                names: [\n                    {\n                        \"vernacularName\": \"Kohlrabi\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'italica',\n                group: 'Italica',\n                names: [\n                    {\n                        \"vernacularName\": \"Broccoli\",\n                        \"language\": \"en\"\n                    },\n                ]\n            },\n            {\n                variety: 'botrytis',\n                group: 'Botrytis',\n                names: [\n                    {\n                        \"vernacularName\": \"Cauliflower\",\n                        \"language\": \"en\"\n                    },\n                ]\n            }\n        ]\n    }\n];","import { lichen } from 'api/glossary/lichen';\n\nexport const nonTaxaGroup = [\n    { LICHEN_FORM: 'Lichen Form' }     \n];\n\nexport const getNonTaxa = units => {\n    \n    const SD = units;\n    return [\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FRUTICOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Fruticose').definition,\n            quickId: 'Free-standing branching tubes',            \n            names: [ { language: \"en\", name: 'Fruticose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.SOIL}, ${SD.substrate.ROCKS}` },  \n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Letharia vulpina', 'Evernia prunastri', 'Ramalina polymorpha', 'Roccella phycopsis', 'Ramalina farinacea' ],\n            wiki: 'https://en.wikipedia.org/wiki/Fruticose_lichen',\n            url: '81/9d/a2/542.9769039745.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.FOLIOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Foliose').definition,\n            quickId: 'Leaflike, with flat sheets of tissue not tightly bound',\n            names: [ { language: \"en\", name: 'Foliose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW },\n                { name: SD.name.USAGE, value: SD.usage.FOOD, examples: [ { language: 'en', value: 'Deer, goats, and caribou' } ] },\n                { name: SD.name.USAGE, value: SD.usage.BIRDS_NEST },\n                { name: SD.name.LIFE_SPAN, value: '30-60a' },\n                { name: SD.name.MEDICINAL_PROPERTIES, value: `${SD.medicinalProperties.ANTIBIOTIC}`},\n                { name: SD.name.CHARACTERISTIC, value: SD.characteristic.BIOINDICATOR},\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.LOW }\n            ],\n            examples: [ 'Lobaria pulmonaria', 'Xanthoria parietina'  ],\n            genera: [ 'Usnea', 'Cladonia' ],\n            wiki: 'https://en.wikipedia.org/wiki/Foliose_lichen',\n            url: '81/66/25/542.8580717370.260x190.jpg'\n        },\n        {\n            group: nonTaxaGroup[0].LICHEN_FORM,\n            id: SD.thallusType.CRUSTOSE,\n            type: SD.nonTaxaType.FORM,\n            definition: lichen.find(l => l.term === 'Crustose').definition,\n            quickId: 'Crustlike, growing tight against the substrate',\n            names: [ { language: \"en\", name: 'Crustose lichen'}],\n            traits: [\n                { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n                { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.HIGH }\n            ],\n            examples: [ 'Graphis scripta', 'Diploschistes scruposus', 'Caloplaca ochracea', 'Ophioparma ventosa' ],\n            wiki: 'https://en.wikipedia.org/wiki/Crustose',\n            url: '7f/69/15/542.3258067212.260x190.jpg'\n        },\n        // {\n        //     group: nonTaxaGroup[0].LICHEN_FORM,\n        //     id: SD.thallusType.SQUAMULOSE,\n        //     type: SD.nonTaxaType.FORM,\n        //     definition: lichen.find(l => l.term === 'Squamulose').definition,\n        //     quickId: 'Tightly clustered and slightly flattened pebble-like units',\n        //     names: [ { language: \"en\", name: 'Squamulose lichen'}],\n        //     traits: [\n        //         { name: SD.name.SUBSTRATE, value: `${SD.substrate.BARK}, ${SD.substrate.ROCKS}` },\n        //         { name: SD.name.SUBSTRATE_ADHERANCE, value: SD.level.MEDIUM }\n        //     ],\n        //     examples: [ 'Squamarina cartilaginea', 'Vahliella leucophaea', 'Cladonia subcervicornis' ],\n        //     wiki: 'https://en.wikipedia.org/wiki/Squamulose'\n        // },\n    ]\n}","import { isEmpty } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { firestore } from 'api/firebase/firestore';\n\nlet language;\n\nexport const traitValuesHandler = async config => {\n\n    if(language === config.language) return;\n\n    language = config.language;\n\n    if(!isEmpty(store.getState().units)) return;\n\n    const unitsArray = await firestore.getUnits();\n\n    const unitObjects = {};\n\n    unitsArray.forEach(unit => {\n        const key = Object.keys(unit)[0];\n        unitObjects[key] = unit[key];      \n      });\n\n    var units = { ...unitObjects };\n\n    actions.boundUpdateUnits(units);\n};\n","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nexport const getTraitsForTests = (units, item, alreadyTestedTraits = []) => {\n\n    if(item.traits === undefined || (Object.keys(item.traits).length === 0 && item.traits.constructor === Object)) return {};\n\n    const excludedTraits = [ ...traitsHandler.getTraitsToExclude(), ...alreadyTestedTraits, 'lookalikes', 'relationships' ].filter(et => et);\n\n    const trait = traitsHandler.getRandomTrait(item.traits, excludedTraits);\n\n    if((Object.keys(trait).length === 0 && trait.constructor === Object)) return {};\n \n    let { traitsPool, help } = \n        trait.unit \n            ? traitsHandler.getTraitsPoolForUnits(trait)\n            : trait.role\n                ? traitsHandler.getTraitsPoolForRoles(trait)\n                : traitsHandler.getTraitsPool(trait, units);\n\n    const question = trait.unit\n                        ? trait.value.join('-')\n                        : trait.value.join(',');\n                           \n    trait.value = trait.value.map(t => utils.capitaliseFirst(t));\n\n    const answers = traitsHandler.getSetOfTraitAnswers(traitsPool, trait);        \n\n    help = help || trait.key;\n\n    const overrides = { question: 'Match the trait', help, trait };\n\n    return { question, answers, overrides, typedItemTraits: item.traits };\n};  ","import { utils } from 'utils/utils';\n\nconst GOOGLE_ACCESS_KEY = process.env.GOOGLE_API_MAPS_KEY;\n\nconst getHTML5Location = () => {\n\n  return new Promise(function (resolve, reject) {\n    function success(position) {\n      resolve([position.coords.latitude, position.coords.longitude]);\n    }\n\n    function error(e) {\n      logError('getHTML5Location', e);\n      resolve({\n        '0': 0,\n        '1': 0,\n      });\n    }\n\n    navigator.geolocation.getCurrentPosition(success, error);\n  });\n};\n\nexport const getLocation = (config) => {\n  if(!!config.coordinates && config.coordinates.lat && config.coordinates.long) {\n  //  snapLog('geolocation config',config);\n    return new Promise(resolve => {\n        resolve(config.coordinates);\n    });\n  } else {\n  //  snapLog('geolocation config', config);\n    return getHTML5Location();\n  }  \n};\n\nconst listeners = [];\n\nconst parseMapBoxPlace = async (json, config) => {\n  const place = await json;\n  const locality = place.features.find(f => f.place_type[0] === 'locality');\n  const region = place.features.find(f => f.place_type[0] === 'region');\n  const country = place.features.find(f => f.place_type[0] === 'country');\n\n  place.locality = locality ? locality.text : '';\n  place.region = region ? region.text : '';\n  place.country = country ? country.text : '';\n  place.area = place.region || place.country;\n  \n  place.shortLocation = `${place.locality}, ${place.country}`;\n  place.longLocation = `${place.locality}, ${place.region}, ${place.country}`;\n \n  place.summary = config.isLandscapeMode ? `Species from ${place.longLocation}` : `Species from ${place.shortLocation}`;\n  const placePromise = new Promise(resolve => {\n    resolve(place);\n  });\n  const updatedPlace = await placePromise;\n  return await updatedPlace;\n}\n\nconst getMapBoxPlace = async (long, lat, config) => {\n  const token = 'pk.eyJ1IjoiZGFuaGFydGxleSIsImEiOiJjam84Zjd3aGowMDdoM2ttaDAzeDk4bHJ6In0.oEcO6w3DhHUv_mXrFW1clg';  \n  const longitude = long;// || '-9.163009899999999';\n  const latitude = lat;// || '38.7155762';  \n  const language = config.language || 'en';\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${longitude},${latitude}.json?language=${language}&access_token=${token}`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const place = await parseMapBoxPlace(json, config);\n  listeners.forEach(listener => listener(place));\n  return await place;\n}\n\nexport const getPlace = async (config, force = false) => {\n  if(!!config.place && !force) {\n    const response = new Promise(resolve => {\n      resolve(config.place);\n    });\n    const json = await response;    \n    return await json;\n  } else {       \n    const coordinates = await getLocation(config);        \n    const latitude = coordinates['0'] || coordinates.lat;\n    const longitude = coordinates['1'] || coordinates.long;\n    config.coordinates = { lat: latitude, long: longitude };\n\n    return getMapBoxPlace(longitude, latitude, config);\n  }\n};\n\nexport const listenToPlaceChange = listener => { \n  listeners.push(listener);\n};\n\nconst IPCountryLookup = async () => {\n  const ACCESS_KEY = '69402a39530c7ae8218dfaf69ef78337';  \n  const url = `http://api.ipstack.com/check?access_key=${ACCESS_KEY}`;\n  try {\n    const response = await fetch(url);\n    const json = await response.json();\n    const { country_code, country_name } = await json;\n    return { country_code, country_name };\n  } catch (error) {\n    console.warn(`ERROR(${err.code}): ${err.message}`);\n  }  \n}\n\nconst LocationLookup = async ip => {\n  const ACCESS_KEY = 'a8563e7b75654ae8b016dc52719dee3b';\n  const url = `https://api.ipgeolocation.io/ipgeo?apiKey=${ACCESS_KEY}&ip=${ip}&fields=city,state_prov,country_name,latitude,longitude&output=json`;\n  const response = await fetch(url);\n  const json = await response.json();\n  const { city, state_prov, country_name, latitude, longitude } = await json; \n  return { city, state_prov, country_name, latitude, longitude };\n}\n\nconst IPLookup = async () => {  \n  const url = 'https://api.ipgeolocation.io/getip';\n  const response = await fetch(url);\n  const json = await response.json();\n  const { ip } = await json; \n  return ip;\n}\n\nexport const getIPLocation = async (config, force = false) => {\n\n     if(!!config.ipLocation && !force) {\n      const response = new Promise(resolve => {\n        resolve(config.ipLocation);\n      });\n      const json = await response;    \n      return await json;\n     } else {\n      const ip = await IPLookup();\n      const { city, state_prov, country_name, latitude, longitude } = await LocationLookup(ip);\n      return { city, state_prov, country_name, latitude, longitude };\n     }\n};\n\nexport async function GoogleFindPlace(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const url = `https://maps.googleapis.com/maps/api/place/findplacefromtext/json?input=${place}&inputtype=textquery&key=${GOOGLE_ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { candidates } = await json; \n  return candidates;\n}\n\nlet service;\nlet requireNewSession = true;\nlet isScriptReady = false;\nlet SESSION_TOKEN;\nlet current_term = '';\n\nexport async function GoogleAutocompleteServerSide(place) {\n\n  // https://developers.google.com/places/web-service/search\n\n  const url = `https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${place}&inputtype=textquery&key=${GOOGLE_ACCESS_KEY}&fields=name`;\n\n  const response = await fetch(url);\n  const json = await response.json();\n  const { predictions } = await json; \n  return predictions;\n}\n\nconst createScriptRequest = (src, callback) => {\n  requireNewSession = false;\n  const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = src;\n    document.body.appendChild(script);\n    script.addEventListener(\"load\", () => {\n      isScriptReady = true;\n      callback();\n    });\n}\n\nexport const GoogleAutocomplete_Original = (place, callback) => {\n\n  const getPredictions = () => {\n    \n    if(!isScriptReady) return;\n\n    const displaySuggestions = function(predictions, status) {\n      if (status != google.maps.places.PlacesServiceStatus.OK) {\n        alert(status);\n        return;\n      }\n  \n      callback(predictions);\n    };\n    if(!service) {\n      service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions({ input: place }, displaySuggestions);\n  };\n\n  if(requireNewSession) {\n    \n    const SESSION_TOKEN = utils.createSessionToken();\n\n    const src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_ACCESS_KEY}&sessiontoken=${SESSION_TOKEN}&libraries=places`;\n\n    createScriptRequest(src, () => {\n      getPredictions();\n    });\n  } else {\n    getPredictions();\n  }\n}\n\nexport const GoogleAutocomplete = (place, callback) => {\n\n  const getPredictions = SESSION_TOKEN => {\n\n    if(!service) {\n        service = new google.maps.places.AutocompleteService();      \n    }\n    \n    service.getPlacePredictions(\n      { \n        input: place,\n        // sessionToken: SESSION_TOKEN\n      }, \n      callback);\n  };\n\n  if(requireNewSession) {\n    SESSION_TOKEN = new google.maps.places.AutocompleteSessionToken();\n    getPredictions(SESSION_TOKEN);\n    current_term = place;\n    requireNewSession = false; //or on expires/error, get a new one\n  } else {\n    if(place !== current_term) {\n      getPredictions(SESSION_TOKEN);\n    }\n    current_term = place;\n  }\n}\n\nexport const GooglePlaceDetails = (placeId, callback) => {\n  \n  var request = {\n    placeId: placeId,\n    // sessionToken: SESSION_TOKEN\n  };\n\n  var service = new google.maps.Geocoder();\n      service.geocode(request, callback);  \n\n  requireNewSession = true;\n}","import { renderTemplate } from 'ui/helpers/templating';\n\nimport modalsTemplate from 'index-helpers/modals.html';\n\nimport { library, dom } from '@fortawesome/fontawesome-svg-core'\n\nimport { faBookOpen, faLanguage, faEnvelope, faUserSlash, faUserCheck, faCog, faChevronDown, faGlasses, faDove, faFrog, faPaw, faBug, faLeaf, faBarcode, faSun, faRegistered, faChevronUp, faChalkboard, faTimes, faTimesCircle, faCheck, faExternalLinkAlt, faExclamation, faClone, faCopyright, faSlidersH, faUndo, faHome, faBars, faAlignLeft, faStopwatch } from '@fortawesome/free-solid-svg-icons'; // fas\nimport { faArrowAltCircleLeft, faArrowAltCircleRight, faRegistered as faRegisteredFar } from '@fortawesome/free-regular-svg-icons'; // far\nimport { faYoutube } from '@fortawesome/free-brands-svg-icons'; // fab\n\n// https://fontawesome.com/v5.9.0/how-to-use/with-the-api/setup/library/\n\nlibrary.add(\n  faBookOpen, faLanguage, faEnvelope, faUserSlash, faUserCheck, faCog, faChevronDown, faGlasses, faDove, faFrog, faPaw, faBug, faLeaf, faRegistered, faBarcode, faSun, faChevronUp, faChalkboard, faTimes, faTimesCircle, faCheck, faExternalLinkAlt, faExclamation, faClone, faCopyright, faSlidersH, faUndo, faHome, faBars, faAlignLeft, faStopwatch,\n  faArrowAltCircleLeft, faArrowAltCircleRight, faRegisteredFar,\n  faYoutube\n)\n\ndom.watch();\n\nexport const handleWindowResize = () => {\n\n  const setWindowHeight = () => {\n\n      const iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream; \n      const iw = (iOS) ? screen.width : window.innerWidth; \n      const ih = (iOS) ? screen.height : window.innerHeight;\n\n      const verticalHeight = window.innerHeight * 0.01;                \n\n      document.documentElement.style.setProperty('--vh', verticalHeight + 'px');\n      document.documentElement.style.setProperty('--vhGrid', verticalHeight * 100  + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlock', (verticalHeight * 7.5) + 'px');\n      document.documentElement.style.setProperty('--vhRunningBlocks', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhStandardBlock', (verticalHeight * 10) + 'px');\n      document.documentElement.style.setProperty('--vhHalfStandardBlock', (verticalHeight * 5) + 'px');\n      document.documentElement.style.setProperty('--vhOneAndHalfStandardBlock', (verticalHeight * 15) + 'px');\n      document.documentElement.style.setProperty('--vhDoubleStandardBlock', (verticalHeight * 20) + 'px');\n      document.documentElement.style.setProperty('--vhCarousel', (verticalHeight * 30) + 'px');\n      document.documentElement.style.setProperty('--vhButtonBlock', (verticalHeight * 9) + 'px');\n      document.documentElement.style.setProperty('--vhRow', (verticalHeight * 11) + 'px');\n      document.documentElement.style.setProperty('--vhFixtures', (verticalHeight * 15) + 5 + 'px');\n      document.documentElement.style.setProperty('--vhCalendar', (verticalHeight * 11) + 'px');                \n\n      const fixtures = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhFixtures').replace('px', ''));\n      const largeImage = ((verticalHeight * 100) - fixtures) / 3;\n\n      document.documentElement.style.setProperty('--vhLargeImage', largeImage + 'px');\n      document.documentElement.style.setProperty('--vhSmallImageCarousel', verticalHeight * 36 + 'px');           \n      document.documentElement.style.setProperty('--vhExtraSmallImageCarousel', verticalHeight * 36    + 'px');           \n\n      const horizontalWidth = window.innerWidth * 0.01;\n\n      document.documentElement.style.setProperty('--vw', horizontalWidth + 'px');\n\n      document.documentElement.style.setProperty('--vwGrid', horizontalWidth * 100  + 'px');\n      document.documentElement.style.setProperty('--vwGridNegative', (horizontalWidth * -100) + 52  + 'px');\n      document.documentElement.style.setProperty('--vhScrollingTop', (horizontalWidth * 56.25) + (verticalHeight * 10) + 'px');\n  };\n\n  setWindowHeight();\n\n  window.addEventListener('resize', () => {\n      setWindowHeight();\n  });\n};\n\nexport const loadModalHTML = () => {\n\n  const template = document.createElement('template');\n        template.innerHTML = modalsTemplate;\n\n  const parent = document.querySelector('body');\n\n  renderTemplate({}, template.content, parent);\n};","import \"babel-polyfill\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport 'ui/css/snapdragon-colours.css';\nimport 'ui/css/snapdragon.css';\nimport 'ui/css/common.css';\nimport 'ui/css/species-list.css';\nimport 'ui/css/snapdragon-media.css';\nimport 'ui/css/non-main.css';\nimport 'quiz/style.scss';\n\nimport { utils } from 'utils/utils';\nimport { store, persistor } from 'redux/store';\nimport { nextLesson } from 'ui/setup/next-lesson';\nimport { nextLayout } from 'ui/setup/next-layout';\nimport { nextItem } from 'ui/setup/next-item';\nimport { renderHeaders } from 'ui/fixtures/headers';\nimport { renderScore } from 'ui/fixtures/score';\nimport { renderHome } from 'ui/screens/home/home';\nimport { renderNavigation, renderLoginChanges } from 'ui/fixtures/navigation';\nimport { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { traitValuesHandler } from 'api/traits/trait-types';\nimport { initialiseConfig } from 'ui/helpers/location-helper';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderLoggedIn } from 'ui/fixtures/login';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\nimport { lessonModalHandler } from 'ui/screens/cards/test-card-modal-handler';\nimport { loadMainHTML, handleWindowResize, loadModalHTML } from 'index-helpers/media-helper';\nimport { snapLog, logError, logAPIError } from 'ui/helpers/logging-handler';\nimport * as Sentry from '@sentry/browser';\n\nconst onLoadHandler = () => {\n\n  // loadMainHTML();\n  loadModalHTML();\n\n  setTimeout( async () => {\n\n    Sentry.init({ dsn: 'https://9d9d8654a6a345a3af09df89cb615bde@o136894.ingest.sentry.io/302756' });\n\n    handleWindowResize(); \n\n    // const purgeData = cookieHandler.hasUserBeenAwayTooLong();\n\n    // if(purgeData) {\n    //     persistor.purge();\n    //     window.location.reload(true);\n    // } else {\n    //   const lastVisitedCookie = cookieHandler.setLastVisitedCookie(Date());\n    // }\n\n    const lastVisitedCookie = cookieHandler.setLastVisitedCookie(Date());\n\n    let lessonPlan;\n\n    try {\n\n        const { config, counter: currentCounter, lessonPlan: statePlans, collections } = store.getState();\n\n        lessonPlan = statePlans;\n\n        config.isPortraitMode = window.matchMedia(\"(max-width: 767px)\").matches;\n        config.isLandscapeMode = !config.isPortraitMode;\n\n        const counter = currentCounter ? { ...currentCounter } : { index: null, isLessonPaused: true };\n\n        actions.boundUpdateConfig(config);\n        actions.boundStopStartLesson(counter);\n\n        if(collections && collections.length === 0) {\n            const cloudCollections = await firestore.getCollections();\n            actions.boundUpdateCollections(cloudCollections);\n        }\n\n        subscription.add(renderHeaders, 'collection', 'flow');\n        renderNavigation();\n        subscription.add(renderNavigation, 'collection', 'flow');\n        renderLoginChanges();\n        subscription.add(renderLoginChanges, 'user', 'flow');\n        subscription.add(renderLoggedIn, 'user', 'flow');\n        subscription.add(renderHome, 'counter', 'flow'); // avoid adding as listener on page refresh\n        subscription.add(renderScore, 'score', 'flow');\n                \n        subscription.add(nextItem, 'layout', 'quiz');\n        subscription.add(nextLesson, 'counter', 'quiz');\n        subscription.add(nextLayout, 'counter', 'quiz');\n        \n        subscription.add(traitValuesHandler, 'config', 'localisation');\n\n        const updateConfig = async () => {\n            const initialisedConfig = await initialiseConfig(config);\n            actions.boundUpdateConfig(initialisedConfig);\n        };\n\n        if(!config.guide.locationType) {\n            updateConfig();\n        }\n\n        let glossary = await firestore.getDefinitionsByTaxa(['common', 'plantae', 'aves', 'fungi', 'insecta']);\n            glossary = utils.sortAlphabeticallyBy(glossary, 'term');\n        actions.boundCreateGlossary(glossary);\n        \n        lessonModalHandler.onCloseModal();\n\n    }\n    catch(e) {\n        console.log('home page error: ', e)\n        // persistor.purge();\n        // window.location.reload(true);        \n    }\n  });\n\n  window.snapLog = snapLog;\n  window.logError = logError;\n  window.logAPIError = logAPIError;\n\n  const script = document.createElement('script');\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${process.env.GOOGLE_API_MAPS_KEY}&libraries=places`;\n  document.body.appendChild(script);\n};\n\nonLoadHandler();","import { store } from 'redux/store';\nimport { types } from 'redux/actions/action-types';\n\nconst makeActionCreator = action => {\n    return function (value, meta) {\n      return { \n        type: action,\n        data: value,\n        meta: meta\n      }\n    }\n  }\n\nconst changeLessonPlans = makeActionCreator(types.CHANGE_LESSON_PLANS);\nconst changeLessonPlan = makeActionCreator(types.CHANGE_LESSON_PLAN);\nconst nextLesson = makeActionCreator(types.NEXT_LESSON);\nconst updateScore = makeActionCreator(types.UPDATE_SCORE);\nconst updateTraitScore = makeActionCreator(types.UPDATE_TRAIT_SCORE);\nconst nextLayout = makeActionCreator(types.NEXT_LAYOUT);\nconst nexItem = makeActionCreator(types.NEXT_ITEM);\nconst endRevision = makeActionCreator(types.END_REVISION);\nconst updateHistory = makeActionCreator(types.UPDATE_HISTORY)\nconst userProgress = makeActionCreator(types.SAVE_USER_PROGRESS);\nconst updateCollection = makeActionCreator(types.UPDATE_COLLECTION);\nconst resetCollection = makeActionCreator(types.RESET_COLLECTION);\nconst updateCollections = makeActionCreator(types.UPDATE_COLLECTIONS);\nconst changeCollectionItems = makeActionCreator(types.UPDATE_COLLECTION_ITEMS);\nconst nextRound = makeActionCreator(types.NEXT_ROUND);\nconst nextLevel = makeActionCreator(types.NEXT_LEVEL);\nconst updateConfig = makeActionCreator(types.UPDATE_CONFIG);\nconst stopStartLesson = makeActionCreator(types.STOP_START_LESSON);\nconst selectCollection = makeActionCreator(types.SELECT_COLLECTION);\nconst traitValuesHandler = makeActionCreator(types.UPDATE_LANGUAGE);\nconst updateUnits = makeActionCreator(types.UPDATE_UNITS);\nconst updateUser = makeActionCreator(types.UPDATE_USER);\nconst updateLesson = makeActionCreator(types.UPDATE_LESSON);\nconst saveLesson = makeActionCreator(types.SAVE_LESSON);\nconst removeSavedLesson = makeActionCreator(types.REMOVE_LESSON);\nconst updateVideoPlayer = makeActionCreator(types.UPDATE_VIDEO_PLAYER);\nconst createQuickFire = makeActionCreator(types.CREATE_QUICKFIRE);\nconst updateQuickFire = makeActionCreator(types.UPDATE_QUICKFIRE);\nconst createGlossary = makeActionCreator(types.CREATE_GLOSSARY);\nconst clickEvent = makeActionCreator(types.CLICK_EVENT);\nconst updateDecks = makeActionCreator(types.UPDATE_DECKS);\nconst updateDeck = makeActionCreator(types.UPDATE_DECK);\nconst nextDeck = makeActionCreator(types.NEXT_DECK);\nconst nextCard = makeActionCreator(types.NEXT_CARD);\nconst updateDeckState = makeActionCreator(types.UPDATE_DECK_STATE);\nconst updateDeckScore = makeActionCreator(types.UPDATE_DECK_SCORE);\nconst updateDeckScoreHistory = makeActionCreator(types.UPDATE_DECK_SCORE_HISTORY);\nconst updateDeckSettings = makeActionCreator(types.UPDATE_DECK_SETTINGS);\nconst clearDeckScoreHistory = makeActionCreator(types.CLEAR_DECK_SCORE_HISTORY);\n\nconst boundchangeLessonPlan = data => store.dispatch(changeLessonPlan(data));\nconst boundchangeLessonPlans = data => store.dispatch(changeLessonPlans(data));\nconst boundNextLesson = data => store.dispatch(nextLesson(data));\nconst boundAsyncNextLesson = data => store.dispatch(asyncNextLesson(data));\n\nconst asyncNextLesson = func => {\n  return function(dispatch) {\n    return func.then(response => {\n      return dispatch(nextLesson(response));\n    })\n  }  \n};\n\nconst boundUpdateScore = data => store.dispatch(updateScore(data));\nconst boundUpdateTraitScore = data => store.dispatch(updateTraitScore(data));\nconst boundNextLayout = data => store.dispatch(nextLayout(data));\nconst boundNextItem = data => store.dispatch(nexItem(data,{delay:500}));\nconst boundEndRevision = data => store.dispatch(endRevision(data));\nconst boundUpdateHistory = data => store.dispatch(updateHistory(data));\nconst boundSaveUserProgress = data => store.dispatch(userProgress(data));\nconst boundUpdateCollection = data => store.dispatch(updateCollection(data));\nconst boundResetCollection = data => store.dispatch(resetCollection(data));\nconst boundUpdateCollections = data => store.dispatch(updateCollections(data));\nconst boundUpdateCollectionItems = data => store.dispatch(changeCollectionItems(data));\nconst boundNextRound = data => store.dispatch(nextRound(data));\nconst boundNextLevel = data => store.dispatch(nextLevel(data));\nconst boundUpdateConfig = data => store.dispatch(updateConfig(data));\nconst boundStopStartLesson = data => store.dispatch(stopStartLesson(data));\nconst boundSelectCollection = data => store.dispatch(selectCollection(data));\nconst boundUpdateLanguage = data => store.dispatch(traitValuesHandler(data));\nconst boundUpdateUnits = data => store.dispatch(updateUnits(data));\nconst boundUpdateUser = data => store.dispatch(updateUser(data));\nconst boundUpdateLesson = data => store.dispatch(updateLesson(data));\nconst boundSaveLesson = data => store.dispatch(saveLesson(data));\nconst boundRemoveSavedLesson = data => store.dispatch(removeSavedLesson(data));\nconst boundUpdateVideoPlayer = data => store.dispatch(updateVideoPlayer(data));\nconst boundCreateQuickFire = data => store.dispatch(createQuickFire(data));\nconst boundUpdateQuickFire = data => store.dispatch(updateQuickFire(data));\nconst boundCreateGlossary = data => store.dispatch(createGlossary(data));\nconst boundClickEvent = data => store.dispatch(clickEvent(data));\nconst boundUpdateDecks = data => store.dispatch(updateDecks(data));\nconst boundUpdateDeck = data => store.dispatch(updateDeck(data));\nconst boundNextDeck = data => store.dispatch(nextDeck(data));\nconst boundNextCard = data => store.dispatch(nextCard(data));\nconst boundUpdateDeckState = data => store.dispatch(updateDeckState(data));\nconst boundUpdateDeckScore = data => store.dispatch(updateDeckScore(data));\nconst boundUpdateDeckScoreHistory = data => store.dispatch(updateDeckScoreHistory(data));\nconst boundUpdateDeckSettings = data => store.dispatch(updateDeckSettings(data));\nconst boundClearDeckScoreHistory = data => store.dispatch(clearDeckScoreHistory(data));\n\nexport const actions = {\n    boundchangeLessonPlans,\n    boundchangeLessonPlan,\n    boundAsyncNextLesson,\n    boundNextLesson,\n    boundUpdateScore,\n    boundUpdateTraitScore,\n    boundNextItem,\n    boundNextLayout,\n    boundEndRevision,\n    boundUpdateHistory,\n    boundSaveUserProgress,\n    boundUpdateCollection,\n    boundResetCollection,\n    boundUpdateCollections,\n    boundUpdateCollectionItems,\n    boundNextRound,\n    boundNextLevel,\n    boundUpdateConfig,\n    boundStopStartLesson,\n    boundSelectCollection,\n    boundUpdateLanguage,\n    boundUpdateUnits,\n    boundUpdateLesson,\n    boundSaveLesson,\n    boundRemoveSavedLesson,\n    boundUpdateVideoPlayer,\n    boundUpdateUser,\n    boundCreateQuickFire,\n    boundUpdateQuickFire,\n    boundCreateGlossary,\n    boundClickEvent,\n    boundUpdateDecks,\n    boundUpdateDeck,\n    boundNextDeck,\n    boundNextCard,\n    boundUpdateDeckState,\n    boundUpdateDeckScore,\n    boundUpdateDeckScoreHistory,\n    boundUpdateDeckSettings,\n    boundClearDeckScoreHistory\n};","const UPDATE_CONFIG = '[UPDATE_CONFIG] change to config';\nconst STOP_START_LESSON = '[STOP_START_LESSON] Pause or play current lesson';\nconst CHANGE_LESSON_PLANS = '[CHANGE_LESSON_PLANS] Edit the set of lesson plans';\nconst CHANGE_LESSON_PLAN = '[CHANGE_LESSON_PLAN] Edit the original lesson plan';\nconst SELECT_COLLECTION = '[SELECT_COLLECTION] Update the current selected collection';\nconst NEXT_ROUND = '[NEXT_ROUND] Go to next round';\nconst NEXT_LESSON = '[NEXT_LESSON] Get (new) lesson plan';\nconst NEXT_LAYOUT = '[NEXT_LAYOUT] Render next layout';\nconst NEXT_ITEM = '[NEXT_ITEM] Get next item';\n\nconst SAVE_USER_PROGRESS = '[SAVE_USER_PROGRESS] New collection';\nconst UPDATE_COLLECTION = '[UPDATE_COLLECTION] Change collection';\nconst UPDATE_COLLECTIONS = '[UPDATE_COLLECTIONS] Update collections list';\nconst RESET_COLLECTION = '[RESET_COLLECTION] Reset collection to initial state';\n\nconst UPDATE_SCORE = '[UPDATE_SCORE] Check user answer and update running score';\nconst UPDATE_TRAIT_SCORE = '[UPDATE_TRAIT_SCORE] Check user answer and update running score';\nconst END_REVISION = '[END_REVISION] Revision complete';\nconst UPDATE_HISTORY = '[UPDATE_HISTORY] Copy round score to history';\nconst UPDATE_COLLECTION_ITEMS = '[UPDATE_COLLECTION_ITEMS] Change collection items';\nconst NEXT_LEVEL = '[NEXT_LEVEL] Go to next level';\nconst UPDATE_LANGUAGE = '[UPDATE_LANGUAGE] Update the current language';\n\nconst UPDATE_UNITS = '[UPDATE_UNITS] Update units by config language';\nconst UPDATE_USER = '[UPDATE_USER] Update user';\nconst UPDATE_LESSON = '[UPDATE_LESSON] Create new lesson';\n\nconst SAVE_LESSON = '[SAVE_LESSON] Add lesson to saved lessons';\nconst REMOVE_LESSON = '[REMOVE_LESSON] Remove lesson from saved lessons on restarting lesson';\n\nconst UPDATE_VIDEO_PLAYER = '[UPDATE_VIDEO_PLAYER] Update video player state';\n\nconst UPDATE_QUICKFIRE = '[UPDATE_QUICKFIRE] Update quick-fire';\nconst CREATE_QUICKFIRE = '[CREATE_QUICKFIRE] Add quick-fire';\nconst CREATE_GLOSSARY = '[CREATE_GLOSSARY] Add glossary';\n\nconst CLICK_EVENT = '[CLICK_EVENT] User triggered event';\nconst UPDATE_DECK = '[UPDATE_DECK] Update deck';\nconst UPDATE_DECKS = '[UPDATE_DECKS] Update decks';\nconst NEXT_DECK = '[NEXT_DECK] Get next deck';\nconst NEXT_CARD = '[NEXT_CARD] Get next card';\nconst UPDATE_DECK_STATE = '[UPDATE_DECK_STATE] Update deck state';\nconst UPDATE_DECK_SCORE = '[UPDATE_DECK_SCORE] Update deck score';\nconst UPDATE_DECK_SCORE_HISTORY = '[UPDATE_DECK_SCORE_HISTORY] Update deck score history';\nconst UPDATE_DECK_SETTINGS = '[UPDATE_DECK_SETTINGS] Update deck settings';\nconst CLEAR_DECK_SCORE_HISTORY = '[CLEAR_DECK_SCORE_HISTORY] clear deck score history';\n\nexport const types = {\n    CHANGE_LESSON_PLANS,\n    CHANGE_LESSON_PLAN,\n    NEXT_LESSON,\n    NEXT_LAYOUT,\n    NEXT_ITEM,\n    UPDATE_SCORE,\n    UPDATE_TRAIT_SCORE,\n    END_REVISION,\n    UPDATE_HISTORY,\n    SAVE_USER_PROGRESS,\n    UPDATE_COLLECTION,\n    UPDATE_COLLECTION_ITEMS,\n    UPDATE_COLLECTIONS,\n    RESET_COLLECTION,\n    NEXT_ROUND,\n    NEXT_LEVEL,\n    UPDATE_CONFIG,\n    STOP_START_LESSON,\n    SELECT_COLLECTION,\n    UPDATE_LANGUAGE,\n    UPDATE_UNITS,\n    UPDATE_LESSON,\n    SAVE_LESSON,\n    REMOVE_LESSON,\n    UPDATE_VIDEO_PLAYER,\n    UPDATE_USER,\n    CREATE_QUICKFIRE,\n    UPDATE_QUICKFIRE,\n    CREATE_GLOSSARY,\n    CLICK_EVENT,\n    UPDATE_DECKS,\n    UPDATE_DECK,\n    NEXT_DECK,\n    NEXT_CARD,\n    UPDATE_DECK_STATE,\n    UPDATE_DECK_SCORE,\n    UPDATE_DECK_SCORE_HISTORY,\n    UPDATE_DECK_SETTINGS,\n    CLEAR_DECK_SCORE_HISTORY\n};","export const logger = store => next => action => {\n    \n    // console.log('NEXT: ', next);\n    // console.group(action.type)\n    // console.info('dispatching', action)\n    let result = next(action)\n    // console.log('next state', store.getState())\n    // console.groupEnd(action.type)\n\n    // console.clear();\n    // console.log(`^^^ ${action.type}`);\n  \n    return result;\n};","/**\n * Schedules actions with { meta: { delay: N } } to be delayed by N milliseconds.\n * Makes `dispatch` return a function to cancel the timeout in this case.\n */\nexport const timeoutScheduler = store => next => action => {\n    if (!action.meta || !action.meta.delay) {      \n      return next(action)\n    }\n  \n    if(store.getState().item === null) return next(action);\n    \n    let timeoutId = setTimeout(\n      () => {         \n        next(action)\n      },\n      action.meta.delay\n    )\n  \n    return function cancel() {\n      clearTimeout(timeoutId)\n    }\n  };","export const observeStore = (store, select, onChange, domain, layout) => {\n    let currentState = null;\n    let hasStateSignificantlyChanged = false;\n\n    function handleChange() {      \n      let nextState = select(store.getState());\n\n      hasStateSignificantlyChanged = nextState !== currentState;\n\n      if(currentState && Object.is(currentState.index,0)) {            \n        let areEqual = true;\n            areEqual = areEqual && Object.is(nextState.index, currentState.index);\n            areEqual = areEqual && Object.is(nextState.isLessonPaused, currentState.isLessonPaused);\n        hasStateSignificantlyChanged = !areEqual;\n      }\n\n      if(currentState && nextState) {\n        switch(layout) {\n          case 'screen-species-card':\n          case 'screen-taxon-card':\n          case 'screen-non-taxon-card':\n          case 'species-vernaculars':\n          case 'mixed-specimen-images':\n          case 'mixed-specimen-question':\n          case 'screen-common-to-latin':\n          case 'screen-genus-completion':\n          case 'screen-latin-to-common':\n          case 'media-match':\n            hasStateSignificantlyChanged = (nextState.nextItem && nextState.nextItem.name) !== (currentState.nextItem && currentState.nextItem.name);\n            break;\n        }\n      }\n\n      if(hasStateSignificantlyChanged) {\n        currentState = nextState;\n        onChange(currentState);\n      }\n    }\n  \n    handleChange.domain = domain;\n    handleChange.calledBy = onChange.name;\n    let unsubscribe = store.subscribe(handleChange);\n    if(hasStateSignificantlyChanged) {\n      handleChange();\n    }\n    return { unsubscribe, name: onChange.name };\n  };","import { types } from 'redux/actions/action-types';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nexport const config = (state = initialConfig, action) => {\n    switch(action.type) {\n        case types.UPDATE_COLLECTION:        \n            return { ...action.data.config, ...{ coordinates: state.coordinates }, ...{ place: state.place } };    \n        case types.UPDATE_CONFIG:\n            return { ...state, ...action.data };\n        case types.UPDATE_LANGUAGE:\n            return { ...state, ...{ language: action.data.lang } };\n        case types.SAVE_USER_PROGRESS:\n            return { ...state, ...action.data.lesson.config };\n        default: \n            return state;\n    }\n};\n\nexport const units = (state = {}, action) => {\n    switch(action.type) {\n        case types.UPDATE_UNITS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const user = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_USER:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const userAction = (state = null, action) => {\n    switch(action.type) {\n        case types.CLICK_EVENT:\n            return action.data;\n        default:\n            return state;\n    }\n};","import { enums } from 'ui/helpers/enum-helper';\nimport { clone } from 'ramda';\nimport { types } from 'redux/actions/action-types';\n\nexport const decks = (state = [{name:'random change', count: 0}], action) => {\n  switch(action.type) {\n    case types.UPDATE_DECKS:\n      return action.data;\n    case types.NEXT_DECK:\n      return state;\n    default:\n      return state;\n  }\n};\n\nexport const deck = (state = {}, action) => {\n  switch(action.type) {\n    case types.UPDATE_DECK:\n      return action.data;\n    case types.NEXT_CARD:\n      const deck = clone(state);\n      const currentCard = deck.cards.find(c => c.isCurrent);\n      if(currentCard) delete currentCard.isCurrent;\n        deck.cards[action.data.index].isCurrent = true;\n      return deck;\n    default: \n      return state;\n  }\n};\n\nexport const deckState = (state = enums.deckState.BEGIN, action) => {\n  switch(action.type) {\n    case 'persist/REHYDRATE': {\n        return {};\n    }\n    case types.UPDATE_DECK_STATE:\n      return action.data;\n    case types.NEXT_CARD:\n      return enums.deckState.SCORE;\n    case types.UPDATE_DECK_SCORE_HISTORY:\n      return enums.deckState.END;\n    default:\n      return state;\n  }\n};\n\nexport const deckScore = (state = { total: 0, correct: 0, incorrect: 0 }, action) => {\n  switch(action.type) {\n    case types.UPDATE_DECK_SCORE:\n      return action.data;\n    case types.UPDATE_DECK_STATE:\n      console.log(action.data);\n      //enums.deckState.BEGIN\n      return { total: 0, correct: 0, incorrect: 0 };\n    default:\n      return state;\n  }\n};\n\nexport const deckScoreHistory = (state = { total: 0, correct: 0, incorrect: 0 }, action) => {\n  switch(action.type) {\n    case types.UPDATE_DECK_SCORE_HISTORY:\n      const score = action.data;\n      return {\n        total: state.total + score.total,\n        correct: state.correct + score.correct,\n        incorrect: state.incorrect + score.incorrect\n      };\n    case types.CLEAR_DECK_SCORE_HISTORY:\n      return { total: 0, correct: 0, incorrect: 0 };\n  default:\n    return state;\n  }\n};\n\nexport const deckSettings = (state = { name: 'vernacular', language: 'en' }, action) => {\n  switch(action.type) {\n    case types.UPDATE_DECK_SETTINGS:\n      const name = action.data.name || state.name;\n      const language = action.data.language || state.language;\n      return { ...state, name, language };\n    default:\n      return state;\n  }\n};","const resetScore = ({\n    total = 0,\n    correct = 0,\n    taxon = '',\n    binomial = '',\n    answer = '',\n    success = false,\n    incorrect = 0,\n    question = '',\n    fails = [],\n    passes = [],\n    answers = [],\n    statement = '',\n    mode = '',\n    totalPassPoints = 0,\n    totalPoints = 0\n  } = {}) => ({\n    total, correct, taxon, binomial, answer, success, incorrect, question, fails, passes, answers, statement, mode, totalPassPoints, totalPoints\n  });\n\nexport const progressState = {\n    score: resetScore(),\n    resetScore\n}","import { types } from 'redux/actions/action-types';\n\nexport const lessonPlans = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLANS:\n            return action.data;\n        default:\n            return state;\n    }\n};\n\nexport const lessonPlan = (state = null, action) => {\n    switch(action.type) {\n        case types.CHANGE_LESSON_PLAN:\n            return action.data || state;\n        case types.NEXT_LESSON:\n            return action.data.lessonPlan || state;\n        case types.SAVE_USER_PROGRESS:\n            return action.data.lesson.lessonPlan || state;\n        default:\n            return state;\n    }\n};\n\nexport const layout = (state = null, action) => { \n    switch(action.type) {\n        case types.NEXT_LAYOUT:\n            if(state) {\n                if(action.data.screens.length > 1) { // sometimes BUG here\n                    return action.data;\n                } else {\n                    return action.data;\n                }\n            } else {\n                return action.data;\n            }\n        case types.SAVE_USER_PROGRESS:\n            return action.data.lesson.layout || state;\n        default: \n            return state;\n    }\n};\n","import { contains } from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nconst initialState = { currentRound: 1, rounds: 0, isNextRound: true };\n\nexport const lesson = (state = initialState, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE':\n            return state;\n        \n        case types.UPDATE_LESSON: {\n            return { ...state, ...action.data };\n        }\n\n        case types.NEXT_LAYOUT: {\n            return { ...state, layoutName: action.data.name };\n        }\n\n        case types.NEXT_ITEM: {\n\n            let layoutCounter, isNextRound, isLevelComplete, isLessonComplete = false;;\n\n            layoutCounter = state.layoutCounter ? state.layoutCounter + 1 : 1; \n            \n            layoutCounter = layoutCounter > state.layoutCount ? state.layoutCount : layoutCounter;\n            isNextRound = layoutCounter === state.layoutCount;\n            \n            if(state.layoutName && state.layoutName === 'summary') {\n                isNextRound = true;\n            }\n            isLevelComplete = state.rounds === 0 ? false : state.currentRound === state.rounds;\n    \n            if(state.level && state.level.id && state.levels) {\n                isLessonComplete = isLevelComplete && (state.levels[state.levels.length -1].id === state.level.id);\n            }\n\n            return { ...state, layoutCounter, isNextRound, isLevelComplete, isLessonComplete };\n        }\n\n        case types.NEXT_ROUND: {\n\n            let currentRound = action.data.lesson.currentRound;\n\n            let isLessonComplete = state.rounds === 0 ? false : currentRound === state.rounds;\n\n            let layoutCounter = state.layoutCounter;\n\n            let level = state.level;\n\n            return { ...state, currentRound, layoutCounter, level, isLessonComplete };\n        }\n\n        case types.NEXT_LESSON: {\n\n            let isNextRound = !!state.layoutCount ? state.layoutCounter === state.layoutCount : false;\n            let layoutCounter = 0;\n            let layoutCount = action.data.lesson.layoutCount;\n            \n            return { ...state, ...action.data.lesson, isNextRound, layoutCounter, layoutCount };\n        }\n\n        case types.NEXT_LEVEL: {\n         \n            return { ...state, currentRound: 1 };\n        }\n\n        case types.UPDATE_COLLECTION: {\n\n            if(action.data.config.mode === 'learn-again') {\n                const isNextRound = true;\n                const isLevelComplete = true;\n                return { ...state, currentRound: 1, isNextRound, isLevelComplete };\n\n            } else {\n                return state;\n            }\n        }\n\n        case types.SAVE_USER_PROGRESS:\n            return { ...state, ...action.data.lesson.lesson, isNextRound: true };\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const lessons = (state = [], action) => {\n\n    switch(action.type) {\n        case types.SAVE_LESSON:\n            const savedLessonNames = state.map(lesson => lesson.name);\n            if(contains(action.data.collection.name, savedLessonNames)) {\n                const lessons = state.filter(lesson => lesson.name !== action.data.collection.name);\n                      lessons.push(action.data);\n                return lessons;\n            } else {\n                return [ ...state, action.data ];\n            }\n            case types.REMOVE_LESSON: {\n                return state.filter(lesson => lesson.name !== action.data.name); \n            }\n        default:\n            return state;\n    }\n};","import { clone } from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\n\nexport const counter = (state = null, action) => {\n    switch(action.type) {\n        case 'persist/REHYDRATE':\n            return action.payload ? { ...action.payload.counter, isLessonRehydrated: true, isLessonPaused: true } : state;\n        case types.RESET_COLLECTION:\n            return { ...state, isLessonSelected: false, isLessonPaused: false };\n        case types.UPDATE_COLLECTION:    \n            return { ...state, isLessonRehydrated: false };\n        case types.NEXT_ROUND:\n            return { index: 0 };\n        case types.NEXT_LESSON:\n            return { index: 0 };\n        case types.NEXT_LEVEL:\n            return { ...state, index: action.data.index };\n        case types.STOP_START_LESSON:\n            const index = (state && state.index) || 0;\n            return { ...action.data, index };\n        case types.UPDATE_SCORE:\n        case types.END_REVISION:\n            let i = (state.index + 1) <= action.data.layoutCount ? (state.index + 1) : state.index;\n            return { index: i };\n        case types.SAVE_USER_PROGRESS:\n            return { ...state, ...action.data.lesson.counter, isLessonPaused: !!action.data.lesson.counter.isCustomLessonPausedOverride, userAction: action.data.userAction };\n        default:\n            return state;\n    }\n};\n\nexport const score = (state = progressState.score, action) => {\n    switch(action.type) {\n        case types.UPDATE_SCORE: {\n        \n            const score = { ...state, ...action.data, statement: action.data.statement || '' };\n\n            score.totalPoints = score.totalPoints || 0;\n            score.totalPassPoints = score.totalPassPoints || 0;\n            score.totalFailPoints = score.totalFailPoints || 0;\n\n            score.totalPoints += score.points ? score.points : 0;\n\n            score.total++;\n            if(score.success) {\n                score.totalPassPoints += score.points ? score.points : 0;\n                score.correct++;\n                score.passes.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question, \n                    statement: score.statement || '',\n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            else {\n                score.incorrect++;\n                score.totalFailPoints += score.points ? score.points : 0;\n                score.fails.push({ \n                    itemId: score.itemId, \n                    taxon: score.taxon, \n                    binomial: score.binomial, \n                    question: score.question,\n                    statement: score.statement || '', \n                    answer: score.answer,\n                    answers: score.answers,\n                    index: score.total - 1,\n                    success: score.success,\n                    questionText: score.questionText\n                });\n            }\n            score.questionTotal = score.passes.length + score.fails.length;\n            \n            score.passesTotals = clone(state.passesTotals) || {};\n            score.failsTotals = clone(state.failsTotals) || {};\n\n            if(score.success) {\n                score.passesTotals[score.itemId] = score.passesTotals[score.itemId] ? score.passesTotals[score.itemId] + 1 : 1;\n                if(!score.failsTotals[score.itemId]) {\n                    score.failsTotals[score.itemId] = 0;\n                }\n            } else {\n                score.failsTotals[score.itemId] = score.failsTotals[score.itemId] ? score.failsTotals[score.itemId] + 1 : 1;\n                if(!score.passesTotals[score.itemId]) {\n                    score.passesTotals[score.itemId] = 0;\n                }\n            }\n            \n            return { ...state, ...score};\n        }\n        case types.SELECT_COLLECTION:\n            return clone(progressState.score);\n        case types.NEXT_ROUND:\n        case types.NEXT_LEVEL:\n        case types.UPDATE_COLLECTION:\n            return { ...progressState.score, ...{ fails: [], passes: []} };\n        case types.UPDATE_TRAIT_SCORE: {\n            const bonusScores = state.bonusScores || [];\n            bonusScores.push(\n                {\n                    id: action.data.itemId,\n                    name: action.data.binomial,\n                    success: action.data.success,\n                    guid: action.data.guid\n                }\n            );\n            return { ...state, bonusScores: bonusScores };\n        }\n        case types.SAVE_USER_PROGRESS:\n            return action.data.lesson.score;\n        case types.NEXT_LESSON: {\n            return { ...state, mode: 'learn'};\n            }\n        default:\n            return state;\n    }       \n};\n\nexport const history = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_HISTORY: {\n          \n            const history = { scores: [] };\n\n            history.scores = state === null \n                ? [action.data] \n                : state.scores[state.scores.length-1].question === action.data.question\n                    ? [...state.scores]\n                    : [...state.scores, action.data];\n\n            let historyCorrect = 0;\n            let historyTotal = 0;\n        \n            history.scores.forEach(score => {\n                historyCorrect += score.correct;\n                historyTotal += score.total;\n            });\n\n            history.correct = historyCorrect;\n            history.total = historyTotal;\n            history.incorrect = history.total - history.correct;\n\n            return history;\n        }\n        case types.SELECT_COLLECTION:\n            return null;   \n        case types.SAVE_USER_PROGRESS:\n            return action.data.lesson.history;\n        default:\n            return state;\n    }\n};\n\nexport const videoPlayer = (state = null, action) => {\n    switch(action.type) {\n        case types.UPDATE_VIDEO_PLAYER:\n            return action.data;\n        default:\n            return state;\n    }\n};","import { types } from 'redux/actions/action-types';\n\n\nconst cleanAndReturnIncomingState = state => {\n    const quickFire = state;\n    if(quickFire.onClickFiltersLinkListeners) delete quickFire.onClickFiltersLinkListeners;\n    if(quickFire.onClickGlossaryLinkListeners) delete quickFire.onClickGlossaryLinkListeners;\n    return quickFire;\n};\n\nexport const quickFire = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        case types.UPDATE_QUICKFIRE:\n            return cleanAndReturnIncomingState(action.data);\n        default:\n            return state;\n    }\n}\n\nexport const glossary = (state = null, action) => {\n    switch(action.type) {\n        case types.CREATE_GLOSSARY:\n            return action.data;\n        default:\n            return state;\n    }\n}","import { contains, clone } from 'ramda';\n\nimport { types } from 'redux/actions/action-types';\n\nexport const collections = (state = [], action) => {\n    switch(action.type) {\n        case types.SELECT_COLLECTION:\n            const cols = [ ...state ];\n            cols.forEach(col => {\n                if(col.id === action.data.id) {\n                    col.selected = true;\n                } else {\n                    col.selected = false;\n                }\n            });\n            return cols;\n        case types.UPDATE_COLLECTIONS: {            \n            return state ? [ ...state, ...action.data ] : action.data;\n        }\n        case types.UPDATE_COLLECTION: {\n\n            const collections = [ ...state ];\n\n            collections.forEach(collection => {\n                if(collection.id === action.data.collection.id) {\n                    collection = action.data.collection;\n                }\n            });\n\n            return collections;\n        }\n        case types.SAVE_USER_PROGRESS: {\n\n            action.data.lesson.collection.isActive = true;\n\n            const isCollectionUpdate = contains(action.data.lesson.collection.id, state.map(collection => collection.id));\n            if(isCollectionUpdate) {\n                return [ ...state.filter(collection => collection.id !== action.data.lesson.collection.id), action.data.lesson.collection ];\n            } else {\n                return [ ...state, action.data.lesson.collection ];\n            }\n        }\n        default:\n            return state;\n    }\n};\n\nexport const collection = (state = { id: 0 }, action) => {\n\n    const getNextRound = (action, state) => {        \n\n        let lesson = action.data.lesson;\n        let itemIndex = (lesson.moduleSize * (lesson.currentRound - 1));\n        let nextItem = state.items[itemIndex];\n        \n        if(lesson.isLevelComplete) {\n            itemIndex = 0;\n            nextItem = state.items[itemIndex];\n        }        \n        return { itemIndex, nextItem };\n    };\n\n    const updateCollection = (state, action) => {\n        \n        let collection = { ...state, ...action.data.collection };\n        if(state.id && state.id === action.data.collection.id ) {\n            collection.itemIndex = state.itemIndex;\n        }\n        let nextItem = collection.items[collection.itemIndex];\n        \n        if(action.data.config.mode === 'review') {\n            collection.allItems = action.data.collection.allItems;\n        }\n\n        if(action.data.config.mode === 'learn-again') {\n            collection.itemIndex = 0;\n            collection.nextItem = collection.items[collection.itemIndex];            \n        }\n\n        return { collection, nextItem };\n    };\n    \n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.SELECT_COLLECTION: {\n            return action.data;\n        }\n        case types.UPDATE_COLLECTION_ITEMS: {\n            const collection = clone(state);\n            collection.items = action.data.filter(item => !item.isDeselected);\n            return collection;\n        }\n\n        case types.SAVE_USER_PROGRESS: {\n            return { \n                ...action.data.lesson.collection, \n                nextItem: action.data.lesson.collection.items[action.data.lesson.collection.itemIndex] };\n        }\n\n        case types.RESET_COLLECTION: {\n            return action.data.collection;\n        }\n\n        case types.UPDATE_COLLECTION: {            \n            const { collection, nextItem } = updateCollection(state, action);\n            return { ...state, ...collection, nextItem };\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n            return layout.bonus ? state : state;\n        }            \n\n        case types.NEXT_ITEM: {\n            let itemIndex = action.data;\n            let nextItem = state.items[itemIndex];\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_ROUND: {\n            const { itemIndex, nextItem } = getNextRound(action, state);\n            return { ...state, itemIndex, nextItem };\n        }\n\n        case types.NEXT_LESSON: {\n            const collection = { ...state, ...action.data.collection };\n            return { ...state, ...collection };\n        }\n\n        case types.NEXT_LEVEL: {\n            return state;\n        }\n\n        default: {\n            return state; \n        }\n    }\n};\n\nexport const bonusLayout = (state = null, action) => {\n\n    switch(action.type) {\n\n        case 'persist/REHYDRATE': {\n            return state;\n        }\n\n        case types.NEXT_LAYOUT: {\n            const layout = action.data;\n\n            if(layout.bonus) {\n                state = layout;\n            }\n            return state;\n        }\n\n        case types.SAVE_USER_PROGRESS:\n            return { ...state, ...action.data.lesson.bonusLayout };\n\n        default: {\n            return state; \n        }\n    }\n};","import { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport thunk from 'redux-thunk';\nimport storage from 'redux-persist/lib/storage'; // defaults to localStorage for web and AsyncStorage for react-native\n\nimport { logger } from 'redux/middleware/logger';\nimport { timeoutScheduler } from 'redux/middleware/timeoutScheduler';\n\nimport { config, units, user, userAction } from 'redux/reducers/config-reducer';\nimport { collections, collection, bonusLayout } from 'redux/reducers/species-reducers';\nimport { counter, score, history, videoPlayer } from 'redux/reducers/progress-reducers';\nimport { lessonPlans, lessonPlan, layout } from 'redux/reducers/layout-reducers';\nimport { lesson, lessons } from 'redux/reducers/lesson-reducers';\nimport { quickFire, glossary } from 'redux/reducers/quick-fire-reducers';\nimport { decks, deck, deckState, deckScore, deckSettings, deckScoreHistory } from 'redux/reducers/deck-reducers';\n\nimport hardSet from 'redux-persist/lib/stateReconciler/hardSet'\n\nconst reducer = combineReducers({\n    counter,\n    lessonPlans,\n    lessonPlan,\n    layout,\n    config,\n    lessons,\n    lesson,\n    collection,\n    score,\n    collections,\n    history, \n    videoPlayer,\n    units,\n    bonusLayout,\n    user,\n    quickFire,\n    glossary,\n    userAction,\n    decks,\n    deck,\n    deckState,\n    deckScore,\n    deckSettings,\n    deckScoreHistory\n});\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n//   stateReconciler: hardSet\n//   blacklist: ['config']\n}\n\nconst persistedReducer = persistReducer(persistConfig, reducer)\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const store = createStore(\n    persistedReducer, \n    composeEnhancers(applyMiddleware(\n        logger,\n        thunk\n    ))\n);\n\nexport const persistor = persistStore(store);\n\nexport const rootReducer = (state, action) => {\n\n    // For this use case we can use purge instead:\n\n    // https://stackoverflow.com/questions/35622588/how-to-reset-the-state-of-a-redux-store/35641992#35641992\n\n    if(action.type === 'INITIALISE_STATE') {\n        state = undefined;\n    }\n\n    return reducer(state, action);\n  }","import { contains } from 'ramda';\n\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { store } from 'redux/store';\nimport { observeStore } from 'redux/observe-store';\n\nlet subscriptions = [];\n\nconst add = (subscription, domain, role, layout) => {\n\n    const select = store => store[domain];\n    const onChange = subscription;    \n\n    const sub = observeStore(store, select, onChange, domain, layout);\n\n    const existingSub = getByName(sub.name);\n\n    if(existingSub) return;\n\n    subscriptions.push({ ...sub, role});\n    return sub;\n};\n\nconst remove = subscription => {\n\n    if(subscription) {\n        subscription.unsubscribe();\n        subscriptions = subscriptions.filter(sub => sub.name !== subscription.name);\n    }\n    return subscriptions;\n};\n\nconst removeByName = name => {\n    const subscription = getByName(name);\n    if(subscription) {\n        return remove(subscription);\n    }\n};\n\nconst getByName = name => {\n    return subscriptions.find(sub => sub.name === name);\n};\n\nconst getByRole = role => {\n    return subscriptions.filter(sub => sub.role === role);\n};\n\nconst getAll = () => {\n    return subscriptions;\n};\n\nconst removeAllQuizScreenSubs = () => {\n\n    let screens = getByRole('screen');\n\n    screens.forEach(sub => {\n      subscription.remove(sub)\n    });\n};\n\nconst removeAllQuizLayoutSubs = () => {\n\n    let screens = getByRole('quiz');\n\n    screens.forEach(sub => {\n      subscription.remove(sub);\n    });\n};\n\nconst checkRequired = (state, layout) => {\n\n    const { userAction, config } = state;\n\n    let isRequired = true, isReviewingLesson = true;\n\n    isReviewingLesson = lessonStateHelper.getIsReviewingLesson(userAction, config, isReviewingLesson); \n        \n    const reviewLayouts = [\n        'screen-species-card',\n        'screen-taxon-card',\n        'screen-non-taxon-card',\n        'species-vernaculars',\n        'mixed-specimen-images',\n        'mixed-specimen-question',\n        'screen-common-to-latin',\n        'screen-genus-completion',\n        'screen-latin-to-common',\n        'media-match'\n    ];\n\n    isRequired = isReviewingLesson ? true : !contains(layout.name, reviewLayouts);\n\n    return isRequired;\n};\n\nconst addSubs = (layout, config, funcByName) => {\n\n    if(!layout) return;\n    \n    layout.screens.forEach( (screen, index) => {\n\n        const func = funcByName(screen.name);\n\n        const isSubscriptionRequired = checkRequired(store.getState(), layout);\n\n        if(func && isSubscriptionRequired) {\n            if(config.isPortraitMode) {\n                if(index === 1 || screen.name === 'summary') add(func, screen.domain, 'screen', layout ? layout.name : '');\n            } else {\n                add(func, screen.domain, 'screen', layout ? layout.name : '');\n            }                           \n        } else {\n            remove(getByName('nextItem'));\n            remove(getByName('traitValuesHandler'));\n        }\n    });\n};\n\nconst printAllSubs = () => {\n  getAll().forEach(sub => {\n    snapLog('subscribed', sub.name);\n  });\n};\n\nexport const subscription = {\n    add,\n    remove,\n    removeByName,\n    getByName,\n    getByRole,\n    getAll,\n    removeAllQuizScreenSubs,\n    removeAllQuizLayoutSubs,\n    addSubs,\n    printAllSubs\n};\n\n","import { enums } from 'ui/helpers/enum-helper';\n\nexport const config = {\n    language: 'en',\n    moduleSize: 4,\n    callbackTime: 1500,\n    callbackDelay: 1500,\n    excludeRevision: false,\n    isPortraitMode: false,\n    isLandscapeMode: true,\n    collection: {\n        id: 0\n    },\n    mode: 'learn',\n    languages : [\n        { name: 'Deutsche', lang: 'de' },\n        { name: 'English', lang: 'en' },\n        { name: 'Espaol', lang: 'es' },\n        { name: 'Franais', lang: 'fr' },\n        { name: 'Italiano', lang: 'it' },\n        { name: 'Portugus', lang: 'pt' }\n    ],\n    guide: {\n        iconicTaxa: null,\n        locationLongLat: '',\n        locationPlace: '',\n        locationType: null,\n        place: {\n            id: 1,\n            name: ''\n        },\n        speciesRange: 10,\n        inatId: { key: '', type: '', param: 'user_id' },\n        season: {},\n        perPage: 200,\n        noOfRecords: 10,\n        guideMode: enums.guideMode.STATIC.name\n    },    \n};","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nimport { landscapeCustom } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeCustom2 } from 'snapdragon-config/plans/landscape/landscape-custom';\nimport { landscapeFungi, landscapeLichens } from 'snapdragon-config/plans/landscape/landscape-fungi';\n\nimport { landscapeStatic, landscapeStaticTaxonGroup, landscapeStaticProviderQuestionsOnly } from 'snapdragon-config/plans/landscape/landscape-static';\nimport { portraitStatic, portraitStaticTaxonGroup } from 'snapdragon-config/plans/portrait/portrait-static';\n\nconst landscapeBirds = { ...clone(landscapeStatic), id: 5 };\n      if(landscapeBirds.levels[0].bonusLayouts) landscapeBirds.levels[0].bonusLayouts[0].types.push('song');\n\nconst portraitBirds = { ...clone(portraitStatic), id: 105 };\n      portraitBirds.levels[0].layouts.push(L.mediaMatch); \n\nconst portraitFungi = { ...clone(landscapeFungi), id: 103, portrait: true };\n      portraitFungi.levels[0].bonusLayouts = [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ];\n\nconst portraitLichens = { ...clone(landscapeLichens), id: 104, portrait: true };\nconst portraitCustom = { ...clone(landscapeCustom), id: 101, portrait: true };\nconst portraitCustom2 = { ...clone(landscapeCustom2), id: 102, portrait: true };\n\nexport const lessonPlans = [\n\n    landscapeCustom,\n    landscapeCustom2,\n    landscapeStatic,\n    landscapeStaticTaxonGroup,\n    landscapeStaticProviderQuestionsOnly,\n    landscapeFungi,    \n    landscapeLichens,\n    landscapeBirds,\n    \n    portraitCustom,\n    portraitCustom2,\n    portraitStatic,\n    portraitStaticTaxonGroup,    \n    portraitFungi,    \n    portraitLichens,\n    portraitBirds,\n    \n];","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeCustom = {\n    id: 1,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.familyMatch,\n                        L.speciesGenusEntry,\n                        L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeCustom2 = {\n    id: 2,\n    name:'Lesson 2',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.familyMatch , L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};","import { clone } from 'ramda';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeFungi = {\n    id: 3,\n    name:'Lesson 3',\n    portrait: false,\n    default: false,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape']),\n                        L.propertyTrait(L.mixedTraitImages, ['gillAttachment']),\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        },\n    ]\n};\n\nexport const landscapeLichens = { ...clone(landscapeFungi), id: 4 };\nlandscapeLichens.levels[0] = { \n    id: 1,\n    name:'Level 1',\n    description: 'Species recognition',\n    layouts: [                          \n        L.mixedSpecimenImages\n    ],\n    // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n    // reviewLayouts: [ L.multiSpecimenCommonMatch, L.mixedSpecimensRight ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const landscapeStatic = {\n    id: 10,\n    name:'Lesson 1',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.familyMatch,\n                        L.speciesGenusEntry,\n                        L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticTaxonGroup = {\n    id: 11,\n    name:'Lesson 11',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages,\n                        L.speciesIdentificationMatch,\n                        L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, \n                        L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry,\n                    ],\n            // bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n\nexport const landscapeStaticProviderQuestionsOnly = {\n    id: 12,\n    name:'Lesson 12',\n    portrait: false,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [],\n            bonusLayouts: []\n        }\n    ]\n};","import { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const portraitStatic = {\n    id: 110,\n    name:'Lesson 110',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, \n                        L.latinToCommonMatch, \n                        L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.propertyTrait(L.mixedTraitImages, ['capShape', 'gillAttachment', 'leafShape', 'leafDivision', 'inflorescence', 'leafMargin']),\n                        L.familyMatch,\n                        L.speciesGenusEntry,\n                        L.familyStripsMatch\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'definition' ] } ]\n        }\n    ]\n};\n\nexport const portraitStaticTaxonGroup = {\n    id: 111,\n    name:'Lesson 111',\n    portrait: true,\n    default: true,\n    levels: [\n        {   id: 1,\n            name:'Level 1',\n            layouts: [                          \n                        L.mixedSpecimenImages, L.latinToCommonMatch, L.commonEntry,\n                        L.commonToLatinMatch,\n                        L.textCompleteGenus, L.genusEntry,                        \n                        L.textCompleteSpecies, L.speciesEntry,\n                        L.speciesGenusEntry\n                    ],\n            bonusLayouts: [ { ...L.traitPropertyMatch, types: [ 'lookalikes', 'definition' ] } ]\n        }\n    ]\n};\n","import { clone } from 'ramda';\n\nimport { panels } from 'snapdragon-config/screen-panels';\n\nconst { \n    specimenImages, speciesCard, vernaculars, scientifics, text, \n    leaf, leafName, \n    family, familyStrips, taxon, nonTaxon, textComplete, cultivar, cultivarCard, \n    epithets, definitions, \n    specimenCommonMatch, specimenLatinMatch,\n    definitionCard, \n    traitProperty, symbioticProperty\n    , lookalikeProperty\n    , traitImages,\n    nonTaxonSpecimenTiles,\n    mixedSpecimenQuestions,\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n    history, summary, \n    birdsong, mediaPlayers,\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification } = panels;\n\nconst mixedSpeciesMatch = {\n    name: 'screen-mixed-species-match',\n    type: 'test',\n    score: 1,\n    kind: 'VMC',\n    points: 3,\n    given: 'Given species name',    \n    requirement: 'Select species image',\n    screens: [\n        { ...specimenImages },\n        { ...mixedSpecimenQuestions }\n    ]\n};\n\nconst speciesRevision = {\n    name: 'screen-species-card',\n    type: 'revision',\n    score: 0,\n    kind: 'S',\n    points: 0,\n    given: 'Given species summary',\n    requirement: 'Study species',\n    screens: [\n        { ...specimenImages },\n        { ...speciesCard }\n    ]\n};\n\nconst taxonRevision = {\n    name: 'screen-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'F',\n    points: 0,\n    given: 'Study',\n    requirement: 'Family summary',\n    screens: [\n        { ...specimenImages },\n        { ...taxon }\n    ]\n};\n\nconst nonTaxonRevision = {\n    name: 'screen-non-taxon-card',\n    type:'revision',\n    score: 0,\n    kind: 'GR',\n    points: 0,\n    given: 'Group summary',\n    requirement: 'Study',\n    screens: [\n        { ...nonTaxonSpecimenTiles },\n        { ...nonTaxon }\n    ]\n};\n\nconst definitionRevision = {\n    name: 'screen-definition-card',\n    type:'revision',\n    score: 0,\n    kind: 'G',\n    points: 0,\n    given: 'Given glossary',\n    requirement: 'Study definitions',\n    screens: [\n        { ...specimenImages },\n        { ...definitionCard }\n    ]\n};\n\nconst latinToCommonMatch = {\n    name: 'screen-latin-to-common',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given latin name',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...vernaculars }\n    ]\n};\n\nconst commonToLatinMatch = {\n    name: 'screen-common-to-latin',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given common name',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...scientifics }\n    ]\n};\n\nconst speciesIdentificationMatch = {\n    name: 'screen-species-identification',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select identification',\n    screens: [\n        { ...specimenImages },\n        { ...speciesIdentification }\n    ]\n};\n\nconst textCompleteGenus = {\n    name: 'screen-genus-completion',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given species name',\n    requirement: 'Select genus name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-genus'  }\n    ]\n};\n\nconst multiSpecimenCommonMatch = {\n    name: 'screen-specimens-common-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select common name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenCommonMatch }\n    ]\n};\n\nconst multiSpecimenLatinMatch = {\n    name: 'screen-specimens-latin-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'VMC',\n    given: 'Given specimenImages images',\n    requirement: 'Select latin name',\n    screens: [\n        { ...specimenImages },\n        { ...specimenLatinMatch }\n    ]\n};\n\nconst traitPropertyMatch = {\n    name: 'trait-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...traitProperty }\n    ]\n};\n\nconst lookalikePropertyMatch = {\n    name: 'lookalike-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    bonus: true,\n    given: 'Given traitImages images',\n    requirement: 'Select trait value',\n    screens: [\n        { ...traitImages },\n        { ...lookalikeProperty }\n    ]\n};\n\nconst symbioticPropertyMatch = {\n    name: 'symbiotic-property-match',\n    type:'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Given specimenImages images',\n    requirement: 'Select symbiotic match',\n    screens: [\n        { ...specimenImages },\n        { ...symbioticProperty }\n    ]\n};\n\nconst familyMatch = {\n    name: 'screen-species-to-family',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Species name',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...family }\n    ]\n};\n\nconst cultivarMatch = {\n    name: 'screen-cultivar-to-species',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Cultivar name',\n    requirement: 'List species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivar }\n    ]\n};\n\nconst familyStripsMatch = {\n    name: 'screen-family-to-description',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Family description',\n    requirement: 'List families',\n    screens: [\n        { ...specimenImages },\n        { ...familyStrips }\n    ]\n};\n\nconst genusEntry = {\n    name: 'screen-genus-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given species name',\n    requirement: 'Enter genus name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'genus'}\n    ]\n};\n\nconst speciesEntry = {\n    name: 'screen-species-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Given genus name',\n    requirement: 'Enter species name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'species'}\n    ]\n};\n\nconst speciesGenusEntry = {\n    name: 'screen-binomial-entry',\n    type:'test',\n    score: 1,\n    points: 4,\n    kind: 'T',\n    given: 'Given common name',\n    requirement: 'Enter latin name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'name'}\n    ]\n};\n\nconst leafEntry = {\n    type:'test',\n    score: 1,\n    points: 3,\n    kind: 'T',\n    screens: [\n        { ...leaf },\n        { ...leafName }\n    ]\n};\n\nconst textCompleteSpecies = {\n    name: 'screen-species-completion',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'MC',\n    given: 'Given genus name',\n    requirement: 'Select species name',\n    screens: [\n        { ...specimenImages },\n        { ...textComplete, type: 'text-complete-species' }\n    ]\n};\n\nconst commonEntry = {\n    name: 'screen-common-entry',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species latin name',\n    requirement: 'Enter common name',\n    screens: [\n        { ...specimenImages },\n        { ...text, taxon: 'vernacular'  }\n    ]\n};\n\nconst latinEpithets = {\n    name: 'screen-epithets',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'MC',\n    given: 'Epithet',\n    requirement: 'List epithet definitions',\n    screens: [\n        { ...specimenImages },\n        { ...epithets }\n    ]\n};\n\nconst glossaryTerms = {\n    name: 'screen-definitions',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'Given glossary term',\n    requirement: 'Select definition',\n    screens: [\n        { ...specimenImages },\n        { ...definitions }\n    ]\n};\n\nconst cultivars = {\n    name: 'screen-cultivars',\n    type: 'test',\n    score: 1,\n    points: 1,\n    kind: 'T',\n    given: 'List of cultivars',\n    requirement: 'List of species',\n    screens: [\n        { ...specimenImages },\n        { ...cultivarCard },\n        { ...cultivar }\n    ]\n};\n\nconst mixedSpecimenImages = {\n  name: 'mixed-specimen-images',\n  type:'test',\n  score: 1,\n  points: 2,\n  kind: 'T',\n  given: 'Specimen images',\n  requirement: 'Select species image',\n  screens: [\n      { ...mixedSpecimensLeft },\n      { ...mixedSpecimensRight }\n  ]\n};\n\nconst mediaMatch = {\n    name: 'media-match',\n    type:'test',\n    score: 1,\n    points: 2,\n    kind: 'T',\n    given: 'Species song',\n    requirement: 'Select species',\n    screens: [\n        { ...specimenImages },\n        { ...birdsong }\n    ]\n};\n\nconst mixedTraitImages = {\n    name: 'mixed-trait-images',\n    type:'test',\n    kind: 'T',\n    score: 1,\n    points: 2,\n    given: 'Trait images',\n    requirement: 'Select trait image',\n    screens: [\n        { ...mixedTraitLeft },\n        { ...mixedTraitRight }\n    ]\n  };  \n\nconst providerHorizontalStrip = {\n    name: 'provider-horizontal-strip',\n    type: 'test',\n    score: 1,\n    screens: [\n        { ...specimenImages },\n        { ...providerHorizontalStripQuestions }\n    ]\n};\n\nconst propertyTrait = (traitPropertyMatch, traits) => {\n    const layout = clone(traitPropertyMatch);\n    layout.screens[0].traits = traits;\n    layout.screens[1].traits = traits;\n    return layout;\n};\n\nexport const layouts = {\n  mixedSpeciesMatch,\n  speciesRevision,\n  taxonRevision,\n  nonTaxonRevision,\n  definitionRevision,\n  \n  latinToCommonMatch,\n  commonToLatinMatch,\n  textCompleteGenus,\n  multiSpecimenCommonMatch,\n  multiSpecimenLatinMatch,\n  traitPropertyMatch,\n  lookalikePropertyMatch,\n  symbioticPropertyMatch,\n  familyMatch,\n  cultivarMatch,\n  familyStripsMatch,\n  genusEntry,\n  speciesEntry,\n  speciesGenusEntry,\n  textCompleteSpecies,\n  commonEntry,\n  leafEntry,\n  glossaryTerms,\n  latinEpithets,\n  cultivars,\n  mixedSpecimenImages,\n  history,\n  summary,\n  mediaMatch,\n  mixedTraitImages,\n  providerHorizontalStrip,\n  speciesIdentificationMatch,\n  propertyTrait\n}","const specimenImages = {\n    name: 'specimen-images',\n    domain: 'collection',\n  };\n  \nconst traitImages = {\n    name: 'trait-images',\n    domain: 'bonusLayout',\n  };\n  \n  const history = { \n    name: 'history', \n    domain: 'history'\n  };\n  \n  const speciesCard = {\n    name: 'species-card',\n    domain: 'collection',\n  };\n  \n  const definitionCard = {\n    name: 'definition-card',\n    domain: 'collection'\n  };\n  \n  const scientifics = {\n    name: 'species-scientifics',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  const birdsong = {\n    name: 'birdsong',\n    domain: 'bonusLayout',\n  }\n\n  const mediaPlayers = {\n    name: 'media-players',\n    domain: 'collection',    \n  }\n  \n  const vernaculars = {\n    name: 'species-vernaculars',\n    domain: 'collection',\n    taxon: 'name'\n  };\n  \n  const text = {\n    name: 'text-entry',\n    domain: 'collection'\n  };\n  \n  const textComplete = {\n    name: 'text-complete',\n    domain: 'collection',\n    question: 'Complete the latin name',\n  };\n  \n  const summary = { \n    name: 'summary', \n    domain: 'history' \n  };\n  \n  const mixedSpecimenQuestions = {\n    name: 'mixed-specimen-questions',\n    domain: 'collection'\n  };\n\n  const leaf = {\n    name: 'leaf-image',\n    domain: 'collection'\n  };\n  \n  const leafName = {\n    name: 'leaf-text',\n    domain: 'collection'\n  };\n  \n  const epithets = {\n    name: 'epithet',\n    domain: 'collection'\n  };\n  \n  const definitions = {\n    name: 'definition',\n    domain: 'bonusLayout'\n  };\n  \n  const family = {\n    name: 'family',\n    domain: 'collection'\n  };\n  \n  const familyStrips = {\n    name: 'family-strips',\n    domain: 'collection'\n  };\n  \n  const taxon = {\n    name: 'taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxon = {\n    name: 'non-taxon-card',\n    domain: 'collection'\n  };\n  \n  const nonTaxonSpecimenTiles = {\n    name: 'non-taxon-specimen-tiles',\n    domain: 'collection'\n  };\n  \n  const cultivarCard = {\n    name: 'cultivar-card',\n    domain: 'collection'\n  };\n  \n  const cultivar = {\n    name: 'cultivar-match',\n    domain: 'collection'\n  };\n\n  const specimenCommonMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'vernacular'\n  };\n  \n  const specimenLatinMatch = {\n    name: 'visual-match',\n    domain: 'collection',\n    type: 'binomial'\n  };\n  \n  const traitProperty = {\n    name: 'trait-property',\n    domain: 'bonusLayout'\n  };\n  \n  const lookalikeProperty = {\n    name: 'lookalike-property',\n    domain: 'bonusLayout'\n  };\n  \n  const symbioticProperty = {\n    name: 'symbiotic-property',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensLeft = {\n    name: 'mixed-specimen-images',\n    domain: 'collection'\n  };\n\n  const mixedSpecimensRight = {\n    name: 'mixed-specimen-question',\n    domain: 'collection'\n  };\n  \n  const mixedTraitLeft = {\n    name: 'mixed-trait-images',\n    domain: 'collection'\n  };\n\n  const mixedTraitRight = {\n    name: 'mixed-trait-question',\n    domain: 'collection'\n  };\n\n  const providerHorizontalStripQuestions = {\n    name: 'provider-horizontal-strip-questions',\n    domain: 'collection'\n  };\n\n    \n  const speciesIdentification = {\n    name: 'species-identification',\n    domain: 'collection',\n    taxon: 'name'\n  };\n\n  \n  export const panels = {\n    specimenImages,\n    history,\n  \n    speciesCard,\n    definitionCard,\n    scientifics,\n    vernaculars,\n    text,\n    summary,\n\n    leaf,\n    leafName,\n  \n    epithets,\n    definitions,\n    family,\n    familyStrips,\n    \n    taxon,\n    nonTaxon,\n    nonTaxonSpecimenTiles,\n    textComplete,\n    cultivarCard,\n    cultivar,\n  \n    specimenCommonMatch,\n    specimenLatinMatch,\n    traitProperty,\n    lookalikeProperty,\n    symbioticProperty,\n    \n    mixedSpecimenQuestions,\n\n    mixedSpecimensLeft,\n    mixedSpecimensRight,\n\n    birdsong,\n    mediaPlayers,\n    traitImages,\n\n    mixedTraitLeft,\n    mixedTraitRight,\n    providerHorizontalStripQuestions,\n    speciesIdentification\n  };","const all = [\n    {\n      id: 'fungi',\n      common: 'Fungi & Lichens'\n    },\n    {\n      id: 'amphibia',\n      common: 'Amphibians'\n    },\n    {\n      id: 'mammalia',\n      common: 'Mammals'\n    },\n    {\n      id: 'plantae',\n      common: 'Plants'\n    },\n    {\n      id: 'lepidoptera',\n      common: 'Butterflies & Moths'\n    },\n    {\n      id: 'insecta',\n      common: 'Insects'\n    },\n    {\n      id: 'aves',\n      common: 'Birds'\n    },\n    {\n      id: 'reptilia',\n      common: 'Reptiles'\n    }\n];\n\nexport const iconicTaxa = {\n    all\n}","import { contains, flatten } from 'ramda';\n\nimport { getTraitTests } from 'snapdragon-engine/bonus/tests/trait-test';\nimport { getBirdsongTests } from 'snapdragon-engine/bonus/tests/birdsong-test';\nimport { getLookalikeTests } from 'snapdragon-engine/bonus/tests/lookalike-test';\nimport { getDefinitionTests } from 'snapdragon-engine/bonus/tests/definition-test';\n\nconst getTests = async (collection, itemIndices, bonusLayouts, lessonName, levelName) => {\n\n    const itemsInThisRound = collection.items.map((item, index) => {\n        if(contains(index, itemIndices)) {\n            return { ...item, itemIndex: index }\n        } else return null;        \n    }).filter(item => item);\n\n    const addLayoutToTest = traitTests => {\n        const lessonReadyTests = traitTests.map(traitTest => {             \n            traitTest.itemIndex = traitTest.item ? traitTest.item.itemIndex : 0; \n            traitTest = { ...traitTest, ...layout, lessonName, levelName };            \n            return traitTest;\n        });\n        return lessonReadyTests;\n    };\n\n    const getTraitTypeTests = itemsInThisRound => {\n        return new Promise(resolve => resolve(getTraitTests(itemsInThisRound)));\n    };\n\n    const getTraitTypeBirdsongTests = (itemsInThisRound, collection) => {\n        return new Promise(resolve => resolve(getBirdsongTests(itemsInThisRound, collection)));\n    };\n\n    const getTraitTypeLookalikeTests = itemsInThisRound => {\n        return getLookalikeTests(itemsInThisRound);     \n    };\n\n    const getDefinitionTypeTests = itemsInThisRound => {\n        return getDefinitionTests(itemsInThisRound);\n    };\n\n    let traitTests = [], birdsongTests = [], lookalikeTests = [], definitionTests = [];\n\n    let layout = bonusLayouts.find(layout => layout.name === \"trait-property-match\");\n\n    if(layout) {\n\n        if(layout.types) {\n\n            const getResolvedPromises = async () => {\n            const promises = await layout.types.map(async type => {\n                switch(type) {\n                    case 'traits':\n                        return getTraitTypeTests(itemsInThisRound);\n                    case 'song':\n                        return getTraitTypeBirdsongTests(itemsInThisRound, collection);\n                    case 'lookalikes':\n                        return getTraitTypeLookalikeTests(itemsInThisRound);\n                    case 'definition':                        \n                        return getDefinitionTypeTests(itemsInThisRound);\n                }\n            });\n\n            const testGroups = await Promise.all(promises);\n\n            const tests = testGroups.map(group => {\n                group = group.filter(g => g.question);\n                return addLayoutToTest(group);\n            });\n\n            return tests;\n        };\n\n        traitTests = await getResolvedPromises();\n\n        } else {\n            traitTests = getTraitTypeTests(itemsInThisRound);\n            birdsongTests = getTraitTypeBirdsongTests(itemsInThisRound, collection);            \n            lookalikeTests = getTraitTypeLookalikeTests(itemsInThisRound);\n            definitionTests = getDefinitionTypeTests(itemsInThisRound);\n        }\n    }\n\n    return flatten(traitTests);\n};\n\nexport const bonusHandler = {\n    getTests\n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getBirdsongTests = (itemsInThisRound, collection) => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n        \n        if(item.taxonomy.class && item.taxonomy.class.toLowerCase() !== 'aves') return [];\n        \n        const { question, answers, overrides } = getBirdsongTest(item, itemsInThisRound, collection);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n}\n\nconst getBirdsongTest = (item, itemsInThisRound, collection) => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return;\n\n    const name = 'song';\n    const birdsong = { name, ...item.traits[name] };\n    \n    // require other birds, which may not be in this collection\n\n    let birds = take(3, collection.items.filter(bird => bird.name.toLowerCase() !== item.name.toLowerCase()));\n        birds.push(item);\n\n    const birdNames = utils.shuffleArray(birds.map(bird => bird.name));\n\n    const question = item.name;\n    const answers = birdNames;\n    const overrides = { question: 'Match the birdsong', vernacularName: 'Common name', binomial: 'Latin name', trait: birdsong };\n\n    return { question, answers, overrides };\n};","import { contains, take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\n\nexport const getDefinitionTests = itemsInThisRound => {\n    \n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        return getDefinitionTest(item);\n\n    });\n\n    return tests;\n};\n\nconst getDefinitionTest = async item => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const number = config.isPortraitMode ? 4 : 4;\n\n    const taxon = matchTaxon(item.taxonomy, iconicTaxa).value;\n\n    let definitions = glossary.filter(definition => contains(definition.taxon, [ taxon, 'common' ]));\n\n    definitions = utils.shuffleArray(definitions);\n\n    const term = item.terms \n                    ? utils.shuffleArray(item.terms)[0] \n                    : item.genus\n                        ? item.genus.terms\n                            ? item.genus.terms[collection.itemIndex] \n                                ? item.genus.terms[collection.itemIndex] \n                                    : item.family\n                                    ? item.family.terms\n                                        ? utils.shuffleArray(item.family.terms)[0]\n                                        : null\n                                    : null\n                            : null\n                        : null;\n                    \n\n    const definition = !!term \n        ? definitions.find(definition => definition.term.toLowerCase() === term.toLowerCase())\n        : definitions[0];\n\n    const alternatives = take(number-1, take(number, utils.shuffleArray(definitions)).filter(d => d.term.toLowerCase() !== definition.term.toLowerCase())).map(d => utils.capitaliseFirst(d.definition));\n    \n    const question = definition.definition;\n    const answers = utils.shuffleArray([question, ...alternatives]);\n    const help = config.isLandscapeMode ? 'Select the correct answer' : 'Select correct answer';\n\n    return { question, answers, overrides : { question: definition.term, help, binomial: item.name, vernacularName: item.vernacularName } };\n};","import { firestore } from 'api/firebase/firestore';\n\nexport const getLookalikeTests = async itemsInThisRound => {\n\n    const init = async () => {\n\n        if(itemsInThisRound === undefined) return new Promise(resolve => resolve([]));\n\n        return Promise.all(itemsInThisRound.map(async item => {\n            \n            const { question, answers, overrides } = await getLookalikeTest(item);\n\n            if(!question) return new Promise(resolve => resolve({}));\n\n            return {\n                item,\n                question,\n                answers,\n                overrides\n            }\n        }));\n    }\n\n    const tests = await init();\n\n    return tests;\n}\n\nexport const getItemLookalikes = async item => {\n\n    if(!item.traits || Object.keys(item.traits).length === 0) return {};\n\n    const lookaliketraits = item.traits['lookalikes'];\n\n    if(!lookaliketraits) return new Promise(resolve => resolve([]));\n\n    let lookalikes = lookaliketraits.map(trait => trait.lookalike.name);\n\n    if(lookalikes.length === 0) return {};\n\n    // check current collection first?\n\n    const getLookalikes = async () => {\n        return Promise.all(lookalikes.map(async name => {\n            return await firestore.getSpeciesByName(name);\n        })\n    )};\n    \n    lookalikes = await getLookalikes();\n    lookalikes = lookalikes.filter(lookalike => lookalike);\n\n    return lookalikes;\n};\n\nconst getLookalikeTest = item => {\n\n    const init = async () => {\n\n        const lookalikes = await getItemLookalikes(item);\n\n        const question = lookalikes.length > 0 ? item.name : null;\n        const answers = [ question, ...lookalikes.map(item => item.name) ];\n\n\n        return { question, answers, overrides : { question: 'Avoid look-alikes', help: '(Pick one correct image)', binomial: 'Latin name', vernacularName: 'Common name', trait: { name: 'lookalikes', lookalikes } } };\n    };\n\n    return init();\n};\n","import { store } from 'redux/store';\nimport { getTraitsForTests } from 'api/traits/traits-for-tests';\n\nexport const getTraitTests = itemsInThisRound => {\n\n    if(itemsInThisRound === undefined) return [];\n\n    const tests = itemsInThisRound.map(item => {\n\n        const { units } = store.getState();\n\n        const { question, answers, overrides } = getTraitsForTests(units, item);\n\n        if(!question) return {};\n\n        return {\n            item,\n            question,\n            answers,\n            overrides\n        }\n    });\n\n    return tests;\n};","export const getNextRoundLayouts = (lessonPlan, config, lesson) => {\n\n    // All layouts are currently activated because the lesson edit function is not in use.\n\n    lesson.activeLevelCount = lessonPlan.levels.filter(level => level.layouts.length > 0).length;\n\n    const getCurrentLevelFromLessonPlan = (lessonPlan, levelId) => {\n        return lessonPlan.levels.find(level => level.id === levelId);\n    }\n    \n    const getLayouts = (currentLevel, mode) => {    \n        switch(mode) {\n            case 'learn':\n                currentLevel.bonusLayouts = currentLevel.bonusLayouts || [];\n                return [ ...currentLevel.layouts.filter(l => l), ...currentLevel.bonusLayouts ];\n            case 'review':\n                return currentLevel.reviewLayouts || [];\n            default:\n                return currentLevel.layouts;\n        }\n    };\n\n    const goToNextLevelThatHasLayouts = (lessonPlan, levelId) => {\n\n        let layouts = [], lessonName = '', levelName = '';        \n        \n        const iterateOverLevelsCheckingForAvailableLayouts = (intialValue, levelId) => {\n            \n            let increment = intialValue;\n\n            if(layouts.length > 0) return;\n\n            const level = lessonPlan.levels.find(level => level.id === levelId + increment);\n\n            if(!level) return;\n            \n            lesson.level = level;\n\n            lesson.level = level;\n            lessonName = lesson.name;\n            levelName = lesson.level.name; // sometimes returns null (when at final level, looking for next?)\n            layouts = getLayouts(getCurrentLevelFromLessonPlan(lessonPlan, levelId + increment), config.mode);\n\n            increment++;\n\n            iterateOverLevelsCheckingForAvailableLayouts(increment, levelId);\n        }     \n        \n        iterateOverLevelsCheckingForAvailableLayouts(0, levelId);\n\n        return { lessonName, levelName, layouts };\n    }\n\n    let levelId = lesson.level.id;\n\n    if(lesson.isLevelComplete) {\n        levelId++;\n        lesson.level = lessonPlan.levels.find(level => level.id === levelId);\n    }\n\n    const { layouts } = goToNextLevelThatHasLayouts(lessonPlan, levelId);\n\n    return layouts;\n};","import { createNextRound } from 'snapdragon-engine/round-planner';\nimport { layouts } from 'snapdragon-config/screen-layouts';\nimport { getNextRoundLayouts } from 'snapdragon-engine/lesson-plan-handler';\n\nconst { summary, history } = layouts;\n\nconst createLessonPlan = async (lessonPlan, config, collection, lesson) => {\n\n    lesson.moduleSize = lesson.moduleSize || collection.moduleSize || config.moduleSize;\n    lesson.currentRound = lesson.currentRound || 1;\n\n    let rounds = collection.items.length / lesson.moduleSize;            \n        rounds = collection.items.length % lesson.moduleSize === 0 ? rounds : rounds === 1 ? 1 : Math.floor(rounds) + 1;\n\n    lesson = lesson.level === undefined \n            ? { ...lesson, ...lessonPlan, level: { id: 1 }, rounds } \n            : lesson;\n\n    const nextRoundLayoutTemplates = getNextRoundLayouts(lessonPlan, config, lesson);\n\n    if(lesson.level === undefined) {\n        return new Promise(resolve => resolve(null));\n    }\n\n    return await createNextRound(\n        lessonPlan,\n        nextRoundLayoutTemplates, \n        [ summary, history ],\n        collection,\n        lesson\n    );        \n};\n\nexport const lessonPlanner = {\n    createLessonPlan\n}","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { findRankByIconicTaxon } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\n\nexport const getPoolItems = async (collection, poolSize = 5) => {\n  \n  try {\n    \n    const item = collection.nextItem;\n\n    if(collection.behaviour === 'static') {\n      const otherItems = collection.items.filter(i => i.name !== item.name);\n      if(otherItems && otherItems.length > 0) {\n        return getItemsFromCollection(otherItems, item, poolSize);\n      }\n    }\n\n    const rank = findRankByIconicTaxon(item.taxonomy, item.iconicTaxon);\n\n    let taxonicMatches = await firestore.getSpeciesByIconicTaxon(item);\n\n    if(item.iconicTaxon.toLowerCase() === 'fungi') {\n        const isLichen = item.lichen;\n        taxonicMatches = isLichen ? taxonicMatches.filter(item => item.lichen) : taxonicMatches.filter(item => !item.lichen);\n    }\n\n    const speciesPool = utils.shuffleArray(taxonicMatches.filter(ci => ci.name.toLowerCase() !== item.name.toLowerCase()));\n\n    // temporary exceptions because there are so few (6 and 3) members of these taxa\n\n    const isException = item.iconicTaxon.toLowerCase() === 'reptilia' || item.iconicTaxon.toLowerCase() === 'amphibia';\n    \n    if(!speciesPool) {\n      getPoolItems(collection);\n    }\n\n    // if not enough, only get the additional necessary number (but duplicates???)\n\n    else if(speciesPool.length < poolSize && !isException) {\n      getPoolItems(collection);\n    } \n    else {\n\n      const items = take(poolSize, speciesPool);\n      \n      items.push(item);\n    \n      return await items;\n    }\n  } catch(e) {\n    logError('renderMixedSpecimenImagesAndQuestion init', e);\n  }\n};\n\n  const getItemsFromCollection = (otherItems, item, poolSize) => {\n    const items = take(poolSize, utils.shuffleArray(otherItems));\n    return utils.shuffleArray([ ...items, item]);\n  };","import { contains } from 'ramda';\n\nimport { firestore } from 'api/firebase/firestore';\n\nconst getItemLayouts = async itemQuestions => {\n    if(!itemQuestions.questionIds) return new Promise(resolve => resolve(null));\n    // return Promise.all(itemQuestions.questionIds.map(async id => await firestore.getQuestionById(id, itemQuestions.name)));\n};\n\nconst getLayouts = async (collection, roundItemNames) => {\n\n    if(collection.species) {\n    \n        const species = collection.species.filter(sp => contains(sp.name, roundItemNames));\n        const speciesQuestions = species.filter(sp => sp.questions);\n\n        if(speciesQuestions.length > 0) {\n            return Promise.all(speciesQuestions.map(sq => sq.questions));\n        }\n\n        const itemsQuestions = collection.items.filter(i => contains(i.name, roundItemNames)).map(i => { return { name: i.name, questionIds: i.questionIds }});\n        \n        if(itemsQuestions) {\n            const promises = itemsQuestions.map(async (itemQuestions) => {\n                if(itemQuestions.questionIds) return await getItemLayouts(itemQuestions);\n            });\n            return await Promise.all(promises);\n        } else {\n            return new Promise(resolve => resolve(null));\n        }\n    } else {\n        return [];\n    }\n}\n\nexport const providerHandler = {\n    getLayouts\n};","const getRoundItems = (currentRound, moduleSize, items) => {\n\n    const start = (currentRound - 1) * moduleSize;\n    const end = start + moduleSize;\n    return items.slice(start, end);\n}\n\nexport const roundHandler = {\n    getRoundItems\n};","import { contains, flatten } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { utils } from 'utils/utils';\n\nimport { roundHandler } from \"snapdragon-engine/round-plan-handler\";\nimport { bonusHandler } from 'snapdragon-engine/bonus/bonus-test-handler';\nimport { providerHandler } from 'snapdragon-engine/provider/provider-test-handler';\nimport { mixedTraitHandler } from 'ui/screens/multichoice/landscape/mixed-trait/mixed-trait-handler';\n\nimport { layouts as L } from 'snapdragon-config/screen-layouts';\n\nexport const createNextRound = (lessonPlan, nextRoundLayoutTemplates, progressScreens, collection, lesson) => {\n\n    const init = async () => {\n    \n        lessonPlan.layouts = [];\n\n        const moduleSize = lesson.moduleSize;\n        const lessonName = lesson.name;\n        const levelName = lesson.level.name;\n        const itemsCountToDate = (lesson.currentRound - 1) * moduleSize;\n        const itemsLeft = collection.items.length - itemsCountToDate;\n\n        const layoutsToAdd = moduleSize > itemsLeft ? itemsLeft : moduleSize;\n        const roundItemNames = roundHandler.getRoundItems(lesson.currentRound, moduleSize, collection.items.map(i => i.name));\n\n        nextRoundLayoutTemplates.forEach( async (layout, index) => {\n            let itemIndex = 0;\n            do {\n                if(layout.name === 'mixed-trait-images') {\n                    \n                    const item = collection.items.find(i => i.name === roundItemNames[itemIndex]);\n\n                    const { requiredTraitValues, trait } = mixedTraitHandler.getMatchingTrait(utils.shuffleArray(layout.screens[1].traits), item.traits);\n\n                    if(!trait) return;\n\n                    const { traits, requiredTraits } = await mixedTraitHandler.fetchTraits(trait, requiredTraitValues, collection.glossary);\n\n                    if(!requiredTraits || !traits) return;\n\n                    layout.trait = trait;\n                    layout.traits = traits;\n                    layout.requiredTraits = requiredTraits;\n\n                    const traitsToIgnore = [ 'n/a', 'none' ];\n                    const addLayout = !!requiredTraits.find(t => !contains(t.term.toLowerCase(), traitsToIgnore));\n\n                    if(addLayout) {\n                        lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                    }\n        \n                } else {\n                    lessonPlan.layouts.push({...layout, lessonName, levelName, speciesName: roundItemNames[itemIndex] });\n                }\n\n                itemIndex++;\n                \n            } while (itemIndex < layoutsToAdd);\n        });\n\n        if(lesson.level.id === 1) {\n            let providerQuestions = await providerHandler.getLayouts(collection, roundItemNames);\n                providerQuestions = flatten(providerQuestions).filter(layout => layout);\n\n            let providerLayouts = providerQuestions.map(provider => {\n                return { ...L.providerHorizontalStrip, lessonName:\"Lesson 1\", levelName:\"Level 1\", speciesName: provider.name || provider.taxon, provider };\n            });\n\n            if(providerLayouts) {\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...providerLayouts ];\n            }\n        }\n\n        const bonusLayouts = lessonPlan.layouts.filter(layout => layout.bonus);\n\n        let lessonLayouts = lessonPlan.layouts.filter(layout => !layout.bonus).map((layout, i) => {\n            layout.itemIndex = layout.itemIndex === undefined ? utils.calcItemIndex(itemsCountToDate, layoutsToAdd, i) : layout.itemIndex;\n            return { ...layout };\n        });\n\n        const itemIndices = [ ...new Set(lessonPlan.layouts.map(layout => layout.itemIndex).filter(i => i !== undefined)) ];\n        \n        lessonPlan.layouts = lessonLayouts;\n\n        if(lesson.level.id === 1) {\n\n            if(bonusLayouts) {\n                const bonusTests = await bonusHandler.getTests(collection, itemIndices, bonusLayouts, lessonName, levelName);\n                lessonPlan.layouts = [ ...lessonPlan.layouts, ...bonusTests ];\n            }\n        }\n\n        lessonLayouts = lessonPlan.layouts.map((layout, i) => {\n            layout.roundProgressIndex = i + 1;\n            return { ...layout };\n        });\n\n        const summaryLayout = lessonPlan.portrait \n            ? {\n                name: 'summary',\n                screens: [{ \n                    name: 'summary', \n                    domain: 'history', \n                    parent: DOM.rightBody\n                }],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            }\n            : {\n                name: 'summary',\n                screens: [...progressScreens],\n                lessonName,\n                levelName,\n                layoutIndex: lessonPlan.layouts.length,\n                itemIndex: 0\n            };\n\n        // lessonPlan.layouts.push(summaryLayout);\n\n        lessonPlan.layouts.push({\n            name: 'summary',\n            screens: [{ \n                name: 'summary', \n                domain: 'history', \n                parent: DOM.rightBody\n            }],\n            lessonName,\n            levelName,\n            layoutIndex: lessonPlan.layouts.length,\n            itemIndex: 0\n        });\n\n        const scores = lessonPlan.layouts.map(layout => layout.score || 0);\n        const roundScoreCount = scores.reduce((accumulator, currentValue) => accumulator + currentValue);\n\n        lessonPlan.layouts.map(layout => layout.roundScoreCount = roundScoreCount);\n\n        lesson.questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n        lesson.layoutCount = lessonPlan.layouts.length;\n        lesson.layoutNames = lessonPlan.layouts.map(layout => layout.name);\n\n        return { updatedLessonPlan: lessonPlan, updatedCollection: collection, updatedLesson: lesson };\n    }\n\n    return init();\n};\n","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { iconicTaxa } from 'snapdragon-config/snapdragon-iconic-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport categoriesTemplate from 'ui/create-guide-modal/categories-template.html';\n\nexport const renderCategories = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n          config.guide.iconicTaxa = config.guide.iconicTaxa || iconicTaxa.all;\n\n    const filterSelectedClass = 'iconic-taxa-selected';\n\n    const template = document.createElement('template');\n          template.innerHTML = categoriesTemplate;\n    \n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({}, template.content, parent);\n\n    const icons = parent.querySelectorAll('.js-iconic-taxa-categories > div > div:nth-child(1)');\n    \n    if(config.guide.iconicTaxa) {\n        icons.forEach(icon => {\n            const filterId = icon.parentElement.id;\n            if(contains(filterId, config.guide.iconicTaxa.map(taxon => taxon.id))) {\n                icon.classList.add(filterSelectedClass);\n            }\n        });\n    }\n\n    setTimeout(() => {\n        const fungiIcon = modal.querySelector('#fungi > div');\n        if(!fungiIcon) return;\n        if(utils.hasClass(fungiIcon, 'iconic-taxa-selected')) {\n            fungiIcon.querySelector('g g').classList.add('svg-icon-selected');\n        }   \n    },250);\n    \n    config.guide.hasChanged = false;\n\n    icons.forEach(category => {\n        category.addEventListener('click', event => {\n\n            config.guide.hasChanged = true;\n            \n            const filter = event.currentTarget;\n            const filterId = filter.parentElement.id;        \n            const commonName = filter.parentElement.innerText;              \n\n            if(config.guide.iconicTaxa.find(taxon => taxon.id === filterId)) {\n                \n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.remove('svg-icon-selected');                    \n                }\n                if(config.guide.iconicTaxa.length > 1) {\n                    filter.classList.remove(filterSelectedClass);\n                    config.guide.iconicTaxa = config.guide.iconicTaxa.filter(taxon => taxon.id !== filterId);\n                }\n\n            } else {\n\n                if(filterId === 'fungi') {\n                    filter.querySelector('g g').classList.add('svg-icon-selected');\n                }\n                filter.classList.add(filterSelectedClass);\n\n                config.guide.iconicTaxa.push(\n                    {\n                        id: filterId,\n                        common: commonName    \n                    }\n                )\n            }\n\n            createGuide.setConfig(config);\n            createGuide.saveStep('TAXA', config);            \n        });\n    });\n\n    createGuide.saveStep('TAXA');\n\n    document.querySelector('.js-right .js-arrow-wrapper').innerHTML = '<i class=\"far fa-arrow-alt-circle-right\"></i>';\n};","import { returnTaxonIcon } from 'ui/helpers/icon-handler';\n\nexport const saveGuide = (config, step, update = true) => {\n\n    const chosen = document.querySelector('.js-chosen span:nth-child(2)');\n\n    const handleSaveEvent = () => {\n\n        switch(step) {\n\n            case 'SPECIES':\n\n            break;\n\n            case 'LOCATION':\n\n                const splitLocation = locationStr => {\n                    return locationStr;\n                };\n\n                if(config.guide.locationType) {\n                    chosen.innerHTML = config.guide.locationType === 'place'\n                        ? config.guide.locationPlace\n                        : config.isLandscapeMode\n                            ? config.guide.locationLongLat\n                            : splitLocation(config.guide.locationLongLat);\n                }\n                break;\n\n            case 'TAXA':\n\n                chosen.innerHTML = '';\n                let icons = '';\n                if(config.guide.iconicTaxa.length > 0) {\n                    config.guide.iconicTaxa.forEach(taxon => {\n                        const icon = returnTaxonIcon(taxon.id);\n                        icons += icon;\n                    })\n                    chosen.innerHTML = icons;\n                } else {\n                    chosen.innerHTML = 'All species';\n                }\n                break;\n\n            case 'INAT':\n                \n                if(config.guide.inatId.key) {\n                    chosen.innerHTML = config.guide.inatId.key || '';\n                } else {\n                    chosen.innerHTML = '';\n                }\n                break;\n        }\n    }\n\n    return handleSaveEvent;\n}","export const switchHandler = (idSwitch, startingPosition, callback) => {\n    \n    if(!idSwitch) return;\n    \n    const state = { position: startingPosition === 'left' ? 'right' : 'left' };\n\n    let switchControl = idSwitch.querySelector('div');\n    let leftText = idSwitch.parentElement.querySelector('.txt-left');\n    let rightText = idSwitch.parentElement.querySelector('.txt-right');\n\n    const switcher = () => {\n        \n        switch(state.position) { \n            case 'left':\n                switchControl.parentElement.classList.add('right');\n                switchControl.parentElement.classList.remove('left');\n                leftText.classList.remove('selected');\n                rightText.classList.add('selected');\n                state.position = 'right';\n                break;\n            case 'right':\n                switchControl.parentElement.classList.add('left');\n                switchControl.parentElement.classList.remove('right');\n                leftText.classList.add('selected');\n                rightText.classList.remove('selected');\n                state.position = 'left';\n                break;\n        }\n        callback(state.position);\n    }\n\n    switcher();\n\n    idSwitch.addEventListener('click', event => {\n        switcher();        \n    });\n};","import 'ui/css/groups/create-guide.css';\n\nimport { CreateGuide } from 'ui/create-guide-modal/createGuide';\nimport { enums } from 'ui/helpers/enum-helper';\n\nexport const createGuideHandler = step => {\n\n    const guide = new CreateGuide(step);\n    \n    guide.goToNextStep(step, 'NEXT');\n\n    const handleNextStepAction = e => {\n\n        guide.startLesson = parseInt(guide.nextStepActionArrow.dataset.number) === 4;\n        if(guide.startLesson) { \n            guide.nextStepActionArrow.setAttribute('data-dismiss','modal');\n        } else {\n            guide.nextStepActionArrow.removeAttribute('data-dismiss');\n        }\n        const step = guide.steps.find(step => step.description === guide.getCurrentStep().nextStep);\n        if(step) guide.goToNextStep(step.number, 'NEXT');\n        guide.listeners.push( { element: guide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    guide.nextStepActionArrow.addEventListener('click', handleNextStepAction, true);\n\n    const handlePreviousStepAction = e => {\n\n        let prevStep;\n        \n        if(guide.getCurrentStep() && guide.getCurrentStep().number === 4) {\n            prevStep = guide.option === enums.guideType.PICKER.name ? 2 : 3;\n        } else {\n            prevStep = guide.getCurrentStep().number - 1;\n        }\n        \n        guide.goToNextStep(prevStep, 'PREVIOUS', guide.option);\n        guide.listeners.push( { element: guide.previousStepActionArrow, handler: handlePreviousStepAction });\n    };\n\n    guide.previousStepActionArrow.addEventListener('click', handlePreviousStepAction, true);\n\n    guide.callOnCreateCustomListeners = collection => {\n        onCloseModalListeners.forEach(listener => listener(collection));\n        onCloseModalListeners.pop();\n    };\n};\n\nconst onCloseModalListeners = [];\n\nexport const onCreateCustomLesson = listener => { \n    onCloseModalListeners.pop();\n    onCloseModalListeners.push(listener);\n};","import { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderSpeciesSearchOptions } from 'ui/create-guide-modal/species-search-options';\nimport { renderLocation } from 'ui/create-guide-modal/location';\nimport { renderInatUser } from 'ui/create-guide-modal/inat-user';\nimport { renderCategories } from 'ui/create-guide-modal/categories';\nimport { renderSpeciesPicker } from 'ui/create-guide-modal/species-picker';\nimport { saveGuide } from 'ui/create-guide-modal/common/save-guide';\nimport { initialiseLesson } from 'ui/create-guide-modal/initialise-lesson';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport actionsTemplate from 'ui/create-guide-modal/common/actions-template.html';\n\nexport class CreateGuide {\n\n  constructor(step) {\n      \n      this.listeners = [];\n\n      this.steps = [\n          { number: 0, title: 'Create your own lesson' },\n          { number: 1, title: 'Species Picker', description: 'Provenance', nextStep: '', disabled: true, className:'species-actions',\n              nextSteps: [\n                  { id: enums.guideType.LOCATION.name, step: 'Location' },\n                  { id: enums.guideType.INAT.name, step: 'Location'},\n                  { id: enums.guideType.PICKER.name, step: 'Picker'},\n              ] },\n          { number: 2, title: 'Species Picker', description: 'Location', nextStep: 'Taxa', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n          { number: 2, title: 'Species Picker', description: 'Picker', nextStep: 'Species', prevStep: 'Provenance', disabled: true, className:'location-actions' },\n          { number: 3, title: 'Species Picker', description: 'Taxa', nextStep: 'Species', disabled: true, className:'taxa-actions' },\n          { number: 4, title: 'Species Picker', description: 'Species', nextStep: 'View Guide', disabled: true, className:'filter-actions' }\n      ];\n\n      this.currentStep = this.steps.find(s => s.number == step);\n      \n      this.modal = document.getElementById('createGuide');\n\n      if(!this.modal) return;\n\n      this.modalTitle = this.modal.querySelector('.js-modal-title header');\n      this.navigationContainer = this.modal.querySelector('.js-modal-guide-navigation');\n      this.progressSteps = this.modal.querySelectorAll('.js-modal-guide-progress > div > div');\n      \n      this.previousStepActionArrow = this.modal.querySelector('.js-left');\n      this.previousStepActionTxt = this.modal.querySelector('.js-left .title');\n      \n      this.optionsTxt = this.modal.querySelector('.js-centre .title');\n      \n      this.nextStepActionArrow = this.modal.querySelector('.js-right');\n      this.nextStepActionTxt = this.modal.querySelector('.js-right .title');\n\n      this.progressSteps.forEach((ps,index) => {\n          ps.innerHTML = this.steps[index].description;\n      });\n\n      this.config = this.config || store.getState().config;\n\n      this.getConfig = () => {\n          return this.config;\n      }\n  \n      this.setConfig = (config) => {\n          this.config = config;\n          actions.boundUpdateConfig(config);\n      }\n\n      this.getCurrentStep = () => {\n          return this.currentStep;\n      }\n\n      this.setCurrentStep = step => {\n          this.currentStep = this.steps.find(s => s.number === step);\n      }\n\n      this.user = store.getState().user;\n  }\n\n  addStepActions(nextStep) {\n      \n      if(!nextStep) return;\n      \n      const parent = this.modal.querySelector('.js-step-action-content');\n            parent.innerHTML = '';\n      const template = document.createElement('template');\n            template.innerHTML = actionsTemplate;\n      const description = this.steps.find(step => step.number === this.currentStep.number).description;\n\n      renderTemplate({ className: nextStep.className }, template.content, parent);\n\n      const options = this.modal.querySelector('.js-options > h1');\n\n      switch(description) {\n          case 'Provenance':\n              options.innerHTML = 'How do you want to select your species?';\n              renderSpeciesSearchOptions(this);\n              break;\n          case 'Location':                                \n              options.innerHTML = 'Filter species by location and season.'\n              switch(this.option) {\n                  case enums.guideType.LOCATION.name:\n                      renderLocation(this.modal, this);\n                      break;\n                  case enums.guideType.INAT.name:\n                      renderInatUser(this.modal, this);\n                      break;\n                  case enums.guideType.PICKER.name:\n                      const chosenOnes = this.modal.querySelector('.js-chosen');\n                            chosenOnes.classList.add('hide-important');\n                      document.querySelector('.js-step-action-content .location-actions').classList.add('species-picker-actions');\n                      renderSpeciesPicker({\n                          container: this.modal,\n                          config: this.config,\n                          setConfig: this.setConfig\n                      }, this.modal.querySelector('.js-actions'));\n                      const title = this.modal.querySelector('.js-options > h1');\n                            title.innerHTML = 'Add species by name.';            \n                      break;\n              }\n              break;\n          case 'Taxa':\n              options.innerHTML = 'Filter species by taxa.'\n              renderCategories(this.modal, this);\n              break;\n          case 'Species':\n              setTimeout(() => {\n                initialiseLesson(this);\n              });\n              break;\n      }\n  }\n\n  goToNextStep(nextStep, direction, option = null, next = null) {\n\n      this.currentStep = next || this.steps.find(s => s.number === nextStep);\n\n      if(option === enums.guideType.PICKER.name) {\n          this.currentStep = this.steps[3];\n      }\n\n      this.direction = direction;\n      this.option = option || this.option;\n\n      if(this.startLesson ) {\n          this.currentStep = { number: 0 };\n      };\n\n      if(!this.modalTitle) return;\n      \n      this.modalTitle.innerText = this.currentStep.title;\n      this.nextStepActionTxt.innerHTML = this.currentStep.nextStep;\n\n      this.progressSteps.forEach((ps,index) => {\n\n          ps.classList.remove('active');\n\n          if(index + 1 === this.currentStep.number) {\n              ps.classList.add('active');\n              for(let i = 0; i < index; i++) {\n                  this.progressSteps[i].classList.add('completed');\n              }\n          }\n      });\n      \n      this.addStepActions(this.steps.find(step => step.number === this.currentStep.number));\n\n      if(this.currentStep.number === 1) {\n          this.navigationContainer.classList.remove('progress-container');\n          this.optionsTxt.classList.remove('hide-important');\n          this.previousStepActionTxt.classList.add('hide-important');\n          this.previousStepActionArrow.classList.add('arrow-wrapper-hidden');\n          this.nextStepActionArrow.classList.add('arrow-wrapper-hidden');            \n      } else {\n          this.navigationContainer.classList.add('progress-container');\n          this.optionsTxt.classList.add('hide-important');\n          this.previousStepActionArrow.classList.remove('arrow-wrapper-hidden');\n          this.nextStepActionArrow.classList.remove('arrow-wrapper-hidden');\n          this.nextStepActionArrow.dataset.number = this.currentStep.number;\n          this.previousStepActionTxt.classList.remove('hide-important');\n          const previousStepProperties = this.currentStep.prevStep\n                                              ? this.steps.find(s => s.description === this.currentStep.prevStep)\n                                              : this.steps.find(s => s.number === (this.currentStep.number - 1));\n          \n\n          if(this.getCurrentStep().number === 4) {\n              this.previousStepActionTxt.innerHTML = this.option === enums.guideType.PICKER.name \n                  ? this.steps[3].description\n                  : this.steps[4].description;\n          } else {\n              this.previousStepActionTxt.innerHTML = previousStepProperties.description;\n          }\n      }\n  }\n\n  saveStep(stepDescription, config) {\n      saveGuide(config || this.getConfig(), stepDescription)();\n  }\n};","import { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport inatTemplate from 'ui/create-guide-modal/inat-user-template.html';\n\nexport const renderInatUser = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatTemplate;\n\n    config.guide.guideMode = enums.guideMode.DYNAMIC.name;\n    if(config.guide.inatId.key !== '-----') {\n        if(config.guide.locationType !== 'inat') {\n            config.guide.locationType = 'inat';\n            createGuide.setConfig(config);\n        }\n        createGuide.saveStep('INAT');\n    }\n\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n    \n    renderTemplate({ }, template.content, parent);\n\n    document.querySelector('.js-chosen > div > span:nth-child(2)').innerHTML += '<div class=\"delete-guide-link js-toggle-filter\"><input class=\"hide\" type=\"checkbox\"></div>';\n\n    let autocompleteRef;\n\n    const position = config.guide.inatId.param === 'user_id' ? 'left' : 'right';\n\n    let byType = 'users';\n\n    const inatIdentityInput = parent.querySelector('#inat-identity');\n          inatIdentityInput.focus();\n\n    const handlerInatIdentityInput = e => {\n        inatIdentityInput.removeEventListener('keypress', handlerInatIdentityInput);\n        autocompleteRef = inatAutocomplete(inatIdentityInput, byType, 'inat-autocomplete-options-container', '');\n    }\n\n    inatIdentityInput.addEventListener('keypress', handlerInatIdentityInput);\n\n    inatIdentityInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    inatIdentityInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('inatForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(inatIdentityInput.value !== '') {\n            saveInatId(parent, config, createGuide, autocompleteRef);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        inatIdentityInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.inat-autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveInatId(parent, config, createGuide, autocompleteRef);\n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    const idSwitch = parent.querySelector('.snap-switch-slider');\n\n    const switchCallback = position => {\n        \n        byType = position === 'left' ? 'users' : 'projects';\n\n        const type = position === 'left' ? 'iNat user ID' : 'iNat project ID';\n        const param = position === 'left' ? 'user_id' : 'project_id';\n\n        config.guide.inatId.type = type;\n        config.guide.inatId.param = param;\n\n        createGuide.setConfig(config);\n    };\n\n    switchHandler(idSwitch, position, switchCallback);\n};\n\nconst saveInatId = (parent, config, createGuide, autocompleteRef) => {\n\n    const input = parent.querySelector('#inat-identity');\n    if (config.isLandsapeMode) {\n        input.value = '';\n        input.focus();\n    }\n    const key = input.value;\n    const id = input.name;\n    config.guide.inatId.key = key;\n    config.guide.inatId.id = id;\n\n    if (key !== '') {\n        config.guide.locationType = 'inat';\n        createGuide.setConfig(config);\n        createGuide.saveStep('INAT');\n        parent.querySelector('#inat-identity').value = '';\n        if (autocompleteRef) {\n            // autocompleteRef.destroy();\n        }\n    }\n}\n","import { Modal } from 'bootstrap';\n\nimport { contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { listenToInatRequests } from 'api/inat/inat';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport initialiseLessonSpinnerTemplate from 'ui/create-guide-modal/initialise-lesson-template.html';\nimport speciesSummaryTemplate from 'ui/create-guide-modal/species-summary-template.html';\n\nexport const initialiseLesson = createGuide => {\n\n    const { config, modal, option } = createGuide;\n    const { collections } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = initialiseLessonSpinnerTemplate;\n\n    const parent = modal.querySelector('.js-step-action-content');\n\n    renderTemplate({ }, template.content, parent);\n\n    const feedback = document.querySelector('.js-request-feedback');\n\n    let count = 0;\n\n    const interval = setInterval(() => {\n      count = count === config.guide.iconicTaxa.length ? 0 : count;\n      feedback.innerHTML = `Fetching ${config.guide.iconicTaxa[count].common} from iNaturalist `;\n      count++;\n    }, 2000);\n\n    const nextStepActionArrow = modal.querySelector('.js-right');\n    const viewGuideIcon = nextStepActionArrow.querySelector('svg');\n          viewGuideIcon.classList.add('snap-inactive');\n\n    const back = modal.querySelector('.js-left .js-arrow-wrapper');\n    const viewTaxaIcon = back.querySelector('svg');\n          viewTaxaIcon.classList.add('snap-inactive');\n\n    const renderLessonSummary = collection => {\n\n      try {\n\n        if(collection && collection.items && collection.items.length === 0) {\n            feedback.innerHTML = 'No species were found. Try widening your parameters.';\n            return;\n        }\n\n        clearTimeout(interval);\n\n        template.innerHTML = speciesSummaryTemplate;\n\n        feedback.innerHTML = '';\n\n        collection.taxa = collection.guide.iconicTaxa.map(taxon => taxon.common).join(', ');\n        \n        renderTemplate({ collection }, template.content, feedback);\n\n        const icon = modal.querySelector('.icon svg');\n              icon.classList.remove('slow-spin');\n\n        setTimeout(() => {\n          nextStepActionArrow.addEventListener('click', e => {\n\n                setTimeout( async () => {\n\n                  // snapLog('config.guide.species', config.guide.species)\n\n                  if(config.guide.species) {\n\n                      collection.items = collection.items.filter(item => {\n                          return contains(item.name, config.guide.species.map(sp => sp.name));\n                      });\n  \n                      await lessonStateHandler.changeRequest({\n                          requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                          requestArgs: { config, collection }\n                      });\n                  }\n\n                  if(parseInt(nextStepActionArrow.dataset.number) === 4) {\n                      createGuide.callOnCreateCustomListeners(collection);\n                      lessonStateHelper.clearGuide();\n                      var createGuideModal = Modal.getInstance(document.getElementById('createGuide'));\n                      createGuideModal.hide();\n                      document.querySelector('.modal-backdrop.show.fade').style.display = 'none';\n                  }\n                });\n            });   \n        });\n\n        title.innerHTML = 'New collection species';\n\n        const editSpecies = modal.querySelector('.js-edit-species');\n              editSpecies.addEventListener('click', e => {\n                const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n                      selectedSpeciesDisplay.classList.add('open');\n                      selectedSpeciesDisplay.classList.remove('hide-important');\n                      selectedSpeciesDisplay.innerHTML = '';\n                      editSpecies.classList.add('hide-important');\n                      \n                speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n\n                const editableCollectionName = modal.querySelector('#js-input-collection-name');\n                      editableCollectionName.classList.remove('hide-important');\n                      editableCollectionName.addEventListener('focusout', e => {      \n                          const name = e.target.value;\n                          config.guide.name = name;\n                          collection.name =  name;\n                          lessonStateHandler.changeRequest( { requestType: enums.lessonState.UPDATE_COLLECTION, requestArgs: { collection, config } });\n                          \n                      });\n              });\n\n        viewGuideIcon.classList.remove('snap-inactive');\n        viewTaxaIcon.classList.remove('snap-inactive');\n\n        } catch(e) {\n          logError(renderLessonSummary, e);\n        }\n    };\n\n    const initLesson = async collectionToLoad => {\n        \n        const counter = { \n            index: 0,\n            isLessonPaused: true\n        }\n        \n        const lesson = await lessonStateHandler.changeRequest({\n            requestType: enums.lessonState.GET_LESSON_STATE,\n            requestArgs: {\n                collectionToLoad,\n                updatedCounter: counter,\n                config: createGuide.getConfig()\n            }\n        });\n\n        // snapLog('initLesson', lesson);\n        \n        const collection = lesson.collection;\n              collection.guide = config.guide;\n              collection.isPrivate = true;\n        \n        renderLessonSummary(collection);\n\n        const OrdinalSuffixOf = i => {\n        var j = i % 10,\n            k = i % 100;\n        if (j == 1 && k != 11) {\n            return i + \"st\";\n        }\n        if (j == 2 && k != 12) {\n            return i + \"nd\";\n        }\n        if (j == 3 && k != 13) {\n            return i + \"rd\";\n        }\n        return i + \"th\";\n        }\n\n        let unsubscribe;\n\n        const callback = request => {\n            if(feedback) {\n                feedback.innerHTML = `Making ${OrdinalSuffixOf(request.page)} request of ${request.numberOfRequests}`;\n            } else {\n                unsubscribe(callback);\n            }\n        };\n\n        unsubscribe = listenToInatRequests(callback);\n    };\n    \n    config.guide.guideType = option;\n\n    switch(option) {\n\n        case enums.guideType.LOCATION.name:\n            initLesson({ \n                ...collections.find(c => c.guideType === option),                \n                name: config.guide.place.name,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                guide: config.guide,\n                language: config.language,\n                id: collections.length + 100010, // hack to avoid clashes with existing lessons\n            });\n            break;\n\n        case enums.guideType.INAT.name:\n            initLesson({\n                ...collections.find(c => c.guideType === option),  \n                name: `${config.guide.inatId.key}'s observations`,\n                taxa: config.guide.iconicTaxa.map(i => i.common).join(', '),\n                iconicTaxa: config.guide.iconicTaxa,\n                id: collections.length + 10000,\n            });        \n            break;\n\n        case enums.guideType.PICKER.name:\n\n            const initPicker = async () => {\n\n                const { collection } = store.getState();\n\n                let addingExtraSpecies = false;\n                \n                if(collection.items) {\n                    addingExtraSpecies = collection.items.map(i => i.name).every(val => config.guide.species.map(s => s.name).includes(val));\n                }\n    \n                let collectionToLoad;\n    \n                if(addingExtraSpecies) {\n                    collectionToLoad = collection;\n                    await lessonStateHandler.changeRequest({\n                        requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                        requestArgs: {\n                            updatedConfig: config, updatedCollection: collectionToLoad\n                        }\n                    });\n                } else {\n                    collectionToLoad = {\n                        ...collections.find(c => c.guideType === option),\n                        species: config.guide.species,\n                        id: collections.length + 10010,\n                        name: 'Your new lesson',\n                        hasVideo: false,\n                        video: {},\n                        terms: []\n                    };\n                }\n\n                initLesson(collectionToLoad);\n            };\n\n            initPicker();\n\n            break;\n    }\n\n   const title = modal.querySelector('.js-options > h1');\n         title.innerHTML = 'Requesting species images and traits';\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace, GooglePlaceDetails } from 'geo/geo';\nimport { inatAutocomplete } from 'ui/helpers/inat-autocomplete';\nimport { switchHandler } from 'ui/create-guide-modal/common/snapdragon-switch';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport locationTemplate from 'ui/create-guide-modal/location-template.html';\nimport googleLogoImg from 'img/powered_by_google_on_white_hdpi.png';\n\nexport const renderLocation = (modal, createGuide) => {\n\n    const config = createGuide.getConfig();\n\n    createGuide.saveStep('LOCATION');\n\n    let locationPlace = config.guide.locationPlace;\n    let autocompleteRef;\n\n    const template = document.createElement('template');\n          template.innerHTML = locationTemplate;\n    const parent = modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    config.guide.season.observableMonths = config.guide.season.observableMonths || config.season.observableMonths;\n    config.guide.guideMode = enums.guideMode.DYNAMIC.name;\n\n    if(config.guide.season.observableMonths) {\n\n        const months = config.guide.season.observableMonths.map(month => month.name);\n        const observableMonths = `${months[0]}-${months[months.length - 1]}`;\n        const defaultNoOfRecords = config.guide.noOfRecords;\n\n        renderTemplate({ observableMonths, noOfRecords: defaultNoOfRecords }, template.content, parent);\n    }\n\n    const defaultLocationTxt = 'Use your current location';\n\n    const setLocationLongLatBtn = modal.querySelector('.js-set-location-btn');\n          setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n\n    async function handleSetLocationLongLat(event) {\n\n        event.stopPropagation();\n        setLocationLongLatBtn.innerHTML = 'Updating location'\n        const place = await getPlace(config, true);\n        config.guide.locationType = 'longLat';        \n        config.place = place;\n        config.guide.locationLongLat = place.longLocation;\n        setLocationLongLatBtn.innerHTML = defaultLocationTxt;\n        \n        createGuide.setConfig(config);\n        createGuide.saveStep('LOCATION');\n    }\n\n    setLocationLongLatBtn.addEventListener('click', handleSetLocationLongLat);\n\n    const locationPlaceInput = modal.querySelector('#inat-place');\n          locationPlaceInput.placeholder = config.isLandscapeMode\n                                            ? 'Or start typing the name of a place you are interested in.'\n                                            : 'Or start typing the name of a place.';\n          locationPlaceInput.focus();\n\n    // let counter = 0;\n\n    const handleLocationPlaceInput =  e => {\n        locationPlaceInput.removeEventListener('keypress', handleLocationPlaceInput);\n        // counter++;        \n        autocompleteRef = inatAutocomplete(locationPlaceInput, 'places', 'autocomplete-options-container', 'place');\n        // saveLocationBtn.disabled = false;        \n        // setTimeout(() => {\n        //     const googleImageContainer = modal.querySelector('#inat-place-autocomplete #googleLogoContainer');\n        //     if(!googleImageContainer && counter >= 3) {\n        //         const options = modal.querySelector('#inat-place-autocomplete');\n        //         if(options) options.innerHTML += `<div id=\"googleLogoContainer\"><img id=\"googleLogo\" src=\"${googleLogoImg}\" alt=\"\"></div>`;\n        //     }            \n        // },750);  \n    }\n\n    locationPlaceInput.addEventListener('keypress', handleLocationPlaceInput);\n\n    locationPlaceInput.addEventListener('click', e => {\n        e.preventDefault();\n    });\n\n    locationPlaceInput.addEventListener('keyup', e => {\n        e.preventDefault('e.keyCode: ', e.keyCode);\n    });\n\n    document.getElementById('locationForm').addEventListener('submit', e => {\n        e.preventDefault();\n        if(locationPlaceInput.value !== '') {\n            saveLocation(config, locationPlaceInput, locationPlace, createGuide);\n        }\n    });\n\n    if(config.isPortraitMode) {\n        locationPlaceInput.addEventListener('focusout', e => {\n            const container = document.querySelector('.autocomplete-options-container');\n                if(container) {\n                    setTimeout(() => {\n                        saveLocation(config, locationPlaceInput, locationPlace, createGuide);                   \n                    });\n                    e.preventDefault();\n                }\n        });\n    }\n\n    let range = config.guide.speciesRange;\n    const rangeTxt = modal.querySelector('.js-range');\n          rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n    modal.querySelector('.js-set-range-input').value = range;\n\n    const slider = modal.querySelector('.js-set-range-input');\n    \n    const updateSlider  = event => {\n        range = event.target.value;\n        config.guide.speciesRange = range;\n        rangeTxt.innerHTML = `Include species within ${range}km.`;\n\n        createGuide.setConfig(config);\n    };\n    \n    slider.addEventListener('change', updateSlider);\n\n    createGuide.nextStepActionArrow.addEventListener('click', event => {\n        if(autocompleteRef)\n            autocompleteRef.destroy();\n    });\n\n    const idSwitch = parent.querySelector('.js-snap-switch-slider');\n\n    const switchCallback = position => {\n\n        const config = createGuide.getConfig();\n\n        const currentType = config.guide.season.type;\n\n        if(position === 'right') {\n            config.guide.season.type = 'all_year';\n        } else {\n            config.guide.season.type = 'months';\n        }\n\n        createGuide.setConfig(config);\n        \n        if(config.guide.season.type !== currentType) {\n            createGuide.saveStep('SEASON');\n        }        \n    };\n\n    const position = config.guide.season.type === 'months' ? 'left' : 'right';\n\n    switchHandler(idSwitch, position, switchCallback);\n\n    const noOfRecords = document.querySelector('.js-location-no-of-records');\n          noOfRecords.addEventListener('change', e => {\n            const config = createGuide.getConfig();\n                  config.guide.noOfRecords = parseInt(noOfRecords.value);\n            createGuide.setConfig(config);\n          });\n}\n\nconst saveLocation = (config, locationPlaceInput, locationPlace, createGuide) => {\n\n    let selectedText = locationPlaceInput.value;\n    let selectedId = locationPlaceInput.name;\n\n    config.guide.locationType = 'longLat';\n    config.guide.place.name = selectedText;\n    config.guide.locationLongLat = selectedText;\n\n    config.guide.locationType = 'longLat';\n    config.guide.locationLongLat = selectedText;    \n\n    const callback = geocoderResult => {\n        if(geocoderResult && geocoderResult.length > 0) {\n            const lat = geocoderResult[0].geometry.location.lat();\n            const long = geocoderResult[0].geometry.location.lng();\n            config.guide.coordinates = { lat, long };\n            \n            locationPlaceInput.value = '';\n            \n            createGuide.setConfig(config);\n            createGuide.saveStep('LOCATION');\n        }\n    };\n    GooglePlaceDetails(selectedId, callback);\n\n    return locationPlace;\n}\n","import { contains } from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport editorTemplate from 'ui/create-guide-modal/species-editor-template.html';\n\nconst listenersToAddedSpecies = [];\n\nexport const addListenerToAddedSpecies = listener => {\n    listenersToAddedSpecies.pop();  \n    listenersToAddedSpecies.push(listener);\n};\n\nexport const speciesEditor = (container, selectedSpeciesDisplay, selectedSpecies, savedSpeciesNames, addedSpecies) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = '';\n\n    renderTemplate({addedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const input = container.querySelector(\"#input-species\");\n          \n    setTimeout(() => {\n        input.focus();\n    }, 500);\n\n    const addSpeciesToList = species => {\n        \n        if(contains(species, selectedSpecies)) return;\n\n        selectedSpecies.push(species);\n        addedSpecies.push(species);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        listenersToAddedSpecies.forEach(listener => listener(species));\n\n        setTimeout(() => {            \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames, addedSpecies);\n        }, 200);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !contains(n.value, selectedSpecies));\n                update(suggestions);\n            },\n            onSelect: function(item) {\n                input.value = item.label;\n                addSpeciesToList(input.value);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    addSpeciesToList(input.value);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    container.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species !== removedSpecies);\n                        \n            speciesEditor(container, selectedSpeciesDisplay, selectedSpecies, speciesNames);\n        });\n    })\n};","import { contains } from 'ramda';\n\nimport autocomplete from 'autocompleter';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport editorTemplate from 'ui/create-guide-modal/species-in-guide-editor-template.html';\n\nexport const speciesInGuideEditor = (config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, savedSpeciesNames) => {\n\n    const spinner = modal.querySelector('.js-species-search');\n    if(spinner) spinner.classList.add('hide-important');\n\n    const template = document.createElement('template');\n          template.innerHTML = editorTemplate;\n\n    selectedSpeciesDisplay.innerHTML = ''\n\n    renderTemplate({selectedSpecies}, template.content, selectedSpeciesDisplay);\n\n    const getTaxa = (taxa, config, selectedSpecies) => {\n        if(taxa) {           \n            if(config.guide.iconicTaxa) {\n                taxa.innerHTML = config.guide.iconicTaxa.map(i => i.common).join(', ');\n            } else {\n                taxa.innerHTML = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon))].join(', ');\n            }\n        }\n    }\n        \n    const speciesCount = modal.querySelector('.js-lesson-taxa-count');\n\n    if(speciesCount) {\n        speciesCount.innerHTML = speciesCount === 1 \n            ? `There is ${selectedSpecies.length} species in this lesson.`\n            : `There are ${selectedSpecies.length} species in this lesson.`;;\n    }\n\n    const taxa = modal.querySelector('.js-lesson-taxa');\n    getTaxa(taxa, config, selectedSpecies);\n\n    const input = modal.querySelector(\"#input-species\");\n    if(config.isLandscapeMode) {\n        setTimeout(() => {\n            input.focus();\n        }, 500);\n    }\n\n    const addSpeciesToList = async species => {\n        \n        if(contains(species.name, selectedSpecies.map(ss => ss.name))) return;\n\n        selectedSpecies.push(species);\n\n        config.guide.species = selectedSpecies;\n        config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n        createGuide.setConfig(config);\n\n        speciesNames = speciesNames.filter(name => name.value !== input.value);\n        input.value = '';\n\n        const { collection } = store.getState();\n        \n        if(collection.items) { // existing collection, to which we want to add species\n          import('ui/screens/lists/lesson-state-handler').then(module => {\n            module.lessonStateHandler.changeRequest({\n                requestType: enums.lessonState.ADD_SPECIES_TO_COLLECTION,\n                requestArgs: { config, collection }\n            });\n          });\n        }\n      \n        setTimeout(() => {            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        }, 250);\n    };\n\n    let speciesNames = savedSpeciesNames || [];\n\n    const init = async () => {\n\n        if(speciesNames.length === 0) {\n\n            speciesNames = await firestore.getSpeciesNames()\n            speciesNames = speciesNames[0].value.map(name => {\n                return {\n                    label: name,\n                    value: name\n                }\n            });\n        }\n\n        autocomplete({\n            input: input,\n            fetch: function(text, update) {\n                text = text.toLowerCase();\n                const suggestions = speciesNames.filter(n => n.value.toLowerCase().startsWith(text) && !contains(n.value, selectedSpecies.map(ss => ss.name)));\n                update(suggestions);\n            },\n            onSelect: async function(item) {\n                input.value = item.label;\n                const species = await firestore.getSpeciesByName(item.label);\n                addSpeciesToList(species);\n            },\n            minLength: 3,\n            debounceWaitMs: 200,\n            className: 'autocomplete-options-container'\n        });\n\n        input.addEventListener('change', event => {\n            setTimeout(async() => {\n                const highlightedText = document.querySelector('.selected');\n                if(highlightedText) {\n                    input.value = highlightedText.innerText;\n                    const species = await firestore.getSpeciesByName(input.value);\n                    addSpeciesToList(species);\n                }\n            }, 100);\n        });\n    };\n    \n    init();\n\n    modal.querySelectorAll('li input').forEach(checkBox => {\n        \n        checkBox.addEventListener('change', event => {\n\n            const removedSpecies = event.target.id;\n\n            speciesNames.push({ label: removedSpecies, value: removedSpecies});\n            selectedSpecies = selectedSpecies.filter(species => species.name !== removedSpecies);\n            \n            config.guide.species = selectedSpecies;\n            config.guide.iconicTaxa = [ ...new Set(selectedSpecies.map(ss => ss.iconicTaxon)) ];\n\n            createGuide.setConfig(config);\n            \n            speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, selectedSpecies, speciesNames);\n        });\n    })\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\nimport { speciesEditor } from 'ui/create-guide-modal/species-editor';\nimport { enums } from 'ui/helpers/enum-helper';\n\nimport speciesPickerTemplate from 'ui/create-guide-modal/species-picker-template.html';\n\nexport const renderSpeciesPicker = (props, parent) => {\n\n      const { config, container, selectedSpecies } = props;\n\n      const template = document.createElement('template');\n            template.innerHTML = speciesPickerTemplate;\n\n      parent.innerHTML = '';\n\n      renderTemplate({}, template.content, parent);\n\n      const selectedSpeciesDisplay = parent.querySelector('.js-selected-species-container');\n            selectedSpeciesDisplay.innerHTML = '';\n\n      if(config) { // web \n          config.guide.guideMode = enums.guideMode.STATIC.name;\n          speciesInGuideEditor(config, container, selectedSpeciesDisplay, props, config.guide.species || []);\n      } else { // admin\n          speciesEditor(parent, selectedSpeciesDisplay, selectedSpecies, [], []);\n      }\n};\n","import { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { languagePicker } from 'ui/screens/common/language-selection';\n\nimport speciesTemplate from 'ui/create-guide-modal/species-search-options-template.html';\n\nexport const renderSpeciesSearchOptions = createGuide => {\n\n    const header = createGuide.modal.querySelector('.js-modal-title > header');\n          header.innerHTML = 'Create your own lesson';\n\n    const options = [\n        {\n            text: 'By location and season',\n            id: enums.guideType.LOCATION.name\n        },\n        {\n            text: 'From iNaturalist observations',\n            id: enums.guideType.INAT.name\n        },\n        {\n            text: 'Using a name-based search',\n            id: enums.guideType.PICKER.name\n        }\n    ];\n\n    const template = document.createElement('template');\n          template.innerHTML = speciesTemplate;\n    const parent = createGuide.modal.querySelector('.js-actions');\n          parent.innerHTML = '';\n\n    const config = createGuide.getConfig();\n\n    renderTemplate({ options }, template.content, parent);\n\n    const handleNextStepAction = event => {\n\n        const option = event.currentTarget.dataset.option;\n        const step = createGuide.steps.find(s => s.number === createGuide.getCurrentStep().number);\n        const nextStepName = step.nextSteps.find(step => step.id === option).step;\n        const nextStep = createGuide.steps.find(s => s.description === nextStepName);\n\n        createGuide.startLesson = false;        \n        createGuide.goToNextStep(createGuide.getCurrentStep().number + 1, 'NEXT', option, nextStep);\n        createGuide.listeners = [];\n        createGuide.listeners.push( { element: createGuide.nextStepActionArrow, handler: handleNextStepAction });\n    };\n\n    const lessonOptions = document.querySelectorAll('.custom-lesson-menu-options li');\n    \n    lessonOptions.forEach((option, index) => {\n        option.addEventListener('click', handleNextStepAction, true);\n    });\n\n    languagePicker(config, document.querySelector('.js-language-selection-container'), (config) => {\n        createGuide.setConfig(config);\n    });\n\n    const warning = createGuide.modal.querySelector('.js-persistence-warning');\n            \n    if(createGuide.user) {\n        warning.classList.add('hide-important');\n    }\n};","export const DOM = {\n  \n    leftGrid : document.getElementsByClassName('js-side-lesson-list')[0],\n    leftHeader : document.getElementsByClassName('js-side-lesson-list-header')[0],\n    leftBody : document.getElementsByClassName('js-side-lesson-list-body')[0],\n    leftFooter : document.getElementsByClassName('js-side-lesson-list-footer')[0],\n\n    leftHeaderTxt : document.getElementsByClassName('js-side-lesson-list-header-txt')[0],\n    specimenRptr : document.getElementsByClassName('js-rptr-specimen')[0],\n    \n    rightGrid : document.getElementsByClassName('js-main-lesson-grid')[0],\n    rightHeader : document.getElementsByClassName('js-main-lesson-header')[0],\n    rightHeaderTxt : document.getElementsByClassName('js-main-lesson-txt-header')[0],\n    rightHeaderScoreTxt : document.getElementsByClassName('js-main-lesson-txt-score')[0],\n    rightBody : document.getElementsByClassName('js-main-lesson-body')[0],\n    rightRptrSummary : document.getElementsByClassName('js-summary')[0],\n    rightBodyBottom : document.getElementsByClassName('js-main-lesson-body-bottom')[0],\n    rightFooter : document.getElementsByClassName('js-main-lesson-footer')[0]    \n};\n","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\n\nexport const renderHeaders = collection => {\n\n    DOM.leftHeaderTxt.innerHTML = 'Learn the planet';\n    DOM.rightHeaderTxt.innerHTML = 'Learn the planet';\n\n    setTimeout(() => {\n        \n        const { layout, lessonPlan } = store.getState();\n        const progressBar = document.querySelector('.js-main-lesson-grid progress');\n\n        if(lessonPlan && layout) {\n\n            const questionCount = lessonPlan.layouts.filter(layout => layout.type === 'test').length;\n        \n            progressBar.max = questionCount;\n            progressBar.value = layout.roundProgressIndex || progressBar.value;\n        }\n    });\n};","import { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport loginTemplate from 'ui/fixtures/login-template.html';\nimport logoutTemplate from 'ui/fixtures/logout-template.html';\n\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\n\nexport const renderLogin = user => {\n\n  const init = () => {\n\n    document.querySelector('#basicModal .js-modal-text').innerHTML = '';\n\n    const template = document.createElement('template');\n        \n    if(user) {\n\n        template.innerHTML = logoutTemplate\n\n        renderTemplate({ email: user.email }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon logout';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        const auth = firebase.auth();\n\n        setTimeout(() => {\n            \n            const form = document.querySelector('#logout-form');\n                  form.addEventListener('submit', e => {\n\n                e.preventDefault();\n\n                const logOut = document.querySelector('#js-logout-btn');\n                      logOut.setAttribute('disabled', 'disabled');\n\n                  auth.signOut()\n                  .then(() => {\n                    actions.boundUpdateUser(null);\n                    logOut.innerHTML = 'Success';\n                    setTimeout(() => {\n                        footer.click();\n                    }, 2500);\n                  });\n          });\n\n        }, 500);\n\n\n    } else {\n\n        template.innerHTML = loginTemplate;\n\n        renderTemplate({ }, template.content, document.querySelector('#basicModal .js-modal-text'));\n\n        document.querySelector('#basicModal .js-modal-text-title header').innerHTML = 'Snapdragon login';\n\n        const footer = document.querySelector('.js-modal-footer');\n\n        const auth = firebase.auth();\n\n        setTimeout(() => {\n\n            const email = document.querySelector('#login-email');\n                  email.focus();\n            \n            const password = document.querySelector('#login-password');   \n\n            const form = document.querySelector('#login-form');\n                  form.addEventListener('submit', e => {\n\n                    e.preventDefault();\n\n                    const logIn = document.querySelector('#js-login-btn');\n                          logIn.setAttribute('disabled', 'disabled');              \n                    \n                    auth.signInWithEmailAndPassword(email.value, password.value)\n                    .then((credentials) => {\n                        actions.boundUpdateUser({\n                            email: email.value,\n                            password: password.value\n                        });\n                        logIn.innerHTML = 'Success';\n                        setTimeout(() => {\n                            footer.click();\n                        }, 2500);\n                    })\n                    .catch( error => {\n                        const notLoggedIn = document.querySelector('.js-not-logged-in');\n                              if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n                              if(notLoggedIn) notLoggedIn.querySelector('.js-message').innerHTML = error.message;\n                    });\n                });\n\n        }, 500);\n\n    }\n  };\n\n  init();\n};\n\nexport const renderLoggedIn = user => {\n\n    if(user) {\n        const loggedIn = document.querySelector('.js-logged-in');\n        if(loggedIn) loggedIn.classList.remove('hide-important');\n    } else {\n        const notLoggedIn = document.querySelector('.js-not-logged-in');\n        if(notLoggedIn) notLoggedIn.classList.remove('hide-important');\n        const loggedOut = document.querySelector('.js-logged-out');\n        if(loggedOut) loggedOut.classList.remove('hide-important');\n    }\n};","import { contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\n\nimport navigationPortraitTemplate from 'ui/fixtures/navigation-portrait-template.html';\nimport navigationLeftTemplate from 'ui/fixtures/navigation-left-template.html';\nimport navigationRightTemplate from 'ui/fixtures/navigation-right-template.html';\n\nexport const renderNavigation = collection => {\n\n    const { config } = store.getState();\n\n    const template = document.createElement('template');\n\n    let parent;\n    \n    if(config.isPortraitMode) {\n        template.innerHTML = navigationPortraitTemplate;\n        parent = document.querySelector('.js-main-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    } else {\n        template.innerHTML = navigationLeftTemplate;\n        parent = document.querySelector('.js-side-lesson-list-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n        template.innerHTML = navigationRightTemplate;\n        parent = document.querySelector('.js-main-lesson-footer .js-nav-icons');\n        parent.innerHTML = '';\n        renderTemplate({ }, template.content, parent);\n    }\n\n    const navIcons =  document.querySelectorAll('.js-nav-icons .icon');\n\n    navIcons.forEach(icon => {\n\n        icon.addEventListener('click', async event => {\n            \n          const clickedIcon = event.currentTarget;\n          \n          const { collection, config } = store.getState();\n\n          const toggleIconOnOff = clickedIcon => {\n              clickedIcon.classList.add('active-icon');\n              setTimeout(() => {\n                  clickedIcon.classList.remove('active-icon');\n              }, 1000);\n          };\n\n          let lesson;\n\n          navIcons.forEach(icon => icon.classList.remove('active-icon'));\n          const isIconActive = contains('active-icon', clickedIcon.classList);\n          if(!isIconActive) {\n              clickedIcon.classList.add('active-icon');\n          }\n\n          switch(enums.navigation.enumValueOf(clickedIcon.id)) {\n              case enums.navigation.LANDSCAPE_HOME:\n                  break;\n              case enums.navigation.SETTINGS:\n                  toggleIconOnOff(clickedIcon);\n                  import('ui/fixtures/settings').then(module => {\n                    module.settingsHandler();\n                  });\n                  break;\n              case enums.navigation.LESSONS:\n                  import('ui/screens/lists/lesson-state-handler').then(module => {\n                    module.lessonStateHandler.recordUserAction(enums.userEvent.RETURN_LESSONS);\n                  });\n                  import('ui/screens/lists/lesson-list').then(module => {\n                    module.renderLessons();\n                  });\n                break;\n              case enums.navigation.GLOSSARY:   \n                  toggleIconOnOff(clickedIcon);\n                  const { glossary } = store.getState();\n                  const definitions = !!collection.glossary\n                      ? glossary.filter(definition => contains(definition.taxon, collection.glossary))\n                      : glossary;\n                  import('ui/quick-fire-modal/quick-fire').then(module => {\n                    module.quickFireHandlers.definitions(definitions);\n                  });\n                  break;\n              case enums.navigation.EMAIL:\n                  toggleIconOnOff(clickedIcon);\n                  break;\n              case enums.navigation.LOGIN:                  \n                  import('ui/fixtures/login').then(module => {\n                    module.renderLogin(store.getState().user);\n                  });\n                  break;\n              case enums.navigation.LANGUAGE:\n                import('ui/fixtures/language').then(module => {\n                  module.renderLanguagePicker();\n                  document.getElementById('basicModal').addEventListener('hide.bs.modal', e => {\n                    document.querySelector('.js-nav-icons .language').classList.remove('active-icon');\n                  });\n                });                  \n              case enums.navigation.QUIZ:\n                import('quiz/quiz-modal').then(module => {\n                  module.openQuiz();\n                  document.getElementById('quizModal').addEventListener('hide.bs.modal', e => {\n                    document.querySelector('.js-nav-icons .quiz-icon').classList.remove('active-icon');\n                    actions.boundClearDeckScoreHistory();\n                  });\n                });\n                break;\n              default:\n                return;\n          }\n        });        \n    });\n\n    const onLoadState = () => {\n\n      const { config, userAction } = store.getState();\n\n      if(config.isLandscapeMode) return;\n\n      if(!cookieHandler.isFirstTimeVisitor()) {\n        console.log(userAction);\n        const lessonsIcon = document.querySelector('.js-lessons');\n        const newScreenActions = [ enums.userEvent.PLAY_LESSON_VIDEO.name, enums.userEvent.START_LESSON_REVIEW.name, enums.userEvent.START_TERM_REVIEW.name ];\n        (userAction && contains(userAction.name, newScreenActions))\n          ? lessonsIcon.classList.remove('active-icon')\n          : lessonsIcon.classList.add('active-icon');\n      }\n  };\n\n    onLoadState();\n};\n\nexport const renderLoginChanges = user => {\n  const loginIcon = document.querySelector('.js-login');\n  if(loginIcon)\n    loginIcon.dataset.isLoggedIn = !user ? \"false\" : \"true\";\n};\n","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\n\nexport const renderScore = score => {\n    \n    const { history, collection, config, layout, lesson, lessonPlan } = store.getState();\n\n    score.mode = config.mode;\n\n    if(!layout) return;\n\n    if(score.total === layout.roundScoreCount) {\n        actions.boundUpdateHistory(score);\n    }\n};","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getInatSpecies } from 'api/inat/inat';\nimport { getPlace } from 'geo/geo';\nimport { firestore } from 'api/firebase/firestore';\nimport { enums } from 'ui/helpers/enum-helper';\n\nconst getItems = async (collection, config) => {\n\n  let items = [];\n\n  switch(config.guide.guideMode) {\n    case enums.guideMode.DYNAMIC.name:\n      switch(config.guide.guideType) {\n        case enums.guideType.LOCATION.name:\n          const place = await getPlace(config, true);\n          config.guide.coordinates = {\n              long: place.query[0],\n              lat: place.query[1]\n          };\n          items = await getInatSpecies(config);\n        case enums.guideType.INAT.name:\n          items = await getInatSpecies(config);\n      }      \n      break;\n    case enums.guideMode.STATIC.name:\n      items = await getSpeciesDetailsInParallel(collection.species);\n      break;\n  }\n\n  // snapLog('getItems request type: ', { guideType: config.guide.guideType, guideMode: config.guide.guideMode, items: items });\n\n  return items;\n};\n\nconst loadCollection = async (collection, config) => {\n\n    config.collection = { id: collection.id };\n    config.language = collection.language || 'en';\n    \n    const collectionIsUnchanged = \n      collection.items && collection.items.length > 0 && config.collection.id === collection.id && \n      (!collection.speciesRange || collection.speciesRange === config.guide.speciesRange);\n  \n    // snapLog('collectionIsUnchanged: ', collectionIsUnchanged);\n\n    if(!!collectionIsUnchanged) {\n      return collection;\n    }\n\n    collection.items = await getItems(collection, config);\n    collection.items = utils.shuffleArray(collection.items.filter(item => item.taxonomy));\n\n    if(collection.nextItem) return; // after refreshing or returning to the page (using rehydrated collection)\n\n    if(contains('lepidoptera', collection.iconicTaxa.map(taxon => taxon.id)) && !contains('insecta', collection.iconicTaxa.map(taxon => taxon.id))) {\n        const insecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() === 'insecta');\n        const lepidoptera = insecta.filter(i => i.taxonomy.order.toLowerCase() === 'lepidoptera');\n        const noninsecta = collection.items.filter(i => i.taxonomy.class.toLowerCase() !== 'insecta');\n        collection.items = [ ...lepidoptera, ...noninsecta ];\n    }\n\n    switch(config.guide.guideMode) {\n      case enums.guideMode.DYNAMIC.name:\n        collection.speciesRange = config.guide.speciesRange;\n        break;\n    }\n\n    const loadedCollection = await loadCollectionItemProperties(collection, config);\n\n    return loadedCollection;\n};\n\nconst loadCollectionItemProperties = async (collection, config) => {\n\n    switch(config.guide.guideMode) {\n      case enums.guideMode.DYNAMIC.name:\n        collection.items = utils.sortBy(collection.items.filter(item => item), 'observationCount', 'desc');\n        break;\n      case enums.guideMode.STATIC.name:\n        collection.items.forEach(sp => {\n            if(sp.time) {\n                sp.firstTime = sp.time[0];\n            }\n        });\n        collection.items = utils.sortBy(collection.items, 'firstTime', 'asc');\n        break;\n    }\n\n    // snapLog('loadCollectionItemProperties', collection);\n\n    const families = [...new Set(collection.items.map(i => i.taxonomy.family))];\n    const orders = [...new Set(collection.items.map(i => i.taxonomy.order))];\n    const genera = [...new Set(collection.items.map(i => i.taxonomy.genus).filter(g => g))];\n    let familyTaxa = [], orderTaxa = [], genusTaxa = [];\n    let taxa = await firestore.getTaxaNames();\n    taxa = taxa[0].value;\n    const getGenusTaxa = async (genera) => {\n        return Promise.all(genera.map(async (genus) => {\n            const genusTaxon = await firestore.getTaxonByName(config, genus);\n            if(Object.entries(genusTaxon).length > 0 && genusTaxon.constructor === Object)\n                genusTaxa.push(genusTaxon);\n            return genusTaxa;\n        }));\n    };\n    await getGenusTaxa(genera);\n    const getFamilyTaxa = async (families) => {\n        return Promise.all(families.map(async (family) => {\n            const familyTaxon = await firestore.getTaxonByName(config, family);\n            if(Object.entries(familyTaxon).length > 0 && familyTaxon.constructor === Object)\n                familyTaxa.push(familyTaxon);\n            return familyTaxa;\n        }));\n    };\n    await getFamilyTaxa(families);\n    const getOrderTaxa = async (orders) => {\n        return Promise.all(orders.map(async (order) => {\n            const orderTaxon = await firestore.getTaxonByName(config, order);\n            if(Object.entries(orderTaxon).length > 0 && orderTaxon.constructor === Object)\n                orderTaxa.push(orderTaxon);\n            return orderTaxa;\n        }));\n    };\n    await getOrderTaxa(orders);\n    const getFamilyNames = item => {\n        if (item.family && item.family.names) {\n            return item.family.names[0].names ? item.family.names[0].names : item.family.names;\n        }\n        else {\n            return '';\n        }\n    };\n\n    const findRank = (taxa, item, rank) => {\n        const taxonRank = item.taxonomy[rank.name.toLowerCase()];\n        const taxon = taxa.length > 0 ? taxa.find(taxon => taxon.name === taxonRank) : null;\n        return taxon || '';\n    };\n\n    collection.items.forEach(async (item, index) => {\n        const names = item.name.split(' ');\n        item.taxonomy.genus = names[0];\n        item.taxonomy.species = names[1];\n        item.genus = findRank(genusTaxa, item, enums.taxon.GENUS);\n        item.family = findRank(familyTaxa, item, enums.taxon.FAMILY);\n        if (item.family) {\n            item.family.names = getFamilyNames(item);\n            item.family.vernacularName = item.family.names[0];\n        }\n        item.order = findRank(orderTaxa, item, enums.taxon.ORDER);\n        item.snapIndex = index + 1;\n        item.id = item.eolId;\n        item.vernacularNames = itemProperties.getVernacularNames(item, config);\n        item.vernacularName = itemProperties.getVernacularName(item, config);\n        item.name = names.slice(0, 2).join(' ');\n        item.questionIds = item.questionIds || [];\n    });\n    const loadTraitsInParallel = items => {\n        return Promise.all(items.map(async (item) => {\n            const itemTraits = await firestore.getTraitsBySpeciesName(item.name);\n            item.traits = itemTraits || {};\n            return item;\n        }));\n    };\n    await loadTraitsInParallel(collection.items);\n    collection.itemIndex = 0;\n    collection.glossary = [...Array.from(new Set(collection.items.map(item => item.iconicTaxon))), 'common'];\n    return await collection;\n};\n\nconst getSpeciesDetailsInParallel = async species => {\n  return await firestore.getSpeciesInParallel(species);\n};\n\nexport const collectionHandler = {\n    loadCollection,\n    loadCollectionItemProperties,\n    getSpeciesDetailsInParallel\n};\n\n","// https://github.com/GoogleChromeLabs/samesite-examples/blob/master/javascript.md\n\nconst FIRST_TIME = 'first_time';\nconst LAST_VISITED = 'last_visited';\nconst TOO_MANY_DAYS = 5;\nconst SECURE = 'SameSite=Lax;';\n\nlet cookie;\n\nconst setFirstTimeVisitorCookie = () =>  {\n    let isFirstVisit = true;\n    if (document.cookie.indexOf(FIRST_TIME) < 0) {\n      cookie = `${FIRST_TIME}=false; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        isFirstVisit = false;\n    }\n    return isFirstVisit;\n};\n\nconst setLastVisitedCookie = date => {    \n    if (document.cookie.indexOf(LAST_VISITED) < 0) {\n      cookie = `${LAST_VISITED}=${date}; ${SECURE}`;\n      document.cookie = cookie;\n    } else {\n        setLastVisited(date);\n    }    \n};\n\nconst hasUserBeenAwayTooLong = () => {\n    const lastVisited = readCookie(LAST_VISITED);\n\n    if(!lastVisited) return false;\n\n    const timeDiff = Math.abs(new Date() - new Date(lastVisited));\n    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)); \n    const beenGoneTooLong = daysDiff > TOO_MANY_DAYS;\n    if(beenGoneTooLong) {\n        setLastVisited(Date());\n    }\n    return beenGoneTooLong;\n};\n\nconst isFirstTimeVisitor = () => {\n    return readCookie(FIRST_TIME) === null;\n};\n\nconst removeFirstTimeVisitorCookie = () => {\n  cookie = `${FIRST_TIME}= ; expires = Thu, 01 Jan 1970 00:00:00 GMT; ${SECURE}`;\n  document.cookie = cookie; \n};\n\nexport const cookieHandler = {\n    setFirstTimeVisitorCookie,\n    isFirstTimeVisitor,\n    removeFirstTimeVisitorCookie,\n    setLastVisitedCookie,\n    hasUserBeenAwayTooLong\n};\n\nconst readCookie = name => {\n\tvar nameEQ = name + \"=\";\n\tvar ca = document.cookie.split(';');\n\tfor(var i=0;i < ca.length;i++) {\n\t\tvar c = ca[i];\n\t\twhile (c.charAt(0)==' ') c = c.substring(1,c.length);\n\t\tif (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n\t}\n\treturn null;\n}\n\nconst setLastVisited = date => {\n    const cookieValue = document.cookie.replace(/(?:(?:^|.*;\\s*)last_time\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n    const cookieToAdd = cookieValue + `${LAST_VISITED}=${date};`;\n    cookie = `${cookieToAdd}; ${SECURE}`;\n    document.cookie = cookie;\n};\n","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nconst getVernacularName = (item, config, useShortForm = false, namePart = 'vernacularName') => {\n    try {\n        let shortForm;\n        if(useShortForm) {\n            let englishShortForm = item.names.find(name => name.language === 'en' && name.shortForm);\n            englishShortForm = englishShortForm ? englishShortForm.shortForm : undefined;\n            let languageSortForm = item.names.find(name => name.language === config.language && name.shortForm);\n            languageSortForm = languageSortForm ? languageSortForm.shortForm : undefined;\n            shortForm = languageSortForm || englishShortForm;\n        }\n        if(shortForm) return shortForm;    \n        const englishNames = item.names.filter(name => name.language === 'en');\n        const english = englishNames.length > 0 ? englishNames[0][namePart] : 'Unknown';\n        const names = item.names.filter(name => name.language === config.language);\n        const name = names.length > 0 ? names[0][namePart] : english;\n        const capitalisedNames = name.split(' ');\n        let capitalisedName;\n        if(config.language === 'fr') {        \n            capitalisedName = utils.capitaliseFirst(capitalisedNames.join(' '));\n        } else {\n            capitalisedName = capitalisedNames.map(name => utils.capitaliseFirst(name)).join(' ');\n        }\n        return capitalisedName;\n    } catch(e) {\n        console.error('Failing getting vernacular name for: ', item, 'error: ', e.message);\n        return '';\n    }\n};\n\nconst getGenusName = binomial => {\n    return binomial.split(' ')[0];\n};\n\nconst getSpeciesName = binomial => {\n    return binomial.split(' ')[1];\n};\n\nconst getTaxonProp = (taxon, language, prop) => {\n\n    if(!taxon[prop]) return '';\n\n    const propValue = taxon[prop].find(p => p.language === language) ? taxon[prop].find(p => p.language === language) : taxon[prop].find(p => p.language === 'en');\n\n    return propValue || '';\n};\n\nconst getNestedTaxonProp = (taxon, language, prop1, prop2, index) => {\n\n    if(!taxon || !taxon[prop1]) return '';\n\n    const prop1Value = taxon[prop1].find(name => name.language === language) ? taxon[prop1].find(name => name.language === language) : taxon[prop1].find(name => name.language === 'en');\n\n    if(!prop1Value) return '';\n\n    const prop2Value = prop1Value[prop2];\n\n    if(!prop2Value) return '';\n\n    const output = index ? prop2Value[index] : prop2Value;\n\n    return output;\n}\n\nconst trimLatinName = name => {\n\n    let binomial = name;\n\n    if(name.indexOf('.') < 0) {\n        binomial = name.split(' ').map((n,i) => {\n            return i === 0 ? n.slice(0,1).trim() + '.' : n.trim()\n          }).join(' ')\n    }\n    \n    return binomial;\n};\n\nconst familyVernacularNames = (name, language, taxa) => {\n    if(name === '') return;\n    const taxon = taxa.find(taxon => taxon.name.toUpperCase() === name.toUpperCase());\n    if(!taxon) return;\n    return taxon.names.find(name => name.language === language).names;\n};\n\nconst getTrait = (item, name, formatter) => {\n    \n    if(!item.traits) return '';\n\n    let trait;\n\n    for (let [key, obj] of Object.entries(item.traits)) {\n        if(key === name) {\n            trait = obj.value;\n        }\n    }\n\n    if(!trait) return '';\n    if(!formatter) return trait;\n    return formatter(trait);\n}\n\nconst reducer = (acc, curr) => {\n    return acc + curr;\n}\n\nconst getActiveTrait = (item, options) => {\n    const traitValues = options.map(option => { \n        const traitName = option.name;\n        const formatter = option.formatter;\n        return getTrait(item, traitName, formatter);\n    });\n    return traitValues.reduce(reducer, '');\n}\n\nconst vernacularNamesForItems = (items, config) => {\n    let itemNames = items.map(item => item.names);\n    let vernaculars = itemNames.map(itemNames => itemNames.filter(name => \n        { return name.language === config.language || name.language === 'en' }));\n    if(vernaculars.length === 0) return [];\n    vernaculars = vernaculars.map(vernacular => {\n        let name = vernacular.find(v => v.language === config.language);\n        if(!name) name = vernacular.find(v => v.language === 'en');\n        if(!name) return '';\n        return utils.capitaliseFirst(name.vernacularName);\n    }).filter(v => v !== '');\n    return vernaculars;\n};\n\nconst getVernacularNames = (item, config) => {\n    try {\n        const names = item.names.filter(name => name.language === config.language).map(name => utils.capitaliseFirst(name.vernacularName));\n        return names;\n    } catch(e) {\n        console.error('Failing getting vernacular names for: ', item);\n        return '';\n    }\n};\n\nconst answersFromList = (list, toInclude, number) => {\n    const answers = take(number - 1, list.filter(item => item !== toInclude));\n    answers.push(toInclude);\n    return utils.shuffleArray(answers);\n};\n\nconst statsReducer = function(obj,elem){\n    obj[elem]=obj[elem] || 0;\n    obj[elem]++;\n    return obj;\n};\n\nconst getFamilyStats = items => {\n    return items.map(item => item.taxonomy.family).reduce(statsReducer,{});\n};\n\nconst getFileNameFromImageUrl = url => {\n\n    const pattern = /[\\w:]+\\.(jpe?g|png|gif|svg)/i;\n\n    var filename = pattern.exec(url)[0];\n\n    return filename;    \n};\n\nconst getRootTraitValue = (traitValue, drop = 'end') => {\n\n    const pattern = /[A-Z]+[^A-Z]*|[^A-Z]+/g;\n\n    const parts = traitValue.match(pattern);\n\n    const dropStarters = ['colour', 'shape'];\n\n    dropStarters.forEach(starter => {\n        if(traitValue.toLowerCase().indexOf(starter) > -1) {\n            drop = 'start';\n        }\n    });\n\n    let rootTraitValue = '';\n\n    if(drop === 'start') {\n        parts.forEach((part,index) => {\n            if(index === parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n        rootTraitValue = rootTraitValue.charAt(0).toLowerCase() + rootTraitValue.slice(1);\n    } else {\n        parts.forEach((part,index) => {\n            if(index < parts.length - 1) {\n                rootTraitValue += part;\n            }\n        });\n    }\n    \n    return rootTraitValue;\n};\n\nconst getImageRightsUrl = url => {\n\n    const filename = getFileNameFromImageUrl(url);\n\n    const template = `https://en.wikipedia.org/w/api.php?action=query&prop=imageinfo&iiprop=extmetadata&titles=File:${filename}&format=json`;\n\n    return template;\n}\n\nexport const itemProperties = {\n    getVernacularName,\n    getGenusName,\n    getSpeciesName,\n    getTaxonProp,\n    getNestedTaxonProp,\n    trimLatinName,\n    familyVernacularNames,\n    getTrait,\n    getActiveTrait,\n    vernacularNamesForItems,\n    getVernacularNames,\n    answersFromList,\n    getFamilyStats,\n    getFileNameFromImageUrl,\n    getImageRightsUrl,\n    getRootTraitValue\n};","import { Enum } from 'enumify';\n\nclass lessonState extends Enum {};\nlessonState.initEnum([\n    'CREATE_LESSON',\n    'BEGIN_LESSON',\n    'BEGIN_OR_RESUME_LESSON',\n    'PAUSE_LESSON', \n    'RESUME_LESSON',\n    'NEXT_ROUND',\n    'BEGIN_INTRO',\n    'REVIEW_SUMMARY',\n    'UPDATE_COLLECTION', // required? use set active collection\n    'GET_LESSON_STATE',\n    'ADD_SPECIES_TO_COLLECTION',\n    'SAVE_LESSON_PROGRESS',\n    'RENDER_SPECIES_LIST',    \n]);\n\nclass navigation extends Enum {};\nnavigation.initEnum([\n    'LANDSCAPE_HOME', \n    'SETTINGS', \n    'LESSONS',\n    'LESSON',\n    'GLOSSARY', \n    'EMAIL',\n    'INFO',\n    'LOGIN',\n    'LANGUAGE',\n    'QUIZ'\n]);\n\nclass taxon extends Enum {};\ntaxon.initEnum([\n    'KINGDOM',\n    'PHYLUM',\n    'ORDER',\n    'FAMILY',\n    'GENUS',\n    'SPECIES',\n]);\n\nclass guideType extends Enum {};\nguideType.initEnum([\n    'LOCATION',\n    'INAT',\n    'PICKER'\n]);\n\nclass guideMode extends Enum {};\nguideMode.initEnum([\n    'STATIC',\n    'DYNAMIC'\n]);\n\nclass nextStep extends Enum {};\nnextStep.initEnum([\n    'NEXT_ITEM',\n    'NEXT_LAYOUT',\n    'NEXT_LESSON',\n    'NEXT_ROUND',\n]);\n\nclass quickFireType extends Enum {};\nquickFireType.initEnum([\n    'DEFINITION',\n    'REVERSE_DEFINITION',\n    'TEXT_ENTRY'\n]);\n\nclass quickFireStep extends Enum {};\nquickFireStep.initEnum([\n    'GLOSSARY',\n    'FILTERS',\n    'QUESTIONS'\n]);\n\nclass userEvent extends Enum {};\nuserEvent.initEnum([\n    'DEFAULT',\n    'START_LESSON',\n    'START_LESSON_REVIEW',\n    'START_TERM_REVIEW',\n    'EDIT_LESSON',\n    'TOGGLE_SPECIES_LIST',\n    'PLAY_LESSON_VIDEO',\n    'RETURN_LESSONS'\n]);\n\nclass deckState extends Enum {};\ndeckState.initEnum([\n    'BEGIN',\n    'SCORE',\n    'END'\n]);\n\nexport const enums = {\n    lessonState,\n    navigation,\n    taxon,\n    guideType,\n    guideMode,\n    nextStep,\n    quickFireType,\n    quickFireStep,\n    userEvent,\n    deckState\n};","import { renderTextEntry } from 'ui/screens/text-entry/species-text-entry';\nimport { renderHistory } from 'ui/screens/progress/history';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderSummary } from 'ui/screens/progress/summary';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderCompleteText } from 'ui/screens/text-entry/text-complete';\nimport { renderNonTaxonCardSpecimenTiles } from 'ui/screens/cards/non-taxon-card-specimen-tiles';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\nimport { renderMediaPlayers } from 'ui/screens/media/landscape/media-players';\nimport { renderBonusTest } from 'ui/screens/bonus/bonus-test';\nimport { renderBonusSpecimenTiles } from 'ui/screens/bonus/bonus-specimen-tiles';\nimport { renderMixedTraitQuestion } from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question';\nimport { renderHorizontalStrips } from 'ui/screens/multichoice/horizontal-strips.js';\n\nconst functions = [\n    { name: 'non-taxon-specimen-tiles', func: renderNonTaxonCardSpecimenTiles },\n    { name: 'text-entry', func: renderTextEntry },\n    { name: 'species-card', func: renderCard },\n    { name: 'species-scientifics', func: renderMultiStrips },\n    { name: 'species-vernaculars', func: renderMultiStrips },\n    { name: 'species-identification', func: renderMultiStrips },\n    { name: 'summary', func: renderSummary },\n    { name: 'history', func: renderHistory },\n    { name: 'epithet', func: renderMultiStrips },\n    { name: 'definition', func: renderBonusTest },\n    { name: 'family', func: renderMultiStrips },\n    { name: 'family-strips', func: renderMultiStrips },\n    { name: 'taxon-card', func: renderTaxonCard },\n    { name: 'non-taxon-card', func: renderNonTaxonCard },\n    { name: 'text-complete', func: renderCompleteText },\n    { name: 'visual-match', func: renderMultiStrips },\n    { name: 'trait-images', func: renderBonusSpecimenTiles },\n    { name: 'trait-property', func: renderBonusTest },\n    { name: 'lookalike-property', func: renderBonusTest },\n    { name: 'symbiotic-property', func: renderMultiStrips },\n    { name: 'mixed-specimen-question', func: renderMixedSpecimenQuestion }, // landscape triggers both ?\n    { name: 'birdsong', func: renderBonusTest },\n    { name: 'media-players', func: renderMediaPlayers },    \n    { name: 'mixed-trait-question', func: renderMixedTraitQuestion },\n    { name: 'provider-horizontal-strip-questions', func: renderHorizontalStrips },\n];\n\nexport const funcByName = name => {\n    const match = functions.find(func => func.name === name);\n    const func = match ? match.func : null;\n    return func;\n};","import { iconicTaxa, matchIcon, matchRank } from 'api/snapdragon/iconic-taxa';\n\nconst mushroomIcon = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg-icon>';\n\nexport const renderIcon = (taxonomy, rootNode) => {\n\n    if(taxonomy.kingdom.toLowerCase() === 'fungi') {\n\n        const iconicIconContainer = rootNode.querySelector('.js-iconic-icon');\n\n        iconicIconContainer.innerHTML = `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n\n    } else {\n\n        const iconicIcon = rootNode.querySelector('.js-iconic-icon i');\n\n        const classes = matchIcon(taxonomy, iconicTaxa).split(' ');\n\n        classes.forEach(c => iconicIcon.classList.add(c));   \n    }\n\n    return rootNode.querySelector('.js-iconic-icon');\n};\n\nexport const returnIcon = item => {\n\n    if(!item.taxonomy) return '';\n\n    if(item.taxonomy.kingdom.toLowerCase() === 'fungi') {\n        return `<span class=\"mushroom-icon-header\">${mushroomIcon}</span>`;\n    } else {\n        return `<i class=\"small-icon ${matchIcon(item.taxonomy, iconicTaxa)}\"></i>`;\n    }\n};\n\nexport const returnTaxonIcon = taxon => {\n\n  if(!taxon) return;\n\n  if(taxon.toLowerCase() === 'fungi') {\n      return `<span class=\"iconic-taxa-categories-selected\">${mushroomIcon}</span>`;\n\n  } else {\n      return `<span><i class=\"small-icon ${matchRank(taxon)}\"></i></span>`;\n  }\n};","import { clone } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\n\nconst stripImageUrlOfScaleAndPrefix = img => {  \n    const prefix = img.provider === 'inat' ? 'https://static.inaturalist.org/photos/' : 'https://content.eol.org/data/media/';\n    if(!img.url || typeof img.url === 'object') return '';\n    let part = img.url.replace('.260x190.jpg', '');\n        part = part.replace('.98x68.jpg', '');\n        part = part.replace('.jpg', '');\n        part = part.replace(prefix, '');\n\n    if(img.provider === 'inat') {\n      part = part.split('?')[0];\n    }\n\n    return part;\n};\n\nexport const imageUseCases = {\n    SPECIES_LIST: 'Species list',\n    SPECIES_CARD: 'Species card',\n    TAXON_CARD: 'Taxon card',\n    SPECIES_SPECIMENS: 'Species specimens',\n    NON_TAXON_CARD: 'Non-taxon card',\n    VISUAL_MATCH: 'Visual match',\n    MIXED_SPECIMENS: 'Mixed specimens',\n    CAROUSEL: 'Carousel',\n    TEXT_ENTRY: 'Text entry',\n    ACTUAL_SIZE: 'Actual size',\n    SPECIES_GRID: 'Species grid'\n}\n\nexport const denormaliseImages = images => {\n    const denormalisedImages = images.map(image => {\n        image.photographersName = image.photographer ? image.photographer.full_name || '' : '';\n        return image;\n    });\n    return denormalisedImages;\n};\n\nexport const imageMatch = (src1, src2) => {\n    if(!src2) return false;\n    src1 = stripImageUrlOfScaleAndPrefix(src1);\n    src2 = stripImageUrlOfScaleAndPrefix(src2);\n    const isActiveImage = src1 === src2;\n    return isActiveImage;\n};\n\nexport const prepImageForCarousel = (image, index, item, config, useCase) => {\n    let img = { \n        index: index + 1, \n        ...image,\n        url: scaleImage(image, useCase, config).medium,\n        // large: scaleImage({ url:image.src }).large,\n        itemName: item.name,\n        itemCommon: item.itemCommon,\n        rightsHolder: image.rightsHolder || '',\n        photographersName : image.photographer ? image.photographer.full_name || '' : '',\n        provider: image.provider || ''       \n    };\n    if(image.src) {\n        img = { ...img, ...image.src, medium: image.medium };\n    }\n    return img;\n};\n\nexport const prepImagesForCarousel = (item, config, useCase) => {\n    const images = item.images.map((image, index) => { \n        return prepImageForCarousel(image, index, item, config, useCase);\n    });\n    return images;\n};\n\nexport const scaleImage = image => {\n\n    if(!image.url) {\n        return image;\n    }\n\n    image.part = stripImageUrlOfScaleAndPrefix(image);\n\n    if(image.provider === 'inat') {\n        image.small = `https://static.inaturalist.org/photos/${image.part}`;\n        image.medium = image.part.replace('small', 'medium');\n        image.medium = `https://static.inaturalist.org/photos/${image.medium}`;\n        image.large = image.part.replace('small', 'large');\n        image.large = `https://static.inaturalist.org/photos/${image.large}`;\n        return image;\n    } else {\n        image.small = `https://content.eol.org/data/media/${image.part}.98x68.jpg`;\n        image.medium = `https://content.eol.org/data/media/${image.part}.260x190.jpg`;\n        image.large = `https://content.eol.org/data/media/${image.part}.jpg`;\n        return image;\n    }\n    \n};\n\nexport const modalImagesHandler = (images, item, collection, config, displayNameType) => {\n    images.forEach(image => {\n        modalImageHandler(image, item, collection, config, displayNameType);\n    });\n};\n\nconst handleImageSelectionFromList = (image, item, collection, config, displayNameType = 'binomial') => {\n\n    const parent = document.querySelector('#imageModal .js-modal-image');\n    const selectedItem = item || collection.items.find(item => item.name === image.dataset.itemName);\n    let images = clone(selectedItem.images.map((image, index) => {\n        selectedItem.vernacularName = itemProperties.getVernacularName(selectedItem, config);\n        image = scaleImage(image, imageUseCases.CAROUSEL, config);\n        return { ...image, itemName: selectedItem.name, itemCommon: selectedItem.vernacularName };\n    }));\n    images = denormaliseImages(images);\n    const selectedItemImage = selectedItem.images.find(i => imageMatch(i,image.dataset));\n    const selectedImage = { dataset: { ...image.dataset, ...selectedItemImage } };\n    imageSlider({ config, images, parent, image: selectedImage, identifier: selectedImage.dataset.itemName.replace(' ', '_') });\n    let displayName = '';\n    switch(displayNameType) {\n        case 'biomial':\n            displayName = selectedItem.name;\n            break;\n        case 'vernacular':\n            displayName = selectedItem.vernacularName;\n            break;\n        case 'withheld':\n            displayName = 'Species name withheld';\n            break;\n        default:\n            displayName = `<span>${selectedItem.vernacularName}</span> <span class=\"latin-name\">${selectedItem.name}</span>`;\n    }\n\n    document.querySelector('#imageModal .js-modal-image-title span:nth-child(1)').innerHTML = displayName;\n};\n\nexport const modalImageHandler = (image, item, collection, config, displayNameType = 'binomial') => {\n    image.addEventListener('click', e => {\n        if(!item) return;\n        handleImageSelectionFromList(image, item, collection, config, displayNameType);        \n    }, true);\n};\n","import autocomplete from 'autocompleter';\nimport { getAutocompleteBy } from 'api/inat/inat';\nimport { GoogleAutocomplete } from 'geo/geo';\n\n// https://github.com/kraaden/autocomplete\n\nexport const inatAutocomplete = (input, type, className, rb) => {\n\n    const MIN_LENGTH = 3;\n\n    async function getUserSuggestions(text) {\n        const users = await getAutocompleteBy(text, 'users');\n        return users.results.map(user => {\n            return { label: user.login_autocomplete, value: user.id, photo: user.icon, name: user.name };\n        });\n    }\n\n    async function getInatPlaceSuggestions(text) {        \n        const users = await getAutocompleteBy(text, 'places');\n        return users.results.map(place => {\n            return { label: place.display_name, value: place.id };\n        });\n    }    \n\n    function getPlaceSuggestions(text, update) {\n        let callback = null;\n        callback = predictions => {\n            update(predictions.map(prediction => {\n                return { label: prediction.description, value: prediction.place_id };\n            }));\n        } \n        GoogleAutocomplete(text, callback);\n    }\n\n    async function getProjectSuggestions(text) {\n        const projects = await getAutocompleteBy(text, 'projects');\n        return projects.results.map(place => {\n            return { label: place.title, value: place.id };\n        });\n    }\n    \n    const autocompleteRef = autocomplete({\n        input: input,\n        fetch: function(text, update) {\n            switch(type) {\n                case 'users':\n                    getUserSuggestions(text).then(users => {\n                        update(users);\n                    });\n                    break;\n                case 'places':\n                    getPlaceSuggestions(text, update);\n                    break;\n                case 'projects':\n                    getProjectSuggestions(text).then(projects => {\n                            update(projects);\n                        });\n                    break;\n            }           \n\n        },\n        onSelect: function(item) {\n            input.value = item.label;\n            input.name = item.value;\n        },\n        className: className,\n        rb: rb,\n        minLength: MIN_LENGTH,\n        debounceWaitMs: 200\n    });\n\n    return autocompleteRef;\n};","import { clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { getIPLocation } from 'geo/geo';\n\nexport const initialiseConfig = async originalConfig => {\n\n    const config = clone(originalConfig);\n\n    const observableMonths = utils.getObservableMonths(new Date(), 3);\n\n    config.season = { observableMonths };\n    config.guide.season.observableMonths = observableMonths;\n    config.guide.season.type = config.guide.season.type || 'all_year';\n\n    config.collection.id = config.collection.id || 0; \n    config.guide.locationPlace = '';\n    config.guide.place.type = '';\n    \n    try {\n        \n        const ipLocation = await getIPLocation(config);\n        \n        if(ipLocation) {\n            const location = ipLocation.city ? `${ipLocation.city}, ${ipLocation.country_name}` : ipLocation;\n            config.ipLocation = location;\n            config.guide.locationType = 'longLat';\n            config.guide.locationLongLat = location;\n            config.guide.place.name = location;\n            config.guide.coordinates = {\n                lat: ipLocation.latitude,\n                long: ipLocation.longitude\n            }; \n        }\n        else {\n            config.guide.locationPlace = 'Earth';\n            config.guide.locationType = 'place';\n            config.guide.place = { id: 'any', name: 'Earth' };\n        }\n\n    } catch(e) {            \n        config.guide.locationPlace = 'Earth';\n        config.guide.locationType = 'place';\n        config.guide.place = { id: 'any', name: 'Earth' };\n    }    \n\n    return config;\n}","// https://developer.mozilla.org/en-US/docs/Web/API/console#Outputting_text_to_the_console\n\n// import { object } from \"firebase-functions/lib/providers/storage\";\n\nexport const snapLog = (msg, obj) => {\n\n  // console.log('SECRET_KEY: ', process.env.SECRET_KEY);\n  // console.log('process.env.NODE_ENV: ', process.env.NODE_ENV);\n\n  let css = 'background: #222; color: #bada55; padding: 5px; margin-right: 5px;';\n  if(Array.isArray(obj)) obj = { obj };\n  obj \n    ? console.log(`%c${msg} %o`, css, obj)\n    : console.log(`%c${msg}: ${obj}`, css)\n};\n\nexport const logError = (source, e) => {\n  let css = 'background: #222; color: #fff; padding: 5px; margin-right: 5px;';\n  let output;\n  if(Array.isArray(source)) source = { source };\n  // if(source === typeof(object)) {\n  //   output = `%cError: ${e.message} at %o`;\n  //   console.log(output, source, css);\n  // } else {\n  //   output = `%cError: ${e.message} at ${source}`;\n  //   console.log(output, css);\n  // }\n};\n\nexport const logAPIError = (call, e) => {\n  let source = `Firebase ${call} error`;\n  logError(source, e);\n};","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { utils } from 'utils/utils';\nimport { markTest} from 'ui/helpers/test-handler';\nimport { subscription } from 'redux/subscriptions';\n\nexport const scoreHandler = (type, test, callback, config) => {\n    \n    switch(type) {\n        case 'radio':\n        case 'text':\n            return genericScoreHandler(test, callback, config);\n        case 'block':\n            blockScoreHander(test, callback, config);\n            break;\n        case 'strip':   \n            stripScoreHandler(test, callback, config);\n            break;\n        case 'image':\n            imageScoreHandler(test, callback, config);\n            break;\n        case 'image-match':\n            simpleScoreHandler(test, callback, config);\n            break;\n    }\n};\n\nexport const renderScoreHTMLResponse = response => {\n    const html = response.success\n            ? `<div class=\"answer-box-success\">\n                <span class=\"icon\"><i class=\"fas fa-check\"></i></span><span class=\"answer-response\">${ response.correct }</span>\n                </div>`\n            : `<div class=\"answer-box-alert\">\n                <span class=\"icon\"><i class=\"fas fa-times\"></i></span><span class=\"answer-response\">${response.answer || response.incorrect}</span>\n            </div>`;\n    return html;\n};\n\nconst showResponseToAnswerHandler = response => {\n    const questionText = document.querySelector(response.container) || document.querySelector('.js-txt-question');\n    if(questionText) {\n          questionText.innerHTML = renderScoreHTMLResponse(response);\n    }\n}\n\nexport const continueLessonHandler = (btn, score, timer) => {\n        \n    btn.disabled = false;\n    btn.style.cursor = 'pointer';\n\n    btn.addEventListener('click', event => {\n        btn.disabled = true;\n        window.clearTimeout(timer);\n        subscription.removeAllQuizScreenSubs();\n        bindScore(score);\n    });\n};\n\nconst simpleScoreHandler = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeAllQuizScreenSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);      \n    }, delay);\n\n    if(callback) {\n        callback(score, scoreUpdateTimer);\n    } else {\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n}\n\nconst genericScoreHandler = (_score, callback, config) => {\n    \n    const { itemId, question, answer, target, layoutCount, points, names, questionText, answers } = _score;\n    const test = { itemId, ...question, answer, points, names, questionText, answers };\n\n    const score = markTest(test);\n\n    let responseTxt = (test.names && test.names.length > 0) ? test.names[0] : test.binomial;\t\n    let labelTxt = 'Species';\t\n\n    if(score.taxon === 'genus') {\n        responseTxt = score.genus;\n        labelTxt = 'Genus name';\n    }\n\n    if(score.taxon === 'species') {\n        responseTxt = score.species;\n        labelTxt = 'Species name';\n    }\n    if(score.taxon === 'name') {\n        responseTxt = score.binomial;\n        labelTxt = 'Latin name';\n    }\n\n    if(score.taxon === 'family') {\n        responseTxt = score.question;\n        labelTxt = 'Family name';\n    }\n\n    let correct = `Correct`;\n    let incorrect = `Incorrect`;\n\n    const container = window.matchMedia(\"(max-height: 568px)\").matches ? '.js-check-answer' : '.js-txt-question';\n\n    showResponseToAnswerHandler({ success: score.success, correct, incorrect,  container, answer: score.question });\n\n    score.layoutCount = layoutCount;\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeAllQuizScreenSubs(); \n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);               \n    }, delay);\n\n    if(callback) callback(score, scoreUpdateTimer);\n\n    return { score, scoreUpdateTimer };\n};\n\nconst blockScoreHander = (test, callback, config) => {\n    \n    const score = markTest(test);\n\n    const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n    subscription.removeAllQuizScreenSubs();\n\n    const scoreUpdateTimer = setTimeout(()=>{\n        bindScore(score);        \n    }, delay);\n\n    callback(score, scoreUpdateTimer, config);\n};\n\nconst stripScoreHandler = (test, callback, config) => {    \n\n    const { items, taxon } = test;\n\n    const handleClickEvent = e => {\n      \n        e.preventDefault();\n\n        const target = e.target;\n\n        if(utils.hasClass(target, 'disabled')) return;\n\n        const answerNode = target;\n        const answer = answerNode.innerText.trim();\n        const answerIndex = answerNode.dataset.answerIndex;\n        const name = answerNode.dataset.name;\n        const vernacular = target.dataset.vernacular;\n\n        test.taxon = 'name';\n        test.vernacular = vernacular;\n        test.question = taxon.question;\n        test.answer = (name && name !== '') ? { term: answer, name } : answer;\n            \n        const score = markTest({...test, answeredIndex: parseInt(answerIndex), answers: [] });\n\n        target.classList.add(score.colour);\n\n        items.forEach(strip => {   \n            const stripAnswer = strip.querySelector('button');\n            const stripAnswerIndex = parseInt(stripAnswer.dataset.answerIndex);\n            const stripAnswerName = stripAnswer.dataset.name || '';\n            \n            stripAnswer === '' \n                ? score.answers.push(stripAnswer.innerText) \n                : score.answers.push({\n                    term: stripAnswer.innerText,\n                    name: stripAnswerName\n                });\n            \n            if(stripAnswerIndex === score.answerIndex) {\n                strip.classList.add('snap-success');\n            } else if(stripAnswerIndex === score.answeredIndex) {\n              strip.classList.add('snap-alert');\n            }\n        });     \n        \n        if(callback) {\n            callback(score);\n        } else {\n            const _callback = (score) => {\n\n                const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n                const scoreUpdateTimer = setTimeout(()=>{\n                    subscription.removeAllQuizScreenSubs();\n                    bindScore(score);\n                }, delay);\n            \n                continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n\n                // screen is always null\n                if(screen.name === 'family-strips') {\n                    document.querySelector('.js-question-question').innerHTML = item.taxonomy.family;\n                    document.querySelector('.js-question-help').classList.add('hide');\n                }\n            };\n            _callback(score);\n        }\n            \n        let correct = `Correct`;\n        let incorrect = `Incorrect`;\n\n        showResponseToAnswerHandler({ success: score.success, correct, incorrect });\n\n        items.forEach(item => item.classList.add('disabled'));\n    };\n\n    items.forEach(selected => {        \n        selected.addEventListener('click', handleClickEvent);\n    });\n\n    window.addEventListener('keydown', e => {\n      if(e.key === 'Enter') {\n        handleClickEvent(e);\n      }                  \n    }, { once: true });\n};\n\nconst imageScoreHandler = (test, callback, config) => {\n\n    const { items, taxon } = test;\n\n    items.forEach(tile => {\n        tile.addEventListener('click', event => {\n\n            const img = event.target;\n            const answer = img.dataset.answer;\n\n            if(!answer) return;\n\n            test.taxon = 'name';\n            test.question = taxon.name\n            test.answer = answer;\n            const score = markTest(test);\n\n            tile.style.filter = 'saturate(100%)';\n\n            img.parentNode.style.filter = 'saturate(100%)';\n\n            items.forEach(tile => {\n                tile.style.filter = 'saturate(10%)';\n                tile.style.opacity = .3;\n                if(tile.dataset.answer.trim().toLowerCase() === taxon.name.trim().toLowerCase()) {\n                    tile.style.filter = 'saturate(100%)';\n                    tile.style.opacity = 1;\n                }\n            });\n\n            const delay = score.success ? config.callbackTime : config.callbackTime + config.callbackDelay;\n\n            subscription.removeAllQuizScreenSubs();\n\n            const scoreUpdateTimer = setTimeout(() => {\n                bindScore(score);\n            }, delay);\n                \n            if(callback) callback(score, scoreUpdateTimer);\n        });\n    });\n};\n\nexport const bindScore = score => {\n\n    const { collection } = store.getState();\n\n    score.collectionId = collection.id;\n\n    actions.boundUpdateScore(score);\n};","// https://github.com/jcgregorio/stamp/wiki\n\nvar Stamp = Stamp || {};\n\n(function(ns) {\n\n  ns.Context = function() {\n  };\n\n  ns.Context.prototype.import = function(id) {\n    return document.importNode(this.doc.querySelector('#'+id).content, true);\n  };\n\n  var re = /{{\\s([\\w\\.\\^]+)\\s}}/g;\n\n  function filterState(address, state) {\n    var mystate = state;\n    for (var i = 0, len = address.length; i < len; i++) {\n      var a = address[i];\n      if (a in mystate) {\n        mystate = mystate[a];\n      } else if (mystate.hasAttribute && mystate.hasAttribute(a)) {\n        mystate = mystate.getAttribute(a);\n      } else {\n        throw a + \" is not a valid property of \" + JSON.stringify(mystate);\n      }\n    }\n    return mystate;\n  }\n\n  function ssplice(str, index, count, add) {\n    return str.slice(0, index) + add + str.slice(index + count);\n  }\n\n  let match;\n  function addressOf(s) {\n    if ((match = re.exec(s)) != null) {\n      return match[1].split(\".\");\n    } else {\n      return null;\n    }\n  }\n\n  function expandString(s, state) {\n    var match;\n    var matches = [];\n    re.exec(\"\");\n    while ((match = re.exec(s)) != null) {\n      matches.push(match);\n    }\n\n    for (var i = matches.length - 1; i >= 0; i--) {\n      match = matches[i];\n      var address = match[1].split(\".\");\n      var m = filterState(address, state);\n      s = ssplice(s, match.index, match[0].length, m);\n    }\n    if (matches.length) {\n      return s;\n    }\n    return null;\n  }\n\n  function cloneAllNodes(a) {\n    var clones = [];\n    for (var i = 0, len = a.length; i < len; i++) {\n      if (a[i].nodeName == \"TEMPLATE\") {\n        clones.push(a[i].content.cloneNode(true));\n      } else {\n        clones.push(a[i].cloneNode(true));\n      }\n    }\n    return clones;\n  }\n\n  function appendChildren(ele, nodes) {\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      ele.appendChild(nodes[i]);\n    }\n  }\n\n  function removeChildren(ele) {\n    ele.innerHTML = \"\";\n  }\n\n  function replaceChildren(ele, nodes) {\n    ele.innerHTML = \"\";\n    appendChildren(ele, nodes);\n  }\n\n  function expand(ele, state) {\n    if (ele.nodeName === \"#text\") {\n      m = expandString(ele.textContent, state);\n      if (m != null) {\n        ele.textContent = m;\n      }\n      return ele;\n    }\n    if (!Array.isArray(ele)) {\n      ele = [ele];\n    }\n    for (var j = 0, len = ele.length; j < len; j++) {\n      var e = ele[j];\n      var processChildren = true;\n      if (e.nodeName === \"#text\") {\n        m = expandString(e.textContent, state);\n        if (m != null) {\n          e.textContent = m;\n        }\n      } else {\n        if (e.attributes != undefined) {\n          for (var i = e.attributes.length-1; i >= 0; i--) {\n            var attr = e.attributes[i];\n            if (attr.name.indexOf('data-repeat') === 0) {\n              processChildren = false;\n              var parts = attr.name.split('-');\n              if (parts.length !== 3 && parts.length !== 4) {\n                throw \"Repeat format is data-repeat-<name>[-<iterName>]. Got \" + attr.name;\n              }\n              var name = parts[2];\n              var iterName = parts[3];\n              var tpl = [];\n              while (e.firstChild) {\n                tpl.push(e.removeChild(e.firstChild));\n              }\n              var address = [attr.value];\n              if (attr.value.indexOf(\"}}\") !== -1) {\n                address = addressOf(attr.value);\n              }\n              if (address === null) {\n                throw attr.value + \" doesn't contain an address.\";\n              }\n              var childState = filterState(address, state);\n              var instanceState = {\n                \"^\": state,\n              };\n              if (Object.prototype.toString.call( childState) === '[object Array]') {\n                iterName = iterName || \"i\";\n                for (var k = 0; k < childState.length; k++) {\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] =  childState[k];\n                  instanceState[iterName] = k;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              } else {\n                iterName = iterName || \"key\";\n                var keys = Object.keys(childState).sort();\n                for (var m = 0; m < keys.length; m++) {\n                  var key = keys[m];\n                  var cl = cloneAllNodes(tpl);\n                  instanceState[name] = childState[key];\n                  instanceState[iterName] = key;\n                  expand(cl, instanceState);\n                  appendChildren(e, cl);\n                }\n              }\n              e.removeAttribute(attr.name);\n            } else {\n              m = expandString(attr.value, state);\n              if (m != null) {\n                var name = attr.name;\n                if (name.charAt(name.length-1) == \"-\") {\n                  e.removeAttribute(attr.name);\n                  e.setAttribute(attr.name.slice(0, -1), m);\n                } else {\n                  attr.value = m;\n                }\n              }\n            }\n          }\n        }\n      }\n      if (processChildren) {\n        var childEle = e.firstChild;\n        while (childEle != null) {\n          var nextSibling = childEle.nextSibling;\n          if (childEle.nodeName == \"TEMPLATE\") {\n            var replacement = expand(childEle.content.cloneNode(true), state);\n            while (replacement[0].childNodes.length > 0) {\n              e.insertBefore(replacement[0].firstChild, childEle);\n            }\n            e.removeChild(childEle);\n          } else {\n            expand(childEle, state);\n          }\n          childEle = nextSibling;\n        }\n      }\n    }\n    return ele;\n  };\n\n  function expandInto(target, ele, state) {\n    replaceChildren(target, expand(ele, state));\n  }\n\n  ns.appendChildren = appendChildren;\n  ns.expand = expand;\n  ns.expandInto = expandInto;\n})(Stamp);\n\nexport const renderTemplate = (context, content, parent, clone) => {\n    const contentClone = clone || document.importNode(content, true);    \n    var ctx = new Stamp.Context();\n    var expanded = Stamp.expand(contentClone, context);\n    Stamp.appendChildren(parent, expanded);\n};","import { isEmpty, compose, symmetricDifference, contains, clone } from 'ramda';\n\nexport const cleanText = text => {\n    return text.term ? text.term.toLowerCase() : text.toLowerCase().replace(/ /g,'');\n};\n\nexport const isAnswerEqualToQuestion = (question, answer) => {\n\n\n    const eqValues = compose(isEmpty, symmetricDifference);\n\n    return eqValues(cleanText(question), cleanText(answer));\n};\n\nconst isAnswerCorrect = score => {\n\n    let isCorrect;\n\n    if(score.answeredIndex) {\n        return parseInt(score.answeredIndex) === score.answerIndex;\n    }\n\n    score.answer = score.answer.term || score.answer;\n    score.answer = score.answer.trim();\n\n    isCorrect = isAnswerEqualToQuestion(score.question, score.answer);\n\n    // score.clue = score.clue ? score.clue.toLowerCase().replace(/ /g,'') : null;\n\n    // isCorrect = score.clue ? score.answer.indexOf(score.clue) > -1 : isCorrect;\n\n    switch(score.taxon) {\n        case 'vernacular':\n            score.names = score.names.map(name => name.toLowerCase());\n            if(score.names && score.names.length > 0) {\n                const alternativeIsCorrect = contains(score.answer, score.names);                \n                if(!isCorrect && alternativeIsCorrect) score.alternativeAccepted = true;\n                isCorrect = isCorrect || alternativeIsCorrect;\n            }\n        break;\n    }\n    return isCorrect;\n};\n\nconst isTraitAnswerCorrect = score => {\n    const doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n    return doArraysHaveSameValues(score.answer, score.question);\n};\n\nexport const markTest = test => {\n\n    const score = clone(test);\n\n    score.success = score.trait ? isTraitAnswerCorrect(score) : isAnswerCorrect(score);\n    score.colour  = score.success ? 'snap-success' : 'snap-alert';\n    \n    return score;\n};","import { isEmpty, compose, symmetricDifference, contains, take } from 'ramda';\n\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { utils } from 'utils/utils';\n\nconst getRandomTrait = (traits, traitsToIgnore) => {    \n\n    const allowedTraits = {};\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key.toLowerCase(), traitsToIgnore)) {\n            allowedTraits[key] = obj.unit ? [`${obj.value}${obj.unit}`] : obj.value;\n        }\n    }\n\n    let trait = utils.getRandomObjectProperty(allowedTraits);\n    return trait;\n};\n\nconst getTraitsPoolForUnits = trait => {\n    // create set of numeric answers based on the value\n\n    const traitsPool = [1,2,3,4,5,6,7,8,9];\n\n    if(trait.unit === 'MM'){\n        // months\n        // find distance between first and second and add answers with similar gap\n        // e.g. jan-feb produces aug-sep, nov-dec, etc.\n    }\n\n    return { traitsPool, help: 'Pick the best range'};\n};\n\nconst getTraitsPoolForRoles = trait => {    \n    enumKey = trait.role; // e.g. name of role, but role of predator; (and possibly need to apply logic as below)\n    const traitsPool = ['role1', 'role2', 'role3', 'role4', 'role5', 'role6', 'role7', 'role8', 'role9', 'role10'];\n    return { traitsPool, help: 'symbiosis'};\n};\n\nconst getTraitValues = (trait, traits) => {\n\n    let traitKeyParts = trait.key.split(' ');\n    let enumKey; // e.g map 'leaf variation' to leafVariation\n    \n    traitKeyParts.forEach((part, index) => {\n        if(index === 0) {\n            enumKey = part.toLowerCase();\n        } else {\n            enumKey += utils.capitaliseFirst(part);\n        }\n    });\n\n    const traitValues = traits[enumKey];\n\n    return traitValues;\n};\n\nconst getTraitsPool = (trait, traits) => {\n\n    let traitsPool = [];\n\n    let traitValues = getTraitValues(trait, traits);\n\n    if(!traitValues) {\n        traitValues = traits[itemProperties.getRootTraitValue(utils.toCamelCase(trait.key))];\n        if(traitValues) traitValues.help = trait.key;\n    }\n\n    if(traitValues) {        \n        for (let [key, obj] of Object.entries(traitValues)) {\n            if(!contains(key, [ 'type', 'name', 'help'])) {\n                if(key !== trait.key) {\n                    traitsPool.push(obj);\n                }\n            }\n        }\n    }\n\n    let help = traitValues \n            ? traitValues.help || traitValues.name\n            : trait.key;\n\n    return { traitsPool, help };\n};\n\nconst getSetOfTraitAnswers = (pool, trait) => {\n\n    let traitSet = trait.value;\n        traitSet = traitSet.map(t => t.trim());\n        traitSet = utils.shuffleArray(traitSet);\n\n    // take maximum of 2 values from the trait values array\n\n    let traitValues = take(2, traitSet);\n\n    let sets = [];\n  \n    if(traitValues.length === 1) {\n        \n        sets = [ ...take(5, pool.filter(value => value !== trait.value[0])), trait.value[0] ];\n\n    } else {\n\n        // create a 'set' of all possible unique 2-value combinations\n        \n        pool.forEach(a => {\n            pool.forEach( b => {\n                if(a !== b) {\n                    const exists = sets.filter(s => s === [a,b] || s === [b,a]).length > 0;\n                    if(!exists) { \n                        sets.push([a,b]);\n                    }\n                }\n            })\n        });\n\n        sets = take(6, utils.shuffleArray(sets));\n\n        // remove any combination that matches the trait value set (in either order) \n\n        sets = sets.map(set => {\n            if(set[0] !== traitSet[0] && set[1] !== traitSet[1] || set[0] !== traitSet[1] && set[1] !== traitSet[0]) {\n                return set;\n            }\n        }).filter(s => s);\n\n        sets = take(5, sets);\n        sets = [ ...sets, traitSet ];\n\n        if(sets.length === 0) {\n            sets = ['a', 'b', trait.value];\n        }\n        \n        sets = sets.map(set => set.join(', '));\n    }\n  \n    return utils.shuffleArray(sets);\n};\n\nconst getTraitByKey = (traits, traitKey) => {\n    return traits[Object.keys(traits).find(key => key === traitKey)];\n}\n\nconst getTraitValueByKey = (traits, traitKey) => {\n    const trait = getTraitByKey(traits, traitKey);\n    if(trait) return trait.value;\n}\n\nconst hasTraitPropeties = traits => {\n    for(var prop in traits) {\n        if (traits.hasOwnProperty(prop)) {\n            return true;\n        }\n    }\n};\n\nconst getLinkedTaxaTraits = traits => {\n    \n    const taxaTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(obj.type) {\n            taxaTraits.push({ name: key, value: obj.value, type: obj.type });\n        } else if(key === 'lookalikes') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'lookalike' });\n        } else if(key === 'symbionts') {\n            taxaTraits.push({ name: key, value: obj.value, type: 'symbionts' });\n        }\n    }\n\n    return taxaTraits;\n};\n\nconst getTraitsToExclude = () => {\n    return [ \n        'symbionts', 'voice', 'pollination', 'name', \n        'units', 'song', 'uk rank',\n        'colour', 'bark colour', 'height',\n        'physiology', 'description',\n        'usage', 'habitat',\n        'symbiont'\n        //'characteristic'\n    ];\n};\n\nconst handleUnit = unit => {\n\n    unit = unit || '';\n\n    switch(unit) {\n        case 'DD':\n            return ' days';\n        case 'MM':\n            return '';\n        case 'YY':\n            return ' years';\n     default:\n        return unit;   \n    }    \n};\n\nconst convertTraitsToNameValuePairsArray = (traits, traitsToExclude, item) => {\n\n    if(!hasTraitPropeties(traits)) return {};\n    \n    const includedTraits = [];\n\n    for (let [key, obj] of Object.entries(traits)) {\n        if(!contains(key, traitsToExclude)) {\n            if(key === 'lookalikes') {\n                obj.forEach(species => {\n                    includedTraits.push({\n                        name: key, \n                        value: [species.lookalike.name],\n                        description: species.description, lookalike: { name: species.lookalike.name, description: species.lookalike.description } \n                    }); \n                });\n            } else if(key === 'relationships') {\n                obj.forEach(species => {\n                    includedTraits.push({ \n                        name: key, value: [species.symbiont.name],\n                    }); \n                });\n            } else {\n                includedTraits.push({ name: key, value: obj.value, unit: handleUnit(obj.unit), type: obj.type || '' });\n            }\n        }\n    }\n    \n    return includedTraits;\n};\n\nconst getNMultiplesFromArray = (arra, arra_size) => {\n\n    if(arra.length === 0) return [];\n\n    var result_set = [], \n        result;\n    \n   \n    for(var x = 0; x < Math.pow(2, arra.length); x++) {\n        result = [];\n        var i = arra.length - 1; \n        do {\n            if((x & (1 << i)) !== 0) {\n                result.push(arra[i]);\n            }\n        } \n        \n        while(i--);\n\n        if(result.length >= arra_size) {\n            result_set.push(result);\n        }\n    }\n\n    return result_set.filter(set => set.length === arra_size);\n};\n\nconst doArraysHaveSameValues = compose(isEmpty, symmetricDifference);\n\nexport const traitsHandler = {\n    getRandomTrait,\n    getTraitsPoolForUnits,  \n    getTraitsPoolForRoles,\n    getTraitValues,\n    getTraitsPool,\n    getSetOfTraitAnswers,\n    getTraitByKey,\n    getTraitValueByKey,\n    getLinkedTaxaTraits,\n    getTraitsToExclude,\n    convertTraitsToNameValuePairsArray,\n    getNMultiplesFromArray,\n\n    doArraysHaveSameValues,\n    hasTraitPropeties,\n};","import { clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderSpecimenTiles } from 'ui/screens/landscape/specimen-tiles';\n// import { renderMixedSpecimenImages } from 'ui/screens/multichoice/landscape/mixed-specimen/left/mixed-specimen-images';\n\nexport const renderBonusSpecimenTiles = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n          collection.nextItem = bonusLayout.item;\n          collection.nextItem = collection.nextItem || collection.items[collection.itemIndex];\n    \n    const lookalikesCount = bonusLayout.item \n            ? bonusLayout.overrides.trait.lookalikes ? bonusLayout.overrides.trait.lookalikes.length + 1 : 0 // lookalikes + item itself\n            : 0;\n\n    if(lookalikesCount > 0) {\n        let noOfImagesPerItem = 6 / lookalikesCount;\n        // renderMixedSpecimenImages(collection, noOfImagesPerItem, [ collection.nextItem, ...bonusLayout.overrides.trait.lookalikes]);\n    } else {\n        renderSpecimenTiles(collection);\n    }\n\n};","import { clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\nimport { renderMixedSpecimenQuestion } from 'ui/screens/multichoice/landscape/mixed-specimen/right/mixed-specimen-question';\n\nexport const renderBonusTest = bonusLayout => {\n\n    const collection = clone(store.getState().collection);\n\n    collection.nextItem = bonusLayout.item;\n\n    if(bonusLayout.overrides && bonusLayout.overrides.trait && bonusLayout.overrides.trait.name === 'lookalikes') {\n        collection.items = [ ...bonusLayout.overrides.trait.lookalikes, collection.nextItem ];\n        // currently no logic to support this as multiple images was replaced by slider (as in portrait)\n        // option could be to have e.g. 6 images, 3 of species and 3 of lookalike\n        renderMixedSpecimenQuestion(collection, bonusLayout);\n    } else {        \n        renderMultiStrips(collection, bonusLayout);\n    }\n\n};\n","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { getBirdSong } from 'xeno-canto/birdsong';\nimport { lookalikeSpecies } from 'ui/screens/common/look-alikes';\nimport { infoSlider } from 'ui/screens/common/info-slider';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { renderInatDataBox } from 'ui/screens/common/inat-box';\nimport { renderCalendar } from 'ui/screens/common/calendar';\nimport { renderTaxaBox } from 'ui/screens/common/taxa-box';\nimport { renderBadge } from 'ui/screens/common/badge';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { firestore } from 'api/firebase/firestore';\n\nimport cardTemplate from 'ui/screens/cards/card-template.html';\n\nexport const renderCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, isInCarousel = true) => {\n\n    if(!selectedItem) return;\n\n    const { layout, config } = store.getState();\n\n    let item;\n\n    const init = async () => {\n\n            const getItemWithProps = async item => {\n\n            if(item.eolId) return new Promise(resolve => resolve(item));\n            \n            const getItem = async item => {\n                return item.family\n                            ? new Promise(resolve => resolve(item))\n                            : await firestore.getSpeciesByName(item.name);\n            };\n\n            const itemWithProps = await getItem(item);\n            \n            itemWithProps.family = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.FAMILY.name.toLowerCase()]) || { names: [ itemWithProps.taxonomy.family ]};\n            itemWithProps.order = await firestore.getTaxonByName(config, itemWithProps.taxonomy[enums.taxon.ORDER.name.toLowerCase()]);\n            itemWithProps.traits = await firestore.getTraitsBySpeciesName(item.name);\n            itemWithProps.vernacularName = itemWithProps.vernacularName || itemProperties.getVernacularName(item, config);\n\n            const names = item.name.split(' ');\n\n            itemWithProps.taxonomy.genus = names[0];                \n            itemWithProps.taxonomy.species = names[1];\n\n            return itemWithProps;\n        };\n    \n        item = selectedItem || collection.nextItem;\n\n        item = await getItemWithProps(item);\n\n        let rootNode;\n    \n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = config.isLandscapeMode ? modal.querySelector('.js-modal-text') : document.querySelector('.main-lesson-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = config.isLandscapeMode ? parent : document.querySelector('.js-species-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n    \n        if(mode === 'STAND-ALONE') {        \n            const screen = layout.screens.filter(el => el.name === 'species-card')[0];\n            if(!screen) return;\n        }\n    \n        const prev = document.querySelector('#cardModal .js-prev');\n        const next = document.querySelector('#cardModal .js-next');\n    \n        if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n        if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n        \n        const template = document.createElement('template');\n    \n        template.innerHTML = cardTemplate;\n    \n        renderCommonParts(template, config, item, collection, mode, parent, rootNode, isInCarousel);\n    \n        config.isPortraitMode\n            ? renderPortrait(item, config, mode, rootNode)\n            : renderLandscape(item, config, mode, rootNode);\n    };\n\n    init();\n};\n\nconst renderLandscape = (item, config, mode, rootNode) => {\n\n    const src = rootNode.querySelector('.js-bird-song');\n    \n    getBirdSong(item, src, config.isPortraitMode);\n\n    const inatNode = rootNode.querySelector('.js-inat-box');\n\n    renderInatDataBox(inatNode, item, config, mode);\n    \n    renderCalendar(rootNode.querySelector('.js-calendar-box'), item, config);\n\n    lookalikeSpecies(item, config, rootNode);\n};\n\nconst renderPortrait = (item, config, mode, rootNode) => {\n\n    const images = prepImagesForCarousel(item, config, imageUseCases.SPECIES_CARD);\n\n    const parent = rootNode.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent, parentScreen: rootNode.querySelector('.card-card'), identifier: item.name.replace(' ', '_') });\n\n    const player = rootNode.querySelector('.js-bird-song-player');\n\n    if(mode =='MODAL') {\n        player.style.display = 'none';\n        return;\n    };\n\n    getBirdSong(item, player, config.isPortraitMode);\n\n    player.addEventListener('click', () => {\n        const iframe = document.createElement('iframe');\n        iframe.id = 'birdsong';\n        iframe.style.border = 0;\n        iframe.src = player.dataset.src;\n        document.querySelector('#basicModal .modal-body').classList.add('bird-song-bg');\n        document.querySelector('#basicModal .js-modal-text-title').innerHTML = `${item.name}`;\n        const elm = document.querySelector('#basicModal .js-modal-text');\n        while (elm.firstChild) {\n            elm.removeChild(elm.firstChild);\n         }\n        elm.appendChild(iframe);\n    });\n};\n\nconst renderCommonParts = (template, config, item, collection, mode, parent, rootNode, isInCarousel) => {\n\n    const image = scaleImage({ url: item.starred || item.images[0].url }, imageUseCases.SPECIES_CARD, config);\n    \n    const clone = document.importNode(template.content, true);\n    \n    parent.innerHTML = '';\n    \n    renderTemplate({ name: item.name, vernacularName: item.vernacularName, image, iconicTaxon: item.iconicTaxon }, template.content, parent, clone);\n    \n    renderTaxaBox(rootNode.querySelector('.js-taxa-box'), { item, familyName: item.taxonomy.family, familyVernacularName: item.family.vernacularName || '' });\n\n    infoSlider(item, rootNode.querySelector('.js-info-box'), mode);\n\n    renderBadge(rootNode.querySelector('.js-names-badge'), item, config);    \n\n    renderIcon(item.taxonomy, rootNode);\n\n    if(mode === 'MODAL') {      \n          \n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n        const prev = rootNode.querySelector('#cardModal .js-prev > span');\n        prev.dataset.id = item.id;\n        prev.dataset.transition = 'prev';\n        prev.dataset.modal = 'cardModal';\n\n        const next = rootNode.querySelector('#cardModal .js-next > span');\n        next.dataset.id = item.id;\n        next.dataset.transition = 'next';\n        next.dataset.modal = 'cardModal';\n        \n        const lines = document.getElementsByTagName('hr');\n\n        Array.from(lines).forEach(hr => hr.style.display = 'none');\n    }\n\n    setTimeout(() => {\n        \n        if(config.isPortraitMode) {\n            // hide attribution for now - space issue various across devices\n            const attributions = document.querySelectorAll('.js-attribution-layer');\n                    attributions.forEach(attribution => attribution.classList.add('hide-important'));\n            const indicators = document.querySelectorAll('.js-carousel-indicators');\n                    indicators.forEach(indicator => indicator.classList.add('hide-important'));\n        }\n    });\n};","import { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { subscribeToNonTaxaSelection } from 'ui/screens/cards/non-taxon-card';\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderNonTaxonCardSpecimenTiles = collection => {\n\n    const { config } = store.getState(); \n\n    const callback = images => {\n\n        const template = document.createElement('template');\n\n        template.innerHTML = specimensTemplate;\n\n        const parent = DOM.leftBody;\n        parent.innerHTML = '';\n\n        renderTemplate({images}, template.content, parent);\n\n        modalImagesHandler(document.querySelectorAll('.js-tiles .square'), null, collection, config);\n    };\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    subscribeToNonTaxaSelection(callback);    \n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { firestore } from 'api/firebase/firestore';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport * as group from 'api/snapdragon/non-taxa';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport cardTemplate from 'ui/screens/cards/non-taxon-card-template.html';\n\nconst subscriptions = [];\n\nexport const subscribeToNonTaxaSelection = callback => {\n    subscriptions.push(callback);\n};\n\nexport const renderNonTaxonCard = (mode = 'STAND_ALONE', keyTrait, parent = DOM.rightBody, url, isInCarousel = false) => {\n\n    const prev = document.querySelector('#cardModal .js-prev');\n    const next = document.querySelector('#cardModal .js-next');\n\n    if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n    if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n    \n\n    const { units, config } = store.getState();\n\n    const nonTaxa = group.getNonTaxa(units).filter(nt => nt.group === group.nonTaxaGroup[0].LICHEN_FORM);\n\n    nonTaxa.forEach(nt => {\n        nt.name = itemProperties.getVernacularName(nt, config, false, 'name');\n    });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = cardTemplate;\n    \n    const onChange = items => {\n        subscriptions.forEach(sub => sub(items));\n    };\n\n    const prepImages = (items) => {\n        const itemImagesArray = items.map(item => {\n            return prepImagesForCarousel(item, config, imageUseCases.NON_TAXON_CARD);\n        });\n        const itemImages = utils.shuffleArray([].concat(...itemImagesArray));\n        return take(9, itemImages);\n    };\n\n    const callback = async id => {\n\n        const nonTaxon = nonTaxa.find(nt => nt.id === id)\n\n        let items = await firestore.getSpeciesByNameInParallel(nonTaxon.examples);\n            items = items.filter(item => item.images);\n\n        const portraitImagesNode = document.querySelector('.js-non-taxon-card-images');\n\n        const images = prepImages(items);\n\n        if(nonTaxon.type) {\n            document.querySelector('.js-species-header img').src = `https://content.eol.org/data/media/${nonTaxon.url}`;\n        } else {\n            config.isPortraitMode ? imageSlider({ config, images, portraitImagesNode }) : onChange(images);\n        }\n\n        const wikiNode = document.querySelector('.js-non-taxon-card-wiki');\n        const lookup = { name: nonTaxon.name };\n\n        const idNode = document.querySelector('.id-box > div:nth-child(2) > div');\n              idNode.innerHTML = nonTaxon.quickId;\n\n        const definitionNode = document.querySelector('.js-non-taxa-definition div');\n              definitionNode.innerHTML = nonTaxon.definition;\n\n        const nameNode = document.querySelector('.js-non-taxon-card .js-names-container > div:nth-child(1)');\n              nameNode.innerHTML = nonTaxon.id;\n\n        if(mode === 'MODAL') {\n        } else {\n            renderWikiModal(lookup, wikiNode, config);    \n            renderWiki(wikiNode, lookup, config.language);\n        }\n    };\n\n    let rootNode;\n\n    switch(mode) {\n        case 'STAND_ALONE':\n            rootNode = document.querySelector('.main-lesson-body');\n            break;\n        case 'SWAP_OUT':\n            rootNode = document.querySelector('.js-taxon-container');\n            break;\n        case 'MODAL':\n            rootNode = document.querySelector('#cardModal');\n            break;\n    }\n\n    parent.innerHTML = '';\n\n    renderTemplate({group: nonTaxa, image: scaleImage({ url })}, template.content, parent);\n\n    if(mode === 'MODAL') {\n        rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = `Lichen Forms`;\n    }\n\n    rootNode.querySelectorAll('.js-non-taxa .btn.btn-secondary').forEach(form => {\n        form.addEventListener('click', event => {\n            const id = event.target.id;\n            callback(id);\n        });\n    });\n\n    const id = keyTrait || nonTaxa[0].id;\n    document.getElementById(id).click();\n};","import { take } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { taxonInfoSlider } from 'ui/screens/common/info-slider';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\n\nimport taxonTemplate from 'ui/screens/cards/taxon-card-template.html';\n\nlet transition;\n\nconst modalCarousel = document.querySelector('#cardModal .carousel');\n\nif(modalCarousel) {\n    modalCarousel.addEventListener('click', event => {    \n        transition = event.target.dataset.transition;\n    });\n}\n\nexport const renderTaxonCard = (collection, mode = 'STAND_ALONE', selectedItem, parent = DOM.rightBody, speciesTaxon, rank, isInCarousel = true) => {\n  \n    try {\n\n        const item = selectedItem || collection.nextItem;\n\n        if(!item) {\n            document.querySelector('#cardModal .close').click();\n        }\n\n        const { config } = store.getState();\n\n        let rootNode;\n\n        switch(mode) {\n            case 'STAND_ALONE':\n                rootNode = document.querySelector('.main-lesson-body');\n                break;\n            case 'SWAP_OUT':\n                rootNode = document.querySelector('.js-taxon-container');\n                break;\n            case 'MODAL':\n                rootNode = document.querySelector('#cardModal');\n                break;\n        }\n\n        const template = document.createElement('template');\n              template.innerHTML = taxonTemplate;\n        \n        const clone = document.importNode(template.content, true);\n\n        parent.innerHTML = '';\n\n        rank = rank ? rank.toUpperCase() : 'FAMILY';\n\n        let taxon;\n\n        switch(rank) {\n            case 'ORDER':\n                taxon = item.order;\n                break;\n            case 'FAMILY':\n                taxon = item.family;\n                break;\n            case 'GENUS':\n                taxon  = item.genus;\n                break;\n            default:\n                taxon = item.family;\n                break;\n        };\n\n        const familyStats = itemProperties.getFamilyStats(collection.items);\n        const occurrences = familyStats ? familyStats[taxon.name] : 0;\n        const url = item.images ? item.starred ? item.images[0].url : '' : '';\n        const image = scaleImage({ url }, imageUseCases.TAXON_CARD, config);\n        const vernacularName = taxon.vernacularName || itemProperties.getNestedTaxonProp(taxon, config.language, 'names', 'names', '0').split(',')[0];\n        const identification = taxon.identification ? taxon.identification : taxon.descriptions ? taxon.descriptions[0].identification : '';\n        const summary = taxon.summary ? taxon.summary : taxon.descriptions ? taxon.descriptions[0].summary : '';\n                \n        const context = {\n            rank: rank,\n            name: taxon.name,\n            image,\n            alt: taxon ? taxon.alt : '',\n            vernacularName,\n            species: taxon.species || '--',\n            genera: taxon.genera || '--',\n            families: taxon.families || '--',\n            identification,\n            summary,\n            eol: taxon.eol ? taxon.eol.replace('en', config.language) : '',\n            wiki: taxon.wiki ? taxon.wiki.replace('en', config.language) : `https://en.wikipedia.org/wiki/${taxon.name}`,\n            occurrences: occurrences,\n            toxic: taxon.toxic ? `Toxic species: ${taxon.toxic.members.join(', ')}` : '',\n            notableMembers: taxon.members ? take(2, taxon.members).join(', ') : ''\n        }\n\n        renderTemplate(context, template.content, parent, clone);\n\n        taxonInfoSlider(item, taxon.traits, rootNode.querySelector('.js-taxon-info-box'), mode);\n\n        switch(rank) {\n            case 'GENUS': \n                rootNode.querySelector('.js-taxon-genus').classList.add('hide-important');\n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'FAMILY': \n                rootNode.querySelector('.js-taxon-family').classList.add('hide-important');\n                break;\n            case 'ORDER':\n                rootNode.querySelector('.js-taxon-rank').classList.add('hide-important');\n                break;\n        }\n\n        renderIcon(item.taxonomy, rootNode);\n\n        if(mode === 'MODAL') {\n\n            rootNode.querySelector('.js-external-links').classList.add('hide');\n\n            rootNode.querySelector('#cardModal .js-modal-text-title').innerHTML = collection.name;\n\n            const prev = rootNode.querySelector('#cardModal .js-prev > span');\n            prev.dataset.id = item.id;\n            prev.dataset.transition = 'prev';\n            prev.dataset.modal = 'cardModal';\n\n            const next = rootNode.querySelector('#cardModal .js-next > span');\n            next.dataset.id = item.id;\n            next.dataset.transition = 'next';\n            next.dataset.modal = 'cardModal';\n\n            if(prev) isInCarousel ? prev.classList.remove('hide-important') : prev.classList.add('hide-important');\n            if(next) isInCarousel ? next.classList.remove('hide-important') : next.classList.add('hide-important');\n\n        }\n        \n        // if(taxon.toxic) {\n        //     document.querySelector('.js-taxon-toxic-warning').innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>';\n        // }\n\n        document.querySelector('.js-external-page-title').innerHTML = `${taxon.name}`;\n        document.querySelector('.js-external-page-body').innerHTML = `<iframe class=\"modal-iframe\" title=\"Wikipedia page for ${taxon.name}\" src=\"${context.wiki}\"></iframe>`;\n\n        const membersCount = document.querySelector('#taxon-card-header .js-names-badge');\n\n        if(!context.occurrences || context.occurrences === 0) membersCount.classList.add('hide-important');\n\n        membersCount.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Members of the ${taxon.name} family`;\n            const members = collection.items.filter(i => i.taxonomy.family.toLowerCase() === taxon.name.toLowerCase());\n            const list = document.querySelector('#badgeListModal .js-modal-text');\n            list.innerHTML = '';\n            members.forEach(member => {\n                list.innerHTML += `<div>${member.name}</div>`;\n            });\n        });\n\n    } catch(e) {\n\n        console.error(e);\n\n        setTimeout(() => {        \n\n            switch(transition) {\n                case 'next':\n                    document.querySelector('#cardModal .carousel-control-next-icon').click();                   \n                    break;\n                case 'prev':\n                    document.querySelector('#cardModal .carousel-control-prev-icon').click();                    \n                    break;\n            }\n        });\n    }\n};","const onCloseModal = () => {\n\n    const modal = document.querySelector('#lessonModal');\n    const closer = modal.querySelector('.js-modal-footer');\n          closer.addEventListener('click', async e => {\n            const contents = modal.querySelector('.js-modal-text');\n                  contents.innerHTML = `\n                    <div class=\"lesson-spinner double-centred-block\">\n                        <div class=\"icon\"><i class=\"fas fa-sun slow-spin\"></i></div>\n                    </div>\n                  `;\n          });    \n};\n\nexport const lessonModalHandler = {\n    onCloseModal\n};","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderIcon } from 'ui/helpers/icon-handler';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nimport testCardTemplate from 'ui/screens/cards/test-card-template.html';\n\nexport const renderTestCardTemplate = (collection, context) => {\n\n    const template = document.createElement('template');\n          template.innerHTML = testCardTemplate;\n\n    const { config } = store.getState();\n\n    const modal = config.isLandscapeMode ? document.querySelector('#lessonModal') : document;\n\n    const parent = config.isLandscapeMode \n                        ? modal.querySelector('.js-modal-text')\n                        : DOM.rightBody ;\n          parent.innerHTML = '';\n\n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = collection.name;\n\n    context.className = context.className || '';\n    context.headerClassName = context.headerClassName || '';\n\n    context.statement = context.statement || '';\n    context.providerQuestion = context.providerQuestion || '';\n\n    renderTemplate(context, template.content, parent);\n\n    const progressLink = modal.querySelector('.js-review-progress');\n\n    if(progressLink) {\n      \n        const progressLinkClickHandler = () => {\n\n          const summaryContainer = modal.querySelector('.js-summary-container');\n\n          const renderSummaryCard = () => {\n\n              renderScoreSummary(collection.id, summaryContainer);\n\n              let count = 1;\n\n              const toggleScreens = (screenOne, screenTwo) => {\n                  hideCurrentCard(screenOne);\n                  progressLink.innerHTML = count % 2 === 0 ? 'Progress' : 'Quiz';\n                  count++;\n                  screenTwo.classList.remove('swap-out-card');\n                  progressLink.addEventListener('click', e => {                    \n                      toggleScreens(screenTwo, screenOne);\n                  }, { once: true });\n              };\n\n              toggleScreens(testCardContainer, summaryContainer);\n          };\n\n          renderSummaryCard();\n\n        };\n\n        progressLink.innerHTML = 'Progress';\n        progressLink.removeEventListener('click', progressLinkClickHandler, { once: true });\n        progressLink.addEventListener('click', progressLinkClickHandler, { once: true });\n\n        progressLink.focus();\n    }\n\n    toggleStatementAndQuestion(config);\n\n    const testCardContainer = modal.querySelector('.js-test-card-container');\n    const testCard = modal.querySelector('.js-test-card-container');\n    const testCardIcon = testCard.querySelector('.js-card-link');\n\n    const item = collection.nextItem || collection.items[context.bonus.itemIndex];\n\n    const hideCurrentCard = (container, card) => {\n\n        container.classList.add('swap-out-card');\n        container.classList.remove('swap-in-card');\n\n        if(card) {\n            card.classList.add('swap-out-card');\n            card.classList.remove('swap-in-card');\n        }\n    };\n\n    const showNextCard = (container, selector) => {\n                \n        container.classList.remove('swap-out-card');\n\n        const card = modal.querySelector(selector);\n        const icon = card.querySelector('.js-card-link');\n              icon.classList.remove('disabled-icon');\n\n        return { card, icon };\n    }\n\n    testCardIcon.addEventListener('click', async event => {\n        \n        const speciesContainer = modal.querySelector('.js-species-container');\n        const taxonContainer = modal.querySelector('.js-taxon-container');\n\n        const renderSpeciesCard = async () => {\n\n            renderCard(collection, 'SWAP_OUT', item, speciesContainer, false);\n                    \n            setTimeout(() => {            \n\n                hideCurrentCard(testCardContainer, testCard);\n\n                const { card: speciesCard, icon: speciesIcon } = showNextCard(speciesContainer, '.js-species-card');\n\n                speciesIcon.addEventListener('click', async event => {\n\n                    item.lichen \n                        ? renderNonTaxonCard('SWAP_OUT', item.keyTrait, taxonContainer, item.images.find(i => i.starred) ? item.images.find(i => i.starred).url : item.images[0].url)\n                        : renderTaxonCard(collection, 'SWAP_OUT', item, taxonContainer, false);\n                    \n                    hideCurrentCard(speciesContainer, speciesCard);\n\n                    const { card: taxonCard, icon: taxonIcon } = item.lichen\n                        ? showNextCard(taxonContainer, '.js-non-taxon-card')\n                        : showNextCard(taxonContainer, '.js-taxon-card');\n\n                    taxonIcon.addEventListener('click', event => {\n                        hideCurrentCard(taxonContainer, taxonCard);\n                        showNextCard(testCardContainer, '.js-test-card');\n                    });\n                });\n\n            }, 500);\n        };\n\n        await renderSpeciesCard();\n    });\n\n    renderIcon(item.taxonomy, modal);\n\n    let testContentParent = modal.querySelector('.js-test-card-content');\n\n    return testContentParent;\n};\n\nconst toggleStatementAndQuestion = config => {\n\n    if(config.isLandscapeMode) return;\n    \n    const statement = document.querySelector('.js-statement-para');\n    const question = document.querySelector('.js-question-para');\n\n    question.classList.add('hide');\n\n    var iterations = 20;\n    var i = 0;\n\n    var interval = setInterval(function() { \n            if(i % 2) {\n                question.classList.add('hide');\n                statement.classList.remove('hide');\n            } else {\n                question.classList.remove('hide');\n                statement.classList.add('hide');\n            }\n            i++; \n            if(i >= iterations) clearInterval(interval);\n    }, 5000);\n\n};\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport badgeTemplate from 'ui/screens/common/badge-template.html';\n\nexport const renderBadge = (badge, item, config) => {\n\n    let names = [ ...new Set(item.names.map(name => {\n        return {\n            common: name.vernacularName.toLowerCase(),\n            language: name.language\n        }\n    })) ];\n\n    const languageNames = names.reduce(function (r, a) {\n        r[a.language] = r[a.language] || {};\n        r[a.language].name = config.languages.find(language => language.lang === a.language.trim()).name;\n        r[a.language].names = r[a.language].names || [];\n        r[a.language].names.push(a.common);\n        return r;\n    }, Object.create(null));\n\n    const occurrences = names.length;\n\n    const template = document.createElement('template');\n\n    if(occurrences === 0) {\n\n        badge.classList.add('hide');\n        \n    } else {\n\n        badge.innerHTML = '';\n\n        template.innerHTML = `<span class=\"names-badge js-names-badge\" data-toggle=\"modal\" data-target=\"#badgeListModal\">${occurrences}</span>`;\n\n        renderTemplate({}, template.content, badge);\n\n        badge.addEventListener('click', event => {\n            \n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = 'Common species names';\n\n            const parent = document.querySelector('#badgeListModal .js-modal-text');\n\n            parent.innerHTML = '';\n\n            template.innerHTML = badgeTemplate;\n\n            renderTemplate({ languageNames }, template.content, parent);\n        });\n    }\n}","import { utils } from 'utils/utils';\nimport { getLocation, getPlace } from 'geo/geo';\nimport { getHistogram, getInatPlaceId } from 'api/inat/inat';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport calendarTemplate from 'ui/screens/common/calendar-template.html';\n\nexport const renderCalendar = async (parent, item, config) => {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = calendarTemplate;\n\n    parent.innerHTML = '';\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n\n    let months = [];\n\n    const getENShortMonth = (ordinal) => {\n        let month;\n        switch(ordinal) {\n            case 1:\n                month = 'J';\n                break;\n            case 2:\n                month = 'F';\n                break;\n            case 3:\n                month = 'M';\n                break;\n            case 4:\n                month = 'A';\n                break;\n            case 5:\n                month = 'M';\n                break;\n            case 6:\n                month = 'J';\n                break;\n            case 7:\n                month = 'J';\n                break;\n            case 8:\n                month = 'A';\n                break;\n            case 9:\n                month = 'S';\n                break;\n            case 10:\n                month = 'O';\n                break;\n            case 11:\n                month = 'N';\n                break;\n            case 12:\n                month = 'D';\n                break;\n        }\n        return month;\n    }\n\n    const getMonth = (ordinal, config) => {\n        let month;\n        switch(config.language) {\n            case 'en':\n                month = getENShortMonth(ordinal);\n                break;\n            default:\n                month = getENShortMonth(ordinal);\n        }\n        return month;\n    }\n\n    getHistogram(item, placeId).then(histogram => {\n        const monthlyStats = histogram.results.month_of_year;\n        for (var month in monthlyStats) {\n            months.push({\n                month: getMonth(parseInt(month), config),\n                index: parseInt(month),\n                count: monthlyStats[month]\n            });\n        }\n\n        utils.sortBy(months, 'count', 'desc').forEach( (month, index) => {\n            if(index < 4 && month.count !== 0) {\n                month.class = 'most-observations';\n            } else {\n                month.class = '';\n            }\n        });\n\n        utils.sortBy(months, 'index', 'asc');\n\n        const data = [];\n        let season = [];\n\n        months.map((month,index) => {\n            if(index < 4) {\n                season.push(month);                \n            }\n            if(index === 3) {\n                data.push(season);\n                season = [];\n            }\n            if(3 < index && index < 8) {\n                season.push(month);                \n            }\n            if(index === 7) {\n                data.push(season);\n                season = [];\n            }\n            if(7 < index && index < 12) {\n                season.push(month);                \n            }\n            if(index === 11) {\n                data.push(season);\n                season = [];\n            }\n        });\n\n        renderTemplate({ data }, template.content, parent);\n\n        const currentMonthIndex = new Date().getMonth();\n\n        const monthNodes = document.querySelectorAll('.calendar-box .col > div');\n    \n        monthNodes.forEach((node, index) => {\n            if(index === currentMonthIndex) {\n                node.classList.add('current-month');\n            }\n        });\n    });\n    \n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { scaleImage, imageMatch, imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { handleRightsAttribution } from 'ui/screens/common/rights-attribution';\n\nimport imageSliderTemplate from 'ui/screens/common/image-slider-template.html';\n\nconst selectActiveImage = (image, parent, config) => {\n    parent.querySelectorAll('.carousel-item').forEach(i => {\n        const elemSrc = i.querySelector('img').dataset;\n        if(imageMatch(elemSrc, image.dataset || image)) {\n            i.classList.add('active');\n            return;\n        }\n    });    \n    \n    const activeNode = parent.querySelector('.imageSlider.carousel .carousel-item.active img'); \n    \n    const indicators = document.querySelectorAll('.carousel-indicators li');\n          indicators.forEach(i => {\n              if(i.dataset && activeNode.dataset && i.dataset.slideTo === activeNode.dataset.index) {\n                  i.classList.add('active');\n              }\n          });\n\n    let img = image.dataset || image;\n    img.title = img.title || img.itemName;\n    img = scaleImage(img);\n    handleRightsAttribution(img);\n\n    return img;\n};\n\nconst carouselControlHandler = (event, parentScreen = document) => {\n\n    setTimeout(() => {\n\n        const activeNode = parentScreen.querySelector(`${event.target.dataset.slider} .carousel-item.active img`);\n        const image = activeNode.dataset;   \n        \n        handleRightsAttribution(image);    \n\n    }, 750);\n};\n\nexport const imageSlider = sliderArgs => {\n\n    const { config, images, parent, image, parentScreen = document, identifier = '' } = sliderArgs;\n\n    const slider = document.createElement('template');\n          slider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n\n    images.forEach((img, i) => {\n        img.index = i;\n        img.rightsHolder = img.rightsHolder || 'Public domain';\n        img.provider = img.provider || 'eol';\n        img = scaleImage(img);\n    });\n\n    // snapLog('imageSlider, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images, identifier }, slider.content, parent);\n\n    let next = document.querySelector(`#imageSlider_${identifier} .carousel-control-next-icon`);\n    let prev = document.querySelector(`#imageSlider_${identifier} .carousel-control-prev-icon`);\n\n    if(config.isPortraitMode) {        \n        next.classList.add('concealed');\n        prev.classList.add('concealed');\n    }\n\n    setTimeout(() => {\n        selectActiveImage(image || images[0], parent, config);        \n    },250);\n\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-prev`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n    parentScreen.querySelector(`#imageSlider_${identifier} .carousel-control-next`).addEventListener('click', e => carouselControlHandler(e,parentScreen, config));\n\n    document.addEventListener('swiped-left', function(e) {\n        next.click();\n    });\n\n    document.addEventListener('swiped-right', function(e) {\n        prev.click();\n    });\n};\n\nexport const imageSideBySlider = (slides, parent, config) => {\n\n    const sideBySlider = document.createElement('template');\n          sideBySlider.innerHTML = imageSliderTemplate;\n\n    parent.innerHTML = '';\n    parent.classList.add('slideBySliderContainer');\n\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(3)`).innerHTML = '';\n    document.querySelector(`#imageComparisonModal .js-modal-image-title span:nth-child(4)`).innerHTML = '';\n\n    slides.forEach((slide, index) => {\n\n        const identifier = slide.id.replace(' ', '_') || index + 1;\n\n        const header = document.querySelectorAll(`#imageComparisonModal .js-modal-image-title > span`)[index];\n              header.innerHTML = `<span class=\"common-name\">${slide.images[0].itemCommon}</span><span class=\"latin-name\">${slide.images[0].itemName}</span>`;\n        const item = { name: slide.images[0].itemName, itemCommon: slide.images[0].itemCommon, images: slide.images };\n        const images = prepImagesForCarousel(item, config, imageUseCases.CAROUSEL);\n        \n        // snapLog('imageSideBySlider, image medium values:', images.map(i => i.medium));\n\n        renderTemplate({ images, identifier }, sideBySlider.content, parent);\n        \n        const activeNode = document.querySelector(`#imageSlider_${identifier} .carousel-item`);\n              activeNode.classList.add('active');\n        handleRightsAttribution(images[0]);\n\n        const originalImageLink = document.querySelector(`#imageSlider_${identifier} .js-expand`);\n        if(originalImageLink) originalImageLink.classList.add('hide-important');\n    });\n};","import { renderTemplate } from 'ui/helpers/templating';\nimport { getPlace } from 'geo/geo';\nimport { getInatTaxonStats, getInatPlaceId } from 'api/inat/inat';\nimport { renderWiki } from 'wikipedia/wiki';\nimport { renderWikiModal } from 'wikipedia/wiki-modal';\n\nimport inatBoxTemplate from 'ui/screens/common/inat-box-template.html';\n\nexport async function renderInatDataBox(parent, item, config, mode) {\n\n    const template = document.createElement('template');\n\n    template.innerHTML = inatBoxTemplate;\n\n    parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n    const eolPage = document.querySelector('.js-test-card-container-eol-link');\n    \n    eolPage.setAttribute('href', `http://eol.org/pages/${item.id}/overview`);\n    eolPage.setAttribute('target', '_blank');\n    eolPage.setAttribute('style', 'text-decoration: none');\n\n    setTimeout(()=>{\n        const wikiLink = document.querySelector('.js-test-card-container-wiki');            \n        renderWikiModal(item, wikiLink, config);\n    });    \n\n    const wikiNode = document.querySelector('.js-test-card-container-wiki');\n          wikiNode.innerHTML = '';\n\n    renderWiki(wikiNode, item, config.language);\n    \n    getInatTaxonStats(item, config).then(stats => {\n\n        if(!stats.results) return;\n\n        const taxonId = stats.results.find(stat => stat.taxon.name === item.name).taxon.id;\n        const taxonCount = stats.results.find(stat => stat.taxon.name === item.name).count;\n\n        const taxonLink = `https://www.inaturalist.org/taxa/${taxonId}`;\n\n        parent.querySelector('.js-taxon-count').innerHTML = taxonCount.toLocaleString();\n        parent.querySelector('.js-taxon-link').setAttribute('href', taxonLink);\n    });\n\n    const place = await getPlace(config);\n\n    const country = place.country.place_name_en || place.country;\n\n    const places = await getInatPlaceId(country);\n\n    if(places.results.length === 0) return;\n\n    const placeId = places.results.find(place => place.display_name === country).id;\n    \n    getInatTaxonStats(item, config, placeId).then(stats => {\n\n        if(stats.results.length === 0) return;\n\n        const itemStats = stats.results.find(stat => stat.taxon.name === item.name);\n\n        if(!itemStats) return;\n\n        const placeTaxonCount = itemStats.count;\n        const establishment = itemStats.taxon.preferred_establishment_means;\n\n        document.querySelector('.js-native-container').innerHTML = establishment || '';\n\n        parent.querySelector('.js-world').innerHTML = mode === 'MODAL' ? 'Worldwide' : 'Worldwide sightings';\n        parent.querySelector('.js-place').innerHTML = mode === 'MODAL' ? country : `${country} sightings`;\n        parent.querySelector('.js-place-taxon-count').innerHTML = placeTaxonCount.toLocaleString();\n    });\n}","import { store } from 'redux/store';\nimport { firestore } from 'api/firebase/firestore';\nimport { linkedTaxa } from 'ui/screens/common/linked-taxa';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport idBoxTemplate from 'ui/screens/common/id-box-template.html';\nimport detailsTemplate from 'ui/screens/common/info-detail-slider-template.html';\n\nexport const renderInfoDetails = (item, activeTraitKey, activeTraitValue, description) => {\n\n    const { config, collection, glossary } = store.getState();\n\n    const template = document.createElement('template');\n    const parent = document.querySelector('.js-info-box-details');\n\n\n    if(!parent) return; // hack! currently the case with (non-species) taxon cards (see same below)\n\n    parent.innerHTML = '';\n\n    if(activeTraitKey.toLowerCase().indexOf('description') > -1) {        \n        template.innerHTML = idBoxTemplate;\n        renderTemplate({ id: description }, template.content, parent);\n        const text = document.querySelector('.id-box > div');\n              text.innerHTML = text.innerHTML.replace(/\\r?\\n/g, '<br />');        \n    }\n    else if(activeTraitKey.toLowerCase() === 'relationships' || activeTraitKey.toLowerCase() === 'lookalikes') {\n        const mode = 'MODAL';\n        const isInCarousel = true;\n        linkedTaxa(item, config, parent, mode, isInCarousel, collection, activeTraitValue);\n    } else {\n\n        const details = firestore.getDefinition(activeTraitValue, glossary, collection.glossary); // make dependent on a promise\n\n        if(!parent) return; // hack! taxon info sliders\n\n        if(details && details.length > 0) {            \n            details.forEach(detail => {\n                template.innerHTML = detailsTemplate;\n                detail.imgClassName = detail.img ? detail.img.url === '' ? 'hide-important' : '' : 'hide-important';\n                detail.img = detail.img || { url: '' }; \n            });\n            renderTemplate({ details }, template.content, parent);\n        }\n    }\n};","import { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderInfoDetails } from 'ui/screens/common/info-detail-slider';\n\nimport infoSliderTemplate from 'ui/screens/common/info-slider-template.html';\n\nconst renderInfoSlider = (item, traits, parent, id) => {\n\n    const slider = document.createElement('template');\n          slider.innerHTML = infoSliderTemplate;\n\n    parent.innerHTML = '';\n\n    traits = traits.filter(t => t.value);\n\n    traits.forEach(trait => {        \n        trait.name = trait.name ? trait.name === 'ph' ? 'pH' : utils.capitaliseFirst(trait.name) : '';\n        if(trait.name.toLowerCase() === 'role') trait.name = trait.type || 'role';\n        trait.name = trait.name === 'Ph value' ? 'pH value' : trait.name; \n        trait.unit = trait.unit ? trait.unit.toLowerCase() === 'colour' ? '' : trait.unit : '';\n        trait.description = trait.value;\n        trait.value = trait.name.toLowerCase() === 'description' ? '< traits >' : trait.value.join(', ');\n    });\n    \n    let description = traits.find(trait => trait.name.toLowerCase() === 'description');\n        description = description ? description.description[0] : '';\n\n    renderTemplate({ id, traits }, slider.content, parent);\n\n    let activeTrait, activeTraitKey, activeTraitValue;\n    \n    activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item:nth-child(1)`);\n    activeTrait.classList.add('active');\n\n    const traitCount = traits.length;\n\n    if(traitCount === 1) {\n        parent.querySelectorAll('.carousel.slide a').forEach(control => {\n            control.setAttribute('disabled', 'disabled');\n            control.classList.add('inactive-icon');\n        });\n    }\n\n    const changeTraitHandler = event => {\n        setTimeout(() => {\n            activeTrait = parent.querySelector(`#traitSlider${id} .carousel-item.active`);\n            activeTraitKey = activeTrait.querySelector('dt').innerHTML;\n            activeTraitValue = activeTrait.querySelector('dd').innerHTML;\n            renderInfoDetails(item, activeTraitKey, activeTraitValue, description);\n        }, 1000);\n    };\n\n    changeTraitHandler();\n\n    parent.querySelector(`#traitSlider${id} .carousel-control-prev`).addEventListener('click', changeTraitHandler);\n    parent.querySelector(`#traitSlider${id} .carousel-control-next`).addEventListener('click', changeTraitHandler);\n}\n\nexport const taxonInfoSlider = (item, traits, parent, mode) => {\n\n    const id = mode === 'MODAL' ? 'taxon_1' : 'taxon_0';\n\n    const convertedTraits = traitsHandler.convertTraitsToNameValuePairsArray(traits, traitsHandler.getTraitsToExclude());\n\n    if(convertedTraits.length > 0) {\n        renderInfoSlider(item, convertedTraits, parent, id);\n    }    \n};\n\nexport const infoSlider = (item, parent, mode) => {\n    \n    if(!traitsHandler.hasTraitPropeties(item.traits)) return;\n\n    let traits = traitsHandler.convertTraitsToNameValuePairsArray(item.traits, traitsHandler.getTraitsToExclude(), item);\n\n    if(item.traits.description) {\n        const description = {\n            name: 'description',\n            value: item.traits.description.value\n        }\n        traits = [ description, ...traits ];\n    }\n    \n    if(traits.length === 0) return;\n    \n    const id = mode === 'MODAL' ? 1 : 0;\n\n    renderInfoSlider(item, traits, parent, id);\n};","import { renderTemplate } from 'ui/helpers/templating';\n\nimport languageSelectionTemplate from 'ui/screens/common/language-selection-template.html';\n\nexport const languagePicker = (config, parent, listener) => {\n\n    const languages = config.languages;\n\n    const template = document.createElement('template');\n          template.innerHTML = languageSelectionTemplate;\n    \n    parent.innerHTML = '';\n\n    renderTemplate({ languages }, template.content, parent);\n\n    const taxonLanguageBtn = document.querySelector('#taxonLanguageBtn');\n          taxonLanguageBtn.innerHTML = `Taxon language [ ${languages.find(l => l.lang === config.language).name} ] `;\n\n    const taxonLanguageTxt = document.querySelector('#taxonLanguageTxt');\n          taxonLanguageTxt.innerHTML = languages.find(l => l.lang === config.language).name;\n\n    document.querySelectorAll('.dropdown-item').forEach(language => {\n        language.addEventListener('click', event => {\n            config.language = languages.find(l => l.lang === event.target.id).lang;\n            const name = languages.find(l => l.lang === event.target.id).name;\n            taxonLanguageBtn.innerHTML = `Taxon language [ ${name} ]`;\n            taxonLanguageTxt.innerHTML = name;\n            listener(config);\n        });    \n    });\n\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { firestore } from 'api/firebase/firestore';\n\nimport linkedTaxaLookalikeTemplate from 'ui/screens/common/linked-taxa-lookalike-template.html';\nimport linkedTaxaRelationshipTemplate from 'ui/screens/common/linked-taxa-relationship-template.html';\n\nexport const linkedTaxa = (item, config, parent, mode, isInCarousel, collection, activeTraitValue) => {\n\n    parent.innerHTML = '';\n    const template = document.createElement('template');\n\n    const addLinksToSpeciesCards = async mode => {        \n        \n        if(!isInCarousel) {            \n            const speciesCardLinks = mode === 'MODAL'\n                    ? document.querySelectorAll('#cardModal .js-test-card-container-link')\n                    : document.querySelectorAll('.js-test-card-container-link');\n            \n            speciesCardLinks.forEach(async link => {\n                link.addEventListener('click', async event => {\n                    const name = event.target.id || event.target.dataset.name;\n                    const selectedItem = await firestore.getSpeciesByName(name);\n                    selectedItem.species = itemProperties.getSpeciesName(item.name);\n                    renderCard({ name: 'Local species', items: [ selectedItem ] }, 'MODAL', selectedItem, document.querySelector('#cardModal .js-modal-body'), false);\n                });\n            });\n        }\n    };\n\n    const getLinkedTaxa = async () => {\n\n        const addVernacularName = async taxonName => {\n            const item = await firestore.getSpeciesByName(taxonName);\n            if(!item) return { name: taxonName, display: taxonName, isSpecies: false };\n            const vernacularName = itemProperties.getVernacularName(item, config);\n            return vernacularName ? { name: taxonName, display: taxonName, isSpecies: true } : { name: taxonName, display: taxonName, isSpecies: true };\n        };\n    \n        let relationshipTraits = item.traits ? item.traits.relationships : null;\n\n        let relationships = [];\n\n        if(relationshipTraits) {\n\n            const convertTraitsForDisplay = async () => {\n                return Promise.all(relationshipTraits.map(trait => {\n                    return  {\n                        type: trait.value[0],\n                        speciesA: trait.symbiont.name,\n                        speciesARole: trait.symbiont.role,\n                        speciesB: item.name,\n                        speciesBRole: trait.type,\n                        description: trait.description\n                    };\n                }));\n            };\n\n            relationships = await convertTraitsForDisplay();\n        }\n\n        let lookalikeTraits = item.traits ? item.traits.lookalikes : null;\n\n        let lookalikes = [];\n\n        if(lookalikeTraits) {\n\n            lookalikeTraits = lookalikeTraits.filter(species => species.lookalike.name === activeTraitValue);\n\n            const convertLookalikesForDisplay = async () => {\n                return Promise.all(lookalikeTraits.map(trait => {\n                    return  {\n                        species: item.name,\n                        speciesDescription: trait.description,\n                        lookalike: trait.lookalike.name,\n                        lookalikeDescription: trait.lookalike.description\n                    };\n                }));\n            };\n\n            lookalikes = await convertLookalikesForDisplay();\n        }\n\n        const addDisplayRules = relationships => {\n            for(const relationship of relationships) {\n                if(mode !== 'MODAL') {\n                    relationship.className = 'underline-link';\n                    relationship.modal = 'modal';\n                } else {\n                    relationship.className = '';\n                    relationship.modal = '';\n                }\n            };\n\n            return relationships;\n        };\n\n        if(relationships) {\n            relationships = addDisplayRules(relationships);\n            template.innerHTML = linkedTaxaRelationshipTemplate;\n            renderTemplate({ relationships }, template.content, parent);\n        }\n\n        if(lookalikes) {\n            lookalikes = addDisplayRules(lookalikes);        \n            template.innerHTML = linkedTaxaLookalikeTemplate;\n            renderTemplate({ lookalikes }, template.content, parent);\n        }\n        addLinksToSpeciesCards(mode);\n    }; \n\n    getLinkedTaxa();\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageSideBySlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { firestore } from 'api/firebase/firestore';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\nimport visualComparisonTemplate from 'ui/screens/common/look-alikes-link-template.html';\nimport { isArray } from 'jquery';\n\nexport const lookalikeSpecies = (item, config, rootNode = document) => {\n    \n    const lookalikes = item.traits.lookalikes || item.traits['look-alikes'];\n\n    if(lookalikes) {\n        \n        const matchTemplate = document.createElement('template');\n              matchTemplate.innerHTML = visualComparisonTemplate;\n        const lookalikeParent = rootNode.querySelector('.js-lookalikes');\n\n        const slides = [];\n        const names = [];\n        const scientificNames = [];\n\n        let species;\n\n        async function renderLookalikes() {\n\n            const readyLookalikesForRendering = async () => {\n\n                if(!isArray(lookalikes)) return;\n\n                species = [ ...lookalikes.map(lookalike => lookalike.lookalike), { name: item.name, description: lookalikes[0].description } ];\n\n                for (let lookalike of species) {\n\n                    const lookalikeItem = await firestore.getSpeciesByName(lookalike.name);\n\n                    if(!lookalikeItem) return;\n                    \n                    lookalikeItem.vernacularName = itemProperties.getVernacularName(lookalikeItem, config);\n                    names.push(lookalikeItem.vernacularName);\n                    scientificNames.push(lookalikeItem.name);\n    \n                    const images = lookalikeItem.images.map((img, index) => { \n\n                        const url = scaleImage({ url: img.url }, imageUseCases.CAROUSEL, config);\n\n                        return { \n                                index: index + 1, \n                                src: { ...img, url: url.medium },\n                                url: url.medium,\n                                itemName: lookalikeItem.name, \n                                itemCommon: lookalikeItem.vernacularName };\n                    });\n    \n                    slides.push({ id: lookalikeItem.name, images });\n                };\n            };\n\n            await readyLookalikesForRendering();\n\n            if(slides.length === 0) return;\n\n            lookalikeParent.innerHTML = '';\n\n            renderTemplate({slides, names: names.join(', ')}, matchTemplate.content, lookalikeParent);\n\n            const speciesComparisonLink = rootNode.querySelector('.js-compare-species-link');\n\n            speciesComparisonLink.classList.remove('hide');\n\n            const getTrait = async (itemName, parent) => {\n    \n                const item = await firestore.getSpeciesByName(itemName);\n                item.traits = await firestore.getTraitsBySpeciesName(item.name);\n                    \n                if(item.taxonomy.class.toLowerCase() === 'aves') {\n    \n                    if(item.traits && Object.keys(item.traits).length === 0) return;\n    \n                    const xcID = item.traits['song'].value;\n    \n                    if(!xcID) return;\n        \n                    const mp3 = await firestore.getBirdsong(xcID);\n    \n                    const template = document.createElement('template');\n                          template.innerHTML = audioMediaTemplate;\n                    \n                    renderTemplate({ mp3, title: item.name }, template.content, parent);\n                }\n            }\n    \n            speciesComparisonLink.addEventListener('click', () => {\n    \n                const parent = document.querySelector('#imageComparisonModal .js-modal-image');\n                            \n                imageSideBySlider(slides, parent, true, config);\n                    \n                species.forEach(lookalike => {\n                    const identifier = `.description_${lookalike.name.replace(' ', '_')}`;\n                    const description = document.querySelector(identifier);\n                          description.innerHTML = lookalike.description;                    \n                    getTrait(lookalike.name, document.querySelector(`${identifier} + div`));\n                });\n                \n            });\n        }\n\n        renderLookalikes();   \n    }\n};","import { scaleImage } from 'ui/helpers/image-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport rightsAttributionTemplate from 'ui/screens/common/rights-attribution-template.html';\n\nexport const handleRightsAttribution = image => {\n\n    const template = document.createElement('template');\n          template.innerHTML = rightsAttributionTemplate;\n\n    let text;\n\n    switch(image.license) {\n        case 'http://creativecommons.org/licenses/publicdomain/':\n            text = 'CC PD';\n            break;\n        case 'http://creativecommons.org/licenses/by/2.0/':        \n            text = 'CC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/2.0/':\n            text = 'CC BY SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/2.0/':\n            text = 'CC BY NC 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/2.0/':\n            text = 'CC BY NC-SA 2.0';\n            break;\n        case 'http://creativecommons.org/licenses/by/3.0/':        \n            text = 'CC 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/3.0/':\n            text = 'CC BY SA 3.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/3.0/':\n            text = 'CC BY NC-SA 3.0';\n            break;        \n        case 'http://creativecommons.org/licenses/by/4.0/':        \n            text = 'CC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc/4.0/':\n            text = 'CC BY NC 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-nc-sa/4.0/':\n            text = 'CC BY NC-SA 4.0';\n            break;\n        case 'http://creativecommons.org/licenses/by-sa/4.0/':\n            text = 'CC BY SA 4.0';\n            break;\n        default: \n            text = image.license || '';\n            break;\n    };\n\n    const licence = { text, url: image.medium };\n    const title = image.title;\n    const author = image.rightsholder || image.rightsHolder || 'Public domain';\n    const source = image.source || '';\n    const identifier = `${image.itemName.replace(' ', '_')}`;\n    const large = image.large || scaleImage(image).large;\n    \n    let parent = document.querySelector(`.js-attribution-layer.${identifier}`);\n        parent = parent || document.querySelector(`.js-attribution-layer`);\n        parent.innerHTML = '';\n\n    renderTemplate({title,author,source,licence,large}, template.content, parent);\n\n    const rightsAttribution = parent.querySelector('.js-rights-attribution .js-copyright');\n    const rightsLink = parent.querySelector('.js-rights-link .js-copyright');\n    const indicators = document.querySelector(`.carousel-indicators`);\n\n    const showAttribution = event => {\n        rightsAttribution.parentElement.classList.add('hide-important');\n        rightsLink.parentElement.classList.remove('hide-important');\n        indicators.classList.remove('hide-important');\n        rightsLink.removeEventListener('click', showLink), true;\n        rightsLink.addEventListener('click', showLink, true);\n    };\n\n    rightsAttribution.removeEventListener('click', showAttribution, true);\n    rightsAttribution.addEventListener('click', showAttribution, true);\n\n    const showLink = event => {\n        rightsAttribution.parentElement.classList.remove('hide-important');\n        rightsLink.parentElement.classList.add('hide-important');\n        indicators.classList.add('hide-important');\n        rightsAttribution.removeEventListener('click', showAttribution, true);\n        rightsAttribution.addEventListener('click', showAttribution, true);\n    };\n\n    rightsLink.removeEventListener('click', showLink), true;\n    rightsLink.addEventListener('click', showLink, true);\n\n};","import { itemProperties } from 'ui/helpers/data-checking';\nimport { infraspecifics } from 'api/snapdragon/infraspecifics';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport taxaBoxTemplate from 'ui/screens/common/taxa-box-template.html';\n\nexport const renderTaxaBox = async (parent, taxaBoxArgs) => {\n\n    const units = store.getState().units;\n\n    parent.innerHTML = '';\n\n    let { item, familyName, familyVernacularName } = taxaBoxArgs;\n\n    const options = [\n        { name: 'uk rank', formatter: trait => `UK # ${trait[0]}` },\n        { name: 'how edible', formatter: trait => trait[0] }\n    ];\n\n    let trait = itemProperties.getActiveTrait(item, options);\n    \n    const specific = infraspecifics.find(specific => specific.name === item.name);\n    const subSpeciesCount = specific ? specific.subspecies.length : 0;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = taxaBoxTemplate;\n\n    renderTemplate({ subSpeciesCount, familyName, familyVernacularName, trait }, template.content, parent);\n\n    const subspeciesBadge = parent.querySelector('.js-subspecies-badge');\n\n    if(subSpeciesCount === 0) {\n\n        subspeciesBadge.classList.add('hide');\n        \n    } else {\n\n        const members = specific.subspecies;\n\n        subspeciesBadge.addEventListener('click', event => {\n            document.querySelector('#badgeListModal .js-modal-text-title').innerHTML = `Cultivars of ${item.name}`;            \n            const list = rootNode.querySelector('#badgeListModal .js-modal-text');\n            let html = '<div class=\"modal-list scrollable\">';\n            members.forEach(member => {\n                html += `<div><span>subspecies: ${member.name}</span>`;\n                html += `<ul>`;\n                member.names.forEach(name => {\n                    if(name.language === config.language)\n                        html += `<li>name: ${name.vernacularName}</li>`;\n                });\n                html += `</ul></div>`;\n            });\n            html += '</div>';\n            list.innerHTML = html;\n        });\n    }\n}","import { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport textIntroTemplate from 'ui/screens/home/home-lesson-intro-text-template.html';\n\nexport const textSetup = (collection, config) => {\n\n    let speciesCount = getSpeciesCount(collection);\n\n    const iconicTaxa = collection.guide\n                            ? collection.guide.iconicTaxa\n                            : collection.iconicTaxa || [ ...new Set(collection.items.map(i => i.iconicTaxon)) ];\n\n    const language = config.languages.find(l => l.lang === config.language).name; // place in guide, and copy to collection\n\n    const template = document.createElement('template');\n          template.innerHTML = textIntroTemplate;\n\n    const months = collection.guide ? collection.guide.season.observableMonths.map(month => month.name) : [];\n    const observableMonths = months.length > 0 ? `${months[0]}-${months[months.length - 1]}` : '';\n    const season = months.length === 0\n                    ? 'Species observations are drawn from the whole year.'\n                    : collection.guide.season === 'all_year'\n                        ? 'Species observations are drawn from the whole year.'\n                        : `Species observations are from ${observableMonths}.`;\n\n    let speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n\n    let lessonIntro = collection.intro || '';\n\n    const summary = {\n        speciesCount,\n        iconicTaxa,\n        title: collection.name,\n        language,\n        observableMonths,\n        season,\n        speciesSummary,\n        lessonIntro\n    };\n\n    DOM.rightBody.innerHTML = '';\n\n    renderTemplate(summary, template.content, DOM.rightBody);\n\n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 500);\n    \n    setTimeout(() => {\n        ({ speciesCount, speciesSummary } = handleSpeciesUpdate(speciesCount, collection, speciesSummary, iconicTaxa));\n    }, 1500);\n};\n\nconst handleSpeciesUpdate = (speciesCount, collection, speciesSummary, iconicTaxa) => {\n    if (speciesCount === '--') {\n        speciesCount = getSpeciesCount(collection);\n        document.querySelector('.js-species-summary').innerHTML = speciesSummary = getSpeciesSummary(iconicTaxa, speciesCount);\n    }\n    return { speciesCount, speciesSummary };\n};\n\nconst getSpeciesSummary = (iconicTaxa, speciesCount) => {\n    return iconicTaxa.length === 1\n        ? `${speciesCount} species in ${iconicTaxa.length} taxon.`\n        : `${speciesCount} species in ${iconicTaxa.length} taxa.`;\n};\n\nconst getSpeciesCount = collection => {\n    let count = (collection.itemNames && collection.itemNames.length > 0)\n        ? collection.itemNames.length\n        : collection.items ? collection.items.length : 0;\n    return count === 0 ? '--' : count;\n};","import { contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\n\nimport videoTemplate from 'ui/screens/home/home-lesson-intro-video-template.html';\n\nexport const videoSetup = (collection, videoPlayer, parent, startTime) => {\n\n    parent.innerHTML = '';\n   \n    const template = document.createElement('template');\n          template.innerHTML = videoTemplate;\n\n    collection.video.webLabel = collection.video.links[1].label;\n    collection.video.webUrl = collection.video.links[1].url;\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === collection.id) || { collectionId: collection.id, startAt: collection.video.startAt || 0 };\n          activeLesson.playAt = activeLesson.pausedAt || activeLesson.startAt;\n\n    renderTemplate({ video: { ...collection.video, playAt: activeLesson.playAt, location: collection.video.location || '' } }, template.content, parent);\n\n    const timeBeforeVideoPlayerReady = 1000;\n\n    setTimeout(() => {\n\n        videoHandler.readyPlayer();\n\n        let checkInt;\n\n        const checkCurrentTime = player => {\n\n            checkInt = setInterval(function() {\n               const time = Math.floor(player.getCurrentTime());               \n               const match = matchSpeciesTime(time, collection);\n               if(!!match) {\n                   videoHandler.onSpeciesTimeMatchListeners.map(listener => listener(collection, match));\n               }\n               if(!collection.notes) return;\n               const noteMatch = collection.notes.find(note => contains(time, note.time));\n               if(noteMatch) {\n                   videoHandler.onNoteTimeMatchListeners.map(listener => listener(collection, noteMatch));\n               }\n            }, 1000);\n        };\n\n        const onPlayerStateChangeCallback = player => {\n\n            if(!typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n\n            const playerState = player.getPlayerState();\n\n            videoHandler.updateVideoPlayer(store.getState().videoPlayer, collection, activeLesson.speciesName);\n\n            switch(playerState) {\n                case videoHandler.states.find(state => state.value === 'playing').key: // 1\n                    checkCurrentTime(player);\n                    break;\n                case videoHandler.states.find(state => state.value === 'paused').key: // 2\n                    clearInterval(checkInt);\n                    checkInt = null;\n                    break;\n                default:\n                    checkCurrentTime(player);\n            }\n        };\n\n        videoHandler.subscribeToPlayerStateChange(onPlayerStateChangeCallback);\n\n        if(startTime) {\n            setTimeout(() => {\n                videoHandler.playVideoFrom(startTime);\n            }, 1000);\n        }        \n\n    }, timeBeforeVideoPlayerReady);\n        \n    const video = document.getElementsByTagName('iframe')[0];\n    const videoWidth = video.offsetWidth;\n          video.height = videoWidth * 9/16;\n  \n};\n\nexport const matchSpeciesTime = (time, collection) => {\n  const species = collection.items ? collection.items.filter(sp => sp.time) : collection.species.filter(sp => sp.time);\n  const match = species.find(sp => contains(time, sp.time));\n  return match;\n}\n","import { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { textSetup } from 'ui/screens/home/home-lesson-intro-text';\n\nexport const renderLessonIntro = collection => {\n\n    const { config, videoPlayer, collection: lesson } = store.getState();\n\n    collection = { ...collection, items: lesson.items };\n\n    collection.hasVideo ? videoSetup(collection, videoPlayer || [], DOM.rightBody) : textSetup(collection, config);\n    \n}","import { subscription } from 'redux/subscriptions';\nimport { store } from 'redux/store';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\nimport { cookieHandler } from 'ui/helpers/cookie-handler';\n\nexport const renderHome = (counter, forceIntroDisplay = false) => {\n    \n    subscription.remove(subscription.getByName('renderHome'));\n    \n    const isFirstTimeVisitor = cookieHandler.setFirstTimeVisitorCookie();\n\n    if(counter.index > 0 && !counter.isLessonPaused) return;\n\n    let { config } = store.getState();\n\n    if(config.isLandscapeMode || forceIntroDisplay) {\n        renderLessons();\n    }\n    \n    const introduction = document.querySelector('.js-home-container');\n\n    if(config.isPortraitMode && isFirstTimeVisitor) {\n      introduction.classList.add('display-grid');\n      introduction.classList.remove('display-none');\n    }\n\n    if(config.isPortraitMode && !isFirstTimeVisitor) {\n      introduction.classList.add('display-none');\n      introduction.classList.remove('display-grid');\n      renderLessons();\n    }\n};\n","import { clone, contains, take, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils'; \nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { modalImagesHandler } from 'ui/helpers/image-handler';\nimport { imageUseCases, prepImagesForCarousel, prepImageForCarousel, scaleImage } from 'ui/helpers/image-handler';\n\nimport specimensTemplate from 'ui/screens/landscape/specimen-tiles-template.html';\n\nexport const renderSpecimenTiles = collection => {\n\n    const item = collection.nextItem;\n\n    if(!item) return;\n\n    renderItemSpecimenTiles(item);\n};\n\nconst renderItemSpecimenTiles = item => {\n    \n    const { config, collection, layout } = store.getState();\n\n    const familes = [ 'family-strips', 'family', 'taxon-card' ];\n\n    const collectionItems = collection.allItems || collection.items;\n\n    let images, items;\n    \n    if (contains(layout.screens[1].name, familes)) {        \n        const family = collectionItems.filter(i => i.family.name.toLowerCase() === item.taxonomy.family.toLowerCase());\n        images = take(6, utils.shuffleArray(getImagesFromItemFamily(family, config, imageUseCases.SPECIES_CARD)));\n        items = images.map(image => collectionItems.find(item => item.name === image.itemName));\n    } else {\n        images = take(6, utils.shuffleArray(clone(item.images)));\n        images = prepImagesForCarousel({ name: item.name, itemCommon: item.itemCommon, images }, config, imageUseCases.SPECIES_CARD);\n        items = [item];\n    }\n\n    images = images.map(image => {\n        return scaleImage(image, imageUseCases.VISUAL_MATCH, config);\n    });\n\n    renderSpecimenImageTiles({ items: items }, images, item);\n};\n\nconst renderSpecimenImageTiles = (collection, images, item) => {\n\n    const { layout, config } = store.getState();\n\n    const acceptableScreens = [ 'specimen-images', 'trait-images' ]; // lookalike options?\n\n    let screen = layout.screens.find(screen => contains(screen.name, acceptableScreens));\n\n    if(!screen) return;\n\n    const template = document.createElement('template');\n\n    template.innerHTML = specimensTemplate;    \n\n    const parent = DOM.leftBody;\n          parent.innerHTML = '';\n\n    snapLog('renderSpecimenImageTiles, image medium values:', images.map(i => i.medium));\n\n    renderTemplate({ images }, template.content, parent);\n\n    modalImagesHandler(document.querySelectorAll('.js-tiles .square'), item, collection, config);\n};\n\nconst getImagesFromItemFamily = (family, config, useCase) => {\n\n    let itemImages, items;\n\n    itemImages = flatten(family.map(i => {\n        return { images: i.images, item: { name: i.name, itemCommon: i.names[0].vernacularName, vernacularName: i.names[0].vernacularName, names: i.names } };\n    }));\n\n    if (itemImages.length < 6) {\n        \n        let pool = itemImages.map(image => {\n            const item = family.find(i => i.name === image.item.name);\n            return {\n                images: item.images,\n                item: {\n                    name: item.name,\n                    itemCommon: item.names[0].vernacularName,\n                    vernacularName: item.names[0].vernacularName,\n                    names: item.names\n                }\n            };\n        });\n        let pooledImages = flatten(pool);\n            pooledImages.forEach(pooledImage => {\n                pooledImage.images.forEach(image => {\n                    itemImages.push({ images: pooledImage.images, item: pooledImage.item });\n                });\n            });\n    }\n\n    items = itemImages.map(image => image.item);\n    \n    items.forEach(i => {\n        const itemName = i.name;\n        i.images = family.find(i => i.name === itemName).images;\n    });\n\n    const uniqueImages = [];\n\n    const getUniqueImage = (image, index, uniqueImages) => {\n        let uniqueImage = image.images.find(i => i.starred);\n        if(uniqueImage) {\n            uniqueImage = contains(uniqueImage.title, uniqueImages.map(i => i.title)) ? null : uniqueImage;\n        }\n        if(uniqueImage) {\n            uniqueImages.push(uniqueImage);\n            return uniqueImage;\n        }\n        else {\n            uniqueImage = image.images[index];\n            if(uniqueImage && !contains(uniqueImage.title, uniqueImages.map(i => i.title))) {\n                uniqueImages.push(uniqueImage);\n                return uniqueImage;\n            }\n        }\n    }; \n\n    const familyImages = [];\n\n    itemImages.forEach((image, index) => {\n        let imageToPrep = getUniqueImage(image, index, uniqueImages);\n        if(imageToPrep) {\n            familyImages.push(prepImageForCarousel(imageToPrep, index, image.item, config, useCase));\n        }\n    });\n\n    return familyImages;\n}\n","import { onCreateCustomLesson } from 'ui/create-guide-modal/create-guide';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { onLoadLessonViewState } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderCustomLesson = (lessons, videoPlayer, config) => {\n\n    onCreateCustomLesson(collection => {\n\n        const parent = document.querySelector('.lesson-list > .scrollable');\n        const template = document.createElement('template');\n              template.innerHTML = lessonTemplate;\n        \n        const lesson = onLoadLessonViewState(collection, videoPlayer);\n              lesson.hideVideoClass = 'hide-important';\n              lesson.hideTextIntroClass = '';\n        \n        lessons.push(lesson);\n        \n        lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n        renderTemplate({ lesson }, template.content, parent);\n        \n        const scrollOptions = {\n          left: 0,\n          top: 1000,\n          behavior: 'smooth'\n        }\n\n        setTimeout(() => {\n\n          document.querySelector('.js-lesson-container').scrollTo(scrollOptions);\n\n          const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n\n          import('ui/screens/lists/lesson-list-event-handler').then(module => {\n            module.lessonListEventHandler.onReviewClickHandler(reviewLink, config);\n          });\n  \n          const chevron = config.isLandscapeMode \n              ? document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${lesson.id}\"]`)\n              : document.querySelectorAll(`.js-lesson-list-chevron[data-lesson-id=\"${lesson.id}\"]`)[1];\n\n          if(chevron) {            \n            import('ui/screens/lists/lesson-list-event-handler').then(module => {\n              module.lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false); \n            });         \n          }\n  \n          const youtubeLessonIcon = document.querySelector(`.js-lesson-list-youtube[data-lesson-id=\"${lesson.id}\"]`);\n          if(youtubeLessonIcon) {\n            youtubeLessonIcon.classList.add('hide-important');\n          } \n          \n          import('ui/screens/lists/lesson-list-event-handler').then(module => {\n            module.lessonListEventHandler.highlightActiveLesson(lesson.id);\n          });\n\n        }, 250);\n    });\n};","import { store } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { speciesInGuideEditor } from 'ui/create-guide-modal/species-in-guide-editor';\n\nimport lessonEditTemplate from 'ui/screens/lists/lesson-edit-template.html';\n\nexport const renderEditLesson = collection => {\n\nconst init = async () => {\n\n    const { config } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonEditTemplate;\n\n    const modal = document.querySelector('#basicModal');\n    const parent = modal.querySelector('.js-modal-text');\n          parent.innerHTML = '';\n\n    renderTemplate({ collection }, template.content, parent);\n    \n    const header = modal.querySelector('.js-modal-text-title');\n          header.innerHTML = 'Edit lesson';\n\n    const selectedSpeciesDisplay = modal.querySelector('.js-selected-species-container');\n          selectedSpeciesDisplay.innerHTML = '';\n    \n    const createGuide = {\n        setConfig: config => {\n        actions.boundUpdateConfig(config);\n        }\n    };\n\n    speciesInGuideEditor(config, modal, selectedSpeciesDisplay, createGuide, collection.items);\n};\n\ninit();\n\n};","import { isEmpty } from 'ramda';\n\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderLessonIntro } from 'ui/screens/home/home-lesson-intro';\nimport { renderEditLesson } from 'ui/screens/lists/lesson-edit';\nimport { lessonListScrollHandler } from 'ui/screens/lists/lesson-list-scroll-handler';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\n\nexport const onLoadLessonViewState = (collection, videoPlayer) => {\n\n  const taxa = collection.iconicTaxa ? collection.iconicTaxa.map(taxon => taxon.common).join(', ') : '';\n\n  collection.taxa = taxa;\n  collection.hasVideo = collection.video && !isEmpty(collection.video) ? true : false;\n  collection.showVideoIconClass = collection.hasVideo ? '' : 'hide-important';\n  collection.videoState = videoHandler.setVideoState(videoPlayer || [], collection);\n  collection.reviewState = 'Lesson Quiz';\n\n  collection.hasTermsClass = collection.terms && Array.isArray(collection.terms) && collection.terms.length > 0 ? '' : 'hide-important';\n  collection.isCollectionEditableClass = '';\n\n  return collection;  \n};\n\nexport const onLoadLessonsViewState = (collections, videoPlayer) => {\n  return collections.map(collection => {\n    return onLoadLessonViewState(collection, videoPlayer);\n  });\n};\n\nconst onClickViewState = (e, lessons) => {\n\n  const icon = e.currentTarget;\n  const isYoutubeIcon = utils.hasClass(icon, 'js-lesson-list-youtube');\n  const isChevronIcon = utils.hasClass(icon, 'js-lesson-list-chevron');\n  const row = icon.parentElement.parentElement;\n  const lessonId = parseInt(icon.dataset.lessonId);\n  const lesson = lessons.find(l => l.id === lessonId);\n  const container = document.querySelector(`.js-species-container[data-container-id=\"${lessonId}\"]`);\n  const speciesList = document.querySelector(`#species_list_id_${lessonId}`);\n  const reviewLink = document.querySelector(`.js-review-link[data-lesson-id=\"${lessonId}\"]`);\n\n  // snapLog('onClickViewState', {});\n\n  hideOtherContentAndRevertChevrons(lessonId);\n\n  const isSpeciesListAvailable = !!speciesList;\n  const isSpeciesListHidden = utils.hasClass(speciesList, 'hide');\n\n  const lessonVideoState = document.querySelector(`.js-lesson-video-state[data-lesson-id=\"${lessonId}\"]`);\n  const iconIsChevron = !icon.dataset.lessonIsYoutubeIcon;\n\n  const state = {\n    requiresSpeciesList: !isSpeciesListAvailable,\n    revealSpeciesList: isSpeciesListAvailable && isSpeciesListHidden,\n    hideSpeciesList: isSpeciesListAvailable && !isSpeciesListHidden && iconIsChevron\n  };\n\n  return { icon, lesson, state, speciesList, container, lessonVideoState, reviewLink, row, isYoutubeIcon };\n};\n\nconst onLessonIconClickHandler = (icon, lessons, config, startLesson) => {\n  \n  return icon.addEventListener('click', async e => {      \n\n    const { icon, lesson, state, speciesList, container, lessonVideoState, row, isYoutubeIcon } = onClickViewState(e, lessons);\n\n    // snapLog('onLessonIconClickHandler', {});\n\n    const isItemActive = item => {\n      if(item.hasOwnProperty('isActive')) {\n        return item.isActive;\n      } else {\n        return true;\n      }\n    };\n\n    lesson.items = lesson.items.filter(item => isItemActive(item));\n\n    const lessonYoutubeIcons = document.querySelectorAll('.lesson-list-selected-lesson .youtube-icon');\n          lessonYoutubeIcons.forEach(icon => icon.parentElement.classList.remove('youtube-green-fg'));\n\n    if(icon.dataset.lessonIsYoutubeIcon) {\n      icon.classList.add('youtube-green-fg');\n      const chevron = document.querySelector(`.js-lesson-list-chevron[data-lesson-id=\"${icon.dataset.lessonId}\"]`);\n            chevron.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n      if(config.isPortraitMode) {\n        const lessonsIcon = document.querySelector('.js-lessons');\n              lessonsIcon.classList.remove('active-icon');\n      }\n    }\n\n    let siblingChevron;\n\n    if(startLesson) {\n      renderLessonIntro(lesson);\n      siblingChevron = icon.parentElement.parentElement.parentElement.children[1].children[0].children[1];\n      if(isYoutubeIcon) {\n        if(state.hideSpeciesList) {\n          siblingChevron.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n        }\n      }\n    } else {\n      if(!isYoutubeIcon) {\n        if(state.hideSpeciesList) {\n          icon.innerHTML = `<i class=\"fas fa-chevron-down\" data-lesson-id=\"${lesson.id}\"></i>`;\n        } else if(!state.revealSpeciesList) {\n          icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n        }\n      }\n    }\n\n    if(state.revealSpeciesList) {        \n      speciesList.classList.remove('hide');\n      if(!isYoutubeIcon) {\n        icon.innerHTML = `<i class=\"fas fa-chevron-up\" data-lesson-id=\"${lesson.id}\"></i>`;\n      }\n    }\n    if(state.hideSpeciesList) {\n      speciesList.classList.add('hide');\n      lessonVideoState.innerHTML = videoHandler.setVideoState(store.getState().videoPlayer || [], lesson);\n    }\n\n    if(state.requiresSpeciesList) {\n      await loadAndDisplaySpeciesList(config, icon, lesson, (config.isPortraitMode && isYoutubeIcon) ? DOM.rightBody.querySelector('.js-home-scrolling-container .scrollable') : container, isYoutubeIcon);\n    }\n\n    row.classList.add('lesson-list-selected-lesson');\n  });\n};\n\nconst onLessonTitleClickHandler = (title, lessons) => {\n    title.addEventListener('click', e => {\n          const lesson = lessons.find(lesson => lesson.id === parseInt(title.dataset.lessonId));\n          renderEditLesson(lesson);\n    });\n};\n\nconst onReviewClickHandler = (reviewLink, config) => {    \n\n  const reviewLinkHandler = async e => {\n\n    const spinner = document.querySelector(`.review-spinner[data-lesson-id=\"${reviewLink.dataset.lessonId}\"]`);\n    if(spinner) spinner.classList.remove('hide');\n    setTimeout(() => {\n      if(spinner) spinner.classList.add('hide');\n    }, config.isPortraitMode ? 5000 : 2500);\n\n    import('ui/screens/lists/lesson-state-handler').then(module => {\n      module.lessonStateHandler.recordUserAction(enums.userEvent.START_LESSON_REVIEW);\n      module.lessonStateHandler.changeRequest({        \n        requestType: enums.lessonState.BEGIN_OR_RESUME_LESSON,\n        requestArgs: {\n          id: reviewLink.dataset.lessonId\n        }\n      });\n    });\n  }\n\n  reviewLink.addEventListener('click', reviewLinkHandler);\n};\n\nconst hideOtherContentAndRevertChevrons = selectedLessonId => {\n\n  const upChevrons = Array.from(document.querySelectorAll('.js-lesson-list-chevron .fa-chevron-up'));\n\n  upChevrons.forEach(chevron => {\n    \n    const chevronLessonId = parseInt(chevron.dataset.lessonId);\n\n    if(chevronLessonId !== selectedLessonId) {\n      \n      chevron.parentElement.click();\n        \n      const lesson = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${chevronLessonId}\"]`);\n            lesson.classList.remove('highlighted-for-review-row');\n    }\n  });\n};\n\nconst loadAndDisplaySpeciesList = async(config, icon, lesson, container, isYoutubeIcon) => {\n\n  Array.from(icon.parentElement.children).forEach(child => child.dataset.selected = true);\n\n  await import('ui/screens/lists/lesson-state-handler').then(module => {\n    module.lessonStateHandler.recordUserAction(isYoutubeIcon ? enums.userEvent.PLAY_LESSON_VIDEO : enums.userEvent.TOGGLE_SPECIES_LIST);\n    module.lessonStateHandler.changeRequest({\n      requestType: enums.lessonState.RENDER_SPECIES_LIST,\n      requestArgs: { lesson, container }\n    });\n  });\n\n  // if(config.isPortraitMode) lessonListScrollHandler.scrollToTitle(lesson.id);\n};\n\nconst highlightActiveLesson = lessonId => {\n  const rows = document.querySelectorAll('.js-lesson-list-carousel-item');\n  rows.forEach(row => row.classList.remove('highlighted-for-review-row'));\n  const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lessonId}\"]`);\n  if (row)\n    row.classList.add('highlighted-for-review-row');\n  // lessonListScrollHandler.scrollToTitle(lesson.dataset.lessonId);\n};\n\nexport const lessonListEventHandler = {\n  onLoadLessonViewState,\n  onLoadLessonsViewState,\n  onLessonIconClickHandler,\n  onReviewClickHandler,\n  onLessonTitleClickHandler,\n  hideOtherContentAndRevertChevrons,\n  highlightActiveLesson\n};","import lessonListHeaderTemplate from 'ui/screens/lists/lesson-list-header-template.html';\n\nexport const renderLessonListHeader = parent => {\n\n    const header = document.createElement(\"div\");\n          header.innerHTML = lessonListHeaderTemplate;\n\n    const sibling = document.querySelector('.lesson-list .scrollable');\n\n    parent = document.querySelector('.lesson-list');\n    parent.insertBefore(header, sibling);\n};","const siblingsBefore = lessonId => {\n        \n    let siblings = document.querySelectorAll('.js-lesson-list-item:not(.hide-important)');\n    let sibling = siblings[0];\n    let index = 0;\n\n    const before = [];\n    \n    while(sibling) {\n      index++;\n      if(parseInt(sibling.dataset.lessonId) !== lessonId) {\n        before.push(sibling);\n        sibling = siblings[index];\n      } else {\n        sibling = null;\n      }\n    }\n\n    return before.length;\n  };\n\nconst scrollToTitle = lessonId => {\n  setTimeout(() => {\n    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhRow').replace('px', ''));\n    const rows = siblingsBefore(lessonId);\n    const top = standardBlock * (rows);\n\n    const scroll = document.querySelector('.lesson-list .scrollable');\n    if(scroll) scroll.scrollTop = top;\n  });\n};\n\nexport const lessonListScrollHandler = {\n  scrollToTitle\n}","import { enums } from 'ui/helpers/enum-helper';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderLessonListHeader } from 'ui/screens/lists/lesson-list-header';\nimport { renderLesson } from 'ui/screens/lists/lesson';\nimport { renderCustomLesson } from 'ui/screens/lists/lesson-custom';\nimport { onLoadLessonsViewState } from 'ui/screens/lists/lesson-list-event-handler';\n\nimport lessonListTemplate from 'ui/screens/lists/lesson-list-template.html';\n\nexport const renderLessons = () => {\n\n    let { config, collections, videoPlayer } = store.getState();\n\n    const template = document.createElement('template');\n          template.innerHTML = lessonListTemplate;\n\n    let lessons = onLoadLessonsViewState(collections.filter(collection => (collection.isActive === undefined || collection.isActive)), videoPlayer);\n\n    lessons = lessons.sort(function(a,b){\n          const tsa = a.create ? a.create.seconds : 0;\n          const tsb = b.create ? b.create.seconds : 0;\n        return tsb - tsa;\n    });\n\n    let parent = config.isPortraitMode ? DOM.rightBody : DOM.leftBody;\n        parent.innerHTML = '';\n\n    renderTemplate({}, template.content, parent);\n\n      lessons.forEach(lesson => renderLesson(lesson));\n\n      renderLessonListHeader(parent);\n\n      const createCustomLessonBtn = parent.querySelector('.js-create-custom-lesson');          \n            createCustomLessonBtn.addEventListener('click', e => {\n              import('ui/create-guide-modal/create-guide').then(module => {\n                module.createGuideHandler(1);\n              });\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.hideOtherContentAndRevertChevrons(0);\n              });              \n            });    \n\n      const youtubeLessonIcons = document.querySelectorAll('.js-lesson-list-youtube');      \n            youtubeLessonIcons.forEach(youtube => {\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.onLessonIconClickHandler(youtube, lessons, config, true);\n              });\n            });\n      highlightActiveLessonHandler(youtubeLessonIcons);\n\n      const chevrons = document.querySelectorAll('.js-lesson-list-chevron');\n            chevrons.forEach(chevron => {\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.onLessonIconClickHandler(chevron, lessons, config, false);\n              });              \n            });\n      highlightActiveLessonHandler(chevrons);\n\n      const reviews = document.querySelectorAll('.js-review-link');\n            reviews.forEach(reviewLink => {\n              import('ui/screens/lists/lesson-list-event-handler').then(module => {\n                module.lessonListEventHandler.onReviewClickHandler(reviewLink, config);\n              });\n            });\n      highlightActiveLessonHandler(reviews);\n\n      setTimeout(() => {      \n\n            let terms = document.querySelectorAll('.js-terms-review-link');\n                terms.forEach(term => {\n                  term.addEventListener('click', e => {                         \n                        const lesson = lessons.find(lesson => lesson.id === parseInt(term.dataset.lessonId));\n                        if(lesson.terms) {\n                              const { glossary } = store.getState();\n                              setTimeout(() => {\n                                    const { quickFire } = store.getState();\n                                    if(quickFire && quickFire.lessonId === lesson.id) {\n                                          import('ui/quick-fire-modal/quick-fire').then(module => {\n                                            module.quickFireHandlers.questions(quickFire);\n                                          });\n                                    } else {\n                                          import('ui/quick-fire-modal/quick-fire').then(module => {\n                                            const quickFireState = { ...module.quickFireHandlers.init(glossary, enums.quickFireType.DEFINITION, lesson), linkFromLesson: true }\n                                            module.quickFireHandlers.questions(quickFireState);\n                                          });\n                                    }\n                              },150);\n                        }\n                });\n            });\n            highlightActiveLessonHandler(terms);\n\n      },100);\n\n      renderCustomLesson(lessons, videoPlayer, config);      \n};\n\nconst highlightActiveLessonHandler = lessons => {\n      lessons.forEach(lesson => lesson.addEventListener('click', e => {            \n        import('ui/screens/lists/lesson-list-event-handler').then(module => {\n          module.lessonListEventHandler.highlightActiveLesson(lesson.dataset.lessonId);\n        });          \n      }));\n};\n","import { contains, clone } from 'ramda';\n\nimport { subscription } from 'redux/subscriptions';\nimport { firestore } from 'api/firebase/firestore';\nimport { progressState } from 'redux/reducers/initial-state/initial-progress-state';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { renderSpeciesList } from 'ui/screens/lists/species-list';\nimport { collectionHandler  } from 'ui/helpers/collection-handler';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { nextLesson } from 'ui/setup/next-lesson';\nimport { nextLayout } from 'ui/setup/next-layout';\nimport { nextItem } from 'ui/setup/next-item';\n\nconst changeRequest = async args => {\n\n  const { requestType, requestArgs } = args;\n\n  let { config, collections, collection, counter, lessonPlan, lessonPlans, layout, lesson, score, history, bonusLayout, traits = enums } = store.getState();\n  let userProgressState;\n\n  switch(requestType) {\n\n    case enums.lessonState.PAUSE_LESSON:\n      changeLessonState(requestType, collection, config);\n    break;\n    \n    case enums.lessonState.UPDATE_COLLECTION:\n      actions.boundUpdateCollection({ config: requestArgs.config, collection: requestArgs.collection });\n    break;\n    \n    case enums.lessonState.SAVE_LESSON_PROGRESS:\n      \n      config.collection.id = collection.id; // hack\n    \n      const savedLesson = { \n          name: collection.name,\n          config, collection, counter, lessonPlan, lessonPlans, layout, lesson, score: clone(score), history, bonusLayout, enums: traits\n      };\n    \n      actions.boundSaveLesson(savedLesson);\n\n    break;\n    \n    case enums.lessonState.GET_LESSON_STATE:\n      userProgressState = await getLessonState(requestArgs.collectionToLoad, requestArgs.config, requestArgs.updatedCounter);\n      saveUserProgressState(userProgressState);\n      return userProgressState;\n    \n    case enums.lessonState.ADD_SPECIES_TO_COLLECTION:\n      userProgressState = await addExtraSpeciesSelection(requestArgs);\n      saveUserProgressState(userProgressState);\n    \n    case enums.lessonState.RENDER_SPECIES_LIST:      \n      userProgressState = await getLessonState(requestArgs.lesson || requestArgs.collection, config);\n      saveUserProgressState(userProgressState);\n      setTimeout(() => {\n        renderSpeciesList(userProgressState.collection, { callingParentContainer: requestArgs.container });\n      });\n    break;\n    \n    case enums.lessonState.BEGIN_OR_RESUME_LESSON:\n      const collectionToLoad = lessonStateHelper.getCollectionToLoad(collection, collections, requestArgs.id);\n      userProgressState = await getLessonState(collectionToLoad, config);\n      const _lessonState = userProgressState.score && userProgressState.score.collectionId === userProgressState.collection.id\n              ? enums.lessonState.RESUME_LESSON\n              : enums.lessonState.BEGIN_LESSON;\n      saveUserProgressState(userProgressState);\n      // subscription.addAllQuizLayoutSubs();\n\n      subscription.add(nextItem, 'layout', 'quiz');\n      subscription.add(nextLesson, 'counter', 'quiz');\n      subscription.add(nextLayout, 'counter', 'quiz');\n\n      setTimeout(() => {\n        changeLessonState(_lessonState, userProgressState.collection, userProgressState.lesson); \n      });\n    break;\n\n    case enums.lessonState.NEXT_ROUND:\n      changeLessonState(enums.lessonState.NEXT_ROUND, collection, requestArgs.lesson);\n    break;\n  }\n};\n\nconst getLessonState = async (collectionToLoad, config, newLessonCounter) => {\n\n  const { counter: stateCounter, lessons, lesson: savedLesson } = store.getState();\n\n  const counter = newLessonCounter || stateCounter;\n\n  const userProgressState = lessonStateHelper.getUserLessonState(lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter);\n\n  userProgressState.collection = await collectionHandler.loadCollection(userProgressState.collection, config);\n  \n  return userProgressState;\n};\n\nconst changeLessonState = async (userProgressState, collection, lesson) => {    \n\n  switch(userProgressState) {\n      case enums.lessonState.BEGIN_LESSON: {\n            actions.boundStopStartLesson({ index: 0, isLessonPaused: false, log: { collection: collection.id  } });\n          break;\n      }\n      case enums.lessonState.PAUSE_LESSON: {\n\n        if(collection.items) {\n          const { index } = lessonStateHelper.getLatestCounter(collection);\n          actions.boundStopStartLesson({ index, isLessonPaused: true, log: { index: index, collection: collection.id  } });\n        }\n\n        break;\n      }\n      case enums.lessonState.RESUME_LESSON: {\n          actions.boundStopStartLesson({ ...lessonStateHelper.getLatestCounter(collection), isLessonPaused: false, log: { collection: collection.id  } });\n          break;\n      }\n      case enums.lessonState.NEXT_ROUND: {\n          if(lesson.isLevelComplete) {\n            actions.boundNextLevel({ index: 0, lesson });\n          } else if(lesson.isNextRound) {\n              actions.boundNextRound({ index: 0, lesson: { ...lesson, currentRound: lesson.currentRound + 1 } });\n          };\n          break;      \n      }\n  }\n  return lesson;\n};\n\nconst addExtraSpeciesSelection = async requestArgs => {\n\n  const { config, collection } = requestArgs;\n\n  const extraSpecies = config.guide.species.filter(s => !contains(s.name, collection.items.map(i => i.name)));\n\n  const items = await collectionHandler.getSpeciesDetailsInParallel(extraSpecies);\n\n  const collectionExtension = await collectionHandler.loadCollectionItemProperties({ items }, config);\n  collection.items = [ ...collection.items, ...collectionExtension.items];\n  const lesson = {\n      collection,\n      counter: { ...store.getState().counter, index: 0 },\n      lesson: { currentRound: 1, rounds: 0, isNextRound: true },\n      layout: null,\n      history: null,\n      score: clone(progressState.score)\n  };\n\n  return await lesson;\n};\n\nconst saveUserProgressState = userProgressState => {\n\n  const { user, userAction } = store.getState();\n\n  userProgressState.counter = userProgressState.counter || { };\n\n  actions.boundSaveUserProgress({ lesson: userProgressState, userAction });\n  \n  firestore.addCollection(clone(userProgressState.collection), user);\n};\n\nconst recordUserAction = action => {\n\n  subscription.removeAllQuizScreenSubs();\n  subscription.removeAllQuizLayoutSubs();\n\n  setTimeout(() => {\n    actions.boundClickEvent(action);  \n  });\n};\n\nexport const lessonStateHandler = {\n  changeRequest,\n  recordUserAction\n};","import { clone } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { persistor } from 'redux/store';\nimport { actions } from 'redux/actions/action-creators';\nimport { store } from 'redux/store';\nimport { config as initialConfig } from 'snapdragon-config/lesson-config';\n\nconst getIsReviewingLesson = (userAction, config) => {\n\n    let isNotReviewingLesson = true;\n  \n    if (userAction) {\n        if (config.isLandscapeMode) {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name || userAction.name === enums.userEvent.TOGGLE_SPECIES_LIST.name);\n        }\n        else {\n            isNotReviewingLesson = isNotReviewingLesson && (userAction.name === enums.userEvent.START_LESSON.name);\n        }\n    }\n  \n    return !isNotReviewingLesson;\n};\n\nconst overrideLesson = (userAction, config) => {\n    return !getIsReviewingLesson(userAction, config);\n};\n\nconst purgeLesson = () => {\n    persistor.purge();\n    window.location.reload(true);\n};\n\nconst clearGuide = () => {\n    const config = store.getState().config;\n    config.guide = initialConfig.guide;\n    actions.boundUpdateConfig(config);\n};\n\nconst getCollectionToLoad = (currentCollection, collections, selectedLessonCollectionId)  => {\n\n    const id = parseInt(selectedLessonCollectionId);\n  \n    let resume = true;\n        resume = resume && currentCollection.id > 0;\n        resume = resume && currentCollection.id === id;\n  \n    const collection = resume ? currentCollection : collections.find(c => c.id === id);\n  \n    return collection;\n};\n\nconst getLatestCounter = collection => { \n    const { counter, lessons } = store.getState();\n    const log = counter.log;\n    const index = log ? log.index : \n                lessons.find(l => l.collection.id === collection.id)\n                    ? lessons.find(l => l.collection.id === collection.id).counter.index\n                    : counter.index;\n  \n    return { index };\n};\n\nconst getUserLessonState = (lessons, collectionToLoad, progressState, counter, savedLesson, newLessonCounter) => {\n\n    let restoredLesson = lessons.find(l => l.name === collectionToLoad.name);\n\n    let lesson;\n  \n    if(restoredLesson) {\n      lesson = restoredLesson;\n      lesson.collection = collectionToLoad;\n      if(lesson.lesson.isNextRound) {\n        lesson.score = clone(progressState.score);\n      }\n    } else {\n      lesson = { \n        collection: collectionToLoad, \n        counter: { ...counter, index: 0 },\n        lesson: savedLesson || { currentRound: 1, rounds: 0, isNextRound: true },\n        layout: null,\n        history: null,\n        score: clone(progressState.score)\n      };\n    }\n    \n    return lesson;\n};\n  \nexport const lessonStateHelper = {\n    getIsReviewingLesson,\n    overrideLesson,\n    purgeLesson,\n    clearGuide,\n    getCollectionToLoad,\n    getLatestCounter,\n    getUserLessonState\n};","import { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport lessonTemplate from 'ui/screens/lists/lesson-template.html';\n\nexport const renderLesson = (lesson) => {\n\n      const { config, lessons, layout } = store.getState();\n\n      const template = document.createElement('template');\n            template.innerHTML = lessonTemplate;\n\n      lesson.hideVideoClass = lesson.hasVideo ? '' : 'hide-important';\n      lesson.hideTextIntroClass = lesson.hasVideo ? 'hide-important' : '';\n\n      const savedLesson = lessons.find(saved => saved.collection.id === lesson.id);\n\n      lesson.isPaused = !!savedLesson || config.collection.id === lesson.id;\n      lesson.icon = lesson.icon || \"https://static.inaturalist.org/photos/57604885/small.jpeg?1575746307\";\n\n      renderTemplate({ lesson }, template.content, document.querySelector('.js-lesson-container'));\n\n      if(savedLesson) {\n            renderReview(savedLesson.layout, savedLesson.collection, null, config);\n      } \n      \n      if(config.collection.id === lesson.id) {\n\n            const row = document.querySelector(`.js-lesson-list-carousel-item[data-lesson-id=\"${lesson.id}\"]`)\n                  if(row) row.classList.add('highlighted-for-review-row');\n\n            if(config.isLandscapeMode) {\n                  setTimeout(() => {\n                        const reviewLink = row.querySelector('.js-review-summary');                  \n                        if(reviewLink) reviewLink.click();\n                  });\n            }\n\n            // current lesson whose current state is not yet saved\n            if(layout && layout.roundScoreCount) {\n                  renderReview(layout, lesson, 'progress-icon', config);\n            }\n      }\n}; \n\nconst renderReview = (layout, lesson, className, config) => {\n      const progressBar = document.querySelector('.js-main-lesson-grid progress');\n      const value = !!layout.roundProgressIndex ? layout.roundProgressIndex : progressBar ? progressBar.value : 0;\n      const review = `<progress aria-label=\"lesson quiz progress\" title=\"lesson quiz progress\" class=\"absolute\" value=\"${ value }\" max=\"${layout.roundScoreCount}\"></progress>`;\n      const parent = document.querySelector(`.js-review[data-lesson-id=\"${lesson.id}\"]`);\n            parent.innerHTML = review;\n\n      const reviewLinkBtn = document.querySelector(`.js-review-link[data-lesson-id=\"${lesson.id}\"]`);\n            reviewLinkBtn.innerText = 'Resume Quiz';\n};\n","import { renderTemplate } from 'ui/helpers/templating';\n\nimport definitionTemplate from 'ui/screens/lists/species-list-definition-insert.html';\n\nlet currentlyActiveRow = null;\nlet currentlyActiveSpecies;\n\nexport const onSpeciesChangeHandler = species => {\n\n    try {\n\n        const id = species.id || species.eolId;\n        const tr = document.querySelector(`#id_${id}`);\n\n        currentlyActiveRow = tr;\n        currentlyActiveSpecies = species;\n        \n    } catch(e) {\n      logError(onSpeciesChangeHandler, e);\n    }\n};\n\nexport const openNoteHandler = (note, time) => {\n\n    if(Math.floor(note.time) !== time) return;\n\n    let parent = document.getElementById('insertParent');\n\n    if(parent) parent.remove();\n\n    const template = document.createElement('template');\n          template.innerHTML = definitionTemplate;\n\n    const insert = document.createElement('div');\n          insert.setAttribute('id', 'insertParent');\n\n    if(note.colCount) {\n        insert.classList.add(`col-count-${note.colCount}`);\n        insert.innerHTML = note.description.replace(/\\r?\\n/g, '<br />');\n    }\n\n    if(!currentlyActiveRow) {\n        // first row, before any species have been matched\n        currentlyActiveRow = document.querySelector('.js-list-item'); // first by default\n    }\n\n    currentlyActiveRow.parentElement.insertBefore(insert, currentlyActiveRow);\n\n    if(!note.colCount) {        \n        parent = document.getElementById('insertParent');\n        parent.innerHTML = '';\n        renderTemplate({ note }, template.content, parent);\n        const noteText = document.querySelector('#insertParent > div:nth-child(1) > div:nth-child(2)');\n              noteText.innerHTML =noteText.innerHTML.replace(/\\r?\\n/g, '<br />');\n    }    \n};\n","import { contains } from 'ramda';\n\nimport { enums } from 'ui/helpers/enum-helper';\nimport { utils } from 'utils/utils';\nimport { DOM } from 'ui/dom';\nimport { store } from 'redux/store';\nimport { renderCard } from 'ui/screens/cards/card';\nimport { renderTaxonCard } from 'ui/screens/cards/taxon-card';\nimport { renderNonTaxonCard } from 'ui/screens/cards/non-taxon-card';\nimport { modalImageHandler } from 'ui/helpers/image-handler';\nimport { buildTable } from 'ui/screens/lists/species-table';\nimport { videoHandler } from 'ui/screens/lists/video-handler';\nimport { videoSetup } from 'ui/screens/home/home-lesson-intro-video';\nimport { lessonStateHandler } from 'ui/screens/lists/lesson-state-handler';\nimport { onSpeciesChangeHandler, openNoteHandler } from 'ui/screens/lists/species-list-definition-insert';\n\nexport const renderSpeciesList = (lesson, args) => {\n\n  const init = async () => {\n\n    const { callingParentContainer, isInCarousel = false } = args;\n\n    const { config, history, enums: traitEnums, collections  } = store.getState();    \n\n    // to ensure we have latest item list if species has been added\n    const collection = collections.find(c => c.id === lesson.id);\n\n    const openAccordionHandler = (species, accordion) => {\n        \n        accordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n        \n        openSpeciesDescriptionHandler(collection, species, true, false);\n\n        const closeAccordionHandler = event => {\n            // remove current close accordion handler\n            accordion.removeEventListener('click', closeAccordionHandler);\n            // change direction of chevron       \n            accordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${species.name}\"></i>`;\n            // attach new open accordion listener\n            accordion.addEventListener('click', event => {\n                openAccordionHandler(species, accordion);\n            });\n            // remove the species description - handled in group action\n            const description = document.querySelector('.species-description');\n            if(description) {\n                description.parentNode.removeChild(description);\n            }\n        };\n\n        // attach close accordion handler\n        accordion.addEventListener('click', closeAccordionHandler);\n    };\n\n    const userClickHandlers = () => {\n\n        const listItemImages = document.querySelectorAll('.table-row img');\n\n              listItemImages.forEach(itemImage => {                 \n                  const item = collection.items.find(item => item.name === itemImage.dataset.itemName)\n                  modalImageHandler(itemImage, item, collection, config); \n              });\n\n        const accordions = document.querySelectorAll('.js-accordion');\n\n              accordions.forEach(accordion => {\n                  const accordionHandler = event => {\n                      const species = collection.items.find(item => item.name === event.currentTarget.dataset.name);\n                      if(species) {\n                        openAccordionHandler(species, accordion);\n                      }\n                  };\n                  accordion.addEventListener('click', accordionHandler);\n              });\n\n        const youtubeIcons = document.querySelectorAll('.js-youtube');\n              youtubeIcons.forEach(icon => {                  \n                  icon.addEventListener('click', event => {       \n\n                    event.stopPropagation();\n\n                    const activeIcon = event.currentTarget;\n                          activeIcon.classList.add('youtube-green-fg');\n                    const speciesName = activeIcon.dataset.name;\n\n                    const species = { ...collection.items.find(item => item.name == speciesName), ...collection.species.find(item => item.name == speciesName) };\n\n\n                    openSpeciesDescriptionHandler(collection, species, true);\n\n                    if(species && species.time) {\n\n                        videoHandler.isVideoPlayerReady(collection.video.id)\n                            ? videoHandler.playVideoFrom(species.time[0])\n                            : videoSetup(collection, store.getState().videoPlayer || [], DOM.rightBody, species.time[0]);\n                    }\n\n                   videoHandler.updateVideoPlayer(store.getState().videoPlayer, collection, species);\n                  });\n              });\n\n        const cardModal = document.querySelector('#cardModal .js-modal-body');\n\n        setTimeout(() => {\n            \n            const speciesCardLinks = document.querySelectorAll('.js-test-card-container-link');\n                  speciesCardLinks.forEach((link, index) => {                \n                      link.addEventListener('click', event => {                    \n                        const name = event.target.dataset.name;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'species-card';\n                        renderCard(collection, 'MODAL', collection.items.find(i => i.name === name), cardModal, isInCarousel);\n                      });\n                  });\n\n            const traitCardLinks = document.querySelectorAll('.js-key-trait-link');\n                  traitCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const keyTrait = event.target.dataset.keyTrait;\n                        const url = event.target.dataset.url;\n                        renderNonTaxonCard('MODAL', keyTrait, cardModal, url);\n                    });\n                  });\n\n            const taxonCardLinks = document.querySelectorAll('.js-taxon-card-link');\n                  taxonCardLinks.forEach(link => {\n                    link.addEventListener('click', event => {\n                        const taxon = event.target.dataset.family || event.target.dataset.order;\n                        const name = event.target.dataset.name;\n                        const rank = event.target.dataset.rank;\n                        document.querySelector('#cardModal .prev > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .prev > span').dataset.card = 'taxon-card';\n                        document.querySelector('#cardModal .next > span').dataset.rank = rank;\n                        document.querySelector('#cardModal .next > span').dataset.card = 'taxon-card';\n                        renderTaxonCard(collection, 'MODAL', collection.items.find(i => i.taxonomy[rank] === name), cardModal, taxon, rank, isInCarousel);\n                    });\n                  });\n\n            document.querySelectorAll('.mushroom-icon').forEach(icon => {\n                icon.innerHTML = '<svg-icon class=\"si-glyph-mushrooms\"><src href=\"./static/icons/si-glyph-mushrooms.svg\"/></svg>';\n            });\n\n            const nthChild = config.isLandscapeMode ? 5 : 3;\n            const taxonIcons = document.querySelectorAll(`.table-row.js-list-item td:nth-child(${nthChild}) > span`);\n\n            if(!history) return;\n\n            const noWrongAnswersForThisSpecies = [];\n            history.scores.map(score => score.failsTotals).forEach(totals => {\n                for (let [key, anyWrongAnwers] of Object.entries(totals)) {\n                    if(anyWrongAnwers == false) {\n                        noWrongAnswersForThisSpecies.push(parseInt(key));\n                    }\n                }\n            });\n\n            taxonIcons.forEach(icon => {\n                if(contains(parseInt(icon.id), noWrongAnswersForThisSpecies)) {\n                    icon.classList.add('correct');\n                }\n            });\n        });\n    };\n\n    // if(!!collection.notes) {\n    //     collection.notes.forEach(n => sp.firstTime = n.time[0]);\n    //     collection.notes = utils.sortBy(collection.notes, 'firstTime', 'asc');\n    // }\n\n    const table = await buildTable(collection, { config, enums: traitEnums, overrideParent: callingParentContainer });\n\n    if(!table.isReady) return;\n\n    userClickHandlers();\n\n    const openSpeciesDescriptionHandler = (collection, species, enableScroll = true, activateYoutubeIcon = true) => {\n\n        try {\n\n            const parent = document.getElementById('insertParent');\n            if(parent) parent.remove();\n\n            const { accordions } = closeOpenAccordions(species.name);\n\n            const activeAccordion = accordions.find(accordion => accordion.dataset.name === species.name);\n            \n            if(activeAccordion) {\n                activeAccordion.innerHTML = `<i class=\"fas fa-chevron-up\" data-name=\"${species.name}\"></i>`;\n\n                if(activateYoutubeIcon) {\n                  const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                        activeYouTubeIcon.classList.add('youtube-green-fg');\n              }\n            }\n\n            // if(activateYoutubeIcon) {\n            //     const activeYouTubeIcon = activeAccordion.parentElement.parentElement.querySelector('.js-youtube');\n            //           activeYouTubeIcon.classList.add('youtube-green-fg');\n            // }\n\n            let description = species.description;\n                description = !!description ? description : (species.traits.description && species.traits.description.value) ? species.traits.description.value[0] : '';\n\n            if(description) {\n\n                const id = species.id || species.eolId;\n                const tr = document.querySelector(`#id_${id}`);\n                \n                const td = document.createElement('td');\n\n                const text = document.createElement('div');\n                      text.classList.add('inserted-td');\n                      text.innerHTML = description.replace(/\\r?\\n/g, '<br />');\n\n                td.appendChild(text);\n\n                const insert = document.createElement('div');\n                      insert.classList.add('table-row');\n                      insert.classList.add('species-description');\n                      insert.appendChild(td);\n\n                tr.parentElement.insertBefore(insert, tr.nextSibling);\n\n                const scrollIntoView = (rowHeight, noOfRows) => {\n\n                    const scroll = document.querySelector('.scrollable');\n                    const standardBlock = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vhStandardBlock').replace('px', ''));\n                    const unit = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--vh').replace('px', ''));\n                    const top = (standardBlock * 2) + (rowHeight * (noOfRows - 1)) - ( 2 * unit);\n\n                    scroll.scrollTop = top;\n                };\n\n                if(enableScroll) {\n                    config.isLandscapeMode \n                        ? tr.previousElementSibling.scrollIntoView()\n                        : scrollIntoView(tr.offsetHeight, species.snapIndex);\n                }\n            }\n        } catch(e) {\n          logError(openSpeciesDescriptionHandler, e);\n        }\n    };\n\n    videoHandler.onSpeciesTimeMatch((collection, species) => {\n\n        openSpeciesDescriptionHandler(collection, species);\n        videoHandler.updateVideoPlayer(store.getState().videoPlayer, collection, species);\n        onSpeciesChangeHandler(species);\n    });\n\n    videoHandler.onNoteTimeMatch((collection, note) => {        \n        openNoteHandler(note, videoHandler.getPlayerTime());\n    });\n  };\n\n  init();\n};\n\nlet currentIndex = 0;\n\nconst carouselControlHandler = event => {\n\n    const { collection } = store.getState();\n    \n    let transition = event.target.dataset.transition;\n    let modal = event.target.dataset.modal;\n    let card = event.target.dataset.card;\n    let rank =  event.target.dataset.rank;\n\n    switch(transition) {\n        case 'prev':\n            currentIndex--;\n            currentIndex = currentIndex === -1 ? collection.items.length -1 : currentIndex;\n            break;\n        case 'next':\n            currentIndex++;\n            currentIndex = currentIndex === collection.items.length -1 ? 0 : currentIndex;\n            break;\n    }\n\n    let nextItem = collection.items.find((item,index) => index === currentIndex);\n\n    const parent = document.querySelector(`#${modal} .js-modal-body`);\n    \n    switch(card) {\n        case 'species-card':\n            renderCard(collection, 'MODAL', nextItem, parent, isInCarousel);\n            break;\n        case 'taxon-card':\n            renderTaxonCard(collection, 'MODAL', nextItem, parent, null, rank, isInCarousel);\n            break;    \n    }    \n};\n\nconst prev = document.querySelector('#cardModal .js-prev');\nconst next = document.querySelector('#cardModal .js-next');\n\nif(prev) prev.addEventListener('click', carouselControlHandler);\nif(next) next.addEventListener('click', carouselControlHandler);\n\nconst prevTaxon = document.querySelector('#cardModal .js-prev');\nconst nextTaxon = document.querySelector('#cardModal .js-next');\n\nif(prevTaxon) prevTaxon.addEventListener('click', carouselControlHandler);\nif(nextTaxon) nextTaxon.addEventListener('click', carouselControlHandler);\n\nconst closeOpenAccordions = speciesName => {\n\n    const accordions = Array.from(document.querySelectorAll('.js-accordion'));\n    const openAccordions = accordions.filter(accordion => accordion.dataset.name !== speciesName);\n        \n    openAccordions.forEach(inactiveAccordion => {\n        \n        if (inactiveAccordion.innerHTML.indexOf('fa-chevron-up') > -1) {\n            \n            inactiveAccordion.click();\n            inactiveAccordion.innerHTML = `<i class=\"fas fa-chevron-down\" data-name=\"${speciesName}\"></i>`;\n            \n            const inActiveYouTubeIcon = inactiveAccordion.parentElement.parentElement.querySelector('.js-youtube');\n                  inActiveYouTubeIcon.classList.remove('youtube-green-fg');\n        }\n    });\n\n    const parent = document.querySelector('.species-table tbody');\n    const currentDescriptions = document.querySelectorAll('.species-description');\n            currentDescriptions.forEach(tr => parent.removeChild(tr));\n\n    return { accordions };\n};","import { utils } from 'utils/utils';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { imageUseCases, scaleImage } from 'ui/helpers/image-handler';\nimport { iconicTaxa, matchIcon } from 'api/snapdragon/iconic-taxa';\n\nimport speciesTemplate from 'ui/screens/lists/species-table-template.html';\n\nexport const buildTable = (collection, args) => {\n\n  try {\n\n    const { config, units, overrideParent } = args;\n\n    const template = document.createElement('template');\n\n    const wide = window.matchMedia(\"(min-width: 1024px)\").matches;\n\n    const getTraitName = (item, units) => {\n        let traitName = '';        \n        let keyTratLinkClass = 'capitalise underline-link js-key-trait-link';\n        item.taxonomy.phylum = item.taxonomy.phylum || '';\n        if(item.taxonomy) {\n            switch(item.taxonomy.phylum.toLowerCase()) {\n                case 'ascomycota':\n                    traitName = item.taxonomy.order.toLowerCase() === 'pezizales'\n                        ? 'how edible'\n                        : 'thallus type';\n                    if(item.taxonomy.order.toLowerCase() === 'pezizales') keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                case 'basidiomycota':\n                    traitName = 'how edible';\n                    keyTratLinkClass = 'js-key-trait-link';\n                    break;\n                default:\n                    traitName = '-';\n            }        \n        } else {\n            keyTratLinkClass = 'js-key-trait-link';\n        }\n        return { traitName, keyTratLinkClass };\n    }\n\n    const getOrderLinkClass = item => {\n        let orderLinkClass;\n        if(item.taxonomy && item.taxonomy.order) {\n            orderLinkClass = item.order\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link';\n        } else { orderLinkClass = 'snap-no-link-btn no-underline-link js-taxon-card-link'; }\n        return orderLinkClass;\n    };\n\n    const getIconicTaxonIcon = item => {\n        let iconicTaxonIcon, hideFungiIcon;\n        if(item.iconicTaxon.toLowerCase() === 'fungi') {\n            iconicTaxonIcon = 'hide';\n            hideFungiIcon = '';\n        } else {\n            iconicTaxonIcon = matchIcon(item.taxonomy, iconicTaxa);\n            hideFungiIcon = 'hide';\n        }\n        return { iconicTaxonIcon, hideFungiIcon };\n    };\n\n    const itemImages = collection.items.map(item => { \n\n        let image = item.images.find(i => i.starred) || utils.shuffleArray(item.images)[0];\n            image = scaleImage(image, imageUseCases.SPECIES_LIST, config);\n\n        const { traitName, keyTratLinkClass } = getTraitName(item, units);\n        const { iconicTaxonIcon, hideFungiIcon } = getIconicTaxonIcon(item);\n\n        const itemImage = {\n            id: item.id,\n            name: item.name,\n            itemName: item.name,\n            genus: item.taxonomy.genus,\n            species: item.taxonomy.species,\n            genusLinkClass: item.genus\n                ? 'snap-link-btn underline-link js-taxon-card-link' \n                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            shortName: itemProperties.trimLatinName(item.name),\n            taxonomy: item.taxonomy,\n            iconicTaxon: item.iconicTaxon,\n            vernacularName: item.vernacularName,\n            snapIndex: item.snapIndex,\n            license: image.license,\n            url: image.url,\n            small: image.small,\n            rightsHolder: image.rightsHolder || 'Public domain',\n            source: image.source,\n            shortName: itemProperties.trimLatinName(item.name),\n            keyTrait: utils.capitaliseFirst(itemProperties.getActiveTrait(item, [{ name: traitName, formatter: trait => trait[0] }])) || '',\n            keyTratLinkClass: keyTratLinkClass,\n            familyLinkClass: item.family\n                                ? 'snap-link-btn underline-link js-taxon-card-link' \n                                : 'snap-no-link-btn no-underline-link js-taxon-card-link',\n            orderLinkClass: getOrderLinkClass(item),\n            taxonomy: item.taxonomy || { family: '', order: ''},\n            iconicTaxonIcon,\n            hideFungiIcon, \n            hasVideoClassName: !collection.hasVideo ? 'hide-column' : '',\n            hasTaxonClassName: collection.hasVideo ? 'hide-column' : '',\n            provider: image.provider || ''\n        };\n\n        return itemImage;\n    });\n\n    template.innerHTML = speciesTemplate;\n\n    let parent = config.isPortraitMode\n            ? overrideParent\n            : document.querySelector(`.js-species-container[data-container-id=\"${collection.id}\"]`);\n        parent.innerHTML = '';\n\n    renderTemplate({ id: collection.id, itemImages }, template.content, parent);\n\n    const table = parent.querySelector(`table#species_list_id_${collection.id}`);\n\n    const keyTraits = table.querySelectorAll('.js-key-trait-link');\n\n    keyTraits.forEach(vn => {\n        const keyTrait = vn.dataset.keyTrait;\n        const span = document.createElement('span');\n        switch(keyTrait) {                \n            case units.howEdible.CHOICE:\n                span.innerHTML = '<span class=\"icon choice\"></span>';\n                vn.append(span);\n                break;\n            case units.howEdible.EDIBLE:\n                span.innerHTML = '<span class=\"icon edible\"></span>';\n                vn.append(span);\n                break;\n            case units.howEdible.INEDIBLE:\n                span.innerHTML = '<span class=\"icon inedible\"></span>';\n                vn.append(span);\n                break;\n            case units.howEdible.POISONOUS:\n            case units.howEdible.DEADLY:\n                span.innerHTML = '<span class=\"icon toxic\"></span>';\n                vn.append(span);\n                break;\n        }\n    });\n\n    const tbody = table.querySelector('.species-table tbody');\n\n    if(!tbody) return;\n    \n    const caption = document.createElement('caption');\n          caption.innerHTML = `Species in ${collection.name}`;\n          caption.classList.add('visually-hidden');\n\n    const thead = document.createElement('thead');\n\n    table.insertBefore(thead, tbody);\n    table.insertBefore(caption, thead);\n\n    const headerRow = document.createElement('tr');\n          headerRow.classList.add('table-header');\n    const imageHeader = document.createElement('th');\n    const speciesHeader = document.createElement('th');\n    const familyHeader = document.createElement('th');\n    const traitNameHeader = document.createElement('th');\n    const iconicTaxonHeader = document.createElement('th');\n\n    const accordionHeader = document.createElement('th');\n          accordionHeader.classList.add('not-sortable');\n\n    speciesHeader.innerHTML = '<span>Species</span';\n    familyHeader.innerHTML = '<span>Family</span><span>Order</span>';\n    traitNameHeader.innerHTML = '<span></span>';\n    iconicTaxonHeader.innerHTML = '<span><i class=\"fas fa-sliders-h\"></i></span>';\n    imageHeader.innerHTML = overrideParent ? '' : '<span><i class=\"fas fa-undo\"></i></span>';\n    if(wide) {        \n        headerRow.appendChild(imageHeader);\n        headerRow.appendChild(speciesHeader);    \n        headerRow.appendChild(familyHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    } else {\n        headerRow.appendChild(imageHeader);    \n        headerRow.appendChild(speciesHeader);\n        if(collection.behaviour === 'dynamic') {\n            headerRow.appendChild(iconicTaxonHeader);\n        }\n    }\n    if(collection.behaviour === 'static') {\n        headerRow.appendChild(accordionHeader);\n    }\n\n    if(!tbody.querySelector('.table-header')) {\n        thead.appendChild(headerRow);\n    }\n\n    const sortableCalback = () => {};\n\n    utils.makeSortable(document, sortableCalback, wide);\n\n    return new Promise(resolve => resolve({isReady: true}));\n\n  } catch(e) {\n    logError('buildTable', e);\n    return new Promise(resolve => resolve({isReady: false}));\n  }\n}\n","import { clone } from 'ramda';\n\nimport { actions } from 'redux/actions/action-creators';\n\nconst onSpeciesTimeMatchListeners = [];\nconst onNoteTimeMatchListeners = [];\n\nconst onSpeciesTimeMatch = listener => {    \n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n    onSpeciesTimeMatchListeners.push(listener);\n};\n\nconst onNoteTimeMatch = listener => {    \n    while(onNoteTimeMatchListeners.length > 0) {\n        onNoteTimeMatchListeners.pop();\n    }\n    onNoteTimeMatchListeners.push(listener);\n};\n\nconst onSpeciesPlayRequestListeners = [];\n\nconst onSpeciesPlayRequest = listener => {\n    onSpeciesPlayRequestListeners.push(listener);\n};\n\nconst onPlayerReadyListeners = [];\nconst onPlayerStateChangeListeners = [];\n\nconst subscribeToPlayerStateChange = listener => {\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n    onPlayerStateChangeListeners.push(listener);\n};\n\nlet player, isPlayerReady = false;\n\nconst readyPlayer = () => {\n\n    const onPlayerReady = event => {\n        player = event.target;\n        isPlayerReady = true;\n    };\n    \n    const onPlayerStateChange = event => {\n        player = event.target;\n        if(player) {\n            onPlayerStateChangeListeners.forEach(listener => listener(player));\n        }\n     };\n    \n    new YT.Player('embedded-video', {\n        playerVars: { 'autoplay': 1 },\n        events: {\n        'onReady': onPlayerReady,\n        'onStateChange': onPlayerStateChange\n        }\n    });\n};\n\nconst playVideoFrom = time => {\n\n    if(! typeof player.getPlayerState === 'function' || player.getPlayerState === undefined) return;\n    if(! typeof player.seekTo === 'function' || player.seekTo === undefined) return;\n\n    player.seekTo(time + 1);\n    const state = player.getPlayerState();\n    if(state === states[0].key || state === states[2].key) {\n        player.playVideo();\n    }\n};\n\n// -1  unstarted\n//  0  ended\n//  1  playing\n//  2  paused\n//  3  buffering\n//  5  video cued\n\nconst states = [ { key: -1, value: 'unstarted' }, { key: 1, value: 'playing' }, { key: 2, value: 'paused' }, { key: 3, value: 'buffering' } ];\n\nconst setVideoState = (videoPlayer, lesson) => {\n\n    let state = '';\n\n    const activeLesson = videoPlayer.find(record => record.collectionId === lesson.id);\n    \n    if(activeLesson) {\n        if(lesson.id === activeLesson.collectionId) {\n        state = activeLesson.pausedAt \n                  ? activeLesson.speciesName !== ''\n                    ? `Video paused at ${activeLesson.speciesName}`\n                    : 'Video paused'\n                  : ''; \n        }\n    } else {\n        state = '';\n    }\n\n    return state;\n\n};\n\nconst isVideoPlayerReady = videoId => {\n    if(isPlayerReady) {\n        const doIdsMatch = videoId === player.getVideoData().video_id;\n        return isPlayerReady && doIdsMatch;\n    } else {\n        return false;\n    }\n};\n\nconst destroyPlayer = () => {\n\n    while(onPlayerStateChangeListeners.length > 0) {\n        onPlayerStateChangeListeners.pop();\n    }\n\n    while(onSpeciesTimeMatchListeners.length > 0) {\n        onSpeciesTimeMatchListeners.pop();\n    }\n\n    if (!player) {\n\n      } else {\n        player.stopVideo();\n        player.destroy();\n        player = null;  // Clear out the reference to the destroyed player\n      }\n};\n\nconst updateVideoPlayer = (videoPlayer, collection, species) => {\n\n  const newPlayerTime = Math.floor(player.getCurrentTime());\n        \n  const playerRecords = clone(videoPlayer) || [];\n  \n  let activeLesson = playerRecords.find(p => p.collectionId === collection.id); \n  \n    if(activeLesson) {        \n      if(activeLesson.pausedAt === newPlayerTime) return; // user pauses lesson, and then resumes\n      // user jumps to another point in the lesson\n      activeLesson.speciesName = species ? species.name : activeLesson.speciesName || '';\n      activeLesson.pausedAt = species && species.time ? species.time[0] : newPlayerTime;\n      activeLesson.playAt = newPlayerTime;\n    } else {\n      activeLesson = { \n        collectionId: collection.id,\n        speciesName: '',\n        pausedAt: newPlayerTime,\n        playerRecords: newPlayerTime,\n      };\n      playerRecords.push(activeLesson);\n  } \n\n  actions.boundUpdateVideoPlayer(playerRecords);\n};\n\nconst getPlayerTime = () => {\n    return Math.floor(player.getCurrentTime());\n};\n\nexport const videoHandler = {\n    readyPlayer,\n    onSpeciesTimeMatchListeners,\n    onNoteTimeMatchListeners,\n    onSpeciesTimeMatch,\n    onNoteTimeMatch,\n    onSpeciesPlayRequestListeners,\n    onSpeciesPlayRequest,\n    onPlayerReadyListeners,\n    subscribeToPlayerStateChange,\n    playVideoFrom,\n    states,\n    setVideoState,\n    destroyPlayer,\n    isVideoPlayerReady,\n    getPlayerTime,\n    updateVideoPlayer\n};","export const renderMediaPlayers = collection => {\n\n    let isAudio = true;\n\n    const mediaPlayers = isAudio \n                ? document.querySelectorAll('.media-audio-players')\n                : document.querySelectorAll('.media-video-players');\n};","import { store } from 'redux/store';\nimport { utils } from 'utils/utils';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderTemplate } from 'ui/helpers/templating';\n\nimport stripTemplate from 'ui/screens/multichoice/horizontal-strips.html';\n\nexport const renderHorizontalStrips = collection => {\n\n    const { config, lesson, layout } = store.getState();\n\n    const item = collection.nextItem || collection.items[collection.itemIndex];\n\n    const binomial = layout.provider.name || layout.provider.taxon;\n    const statement = layout.provider.statement;\n    const providerQuestion = layout.provider.question;\n\n    const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial, question: '', help: '', term: '', className: '', headerClassName: '', bonus: undefined, statement, providerQuestion });\n\n    const template = document.createElement('template');\n          template.innerHTML = stripTemplate;\n\n    let answers = utils.shuffleArray([ ...layout.provider.answers, layout.provider.answer ]);\n\n    answers = answers.map((answer, index) => {\n        return {\n            term: answer,\n            index\n        }\n    });\n\n    renderTemplate({ answers }, template.content, parent);\n\n    document.querySelector('.js-test-card-question').classList.add('calendar-block');\n    document.querySelector('.js-test-card-question').classList.remove('standard-block');\n\n    const strips = document.querySelectorAll('.js-rptr-strips .strip');\n    const taxon = { name: item.taxonomy.family, binomial: item.name, question: layout.provider.answer.term };\n\n    const test = { itemId: item.id, items: strips, taxon, binomial: item.name, \n        questionCount: lesson.questionCount, vernacularName: item.vernacularName,\n        layoutCount: lesson.layoutCount, points: layout.points, clue: '', \n        answerIndex: answers.findIndex(a => a.term === layout.provider.answer), answers, \n        questionText: providerQuestion, statement };\n\n    scoreHandler('strip', test, null, config);\n};","import { renderMixedSpecimenImagesAndQuestion } from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined';\n\nexport const renderMixedSpecimenQuestion = (collection, bonusLayout) => {\n\n    snapLog('renderMixedSpecimenQuestion', collection.name);\n\n    renderMixedSpecimenImagesAndQuestion(collection);\n  };\n","import { take, contains } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { firestore } from 'api/firebase/firestore';\nimport { utils } from 'utils/utils';\nimport { traitsHandler } from 'ui/helpers/traits-handler';\n\nconst onTraitsReadyListeners = [];\nconst onTraitsReady = listener => {\n    onTraitsReadyListeners.push(listener);\n};\n\nconst onTraitClickedListeners = [];\nconst onTraitClicked = listener => {\n    onTraitClickedListeners.push(listener);\n};\n\nconst getMatchingTrait = (layoutTraits, traitValues) => {\n\n    try {\n        let requiredTraitValues, trait;\n\n        for (let [key, obj] of Object.entries(traitValues)) {\n            let t;\n            layoutTraits.map(t => { \n                if(t.toLowerCase() === utils.toCamelCase(key).toLowerCase()) {\n                    requiredTraitValues = obj.value.map(v => v.toLowerCase());\n                    trait = t;\n                }\n            }) \n        };\n    \n        return { requiredTraitValues, trait };\n    } catch (e) {\n      logError(getMatchingTrait, e);\n      return { requiredTraitValues: [], trait: {}};\n    }\n\n};\n\nconst fetchTraits = async (trait, requiredTraitValues, required) => {\n\n    const glossary = store.getState().glossary;\n\n    let traits = await firestore.getTraitDefinitions(glossary, required, trait);\n        traits.forEach(t => {\n            t.term = t.term.toLowerCase();\n            if(t.alt) t.alt = t.alt.toLowerCase();\n            return t;\n        });\n\n    if(!requiredTraitValues) return { traits: null, requiredTraits: null};\n\n    let multiples = traitsHandler.getNMultiplesFromArray(traits.map(t => t.term), requiredTraitValues.length);\n\n        multiples = multiples.filter(multiple => {\n            return !traitsHandler.doArraysHaveSameValues(multiple, requiredTraitValues);\n        });\n        \n        let requiredTraits = traits.filter(t => contains(t.term, requiredTraitValues));\n        \n        multiples = utils.shuffleArray([ ...take(5, multiples), requiredTraitValues ]);\n\n        traits = multiples.map(multiple => {\n            return multiple.map(term => traits.find(trait => trait.term === term));\n        });\n\n    onTraitsReadyListeners.forEach(listener => listener(traits, requiredTraits));\n\n    return { traits, requiredTraits };\n};\n\nconst pendingScore = {};\n\nconst callback = (score, scoreUpdateTimer) => {\n    const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n          continueLessonBtn.disabled = false;\n    pendingScore.score = score;\n    pendingScore.scoreUpdateTimer = scoreUpdateTimer;\n    \n    continueLessonBtn.addEventListener('click', () => {\n        window.clearTimeout(pendingScore.scoreUpdateTimer);\n        bindScore(pendingScore.score);        \n    });\n};\n\nconst onClickTileHandler = (tile, requiredTraits, tiles) => {\n\n    const { config, lesson, collection } = store.getState();\n\n    const item = collection.nextItem;\n\n    tile.addEventListener('click', e => {\n        \n        const tile = e.currentTarget;\n        const traits = Array.from(tile.querySelectorAll('img')).map(t => t.dataset.term);\n        const images = Array.from(tiles).map(t => t.querySelector('img').dataset);\n        const answers = images.map(i => { return { value: i.term, url: i.url } })\n        const test = {\n            points: 0,\n            binomial: item.name, \n            trait: true,\n            question: requiredTraits.map(trait => trait.term),\n            answer: traits,\n            questionCount: lesson.questionCount, \n            layoutCount: lesson.layoutCount,\n            answers,\n            questionText: 'Match the trait'\n        }\n        scoreHandler('image-match', test, callback, config);\n\n        tiles.forEach(tile => {\n            if(!traitsHandler.doArraysHaveSameValues(Array.from(tile.querySelectorAll('img')).map(img => img.dataset.term), requiredTraits.map(trait => trait.term))) {\n                tile.querySelectorAll('img').forEach(img => img.classList.add('desaturate'));\n            }\n        });\n})};\n\nexport const mixedTraitHandler = {\n    getMatchingTrait,\n    fetchTraits,\n    onTraitsReady,\n    onTraitClicked,\n    onClickTileHandler\n};","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { renderMultiStrips } from 'ui/screens/multichoice/multi-strips';\n\nimport questionTemplate from 'ui/screens/multichoice/landscape/mixed-trait/right/mixed-trait-question-template.html';\n\nexport const renderMixedTraitQuestion = collection => {\n\n    const init = async () => {\n\n        const { layout, collection, config } = store.getState();\n\n        const template = document.createElement('template');\n              template.innerHTML = questionTemplate;\n        \n        const item = collection.nextItem;\n        const question = 'Match the trait';\n        const help = `Select the correct ${utils.fromCamelCase(layout.trait)}`;\n    \n        const parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help, term: '' });              \n\n        renderMultiStrips(collection, null, { traits: layout.traits, requiredTraits: layout.requiredTraits, item, question, help });\n    };\n\n    init();\n};","import { take, contains, flatten } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\nimport { scoreHandler } from 'ui/helpers//score-handler';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { matchTaxon, iconicTaxa } from 'api/snapdragon/iconic-taxa';\nimport { firestore } from 'api/firebase/firestore';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\n\nimport stripTemplate from 'ui/screens/multichoice/multi-strips-template.html';\nimport stripWithImageTemplate from 'ui/screens/multichoice/multi-strips-with-images.html';\n\nimport audioMediaTemplate from 'ui/screens/common/audio-media-template.html';\n\nexport const renderMultiStrips = (collection, bonus, args) => {\n\n    try {\n\n        const { config, lesson, layout, userAction } = store.getState();\n\n        if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n\n        const item = collection.nextItem || collection.items[collection.itemIndex];\n\n        const taxon = matchTaxon(item.taxonomy, iconicTaxa);                        \n    \n        const screen = bonus ? bonus.screen || layout.screens[1] : layout.screens[1];\n\n        let defaultQueryLimit = 6, defaultLanguage = 'en';\n\n        defaultLanguage = config.language;\n\n        const init = async () => {\n\n            const render = (answer, answers, overrides) => {\n\n                const vernacularName = (overrides && overrides.vernacularName !== undefined) ? overrides.vernacularName : item.vernacularName;\n                const binomial = (overrides && overrides.binomial !== undefined) ? overrides.binomial : item.name;\n                const question = (overrides && overrides.question) ? overrides.question : 'Match the name';\n                const helpDefault = config.isLandscapeMode ? '(Select the name below.)' : '(Tap on the name below.)';\n                const help = (overrides && overrides.help !== undefined) ? overrides.help : helpDefault;\n                const term = (overrides && overrides.term !== undefined) ? overrides.term : '';\n                const className = (overrides && overrides.className !== undefined) ? overrides.className : '';\n                const headerClassName = (overrides && overrides.headerClassName !== undefined) ? overrides.headerClassName : '';\n                const clue = (overrides && overrides.clue !== undefined) ? overrides.clue : null;\n                \n                const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question, help, term, className, headerClassName, bonus });\n\n                const template = document.createElement('template');\n                      template.innerHTML = answer.img ? stripWithImageTemplate : stripTemplate;\n\n                answers.forEach((answer, index) => {\n                    answer.index = index;\n                    answer.name = answer.name || '';\n                    answer.names = answer.names ? answer.names.join(', ') : '';\n                });\n\n                renderTemplate({ answers }, template.content, parent);\n\n                const strips = document.querySelectorAll('.js-rptr-strips .strip');\n\n                if(overrides.italicise) strips.forEach(strip => strip.classList.add('binomial'));\n\n                const taxon = { name: item.taxonomy.family, binomial: item.name, question: answer.term };\n\n                const test = { \n                    itemId: item.id, \n                    items: strips, \n                    taxon, binomial: \n                    item.name, \n                    questionCount: lesson.questionCount, \n                    layoutCount: lesson.layoutCount, \n                    points: layout.points, \n                    clue, \n                    answerIndex: answers.findIndex(a => a.term === answer.term),\n                    questionText: question\n                };\n                        \n                scoreHandler('strip', test, null, config);\n            }\n\n            if(screen.name === 'species-scientifics') {\n\n                const renderBinomialQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.name };\n                        answers = await getPoolItems(collection, 6);\n                        answers = take(8, answers).filter(s => s.name.toLowerCase() !== item.name.toLowerCase()).map(s => s.name);\n                        answers = take(5, answers);\n                        answers.push(item.name);\n                        answers = answers.map(a => { return { term: a } });\n                        answers = utils.shuffleArray(answers);\n                        \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    }\n\n                    await buildQuestion();\n\n                    render( answer, answers, { binomial: 'Latin name', question: 'What\\'s the latin name?', help, italicise: true });\n                };\n\n                renderBinomialQuestions();\n            }\n\n            if(screen.name === 'species-vernaculars') {\n\n                const renderVernacularQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.vernacularName };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => itemProperties.getVernacularName(a, config, false, 'vernacularName', defaultLanguage));\n                        answers = take(5, answers.filter(a => a !== item.vernacularName));\n                        answers = utils.shuffleArray([item.vernacularName, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: 'Common name', question: `What's the common name?`, help });\n                };\n\n                renderVernacularQuestions();\n            }\n\n            if(screen.name === 'species-identification') {\n\n                const renderIdQuestions = async () => {\n\n                    let answer, answers, help;\n\n                    const buildQuestion = async () => {\n\n                        answer = { term: item.quickId };   \n                        answers = await getPoolItems(collection, 6);\n                        answers = answers.map(a => a.quickId);\n                        answers = take(5, answers.filter(a => a !== item.quickId));\n                        answers = utils.shuffleArray([item.quickId, ...answers]);\n                        answers = answers.map(a => { return { term: a } });\n                \n                        help = config.isLandscapeMode ? '(Select the answer)' : '(Tap on the answer)';\n                    };\n\n                    await buildQuestion();\n\n                    render(answer, answers, { vernacularName: item.vernacularName, question: 'Which description fits?', help });\n                };\n\n                renderIdQuestions();\n            }\n\n            if(screen.name === 'family-strips') {\n\n                const random = utils.getRandomInt(2);\n\n                const type = random === 0 ? 'identification' : 'summary';\n\n                const number = config.isPortraitMode ? 4 : 4;\n\n                const families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                const term = item.family[type] || item.family.descriptions[0][type];\n                const answer = { term, name: item.family.name } || { type: { term: `Missing ${type}`}, name: item.family.name };\n                const alternativeFamilies = take(number-1, take(number, utils.shuffleArray(families))).filter(f => f.name.toLowerCase() !== item.taxonomy.family.toLowerCase());\n                let alternatives = alternativeFamilies.filter(f => f[type] && f[type] !== undefined && f[type] !== '').map(f => { return { type: f[type], name: f.name, names: f.names } });\n                    alternatives = alternatives.map(a => { return { term: a.type, name: a.name, names: a.names } });\n                let answers = utils.shuffleArray([answer, ...alternatives]);                    \n                \n                const help = config.isLandscapeMode ? '(Select the description below.)' : '(Tap on the description.)';\n\n                render(answer, answers, { question: 'Match species family', help, clue: item.taxonomy.family });\n            }\n\n            if(screen.name === 'epithet') {\n                \n                const epithet = layout.epithet.latin.join(', ');\n                const number = config.isPortraitMode ? 6 : 6;\n                \n                const epithets = await firestore.getEpithets();\n\n                let alternatives = take(number-1, utils.shuffleArray(epithets)).filter(e => !contains(e.latin, epithet));\n                    alternatives = alternatives.map(e => e.en.join(', '));\n                    alternatives = alternatives.map(a => { return { term: a } });\n                let answer = epithets.find(e => e.latin.join(', ').toUpperCase() === epithet.toUpperCase());\n                    answer = answer ? answer[config.language][0] : epithet;\n                    answer = { term: answer };\n                \n                const answers = utils.shuffleArray([answer, ...alternatives]);\n                \n                if(config.isLandscapeMode) {            \n                    render(answer, answers, { question: layout.epithet.latin.join(', '), help: '(Match the latin term)' });\n                } else {\n                    render(answer, answers, { question: 'Match latin word', help: '', vernacularName: '', binomial: '', term: layout.epithet.latin.join(', ') });\n                }\n            }\n\n            if(screen.name === 'definition') {\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n            }\n\n            if(screen.name === 'family') {\n\n                const indices = config.isPortraitMode ? [5,6] : [5,6];\n\n                let families = await firestore.getFamiliesByIconicTaxon(taxon.rank, taxon.value, item.lichen, config);\n                let family = item.taxonomy.family;\n                let otherFamilies = take(indices[0], take(indices[1], utils.shuffleArray(families)).filter(family => family.name.toLowerCase() !== item.taxonomy.family.toLowerCase()));\n                let otherFamiliesLatinNames = otherFamilies.map(family => family.name);\n                let otherFamiliesCommonNames = otherFamilies.map(of => of.names[0]);\n                \n                let answer, answers;\n\n                const random = utils.getRandomInt(2);\n\n                switch(random) {            \n                    case 0:\n                        answer = { term: item.family.vernacularName };\n                        otherFamiliesCommonNames = otherFamiliesCommonNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesCommonNames]);\n                        if(answer === undefined) console.log('Missing question - case 0 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name' });\n                    break;\n                    case 1:\n                        answer = { term: family };\n                        otherFamiliesLatinNames = otherFamiliesLatinNames.map(a => { return { term: a } });\n                        answers = utils.shuffleArray([answer, ...otherFamiliesLatinNames]);\n                        if(answer === undefined) console.log('Missing question - case 1 - in multi-strips for: ', item.name);\n                        render(answer, answers, { question: 'Match family name', italicise: true });\n                    break;\n                } \n            }\n\n            if(screen.name === 'trait-property') {\n\n                render({ term: bonus.question }, bonus.answers.map(a => { return { term: a } }), bonus.overrides);\n\n                if(bonus.overrides.trait && bonus.overrides.trait.name === 'song') {\n\n                        const renderBirdsong = async () => {\n\n                            const parent = document.querySelector('.js-question-help');\n                                  parent.innerHTML = '';\n\n                            const template = document.createElement('template');\n                                  template.innerHTML = audioMediaTemplate;\n\n                            const xcID = bonus.overrides.trait.value[0];\n\n                            const mp3 = await firestore.getBirdsong(xcID);\n                            \n                            renderTemplate({ mp3, title: item.name }, template.content, parent);\n\n                            const header = document.querySelector('.js-test-card-question');\n                                  header.classList.remove('standard-block');\n                                  header.classList.add('double-standard-block');\n\n                            const content = document.querySelector('.js-test-card-content');\n                                  content.classList.add('test-card-content-less-standard-block');\n                        };\n\n                        renderBirdsong();\n                }\n            }\n\n            if(layout.name === 'mixed-trait-images') {\n\n                // portrait only - redirect from renderMixedTraitImages\n\n                const { traits, requiredTraits, item, question, help } = args;\n\n                const answers = flatten(traits);\n                const answer = requiredTraits[0];\n\n                render(answer, answers, { binomial: item.name, question, help, italicise: true});\n\n            }\n        }\n\n        init();\n\n    } catch(e) {\n        console.error('Crashed out somwhere on multi-strips with this error: ', e);        \n    }\n};","import { take, clone } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { imageUseCases, prepImagesForCarousel, scaleImage } from 'ui/helpers/image-handler';\nimport { getPoolItems } from 'snapdragon-engine/pool-handler';\n\nimport mixedSpecimenTemplate from 'ui/screens/multichoice/portrait/mixed-specimen/mixed-specimen-combined-template.html';\n\nexport const renderMixedSpecimenImagesAndQuestion = collection => {\n\n    const { config, lesson, layout, score } = store.getState();\n\n    const item = clone(collection.nextItem);\n\n    if(!item) return;\n\n    const init = async () => {\n\n        // snapLog('renderMixedSpecimenImagesAndQuestion runs twice, once from renderMixedSpecimenQuestion, both triggered by same collection change');\n\n        const getPortraitImages = images => {\n            const multiImages = utils.flatten(images.map(image => { \n                const images = image.srcs.filter(i => i.starred).length === 0 ? take(1, utils.shuffleArray(image.srcs)) : image.srcs.filter(i => i.starred);\n                const item = { name: image.itemName, images };\n                return prepImagesForCarousel(item, config, imageUseCases.MIXED_SPECIMENS);\n            }));\n            return multiImages;\n        }\n\n        const items = await getPoolItems(collection);\n\n        let images = items.map((item, index) => { \n            return { index: index + 1, srcs: item.images, itemName: item.name };\n        });\n\n        images = getPortraitImages(images);\n\n        let question = 'Identify this species';\n\n        let parent = renderTestCardTemplate(collection, { vernacularName: item.vernacularName, binomial: item.name, question, help: '(Click on the matching photo.)', term: '' });\n            parent.innerHTML = '';\n            \n        const template = document.createElement('template');\n              template.innerHTML = mixedSpecimenTemplate;\n        \n        renderTemplate({}, template.content, parent);\n\n        parent = document.querySelector('.js-test-card-container-images');\n\n        imageSlider({ config, images: utils.shuffleArray(images), parent, identifier: 'mixed-specimens' });\n\n        const continueLessonBtn = document.querySelector('.js-continue-lesson-btn');\n        const boundScore = {};\n\n        const answers = [];\n\n        images.forEach(image => {\n            answers.push({ value: image.itemName, url: scaleImage(image).small });\n        });\n\n        document.querySelectorAll('#imageSlider_mixed-specimens .carousel-item img').forEach(img => {\n            \n            img.addEventListener('click', event => {\n\n                const layer = event.target;\n                const selectedName = layer.dataset.itemName;\n                const question = item.name;\n                const answer = selectedName || 'incorrect';\n                const isCorrect = answer === question;\n                const answerIcon = document.createElement('span');\n                      answerIcon.innerHTML = isCorrect \n                            ? '<span class=\"icon\"><i class=\"fas fa-check-circle\"></i></span>'\n                            : '<span class=\"icon\"><i class=\"fas fa-times-circle\"></i></span>';\n\n                const test = { ...score, itemId: item.id, \n                    question, answer, binomial: item.name, \n                    questionCount: lesson.questionCount, layoutCount: lesson.layoutCount, \n                    points: layout.points,\n                    answers,\n                    questionText: 'Identify this species',\n                    vernacularName: itemProperties.getVernacularName(item, config),\n                };\n\n                const callback = (score, scoreUpdateTimer) => {\n                    boundScore.score = score;\n                    boundScore.scoreUpdateTimer = scoreUpdateTimer;\n                    continueLessonBtn.disabled = false;          \n                    if(!score.success) {\n                        const wrongItem = items.find(item => item.name === score.answer);\n                        const vernacularName = itemProperties.getVernacularName(wrongItem, config);\n                        const name = vernacularName || score.answer;\n                    }\n                };\n\n                scoreHandler('image-match', test, callback, config);  \n            });\n        });\n\n        continueLessonBtn.addEventListener('click', event => {\n\n            if(!score.success) {            \n                setTimeout(() => {\n                    window.clearTimeout(boundScore.scoreUpdateTimer);\n                    bindScore(boundScore.score);\n                });\n            } else {\n                window.clearTimeout(boundScore.scoreUpdateTimer);\n                bindScore(boundScore.score);\n            }\n\n        });\n    };\n\n    try {\n      init();\n    } catch(e) {\n      logError('renderMixedSpecimenImagesAndQuestion init', e);\n    }\n};\n","import { store } from 'redux/store';\nimport { renderLessons } from 'ui/screens/lists/lesson-list';\n\nexport const renderHistory = history => {\n            \n    const { collection} = store.getState();\n\n    renderLessons();\n}    ","import { contains } from 'ramda';\n\nimport { utils } from 'utils/utils';\n\nexport const getLessonScores = (history, lesson, stateScore, savedScore) => {\n\n      if(!history) return [ stateScore ];\n\n      const historyIsUpToDate = contains(stateScore.binomial, history.scores.map(s => s.binomial));\n\n      let scores = [];\n\n      if(lesson.isNextRound) {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : stateScore.total === 0\n                        ? history.scores\n                        : [...history.scores, stateScore];\n      } else {\n            scores = historyIsUpToDate\n                  ? history.scores\n                  : [...history.scores, stateScore];\n      }\n      \n      return scores;\n};\n\nconst getSummaryRows = (rows) => {\n      rows = rows.map((r, i) => {\n            const _r = {\n                  ...r, id: `${utils.toCamelCase(r.binomial)}_${i}`, question: r.question.term ? r.question.term : r.question, \n                        answers: r.answers.map(a => { return getAnswer(a, r); })\n            };\n            return _r;\n      });\n      return rows;\n};\n\nexport const scoreSummaryHandler = {\n    getLessonScores,\n    getSummaryRows\n}\n\nfunction getAnswer(a, r) {\n      \n      const isObj = typeof a === 'object';\n\n      const value = isObj ? a.value || a.term : a;\n      const hasImage = isObj && !!a.url;\n      const url = isObj ? a.url : '';\n      const question = r.question.term || r.question;\n      const isTrue = \n                  value !== \"\" && \n                          (utils.parseToLowerCase(value) === utils.parseToLowerCase(question))\n                        // || contains(value, r.answer))\n\n      const isWrongAnswer = !isTrue && utils.parseToLowerCase(value) === utils.parseToLowerCase(r.answer);\n      const name = isObj ? a.name || '' : '';\n      \n      const answer = {\n            value,\n            url,\n            hasImage,\n            isTrue,\n            isWrongAnswer,\n            name\n      };\n      return answer;\n}\n","import { enums } from 'ui/helpers/enum-helper';\nimport { itemProperties } from 'ui/helpers/data-checking';\nimport { store } from 'redux/store';\nimport { DOM } from 'ui/dom';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { lessonStateHelper } from 'ui/screens/lists/lesson-state-helper';\nimport { scoreSummaryHandler } from 'ui/screens/progress/score-summary-handler';\n\nimport summaryTemplate from 'ui/screens/progress/score-summary-template.html';\nimport summaryRowTemplate from 'ui/screens/progress/score-summary-row-template.html';\nimport summaryNoRowTemplate from 'ui/screens/progress/score-summary-no-row-template.html';\n\nexport const renderScoreSummary = (lessonId, summaryContainer) => {\n\n      const init = () => {\n\n            const { lessons, score: stateScore, userAction } = store.getState();\n\n            const { collection, history, config, score: savedScore } = lessons.length > 0\n                        ? !!lessons.find(l => l.collection.id === parseInt(lessonId))\n                              ? lessons.find(l => l.collection.id === parseInt(lessonId))\n                              : store.getState()\n                        : store.getState();\n      \n            const { lesson } = store.getState();\n      \n            if(lessonStateHelper.overrideLesson(userAction, config)) { return; }\n      \n            const template = document.createElement('template');\n                  template.innerHTML = summaryTemplate;\n      \n            const parent = config.isLandscapeMode\n                        ? summaryContainer || document.querySelector('#lessonModal .js-modal-text')\n                        : DOM.rightBody ;\n                  parent.innerHTML = '';\n            \n            renderTemplate({ collection, lesson }, template.content, parent);\n\n            const actionLinks = document.querySelectorAll('.js-continue-link');\n\n            setTimeout(() => {\n              actionLinks[0].focus();\n            }, 250);\n\n            if(summaryContainer) {\n                  actionLinks.forEach(link => link.classList.add('snap-inactive'));\n            }\n\n            if(lesson.layoutName === 'summary') {\n                  const progressLink = document.querySelector('.js-review-progress');\n                        progressLink.innerHTML = '';\n            }\n            \n            let scores = scoreSummaryHandler.getLessonScores(history, lesson, stateScore, savedScore).reverse();\n                scores.forEach(s => renderScoreSummaryRow(scores, s, config));\n      \n            const handleContinueLesson = async e => {\n                e.preventDefault();\n                import('ui/screens/lists/lesson-state-handler').then(module => {\n                  module.lessonStateHandler.changeRequest({\n                    requestType: enums.lessonState.NEXT_ROUND,\n                    requestArgs: {\n                      id: lessonId,\n                      lesson: { ...lesson, isNextRound: true }\n                    }\n                  });\n                });\n            };\n      \n            const handleNewLesson = async event => {                   \n                  await lessonStateHelper.purgeLesson();\n            };\n      \n            if(lesson.isLessonComplete) {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.innerHTML = 'START NEW LESSON';\n                        actionLink.addEventListener('click', handleNewLesson, { once: true });\n                  });\n            } else {\n                  actionLinks.forEach(actionLink => {\n                        actionLink.addEventListener('click', handleContinueLesson, { once: true });\n                  });\n            }\n\n            window.addEventListener('keydown', e => {\n              if(e.key === 'Enter') {\n                handleContinueLesson(e);\n              }                  \n            }, { once: true });\n      };\n\n      init();\n}\n\nconst renderScoreSummaryRow = (scores, s, config) => {\n    \n      const template = document.createElement('template');\n            template.innerHTML = summaryRowTemplate;\n\n      const parent = document.querySelector('.js-score-summary-rows');\n            \n      if(s.total === 0) {\n            parent.innerHTML = '';\n            template.innerHTML = summaryNoRowTemplate;            \n            renderTemplate({ }, template.content, parent);\n            return;\n      }\n      let rows = [ ...s.passes, ...s.fails ];\n          rows = scoreSummaryHandler.getSummaryRows(rows);          \n\n      const vernacularName = s.vernacularName || itemProperties.getVernacularName(s.binomial, config);\n\n      renderTemplate({ vernacularName, binomial: s.binomial, rows, score: `${s.correct}/${s.total}` }, template.content, parent);\n\n      if(scores.length > 0) {\n            const noQuestionsText = parent.querySelector('.js-no-questions');                  \n            if(noQuestionsText) {\n                  noQuestionsText.innerHTML = '';\n            }\n      }\n};","import { subscription } from 'redux/subscriptions';\nimport { store } from 'redux/store';\nimport { renderScoreSummary } from 'ui/screens/progress/score-summary';\n\nexport const renderSummary = history => {\n\n    subscription.remove(subscription.getByName('renderSummary'));\n\n    const { collection } = store.getState();\n\n    renderScoreSummary(collection.id);\n\n    return;\n};\n\n","import { store } from 'redux/store';\nimport { renderInput } from 'ui/screens/text-entry/text-entry';\n\nexport const renderTextEntry = (collection) => {\n\n    const { layout } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-entry')[0];\n    const item = collection.nextItem;\n    \n    if(!screen) return;\n\n    item.vernacular = item.vernacularName;\n\n    const q = screen.taxon === 'name' ? item.name : \n                    screen.taxon === 'vernacular' \n                        ? item.vernacularName\n                        : item.taxonomy[screen.taxon];\n\n    const question = { binomial: item.name, species: item.taxonomy.species, genus: item.taxonomy.genus, taxon: screen.taxon, question: q, common: item.vernacularName };\n\n    renderInput(screen, question);\n};","import { take } from 'ramda';\n\nimport { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, continueLessonHandler } from 'ui/helpers//score-handler';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport completeTemplate from 'ui/screens/text-entry/text-complete-template.html';\n\nexport const renderCompleteText = (collection) => {\n\n    const item = collection.nextItem;\n\n    const { layout, config, lessonPlan } = store.getState();\n\n    const screen = layout.screens.filter(el => el.name === 'text-complete')[0];\n    \n    if(!screen) return;\n\n    let question, genus, species, givenTaxon, vernacularName, binomial, questionTxt;\n\n    vernacularName = item.vernacularName;\n    binomial = item.name;\n    questionTxt = 'Complete the latin name';\n\n    switch(screen.type) {\n        case 'text-complete-genus':\n            question = item.taxonomy.genus;\n            genus = '---';\n            species = item.taxonomy.species;\n            binomial = `--- ${item.taxonomy.species}`;\n            givenTaxon = 'genus';\n            questionTxt = 'Select genus name';\n            break;\n        case 'text-complete-species':\n            question = item.taxonomy.species;\n            genus = item.taxonomy.genus;\n            species = '---';\n            binomial = `${item.taxonomy.genus} ---`;\n            givenTaxon = 'species';\n            questionTxt = 'Select species name';\n            break;\n    }\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help: '(Select the name below.)', term: '' });\n\n    const template = document.createElement('template');\n\n    template.innerHTML = completeTemplate;\n\n    const numerOfItems = config.isPortraitMode ? 4 : 5;\n\n    // broaden pool to species matching iconic taxon\n    const itemTaxons = collection.items.map(item => {\n        switch(givenTaxon) {\n            case 'genus':\n                return item.taxonomy.genus;\n            case 'species':\n                return item.taxonomy.species;\n            default:\n                return item.name;\n        }\n    });\n    const pool = take(numerOfItems, utils.shuffleArray(itemTaxons).filter(utils.onlyUnique).filter(itemTaxon => itemTaxon !== item.taxonomy[givenTaxon])).filter(item => item !== undefined);\n    pool.push(item.taxonomy[givenTaxon]);\n\n    let answers = utils.shuffleArray(pool);\n\n    answers = answers.map((answer, index) => {\n      return {\n        index,\n        value: answer\n      }\n    });\n\n    renderTemplate({ genus, species, answers }, template.content, parent);\n\n    setTimeout(() => {\n      const block = document.querySelectorAll('.pool .block')[0];\n            block.focus(); \n    },1000);\n\n    const score = { itemId: item.id, binomial: item.name, question: item.taxonomy[givenTaxon], callbackTime: config.callbackTime, layoutCount: lessonPlan.layouts.length, points: layout.points };\n\n    const callback = (score, scoreUpdateTimer, config) => {\n\n        const iconColour  = score.success ? 'answer-box-success' : 'answer-box-alert';\n\n        const answerIcon = score.success\n            ? `<span class=\"icon\"><i class=\"fas fa-check\"></i></span>`\n            : `<span class=\"icon\"><i class=\"fas fa-times\"></i></span>`;\n\n        const response = score.success ? `Correct` : `Incorrect`;\n        \n        document.querySelector('.js-txt-question').innerHTML = `<div class=\"${iconColour}\"><span>${answerIcon}</span><span>${ response }</span</div>`;        \n\n        document.querySelectorAll('.block span').forEach(block => {\n            if(block.innerText === score.answer) {\n                score.success\n                    ? block.parentElement.classList.add('snap-success')\n                    : block.parentElement.classList.add('snap-alert');\n            }\n            if(block.innerText === score.question) {\n                block.parentElement.classList.add('snap-success');\n            }\n        });\n\n        continueLessonHandler(document.querySelector('.js-continue-lesson-btn'), score, scoreUpdateTimer);\n    };\n\n    document.querySelectorAll('.js-pool button').forEach(answer => {\n        answer.addEventListener('click', e => {\n          e.preventDefault();\n          const button = e.target;\n          const answer = button.innerText;\n          if(question === item.taxonomy.species) {\n              document.querySelector('.species').innerText = answer;                \n          } else {\n              document.querySelector('.genus').innerText = answer;\n          }\n          score.answer = answer;\n          score.answers = answers;\n          score.questionText = questionTxt;\n          scoreHandler('block', score, callback, config);\n        });\n    });    \n};\n","import { utils } from 'utils/utils';\nimport { store } from 'redux/store';\nimport { renderTemplate } from 'ui/helpers/templating';\nimport { scoreHandler, bindScore } from 'ui/helpers//score-handler';\nimport { imageUseCases, prepImagesForCarousel } from 'ui/helpers/image-handler';\nimport { imageSlider } from 'ui/screens/common/image-slider';\nimport { renderTestCardTemplate } from 'ui/screens/cards/test-card';\n\nimport textEntryTemplate from 'ui/screens/text-entry/text-entry-templates.html';\nimport textEntryPortraitTemplate from 'ui/screens/text-entry/text-entry-portrait-templates.html';\n\nexport const renderInput = (screen, question) => {\n\n    const { lessonPlan, collection, config, layout } = store.getState();\n\n    const item = collection.nextItem;\n\n    let vernacularName, binomial, questionTxt;\n\n    questionTxt = 'Complete the latin name';\n\n    switch(question.taxon) {\n        case 'genus': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ${question.species}`;\n            questionTxt = 'Enter the genus name';\n            break;\n        case 'species': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `${question.genus} ---`;\n            questionTxt = 'Enter the species name';\n            break;\n        case 'name': \n            vernacularName = item.vernacularName;\n            binomial = binomial = `--- ---`;\n            questionTxt = 'Enter full latin name';\n            break;\n        case 'vernacular':\n            vernacularName = '--- ---';\n            binomial = item.name;\n            questionTxt = 'Enter the common name';\n            break;\n    }\n\n    const help = config.isLandscapeMode ? '(Complete the name below.)' : '(Scroll to see more images.)';\n\n    const parent = renderTestCardTemplate(collection, { vernacularName, binomial, question: questionTxt, help, term: '' });\n\n    const template = document.createElement('template');\n          template.innerHTML = config.isLandscapeMode ? textEntryTemplate : textEntryPortraitTemplate;\n    \n    renderTemplate({ }, template.content, parent);\n\n    const inputTxt = document.querySelector('.js-txt-input');\n    const helpTxt = document.querySelector('.js-help-txt');\n\n    switch(question.taxon) {\n        case 'genus': \n            inputTxt.setAttribute('placeholder', 'Enter genus name');\n            helpTxt.innerHTML = `--- ${question.species}`;\n            break;\n        case 'species': \n            inputTxt.setAttribute('placeholder', 'Enter species name');\n            helpTxt.innerHTML = `${utils.capitaliseFirst(question.genus)} ---`;\n            break;\n        case 'name': \n            inputTxt.setAttribute('placeholder', 'Enter latin name');\n            helpTxt.innerHTML = `--- ---`;\n            break;\n        case 'vernacular':\n            inputTxt.setAttribute('placeholder', 'Enter common name');\n            helpTxt.innerHTML = `-----`;\n            break;\n    }\n\n    const boundScore = {};\n\n    const answerBtn = document.querySelector('.js-check-answer');\n\n    const callback = (score, scoreUpdateTimer) => {        \n        boundScore.scoreUpdateTimer = scoreUpdateTimer;\n        boundScore.score = score;\n    };\n\n    const scoreEventHandler = e => {\n        e.preventDefault();\n        const input = document.querySelector('.js-txt-input');\n        if(!input) return;\n        const answer = input.value;\n        const score = { \n            itemId: item.id, question, answer, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt, \n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        if(answerBtn) answerBtn.disabled = true;\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n        if(helpTxt) helpTxt.innerHTML = question.taxon === 'vernacular' ? item.vernacularName : item.name;\n    };\n\n    const loseFocusMobileHandler = e => {\n        const input = document.querySelector('.js-txt-input');\n        if(!input || input.value === '') return;\n        const answer = input.value;\n        const score = { \n            itemId: item.id, question, answer: document.querySelector('.js-txt-input').value, target: e.target, \n            layoutCount: lessonPlan.layouts.length, points: layout.points, \n            names: item.vernacularNames, questionText: questionTxt,\n            answers: [question.question, answer]\n        };\n        scoreHandler('text', score, callback, config);\n        document.querySelector('.js-continue-lesson-btn').disabled = false;\n        document.removeEventListener('focusout', loseFocusMobileHandler);\n    };\n\n    if(config.isLandscapeMode) {\n        answerBtn.addEventListener('click', scoreEventHandler, { once: true });\n    } else {        \n        document.addEventListener('focusout', loseFocusMobileHandler);\n    }\n    \n    if(config.isPortraitMode) renderPortrait(item, config);\n    else renderLandscape(item, config, question);\n\n    document.querySelector('.js-continue-lesson-btn').addEventListener('click', e => {\n        window.clearTimeout(boundScore.scoreUpdateTimer);\n        bindScore(boundScore.score);\n    }, { once: true });\n\n    if(config.isPortraitMode) {\n\n        // hide attribution for now - space issue various across devices\n        const attribution = document.querySelector('.js-attribution-layer');\n              attribution.classList.add('hide-important');\n        const indicators = document.querySelector('.js-carousel-indicators');\n              indicators.classList.add('hide-important');\n    }\n};\n\nconst renderPortrait = (item, config) => {\n    \n    const images = prepImagesForCarousel(item, config, imageUseCases.TEXT_ENTRY);\n\n    const parent = document.querySelector('.js-test-card-container-images');\n\n    imageSlider({ config, images, parent });\n};\n\nconst renderLandscape = (item, config, question) => {\n    \n    let answer = question[question.taxon];\n    \n    let pool;\n\n    switch(question.taxon) {\n        case 'vernacular':\n            pool = item.vernacularName.toLowerCase();\n            answer = question.common;\n            break;\n        case 'genus':\n            pool = item.taxonomy.genus.toLowerCase();\n            break;\n        case 'species':\n            pool = item.taxonomy.species.toLowerCase();\n            break;\n        case 'binomial':\n        case 'name':\n            pool = item.name.toLowerCase();\n            answer = question.binomial;\n            break;\n    }\n\n    let letterBlocks = '';\n\n    utils.shuffleArray(Array.from(pool)).forEach( (letter, index) => {\n        if(letter === ' ') letter = '&nbsp;';\n        letterBlocks += `<span id=\"${index}\" class=\"block\">${letter}</span>`\n    });\n\n    document.querySelector('.js-pool-letters').innerHTML = letterBlocks;\n\n    const input = document.querySelector('.js-txt-input');\n\n    const letters = [];\n\n    const deleteLetter = letter => {\n        let value = document.querySelector('.js-txt-input').value;\n        let activeBlocks = Array.from(document.querySelectorAll('.block.active'));\n        let activeLetters = Array.from(value);\n        let activeBlock = activeBlocks.find(block => block.innerText.trim() === activeLetters[activeLetters.length-1].trim());\n        let lastLetter = letter || activeBlock;\n        if(value.length > 0){\n            let indexInInput = value.lastIndexOf(lastLetter.innerHTML);            \n            let newValue = '';\n            let letters = Array.from(value);\n            letters.splice(indexInInput,1);\n            letters.forEach(letter => newValue += letter);            \n            input.value = newValue;\n        }\n        let correctBlocks = Array.from(document.querySelectorAll('.correct'));\n            correctBlocks.forEach(b => b.classList.remove('correct'));\n            correctBlocks.forEach(b => b.classList.add('active'));\n        if(lastLetter) {\n          lastLetter.classList.remove('active');\n          letters.forEach(l => {            \n              if(l.id === lastLetter.id) {\n                  const letterIndex = letters.indexOf(l);\n                  if(letterIndex > -1)\n                      letters.splice(letterIndex,1);\n              }\n          });        \n        }\n    };\n\n    const blocks = document.querySelectorAll('.block');\n\n    blocks.forEach(block => {\n        block.addEventListener('click', e => {\n          e.preventDefault();\n          const letter = e.target;\n          if(letter.classList.contains('active')) {\n              deleteLetter(letter);\n          } else {\n              letter.classList.add('active');\n              letters.push(letter);\n              if(letter.innerHTML === '&nbsp;')\n                  input.value += ' ';\n              else\n                  input.value += letter.innerHTML;\n          }\n          if(input.value === answer.toLowerCase()) {\n              blocks.forEach(block => block.classList.add('correct'));\n          }\n        });\n    });\n\n    document.querySelector('.js-delete-letter').addEventListener('click', e => {\n      e.preventDefault();\n      deleteLetter();\n    });\n\n    const keyboardBtn = document.querySelector('.js-toggle-keyboard');          \n          keyboardBtn.addEventListener('click', e =>{\n            e.preventDefault();\n            const disabled = input.hasAttribute('disabled');\n            if(disabled) {\n                keyboardBtn.innerHTML = 'Enable letters';\n                input.removeAttribute('disabled');\n                input.focus();\n            } else {\n                keyboardBtn.innerHTML = 'Enable keyboard'\n                input.setAttribute('disabled', 'disabled');\n            }\n          });\n\n    setTimeout(() => {\n      keyboardBtn.focus();\n    }, 500);\n\n    const blockArray = [ ...blocks ];    \n    const entries = [];\n    let selectedBlock;\n\n    input.addEventListener('input', e => {\n        e.preventDefault();\n        if(!e.data) return;\n        let entry = e.data.toLowerCase();\n        entry = entry === ' ' ? '&nbsp;' : entry;\n        entries.push(entry);\n        selectedBlock = blockArray.find(block => block.innerHTML === entry);\n        if(selectedBlock) selectedBlock.classList.add('active');\n        if(input.value === answer.toLowerCase()) {\n            blockArray.forEach(block => block.classList.add('correct'));\n        }\n    });\n\n    input.addEventListener('keyup', e => {\n        e.preventDefault();\n        if(e.keyCode === 8) { // Backspace\n          const entry = entries.pop();\n          selectedBlock = blockArray.find(block => block.innerHTML === entry);\n          if(selectedBlock) selectedBlock.classList.remove('active');\n        }            \n    });\n};\n","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextItem = layout => {\n\n    const { counter, lessonPlan, config, lesson, collection, userAction } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection, userAction };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_ITEM, args)) {\n        setupHandler.actionUpdate(enums.nextStep.NEXT_ITEM, { layout });\n    }\n};","import { store } from 'redux/store';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\nexport const nextLayout = counter => {\n\n  const init = () => {\n\n    const { layout, lessonPlan, config, lesson, collection, userAction } = store.getState();\n\n    const args = { layout, counter, lessonPlan, config, lesson, collection, userAction };\n\n    const isRequired = setupHandler.isRequired(enums.nextStep.NEXT_LAYOUT, args);\n    \n    if(isRequired) {\n      if(collection.nextItem) {\n        const nextLayout = { ...lessonPlan.layouts[counter.index], speciesName: collection.nextItem ? collection.nextItem.name : collection.items[0].name };\n        setupHandler.actionUpdate(enums.nextStep.NEXT_LAYOUT, { layout: nextLayout, config });\n      }\n    }\n  };\n\n  init();\n};","import { clone } from 'ramda';\n\nimport { store } from 'redux/store';\nimport { lessonPlanner } from 'snapdragon-engine/lesson-planner';\nimport { lessonPlans } from 'snapdragon-config/lesson-plans';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { setupHandler } from 'ui/setup/setup-handler';\n\n\nexport const nextLesson = counter => {\n\n    const { layout, config, lesson, collection, userAction } = store.getState();\n\n    const args = { layout, counter, config, lesson, collection, userAction };\n\n    if(setupHandler.isRequired(enums.nextStep.NEXT_LESSON, args)) {\n\n        const planId = config.isPortraitMode ? collection.lessonPlanPortrait : collection.lessonPlanLandscape;    \n        const lessonPlan = clone(lessonPlans.find(plan => plan.id === planId && plan.portrait === config.isPortraitMode));\n\n        args.lessonPlan = lessonPlan;\n\n        if(setupHandler.isRequired(enums.nextStep.NEXT_ROUND, args)) {\n\n            // asyncFunc will return collection, lessonPlan and lesson\n\n            const asyncFunc = lessonPlanner.createLessonPlan(lessonPlan, config, clone(collection), clone(lesson)).then(props => {\n                if(!props) return;\n                return { lessonPlan: props.updatedLessonPlan, collection: props.updatedCollection, lesson: props.updatedLesson };\n            });\n\n            if(asyncFunc === null) return;\n\n            setupHandler.actionUpdate(enums.nextStep.NEXT_LESSON, { config, asyncFunc });\n        }\n    }\n};","import { subscription } from 'redux/subscriptions';\nimport { actions } from 'redux/actions/action-creators';\nimport { enums } from 'ui/helpers/enum-helper';\nimport { funcByName } from 'ui/helpers/function-lookups';\n\nconst isRequired = (step, args) => {\n\n    const { layout, counter, lessonPlan, config, lesson, collection, userAction } = args;\n\n    let required = false;\n\n    if(userAction === undefined || !!userAction && userAction.name === enums.userEvent.START_LESSON_REVIEW.name) {\n\n      // snapLog('userAction', userAction);\n      \n      switch(step) {\n          case enums.nextStep.NEXT_ITEM:\n              required = layout && !layout.bonus;\n              break;\n          case enums.nextStep.NEXT_LAYOUT:\n              if(counter.isLessonPaused) {\n                  required = false;\n              } else {\n                  required = lessonPlan && lessonPlan.layouts;\n                  required = required && lessonPlan.layouts[counter.index] !== null;\n              }\n              break;\n          case enums.nextStep.NEXT_LESSON:            \n              required =      (config.collection.id > 0 && !counter.isLessonPaused) // new lesson\n                          ||  (config.collection.id > 0 && config.collection.id !== collection.id); // new lesson from new collection\n              break;\n          case enums.nextStep.NEXT_ROUND:\n              required = counter.index === 0 && lesson.isNextRound && collection.items && collection.items.length > 0;\n              break;\n      }\n    }\n\n    return required;\n};\n\nconst actionUpdate = (step, args) => {\n\n    const { layout, config, asyncFunc } = args;\n\n    switch(step) {\n        case enums.nextStep.NEXT_ITEM:\n            actions.boundNextItem(layout.itemIndex);\n            break;\n        case enums.nextStep.NEXT_LAYOUT:\n            actions.boundNextLayout(layout);\n            subscription.addSubs(layout, config, funcByName);\n            import('ui/screens/lists/lesson-state-handler').then(module => {\n              module.lessonStateHandler.changeRequest({\n                  requestType: enums.lessonState.SAVE_LESSON_PROGRESS,\n              });\n            });\n            break;\n        case enums.nextStep.NEXT_LESSON:\n\n            // if(config.isPortraitMode) {\n              const awaitPromise = async () => {\n                const response = await asyncFunc;\n                actions.boundNextLesson(response);  \n              };\n  \n              awaitPromise();\n            // } else {\n            //   actions.boundAsyncNextLesson(asyncFunc);\n            // }\n            break;\n    }\n}\n\nexport const setupHandler = {\n    isRequired,\n    actionUpdate\n}","export const renderWikiModal = (item, wikiLink, config) => {\n    if(wikiLink) {\n        wikiLink.addEventListener('click', event => {\n            document.querySelector('.js-external-page-title').innerHTML = `${item.name}`;\n            const entry = document.querySelector('.species-card-wiki-entry').innerText;\n            const style = `\n                <style type='text/css'>\n                body {\n                    font-family: PT Sans', 'Roboto', arial,sans-serif;\n                }\n                a {\n                    text-decoration: none;\n                    border: solid 1px;\n                    border-top: none;\n                    border-left: none;\n                    border-right: none;\n                    color: black;\n                    cursor: pointer;\n                }\n            </style>`;\n            const wiki = `<header>${style}</header><p>${entry}</p><p><a href='https://en.wikipedia.org/wiki/Salvia_officinalis' target='_blank'>Wikipedia page</a></p>`;\n\n            document.querySelector('.js-external-page-body').innerHTML = config.isPortraitMode\n                ? `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"data:text/html,${wiki}\"></iframe>`          \n                : `<iframe class=\"modal-iframe\" title=\"Wikipedia page for the species ${item.name}\" src=\"${wikiLink.querySelector('span').dataset.src}\"></iframe>`;\n                \n            document.querySelector('#wikiModal').focus();\n        });\n    }\n};","import { contains, flatten } from 'ramda';\nimport { utils } from 'utils/utils';\n\nlet root = '';\n\nconst formatUrl = (name, root, encode) => {\n    let binomial = name;\n    if(name.indexOf(' ') > 0) {\n        let ranks = name.split(' ');\n        binomial = ranks[0] + ' ' + ranks[1];\n        if(binomial.indexOf('Speckled wood') > -1) {\n            binomial += ' ' + ranks[2];\n        }\n    }    \n    return root + encode(binomial);\n};\n\nasync function fetchWiki(name, missingMessage) {\n    \n    if(name === undefined) {\n        return missingMessage;  \n    }\n\n    const url = formatUrl(name, root, utils.encodeQuery);\n    const config = { \n        method: 'GET'\n    };\n    \n    try { \n        const response = await fetch(url, config);\n        const data = await response.json();        \n        return flatten(data);        \n    } catch (e) {\n        const errorPromise = new Promise((resolve, reject) => {\n            resolve(missingMessage)\n        });\n        return errorPromise;\n    }    \n};\n\nconst cleanEntry = str => {\n    let cleaned = str;\n    cleaned = cleaned.replace('( or UK: , US: )', '');\n    cleaned = cleaned.replace('(;', '(');\n    cleaned = cleaned.replace('()', '');\n    cleaned = cleaned.replace('( ', '(');\n    cleaned = cleaned.replace('  ', ' ');\n    return cleaned;\n};\n\nconst wikiLink = entry => {\n    const src = cleanEntry(entry).replace('.wikipedia', '.m.wikipedia');\n    return `<span data-toggle=\"modal\" data-target=\"#wikiModal\" data-src=\"${src}\" class=\"underline-link\">Wiki modal</span>`;    \n};\n\nconst formatWiki = (entry) => {\n\n    const exceptions = ['Tarragon', 'Apple'];\n\n    if(contains(entry[0], exceptions)) {\n        return `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    }\n\n    if(!entry) return '';\n    let html = '';\n    if(entry.length === 1) {\n        html += wikiLink(entry[0]);\n    }\n    if(entry[1]) html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[1])}'</li>`;\n    if(entry[2])\n        if(entry[2].indexOf('https')!== -1) html += wikiLink(entry[2]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[2])}'</li>`;\n    if(entry[3]) \n        if(entry[3].indexOf('https')!== -1)\n        html += wikiLink(entry[3]);\n        else html += `<li class=\"species-card-wiki-entry\">'${cleanEntry(entry[3])}'</li>`;\n    return html;\n};\n\nasync function renderWiki(wikiNode, item, language) {\n    const binomial = item.name;\n    const wikiSearchTerm = item.names ? item.names.filter(name => name.language === language).find(name => name.wikiSearchTerm) : null;\n    const searchTerm = wikiSearchTerm ? wikiSearchTerm.vernacularName : (item.searchTerms \n                            ? item.searchTerms.filter(term => term.language === language)[0].searchTerm \n                            : binomial);\n    root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=1&search=`;\n    const exceptions = [ 'Artemisia dracunculus', 'Malus domestica', 'Zingiber officinale'];\n    if(contains(item.name, exceptions)) {\n        root = `https://${language}.m.wikipedia.org/w/api.php?action=opensearch&format=json&origin=*&limit=2&redirects=resolve&search=`;\n    }    \n    wikiNode.innerHTML = \"\";\n\n    const entry = await fetchWiki(searchTerm);\n\n    if(entry && entry[2]) {\n        wikiNode.innerHTML = formatWiki(entry.slice(1));\n    } else {\n        if(!binomial) return '';\n        const genus = binomial.split(' ')[0];\n        const genusEntry = await fetchWiki(genus);\n        if(genusEntry[2] !== '')\n            wikiNode.innerHTML = formatWiki(genusEntry.slice(1));\n        else if (language !== 'en') {\n            renderWiki(wikiNode, binomial, 'en');\n        }\n    }\n}\n\nexport {\n    formatUrl, \n    formatWiki,\n    renderWiki\n};","export const getBirdSong = (item, node, portrait) => {\n\n    if(item.taxonomy.class.toUpperCase() === 'AVES') {\n\n        const endpoint = `https://cors-anywhere.herokuapp.com/http://www.xeno-canto.org/api/2/recordings?query=${item.name} q:A`;\n\n        async function fetchAsync (endpoint) {\n\n            let response = await fetch(endpoint);\n            \n            let data = await response.json();\n            \n            return data;\n        }\n\n        const loadPlayer = id => {\n            const url = `https://www.xeno-canto.org/${id}/embed?simple=1`;\n            portrait ? node.dataset.src = url : node.src = url;\n            if(portrait) {\n                node.classList.remove('bird-song-icon-disabled');\n                node.classList.add('bird-song-icon');\n            } else {\n                node.parentElement.classList.add('bird-song-spacing');\n            }\n        };\n\n        const playerId = item.traits.song.value[0];\n            \n        if(playerId) {\n            loadPlayer(playerId);\n        } else {\n            fetchAsync(endpoint).then(data => {        \n                const recording = data.recordings[0];\n                loadPlayer(recording.id);\n            });\n        }\n    } else {\n        node.style.display = 'none';\n        document.querySelector('.bird-song').style.display = 'none';\n    }\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".quiz .quiz-top {\\n  height: calc( (var(--vh, 1vh)*100 - var(--vhFixtures, 15vh)) * .425); }\\n\\n.quiz .quiz-middle {\\n  height: calc( (var(--vh, 1vh)*100 - var(--vhFixtures, 15vh)) * .4);\\n  background-color: #d5d2c6; }\\n\\n.quiz .quiz-bottom {\\n  height: calc( (var(--vh, 1vh)*100 - var(--vhFixtures, 15vh)) * .175); }\\n\\n.quiz header, .quiz footer {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.quiz .modal-content {\\n  background-color: var(--snap-border-light); }\\n\\n.quiz .modal-footer, .quiz .modal-header {\\n  background-color: var(--snap-landscape); }\\n\\n.quiz .modal-header-container {\\n  padding: 0;\\n  border: none; }\\n\\n.quiz .modal-header {\\n  justify-content: center;\\n  width: 100%; }\\n\\n.quiz .modal-title {\\n  font-size: 1rem;\\n  color: var(--snap-text-dark-medium-dark); }\\n\\n.quiz div.modal-body {\\n  padding: 0; }\\n\\n.quiz header {\\n  width: 100%;\\n  letter-spacing: .2rem; }\\n\\n.quiz main {\\n  background-color: var(--snap-dd-non-taxa-bg-active);\\n  height: calc(var(--vh, 1vh)*100 - var(--vhFixtures, 15vh));\\n  margin: 4px 0 0 0; }\\n\\n.quiz section {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.quiz .image-block-container {\\n  height: inherit;\\n  padding: 1rem 0; }\\n\\n.quiz img {\\n  height: calc( ((var(--vh, 1vh)*100 - var(--vhFixtures, 15vh)) * .4) - 1rem);\\n  box-shadow: 0 2px 8px 0 black;\\n  width: inherit; }\\n\\n.quiz button.snap-begin-btn {\\n  width: fit-content;\\n  width: max-content;\\n  background-color: var(--snap-btn-auxillary);\\n  color: var(--snap-block-light);\\n  letter-spacing: .05rem;\\n  border: 1px solid transparent !important;\\n  padding: .5rem .75rem;\\n  border-radius: .2rem;\\n  font-size: 1.2rem;\\n  cursor: pointer; }\\n\\n.quiz .quiz-decks {\\n  flex-direction: column; }\\n\\n.quiz .image-container, .quiz img {\\n  object-fit: cover; }\\n\\n.quiz ul.disabled {\\n  cursor: initial; }\\n  .quiz ul.disabled li {\\n    opacity: .38;\\n    pointer-events: none; }\\n\\n.quiz .strips {\\n  height: calc( ((var(--vh, 1vh)*100 - var(--vhFixtures, 15vh)) * .4) - 1rem);\\n  grid-template-columns: 1fr 1fr; }\\n\\n.quiz .strip {\\n  font-size: .7rem;\\n  width: calc( (var(--vwGrid) - 2rem) / 2);\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);\\n  background-color: var(--snap-dd-non-taxa-bg-active);\\n  margin: 0.25rem 0.25rem; }\\n\\n.quiz .answers .strip {\\n  height: calc( (((var(--vh, 1vh)*100 - var(--vhFixtures, 15vh)) * .4) - 3rem) /2); }\\n\\n.quiz .snap-icon-btn {\\n  margin: 0;\\n  padding: 0; }\\n  .quiz .snap-icon-btn span:nth-child(1) {\\n    text-transform: capitalize; }\\n  .quiz .snap-icon-btn span:nth-child(2) {\\n    vertical-align: super;\\n    font-size: .7rem; }\\n\\n.quiz .answers button span:first-child {\\n  font-size: .9rem; }\\n\\n.quiz .answers button span:nth-child(2) {\\n  display: block; }\\n\\n.quiz .state-container {\\n  background-color: var(--snap-dd-non-taxa-bg-active);\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr;\\n  width: 100%; }\\n  .quiz .state-container div:nth-child(1) {\\n    font-size: 3rem; }\\n  .quiz .state-container div:nth-child(3) {\\n    font-size: 2rem;\\n    color: var(--snap-border-light); }\\n  .quiz .state-container .quiz-back {\\n    cursor: pointer; }\\n\\n.quiz .score-card .clock {\\n  font-size: 4rem;\\n  color: var(--snap-active);\\n  color: var(--bs-secondary); }\\n\\n.quiz .score {\\n  font-size: 2rem;\\n  color: var(--snap-text-dark);\\n  margin-right: 0.5rem;\\n  font-size: 1.5rem; }\\n\\n.quiz .hide {\\n  position: absolute;\\n  width: 1px;\\n  height: 1px;\\n  padding: 0;\\n  margin: -1px;\\n  overflow: hidden;\\n  clip: rect(0, 0, 0, 0);\\n  white-space: nowrap;\\n  /* added line */\\n  border: 0; }\\n\\n.quiz .quiz-settings {\\n  padding: 0.5rem;\\n  grid-template-rows: 1fr 2fr;\\n  display: grid;\\n  width: 100%; }\\n  .quiz .quiz-settings div {\\n    justify-content: flex-start; }\\n  .quiz .quiz-settings div:first-child > span {\\n    margin-left: 2rem; }\\n  .quiz .quiz-settings h2 {\\n    font-size: 1.4rem; }\\n  .quiz .quiz-settings label {\\n    margin-right: 0.5rem;\\n    line-height: 1rem;\\n    cursor: pointer; }\\n  .quiz .quiz-settings input {\\n    -webkit-appearance: none;\\n    -moz-appearance: none;\\n    appearance: none;\\n    border-radius: 50%;\\n    width: 0.5rem;\\n    height: 1rem;\\n    border: 1rem solid var(--snap-list-header-background);\\n    transition: 0.2s all linear;\\n    margin-right: 0.5rem;\\n    position: relative;\\n    cursor: pointer; }\\n  .quiz .quiz-settings input:checked {\\n    border: 1rem solid var(--snap-collection-active); }\\n  .quiz .quiz-settings input:focus {\\n    outline: none; }\\n  .quiz .quiz-settings .names {\\n    font-size: .7rem;\\n    display: grid;\\n    row-gap: 1rem;\\n    column-gap: 0;\\n    margin: 0rem;\\n    padding: 1rem;\\n    background-color: rgba(229, 227, 220, 0.3);\\n    grid-template-columns: 1fr 1fr; }\\n    .quiz .quiz-settings .names div {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center; }\\n  .quiz .quiz-settings .languages {\\n    grid-template-columns: 1fr 1fr 1fr;\\n    display: grid;\\n    gap: 0;\\n    font-size: .7rem;\\n    padding: 0 0.5rem; }\\n    .quiz .quiz-settings .languages div {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center; }\\n    .quiz .quiz-settings .languages input:checked {\\n      border: 1rem solid var(--snap-collection); }\\n\\n@media (min-width: 600px) {\\n  .quiz {\\n    width: initial; }\\n    .quiz .quiz-bottom {\\n      margin: 0 0.5rem; }\\n    .quiz .image-block-container {\\n      width: 100%;\\n      background-color: var(--snap-collection); }\\n    .quiz .strips-container {\\n      width: 100%; }\\n    .quiz .strips {\\n      grid-template-columns: 1fr 1fr 1fr; }\\n    .quiz .strip {\\n      width: initial;\\n      font-size: .9rem; }\\n    .quiz .answers .strip {\\n      width: calc( (600px - 3rem) / 3); }\\n    .quiz .quiz-settings {\\n      grid-template-columns: 1fr 1fr;\\n      grid-template-rows: none; }\\n      .quiz .quiz-settings .names {\\n        font-size: 1rem;\\n        display: initial;\\n        margin: 1rem;\\n        border: 1px solid var(--snap-dd-non-taxa-bg-active); }\\n        .quiz .quiz-settings .names div {\\n          margin-bottom: .5rem;\\n          justify-content: initial; }\\n      .quiz .quiz-settings .languages div {\\n        justify-content: initial; } }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"a {\\n  color: var(--snap-youtube-green);\\n  text-decoration: none !important; }\\n\\nh1 {\\n  font-size: .9rem; }\\n\\nh2 {\\n  font-size: .8rem; }\\n\\nh3 {\\n  font-size: .7rem; }\\n\\nimg {\\n  max-width: 100%;\\n  display: block; }\\n\\nh1, h2, h3, h4, h5, h6 {\\n  font-weight: unset;\\n  margin: 0 !important; }\\n\\nfieldset {\\n  border: none; }\\n\\nlabel {\\n  margin: 0; }\\n\\nlegend {\\n  margin: 0;\\n  width: initial !important; }\\n\\ncaption {\\n  padding: 0;\\n  height: 0; }\\n\\ndt {\\n  font-weight: 500; }\\n\\nsvg {\\n  pointer-events: none; }\\n\\nfigure {\\n  pointer-events: all; }\\n\\n.flex {\\n  display: flex; }\\n\\n.flexnowrap {\\n  flex-wrap: nowrap; }\\n\\n.relative {\\n  position: relative; }\\n\\n.absolute {\\n  position: absolute; }\\n\\n.standard-block {\\n  height: var(--vhStandardBlock, 10vh); }\\n\\n.double-standard-block {\\n  height: var(--vhDoubleStandardBlock, 20vh); }\\n\\n.half-standard-block {\\n  height: var(--vhHalfStandardBlock, 5vh); }\\n\\n.one-and-half-standard-block {\\n  height: var(--vhOneAndHalfStandardBlock, 15vh); }\\n\\n.centred-block {\\n  display: flex;\\n  align-items: center;\\n  width: -moz-available;\\n  width: -webkit-fill-available; }\\n\\n.bottom-aligned {\\n  display: flex;\\n  align-items: flex-end; }\\n\\n.double-centred-block {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.vertical-centred-block {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center; }\\n\\n.vertical-evenly-spaced-block {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly; }\\n\\n.horizontal-evenly-spaced-block {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-evenly; }\\n\\n.margin-all {\\n  margin: .5rem !important; }\\n\\n.margin-top {\\n  margin-top: .5rem !important; }\\n\\n.margin-right {\\n  margin-right: .5rem !important; }\\n\\n.half-margin-right {\\n  margin-right: .25rem !important; }\\n\\n.double-margin-right {\\n  margin-right: 1rem !important; }\\n\\n.margin-bottom {\\n  margin-bottom: .5rem !important; }\\n\\n.margin-left {\\n  margin-left: .5rem !important; }\\n\\n.half-margin-left {\\n  margin-left: .25rem !important; }\\n\\n.padding {\\n  padding: .5rem; }\\n\\n.half-padding {\\n  padding: .25rem; }\\n\\n.padding-top {\\n  padding-top: .5rem; }\\n\\n.padding-right {\\n  padding-right: .5rem; }\\n\\n.padding-bottom {\\n  padding-bottom: .5rem; }\\n\\n.padding-left {\\n  padding-left: .5rem; }\\n\\n.custom-checkbox input {\\n  margin: 0 0.5rem 0 0; }\\n\\n.show {\\n  display: inline; }\\n\\n.hide {\\n  display: none; }\\n\\n.hide-important {\\n  display: none !important; }\\n\\n.visually-hidden:not(:focus):not(:active) {\\n  position: absolute !important;\\n  height: 1px;\\n  width: 1px;\\n  overflow: hidden;\\n  clip: rect(1px 1px 1px 1px);\\n  /* IE6, IE7 */\\n  clip: rect(1px, 1px, 1px, 1px);\\n  white-space: nowrap;\\n  /* added line */ }\\n\\n.underline-link {\\n  color: var(--snap-link);\\n  cursor: pointer;\\n  display: inline-block;\\n  line-height: 1.8;\\n  border-bottom: 1px solid var(--snap-link); }\\n\\n.underline-link:hover, .underline-link:focus {\\n  color: var(--snap-link-hover); }\\n\\n.underline-link:focus {\\n  outline: 1px solid var(--snap-border-medium); }\\n\\n.full-width {\\n  width: 100%; }\\n\\n.cursor-pointer {\\n  cursor: pointer; }\\n\\n.border-top {\\n  border-bottom: 1px solid var(--snap-border-light); }\\n\\n.border-right {\\n  border-right: 1px solid var(--snap-border-light); }\\n\\n.border-bottom {\\n  border-bottom: 1px solid var(--snap-border-light); }\\n\\n.border-left {\\n  border-left: 1px solid var(--snap-border-light); }\\n\\n.justify-space-between {\\n  justify-content: space-between; }\\n\\n.justify-end {\\n  justify-content: flex-end; }\\n\\n.small-text {\\n  font-size: .8rem !important; }\\n\\n.smaller-text {\\n  font-size: .7rem !important; }\\n\\n.extra-small-text {\\n  font-size: .6rem !important; }\\n\\n.large-text {\\n  font-size: 1.2rem !important; }\\n\\n.extra-large-text {\\n  font-size: 1.5rem !important; }\\n\\n.capitalise {\\n  text-transform: capitalize; }\\n\\n.uppercase {\\n  text-transform: uppercase; }\\n\\n.line-through {\\n  text-decoration: line-through; }\\n\\n.modal-background-relief {\\n  background-color: var(--snap-species-highlight-background); }\\n\\n.modal-background-relief-emphasis {\\n  border: 1px solid var(--snap-success) !important; }\\n\\n.border-light {\\n  border: 1px solid var(--snap-success-light) !important; }\\n\\n.border-medium {\\n  border: 1px solid var(--snap-border-medium); }\\n\\n.vertical-block {\\n  display: flex;\\n  flex-direction: column; }\\n\\n.emphasis {\\n  font-weight: bold;\\n  letter-spacing: .03rem; }\\n\\n.absolute-bottom {\\n  position: absolute;\\n  bottom: .5rem; }\\n\\n.answer-response {\\n  margin: 0 0 0 .25rem; }\\n\\n.col-count-2 {\\n  column-count: 2; }\\n\\n.col-count-3 {\\n  column-count: 3; }\\n\\n.col-count-4 {\\n  column-count: 4; }\\n\\n.col-count-5 {\\n  column-count: 5; }\\n\\n.col-count-6 {\\n  column-count: 6; }\\n\\n.nowrap {\\n  white-space: nowrap; }\\n\\n.snap-inactive {\\n  color: var(--snap-inactive) !important;\\n  pointer-events: none !important; }\\n\\n.black-text {\\n  color: var(--snap-text-black); }\\n\\n/* If set to display inline, would width automatically be determined by the text they contain? each span vs div */\\n.fit-width {\\n  width: intrinsic;\\n  /* Safari/WebKit uses a non-standard name */\\n  width: -moz-max-content;\\n  /* Firefox/Gecko */\\n  width: -webkit-max-content;\\n  /* Chrome */ }\\n\\n.sr-only {\\n  position: absolute;\\n  width: 1px;\\n  height: 1px;\\n  padding: 0;\\n  margin: -1px;\\n  overflow: hidden;\\n  clip: rect(0, 0, 0, 0);\\n  border: 0; }\\n\\n.super {\\n  vertical-align: super;\\n  font-size: .8em; }\\n\\n.list-group-item {\\n  font-size: .8rem;\\n  padding: .25rem .5rem; }\\n\\n.snap-btn {\\n  background-color: var(--snap-list-header-background);\\n  color: var(--snap-text-black);\\n  letter-spacing: .05rem;\\n  border: 1px solid var(--snap-border-light);\\n  padding: .25rem .75rem; }\\n\\n.snap-btn:hover, .snap-btn:focus {\\n  opacity: 1;\\n  border: 1px solid var(--snap-border-lightest);\\n  outline: none; }\\n\\n.snap-btn:focus:not(:focus-visible), .snap-icon-btn:focus:not(:focus-visible) {\\n  border: 1px solid var(--snap-active);\\n  outline: none; }\\n\\n.dropdown .snap-btn:hover, .dropdown .snap-btn:focus {\\n  border: 1px solid var(--snap-border-light); }\\n\\n.snap-icon-btn {\\n  color: var(--snap-text-dark);\\n  background-color: transparent;\\n  border: 1px solid transparent;\\n  margin: 0 .5rem;\\n  padding: 0 1px; }\\n\\n.nav-icons .snap-icon-btn, .nav-icons a {\\n  margin: 0;\\n  padding: 0; }\\n\\n.block.snap-icon-btn:focus, .block.snap-icon-btn:hover {\\n  background-color: var(--snap-btn-hover);\\n  outline: 1px solid var(--snap-border-lightest); }\\n\\n.strip:focus-within {\\n  background-color: var(--snap-btn-hover); }\\n\\n.snap-link-btn, .snap-no-link-btn {\\n  color: var(--snap-text-dark);\\n  background-color: transparent;\\n  border: none;\\n  font-size: .7rem;\\n  width: intrinsic;\\n  /* Safari/WebKit uses a non-standard name */\\n  width: -moz-max-content;\\n  /* Firefox/Gecko */\\n  width: -webkit-max-content;\\n  /* Chrome */ }\\n\\n.snap-link-btn {\\n  color: var(--snap-collection-active); }\\n\\n.snap-no-link-btn {\\n  pointer-events: none; }\\n\\n.snap-action-btn {\\n  background-color: var(--snap-tertiary-background);\\n  color: var(--snap-text-light);\\n  letter-spacing: .05rem;\\n  border: 1px solid var(--snap-non-taxa) !important;\\n  padding: .5rem .75rem; }\\n\\n.snap-action-btn:focus {\\n  outline: 1px solid var(--snap-border-medium);\\n  color: var(--snap-text-black); }\\n\\n.snap-action-btn.snap-success {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-success) !important;\\n  border: 0.05rem solid var(--snap-success); }\\n\\n.snap-action-btn.snap-alert {\\n  color: var(--snap-text-light) !important;\\n  background-color: var(--snap-alert) !important;\\n  border: 0.05rem solid var(--snap-alert); }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#createGuide .modal-dialog {\\n  max-width: 600px;\\n  margin: auto; }\\n\\n.step-action-content {\\n  padding: 0 .5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock,20vh) - var(--vhRunningBlock) - .5rem); }\\n\\n.species-picker-link {\\n  font-size: .8rem !important;\\n  font-style: initial; }\\n\\n.modal-guide-progress > div {\\n  display: flex;\\n  align-items: center;\\n  padding: .5rem;\\n  height: inherit; }\\n\\n.modal-subheader {\\n  font-size: 1.1em; }\\n\\n.modal-guide-progress .steps {\\n  text-transform: uppercase; }\\n\\n.modal-body .modal-guide-progress > div div {\\n  flex: 1;\\n  text-align: center;\\n  padding: .5rem 0; }\\n\\n.modal-body .modal-guide-progress > div > div {\\n  border-right: 0.005rem solid var(--snap-border-lightest); }\\n\\n.modal-body .modal-guide-progress > div > div:last-child {\\n  border-right: none; }\\n\\n.modal-body .modal-guide-progress .active {\\n  color: var(--snap-text-dark);\\n  background-color: var(--snap-active); }\\n\\n.modal-guide-navigation {\\n  display: grid;\\n  grid-template-columns: 4fr auto 4fr;\\n  margin: 0 .5rem;\\n  height: var(--vhRunningBlock, 10vh);\\n  border: 1px solid var(--snap-border-light); }\\n\\n.modal-guide-navigation > button {\\n  display: flex;\\n  align-items: center; }\\n\\n.modal-guide-navigation > button > span, .modal-guide-navigation > button svg {\\n  pointer-events: none; }\\n\\n.custom-lesson-menu-options .snap-icon-btn:hover, .modal-guide-navigation .snap-icon-btn:hover {\\n  color: var(--snap-collection-active); }\\n\\n.right-justify {\\n  justify-content: flex-end; }\\n\\n.arrow-wrapper {\\n  padding: 0 .5rem;\\n  font-size: 1.6rem;\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-end; }\\n\\n.arrow-wrapper-hidden > span {\\n  display: none; }\\n\\n.arrow-wrapper svg {\\n  pointer-events: initial;\\n  cursor: pointer; }\\n\\n.modal-guide-wrapper .modal-body .location .current {\\n  display: flex;\\n  align-items: center;\\n  margin: 1rem 0; }\\n\\n#set-inat-location-btn {\\n  width: 100%; }\\n\\n.species-picker-container {\\n  position: relative; }\\n\\n.species-picker-container > div {\\n  position: absolute;\\n  top: -5rem;\\n  width: 100%;\\n  display: flex; }\\n\\n.chosen-guide-filter {\\n  display: flex;\\n  align-items: center; }\\n\\n.chosen {\\n  position: absolute;\\n  left: .5rem;\\n  right: .5rem;\\n  bottom: calc(var(--vhStandardBlock));\\n  height: var(--vhHalfStandardBlock, 5vh); }\\n\\n.chosen > div span:nth-child(2) > span {\\n  margin: 0 .25rem; }\\n\\n.save-your-changes {\\n  display: flex;\\n  align-items: center;\\n  position: absolute;\\n  bottom: 1.5rem;\\n  width: 100%; }\\n\\n.modal-body .save-your-changes button {\\n  margin: 0 1rem 0 0; }\\n\\n.modal-body .inat-location-location button {\\n  width: 100%;\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.html5-location-place {\\n  width: 100%; }\\n\\n#set-inat-identity-btn {\\n  color: var(--snap-text-light);\\n  background-color: #7f977a;\\n  width: 100%; }\\n\\n.modal-guide-wrapper .modal-body .inat button.js-set-inat-identity-btn {\\n  color: var(--snap-text-light);\\n  background-color: #7f977a; }\\n\\n#inat-place, #input-species, #inat-identity {\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  width: 100%; }\\n\\n#inat-place::placeholder {\\n  display: inline; }\\n\\n.inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n  width: 100%;\\n  margin: 0;\\n  padding: 0; }\\n\\n/* SLIDER */\\n.modal-guide-body .range-slider {\\n  font-size: .9em;\\n  height: var(--vhStandardBlock);\\n  display: flex;\\n  flex-direction: column;\\n  align-items: normal;\\n  justify-content: space-evenly; }\\n\\n.modal-guide-body .range-slider > div:nth-child(2) {\\n  display: flex; }\\n\\n.range-limits {\\n  display: none; }\\n\\n.modal-guide-body .set-range-input {\\n  cursor: pointer;\\n  width: 100%;\\n  margin: 0 .25rem; }\\n\\n.set-range-input:focus {\\n  outline: 1px solid var(--snap-border-medium); }\\n\\n.modal-guide-body .range-slider.disabled .set-range-input {\\n  pointer-events: none; }\\n\\n/* SNAPDRAGON SWITCH */\\n.snap-switch {\\n  display: flex;\\n  align-items: center; }\\n\\n.snap-switch-slider {\\n  cursor: pointer;\\n  background-color: #c5cbcc; }\\n\\n.snap-switch-slider div {\\n  height: 1.6rem;\\n  width: 1.6rem;\\n  border-radius: .2rem;\\n  background-color: var(--snap-collection);\\n  transition-property: all;\\n  transition-duration: .4s;\\n  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);\\n  transition-delay: 0s;\\n  position: absolute; }\\n\\n.inat .snap-switch-slider div {\\n  background-color: var(--snap-inat); }\\n\\n.embedded-switch {\\n  display: grid;\\n  grid-template-columns: auto 3.2rem 1fr;\\n  height: 1.6rem; }\\n\\n.snap-switch-slider.left div {\\n  transform: translateX(0); }\\n\\n.snap-switch .txt-left {\\n  align-self: center;\\n  padding: 0 .5rem 0 0;\\n  font-size: .9em; }\\n\\n.snap-switch .txt-right {\\n  align-self: center;\\n  padding: 0 0 0 .5rem; }\\n\\n.snap-switch-slider.right div {\\n  transform: translateX(1.6rem); }\\n\\n.guides .inat .snap-switch {\\n  flex-direction: column; }\\n\\n/* AUTOCOMPLETE */\\n#inat-place.active, #input-species.active {\\n  border: 0.1rem solid var(--snap-text-medium-dark); }\\n\\n.autocomplete-options-container, .inat-autocomplete-options-container {\\n  z-index: 9999;\\n  color: var(--snap-text-dark-medium-dark);\\n  background-color: #fafafa;\\n  border: 0.05rem solid var(--snap-border-lightest);\\n  text-align: left;\\n  overflow-y: auto;\\n  -webkit-overflow-scrolling: touch;\\n  top: calc( var(--vhRunningBlock, 7.5vh) +  5px + var(--vhStandardBlock, 10vh) + var(--vhRunningBlock, 7.5vh)        + .25rem) !important;\\n  left: .5rem;\\n  right: .5rem; }\\n\\n.autocomplete-options-container.autocomplete {\\n  height: 10rem !important; }\\n\\n.inat-autocomplete-options-container {\\n  top: calc( var(--vhRunningBlock, 7.5vh) +  5px + var(--vhStandardBlock, 10vh) + var(--vhRunningBlock, 7.5vh) + var(--vhStandardBlock, 10vh) + .5rem) !important; }\\n\\n.autocomplete-options-container > div, .inat-autocomplete-options-container > div {\\n  padding: .25rem; }\\n\\n.autocomplete-options-container .selected, .inat-autocomplete-options-container .selected {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.inat-autocomplete-options-container .selected {\\n  background-color: var(--snap-inat); }\\n\\n.autocomplete-options-container .selected {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.autocomplete-options-container > div:hover:not(.group) {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark-hover);\\n  cursor: pointer; }\\n\\n.autocomplete-options-container > div.selected {\\n  color: var(--snap-dd-non-taxa-bg-hover);\\n  background-color: var(--snap-text-medium-dark);\\n  cursor: pointer; }\\n\\n#place span {\\n  margin: 0 .25rem 0 0; }\\n\\n/* CATEGORIES */\\n.iconic-taxa-categories {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh) - var(--vhHalfStandardBlock));\\n  padding: 0 1rem 1rem 1rem; }\\n\\n.iconic-taxa-categories > div > div {\\n  cursor: pointer; }\\n\\n/* Icon categories list, icon container and size */\\n.iconic-taxa-categories > div > div > div:nth-child(1), .iconic-taxa-categories button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer; }\\n\\n.iconic-taxa-categories > div > div > div:nth-child(1) svg {\\n  color: var(--snap-collection); }\\n\\n.iconic-taxa-categories g {\\n  fill: var(--snap-collection); }\\n\\n.iconic-taxa-categories svg {\\n  font-size: 1rem;\\n  color: var(--snap-collection); }\\n\\n.iconic-taxa-selected svg {\\n  color: var(--snap-collection-active) !important; }\\n\\n.iconic-taxa-selected svg g {\\n  fill: var(--snap-collection-active) !important; }\\n\\n.prop-value-block {\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center; }\\n\\n.prop-value-block > span:nth-child(2) {\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  display: inline-block;\\n  width: inherit;\\n  /* font-size: 1.1rem; */ }\\n\\n/* Mushroom icon sizes */\\n.iconic-taxa-categories svg, .iconic-taxa-categories-selected svg {\\n  width: 1rem;\\n  height: 1rem;\\n  font-size: 1rem; }\\n\\n.selected-text svg, .selected-text i, .iconic-taxa-selected svg {\\n  color: var(--snap-collection-active); }\\n\\n.lesson-taxa .iconic-taxa-categories-selected svg g {\\n  fill: var(--snap-text-medium-dark); }\\n\\n.iconic-taxa-categories-selected svg {\\n  vertical-align: -.125em; }\\n\\n.lesson-taxa .iconic-taxa-categories-selected svg {\\n  width: 1rem;\\n  height: 1rem; }\\n\\n/* .home-guide .iconic-taxa-categories-selected svg {\\n    width: 2rem;\\n    height: 2rem;\\n  } */\\n.iconic-taxa-categories-selected svg g {\\n  fill: var(--snap-collection-active); }\\n\\n.svg-icon {\\n  margin: 0.25rem 0 0; }\\n\\n.svg-icon-selected {\\n  fill: var(--snap-success);\\n  color: var(--snap-success); }\\n\\n/* EXAMPLE LESSONS INC. RB LIST */\\n.btn.btn-secondary {\\n  flex-direction: row;\\n  align-items: center; }\\n\\n.lesson-taxa {\\n  overflow-wrap: break-word;\\n  white-space: initial;\\n  font-size: .8em; }\\n\\n.locations .btn.btn-secondary > * {\\n  pointer-events: all; }\\n\\n.non-taxon .btn.btn-secondary input {\\n  pointer-events: none; }\\n\\n.lesson-name {\\n  line-height: initial !important;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  height: 1.5rem;\\n  display: flex;\\n  align-items: center;\\n  font-size: .8rem;\\n  color: var(--snap-text-black); }\\n\\n.lesson-name .underline-link {\\n  text-transform: initial;\\n  font-size: .8rem; }\\n\\n.lesson-name input {\\n  pointer-events: initial; }\\n\\n.lesson-taxa span:nth-child(1) {\\n  margin: 0 .15rem 0 0; }\\n\\n.btn.btn-secondary.active .lesson-taxa .iconic-taxa-categories-selected svg g {\\n  fill: white; }\\n\\n#confirm-lesson-btn {\\n  margin: 1.5rem 0;\\n  width: 9rem;\\n  background-color: var(--snap-text-medium-dark); }\\n\\n.lesson-radio-button {\\n  margin-right: .5rem; }\\n\\n/* PORTRAIT & LANDSCAPE EXAMPLE GUIDE */\\n.btn.btn-secondary {\\n  width: 100%; }\\n\\n.start-lesson-wrapper.disabled {\\n  pointer-events: none; }\\n\\n.modal-guide-progress {\\n  cursor: pointer; }\\n\\n.modal-guide-progress span {\\n  pointer-events: none; }\\n\\n.location-checkbox {\\n  line-height: 3rem; }\\n\\n.guide-bottom-actions {\\n  display: flex;\\n  position: absolute; }\\n\\n.guide-bottom-actions span:nth-child(1) {\\n  font-size: .8rem; }\\n\\n.guide-bottom-actions span:nth-child(2) {\\n  margin-left: .25rem; }\\n\\n.location-option > div {\\n  width: 100%; }\\n\\n.location-option.inat-entry {\\n  position: relative; }\\n\\n.location-option.or-options {\\n  text-align: center;\\n  font-style: italic; }\\n\\n.location-option.range {\\n  border: none; }\\n\\n.location-option button {\\n  width: 100%; }\\n\\n.location-option:nth-child(3) > div:nth-child(2) {\\n  flex: auto;\\n  position: relative; }\\n\\n#googleLogo {\\n  width: auto;\\n  height: 1rem; }\\n\\n.location-actions {\\n  height: 100%; }\\n\\n.location-actions .actions {\\n  display: grid;\\n  grid-template-rows: 1fr 2rem 1fr;\\n  height: 100%; }\\n\\n.species-picker-actions {\\n  height: initial; }\\n\\n.filter-option {\\n  color: black; }\\n\\n.taxa-actions .actions {\\n  grid-template-rows: 1fr; }\\n\\n.filter-actions .actions {\\n  grid-template-rows: auto; }\\n\\n.filter-actions .actions {\\n  justify-content: space-between; }\\n\\n.filter-actions + div {\\n  display: none !important; }\\n\\n.filter-language-option-block {\\n  width: 100%; }\\n\\n.filter-language-option-block span {\\n  text-transform: uppercase;\\n  margin-left: .15rem; }\\n\\n.custom-lesson-menu-options {\\n  display: flex;\\n  flex-direction: column;\\n  pointer-events: initial;\\n  cursor: pointer; }\\n\\n.custom-lesson-menu-options li {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  border: 1px solid var(--snap-border-light); }\\n\\n.custom-lesson-menu-options li span {\\n  padding: .5rem; }\\n\\n.species-actions + div {\\n  display: none !important; }\\n\\n.request-feedback .edit-species {\\n  margin: .5rem;\\n  height: var(--vhHalfStandardBlock, 10vh); }\\n\\n.request-feedback .lesson-list-item {\\n  padding: .5rem;\\n  background-color: var(--snap-lesson-row-green);\\n  pointer-events: all;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly; }\\n\\n.request-feedback .lesson-list-item {\\n  line-height: initial !important; }\\n\\n.request-feedback .lesson-name {\\n  line-height: initial; }\\n\\n.selected-species-container {\\n  position: relative; }\\n\\n.selected-species-container > div.scrollable {\\n  height: 0;\\n  margin: .5rem; }\\n\\n.selected-species-container > div.scrollable.open {\\n  height: calc( (var(--vh, 1vh) * 100)  - var(--vhFixtures, 15vh)  - var(--vhStandardBlock,10vh) - var(--vhOneHalfStandardBlock,20vh) - var(--vhHalfStandardBlock,5vh) - var(--vhRunningBlock) - .5px);\\n  top: .5rem; }\\n\\n.selected-species {\\n  margin: 1rem; }\\n\\n.selected-species-container ul {\\n  columns: 2 200px;\\n  column-gap: 2rem; }\\n\\n#locationForm, #inatForm {\\n  width: 100%; }\\n\\n@media (min-height: 640px) {\\n  .modal-guide-wrapper .modal-body .modal-guide-navigation > div:nth-child(1) > div svg {\\n    font-size: 2rem; } }\\n\\n@media (min-height: 667px) {\\n  .iconic-taxa-categories svg, .iconic-taxa-categories svg {\\n    font-size: 1.6rem;\\n    height: 1.6rem; }\\n  .taxa-actions svg-icon.si-glyph-mushrooms svg {\\n    height: 2rem; } }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"figure {\\n  margin: .5rem 0 0; }\\n\\n.desaturate {\\n  opacity: .6;\\n  filter: grayscale(80%); }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":root {\\n  --snap-lesson-row-blue: rgb(218, 230, 237);\\n  --snap-lesson-row-green: rgb(216, 223, 210);\\n  --snap-dd-non-taxa-bg-intial: rgb(197, 193, 175);\\n  --snap-dd-non-taxa-bg-hover: rgb(229, 227, 220);\\n  --snap-dd-non-taxa-bg-active: rgb(229, 227, 220);\\n  --snap-text-black: rgb(30,30,30);\\n  --snap-text-dark: rgb(60, 60, 60);\\n  --snap-text-dark-medium-dark: rgb(50, 50, 50);\\n  --snap-text-medium-dark: rgb(65, 65, 65);\\n  --snap-text-medium-dark-hover: rgb(108, 114, 120);\\n  --snap-text-medium-light:rgb(73, 80, 87);\\n  --snap-text-light:rgb(245, 245, 245);\\n  --snap-text-green: rgb(16, 66, 28);\\n  --snap-portrait: rgb(179, 197, 174);\\n  --snap-landscape: rgb(185, 200, 204);\\n  --snap-collection: rgb(87, 97, 99);\\n  --snap-collection-active: rgb(95, 125, 89);\\n  --snap-collection-light: rgb(117, 126, 126);\\n  --snap-collection-faint: rgb(240, 242, 235);\\n  --snap-non-taxa: rgb(165, 159, 131);\\n  --snap-active: rgb(246, 157, 53);\\n  --snap-alert: rgb(197, 59, 67);\\n  --snap-alert-medium: rgb(225, 155, 155);\\n  --snap-alert-light: rgb(241, 229, 225);\\n  --snap-inactive: rgba(7, 2, 2, 0.4);\\n  --snap-success: rgb(84, 137, 84);\\n  --snap-success-medium: rgb(169, 196, 163);\\n  --snap-success-light: rgb(216, 225, 208);\\n  --snap-link-hover: rgb(54, 69, 82);\\n  --snap-link: rgb(20, 125, 156);\\n  --snap-progress-bg: rgb(168, 168, 168);\\n  --snap-progress-bar: rgb(255, 255, 255);\\n  --snap-block-light: rgb(245, 245, 245);\\n  --snap-main-background: rgb(244, 244, 244);\\n  --snap-content-background: rgb(255, 255, 243);\\n  --snap-content-background-relief: rgb(251, 251, 247);\\n  --snap-header-background: rgb(213, 213, 210);\\n  --snap-list-header-background: rgb(252, 251, 246);\\n  --snap-row-background: rgb(240, 239, 233);\\n  --snap-taxon-card-background: rgba(52, 105, 23,.1);\\n  --snap-species-highlight-background: rgb(249, 248, 238);\\n  --snap-species-header-background: rgb(226, 222, 180);\\n  --snap-species-header-dark-background: rgb(146, 139, 56);\\n  --snap-btn-auxillary: rgb(96, 117, 90);\\n  --snap-btn-hover: rgb(240, 240, 240);\\n  --snap-btn-dropdown: rgb(252, 193, 186);\\n  --snap-btn-dropdown-options: rgb(254, 240, 229);\\n  --snap-btn-blue: rgb(54, 69, 82);\\n  --snap-snap-action-btn: rgb(245, 245, 245);\\n  --snap-tertiary-background: rgb(95, 125, 89);\\n  --snap-btn-filter-on: rgb(214, 208, 213);\\n  --snap-btn-filter-off: rgb(235, 231, 228);\\n  --snap-border-light: rgb(175,175,175);\\n  --snap-border-medium: rgb(211, 211, 211);\\n  --snap-border-lightest: rgb(225,225,225);\\n  --snap-iconic-icon-header: rgb(193, 186, 112);\\n  --snap-inat: rgb(127, 151, 122);\\n  --snap-youtube-green: rgb(52, 105, 23);\\n  --snap-button-light: #576163;\\n  --snap-button-main: #3c4345;\\n  --snap-button-dark: #788082; }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"/* iPhone 5, ?? */\\n@media (max-width: 320px) and (max-height: 568px) {\\n  .imageSlider .active.carousel-item {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center; } }\\n\\n@media (min-width: 414px) {\\n  .test-card-question .question-question {\\n    font-size: 1.2rem; }\\n  .rights-link, .rights-attribution {\\n    grid-template-columns: 4rem auto 4rem !important; } }\\n\\n/* iPHONE 6,7,8 */\\n@media (max-width: 375px) and (min-height: 667px) {\\n  .autocomplete {\\n    height: 8rem !important; } }\\n\\n/* Galaxy S5 */\\n@media (min-width: 360px) {\\n  .names-container .vernacular-name {\\n    max-width: 13.5rem; } }\\n\\n/* @media (min-width:414px) {\\n    .youtube-icon, .accordion-icon {\\n        font-size: 1.4rem;\\n    }\\n    .species-table .youtube-icon, .accordion-icon {\\n        font-size: 1.2rem;\\n    }\\n} */\\n/* iPHONE 6,7,8 PLUS, iPHONE X, GALAXY S9/S9+ */\\n/* @media  (max-width:414px) and (min-height:736px),\\n        (max-width:375px) and (min-height:812px),\\n        (max-width:360px) and (min-height:740px) {\\n            body {\\n                font-size: 1em;\\n            }\\n} */\\n@media (max-height: 568px) {\\n  .test-card .help-txt {\\n    display: none; } }\\n\\n/* @media (min-height: 667px) {\\n    .quick-fire .quick-fire-branches .btn-secondary, .quick-fire .quick-fire-branches .btn-secondary:not(:disabled):not(.disabled).active {\\n        font-size: .9rem;\\n        padding: .5rem;\\n    }\\n} */\\n@media (min-width: 600px) {\\n  .test-card-question .question-question {\\n    font-size: 1.4rem; }\\n  .modal-subheader {\\n    font-size: 1.2em; }\\n  .table-header th:nth-child(1) {\\n    min-width: 105px; }\\n  .master.table-row td:nth-child(1) {\\n    width: 105px; }\\n  .table-row img {\\n    width: 98px;\\n    height: 69px; }\\n  .list-group-item {\\n    font-size: 1rem;\\n    padding: .5rem 1rem; } }\\n\\n/* NEXUS 6 */\\n@media (width: 412px) and (max-height: 732px) {\\n  .youtube-icon {\\n    font-size: 1.5rem !important; } }\\n\\n/* NEXUS 7 */\\n@media (width: 600px) and (max-height: 960px) {\\n  .block {\\n    font-size: 1.3rem; }\\n  .test-card-question .question-statement, .test-card-question .question-provider-question {\\n    font-size: 1rem; }\\n  body {\\n    font-size: 1.2em; }\\n  .snapdragon-intro > div {\\n    font-size: 1.2rem; }\\n  .youtube-icon {\\n    font-size: 1.8rem !important; }\\n  .lesson-name, .lesson-name .underline-link {\\n    font-size: 1rem; } }\\n\\n@media (max-width: 768px) {\\n  .landscape {\\n    display: none !important; }\\n  .portrait-grid {\\n    display: grid; } }\\n\\n@media (min-height: 640px) {\\n  .modal-title {\\n    line-height: 1.5; } }\\n\\n@media (min-width: 768px) {\\n  h1 {\\n    font-size: 1.6rem; }\\n  h2 {\\n    font-size: 1.3rem; }\\n  h3 {\\n    font-size: 1rem; }\\n  .modal h1 {\\n    font-size: 1.2rem; }\\n  h2 {\\n    font-size: 1rem; }\\n  h3 {\\n    font-size: .8rem; }\\n  .quick-fire-branches span {\\n    font-size: .6rem; }\\n  .autocomplete-options-container {\\n    top: calc( var(--vhRunningBlock, 7.5vh) +  5px + var(--vhStandardBlock, 10vh) + var(--vhStandardBlock, 10vh) + .25rem) !important; }\\n  .species-search .icon {\\n    font-size: 5.5rem;\\n    height: calc(var(--vhStandardBlock, 30vh) * 2); }\\n  .autocomplete-options-container.autocomplete {\\n    height: 15rem !important; }\\n  .squares {\\n    height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh)); }\\n  .imageSlider .carousel-item {\\n    height: var(--vhSmallImageCarousel);\\n    min-height: var(--vhSmallImageCarousel); }\\n  .score-summary-row {\\n    display: flex; }\\n  #imageModal .imageSlider .carousel-item, #imageComparisonModal .imageSlider .carousel-item {\\n    /* height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - 300px ); see below (hack) */\\n    height: calc( (var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh)); }\\n  .image-description {\\n    padding: 1rem 4rem;\\n    /* margin-top: -300px; see above (hack) */\\n    color: black;\\n    /* to compensate for layer above (hack) */ }\\n  /* .imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n        top: 15%;\\n        top: calc(\\n            (var(--vh, 1vh) * 75 * .5) -\\n            (var(--vh, 1vh) * 7.5) -\\n            .5rem\\n            - 100px\\n        );\\n    } */\\n  .modal-image .carousel-inner > div:nth-child(1) {\\n    height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhRunningBlock)); }\\n  .carousel-indicators {\\n    position: absolute;\\n    left: .5rem;\\n    right: .5rem;\\n    padding: .5rem;\\n    text-align: left;\\n    margin-left: 4rem !important;\\n    margin-right: 4rem !important; }\\n  .carousel-indicators li {\\n    margin-bottom: 0; }\\n  .test-card-question .question-statement, .test-card-question .question-provider-question {\\n    font-size: .9rem; }\\n  .species-picker-actions ul {\\n    column-count: 2; }\\n  .guide-header-container > div:nth-child(2) {\\n    flex-direction: row; }\\n  .iconic-taxa-categories svg {\\n    height: 2rem;\\n    font-size: 2rem; }\\n  .iconic-taxa-categories-selected svg {\\n    height: 1rem;\\n    font-size: 1rem; }\\n  .inat.snap-switch .inat-entry {\\n    display: flex;\\n    align-items: center;\\n    margin: 0 0 0 1rem; }\\n  .inat.snap-switch input[type=\\\"text\\\"] {\\n    margin: 0 .5rem 0 0;\\n    color: var(--snap-text-medium-dark);\\n    padding: 0 .1rem; }\\n  .modal-guide-wrapper .location.snap-switch {\\n    width: 100%;\\n    margin-top: 2rem; }\\n  .location-option.place > button {\\n    margin-left: .25rem; }\\n  #inat-place::placeholder {\\n    color: var(--gray);\\n    font-size: 1rem; }\\n  .inat.snap-switch .inat-entry, .inat.snap-switch input[type=\\\"text\\\"] {\\n    width: 12rem;\\n    width: fit-content;\\n    padding: 0 .25rem; }\\n  .range-slider {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between; }\\n  .range-slider > span:nth-child(2) {\\n    width: fit-content;\\n    border: 0.05rem solid var(--snap-border-lightest);\\n    padding: .5rem; }\\n  .range-limits {\\n    display: initial; }\\n  .inat-location-elsewhere {\\n    display: grid;\\n    grid-template-columns: 1fr .25rem 1fr; }\\n  .location-filter-options {\\n    padding: 2rem;\\n    grid-template-columns: 1fr 1fr; }\\n  .traits-names-txt {\\n    display: grid;\\n    grid-template-columns: 1fr 1fr;\\n    padding: 1rem;\\n    border-bottom: 1px solid var(--snap-border-lightest); }\\n  .iconic-icon {\\n    font-size: 2rem; }\\n  .question-container .mushroom-icon-header svg {\\n    width: 1.8rem;\\n    height: 1.8rem;\\n    fill: var(--snap-iconic-icon-header); }\\n  .species-header {\\n    text-align: right; }\\n  .test-card-question .help-txt {\\n    margin: 1rem .5rem;\\n    font-family: serif;\\n    font-weight: bold;\\n    letter-spacing: .05rem; }\\n  div.text-entry {\\n    margin: 1rem 0;\\n    padding: 0.5rem; }\\n  .text-entry input {\\n    width: 75%;\\n    padding: 0.5rem;\\n    border: 0.05rem solid var(--snap-border-light); }\\n  .video {\\n    top: .25rem; }\\n  .table-row {\\n    font-size: .8rem; }\\n  .table-row td:nth-child(3) {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n    justify-content: center; }\\n  .species-list .scrollable {\\n    bottom: 0;\\n    top: 0; }\\n  .main-lesson-grid .footer > ul, .side-lesson-list .footer > ul {\\n    max-width: 50%;\\n    text-transform: none;\\n    justify-content: space-between; }\\n  .snapdragon-intro {\\n    padding: 2rem; }\\n  .snapdragon-intro h4 .fa-youtube, .snapdragon-intro h4 .fa-align-left, .snapdragon-intro h4 .fa-chevron-down {\\n    min-width: 1.75rem;\\n    max-width: 1.75rem; }\\n  .lesson-icon {\\n    width: 80px;\\n    height: 80px;\\n    object-fit: none; }\\n  .lesson-list-carousel-item {\\n    border: 3px solid transparent;\\n    align-items: center;\\n    display: grid;\\n    grid-template-columns: 1fr 3fr 1fr; }\\n  .highlighted-for-review-row {\\n    border: 3px solid var(--snap-border-lightest); }\\n  .lesson-list-carousel-item > div:nth-child(3) {\\n    justify-content: center;\\n    margin: 0; }\\n  .lesson-list-carousel-item > div:nth-child(3) > div {\\n    display: flex; }\\n  body {\\n    max-width: 1200px; }\\n  .side-lesson-list {\\n    width: 458px;\\n    grid-area: left; }\\n  .main-lesson-grid {\\n    width: 742px;\\n    grid-area: right; }\\n  .grid {\\n    grid-template-columns: 1fr 1fr;\\n    grid-template-areas: \\\"right left\\\"; }\\n  .home-container {\\n    display: grid !important; }\\n  .side-lesson-list {\\n    display: grid; }\\n  .pool {\\n    max-width: 70%; }\\n  .bird-song, .taxon-identification, .taxon-summary {\\n    margin: 1rem 4rem 0 4rem; }\\n  .strips {\\n    cursor: pointer;\\n    width: initial;\\n    overflow-y: auto;\\n    padding: .5rem; }\\n  .strip {\\n    min-width: initial;\\n    margin: .75rem .5rem .75rem 0;\\n    padding: .75rem; }\\n  body {\\n    font-size: .9em; }\\n  .home-scrolling-container .scrollable {\\n    position: relative;\\n    top: 0; }\\n  .mixed-content-container {\\n    top: calc( var(--vhStandardBlock, 10vh) + var(--vhCalendar,11vh));\\n    height: calc( var(--vh, 1vh) * 100 - var(--vhRunningBlocks,15vh) - var(--vhDoubleStandardBlock,20vh)  - var(--vhCalendar,11vh)  - 1.5rem); }\\n  .modal-header {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between; }\\n  iframe {\\n    width: 100%;\\n    border: 0; }\\n  #badgeListModal .modal-dialog {\\n    max-width: 30vw;\\n    margin: calc( var(--vhRunningBlock) + var(--vhStandardBlock) + 5px + .5rem) auto auto auto; }\\n  #badgeListModal .modal-body {\\n    height: calc(var(--vhDoubleStandardBlock, 20vh) * 2); }\\n  #wikiModal .modal-dialog {\\n    max-width: 900px;\\n    margin: auto; }\\n  #wikiModal iframe {\\n    height: 100%; }\\n  #imageModal .modal-dialog {\\n    max-width: 600px;\\n    margin: auto; }\\n  #imageModal .modal-title span {\\n    display: flex;\\n    flex-direction: row; }\\n  #imageModal .modal-title span > span:nth-child(1) {\\n    margin: 0 .5rem 0 0; }\\n  #iNatWidgetModal .modal-dialog {\\n    max-width: 45vw; }\\n  #iNatWidgetModal .modal-header {\\n    display: inline; }\\n  .info-details {\\n    padding: 1rem 4rem; }\\n  .info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n    padding: .5rem; }\\n  .non-taxon.card img {\\n    height: 5.5rem;\\n    width: 5.5rem; }\\n  .response-update {\\n    left: 0;\\n    right: 0;\\n    justify-content: flex-end; }\\n  .strip:hover, .strip:focus {\\n    box-shadow: 0 2px 8px transparent;\\n    border: 1px solid var(--snap-border-light); }\\n  .strip:hover button, .strip:focus button, .strip:focus-within button {\\n    color: var(--snap-text-medium-dark); }\\n  .strip {\\n    display: flex;\\n    flex-direction: column; }\\n  .strip > div:nth-child(2) {\\n    margin-top: .5rem; }\\n  .strip-single-line {\\n    padding: 1.5rem; }\\n  .portrait, .portrait-grid {\\n    display: none !important; }\\n  .header > div:nth-child(2) {\\n    max-width: initial;\\n    text-transform: initial; }\\n  .non-taxa {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-end; }\\n  .non-taxa .btn-group {\\n    width: 12rem;\\n    flex-direction: column;\\n    margin: 0 .5rem; }\\n  .non-taxa .btn.btn-secondary {\\n    height: 3rem;\\n    cursor: pointer !important; }\\n  .non-taxon-card-wiki {\\n    margin: 0 .5rem 0 0; }\\n  .modal-header-container {\\n    padding-bottom: 4px;\\n    border-bottom: 1px solid var(--snap-border-light); }\\n  .test-card-container .question-header > div {\\n    font-size: 1rem; }\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) button {\\n    position: initial; } }\\n\\n@media (min-width: 1024px) {\\n  .side-lesson-list {\\n    width: 391px; }\\n  .main-lesson-grid {\\n    width: 633px; }\\n  .squares {\\n    padding-top: 2rem; }\\n  .squares > div {\\n    width: 190px;\\n    height: 150px; }\\n  .table-header th:nth-child(2), .table-row td:nth-child(2) {\\n    flex: 5; }\\n  .table-header th:nth-child(3), .table-row td:nth-child(3) {\\n    flex: 5;\\n    font-size: .8rem;\\n    line-height: 2; }\\n  .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n    flex: 2 !important; }\\n  .table-header th:nth-child(3) span:nth-child(2):after {\\n    margin-left: .355rem; }\\n  .table-header th:nth-child(3):after {\\n    display: none; }\\n  .species-list .table-header th:nth-child(3) span:after {\\n    display: inline-block;\\n    width: 0;\\n    height: 0;\\n    margin-left: .255rem;\\n    vertical-align: middle;\\n    content: \\\"\\\";\\n    border-top: .3rem solid;\\n    border-right: .3rem solid transparent;\\n    border-bottom: 0;\\n    border-left: .3rem solid transparent;\\n    cursor: default; }\\n  .species-list .table-header th:nth-child(4):after, .species-list .table-header th:nth-child(5):after {\\n    display: inline-block;\\n    width: 0;\\n    height: 0;\\n    margin-left: .255rem;\\n    vertical-align: middle;\\n    content: \\\"\\\";\\n    border-top: .3rem solid;\\n    border-right: .3rem solid transparent;\\n    border-bottom: 0;\\n    border-left: .3rem solid transparent;\\n    cursor: default; }\\n  .table-header th:nth-child(3) {\\n    flex-direction: column;\\n    display: flex;\\n    align-items: start; }\\n  .table-header th:nth-child(3) span {\\n    flex: 1;\\n    line-height: initial; }\\n  .table-header th:nth-child(5), .table-row td:nth-child(5),\\n  .table-header th:nth-child(6), .table-row td:nth-child(6) {\\n    flex: 1; }\\n  .narrow-screen {\\n    display: none !important; }\\n  .names-container .vernacular-name {\\n    max-width: none; } }\\n\\n@media (max-width: 1024px) {\\n  .wide-screen {\\n    display: none !important; } }\\n\\n@media (min-width: 1112px) {\\n  .side-lesson-list, .tiles-container {\\n    width: 450px; }\\n  .squares > div {\\n    height: calc( ((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhDoubleStandardBlock,20vh)) / 3);\\n    width: 225px; }\\n  .squares {\\n    padding-top: 1rem; }\\n  .squares > div img {\\n    padding: .5rem; }\\n  .main-lesson-grid {\\n    width: 662px; } }\\n\\n@media (min-width: 1200px) {\\n  .side-lesson-list, .tiles-container {\\n    width: 458px; }\\n  .main-lesson-grid {\\n    width: 742px; }\\n  .squares > div {\\n    width: 229px; } }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"* {\\n  box-sizing: border-box;\\n  margin: 0;\\n  padding: 0; }\\n\\nhtml {\\n  height: var(--vhGrid, 100vh); }\\n\\nbody {\\n  height: var(--vhGrid, 100vh);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-family: 'Open Sans', sans-serif;\\n  color: var(--snap-text-dark);\\n  margin: auto;\\n  background-color: var(--snap-main-background); }\\n\\nbutton {\\n  width: 100%;\\n  letter-spacing: .03rem; }\\n\\nbutton:focus {\\n  outline: 1px solid var(--snap-border-lightest); }\\n\\nli button:focus {\\n  outline: none; }\\n\\nbutton.active-icon:focus {\\n  outline: none; }\\n\\ninput[type=\\\"text\\\"] {\\n  font-size: 1rem;\\n  padding: .5rem;\\n  width: 100%;\\n  border-color: var(--snap-border-lightest);\\n  border-style: solid; }\\n\\ninput[type=\\\"text\\\"]:focus {\\n  outline: 1px solid var(--snap-text-medium-dark-hover); }\\n\\na:hover {\\n  text-decoration: none; }\\n\\nul {\\n  margin: 0;\\n  padding: 0; }\\n\\nli {\\n  list-style-type: none;\\n  margin: 0 0 .5rem 0; }\\n\\nprogress {\\n  margin: 0 !important;\\n  width: 100%;\\n  border: 0;\\n  background: var(--snap-progress-bg);\\n  max-height: 5px; }\\n\\nprogress::-webkit-progress-bar {\\n  background-color: var(--snap-progress-bg); }\\n\\nprogress::-webkit-progress-value {\\n  background-color: var(--snap-text-black); }\\n\\nprogress::-moz-progress-bar {\\n  background-color: var(--snap-progress-bar); }\\n\\n.progress-icon {\\n  color: var(--snap-progress-bar) !important;\\n  cursor: pointer; }\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg); }\\n\\n.inline-progress-container progress {\\n  width: 95px;\\n  height: 3px;\\n  left: 0;\\n  top: 2.5rem; }\\n\\nhr {\\n  margin: 0; }\\n\\n.font-size-small {\\n  font-size: .7rem; }\\n\\n.no-progress {\\n  background-color: var(--snap-progress-bg); }\\n\\n.icon::after {\\n  display: inline-block;\\n  font-style: normal;\\n  font-variant: normal;\\n  text-rendering: auto;\\n  -webkit-font-smoothing: antialiased;\\n  font-family: \\\"Font Awesome 5 Free\\\"; }\\n\\n.icon.active::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f00c\\\";\\n  padding: 0 0.5rem 0 0;\\n  margin: 0 0 0 -1.5rem;\\n  color: #637f5b; }\\n\\n.icon.choice::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: #637f5b; }\\n\\n.icon.edible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f2e7\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive); }\\n\\n.icon.inedible::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f056\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-inactive); }\\n\\n.icon.toxic::after {\\n  font-weight: 900;\\n  content: \\\"\\\\f071\\\";\\n  padding: 0 0 0 0.25rem;\\n  color: var(--snap-alert); }\\n\\n.dropdown-menu {\\n  margin: 0.15rem 0 0 0;\\n  padding: 0;\\n  color: var(--snap-text-dark);\\n  border: 0.05rem solid var(--snap-border-light); }\\n\\n.lesson-title {\\n  line-height: 1.6; }\\n\\n.lessons, .settings, .nav-info, .lesson, .glossary, .email, .login, .email > a, .language, .quiz-icon {\\n  cursor: pointer;\\n  color: var(--snap-text-dark);\\n  font-size: 1.4rem; }\\n\\n.icon.lesson {\\n  color: var(--snap-text-light); }\\n\\na.icon:hover {\\n  color: var(--snap-text-light); }\\n\\n.email span {\\n  font-size: .8rem; }\\n\\n.glossary svg {\\n  vertical-align: middle; }\\n\\n.grid-header {\\n  background-color: #99ac95;\\n  background-color: var(--snap-portrait);\\n  display: flex;\\n  align-items: center;\\n  color: var(--snap-text-dark);\\n  width: 100%;\\n  border-radius: 0.25rem 0.25rem 0 0;\\n  letter-spacing: 0.07rem;\\n  text-transform: uppercase; }\\n\\n.grid-header > div {\\n  padding: 0 0.5rem; }\\n\\n.nav-icons .active-icon, .active-icon {\\n  color: white; }\\n\\n.disabled-icon {\\n  cursor: initial;\\n  opacity: .38;\\n  /* why  38%? google material design */\\n  pointer-events: none; }\\n\\n.test-card-question.standard-block {\\n  border-bottom: 0.03rem solid var(--snap-border-medium); }\\n\\n.home-container {\\n  position: relative;\\n  grid-template-rows: var(--vhStandardBlock) auto; }\\n\\n.scrollable.card {\\n  text-align: left; }\\n\\n.species.card {\\n  margin: 0; }\\n\\n.species.card-small {\\n  padding: 0.5rem; }\\n\\n.grid {\\n  display: grid !important;\\n  grid-auto-flow: column;\\n  width: 100%;\\n  height: var(--vhGrid, 100vh);\\n  font-size: .8rem; }\\n\\n.side-lesson-list, .main-lesson-grid {\\n  display: grid;\\n  grid-template-columns: 100%;\\n  grid-auto-flow: column;\\n  grid-template-rows: var(--vhRunningBlock, 7.5vh) 5px auto var(--vhRunningBlock, 7.5vh); }\\n\\n.side-lesson-list-body, .main-lesson-body {\\n  display: grid;\\n  grid-auto-flow: row;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh));\\n  background-color: var(--snap-content-background); }\\n\\n.header, .footer {\\n  display: flex;\\n  align-items: center;\\n  padding: 0 0.5rem;\\n  letter-spacing: 0.1rem;\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-dark);\\n  min-height: var(--vhRunningBlock, 7.5vh);\\n  max-height: var(--vhRunningBlock, 7.5vh); }\\n\\n.header > div:nth-child(2) {\\n  max-width: 50%;\\n  font-size: .9rem; }\\n\\n.footer {\\n  bottom: 0; }\\n\\n.side-lesson-list .footer .nav-icons, .main-lesson-grid .footer .nav-icons {\\n  flex: auto;\\n  justify-content: space-evenly; }\\n\\n.side-lesson-list .footer .nav-icons li, .main-lesson-grid .footer .nav-icons li {\\n  margin: 0 !important; }\\n\\n.footer-score span {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.75rem; }\\n\\n.side-lesson-list .header, .side-lesson-list .footer {\\n  justify-content: flex-end;\\n  background-color: var(--snap-portrait); }\\n\\n.main-lesson-grid .header, .main-lesson-grid .footer {\\n  justify-content: center;\\n  background-color: var(--snap-landscape); }\\n\\n.header-text {\\n  color: var(--snap-text-dark-medium-dark); }\\n\\n.scrollable {\\n  overflow-y: auto;\\n  -webkit-overflow-scrolling: touch;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0; }\\n\\n.pointer-events-none {\\n  pointer-events: none !important; }\\n\\n.align-left {\\n  text-align: left; }\\n\\n.snapdragon.card {\\n  border: 0; }\\n\\n.snapdragon.card.align-left {\\n  color: var(--snap-text-medium-dark);\\n  padding: 0.5rem; }\\n\\n.snapdragon.card.align-left .feature-label {\\n  letter-spacing: 0.03rem;\\n  width: fit-content;\\n  display: inline-table; }\\n\\n.latin-name {\\n  font-style: italic;\\n  font-family: serif;\\n  text-transform: initial; }\\n\\n.common-name {\\n  font-style: normal;\\n  text-transform: capitalize; }\\n\\n.card-link-container {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.card-link-container svg {\\n  font-size: 2rem;\\n  cursor: pointer;\\n  color: var(--snap-iconic-icon-header); }\\n\\n.card-link-container svg:hover {\\n  color: var(--snap-text-medium-light); }\\n\\n.taxon.card-card .data-box-container {\\n  grid-template-columns: 1fr 2fr;\\n  padding: 0 .5rem; }\\n\\n.inat-box .data-box {\\n  color: var(--snap-text-medium-light);\\n  height: 100%;\\n  border-left: 0;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  border-right: 1px solid var(--snap-border-lightest);\\n  font-size: .8rem; }\\n\\n.inat-box .data-box > div:nth-child(1), .inat-box .data-box > div:nth-child(2) {\\n  display: grid;\\n  grid-template-columns: 2fr 1fr;\\n  grid-gap: .25rem; }\\n\\n.inat-box .data-box > div:nth-child(2) > div:nth-child(1) {\\n  padding: 0 0.5rem 0 0; }\\n\\n.inat-box .data-box > div > div:nth-child(2) > div {\\n  text-align: center; }\\n\\n.taxon-data > span:nth-child(1) {\\n  min-width: 50%; }\\n\\n.data-box .taxon-data:nth-child(1) > span {\\n  text-transform: uppercase; }\\n\\n.taxon-data {\\n  display: flex;\\n  flex-direction: row; }\\n\\n.latin {\\n  font-style: italic;\\n  font-family: serif; }\\n\\n.taxon-members {\\n  font-style: italic; }\\n\\n.history div {\\n  margin: 0 0 1rem 0; }\\n\\n.btn {\\n  font-size: inherit;\\n  padding: .5rem;\\n  border: none; }\\n\\n.btn:hover {\\n  opacity: .8; }\\n\\n.btn.focus, .btn:focus {\\n  box-shadow: none; }\\n\\n/* .btn:disabled {\\n  pointer-events: none;\\n} */\\n.btn-placeholder.btn {\\n  color: var(--snap-text-dark); }\\n\\n.btn-tertiary {\\n  color: var(--snap-text-light);\\n  background-color: var(--snap-tertiary-background) !important;\\n  border: 1px solid var(--snap-border-light);\\n  cursor: pointer !important; }\\n\\n.btn-tertiary:focus {\\n  outline: 1px solid var(--snap-border-medium);\\n  color: var(--snap-text-black); }\\n\\n.dropdown-toggle::after {\\n  vertical-align: 0.2rem;\\n  margin-left: 0.2rem; }\\n\\n.mixed-content-container {\\n  top: calc( var(--vhStandardBlock, 10vh) + var(--vhSmallImageCarousel,23vh));\\n  height: calc( var(--vh, 1vh) * 100 - var(--vhFixtures,15vh) - var(--vhSmallImageCarousel,23vh) - var(--vhDoubleStandardBlock,20vh)       - .5rem); }\\n\\n.collection span {\\n  padding: 0 0.5rem;\\n  cursor: pointer; }\\n\\n.dropdown div {\\n  white-space: nowrap; }\\n\\n.delay-slider {\\n  margin: 1rem 0; }\\n\\n.delay-slider > div input {\\n  flex: auto;\\n  margin: 0 .5rem; }\\n\\n.response-update {\\n  flex: initial;\\n  display: flex;\\n  flex-direction: row;\\n  position: absolute;\\n  bottom: 0.5rem;\\n  right: .5rem;\\n  left: .5rem; }\\n\\n.action-update {\\n  width: 100%; }\\n\\n.action-update button {\\n  width: 100%; }\\n\\nbutton:disabled {\\n  cursor: initial !important;\\n  opacity: .38;\\n  /* why  38%? google material design */\\n  pointer-events: none; }\\n\\n.trait.card li span:nth-child(1) {\\n  width: 25%;\\n  text-align: left; }\\n\\n.trait.card li span:nth-child(2) {\\n  width: 75%;\\n  text-align: left; }\\n\\n.btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-text-light);\\n  color: var(--snap-text-dark); }\\n\\n.non-taxon .btn-secondary:not(:disabled):not(.disabled).active {\\n  background-color: var(--snap-species-header-background); }\\n\\n.rb.btn-group {\\n  display: flex;\\n  flex-direction: column; }\\n\\n.rb.btn-group .btn.btn-secondary.active {\\n  color: var(--snap-success);\\n  background-color: inherit;\\n  border: none; }\\n\\n.btn-secondary:not(:disabled):not(.disabled):active {\\n  color: var(--snap-text-medium-dark);\\n  background-color: initial;\\n  border: none; }\\n\\n.rb.btn-group .btn:hover {\\n  color: #646464; }\\n\\n.btn.btn-secondary.disabled.active {\\n  opacity: 1; }\\n\\n.rb.btn-group label {\\n  margin: 0 0 .5rem 0; }\\n\\n.rb.btn-group input[type=radio] {\\n  box-sizing: border-box;\\n  padding: 0;\\n  position: absolute;\\n  clip: rect(0, 0, 0, 0);\\n  pointer-events: none; }\\n\\n.btn.btn-secondary {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--white);\\n  border: 0;\\n  width: fit-content;\\n  border: none; }\\n\\n.btn.btn-secondary:hover {\\n  transition: none; }\\n\\n.btn.btn-secondary.disabled .collectionName, .btn.btn-secondary.active .guideName {\\n  border: none; }\\n\\n.side-lesson-list,\\n.species-card-wiki-entry,\\n.collection-preview,\\n.collection button,\\n.collections-skills {\\n  display: none; }\\n\\n.species-table td .portrait input {\\n  height: 1.15rem;\\n  width: 1.15rem; }\\n\\n.badge {\\n  vertical-align: text-top;\\n  cursor: pointer; }\\n\\n.badge-light {\\n  color: inherit;\\n  background-color: transparent;\\n  margin: -0.25rem 0 0 0.25rem;\\n  padding: 0.4rem 0.4rem 0.3rem 0.4rem; }\\n\\n.badge-list {\\n  height: 100%;\\n  padding: 1rem;\\n  background-color: var(--snap-snap-action-btn); }\\n\\n.feature-label {\\n  color: var(--snap-text-green); }\\n\\n.compare-species-link {\\n  cursor: pointer; }\\n\\n.imageSlider .carousel-inner {\\n  display: flex;\\n  flex-direction: column;\\n  background-color: rgba(211, 214, 173, 0.4); }\\n\\n.imageSlider .carousel-inner > div {\\n  width: inherit; }\\n\\n.imageSlider .carousel-control-next, .imageSlider .carousel-control-prev {\\n  top: 30%;\\n  height: 20%;\\n  width: 10%;\\n  background-color: rgba(211, 214, 173, 0.2);\\n  opacity: 0.5; }\\n\\n.carousel-control-next button, .carousel-control-prev button {\\n  background-color: transparent !important;\\n  border: none !important; }\\n\\n.carousel-control-next, .carousel-control-prev {\\n  pointer-events: all; }\\n\\n.carousel-control-next[disabled=\\\"disabled\\\"],\\n.carousel-control-prev[disabled=\\\"disabled\\\"] {\\n  pointer-events: none; }\\n\\n.imageSlider .carousel.slide {\\n  background-color: var(--snap-text-dark-medium-dark); }\\n\\n.imageSlider .carousel-inner > div:nth-child(1), .imageSlider .carousel-item {\\n  height: var(--vhExtraSmallImageCarousel);\\n  min-height: var(--vhExtraSmallImageCarousel); }\\n\\n.species-card-images .carousel-item-next, .species-card-images .carousel-item-prev, .species-card-images .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.imageSlider .carousel-item-next, .imageSlider .carousel-item-prev, .imageSlider .carousel-item.active {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  pointer-events: all; }\\n\\n.info-box .carousel-item-next, .info-box .carousel-item-prev, .info-box .carousel-item.active {\\n  display: grid; }\\n\\n.carousel-item.active button {\\n  width: initial; }\\n\\n.imageSlider .carousel-item > div {\\n  height: 90%;\\n  background-size: inherit;\\n  background-repeat: no-repeat;\\n  background-position: center; }\\n\\n#imageSlider_card-card .carousel-item > div, #imageSlider_card-card .carousel-item > div {\\n  pointer-events: none; }\\n\\n.imageSlider .carousel-item > div.contain-image {\\n  background-size: contain; }\\n\\n.imageSlider .carousel-control-next-icon,\\n.imageSlider .carousel-control-prev-icon {\\n  width: 1.5rem;\\n  height: 1.5rem;\\n  background-color: transparent;\\n  border: none; }\\n\\n#imageSlider1 {\\n  flex: 1; }\\n\\n#imageSlider2 {\\n  flex: 1; }\\n\\n#imageSlider3 {\\n  flex: 1; }\\n\\n.info-box .carousel.slide {\\n  float: right;\\n  width: 100%;\\n  background-color: var(--snap-species-header-background); }\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  padding: .25rem 0;\\n  text-align: center;\\n  margin: 0 15%;\\n  height: var(--vhHalfStandardBlock, 5vh);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.info.carousel.slide .carousel-item div dt, .info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.3); }\\n\\n.info.carousel.slide .carousel-item div dd {\\n  background-color: rgba(128, 128, 128, 0.1);\\n  text-transform: lowercase; }\\n\\n.info.carousel-control .carousel-control-next-icon {\\n  color: black; }\\n\\n.carousel-control-prev-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\\\"); }\\n\\n.carousel-control-next-icon {\\n  background-image: url(\\\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23000' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\\\"); }\\n\\n.bird-song div:nth-child(2) {\\n  background-color: #8ea077; }\\n\\n.bird-song-bg {\\n  background-color: var(--snap-collection-active); }\\n\\n.bird-song-icon {\\n  color: black;\\n  margin-left: -.5rem; }\\n\\n.bird-song-icon-disabled {\\n  color: rgba(0, 0, 0, 0.2);\\n  pointer-events: none;\\n  margin-left: -.5rem; }\\n\\niframe#birdsong {\\n  width: 1px;\\n  min-width: 260px; }\\n\\n.rank {\\n  border-radius: 0.24rem;\\n  display: inline-block;\\n  vertical-align: text-top; }\\n\\n.radio-buttons.disabled label {\\n  color: #646464; }\\n\\n.hide-empty:empty {\\n  display: none !important; }\\n\\n.species-search .icon {\\n  font-size: 2.5rem;\\n  height: calc(var(--vhStandardBlock, 30vh) * 1.5);\\n  color: #5a93fc;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.species-search .icon svg:not(.slow-spin) {\\n  color: var(--snap-active); }\\n\\n.question-container .icon {\\n  color: #5a93fc;\\n  font-size: 1.8rem; }\\n\\n.slow-spin {\\n  -webkit-animation: fa-spin 6s infinite linear;\\n  animation: fa-spin 6s infinite linear; }\\n\\n.dropdown.collections {\\n  display: flex; }\\n\\n.carousel-indicators {\\n  height: var(--vhRunningBlock);\\n  bottom: 0;\\n  margin: 0 !important;\\n  margin-left: 2.5rem !important;\\n  margin-right: 2.5rem !important;\\n  align-items: center; }\\n\\n.carousel-indicators li {\\n  background-color: var(--snap-text-medium-dark);\\n  width: 1rem;\\n  height: 0.25rem;\\n  margin-bottom: 0; }\\n\\n.carousel-indicators .active {\\n  background-color: white; }\\n\\n.question-header {\\n  display: flex;\\n  background-color: var(--snap-species-header-background);\\n  color: var(--snap-dark);\\n  justify-content: center; }\\n\\n.card-link {\\n  cursor: pointer;\\n  color: #807931; }\\n\\n.most-observations {\\n  color: var(--orange); }\\n\\n.current-month {\\n  border: 0.05rem solid rgba(108, 117, 125, 0.8); }\\n\\n.home-container .snapdragon-header {\\n  top: 0;\\n  text-transform: uppercase;\\n  color: var(--snap-text-medium-light);\\n  font-size: 1.6rem;\\n  letter-spacing: .25rem;\\n  border-bottom: 1px solid var(--snap-border-lightest); }\\n\\n.home-container .snapdragon-header a, .home-container .snapdragon-header a:visited {\\n  color: var(--snap-text-medium-light); }\\n\\n/* .home-container .snapdragon-tag,  */\\n.home-container .summary-scores, .trait-card-summary-container .summary-scores {\\n  justify-content: center;\\n  font-style: italic;\\n  display: flex;\\n  color: var(--snap-link);\\n  letter-spacing: .03rem;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center; }\\n\\n.trait-card-summary-container .summary-scores {\\n  padding: 0 1rem; }\\n\\n.trait-line {\\n  margin-top: 2rem; }\\n\\n.trait-line .small-icon {\\n  font-size: 1rem !important;\\n  margin: 0 !important; }\\n\\n.trait-icon, .trait-icon > span {\\n  margin: 0 !important; }\\n\\n.trait-icon svg g g {\\n  fill: var(--snap-link); }\\n\\n/* .home-container .snapdragon-tag  */\\n.inat-widget span:nth-child(1) {\\n  font-style: initial; }\\n\\n.home-container .vernacular-language {\\n  font-size: 1rem; }\\n\\n.delete-guide-link > span.active {\\n  color: var(--snap-alert) !important;\\n  pointer-events: initial; }\\n\\n.delete-guide-link > span.disabled {\\n  color: var(--secondary) !important;\\n  pointer-events: none; }\\n\\n.delete-guide-link input {\\n  cursor: pointer;\\n  width: 1rem;\\n  height: 1rem;\\n  vertical-align: text-bottom; }\\n\\n.edit-guide-link, .save-guide-link, .margin-right {\\n  margin: 0 .5rem 0 0; }\\n\\n.swap-in-card {\\n  display: initial; }\\n\\n.swap-out-card {\\n  display: none !important; }\\n\\n.no-pointer-events {\\n  pointer-events: none; }\\n\\n.snapdragon-intro {\\n  margin: 0 2rem;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n  top: var(--vhStandardBlock, 10vh); }\\n\\n.snapdragon-intro > h3, .snapdragon-intro > h4, .snapdragon-intro > h5 {\\n  font-size: 1rem; }\\n\\n.snapdragon-intro .youtube-icon {\\n  font-size: 1rem; }\\n\\n.lesson-list {\\n  position: relative;\\n  background-color: var(--snap-block-light); }\\n\\n.lesson-list-header {\\n  padding: 0 !important;\\n  background-color: #e7ebeb;\\n  justify-content: space-between; }\\n\\n.lesson-list-header > div:nth-child(1) {\\n  display: flex;\\n  align-items: center; }\\n\\n.lesson-list-header > div:nth-child(1) > div {\\n  color: var(--snap-text-medium-light);\\n  display: flex;\\n  align-items: center;\\n  width: 100%;\\n  justify-content: space-between;\\n  padding-right: 1rem; }\\n\\n.lesson-list-header > div:nth-child(2) {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer; }\\n\\n.lesson-list-header > div:nth-child(2) > div {\\n  height: calc( var(--vh) * 5);\\n  width: calc( var(--vh) * 5); }\\n\\n.lesson-list-header > div:nth-child(1) {\\n  padding-left: .5rem !important; }\\n\\n.lesson-list-header > div[data-toggle-state=\\\"off\\\"]:nth-child(1) > div:nth-child(1) {\\n  display: none; }\\n\\n.lesson-list-header > div[data-toggle-state=\\\"on\\\"]:nth-child(1) > div:nth-child(2) {\\n  display: none; }\\n\\n.lesson-list-header svg {\\n  font-size: 1rem;\\n  vertical-align: super;\\n  color: var(--snap-text-medium-light);\\n  cursor: pointer; }\\n\\n.lesson-list-carousel-item {\\n  border-top: 3px solid transparent;\\n  border-bottom: 3px solid transparent;\\n  display: flex;\\n  margin: .25rem 0; }\\n\\n.highlighted-for-review-row {\\n  border-top: 3px solid var(--snap-border-lightest);\\n  border-bottom: 3px solid var(--snap-border-lightest);\\n  background-color: var(--snap-content-background) !important; }\\n\\n.lesson-list-carousel-item > div:nth-child(3) {\\n  font-size: 1.3rem;\\n  cursor: pointer;\\n  align-items: center;\\n  display: flex;\\n  position: absolute; }\\n\\n.lesson-list-item {\\n  padding: 1rem .5rem;\\n  pointer-events: none; }\\n\\n.lesson-review, .lesson-terms-review {\\n  pointer-events: initial; }\\n\\n.lesson-review svg {\\n  font-size: .9rem;\\n  color: var(--snap-collection); }\\n\\n.lesson-review i.fa-sync, .lesson-list-item i.fa-sync {\\n  font-size: 1rem;\\n  color: var(--snap-active); }\\n\\n.lesson-list > div > div:nth-child(1) {\\n  justify-content: space-between; }\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n) {\\n  background-color: var(--snap-lesson-row-green); }\\n\\n.lesson-list div.lesson-list-carousel-item:nth-of-type(2n+1) {\\n  background-color: var(--snap-lesson-row-green); }\\n\\n.lesson-list .scrollable {\\n  width: 100%;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh) - var(--vhStandardBlock, 10vh));\\n  flex-direction: column;\\n  top: var(--vhStandardBlock, 10vh);\\n  border-top: 1px solid var(--snap-border-lightest); }\\n\\n.lesson-list .scrollable .btn input[type=radio] {\\n  position: absolute;\\n  clip: rect(0, 0, 0, 0); }\\n\\n.youtube-green-fg {\\n  color: var(--snap-youtube-green); }\\n\\n.running-block {\\n  height: var(--vhRunningBlock, 9vh); }\\n\\n.calendar-block {\\n  height: var(--vhCalendar, 11vh); }\\n\\n.modal-footer.double-centred-block {\\n  background-color: var(--snap-portrait);\\n  text-transform: uppercase;\\n  cursor: pointer; }\\n\\n.video {\\n  position: sticky;\\n  position: -webkit-sticky;\\n  top: 0;\\n  margin: 0;\\n  padding: 0;\\n  padding-top: .4rem;\\n  border-top: 1px solid var(--snap-border-light);\\n  position: relative;\\n  height: 0;\\n  padding-top: 56.25%;\\n  width: 100%; }\\n\\n.video iframe {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  border: 0;\\n  width: 100%;\\n  height: 100%; }\\n\\n.home-scrolling-container {\\n  position: relative; }\\n\\n.home-scrolling-container .scrollable {\\n  top: calc( var(--vhScrollingTop)); }\\n\\n.form-check-input {\\n  margin-top: 0; }\\n\\n.form-check-input:checked {\\n  background-color: var(--snap-tertiary-background);\\n  border-color: var(--snap-tertiary-background); }\\n\\n.lesson-list .btn-group label.form-check-label {\\n  background-color: initial;\\n  cursor: pointer; }\\n\\n.main-header {\\n  font-size: 1.4rem;\\n  text-transform: uppercase;\\n  letter-spacing: .25rem; }\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5; }\\n\\n#insertParent {\\n  font-size: .8rem;\\n  padding: 1rem; }\\n\\n.col-count-2 {\\n  column-count: 2; }\\n\\n.col-count-3 {\\n  column-count: 3; }\\n\\n#insertParent > div > div:nth-child(1) {\\n  font-style: italic;\\n  font-size: .9rem; }\\n\\n.border-bottom {\\n  border-bottom: 0.03rem solid var(--snap-border-medium); }\\n\\n.lesson-companion {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-style: italic;\\n  font-size: 1.1em;\\n  height: var(--vhStandardBlock, 10vh); }\\n\\n.score-summary {\\n  top: calc(var(--vhStandardBlock));\\n  padding: .5rem 1.5rem; }\\n\\n.score-summary.scrollable.review-summary {\\n  bottom: 1rem; }\\n\\n.review-summary .snap-icon-btn {\\n  margin: 0; }\\n\\ndiv[data-show-image=\\\"false\\\"] {\\n  display: none !important; }\\n\\nimg[data-has-image=\\\"false\\\"] {\\n  display: none; }\\n\\n.concealed {\\n  opacity: 0; }\\n\\n.fa, .fab, .fal, .far, .fas {\\n  line-height: 1.5 !important; }\\n\\n.autocomplete {\\n  height: 5rem !important;\\n  position: absolute !important; }\\n\\n.login.icon > svg:nth-child(2) {\\n  color: var(--snap-text-light); }\\n\\n.login.icon[data-is-logged-in=\\\"true\\\"] .fa-user-slash {\\n  display: none; }\\n\\n.login.icon[data-is-logged-in=\\\"false\\\"] .fa-user-check {\\n  display: none; }\\n\\ninput[type=\\\"number\\\"].big {\\n  width: 4rem;\\n  padding: .5rem; }\\n\\ninput[type=\\\"number\\\"].medium {\\n  width: 3rem;\\n  padding: .25rem;\\n  font-size: .8rem; }\\n\\n.quick-review-tabs span {\\n  pointer-events: none; }\\n\\n.nav-link {\\n  color: var(--snap-text-medium-dark);\\n  letter-spacing: .03rem; }\\n\\n.nav-pills .nav-link.active, .nav-pills .show > .nav-link {\\n  color: var(--snap-text-medium-dark);\\n  background-color: var(--snap-collection-light); }\\n\\n.nav-pills .nav-item:nth-child(1) .nav-link.active, .nav-pills .nav-item:nth-child(1) .show > .nav-link {\\n  background-color: var(--snap-success-medium); }\\n\\n.nav-pills .nav-item:nth-child(2) .nav-link.active, .nav-pills .nav-item:nth-child(2) .show > .nav-link {\\n  background-color: var(--snap-alert-medium); }\\n\\n.nav-pills .nav-link {\\n  border-radius: 0;\\n  position: relative; }\\n\\n.correct-answer-color {\\n  color: var(--snap-success); }\\n\\n.incorrect-answer-color {\\n  color: var(--snap-alert); }\\n\\n.low-relief-block {\\n  border: 1px solid var(--snap-success-light) !important;\\n  background-color: var(--snap-species-highlight-background); }\\n\\n.horizontal-buttons {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr 1fr;\\n  grid-gap: .5rem; }\\n\\n.lesson-spinner {\\n  font-size: 5rem;\\n  height: calc((var(--vh, 1vh) * 100) - var(--vhFixtures, 15vh)); }\\n\\n.image-slider-190 img {\\n  height: 190px;\\n  min-height: 190px; }\\n\\n.lesson-icon {\\n  width: 98px;\\n  height: 68px;\\n  object-fit: none; }\\n\\n.lesson-icon img {\\n  object-fit: none;\\n  height: 100%; }\\n\\n.location-filter-options {\\n  padding: .5rem;\\n  grid-template-rows: 1fr 1fr;\\n  display: grid; }\\n\\n.skip-link:focus {\\n  top: 0; }\\n\\n.display-grid {\\n  display: grid !important; }\\n\\n.display-none {\\n  display: none !important; }\\n\\n#GLOSSARY .fa-book-open {\\n  vertical-align: -.2rem; }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".species-table {\\n  border-right: 1px solid var(--snap-btn-auxillary);\\n  border-left: 1px solid var(--snap-btn-auxillary);\\n  border-bottom: 1px solid var(--snap-btn-auxillary); }\\n\\n.table-header {\\n  cursor: pointer;\\n  display: flex;\\n  flex-direction: row;\\n  border: 0;\\n  height: var(--vhRunningBlock, 7.5vh);\\n  z-index: 10;\\n  align-items: center;\\n  top: 0;\\n  background-color: var(--snap-btn-auxillary);\\n  color: var(--snap-text-light);\\n  font-size: 1.1em;\\n  letter-spacing: .01rem; }\\n\\n.table-header th {\\n  cursor: pointer;\\n  font-weight: initial; }\\n\\n.table-row {\\n  display: flex;\\n  flex-direction: row;\\n  height: var(--vhRow, 12.5vh);\\n  font-size: .9em; }\\n\\n.table-row-chevron {\\n  display: flex;\\n  justify-content: center;\\n  width: 100%; }\\n\\ntr.master:nth-child(2n + 1) {\\n  background-color: var(--snap-content-background); }\\n\\n.table-row img, table input {\\n  cursor: pointer; }\\n\\n.table-row td button svg {\\n  min-width: 2.5rem; }\\n\\n.table-row img {\\n  width: 64px;\\n  height: 64px;\\n  object-fit: none;\\n  padding: .5rem; }\\n\\n.table-row img:hover {\\n  opacity: .8; }\\n\\n.table-row img:focus {\\n  border: 1px solid black; }\\n\\n.table-row .lp-level {\\n  padding: 0 0 0 0.5rem; }\\n\\n.inserted-td {\\n  font-size: .9rem;\\n  white-space: normal;\\n  text-align: left;\\n  padding: .5rem; }\\n\\nth {\\n  text-align: initial; }\\n\\n.table-header th:nth-child(1) {\\n  min-width: 80px; }\\n\\n.species-list .table-header th:nth-child(2):after,\\n.species-list .table-header th:nth-child(3):after {\\n  display: inline-block;\\n  width: 0;\\n  height: 0;\\n  margin-left: 0.255rem;\\n  vertical-align: middle;\\n  content: \\\"\\\";\\n  border-top: 0.3rem solid;\\n  border-right: 0.3rem solid transparent;\\n  border-bottom: 0;\\n  border-left: 0.3rem solid transparent;\\n  cursor: default; }\\n\\n.table-header th:nth-child(1) > span,\\n.table-footer td:nth-child(1) > span {\\n  height: 1px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.table-header th:nth-child(2) {\\n  flex: 3;\\n  align-items: flex-start; }\\n\\n.master.table-row td:nth-child(1) {\\n  width: 80px;\\n  display: flex;\\n  align-items: center; }\\n\\n.species-description > td:nth-child(1) {\\n  width: 100%; }\\n\\n.table-row td:nth-child(2) {\\n  flex: 3;\\n  display: flex;\\n  align-items: flex-start;\\n  flex-direction: column;\\n  justify-content: center; }\\n\\n.table-header th:nth-child(3), .table-row td:nth-child(3), .table-header th:nth-child(4), .table-row td:nth-child(4) {\\n  flex: 1;\\n  display: flex;\\n  align-items: center; }\\n\\n.table-header th:nth-child(5), .table-row td:nth-child(5) {\\n  flex: 1;\\n  display: flex;\\n  align-items: center; }\\n\\n.table-header th:nth-child(6), .table-row td:nth-child(6) {\\n  flex: 1;\\n  display: flex;\\n  align-items: center; }\\n\\n.table-header th:nth-child(5), .table-row td:nth-child(5) button {\\n  position: absolute;\\n  right: 2.5rem; }\\n\\n.table-header th:nth-child(6), .table-row td:nth-child(6) button {\\n  position: absolute;\\n  right: .5rem; }\\n\\n.hide-column {\\n  flex: 0 !important;\\n  display: none !important; }\\n\\n.species-table .mushroom-icon svg {\\n  width: 1rem;\\n  height: 1rem;\\n  margin-top: .3rem; }\\n\\ndiv.species-description {\\n  background-color: var(--snap-species-highlight-background);\\n  border-top: 0.5px solid var(--snap-youtube-green);\\n  border-bottom: 0.5px solid var(--snap-youtube-green);\\n  padding: 1rem;\\n  color: rgba(0, 0, 0, 0.85);\\n  height: initial; }\\n\\n.species-description > td {\\n  width: 100%; }\\n\\n.youtube-icon, .accordion-icon, .chevron-icon {\\n  font-size: 1.8rem;\\n  cursor: pointer; }\\n\\ntable .youtube-icon, .accordion-icon, table .chevron-icon {\\n  font-size: 1.2rem; }\\n\\n.species-container {\\n  position: relative;\\n  width: 100%; }\\n\\n.lesson-list-action-icons {\\n  margin: 0;\\n  right: 1rem;\\n  bottom: 1.5rem; }\\n\\n.species-table .underline-link {\\n  text-transform: initial;\\n  display: initial; }\\n\\n.btn-current-lesson-begin {\\n  width: calc(var(--vwGrid) - 1rem);\\n  margin: .5rem; }\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default \"img/powered_by_google_on_white_hdpi.png\";","// Module\nvar code = \"\\n      <div class=\\\"modal fade\\\" id=\\\"imageModal\\\" role=\\\"dialog\\\" aria-labelledby=\\\"imageModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n                <header class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        <div class=\\\"modal-title js-modal-image-title\\\">\\n                            <span></span><span></span>\\n                        </div>                \\n                        <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                            <span aria-hidden=\\\"true\\\">&times;</span>\\n                        </button>                          \\n                    </div>\\n                </header>\\n                <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div>\\n                <div class=\\\"modal-body centred-block\\\">\\n                    <div class=\\\"modal-image js-modal-image\\\" style=\\\"flex:auto;\\\"></div>\\n                </div>\\n                <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                  <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>           \\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"modal fade\\\" id=\\\"imageComparisonModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"imageModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n                <header class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        <div class=\\\"modal-title js-modal-image-title\\\">\\n                        <div class=\\\"modal-rights-attribution js-modal-rights-attribution\\\"></div>\\n                        <span></span><span></span><span class=\\\"hide-empty\\\"></span><span class=\\\"hide-empty\\\"></span>\\n                    </div>\\n                </header>\\n            </div>\\n            <div class=\\\"modal-body\\\">\\n                <div class=\\\"modal-image js-modal-image\\\"></div>\\n            </div>\\n            <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n              <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n            </div>\\n        </div>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"modal fade\\\" id=\\\"wikiModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"exampleModalLongTitle\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n        <div class=\\\"modal-content\\\"> \\n            <header class=\\\"modal-header-container\\\">\\n                <div class=\\\"modal-header\\\">\\n                    <div class=\\\"modal-title js-external-page-title\\\"></div>\\n                </div>                       \\n            </header>\\n            <div class=\\\"modal-body js-external-page-body\\\">\\n            </div>\\n            <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n              <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n            </div>\\n        </div>\\n        </div>\\n    </div>\\n    \\n    <div class=\\\"modal fade basic-modal\\\" id=\\\"basicModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"basicModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n                <div class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        <div class=\\\"centred-block justify-space-between js-modal-header-block\\\">\\n                          <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div>\\n                          <div></div>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\\"modal-body\\\">\\n                    <div class=\\\"modal-text js-modal-text\\\"></div>\\n                </div>       \\n                <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                  <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n                </footer>\\n            </div>\\n        </div>\\n    </div>\\n            \\n    <div class=\\\"modal fade basic-modal\\\" id=\\\"glossaryModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"glossaryModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n                <header class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        <div class=\\\"centred-block justify-space-between js-modal-header-block\\\">\\n                            <div class=\\\"modal-title small-text js-modal-text-title\\\"><h1>Glossary</h1></div>\\n                            <button class=\\\"btn fit-width snap-btn double-margin-right small-text js-quick-fire-filters\\\">Glossary</button>\\n                            <button class=\\\"btn hide-important fit-width snap-btn double-margin-right small-text js-quick-fire-questions\\\">Quick-fire questions</button>\\n                        </div>\\n                    </div>\\n                  </header>\\n                <div class=\\\"modal-body\\\">\\n                    <div class=\\\"modal-text js-modal-text\\\"></div>\\n                </div>       \\n                <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                  <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n                </footer>             \\n            </div>\\n        </div>\\n    </div>\\n    \\n    <div class=\\\"modal fade\\\" id=\\\"cardModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"speciesCardLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n                <header class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        <div class=\\\"modal-title js-modal-text-title\\\"></div>\\n                    </div>                       \\n                </header>\\n                <div class=\\\"carousel slide\\\">\\n                    <div class=\\\"carousel-inner\\\">\\n                        <div class=\\\"prev landscape js-prev\\\" role=\\\"button\\\">\\n                            <span class=\\\"carousel-control-prev-icon\\\" data-direction=\\\"prev\\\" aria-hidden=\\\"true\\\"></span>\\n                            <span class=\\\"sr-only\\\">Previous</span>\\n                        </div>\\n                        <div class=\\\"modal-body js-modal-body\\\">\\n                            <div class=\\\"modal-text js-modal-text\\\"></div>\\n                        </div>                    \\n                        <div class=\\\"next landscape js-next\\\" role=\\\"button\\\">\\n                            <span class=\\\"carousel-control-next-icon\\\" data-direction=\\\"next\\\" aria-hidden=\\\"true\\\"></span>\\n                            <span class=\\\"sr-only\\\">Next</span>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                  <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n                </div>\\n            </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"modal fade\\\" id=\\\"badgeListModal\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"badgeListModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n                <header class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        <div class=\\\"modal-title js-modal-text-title\\\"></div>\\n                    </div>                       \\n                </header>\\n                <div class=\\\"modal-body js-modal-body\\\">\\n                    <div class=\\\"modal-text js-modal-text\\\"></div>                        \\n                </div>                    \\n                <div class=\\\"modal-footer double-centred-block\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                  <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"modal fade modal-guide-wrapper\\\" id=\\\"createGuide\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"createGuideModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n        <div class=\\\"modal-content\\\">\\n            <header class=\\\"modal-header-container\\\">\\n                <div class=\\\"modal-header\\\">\\n                    <div class=\\\"modal-title js-modal-title\\\">\\n                        <header class=\\\"header\\\"></header>\\n                    </div>\\n                </div>\\n            </header>\\n            <div class=\\\"modal-body modal-guide-body\\\">\\n                <div class=\\\"modal-guide-progress standard-block js-modal-guide-progress\\\">\\n                    <div class=\\\"modal-subheader js-options\\\">\\n                      <h1>Select species</h1>\\n                    </div>\\n                    <div class=\\\"hide-important steps js-steps\\\">\\n                        <div class=\\\"completed\\\">Step 1</div>\\n                        <div>Step 2</div>\\n                        <div>Step 3</div>\\n                    </div>\\n                </div>\\n                <div class=\\\"step-action-content js-step-action-content\\\">Step action</div>\\n                <nav aria-label=\\\"navigation for creating new lesson\\\" class=\\\"modal-guide-navigation js-modal-guide-navigation\\\">\\n                    \\n                  <button class=\\\"snap-icon-btn js-left\\\">\\n                    <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-left\\\"></i></span>\\n                    <span class=\\\"title\\\"></span>\\n                  </button>\\n\\n                    <div class=\\\"centred-block js-centre\\\"><span class=\\\"title\\\">Provenance</span></div>\\n                  \\n                    <button class=\\\"snap-icon-btn right-justify js-right\\\">\\n                      <span class=\\\"title\\\"></span>\\n                      <span class=\\\"arrow-wrapper js-arrow-wrapper\\\"><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span>\\n                    </button>                        \\n                  </nav>\\n            </div>\\n            <div class=\\\"modal-footer double-centred-block js-create-guide-close-btn\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n              <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n            </div>\\n        </div>\\n        </div>\\n    </div>\\n\\n    <!-- NEW LESSON MODAL -->\\n\\n    <div class=\\\"modal fade basic-modal\\\" id=\\\"lessonModal\\\" data-backdrop=\\\"static\\\" data-keyboard=\\\"false\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"lessonModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n                <header class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        <div class=\\\"centred-block justify-space-between js-modal-header-block margin-right\\\">\\n                          <div class=\\\"modal-title small-text js-modal-text-title\\\"><header></header></div>\\n                          <button class=\\\"btn small-text fit-width snap-btn margin-right js-review-progress\\\">Progress</button>\\n                        </div>\\n                    </div>\\n                </header>\\n                <div class=\\\"modal-body\\\">\\n                    <div class=\\\"modal-text js-modal-text\\\">\\n                        <div class=\\\"lesson-spinner double-centred-block\\\">\\n                            <div class=\\\"icon\\\"><i class=\\\"fas fa-sun slow-spin\\\"></i></div>\\n                        </div>\\n                    </div>\\n                </div>       \\n                <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                  <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n                </footer>             \\n            </div>\\n        </div>\\n    </div>\\n\\n    <!-- QUIZ MODAL -->\\n\\n    <div class=\\\"modal fade basic-modal\\\" id=\\\"quizModal\\\" data-backdrop=\\\"static\\\" data-keyboard=\\\"false\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"quizModalLabel\\\" aria-hidden=\\\"true\\\">\\n        <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n            <div class=\\\"modal-content\\\">\\n              <div class=\\\"quiz\\\">\\n                <header class=\\\"modal-header-container\\\">\\n                    <div class=\\\"modal-header\\\">\\n                        \\n                          <div class=\\\"modal-title js-modal-text-title\\\">\\n                            <header>\\n                              <div class=\\\"modal-header\\\">\\n                                <div class=\\\"js-quiz-header\\\">Species recognition</div>\\n                              </div>\\n                            </header>\\n                          </div>\\n                        \\n                    </div>\\n                </header>\\n                <div class=\\\"modal-body\\\">\\n                    <div class=\\\"modal-text js-modal-text\\\">\\n                      <main>          \\n                        <section class=\\\"quiz-top js-quiz-top\\\"></section>\\n                        <section class=\\\"quiz-middle js-quiz-middle\\\">Middle</section>\\n                        <section class=\\\"quiz-bottom js-quiz-bottom\\\"></section>\\n                      </main>\\n                    </div>\\n                </div>       \\n                <footer class=\\\"modal-footer double-centred-block js-modal-footer\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n                  <button class=\\\"btn small-text snap-btn fit-width\\\">Close</button>\\n                </footer>\\n              </div>      \\n            </div>\\n        </div>\\n    </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"iconic-taxa-categories js-iconic-taxa-categories\\\">\\n    <div class=\\\"double-centred-block\\\" id=\\\"aves\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"birds\\\"><i class=\\\"fas fa-dove\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Birds</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"amphibia\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"amphibians\\\"><i class=\\\"fas fa-frog\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Amphibians</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"mammalia\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"mammals\\\"><i class=\\\"fas fa-paw\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Mammals</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"insecta\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"insects\\\"><i class=\\\"fas fa-bug\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Insects</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"fungi\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"fungi and lichens\\\"><svg-icon class=\\\"si-glyph-mushrooms\\\"><src href=\\\"./static/icons/si-glyph-mushrooms.svg\\\"/></svg></button>\\n        <div class=\\\"small-text\\\">Fungi & Lichens</div></div>\\n      </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"plantae\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"plants\\\"><i class=\\\"fas fa-leaf\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Plants</div></div>\\n    </div>    \\n    <div class=\\\"double-centred-block\\\" id=\\\"reptilia\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"reptiles\\\"><i class=\\\"far fa-registered\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div>Reptiles</div></div>\\n    </div>\\n    <div class=\\\"double-centred-block\\\" id=\\\"lepidoptera\\\"><div>\\n      <button class=\\\"snap-icon-btn\\\" aria-label=\\\"butterflies and moths\\\"><i class=\\\"fas fa-barcode\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <div class=\\\"small-text\\\">Butterflies & Moths</div></div>\\n    </div>\\n</div>\\n<div class=\\\"hide-important guide-bottom-actions\\\">\\n    <span>Know what you want?</span>\\n    <span class=\\\"underline-link species-picker-link js-species-picker-link\\\">Species picker</span>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"{{ className }}\\\">\\n    <div class=\\\"actions js-actions\\\"></div>\\n    <div class=\\\"save-your-changes js-save-your-changes\\\"></div>\\n</div>\\n<div class=\\\"chosen js-chosen\\\">\\n    <div class=\\\"prop-value-block\\\"><span></span><span class=\\\"selected-text\\\"></span></div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div>\\n    <div class=\\\"inat snap-switch running-block\\\">\\n        <div class=\\\"embedded-switch\\\">\\n            <div class=\\\"txt-left\\\"><span>iNaturalist User</span></div>\\n            <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\">\\n                <div></div>\\n            </div>\\n            <div class=\\\"txt-right\\\"><span>Project</span></div>        \\n        </div>\\n    </div>\\n\\n    <div class=\\\"location-option inat-entry\\\">\\n        <div class=\\\"input-container standard-block bottom-aligned\\\">\\n            <form id=\\\"inatForm\\\" action=\\\"#\\\">\\n                <input id=\\\"inat-identity\\\" type=\\\"text\\\" placeholder=\\\"Start typing a user or project Id.\\\">\\n            </form>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"location-option chosen-guide-filter js-chosen-inat standard-block\\\">\\n        <div>Learn more about <a href=\\\"https://www.inaturalist.org/\\\" target=\\\"_blank\\\" class=\\\"underline-link\\\">iNaturalist</a>.</div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div>\\n    <div class=\\\"species-search js-species-search\\\">\\n        <div><div class=\\\"icon\\\"><i class=\\\"fas fa-sun slow-spin\\\"></i></div></div>\\n        <h2 class=\\\"standard-block\\\">This search is based on observations recorded by the public on <a class=\\\"underline-link\\\" target=\\\"_blank\\\" href=\\\"https://www.inaturalist.org/\\\">iNaturalist</a>.</h2>\\n    </div>\\n    <div>\\n        <div class=\\\"hide-empty request-feedback js-request-feedback\\\">Contacting iNaturalist</div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"border-bottom\\\">\\n    <div class=\\\"running-block vertical-centred-block location-option html5-location\\\">\\n        <div class=\\\"html5-location-place\\\"><button class=\\\"btn snap-action-btn js-set-location-btn\\\"></button><span class=\\\"landscape\\\"></span></div>\\n    </div>\\n    <div class=\\\"standard-block location-option place bottom-aligned\\\">\\n        <form id=\\\"locationForm\\\" action=\\\"#\\\">\\n          <div class=\\\"standard-block\\\">\\n            <label for=\\\"#inat-place\\\" class=\\\"extra-small-text\\\">Location</label>\\n            <input id=\\\"inat-place\\\" type=\\\"text\\\" placeholder=\\\"Or start typing the name of a place.\\\">\\n            <input class=\\\"hide\\\" type=\\\"submit\\\" value=\\\"\\\">\\n          </div>\\n        </form>\\n    </div>\\n    <div class=\\\"location-option margin-top range\\\">\\n        <div class=\\\"range-slider\\\">\\n            <div class=\\\"js-range\\\"></div>\\n            <div>\\n              <span class=\\\"range-limits\\\">0km</span>\\n              <span class=\\\"margin-right\\\" style=\\\"width: 100%;\\\"><input class=\\\"set-range-input js-set-range-input\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"250\\\" value=\\\"10\\\"></span>\\n              <span class=\\\"range-limits\\\"> 250km</span>\\n              <span class=\\\"saved js-range-saved\\\"></span>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"location-filter-options\\\">            \\n    <div>\\n      <div class=\\\"black-text\\\">Species by season</div>\\n      <div class=\\\"season snap-switch margin-top margin-bottom\\\">\\n          <div class=\\\"embedded-switch\\\">\\n              <div class=\\\"txt-left\\\"><span>{{ observableMonths }}</span></div>\\n              <div class=\\\"snap-switch-slider left js-snap-switch-slider\\\">\\n                  <div></div>\\n              </div>\\n              <div class=\\\"txt-right\\\"><span>All Year</span></div>\\n          </div>\\n      </div>  \\n    </div>\\n    <div>\\n      <div class=\\\"black-text\\\">Species by observation count</div>\\n      <div class=\\\"margin-top margin-bottom\\\">\\n        <span>\\n          Top <input min=\\\"1\\\" max=\\\"500\\\" required class=\\\"medium half-margin-right js-location-no-of-records\\\" type=\\\"number\\\" value=\\\"{{ noOfRecords }}\\\"> most observed.\\n        </span>\\n      </div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div>\\n    <input id=\\\"input-species\\\" type=\\\"text\\\" placeholder=\\\"Start typing a latin species name\\\" autofocus>            \\n</div>\\n\\n<div class=\\\"autocomplete-options-container hide-important\\\" id=\\\"snapdragon-species-autocomplete\\\" style=\\\"width:unset;\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"guide-text-container hide-empty\\\">\\n    <input id=\\\"input-species\\\" type=\\\"text\\\" placeholder=\\\"Start typing a latin species name\\\" autofocus>            \\n</div>\\n\\n<div class=\\\"autocomplete-options-container hide-important\\\" id=\\\"snapdragon-species-autocomplete\\\" style=\\\"width:unset;\\\"></div>\\n\\n<ul class=\\\"selected-species js-selected-species\\\" data-repeat-species=\\\"{{ selectedSpecies }}\\\">\\n    <li class=\\\"custom-control custom-checkbox\\\">\\n        <input type=\\\"checkbox\\\" class=\\\"margin-half-right\\\" id=\\\"{{ species.name }}\\\" checked>\\n        <label for=\\\"{{ species.name }}\\\">{{ species.name }}</label>\\n    </li>\\n</ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"selected-species-container\\\">\\n    <div class=\\\"scrollable open js-selected-species-container\\\"></div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<menu>\\n  <ul class=\\\"custom-lesson-menu-options\\\" data-repeat-option=\\\"{{ options }}\\\">\\n    <li data-option=\\\"{{ option.id }}\\\">\\n        <button class=\\\"icon snap-icon-btn arrow-wrapper\\\"><span class=\\\"small-text\\\">{{ option.text }}</span><i class=\\\"far fa-arrow-alt-circle-right\\\"></i></button>\\n    </li>\\n  </ul>\\n</menu>\\n\\n<!-- <hr class=\\\"double-margin-top double-margin-bottom\\\"> -->\\n\\n<div class=\\\"js-language-selection-container\\\"></div>\\n\\n<h3 class=\\\"standard-block centred-block js-persistence-warning\\\">\\n    <span><i class=\\\"fas fa-exclamation\\\"></i> You are not currently logged in. Your collection will not be availble outside this browser.</span>\\n</h3>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block double-centred-block\\\">\\n    <!-- <div class=\\\"lesson-name\\\" id=\\\"js-collection-name\\\">\\n        <span>{{ collection.name }}</span>\\n    </div> -->\\n    <div class=\\\"lesson-name hide-important\\\" id=\\\"js-input-collection-name\\\">\\n      <label for=\\\"#new-collection-name\\\" class=\\\"extra-small-text\\\">lesson name</label>\\n      <input id=\\\"new-collection-name\\\" type=\\\"text\\\" value=\\\"{{ collection.name }}\\\">\\n    </div>\\n    <div class=\\\"lesson-taxa\\\"><span class=\\\"js-lesson-taxa-count\\\">{{ collection.items.length }}</span> <span class=\\\"js-lesson-taxa\\\">{{ collection.taxa }}</span></div>\\n</div>\\n<div class=\\\"edit-species centred-block half-standard-block js-edit-species\\\">\\n    <button class=\\\"snap-btn fit-width\\\">Edit lesson</button>\\n</div>\\n\\n<div class=\\\"selected-species-container\\\">\\n    <div class=\\\"scrollable js-selected-species-container\\\"></div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"modal-content\\\">\\n    <div class=\\\"snapdragon-container\\\">        \\n\\n        <div class=\\\"large-text centred-block standard-block\\\">User access</div>\\n\\n        <form id=\\\"login-form\\\">\\n            <div class=\\\"standard-block centred-block\\\">\\n                <input id=\\\"login-email\\\" type=\\\"text\\\" placeholder=\\\"Email\\\">\\n            </div>\\n            <div class=\\\"standard-block centred-block\\\">\\n                <input id=\\\"login-password\\\" type=\\\"text\\\" placeholder=\\\"Password\\\">\\n            </div>\\n            <button id=\\\"js-login-btn\\\" class=\\\"btn snap-action-btn\\\">Log in</button>\\n        </form>\\n        <div class=\\\"standard-block centred-block hide-important js-logged-in\\\">You are now logged in.</div>\\n        <div class=\\\"standard-block vertical-centred-block hide-important js-not-logged-in\\\">\\n            <span class=\\\"standard-block centred-block\\\">Please check your email and password.</span>\\n            <span class=\\\"standard-block centred-block js-message\\\"></span>\\n        </div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"modal-content\\\">\\n    <div class=\\\"snapdragon-container\\\">        \\n        <form id=\\\"logout-form\\\">\\n            <div class=\\\"vertical-centred-block double-standard-block\\\">\\n                <span>You are logged in with the account:</span>\\n                <span>{{ email }}</span>\\n            </div>\\n            <div>\\n                <button id=\\\"js-logout-btn\\\" class=\\\"btn snap-action-btn\\\">Log out</button>\\n            </div>\\n        </form>\\n        <div class=\\\"standard-block centred-block hide-important js-logged-out\\\">You are now logged out.</div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li>\\n  <button id=\\\"QUIZ\\\" class=\\\"snap-icon-btn icon quiz-icon js-quiz\\\" data-toggle=\\\"modal\\\" data-target=\\\"#quizModal\\\" aria-label=\\\"quiz settings\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-stopwatch\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Quiz</span>\\n  </button>\\n</li>\\n\\n<li>\\n  <button id=\\\"GLOSSARY\\\" class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=\\\"modal\\\" data-target=\\\"#glossaryModal\\\" aria-label=\\\"glossary\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-book-open\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Glossary</span>\\n  </button>\\n</li>\\n\\n<li>\\n  <button id=\\\"LANGUAGE\\\" class=\\\"snap-icon-btn icon language js-language\\\" data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\" aria-label=\\\"language settings\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-language\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Language</span>\\n  </button>\\n</li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li>\\n  <button id=\\\"LESSONS\\\" class=\\\"snap-icon-btn portrait icon lessons js-lessons\\\" aria-label=\\\"home\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-bars\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Lessons</span>\\n  </button>\\n</li>\\n\\n<li>\\n  <button id=\\\"QUIZ\\\" class=\\\"snap-icon-btn icon quiz-icon js-quiz\\\" data-toggle=\\\"modal\\\" data-target=\\\"#quizModal\\\" aria-label=\\\"quiz settings\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-stopwatch\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Quiz</span>\\n  </button>\\n</li>\\n\\n<li>\\n  <button id=\\\"GLOSSARY\\\" class=\\\"snap-icon-btn icon glossary js-glossary\\\" data-toggle=\\\"modal\\\" data-target=\\\"#glossaryModal\\\" aria-label=\\\"glossary\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-book-open\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Glossary</span>\\n  </button>\\n</li>\\n\\n<li>\\n  <button id=\\\"SETTINGS\\\" class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\" aria-label=\\\"settings\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-cog\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Settings</span>\\n  </button>\\n</li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li>\\n  <button id=\\\"SETTINGS\\\" class=\\\"snap-icon-btn icon settings js-settings\\\" data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\" aria-label=\\\"settings\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-cog\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Settings</span>\\n  </button>\\n</li>\\n\\n<li>\\n  <button id=\\\"LOGIN\\\" class=\\\"snap-icon-btn icon login js-login\\\" data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\" data-is-logged-in=\\\"false\\\" aria-label=\\\"login\\\">\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-user-slash\\\"></i>\\n    <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-user-check\\\"></i>\\n    <span class=\\\"visually-hidden\\\">Login or logout</span>\\n  </button>\\n</li>\\n\\n<li>\\n  <a id=\\\"EMAIL\\\" class=\\\"landscape icon email js-email\\\" target=\\\"_blank\\\" href=\\\"mailto:danhartleybcn@gmail.com?subject=Learn The Planet\\\">\\n      <i aria-hidden=\\\"true\\\" focusable=\\\"false\\\" class=\\\"fas fa-envelope\\\"></i>\\n      <span class=\\\"visually-hidden\\\">Open email link</span>\\n  </a>\\n  </li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\">    \\n    <div class=\\\"card-card js-species-card\\\">\\n        <div id=\\\"card-header\\\" class=\\\"question-container\\\">\\n            \\n            <!-- <div class=\\\"species-header landscape\\\">                        \\n                <img src=\\\"{{ image.small }}\\\" alt=\\\"\\\">\\n            </div> -->\\n\\n            <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\">\\n                <i class=\\\"\\\"></i>\\n            </div>\\n\\n            <div class=\\\"hide-empty question-header\\\">\\n                <div>\\n                    <div class=\\\"names-container vernacular-name-badge js-names-container\\\">\\n                        <div>\\n                            <span class=\\\"vernacular-name\\\">{{ vernacularName }}</span>\\n                        </div>\\n                        <div>\\n                            <span class=\\\"binomial\\\">{{ name }}</span>\\n                            <span class=\\\"js-names-badge\\\"></span>\\n                            <span class=\\\"portrait bird-song-icon-disabled js-bird-song-player\\\" data-src='player' data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\">\\n                                <i class=\\\"fas fa-music\\\"></i>\\n                            </span>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"card-link-container\\\">\\n                <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n            </div>\\n            <!-- <div class=\\\"card-link-container\\\">\\n                <div class=\\\"card-link js-card-link\\\">\\n                    <span>Family</span>\\n                    <span>card<i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span>\\n                </div>\\n            </div> -->\\n    \\n        </div>            \\n        <div class=\\\"data-box-container landscape\\\">\\n            <div class=\\\"calendar-container landscape\\\">\\n                <div class=\\\"js-calendar-box\\\"></div>\\n            </div>\\n            \\n            <div class=\\\"inat-box js-inat-box\\\"></div>\\n            <div class=\\\"taxa-container landscape js-taxa-box\\\"></div>            \\n        </div>\\n        <div class=\\\"portrait-grid species-card-images carousel js-test-card-container-images\\\"></div>\\n        <div class=\\\"mixed-content-container scrollable\\\">\\n            <div class=\\\"landscape bird-song\\\">\\n                <div class=\\\"hide-empty\\\">\\n                    <iframe class=\\\"js-bird-song\\\" src='' scrolling='no' frameborder='0' width='80vw' height='115'>                    \\n                    </iframe>\\n                </div>\\n            </div>\\n            <div class=\\\"card-txt-block lookalikes js-lookalikes\\\"></div>\\n            <div class=\\\"js-info-box-details info-details\\\"></div>            \\n        </div>\\n        <div class=\\\"info-box js-info-box\\\"></div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\">    \\n    <div class=\\\"portrait-grid non-taxon-card-images carousel js-non-taxon-card-images\\\"></div>    \\n    <div class=\\\"card-card card non-taxon js-non-taxon-card\\\">\\n        <div id=\\\"taxon-card-header\\\" class=\\\"question-container\\\">\\n                \\n                <div class=\\\"species-header js-species-header\\\">                        \\n                    <img src=\\\"{{ image.small }}\\\" alt=\\\"\\\">\\n                </div>\\n\\n                <div class=\\\"hide-empty question-header\\\">\\n                    <div>\\n                        <div class=\\\"names-container js-names-container\\\">\\n                            <div>\\n                                Foliose\\n                            </div>\\n                            <div>\\n                                \\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n                \\n                <div class=\\\"card-link-container\\\">\\n                    <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n                </div>\\n    \\n\\n        </div>  \\n        <div class=\\\"non-taxa js-non-taxa\\\">                \\n            <div role=\\\"group\\\" class=\\\"btn-group\\\" data-toggle=\\\"buttons\\\" data-repeat-taxon=\\\"{{ group }}\\\">\\n                <label class=\\\"btn btn-secondary\\\" id=\\\"{{ taxon.id }}\\\">\\n                    <input type=\\\"radio\\\" name=\\\"options\\\" id=\\\"{{ taxon.id }}\\\" autocomplete=\\\"off\\\" checked> {{ taxon.id }}\\n                </label>\\n            </div>\\n        </div>            \\n        <div class=\\\"definitions\\\">\\n            <div class=\\\"non-taxa-definition js-non-taxa-definition\\\">\\n                <div></div>\\n            </div>\\n            <div class=\\\"non-taxa-definition \\\">\\n                <div class=\\\"id-box\\\">\\n                    <div>\\n                        <div class=\\\"landscape\\\"></div>\\n                        <div class=\\\"portrait\\\"></div>\\n                    </div>\\n                    <div>\\n                        <div></div>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"landscape species-card-wiki\\\">\\n                <span class=\\\"non-taxon-card-wiki js-non-taxon-card-wiki\\\"></span>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container\\\">\\n    <div class=\\\"taxon card-card js-taxon-card\\\">\\n        <div id=\\\"taxon-card-header\\\" class=\\\"question-container\\\">\\n            <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\">\\n                <i class=\\\"\\\"></i>\\n            </div>\\n\\n            <div class=\\\"hide-empty question-header\\\">\\n                <div>\\n                    <div class=\\\"names-container vernacular-name-badge js-names-container\\\">\\n                        <div>\\n                            <span>{{ vernacularName }}</span>                                \\n                        </div>\\n                        <div>\\n                            <span class=\\\"binomial\\\">{{ name }}</span>\\n                            <span class=\\\"names-badge js-names-badge\\\" data-toggle=\\\"modal\\\" data-target=\\\"#badgeListModal\\\">{{ occurrences }}</span>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        \\n            <div class=\\\"card-link-container\\\">\\n                <i class=\\\"disabled-icon far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n            </div>\\n            <!-- <div class=\\\"card-link-container\\\">\\n                <div class=\\\"card-link js-card-link\\\">\\n                    <span>Test</span>\\n                    <span>Card<i class=\\\"far fa-arrow-alt-circle-right\\\"></i></span>\\n                </div>\\n            </div> -->\\n        </div>  \\n        <div class=\\\"data-box-container sub-header\\\">\\n            <div class=\\\"data-box\\\">\\n                <div class=\\\"taxon-data js-taxon-rank\\\"><span>Rank</span> <span>{{ rank }}</span></div>\\n                <div class=\\\"taxon-data\\\"><span>Species</span> <span>{{ species }}</span></div>\\n                <div class=\\\"taxon-data js-taxon-genus\\\"><span>Genera</span> <span>{{ genera }}</span></div>\\n                <div class=\\\"taxon-data js-taxon-family\\\"><span>Families</span> <span>{{ families }}</span></div>\\n            </div>\\n            <div class=\\\"landscape external-links js-external-links\\\">\\n                <div><a href=\\\"{{ eol }}\\\" target=\\\"_blank\\\" class=\\\"underline-link\\\">EOL</a><span> taxon home page</span> <span class=\\\"names-badge\\\"> <i class=\\\"super fas fa-external-link-alt\\\"></i></span></div>\\n                <div><a href=\\\"{{ wiki }}\\\" class=\\\"underline-link\\\" data-toggle=\\\"modal\\\" data-target=\\\"#wikiModal\\\">Wikipedia page</a></div>\\n            </div>\\n        </div>\\n        <div class=\\\"mixed-content-container\\\">\\n            <div class=\\\"centred-block\\\">\\n                <div class=\\\"id-box-container\\\">\\n                    <div class=\\\"id-box\\\">\\n                        <div>\\n                        </div>\\n                        <div>\\n                            <div class=\\\"taxon-identification\\\">{{ identification }}</div>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\\"taxon-summary\\\">\\n                    <div>{{ summary }}</div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"info-box js-taxon-info-box\\\"></div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container test-card-container js-test-card-container\\\">\\n    <div class=\\\"js-test-card\\\">\\n        <div id=\\\"test-card-header\\\" class=\\\"question-container\\\">\\n            <div class=\\\"iconic-icon double-centred-block js-iconic-icon\\\">\\n                <i class=\\\"\\\"></i>\\n            </div>\\n            <div class=\\\"hide-empty question-header\\\">\\n                <div>\\n                    <div class=\\\"names-container {{ headerClassName }}\\\">\\n                        <div>\\n                            <h2 class=\\\"vernacular-name\\\">{{ vernacularName }}</h2>\\n                            <span class=\\\"hide-empty names-badge\\\"></span>\\n                        </div>\\n                        <div>\\n                            <h2 class=\\\"binomial\\\">{{ binomial }}</h2>\\n                            <span class=\\\"names-badge traits-count-badge js-traits-count-badge\\\"></span>\\n                            <h2 class=\\\"term-header hide-empty js-term-header\\\">{{ term }}</h2>\\n                        </div>\\n                    </div>                \\n                </div>\\n            </div>\\n\\n            <div class=\\\"card-link-container\\\">\\n                <i class=\\\"far fa-arrow-alt-circle-right js-card-link\\\"></i>\\n            </div>\\n        </div>\\n        <div class=\\\"test-card-question standard-block centred-block js-test-card-question border-bottom\\\">            \\n            <div class=\\\"flex question {{ className }}\\\">\\n                <h3 class=\\\"hide-empty question-question js-question-question\\\">{{ question }}</h3>\\n                <h3 class=\\\"hide-empty question-help js-question-help\\\">{{ help }}</h3>\\n                <h3 class=\\\"hide-empty question-statement js-statement-para\\\">{{ statement }}</h3>\\n                <h3 class=\\\"hide-empty margin-top question-provider-question js-question-para\\\">{{ providerQuestion }}</h3>\\n            </div>\\n        </div>\\n        <div class=\\\"test-card-content js-test-card-content scrollable\\\">\\n            <!-- Specific test content goes here -->\\n        </div>\\n        <div class=\\\"text-question js-txt-question\\\"></div>\\n        <div class=\\\"action-update-container\\\">\\n            <div class=\\\"action-update\\\">\\n                <button disabled class=\\\"btn snap-action-btn js-continue-lesson-btn\\\">Continue lesson</button>\\n            </div>\\n        </div>\\n    </div> \\n</div>\\n<div class=\\\"swap-out-card js-species-container\\\"></div>\\n<div class=\\\"swap-out-card js-taxon-container\\\"></div>\\n<div class=\\\"swap-out-card js-summary-container\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<figure>\\n    <figcaption class=\\\"hide\\\">{{ title }}</figcaption>\\n    <audio\\n        controls\\n        src=\\\"{{ mp3 }}\\\">\\n        Your browser does not support the\\n        <code>audio</code> element.\\n    </audio>\\n</figure>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul data-repeat-language=\\\"{{ languageNames }}\\\" class=\\\"scrollable badge-list\\\">\\n    <li class=\\\"capitalise\\\">\\n        <div class=\\\"margin-top uppercase\\\">{{ language.name }}</div>\\n        <ul data-repeat-common=\\\"{{ language.names }}\\\">\\n            <li>{{ common }}</li>\\n        </ul>\\n    </li>\\n</ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"calendar-box\\\">\\n        <div data-repeat-row=\\\"{{ data }}\\\" class=\\\"\\\">\\n            <div class=\\\"col\\\" data-repeat-value=\\\"{{ row }}\\\">\\n                <div title=\\\"{{ value.count }}\\\" class=\\\"{{ value.class }}\\\">{{ value.month }}</div>\\n            </div>\\n        </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"id-box\\\">\\n  <div>{{ id }}</div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"imageSlider_{{ identifier }}\\\" class=\\\"imageSlider carousel slide\\\" data-ride=\\\"carousel\\\" data-interval=\\\"false\\\">\\n  <div class=\\\"carousel-inner js-carousel-inner\\\">\\n      <div data-repeat-image=\\\"{{ images }}\\\">\\n        <div class=\\\"carousel-item image-slider-190\\\">\\n            <img \\n                role=\\\"button\\\"\\n                src=\\\"{{ image.medium }}\\\"\\n                data-title=\\\"{{ image.itemName }}\\\"\\n                data-source=\\\"{{ image.source }}\\\"\\n                data-license=\\\"{{ image.license }}\\\"\\n                data-rights-holder=\\\"{{ image.rightsHolder }}\\\"\\n                data-photographers-name=\\\"{{ image.photographersName }}\\\"\\n                data-url=\\\"{{ image.url }}\\\"\\n                data-provider=\\\"{{ image.provider }}\\\"\\n                data-item-name=\\\"{{ image.itemName }}\\\"\\n                data-index=\\\"{{ image.index }}\\\"\\n                alt=\\\"Give {{ image.itemName }} as your answer\\\">\\n        </div>\\n      </div>\\n      <div>\\n        <div class=\\\"attribution-layer js-attribution-layer {{ identifier }}\\\"></div>\\n        <ol class=\\\"carousel-indicators js-carousel-indicators\\\" data-repeat-image=\\\"{{ images }}\\\">\\n          <li data-target=\\\"#carouselExampleIndicators\\\" data-slide-to=\\\"{{ image.index }}\\\"></li>\\n        </ol>        \\n      </div>\\n  </div>        \\n  <a class=\\\"carousel-control-prev\\\" href=\\\"#imageSlider_{{ identifier }}\\\" role=\\\"button\\\" data-slide=\\\"prev\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\">\\n    <button class=\\\"btn snap-icon-btn carousel-control-prev-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button>\\n    <button class=\\\"sr-only\\\">Previous</button>\\n  </a>\\n  <div class=\\\"carousel-control-next\\\" href=\\\"#imageSlider_{{ identifier }}\\\" role=\\\"button\\\" data-slide=\\\"next\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\">\\n    <button class=\\\"btn snap-icon-btn carousel-control-next-icon\\\" data-slider=\\\"#imageSlider_{{ identifier }}\\\"></button>\\n    <button class=\\\"sr-only\\\">Next</button>\\n  </div>\\n  <div class=\\\"description_{{ identifier }} image-description\\\"></div>\\n  <div class=\\\"double-centred-block\\\"></div>\\n  </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"data-box\\\">\\n    <div>\\n        <span class=\\\"js-world\\\">Worldwide</span><span class=\\\"js-taxon-count\\\">---</span>\\n        </div>\\n        <div>\\n            <span class=\\\"js-place\\\">Location</span><span class=\\\"js-place-taxon-count\\\">---</span>\\n        </div>\\n    <div>\\n        <span><a target=\\\"_blank\\\" href=\\\"\\\" class=\\\"underline-link js-taxon-link underline-link-left-margin\\\">iNat</a></span>\\n        <span class=\\\"js-test-card-container-wiki\\\"></span>\\n        <span><a class=\\\"species-card-eol-link js-test-card-container-eol-link underline-link\\\">EOL</a></span>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div data-repeat-detail=\\\"{{ details }}\\\">\\n    <dl class=\\\"info_detail\\\">\\n        <dt>{{ detail.term }}</dt>\\n        <dd><img class=\\\"{{ detail.imgClassName }}\\\" src=\\\"{{ detail.img.url }}\\\" alt=\\\"\\\"></dd>\\n        <dd>{{ detail.definition }}</dd>\\n    </dl>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div id=\\\"traitSlider{{ id }}\\\" class=\\\"info carousel slide\\\" data-ride=\\\"false\\\" data-interval=\\\"false\\\">\\n    <div class=\\\"carousel-inner\\\" data-repeat-trait=\\\"{{ traits }}\\\">\\n      <dl class=\\\"carousel-item\\\">\\n          <div>\\n            <dt>{{ trait.name }}</dt>\\n            <dd>{{ trait.value }} {{ trait.unit }}</dd>\\n          </div>\\n          <div class=\\\"hide-important\\\">{{ trait.description }}</div>\\n      </dl>\\n    </div>\\n    <a class=\\\"carousel-control carousel-control-prev\\\" href=\\\"#traitSlider{{ id }}\\\" role=\\\"button\\\" data-slide=\\\"prev\\\">\\n      <button class=\\\"carousel-control-prev-icon\\\" aria-hidden=\\\"true\\\"></button>\\n      <button class=\\\"sr-only\\\">Previous</button>\\n    </a>\\n    <a class=\\\"carousel-control carousel-control-next\\\" href=\\\"#traitSlider{{ id }}\\\" role=\\\"button\\\" data-slide=\\\"next\\\">\\n      <button class=\\\"carousel-control-next-icon\\\" aria-hidden=\\\"true\\\"></button>\\n      <button class=\\\"sr-only\\\">Next</span>\\n      </a>\\n  </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"filter-language-option-block\\\">    \\n    <div class=\\\"filter-options\\\">\\n        <div class=\\\"language-options\\\">\\n            <div class=\\\"dropdown\\\">\\n                <button class=\\\"btn smaller-text snap-btn dropdown-toggle\\\" type=\\\"button\\\" id=\\\"taxonLanguageBtn\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\n                    Taxon language\\n                </button>\\n                <div class=\\\"dropdown-menu\\\" aria-labelledby=\\\"dropdownMenuButton\\\" data-repeat-language=\\\"{{ languages }}\\\">\\n                    <a id=\\\"{{ language.lang }}\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\">{{ language.name }}</a>\\n                </div>\\n            </div>\\n        </div>        \\n    </div>\\n    <h2 class=\\\"half-standard-block centred-block\\\">Common names will be shown in<span id=\\\"taxonLanguageTxt\\\">English</span>.</h2>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"js-relationship-card-list\\\" data-repeat-lookalike=\\\"{{ lookalikes }}\\\">\\n    <div class=\\\"lookalike-card\\\">\\n        <div>{{ lookalike.species }}</div>\\n        <div>{{ lookalike.speciesDescription }}</div>\\n        <!-- <button data-toggle=\\\"{{ lookalike.modal }}\\\" data-target=\\\"#cardModal\\\" class=\\\"snap-icon-btn smaller-text {{ lookalike.className }} js-test-card-container-link\\\" id=\\\"{{ lookalike.lookalike }}\\\">{{ lookalike.lookalike }}</button> -->\\n        <div class=\\\"js-test-card-container-link\\\">\\n            <span data-toggle=\\\"{{ lookalike.modal }}\\\" data-target=\\\"#cardModal\\\" class=\\\"{{ lookalike.className }}\\\" id=\\\"{{ lookalike.lookalike }}\\\">{{ lookalike.lookalike }}</span>\\n        </div>\\n        <div>{{ lookalike.lookalikeDescription }}</div>\\n    </div>\\n</div>    \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"\\n<div class=\\\"js-relationship-card-list\\\" data-repeat-relationship=\\\"{{ relationships }}\\\">\\n    <div class=\\\"relationship-card\\\">\\n        <div class=\\\"cols\\\">\\n            <div>Relationship</div><div>{{ relationship.type }}</div>\\n        </div>\\n        <div class=\\\"cols\\\">\\n            <div class=\\\"js-test-card-container-link\\\">\\n                <span data-toggle=\\\"{{ relationship.modal }}\\\" data-target=\\\"#cardModal\\\" class=\\\"{{ relationship.className }}\\\" id=\\\"{{ relationship.speciesA }}\\\">{{ relationship.speciesA }}</span>\\n            </div>                \\n            <div class=\\\"capitalise\\\">{{ relationship.speciesARole }}</div>\\n        </div>\\n        <div class=\\\"cols\\\">\\n            <div>{{ relationship.speciesB }}</div><div class=\\\"capitalise\\\">{{ relationship.speciesBRole }}</div>\\n        </div>\\n        <div>{{ relationship.description }}</div>\\n    </div>  \\n\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span class=\\\"feature-label js-compare-species-label\\\"></span>\\n<span title=\\\"Lookalike species\\\" class=\\\"landscape compare-species-link js-compare-species-link\\\" data-toggle=\\\"modal\\\" data-target=\\\"#imageComparisonModal\\\" data-slides=\\\"{{ slides }}\\\">\\n    <i class=\\\"fas fa-clone\\\"></i>\\n</span>\\n<span title=\\\"Lookalike species\\\" class=\\\"portrait compare-species-link js-compare-species-link\\\">\\n    <i class=\\\"fas fa-clone\\\"></i>\\n</span>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"attribution-layer\\\">\\n    <div class=\\\"rights-link js-rights-link\\\">\\n        <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\">\\n            <i class=\\\"fas fa-copyright\\\"></i>\\n        </div>\\n        <div></div>\\n        <div class=\\\"rights-link-copyright double-centred-block\\\">            \\n            <a href=\\\"{{ large }}\\\" target=\\\"_blank\\\">\\n              <span class=\\\"sr-only\\\">Opens in new window</span>\\n              <i class=\\\"fas fa-external-link-alt\\\"></i>\\n            </a>\\n        </div>\\n    </div>\\n    <div class=\\\"rights-attribution hide-important js-rights-attribution\\\">        \\n        <div class=\\\"rights-link-copyright double-centred-block js-copyright\\\">\\n            <i class=\\\"fas fa-copyright\\\"></i>\\n        </div>        \\n        <div class=\\\"double-centred-block\\\">\\n            <a href=\\\"{{ source }}\\\" target=\\\"_blank\\\">\\n                <span class=\\\"centred-block\\\">\\n                    <span class=\\\"sr-only\\\">Opens in new window</span>\\n                    <span class=\\\"underline-link half-margin-right\\\">{{ author }}</span>\\n                    <i class=\\\"super active-icon fas fa-external-link-alt\\\"></i>\\n                </span>\\n            </a>\\n    </div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<span>\\n    <span class=\\\"uppercase small-text js-native-container\\\"></span>\\n    <span class='rank'>{{ trait }}</span>\\n    <span class=\\\"lookalikes js-lookalikes\\\"></span>\\n    <!-- <span class=\\\"portrait bird-song-icon-disabled js-bird-song-player\\\" data-src='player' data-toggle=\\\"modal\\\" data-target=\\\"#basicModal\\\"> -->\\n        <!-- <i class=\\\"fas fa-music\\\"></i> -->\\n    <!-- </span> -->\\n    <span class=\\\"badge badge-light js-subspecies-badge\\\" data-toggle=\\\"modal\\\" data-target=\\\"#badgeListModal\\\">{{ subSpeciesCount }}</span> <span class=\\\"sr-only\\\">species of this family in the collection</span>\\n</span>\\n\\n<span class=\\\"hide-empty\\\">{{ familyVernacularName }}</span>\\n<span class=\\\"latin hide-empty\\\">{{ familyName }}</span>\\n\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container  -scrolling-container\\\">\\n    \\n    <h1 class=\\\"title standard-block double-centred-block border-bottom\\\">{{ title }}</h1 >\\n    \\n    <main class=\\\"snapdragon-intro padding\\\" \\n        style=\\\"margin: 0 2rem;\\n        display: flex;\\n        flex-direction: column;\\n        justify-content: space-evenly;\\n        top: calc(var(--vhStandardBlock));\\\">\\n        <h3 class=\\\"half-standard-block\\\">\\n            <span class=\\\"js-species-summary\\\">{{ speciesSummary }}</span>\\n        </h3>\\n        <h3 class=\\\"half-standard-block\\\">\\n            <span>Common taxon names are in {{ language }}.</span>\\n        </h3>\\n        <h3 class=\\\"half-standard-block\\\">\\n            <span>{{ season }}</span>\\n        </h3>\\n\\n        <h3 class=\\\"centred-block standard-block js-intro-text\\\">{{ lessonIntro }}</h3>\\n      </main>\\n\\n    <div class=\\\"scrollable\\\"></div>                \\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"home-scrolling-container js-home-scrolling-container\\\">\\n    <h1 class=\\\"title standard-block double-centred-block\\\">{{ video.title }}</h1>\\n    <div class=\\\"margin-left margin-right\\\">\\n      <div class=\\\"video\\\">\\n          <div style=\\\"min-height: 1px;\\\"></div>\\n          <iframe\\n              type=\\\"text/html\\\"\\n              id=\\\"embedded-video\\\"\\n              width=\\\"100%\\\"\\n              src=\\\"https://www.youtube.com/embed/{{ video.id }}?enablejsapi=1&playsinline=1&start={{ video.playAt }}\\\"\\n              frameborder=\\\"0\\\"\\n              allowfullscreen>\\n          </iframe>   \\n      </div>\\n    </div>\\n    <div class=\\\"scrollable\\\">\\n        <div class=\\\"one-and-half-standard-block centred-block justify-space-between padding-left\\\">\\n            <div class=\\\"centred-block\\\">\\n                <div class=\\\"margin-right\\\">\\n                    <img width=\\\"48px\\\" height=\\\"48px\\\" src=\\\"{{ video.src }}\\\" alt=\\\"\\\">\\n                </div>\\n                <div class=\\\"vertical-centred-block\\\">\\n                    <div><span class=\\\"hide margin-right\\\" >Created by:</span><span class=\\\"emphasis\\\">{{ video.presenter }}</span></div>\\n                    <!-- <div>\\n                        <span class=\\\"hide margin-right\\\">{{ video.webLabel }}:</span>\\n                        <a class=\\\"underline-link\\\" href=\\\"{{ video.webUrl }}\\\" target=\\\"_blank\\\">Channel</a>\\n                        <span class=\\\"names-badge\\\"> <i class=\\\"fas fa-external-link-alt\\\"></i></span>\\n                    </div> -->\\n                    <div><span class=\\\"hide margin-right\\\" >Location:</span><span class=\\\"font-size-small\\\">{{ video.location }}</span></div>\\n                </div>\\n            </div>\\n            <!-- <div class=\\\"centred-block justify-end padding-right js-lesson-links\\\">\\n            </div> -->\\n        </div>        \\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"standard-block border-bottom double-centred-block\\\"></div>\\n<div class=\\\"tiles-container\\\">\\n    <div class=\\\"squares js-tiles\\\" data-repeat-image=\\\"{{ images }}\\\">\\n        <div>\\n            <img class=\\\"square\\\"                    \\n            src=\\\"{{ image.medium }}\\\"\\n            data-toggle=\\\"modal\\\" data-target=\\\"#imageModal\\\"\\n            data-item-name=\\\"{{ image.itemName }}\\\"\\n            data-url=\\\"{{ image.url }}\\\" />\\n        </div>              \\n    </div>\\n</div>\\n\\n<div class=\\\"lesson-companion\\\">\\n    <!-- 9 things about Dill: #1 -->\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-item one-and-half-standard-block vertical-evenly-spaced-block\\\">\\n    <div class=\\\"lesson-name\\\" id=\\\"js-input-collection-name\\\">\\n        <input type=\\\"text\\\" value=\\\"{{ collection.name }}\\\">\\n    </div>\\n    <div class=\\\"margin-left lesson-taxa\\\"><span class=\\\"js-lesson-taxa-count\\\">{{ collection.items.length }}</span> <span class=\\\"js-lesson-taxa\\\">{{ collection.taxa }}</span></div>\\n</div>\\n\\n<div class=\\\"selected-species-container\\\">\\n    <div class=\\\"open scrollable js-selected-species-container\\\"></div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list-header centred-block btn standard-block\\\">\\n    <div class=\\\"standard-block js-toggle-element\\\">\\n        <div>\\n            <div class=\\\"main-header\\\">\\n                <h2>Lessons</h2>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"margin-right standard-block js-toggle-control\\\">    \\n        <button data-toggle=\\\"modal\\\" data-target=\\\"#createGuide\\\" class=\\\"btn snap-btn margin-right small-text js-create-custom-lesson\\\">Create lesson</button>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"lesson-list js-lesson-list\\\">\\n    <ul class=\\\"scrollable js-lesson-container\\\" data-toggle=\\\"buttons\\\">\\n    </ul>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<li>\\n  <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"relative lesson-list-carousel-item js-lesson-list-carousel-item\\\">\\n      <div class=\\\"landscape double-centred-block\\\">\\n        <div class=\\\"lesson-icon\\\">\\n          <picture>\\n            <source srcset=\\\"https://storage.googleapis.com/snapdragon-222014.appspot.com/dist/1x1-transparent-pixel.png 1w\\\"\\n                    media=\\\"(max-width: 767px)\\\">\\n            <img src=\\\"{{ lesson.icon }}\\\" alt=\\\"{{ lesson.name }}\\\" />\\n          </picture>\\n        </div>\\n      </div>\\n      <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-list-item js-lesson-list-item\\\" data-has-video=\\\"{{ lesson.hasVideo }}\\\">\\n          <div>            \\n              <div class=\\\"lesson-name js-lesson-title\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">\\n                  <span id=\\\"lesson_{{ lesson.id }}\\\" class=\\\"lesson-title margin-right {{ lesson.isCollectionEditableClass }}\\\">{{ lesson.name }}</span>\\n              </div>\\n              <div class=\\\"lesson-taxa\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.taxa }}</div>\\n              <div class=\\\"latin hide-empty js-lesson-video-state\\\" data-lesson-id=\\\"{{ lesson.id }}\\\">{{ lesson.videoState }}</div>         \\n          </div> \\n          <div data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"lesson-review js-lesson-review\\\">\\n              <div class=\\\"flex\\\">\\n                  <div class=\\\"centred-block fit-width margin-top\\\">\\n                      <button data-toggle=\\\"modal\\\" data-target=\\\"#glossaryModal\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"vocab test for {{ lesson.name }} lesson\\\" class=\\\"lesson-terms-review {{ lesson.hasTermsClass }} margin-right fit-width js-terms-review-link btn snap-btn smaller-text\\\" data-toggle=\\\"modal\\\" data-target=\\\"#glossaryModal\\\">Vocab test</button>\\n                  </div>\\n                  <div class=\\\"vertical-centred-block relative margin-top\\\">\\n                      <div class=\\\"centred-block\\\">\\n                        <button data-toggle=\\\"modal\\\" data-target=\\\"#lessonModal\\\" data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"landscape btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button>\\n                        <button data-lesson-id=\\\"{{ lesson.id }}\\\" aria-label=\\\"{{ lesson.name }} lesson quiz\\\" class=\\\"portrait btn snap-btn smaller-text margin-right fit-width js-review-link\\\">{{ lesson.reviewState }}</button>\\n                        <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"review-spinner hide\\\"><i class=\\\"fas fa-sun slow-spin\\\"></i></span>\\n                      </div>\\n                    <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide-important inline-progress-container js-review\\\">\\n                    <span class=\\\"absolute\\\">&nbsp;</span>\\n                    </span>\\n                    <span data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"hide margin-right js-loading-review-message\\\">\\n                        <span><i class=\\\"fas fa-sync slow-spin\\\"></i></span>\\n                    </span>                  \\n                  </div>\\n              </div>\\n          </div>\\n      </div>\\n      <div class=\\\"lesson-list-action-icons\\\">\\n          <div class=\\\"landscape\\\">\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-is-youtube-icon=\\\"true\\\" class=\\\"snap-icon-btn fit-width js-lesson-list-youtube\\\" aria-label=\\\"play video for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fab fa-youtube youtube-icon {{ lesson.hideVideoClass }}\\\"></i>\\n                <i class=\\\"fas fa-align-left youtube-icon {{ lesson.hideTextIntroClass }}\\\"></i>\\n              </button>\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"snap-icon-btn fit-width js-lesson-list-chevron\\\" aria-label=\\\"species list for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fas fa-chevron-down\\\"></i>                \\n              </button>\\n          </div>\\n          <div class=\\\"portrait\\\">\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" data-lesson-is-youtube-icon=\\\"true\\\" class=\\\"snap-icon-btn js-lesson-list-youtube {{ lesson.hideVideoClass }}\\\" aria-label=\\\"play video for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fab fa-youtube youtube-icon\\\"></i>\\n              </button>\\n              <button data-lesson-id=\\\"{{ lesson.id }}\\\" class=\\\"chevron-icon snap-icon-btn js-lesson-list-chevron {{ lesson.hideTextIntroClass }}\\\" aria-label=\\\"species list for the lesson {{ lesson.name }}\\\">\\n                <i class=\\\"fas fa-chevron-down\\\"></i>\\n              </button>\\n          </div>\\n      </div>\\n  </div>\\n  <div data-container-id=\\\"{{ lesson.id }}\\\" class=\\\"species-container js-species-container\\\"></div>\\n</li>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div>\\n    <div>{{ note.tag }}</div>\\n    <div>{{ note.description }}</div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<table id=\\\"species_list_id_{{ id }}\\\" class=\\\"species-table js-species-list\\\" style=\\\"width: 100%;\\\">\\n    <tbody data-repeat-item=\\\"{{ itemImages }}\\\">\\n        <tr class=\\\"table-row master js-list-item\\\" id=\\\"id_{{ item.id }}\\\">\\n            <td id=\\\"{{ item.name }}\\\" data-snap-index=\\\"{{ item.snapIndex }}\\\">\\n              <button class=\\\"btn snap-icon-btn double-centred-block\\\">\\n                <img \\n                    id=\\\"{{ item.name }}\\\" \\n                    src=\\\"{{ item.small }}\\\" \\n                    alt=\\\"Open gallery to more photos of {{ item.name }}\\\" \\n                    data-toggle=\\\"modal\\\" \\n                    data-item-name=\\\"{{ item.name }}\\\" \\n                    data-target=\\\"#imageModal\\\" \\n                    data-id=\\\"{{ item.name }}\\\"                                 \\n                    data-url=\\\"{{ item.url }}\\\" \\n                    data-rights-holder=\\\"{{ item.rightsHolder }}\\\" \\n                    data-title=\\\"{{ item.name }}\\\"\\n                    data-license=\\\"{{ item.license }}\\\"                                \\n                    data-source=\\\"{{ item.source }}\\\"\\n                    data-provider=\\\"{{ item.provider }}\\\">\\n              </button>\\n            </td>\\n            <td>\\n                <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.name }}\\\" data-vernacular-name=\\\"{{ item.vernacularName }}\\\" data-id=\\\"{{ item.id }}\\\" data-type=\\\"speciesCardLink\\\" data-target=\\\"#cardModal\\\" class=\\\"snap-link-btn underline-link js-test-card-container-link\\\">{{ item.vernacularName }}</button>\\n                <span class=\\\"no-underline-link latin-name\\\">\\n                    <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.name }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=\\\"genus\\\" data-genus=\\\"{{ item.genus }}\\\" data-target=\\\"#cardModal\\\" class=\\\"{{ item.genusLinkClass }}\\\">{{ item.genus }}</button> <span>{{ item.species }}</span>\\n                </span>\\n            </td>\\n            <td class=\\\"wide-screen\\\">\\n                <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.taxonomy.family }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=\\\"family\\\" data-family=\\\"{{ item.taxonomy.family }}\\\" data-target=\\\"#cardModal\\\" class=\\\"no-underline-link {{ item.familyLinkClass }}\\\">{{ item.taxonomy.family }}</button>\\n                <button data-toggle=\\\"modal\\\" data-name=\\\"{{ item.taxonomy.order }}\\\" data-url=\\\"{{ item.url }}\\\" data-rank=\\\"order\\\" data-order=\\\"{{ item.taxonomy.order }}\\\" data-target=\\\"#cardModal\\\" class=\\\"no-underline-link {{ item.orderLinkClass }} js-order-link\\\">{{ item.taxonomy.order }}</button>\\n            </td>\\n            <td class=\\\"{{ item.iconicTaxon }} {{ item.hasTaxonClassName }}\\\">\\n                <span id=\\\"{{ item.id }}\\\" name=\\\"{{ item.name }}\\\"><i class=\\\"{{ item.iconicTaxonIcon }}\\\"></i></span>\\n                <span class=\\\"mushroom-icon {{ item.hideFungiIcon }}\\\"></span>\\n            </td>\\n            <td class=\\\"{{ item.hasVideoClassName }}\\\">\\n                <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width js-youtube\\\" aria-label=\\\"start video from the species {{ item.name }}\\\">\\n                    <i class=\\\"fab fa-youtube youtube-icon\\\" data-name=\\\"{{ item.name }}\\\"></i>\\n                </button>\\n            </td>\\n            <td class=\\\"{{ item.hasVideoClassName }}\\\">\\n                <button data-name=\\\"{{ item.name }}\\\" class=\\\"snap-icon-btn fit-width accordion-icon js-accordion\\\" aria-label=\\\"video commentary for the species {{ item.name }}\\\">\\n                  <i data-name=\\\"{{ item.name }}\\\" class=\\\"fas fa-chevron-down\\\"></i>\\n                </button>\\n            </td>\\n        </tr>\\n    </tbody>\\n</table>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\">\\n  <div class=\\\"strip\\\">\\n      <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\">\\n        <span>{{ answer.term }}</span>\\n      </button>\\n  </div>\\n</div>\\n    \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"mixed-specimen-container\\\">\\n    <div class=\\\"margin-bottom\\\"><span>{{ help }}</span></div>\\n    <ul class=\\\"traits-names-txt js-traits-names-txt\\\" data-repeat-trait=\\\"{{ traits }}\\\">\\n        <li>\\n            <img src=\\\"{{ trait.img.url }}\\\" alt=\\\"{{ trait.term }}\\\">\\n            <span>{{ trait.term }}</span>\\n        </li>\\n    </ul>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<ul class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\">\\n  <li class=\\\"strip\\\">\\n      <button class=\\\"btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\" data-name=\\\"{{ answer.name }}\\\" data-names=\\\"{{ answer.names }}\\\">\\n          <span>{{ answer.term }}</span>\\n      </button>\\n    </li>\\n</ul>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"strips description js-rptr-strips\\\" data-repeat-answer=\\\"{{ answers }}\\\">\\n    <div class=\\\"strip\\\">\\n        <button class=\\\"double-centred-block btn snap-icon-btn\\\" data-answer-index=\\\"{{ answer.index }}\\\">\\n            <img width=\\\"25px\\\" height=\\\"25px\\\" src=\\\"{{ answer.img.url }}\\\" alt=\\\"\\\">\\n            <span>{{ answer.term }}</span>\\n        </button>\\n    </div>\\n  </div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"species-card-images carousel js-test-card-container-images\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"horizontal-evenly-spaced-block js-no-questions\\\">\\n    <span>You haven't answered any questions yet.</span>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"score-summary-row species\\\">\\n    <div></div>\\n    <div>\\n        <div></div>\\n        <div>\\n            <span>{{ vernacularName }}</span>\\n            <span class=\\\"latin\\\">{{ binomial }}</span>\\n        </div>                \\n    </div>\\n    <div>{{ score }}</div>\\n</div>\\n\\n    <div data-repeat-row=\\\"{{ rows }}\\\">\\n\\n    <button class=\\\"btn snap-icon-btn score-summary-row header\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#{{ row.id }}\\\" aria-expanded=\\\"false\\\" aria-controls=\\\"{{ row.id }}\\\">  \\n        <div data-is-true=\\\"{{ row.success }}\\\">\\n            <i class=\\\"fas fa-check\\\"></i>\\n            <i class=\\\"fas fa-times\\\"></i>\\n        </div>\\n        <div>\\n            <div class=\\\"binomial\\\">{{ row.statement }}</div>\\n            <div>{{ row.questionText }}</div>\\n        </div>\\n        <div>\\n            <i class=\\\"fas fa-chevron-down\\\"></i>\\n        </div>\\n    </button>\\n    \\n    <div id=\\\"{{ row.id }}\\\" class=\\\"collapse score-summary-row in-columns js-collapse\\\" data-repeat-answer=\\\"{{ row.answers }}\\\" >  \\n        <div data-question=\\\"{{ ^.row.question }}\\\">\\n            <div>                    \\n            </div>\\n            <div data-is-true=\\\"{{ answer.isTrue }}\\\" data-is-wrong-answer=\\\"{{ answer.isWrongAnswer }}\\\">\\n                <div data-show-image=\\\"{{ answer.hasImage }}\\\">\\n                    <img data-has-image=\\\"{{ answer.hasImage }}\\\" src=\\\"{{ answer.url }}\\\" alt=\\\"{{ answer.value }}\\\">\\n                </div>\\n                <div>\\n                    <span>{{ answer.value }}</span><span class=\\\"hide-empty margin-left\\\">{{ answer.name }}</span>\\n                </div>\\n                <div></div>\\n            </div>\\n            <div></div>\\n        </div>\\n    </div>\\n\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"snapdragon-container score-summary-container js-test-card-container\\\">\\n    <div class=\\\"js-summary-card\\\">\\n        <div class=\\\"test-card-question standard-block centred-block js-test-card-question\\\">            \\n            <div class=\\\"question\\\">\\n                    <div>\\n                        <span class=\\\"hide-empty question-question js-question-question\\\">Quiz progress</span>\\n                        <span class=\\\"hide-empty question-statement\\\"></span>\\n                    </div>\\n                </div>\\n        </div>\\n        <div id=\\\"accordion\\\" class=\\\"score-summary scrollable review-summary\\\">\\n            <div class=\\\"score-summary-row-title\\\">\\n                <div>\\n                    <div class=\\\"double-centred-block\\\">\\n                        <span class=\\\"uppercase\\\">{{ collection.name }}</span>\\n                    </div>\\n                    <div class=\\\"double-centred-block\\\">\\n                        <span>Round {{ lesson.currentRound }} of {{ lesson.rounds }}</span>\\n                    </div>                \\n                </div>\\n            </div>\\n            <div class=\\\"score-summary-footer running-block centred-block\\\">\\n                <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button>\\n            </div>\\n            <div class=\\\"js-score-summary-rows\\\"></div>\\n            <div class=\\\"score-summary-footer running-block centred-block\\\">\\n                <button class=\\\"btn snap-btn fit-width js-continue-link\\\">Continue lesson</button>\\n            </div>\\n        </div>    \\n    </div>\\n</div>\\n\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\">\\n    <button class=\\\"btn snap-icon-btn block\\\">\\n      <span class=\\\"given genus\\\">{{ genus }}</span>\\n    </button>\\n    <button class=\\\"btn snap-icon-btn block\\\">\\n      <span class=\\\"species\\\">{{ species }}</span>\\n    </button>\\n</div>\\n<div class=\\\"text-complete-container\\\">\\n    <div class=\\\"margin-bottom landscape\\\">Click to select the correct name:</div>\\n    <div class=\\\"margin-bottom portrait\\\">Tap to select the correct name:</div>\\n    <div class=\\\"pool js-pool\\\" data-repeat-answer=\\\"{{ answers }}\\\">    \\n        <button type=\\\"submit\\\" class=\\\"btn snap-icon-btn block\\\">\\n            <span>{{ answer.value }}</span>\\n        </button>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"js-test-card-container-images species-card-images\\\"></div>\\n<div class=\\\"text-entry\\\">\\n    <input class=\\\"js-txt-input\\\" type=\\\"text\\\" placeholder=\\\"Genus\\\">\\n</div>\\n<div class=\\\"landscape help-txt binomial js-help-txt\\\"></div>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<div class=\\\"centred-block standard-block\\\">\\n    <input disabled class=\\\"js-txt-input\\\" type=\\\"text\\\" placeholder=\\\"Genus\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\">        \\n</div>\\n<div>\\n    <div class=\\\"help-txt binomial margin-left js-help-txt\\\"></div>\\n</div>\\n<div class=\\\"text-entry-container\\\">    \\n    <div class=\\\"js-pool-letters pool margin-left margin-top margin-bottom\\\"></div>\\n    <div class=\\\"horizontal-buttons\\\">\\n        <button class=\\\"btn btn-tertiary js-toggle-keyboard\\\">Enable keyboard</button>\\n        <button class=\\\"btn snap-action-btn js-check-answer\\\">Check answer</button>\\n        <button class=\\\"btn btn-tertiary js-delete-letter\\\">Delete last letter</button>\\n    </div>    \\n</div>\";\n// Exports\nmodule.exports = code;","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./common.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./common.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./common.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./create-guide.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./create-guide.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./create-guide.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./non-main.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./non-main.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./non-main.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon-colours.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon-colours.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon-colours.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon-media.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon-media.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon-media.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./snapdragon.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./species-list.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./species-list.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./species-list.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}